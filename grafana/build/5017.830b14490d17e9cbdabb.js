(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[5017],{76287:(Y,A,e)=>{"use strict";e.d(A,{p:()=>o});var t=e(96540),n=e(94841);function o(s){const{children:r,instanceSettings:g}=s,u=(0,t.useMemo)(()=>({instanceSettings:g,meta:g.meta}),[g]);return t.createElement(n.o.Provider,{value:u},r)}},94841:(Y,A,e)=>{"use strict";e.d(A,{o:()=>n});var t=e(96540);const n=(0,t.createContext)(void 0)},13834:(Y,A,e)=>{"use strict";e.d(A,{a:()=>o});var t=e(96540),n=e(94841);function o(s){const{children:r,...g}=s;return t.createElement(n.o.Provider,{value:g},r)}},95187:(Y,A,e)=>{"use strict";e.d(A,{S:()=>t});function t(n){return"instanceSettings"in n&&"meta"in n}},92470:(Y,A,e)=>{"use strict";e.d(A,{Q:()=>o});var t=e(96540),n=e(94841);function o(){const u=(0,t.useContext)(n.o);if(!u)throw new Error("usePluginContext must be used within a PluginContextProvider");return u}function s(){return o().meta}function r(){return o().meta.jsonData}function g(){return o().meta.info.version}},33948:(Y,A,e)=>{"use strict";e.d(A,{I:()=>s,f:()=>o});var t=e(11261),n=e(14236);class o{constructor(u,d){return this.fields=[],this.length=0,s(u,d)}}function s(g,u){const d={fields:[],length:g.length};if(!g?.length)return d;if(u){for(const l of u)d.fields.push(r(l,g.map(f=>f[l])));return d}const i=g.find(l=>l!=null);return i!=null&&(typeof i=="object"?d.fields=Object.keys(i).map(l=>r(l,g.map(f=>f[l]))):d.fields.push(r(t.Bc,g))),d}function r(g,u){const d={name:g,config:{},values:u,type:t.PU.other};return d.type=(0,n.dF)(d)??t.PU.other,d}},33526:(Y,A,e)=>{"use strict";e.d(A,{x:()=>o});var t=e(36120),n=e(37471);class o extends n.k{constructor(r){super(void 0,g=>new t.$({...r,buffer:g}))}}},89667:(Y,A,e)=>{"use strict";e.d(A,{EL:()=>r,Nw:()=>d,or:()=>u,t:()=>s});var t=e(11261),n=e(14236);const o={Inf:1/0,NegInf:-1/0,Undef:void 0,NaN:NaN};function s(i,l){for(const f in i){const c=o[f];for(const h of i[f])h<l.length&&(l[h]=c)}}function r(i,l){for(let f=0;f<l.length;f++)l[f]=i[Number(l[f])]}function g(i,l){for(const f of l)if(f!=null)return(0,n.by)(i,f);return t.PU.other}function u(i){const{schema:l,data:f}=i;if(!l||!l.fields)throw new Error("JSON needs a fields definition");const c=f?f.values.reduce((p,m)=>Math.max(p,m.length),0):0,h=l.fields.map((p,m)=>{let a=f?f.values[m]:[],v=a.length,E=p.type;v!==c&&(a.length=c,a.fill(void 0,v));let D=f?.entities?.[m];D&&s(D,a);let b=f?.enums?.[m];b&&(r(b,a),E=t.PU.string);const P=f?.nanos?.[m],y={...p,type:E??g(p.name,a),config:p.config??{},values:a,entities:D??{}};return P!=null&&(y.nanos=P),y});return{...l,fields:h,length:c}}function d(i){const l={values:[]},f=[];let c=!1;const h={refId:i.refId,meta:i.meta,name:i.name,fields:i.fields.map(p=>{const{values:m,nanos:a,state:v,display:E,...D}=p;return"entities"in D&&delete D.entities,l.values.push(m),a!=null?(f.push(a),c=!0):f.push(null),D})};return c&&(l.nanos=f),{schema:h,data:l}}},78368:(Y,A,e)=>{"use strict";e.d(A,{R:()=>n});var t=e(18008);class n extends t.F{constructor(s){super(),this.data=s,this.index=0;const r={},g={};for(let u=0;u<s.fields.length;u++){const d=s.fields[u];if(!d.name)continue;g[d.name]=d;const i=()=>d.values.get(this.index);r.hasOwnProperty(d.name)||Object.defineProperty(r,d.name,{enumerable:!0,get:i}),r.hasOwnProperty(u.toString())||Object.defineProperty(r,u,{enumerable:!1,get:i})}this.obj=r,this.fields=g}get dataFrame(){return this.data}get length(){return this.data.length}getFieldDisplayProcessor(s){if(!this.dataFrame||!this.dataFrame.fields)return;const r=this.dataFrame.fields[s];if(!(!r||!r.display))return r.display}get(s){return this.index=s,this.obj}toArray(){return new Array(this.data.length).fill(0).map((s,r)=>({...this.get(r)}))}}},85404:(Y,A,e)=>{"use strict";e.d(A,{L:()=>o});var t=e(11261),n=e(14236);class o{constructor(r){this.fields=[],this.fieldByName={},this.fieldByType={},this.fields=r.fields.map((g,u)=>({...g,index:u}));for(let g=0;g<r.fields.length;g++){const u=r.fields[g];if(u.type===t.PU.other){const d=(0,n.dF)(u);d&&(u.type=d)}this.fieldByType[u.type]||(this.fieldByType[u.type]=[]),this.fieldByType[u.type].push({...u,index:g}),this.fieldByName[u.name]?console.warn("Duplicate field names in DataFrame: ",u.name):this.fieldByName[u.name]={...u,index:g}}}getFields(r){if(!r)return[...this.fields];const g=this.fieldByType[r];return g?[...g]:[]}hasFieldOfType(r){const g=this.fieldByType[r];return g&&g.length>0}getFirstFieldOfType(r,g=!1){return this.fieldByType[r]?.find(i=>g||!i.config.custom?.hidden)}hasFieldNamed(r){return!!this.fieldByName[r]}hasFieldWithNameAndType(r,g){return!!this.fieldByName[r]&&this.fieldByType[g].filter(u=>u.name===r).length>0}getFieldByName(r){return this.fieldByName[r]}getFieldsByLabel(r,g){return Object.values(this.fieldByName).filter(u=>u.labels&&u.labels[r]===g)}}},37471:(Y,A,e)=>{"use strict";e.d(A,{p:()=>g,k:()=>u});var t=e(2543),n=e(11261),o=e(14236);function s(d,i){return i.type||(i.name==="time"||i.name==="Time"?i.type=n.PU.time:i.type=(0,o.HW)(d)),i.type===n.PU.number?l=>parseFloat(l):i.type===n.PU.boolean?l=>!(l[0]==="F"||l[0]==="f"||l[0]==="0"):l=>l}var r=e(18008);const g=void 0;class u extends r.F{constructor(i,l){if(super(),this.fields=[],this.first=[],this.parsers=void 0,this.creator=l||(f=>f??[]),i){const{name:f,refId:c,meta:h,fields:p}=i;if(f&&(this.name=f),c&&(this.refId=c),h&&(this.meta=h),p)for(const m of p)this.addField(m)}Object.defineProperty(this,"length",{enumerable:!0,get:()=>this.first.length})}get length(){return this.first.length}addFieldFor(i,l){return this.addField({name:l||"",type:(0,o.HW)(i)})}addField(i,l){let f;i.values&&(f=i.values);let c=i.type;!c&&(i.name==="time"||i.name==="Time")?c=n.PU.time:(!c&&f&&f.length&&(c=(0,o.HW)(f[0])),c||(c=n.PU.other));let h=i.name;h||(h=`Field ${this.fields.length+1}`);const p={...i,name:h,type:c,config:i.config||{},values:this.creator(f)};if(c===n.PU.other&&(c=(0,o.dF)(p),c&&(p.type=c)),this.fields.push(p),this.first=this.fields[0].values,l)for(;p.values.length<l;)p.values.push(g);else this.validate();return p}validate(){const i=this.fields.reduce((l,f)=>Math.max(l,f.values.length),0);for(const l of this.fields)for(;l.values.length!==i;)l.values.push(g)}setParser(i,l){return this.parsers||(this.parsers=new Map),this.parsers.set(i,l),l}parseValue(i,l){let f=this.parsers?.get(i);return f||(f=this.setParser(i,s(l,i))),f(l)}appendRow(i){for(let l=this.fields.length;l<i.length;l++)this.addField({name:`Field ${l+1}`,type:(0,o.HW)(i[l])});if(this.length<1)for(let l=0;l<this.fields.length;l++){const f=this.fields[l];(!f.type||f.type===n.PU.other)&&(f.type=(0,o.HW)(i[l]))}for(let l=0;l<this.fields.length;l++){const f=this.fields[l];let c=i[l];f.type!==n.PU.string&&(0,t.isString)(c)&&(c=this.parseValue(f,c)),f.values.push(c)}}push(...i){for(const l of i)this.add(l);return this.length}reverse(){for(const i of this.fields)i.values.reverse();return this}add(i){const l=i;for(const f of this.fields){let c=l[f.name];f.type!==n.PU.string&&(0,t.isString)(c)&&(c=this.parseValue(f,c)),c===void 0&&(c=g),f.values.push(c)}}set(i,l){if(i>this.length)throw new Error("Unable to set value beyond current length");const f=l||{};for(const c of this.fields)c.values[i]=f[c.name]}get(i){const l={};for(const f of this.fields)l[f.name]=f.values[i];return l}toJSON(){return(0,o.Kl)(this)}}},9631:(Y,A,e)=>{"use strict";e.d(A,{Kh:()=>u,Ls:()=>p,k9:()=>f,m8:()=>c,wC:()=>a});var t=e(11261),n=e(8249),o=e(73060),s=e(43659),r=e(14236),g=e(89667),u=(P=>(P.Append="append",P.Replace="replace",P))(u||{});const d="__name__";var i=(P=>(P[P.wide=0]="wide",P[P.labels=1]="labels",P))(i||{});const l=class{constructor(P){this.options=P,this.meta={},this.fields=[],this.length=0,this.schemaFields=[],this.timeFieldIndex=-1,this.pushMode=0,this.labels=new Set,this.packetInfo={schemaChanged:!0,number:0,action:"replace",length:0},this.serialize=(y,T,M)=>{const I=T?Object.assign({},{...this.options,...T}):this.options,x=(0,r.By)(this,y),S=D(x.fields.map(C=>C.values),typeof M?.maxLength=="number"?Math.min(M.maxLength,I.maxLength):I.maxLength,this.timeFieldIndex,I.maxDelta);x.fields=x.fields.map(C=>({...C,values:C.values?.slice(S)}));const O=x.fields[0]?.values?.length??0;return{...x,labels:this.labels,schemaFields:this.schemaFields,name:this.name,refId:this.refId,meta:this.meta,length:O,timeFieldIndex:this.timeFieldIndex,pushMode:this.pushMode,packetInfo:this.packetInfo,options:I}},this.initFromSerialized=y=>{this.name=y.name,this.refId=y.refId,this.meta=y.meta,this.length=y.length,this.labels=y.labels,this.schemaFields=y.schemaFields,this.timeFieldIndex=y.timeFieldIndex,this.pushMode=y.pushMode,this.packetInfo.length=y.packetInfo.length,this.packetInfo.number=y.packetInfo.number,this.packetInfo.action="replace",this.packetInfo.schemaChanged=!0,this.fields=y.fields.map(T=>({...T,type:T.type??t.PU.other,config:T.config??{},values:T.values??[]})),E(this.fields.map(T=>T.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)},this.needsResizing=({maxLength:y,maxDelta:T})=>{const M=y&&this.options.maxLength<y,I=T&&this.options.maxDelta<T,x=T&&this.options.maxDelta===1/0;return!!(M||I||x)},this.resize=({maxLength:y,maxDelta:T})=>{T&&(this.options.maxDelta===1/0?this.options.maxDelta=T:this.options.maxDelta=Math.max(T,this.options.maxDelta)),this.options.maxLength=Math.max(this.options.maxLength,y??0)},this.pushNewValues=y=>{if(!y?.length)return;this.packetInfo.action=this.options.action,this.packetInfo.number++,this.packetInfo.length=y[0].length,this.packetInfo.schemaChanged=!1,this.options.action==="append"?v(this.fields.map(M=>M.values),y,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta):(y.forEach((M,I)=>{this.fields[I]&&(this.fields[I].values=M)}),E(this.fields.map(M=>M.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta));const T=this.fields?.[0]?.values.length;T!==void 0&&(this.length=T)},this.resetStateCalculations=()=>{this.fields.forEach(y=>{y.state={...y.state??{},calcs:void 0,range:void 0}})},this.getMatchingFieldIndexes=y=>this.fields.map((T,M)=>y(T)?M:void 0).filter(T=>T!==void 0),this.getValuesFromLastPacket=()=>this.fields.map(y=>{const T=y.values;return T.slice(Math.max(T.length-this.packetInfo.length))}),this.hasAtLeastOnePacket=()=>!!this.packetInfo.length,this.getOptions=()=>this.options,Object.defineProperty(this,"length",{enumerable:!0}),Object.defineProperty(this,"fields",{enumerable:!0})}get alwaysReplace(){return this.options.action==="replace"}push(P){const{schema:y,data:T}=P;if(this.packetInfo.number++,this.packetInfo.length=0,this.packetInfo.schemaChanged=!1,y){this.pushMode=0,this.timeFieldIndex=y.fields.findIndex(S=>S.type===t.PU.time);const M=y.fields[0];this.timeFieldIndex===1&&M.type===t.PU.string&&(M.name==="labels"||M.name==="Labels")&&(this.pushMode=1,this.timeFieldIndex=0);const I=this.pushMode===1?y.fields.slice(1):y.fields;this.refId=y.refId,y.meta&&(this.meta={...y.meta});const{displayNameFormat:x}=this.options;if(b(this.schemaFields,I)){const S=I.length;this.fields.forEach((O,C)=>{const L=I[C%S];O.config=L.config??{},O.labels=L.labels}),x&&this.fields.forEach(O=>{const C={[d]:O.name,...O.labels};O.config.displayNameFromDS=(0,s.j)(x,C)})}else{this.packetInfo.schemaChanged=!0;const S=this.pushMode===0;this.fields=I.map(O=>{const C=O.config??{};if(x){const L={[d]:O.name,...O.labels};C.displayNameFromDS=(0,s.j)(x,L)}return{config:C,name:O.name,labels:O.labels,type:O.type??t.PU.other,values:S?this.fields.find(L=>L.name===O.name&&O.type===L.type)?.values??Array(this.length).fill(void 0):[]}})}this.schemaFields=I}if(T&&T.values.length&&T.values[0].length){let{values:M,entities:I}=T;if(I&&I.forEach((S,O)=>{S&&(0,g.t)(S,M[O])}),this.pushMode===1){const S=h(M);for(const L of S.keys())this.labels.has(L)||(this.packetInfo.schemaChanged=!0,this.addLabel(L));let O=Array(this.schemaFields.length).fill([]),C=[];this.labels.forEach(L=>{C.push(S.get(L)??O)}),M=(0,o.fj)(C)}if(M.length!==this.fields.length){if(this.fields.length)throw new Error(`push message mismatch.  Expected: ${this.fields.length}, received: ${M.length} (labels=${this.pushMode===1})`);this.fields=M.map((S,O)=>{let C=`Field ${O}`,L=(0,r.HW)(S[0]);return O===0&&L===t.PU.number&&S[0]>1600016688632&&(L=t.PU.time,C="Time"),{name:C,type:L,config:{},values:[]}})}let x=M;this.packetInfo.length=M[0].length,this.alwaysReplace||!this.length?this.packetInfo.action="replace":(this.packetInfo.action="append",x=this.fields.map(S=>S.values),v(x,M,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)),x.forEach((S,O)=>{const C=this.fields[O],{state:L}=C;C.values=S,L&&(L.calcs=void 0)}),this.length=x[0].length}return{...this.packetInfo}}addLabel(P){const{displayNameFormat:y}=this.options,T=this.labels.size,M=m(P);if(T===0)this.fields.forEach((I,x)=>{if(x>0&&(I.labels=M,y)){const S={[d]:I.name,...M};I.config.displayNameFromDS=(0,s.j)(y,S)}});else for(let I=1;I<this.schemaFields.length;I++){let x=this.schemaFields[I];const S=x.config??{};if(y){const O={[d]:x.name,...M};S.displayNameFromDS=(0,s.j)(y,O)}this.fields.push({...x,config:S,labels:M,values:Array(this.length).fill(void 0)})}this.labels.add(P)}};let f=l;f.deserialize=P=>{const y=new l(P.options);return y.initFromSerialized(P),y},f.empty=P=>new l(c(P)),f.fromDataFrameJSON=(P,y)=>{const T=new l(c(y));return T.push(P),T};function c(P){return{maxLength:P?.maxLength??1e3,maxDelta:P?.maxDelta??1/0,action:P?.action??"append",displayNameFormat:P?.displayNameFormat}}function h(P){let y=new Set(P[0]),T=new Map;y.forEach(M=>{let I=Array(P.length-1).fill(null).map(()=>[]);T.set(M,I)});for(let M=0;M<P[0].length;M++){let I=T.get(P[0][M]);for(let x=1;x<P.length;x++)I[x-1].push(P[x][M])}return T}function p(P,y,T,M){let I;T=T||0,M=M||y.length-1;let x=M<=2147483647;for(;M-T>1;)I=x?T+M>>1:Math.floor((T+M)/2),y[I]<P?T=I:M=I;return P-y[T]<=y[M]-P?T:M}function m(P){if(!P.length)return{};if(P.charAt(0)==="{")return(0,n.Xy)(P);const y={};return P.split(",").forEach(T=>{const[M,I]=T.trim().split("=");y[M]=I}),y}function a(P){const y=P.packetInfo;return y?.action?y:void 0}function v(P,y,T=1/0,M=0,I=1/0){for(let x=0;x<P.length;x++)for(let S=0;S<y[x].length;S++)P[x].push(y[x][S]);return E(P,T,M,I)}function E(P,y=1/0,T=0,M=1/0){const I=D(P,y,T,M);if(I)for(let x=0;x<P.length;x++)P[x].splice(0,I);return I}function D(P,y=1/0,T=0,M=1/0){if(!P[0]?.length)return 0;const I=P[0].length;let x=0;if(I>y&&(x=I-y),M!==1/0&&T>=0){const S=P[T],O=S[x],C=S[I-1];C-O>M&&(x=p(C-M,S,x))}return x}function b(P,y){if(P?.length!==y.length)return!1;for(let T=0;T<P.length;T++){const M=P[T],I=y[T];if(M.name!==I.name||M.type!==I.type)return!1}return!0}},61443:(Y,A,e)=>{"use strict";e.d(A,{Km:()=>r,P4:()=>o,WK:()=>s,g6:()=>n,r4:()=>t,xB:()=>g});const t=(u,d)=>({name:u,columns:d}),n=u=>u.columns,o=(u,d)=>u.columns[d],s=(u,d,i)=>u.columns[d].values[i],r=(u,d,i)=>u.columns.map(l=>l.values[i]),g=(u,d)=>u[d]},21423:(Y,A,e)=>{"use strict";e.d(A,{J3:()=>s,ab:()=>g,bW:()=>o});var t=e(2543),n=e.n(t);function o(u,d,i){if(u===d)return!0;if(u?.fields?.length!==d?.fields?.length||u.name!==d.name)return!1;for(let l=0;l<u.fields.length;l++){const f=u.fields[l],c=d.fields[l];if(f.type!==c.type||f.name!==c.name)return!1;if(i)continue;if(f.labels&&c.labels&&!g(f.labels,c.labels))return!1;const h=f.config,p=c.config;let m=Object.keys(h),a=Object.keys(p);if(m.length!==a.length)return!1;for(const v of m){if(!(v in p))return!1;if(v!=="interval"&&!(0,t.isEqual)(h[v],p[v]))return!1}}return!0}function s(u,d,i){if(u===d)return!0;if(u?.length!==d?.length)return!1;for(let l=0;l<u.length;l++)if(!i(u[l],d[l]))return!1;return!0}const r=(u,d)=>u===d;function g(u,d,i=r){if(u===d)return!0;const l=Object.keys(u),f=Object.keys(d);if(l.length!==f.length)return!1;for(let c of l)if(!i(u[c],d[c]))return!1;return!0}},48120:(Y,A,e)=>{"use strict";e.d(A,{Bt:()=>r.Bt,By:()=>r.By,EI:()=>r.EI,EL:()=>d.EL,ES:()=>r.ES,HW:()=>r.HW,Ij:()=>u.I,J3:()=>i.J3,KR:()=>r.KR,Kh:()=>f.Kh,Kl:()=>r.Kl,Km:()=>g.Km,LI:()=>r.LI,Lc:()=>n.L,Ls:()=>f.Ls,N$:()=>r.N$,Nw:()=>d.Nw,P4:()=>g.P4,Rh:()=>t.R,S1:()=>l.S1,Vc:()=>r.Vc,WK:()=>g.WK,XQ:()=>r.XQ,Yn:()=>r.Yn,aH:()=>l.aH,ab:()=>i.ab,bW:()=>i.bW,by:()=>r.by,ci:()=>r.ci,dF:()=>r.dF,fG:()=>u.f,g6:()=>g.g6,hF:()=>l.hF,jq:()=>l.jq,k2:()=>s.k,k9:()=>f.k9,oE:()=>r.oE,or:()=>d.or,pH:()=>r.pH,pk:()=>s.p,q7:()=>r.q7,r4:()=>g.r4,t:()=>d.t,t9:()=>l.t9,tP:()=>l.tP,uY:()=>l.uY,w3:()=>r.w3,x8:()=>o.x,xB:()=>g.xB});var t=e(78368),n=e(85404),o=e(33526),s=e(37471),r=e(14236),g=e(61443),u=e(33948),d=e(89667),i=e(21423),l=e(19845),f=e(9631)},14236:(Y,A,e)=>{"use strict";e.d(A,{Bt:()=>R,By:()=>C,EI:()=>H,ES:()=>I,HW:()=>v,KR:()=>L,Kl:()=>O,LI:()=>y,N$:()=>B,Vc:()=>T,XQ:()=>D,Yn:()=>S,by:()=>m,ci:()=>P,dF:()=>E,oE:()=>a,pH:()=>b,q7:()=>x,w3:()=>M});var t=e(2543),n=e.n(t),o=e(47232),s=e(48241),r=e(28240),g=e(11261),u=e(39070),d=e(33948),i=e(89667);function l(W){const N=W.columns.map(V=>{const{text:G,type:_,...K}=V,j=[];return{name:G?.length?G:V,config:K||{},values:j,type:_&&Object.values(g.PU).includes(_)?_:g.PU.other}});if(!(0,t.isArray)(W.rows))throw new Error(`Expected table rows to be array, got ${typeof W.rows}.`);for(const V of W.rows)for(let G=0;G<N.length;G++)N[G].values.push(V[G]);for(const V of N)if(V.type===g.PU.other){const G=E(V);G&&(V.type=G)}return{fields:N,refId:W.refId,meta:W.meta,name:W.name,length:W.rows.length}}function f(W){const N=[],V=[],G=W.datapoints||W.points;for(const K of G)V.push(K[0]),N.push(K[1]);const _=[{name:g.LE,type:g.PU.time,config:{},values:N},{name:g.Bc,type:g.PU.number,config:{unit:W.unit},values:V,labels:W.tags}];return W.title&&(_[1].config.displayNameFromDS=W.title),{name:W.target||W.name,refId:W.refId,meta:W.meta,fields:_,length:V.length}}function c(W){const N=[],V=[];for(let G=0;G<W.data.length;G++){const _=W.data[G];N.push(_[1]),V.push(_[0])}return{name:W.label,fields:[{name:W.label||g.Bc,type:g.PU.number,config:{},values:N},{name:g.LE,type:g.PU.time,config:{unit:"dateTimeAsIso"},values:V}],length:N.length}}function h(W){const N=[{name:W.target,type:g.PU.other,labels:W.tags,config:{unit:W.unit,filterable:W.filterable},values:[]}];for(const V of W.datapoints)N[0].values.push(V);return{name:W.target,refId:W.target,meta:{json:!0},fields:N,length:W.datapoints.length}}const p=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function m(W,N){return W&&(W=W.toLowerCase(),W==="date"||W==="time")?g.PU.time:v(N)}function a(W){return W instanceof Date||(0,o.Ar)(W)?g.PU.time:(0,t.isNumber)(W)?g.PU.number:(0,t.isString)(W)?g.PU.string:(0,t.isBoolean)(W)?g.PU.boolean:g.PU.other}function v(W){return W instanceof Date||(0,o.Ar)(W)?g.PU.time:(0,t.isNumber)(W)?g.PU.number:(0,t.isString)(W)?p.test(W)?g.PU.number:W==="true"||W==="TRUE"||W==="True"||W==="false"||W==="FALSE"||W==="False"?g.PU.boolean:g.PU.string:(0,t.isBoolean)(W)?g.PU.boolean:g.PU.other}function E(W){if(W.name){const N=W.name.toLowerCase();if(N==="date"||N==="time")return g.PU.time}for(let N=0;N<W.values.length;N++){const V=W.values[N];if(V!=null)return v(V)}}const D=(W,N=!1)=>{for(const V of W.fields)if(!V.type||V.type===g.PU.other||N)return{...W,fields:W.fields.map(G=>G.type&&G.type!==g.PU.other&&!N?G:{...G,type:E(G)||g.PU.other})};return W},b=W=>!!(W&&W.hasOwnProperty("columns")),P=W=>!!(W&&W.hasOwnProperty("fields")),y=W=>!!(P(W)&&W.hasOwnProperty("value"));function T(W){if("fields"in W)return"length"in W&&W.fields[0]?.values?.get?W:H(W);if(W.hasOwnProperty("type")&&W.type==="docs")return h(W);if(W.hasOwnProperty("datapoints")||W.hasOwnProperty("points"))return f(W);if(W.hasOwnProperty("data"))return W.hasOwnProperty("schema")?(0,i.or)(W):c(W);if(W.hasOwnProperty("columns"))return l(W);if(Array.isArray(W))return(0,d.I)(W);throw console.warn("Can not convert",W),new Error("Unsupported data format")}const M=W=>{const{fields:N}=W,V=W.length,G=[];if(N.length===2){const{timeField:_,timeIndex:K}=L(W);if(_){const k=N[K===0?1:0],Q=N[K];for(let ee=0;ee<V;ee++)G.push([k.values[ee],Q.values[ee]]);return{alias:W.name,target:(0,r.Ct)(k,W),datapoints:G,unit:N[0].config?N[0].config.unit:void 0,refId:W.refId,meta:W.meta}}}for(let _=0;_<V;_++){const K=[];for(let j=0;j<N.length;j++)K.push(N[j].values[_]);G.push(K)}return W.meta&&W.meta.json?{alias:N[0].name||W.name,target:N[0].name||W.name,datapoints:N[0].values,filterable:N[0].config?N[0].config.filterable:void 0,type:"docs"}:{columns:N.map(_=>{const{name:K,config:j}=_;if(j){const{...k}=j;return k.text=K,k}return{text:K}}),type:"table",refId:W.refId,meta:W.meta,rows:G}};function I(W,N,V=!1){const G=W.fields[N];if(!G)return W;const _=[];for(let j=0;j<W.length;j++)_.push(j);const K=(0,s.iX)(G,V);return _.sort(K),{...W,fields:W.fields.map(j=>{const k={...j,values:j.values.map((ee,ae)=>j.values[_[ae]])},{nanos:Q}=j;return Q!==void 0&&(k.nanos=Q.map((ee,ae)=>Q[_[ae]])),k})}}function x(W){return{...W,fields:W.fields.map(N=>{const V=[...N.values];V.reverse();const G={...N,values:V},{nanos:_}=N;if(_!==void 0){const K=[..._];K.reverse(),G.nanos=K}return G})}}function S(W,N){const V=[];for(const G of W.fields)V.push(G.values[N]);return V}function O(W){return C(W)}function C(W,N){return{fields:(N?W.fields.filter(N):W.fields).map(_=>{let K=_.values;return{name:_.name,type:_.type,config:_.config,values:K,labels:_.labels}}),refId:W.refId,meta:W.meta,name:W.name}}const L=W=>{for(let N=0;N<W.fields.length;N++)if(W.fields[N].type===g.PU.time)return{timeField:W.fields[N],timeIndex:N};return{}};function U(W){const N=D(T(W));if(N.fields&&N.fields.length)for(const V of N.fields)V.state=null;return N}function R(W){return!W||!(0,t.isArray)(W)?[]:W.map(N=>U(N))}function B(W,N){const{series:V,annotations:G}=W;if(W.state===u.Gu.Loading&&V.length===0)return N||(N=W),{...N,state:u.Gu.Loading,request:W.request};const _=performance.now(),K=V.map(Q=>U(Q)),j=R(G),k=performance.now();return{...W,series:K,annotations:j,timings:{dataProcessingTime:k-_}}}function H(W){let N=0;const V=W.fields.map((G,_)=>{const{state:K,...j}=G;return j.name||(j.name=`Field ${_+1}`),j.config||(j.config={}),j.values?j.values.length>N&&(N=j.values.length):j.values=new Array(N),j.type||(j.type=E(j)??g.PU.other),j});return{...W,fields:V,length:N}}},19845:(Y,A,e)=>{"use strict";e.d(A,{S1:()=>d,aH:()=>s,hF:()=>g,jq:()=>r,t9:()=>i,tP:()=>u,uY:()=>l});var t=e(11261),n=e(14236);const o=100;function s(f){if(f.fields.length<2)return!1;const c=f.fields.find(p=>p.type===t.PU.number);let h=!1;for(const p of f.fields)if(g(p)){h=!0;break}return h&&c!==void 0}function r(f){return!f.find(c=>!s(c))}function g(f){if(f.type!==t.PU.time)return!1;let c=null,h=f.values.length>o?o:f.values.length;for(let p=0;p<h;p++){const m=f.values[p];if(c===null||m!==null&&m>c)c=m;else return!1}return!0}function u(f){for(let c=0;c<f.length;c++){const h=(0,n.KR)(f[c]);if(h.timeField!==void 0&&h.timeIndex!==void 0)return!0}return!1}function d(f){return f.fields.some(c=>c.type===t.PU.time)}function i(f,c){if(f.meta?.uniqueRowIdFields!==void 0)return f.meta.uniqueRowIdFields.map(h=>f.fields[h].values[c]).join("-")}function l(f,c){if(c instanceof Array)for(let h=0;h<c.length;h++)f.fields[h].values.push(c[h]);else for(const h of f.fields)h.values.push(c[h.name]);try{f.length++}catch{}}},1933:(Y,A,e)=>{"use strict";e.d(A,{G:()=>r,O:()=>g});var t=e(2543),n=e.n(t),o=e(43127);let s=()=>o.lE;const r=u=>{s=u??s},g=u=>u?.timeZone&&!(0,t.isEmpty)(u.timeZone)?u.timeZone:s()??o.lE},85858:(Y,A,e)=>{"use strict";e.r(A),e.d(A,{isMathString:()=>r,isValid:()=>u,parse:()=>g,parseDateMath:()=>d,roundToFiscal:()=>i});var t=e(2543),n=e.n(t),o=e(47232);const s=["y","M","w","d","h","m","s","Q"];function r(l){return l?!!(typeof l=="string"&&(l.substring(0,3)==="now"||l.includes("||"))):!1}function g(l,f,c,h){if(l){if(typeof l!="string")return(0,o.Ar)(l)?l:(0,t.isDate)(l)?(0,o.KQ)(l):void 0;{let p,m="",a,v;return l.substring(0,3)==="now"?(p=(0,o.oZ)(c),m=l.substring(3)):(a=l.indexOf("||"),a===-1?(v=l,m=""):(v=l.substring(0,a),m=l.substring(a+2)),p=(0,o.KQ)(v,o.mt)),m.length?d(m,p,f,h):p}}}function u(l){const f=g(l);return f&&(0,o.Ar)(f)?f.isValid():!1}function d(l,f,c,h=0){const p=l.replace(/\s/g,""),m=(0,o.KQ)(f);let a=0;const v=p.length;for(;a<v;){const E=p.charAt(a++);let D,b,P,y=!1;if(E==="/")D=0;else if(E==="+")D=1;else if(E==="-")D=2;else return;if(isNaN(parseInt(p.charAt(a),10)))b=1;else if(p.length===2)b=parseInt(p.charAt(a),10);else{const M=a;for(;!isNaN(parseInt(p.charAt(a),10));)if(a++,a>10)return;b=parseInt(p.substring(M,a),10)}if(D===0&&b!==1)return;P=p.charAt(a++),P==="f"&&(P=p.charAt(a++),y=!0);const T=P;if((0,t.includes)(s,T))D===0?y?i(h,m,T,c):c?m.endOf(T):m.startOf(T):D===1?m.add(b,T):D===2&&m.subtract(b,T);else return}return m}function i(l,f,c,h){switch(c){case"y":return h?i(l,f,c,!1).add(11,"M").endOf("M"):f.subtract((f.month()-l+12)%12,"M").startOf("M"),f;case"Q":return h?i(l,f,c,!1).add(2,"M").endOf("M"):f.subtract((f.month()-l+12)%3,"M").startOf("M"),f;default:return}}},70416:(Y,A,e)=>{"use strict";e.d(A,{E9:()=>g,Ri:()=>u,V3:()=>c,WT:()=>d,dU:()=>r,di:()=>l,pp:()=>f,vd:()=>i});var t=e(89369),n=e(68284),o=e(25579);const s={years:["y","Y","years"],months:["M","months"],weeks:["w","W","weeks"],days:["d","D","days"],hours:["h","H","hours"],minutes:["m","minutes"],seconds:["s","S","seconds"]};function r(p,m=!0){if((0,t.d)(p.start,p.end))return"";const a=(0,n.F)(p);return Object.entries(a).reduce((v,[E,D])=>D&&D!==0&&!(E==="seconds"&&!m&&v)?v+`${v!==""?" ":""}${D}${s[E][0]}`:v,"")}function g(p){return p.split(" ").reduce((m,a)=>{const v=a.match(/(\d+)(.+)/),E=v?.[1],D=v?.[2];if(!(E&&D))return m;const b=Object.entries(s).find(([y,T])=>T?.includes(v[2])),P=parseInt(E,10);return b?{...m,[b[0]]:P}:m},{})}function u(p,m){return(0,o.W)(p,m)}function d(p){const m=new Date;return u(m,p).getTime()-m.getTime()}function i(p){return!isNaN(Date.parse(p))}function l(p){for(const m of p.trim().split(" ")){const a=m.match(/(\d+)(.+)/);if(a===null||a.length!==3||!Object.entries(s).find(([E,D])=>D?.includes(a[2]))?.[0])return!1}return!0}function f(p){return h(p,["h","m","s","ms","us","\xB5s","ns"])}function c(p){return h(p,["y","M","w","d","h","m","s","ms","us","\xB5s","ns"])}function h(p,m){for(const a of p.trim().split(" ")){const v=a.match(/([0-9]*[.]?[0-9]+)(.+)/);if(v===null||v.length!==3||!m.includes(v[2]))return!1}return!0}},42994:(Y,A,e)=>{"use strict";e.d(A,{JE:()=>o,Od:()=>s,WC:()=>r});const t="YYYY-MM-DD HH:mm:ss",n="YYYY-MM-DD HH:mm:ss.SSS";class o{constructor(){this.fullDate=t,this.fullDateMS=n,this.interval={millisecond:"HH:mm:ss.SSS",second:"HH:mm:ss",minute:"HH:mm",hour:"MM/DD HH:mm",day:"MM/DD",month:"YYYY-MM",year:"YYYY"}}update(d){this.fullDate=d.fullDate,this.interval=d.interval,d.useBrowserLocale&&this.useBrowserLocale()}useBrowserLocale(){this.fullDate=s({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.fullDateMS=this.fullDate.replace("ss","ss.SSS"),this.interval.millisecond=s({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second).replace("ss","ss.SSS"),this.interval.second=s({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second),this.interval.minute=s({hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.minute),this.interval.hour=s({month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.hour),this.interval.day=s({month:"2-digit",day:"2-digit",hour12:!1},null,this.interval.day),this.interval.month=s({year:"numeric",month:"2-digit",hour12:!1},null,this.interval.month)}getTimeFieldUnit(d){return`time:${d?this.fullDateMS:this.fullDate}`}}function s(u,d,i){if(g())return i??t;!d&&navigator&&(d=[...navigator.languages]);const l=new Intl.DateTimeFormat(d||void 0,u),f=l.formatToParts(new Date),h={year:"YYYY",month:"MM",day:"DD",hour:l.resolvedOptions().hour12?"hh":"HH",minute:"mm",second:"ss",weekday:"ddd",era:"N",dayPeriod:"A",timeZoneName:"Z"};return f.map(p=>h[p.type]||p.value).join("")}const r=new o,g=()=>!("DateTimeFormat"in Intl)||!("formatToParts"in Intl.DateTimeFormat.prototype)},72724:(Y,A,e)=>{"use strict";e.d(A,{LE:()=>r,M7:()=>g,_Q:()=>d,fq:()=>u,jw:()=>i});var t=e(84743),n=e.n(t),o=e(1933),s=e(42994);const r=(c,h)=>f(c,(0,o.O)(h)).format(l(h)),g=(c,h)=>f(c,(0,o.O)(h)).format(),u=(c,h)=>f(c,(0,o.O)(h)).fromNow(),d=(c,h)=>f(c,(0,o.O)(h)).format(`${s.WC.fullDate} z`),i=(c,h)=>f(c,(0,o.O)(h)).format("z"),l=c=>c?.defaultWithMS?c?.format??s.WC.fullDateMS:c?.format??s.WC.fullDate,f=(c,h)=>{const p=c,m=n().tz.zone(h);if(m&&m.name)return n().utc(p).tz(m.name);switch(h){case"utc":return n().utc(p);default:return n().utc(p).local()}}},38698:(Y,A,e)=>{"use strict";e.d(A,{$D:()=>o.$D,AN:()=>o.AN,Ah:()=>o.Ah,Ar:()=>o.Ar,E9:()=>d.E9,GZ:()=>i.G,HD:()=>s.HD,IM:()=>d.pp,Ii:()=>n,JE:()=>r.JE,JK:()=>o.JK,KQ:()=>o.KQ,LE:()=>g.LE,M7:()=>g.M7,O:()=>i.O,Od:()=>r.Od,P3:()=>s.P3,QZ:()=>s.QZ,Ri:()=>d.Ri,U3:()=>s.U3,V3:()=>d.V3,WC:()=>r.WC,WT:()=>d.WT,XN:()=>o.XN,_Q:()=>g._Q,bQ:()=>u.b,dU:()=>d.dU,di:()=>d.di,fq:()=>g.fq,g$:()=>s.g$,jw:()=>g.jw,le:()=>s.le,mt:()=>o.mt,ns:()=>t,oZ:()=>o.oZ,pp:()=>o.pp,u8:()=>o.u8,vd:()=>d.vd,xQ:()=>o.xQ,xS:()=>o.xS,yT:()=>o.yT});var t=e(85858),n=e(65879),o=e(47232),s=e(91410),r=e(42994),g=e(72724),u=e(53531),d=e(70416),i=e(1933)},47232:(Y,A,e)=>{"use strict";e.d(A,{$D:()=>a,AN:()=>c,Ah:()=>l,Ar:()=>d,JK:()=>r,KQ:()=>f,XN:()=>g,mt:()=>o,oZ:()=>h,pp:()=>m,u8:()=>u,xQ:()=>p,xS:()=>s,yT:()=>i});var t=e(95093),n=e.n(t);const o=n().ISO_8601,s=v=>{n().locale(v)},r=()=>n().locale(),g=()=>n().localeData(),u=v=>v===null||typeof v=="string"||typeof v=="number"||v instanceof Date||Array.isArray(v)&&v.every(E=>typeof E=="string"||typeof E=="number")||d(v),d=v=>n().isMoment(v),i=(v,E)=>n().utc(v,E),l=(v,E)=>n().duration(v,E),f=(v,E)=>n()(v,E),c=v=>f(v),h=(v,E,D)=>{if(v==="utc")return i(E,D);if(v&&v!=="browser"){let b;if(typeof E=="string"&&D?b=n().tz(E,D,v):b=n().tz(E,v),d(b))return b}return f(E,D)},p=v=>n().weekdays().findIndex(E=>E.toLowerCase()===v.toLowerCase()),m=v=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].findIndex(E=>E.toLowerCase()===v.toLowerCase()),a=v=>{const E="-weekStart",D=r().replace(E,""),b=v?m(v):-1;b!==-1?n().locale(D+E,{parentLocale:D,week:{dow:b}}):s(D)}},53531:(Y,A,e)=>{"use strict";e.d(A,{b:()=>i});var t=e(2543),n=e.n(t),o=e(84743),s=e.n(o),r=e(1933),g=e(85858),u=e(42994),d=e(47232);const i=(c,h)=>(0,d.Ar)(c)?c:typeof c=="string"?l(c,h):f(c,h),l=(c,h)=>{if(c.indexOf("now")!==-1)return(0,g.isValid)(c)&&(0,g.parse)(c,h?.roundUp,h?.timeZone,h?.fiscalYearStartMonth)||s()();const p=(0,r.O)(h),m=s().tz.zone(p),a=h?.format??u.WC.fullDate;if(m&&m.name)return s().tz(c,a,m.name);switch((0,t.lowerCase)(p)){case"utc":return s().utc(c,a);default:return s()(c,a)}},f=(c,h)=>{const p=c,m=(0,r.O)(h),a=s().tz.zone(m);if(a&&a.name)return s().tz(p,a.name);switch((0,t.lowerCase)(m)){case"utc":return s().utc(p);default:return s()(p)}}},65879:(Y,A,e)=>{"use strict";e.r(A),e.d(A,{calculateInterval:()=>P,convertRawToRange:()=>m,describeInterval:()=>M,describeTextRange:()=>f,describeTimeRange:()=>c,describeTimeRangeAbbreviation:()=>p,intervalToMs:()=>x,intervalToSeconds:()=>I,isFiscal:()=>v,isRelativeTime:()=>a,isRelativeTimeRange:()=>E,isValidTimeSpan:()=>h,msRangeToTimeString:()=>b,relativeToTimeRange:()=>C,roundInterval:()=>S,secondsToHms:()=>D,timeRangeToRelative:()=>O});var t=e(2543),n=e.n(t),o=e(85858),s=e(72724),r=e(47232),g=e(53531);const u={s:{display:"second"},m:{display:"minute"},h:{display:"hour"},d:{display:"day"},w:{display:"week"},M:{display:"month"},y:{display:"year"}},d=[{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],i=[{from:"now",to:"now+1m",display:"Next minute"},{from:"now",to:"now+5m",display:"Next 5 minutes"},{from:"now",to:"now+15m",display:"Next 15 minutes"},{from:"now",to:"now+30m",display:"Next 30 minutes"},{from:"now",to:"now+1h",display:"Next hour"},{from:"now",to:"now+3h",display:"Next 3 hours"},{from:"now",to:"now+6h",display:"Next 6 hours"},{from:"now",to:"now+12h",display:"Next 12 hours"},{from:"now",to:"now+24h",display:"Next 24 hours"},{from:"now",to:"now+2d",display:"Next 2 days"},{from:"now",to:"now+7d",display:"Next 7 days"},{from:"now",to:"now+30d",display:"Next 30 days"},{from:"now",to:"now+90d",display:"Next 90 days"},{from:"now",to:"now+6M",display:"Next 6 months"},{from:"now",to:"now+1y",display:"Next year"},{from:"now",to:"now+2y",display:"Next 2 years"},{from:"now",to:"now+5y",display:"Next 5 years"}],l={};(0,t.each)(d,L=>{l[L.from+" to "+L.to]=L}),(0,t.each)(i,L=>{l[L.from+" to "+L.to]=L});function f(L){const U=L.indexOf("+")!==0;L.indexOf("now")===-1&&(L=(U?"now-":"now")+L);let R=l[L+" to now"];if(R)return R;U?R={from:L,to:"now",display:""}:R={from:"now",to:L,display:""};const B=/^now([-+])(\d+)(\w)/.exec(L);if(B){const H=B[3],W=parseInt(B[2],10),N=u[H];N&&(R.display=U?"Last ":"Next ",R.display+=W+" "+N.display,R.section=N.section,W>1&&(R.display+="s"))}else R.display=R.from+" to "+R.to,R.invalid=!0;return R}function c(L,U){const R=l[L.from.toString()+" to "+L.to.toString()];if(R)return R.display;const B={timeZone:U};if((0,r.Ar)(L.from)&&(0,r.Ar)(L.to))return(0,s.LE)(L.from,B)+" to "+(0,s.LE)(L.to,B);if((0,r.Ar)(L.from)){const H=o.parse(L.to,!0,"utc");return H?(0,s.LE)(L.from,B)+" to "+(0,s.fq)(H,B):""}if((0,r.Ar)(L.to)){const H=o.parse(L.from,!1,"utc");return H?(0,s.fq)(H,B)+" to "+(0,s.LE)(L.to,B):""}return L.to.toString()==="now"?f(L.from).display:L.from.toString()+" to "+L.to.toString()}const h=L=>L.indexOf("$")===0||L.indexOf("+$")===0?!0:f(L).invalid!==!0,p=(L,U)=>{if((0,r.Ar)(L.from))return(0,s.jw)(L.from,{timeZone:U});const R=o.parse(L.from,!0);return R?(0,s.jw)(R,{timeZone:U}):""},m=(L,U,R,B)=>{const H=(0,g.b)(L.from,{roundUp:!1,timeZone:U,fiscalYearStartMonth:R,format:B}),W=(0,g.b)(L.to,{roundUp:!0,timeZone:U,fiscalYearStartMonth:R,format:B});return o.isMathString(L.from)||o.isMathString(L.to)?{from:H,to:W,raw:L}:{from:H,to:W,raw:{from:H,to:W}}};function a(L){return typeof L=="string"?L.indexOf("now")>=0:!1}function v(L){return typeof L.raw.from=="string"&&L.raw.from.indexOf("f")>0?!0:typeof L.raw.to=="string"&&L.raw.to.indexOf("f")>0}function E(L){return a(L.from)||a(L.to)}function D(L){const U=Math.floor(L/31536e3);if(U)return U+"y";const R=Math.floor(L%31536e3/86400);if(R)return R+"d";const B=Math.floor(L%31536e3%86400/3600);if(B)return B+"h";const H=Math.floor(L%31536e3%86400%3600/60);if(H)return H+"m";const W=Math.floor(L%31536e3%86400%3600%60);if(W)return W+"s";const N=Math.floor(L*1e3);return N?N+"ms":"less than a millisecond"}function b(L){const U=Number((L/1e3).toFixed()),R=Math.floor(U/60/60),B=Math.floor(U/60)-R*60,H=Number((U%60).toFixed());let W=R?R+"h":"",N=B?B+"min":"",V=H?H+"sec":"";return W&&N?W=W+" ":W=W,(N||W)&&V?N=N+" ":N=N,W+N+V||"less than 1sec"}function P(L,U,R){let B=1;R&&(B=x(R));let H=S((L.to.valueOf()-L.from.valueOf())/U);return B>H&&(H=B),{intervalMs:H,interval:D(H/1e3)}}const y=/(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,T={y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001};function M(L){if(Number(L))return{sec:T.s,type:"s",count:parseInt(L,10)};const U=L.match(y);if(!U||!(0,t.has)(T,U[2]))throw new Error(`Invalid interval string, has to be either unit-less or end with one of the following units: "${Object.keys(T).join(", ")}"`);return{sec:T[U[2]],type:U[2],count:parseInt(U[1],10)}}function I(L){const U=M(L);return U.sec*U.count}function x(L){const U=M(L);return U.sec*1e3*U.count}function S(L){switch(!0){case L<10:return 1;case L<15:return 10;case L<35:return 20;case L<75:return 50;case L<150:return 100;case L<350:return 200;case L<750:return 500;case L<1500:return 1e3;case L<3500:return 2e3;case L<7500:return 5e3;case L<12500:return 1e4;case L<17500:return 15e3;case L<25e3:return 2e4;case L<45e3:return 3e4;case L<9e4:return 6e4;case L<21e4:return 12e4;case L<45e4:return 3e5;case L<75e4:return 6e5;case L<105e4:return 9e5;case L<15e5:return 12e5;case L<27e5:return 18e5;case L<54e5:return 36e5;case L<9e6:return 72e5;case L<162e5:return 108e5;case L<324e5:return 216e5;case L<864e5:return 432e5;case L<6048e5:return 864e5;case L<18144e5:return 6048e5;case L<36288e5:return 2592e6;default:return 31536e6}}function O(L,U=(0,r.KQ)()){const R=U.unix()-L.from.unix(),B=U.unix()-L.to.unix();return{from:R,to:B}}function C(L,U=(0,r.KQ)()){const R=(0,r.KQ)(U).subtract(L.from,"s"),B=L.to===0?(0,r.KQ)(U):(0,r.KQ)(U).subtract(L.to,"s");return{from:R,to:B,raw:{from:R,to:B}}}},91410:(Y,A,e)=>{"use strict";e.d(A,{HD:()=>d,P3:()=>l,QZ:()=>i,U3:()=>f,g$:()=>g,le:()=>u});var t=e(2543),n=e.n(t),o=e(84743),s=e.n(o),r=e(1933),g=(v=>(v.default="",v.localBrowserTime="browser",v.utc="utc",v))(g||{});const u=v=>{switch((0,r.O)({timeZone:v})){case"browser":return"Local browser time";case"utc":return"UTC";default:return v}},d=v=>s().tz.zone(v),i=(v,E)=>{const D=c(v,E);return D||p(v,E)},l=(0,t.memoize)((v=!1)=>{const E=[];return v===!0?E.push("","browser","utc"):v&&E.push(...v),s().tz.names().reduce((D,b)=>{const P=a[b];return!Array.isArray(P)||P.length===0||D.push(b),D},E)}),f=(0,t.memoize)((v=!1)=>{const D=l(v).reduce((b,P)=>{const y=P.indexOf("/");if(y===-1){const M="";return b[M]=b[M]??[],b[M].push(P),b}const T=P.slice(0,y);return b[T]=b[T]??[],b[T].push(P),b},{});return Object.keys(D).map(b=>({name:b,zones:D[b]}))}),c=(v,E)=>{switch(v){case"utc":return{name:"Coordinated Universal Time",ianaName:"UTC",zone:v,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case"":{const D=(0,r.O)(),P=D==="browser"||D==="utc"?c(D,E):p(D,E);return{countries:a[D]??[],abbreviation:"",offsetInMins:0,...P,ianaName:P?.ianaName??"",name:"Default",zone:v}}case"browser":{const D=s().tz.guess(!0),b=p(D,E);return{countries:a[D]??[],abbreviation:"Your local time",offsetInMins:new Date().getTimezoneOffset(),...b,name:"Browser Time",ianaName:b?.ianaName??"",zone:v}}default:return}},h=v=>/^(\+|\-).+/.test(v)?"":v,p=(v,E)=>{const D=s().tz.zone(v);if(D)return{name:v,ianaName:D.name,zone:v,countries:a[v]??[],abbreviation:h(D.abbr(E)),offsetInMins:D.utcOffset(E)}},m={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},a=(()=>s().tz.countries().reduce((v,E)=>s().tz.zonesForCountry(E).reduce((b,P)=>{b[P]||(b[P]=[]);const y=m[E];return y&&b[P].push({code:E,name:y}),b},v),{}))()},18226:(Y,A,e)=>{"use strict";e.d(A,{o:()=>s});var t=e(74486),n=e(88483),o=e(16126);class s{constructor(){this.subscribers=new Map,this.emitter=new t.A}publish(u){this.emitter.emit(u.type,u)}subscribe(u,d){return this.getStream(u).subscribe({next:d})}getStream(u){return new n.c(d=>{const i=l=>{d.next(l)};return this.emitter.on(u.type,i),this.subscribers.set(i,d),()=>{this.emitter.off(u.type,i),this.subscribers.delete(i)}})}newScopedBus(u,d){return new r([u],this,d)}emit(u,d){typeof u=="string"?this.emitter.emit(u,{type:u,payload:d}):this.emitter.emit(u.name,{type:u.name,payload:d})}on(u,d,i){if(d.wrapper=l=>{d(l.payload)},typeof u=="string"?this.emitter.on(u,d.wrapper):this.emitter.on(u.name,d.wrapper),i){const l=i.$on("$destroy",()=>{this.off(u,d),l()})}}off(u,d){if(typeof u=="string"){this.emitter.off(u,d.wrapper);return}this.emitter.off(u.name,d.wrapper)}removeAllListeners(){this.emitter.removeAllListeners();for(const[u,d]of this.subscribers)d.complete(),this.subscribers.delete(u)}}class r{constructor(u,d,i){this.path=u,this.eventBus=d,this.filterConfig=i??{onlyLocal:!1}}publish(u){u.origin||(u.origin=this),this.eventBus.publish(u)}filter(u){return this.filterConfig.onlyLocal?u.origin===this:!0}getStream(u){return this.eventBus.getStream(u).pipe((0,o.p)(this.filter.bind(this)))}subscribe(u,d){return this.getStream(u).subscribe({next:d})}removeAllListeners(){this.eventBus.removeAllListeners()}newScopedBus(u,d){return new r([...this.path,u],this,d)}}},69129:(Y,A,e)=>{"use strict";e.d(A,{LL:()=>i,LO:()=>s,NI:()=>d,We:()=>r,b_:()=>n,gc:()=>g,ql:()=>o,wE:()=>u});var t=e(65463);class n extends t.x{}n.type="data-hover";class o extends t.a{}o.type="data-hover-clear";class s extends t.x{}s.type="data-select";class r extends t.x{}r.type="annotation-event";class g extends t.x{}g.type="dashboard-loaded";class u extends t.a{}u.type="datasource-updated-successfully";class d extends t.a{}d.type="datasource-test-succeeded";class i extends t.a{}i.type="datasource-test-failed"},89550:(Y,A,e)=>{"use strict";e.d(A,{R:()=>n});const t=new Set;function n(o){if(t.has(o))throw new Error(`There is already an event defined with type '${o}'`);return t.add(o),{name:o}}},56302:(Y,A,e)=>{"use strict";e.d(A,{LL:()=>s.LL,LO:()=>s.LO,NI:()=>s.NI,Rb:()=>t.R,We:()=>s.We,aV:()=>n.a,b_:()=>s.b_,gc:()=>s.gc,or:()=>o.o,ql:()=>s.ql,wE:()=>s.wE,x$:()=>n.x});var t=e(89550),n=e(65463),o=e(18226),s=e(69129)},65463:(Y,A,e)=>{"use strict";e.d(A,{a:()=>t,x:()=>n});class t{constructor(){this.type=this.__proto__.constructor.type}setTags(s){return this.tags=new Set(s),this}}class n extends t{constructor(s){super(),this.payload=s}}},66670:(Y,A,e)=>{"use strict";e.d(A,{K:()=>n});var t=e(83077);class n extends t.O{}},57875:(Y,A,e)=>{"use strict";e.d(A,{H:()=>p,J:()=>c});var t=e(2543),n=e.n(t),o=e(14236),s=e(53531),r=e(47232),g=e(11261),u=e(28802),d=e(62398),i=e(83195),l=e(58563);const f={dateTimeAsIso:!0,dateTimeAsIsoNoDateIfToday:!0,dateTimeAsUS:!0,dateTimeAsUSNoDateIfToday:!0,dateTimeAsLocal:!0,dateTimeAsLocalNoDateIfToday:!0,dateTimeFromNow:!0};function c(a){if(!a||(0,t.isEmpty)(a)||!a.field)return h;const v=a.field,E=v.config??{},{palette:D}=a.theme.visualization;let b=E.unit,P=b&&(f[b]||b.startsWith("time:")),y=!1;if(v.type===g.PU.time&&!P){if(b="dateTimeAsSystem",P=!0,v.values&&v.values.length>1){let L=v.values[0],U=v.values[v.values.length-1];typeof L=="string"?(L=(0,s.b)(L).unix(),U=(0,s.b)(U).unix()):(L/=1e3,U/=1e3),y=Math.abs(U-L)<60}}else v.type===g.PU.boolean?(0,i.j9)(b)||(b="bool"):!b&&v.type===g.PU.string&&(b="string");const T=b?.startsWith("currency"),M=(0,i.j9)(b),I=v.type===g.PU.number,S=!P&&!T&&!M&&!(b==="locale")&&I&&E.decimals==null,O=(0,i.j_)(b||"none"),C=(0,l.jc)(v,a.theme);return(L,U)=>{const{mappings:R}=E,B=b==="string";P&&typeof L=="string"&&(L=(0,r.yT)(L).valueOf());let H=B?NaN:(0,u.t)(L),W,N,V,G,_,K;if(R&&R.length>0){const k=(0,d.Zz)(R,L);k&&(k.text!=null&&(W=k.text),k.color!=null&&(G=a.theme.visualization.getColorByName(k.color)),k.icon!=null&&(_=k.icon))}else if(v.type===g.PU.enum){if(L==null)return{text:"",numeric:NaN};const k=+L;if(E&&E.type&&E.type.enum){const{text:Q,color:ee}=E.type.enum;if(W=Q?Q[k]:`${L}`,G=ee?ee[k]:void 0,G==null){const ae=D[k%D.length];G=a.theme.visualization.getColorByName(ae)}}}if(!Number.isNaN(H)){if(W==null&&!(0,t.isBoolean)(L)){let k;S&&U!=null?(k=O(H,U,null,a.timeZone,y),k.text=+k.text+""):k=O(H,E.decimals,null,a.timeZone,y),W=k.text,V=k.suffix,N=k.prefix}if(G==null){const k=C(H);G=k.color,K=k.percent}}if(W==null&&(0,t.isArray)(L)&&(W=(0,t.join)(L,", ")),W==null&&(W=(0,t.toString)(L),W||(E.noValue?W=E.noValue:W="")),!G){const k=C(-1/0);G=k.color,K=k.percent}const j={text:W,numeric:H,prefix:N,suffix:V,color:G};return _!=null&&(j.icon=_),K!=null&&(j.percent=K),j}}function h(a){return{text:(0,t.toString)(a),numeric:(0,u.t)(a)}}function p(){return a=>({text:(0,o.oE)(a)==="other"?`${JSON.stringify(a,m())}`:`${a}`,numeric:null})}const m=()=>{const a=new WeakSet;return(v,E)=>{if(typeof E=="object"&&E!==null){if(a.has(E))return;a.add(E)}return E}}},8066:(Y,A,e)=>{"use strict";e.d(A,{Hs:()=>p,Qi:()=>h,lz:()=>m,uf:()=>f});var t=e(21197),n=e(55459),o=e.n(n),s=e(84140),r=e(23596),g=e(75059),u=e(24293),d=e(83077),i=e(58563),l=e(47737);const f=new d.O(()=>[{id:u.Y.Fixed,name:"Single color",description:"Set a specific color",getCalculator:a},{id:u.Y.Shades,name:"Shades of a color",description:"Select shades of a specific color",getCalculator:v},{id:u.Y.Thresholds,name:"From thresholds",isByValue:!0,description:"Derive colors from thresholds",getCalculator:(E,D)=>(b,P,y)=>{const T=y??l.QS;return D.visualization.getColorByName(T.color)}},new c({id:u.Y.PaletteClassic,name:"Classic palette",isContinuous:!1,isByValue:!1,getColors:E=>E.visualization.palette}),new c({id:u.Y.PaletteClassicByName,name:"Classic palette (by series name)",isContinuous:!1,isByValue:!1,useSeriesName:!0,getColors:E=>E.visualization.palette.filter(D=>r.getContrastRatio(E.visualization.getColorByName(D),E.colors.background.primary)>=E.colors.contrastThreshold)}),new c({id:u.Y.ContinuousGrYlRd,name:"Green-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:E=>["green","yellow","red"]}),new c({id:u.Y.ContinuousRdYlGr,name:"Red-Yellow-Green",isContinuous:!0,isByValue:!0,getColors:E=>["red","yellow","green"]}),new c({id:u.Y.ContinuousBlYlRd,name:"Blue-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:E=>["dark-blue","super-light-yellow","dark-red"]}),new c({id:u.Y.ContinuousYlRd,name:"Yellow-Red",isContinuous:!0,isByValue:!0,getColors:E=>["super-light-yellow","dark-red"]}),new c({id:u.Y.ContinuousBlPu,name:"Blue-Purple",isContinuous:!0,isByValue:!0,getColors:E=>["blue","purple"]}),new c({id:u.Y.ContinuousYlBl,name:"Yellow-Blue",isContinuous:!0,isByValue:!0,getColors:E=>["super-light-yellow","dark-blue"]}),new c({id:u.Y.ContinuousBlues,name:"Blues",isContinuous:!0,isByValue:!0,getColors:E=>["panel-bg","dark-blue"]}),new c({id:u.Y.ContinuousReds,name:"Reds",isContinuous:!0,isByValue:!0,getColors:E=>["panel-bg","dark-red"]}),new c({id:u.Y.ContinuousGreens,name:"Greens",isContinuous:!0,isByValue:!0,getColors:E=>["panel-bg","dark-green"]}),new c({id:u.Y.ContinuousPurples,name:"Purples",isContinuous:!0,isByValue:!0,getColors:E=>["panel-bg","dark-purple"]})]);class c{constructor(D){this.id=D.id,this.name=D.name,this.description=D.description,this.getNamedColors=D.getColors,this.isContinuous=D.isContinuous,this.isByValue=D.isByValue,this.useSeriesName=D.useSeriesName}getColors(D){return this.getNamedColors?this.colorCache&&this.colorCacheTheme===D?this.colorCache:(this.colorCache=this.getNamedColors(D).map(D.visualization.getColorByName),this.colorCacheTheme=D,this.colorCache):[]}getInterpolator(){return this.interpolator||(this.interpolator=(0,t.Ik)(this.colorCache)),this.interpolator}getCalculator(D,b){const P=this.getColors(b);return this.isByValue?this.isContinuous?(y,T,M)=>this.getInterpolator()(T):(y,T,M)=>P[T*(P.length-1)]:this.useSeriesName?(y,T,M)=>P[Math.abs(o()(D.name))%P.length]:(y,T,M)=>{const I=D.state?.seriesIndex??0;return P[I%P.length]}}}function h(E){return f.get(E.config.color?.mode??u.Y.Thresholds)}function p(E){return f.get(E??u.Y.Thresholds)}function m(E,D){const b=h(E);if(!b.isByValue)return{color:b.getCalculator(E,D)(0,0),threshold:l.QS,percent:1};const P=(0,i.jc)(E,D),y=E.config.color?.seriesBy??"last",M=(0,g.Nw)({field:E,reducers:[y]})[y]??0;return P(M)}function a(E,D){return()=>D.visualization.getColorByName(E.config.color?.fixedColor??u.F)}function v(E,D){return()=>{const b=D.visualization.getColorByName(E.config.color?.fixedColor??u.F),P=[b],y=6,T=10,M=35,I=35;for(let S=1;S<y;S++)P.push((0,s.A)(b).spin(S/y*T).brighten(S/y*M).toHexString()),P.push((0,s.A)(b).spin(-(S/y)*T).darken(S/y*I).toHexString());const x=E.state?.seriesIndex??0;return P[x%P.length]}}},56323:(Y,A,e)=>{"use strict";e.d(A,{PI:()=>v,Pm:()=>a,XS:()=>y,Zo:()=>I,a_:()=>m,eG:()=>P,k3:()=>f,k_:()=>p,nF:()=>h,py:()=>c});var t=e(2543),n=e.n(t),o=e(78368),s=e(14236),r=e(85200),g=e(75059),u=e(1173),d=e(11261),i=e(57875),l=e(28240);const f="__series.name",c="__field.displayName",h="__field.labels",p="__calc",m="__cell_",a=25,v=S=>{const{replaceVariables:O,reduceOptions:C,timeZone:L,theme:U}=S,R=C.calcs.length?C.calcs:[g.gy.last],B=[],H=(0,r.NS)(C.fields?{id:u.Ct.byRegexp,options:C.fields}:{id:u.Ct.numeric}),W=S.data??[],N=C.limit?C.limit:a;let V=!1;for(let G=0;G<W.length&&!V;G++){const _=W[G],{timeField:K}=(0,s.KR)(_),j=new o.R(_);for(let k=0;k<_.fields.length&&!V;k++){const Q=_.fields[k],ee=Q.getLinks;if(!H(Q,_,W))continue;let ae=Q.config;Q.state?.range&&(ae={...ae,...Q.state?.range});let Z=Q.config.displayName??"";const ne=Q.display??(0,i.J)({field:Q,theme:S.theme,timeZone:L});if(C.values)for(let q=0;q<Q.values.length;q++){Q.state=D(Q,B.length);const te=x(Q,q),re=ne(Q.values[q]),de=E(_,Q,q,O,te),ie=b(de,S.fieldConfig,U);if(B.push({name:"",field:ae,display:{...re,title:de,color:ie??re.color},view:j,colIndex:k,rowIndex:q,getLinks:ee?()=>ee({valueRowIndex:q}):()=>[],hasLinks:P(Q)}),B.length>=N){V=!0;break}}else{const q=(0,g.Nw)({field:Q,reducers:R});for(const te of R){const re=Q.state?.scopedVars??{};re[p]={value:te,text:te};const de=ne(q[te]);Z!==""?de.title=O(Z,re):de.title=(0,l.Ct)(Q,_,W),de.percentChange=S.percentChange?(0,g.Nw)({field:Q,reducers:[g.gy.diffperc]}).diffperc:void 0;let ie;S.sparkline&&(ie={y:_.fields[k],x:K},te===g.gy.last?ie.highlightIndex=ie.y.values.length-1:te===g.gy.first&&(ie.highlightIndex=0));const ge=_.length===1?0:void 0;B.push({name:te,field:ae,display:de,sparkline:ie,view:j,colIndex:k,getLinks:ee?()=>ee({calculatedValue:de,valueRowIndex:ge}):()=>[],hasLinks:P(Q)})}}}}return B.length===0&&B.push(T(S)),B};function E(S,O,C,L,U){const R=O.config.displayName;if(R)return R.indexOf(m)?L(I(R),U):L(R,U);let B=[],H=0;for(const W of S.fields)if(W!==O)if(W.type===d.PU.string){const N=W.values[C]??"",V=W.display?W.display(N).text:N;V.length>0&&B.push(V)}else W.type===d.PU.number&&H++;return(H||B.length===0)&&B.push((0,l.Ct)(O,S)),B.join(" ")}function D(S,O){return{...S.state,seriesIndex:O}}function b(S,O,C){for(const L of O.overrides)if(L.matcher.id==="byName"&&L.matcher.options===S){for(const U of L.properties)if(U.id==="color"&&U.value)return C.visualization.getColorByName(U.value.fixedColor)}return null}function P(S){return S.config?.links?.length?S.config.links.length>0:!1}function y(S){let O="",C="",L="",U="";for(let R=0;R<S.length;R++){const B=S[R].display;B.text&&B.text.length>C.length&&(C=B.text),B.title&&B.title.length>O.length&&(O=B.title),B.prefix&&B.prefix.length>L.length&&(L=B.prefix),B.suffix&&B.suffix.length>U.length&&(U=B.suffix)}return{text:C,title:O,suffix:U,prefix:L}}function T(S){const O="No data",{fieldConfig:C,timeZone:L}=S,{defaults:U}=C,B=(0,i.J)({field:{type:d.PU.other,config:U},theme:S.theme,timeZone:L})(null),H=M(B,O);return{name:O,field:{...U,max:U.max??0,min:U.min??0},display:{text:H,numeric:0,color:B.color},hasLinks:!1}}function M(S,O){return!S||(0,t.isEmpty)(S.text)?O:S.text}function I(S){return S.replace(/\${__cell_(\d+)(.*?)}|\[\[__cell_(\d+)(.*?)\]\]|\$__cell_(\d+)(\S*)/g,(O,C,L,U,R,B,H)=>`\${__data.fields[${C??U??B}]${L??R??H}}`)}function x(S,O){return S.state?.scopedVars?.__dataContext?{...S.state?.scopedVars,__dataContext:{value:{...S.state?.scopedVars?.__dataContext.value,rowIndex:O}}}:S.state?.scopedVars}},90708:(Y,A,e)=>{"use strict";e.d(A,{BF:()=>I,K3:()=>O,_M:()=>S,nJ:()=>E,rJ:()=>C,we:()=>D});var t=e(2543),n=e.n(t),o=e(96540),s=e(80292),r=e(52622),g=e(14236),u=e(21423),d=e(23596),i=e(75059),l=e(85200),f=e(11261),c=e(24293),h=e(71733),p=e(6709),m=e(57875),a=e(58563),v=e(69550);function E(U){let R=null,B=null;const H=[i.gy.min,i.gy.max];for(const W of U)for(const N of W.fields)if(N.type===f.PU.number){const V=(0,i.Nw)({field:N,reducers:H}),G=V[i.gy.min],_=V[i.gy.max];(R===null||G<R)&&(R=G),(B===null||_>B)&&(B=_)}return{min:R,max:B,delta:(B??0)-(R??0)}}function D(U){if(!U.data)return[];const R=U.fieldConfig;if(!R)return U.data;const B=U.fieldConfigRegistry??v.G;let H=0,W;const N=[];if(R.overrides)for(const V of R.overrides){const G=l.sJ.get(V.matcher.id);G&&N.push({match:G.get(V.matcher.options),properties:V.properties})}return U.data.map((V,G)=>{const _={...V};_.fields=_.fields.map(K=>({...K,config:(0,t.cloneDeep)(K.config),state:{...K.state}}));for(const K of _.fields){const j=K.config;K.state.scopedVars={__dataContext:{value:{data:U.data,frame:_,frameIndex:G,field:K}}};const k={field:K,data:U.data,dataFrameIndex:G,replaceVariables:U.replaceVariables,fieldConfigRegistry:B};T(j,R.defaults,k);for(const Z of N)if(Z.match(K,_,U.data))for(const ne of Z.properties)y(j,ne,k);let Q=K.type;if(!Q||Q===f.PU.other){const Z=(0,g.dF)(K);Z&&(Q=Z)}const{range:ee,newGlobalRange:ae}=b(j,K,W,U.data);if(W=ae,K.state.seriesIndex=H,K.state.range=ee,K.type=Q,K.type!==f.PU.time&&H++,K.display=(0,m.J)({field:K,theme:U.theme,timeZone:U.timeZone}),K.config.unit!=="dateTimeFromNow"&&(K.display=P(K.display,2500)),K.getLinks=S(_,K,K.state.scopedVars,k.replaceVariables,U.timeZone,U.dataLinkPostProcessor),K.type===f.PU.nestedFrames)for(const Z of K.values)for(let ne=0;ne<Z.length;ne++)for(const q of Z[ne].fields)q.display=(0,m.J)({field:q,theme:U.theme,timeZone:U.timeZone}),q.state={scopedVars:{__dataContext:{value:{data:Z,frame:Z[ne],frameIndex:ne,field:q}}}},q.getLinks=S(Z[ne],q,q.state.scopedVars,k.replaceVariables,U.timeZone,U.dataLinkPostProcessor)}return _})}function b(U,R,B,H){if(R.type!==f.PU.number||(0,t.isNumber)(U.min)&&(0,t.isNumber)(U.max))return{newGlobalRange:B};if(U.fieldMinMax){const G=(0,a.AP)(R),_=U.min??G.min,K=U.max??G.max;return{range:{min:_,max:K,delta:K-_},newGlobalRange:B}}const W=B??E(H),N=U.min??W.min,V=U.max??W.max;return{range:{min:N,max:V,delta:V-N},newGlobalRange:W}}function P(U,R=2500){const B=new Map;for(let H=-1;H<=15;H++)B.set(H,new Map);return(H,W)=>{let N=B.get(W??-1),V=N.get(H);return V||(N.size===R&&N.clear(),V=U(H,W),V.color&&(V.color=(0,d.asHexString)(V.color)),N.set(H,V)),V}}function y(U,R,B){const W=B.fieldConfigRegistry.getIfExists(R.id);if(!W)return;const N=W.process(R.value,B,W.settings);N==null?W.isCustom&&U.custom?(0,t.unset)(U.custom,W.path):(0,t.unset)(U,W.path):W.isCustom?(U.custom||(U.custom={}),(0,t.set)(U.custom,W.path,N)):(0,t.set)(U,W.path,N)}function T(U,R,B){U.links&&R.links&&(U.links=[...U.links,...R.links]);for(const H of B.fieldConfigRegistry.list())H.isCustom&&!U.custom&&(U.custom={}),M(H.isCustom?U.custom:U,H.isCustom?R.custom:R,H,B);I(U)}function M(U,R,B,H){const W=(0,t.get)(U,B.path);if(W==null){const N=H.fieldConfigRegistry.getIfExists(B.id);if(!N)return;if(N&&N.shouldApply(H.field)){const V=N.process((0,t.get)(R,N.path),H,N.settings);V!=null&&(0,t.set)(U,N.path,V)}}}function I(U){const{thresholds:R}=U;if(U.color?U.color.mode||delete U.color:R&&(U.color={mode:c.Y.Thresholds}),U.hasOwnProperty("min")&&U.hasOwnProperty("max")&&U.min>U.max){const B=U.max;U.max=U.min,U.min=B}}const x=U=>{const{link:R,linkModel:B,dataLinkScopedVars:H,field:W,replaceVariables:N}=U;return R.internal?(0,p.u)({link:R,internalLink:R.internal,scopedVars:H,field:W,range:R.internal.range,replaceVariables:N}):B},S=(U,R,B,H,W,N)=>V=>!R.config.links||R.config.links.length===0?[]:R.config.links.map(_=>{const K=L(U,R,B),j={...B,__dataContext:K},k=(ee,ae,Z)=>H(ee,{...j,...ae},Z);V.valueRowIndex!==void 0&&!isNaN(V.valueRowIndex)?K.value.rowIndex=V.valueRowIndex:K.value.calculatedValue=V.calculatedValue;let Q;if(_.onClick)Q={href:_.url,title:H(_.title||"",j),target:_.targetBlank?"_blank":void 0,onClick:(ee,ae)=>{_.onClick({origin:ae??R,e:ee,replaceVariables:k})},origin:R};else{let ee=_.onBuildUrl?_.onBuildUrl({origin:R,replaceVariables:k}):_.url;ee&&(ee=h.I.assureBaseUrl(ee.replace(/\n/g,"")),ee=H(ee,j,r.$m.UriEncode),ee=h.I.processUrl(ee)),Q={href:ee,title:H(_.title||"",j),target:_.targetBlank?"_blank":void 0,origin:R}}return(N||x)({frame:U,field:R,dataLinkScopedVars:j,replaceVariables:H,config:V,link:_,linkModel:Q})}).filter(_=>!!_);function O(U){if(!U||U.length===0)return[];const R=[...U],B=(0,m.H)();for(let H=0;H<R.length;H++){const W={...R[H]},N=[...W.fields];for(let V=0;V<N.length;V++)N[V]={...N[V],display:B};R[H]={...W,fields:N}}return R}function C(U,R,B,H,W,N,V){const G=U?.fieldConfigRegistry,_=(0,o.useRef)(0),K=(0,s.A)(B?.series);return(0,o.useMemo)(()=>{if(!G||!R||!B)return;const j=B?.series;B.structureRev==null&&j&&K&&!(0,u.J3)(j,K,u.bW)&&_.current++;const k={structureRev:_.current,...B,series:D({data:j,fieldConfig:R,fieldConfigRegistry:G,replaceVariables:N,theme:W,timeZone:H,dataLinkPostProcessor:V})};return B.annotations&&B.annotations.length>0&&(k.annotations=D({data:B.annotations,fieldConfig:{defaults:{},overrides:[]},replaceVariables:N,theme:W,timeZone:H,dataLinkPostProcessor:V})),k},[G,R,B,K,H,W,N,V])}function L(U,R,B){return B?.__dataContext?{value:{...B.__dataContext.value}}:{value:{frame:U,field:R,data:[U]}}}},28240:(Y,A,e)=>{"use strict";e.d(A,{Ct:()=>r,Fm:()=>s,Ri:()=>o,fk:()=>u});var t=e(11261),n=e(8249);function o(i,l){if(i.name)return i.name;const f=[];for(const c of i.fields)if(c.type!==t.PU.time){if(f.length>1)break;f.push(r(c,i))}return f.length===1?f[0]:l===void 0&&i.fields.length>0?i.fields.filter(c=>c.type!==t.PU.time).map(c=>r(c,i)).join(", "):i.refId?`Series (${i.refId})`:`Series (${l})`}function s(i){i.forEach(l=>{l.fields.forEach(f=>{r(f,l,i)})})}function r(i,l,f){const c=i.state?.displayName,h=!!(f&&f.length>1);if(c&&h===i.state?.multipleFrames)return c;const p=g(i,l,f);return i.state=i.state||{},i.state.displayName=p,i.state.multipleFrames=h,p}function g(i,l,f){const c=i.config?.displayName&&i.config?.displayName.length,h=!!l?.meta?.timeCompare?.isTimeShiftQuery;let p=c?i.config.displayName:i.name;if(c)return h?`${p} (comparison)`:p;if(l&&i.config?.displayNameFromDS)return h?`${i.config.displayNameFromDS} (comparison)`:i.config.displayNameFromDS;if(i.type===t.PU.time&&!i.labels)return p??t.LE;let m=[],a=!1;if(f&&f.length>1){for(let D=1;D<f.length;D++)if(f[D].name!==f[D-1].name){a=!0;break}}let v=!1,E=!1;if(a&&l?.name&&(m.push(l.name),v=!0),i.name&&i.name!==t.Bc&&m.push(i.name),i.labels&&l){let D=d(f??[l]);if(D)i.labels[D]&&(m.push(i.labels[D]),E=!0);else{let b=(0,n.h6)(i.labels);b&&(m.push(b),E=!0)}}return l&&!v&&!E&&i.name===t.Bc&&l.name&&l.name.length>0&&(m.push(l.name),v=!0),m.length?p=m.join(" "):i.name?p=i.name:p=t.Bc,p===i.name&&(p=u(i,l)),h&&(p=`${p} (comparison)`),p}function u(i,l){let f=0,c=!1;if(l)for(let h=0;h<l.fields.length;h++){const p=l.fields[h];if(i===p){if(c=!0,f>0){f++;break}}else if(i.name===p.name&&(f++,c))break}return f?`${i.name} ${f}`:i.name}function d(i){let l=null;for(let f=0;f<i.length;f++){const c=i[f];for(const h of c.fields)if(h.labels){for(const p in h.labels)if(l===null)l=p;else if(p!==l)return null}}return l}},92461:(Y,A,e)=>{"use strict";e.d(A,{F:()=>r});var t=e(2543),n=e.n(t),o=e(83195),s=e(57875);function r(g){return new Proxy({},{get:(u,d)=>{let i=g.frame.fields.find(h=>d===h.name);if(!i){const h=(0,t.toNumber)(d);i=g.frame.fields[h]}if(i||(i=g.frame.fields.find(h=>d===h.config.displayName)),i||(i=g.frame.fields.find(h=>h.labels?d===h.labels.name:!1)),!i)return;const l=i.display??(0,s.J)(),f=i.values[g.rowIndex],c=l(f);return c.toString=()=>(0,o.cN)(c),c}})}},63877:(Y,A,e)=>{"use strict";e.d(A,{AM:()=>s.AM,AP:()=>f.AP,BF:()=>d.BF,Ch:()=>s.Ch,Ct:()=>l.Ct,DJ:()=>o.D,FM:()=>s.FM,FU:()=>i.F,Fm:()=>l.Fm,Gs:()=>o.G,HB:()=>n.H,Hs:()=>r.Hs,JO:()=>n.J,K3:()=>d.K3,Kr:()=>g.K,N7:()=>s.N7,OU:()=>s.OU,PI:()=>t.PI,Pm:()=>t.Pm,Qi:()=>r.Qi,RU:()=>u.RU,Ri:()=>l.Ri,X4:()=>s.X4,XS:()=>t.XS,Zo:()=>t.Zo,a_:()=>t.a_,eG:()=>t.eG,fk:()=>l.fk,hL:()=>s.hL,hS:()=>s.hS,jc:()=>f.jc,k3:()=>t.k3,k_:()=>t.k_,lG:()=>s.lG,lz:()=>r.lz,m0:()=>s.m0,nF:()=>t.nF,py:()=>t.py,rJ:()=>d.rJ,uf:()=>r.uf,we:()=>d.we,xT:()=>s.xT,xg:()=>f.xg,yQ:()=>u.yQ});var t=e(56323),n=e(57875),o=e(69550),s=e(27310),r=e(8066),g=e(66670),u=e(47737),d=e(90708),i=e(92461),l=e(28240),f=e(58563)},27310:(Y,A,e)=>{"use strict";e.d(A,{AM:()=>o,Ch:()=>s,FM:()=>l,N7:()=>d,OU:()=>u,X4:()=>f,hL:()=>g,hS:()=>t,lG:()=>i,m0:()=>n,xT:()=>r});const t=c=>c,n=(c,h,p)=>{if(c!=null)return parseFloat(c)},o=(c,h,p)=>(delete h.field?.state?.displayName,u(c,h,p)),s=(c,h,p)=>c,r=(c,h,p)=>c,g=(c,h,p)=>c,u=(c,h,p)=>c==null?c:p&&p.expandTemplateVars&&h.replaceVariables&&typeof c=="string"?h.replaceVariables(c,h.field.state.scopedVars):`${c}`,d=(c,h,p)=>c,i=(c,h,p)=>c,l=(c,h,p)=>c;var f=(c=>(c.IncludeAll="all",c.ExcludeBaseNames="exclude",c.OnlyBaseNames="only",c))(f||{})},58563:(Y,A,e)=>{"use strict";e.d(A,{AP:()=>i,jc:()=>u,xg:()=>l});var t=e(2543),n=e.n(t),o=e(75059),s=e(11261),r=e(8066),g=e(47737);function u(f,c){if(f.type===s.PU.boolean)return d(f,c);const p=(0,r.Qi)(f).getCalculator(f,c),m=f.state?.range??i(f);return a=>{let v=0;a!==-1/0&&(v=(a-m.min)/m.delta,Number.isNaN(v)&&(v=0));const E=(0,g.k5)(f,a,v);return{percent:v,threshold:E,color:p(a,v,E)}}}function d(f,c){const h={color:c.visualization.getColorByName("green"),percent:1,threshold:void 0},p={color:c.visualization.getColorByName("red"),percent:0,threshold:void 0},m=(0,r.Qi)(f);if(m.isContinuous&&m.getColors){const a=m.getColors(c);h.color=a[a.length-1],p.color=a[0]}return a=>a?h:p}function i(f){if(f.type!==s.PU.number)return{min:0,max:100,delta:100};let c=f.config.min,h=f.config.max;if(!(0,t.isNumber)(c)||!(0,t.isNumber)(h))if(f.values&&f.values.length){const p=(0,o.Nw)({field:f,reducers:[o.gy.min,o.gy.max]});(0,t.isNumber)(c)||(c=p[o.gy.min]),(0,t.isNumber)(h)||(h=p[o.gy.max])}else c=0,h=100;return{min:c,max:h,delta:h-c}}function l(f,c){const{config:h}=f;let{min:p,max:m}=h;return(0,t.isNumber)(p)&&(0,t.isNumber)(m)?h:c||!f.state?.range?{...h,...i(f)}:{...h,...f.state.range}}},69550:(Y,A,e)=>{"use strict";e.d(A,{D:()=>s,G:()=>o});var t=e(83077),n=e(66670);const o=new n.K,s=new t.O},47737:(Y,A,e)=>{"use strict";e.d(A,{QS:()=>o,RU:()=>g,k5:()=>r,yQ:()=>s});var t=e(24293),n=e(50082);const o={value:0,color:t.F};function s(u,d){if(!d||d.length===0)return o;let i=d[0];for(const l of d)if(u>=l.value)i=l;else break;return i}function r(u,d,i){const{thresholds:l}=u.config;return l?.mode===n.O.Percentage?s(i*100,l?.steps):s(d,l?.steps)}function g(u){return u.sort((d,i)=>d.value-i.value)}},10361:(Y,A,e)=>{"use strict";e.d(A,{a:()=>t.aG});var t=e(52622)},39954:(Y,A,e)=>{"use strict";e.r(A),e.d(A,{AnnotationChangeEvent:()=>f.We,AppendedVectors:()=>s.kV,ArrayDataFrame:()=>r.fG,ArrayVector:()=>s.Ld,AsNumberVector:()=>s.vG,BinaryOperationID:()=>t.kP,BinaryOperationVector:()=>s.E0,BusEventBase:()=>f.aV,BusEventWithPayload:()=>f.x$,ByNamesMatcherMode:()=>g.PP,CSVHeaderStyle:()=>t.F7,CSVReader:()=>t.i8,CircularDataFrame:()=>r.x8,CircularVector:()=>s.$e,ConstantVector:()=>s.m$,DEFAULT_FIELD_DISPLAY_VALUES_LIMIT:()=>l.Pm,DashboardLoadedEvent:()=>f.gc,DataFrameView:()=>r.Rh,DataHoverClearEvent:()=>f.ql,DataHoverEvent:()=>f.b_,DataLinkBuiltInVars:()=>t.cI,DataSelectEvent:()=>f.LO,DataSourcePluginContextProvider:()=>P.p,DataSourceTestFailed:()=>f.LL,DataSourceTestSucceeded:()=>f.NI,DataSourceUpdatedSuccessfully:()=>f.wE,DataTransformerID:()=>g.Fy,DocsId:()=>t.fu,EventBusSrv:()=>f.or,FieldCache:()=>r.Lc,FieldConfigEditorBuilder:()=>t.bk,FieldConfigOptionsRegistry:()=>l.Kr,FieldMatcherID:()=>g.Ct,FieldNamePickerBaseNameMode:()=>l.X4,FormattedVector:()=>s.aO,FrameGeometrySourceMode:()=>p.a,FrameMatcherID:()=>g.jR,ISO_8601:()=>u.mt,IndexVector:()=>s.QL,InternalTimeZones:()=>u.g$,LayoutModes:()=>a.R,LegacyMappingType:()=>t.An,MISSING_VALUE:()=>r.pk,MatcherID:()=>g.cV,MutableDataFrame:()=>r.k2,NodeGraphDataFrameFieldNames:()=>t.uc,PanelOptionsEditorBuilder:()=>t.pv,PanelPlugin:()=>v.m,PluginContextProvider:()=>b.a,ReducerID:()=>g.gy,Registry:()=>t.OR,SortedVector:()=>s.Fb,StreamingDataFrame:()=>r.k9,StreamingFrameAction:()=>r.Kh,SystemDateFormatsState:()=>u.JE,ThemeContext:()=>c.Dx,TransformerCategory:()=>g.m_,UnaryOperationID:()=>t._G,VAR_CALC:()=>l.k_,VAR_CELL_PREFIX:()=>l.a_,VAR_FIELD_LABELS:()=>l.nF,VAR_FIELD_NAME:()=>l.py,VAR_SERIES_NAME:()=>l.k3,ValueMatcherID:()=>g.Js,addDurationToDate:()=>u.Ri,addRow:()=>r.uY,anySeriesWithTimeField:()=>r.tP,anyToNumber:()=>t.to,applyFieldOverrides:()=>l.we,applyNullInsertThreshold:()=>g.MS,applyRawFieldOverrides:()=>l.K3,arrayToDataFrame:()=>r.Ij,arrayUtils:()=>t.XC,binaryOperators:()=>t.bP,booleanOverrideProcessor:()=>l.FM,booleanValueFormatter:()=>i.Qc,buildHistogram:()=>g.p3,cacheFieldDisplayNames:()=>l.Fm,classicColors:()=>t.tj,closestIdx:()=>r.Ls,colorManipulator:()=>c.MV,compareArrayValues:()=>r.J3,compareDataFrameStructures:()=>r.bW,containsSearchFilter:()=>t.Eg,convertOldAngularValueMappings:()=>t.bh,createDataFrame:()=>r.EI,createDimension:()=>r.r4,createFieldConfigRegistry:()=>D.O,createTheme:()=>c.an,dataFrameFromJSON:()=>r.or,dataFrameToJSON:()=>r.Nw,dataLinksOverrideProcessor:()=>l.Ch,dateMath:()=>u.ns,dateTime:()=>u.KQ,dateTimeAsMoment:()=>u.AN,dateTimeForTimeZone:()=>u.oZ,dateTimeFormat:()=>u.LE,dateTimeFormatISO:()=>u.M7,dateTimeFormatTimeAgo:()=>u.fq,dateTimeFormatWithAbbrevation:()=>u._Q,dateTimeParse:()=>u.bQ,decodeFieldValueEntities:()=>r.t,decodeFieldValueEnums:()=>r.EL,defaultCalcs:()=>g.C6,deprecationWarning:()=>t.lt,displayNameOverrideProcessor:()=>l.AM,doStandardCalcs:()=>g.H3,durationToMilliseconds:()=>u.WT,ensureTimeField:()=>g.ks,escapeRegex:()=>d.$f,escapeStringForRegex:()=>d.jD,eventFactory:()=>f.Rb,fieldColorModeRegistry:()=>l.uf,fieldMatchers:()=>g.sJ,fieldReducers:()=>g.AS,filterFieldConfigOverrides:()=>E.aW,findCommonLabels:()=>t.yO,findHighlightChunksInText:()=>d.Oq,findMatchesInText:()=>d.bs,findUniqueLabels:()=>t.s6,fixCellTemplateExpressions:()=>l.Zo,formatLabels:()=>t.h6,formattedValueToString:()=>i.cN,frameMatchers:()=>g.RE,getActiveThreshold:()=>l.yQ,getAllValuesFromDimension:()=>r.Km,getBuiltInThemes:()=>c.k7,getColumnFromDimension:()=>r.P4,getColumnsFromDimension:()=>r.g6,getDataFrameRow:()=>r.Yn,getDataSourceRef:()=>t.p$,getDataSourceUID:()=>t.Iz,getDimensionByName:()=>r.xB,getDisplayProcessor:()=>l.JO,getDisplayValueAlignmentFactors:()=>l.XS,getFieldColorMode:()=>l.Hs,getFieldColorModeForField:()=>l.Qi,getFieldConfigWithMinMax:()=>l.xg,getFieldDisplayName:()=>l.Ct,getFieldDisplayValues:()=>l.PI,getFieldDisplayValuesProxy:()=>l.FU,getFieldMatcher:()=>g.NS,getFieldSeriesColor:()=>l.lz,getFieldTypeFromValue:()=>r.oE,getFlotPairs:()=>t.RZ,getFlotPairsConstant:()=>t.rG,getFrameDisplayName:()=>l.Ri,getFrameMatchers:()=>g.Dq,getHistogramFields:()=>g.ix,getLinksSupplier:()=>M._M,getLocale:()=>u.JK,getLocaleData:()=>u.XN,getMinMaxAndDelta:()=>l.AP,getNextRefId:()=>m.M,getPanelOptionsWithDefaults:()=>E.F,getProcessedDataFrames:()=>r.Bt,getRawDisplayProcessor:()=>l.HB,getRowUniqueId:()=>r.t9,getScaleCalculator:()=>l.jc,getSearchFilterScopedVar:()=>t.cs,getSeriesTimeStep:()=>t.tY,getThemeById:()=>c.gh,getTimeField:()=>r.KR,getTimeZone:()=>u.O,getTimeZoneGroups:()=>u.U3,getTimeZoneInfo:()=>u.QZ,getTimeZones:()=>u.P3,getUniqueFieldName:()=>l.fk,getValueFormat:()=>i.j_,getValueFormats:()=>i.Ke,getValueFormatterIndex:()=>i.uH,getValueFromDimension:()=>r.WK,getValueMatcher:()=>g.kK,getWeekdayIndex:()=>u.xQ,getWeekdayIndexByEnglishName:()=>u.pp,getZone:()=>u.HD,guessDecimals:()=>t.E6,guessFieldTypeForField:()=>r.dF,guessFieldTypeFromNameAndValue:()=>r.by,guessFieldTypeFromValue:()=>r.HW,guessFieldTypes:()=>r.XQ,hasLinks:()=>l.eG,hasMsResolution:()=>t.dO,hasTimeField:()=>r.S1,histogramBucketSizes:()=>g.rW,histogramFieldInfo:()=>g.Rt,histogramFieldsToFrame:()=>g.cg,histogramFrameBucketMaxFieldName:()=>g.dA,histogramFrameBucketMinFieldName:()=>g.d$,histogramTransformer:()=>g.OA,identityOverrideProcessor:()=>l.hS,incrRound:()=>g.ZU,incrRoundDn:()=>g.rs,incrRoundUp:()=>g.Uh,intervalToAbbreviatedDurationString:()=>u.dU,isBooleanUnit:()=>i.j9,isCustomFieldProp:()=>E.TQ,isDataFrame:()=>r.ci,isDataFrameWithValue:()=>r.LI,isDataSourcePluginContext:()=>T.S,isDataSourceRef:()=>t.fN,isDateTime:()=>u.Ar,isDateTimeInput:()=>u.u8,isEmptyObject:()=>t.RI,isHistogramFrameBucketMaxFieldName:()=>g.H1,isHistogramFrameBucketMinFieldName:()=>g.NX,isLikelyAscendingVector:()=>g.g2,isReducerID:()=>g.Em,isStandardFieldProp:()=>E.nx,isTableData:()=>r.pH,isTimeSeriesField:()=>r.hF,isTimeSeriesFrame:()=>r.aH,isTimeSeriesFrames:()=>r.jq,isValidDate:()=>u.vd,isValidDuration:()=>u.di,isValidGoDuration:()=>u.IM,isValidGrafanaDuration:()=>u.V3,localTimeFormat:()=>u.Od,locale:()=>i.Hg,locationUtil:()=>t.Ig,makeClassES5Compatible:()=>t.Yi,mapInternalLinkToExplore:()=>t.uS,matchAllLabels:()=>t._p,matchPluginId:()=>t._8,monacoLanguageRegistry:()=>h.l,nullToValue:()=>g.CF,numberOverrideProcessor:()=>l.m0,objRemoveUndefined:()=>t.wm,onUpdateDatasourceJsonDataOption:()=>t.PG,onUpdateDatasourceJsonDataOptionChecked:()=>t.EX,onUpdateDatasourceJsonDataOptionSelect:()=>t.BD,onUpdateDatasourceOption:()=>t.zX,onUpdateDatasourceResetOption:()=>t.yV,onUpdateDatasourceSecureJsonDataOption:()=>t.mn,onUpdateDatasourceSecureJsonDataOptionSelect:()=>t.wY,outerJoinDataFrames:()=>g.KP,parseDuration:()=>u.E9,parseFlags:()=>d.bQ,parseLabels:()=>t.Xy,preProcessPanelData:()=>r.N$,rangeUtil:()=>u.Ii,readCSV:()=>t.Jh,reduceField:()=>g.Nw,renderLegendFormat:()=>t.j_,renderMarkdown:()=>d.Gc,renderTextPanelMarkdown:()=>d.Pn,restoreCustomOverrideRules:()=>E.H9,reverseDataFrame:()=>r.q7,roundDecimals:()=>t.hB,scaledUnits:()=>i.yP,selectOverrideProcessor:()=>l.hL,serializeStateToUrlParam:()=>t.Pp,setLocale:()=>u.xS,setTimeZoneResolver:()=>u.GZ,setWeekStart:()=>u.$D,shallowCompare:()=>r.ab,simpleCountUnit:()=>i.UR,sortDataFrame:()=>r.ES,sortThresholds:()=>l.RU,standardEditorsRegistry:()=>l.DJ,standardFieldConfigEditorRegistry:()=>l.Gs,standardTransformers:()=>g.c9,standardTransformersRegistry:()=>g.h9,stringFormater:()=>i.cH,stringOverrideProcessor:()=>l.OU,stringStartsAsRegEx:()=>d.AP,stringToJsRegex:()=>d.dO,stringToMs:()=>d.dc,systemDateFormats:()=>u.WC,textUtil:()=>d.sQ,thresholdsOverrideProcessor:()=>l.N7,timeZoneAbbrevation:()=>u.jw,timeZoneFormatUserFriendly:()=>u.le,toCSV:()=>t._O,toDataFrame:()=>r.Vc,toDataFrameDTO:()=>r.Kl,toDuration:()=>u.Ah,toFilteredDataFrameDTO:()=>r.By,toFixed:()=>i.Mg,toFixedScaled:()=>i.gZ,toFixedUnit:()=>i.G8,toFloatOrUndefined:()=>d.$D,toIntegerOrUndefined:()=>d.vb,toLegacyResponseData:()=>r.w3,toNumberString:()=>d.kT,toOption:()=>t.zL,toPascalCase:()=>d.MX,toURLRange:()=>t.sQ,toUtc:()=>u.yT,transformDataFrame:()=>g.m6,unEscapeStringFromRegex:()=>d.xb,unaryOperators:()=>t.j7,unitOverrideProcessor:()=>l.lG,updateDatasourcePluginJsonDataOption:()=>t.lO,updateDatasourcePluginOption:()=>t.pN,updateDatasourcePluginResetOption:()=>t.QP,updateDatasourcePluginSecureJsonDataOption:()=>t.wp,urlUtil:()=>t.kM,useFieldOverrides:()=>l.rJ,usePluginContext:()=>y.Q,validateFieldConfig:()=>l.BF,valueMappingsOverrideProcessor:()=>l.xT,valueMatchers:()=>g.hI,vectorator:()=>s.Ek,withLoadingIndicator:()=>t.kz});var t=e(94032),n=e(64572),o={};for(const I in n)["default","LayoutModes","PanelPlugin","getPanelOptionsWithDefaults","filterFieldConfigOverrides","restoreCustomOverrideRules","isCustomFieldProp","isStandardFieldProp","createFieldConfigRegistry","PluginContextProvider","DataSourcePluginContextProvider","usePluginContext","isDataSourcePluginContext","getLinksSupplier","BinaryOperationID","CSVHeaderStyle","CSVReader","DataLinkBuiltInVars","DocsId","FieldConfigEditorBuilder","LegacyMappingType","NodeGraphDataFrameFieldNames","PanelOptionsEditorBuilder","Registry","UnaryOperationID","anyToNumber","arrayUtils","binaryOperators","classicColors","containsSearchFilter","convertOldAngularValueMappings","deprecationWarning","findCommonLabels","findUniqueLabels","formatLabels","getDataSourceRef","getDataSourceUID","getFlotPairs","getFlotPairsConstant","getSearchFilterScopedVar","getSeriesTimeStep","guessDecimals","hasMsResolution","isDataSourceRef","isEmptyObject","locationUtil","makeClassES5Compatible","mapInternalLinkToExplore","matchAllLabels","matchPluginId","objRemoveUndefined","onUpdateDatasourceJsonDataOption","onUpdateDatasourceJsonDataOptionChecked","onUpdateDatasourceJsonDataOptionSelect","onUpdateDatasourceOption","onUpdateDatasourceResetOption","onUpdateDatasourceSecureJsonDataOption","onUpdateDatasourceSecureJsonDataOptionSelect","parseLabels","readCSV","renderLegendFormat","roundDecimals","serializeStateToUrlParam","toCSV","toOption","toURLRange","unaryOperators","updateDatasourcePluginJsonDataOption","updateDatasourcePluginOption","updateDatasourcePluginResetOption","updateDatasourcePluginSecureJsonDataOption","urlUtil","withLoadingIndicator"].indexOf(I)<0&&(o[I]=()=>n[I]);e.d(A,o);var s=e(31978),r=e(48120),g=e(34687),u=e(38698),d=e(40672),i=e(56496),l=e(63877),f=e(56302),c=e(74529),h=e(58612),p=e(10361),m=e(21809),a=e(19484),v=e(65158),E=e(581),D=e(28528),b=e(13834),P=e(76287),y=e(92470),T=e(95187),M=e(90708)},58612:(Y,A,e)=>{"use strict";e.d(A,{l:()=>t.l});var t=e(96915)},96915:(Y,A,e)=>{"use strict";e.d(A,{l:()=>n});var t=e(83077);const n=new t.O},65158:(Y,A,e)=>{"use strict";e.d(A,{m:()=>d});var t=e(2543),n=e.n(t),o=e(66670),s=e(43429),r=e(95344),g=e(60264),u=e(28528);class d extends s.Ud{constructor(l){super(),this._fieldConfigDefaults={defaults:{},overrides:[]},this._initConfigRegistry=()=>new o.K,this.dataSupport={annotations:!1,alertStates:!1},this.panel=l}get defaults(){let l=this._defaults||{};if(!this._defaults&&this.optionsSupplier){const f=new g.pv;this.optionsSupplier(f,{data:[]});for(const c of f.getItems())c.defaultValue!=null&&(0,t.set)(l,c.path,c.defaultValue)}return l}get fieldConfigDefaults(){const l=this._fieldConfigDefaults.defaults;l.custom={};for(const f of this.fieldConfigRegistry.list())f.defaultValue!==void 0&&(0,t.set)(l,f.id,f.defaultValue);return{defaults:{...l},overrides:this._fieldConfigDefaults.overrides}}setDefaults(l){return(0,r.l)("PanelPlugin","setDefaults","setPanelOptions"),this._defaults=l,this}get fieldConfigRegistry(){return this._fieldConfigRegistry||(this._fieldConfigRegistry=this._initConfigRegistry()),this._fieldConfigRegistry}setEditor(l){return(0,r.l)("PanelPlugin","setEditor","setPanelOptions"),this.editor=l,this}setNoPadding(){return this.noPadding=!0,this}setMigrationHandler(l){return this.onPanelMigration=l,this}setPanelChangeHandler(l){return this.onPanelTypeChanged=l,this}setPanelOptions(l){return this.optionsSupplier=l,this}getPanelOptionsSupplier(){return this.optionsSupplier??(()=>{})}setDataSupport(l){return this.dataSupport={...this.dataSupport,...l},this}useFieldConfig(l={}){return this._initConfigRegistry=()=>(0,u.O)(l,this.meta.name),this}setSuggestionsSupplier(l){return this.suggestionsSupplier=l,this}getSuggestionsSupplier(){return this.suggestionsSupplier}hasPluginId(l){return this.meta.id===l}}},581:(Y,A,e)=>{"use strict";e.d(A,{F:()=>u,H9:()=>h,TQ:()=>p,aW:()=>i,nx:()=>m});var t=e(2543),n=e.n(t),o=e(8066),s=e(24293),r=e(37055),g=e(50082);function u({plugin:a,currentOptions:v,currentFieldConfig:E,isAfterPluginChange:D}){const b=(0,t.mergeWith)({},a.defaults,v||{},(T,M)=>{if((0,t.isArray)(M))return M}),P=d(E,a),y=f(a,P,D);return{options:b,fieldConfig:y}}function d(a,v){const E=v.fieldConfigDefaults,D={defaults:(0,t.mergeWith)({},E.defaults,a?a.defaults:{},(b,P)=>{if((0,t.isArray)(P))return P}),overrides:a?.overrides??[]};l(D.defaults,"",v.fieldConfigRegistry),D.defaults.thresholds&&c(D.defaults.thresholds),D.overrides=i(D.overrides,b=>v.fieldConfigRegistry.getIfExists(b.id)!==void 0);for(const b of D.overrides)for(const P of b.properties)P.id==="thresholds"&&c(P.value);return D}function i(a,v){return a.map(E=>{const D=E.properties.filter(v);return{...E,properties:D}}).filter(E=>E.properties.length>0)}function l(a,v,E){let D=!1;for(const[b,P]of Object.entries(a)){const y=`${v}${b}`,T=!!E.getIfExists(y);if(T){D=!0;continue}(0,t.isArray)(P)||!(0,t.isObject)(P)?T||(0,t.unset)(a,b):l(P,`${y}.`,E)||(0,t.unset)(a,b)}return D}function f(a,v,E){if(!E)return v;const D=a.fieldConfigRegistry.getIfExists(r.uo.Color);if(D&&D.settings){const b=D.settings,P=o.uf.getIfExists(v.defaults.color?.mode);if(!b.byValueSupport&&(!P||P.isByValue))return v.defaults.color={mode:s.Y.PaletteClassic},v;if(b.byValueSupport&&b.preferThresholdsMode&&P?.id!==s.Y.Fixed&&(!P||!P.isByValue))return v.defaults.color={mode:s.Y.Thresholds},v;if(b.bySeriesSupport&&P?.isByValue)return v.defaults.color={mode:s.Y.PaletteClassic},v}return v}function c(a){a.mode||(a.mode=g.O.Absolute),a.steps?a.steps.length&&(a.steps[0].value=-1/0):a.steps=[]}function h(a,v){const E={defaults:{...a.defaults,custom:v.defaults.custom},overrides:[...a.overrides]};for(const D of v.overrides)for(const b of D.properties)if(p(b)){const P=E.overrides.find(y=>(0,t.isEqual)(y.matcher,D.matcher));P?P!==D&&P.properties.push(b):E.overrides.push(D)}return E}function p(a){return a.id.startsWith("custom.")}function m(a){return!p(a)}},28528:(Y,A,e)=>{"use strict";e.d(A,{O:()=>s});var t=e(66670),n=e(69550),o=e(60264);function s(g={},u){const d=new t.K,i=n.G.list(),l={};if(g.useCustomConfig){const f=new o.bk;g.useCustomConfig(f);for(const c of f.getRegistry().list())if(c.isCustom=!0,c.id="custom."+c.id,r(c,i)){const h=l[c.category[0]]??[];h.push(c),l[c.category[0]]=h}else d.register(c)}for(let f of i){const c=f.id;if(!(g.disableStandardOptions&&g.disableStandardOptions.indexOf(c)>-1)){if(g.standardOptions){const h=g.standardOptions[c]?.hideFromDefaults,p=g.standardOptions[c]?.defaultValue,m=g.standardOptions[c]?.settings;h&&(f={...f,hideFromDefaults:h}),p&&(f={...f,defaultValue:p}),m&&(f={...f,settings:f.settings?{...f.settings,...m}:m})}if(d.register(f),f.category&&l[f.category[0]])for(let h of l[f.category[0]])d.register(h)}}for(const f of d.list())if(f.path.indexOf("[")>0)throw new Error(`[${u}] Field config paths do not support arrays: ${f.id}`);return d}function r(g,u){return!!u.find(d=>g.category&&d.category&&g.category[0]===d.category[0])}},21809:(Y,A,e)=>{"use strict";e.d(A,{M:()=>t.M});var t=e(77789)},77789:(Y,A,e)=>{"use strict";e.d(A,{M:()=>t});const t=o=>{for(let s=0;;s++){const r=n(s);if(!o.some(g=>g.refId===r))return r}};function n(o){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return o<s.length?s[o]:n(Math.floor(o/s.length)-1)+s[o%s.length]}},40672:(Y,A,e)=>{"use strict";e.d(A,{$D:()=>t.$D,$f:()=>t.$f,AP:()=>t.AP,Gc:()=>n.G,MX:()=>t.MX,Oq:()=>o.Oq,Pn:()=>n.P,bQ:()=>o.bQ,bs:()=>o.bs,dO:()=>t.dO,dc:()=>t.dc,jD:()=>t.jD,kT:()=>t.kT,sQ:()=>r,vb:()=>t.vb,xb:()=>t.xb});var t=e(54479),n=e(36663),o=e(21),s=e(80997);const r={escapeHtml:s.ZD,hasAnsiCodes:s.kE,sanitize:s.aj,sanitizeTextPanelContent:s.G$,sanitizeUrl:s.Jf,sanitizeSVGContent:s.rX,sanitizeTrustedTypes:s.oI,sanitizeTrustedTypesRSS:s.kc}},36663:(Y,A,e)=>{"use strict";e.d(A,{G:()=>g,P:()=>u});var t=e(60023),n=e(33836),o=e(80997);let s=!1;const r={pedantic:!1,gfm:!0,breaks:!1};function g(d,i){s||(t.xI.use((0,n.z)()),t.xI.setOptions({...r}),s=!0);let l;i?.breaks&&(l={...r,breaks:!0});const f=(0,t.xI)(d||"",l);if(typeof f!="string")throw new Error("Failed to process markdown synchronously.");return i?.noSanitize?f:(0,o.G$)(f)}function u(d,i){s||(t.xI.use((0,n.z)()),t.xI.setOptions({...r}),s=!0);const l=(0,t.xI)(d||"");if(typeof l!="string")throw new Error("Failed to process markdown synchronously.");return i?.noSanitize?l:(0,o.G$)(l)}},80997:(Y,A,e)=>{"use strict";e.d(A,{G$:()=>f,Jf:()=>h,ZD:()=>m,aj:()=>d,kE:()=>p,kc:()=>i,oI:()=>l,rX:()=>c});var t=e(16750),n=e(42838),o=e.n(n),s=e(34005),r=e.n(s);const g=Object.keys(s.whiteList).reduce((a,v)=>(a[v]=s.whiteList[v]?.concat(["class","style"]),a),{}),u=new s.FilterXSS({whiteList:g,css:{whiteList:{...s.getDefaultCSSWhiteList(),"flex-direction":!0,"flex-wrap":!0,"flex-basis":!0,"flex-grow":!0,"flex-shrink":!0,"flex-flow":!0,gap:!0,order:!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"align-items":!0,"align-content":!0,"align-self":!0}}});function d(a){try{return o().sanitize(a,{USE_PROFILES:{html:!0},FORBID_TAGS:["form","input"]})}catch{return console.error("String could not be sanitized",a),m(a)}}function i(a){return o().sanitize(a,{RETURN_TRUSTED_TYPE:!0,ADD_ATTR:["xmlns:atom","version","property","content"],ADD_TAGS:["rss","meta","channel","title","link","description","atom:link","item","pubDate","guid"],PARSER_MEDIA_TYPE:"application/xhtml+xml"})}function l(a){return o().sanitize(a,{RETURN_TRUSTED_TYPE:!0})}function f(a){try{return u.process(a)}catch{return console.error("String could not be sanitized",a),"Text string could not be sanitized"}}function c(a){return o().sanitize(a,{USE_PROFILES:{svg:!0,svgFilters:!0}})}function h(a){return(0,t.J)(a)}function p(a){return/\u001b\[\d{1,2}m/.test(a)}function m(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")}},54479:(Y,A,e)=>{"use strict";e.d(A,{$D:()=>p,$f:()=>a,AP:()=>i,MX:()=>m,dO:()=>l,dc:()=>f,jD:()=>u,kT:()=>c,vb:()=>h,xb:()=>d});var t=e(2543),n=e.n(t);const s="([\\"+["(","[","{","}","]",")","\\","|","*","+","-",".","?","<",">","#","&","^","$"].join("\\")+"])",r=new RegExp(s,"g"),g=new RegExp("(\\\\)"+s,"g");function u(v){return v&&v.replace(r,"\\$1")}function d(v){return v&&v.replace(g,"$2")}function i(v){return v?v[0]==="/":!1}function l(v){if(!i(v))return new RegExp(`^${v}$`);const E=v.match(new RegExp("^/(.*?)/(g?i?m?y?s?)$"));if(!E)throw new Error(`'${v}' is not a valid regular expression.`);return new RegExp(E[1],E[2])}function f(v){if(!v)return 0;const E=parseInt(v,10),D=v.slice(String(E).length),b=1e3,P=b*60,y=P*60,T=y*24;switch(D){case"s":return E*b;case"m":return E*P;case"h":return E*y;case"d":return E*T;default:if(!D)return isNaN(E)?0:E;throw new Error("Not supported unit: "+D)}}function c(v){return v!=null&&Number.isFinite(v)?v.toString():""}function h(v){if(!v)return;const E=parseInt(v,10);return isNaN(E)?void 0:E}function p(v){if(!v)return;const E=parseFloat(v);return isNaN(E)?void 0:E}function m(v){const E=(0,t.camelCase)(v);return E.charAt(0).toUpperCase()+E.substring(1)}function a(v){return v.replace(/[\\^$*+?.()|[\]{}\/]/g,"\\$&")}},21:(Y,A,e)=>{"use strict";e.d(A,{Oq:()=>t,bQ:()=>g,bs:()=>o});function t({searchWords:u,textToHighlight:d}){const i=[];for(const l of u)typeof l=="string"&&i.push(...o(d,l));return i}const n=u=>u.replace(/[[{(][\w,.\/:;<=>?:*+]+$/,"");function o(u,d){if(!u||!d)return[];const i=[],{cleaned:l,flags:f}=g(n(d));let c;try{c=new RegExp(`(?:${l})`,f)}catch{return i}return u.replace(c,(h,...p)=>{if(h){const m=p[p.length-2];i.push({text:h,start:m,length:h.length,end:m+h.length})}return""}),i}const s="-",r=/\(\?([ims-]+)\)/g;function g(u){const d=new Set(["g"]);return{cleaned:u.replace(r,(l,f)=>{const c=f.startsWith(s);for(let h=0;h<f.length;++h){const p=f.charAt(h);c||f.charAt(h-1)===s?d.delete(p):p!==s&&d.add(p)}return""}),flags:Array.from(d).join("")}}},23596:(Y,A,e)=>{"use strict";e.r(A),e.d(A,{alpha:()=>p,asHexString:()=>g,asRgbString:()=>u,darken:()=>m,decomposeColor:()=>i,emphasize:()=>h,getContrastRatio:()=>f,getLuminance:()=>c,hexToRgb:()=>o,hslToRgb:()=>d,lighten:()=>a,recomposeColor:()=>l,rgbToHex:()=>r});var t=e(84140);function n(v,E=0,D=1){return Math.min(Math.max(E,v),D)}function o(v){v=v.slice(1);const E=new RegExp(`.{1,${v.length>=6?2:1}}`,"g");let D=v.match(E);if(!D)return"";let b=Array.from(D);return b[0].length===1&&(b=b.map(P=>P+P)),b?`rgb${b.length===4?"a":""}(${b.map((P,y)=>y<3?parseInt(P,16):Math.round(parseInt(P,16)/255*1e3)/1e3).join(", ")})`:""}function s(v){const E=v.toString(16);return E.length===1?`0${E}`:E}function r(v){if(v.indexOf("#")===0)return v;const{values:E}=i(v);return`#${E.map(D=>s(D)).join("")}`}function g(v){if(v[0]==="#")return v;const E=(0,t.A)(v);return E.getAlpha()===1?E.toHexString():E.toHex8String()}function u(v){return v.startsWith("rgb")?v:(0,t.A)(v).toRgbString()}function d(v){const E=i(v),{values:D}=E,b=D[0],P=D[1]/100,y=D[2]/100,T=P*Math.min(y,1-y),M=(S,O=(S+b/30)%12)=>y-T*Math.max(Math.min(O-3,9-O,1),-1);let I="rgb";const x=[Math.round(M(0)*255),Math.round(M(8)*255),Math.round(M(4)*255)];return E.type==="hsla"&&(I+="a",x.push(D[3])),l({type:I,values:x})}function i(v){if(typeof v!="string")return v;if(v.charAt(0)==="#")return i(o(v));const E=v.indexOf("("),D=v.substring(0,E);if(["rgb","rgba","hsl","hsla","color"].indexOf(D)===-1)throw new Error(`Unsupported '${v}' color. The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()`);let b=v.substring(E+1,v.length-1),P;if(D==="color"){if(b=b.split(" "),P=b.shift(),b.length===4&&b[3].charAt(0)==="/"&&(b[3]=b[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(P)===-1)throw new Error(`Unsupported ${P} color space. The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`)}else b=b.split(",");return b=b.map(y=>parseFloat(y)),{type:D,values:b,colorSpace:P}}function l(v){const{type:E,colorSpace:D}=v;let b=v.values;return E.indexOf("rgb")!==-1?b=b.map((P,y)=>y<3?parseInt(P,10):P):E.indexOf("hsl")!==-1&&(b[1]=`${b[1]}%`,b[2]=`${b[2]}%`),E.indexOf("color")!==-1?b=`${D} ${b.join(" ")}`:b=`${b.join(", ")}`,`${E}(${b})`}function f(v,E,D){const b=c(v),P=c(E,D);return(Math.max(b,P)+.05)/(Math.min(b,P)+.05)}function c(v,E){const D=i(v);let b=D.type==="hsl"?i(d(v)).values:D.values;if(E&&D.type==="rgba"){const y=i(E),T=b[3];b[0]=b[0]*T+y.values[0]*(1-T),b[1]=b[1]*T+y.values[1]*(1-T),b[2]=b[2]*T+y.values[2]*(1-T)}const P=b.map(y=>(D.type!=="color"&&(y/=255),y<=.03928?y/12.92:((y+.055)/1.055)**2.4));return Number((.2126*P[0]+.7152*P[1]+.0722*P[2]).toFixed(3))}function h(v,E=.15){return c(v)>.5?m(v,E):a(v,E)}function p(v,E){if(v==="")return"#000000";if(E=n(E),v[0]==="#"){if(v.length===9)v=v.substring(0,7);else if(v.length<=5){let b="#";for(let P=1;P<4;P++)b+=v[P]+v[P];v=b}return v+Math.round(E*255).toString(16).padStart(2,"0")}else{if(v[3]==="(")return v.replace(")",`, ${E})`);if(v[4]==="(")return v.substring(0,v.lastIndexOf(","))+`, ${E})`}const D=i(v);return D.type==="color"?D.values[3]=`/${E}`:D.values[3]=E,l(D)}function m(v,E){const D=i(v);if(E=n(E),D.type.indexOf("hsl")!==-1)D.values[2]*=1-E;else if(D.type.indexOf("rgb")!==-1||D.type.indexOf("color")!==-1)for(let b=0;b<3;b+=1)D.values[b]*=1-E;return l(D)}function a(v,E){const D=i(v);if(E=n(E),D.type.indexOf("hsl")!==-1)D.values[2]+=(100-D.values[2])*E;else if(D.type.indexOf("rgb")!==-1)for(let b=0;b<3;b+=1)D.values[b]+=(255-D.values[b])*E;else if(D.type.indexOf("color")!==-1)for(let b=0;b<3;b+=1)D.values[b]+=(1-D.values[b])*E;return l(D)}},60578:(Y,A,e)=>{"use strict";e.d(A,{D:()=>o});var t=e(96540),n=e(47696);const o=t.createContext((0,n.a)());o.displayName="ThemeContext"},47696:(Y,A,e)=>{"use strict";e.d(A,{a:()=>R});function t(){const H=["xs","sm","md","lg","xl","xxl"],W="px",N={xs:0,sm:544,md:769,lg:992,xl:1200,xxl:1440};function V(_){return`@media (min-width:${typeof _=="number"?_:N[_]}${W})`}function G(_){return`@media (max-width:${(typeof _=="number"?_:N[_])-5/100}${W})`}return{values:N,up:V,down:G,keys:H,unit:W}}var n=e(2543),o=e(23596);const s={white:"#FFFFFF",black:"#000000",gray25:"#2c3235",gray15:"#22252b",gray10:"#181b1f",gray05:"#111217",darkLayer0:"#18181A",darkLayer1:"#212124",darkLayer2:"#2a2a2f",darkBorder1:"#34343B",darkBorder2:"#64646B",gray90:"#F4F5F5",gray100:"#F4F5F5",gray80:"#D0D1D3",lightBorder1:"#E4E7E7",blueDarkMain:"#3D71D9",blueDarkText:"#6E9FFF",redDarkMain:"#D10E5C",redDarkText:"#FF5286",greenDarkMain:"#1A7F4B",greenDarkText:"#6CCF8E",orangeDarkMain:"#FF9900",orangeDarkText:"#fbad37",blueLightMain:"#3871DC",blueLightText:"#1F62E0",redLightMain:"#E0226E",redLightText:"#CF0E5B",greenLightMain:"#1B855E",greenLightText:"#0A764E",orangeLightMain:"#FF9900",orangeLightText:"#B5510D"};class r{constructor(){this.mode="dark",this.whiteBase="204, 204, 220",this.border={weak:`rgba(${this.whiteBase}, 0.12)`,medium:`rgba(${this.whiteBase}, 0.20)`,strong:`rgba(${this.whiteBase}, 0.30)`},this.text={primary:`rgb(${this.whiteBase})`,secondary:`rgba(${this.whiteBase}, 0.65)`,disabled:`rgba(${this.whiteBase}, 0.6)`,link:s.blueDarkText,maxContrast:s.white},this.primary={main:s.blueDarkMain,text:s.blueDarkText,border:s.blueDarkText},this.secondary={main:`rgba(${this.whiteBase}, 0.10)`,shade:`rgba(${this.whiteBase}, 0.14)`,transparent:`rgba(${this.whiteBase}, 0.08)`,text:this.text.primary,contrastText:`rgb(${this.whiteBase})`,border:`rgba(${this.whiteBase}, 0.08)`},this.info=this.primary,this.error={main:s.redDarkMain,text:s.redDarkText},this.success={main:s.greenDarkMain,text:s.greenDarkText},this.warning={main:s.orangeDarkMain,text:s.orangeDarkText},this.background={canvas:s.gray05,primary:s.gray10,secondary:s.gray15},this.action={hover:`rgba(${this.whiteBase}, 0.16)`,selected:`rgba(${this.whiteBase}, 0.12)`,selectedBorder:s.orangeDarkMain,focus:`rgba(${this.whiteBase}, 0.16)`,hoverOpacity:.08,disabledText:this.text.disabled,disabledBackground:`rgba(${this.whiteBase}, 0.04)`,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(270deg, #F55F3E 0%, #FF8833 100%)",brandVertical:"linear-gradient(0.01deg, #F55F3E 0.01%, #FF8833 99.99%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.15}}class g{constructor(){this.mode="light",this.blackBase="36, 41, 46",this.primary={main:s.blueLightMain,border:s.blueLightText,text:s.blueLightText},this.text={primary:`rgba(${this.blackBase}, 1)`,secondary:`rgba(${this.blackBase}, 0.75)`,disabled:`rgba(${this.blackBase}, 0.50)`,link:this.primary.text,maxContrast:s.black},this.border={weak:`rgba(${this.blackBase}, 0.12)`,medium:`rgba(${this.blackBase}, 0.30)`,strong:`rgba(${this.blackBase}, 0.40)`},this.secondary={main:`rgba(${this.blackBase}, 0.08)`,shade:`rgba(${this.blackBase}, 0.15)`,transparent:`rgba(${this.blackBase}, 0.08)`,contrastText:`rgba(${this.blackBase},  1)`,text:this.text.primary,border:this.border.weak},this.info={main:s.blueLightMain,text:s.blueLightText},this.error={main:s.redLightMain,text:s.redLightText,border:s.redLightText},this.success={main:s.greenLightMain,text:s.greenLightText},this.warning={main:s.orangeLightMain,text:s.orangeLightText},this.background={canvas:s.gray90,primary:s.white,secondary:s.gray100},this.action={hover:`rgba(${this.blackBase}, 0.12)`,selected:`rgba(${this.blackBase}, 0.08)`,selectedBorder:s.orangeLightMain,hoverOpacity:.08,focus:`rgba(${this.blackBase}, 0.12)`,disabledBackground:`rgba(${this.blackBase}, 0.04)`,disabledText:this.text.disabled,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(90deg, #FF8833 0%, #F53E4C 100%)",brandVertical:"linear-gradient(0.01deg, #F53E4C -31.2%, #FF8833 113.07%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.2}}function u(B){const H=new r,W=new g,N=(B.mode??"dark")==="dark"?H:W,{primary:V=N.primary,secondary:G=N.secondary,info:_=N.info,warning:K=N.warning,success:j=N.success,error:k=N.error,tonalOffset:Q=N.tonalOffset,hoverFactor:ee=N.hoverFactor,contrastThreshold:ae=N.contrastThreshold,...Z}=B;function ne(te,re=ae){return(0,o.getContrastRatio)(H.text.maxContrast,te,N.background.primary)>=re?H.text.maxContrast:W.text.maxContrast}const q=({color:te,name:re})=>{if(te={...te,name:re},!te.main)throw new Error(`Missing main color for ${re}`);return te.text||(te.text=te.main),te.border||(te.border=te.text),te.shade||(te.shade=N.mode==="light"?(0,o.darken)(te.main,Q):(0,o.lighten)(te.main,Q)),te.transparent||(te.transparent=(0,o.alpha)(te.main,.15)),te.contrastText||(te.contrastText=ne(te.main)),te.borderTransparent||(te.borderTransparent=(0,o.alpha)(te.border,.25)),te};return(0,n.merge)({...N,primary:q({color:V,name:"primary"}),secondary:q({color:G,name:"secondary"}),info:q({color:_,name:"info"}),error:q({color:k,name:"error"}),success:q({color:j,name:"success"}),warning:q({color:K,name:"warning"}),getContrastText:ne,emphasize:(te,re)=>(0,o.emphasize)(te,re??ee)},Z)}function d(B,H){const W={padding:1,headerHeight:4,background:B.background.primary,borderColor:B.border.weak,boxShadow:"none"},N={borderColor:B.border.medium,borderHover:B.border.strong,text:B.text.primary,background:B.mode==="dark"?B.background.canvas:B.background.primary};return{height:{sm:3,md:4,lg:6},input:N,panel:W,dropdown:{background:N.background},tooltip:{background:B.background.secondary,text:B.text.primary},dashboard:{background:B.background.canvas,padding:1},overlay:{background:B.mode==="dark"?"rgba(63, 62, 62, 0.45)":"rgba(208, 209, 211, 0.24)"},sidemenu:{width:57},menuTabs:{height:42},textHighlight:{text:B.warning.contrastText,background:B.warning.main},horizontalDrawer:{defaultHeight:400},table:{rowHoverBackground:B.emphasize(B.background.primary,.03)}}}function i(B){return B.mode==="dark"?{z1:"0px 1px 2px rgba(1, 4, 9, 0.75)",z2:"0px 4px 8px rgba(1, 4, 9, 0.75)",z3:"0px 8px 24px rgb(1, 4, 9)"}:{z1:"0px 1px 2px rgba(24, 26, 27, 0.2)",z2:"0px 4px 8px rgba(24, 26, 27, 0.2)",z3:"0px 13px 20px 1px rgba(24, 26, 27, 0.18)"}}function l(B){const H=B.borderRadius??2;return{radius:{default:"2px",pill:"9999px",circle:"100%"},borderRadius:V=>`${(V??1)*H}px`}}function f(B={}){const{gridSize:H=8}=B,W=V=>typeof V=="string"?V:V*H,N=(...V)=>(V.length===0&&(V[0]=1),V.map(G=>{const _=W(G);return typeof _=="number"?`${_}px`:_}).join(" "));return N.gridSize=H,N.x0="0px",N.x0_25="2px",N.x0_5="4px",N.x1="8px",N.x1_5="12px",N.x2="16px",N.x2_5="20px",N.x3="24px",N.x4="32px",N.x5="40px",N.x6="48px",N.x8="64px",N.x10="80px",N}const c={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},h={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function p(B=["all"],H={}){const{duration:W=h.standard,easing:N=c.easeInOut,delay:V=0}=H;return(Array.isArray(B)?B:[B]).map(G=>`${G} ${typeof W=="string"?W:a(W)} ${N} ${typeof V=="string"?V:a(V)}`).join(",")}function m(B){if(!B)return 0;const H=B/36;return Math.round((4+15*H**.25+H/5)*10)}function a(B){return`${Math.round(B)}ms`}function v(){return{create:p,duration:h,easing:c,getAutoHeightDuration:m}}const E='"Inter", "Helvetica", "Arial", sans-serif',D="'Roboto Mono', monospace";function b(B,H={}){const{fontFamily:W=E,fontFamilyMonospace:N=D,fontSize:V=14,fontWeightLight:G=300,fontWeightRegular:_=400,fontWeightMedium:K=500,fontWeightBold:j=500,htmlFontSize:k=14}=H,Q=V/14,ee=q=>`${q/k*Q}rem`,ae=(q,te,re,de,ie)=>{if(re%2!==0||te%2!==0)throw new Error("Font size and line height should be integer multiples of 2 to prevent issues with alignment");return{fontFamily:W,fontWeight:q,fontSize:ee(te),lineHeight:re/te,...W===E?{letterSpacing:`${P(de/te)}em`}:{},...ie}},Z={h1:ae(_,28,32,-.25),h2:ae(_,24,28,0),h3:ae(_,22,24,0),h4:ae(_,18,22,.25),h5:ae(_,16,22,0),h6:ae(K,14,22,.15),body:ae(_,V,22,.15),bodySmall:ae(_,12,18,.15)};return{htmlFontSize:k,pxToRem:ee,fontFamily:W,fontFamilyMonospace:N,fontSize:V,fontWeightLight:G,fontWeightRegular:_,fontWeightMedium:K,fontWeightBold:j,size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},...Z}}function P(B){return Math.round(B*1e5)/1e5}var y=e(25137);function T(B){const H={name:"Grafana Default",typography:{fontFamily:{sansSerif:B.typography.fontFamily,monospace:B.typography.fontFamilyMonospace},size:{base:`${B.typography.fontSize}px`,xs:B.typography.size.xs,sm:B.typography.size.sm,md:B.typography.size.md,lg:B.typography.size.lg},heading:{h1:B.typography.h1.fontSize,h2:B.typography.h2.fontSize,h3:B.typography.h3.fontSize,h4:B.typography.h4.fontSize,h5:B.typography.h5.fontSize,h6:B.typography.h6.fontSize},weight:{light:B.typography.fontWeightLight,regular:B.typography.fontWeightRegular,semibold:B.typography.fontWeightMedium,bold:B.typography.fontWeightBold},lineHeight:{xs:B.typography.bodySmall.lineHeight,sm:B.typography.bodySmall.lineHeight,md:B.typography.body.lineHeight,lg:B.typography.h2.lineHeight},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:`${B.breakpoints.values.xs}px`,sm:`${B.breakpoints.values.sm}px`,md:`${B.breakpoints.values.md}px`,lg:`${B.breakpoints.values.lg}px`,xl:`${B.breakpoints.values.xl}px`,xxl:`${B.breakpoints.values.xxl}px`},spacing:{base:B.spacing.gridSize,insetSquishMd:B.spacing(.5,1),d:B.spacing(2),xxs:B.spacing(.25),xs:B.spacing(.5),sm:B.spacing(1),md:B.spacing(2),lg:B.spacing(3),xl:B.spacing(4),gutter:B.spacing(4),formSpacingBase:B.spacing.gridSize,formMargin:`${B.spacing.gridSize*4}px`,formFieldsetMargin:`${B.spacing.gridSize*2}px`,formInputHeight:B.spacing.gridSize*4,formButtonHeight:B.spacing.gridSize*4,formInputPaddingHorizontal:`${B.spacing.gridSize}px`,formInputAffixPaddingHorizontal:`${B.spacing.gridSize/2}px`,formInputMargin:`${B.spacing.gridSize*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${B.spacing.gridSize/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:B.shape.borderRadius(1),md:B.shape.borderRadius(2),lg:B.shape.borderRadius(3)},width:{sm:"1px"}},height:{sm:B.spacing.gridSize*B.components.height.sm,md:B.spacing.gridSize*B.components.height.md,lg:B.spacing.gridSize*B.components.height.lg},panelPadding:B.components.panel.padding*B.spacing.gridSize,panelHeaderHeight:B.spacing.gridSize*B.components.panel.headerHeight,zIndex:B.zIndex},W={...M,black:"#000000",white:"#ffffff",dark1:"#141414",dark2:"#161719",dark3:"#1f1f20",dark4:"#212124",dark5:"#222426",dark6:"#262628",dark7:"#292a2d",dark8:"#2f2f32",dark9:"#343436",dark10:"#424345",gray1:"#555555",gray2:"#8e8e8e",gray3:"#b3b3b3",gray4:"#d8d9da",gray5:"#ececec",gray6:"#f4f5f8",gray7:"#fbfbfb",redBase:"#e02f44",redShade:"#c4162a",greenBase:"#299c46",greenShade:"#23843b",red:"#d44a3a",yellow:"#ecbb13",purple:"#9933cc",variable:"#32d1df",orange:"#eb7b18",orangeDark:"#ff780a"},N={bg1:B.colors.background.primary,bg2:B.colors.background.secondary,bg3:B.colors.action.hover,dashboardBg:B.colors.background.canvas,bgBlue1:B.colors.primary.main,bgBlue2:B.colors.primary.shade},V={border1:B.colors.border.weak,border2:B.colors.border.medium,border3:B.colors.border.strong},G={textStrong:B.colors.text.maxContrast,textHeading:B.colors.text.primary,text:B.colors.text.primary,textSemiWeak:B.colors.text.secondary,textWeak:B.colors.text.secondary,textFaint:B.colors.text.disabled,textBlue:B.colors.primary.text},_={formLabel:B.colors.text.primary,formDescription:B.colors.text.secondary,formInputBg:B.components.input.background,formInputBgDisabled:B.colors.action.disabledBackground,formInputBorder:B.components.input.borderColor,formInputBorderHover:B.components.input.borderHover,formInputBorderActive:B.colors.primary.border,formInputBorderInvalid:B.colors.error.border,formInputPlaceholderText:B.colors.text.disabled,formInputText:B.components.input.text,formInputDisabledText:B.colors.action.disabledText,formFocusOutline:B.colors.primary.main,formValidationMessageText:B.colors.error.contrastText,formValidationMessageBg:B.colors.error.main};return{...H,type:B.colors.mode==="dark"?y.I.Dark:y.I.Light,isDark:B.isDark,isLight:B.isLight,name:B.name,palette:{...W,brandPrimary:W.orange,brandSuccess:B.colors.success.main,brandWarning:B.colors.warning.main,brandDanger:B.colors.error.main,queryRed:B.colors.error.text,queryGreen:B.colors.success.text,queryPurple:"#fe85fc",queryOrange:W.orange,online:B.colors.success.main,warn:B.colors.success.main,critical:B.colors.success.main},colors:{...N,...V,..._,...G,bodyBg:B.colors.background.canvas,panelBg:B.components.panel.background,panelBorder:B.components.panel.borderColor,pageHeaderBg:B.colors.background.canvas,pageHeaderBorder:B.colors.background.canvas,dropdownBg:_.formInputBg,dropdownShadow:W.black,dropdownOptionHoverBg:N.bg2,link:B.colors.text.primary,linkDisabled:B.colors.text.disabled,linkHover:B.colors.text.maxContrast,linkExternal:B.colors.text.link},shadows:{listItem:"none"},visualization:B.visualization}}const M={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"};var I=e(24293);function x(B){const H=B.mode==="light"?O():S(),W={};for(const G of H)for(const _ of G.shades)if(W[_.name]=_.color,_.aliases)for(const K of _.aliases)W[K]=_.color;W.transparent="rgba(0,0,0,0)",W["panel-bg"]=B.background.primary,W.text=B.text.primary;const N=G=>{if(!G)return I.F;const _=W[G];if(_)return _;if(G[0]==="#"||G.indexOf("rgb")>-1)return G;const K=L[G.toLowerCase()];return K?(W[G]=K,K):G},V=C();return{hues:H,palette:V,getColorByName:N}}function S(){return[{name:"red",shades:[{color:"#FFA6B0",name:"super-light-red"},{color:"#FF7383",name:"light-red"},{color:"#F2495C",name:"red",primary:!0},{color:"#E02F44",name:"semi-dark-red"},{color:"#C4162A",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFCB7D",name:"super-light-orange",aliases:[]},{color:"#FFB357",name:"light-orange",aliases:[]},{color:"#FF9830",name:"orange",aliases:[],primary:!0},{color:"#FF780A",name:"semi-dark-orange",aliases:[]},{color:"#FA6400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFF899",name:"super-light-yellow",aliases:[]},{color:"#FFEE52",name:"light-yellow",aliases:[]},{color:"#FADE2A",name:"yellow",aliases:[],primary:!0},{color:"#F2CC0C",name:"semi-dark-yellow",aliases:[]},{color:"#E0B400",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#C8F2C2",name:"super-light-green",aliases:[]},{color:"#96D98D",name:"light-green",aliases:[]},{color:"#73BF69",name:"green",aliases:[],primary:!0},{color:"#56A64B",name:"semi-dark-green",aliases:[]},{color:"#37872D",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#C0D8FF",name:"super-light-blue",aliases:[]},{color:"#8AB8FF",name:"light-blue",aliases:[]},{color:"#5794F2",name:"blue",aliases:[],primary:!0},{color:"#3274D9",name:"semi-dark-blue",aliases:[]},{color:"#1F60C4",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#DEB6F2",name:"super-light-purple",aliases:[]},{color:"#CA95E5",name:"light-purple",aliases:[]},{color:"#B877D9",name:"purple",aliases:[],primary:!0},{color:"#A352CC",name:"semi-dark-purple",aliases:[]},{color:"#8F3BB8",name:"dark-purple",aliases:[]}]}]}function O(){return[{name:"red",shades:[{color:"#FF7383",name:"super-light-red"},{color:"#F2495C",name:"light-red"},{color:"#E02F44",name:"red",primary:!0},{color:"#C4162A",name:"semi-dark-red"},{color:"#AD0317",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFB357",name:"super-light-orange",aliases:[]},{color:"#FF9830",name:"light-orange",aliases:[]},{color:"#FF780A",name:"orange",aliases:[],primary:!0},{color:"#FA6400",name:"semi-dark-orange",aliases:[]},{color:"#E55400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFEE52",name:"super-light-yellow",aliases:[]},{color:"#FADE2A",name:"light-yellow",aliases:[]},{color:"#F2CC0C",name:"yellow",aliases:[],primary:!0},{color:"#E0B400",name:"semi-dark-yellow",aliases:[]},{color:"#CC9D00",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#96D98D",name:"super-light-green",aliases:[]},{color:"#73BF69",name:"light-green",aliases:[]},{color:"#56A64B",name:"green",aliases:[],primary:!0},{color:"#37872D",name:"semi-dark-green",aliases:[]},{color:"#19730E",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#8AB8FF",name:"super-light-blue",aliases:[]},{color:"#5794F2",name:"light-blue",aliases:[]},{color:"#3274D9",name:"blue",aliases:[],primary:!0},{color:"#1F60C4",name:"semi-dark-blue",aliases:[]},{color:"#1250B0",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#CA95E5",name:"super-light-purple",aliases:[]},{color:"#B877D9",name:"light-purple",aliases:[]},{color:"#A352CC",name:"purple",aliases:[],primary:!0},{color:"#8F3BB8",name:"semi-dark-purple",aliases:[]},{color:"#7C2EA3",name:"dark-purple",aliases:[]}]}]}function C(){return["green","semi-dark-yellow","light-blue","semi-dark-orange","red","blue","purple","#705DA0","dark-green","yellow","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"]}const L={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var U=e(67255);function R(B={}){const{colors:H={},spacing:W={},shape:N={},typography:V={}}=B,G=u(H),_=t(),K=f(W),j=l(N),k=b(G,V),Q=i(G),ee=v(),ae=d(G,Q),Z=x(G),ne={name:G.mode==="dark"?"Dark":"Light",isDark:G.mode==="dark",isLight:G.mode==="light",colors:G,breakpoints:_,spacing:K,shape:j,components:ae,typography:k,shadows:Q,transitions:ee,visualization:Z,zIndex:{...U.f},flags:{}};return{...ne,v1:T(ne)}}},74529:(Y,A,e)=>{"use strict";e.d(A,{Dx:()=>s.D,MV:()=>o,an:()=>t.a,gh:()=>n.g,k7:()=>n.k});var t=e(47696),n=e(97594),o=e(23596),s=e(60578)},97594:(Y,A,e)=>{"use strict";e.d(A,{g:()=>o,k:()=>s});var t=e(83077),n=e(47696);function o(i){return(r.getIfExists(i)??r.get("dark")).build()}function s(i){return r.list().filter(l=>i?!0:!l.isExtra)}const r=new t.O(()=>[{id:"system",name:"System preference",build:g},{id:"dark",name:"Dark",build:()=>(0,n.a)({colors:{mode:"dark"}})},{id:"light",name:"Light",build:()=>(0,n.a)({colors:{mode:"light"}})},{id:"blue-night",name:"Blue night",build:d,isExtra:!0},{id:"midnight",name:"Midnight",build:u,isExtra:!0}]);function g(){const l=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";return o(l)}function u(){const i="204, 204, 220";return(0,n.a)({name:"Midnight",colors:{mode:"dark",background:{canvas:"#000000",primary:"#000000",secondary:"#181818"},border:{weak:`rgba(${i}, 0.17)`,medium:`rgba(${i}, 0.25)`,strong:`rgba(${i}, 0.35)`}}})}function d(){return(0,n.a)({name:"Blue night",colors:{mode:"dark",background:{canvas:"#15161d",primary:"#15161d",secondary:"#1d1f2e"},border:{weak:"#2e304f",medium:"#2e304f",strong:"#2e304f"}}})}},67255:(Y,A,e)=>{"use strict";e.d(A,{f:()=>t});const t={activePanel:999,navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061}},75059:(Y,A,e)=>{"use strict";e.d(A,{AS:()=>i,C6:()=>l,Em:()=>u,H3:()=>f,Nw:()=>d,gy:()=>g});var t=e(2543),n=e.n(t),o=e(39070),s=e(11261),r=e(83077),g=(D=>(D.sum="sum",D.max="max",D.min="min",D.logmin="logmin",D.mean="mean",D.variance="variance",D.stdDev="stdDev",D.last="last",D.first="first",D.count="count",D.range="range",D.diff="diff",D.diffperc="diffperc",D.delta="delta",D.step="step",D.firstNotNull="firstNotNull",D.lastNotNull="lastNotNull",D.changeCount="changeCount",D.distinctCount="distinctCount",D.allIsZero="allIsZero",D.allIsNull="allIsNull",D.allValues="allValues",D.uniqueValues="uniqueValues",D))(g||{});function u(D){return Object.keys(g).includes(D)}function d(D){const{field:b,reducers:P}=D;if(!b||!P||P.length<1)return{};if(b.state?.calcs){const O=[];for(const C of P)b.state.calcs.hasOwnProperty(C)||O.push(C);if(O.length<1)return{...b.state.calcs}}b.state||(b.state={});const y=i.list(P),T=b.values;if(T&&T.length<1){const O={...b.state.calcs};for(const C of y)O[C.id]=C.emptyInputResult!==null?C.emptyInputResult:null;return b.state.calcs=O}const{nullValueMode:M=o.UW.Ignore}=b.config,I=M===o.UW.Ignore,x=M===o.UW.AsZero;if(y.length===1&&y[0].reduce){const O=y[0].reduce(b,I,x);return b.state.calcs={...b.state.calcs,...O},O}let S=f(b,I,x);for(const O of y)!S.hasOwnProperty(O.id)&&O.reduce&&(S={...S,...O.reduce(b,I,x)});return b.state.calcs={...b.state.calcs,...S},S}const i=new r.O(()=>[{id:"lastNotNull",name:"Last *",description:"Last non-null value (also excludes NaNs)",standard:!0,aliasIds:["current"],reduce:m},{id:"last",name:"Last",description:"Last value",standard:!0,reduce:p},{id:"firstNotNull",name:"First *",description:"First non-null value (also excludes NaNs)",standard:!0,reduce:h},{id:"first",name:"First",description:"First Value",standard:!0,reduce:c},{id:"min",name:"Min",description:"Minimum Value",standard:!0},{id:"max",name:"Max",description:"Maximum Value",standard:!0},{id:"mean",name:"Mean",description:"Average Value",standard:!0,aliasIds:["avg"]},{id:"variance",name:"Variance",description:"Variance of all values in a field",standard:!1,reduce:a},{id:"stdDev",name:"StdDev",description:"Standard deviation of all values in a field",standard:!1,reduce:a},{id:"sum",name:"Total",description:"The sum of all values",emptyInputResult:0,standard:!0,aliasIds:["total"]},{id:"count",name:"Count",description:"Number of values in response",emptyInputResult:0,standard:!0},{id:"range",name:"Range",description:"Difference between minimum and maximum values",standard:!0},{id:"delta",name:"Delta",description:"Cumulative change in value",standard:!0},{id:"step",name:"Step",description:"Minimum interval between values",standard:!0},{id:"diff",name:"Difference",description:"Difference between first and last values",standard:!0},{id:"logmin",name:"Min (above zero)",description:"Used for log min scale",standard:!0},{id:"allIsZero",name:"All Zeros",description:"All values are zero",emptyInputResult:!1,standard:!0},{id:"allIsNull",name:"All Nulls",description:"All values are null",emptyInputResult:!0,standard:!0},{id:"changeCount",name:"Change Count",description:"Number of times the value changes",standard:!1,reduce:v},{id:"distinctCount",name:"Distinct Count",description:"Number of distinct values",standard:!1,reduce:E},{id:"diffperc",name:"Difference percent",description:"Percentage difference between first and last values",standard:!0},{id:"allValues",name:"All values",description:"Returns an array with all values",standard:!1,reduce:D=>({allValues:[...D.values]})},{id:"uniqueValues",name:"All unique values",description:"Returns an array with all unique values",standard:!1,reduce:D=>({uniqueValues:[...new Set(D.values)]})}]),l={sum:0,max:-Number.MAX_VALUE,min:Number.MAX_VALUE,logmin:Number.MAX_VALUE,mean:null,last:null,first:null,lastNotNull:null,firstNotNull:null,count:0,nonNullCount:0,allIsNull:!0,allIsZero:!0,range:null,diff:null,delta:0,step:Number.MAX_VALUE,diffperc:0,previousDeltaUp:!0};function f(D,b,P){const y={...l},T=D.values;if(!T)return y;const M=D.type===s.PU.number||D.type===s.PU.time;for(let I=0;I<T.length;I++){let x=T[I];if(I===0&&(y.first=x),y.last=x,x==null){if(b)continue;P&&(x=0)}if(y.count++,x!=null&&!Number.isNaN(x)){const S=y.firstNotNull===null;if(S&&(y.firstNotNull=x),M){if(y.sum+=x,y.allIsNull=!1,y.nonNullCount++,!S){const O=x-y.lastNotNull;y.step>O&&(y.step=O),y.lastNotNull>x?(y.previousDeltaUp=!1,I===T.length-1&&(y.delta+=x)):(y.previousDeltaUp?y.delta+=O:y.delta+=x,y.previousDeltaUp=!0)}x>y.max&&(y.max=x),x<y.min&&(y.min=x),x<y.logmin&&x>0&&(y.logmin=x)}x!==0&&(y.allIsZero=!1),y.lastNotNull=x}}return y.max===-Number.MAX_VALUE&&(y.max=null),y.min===Number.MAX_VALUE&&(y.min=null),y.step===Number.MAX_VALUE&&(y.step=null),y.nonNullCount>0&&(y.mean=y.sum/y.nonNullCount),y.allIsNull&&(y.allIsZero=!1),y.max!==null&&y.min!==null&&(y.range=y.max-y.min),(0,t.isNumber)(y.firstNotNull)&&(0,t.isNumber)(y.lastNotNull)&&(y.diff=y.lastNotNull-y.firstNotNull),(0,t.isNumber)(y.firstNotNull)&&(0,t.isNumber)(y.diff)&&(y.diffperc=y.diff/y.firstNotNull),y}function c(D,b,P){return{first:D.values[0]}}function h(D,b,P){const y=D.values;for(let T=0;T<y.length;T++){const M=y[T];if(M!=null&&!Number.isNaN(M))return{firstNotNull:M}}return{firstNotNull:null}}function p(D,b,P){const y=D.values;return{last:y[y.length-1]}}function m(D,b,P){const y=D.values;let T=y.length-1;for(;T>=0;){const M=y[T--];if(M!=null&&!Number.isNaN(M))return{lastNotNull:M}}return{lastNotNull:null}}function a(D,b,P){if(!(D.type===s.PU.number||D.type===s.PU.time))return{variance:0,stdDev:0};let y=0,T=0,M=0;const I=D.values;for(let x=0;x<I.length;x++){const S=I[x];if(S!=null){M++;let O=T;T+=(S-O)/M,y+=(S-O)*(S-T)}}if(M>0){const x=y/M;return{variance:x,stdDev:Math.sqrt(x)}}return{variance:0,stdDev:0}}function v(D,b,P){const y=D.values;let T=0,M=!0,I=null;for(let x=0;x<y.length;x++){let S=y[x];if(S===null){if(b)continue;P&&(S=0)}!M&&I!==S&&T++,M=!1,I=S}return{changeCount:T}}function E(D,b,P){const y=D.values,T=new Set;for(let M=0;M<y.length;M++){let I=y[M];if(I===null){if(b)continue;P&&(I=0)}T.add(I)}return{distinctCount:T.size}}},34687:(Y,A,e)=>{"use strict";e.d(A,{AS:()=>r.AS,C6:()=>r.C6,CF:()=>h.C,Ct:()=>t.Ct,Dq:()=>o.Dq,Em:()=>r.Em,Fy:()=>n.F,H1:()=>l.H1,H3:()=>r.H3,Js:()=>t.Js,KP:()=>i.Fd,MS:()=>c.M,NS:()=>o.NS,NX:()=>l.NX,Nw:()=>r.Nw,OA:()=>l.OA,PP:()=>d.PP,RE:()=>o.RE,Rt:()=>l.Rt,Uh:()=>l.Uh,ZU:()=>l.ZU,c9:()=>s.c,cV:()=>t.cV,cg:()=>l.cg,d$:()=>l.d$,dA:()=>l.dA,g2:()=>i.g2,gy:()=>r.gy,h9:()=>u.h,hI:()=>o.hI,ix:()=>l.ix,jR:()=>t.jR,kK:()=>o.kK,ks:()=>f.ks,m6:()=>g.m,m_:()=>u.m,p3:()=>l.p3,rW:()=>l.rW,rs:()=>l.rs,sJ:()=>o.sJ});var t=e(1173),n=e(18282),o=e(85200),s=e(57934),r=e(75059),g=e(2514),u=e(97497),d=e(58972),i=e(73060),l=e(77678),f=e(50311),c=e(46294),h=e(39624)},85200:(Y,A,e)=>{"use strict";e.d(A,{Dq:()=>v,NS:()=>a,RE:()=>p,hI:()=>m,kK:()=>E,sJ:()=>h});var t=e(83077),n=e(7029),o=e(24814),s=e(58972),r=e(72693),g=e(8549),u=e(83855),d=e(60005),i=e(21262),l=e(70218),f=e(55008),c=e(16378);const h=new t.O(()=>[...(0,r.nz)(),...(0,n._)(),...(0,s.P7)(),...(0,u.W)(),o.u]),p=new t.O(()=>[...(0,r.UM)(),...(0,s.Y7)(),...(0,g.i)()]),m=new t.O(()=>[...(0,i._)(),...(0,l.E)(),...(0,d.d)(),...(0,f.G)(),...(0,c.z)()]);function a(D){const b=h.get(D.id);if(!b)throw new Error("Unknown field matcher: "+D.id);return b.get(D.options)}function v(D){const b=p.get(D.id);if(!b)throw new Error("Unknown frame matcher: "+D.id);return b.get(D.options)}function E(D){const b=m.get(D.id);if(!b)throw new Error("Unknown value matcher: "+D.id);return b.get(D.options)}},58972:(Y,A,e)=>{"use strict";e.d(A,{P7:()=>p,PP:()=>r,Y7:()=>m});var t=e(28240),n=e(54479),o=e(11261),s=e(1173),r=(a=>(a.exclude="exclude",a.include="include",a))(r||{});const g={id:s.Ct.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:a=>{const E=d(new Set([a]));return(D,b,P)=>a===D.name||a===(0,t.Ct)(D,b,P)||!!(E&&E(D,b,P))},getOptionsDisplayText:a=>`Field name: ${a}`},u={id:s.Ct.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:"include",names:[]},get:a=>{const{names:v,mode:E="include"}=a,D=new Set(v??[]),b=d(D),P=(y,T,M)=>D.has(y.name)||D.has((0,t.Ct)(y,T,M))||!!(b&&b(y,T,M));return E==="exclude"?(y,T,M)=>!P(y,T,M):P},getOptionsDisplayText:a=>{const{names:v,mode:E}=a,D=(v??[]).join(", ");return E==="exclude"?`All except: ${D}`:`All of: ${D}`}};function d(a){let v;return window?.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback&&(a.has(o.Bc)?v=(D,b)=>!!D.labels&&D.labels?.__name__===D.name:(a.has("Time")||a.has("time"))&&(v=(D,b)=>b.meta?.typeVersion==null&&D.type===o.PU.time)),v}const i={id:s.Ct.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:a=>{const v=c(a);return(E,D,b)=>{const P=(0,t.Ct)(E,D,b);return!!v&&v.test(P)}},getOptionsDisplayText:a=>`Field name by pattern: ${a}`},l={id:s.Ct.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:a=>(v,E,D)=>E.refId===a,getOptionsDisplayText:a=>`Math all fields returned by query with reference ID: ${a}`},f={id:s.Ct.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:a=>{const v=i.get(a?.pattern||""),E=u.get({mode:"include",names:a?.names??[]});return(D,b,P)=>E(D,b,P)||v(D,b,P)},getOptionsDisplayText:a=>{const v=a?.pattern??"",E=a?.names?.join(",")??"";return`Field name by pattern: ${v} or names: ${E}`}},c=a=>{if(a)try{return(0,n.dO)(a)}catch(v){console.error(v);return}},h={id:s.jR.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:a=>{const v=(0,n.dO)(a);return E=>v.test(E.name||"")},getOptionsDisplayText:a=>`Frame name: ${a}`};function p(){return[g,i,u,f,l]}function m(){return[h]}},72693:(Y,A,e)=>{"use strict";e.d(A,{UM:()=>b,Yg:()=>l,nz:()=>D,zx:()=>h});var t=e(11261),n=e(85200),o=e(1173);const s={id:o.cV.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:P=>{const y=P.map(T=>(0,n.NS)(T));return(T,M,I)=>{for(const x of y)if(x(T,M,I))return!0;return!1}},getOptionsDisplayText:P=>{let y="";for(const T of P){y.length>0&&(y+=" OR ");const M=n.sJ.get(T.id);y+=M.getOptionsDisplayText?M.getOptionsDisplayText(T):M.name}return y}},r={id:o.cV.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:P=>{const y=P.map(T=>(0,n.Dq)(T));return T=>{for(const M of y)if(M(T))return!0;return!1}},getOptionsDisplayText:P=>{let y="";for(const T of P){y.length>0&&(y+=" OR ");const M=n.RE.get(T.id);y+=M.getOptionsDisplayText?M.getOptionsDisplayText(T):M.name}return y}},g={id:o.cV.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:P=>{const y=P.map(T=>(0,n.NS)(T));return(T,M,I)=>{for(const x of y)if(!x(T,M,I))return!1;return!0}},getOptionsDisplayText:P=>{let y="";for(const T of P){y.length>0&&(y+=" AND ");const M=n.sJ.get(T.id);y+=M.getOptionsDisplayText?M.getOptionsDisplayText(T):M.name}return y}},u={id:o.cV.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:P=>{const y=P.map(T=>(0,n.Dq)(T));return T=>{for(const M of y)if(!M(T))return!1;return!0}},getOptionsDisplayText:P=>{let y="";for(const T of P){y.length>0&&(y+=" AND ");const M=n.RE.get(T.id);y+=M.getOptionsDisplayText?M.getOptionsDisplayText(T):M.name}return y}},d={id:o.cV.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:P=>{const y=(0,n.NS)(P);return(T,M,I)=>!y(T,M,I)},getOptionsDisplayText:P=>{const y=n.sJ.get(P.id);return"NOT "+(y.getOptionsDisplayText?y.getOptionsDisplayText(P.options):y.name)}},i={id:o.cV.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:P=>{const y=(0,n.Dq)(P);return T=>!y(T)},getOptionsDisplayText:P=>{const y=n.RE.get(P.id);return"NOT "+(y.getOptionsDisplayText?y.getOptionsDisplayText(P.options):y.name)}},l=P=>!0,f=P=>!0,c=P=>!1,h=P=>P.type!==t.PU.time,p=P=>!1,m={id:o.cV.alwaysMatch,name:"All Fields",description:"Always Match",get:P=>l,getOptionsDisplayText:P=>"Always"},a={id:o.cV.alwaysMatch,name:"All Frames",description:"Always Match",get:P=>f,getOptionsDisplayText:P=>"Always"},v={id:o.cV.neverMatch,name:"No Fields",description:"Never Match",excludeFromPicker:!0,get:P=>c,getOptionsDisplayText:P=>"Never"},E={id:o.cV.neverMatch,name:"No Frames",description:"Never Match",get:P=>p,getOptionsDisplayText:P=>"Never"};function D(){return[s,g,d,m,v]}function b(){return[r,u,i,a,E]}},97497:(Y,A,e)=>{"use strict";e.d(A,{h:()=>o,m:()=>n});var t=e(83077),n=(s=>(s.Combine="combine",s.CalculateNewFields="calculateNewFields",s.CreateNewVisualization="createNewVisualization",s.Filter="filter",s.PerformSpatialOperations="performSpatialOperations",s.Reformat="reformat",s.ReorderAndRename="reorderAndRename",s))(n||{});const o=new t.O},2514:(Y,A,e)=>{"use strict";e.d(A,{m:()=>i});var t=e(62467),n=e(69862),o=e(81160),s=e(85200),r=e(97497);const g=(f,c)=>h=>{const p=r.h.get(f.id);if(!p)return h;const a={...p.transformation.defaultOptions??{},...f.options},v=f.filter?.options?(0,s.Dq)(f.filter):void 0;return h.pipe((0,n.Z)(E=>(0,t.of)(u(E,v)).pipe(p.transformation.operator(a,c),d(E,p,v))))};function u(f,c){return c?f.filter(h=>c(h)):f}const d=(f,c,h)=>p=>p.pipe((0,o.T)(m=>{if(m===f)return m;if(h){let a=0;const v=f.filter((E,D)=>{const b=!h(E);return b&&!a&&(a=D),b});v.length&&m.splice(a,0,...v)}return m}));function i(f,c,h){const p=(0,t.of)(c);if(!f.length)return p;const m=[],a=h??{interpolate:v=>v};for(let v=0;v<f.length;v++){const E=f[v];if(l(E))m.push(E(a));else{if(E.disabled)continue;m.push(g(E,a))}}return p.pipe.apply(p,m)}function l(f){return typeof f=="function"}},57934:(Y,A,e)=>{"use strict";e.d(A,{c:()=>pe});var t=e(66350),n=e(82150),o=e(50311),s=e(34125),r=e(64224),g=e(35602),u=e(1173),d=e(18282);const i={id:d.F.filterByRefId,name:"Filter data by query refId",description:"select a subset of results",defaultOptions:{},operator:(le,Me)=>De=>{const Re={};return le.include&&(Re.include={id:u.jR.byRefId,options:le.include}),le.exclude&&(Re.exclude={id:u.jR.byRefId,options:le.exclude}),De.pipe(r.I.operator(Re,Me))}};var l=e(73376),f=e(15400),c=e(81160),h=e(81010);const p={id:d.F.formatTime,name:"Format time",description:"Set the output format of a time field",defaultOptions:{timeField:"",outputFormat:"",useTimezone:!0},isApplicable:le=>{for(const Me of le)for(const De of Me.fields)if(De.type==="time")return h.M.Applicable;return h.M.NotApplicable},isApplicableDescription:"The Format time transformation requires a time field to work. No time field could be found.",operator:le=>Me=>Me.pipe((0,c.T)(De=>{const Re=m(le.timeField,le.outputFormat,le.timezone);return!Array.isArray(De)||De.length===0?De:De.map(me=>({...me,fields:Re(me.fields)}))}))},m=(le,Me,De)=>Re=>Re.map(me=>{if(me.name===le){let he=null;return De?he=(0,o.Xv)(me,Me,{timeZone:De}):he=(0,o.Xv)(me,Me),he}return me});var a=e(25094),v=e(68133),E=e(28240),D=e(11261),b=e(85200);const P="Time",y="Time",T="Value",M=h.N.Empty,I=window?.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback,x={id:d.F.groupingToMatrix,name:"Grouping to Matrix",description:"Groups series by field and return a matrix visualisation",defaultOptions:{columnField:P,rowField:y,valueField:T},isApplicable:le=>{let Me=0;for(const De of le)Me+=De.fields.length;return Me>=3?h.M.Applicable:h.M.NotApplicable},isApplicableDescription:le=>{let Me=0;for(const De of le)Me+=De.fields.length;return`Grouping to matrix requiers at least 3 fields to work. Currently there are ${Me} fields.`},operator:le=>Me=>Me.pipe((0,c.T)(De=>{const Re=le.columnField||P,me=le.rowField||y,he=le.valueField||T,Te=le.emptyValue||M;if(De.length!==1)return De;const Be=De[0],we=O(Be,Re),Ne=O(Be,me),Ze=O(Be,he),st=`${me}\\${Re}`;if(!we||!Ne||!Ze)return De;const Qe=S(we.values),ke=S(Ne.values),je={};for(let Ge=0;Ge<Ze.values.length;Ge++){const Oe=we.values[Ge],Ke=Ne.values[Ge],Ee=Ze.values[Ge];je[Oe]||(je[Oe]={}),je[Oe][Ke]=Ee}const He=[{name:st,values:ke,type:D.PU.string,config:{}}];for(const Ge of Qe){let Oe=[];for(const Ke of ke){const Ee=je[Ge][Ke]??C(Te);Oe.push(Ee)}I&&typeof Ge=="number"&&(Ze.config={...Ze.config,displayNameFromDS:void 0}),He.push({name:Ge.toString(),values:Oe,config:Ze.config,type:Ze.type})}return[{fields:He,length:ke.length}]}))};function S(le){const Me=new Set;for(let De=0;De<le.length;De++)Me.add(le[De]);return Array.from(Me)}function O(le,Me){for(let De=0;De<le.fields.length;De++){const Re=le.fields[De];let me;if(I?me=b.sJ.get(u.Ct.byName).get(Me)(Re,le,[le]):me=Me===(0,E.Ct)(Re),me)return Re}return null}function C(le){switch(le){case h.N.False:return!1;case h.N.True:return!0;case h.N.Null:return null;case h.N.Empty:default:return""}}var L=e(77678),U=e(41511),R=e(6829),B=e(67641);const H=10,W={id:d.F.limit,name:"Limit",description:"Limit the number of items to the top N",defaultOptions:{limitField:H},operator:(le,Me)=>De=>De.pipe((0,c.T)(Re=>{let me=H;return le.limitField!==void 0&&(typeof le.limitField=="string"?(0,B.w)()?me=parseInt(Me.interpolate(le.limitField),10):me=parseInt(le.limitField,10):me=le.limitField),Re.map(he=>he.length>me?{...he,fields:he.fields.map(Te=>({...Te,values:Te.values.slice(0,me)})),length:me}:he)}))};var N=e(58140),V=e(64586),G=e(82280);const _={id:d.F.rename,name:"Rename fields by name",description:"Rename fields based on configuration given by user",defaultOptions:{renameByName:{}},operator:le=>Me=>Me.pipe((0,c.T)(De=>{const Re=K(le.renameByName);return!Array.isArray(De)||De.length===0?De:De.map(me=>({...me,fields:Re(me)}))}))},K=le=>Me=>!le||Object.keys(le).length===0?Me.fields:Me.fields.map(De=>{const Re=(0,E.Ct)(De,Me),me=le[Re];return typeof me!="string"||me.length===0?De:{...De,config:{...De.config,displayName:me},state:{...De.state,displayName:me}}}),j={id:d.F.organize,name:"Organize fields by name",description:"Order, filter and rename fields based on configuration given by user",defaultOptions:{excludeByName:{},indexByName:{},renameByName:{},includeByName:{}},isApplicable:le=>le.length>1?h.M.NotPossible:h.M.Applicable,operator:(le,Me)=>De=>De.pipe(g.D.operator({include:le.includeByName?{names:k(le.includeByName)}:void 0,exclude:{names:k(le.excludeByName)}},Me),G.x.operator(le,Me),_.operator(le,Me))},k=le=>le?Object.keys(le).filter(Me=>le[Me]):[];var Q=e(21128),ee=e(54479);const ae={id:d.F.renameByRegex,name:"Rename fields by regex",description:"Rename fields based on regular expression by users.",defaultOptions:{regex:"(.*)",renamePattern:"$1"},operator:le=>Me=>Me.pipe((0,c.T)(De=>!Array.isArray(De)||De.length===0?De:De.map(Z(le))))},Z=le=>Me=>{const De=(0,ee.dO)(le.regex),Re=Me.fields.map(me=>{const he=(0,E.Ct)(me,Me);if(!De.test(he))return me;const Te=he.replace(De,le.renamePattern);return{...me,config:{...me.config,displayName:Te},state:{...me.state,displayName:Te}}});return{...Me,fields:Re}};var ne=e(2543),q=e(37471),te=e(14236),re=e(19845);const de={id:d.F.seriesToRows,name:"Series to rows",description:"Combines multiple series into a single serie and appends a column with metric name per value.",defaultOptions:{},operator:le=>Me=>Me.pipe((0,c.T)(De=>{if(!Array.isArray(De)||De.length<=1||(De=De.filter(Be=>Be.length>0),!(0,re.jq)(De)))return De;const Re={},me=new Set,he=new q.k,Te={name:D.aI,values:[],config:{},type:D.PU.string};for(let Be=0;Be<De.length;Be++){const we=De[Be];for(let Ne=0;Ne<we.fields.length;Ne++){const Ze=we.fields[Ne];if(Ze.type===D.PU.time){Re[Be]=Ne,me.has(D.LE)||(he.addField(ie(Ze,D.LE)),he.addField(Te),me.add(D.LE));continue}me.has(D.Bc)||(he.addField(ie(Ze,D.Bc)),me.add(D.Bc))}}for(let Be=0;Be<De.length;Be++){const we=De[Be];for(let Ne=0;Ne<we.length;Ne++){const Ze=Re[Be],st=Ze===0?1:0;he.add({[D.LE]:we.fields[Ze].values[Ne],[D.aI]:(0,E.Ri)(we),[D.Bc]:we.fields[st].values[Ne]})}}return[(0,te.ES)(he,0,!0)]}))},ie=(le,Me)=>({...(0,ne.omit)(le,["values","state","labels","config","name"]),name:Me,values:[],config:{...(0,ne.omit)(le.config,["displayName","displayNameFromDS"])}}),ge={id:d.F.sortBy,name:"Sort by",description:"Sort fields in a frame.",defaultOptions:{fields:{}},operator:(le,Me)=>De=>De.pipe((0,c.T)(Re=>!Array.isArray(Re)||Re.length===0||!le?.sort?.length?Re:ve(Re,le.sort,Me)))};function ve(le,Me,De){return le.map(Re=>{const me=ye(Re,Me,De);return me.length&&me[0].index!=null?(0,te.ES)(Re,me[0].index,me[0].desc):Re})}function ye(le,Me,De){return Me.map(Re=>Re.index!=null?Re:(0,B.w)()?{...Re,index:le.fields.findIndex(me=>De.interpolate(Re.field)===(0,E.Ct)(me,le))}:{...Re,index:le.fields.findIndex(me=>Re.field===(0,E.Ct)(me,le))})}const pe={noopTransformer:V.W,filterFieldsTransformer:r.z,filterFieldsByNameTransformer:g.D,filterFramesTransformer:r.I,filterFramesByRefIdTransformer:i,filterByValueTransformer:l.Sv,formatStringTransformer:f.yt,formatTimeTransformer:p,orderFieldsTransformer:G.x,organizeFieldsTransformer:j,reduceTransformer:Q.Wj,concatenateTransformer:n.vz,calculateFieldTransformer:t.SC,joinByFieldTransformer:U.L,seriesToColumnsTransformer:U.L,seriesToRowsTransformer:de,renameFieldsTransformer:_,labelsToFieldsTransformer:R.V,ensureColumnsTransformer:s.b,groupByTransformer:a.of,sortByTransformer:ge,mergeTransformer:N.o,renameByRegexTransformer:ae,histogramTransformer:L.OA,convertFieldTypeTransformer:o.zM,groupingToMatrixTransformer:x,limitTransformer:W,groupToNestedTable:v._X}},66350:(Y,A,e)=>{"use strict";e.d(A,{Bp:()=>v,SC:()=>T,UY:()=>a,Uj:()=>b,ip:()=>E,sw:()=>H});var t=e(2543),n=e.n(t),o=e(81160),s=e(14236),r=e(28240),g=e(11261),u=e(39070),d=e(11710),i=e(27618),l=e(75059),f=e(85200),c=e(1173),h=e(34125),p=e(18282),m=e(64586),a=(W=>(W.ReduceRow="reduceRow",W.CumulativeFunctions="cumulativeFunctions",W.WindowFunctions="windowFunctions",W.BinaryOperation="binary",W.UnaryOperation="unary",W.Index="index",W))(a||{}),v=(W=>(W.Percentage="percentage",W.Fixed="fixed",W))(v||{}),E=(W=>(W.Trailing="trailing",W.Centered="centered",W))(E||{});const D={reducer:l.gy.sum},b={reducer:l.gy.mean,windowAlignment:"trailing",windowSizeMode:"percentage",windowSize:.1},P={left:"",operator:d.k.Add,right:""},y={operator:i._.Abs,fieldName:""},T={id:p.F.calculateField,name:"Add field from calculation",description:"Use the row values to calculate a new field",defaultOptions:{mode:"reduceRow",reduce:{reducer:l.gy.sum}},operator:(W,N)=>V=>{const G=W&&W.timeSeries!==!1?h.b.operator(null,N):m.W.operator({},N);return W.alias!=null&&(W.alias=N.interpolate(W.alias)),V.pipe(G,(0,o.T)(_=>{const K=W.mode??"reduceRow";let j;switch(K){case"reduceRow":j=L((0,t.defaults)(W.reduce,D),_);break;case"cumulativeFunctions":j=C((0,t.defaults)(W.cumulative,D),_);break;case"windowFunctions":j=M((0,t.defaults)(W.window,b),_);break;case"unary":j=B((0,t.defaults)(W.unary,y),_);break;case"binary":const k={...W.binary,left:N.interpolate(W.binary?.left),right:N.interpolate(W.binary?.right)};j=R((0,t.defaults)(k,P),_);break;case"index":return _.map(Q=>{const ee=[...Array(Q.length).keys()];if(W.index?.asPercentile)for(let Z=0;Z<ee.length;Z++)ee[Z]=ee[Z]/ee.length;const ae={name:W.alias??"Row",type:g.PU.number,values:ee,config:W.index?.asPercentile?{unit:"percentunit"}:{}};return{...Q,fields:W.replaceFields?[ae]:[...Q.fields,ae]}})}return j?_.map(k=>{const Q=j(k);if(!Q)return k;const ee={name:H(W),type:g.PU.number,config:{},values:Q};let ae=[];if(W.replaceFields){const{timeField:Z}=(0,s.KR)(k);Z&&W.timeSeries!==!1?ae=[Z,ee]:ae=[ee]}else ae=[...k.fields,ee];return{...k,fields:ae}}):_}))}};function M(W,N){if(W.windowSize<=0)throw new Error("Add field from calculation transformation - Window size must be larger than 0");let V=(0,f.NS)({id:c.Ct.numeric});return W.field&&(V=(0,f.NS)({id:c.Ct.byNames,options:{names:[W.field]}})),G=>{const _=Math.ceil(W.windowSize*(W.windowSizeMode==="percentage"?G.length:1));let K=null;for(const j of G.fields)if(V(j,G,N)){K=j;break}if(K){if(![l.gy.mean,l.gy.stdDev,l.gy.variance].includes(W.reducer))throw new Error(`Add field from calculation transformation - Unsupported reducer: ${W.reducer}`);return W.windowAlignment==="centered"?x(G,W.reducer,K,_):I(G,W.reducer,K,_)}}}function I(W,N,V,G){const _=[];let K=0,j=0;for(let k=0;k<W.length;k++)if(N===l.gy.mean){const Q=V.values[k];Q!=null&&(j++,K+=Q,k>G-1&&(K-=V.values[k-G],j--)),_.push(j===0?0:K/j)}else if(N===l.gy.variance){const Q=Math.max(0,k-G+1),ee=k+1;_.push(S(V.values.slice(Q,ee)))}else if(N===l.gy.stdDev){const Q=Math.max(0,k-G+1),ee=k+1;_.push(O(V.values.slice(Q,ee)))}return _}function x(W,N,V,G){const _=[];let K=0,j=0;const k=Math.ceil(G/2)-1,Q=Math.floor(G/2);for(let ee=0;ee<W.length;ee++){const ae=ee-Q,Z=ee+k;if(N===l.gy.mean){if(ee===0)for(let ne=0;ne<k+1&&ne<V.values.length;ne++)V.values[ne]!=null&&(K+=V.values[ne],j++);else Z<V.values.length&&V.values[Z]!=null&&(K+=V.values[Z],j++),ae>0&&V.values[ae-1]!=null&&(K-=V.values[ae-1],j--);_.push(j===0?0:K/j)}else if(N===l.gy.variance){const ne=V.values.slice(Math.max(0,ae),Math.min(Z+1,V.values.length));_.push(S(ne))}else if(N===l.gy.stdDev){const ne=V.values.slice(Math.max(0,ae),Math.min(Z+1,V.values.length));_.push(O(ne))}}return _}function S(W){if(W.length<1)return 0;let N=0,V=0,G=0;for(let K=0;K<W.length;K++){const j=W[K];if(j!=null){G++;let k=V;V+=(j-k)/G,N+=(j-k)*(j-V)}}return G===0?0:N/G}function O(W){return Math.sqrt(S(W))}function C(W,N){let V=(0,f.NS)({id:c.Ct.numeric});if(W.field&&(V=(0,f.NS)({id:c.Ct.byNames,options:{names:[W.field]}})),![l.gy.mean,l.gy.sum].includes(W.reducer))throw new Error(`Add field from calculation transformation - Unsupported reducer: ${W.reducer}`);return G=>{let _=null;for(const k of G.fields)if(V(k,G,N)){_=k;break}if(!_)return;const K=[];let j=0;for(let k=0;k<G.length;k++)j+=_.values[k]??0,W.reducer===l.gy.sum?K.push(j):W.reducer===l.gy.mean&&K.push(j/(k+1));return K}}function L(W,N){let V=(0,f.NS)({id:c.Ct.numeric});W.include&&W.include.length&&(V=(0,f.NS)({id:c.Ct.byNames,options:{names:W.include}}));const G=l.AS.get(W.reducer);if(!G)throw new Error(`Unknown reducer: ${W.reducer}`);const _=G.reduce??l.H3,K=W.nullValueMode===u.UW.Ignore,j=W.nullValueMode===u.UW.AsZero;return k=>{const Q=[];for(const ne of k.fields)V(ne,k,N)&&Q.push(ne.values);const ee=Q.length,ae={name:"temp",values:new Array(ee),type:g.PU.number,config:{}},Z=[];for(let ne=0;ne<k.length;ne++){for(let q=0;q<ee;q++)ae.values[q]=Q[q][ne];Z.push(_(ae,K,j)[W.reducer])}return Z}}function U(W,N,V){if(!N)return;for(const _ of W.fields)if(N===(0,r.Ct)(_,W,V))return _.type===g.PU.boolean?_.values.map(K=>K?1:0):_.values;const G=parseFloat(N);if(!isNaN(G))return new Array(W.length).fill(G)}function R(W,N){const V=d.b.getIfExists(W.operator);return G=>{const _=U(G,W.left,N),K=U(G,W.right,N);if(!_||!K||!V)return;const j=new Array(_.length);for(let k=0;k<j.length;k++)j[k]=V.operation(_[k],K[k]);return j}}function B(W,N){const V=i.j.getIfExists(W.operator);return G=>{let _=[];for(const j of G.fields)W.fieldName===(0,r.Ct)(j,G,N)&&j.type===g.PU.number&&(_=j.values);if(!_.length||!V)return;const K=new Array(_.length);for(let j=0;j<K.length;j++)K[j]=V.operation(_[j]);return K}}function H(W){if(W.alias?.length)return W.alias;switch(W.mode){case"cumulativeFunctions":{const{cumulative:N}=W;return`cumulative ${N?.reducer??""}${N?.field?`(${N.field})`:""}`}case"windowFunctions":{const{window:N}=W;return`${N?.windowAlignment??""} moving ${N?.reducer??""}${N?.field?`(${N.field})`:""}`}case"unary":{const{unary:N}=W;return`${N?.operator??""}${N?.fieldName?`(${N.fieldName})`:""}`}case"binary":{const{binary:N}=W;return`${N?.left??""} ${N?.operator??""} ${N?.right??""}`.replace(/\$/g,"")}case"reduceRow":{const N=l.AS.getIfExists(W.reduce?.reducer);if(N)return N.name}break;case"index":return"Row"}return"math"}},82150:(Y,A,e)=>{"use strict";e.d(A,{vz:()=>r,x1:()=>s});var t=e(81160),n=e(11261),o=e(18282),s=(u=>(u.Drop="drop",u.FieldName="field",u.Label="label",u))(s||{});const r={id:o.F.concatenate,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",defaultOptions:{frameNameMode:"field",frameNameLabel:"frame"},operator:u=>d=>d.pipe((0,t.T)(i=>!Array.isArray(i)||i.length<2?i:[g(i,u)]))};function g(u,d){let i=!0,l=u[0].length;const f=d.frameNameLabel??"frame";let c=[];for(const h of u){l!==h.length&&(i=!1,l=Math.max(l,h.length));for(const p of h.fields){const m={...p};m.state=void 0,h.name&&(d.frameNameMode==="drop"||(d.frameNameMode==="label"?(m.labels={...p.labels},m.labels[f]=h.name):!m.name||m.name===n.Bc?m.name=h.name:m.name=`${h.name} \xB7 ${p.name}`)),c.push(m)}}return i||(c=c.map(h=>{if(h.values.length===l)return h;const p=h.values.slice();return p.length=l,{...h,values:p}})),{fields:c,length:l}}},50311:(Y,A,e)=>{"use strict";e.d(A,{Xv:()=>p,ks:()=>a,s7:()=>i,zM:()=>u});var t=e(81160),n=e(53531),o=e(11261),s=e(85200),r=e(1173),g=e(18282);const u={id:g.F.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type.",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0,timezone:void 0}]},operator:(E,D)=>b=>b.pipe((0,t.T)(P=>u.transformer(E,D)(P))),transformer:E=>D=>!Array.isArray(D)||D.length===0?D:d(E,D)??[]};function d(E,D){if(!E.conversions.length)return D;const b=D.map(P=>({...P}));for(const P of E.conversions){if(!P.targetField)continue;const y=s.sJ.get(r.Ct.byName).get(P.targetField);for(const T of b)T.fields=T.fields.map(M=>y(M,T,b)?i(M,P):M)}return b}function i(E,D){switch(D.destinationType){case o.PU.time:return a(E,D.dateFormat);case o.PU.number:return c(E);case o.PU.string:return p(E,D.dateFormat,{timeZone:D.timezone},D.joinWith);case o.PU.boolean:return h(E);case o.PU.enum:return v(E,D.enumConfig);case o.PU.other:return m(E);default:return E}}const l=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3,})?(?:Z|[-+]\d{2}:?\d{2})$/;function f(E,D){let b=D?{format:D}:void 0;const P=E.values.slice();let y=P.find(M=>M!=null),T=typeof y=="string"&&l.test(y);for(let M=0;M<P.length;M++)if(P[M]){let I=T?Date.parse(P[M]):(0,n.b)(P[M],b).valueOf();P[M]=Number.isFinite(I)?I:null}else P[M]=null;return{...E,type:o.PU.time,values:P}}function c(E){const D=E.values.slice(),b=D.some(P=>typeof P=="string");for(let P=0;P<D.length;P++){let y=D[P];b&&y!=null&&typeof y=="string"&&(y=y.replace(/,/g,""));const T=+y;D[P]=Number.isFinite(T)?T:null}return{...E,type:o.PU.number,values:D}}function h(E){const D=E.values.slice();for(let b=0;b<D.length;b++)D[b]=!!D[b];return{...E,type:o.PU.boolean,values:D}}function p(E,D,b,P){let y=E.values;switch(E.type){case o.PU.time:y=y.map(T=>(0,n.b)(T,b).format(D));break;case o.PU.other:y=y.map(T=>P?.length&&Array.isArray(T)?T.join(P):JSON.stringify(T));break;default:y=y.map(T=>`${T}`)}return{...E,type:o.PU.string,values:y}}function m(E){const D=E.values.slice();for(let b=0;b<D.length;b++)try{D[b]=JSON.parse(D[b])}catch{D[b]=null}return{...E,type:o.PU.other,values:D}}function a(E,D){const b=typeof E.values[0]=="number";return E.type===o.PU.time&&b?E:b?{...E,type:o.PU.time}:f(E,D)}function v(E,D){const b={...D},P=E.values.slice(),y=new Map;if(b.text&&b.text.length>0)for(let T=0;T<b.text.length;T++)y.set(b.text[T],T);else return E;for(let T=0;T<P.length;T++){const M=P[T];P[T]=y.get(M)}return{...E,config:{...E.config,type:{enum:b}},type:o.PU.enum,values:P}}},34125:(Y,A,e)=>{"use strict";e.d(A,{b:()=>r});var t=e(81160),n=e(14236),o=e(18282),s=e(41511);const r={id:o.F.ensureColumns,name:"Ensure Columns Transformer",description:"Will check if current data frames is series or columns. If in series it will convert to columns.",operator:(u,d)=>i=>i.pipe((0,t.T)(l=>r.transformer(u,d)(l))),transformer:(u,d)=>i=>{const l=g(i);return i.length>1&&l?s.L.transformer({byField:l},d)(i):i}};function g(u){let d;for(const i of u){const{timeField:l}=(0,n.KR)(i);if(!l)return;if(!d)d=l.name;else if(d!==l.name)return}return d}},64224:(Y,A,e)=>{"use strict";e.d(A,{I:()=>g,z:()=>r});var t=e(81160),n=e(85200),o=e(18282),s=e(64586);const r={id:o.F.filterFields,name:"Filter Fields",description:"select a subset of fields",defaultOptions:{},operator:(u,d)=>i=>!u.include&&!u.exclude?i.pipe(s.W.operator({},d)):(typeof u.include?.options=="string"?u.include.options=d.interpolate(u.include?.options):typeof u.include?.options?.pattern=="string"&&(u.include.options.pattern=d.interpolate(u.include?.options.pattern)),typeof u.exclude?.options=="string"?u.exclude.options=d.interpolate(u.exclude?.options):typeof u.exclude?.options?.pattern=="string"&&(u.exclude.options.pattern=d.interpolate(u.exclude?.options.pattern)),i.pipe((0,t.T)(l=>{const f=u.include?(0,n.NS)(u.include):null,c=u.exclude?(0,n.NS)(u.exclude):null,h=[];for(const p of l){const m=[];for(let v=0;v<p.fields.length;v++){const E=p.fields[v];if(c){if(c(E,p,l))continue;f||m.push(E)}f&&f(E,p,l)&&m.push(E)}if(!m.length)continue;const a={...p,fields:m};h.push(a)}return h})))},g={id:o.F.filterFrames,name:"Filter Frames",description:"select a subset of frames",defaultOptions:{},operator:(u,d)=>i=>!u.include&&!u.exclude?i.pipe(s.W.operator({},d)):i.pipe((0,t.T)(l=>{const f=u.include?(0,n.Dq)(u.include):null,c=u.exclude?(0,n.Dq)(u.exclude):null,h=[];for(const p of l){if(c){if(c(p))continue;f||h.push(p)}f&&f(p)&&h.push(p)}return h}))}},35602:(Y,A,e)=>{"use strict";e.d(A,{D:()=>s,R:()=>r});var t=e(1173),n=e(64224),o=e(18282);const s={id:o.F.filterFieldsByName,name:"Filter fields by name",description:"select a subset of fields",defaultOptions:{},operator:(g,u)=>d=>d.pipe(n.z.operator({include:r(u,g.include,g.byVariable),exclude:r(u,g.exclude,g.byVariable)},u))},r=(g,u,d)=>{if(!u)return;const{names:i,pattern:l,variable:f}=u;if(d&&f){const c=g.interpolate(f);if(/\{.*\}/.test(c)){const h=c.slice(1).slice(0,-1).split(",");return{id:t.Ct.byNames,options:{names:h}}}return{id:t.Ct.byNames,options:{names:c.split(",")}}}if(!((!Array.isArray(i)||i.length===0)&&!l))return l?!Array.isArray(i)||i.length===0?{id:t.Ct.byRegexp,options:l}:{id:t.Ct.byRegexpOrNames,options:u}:{id:t.Ct.byNames,options:{names:i}}}},73376:(Y,A,e)=>{"use strict";e.d(A,{Sm:()=>i,Sv:()=>l,j4:()=>d});var t=e(81160),n=e(28240),o=e(85200),s=e(1173),r=e(18282),g=e(64586),u=e(67641),d=(h=>(h.exclude="exclude",h.include="include",h))(d||{}),i=(h=>(h.all="all",h.any="any",h))(i||{});const l={id:r.F.filterByValue,name:"Filter data by values",description:"select a subset of results based on values",defaultOptions:{filters:[],type:"include",match:"any"},operator:(h,p)=>m=>{const a=h.filters,v=h.match==="all",E=h.type==="include";if(!Array.isArray(a)||a.length===0)return m.pipe(g.W.operator({},p));const D=[];return(0,u.w)()&&D.push(...a.map(b=>{if(b.config.id===s.Js.between){const P=p.interpolate(b.config.options.from),y=p.interpolate(b.config.options.to);return{...b,config:{...b.config,options:{...b.config.options,to:y,from:P}}}}else{if(b.config.id===s.Js.regex)return b;if(b.config.options.value){const P=p.interpolate(b.config.options.value),y={...b,config:{...b.config,options:{...b.config.options,value:P}}};return y.config.options.value=P,y}}return b})),m.pipe((0,t.T)(b=>{if(!Array.isArray(b)||b.length===0)return b;const P=new Set;for(const M of b){const I=c(M,b);let x;(0,u.w)()?x=f(D,I):x=f(a,I);for(let S=0;S<M.length;S++){if(P.has(S))continue;let O=!0;for(const C of x){const L=C(S,M,b);if(!v&&L){O=!0;break}if(v&&!L){O=!1;break}O=L}O&&P.add(S)}}const y=[],T=E?P.size:b[0].length-P.size;for(const M of b){const I=[];for(const x of M.fields){const S=[];for(let O=0;O<M.length;O++){if(E&&P.has(O)){S.push(x.values[O]);continue}if(!E&&!P.has(O)){S.push(x.values[O]);continue}}I.push({...x,values:S,state:{}})}y.push({...M,fields:I,length:T})}return y}))}},f=(h,p)=>{const m=()=>!1;return h.map(a=>{const v=p[a.fieldName]??-1;if(v<0)return console.warn(`[FilterByValue] Could not find index for field name: ${a.fieldName}`),m;const E=(0,o.kK)(a.config);return(D,b,P)=>E(D,b.fields[v],b,P)})},c=(h,p)=>h.fields.reduce((m,a,v)=>{const E=(0,n.Ct)(a,h,p);return m[E]=v,m},{})},15400:(Y,A,e)=>{"use strict";e.d(A,{gs:()=>g,yt:()=>i});var t=e(81160),n=e(11261),o=e(85200),s=e(1173),r=e(18282),g=(f=>(f.UpperCase="Upper Case",f.LowerCase="Lower Case",f.SentenceCase="Sentence Case",f.TitleCase="Title Case",f.PascalCase="Pascal Case",f.CamelCase="Camel Case",f.SnakeCase="Snake Case",f.KebabCase="Kebab Case",f.Trim="Trim",f.Substring="Substring",f))(g||{});const u=f=>{const c=f.split(" ");for(let h=0;h<c.length;h++)c[h]=c[h].charAt(0).toUpperCase()+c[h].slice(1).toLowerCase();return c},d=f=>c=>c.values.map(h=>{switch(f.outputFormat){case"Upper Case":return h.toUpperCase();case"Lower Case":return h.toLowerCase();case"Sentence Case":return h.charAt(0).toUpperCase()+h.slice(1);case"Title Case":return u(h).join(" ");case"Pascal Case":return u(h).join("");case"Camel Case":return h=u(h).join(""),h.charAt(0).toLowerCase()+h.slice(1);case"Snake Case":return h.toLowerCase().split(" ").join("_");case"Kebab Case":return h.toLowerCase().split(" ").join("-");case"Trim":return h.trim();case"Substring":return h.substring(f.substringStart,f.substringEnd)}}),i={id:r.F.formatString,name:"Format string",description:"Manipulate string fields formatting",defaultOptions:{stringField:"",outputFormat:"Upper Case"},operator:f=>c=>c.pipe((0,t.T)(h=>{if(h.length===0)return h;const p=o.sJ.get(s.Ct.byName).get(f.stringField),m=d(f),a=l(p,m);return h.map(v=>({...v,fields:a(v,h)}))}))},l=(f,c)=>(h,p)=>h.fields.map(m=>{if(f(m,h,p)){const a=c(m);return{...m,type:n.PU.string,values:a}}return m})},25094:(Y,A,e)=>{"use strict";e.d(A,{Ce:()=>p,R3:()=>d,Y2:()=>h,of:()=>i});var t=e(81160),n=e(14236),o=e(28240),s=e(81010),r=e(11261),g=e(75059),u=e(18282),d=(m=>(m.aggregate="aggregate",m.groupBy="groupby",m))(d||{});const i={id:u.F.groupBy,name:"Group by",description:"Group the data by a field values then process calculations for each group.",defaultOptions:{fields:{}},isApplicable:m=>{let a=0;for(const v of m)v.fields.length>a&&(a=v.fields.length);return a>=2?s.M.Applicable:s.M.NotApplicable},isApplicableDescription:m=>{let a=0;for(const v of m)v.fields.length>a&&(a=v.fields.length);return`The Group by transformation requires a series with at least two fields to work. The maximum number of fields found on a series is ${a}`},operator:m=>a=>a.pipe((0,t.T)(v=>{if(!Object.keys(m.fields).find(b=>m.fields[b].operation==="groupby"))return v;const D=[];for(const b of v){const P=b.fields.filter(M=>l(M,m));if(P.length===0)continue;const y=h(b,P),T=p(P,y);for(const M of b.fields){if(!f(M,m))continue;const I=(0,o.Ct)(M),x=m.fields[I].aggregations,S={};y.forEach(O=>{const C=O[I],L=(0,g.Nw)({field:C,reducers:x});for(const U of x)Array.isArray(S[U])||(S[U]=[]),S[U].push(L[U])});for(const O of x){const C={name:`${I} (${O})`,values:S[O]??[],type:r.PU.other,config:{}};C.type=c(O,M,C),T.push(C)}}D.push({fields:T,length:y.size})}return D}))},l=(m,a)=>{const v=(0,o.Ct)(m);return a?.fields[v]?.operation==="groupby"},f=(m,a)=>{const v=(0,o.Ct)(m);return a?.fields[v]?.operation==="aggregate"&&Array.isArray(a?.fields[v].aggregations)&&a?.fields[v].aggregations.length>0};function c(m,a,v){switch(m){case g.gy.allIsNull:return r.PU.boolean;case g.gy.last:case g.gy.lastNotNull:case g.gy.first:case g.gy.firstNotNull:return a.type;default:return(0,n.dF)(v)??r.PU.string}}function h(m,a){const v=new Map;for(let E=0;E<m.length;E++){const D=String(a.map(P=>P.values[E])),b=v.get(D)??{};v.has(D)||v.set(D,b);for(let P of m.fields){const y=(0,o.Ct)(P);b[y]||(b[y]={name:y,type:P.type,config:{...P.config},values:[]}),b[y].values.push(P.values[E])}}return v}function p(m,a){const v=[];for(const E of m){const D=[],b=(0,o.Ct)(E);a.forEach(P=>{D.push(P[b].values[0])}),v.push({name:E.name,type:E.type,config:{...E.config},values:D})}return v}},68133:(Y,A,e)=>{"use strict";e.d(A,{_X:()=>l,lu:()=>d});var t=e(81160),n=e(14236),o=e(28240),s=e(11261),r=e(75059),g=e(25094),u=e(18282);const d=!0;var i=(a=>(a.aggregate="aggregate",a.groupBy="groupby",a))(i||{});const l={id:u.F.groupToNestedTable,name:"Group to nested tables",description:"Group data by a field value and create nested tables with the grouped data",defaultOptions:{showSubframeHeaders:d,fields:{}},operator:a=>v=>v.pipe((0,t.T)(E=>{if(!Object.keys(a.fields).find(P=>a.fields[P].operation==="groupby"))return E;const b=[];for(const P of E){const y=P.fields.filter(x=>c(x,a));if(y.length===0)continue;const T=(0,g.Y2)(P,y),M=(0,g.Ce)(y,T),I=m(T,a);for(let x=0;x<P.fields.length;x++){const S=P.fields[x];if(!h(S,a))continue;const O=(0,o.Ct)(S),C=a.fields[O].aggregations,L={};T.forEach(U=>{const R=U[O],B=(0,r.Nw)({field:R,reducers:C});for(const H of C)Array.isArray(L[H])||(L[H]=[]),L[H].push(B[H])});for(const U of C){const R={name:`${O} (${U})`,values:L[U],type:s.PU.other,config:{}};R.type=p(U,S,R),M.push(R)}}M.push({config:{},name:"Nested frames",type:s.PU.nestedFrames,values:I}),b.push({fields:M,length:T.size})}return b}))};function f(a,v,E){return{meta:{custom:{noHeader:!(E.showSubframeHeaders===void 0?d:E.showSubframeHeaders)}},length:v,fields:a}}const c=(a,v)=>{const E=(0,o.Ct)(a);return v?.fields[E]?.operation==="groupby"},h=(a,v)=>{const E=(0,o.Ct)(a);return v?.fields[E]?.operation==="aggregate"&&Array.isArray(v?.fields[E].aggregations)&&v?.fields[E].aggregations.length>0},p=(a,v,E)=>{switch(a){case r.gy.allIsNull:return s.PU.boolean;case r.gy.last:case r.gy.lastNotNull:case r.gy.first:case r.gy.firstNotNull:return v.type;default:return(0,n.dF)(E)??s.PU.string}};function m(a,v){const E=[];for(const[,D]of a){const b=[];for(const[P,y]of Object.entries(D)){const T=v.fields[P];(T===void 0||T.aggregations===void 0||T.operation==="aggregate"&&T.aggregations.length===0||T.operation===null||T.operation===void 0)&&b.push(y)}b.length>0?E.push([f(b,b[0].values.length,v)]):E.push([f([],0,v)])}return E}},77678:(Y,A,e)=>{"use strict";e.d(A,{H1:()=>D,NX:()=>v,OA:()=>m,Rt:()=>p,Uh:()=>T,ZU:()=>y,cg:()=>x,d$:()=>a,dA:()=>E,ix:()=>b,p3:()=>P,rW:()=>l,rs:()=>M});var t=e(81160),n=e(57875),o=e(47696),s=e(41260),r=e(11261),g=e(97706),u=e(18282),d=e(73060),i=e(67641);const l=[1e-9,2e-9,25e-10,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],f=30,c=[],h=(S,O)=>S-O,p={bucketCount:{name:"Bucket count",description:"approx bucket count"},bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},m={id:u.F.histogram,name:"Histogram",description:"Calculate a histogram from input data.",defaultOptions:{fields:{}},operator:(S,O)=>C=>C.pipe((0,t.T)(L=>m.transformer(S,O)(L))),transformer:(S,O)=>C=>{if(!Array.isArray(C)||C.length===0)return C;let L,U;S.bucketSize&&((0,i.w)()&&(S.bucketSize=O.interpolate(S.bucketSize.toString())),typeof S.bucketSize=="string"?L=parseFloat(S.bucketSize):L=S.bucketSize,isNaN(L)&&(L=void 0)),S.bucketOffset&&((0,i.w)()&&(S.bucketOffset=O.interpolate(S.bucketOffset.toString())),typeof S.bucketOffset=="string"?U=parseFloat(S.bucketOffset):U=S.bucketOffset,isNaN(U)&&(U=void 0));const R={bucketSize:L,bucketOffset:U,combine:S.combine},B=P(C,R);return B==null?[]:[x(B)]}},a="xMin";function v(S){return S===a||S==="BucketMin"}const E="xMax";function D(S){return S===E||S==="BucketMax"}function b(S){if(S.meta?.type===s.m.HeatmapCells){let U=S.fields.find(G=>G.name==="yMin"),R=S.fields.find(G=>G.name==="yMax"),B=S.fields.find(G=>G.name==="count"),H=[...new Set(R.values)].sort((G,_)=>G-_),W=[...new Set(U.values)].sort((G,_)=>G-_),N=new Map;H.forEach(G=>N.set(G,0));for(let G=0;G<R.values.length;G++){let _=R.values[G];N.set(_,N.get(_)+B.values[G])}return{xMin:{...U,name:"xMin",values:W},xMax:{...R,name:"xMax",values:H},counts:[{...B,values:[...N.values()]}]}}else if(S.meta?.type===s.m.HeatmapRows){let U=[],R=[],B=[],H="0";return S.fields.forEach(N=>{if(N.type===r.PU.number){let V=N.values.reduce((G,_)=>G+_,0);B.push(V),U.push(H),R.push(H=N.name)}}),B.push(0),U.push(H),R.push(H),{xMin:{...S.fields[1],name:"xMin",type:r.PU.string,values:U},xMax:{...S.fields[1],name:"xMax",type:r.PU.string,values:R},counts:[{...S.fields[1],name:"count",type:r.PU.number,values:B}]}}let O,C;const L=[];for(const U of S.fields)v(U.name)?O=U:D(U.name)?C=U:U.type===r.PU.number&&L.push(U);if(!C&&O&&O.values.length>1){let U=O.values,R=(0,g.h)(U[1]-U[0],6);C={...O,name:E,values:U.map(B=>B+R)}}if(!O&&C&&C?.values.length>1){let U=C.values,R=(0,g.h)(U[1]-U[0],6);O={...C,name:a,values:U.map(B=>B-R)}}if(O&&C&&L.length)return{xMin:O,xMax:C,counts:L}}function P(S,O){let C=O?.bucketSize,L=O?.bucketCount??f,U=O?.bucketOffset??0;if(!C||C<0){let K=[];for(const Z of S)for(const ne of Z.fields)ne.type===r.PU.number&&(K=K.concat(ne.values));K=K.filter(Z=>Z!=null),K.sort((Z,ne)=>Z-ne);let j=1/0;if(K.length===1)j=1;else for(let Z=1;Z<K.length;Z++){let ne=K[Z]-K[Z-1];ne!==0&&(j=Math.min(j,ne))}let k=K[0];const ae=(K[K.length-1]-k)/L;for(let Z=0;Z<l.length;Z++){let ne=l[Z];if(ae<ne&&ne>=j){C=ne;break}}}const R=K=>M(K-U,C)+U;let B=((""+C).match(/\.\d+$/)??["."])[0].length-1,H=[],W=[],N;for(const K of S)for(const j of K.fields)if(j.type===r.PU.number){let k=I(j.values,R,c,h);H.push(k),W.push({...j,config:{...j.config,unit:j.config.unit==="short"?"short":void 0}}),!N&&j.config.unit&&(N=j.config)}if(!W.length)return null;let V=(0,d.fj)(H);for(let K=1;K<V.length;K++){let j=V[K];for(let k=0;k<j.length;k++)j[k]==null&&(j[k]=0)}const G={name:a,values:V[0],type:r.PU.number,state:void 0,config:B===0?N??{}:{...N,decimals:B}},_={...G,name:E,values:V[0].map(K=>K+C)};if(O?.combine){const K=new Array(V[0].length).fill(0);for(let j=1;j<V.length;j++)for(let k=0;k<K.length;k++)K[k]+=V[j][k];W=[{...W[0],name:"count",values:K,type:r.PU.number,state:void 0}]}else W.forEach((K,j)=>{K.values=V[j+1]});return{xMin:G,xMax:_,counts:W}}function y(S,O){return Math.round(S/O)*O}function T(S,O){return Math.ceil(S/O)*O}function M(S,O){return Math.floor(S/O)*O}function I(S,O,C,L){let U=new Map;for(let W=0;W<S.length;W++){let N=S[W];N!=null&&(N=O(N));let V=U.get(N);V?V.count++:U.set(N,{value:N,count:1})}C&&C.forEach(W=>U.delete(W));let R=[...U.values()];L&&R.sort((W,N)=>L(W.value,N.value));let B=Array(R.length),H=Array(R.length);for(let W=0;W<R.length;W++)B[W]=R[W].value,H[W]=R[W].count;return[B,H]}function x(S,O){if(!S.xMin.display){const C=(0,n.J)({field:S.xMin,theme:O??(0,o.a)()});S.xMin.display=C,S.xMax.display=C}return S.counts[0].display=(0,n.J)({field:S.counts[0],theme:O??(0,o.a)()}),{length:S.xMin.values.length,meta:{type:s.m.Histogram},fields:[S.xMin,S.xMax,...S.counts]}}},41511:(Y,A,e)=>{"use strict";e.d(A,{L:()=>u,W:()=>g});var t=e(81160),n=e(85200),o=e(1173),s=e(18282),r=e(73060),g=(d=>(d.outer="outer",d.inner="inner",d.outerTabular="outerTabular",d))(g||{});const u={id:s.F.joinByField,aliasIds:[s.F.seriesToColumns],name:"Join by field",description:"Combine rows from two or more tables, based on a related field between them.  This can be used to outer join multiple time series on the _time_ field to show many time series in one table.",defaultOptions:{byField:void 0,mode:"outer"},operator:(d,i)=>l=>l.pipe((0,t.T)(f=>u.transformer(d,i)(f))),transformer:(d,i)=>{let l;return f=>{if(f.length>1){d.byField&&!l&&(l=n.sJ.get(o.Ct.byName).get(i.interpolate(d.byField)));const c=(0,r.Fd)({frames:f,joinBy:l,mode:d.mode});if(c)return[c]}return f}}}},73060:(Y,A,e)=>{"use strict";e.d(A,{Fd:()=>l,Yj:()=>i,fj:()=>a,g2:()=>v});var t=e(86643),n=e(14236),o=e(11261),s=e(85200),r=e(1173),g=e(41511);function u(E){const{timeField:D}=(0,n.KR)(E[0]);if(D)return s.sJ.get(r.Ct.firstTimeField).get({});let b=[];for(const P of E[0].fields)P.type===o.PU.number&&b.push(P.name);for(let P=1;P<E.length;P++){const y=[];for(const T of E[0].fields)T.type===o.PU.number&&y.push(T.name);b=b.filter(T=>!y.includes(T))}return s.sJ.get(r.Ct.byName).get(b[0])}function d(E){return E.joinBy??u(E.frames)}function i(E,D){if(D>=0){let b=E.fields[D];b.type!==o.PU.string&&!v(b.values)&&(E=(0,n.ES)(E,D))}return E}function l(E){if(!E.frames?.length)return;if(E.frames.length===1){let x=E.frames[0],S=x;const O=d(E);let C=S.fields.findIndex(L=>O(L,S,E.frames));if(E.keepOriginIndices&&(S={...x,fields:x.fields.map((L,U)=>{const R={...L},B={frameIndex:0,fieldIndex:U};return R.state?R.state.origin=B:R.state={origin:B},R})},C>0)){const L=S.fields[C],U=S.fields.filter((R,B)=>B!==C);U.unshift(L),S.fields=U,C=0}if(C>=0&&(S=i(S,C)),E.keep){let L=S.fields.filter((U,R)=>R===C||E.keep(U,S,E.frames));x!==S?S.fields=L:S={...x,fields:L}}return S}const D=[],b=[],P=[],y=[];let T=1;const M=d(E);for(let x=0;x<E.frames.length;x++){const S=E.frames[x];if(!S||!S.fields?.length)continue;const O=[c];let C,L=[],U=[];for(let B=0;B<S.fields.length;B++){const H=S.fields[B];if(H.state=H.state||{},!C&&M(H,S,E.frames))C=H;else{if(E.keep&&!E.keep(H,S,E.frames))continue;let W=H.config.custom?.spanNulls;O.push(W===!0?c:W===-1?h:p);let N=H.labels??{},V=H.name;S.name&&(H.name===o.Bc?V=S.name:N={...N,name:S.name}),L.push({...H,name:V,labels:N})}E.keepOriginIndices&&(H.state.origin={frameIndex:x,fieldIndex:B})}if(!C)continue;P.length===0&&P.push(C),D.push(O);const R=[C.values];for(const B of L)R.push(B.values),P.push(B),delete B.state?.displayName,U.push(T),T++;y.push(U),b.push(R)}let I=[];return E.mode===g.W.outerTabular?I=f(b,y,P.length,D):I=a(b,D,E.mode),{length:I[0]?I[0].length:0,fields:P.map((x,S)=>({...x,values:I[S]}))}}function f(E,D,b,P){let y={};for(let M=0;M<E.length;M++){let I=E[M],x=I[0];for(let S=0;S<E.length;S++){if(S===M)continue;let O=E[S],C=O[0];for(let L=0;L<x.length;L++){const U=x[L],R=b-1;let B=[U].concat(new Array(R)),H=0;for(let W=1;W<I.length;W++){const N=D[M][H];B[N]=I[W][L],H++}for(let W=0;W<C.length;W++)if(x[L]===C[W]){let N=0;for(let V=1;V<O.length;V++){const G=D[S][N];B[G]=O[V][W],N++}break}y[JSON.stringify(B)]=B}}}let T=[];for(let M=0;M<b;M++)T.push(new Array(0));for(let M in y){const I=y[M];for(let x=0;x<I.length;x++)T[x].push(I[x])}return T}const c=0,h=1,p=2;function m(E,D,b){for(let P=0,y,T=-1;P<D.length;P++){let M=D[P];if(M>T){for(y=M-1;y>=0&&E[y]==null;)E[y--]=null;for(y=M+1;y<b&&E[y]==null;)E[T=y++]=null}}}function a(E,D,b=g.W.outer){let P;if(b===g.W.inner)P=new Set((0,t.A)(E.map(I=>I[0])));else{P=new Set;for(let I=0;I<E.length;I++){let S=E[I][0],O=S.length;for(let C=0;C<O;C++)P.add(S[C])}}let y=[Array.from(P).sort((I,x)=>I-x)],T=y[0].length,M=new Map;for(let I=0;I<T;I++)M.set(y[0][I],I);for(let I=0;I<E.length;I++){let x=E[I],S=x[0];for(let O=1;O<x.length;O++){let C=x[O],L=Array(T).fill(void 0),U=D?D[I][O]:h,R=[];for(let B=0;B<C.length;B++){let H=C[B],W=M.get(S[B]);H===null?U!==c&&(L[W]=H,U===p&&R.push(W)):L[W]=H}m(L,R,T),y.push(L)}}return y}function v(E,D=50){const b=E.length;if(b<=1)return!0;let P=0,y=b-1;for(;P<=y&&E[P]==null;)P++;for(;y>=P&&E[y]==null;)y--;if(y<=P)return!0;const T=Math.max(1,Math.floor((y-P+1)/D));for(let M=E[P],I=P+T;I<=y;I+=T){const x=E[I];if(x!=null){if(x<=M)return!1;M=x}}return!0}},6829:(Y,A,e)=>{"use strict";e.d(A,{V:()=>g,n:()=>r});var t=e(81160),n=e(28240),o=e(11261),s=e(18282),r=(d=>(d.Columns="columns",d.Rows="rows",d))(r||{});const g={id:s.F.labelsToFields,name:"Labels to fields",description:"Extract time series labels to fields (columns or rows)",defaultOptions:{},operator:(d,i)=>l=>l.pipe((0,t.T)(f=>g.transformer(d,i)(f))),transformer:d=>i=>{if(d.mode==="rows")return u(i,d.keepLabels);const l=[],f=d.keepLabels?.length?new Set(d.keepLabels):void 0;for(const c of i){const h=[],p={};for(const m of c.fields){if(!m.labels){h.push(m);continue}const a={...m,config:{...m.config,displayName:void 0,displayNameFromDS:void 0},labels:void 0};h.push(a);for(const v of Object.keys(m.labels)){if(f&&!f.has(v))continue;if(d.valueLabel===v){a.name=m.labels[v];continue}(p[v]??(p[v]=new Set)).add(m.labels[v])}}for(const m in p)for(const a of p[m]){const v=new Array(c.length).fill(a);h.push({name:m,type:o.PU.string,values:v,config:{}})}l.push({...c,fields:h,length:c.length})}return l}};function u(d,i){const l=[];for(const f of d)for(const c of f.fields)if(c.labels){const h=[],p=[];if(i)for(const m of i)h.push(m),p.push(c.labels[m]);else for(const[m,a]of Object.entries(c.labels))h.push(m),p.push(a);p.length&&l.push({...f,name:(0,n.Ct)(c,f,d),fields:[{name:"label",type:o.PU.string,config:{},values:h},{name:"value",type:o.PU.string,config:{},values:p}],length:p.length})}return l}},58140:(Y,A,e)=>{"use strict";e.d(A,{o:()=>u});var t=e(2543),n=e.n(t),o=e(81160),s=e(37471),r=e(81010),g=e(18282);const u={id:g.F.merge,name:"Merge series/tables",description:"Merges multiple series/tables into a single serie/table",defaultOptions:{},isApplicable:p=>p.length>1?r.M.Applicable:r.M.NotApplicable,isApplicableDescription:p=>`The merge transformation requires at least 2 data series to work. There is currently ${p.length} data series.`,operator:p=>m=>m.pipe((0,o.T)(a=>{if(!Array.isArray(a)||a.length<=1)return a;const v=a.filter(x=>x.fields.length>0);if(v.length===0)return[a[0]];const E=new Set,D={},b=[],P=new s.k;for(let x=0;x<v.length;x++){const S=v[x];for(let O=0;O<S.fields.length;O++){const C=S.fields[O];E.has(C.name)||(P.addField(d(C)),E.add(C.name)),D[C.name]=D[C.name]||{},D[C.name][x]=O,v.length-1===x&&c(D,C,v)&&b.push(C.name)}}if(b.length===0)return a;const y={},T=[],M=i(v,D,b),I=l(v,E,D);for(let x=0;x<v.length;x++){const S=v[x];for(let O=0;O<S.length;O++){const C=M(x,O),L=I(x,O);if(!Array.isArray(y[C])){y[C]=[L],T.push(h(C,y));continue}let U=!1;y[C]=y[C].map(R=>f(R,L)?(U=!0,{...R,...L}):R),U||(y[C].push(L),T.push(h(C,y)))}}for(const x of T){const S=y[x.key][x.index];S&&P.add(S)}return[P]}))},d=p=>({...(0,t.omit)(p,["values","state","labels","config"]),values:[],config:{...(0,t.omit)(p.config,"displayName")}}),i=(p,m,a)=>{const v=a.reduce((E,D)=>Object.keys(m[D]).reduce((b,P)=>(b[P]=b[P]||[],b[P].push(m[D][P]),b),E),{});return(E,D)=>v[E].reduce((b,P)=>b+p[E].fields[P].values[D],"")},l=(p,m,a)=>(v,E)=>{const D={},b=Array.from(m);for(const P of b){const y=a[P];if(!y)continue;const T=y[v];if(typeof T!="number")continue;const M=p[v];if(!M||!M.fields)continue;const I=M.fields[T];!I||!I.values||(D[P]=I.values[E])}return D},f=(p,m)=>{let a=!0;for(const v in m)if(!(typeof p[v]>"u")&&p[v]!==null&&p[v]!==m[v]){a=!1;break}return a},c=(p,m,a)=>Object.keys(p[m.name]).length===a.length,h=(p,m)=>({key:p,index:m[p].length-1})},64586:(Y,A,e)=>{"use strict";e.d(A,{W:()=>n});var t=e(18282);const n={id:t.F.noop,name:"noop",description:"No-operation transformer",defaultOptions:{},operator:o=>s=>s,transformer:o=>s=>s}},46294:(Y,A,e)=>{"use strict";e.d(A,{M:()=>s});var t=e(11261);const n={threshold:(g,u,d)=>g+d,midpoint:(g,u,d)=>(g+u)/2,plusone:(g,u,d)=>g+1};function o(g,u){return g.fields.find(d=>u!=null?d.name===u:d.type===t.PU.time)}function s(g){if(g.frame.length===0)return g.frame;let u=!0,{frame:d,refFieldName:i,refFieldPseudoMax:l,refFieldPseudoMin:f,insertMode:c}=g;c||(c=n.threshold);const h=o(d,i);if(h==null)return d;h.state={...h.state,nullThresholdApplied:!0};const p=d.fields.map(a=>a.config.custom?.insertNulls||h.config.interval||null),m=new Set(p);if(m.delete(null),m.size===0)return d;if(m.size===1){const a=m.values().next().value;if(a<=0)return d;const v=h.values,E=d.fields.map(b=>b.values),D=r(v,E,a,f,l,c,u);return D===E?d:{...d,length:D[0].length,fields:d.fields.map((b,P)=>({...b,values:D[P]}))}}return d}function r(g,u,d,i=null,l=null,f,c){const h=g.length,p=[];if(i!=null&&i<g[0]){let E=Math.ceil((g[0]-i)/d),D=g[0]-E*d;for(;D<g[0];)p.push(f(D-d,D,d)),D+=d}p.push(g[0]);let m=g[0];for(let E=1;E<h;E++){const D=g[E];for(;D-m>d&&(p.push(f(m,D,d)),m+=d,!!c););p.push(D),m=D}if(l!=null&&l>m)for(;m+d<l;)p.push(f(m,l,d)),m+=d;const a=p.length;if(a===h)return u;const v=[];for(let E of u){let D;if(E!==g){D=Array(a);for(let b=0,P=0;b<a;b++)D[b]=g[P]===p[b]?E[P++]:null}else D=p;v.push(D)}return v}},39624:(Y,A,e)=>{"use strict";e.d(A,{C:()=>t});function t(n){return{...n,fields:n.fields.map(o=>{const s=+o.config?.noValue;if(Number.isNaN(s))return o;{const r=o.values.slice();for(let g=0;g<r.length;g++)r[g]===null&&(r[g]=s);return{...o,values:r}}})}}},82280:(Y,A,e)=>{"use strict";e.d(A,{X:()=>u,x:()=>g});var t=e(2543),n=e.n(t),o=e(81160),s=e(28240),r=e(18282);const g={id:r.F.order,name:"Order fields by name",description:"Order fields based on configuration given by user",defaultOptions:{indexByName:{}},operator:l=>f=>f.pipe((0,o.T)(c=>{const h=d(l.indexByName);return!Array.isArray(c)||c.length===0?c:c.map(p=>({...p,fields:h(p.fields,c,p)}))}))},u=l=>(f,c)=>i(f,l)-i(c,l),d=l=>(f,c,h)=>{if(!Array.isArray(f)||f.length===0||!l||Object.keys(l).length===0)return f;const p=u(l);return(0,t.clone)(f).sort((m,a)=>p((0,s.Ct)(m,h,c),(0,s.Ct)(a,h,c)))},i=(l,f)=>Number.isInteger(f[l])?f[l]:Number.MAX_SAFE_INTEGER},21128:(Y,A,e)=>{"use strict";e.d(A,{Wj:()=>l,rV:()=>i});var t=e(81160),n=e(14236),o=e(28240),s=e(11261),r=e(75059),g=e(85200),u=e(72693),d=e(18282),i=(a=>(a.SeriesToRows="seriesToRows",a.ReduceFields="reduceFields",a))(i||{});const l={id:d.F.reduce,name:"Reduce",description:"Reduce all rows or data points to a single value using a function like max, min, mean or last.",defaultOptions:{reducers:[r.gy.max]},operator:a=>v=>v.pipe((0,t.T)(E=>{if(!a?.reducers?.length)return E;const D=a.fields?(0,g.NS)(a.fields):a.includeTimeField&&a.mode==="reduceFields"?u.Yg:u.zx;if(a.mode==="reduceFields")return p(E,D,a.reducers);const b=f(E,D,a.reducers,a.labelsToFields);return b?[b]:[]}))};function f(a,v,E,D){const b=r.AS.list(E),P=b.map(M=>M.id),y=[],T=D?c(a):[];for(const M of a){const I=M.fields.filter(U=>v(U,M,a)),x=I.length,S=[],O=new Array(x);S.push({name:"Field",type:s.PU.string,values:O,config:{}});const C={};if(D)for(const U of T)C[U]=new Array(x),S.push({name:U,type:s.PU.string,values:C[U],config:{}});const L={};for(const U of b)L[U.id]=new Array(x),S.push({name:U.name,type:s.PU.other,values:L[U.id],config:{}});for(let U=0;U<I.length;U++){const R=I[U],B=(0,r.Nw)({field:R,reducers:P});if(D){if(O[U]=R.name,R.labels)for(const H of Object.keys(R.labels))C[H][U]=R.labels[H]}else O[U]=(0,o.Ct)(R,M,a);for(const H of b){const W=B[H.id];L[H.id][U]=W}}for(const U of S)if(U.type===s.PU.other){const R=(0,n.dF)(U);R&&(U.type=R)}y.push({...M,fields:S,length:x})}return h(y)}function c(a){const v=new Set;for(const E of a)for(const D of E.fields)if(D.labels)for(const b of Object.keys(D.labels))v.add(b);return[...v]}function h(a){if(!a?.length)return;const v=a[0];for(let E=1;E<a.length;E++){const D=a[E];for(let b=0;b<v.fields.length;b++){const P=v.fields[b];for(let y=0;y<D.fields.length;y++){const T=D.fields[y],M=b===0&&y===0,I=P.type===T.type&&P.name===T.name;if(M||I){const x=P.values,S=T.values;P.values=x.concat(S)}}}}return v.name=void 0,v.length=v.fields[0].values.length,v}function p(a,v,E){const b=r.AS.list(E).map(y=>y.id),P=[];for(const y of a){const T=[];for(const M of y.fields)if(v(M,y,a)){const I=(0,r.Nw)({field:M,reducers:b});for(const x of b){const S=I[x],O={...M,type:m(x,M),values:[S]};O.state=void 0,b.length>1&&(O.labels||(O.labels={}),O.labels.reducer=r.AS.get(x).name),T.push(O)}}T.length&&P.push({...y,fields:T,length:1})}return P}function m(a,v){switch(a){case r.gy.allValues:case r.gy.uniqueValues:return s.PU.other;case r.gy.first:case r.gy.firstNotNull:case r.gy.last:case r.gy.lastNotNull:return v.type;default:return s.PU.number}}},67641:(Y,A,e)=>{"use strict";e.d(A,{w:()=>t});const t=()=>window?.grafanaBootData?.settings?.featureToggles?.transformationsVariableSupport},22544:()=>{},12463:()=>{},43585:(Y,A,e)=>{"use strict";e.d(A,{O:()=>t});var t=(n=>(n.NoData="no_data",n.Paused="paused",n.Alerting="alerting",n.OK="ok",n.Pending="pending",n.Unknown="unknown",n))(t||{})},8790:(Y,A,e)=>{"use strict";e.d(A,{V:()=>t});var t=(n=>(n.Field="field",n.Text="text",n.Skip="skip",n))(t||{})},41987:(Y,A,e)=>{"use strict";e.d(A,{Ay:()=>r,Jk:()=>o,hX:()=>s});var t=e(43429),n=e(74135),o=(g=>(g.CloudAlerting="cloud-alerting",g.UnifiedAlerting="unified-alerting",g.Dashboard="dashboard",g.Explore="explore",g.Correlations="correlations",g.Unknown="unknown",g.PanelEditor="panel-editor",g.PanelViewer="panel-viewer",g))(o||{});class s extends t.Ud{constructor(){super(...arguments),this._extensionConfigs=[]}init(u){}setRootPage(u){return this.root=u,this}setComponentsFromLegacyExports(u){if(u.ConfigCtrl&&(this.angularConfigCtrl=u.ConfigCtrl),this.meta&&this.meta.includes){for(const d of this.meta.includes)if(d.type===t.ib.page&&d.component&&!u[d.component]){console.warn("App Page uses unknown component: ",d.component,this.meta);continue}}}get extensionConfigs(){return this._extensionConfigs}configureExtensionLink(u){return this._extensionConfigs.push({...u,type:n.u.link}),this}configureExtensionComponent(u){return this._extensionConfigs.push({...u,type:n.u.component}),this}}var r=(g=>(g.alpha="alpha",g.beta="beta",g))(r||{})},61268:(Y,A,e)=>{"use strict";e.d(A,{r:()=>t});var t=(n=>(n.OpenSource="Open Source",n.Pro="Pro",n.Enterprise="Enterprise",n))(t||{})},58649:(Y,A,e)=>{"use strict";e.d(A,{En:()=>o,d1:()=>n,tw:()=>t});const t=0,n=100,o="SAML"},94624:(Y,A,e)=>{"use strict";e.d(A,{y:()=>t});var t=(n=>(n[n.Off=0]="Off",n[n.Crosshair=1]="Crosshair",n[n.Tooltip=2]="Tooltip",n))(t||{})},39070:(Y,A,e)=>{"use strict";e.d(A,{Gu:()=>t,Gv:()=>g,Nx:()=>n,UW:()=>o,zz:()=>s});var t=(u=>(u.NotStarted="NotStarted",u.Loading="Loading",u.Streaming="Streaming",u.Done="Done",u.Error="Error",u))(t||{});const n=["graph","table","logs","trace","nodeGraph","flamegraph","rawPrometheus"];var o=(u=>(u.Null="null",u.Ignore="connected",u.AsZero="null as zero",u))(o||{});const s=u=>!!u;function r(u){return u}function g(u){return typeof u=="object"&&u!==null?!0:!1}},11261:(Y,A,e)=>{"use strict";e.d(A,{Bc:()=>n,LE:()=>o,PU:()=>t,aI:()=>s});var t=(r=>(r.time="time",r.number="number",r.string="string",r.boolean="boolean",r.trace="trace",r.geo="geo",r.enum="enum",r.other="other",r.frame="frame",r.nestedFrames="nestedFrames",r))(t||{});const n="Value",o="Time",s="Metric"},41260:(Y,A,e)=>{"use strict";e.d(A,{m:()=>t});var t=(n=>(n.TimeSeriesWide="timeseries-wide",n.TimeSeriesLong="timeseries-long",n.TimeSeriesMany="timeseries-many",n.TimeSeriesMulti="timeseries-multi",n.NumericWide="numeric-wide",n.NumericMulti="numeric-multi",n.NumericLong="numeric-long",n.LogLines="log-lines",n.DirectoryListing="directory-listing",n.HeatmapRows="heatmap-rows",n.HeatmapCells="heatmap-cells",n.Histogram="histogram",n))(t||{})},91890:(Y,A,e)=>{"use strict";e.d(A,{$0:()=>o,CC:()=>n,uP:()=>s,x0:()=>t});var t=(r=>(r.Datasource="Datasource",r.Correlations="Correlations",r.ExploreCorrelationsEditor="CorrelationsEditor",r))(t||{}),n=(r=>(r.Regex="regex",r.Logfmt="logfmt",r))(n||{}),o=(r=>(r.Series="series",r.Field="field",r.Fields="fields",r.Value="value",r.BuiltIn="built-in",r.Template="template",r))(o||{}),s=(r=>(r.Values="values",r))(s||{})},40187:(Y,A,e)=>{"use strict";e.d(A,{Is:()=>u,ZF:()=>r,mA:()=>s,tD:()=>o,v2:()=>g});var t=e(92341),n=e(43429);class o extends n.Ud{constructor(i){super(),this.DataSourceClass=i,this.components={}}setConfigEditor(i){return this.components.ConfigEditor=i,this}setConfigCtrl(i){return this.angularConfigCtrl=i,this}setQueryCtrl(i){return this.components.QueryCtrl=i,this}setAnnotationQueryCtrl(i){return this.components.AnnotationsQueryCtrl=i,this}setQueryEditor(i){return this.components.QueryEditor=i,this}setExploreQueryField(i){return this.components.ExploreQueryField=i,this}setExploreMetricsQueryField(i){return this.components.ExploreMetricsQueryField=i,this}setExploreLogsQueryField(i){return this.components.ExploreLogsQueryField=i,this}setQueryEditorHelp(i){return this.components.QueryEditorHelp=i,this}setExploreStartPage(i){return this.setQueryEditorHelp(i)}setVariableQueryEditor(i){return this.components.VariableQueryEditor=i,this}setMetadataInspector(i){return this.components.MetadataInspector=i,this}setComponentsFromLegacyExports(i){this.angularConfigCtrl=i.ConfigCtrl,this.components.QueryCtrl=i.QueryCtrl,this.components.AnnotationsQueryCtrl=i.AnnotationsQueryCtrl,this.components.ExploreQueryField=i.ExploreQueryField,this.components.QueryEditor=i.QueryEditor,this.components.QueryEditorHelp=i.QueryEditorHelp,this.components.VariableQueryEditor=i.VariableQueryEditor}}class s{constructor(i){this.name=i.name,this.id=i.id,this.type=i.type,this.meta=i.meta,this.cachingConfig=i.cachingConfig,this.uid=i.uid}getRef(){return{type:this.type,uid:this.uid}}}var r=(d=>(d.Logs="Logs",d.Metrics="Metrics",d.Tracing="Tracing",d))(r||{}),g=(d=>(d.Cancelled="cancelled",d.Timeout="timeout",d.Unknown="unknown",d))(g||{});class u{}u=(0,t.Y)(u),s=(0,t.Y)(s)},50349:()=>{},50219:()=>{},24293:(Y,A,e)=>{"use strict";e.d(A,{F:()=>n,Y:()=>t});var t=(o=>(o.Thresholds="thresholds",o.PaletteClassic="palette-classic",o.PaletteClassicByName="palette-classic-by-name",o.PaletteSaturated="palette-saturated",o.ContinuousGrYlRd="continuous-GrYlRd",o.ContinuousRdYlGr="continuous-RdYlGr",o.ContinuousBlYlRd="continuous-BlYlRd",o.ContinuousYlRd="continuous-YlRd",o.ContinuousBlPu="continuous-BlPu",o.ContinuousYlBl="continuous-YlBl",o.ContinuousBlues="continuous-blues",o.ContinuousReds="continuous-reds",o.ContinuousGreens="continuous-greens",o.ContinuousPurples="continuous-purples",o.Fixed="fixed",o.Shades="shades",o))(t||{});const n="#808080"},37055:(Y,A,e)=>{"use strict";e.d(A,{Ow:()=>n,ZW:()=>t,uo:()=>o});function t(s){return r=>"__systemRef"in r&&r.__systemRef===s}const n=s=>"__systemRef"in s&&typeof s.__systemRef=="string";var o=(s=>(s.Unit="unit",s.Min="min",s.Max="max",s.Decimals="decimals",s.DisplayName="displayName",s.NoValue="noValue",s.Thresholds="thresholds",s.Mappings="mappings",s.Links="links",s.Color="color",s.Filterable="filterable",s))(o||{})},93015:()=>{},58318:()=>{},49812:()=>{},8887:(Y,A,e)=>{"use strict";e.d(A,{Uo:()=>o,az:()=>t,n6:()=>n});const t={google:!0,microsoft:!0,github:!0,gitlab:!0,okta:!0,discord:!0,hipchat:!0,amazon:!0,"google-hangouts-alt":!0,pagerduty:!0,line:!0,anchor:!0,"adjust-circle":!0,"angle-double-down":!0,"angle-double-right":!0,"angle-double-up":!0,"angle-down":!0,"angle-left":!0,"angle-right":!0,"angle-up":!0,"align-left":!0,"align-right":!0,"application-observability":!0,apps:!0,"archive-alt":!0,arrow:!0,"arrow-down":!0,"arrow-from-right":!0,"arrow-left":!0,"arrow-random":!0,"arrow-right":!0,"arrow-to-right":!0,"arrow-up":!0,"arrows-h":!0,"arrows-v":!0,asserts:!0,"expand-arrows":!0,at:!0,ai:!0,backward:!0,bars:!0,bell:!0,"bell-slash":!0,bolt:!0,book:!0,bookmark:!0,"book-open":!0,"brackets-curly":!0,bug:!0,building:!0,"calculator-alt":!0,"calendar-alt":!0,"calendar-slash":!0,camera:!0,capture:!0,"channel-add":!0,"chart-line":!0,check:!0,"check-circle":!0,"check-square":!0,circle:!0,"circle-mono":!0,"clipboard-alt":!0,"clock-nine":!0,cloud:!0,"cloud-download":!0,"cloud-upload":!0,"code-branch":!0,cog:!0,columns:!0,"comment-alt":!0,"comment-alt-message":!0,"comment-alt-share":!0,"comments-alt":!0,compass:!0,copy:!0,"corner-down-right-alt":!0,"create-dashboard":!0,"credit-card":!0,crosshair:!0,cube:!0,dashboard:!0,database:!0,"dice-three":!0,docker:!0,"document-info":!0,"download-alt":!0,draggabledots:!0,edit:!0,"ellipsis-v":!0,envelope:!0,"exchange-alt":!0,"exclamation-triangle":!0,"exclamation-circle":!0,"external-link-alt":!0,eye:!0,"eye-slash":!0,"ellipsis-h":!0,"fa fa-spinner":!0,favorite:!0,"file-alt":!0,"file-blank":!0,"file-copy-alt":!0,"file-download":!0,"file-edit-alt":!0,"file-landscape-alt":!0,filter:!0,flip:!0,folder:!0,font:!0,fire:!0,"folder-open":!0,"folder-plus":!0,"folder-upload":!0,forward:!0,"frontend-observability":!0,"gf-bar-alignment-after":!0,"gf-bar-alignment-before":!0,"gf-bar-alignment-center":!0,"gf-glue":!0,"gf-grid":!0,"gf-interpolation-linear":!0,"gf-interpolation-smooth":!0,"gf-interpolation-step-after":!0,"gf-interpolation-step-before":!0,"gf-landscape":!0,"gf-layout-simple":!0,"gf-logs":!0,"gf-ml":!0,"gf-movepane-left":!0,"gf-movepane-right":!0,"gf-portrait":!0,"gf-service-account":!0,"gf-show-context":!0,"gf-pin":!0,"gf-prometheus":!0,"gf-traces":!0,globe:!0,grafana:!0,"graph-bar":!0,heart:!0,"heart-rate":!0,"heart-break":!0,history:!0,"history-alt":!0,home:!0,"home-alt":!0,"horizontal-align-center":!0,"horizontal-align-left":!0,"horizontal-align-right":!0,hourglass:!0,import:!0,info:!0,"info-circle":!0,k6:!0,"key-skeleton-alt":!0,keyboard:!0,"layer-group":!0,"layers-alt":!0,"library-panel":!0,"line-alt":!0,link:!0,"list-ui-alt":!0,"list-ul":!0,"list-ol":!0,lock:!0,"map-marker":!0,"map-marker-plus":!0,"map-marker-minus":!0,message:!0,minus:!0,"minus-circle":!0,"mobile-android":!0,monitor:!0,palette:!0,"panel-add":!0,"pathfinder-unite":!0,pause:!0,pen:!0,percentage:!0,play:!0,plug:!0,plus:!0,"plus-circle":!0,"plus-square":!0,power:!0,"presentation-play":!0,process:!0,"question-circle":!0,"record-audio":!0,repeat:!0,rocket:!0,"ruler-combined":!0,save:!0,search:!0,"search-minus":!0,"search-plus":!0,"share-alt":!0,shield:!0,"shield-exclamation":!0,signal:!0,signin:!0,signout:!0,sitemap:!0,slack:!0,"sliders-v-alt":!0,spinner:!0,"sort-amount-down":!0,"sort-amount-up":!0,"square-shape":!0,star:!0,"step-backward":!0,stopwatch:!0,"stopwatch-slash":!0,sync:!0,"sync-slash":!0,table:!0,"tag-alt":!0,"telegram-alt":!0,"text-fields":!0,"thumbs-up":!0,times:!0,"times-circle":!0,"toggle-on":!0,"toggle-off":!0,"trash-alt":!0,unarchive:!0,unlock:!0,upload:!0,user:!0,"users-alt":!0,"user-arrows":!0,"vertical-align-bottom":!0,"vertical-align-center":!0,"vertical-align-top":!0,"web-section-alt":!0,"wrap-text":!0,rss:!0,x:!0};function n(s){return!s||typeof s!="string"?!1:s in t}function o(s){if(n(s))return s}},64572:(Y,A,e)=>{"use strict";e.r(A),e.d(A,{AbstractLabelOperator:()=>u.D_,AlertState:()=>ae.O,AnnotationEventFieldSource:()=>d.V,AppEvents:()=>_.r1,AppPlugin:()=>I.hX,CoreApp:()=>I.Jk,CustomVariableSupport:()=>j.f5,DEFAULT_SAML_NAME:()=>t.En,DashboardCursorSync:()=>g.y,DataFrameType:()=>s.m,DataLinkConfigOrigin:()=>r.x0,DataQueryErrorType:()=>x.v2,DataSourceApi:()=>x.mA,DataSourcePlugin:()=>x.tD,DataSourceVariableSupport:()=>j.ZV,DataTopic:()=>u.QR,DefaultTimeZone:()=>h.lE,ExploreMode:()=>x.ZF,FALLBACK_COLOR:()=>L.F,FeatureState:()=>I.Ay,FieldColorModeId:()=>L.Y,FieldConfigProperty:()=>T.uo,FieldType:()=>o.PU,GAUGE_DEFAULT_MAXIMUM:()=>t.d1,GAUGE_DEFAULT_MINIMUM:()=>t.tw,GrafanaPlugin:()=>O.Ud,GrafanaThemeType:()=>U.I,LanguageProvider:()=>x.Is,LegacyGraphHoverClearEvent:()=>_.Tq,LegacyGraphHoverEvent:()=>_.kb,LiveChannelConnectionState:()=>K.ZF,LiveChannelEventType:()=>K.o4,LiveChannelScope:()=>K.qD,LiveChannelType:()=>K.os,LoadingState:()=>n.Gu,LogLevel:()=>i.$b,LogRowContextQueryDirection:()=>i.ZF,LogsDedupDescription:()=>i._C,LogsDedupStrategy:()=>i.fY,LogsMetaKind:()=>i.tG,LogsSortOrder:()=>i.uH,LogsVolumeType:()=>i.Aj,MappingType:()=>m.d,NullValueMode:()=>n.UW,OrgRole:()=>R.X,PageLayoutType:()=>l.k,PanelEvents:()=>_.ee,PluginErrorCode:()=>O.ZK,PluginExtensionPoints:()=>ie.S,PluginExtensionTypes:()=>ie.u,PluginIncludeType:()=>O.ib,PluginSignatureStatus:()=>O.Ac,PluginSignatureType:()=>O.kv,PluginState:()=>O.pn,PluginType:()=>O.QE,SpecialValue:()=>y.N,SpecialValueMatch:()=>m.W,StandardVariableSupport:()=>j.J$,SupplementaryQueryType:()=>i.cF,SupportedTransformationType:()=>r.CC,TIME_FORMAT:()=>h.G$,TIME_SERIES_METRIC_FIELD_NAME:()=>o.aI,TIME_SERIES_TIME_FIELD_NAME:()=>o.LE,TIME_SERIES_VALUE_FIELD_NAME:()=>o.Bc,ThresholdsMode:()=>p.O,TransformationApplicabilityLevels:()=>y.M,VariableHide:()=>C.zL,VariableOrigin:()=>r.$0,VariableRefresh:()=>C.CO,VariableSort:()=>C.ZG,VariableSuggestionsScope:()=>r.uP,VariableSupportBase:()=>j.xi,VariableSupportType:()=>j.Qz,VisualizationSuggestionScore:()=>S.nQ,VisualizationSuggestionsBuilder:()=>S.v2,VisualizationSuggestionsListAppender:()=>S.NV,VizOrientation:()=>S.wV,availableIconsIndex:()=>de.az,getDefaultRelativeTimeRange:()=>h.Cn,getDefaultTimeRange:()=>h.E2,hasLogsContextSupport:()=>i.Ol,hasLogsContextUiSupport:()=>i.wj,hasQueryExportSupport:()=>u.Ee,hasQueryImportSupport:()=>u.FL,hasQueryModificationSupport:()=>i._0,hasSupplementaryQuerySupport:()=>i.Nc,hasToggleableQueryFiltersSupport:()=>i.FP,isIconName:()=>de.n6,isLiveChannelJoinEvent:()=>K.Cz,isLiveChannelLeaveEvent:()=>K.jQ,isLiveChannelMessageEvent:()=>K.Z7,isLiveChannelStatusEvent:()=>K.ew,isObject:()=>n.Gv,isSystemOverride:()=>T.Ow,isSystemOverrideWithRef:()=>T.ZW,isTruthy:()=>n.zz,isUnsignedPluginSignature:()=>ee.x,isValidLiveChannelAddress:()=>K.aj,makeArrayIndexableVector:()=>M.N,parseLiveChannelAddress:()=>K.DG,patchArrayVectorProrotypeMethods:()=>M.V,preferredVisualizationTypes:()=>n.Nx,toIconName:()=>de.Uo,toLiveChannelId:()=>K.Qp});var t=e(58649),n=e(39070),o=e(11261),s=e(41260),r=e(91890),g=e(94624),u=e(73372),d=e(8790),i=e(9557),l=e(64388),f=e(98102),c=e.n(f),re={};for(const ge in f)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType"].indexOf(ge)<0&&(re[ge]=()=>f[ge]);e.d(A,re);var h=e(43127),p=e(50082),m=e(25019),a=e(50349),v=e.n(a),re={};for(const ge in a)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(ge)<0&&(re[ge]=()=>a[ge]);e.d(A,re);var E=e(49812),D=e.n(E),re={};for(const ge in E)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(ge)<0&&(re[ge]=()=>E[ge]);e.d(A,re);var b=e(22544),P=e.n(b),re={};for(const ge in b)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(ge)<0&&(re[ge]=()=>b[ge]);e.d(A,re);var y=e(81010),T=e(37055),M=e(35853),I=e(41987),x=e(40187),S=e(47070),O=e(43429),C=e(12470),L=e(24293),U=e(25137),R=e(62625),B=e(93015),H=e.n(B),re={};for(const ge in B)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(ge)<0&&(re[ge]=()=>B[ge]);e.d(A,re);var W=e(38893),N=e.n(W),re={};for(const ge in W)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(ge)<0&&(re[ge]=()=>W[ge]);e.d(A,re);var V=e(50219),G=e.n(V),re={};for(const ge in V)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(ge)<0&&(re[ge]=()=>V[ge]);e.d(A,re);var _=e(26272),K=e(55004),j=e(29505),k=e(58318),Q=e.n(k),re={};for(const ge in k)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType"].indexOf(ge)<0&&(re[ge]=()=>k[ge]);e.d(A,re);var ee=e(51527),ae=e(43585),Z=e(64367),ne=e.n(Z),re={};for(const ge in Z)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(ge)<0&&(re[ge]=()=>Z[ge]);e.d(A,re);var q=e(12463),te=e.n(q),re={};for(const ge in q)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(ge)<0&&(re[ge]=()=>q[ge]);e.d(A,re);var de=e(8887),ie=e(74135)},19484:(Y,A,e)=>{"use strict";e.d(A,{R:()=>t});var t=(n=>(n.Grid="grid",n.List="list",n))(t||{})},26272:(Y,A,e)=>{"use strict";e.d(A,{Tq:()=>g,ee:()=>s,kb:()=>r,r1:()=>o});var t=e(89550),n=e(65463);const o={alertSuccess:(0,t.R)("alert-success"),alertWarning:(0,t.R)("alert-warning"),alertError:(0,t.R)("alert-error")},s={refresh:(0,t.R)("refresh"),componentDidMount:(0,t.R)("component-did-mount"),dataReceived:(0,t.R)("data-received"),dataError:(0,t.R)("data-error"),dataFramesReceived:(0,t.R)("data-frames-received"),dataSnapshotLoad:(0,t.R)("data-snapshot-load"),editModeInitialized:(0,t.R)("init-edit-mode"),initPanelActions:(0,t.R)("init-panel-actions"),initialized:(0,t.R)("panel-initialized"),panelTeardown:(0,t.R)("panel-teardown"),render:(0,t.R)("render")};class r extends n.x{}r.type="graph-hover";class g extends n.a{constructor(){super(...arguments),this.payload={point:{}}}}g.type="graph-hover-clear"},55004:(Y,A,e)=>{"use strict";e.d(A,{Cz:()=>g,DG:()=>i,Qp:()=>f,Z7:()=>d,ZF:()=>o,aj:()=>l,ew:()=>r,jQ:()=>u,o4:()=>s,os:()=>n,qD:()=>t});var t=(c=>(c.DataSource="ds",c.Plugin="plugin",c.Grafana="grafana",c.Stream="stream",c))(t||{}),n=(c=>(c.DataStream="stream",c.DataFrame="frame",c.JSON="json",c))(n||{}),o=(c=>(c.Pending="pending",c.Connected="connected",c.Connecting="connecting",c.Disconnected="disconnected",c.Shutdown="shutdown",c.Invalid="invalid",c))(o||{}),s=(c=>(c.Status="status",c.Join="join",c.Leave="leave",c.Message="message",c))(s||{});function r(c){return c.type==="status"}function g(c){return c.type==="join"}function u(c){return c.type==="leave"}function d(c){return c.type==="message"}function i(c){if(c?.length){let h=c.trim().split("/");if(h.length>=3)return{scope:h[0],namespace:h[1],path:h.slice(2).join("/")}}}function l(c){return!!(c?.path&&c.namespace&&c.scope)}function f(c){if(!c.scope)return"";let h=c.scope;return!c.namespace||(h+="/"+c.namespace,!c.path)?h:h+"/"+c.path}},9557:(Y,A,e)=>{"use strict";e.d(A,{$b:()=>n,Aj:()=>d,FP:()=>f,Nc:()=>i,Ol:()=>g,ZF:()=>r,_0:()=>c,_C:()=>s,cF:()=>u,fY:()=>t.fY,tG:()=>o,uH:()=>t.uH,wj:()=>l});var t=e(52622),n=(h=>(h.emerg="critical",h.fatal="critical",h.alert="critical",h.crit="critical",h.critical="critical",h.warn="warning",h.warning="warning",h.err="error",h.eror="error",h.error="error",h.info="info",h.information="info",h.informational="info",h.notice="info",h.dbug="debug",h.debug="debug",h.trace="trace",h.unknown="unknown",h))(n||{}),o=(h=>(h[h.Number=0]="Number",h[h.String=1]="String",h[h.LabelsMap=2]="LabelsMap",h[h.Error=3]="Error",h))(o||{}),s=(h=>(h.none="No de-duplication",h.exact="De-duplication of successive lines that are identical, ignoring ISO datetimes.",h.numbers="De-duplication of successive lines that are identical when ignoring numbers, e.g., IP addresses, latencies.",h.signature="De-duplication of successive lines that have identical punctuation and whitespace.",h))(s||{}),r=(h=>(h.Backward="BACKWARD",h.Forward="FORWARD",h))(r||{});const g=h=>!h||typeof h!="object"?!1:"getLogRowContext"in h;var u=(h=>(h.LogsVolume="LogsVolume",h.LogsSample="LogsSample",h))(u||{}),d=(h=>(h.FullRange="FullRange",h.Limited="Limited",h))(d||{});const i=(h,p)=>h?("getDataProvider"in h||"getSupplementaryRequest"in h)&&"getSupplementaryQuery"in h&&"getSupportedSupplementaryQueryTypes"in h&&h.getSupportedSupplementaryQueryTypes().includes(p):!1,l=h=>!h||typeof h!="object"?!1:"getLogRowContextUi"in h,f=h=>h!=null&&typeof h=="object"&&"toggleQueryFilter"in h&&"queryHasFilter"in h,c=h=>h!=null&&typeof h=="object"&&"modifyQuery"in h&&"getSupportedQueryModifications"in h},64388:(Y,A,e)=>{"use strict";e.d(A,{k:()=>t});var t=(n=>(n[n.Standard=0]="Standard",n[n.Canvas=1]="Canvas",n[n.Custom=2]="Custom",n))(t||{})},62625:(Y,A,e)=>{"use strict";e.d(A,{X:()=>t});var t=(n=>(n.None="None",n.Viewer="Viewer",n.Editor="Editor",n.Admin="Admin",n))(t||{})},47070:(Y,A,e)=>{"use strict";e.d(A,{NV:()=>u,nQ:()=>r,v2:()=>g,wV:()=>s});var t=e(2543),n=e.n(t),o=e(11261),s=(d=>(d.Auto="auto",d.Vertical="vertical",d.Horizontal="horizontal",d))(s||{}),r=(d=>(d[d.Best=100]="Best",d[d.Good=70]="Good",d[d.OK=50]="OK",d))(r||{});class g{constructor(i,l){this.list=[],this.data=i,this.panel=l,this.dataSummary=this.computeDataSummary()}getListAppender(i){return new u(this.list,i)}computeDataSummary(){const i=this.data?.series||[];let l=0,f=0,c=0,h=0,p=0,m=0,a;for(const v of i){h+=v.length,v.meta?.preferredVisualisationType&&(a=v.meta.preferredVisualisationType);for(const E of v.fields)switch(m++,E.type){case o.PU.number:l+=1;break;case o.PU.time:f+=1;break;case o.PU.string:c+=1;break}v.length>p&&(p=v.length)}return{numberFieldCount:l,timeFieldCount:f,stringFieldCount:c,rowCountTotal:h,rowCountMax:p,fieldCount:m,preferredVisualisationType:a,frameCount:i.length,hasData:h>0,hasTimeField:f>0,hasNumberField:l>0,hasStringField:c>0}}getList(){return this.list}}class u{constructor(i,l){this.list=i,this.defaults=l}append(i){this.list.push((0,t.defaultsDeep)(i,this.defaults))}}},43429:(Y,A,e)=>{"use strict";e.d(A,{Ac:()=>o,QE:()=>n,Ud:()=>u,ZK:()=>r,ib:()=>g,kv:()=>s,pn:()=>t});var t=(d=>(d.alpha="alpha",d.beta="beta",d.stable="stable",d.deprecated="deprecated",d))(t||{}),n=(d=>(d.panel="panel",d.datasource="datasource",d.app="app",d.renderer="renderer",d.secretsmanager="secretsmanager",d))(n||{}),o=(d=>(d.internal="internal",d.valid="valid",d.invalid="invalid",d.modified="modified",d.missing="missing",d))(o||{}),s=(d=>(d.grafana="grafana",d.commercial="commercial",d.community="community",d.private="private",d.core="core",d))(s||{}),r=(d=>(d.missingSignature="signatureMissing",d.invalidSignature="signatureInvalid",d.modifiedSignature="signatureModified",d))(r||{}),g=(d=>(d.dashboard="dashboard",d.page="page",d.panel="panel",d.datasource="datasource",d))(g||{});class u{addConfigPage(i){return this.configPages||(this.configPages=[]),this.configPages.push(i),this}setChannelSupport(){return console.warn("[deprecation] plugin is using ignored option: setChannelSupport",this.meta),this}constructor(){this.meta={}}}},74135:(Y,A,e)=>{"use strict";e.d(A,{S:()=>n,u:()=>t});var t=(o=>(o.link="link",o.component="component",o))(t||{}),n=(o=>(o.AlertInstanceAction="grafana/alerting/instance/action",o.CommandPalette="grafana/commandpalette/action",o.DashboardPanelMenu="grafana/dashboard/panel/menu",o.DataSourceConfig="grafana/datasources/config",o.ExploreToolbarAction="grafana/explore/toolbar/action",o.UserProfileTab="grafana/user/profile/tab",o))(n||{})},51527:(Y,A,e)=>{"use strict";e.d(A,{x:()=>n});var t=e(43429);function n(o){return o&&o!==t.Ac.valid&&o!==t.Ac.internal}},73372:(Y,A,e)=>{"use strict";e.d(A,{D_:()=>n,Ee:()=>s,FL:()=>o,QR:()=>t.QR});var t=e(52622),n=(r=>(r.Equal="Equal",r.NotEqual="NotEqual",r.EqualRegEx="EqualRegEx",r.NotEqualRegEx="NotEqualRegEx",r))(n||{});const o=r=>!r||typeof r!="object"?!1:"importFromAbstractQueries"in r,s=r=>!r||typeof r!="object"?!1:"exportToAbstractQueries"in r},98102:()=>{},64367:()=>{},12470:(Y,A,e)=>{"use strict";e.d(A,{CO:()=>t,ZG:()=>n,zL:()=>o});var t=(s=>(s[s.never=0]="never",s[s.onDashboardLoad=1]="onDashboardLoad",s[s.onTimeRangeChanged=2]="onTimeRangeChanged",s))(t||{}),n=(s=>(s[s.disabled=0]="disabled",s[s.alphabeticalAsc=1]="alphabeticalAsc",s[s.alphabeticalDesc=2]="alphabeticalDesc",s[s.numericalAsc=3]="numericalAsc",s[s.numericalDesc=4]="numericalDesc",s[s.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",s[s.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",s[s.naturalAsc=7]="naturalAsc",s[s.naturalDesc=8]="naturalDesc",s))(n||{}),o=(s=>(s[s.dontHide=0]="dontHide",s[s.hideLabel=1]="hideLabel",s[s.hideVariable=2]="hideVariable",s))(o||{})},25137:(Y,A,e)=>{"use strict";e.d(A,{I:()=>t});var t=(n=>(n.Light="light",n.Dark="dark",n))(t||{})},50082:(Y,A,e)=>{"use strict";e.d(A,{O:()=>t});var t=(n=>(n.Absolute="absolute",n.Percentage="percentage",n))(t||{})},43127:(Y,A,e)=>{"use strict";e.d(A,{Cn:()=>g,E2:()=>r,G$:()=>s,lE:()=>o});var t=e(52622),n=e(47232);const o=t.vp,s="YYYY-MM-DD HH:mm:ss";function r(){const u=(0,n.KQ)();return{from:(0,n.KQ)(u).subtract(6,"hour"),to:u,raw:{from:"now-6h",to:"now"}}}function g(){return{from:600,to:0}}},38893:()=>{},81010:(Y,A,e)=>{"use strict";e.d(A,{M:()=>t,N:()=>n});var t=(o=>(o[o.NotPossible=-1]="NotPossible",o[o.NotApplicable=0]="NotApplicable",o[o.Applicable=1]="Applicable",o[o.HighlyApplicable=2]="HighlyApplicable",o))(t||{}),n=(o=>(o.True="true",o.False="false",o.Null="null",o.Empty="empty",o))(n||{})},25019:(Y,A,e)=>{"use strict";e.d(A,{W:()=>n,d:()=>t});var t=(o=>(o.ValueToText="value",o.RangeToText="range",o.RegexToText="regex",o.SpecialValue="special",o))(t||{}),n=(o=>(o.True="true",o.False="false",o.Null="null",o.NaN="nan",o.NullAndNaN="null+nan",o.Empty="empty",o))(n||{})},29505:(Y,A,e)=>{"use strict";e.d(A,{J$:()=>o,Qz:()=>t,ZV:()=>r,f5:()=>s,xi:()=>n});var t=(g=>(g.Legacy="legacy",g.Standard="standard",g.Custom="custom",g.Datasource="datasource",g))(t||{});class n{}class o extends n{getType(){return"standard"}}class s extends n{getType(){return"custom"}}class r extends n{getType(){return"datasource"}}},35853:(Y,A,e)=>{"use strict";e.d(A,{N:()=>n,V:()=>t});function t(){Object.getOwnPropertyDescriptor(Array.prototype,"toArray")||Object.defineProperties(Array.prototype,{get:{value:function(o){return this[o]},writable:!0,enumerable:!1,configurable:!0},set:{value:function(o,s){this[o]=s},writable:!0,enumerable:!1,configurable:!0},add:{value:function(o){this.push(o)},writable:!0,enumerable:!1,configurable:!0},toArray:{value:function(){return this},writable:!0,enumerable:!1,configurable:!0}})}t();function n(o){return new Proxy(o,{get(s,r,g){if(typeof r!="symbol"){const u=+r;if(String(u)===r)return s.get(u)}return Reflect.get(s,r,g)},set(s,r,g,u){if(typeof r!="symbol"){const d=+r;if(String(d)===r)return s.set(d,g),!0}return Reflect.set(s,r,g,u)}})}},60264:(Y,A,e)=>{"use strict";e.d(A,{bk:()=>u,pv:()=>l,iF:()=>i});var t=e(2543),n=e(69550),o=e(27310),s=e(39070),r=e(83077);class g{constructor(){this.properties=[]}addCustomEditor(c){return this.properties.push(c),this}getRegistry(){return new r.O(()=>this.properties)}getItems(){return this.properties}}class u extends g{addNumberInput(c){return this.addCustomEditor({...c,id:c.path,override:n.D.get("number").editor,editor:n.D.get("number").editor,process:o.m0,shouldApply:c.shouldApply??(()=>!0),settings:c.settings||{}})}addSliderInput(c){return this.addCustomEditor({...c,id:c.path,override:n.D.get("slider").editor,editor:n.D.get("slider").editor,process:o.m0,shouldApply:c.shouldApply??(()=>!0),settings:c.settings||{}})}addTextInput(c){return this.addCustomEditor({...c,id:c.path,override:n.D.get("text").editor,editor:n.D.get("text").editor,process:o.OU,shouldApply:c.shouldApply??(()=>!0),settings:c.settings||{}})}addSelect(c){return this.addCustomEditor({...c,id:c.path,override:n.D.get("select").editor,editor:n.D.get("select").editor,process:o.hL,shouldApply:c.shouldApply?c.shouldApply:()=>!0,settings:c.settings||{options:[]}})}addRadio(c){return this.addCustomEditor({...c,id:c.path,override:n.D.get("radio").editor,editor:n.D.get("radio").editor,process:o.hL,shouldApply:c.shouldApply?c.shouldApply:()=>!0,settings:c.settings||{options:[]}})}addBooleanSwitch(c){return this.addCustomEditor({...c,id:c.path,editor:n.D.get("boolean").editor,override:n.D.get("boolean").editor,process:o.FM,shouldApply:c.shouldApply?c.shouldApply:()=>!0,settings:c.settings||{}})}addColorPicker(c){return this.addCustomEditor({...c,id:c.path,editor:n.D.get("color").editor,override:n.D.get("color").editor,process:o.hS,shouldApply:c.shouldApply?c.shouldApply:()=>!0,settings:c.settings||{}})}addUnitPicker(c){return this.addCustomEditor({...c,id:c.path,editor:n.D.get("unit").editor,override:n.D.get("unit").editor,process:o.lG,shouldApply:c.shouldApply?c.shouldApply:()=>!0,settings:c.settings||{}})}addFieldNamePicker(c){return this.addCustomEditor({...c,id:c.path,editor:n.D.get("field-name").editor,override:n.D.get("field-name").editor,process:o.hS,shouldApply:c.shouldApply?c.shouldApply:()=>!0,settings:c.settings||{}})}addGenericEditor(c,h){return this.addCustomEditor({...c,id:c.path,editor:h,override:h,process:o.hS,shouldApply:c.shouldApply?c.shouldApply:()=>!0,settings:c.settings||{}})}}class d{constructor(c){this.cfg=c,this.path="",this.id="nested-panel-options",this.name="nested",this.editor=()=>null,this.getBuilder=()=>this.cfg.build,this.getNestedValueAccess=h=>{const p=this.cfg.values;return p?p(h):{getValue:m=>h.getValue(`${this.path}.${m}`),onChange:(m,a)=>h.onChange(`${this.path}.${m}`,a)}},this.path=c.path,this.category=c.category,this.defaultValue=this.getDefaultValue(c)}getDefaultValue(c){let h=(0,s.Gv)(c.defaultValue)?(0,t.cloneDeep)(c.defaultValue):{};const p=new l;c.build(p,{data:[]});for(const m of p.getItems())m.defaultValue!=null&&(0,t.set)(h,m.path,m.defaultValue);return h}}function i(f){return(0,s.Gv)(f)&&"id"in f&&f.id==="nested-panel-options"}class l extends g{addNestedOptions(c){const h=new d(c);return this.addCustomEditor(h)}addNumberInput(c){return this.addCustomEditor({...c,id:c.path,editor:n.D.get("number").editor})}addSliderInput(c){return this.addCustomEditor({...c,id:c.path,editor:n.D.get("slider").editor})}addTextInput(c){return this.addCustomEditor({...c,id:c.path,editor:n.D.get("text").editor})}addStringArray(c){return this.addCustomEditor({...c,id:c.path,editor:n.D.get("strings").editor})}addSelect(c){return this.addCustomEditor({...c,id:c.path,editor:n.D.get("select").editor})}addMultiSelect(c){return this.addCustomEditor({...c,id:c.path,editor:n.D.get("multi-select").editor})}addRadio(c){return this.addCustomEditor({...c,id:c.path,editor:n.D.get("radio").editor})}addBooleanSwitch(c){return this.addCustomEditor({...c,id:c.path,editor:n.D.get("boolean").editor})}addColorPicker(c){return this.addCustomEditor({...c,id:c.path,editor:n.D.get("color").editor,settings:c.settings||{}})}addTimeZonePicker(c){return this.addCustomEditor({...c,id:c.path,editor:n.D.get("timezone").editor,settings:c.settings||{}})}addUnitPicker(c){return this.addCustomEditor({...c,id:c.path,editor:n.D.get("unit").editor})}addFieldNamePicker(c){return this.addCustomEditor({...c,id:c.path,editor:n.D.get("field-name").editor})}addDashboardPicker(c){return this.addCustomEditor({...c,id:c.path,editor:n.D.get("dashboard-uid").editor})}}},28802:(Y,A,e)=>{"use strict";e.d(A,{t:()=>o});var t=e(2543),n=e.n(t);function o(s){return typeof s=="number"?s:s===""||s===null||s===void 0||Array.isArray(s)?NaN:typeof s=="boolean"?s?1:0:(0,t.toNumber)(s)}},14588:(Y,A,e)=>{"use strict";e.r(A),e.d(A,{moveItemImmutably:()=>n,sortValues:()=>r});var t=e(52622);function n(g,u,d){const i=[...g];return Array.prototype.splice.call(i,d,0,Array.prototype.splice.call(i,u,1)[0]),i}const o=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),s=(g,u)=>g-u;function r(g){return(u,d)=>{if(u===d)return 0;if(d==null||typeof d=="string"&&d.trim()==="")return-1;if(u==null||typeof u=="string"&&u?.trim()==="")return 1;let i=o.compare;return typeof u=="number"&&typeof d=="number"&&(i=s),g===t.xB.Descending?i(d,u):i(u,d)}}},11710:(Y,A,e)=>{"use strict";e.d(A,{b:()=>o,k:()=>n});var t=e(83077),n=(s=>(s.Add="+",s.Subtract="-",s.Divide="/",s.Multiply="*",s))(n||{});const o=new t.O(()=>[{id:"+",name:"Add",operation:(s,r)=>s+r,binaryOperationID:"+"},{id:"-",name:"Subtract",operation:(s,r)=>s-r,binaryOperationID:"-"},{id:"*",name:"Multiply",operation:(s,r)=>s*r,binaryOperationID:"*"},{id:"/",name:"Divide",operation:(s,r)=>s/r,binaryOperationID:"/"}])},72436:(Y,A,e)=>{"use strict";e.d(A,{F7:()=>l,Jh:()=>f,_O:()=>E,i8:()=>h});var t=e(2543),n=e.n(t),o=e(44809),s=e.n(o),r=e(37471),g=e(14236),u=e(28240),d=e(11261),i=e(83195),l=(D=>(D[D.full=0]="full",D[D.name=1]="name",D[D.none=2]="none",D))(l||{});function f(D,b){return new h(b).readCSV(D)}var c=(D=>(D[D.Starting=0]="Starting",D[D.InHeader=1]="InHeader",D[D.ReadingRows=2]="ReadingRows",D))(c||{});class h{constructor(b){this.chunk=(P,y)=>{for(let T=0;T<P.data.length;T++){const M=P.data[T];if(M.length<1)continue;const I=M[0];if(I){if(I.startsWith("#")){const x=I.indexOf("#",2);if(x>0){const S=I.slice(1,x),O=S==="name";if(O||{unit:"#"}.hasOwnProperty(S)){this.state===2&&(this.current=new r.k({fields:[]}),this.data.push(this.current));const L=I.slice(x+1);if(O){this.current.addFieldFor(void 0,L);for(let U=1;U<M.length;U++)this.current.addFieldFor(void 0,M[U])}else{const{fields:U}=this.current;for(let R=0;R<U.length;R++){U[R].config||(U[R].config={});const B=U[R].config;B[S]=R===0?L:M[R]}}this.state=1;continue}}else if(this.state===0){this.state=1;continue}continue}if(this.state===0){if((0,g.HW)(I)===d.PU.string){for(const S of M)this.current.addFieldFor(void 0,S);this.state=1;continue}this.state=1}}if(this.state,this.state=2,M.length>this.current.fields.length){const{fields:x}=this.current;for(let S=x.length;S<M.length;S++)this.current.addFieldFor(M[S]);this.callback&&this.callback.onHeader(this.current.fields)}this.current.appendRow(M),this.callback&&this.callback.onRow(M)}},b||(b={}),this.config=b.config||{},this.callback=b.callback,this.current=new r.k({fields:[]}),this.state=0,this.data=[]}readCSV(b){this.current=new r.k({fields:[]}),this.data=[this.current];const P={...this.config,dynamicTyping:!1,skipEmptyLines:!0,comments:!1,chunk:this.chunk};return s().parse(b,P),this.data}}function p(D,b){if(D==null)return"";const P=D.toString();return P.includes('"')?b.quoteChar+P.replace(/"/gi,'""')+b.quoteChar:P.includes(`
`)||b.delimiter&&P.includes(b.delimiter)?b.quoteChar+P+b.quoteChar:P}function m(D,b){return D.display?P=>{const y=D.display(P);return p((0,i.cN)(y),b)}:P=>p(P,b)}function a(D,b,P){const y=D==="name",T=D==="type";for(const M of b){const I=M.config;if(y||T||I&&I.hasOwnProperty(D)){let x="#"+D+"#";for(let S=0;S<b.length;S++){S>0&&(x=x+P.delimiter);let O=b[S].name;T?O=b[S].type:y||(O=b[S].config[D]),O&&(x=x+p(O,P))}return x+P.newline}}return""}function v(){const D=["x","y"];return D.toLocaleString?D.toLocaleString().charAt(1):","}function E(D,b){if(!D)return"";b=(0,t.defaults)(b,{delimiter:v(),newline:`\r
`,quoteChar:'"',encoding:"",headerStyle:1,useExcelHeader:!1});let P=b.useExcelHeader?`sep=${b.delimiter}${b.newline}`:"";for(let y=0;y<D.length;y++){const T=D[y],{fields:M}=T;if(M.length===0)continue;if(b.headerStyle===0)P=P+a("name",M,b)+a("type",M,b)+a("unit",M,b)+a("dateFormat",M,b);else if(b.headerStyle===1){for(let x=0;x<M.length;x++)x>0&&(P+=b.delimiter),P+=`"${(0,u.Ct)(M[x],T).replace(/"/g,'""')}"`;P+=b.newline}const I=M[0].values.length;if(I>0){const x=M.map(S=>m(S,b));for(let S=0;S<I;S++){for(let O=0;O<M.length;O++){O>0&&(P=P+b.delimiter);const C=M[O].values[S];C!==null&&(P=P+x[O](C))}S!==I-1&&(P=P+b.newline)}}y!==D.length-1&&(P=P+b.newline)}return P}},6709:(Y,A,e)=>{"use strict";e.d(A,{c:()=>o,u:()=>s});var t=e(71733),n=e(76885);const o={keepTime:"__url_time_range",timeRangeFrom:"__from",timeRangeTo:"__to",includeVars:"__all_variables",seriesName:"__series.name",fieldName:"__field.name",valueTime:"__value.time",valueNumeric:"__value.numeric",valueText:"__value.text",valueRaw:"__value.raw",valueCalc:"__value.calc"};function s(d){const{onClickFn:i,replaceVariables:l,link:f,scopedVars:c,range:h,field:p,internalLink:m}=d,a=g(f.internal?.query,c,l),v=g(f.internal?.panelsState,c,l),E=g(f.internal?.meta?.correlationData,c,l),D=f.title?f.title:m.datasourceName;return{title:l(D,c),href:r(m.datasourceUid,a,h,v),onClick:i?b=>{b.preventDefault&&b.preventDefault(),i({datasourceUid:m.datasourceUid,queries:[a],panelsState:v,correlationHelperData:E,range:h})}:void 0,target:f?.targetBlank?"_blank":"_self",origin:p}}function r(d,i,l,f){return t.I.assureBaseUrl(`/explore?left=${encodeURIComponent((0,n.Pp)({...l?.raw?{range:(0,n.sQ)(l.raw)}:{},datasource:d,queries:[i],panelsState:f}))}`)}function g(d,i,l){if(!d)return d;if(typeof d=="string")return l(d,i);const f=JSON.parse(JSON.stringify(d));return u(f,i,l)}function u(d,i,l){for(const f of Object.keys(d))typeof d[f]=="string"?d[f]=l(d[f],i):typeof d[f]=="object"&&d[f]!==null&&(d[f]=u(d[f],i,l));return d}},22391:(Y,A,e)=>{"use strict";e.d(A,{BD:()=>i,EX:()=>l,Iz:()=>r,PG:()=>u,QP:()=>a,fN:()=>s,lO:()=>p,mn:()=>d,p$:()=>o,pN:()=>h,wY:()=>f,wp:()=>m,yV:()=>c,zX:()=>g});var t=e(2543),n=e.n(t);function o(v){return{uid:v.uid,type:v.type}}function s(v){return typeof v=="object"&&typeof v?.uid=="string"}function r(v){if(s(v))return v.uid;if((0,t.isString)(v))return v}const g=(v,E)=>D=>{h(v,E,D.currentTarget.value)},u=(v,E)=>D=>{p(v,E,D.currentTarget.value)},d=(v,E)=>D=>{m(v,E,D.currentTarget.value)},i=(v,E)=>D=>{p(v,E,D.value)},l=(v,E)=>D=>{p(v,E,D.currentTarget.checked)},f=(v,E)=>D=>{m(v,E,D.value)},c=(v,E)=>D=>{a(v,E)};function h(v,E,D){const b=v.options;v.onOptionsChange({...b,[E]:D})}const p=(v,E,D)=>{const b=v.options;v.onOptionsChange({...b,jsonData:{...b.jsonData,[E]:D}})},m=(v,E,D)=>{const b=v.options;v.onOptionsChange({...b,secureJsonData:{...b.secureJsonData?b.secureJsonData:{},[E]:D}})},a=(v,E)=>{const D=v.options;v.onOptionsChange({...D,secureJsonData:{...D.secureJsonData?D.secureJsonData:{},[E]:""},secureJsonFields:{...D.secureJsonFields,[E]:!1}})}},95344:(Y,A,e)=>{"use strict";e.d(A,{l:()=>n});const t={},n=(o,s,r)=>{let g=`[Deprecation warning] ${o}: ${s} is deprecated`;r&&(g+=`. Use ${r} instead`);const u=Date.now(),d=t[g];(!d||u-d>1e4)&&(console.warn(g),t[g]=u)}},87885:(Y,A,e)=>{"use strict";e.d(A,{f:()=>t});var t=(n=>(n[n.Transformations=0]="Transformations",n[n.FieldConfig=1]="FieldConfig",n[n.FieldConfigOverrides=2]="FieldConfigOverrides",n))(t||{})},39306:(Y,A,e)=>{"use strict";e.d(A,{R:()=>n,r:()=>o});var t=e(39070);function n({xField:s,yField:r,nullValueMode:g}){const u=s.values,d=r.values,i=u.length;if(d.length!==i)throw new Error("Unexpected field length");const l=g===t.UW.Ignore,f=g===t.UW.AsZero,c=[];for(let h=0;h<i;h++){const p=u[h];let m=d[h];if(m===null){if(l)continue;f&&(m=0)}p!==null&&c.push([p,m])}return c}function o(s,r){if(!r.from||!r.to||!s||s.length===0)return[];const g=r.from.valueOf(),u=r.to.valueOf(),d=s[0][1];return[[g,d],[u,d]]}},94032:(Y,A,e)=>{"use strict";e.d(A,{kP:()=>c.k,F7:()=>r.F7,i8:()=>r.i8,cI:()=>b.c,fu:()=>P.f,bk:()=>a.bk,An:()=>I.An,uc:()=>p.u,pv:()=>a.pv,OR:()=>n.O,_G:()=>h._,to:()=>T.t,XC:()=>t,bP:()=>c.b,tj:()=>i,Eg:()=>x.E,bh:()=>I.bh,lt:()=>s.l,yO:()=>g.yO,s6:()=>g.s6,h6:()=>g.h6,p$:()=>o.p$,Iz:()=>o.Iz,RZ:()=>v.R,rG:()=>v.r,cs:()=>x.c,tY:()=>l,E6:()=>u.E,dO:()=>f,fN:()=>o.fN,RI:()=>d.R,Ig:()=>E.I,Yi:()=>y.Y,uS:()=>b.u,_p:()=>g._p,_8:()=>O._,wm:()=>d.w,PG:()=>o.PG,EX:()=>o.EX,BD:()=>o.BD,zX:()=>o.zX,yV:()=>o.yV,mn:()=>o.mn,wY:()=>o.wY,Xy:()=>g.Xy,Jh:()=>r.Jh,j_:()=>S.j,hB:()=>u.h,Pp:()=>D.Pp,_O:()=>r._O,zL:()=>m.z,sQ:()=>D.sQ,j7:()=>h.j,lO:()=>o.lO,pN:()=>o.pN,QP:()=>o.QP,wp:()=>o.wp,kM:()=>D.kM,kz:()=>M.k});var t=e(14588),n=e(83077),o=e(22391),s=e(95344),r=e(72436),g=e(8249),u=e(97706),d=e(92041);const i=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"],l=C=>{let L,U,R=Number.MAX_VALUE;for(let B=0;B<C.values.length;B++){const H=C.values[B];if(L!==void 0){const W=H-L;U===void 0&&(R=W),W<R&&(R=W)}L=H}return R},f=C=>{for(let L=0;L<C.values.length;L++){const U=C.values[L];if(U!=null){const R=U.toString();if(R.length===13&&R%1e3!==0)return!0}}return!1};var c=e(11710),h=e(27618),p=e(25352),m=e(50877),a=e(60264),v=e(39306),E=e(71733),D=e(76885),b=e(6709),P=e(87885),y=e(92341),T=e(28802),M=e(72495),I=e(62398),x=e(92053),S=e(43659),O=e(80147)},8249:(Y,A,e)=>{"use strict";e.d(A,{Xy:()=>n,_p:()=>r,h6:()=>g,s6:()=>s,yO:()=>o});const t=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function n(u){const d={};return u.replace(t,(i,l,f,c)=>(d[l]=c,"")),d}function o(u){return u.reduce((d,i)=>{if(!i)throw new Error("Need parsed labels to find common labels.");return Object.keys(i).forEach(l=>{(d[l]===void 0||d[l]!==i[l])&&delete d[l]}),Object.keys(d).forEach(l=>{i[l]===void 0&&delete d[l]}),d},{...u[0]})}function s(u,d){const i={...u};return Object.keys(d).forEach(l=>{delete i[l]}),i}function r(u,d){if(!u)return!0;for(const[i,l]of Object.entries(u))if(!d||d[i]!==l)return!1;return!0}function g(u,d="",i){if(!u||Object.keys(u).length===0)return d;const f=Object.keys(u).sort().map(c=>`${c}="${u[c]}"`).join(", ");return i?f:["{",f,"}"].join("")}},71733:(Y,A,e)=>{"use strict";e.d(A,{I:()=>f});var t=e(40672),n=e(76885);let o={appSubUrl:""},s,r;const g=c=>{try{return new URL(c)}catch{return}},u=c=>{const h=g(c);if(h&&h.origin!==window.location.origin)return c;const p=o.appSubUrl??"",m=p.endsWith("/")?1:0,a=c.startsWith("http");let v=p;return(!c.startsWith("/")||a)&&(v=`${window.location.origin}${p}`),c.length>0&&(c.indexOf(v+"/")===0||c===v)?c.slice(v.length-m):c},d=c=>c.startsWith("/")?`${o.appSubUrl}${u(c)}`:c,f={initialize:c=>{o=c.config,s=c.getTimeRangeForUrl,r=c.getVariablesUrlParams},stripBaseFromUrl:u,assureBaseUrl:d,updateSearchParams:(c,h)=>{const p=new URLSearchParams(h);try{const m=new URL(c);return p.forEach((a,v)=>m.searchParams.set(v,a)),m.href}catch{const m=new URLSearchParams(c);return p.forEach((a,v)=>{m.set(v,a)}),"?"+m.toString()}},getTimeRangeUrlParams:()=>s?n.kM.toUrlParams(s()):null,getVariablesUrlParams:c=>{if(!r)return null;const h=r(c);return n.kM.toUrlParams(h)},getUrlForPartial:(c,h)=>{const p=n.kM.parseKeyValue(c.search.startsWith("?")?c.search.substring(1):c.search);for(const m of Object.keys(h))h[m]===null||h[m]===void 0?delete p[m]:p[m]=h[m];return d(n.kM.renderUrl(c.pathname,p))},processUrl:c=>o.disableSanitizeHtml?c:t.sQ.sanitizeUrl(c)}},92341:(Y,A,e)=>{"use strict";e.d(A,{Y:()=>t});function t(n){return new Proxy(n,{apply(o,s,r){return(typeof Reflect>"u"||!Reflect.construct)&&alert("Browser is too old"),Reflect.construct(o,r,s.constructor)}})}},80147:(Y,A,e)=>{"use strict";e.d(A,{_:()=>t});function t(n,o){return o.id===n?!0:o.aliasIDs?o.aliasIDs.includes(n):!1}},25352:(Y,A,e)=>{"use strict";e.d(A,{u:()=>t});var t=(n=>(n.id="id",n.title="title",n.subTitle="subtitle",n.mainStat="mainstat",n.secondaryStat="secondarystat",n.arc="arc__",n.icon="icon",n.color="color",n.source="source",n.target="target",n.detail="detail__",n.nodeRadius="noderadius",n.thickness="thickness",n.highlighted="highlighted",n))(t||{})},97706:(Y,A,e)=>{"use strict";e.d(A,{E:()=>n,h:()=>t});function t(o,s=0){if(Number.isInteger(o))return o;let r=10**s,g=o*r*(1+Number.EPSILON);return Math.round(g)/r}function n(o){return((""+o).split(".")[1]||"").length}},92041:(Y,A,e)=>{"use strict";e.d(A,{R:()=>n,w:()=>t});const t=o=>Object.keys(o).reduce((s,r)=>(o[r]!==void 0&&(s[r]=o[r]),s),{}),n=o=>typeof o=="object"&&o!==null&&Object.keys(o).length===0},50877:(Y,A,e)=>{"use strict";e.d(A,{z:()=>t});const t=n=>({label:n,value:n})},27618:(Y,A,e)=>{"use strict";e.d(A,{_:()=>n,j:()=>o});var t=e(83077),n=(s=>(s.Abs="abs",s.Exp="exp",s.Ln="ln",s.Floor="floor",s.Ceil="ceil",s))(n||{});const o=new t.O(()=>[{id:"abs",name:"Absolute value",operation:s=>Math.abs(s),unaryOperationID:"abs"},{id:"exp",name:"Natural exponent",operation:s=>Math.exp(s),unaryOperationID:"exp"},{id:"ln",name:"Natural logarithm",operation:s=>Math.log(s),unaryOperationID:"ln"},{id:"floor",name:"Floor",operation:s=>Math.floor(s),unaryOperationID:"floor"},{id:"ceil",name:"Ceiling",operation:s=>Math.ceil(s),unaryOperationID:"ceil"}])},76885:(Y,A,e)=>{"use strict";e.d(A,{Pp:()=>f,kM:()=>l,sQ:()=>c});var t=e(47232);/**
 * @preserve jquery-param (c) 2015 KNOWLEDGECODE | MIT
 */function n(h,p){return p&&Object.keys(p).length>0&&(h+="?"+s(p)),h}function o(h,p){return encodeURIComponent(h).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,p?"%20":"+").replace(/[!'()*]/g,function(m){return"%"+m.charCodeAt(0).toString(16).toUpperCase()})}function s(h,p=!0){const m=[],a=/\[\]$/,v=p?(P,y)=>o(P,y):(P,y)=>encodeURIComponent(P),E=P=>Object.prototype.toString.call(P)==="[object Array]",D=(P,y)=>{if(y=typeof y=="function"?y():y===null||y===void 0?"":y,typeof y!="boolean")m[m.length]=v(P,!0)+"="+v(y,!0);else{const T=y?"":"="+v("false",!0);m[m.length]=v(P,!0)+T}},b=(P,y)=>{let T,M,I;if(P)if(E(y))for(T=0,M=y.length;T<M;T++)a.test(P)?D(P,y[T]):b(P,y[T]);else if(y&&String(y)==="[object Object]")for(I in y)b(P+"["+I+"]",y[I]);else D(P,y);else if(E(y))for(T=0,M=y.length;T<M;T++)D(y[T].name,y[T].value);else for(I in y)b(I,y[I]);return m};return b("",h).join("&")}function r(h){return s(h,!1)}function g(h,p){if(p!=null&&p!==""){const m=h.indexOf("?");m!==-1?h.length-m>1&&(h+="&"):h+="?",h+=p}return h}function u(){const p=window.location.search.substring(1).split("&"),m={};for(const a of p){const v=a.split("=");if(v.length>1){const E=decodeURIComponent(v[0]),D=decodeURIComponent(v[1]);E in m?m[E]=[...m[E],D]:m[E]=[D]}else if(v.length===1){const E=decodeURIComponent(v[0]);m[E]=!0}}return m}function d(h){const p={},m=(h||"").split("&");for(let a of m){let v,E,D;if(a&&(E=a=a.replace(/\+/g,"%20"),v=a.indexOf("="),v!==-1&&(E=a.substring(0,v),D=a.substring(v+1)),E=i(E),E!==void 0)){D=D!==void 0?i(D):!0;let b;typeof D=="string"&&D!==""?b=D==="true"||D==="false"?D==="true":D:b=D,p.hasOwnProperty(E)?Array.isArray(p[E])?p[E].push(D):p[E]=[p[E],isNaN(b)?D:b]:p[E]=isNaN(b)?D:b}}return p}function i(h){try{return decodeURIComponent(h)}catch{return}}const l={renderUrl:n,toUrlParams:s,appendQueryToUrl:g,getUrlSearchParams:u,parseKeyValue:d,serializeParams:r};function f(h,p){return p!==void 0&&console.warn("`compact` parameter is deprecated and will be removed in a future release"),JSON.stringify(h)}const c=h=>{let p=h.from;(0,t.Ar)(p)&&(p=p.valueOf().toString());let m=h.to;return(0,t.Ar)(m)&&(m=m.valueOf().toString()),{from:p,to:m}}},62398:(Y,A,e)=>{"use strict";e.d(A,{An:()=>g,Zz:()=>s,bh:()=>u});var t=e(47737),n=e(54479),o=e(25019);function s(i,l){for(const f of i)switch(f.type){case o.d.ValueToText:if(l==null)continue;const c=f.options[l];if(c)return c;break;case o.d.RangeToText:if(l==null)continue;const h=parseFloat(l);if(isNaN(h)||!isNaN(f.options.from)&&h<f.options.from||!isNaN(f.options.to)&&h>f.options.to)continue;return f.options.result;case o.d.RegexToText:if(l==null||typeof l!="string")continue;const a=(0,n.dO)(f.options.pattern);if(l.match(a)){const v={...f.options.result};return v.text!=null&&(v.text=l.replace(a,f.options.result.text||"")),v}case o.d.SpecialValue:switch(f.options.match){case o.W.Null:{if(l==null)return f.options.result;break}case o.W.NaN:{if(typeof l=="number"&&isNaN(l))return f.options.result;break}case o.W.NullAndNaN:{if(typeof l=="number"&&isNaN(l)||l==null)return f.options.result;break}case o.W.True:{if(l===!0||l==="true")return f.options.result;break}case o.W.False:{if(l===!1||l==="false")return f.options.result;break}case o.W.Empty:{if(l==="")return f.options.result;break}}}return null}function r(i){return(typeof i=="number"||typeof i=="string"&&i.trim()!=="")&&!isNaN(i)}var g=(i=>(i[i.ValueToText=1]="ValueToText",i[i.RangeToText=2]="RangeToText",i))(g||{});function u(i,l){const f=[];let c=i.mappingType;if(i.mappingType||(i.valueMaps&&i.valueMaps.length?c=1:i.rangeMaps&&i.rangeMaps.length&&(c=2)),c===1)for(let h=0;h<i.valueMaps.length;h++){const p=i.valueMaps[h];f.push(d({...p,id:h,type:o.d.ValueToText},i.fieldConfig?.defaults?.thresholds||l))}else if(c===2)for(let h=0;h<i.rangeMaps.length;h++){const p=i.rangeMaps[h];f.push(d({...p,id:h,type:o.d.RangeToText},i.fieldConfig?.defaults?.thresholds||l))}return f}function d(i,l){const f={type:o.d.ValueToText,options:{}},c=[];let h;const p=parseFloat(i.text);if(l&&!isNaN(p)){const m=(0,t.yQ)(p,l.steps);m&&m.color&&(h=m.color)}switch(i.type){case 1:case o.d.ValueToText:i.value!=null&&(i.value==="null"?c.push({type:o.d.SpecialValue,options:{match:o.W.Null,result:{text:i.text,color:h}}}):f.options[String(i.value)]={text:i.text,color:h});break;case 2:case o.d.RangeToText:i.from==="null"||i.to==="null"?c.push({type:o.d.SpecialValue,options:{match:o.W.Null,result:{text:i.text,color:h}}}):c.push({type:o.d.RangeToText,options:{from:+i.from,to:+i.to,result:{text:i.text,color:h}}});break}return Object.keys(f.options).length>0&&c.unshift(f),c[0]}},92053:(Y,A,e)=>{"use strict";e.d(A,{E:()=>n,c:()=>o});const t="__searchFilter",n=s=>s&&typeof s=="string"?s.indexOf(t)!==-1:!1,o=s=>{const{query:r,wildcardChar:g}=s;if(!n(r))return{};let{options:u}=s;return u=u||{searchFilter:""},{__searchFilter:{value:u.searchFilter?`${u.searchFilter}${g}`:`${g}`,text:""}}}},72495:(Y,A,e)=>{"use strict";e.d(A,{k:()=>r});var t=e(44240),n=e(39697),o=e(65961),s=e(67791);function r({whileLoading:g,source:u}){return(0,t.h)((0,n.O)(200).pipe((0,o.u)(g),(0,s.Q)(u)),u)}},56496:(Y,A,e)=>{"use strict";e.d(A,{G8:()=>t.G8,Hg:()=>t.Hg,Ke:()=>t.Ke,Mg:()=>t.Mg,Qc:()=>t.Qc,UR:()=>t.UR,cH:()=>t.cH,cN:()=>t.cN,gZ:()=>t.gZ,j9:()=>t.j9,j_:()=>t.j_,uH:()=>t.uH,yP:()=>t.yP});var t=e(83195)},26517:(Y,A,e)=>{"use strict";e.d(A,{Gl:()=>n,cL:()=>r,rT:()=>d,yW:()=>u});var t=e(83195);function n(i,l){const f=["","K","M","B","T"],c=(0,t.yP)(1e3,f);return(h,p,m)=>{if(h==null)return{text:""};const a=h<0;a&&(h=Math.abs(h));const v=c(h,p,m);return l?v.suffix=v.suffix!==void 0?`${v.suffix}${i}`:void 0:v.prefix=i,a&&(v.prefix=`-${v.prefix?.length?v.prefix:""}`),v}}const o=["f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],s=o.indexOf("");function r(i){const l=o.findIndex(f=>f.normalize("NFKD")===i.normalize("NFKD"));return l<0?0:l-s}const g=["","Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"];function u(i,l=0){const f=g.map(c=>" "+c+i);return(0,t.yP)(1024,f,l)}function d(i,l=0){const f=o.map(c=>" "+c+i);return(0,t.yP)(1e3,f,s+l)}},83195:(Y,A,e)=>{"use strict";e.d(A,{Qc:()=>de,cN:()=>j,j_:()=>Me,Ke:()=>Re,uH:()=>De,j9:()=>re,Hg:()=>ve,yP:()=>ge,UR:()=>ye,cH:()=>pe,Mg:()=>ae,gZ:()=>ne,G8:()=>te});var t=e(2543);function n(me,he){return me===null?{text:""}:{text:ae(me,he),suffix:"%"}}function o(me,he){return me===null?{text:""}:{text:ae(100*me,he),suffix:"%"}}function s(me,he){if(me==null)return{text:""};const Te=r(me,he);return Te.text.substring(0,1)==="-"?Te.text="-0x"+Te.text.substring(1):Te.text="0x"+Te.text,Te}function r(me,he){return me==null?{text:""}:{text:parseFloat(ae(me,he)).toString(16).toUpperCase()}}function g(me,he){return me==null?{text:""}:{text:me.toExponential(he??void 0)}}var u=e(72724),d=e(42994),i=e(47232),l=(me=>(me.Year="year",me.Month="month",me.Week="week",me.Day="day",me.Hour="hour",me.Minute="minute",me.Second="second",me.Millisecond="millisecond",me))(l||{});const f=["year","month","week","day","hour","minute","second","millisecond"],c={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1,millisecond:.001};function h(me,he){return me===null?{text:""}:Math.abs(me)<1e3?{text:ae(me,he),suffix:" ns"}:Math.abs(me)<1e6?ne(me/1e3,he," \xB5s"):Math.abs(me)<1e9?ne(me/1e6,he," ms"):Math.abs(me)<6e10?ne(me/1e9,he," s"):Math.abs(me)<36e11?ne(me/6e10,he," min"):Math.abs(me)<864e11?ne(me/36e11,he," hour"):ne(me/864e11,he," day")}function p(me,he){return me===null?{text:""}:Math.abs(me)<1e3?{text:ae(me,he),suffix:" \xB5s"}:Math.abs(me)<1e6?ne(me/1e3,he," ms"):ne(me/1e6,he," s")}function m(me,he,Te){return me===null?{text:""}:Math.abs(me)<1e3?{text:ae(me,he),suffix:" ms"}:Math.abs(me)<6e4?ne(me/1e3,he," s"):Math.abs(me)<36e5?ne(me/6e4,he," min"):Math.abs(me)<864e5?ne(me/36e5,he," hour"):Math.abs(me)<31536e6?ne(me/864e5,he," day"):ne(me/31536e6,he," year")}function a(me,he){if(me!=null&&he!==null&&he!==void 0)return me-he}function v(me,he){return me===null?{text:""}:me===0?{text:"0",suffix:" s"}:Math.abs(me)<1e-6?ne(me*1e9,he," ns"):Math.abs(me)<.001?ne(me*1e6,he," \xB5s"):Math.abs(me)<1?ne(me*1e3,he," ms"):Math.abs(me)<60?{text:ae(me,he),suffix:" s"}:Math.abs(me)<3600?ne(me/60,he," min"):Math.abs(me)<86400?ne(me/3600,he," hour"):Math.abs(me)<604800?ne(me/86400,he," day"):Math.abs(me)<31536e3?ne(me/604800,he," week"):ne(me/31556900,he," year")}function E(me,he){return me===null?{text:""}:Math.abs(me)<60?{text:ae(me,he),suffix:" min"}:Math.abs(me)<1440?ne(me/60,he," hour"):Math.abs(me)<10080?ne(me/1440,he," day"):Math.abs(me)<604800?ne(me/10080,he," week"):ne(me/525948,he," year")}function D(me,he){return me===null?{text:""}:Math.abs(me)<24?{text:ae(me,he),suffix:" hour"}:Math.abs(me)<168?ne(me/24,he," day"):Math.abs(me)<8760?ne(me/168,he," week"):ne(me/8760,he," year")}function b(me,he){return me===null?{text:""}:Math.abs(me)<7?{text:ae(me,he),suffix:" day"}:Math.abs(me)<365?ne(me/7,he," week"):ne(me/365,he," year")}function P(me,he,Te){if(me===null)return{text:""};if(me===0)return{text:"0",suffix:" "+Te+"s"};if(me<0){const Ze=P(-me,he,Te);return Ze.suffix||(Ze.suffix=""),Ze.suffix+=" ago",Ze}me*=c[Te]*1e3;const Be=[];let we=!1,Ne=0;he!=null&&(Ne=he);for(let Ze=0;Ze<f.length&&Ne>=0;Ze++){const st=c[f[Ze]]*1e3,Qe=me/st;if(Qe>=1||we){we=!0;const ke=Math.floor(Qe),je=f[Ze]+(ke!==1?"s":"");Be.push(ke+" "+je),me=me%st,Ne--}}return{text:Be.join(", ")}}function y(me,he){if(me===null)return{text:""};if(me<1e3)return{text:(0,i.yT)(me).format("SSS\\m\\s")};if(me<6e4){let Ne="ss\\s:SSS\\m\\s";return he===0&&(Ne="ss\\s"),{text:(0,i.yT)(me).format(Ne)}}if(me<36e5){let Ne="mm\\m:ss\\s:SSS\\m\\s";return he===0?Ne="mm\\m":he===1&&(Ne="mm\\m:ss\\s"),{text:(0,i.yT)(me).format(Ne)}}let Te="mm\\m:ss\\s:SSS\\m\\s";const Be=`${("0"+Math.floor((0,i.Ah)(me,"milliseconds").asHours())).slice(-2)}h`;return he===0?Te="":he===1?Te="mm\\m":he===2&&(Te="mm\\m:ss\\s"),{text:Te?`${Be}:${(0,i.yT)(me).format(Te)}`:Be}}function T(me,he){return P(me,he,"millisecond")}function M(me,he){return P(me,he,"second")}function I(me){if(me<0){const Ne=I(-me);return Ne.suffix||(Ne.suffix=""),Ne.suffix+=" ago",Ne}const he=[],Te=Math.floor(me/3600),Be=Math.floor(me%3600/60),we=Math.floor(me%3600%60);return Te>9?he.push(""+Te):he.push("0"+Te),Be>9?he.push(""+Be):he.push("0"+Be),we>9?he.push(""+we):he.push("0"+we),{text:he.join(":")}}function x(me){if(me<0){const we=x(-me);return we.suffix||(we.suffix=""),we.suffix+=" ago",we}let he="";const Te=Math.floor(me/(24*3600));Te>0&&(he=Te+" d ");const Be=I(me-Te*24*3600);return{text:he+Be.text}}function S(me,he){return v(me/100,he)}function O(me,he){return y(me,he)}function C(me,he){return y(me*1e3,he)}function L(me,he){return(Te,Be,we,Ne)=>he&&(0,i.KQ)().isSame(Te,"day")?{text:(0,u.LE)(Te,{format:he,timeZone:Ne})}:{text:(0,u.LE)(Te,{format:me,timeZone:Ne})}}const U=L("YYYY-MM-DD HH:mm:ss"),R=L("YYYY-MM-DD HH:mm:ss","HH:mm:ss"),B=L("MM/DD/YYYY h:mm:ss a"),H=L("MM/DD/YYYY h:mm:ss a","h:mm:ss a");function W(){return L((0,d.Od)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function N(){return L((0,d.Od)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),(0,d.Od)({hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function V(me,he,Te,Be,we){return{text:(0,u.LE)(me,{format:we?d.WC.fullDateMS:d.WC.fullDate,timeZone:Be})}}function G(me,he,Te,Be){return{text:(0,u.fq)(me,{timeZone:Be})}}var _=e(26517);const K=()=>[{name:"Misc",formats:[{name:"Number",id:"none",fn:te("")},{name:"String",id:"string",fn:pe},{name:"short",id:"short",fn:ge(1e3,[""," K"," Mil"," Bil"," Tri"," Quadr"," Quint"," Sext"," Sept"])},{name:"Percent (0-100)",id:"percent",fn:n},{name:"Percent (0.0-1.0)",id:"percentunit",fn:o},{name:"Humidity (%H)",id:"humidity",fn:te("%H")},{name:"Decibel",id:"dB",fn:te("dB")},{name:"Candela (cd)",id:"candela",fn:(0,_.rT)("cd")},{name:"Hexadecimal (0x)",id:"hex0x",fn:s},{name:"Hexadecimal",id:"hex",fn:r},{name:"Scientific notation",id:"sci",fn:g},{name:"Locale format",id:"locale",fn:ve},{name:"Pixels",id:"pixel",fn:te("px")}]},{name:"Acceleration",formats:[{name:"Meters/sec\xB2",id:"accMS2",fn:te("m/sec\xB2")},{name:"Feet/sec\xB2",id:"accFS2",fn:te("f/sec\xB2")},{name:"G unit",id:"accG",fn:te("g")}]},{name:"Angle",formats:[{name:"Degrees (\xB0)",id:"degree",fn:te("\xB0")},{name:"Radians",id:"radian",fn:te("rad")},{name:"Gradian",id:"grad",fn:te("grad")},{name:"Arc Minutes",id:"arcmin",fn:te("arcmin")},{name:"Arc Seconds",id:"arcsec",fn:te("arcsec")}]},{name:"Area",formats:[{name:"Square Meters (m\xB2)",id:"areaM2",fn:te("m\xB2")},{name:"Square Feet (ft\xB2)",id:"areaF2",fn:te("ft\xB2")},{name:"Square Miles (mi\xB2)",id:"areaMI2",fn:te("mi\xB2")},{name:"Acres (ac)",id:"acres",fn:te("ac")},{name:"Hectares (ha)",id:"hectares",fn:te("ha")}]},{name:"Computation",formats:[{name:"FLOP/s",id:"flops",fn:(0,_.rT)("FLOPS")},{name:"MFLOP/s",id:"mflops",fn:(0,_.rT)("FLOPS",2)},{name:"GFLOP/s",id:"gflops",fn:(0,_.rT)("FLOPS",3)},{name:"TFLOP/s",id:"tflops",fn:(0,_.rT)("FLOPS",4)},{name:"PFLOP/s",id:"pflops",fn:(0,_.rT)("FLOPS",5)},{name:"EFLOP/s",id:"eflops",fn:(0,_.rT)("FLOPS",6)},{name:"ZFLOP/s",id:"zflops",fn:(0,_.rT)("FLOPS",7)},{name:"YFLOP/s",id:"yflops",fn:(0,_.rT)("FLOPS",8)}]},{name:"Concentration",formats:[{name:"parts-per-million (ppm)",id:"ppm",fn:te("ppm")},{name:"parts-per-billion (ppb)",id:"conppb",fn:te("ppb")},{name:"nanogram per cubic meter (ng/m\xB3)",id:"conngm3",fn:te("ng/m\xB3")},{name:"nanogram per normal cubic meter (ng/Nm\xB3)",id:"conngNm3",fn:te("ng/Nm\xB3")},{name:"microgram per cubic meter (\u03BCg/m\xB3)",id:"con\u03BCgm3",fn:te("\u03BCg/m\xB3")},{name:"microgram per normal cubic meter (\u03BCg/Nm\xB3)",id:"con\u03BCgNm3",fn:te("\u03BCg/Nm\xB3")},{name:"milligram per cubic meter (mg/m\xB3)",id:"conmgm3",fn:te("mg/m\xB3")},{name:"milligram per normal cubic meter (mg/Nm\xB3)",id:"conmgNm3",fn:te("mg/Nm\xB3")},{name:"gram per cubic meter (g/m\xB3)",id:"congm3",fn:te("g/m\xB3")},{name:"gram per normal cubic meter (g/Nm\xB3)",id:"congNm3",fn:te("g/Nm\xB3")},{name:"milligrams per decilitre (mg/dL)",id:"conmgdL",fn:te("mg/dL")},{name:"millimoles per litre (mmol/L)",id:"conmmolL",fn:te("mmol/L")}]},{name:"Currency",formats:[{name:"Dollars ($)",id:"currencyUSD",fn:(0,_.Gl)("$")},{name:"Pounds (\xA3)",id:"currencyGBP",fn:(0,_.Gl)("\xA3")},{name:"Euro (\u20AC)",id:"currencyEUR",fn:(0,_.Gl)("\u20AC")},{name:"Yen (\xA5)",id:"currencyJPY",fn:(0,_.Gl)("\xA5")},{name:"Rubles (\u20BD)",id:"currencyRUB",fn:(0,_.Gl)("\u20BD")},{name:"Hryvnias (\u20B4)",id:"currencyUAH",fn:(0,_.Gl)("\u20B4")},{name:"Real (R$)",id:"currencyBRL",fn:(0,_.Gl)("R$")},{name:"Danish Krone (kr)",id:"currencyDKK",fn:(0,_.Gl)("kr",!0)},{name:"Icelandic Kr\xF3na (kr)",id:"currencyISK",fn:(0,_.Gl)("kr",!0)},{name:"Norwegian Krone (kr)",id:"currencyNOK",fn:(0,_.Gl)("kr",!0)},{name:"Swedish Krona (kr)",id:"currencySEK",fn:(0,_.Gl)("kr",!0)},{name:"Czech koruna (czk)",id:"currencyCZK",fn:(0,_.Gl)("czk")},{name:"Swiss franc (CHF)",id:"currencyCHF",fn:(0,_.Gl)("CHF")},{name:"Polish Z\u0142oty (PLN)",id:"currencyPLN",fn:(0,_.Gl)("PLN")},{name:"Bitcoin (\u0E3F)",id:"currencyBTC",fn:(0,_.Gl)("\u0E3F")},{name:"Milli Bitcoin (\u0E3F)",id:"currencymBTC",fn:(0,_.Gl)("mBTC")},{name:"Micro Bitcoin (\u0E3F)",id:"currency\u03BCBTC",fn:(0,_.Gl)("\u03BCBTC")},{name:"South African Rand (R)",id:"currencyZAR",fn:(0,_.Gl)("R")},{name:"Indian Rupee (\u20B9)",id:"currencyINR",fn:(0,_.Gl)("\u20B9")},{name:"South Korean Won (\u20A9)",id:"currencyKRW",fn:(0,_.Gl)("\u20A9")},{name:"Indonesian Rupiah (Rp)",id:"currencyIDR",fn:(0,_.Gl)("Rp")},{name:"Philippine Peso (PHP)",id:"currencyPHP",fn:(0,_.Gl)("PHP")},{name:"Vietnamese Dong (VND)",id:"currencyVND",fn:(0,_.Gl)("\u0111",!0)},{name:"Turkish Lira (\u20BA)",id:"currencyTRY",fn:(0,_.Gl)("\u20BA",!0)},{name:"Malaysian Ringgit (RM)",id:"currencyMYR",fn:(0,_.Gl)("RM")},{name:"CFP franc (XPF)",id:"currencyXPF",fn:(0,_.Gl)("XPF")},{name:"Bulgarian Lev (BGN)",id:"currencyBGN",fn:(0,_.Gl)("BGN")},{name:"Guaran\xED (\u20B2)",id:"currencyPYG",fn:(0,_.Gl)("\u20B2")}]},{name:"Data",formats:[{name:"bytes(IEC)",id:"bytes",fn:(0,_.yW)("B")},{name:"bytes(SI)",id:"decbytes",fn:(0,_.rT)("B")},{name:"bits(IEC)",id:"bits",fn:(0,_.yW)("b")},{name:"bits(SI)",id:"decbits",fn:(0,_.rT)("b")},{name:"kibibytes",id:"kbytes",fn:(0,_.yW)("B",1)},{name:"kilobytes",id:"deckbytes",fn:(0,_.rT)("B",1)},{name:"mebibytes",id:"mbytes",fn:(0,_.yW)("B",2)},{name:"megabytes",id:"decmbytes",fn:(0,_.rT)("B",2)},{name:"gibibytes",id:"gbytes",fn:(0,_.yW)("B",3)},{name:"gigabytes",id:"decgbytes",fn:(0,_.rT)("B",3)},{name:"tebibytes",id:"tbytes",fn:(0,_.yW)("B",4)},{name:"terabytes",id:"dectbytes",fn:(0,_.rT)("B",4)},{name:"pebibytes",id:"pbytes",fn:(0,_.yW)("B",5)},{name:"petabytes",id:"decpbytes",fn:(0,_.rT)("B",5)}]},{name:"Data rate",formats:[{name:"packets/sec",id:"pps",fn:(0,_.rT)("p/s")},{name:"bytes/sec(IEC)",id:"binBps",fn:(0,_.yW)("B/s")},{name:"bytes/sec(SI)",id:"Bps",fn:(0,_.rT)("B/s")},{name:"bits/sec(IEC)",id:"binbps",fn:(0,_.yW)("b/s")},{name:"bits/sec(SI)",id:"bps",fn:(0,_.rT)("b/s")},{name:"kibibytes/sec",id:"KiBs",fn:(0,_.yW)("B/s",1)},{name:"kibibits/sec",id:"Kibits",fn:(0,_.yW)("b/s",1)},{name:"kilobytes/sec",id:"KBs",fn:(0,_.rT)("B/s",1)},{name:"kilobits/sec",id:"Kbits",fn:(0,_.rT)("b/s",1)},{name:"mebibytes/sec",id:"MiBs",fn:(0,_.yW)("B/s",2)},{name:"mebibits/sec",id:"Mibits",fn:(0,_.yW)("b/s",2)},{name:"megabytes/sec",id:"MBs",fn:(0,_.rT)("B/s",2)},{name:"megabits/sec",id:"Mbits",fn:(0,_.rT)("b/s",2)},{name:"gibibytes/sec",id:"GiBs",fn:(0,_.yW)("B/s",3)},{name:"gibibits/sec",id:"Gibits",fn:(0,_.yW)("b/s",3)},{name:"gigabytes/sec",id:"GBs",fn:(0,_.rT)("B/s",3)},{name:"gigabits/sec",id:"Gbits",fn:(0,_.rT)("b/s",3)},{name:"tebibytes/sec",id:"TiBs",fn:(0,_.yW)("B/s",4)},{name:"tebibits/sec",id:"Tibits",fn:(0,_.yW)("b/s",4)},{name:"terabytes/sec",id:"TBs",fn:(0,_.rT)("B/s",4)},{name:"terabits/sec",id:"Tbits",fn:(0,_.rT)("b/s",4)},{name:"pebibytes/sec",id:"PiBs",fn:(0,_.yW)("B/s",5)},{name:"pebibits/sec",id:"Pibits",fn:(0,_.yW)("b/s",5)},{name:"petabytes/sec",id:"PBs",fn:(0,_.rT)("B/s",5)},{name:"petabits/sec",id:"Pbits",fn:(0,_.rT)("b/s",5)}]},{name:"Date & time",formats:[{name:"Datetime ISO",id:"dateTimeAsIso",fn:U},{name:"Datetime ISO (No date if today)",id:"dateTimeAsIsoNoDateIfToday",fn:R},{name:"Datetime US",id:"dateTimeAsUS",fn:B},{name:"Datetime US (No date if today)",id:"dateTimeAsUSNoDateIfToday",fn:H},{name:"Datetime local",id:"dateTimeAsLocal",fn:W()},{name:"Datetime local (No date if today)",id:"dateTimeAsLocalNoDateIfToday",fn:N()},{name:"Datetime default",id:"dateTimeAsSystem",fn:V},{name:"From Now",id:"dateTimeFromNow",fn:G}]},{name:"Energy",formats:[{name:"Watt (W)",id:"watt",fn:(0,_.rT)("W")},{name:"Kilowatt (kW)",id:"kwatt",fn:(0,_.rT)("W",1)},{name:"Megawatt (MW)",id:"megwatt",fn:(0,_.rT)("W",2)},{name:"Gigawatt (GW)",id:"gwatt",fn:(0,_.rT)("W",3)},{name:"Milliwatt (mW)",id:"mwatt",fn:(0,_.rT)("W",-1)},{name:"Watt per square meter (W/m\xB2)",id:"Wm2",fn:te("W/m\xB2")},{name:"Volt-Ampere (VA)",id:"voltamp",fn:(0,_.rT)("VA")},{name:"Kilovolt-Ampere (kVA)",id:"kvoltamp",fn:(0,_.rT)("VA",1)},{name:"Volt-Ampere reactive (VAr)",id:"voltampreact",fn:(0,_.rT)("VAr")},{name:"Kilovolt-Ampere reactive (kVAr)",id:"kvoltampreact",fn:(0,_.rT)("VAr",1)},{name:"Watt-hour (Wh)",id:"watth",fn:(0,_.rT)("Wh")},{name:"Watt-hour per Kilogram (Wh/kg)",id:"watthperkg",fn:(0,_.rT)("Wh/kg")},{name:"Kilowatt-hour (kWh)",id:"kwatth",fn:(0,_.rT)("Wh",1)},{name:"Kilowatt-min (kWm)",id:"kwattm",fn:(0,_.rT)("W-Min",1)},{name:"Megawatt-hour (MWh)",id:"mwatth",fn:(0,_.rT)("Wh",2)},{name:"Ampere-hour (Ah)",id:"amph",fn:(0,_.rT)("Ah")},{name:"Kiloampere-hour (kAh)",id:"kamph",fn:(0,_.rT)("Ah",1)},{name:"Milliampere-hour (mAh)",id:"mamph",fn:(0,_.rT)("Ah",-1)},{name:"Joule (J)",id:"joule",fn:(0,_.rT)("J")},{name:"Electron volt (eV)",id:"ev",fn:(0,_.rT)("eV")},{name:"Ampere (A)",id:"amp",fn:(0,_.rT)("A")},{name:"Kiloampere (kA)",id:"kamp",fn:(0,_.rT)("A",1)},{name:"Milliampere (mA)",id:"mamp",fn:(0,_.rT)("A",-1)},{name:"Volt (V)",id:"volt",fn:(0,_.rT)("V")},{name:"Kilovolt (kV)",id:"kvolt",fn:(0,_.rT)("V",1)},{name:"Millivolt (mV)",id:"mvolt",fn:(0,_.rT)("V",-1)},{name:"Decibel-milliwatt (dBm)",id:"dBm",fn:(0,_.rT)("dBm")},{name:"Milliohm (m\u03A9)",id:"mohm",fn:(0,_.rT)("\u03A9",-1)},{name:"Ohm (\u03A9)",id:"ohm",fn:(0,_.rT)("\u03A9")},{name:"Kiloohm (k\u03A9)",id:"kohm",fn:(0,_.rT)("\u03A9",1)},{name:"Megaohm (M\u03A9)",id:"Mohm",fn:(0,_.rT)("\u03A9",2)},{name:"Farad (F)",id:"farad",fn:(0,_.rT)("F")},{name:"Microfarad (\xB5F)",id:"\xB5farad",fn:(0,_.rT)("F",-2)},{name:"Nanofarad (nF)",id:"nfarad",fn:(0,_.rT)("F",-3)},{name:"Picofarad (pF)",id:"pfarad",fn:(0,_.rT)("F",-4)},{name:"Femtofarad (fF)",id:"ffarad",fn:(0,_.rT)("F",-5)},{name:"Henry (H)",id:"henry",fn:(0,_.rT)("H")},{name:"Millihenry (mH)",id:"mhenry",fn:(0,_.rT)("H",-1)},{name:"Microhenry (\xB5H)",id:"\xB5henry",fn:(0,_.rT)("H",-2)},{name:"Lumens (Lm)",id:"lumens",fn:(0,_.rT)("Lm")}]},{name:"Flow",formats:[{name:"Gallons/min (gpm)",id:"flowgpm",fn:te("gpm")},{name:"Cubic meters/sec (cms)",id:"flowcms",fn:te("cms")},{name:"Cubic feet/sec (cfs)",id:"flowcfs",fn:te("cfs")},{name:"Cubic feet/min (cfm)",id:"flowcfm",fn:te("cfm")},{name:"Litre/hour",id:"litreh",fn:te("L/h")},{name:"Litre/min (L/min)",id:"flowlpm",fn:te("L/min")},{name:"milliLitre/min (mL/min)",id:"flowmlpm",fn:te("mL/min")},{name:"Lux (lx)",id:"lux",fn:te("lux")}]},{name:"Force",formats:[{name:"Newton-meters (Nm)",id:"forceNm",fn:(0,_.rT)("Nm")},{name:"Kilonewton-meters (kNm)",id:"forcekNm",fn:(0,_.rT)("Nm",1)},{name:"Newtons (N)",id:"forceN",fn:(0,_.rT)("N")},{name:"Kilonewtons (kN)",id:"forcekN",fn:(0,_.rT)("N",1)}]},{name:"Hash rate",formats:[{name:"hashes/sec",id:"Hs",fn:(0,_.rT)("H/s")},{name:"kilohashes/sec",id:"KHs",fn:(0,_.rT)("H/s",1)},{name:"megahashes/sec",id:"MHs",fn:(0,_.rT)("H/s",2)},{name:"gigahashes/sec",id:"GHs",fn:(0,_.rT)("H/s",3)},{name:"terahashes/sec",id:"THs",fn:(0,_.rT)("H/s",4)},{name:"petahashes/sec",id:"PHs",fn:(0,_.rT)("H/s",5)},{name:"exahashes/sec",id:"EHs",fn:(0,_.rT)("H/s",6)}]},{name:"Mass",formats:[{name:"milligram (mg)",id:"massmg",fn:(0,_.rT)("g",-1)},{name:"gram (g)",id:"massg",fn:(0,_.rT)("g")},{name:"pound (lb)",id:"masslb",fn:te("lb")},{name:"kilogram (kg)",id:"masskg",fn:(0,_.rT)("g",1)},{name:"metric ton (t)",id:"masst",fn:te("t")}]},{name:"Length",formats:[{name:"millimeter (mm)",id:"lengthmm",fn:(0,_.rT)("m",-1)},{name:"inch (in)",id:"lengthin",fn:te("in")},{name:"feet (ft)",id:"lengthft",fn:te("ft")},{name:"meter (m)",id:"lengthm",fn:(0,_.rT)("m")},{name:"kilometer (km)",id:"lengthkm",fn:(0,_.rT)("m",1)},{name:"mile (mi)",id:"lengthmi",fn:te("mi")}]},{name:"Pressure",formats:[{name:"Millibars",id:"pressurembar",fn:(0,_.rT)("bar",-1)},{name:"Bars",id:"pressurebar",fn:(0,_.rT)("bar")},{name:"Kilobars",id:"pressurekbar",fn:(0,_.rT)("bar",1)},{name:"Pascals",id:"pressurepa",fn:(0,_.rT)("Pa")},{name:"Hectopascals",id:"pressurehpa",fn:te("hPa")},{name:"Kilopascals",id:"pressurekpa",fn:te("kPa")},{name:"Inches of mercury",id:"pressurehg",fn:te('"Hg')},{name:"PSI",id:"pressurepsi",fn:ge(1e3,["psi","ksi","Mpsi"])}]},{name:"Radiation",formats:[{name:"Becquerel (Bq)",id:"radbq",fn:(0,_.rT)("Bq")},{name:"curie (Ci)",id:"radci",fn:(0,_.rT)("Ci")},{name:"Gray (Gy)",id:"radgy",fn:(0,_.rT)("Gy")},{name:"rad",id:"radrad",fn:(0,_.rT)("rad")},{name:"Sievert (Sv)",id:"radsv",fn:(0,_.rT)("Sv")},{name:"milliSievert (mSv)",id:"radmsv",fn:(0,_.rT)("Sv",-1)},{name:"microSievert (\xB5Sv)",id:"radusv",fn:(0,_.rT)("Sv",-2)},{name:"rem",id:"radrem",fn:(0,_.rT)("rem")},{name:"Exposure (C/kg)",id:"radexpckg",fn:(0,_.rT)("C/kg")},{name:"roentgen (R)",id:"radr",fn:(0,_.rT)("R")},{name:"Sievert/hour (Sv/h)",id:"radsvh",fn:(0,_.rT)("Sv/h")},{name:"milliSievert/hour (mSv/h)",id:"radmsvh",fn:(0,_.rT)("Sv/h",-1)},{name:"microSievert/hour (\xB5Sv/h)",id:"radusvh",fn:(0,_.rT)("Sv/h",-2)}]},{name:"Rotational Speed",formats:[{name:"Revolutions per minute (rpm)",id:"rotrpm",fn:te("rpm")},{name:"Hertz (Hz)",id:"rothz",fn:(0,_.rT)("Hz")},{name:"Kilohertz (kHz)",id:"rotkhz",fn:(0,_.rT)("Hz",1)},{name:"Megahertz (MHz)",id:"rotmhz",fn:(0,_.rT)("Hz",2)},{name:"Gigahertz (GHz)",id:"rotghz",fn:(0,_.rT)("Hz",3)},{name:"Radians per second (rad/s)",id:"rotrads",fn:te("rad/s")},{name:"Degrees per second (\xB0/s)",id:"rotdegs",fn:te("\xB0/s")}]},{name:"Temperature",formats:[{name:"Celsius (\xB0C)",id:"celsius",fn:te("\xB0C")},{name:"Fahrenheit (\xB0F)",id:"fahrenheit",fn:te("\xB0F")},{name:"Kelvin (K)",id:"kelvin",fn:te("K")}]},{name:"Time",formats:[{name:"Hertz (1/s)",id:"hertz",fn:(0,_.rT)("Hz")},{name:"nanoseconds (ns)",id:"ns",fn:h},{name:"microseconds (\xB5s)",id:"\xB5s",fn:p},{name:"milliseconds (ms)",id:"ms",fn:m},{name:"seconds (s)",id:"s",fn:v},{name:"minutes (m)",id:"m",fn:E},{name:"hours (h)",id:"h",fn:D},{name:"days (d)",id:"d",fn:b},{name:"duration (ms)",id:"dtdurationms",fn:T},{name:"duration (s)",id:"dtdurations",fn:M},{name:"duration (hh:mm:ss)",id:"dthms",fn:I},{name:"duration (d hh:mm:ss)",id:"dtdhms",fn:x},{name:"Timeticks (s/100)",id:"timeticks",fn:S},{name:"clock (ms)",id:"clockms",fn:O},{name:"clock (s)",id:"clocks",fn:C}]},{name:"Throughput",formats:[{name:"counts/sec (cps)",id:"cps",fn:ye("c/s")},{name:"ops/sec (ops)",id:"ops",fn:ye("ops/s")},{name:"requests/sec (rps)",id:"reqps",fn:ye("req/s")},{name:"reads/sec (rps)",id:"rps",fn:ye("rd/s")},{name:"writes/sec (wps)",id:"wps",fn:ye("wr/s")},{name:"I/O ops/sec (iops)",id:"iops",fn:ye("io/s")},{name:"events/sec (eps)",id:"eps",fn:ye("evt/s")},{name:"messages/sec (mps)",id:"mps",fn:ye("msg/s")},{name:"records/sec (rps)",id:"recps",fn:ye("rec/s")},{name:"rows/sec (rps)",id:"rowsps",fn:ye("rows/s")},{name:"counts/min (cpm)",id:"cpm",fn:ye("c/m")},{name:"ops/min (opm)",id:"opm",fn:ye("ops/m")},{name:"requests/min (rpm)",id:"reqpm",fn:ye("req/m")},{name:"reads/min (rpm)",id:"rpm",fn:ye("rd/m")},{name:"writes/min (wpm)",id:"wpm",fn:ye("wr/m")},{name:"events/min (epm)",id:"epm",fn:ye("evts/m")},{name:"messages/min (mpm)",id:"mpm",fn:ye("msgs/m")},{name:"records/min (rpm)",id:"recpm",fn:ye("rec/m")},{name:"rows/min (rpm)",id:"rowspm",fn:ye("rows/m")}]},{name:"Velocity",formats:[{name:"meters/second (m/s)",id:"velocityms",fn:te("m/s")},{name:"kilometers/hour (km/h)",id:"velocitykmh",fn:te("km/h")},{name:"miles/hour (mph)",id:"velocitymph",fn:te("mph")},{name:"knot (kn)",id:"velocityknot",fn:te("kn")}]},{name:"Volume",formats:[{name:"millilitre (mL)",id:"mlitre",fn:(0,_.rT)("L",-1)},{name:"litre (L)",id:"litre",fn:(0,_.rT)("L")},{name:"cubic meter",id:"m3",fn:te("m\xB3")},{name:"Normal cubic meter",id:"Nm3",fn:te("Nm\xB3")},{name:"cubic decimeter",id:"dm3",fn:te("dm\xB3")},{name:"gallons",id:"gallons",fn:te("gal")}]},{name:"Boolean",formats:[{name:"True / False",id:"bool",fn:de("True","False")},{name:"Yes / No",id:"bool_yes_no",fn:de("Yes","No")},{name:"On / Off",id:"bool_on_off",fn:de("On","Off")}]}];function j(me){return`${me.prefix??""}${me.text}${me.suffix??""}`}let k=[];const Q={};let ee=!1;function ae(me,he){if(me===null)return"";if(me===Number.NEGATIVE_INFINITY||me===Number.POSITIVE_INFINITY)return me.toLocaleString();if(he==null&&(he=Z(me)),me===0)return me.toFixed(he);const Te=he?Math.pow(10,Math.max(0,he)):1,Be=String(Math.round(me*Te)/Te);if(Be.indexOf("e")!==-1||me===0)return Be;const we=Be.indexOf("."),Ne=we===-1?0:Be.length-we-1;return Ne<he?(Ne?Be:Be+".")+String(Te).slice(1,he-Ne+1):Be}function Z(me){const he=Math.abs(me);let Be=-Math.floor(Math.log(he)/Math.LN10)+1;const we=Math.pow(10,-Be);return he/we>2.25&&++Be,me%1===0&&(Be=0),Math.max(0,Be)}function ne(me,he,Te){return{text:ae(me,he),suffix:q(Te,Math.abs(me)>1)}}function q(me,he){if(!he)return me;switch(me){case" min":case" hour":case" day":case" week":case" year":return`${me}s`;default:return me}}function te(me,he){return(Te,Be)=>{if(Te===null)return{text:""};const we=ae(Te,Be);return me?he?{text:we,prefix:me}:{text:we,suffix:" "+me}:{text:we}}}function re(me){return me&&me.startsWith("bool")}function de(me,he){return Te=>({text:Te?me:he})}const ie=(me,he)=>Math.log10(he)/Math.log10(me);function ge(me,he,Te=0){return(Be,we)=>{if(Be==null)return{text:""};if(Be===Number.NEGATIVE_INFINITY||Be===Number.POSITIVE_INFINITY||isNaN(Be))return{text:Be.toLocaleString()};const Ne=Be===0?0:Math.floor(ie(me,Math.abs(Be))),Ze=he[(0,t.clamp)(Te+Ne,0,he.length-1)];return{text:ae(Be/me**(0,t.clamp)(Ne,-Te,he.length-Te-1),we),suffix:Ze}}}function ve(me,he){return me==null?{text:""}:{text:me.toLocaleString(void 0,{maximumFractionDigits:he??void 0})}}function ye(me){const Te=ge(1e3,["","K","M","B","T"]);return(Be,we,Ne)=>{if(Be===null)return{text:""};const Ze=Te(Be,we,Ne);return Ze.suffix+=" "+me,Ze}}function pe(me){return{text:`${me}`}}function le(){k=K();for(const me of k)for(const he of me.formats)Q[he.id]=he.fn;[{from:"farenheit",to:"fahrenheit"}].forEach(me=>{const he=Q[me.to];he&&(Q[me.from]=he)}),ee=!0}function Me(me){if(!me)return te("");ee||le();const he=Q[me];if(!he&&me){let Te=me.indexOf(":");if(Te>0){const Be=me.substring(0,Te),we=me.substring(Te+1);if(Be==="prefix")return te(we,!0);if(Be==="suffix")return te(we,!1);if(Be==="time")return L(we);if(Be==="si"){const Ne=(0,_.cL)(we.charAt(0)),Ze=Ne===0?we:we.substring(1);return(0,_.rT)(Ze,Ne)}if(Be==="count")return ye(we);if(Be==="currency")return(0,_.Gl)(we);if(Be==="bool"){if(Te=we.indexOf("/"),Te>=0){const Ne=we.substring(0,Te),Ze=we.substring(Te+1);return de(Ne,Ze)}return de(we,"-")}}return te(me)}return he}function De(){return ee||le(),Q}function Re(){return ee||le(),k.map(me=>({text:me.name,submenu:me.formats.map(he=>({text:he.name,value:he.id}))}))}},36120:(Y,A,e)=>{"use strict";e.d(A,{$:()=>o});var t=e(35853),n=e(18008);class o extends n.F{constructor(r){return super(),this.buffer=r.buffer||[],this.capacity=this.buffer.length,this.tail=r.append!=="head",this.index=0,this.add=this.getAddFunction(),r.capacity&&this.setCapacity(r.capacity),(0,t.N)(this)}getAddFunction(){return this.capacity>this.buffer.length?this.tail?r=>{this.buffer.push(r),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:r=>{this.buffer.unshift(r),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:this.tail?r=>{this.buffer[this.index]=r,this.index=(this.index+1)%this.buffer.length}:r=>{let g=this.index-1;g<0&&(g=this.buffer.length-1),this.buffer[g]=r,this.index=g}}setCapacity(r){if(this.capacity===r)return;const g=this.toArray();if(r>this.length)this.buffer=g;else if(r<this.capacity){const u=this.length-r;this.tail?this.buffer=g.slice(u,g.length):this.buffer=g.slice(0,g.length-u)}this.capacity=r,this.index=0,this.add=this.getAddFunction()}setAppendMode(r){const g=r!=="head";g!==this.tail&&(this.buffer=this.toArray().reverse(),this.index=0,this.tail=g,this.add=this.getAddFunction())}reverse(){return this.buffer.reverse()}get(r){return this.buffer[(r+this.index)%this.buffer.length]}set(r,g){this.buffer[(r+this.index)%this.buffer.length]=g}get length(){return this.buffer.length}}},18008:(Y,A,e)=>{"use strict";e.d(A,{E:()=>r,F:()=>o});var t=e(83239),n;class o{constructor(){this[n]={}}*iterator(){for(let u=0;u<this.length;u++)yield this.get(u)}set(u,d){throw"unsupported operation"}add(u){throw"unsupported operation"}push(...u){for(const d of u)this.add(d);return this.length}[Symbol.iterator](){return this.iterator()}forEach(u){return r(this).forEach(u)}map(u){return r(this).map(u)}filter(u){return r(this).filter(u)}at(u){return this.get(u)}toArray(){return(0,t.i)(this)}join(u){return this.toArray().join(u)}toJSON(){return this.toArray()}pop(){throw new Error("Method not implemented.")}concat(...u){throw new Error("Method not implemented.")}reverse(){throw new Error("Method not implemented.")}shift(){throw new Error("Method not implemented.")}sort(u){throw new Error("Method not implemented.")}splice(u,d,...i){throw new Error("Method not implemented.")}unshift(...u){throw new Error("Method not implemented.")}fill(u,d,i){throw new Error("Method not implemented.")}copyWithin(u,d,i){throw new Error("Method not implemented.")}slice(u,d){return this.toArray().slice(u,d)}indexOf(u,d){return this.toArray().indexOf(u,d)}lastIndexOf(u,d){return this.toArray().lastIndexOf(u,d)}every(u,d){return this.toArray().every(u,d)}some(u,d){return this.toArray().some(u,d)}reduce(u,d){throw new Error("Method not implemented.")}reduceRight(u,d){throw new Error("Method not implemented.")}find(u,d){return this.toArray().find(u,d)}findIndex(u,d){return this.toArray().findIndex(u,d)}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.toArray().values()}includes(u,d){return this.toArray().includes(u,d)}flatMap(u,d){return this.toArray().flatMap(u,d)}flat(u){throw new Error("Method not implemented.")}}n=Symbol.unscopables;const s=[];function r(g){return{*[Symbol.iterator](){for(let u=0;u<g.length;u++)yield g.get(u)},forEach(u){for(let d=0;d<g.length;d++)u(g.get(d),d,s)},map(u){const d=[];for(let i=0;i<g.length;i++)d.push(u(g.get(i),i,s));return d},filter(u){const d=[];let i=0;for(const l of this)u(l,i++,s)&&d.push(l);return d}}}},43548:(Y,A,e)=>{"use strict";e.d(A,{F:()=>s});var t=e(35853),n=e(18008),o=e(83239);class s extends n.F{constructor(g,u){return super(),this.source=g,this.order=u,(0,t.N)(this)}get length(){return this.source.length}get(g){return this.source.get(this.order[g])}toArray(){return(0,o.i)(this)}toJSON(){return(0,o.i)(this)}getOrderArray(){return this.order}}},31978:(Y,A,e)=>{"use strict";e.d(A,{kV:()=>s,Ld:()=>u,vG:()=>a,E0:()=>l,$e:()=>d.$,m$:()=>i,aO:()=>h,QL:()=>m,Fb:()=>f.F,Ek:()=>n.E});var t=e(35853),n=e(18008),o=e(83239);class s extends n.F{constructor(E=0){return super(),this.length=0,this.source=[],this.length=E,(0,t.N)(this)}setLength(E){if(E>this.length)this.length=E;else if(E<this.length){const D=[];for(const b of this.source)if(D.push(b),b.end>E){b.end=E;break}this.source=D,this.length=E}}append(E){const D={start:this.length,end:this.length+E.length,values:E};return this.length=D.end,this.source.push(D),D}get(E){for(let D=0;D<this.source.length;D++){const b=this.source[D];if(E>=b.start&&E<b.end)return b.values[E-b.start]}}toArray(){return(0,o.i)(this)}toJSON(){return(0,o.i)(this)}}const r="ArrayVector is deprecated and will be removed in Grafana 11. Please use plain arrays for field.values.";let g=!1;class u extends Array{get buffer(){return this}set buffer(E){this.length=0;const D=E?.length;if(D){let b=65e3,P=Math.ceil(D/b);for(let y=0;y<P;y++)this.push.apply(this,E.slice(y*b,(y+1)*b))}}constructor(E){super(),this.buffer=E??[],g||(console.warn(r),g=!0)}toJSON(){return[...this]}}var d=e(36120);class i extends Array{constructor(E,D){return super(),new Array(D).fill(E)}}class l extends Array{constructor(E,D,b){super();const P=new Array(E.length);for(let y=0;y<P.length;y++)P[y]=b(E[y],D[y]);return P}}var f=e(43548),c=e(83195);class h extends Array{constructor(E,D){return super(),E.map(b=>(0,c.cN)(D(b)))}}var p=e(11261);class m extends Array{constructor(E){super();const D=new Array(E);for(let b=0;b<E;b++)D[b]=b;return D}static newField(E){return{name:"",values:new m(E),type:p.PU.number,config:{min:0,max:E-1}}}}class a extends Array{constructor(E){return super(),E.map(D=>+D)}}},83239:(Y,A,e)=>{"use strict";e.d(A,{i:()=>t});function t(n){const o=Array(n.length);for(let s=0;s<n.length;s++)o[s]=n.get(s);return o}},13390:(Y,A,e)=>{"use strict";e.d(A,{X:()=>t});const t={RadioButton:{container:"data-testid radio-button"},Breadcrumbs:{breadcrumb:n=>`data-testid ${n} breadcrumb`},TimePicker:{openButton:"data-testid TimePicker Open Button",overlayContent:"data-testid TimePicker Overlay Content",fromField:"data-testid Time Range from field",toField:"data-testid Time Range to field",applyTimeRange:"data-testid TimePicker submit button",copyTimeRange:"data-testid TimePicker copy button",pasteTimeRange:"data-testid TimePicker paste button",calendar:{label:"data-testid Time Range calendar",openButton:"data-testid Open time range calendar",closeButton:"data-testid Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSourcePermissions:{form:()=>'form[name="addPermission"]',roleType:"Role to add new permission to",rolePicker:"Built-in role picker",permissionLevel:"Permission Level"},DateTimePicker:{input:"data-testid date-time-input"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"data-testid Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{connectionSettings:"Data source connection URL",manageAlerts:"prometheus-alerts-manager",scrapeInterval:"data-testid scrape interval",queryTimeout:"data-testid query timeout",defaultEditor:"data-testid default editor",disableMetricLookup:"disable-metric-lookup",prometheusType:"data-testid prometheus type",prometheusVersion:"data-testid prometheus version",cacheLevel:"data-testid cache level",incrementalQuerying:"prometheus-incremental-querying",queryOverlapWindow:"data-testid query overlap window",disableRecordingRules:"disable-recording-rules",customQueryParameters:"data-testid custom query parameters",httpMethod:"data-testid http method",exemplarsAddButton:"data-testid Add exemplar config button",internalLinkSwitch:"data-testid Internal link switch"},queryEditor:{explain:"data-testid prometheus explain switch wrapper",editorToggle:"data-testid QueryEditorModeToggle",options:"data-testid prometheus options",legend:"data-testid prometheus legend wrapper",format:"data-testid prometheus format",step:"prometheus-step",type:"data-testid prometheus type",exemplars:"prometheus-exemplars",builder:{metricSelect:"data-testid metric select",hints:"data-testid prometheus hints",metricsExplorer:"data-testid metrics explorer",queryAdvisor:"data-testid query advisor"},code:{queryField:"data-testid prometheus query field",metricsBrowser:{openButton:"data-testid open metrics browser",selectMetric:"data-testid select a metric",metricList:"data-testid metric list",labelNamesFilter:"data-testid label names filter",labelValuesFilter:"data-testid label values filter",useQuery:"data-testid use query",useAsRateQuery:"data-testid use as rate query",validateSelector:"data-testid validate selector",clear:"data-testid clear"}}},exemplarMarker:"data-testid Exemplar marker",variableQueryEditor:{queryType:"data-testid query type",labelnames:{metricRegex:"data-testid label names metric regex"},labelValues:{labelSelect:"data-testid label values label select"},metricNames:{metricRegex:"data-testid metric names metric regex"},varQueryResult:"data-testid variable query result",seriesQuery:"data-testid prometheus series query",classicQuery:"data-testid prometheus classic query"},annotations:{minStep:"prometheus-annotation-min-step",title:"data-testid prometheus annotation title",tags:"data-testid prometheus annotation tags",text:"data-testid prometheus annotation text",seriesValueAsTimestamp:"data-testid prometheus annotation series value as timestamp"}}},Menu:{MenuComponent:n=>`${n} menu`,MenuGroup:n=>`${n} menu group`,MenuItem:n=>`${n} menu item`,SubMenu:{container:"data-testid SubMenu container",icon:"data-testid SubMenu icon"}},Panels:{Panel:{title:n=>`data-testid Panel header ${n}`,headerItems:n=>`data-testid Panel header item ${n}`,menuItems:n=>`data-testid Panel menu item ${n}`,menu:n=>`data-testid Panel menu ${n}`,containerByTitle:n=>`${n} panel`,headerCornerInfo:n=>`Panel header ${n}`,status:n=>`data-testid Panel status ${n}`,loadingBar:()=>"Panel loading bar",HoverWidget:{container:"data-testid hover-header-container",dragIcon:"data-testid drag-icon"},PanelDataErrorMessage:"data-testid Panel data error message"},Visualization:{Graph:{container:"Graph container",VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:n=>`gpl alias ${n}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"data testid Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer",body:"data-testid table body"}}},VizLegend:{seriesName:n=>`data-testid VizLegend series ${n}`},Drawer:{General:{title:n=>`Drawer title ${n}`,expand:"Drawer expand",contract:"Drawer contract",close:"data-testid Drawer close",rcContentWrapper:()=>".rc-drawer-content-wrapper",subtitle:"data-testid drawer subtitle"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:n=>`${n} field property editor`},DataPane:{content:"Panel editor data pane content"},applyButton:"data-testid Apply changes and go back to dashboard",toggleVizPicker:"data-testid toggle-viz-picker",toggleVizOptions:"data-testid toggle-viz-options",toggleTableView:"toggle-table-view",showZoomField:"Map controls Show zoom control field property editor",showAttributionField:"Map controls Show attribution field property editor",showScaleField:"Map controls Show scale field property editor",showMeasureField:"Map controls Show measure tools field property editor",showDebugField:"Map controls Show debug field property editor",measureButton:"show measure tools"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:n=>`Tab ${n}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",queryHistoryButton:"data-testid query-history-button",addQuery:"data-testid query-tab-add-query"},QueryHistory:{queryText:"Query text"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:n=>`data-testid ${n}`,title:n=>`Query editor row title ${n}`,container:n=>`Query editor row ${n}`},AlertTab:{content:"data-testid Alert editor tab content"},Alert:{alert:n=>`Alert ${n}`,alertV2:n=>`data-testid Alert ${n}`},TransformTab:{content:"data-testid Transform editor tab content",newTransform:n=>`data-testid New transform ${n}`,transformationEditor:n=>`data-testid Transformation editor ${n}`,transformationEditorDebugger:n=>`data-testid Transformation editor debugger ${n}`},Transforms:{card:n=>`data-testid New transform ${n}`,disableTransformationButton:"data-testid Disable transformation button",Reduce:{modeLabel:"data-testid Transform mode label",calculationsLabel:"data-testid Transform calculations label"},SpatialOperations:{actionLabel:"root Action field property editor",locationLabel:"root Location Mode field property editor",location:{autoOption:"Auto location option",coords:{option:"Coords location option",latitudeFieldLabel:"root Latitude field field property editor",longitudeFieldLabel:"root Longitude field field property editor"},geohash:{option:"Geohash location option",geohashFieldLabel:"root Geohash field field property editor"},lookup:{option:"Lookup location option",lookupFieldLabel:"root Lookup field field property editor",gazetteerFieldLabel:"root Gazetteer field property editor"}}},searchInput:"data-testid search transformations",noTransformationsMessage:"data-testid no transformations message",addTransformationButton:"data-testid add transformation button",removeAllTransformationsButton:"data-testid remove all transformations button"},NavBar:{Configuration:{button:"Configuration"},Toggle:{button:"data-testid Toggle menu"},Reporting:{button:"Reporting"}},NavMenu:{Menu:"data-testid navigation mega-menu",item:"data-testid Nav menu item"},NavToolbar:{container:"data-testid Nav toolbar"},PageToolbar:{container:()=>".page-toolbar",item:n=>`${n}`,itemButton:n=>`data-testid ${n}`},QueryEditorToolbarItem:{button:n=>`QueryEditor toolbar item button ${n}`},BackButton:{backArrow:"data-testid Go Back"},OptionsGroup:{group:n=>n?`Options group ${n}`:"Options group",toggle:n=>n?`Options group ${n} toggle`:"Options group toggle"},PluginVisualization:{item:n=>`Plugin visualization item ${n}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"data-testid folder-picker-input"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"data-testid Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"data-testid Select a data source",dataSourceList:"data-testid Data source list dropdown",advancedModal:{dataSourceList:"data-testid Data source list",builtInDataSourceList:"data-testid Built in data source list"}},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:"data-testid SpanBar--wrapper"},QueryField:{container:"data-testid Query field"},QueryBuilder:{queryPatterns:"data-testid Query patterns",labelSelect:"data-testid Select label",valueSelect:"data-testid Select value",matchOperatorSelect:"data-testid Select match operator"},ValuePicker:{button:n=>`data-testid Value picker button ${n}`,select:n=>`data-testid Value picker select ${n}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:n=>`data-testid Collapse folder ${n}`,expandFolder:n=>`data-testid Expand folder ${n}`,dashboardItem:n=>`${t.Search.dashboardItems} ${n}`,dashboardCard:n=>`data-testid Search card ${n}`,folderHeader:n=>`data-testid Folder header ${n}`,folderContent:n=>`data-testid Folder content ${n}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"data-testid Loading indicator"},CallToActionCard:{button:n=>`Call to action button ${n}`,buttonV2:n=>`data-testid Call to action button ${n}`},DataLinksContextMenu:{singleLink:"data-testid Data link"},CodeEditor:{container:"data-testid Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"data-testid Unified alert editor tab content"},VisualizationPreview:{card:n=>`data-testid suggestion-${n}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:n=>`data-testid dashboard-row-title-${n}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table",extensionPointTabs:"data-testid-extension-point-tabs",extensionPointTab:n=>`data-testid-extension-point-tab-${n}`},FileUpload:{inputField:"data-testid-file-upload-input-field",fileNameSpan:"data-testid-file-upload-file-name"},DebugOverlay:{wrapper:"debug-overlay"},OrgRolePicker:{input:"Role"},AnalyticsToolbarButton:{button:"Dashboard insights"},Variables:{variableOption:"data-testid variable-option"},Annotations:{annotationsTypeInput:"annotations-type-input",annotationsChoosePanelInput:"choose-panels-input"},Tooltip:{container:"data-testid tooltip"}}},13544:(Y,A,e)=>{"use strict";e.d(A,{Tp:()=>o});var t=e(13390);const o={pages:{Login:{url:"/login",username:"data-testid Username input field",password:"data-testid Password input field",submit:"data-testid Login button",skip:"data-testid Skip change password button"},Home:{url:"/"},DataSource:{name:"data-testid Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"data-testid Data source settings page read only message",saveAndTest:"data-testid Data source settings page Save and Test button",alert:"data-testid Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:s=>`Data source list item ${s}`},EditDataSource:{url:s=>`/datasources/edit/${s}`,settings:"Datasource settings page basic settings"},AddDataSource:{url:"/datasources/new",dataSourcePlugins:s=>`Data source plugin item ${s}`,dataSourcePluginsV2:s=>`Add new data source ${s}`},ConfirmModal:{delete:"data-testid Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",itemButton:s=>`data-testid ${s}`,addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:s=>`/d/${s}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation",publicDashboardTag:"data-testid public dashboard tag",shareButton:"data-testid share-button"},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:s=>`data-testid Dashboard template variables submenu Label ${s}`,submenuItemValueDropDownValueLinkTexts:s=>`data-testid Dashboard template variables Variable Value DropDown value link text ${s}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:s=>`data-testid Dashboard template variables Variable Value DropDown option text ${s}`,Annotations:{annotationsWrapper:"data-testid annotation-wrapper",annotationLabel:s=>`data-testid Dashboard annotations submenu Label ${s}`,annotationToggle:s=>`data-testid Dashboard annotations submenu Toggle ${s}`}},Settings:{Actions:{close:"data-testid dashboard-settings-close"},General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:s=>`Dashboard settings section item ${s}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Tab General"},Annotations:{List:{addAnnotationCTA:t.X.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:t.X.CallToActionCard.buttonV2("Add annotation query"),annotations:"data-testid list-annotations"},Settings:{name:"Annotations settings name input"},NewAnnotation:{panelFilterSelect:"data-testid annotations-panel-filter",showInLabel:"show-in-label",previewInDashboard:"data-testid annotations-preview",delete:"data-testid annotations-delete",apply:"data-testid annotations-apply",enable:"data-testid annotation-enable",hide:"data-testid annotation-hide"}},Variables:{List:{addVariableCTA:t.X.CallToActionCard.button("Add variable"),addVariableCTAV2:t.X.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:s=>`Variable editor Table Name field ${s}`,tableRowDefinitionFields:s=>`Variable editor Table Definition field ${s}`,tableRowArrowUpButtons:s=>`Variable editor Table ArrowUp button ${s}`,tableRowArrowDownButtons:s=>`Variable editor Table ArrowDown button ${s}`,tableRowDuplicateButtons:s=>`Variable editor Table Duplicate button ${s}`,tableRowRemoveButtons:s=>`Variable editor Table Remove button ${s}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalNameInputV2:"data-testid Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalTypeSelectV2:"data-testid Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalLabelInputV2:"data-testid Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",generalHideSelectV2:"data-testid Variable editor Form Hide select",selectionOptionsMultiSwitch:"data-testid Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"data-testid Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"data-testid Variable editor Form IncludeAll field",previewOfValuesOption:"data-testid Variable editor Preview of Values option",submitButton:"data-testid Variable editor Run Query button",applyButton:"data-testid Variable editor Apply button"},QueryVariable:{queryOptionsDataSourceSelect:t.X.DataSourcePicker.inputV2,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRefreshSelectV2:"data-testid Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsRegExInputV2:"data-testid Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsSortSelectV2:"data-testid Variable editor Form Query Sort select",queryOptionsQueryInput:"data-testid Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field",constantOptionsQueryInputV2:"data-testid Variable editor Form Constant Query field"},DatasourceVariable:{datasourceSelect:"data-testid datasource variable datasource type"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field",textBoxOptionsQueryInputV2:"data-testid Variable editor Form TextBox Query field"},CustomVariable:{customValueInput:"data-testid custom-variable-input"},IntervalVariable:{intervalsValueInput:"data-testid interval variable intervals input",autoEnabledCheckbox:"data-testid interval variable auto value checkbox",stepCountIntervalSelect:"data-testid interval variable step count input",minIntervalInput:"data-testid interval variable mininum interval input"},GroupByVariable:{dataSourceSelect:t.X.DataSourcePicker.inputV2,infoText:"data-testid group by variable info text",modeToggle:"data-testid group by variable mode toggle"},AdHocFiltersVariable:{datasourceSelect:t.X.DataSourcePicker.inputV2,infoText:"data-testid ad-hoc filters variable info text"}}}},Annotations:{marker:"data-testid annotation-marker"},Rows:{Repeated:{ConfigSection:{warningMessage:"data-testid Repeated rows warning message"}}}},Dashboards:{url:"/dashboards",dashboards:s=>`Dashboard search item ${s}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},ShareDashboardModal:{PublicDashboard:{Tab:"Tab Public dashboard",WillBePublicCheckbox:"data-testid public dashboard will be public checkbox",LimitedDSCheckbox:"data-testid public dashboard limited datasources checkbox",CostIncreaseCheckbox:"data-testid public dashboard cost may increase checkbox",PauseSwitch:"data-testid public dashboard pause switch",EnableAnnotationsSwitch:"data-testid public dashboard on off switch for annotations",CreateButton:"data-testid public dashboard create button",DeleteButton:"data-testid public dashboard delete button",CopyUrlInput:"data-testid public dashboard copy url input",CopyUrlButton:"data-testid public dashboard copy url button",SettingsDropdown:"data-testid public dashboard settings dropdown",TemplateVariablesWarningAlert:"data-testid public dashboard disabled template variables alert",UnsupportedDataSourcesWarningAlert:"data-testid public dashboard unsupported data sources alert",NoUpsertPermissionsWarningAlert:"data-testid public dashboard no upsert permissions alert",EnableTimeRangeSwitch:"data-testid public dashboard on off switch for time range",EmailSharingConfiguration:{Container:"data-testid email sharing config container",ShareType:"data-testid public dashboard share type",EmailSharingInput:"data-testid public dashboard email sharing input",EmailSharingInviteButton:"data-testid public dashboard email sharing invite button",EmailSharingList:"data-testid public dashboard email sharing list",DeleteEmail:"data-testid public dashboard delete email button",ReshareLink:"data-testid public dashboard reshare link button"}}},PublicDashboard:{page:"public-dashboard-page",NotAvailable:{container:"public-dashboard-not-available",title:"public-dashboard-title",pausedDescription:"public-dashboard-paused-description"}},RequestViewAccess:{form:"request-view-access-form",recipientInput:"request-view-access-recipient-input",submitButton:"request-view-access-submit-button"},PublicDashboardConfirmAccess:{submitButton:"data-testid confirm-access-submit-button"},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollView:"data-testid explorer scroll view"}},SoloPanel:{url:s=>`/d-solo/${s}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"data-testid Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"data-testid Plugin signature info",disabledInfo:"data-testid Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemDelete:"data-testid playlist-form-delete-item"},BrowseDashboards:{table:{body:"data-testid browse-dashboards-table",row:s=>`data-testid browse dashboards row ${s}`,checkbox:s=>`data-testid ${s} checkbox`},NewFolderForm:{form:"data-testid new folder form",nameInput:"data-testid new-folder-name-input",createButton:"data-testid new-folder-create-button"}},Search:{url:"/?search=openn",FolderView:{url:"/?search=open&layout=folders"}},PublicDashboards:{ListItem:{linkButton:"public-dashboard-link-button",configButton:"public-dashboard-configuration-button",trashcanButton:"public-dashboard-remove-button",pauseSwitch:"data-testid public dashboard pause switch"}},UserListPage:{tabs:{allUsers:"data-testid all-users-tab",orgUsers:"data-testid org-users-tab",anonUserDevices:"data-testid anon-user-devices-tab",publicDashboardsUsers:"data-testid public-dashboards-users-tab",users:"data-testid users-tab"},org:{url:"/org/users"},admin:{url:"/admin/users"},publicDashboards:{container:"data-testid public-dashboards-users-list"},UserListAdminPage:{container:"data-testid user-list-admin-page"},UsersListPage:{container:"data-testid users-list-page"},UserAnonListPage:{container:"data-testid user-anon-list-page"},UsersListPublicDashboardsPage:{container:"data-testid users-list-public-dashboards-page",DashboardsListModal:{listItem:s=>`data-testid dashboards-list-item-${s}`}}},ProfilePage:{url:"/profile"}},components:t.X}},76365:(Y,A,e)=>{"use strict";e.d(A,{Jz:()=>h,oA:()=>c,Ik:()=>f});var t=e(11261),n=e(47696),o=e(57875),s=e(5546),r=e(2543);function g(m,a){const v=u(m);return d(v,a,"parents")}function u(m){return m.map(a=>{if(!a.parents?.length)return a;const v={...a,children:[]},E=[{child:v,parent:a.parents[0]}];for(;E.length;){const D=E.shift(),b={...D.parent,children:D.child?[D.child]:[],parents:[]};D.child&&(b.value=D.child.value,D.child.parents=[b]),D.parent.parents?.length&&E.push({child:b,parent:D.parent.parents[0]})}return v})}function d(m,a,v="children"){const E=v==="parents"?"children":"parents",D=[],b=[{previous:void 0,items:m,level:0}];for(;b.length;){const P=b.shift(),y=P.items.flatMap(x=>x.itemIndexes),T={value:P.items.reduce((x,S)=>x+S.value,0),itemIndexes:y,children:[],parents:[],start:0,level:P.level};if(D[P.level]=D[P.level]||[],D[P.level].push(T),P.previous){T[E]=[P.previous];const x=P.previous[v]?.reduce((S,O)=>S+O.value,0)||0;T.start=P.previous.start+x,P.previous[v].push(T)}const M=P.items.flatMap(x=>x[v]||[]),I=(0,r.groupBy)(M,x=>a.getLabel(x.itemIndexes[0]));for(const x of Object.values(I))b.push({previous:T,items:x,level:P.level+1})}return v==="parents"&&(D.reverse(),D.forEach((P,y)=>{P.forEach(T=>{T.level=y})})),D}function i(m,a){const v=[];let E=0,D;const b={};for(let y=0;y<m.data.length;y++){const T=m.getLevel(y),M=y>0?m.getLevel(y-1):void 0;if(v[T]=v[T]||[],M&&M>=T){const x=v[T][v[T].length-1];E=x.start+m.getValue(x.itemIndexes[0])+m.getValueRight(x.itemIndexes[0]),D=x.parents[0]}const I={itemIndexes:[y],value:m.getValue(y)+m.getValueRight(y),valueRight:m.isDiffFlamegraph()?m.getValueRight(y):void 0,start:E,parents:D&&[D],children:[],level:T};b[m.getLabel(y)]?b[m.getLabel(y)].push(I):b[m.getLabel(y)]=[I],D&&D.children.push(I),D=I,v[T].push(I)}const P=new l(a?.collapsingThreshold);return a?.collapsing&&P.addTree(v[0][0]),[v,b,P.getMap()]}class l{constructor(a){this.map=new Map,this.threshold=.99,a!==void 0&&(this.threshold=a)}addTree(a){const v=[a];for(;v.length;){const E=v.shift();E.parents?.length&&this.addItem(E,E.parents[0]),E.children.length&&v.unshift(...E.children)}}addItem(a,v){if(v&&a.value>v.value*this.threshold&&v.children.length===1)if(this.map.has(v)){const E=this.map.get(v);this.map.set(a,E),E.items.push(a)}else{const E={items:[v,a],collapsed:!0};this.map.set(v,E),this.map.set(a,E)}}getMap(){return new Map(this.map)}}function f(m){return m.missingFields.length?`Data is missing fields: ${m.missingFields.join(", ")}`:m.wrongTypeFields.length?`Data has fields of wrong type: ${m.wrongTypeFields.map(a=>`${a.name} has type ${a.type} but should be ${a.expectedTypes.join(" or ")}`).join(", ")}`:""}function c(m){const a=[["label",[t.PU.string,t.PU.enum]],["level",[t.PU.number]],["value",[t.PU.number]],["self",[t.PU.number]]],v=[],E=[];for(const D of a){const[b,P]=D,y=m.fields.find(T=>T.name===b);if(!y){v.push(b);continue}P.includes(y.type)||E.push({name:b,expectedTypes:P,type:y.type})}if(v.length>0||E.length>0)return{wrongTypeFields:E,missingFields:v}}class h{constructor(a,v,E=(0,n.a)()){this.data=a,this.options=v;const D=c(a);if(D)throw new Error(f(D));if(this.labelField=a.fields.find(P=>P.name==="label"),this.levelField=a.fields.find(P=>P.name==="level"),this.valueField=a.fields.find(P=>P.name==="value"),this.selfField=a.fields.find(P=>P.name==="self"),this.valueRightField=a.fields.find(P=>P.name==="valueRight"),this.selfRightField=a.fields.find(P=>P.name==="selfRight"),(this.valueField||this.selfField)&&!(this.valueField&&this.selfField))throw new Error("Malformed dataFrame: both valueRight and selfRight has to be present if one of them is present.");const b=this.labelField?.config?.type?.enum;b?(this.labelDisplayProcessor=(0,o.J)({field:this.labelField,theme:E}),this.uniqueLabels=b.text||[]):(this.labelDisplayProcessor=P=>({text:P+"",numeric:0}),this.uniqueLabels=[...new Set(this.labelField.values)]),this.valueDisplayProcessor=(0,o.J)({field:this.valueField,theme:E})}isDiffFlamegraph(){return this.valueRightField&&this.selfRightField}getLabel(a){return this.labelDisplayProcessor(this.labelField.values[a]).text}getLevel(a){return this.levelField.values[a]}getValue(a){return p(this.valueField,a)}getValueRight(a){return p(this.valueRightField,a)}getSelf(a){return p(this.selfField,a)}getSelfRight(a){return p(this.selfRightField,a)}getSelfDisplay(a){return this.valueDisplayProcessor(this.getSelf(a))}getUniqueLabels(){return this.uniqueLabels}getUnitTitle(){switch(this.valueField.config.unit){case s.Zk.Bytes:return"RAM";case s.Zk.Nanoseconds:return"Time"}return"Count"}getLevels(){return this.initLevels(),this.levels}getSandwichLevels(a){const v=this.getNodesWithLabel(a);if(!v?.length)return[[],[]];const E=g(v,this),D=d(v,this);return[E,D]}getNodesWithLabel(a){return this.initLevels(),this.uniqueLabelsMap[a]}getCollapsedMap(){return this.initLevels(),this.collapsedMap}initLevels(){if(!this.levels){const[a,v,E]=i(this,this.options);this.levels=a,this.uniqueLabelsMap=v,this.collapsedMap=E}}}function p(m,a){return m?(typeof a=="number"?[a]:a).reduce((E,D)=>E+m.values[D],0):0}},85194:(Y,A,e)=>{"use strict";e.d(A,{A:()=>ca});var t=e(32196),n=e(53076),o=e(96540),s=e(49185),r=e(60578),g=e(14578);const u=22*window.devicePixelRatio,d=10*window.devicePixelRatio,i=.5*window.devicePixelRatio,l=20*window.devicePixelRatio,f=.5*window.devicePixelRatio,c=4*window.devicePixelRatio,h=3*window.devicePixelRatio,p=3*window.devicePixelRatio,m=4*window.devicePixelRatio,a=2*window.devicePixelRatio,v=800,E=120;var D=e(64539),b=e(59093),P=e(28122);const T=({itemData:Lt,onMenuItemClick:qt,onItemFocus:hn,onSandwich:Cn,collapseConfig:gn,onExpandGroup:xn,onCollapseGroup:Tn,onExpandAllGroups:Wn,onCollapseAllGroups:Sn,collapsing:An,allGroupsExpanded:ta,allGroupsCollapsed:fa})=>{function la(){return o.createElement(o.Fragment,null,o.createElement(D.D,{label:"Focus block",icon:"eye",onClick:()=>{hn(),qt()}}),o.createElement(D.D,{label:"Copy function name",icon:"copy",onClick:()=>{navigator.clipboard.writeText(Lt.label).then(()=>{qt()})}}),o.createElement(D.D,{label:"Sandwich view",icon:"gf-show-context",onClick:()=>{Cn(),qt()}}),An&&o.createElement(b.r,{label:"Grouping"},gn?gn.collapsed?o.createElement(D.D,{label:"Expand group",icon:"angle-double-down",onClick:()=>{xn(),qt()}}):o.createElement(D.D,{label:"Collapse group",icon:"angle-double-up",onClick:()=>{Tn(),qt()}}):null,!ta&&o.createElement(D.D,{label:"Expand all groups",icon:"angle-double-down",onClick:()=>{Wn(),qt()}}),!fa&&o.createElement(D.D,{label:"Collapse all groups",icon:"angle-double-up",onClick:()=>{Sn(),qt()}})))}return o.createElement("div",{"data-testid":"contextMenu"},o.createElement(P.t,{renderMenuItems:la,x:Lt.posX+10,y:Lt.posY,focusOnOpen:!1}))};var M=e(83195),I=e(40845),x=e(28389),S=e(17464),O=e(69503);const C=({data:Lt,item:qt,totalTicks:hn,position:Cn,collapseConfig:gn})=>{const xn=(0,I.of)(B);if(!(qt&&Cn))return null;let Tn;if(Lt.isDiffFlamegraph()){const Wn=U(Lt,qt,hn);Tn=o.createElement(x.j,{className:xn.tooltipTable,columns:[{id:"label",header:""},{id:"baseline",header:"Baseline"},{id:"comparison",header:"Comparison"},{id:"diff",header:"Diff"}],data:Wn,getRowId:Sn=>Sn.rowId})}else{const Wn=L(Lt,qt,hn);Tn=o.createElement("p",{className:xn.lastParagraph},Wn.unitTitle,o.createElement("br",null),"Total: ",o.createElement("b",null,Wn.unitValue)," (",Wn.percentValue,"%)",o.createElement("br",null),"Self: ",o.createElement("b",null,Wn.unitSelf)," (",Wn.percentSelf,"%)",o.createElement("br",null),"Samples: ",o.createElement("b",null,Wn.samples))}return o.createElement(S.ZL,null,o.createElement(O.o,{className:xn.tooltipContainer,position:Cn,offset:{x:15,y:0}},o.createElement("div",{className:xn.tooltipContent},o.createElement("p",{className:xn.tooltipName},Lt.getLabel(qt.itemIndexes[0]),gn&&gn.collapsed?o.createElement("span",null,o.createElement("br",null),"and ",gn.items.length," similar items"):""),Tn)))},L=(Lt,qt,hn)=>{const Cn=Lt.valueDisplayProcessor(qt.value),gn=Lt.getSelfDisplay(qt.itemIndexes),xn=Math.round(1e4*(Cn.numeric/hn))/100,Tn=Math.round(1e4*(gn.numeric/hn))/100;let Wn=Cn.text+Cn.suffix,Sn=gn.text+gn.suffix;const An=Lt.getUnitTitle();return An==="Count"&&(Cn.suffix||(Wn=Cn.text),gn.suffix||(Sn=gn.text)),{percentValue:xn,percentSelf:Tn,unitTitle:An,unitValue:Wn,unitSelf:Sn,samples:Cn.numeric.toLocaleString()}},U=(Lt,qt,hn)=>{const gn=Lt.getLevels()[0][0].valueRight,xn=hn-gn,Tn=qt.value-qt.valueRight,Wn=Math.round(1e4*Tn/xn)/100,Sn=Math.round(1e4*qt.valueRight/gn)/100,An=(Sn-Wn)/Wn*100,ta=R(Lt,Lt.valueDisplayProcessor(Tn)),fa=R(Lt,Lt.valueDisplayProcessor(qt.valueRight)),la=(0,M.j_)("short");return[{rowId:"1",label:"% of total",baseline:Wn+"%",comparison:Sn+"%",diff:la(An).text+"%"},{rowId:"2",label:"Value",baseline:ta,comparison:fa,diff:R(Lt,Lt.valueDisplayProcessor(qt.valueRight-Tn))},{rowId:"3",label:"Samples",baseline:la(Tn).text,comparison:la(qt.valueRight).text,diff:la(qt.valueRight-Tn).text}]};function R(Lt,qt){let hn=qt.text+qt.suffix;return Lt.getUnitTitle()==="Count"&&(qt.suffix||(hn=qt.text)),hn}const B=Lt=>({tooltipContainer:(0,t.css)`
    title: tooltipContainer;
    overflow: hidden;
  `,tooltipContent:(0,t.css)`
    title: tooltipContent;
    font-size: ${Lt.typography.bodySmall.fontSize};
    width: 100%;
  `,tooltipName:(0,t.css)`
    title: tooltipName;
    margin-top: 0;
    word-break: break-all;
  `,lastParagraph:(0,t.css)`
    title: lastParagraph;
    margin-bottom: 0;
  `,name:(0,t.css)`
    title: name;
    margin-bottom: 10px;
  `,tooltipTable:(0,t.css)`
    title: tooltipTable;
    max-width: 400px;
  `}),H=C;var W=e(84140),N=e(5546),V=e(44115);function G(Lt,qt=0){let hn,Cn,gn,xn,Tn,Wn,Sn,An;for(hn=Lt.length&3,Cn=Lt.length-hn,gn=qt,Tn=3432918353,Wn=461845907,An=0;An<Cn;)Sn=Lt.charCodeAt(An)&255|(Lt.charCodeAt(++An)&255)<<8|(Lt.charCodeAt(++An)&255)<<16|(Lt.charCodeAt(++An)&255)<<24,++An,Sn=(Sn&65535)*Tn+(((Sn>>>16)*Tn&65535)<<16)&4294967295,Sn=Sn<<15|Sn>>>17,Sn=(Sn&65535)*Wn+(((Sn>>>16)*Wn&65535)<<16)&4294967295,gn^=Sn,gn=gn<<13|gn>>>19,xn=(gn&65535)*5+(((gn>>>16)*5&65535)<<16)&4294967295,gn=(xn&65535)+27492+(((xn>>>16)+58964&65535)<<16);switch(Sn=0,hn){case 3:Sn^=(Lt.charCodeAt(An+2)&255)<<16;case 2:Sn^=(Lt.charCodeAt(An+1)&255)<<8;case 1:Sn^=Lt.charCodeAt(An)&255;default:Sn=(Sn&65535)*Tn+(((Sn>>>16)*Tn&65535)<<16)&4294967295,Sn=Sn<<15|Sn>>>17,Sn=(Sn&65535)*Wn+(((Sn>>>16)*Wn&65535)<<16)&4294967295,gn^=Sn}return gn^=Lt.length,gn^=gn>>>16,gn=(gn&65535)*2246822507+(((gn>>>16)*2246822507&65535)<<16)&4294967295,gn^=gn>>>13,gn=(gn&65535)*3266489909+(((gn>>>16)*3266489909&65535)<<16)&4294967295,gn^=gn>>>16,gn>>>0}const _=[(0,W.A)({h:24,s:69,l:60}),(0,W.A)({h:34,s:65,l:65}),(0,W.A)({h:194,s:52,l:61}),(0,W.A)({h:163,s:45,l:55}),(0,W.A)({h:211,s:48,l:60}),(0,W.A)({h:246,s:40,l:65}),(0,W.A)({h:305,s:63,l:79}),(0,W.A)({h:47,s:100,l:73}),(0,W.A)({r:183,g:219,b:171}),(0,W.A)({r:244,g:213,b:152}),(0,W.A)({r:78,g:146,b:249}),(0,W.A)({r:249,g:186,b:143}),(0,W.A)({r:242,g:145,b:145}),(0,W.A)({r:130,g:181,b:216}),(0,W.A)({r:229,g:168,b:226}),(0,W.A)({r:174,g:162,b:224}),(0,W.A)({r:154,g:196,b:138}),(0,W.A)({r:242,g:201,b:109}),(0,W.A)({r:101,g:197,b:219}),(0,W.A)({r:249,g:147,b:78}),(0,W.A)({r:234,g:100,b:96}),(0,W.A)({r:81,g:149,b:206}),(0,W.A)({r:214,g:131,b:206}),(0,W.A)({r:128,g:110,b:183})],K=ee(1,100,0,1),j=ee(100,100,0,1),k=`linear-gradient(90deg, ${K} 0%, ${j} 100%)`,Q=`linear-gradient(90deg, ${_[0]} 0%, ${_[2]} 30%, ${_[6]} 50%, ${_[7]} 70%, ${_[8]} 100%)`;function ee(Lt,qt,hn,Cn){const gn=Math.min(1,Lt/qt/(Cn-hn)),xn=50-50*gn,Tn=65+7*gn;return(0,W.A)({h:xn,s:100,l:Tn})}function ae(Lt,qt){const hn=ie(Lt),gn=G(hn||"",0)%_.length;let xn=_[gn].clone();return qt.isLight&&(xn=xn.brighten(15)),xn}const Z=["rgb(0, 170, 0)","rgb(148, 142, 142)","rgb(200, 0, 0)"],ne=`linear-gradient(90deg, ${Z[0]} 0%, ${Z[1]} 50%, ${Z[2]} 100%)`,q=["rgb(26, 133, 255)","rgb(148, 142, 142)","rgb(220, 50, 32)"],te=`linear-gradient(90deg, ${q[0]} 0%, ${q[1]} 50%, ${q[2]} 100%)`;function re(Lt,qt,hn,Cn,gn){const xn=gn===N.yU.Default?Z:q,Tn=(0,V.scaleLinear)().domain([-100,0,100]).range(xn),Wn=Lt-qt,Sn=hn-Cn;if(Cn===0||Sn===0){const Xn=Tn(0);return(0,W.A)(Xn)}const An=Math.round(1e4*Wn/Sn)/100,fa=(Math.round(1e4*qt/Cn)/100-An)/An*100,la=Tn(fa);return(0,W.A)(la)}const de=[["phpspy",/^(?<packageName>([^\/]*\/)*)(?<filename>.*\.php+)(?<line_info>.*)$/],["pyspy",/^(?<packageName>([^\/]*\/)*)(?<filename>.*\.py+)(?<line_info>.*)$/],["rbspy",/^(?<packageName>([^\/]*\/)*)(?<filename>.*\.rb+)(?<line_info>.*)$/],["nodespy",/^(\.\/node_modules\/)?(?<packageName>[^/]*)(?<filename>.*\.?(jsx?|tsx?)?):(?<functionName>.*):(?<line_info>.*)$/],["gospy",/^(?<packageName>.*?\/.*?\.|.*?\.|.+)(?<functionName>.*)$/],["javaspy",/^(?<packageName>.+\/)(?<filename>.+\.)(?<functionName>.+)$/],["dotnetspy",/^(?<packageName>.+)\.(.+)\.(.+)\(.*\)$/],["tracing",/^(?<packageName>.+?):.*$/],["pyroscope-rs",/^(?<packageName>[^::]+)/],["ebpfspy",/^(?<packageName>.+)$/],["unknown",/^(?<packageName>.+)$/]];function ie(Lt){for(const[qt,hn]of de){const Cn=Lt.match(hn);if(Cn)return Cn.groups?.packageName||""}}function ge(Lt){const{canvasRef:qt,data:hn,root:Cn,depth:gn,direction:xn,wrapperWidth:Tn,rangeMin:Wn,rangeMax:Sn,matchedLabels:An,textAlign:ta,totalViewTicks:fa,totalColorTicks:la,totalTicksRight:Xn,colorScheme:Ea,focusedItemData:Ca,collapsedMap:Sa}=Lt,aa=Me(qt,Tn,gn),Yn=(0,I.$j)(),za=(0,o.useMemo)(()=>{const Cs=(0,W.A)(Yn.colors.background.secondary);return Yn.isLight?Cs.darken(10).toHexString():Cs.lighten(10).toHexString()},[Yn]),ns=le(la,Xn,Ea,Yn,za,Wn,Sn,An,Ca?Ca.item.level:0),ps=ve(aa,hn,ns,ta,Sa);(0,o.useEffect)(()=>{if(!aa)return;aa.clearRect(0,0,aa.canvas.width,aa.canvas.height);const Cs=new Path2D;pe(Cn,xn,hn,fa,Wn,Sn,Tn,Sa,(Fs,cs,hs,rr,ss,bs,tr)=>{tr?Cs.rect(cs,hs,rr,ss):ps(Fs,cs,hs,rr,ss,bs)}),aa.fillStyle=za,aa.fill(Cs)},[aa,hn,Cn,Tn,Wn,Sn,fa,xn,ps,Sa,za])}function ve(Lt,qt,hn,Cn,gn){return(0,o.useMemo)(()=>Lt?(Tn,Wn,Sn,An,ta,fa)=>{Lt.beginPath(),Lt.rect(Wn+f,Sn,An,ta),Lt.fillStyle=hn(Tn,fa,!1),Lt.stroke(),Lt.fill();const la=gn.get(Tn);let Xn=fa;la&&la.collapsed&&(Xn=`(${la.items.length}) `+fa),An>=l&&(la?(De(Lt,qt,Xn,Tn,An,Cn==="left"?Wn+m+a:Wn,Sn,Cn),ye(Lt,Wn,Sn,ta,Tn,la)):De(Lt,qt,Xn,Tn,An,Wn,Sn,Cn))}:()=>{},[Lt,hn,Cn,qt,gn])}function ye(Lt,qt,hn,Cn,gn,xn){const Tn=qt+m;Lt.beginPath(),Lt.rect(qt,hn,Tn-qt+h+p,Cn),Lt.fill(),Lt.beginPath(),xn.collapsed?Lt.rect(Tn,hn+Cn/4,h,Cn/2):xn.items[0]===gn?Lt.rect(Tn,hn+Cn/2,h,Cn/2):xn.items[xn.items.length-1]===gn?Lt.rect(Tn,hn,h,Cn/2):Lt.rect(Tn,hn,h,Cn),Lt.fillStyle="#666",Lt.fill()}function pe(Lt,qt,hn,Cn,gn,xn,Tn,Wn,Sn){const An=[];An.push({item:Lt,levelOffset:0});const ta=Tn*window.devicePixelRatio/Cn/(xn-gn);let fa;for(;An.length>0;){const{item:la,levelOffset:Xn}=An.shift();let Ea=la.value;const Ca=Ea*ta<=d,Sa=Ea*ta-(Ca?0:f*2),aa=u;if(Sa<i)continue;let Yn=0,za=!1;const ns=Wn.get(la),ps=ns&&ns.collapsed;if(ps&&fa===ns.items[0]?(Yn=qt==="children"?-1:1,za=!0):fa=void 0,!za){const Fs=Re(la.start,Cn,gn,ta),cs=(la.level+Xn)*u;let hs=hn.getLabel(la.itemIndexes[0]);ps&&(fa=la),Sn(la,Fs,cs,Sa,aa,hs,Ca)}const Cs=qt==="children"?la.children:la.parents;Cs&&An.unshift(...Cs.map(Fs=>({item:Fs,levelOffset:Xn+Yn})))}}function le(Lt,qt,hn,Cn,gn,xn,Tn,Wn,Sn){return(0,o.useCallback)(function(ta,fa,la){if(la&&!Wn)return gn;const Xn=ta.valueRight!==void 0&&(hn===N.yU.Default||hn===N.yU.DiffColorBlind)?re(ta.value,ta.valueRight,Lt,qt,hn):hn===N.zM.ValueBased?ee(ta.value,Lt,xn,Tn):ae(fa,Cn);return Wn?Wn.has(fa)?Xn.toHslString():gn:ta.level>Sn-1?Xn.toHslString():Xn.lighten(15).toHslString()},[Lt,qt,hn,Cn,xn,Tn,Wn,Sn,gn])}function Me(Lt,qt,hn){const[Cn,gn]=(0,o.useState)();return(0,o.useEffect)(()=>{if(!(hn&&Lt.current))return;const xn=Lt.current.getContext("2d"),Tn=u*hn;Lt.current.width=Math.round(qt*window.devicePixelRatio),Lt.current.height=Math.round(Tn),Lt.current.style.width=`${qt}px`,Lt.current.style.height=`${Tn/window.devicePixelRatio}px`,xn.textBaseline="middle",xn.font=12*window.devicePixelRatio+"px monospace",xn.strokeStyle="white",gn(xn)},[Lt,gn,qt,hn]),Cn}function De(Lt,qt,hn,Cn,gn,xn,Tn,Wn){Lt.save(),Lt.clip(),Lt.fillStyle="#222";const Sn=qt.valueDisplayProcessor(Cn.value),An=Sn.suffix?Sn.text+Sn.suffix:Sn.text,ta=Lt.measureText(hn),fa=gn-c;let la=`${hn} (${An})`,Xn=Math.max(xn,0)+c;ta.width>fa&&(Lt.textAlign=Wn,Wn==="right"&&(la=hn,Xn=xn+gn-c)),Lt.fillText(la,Xn,Tn+u/2+2),Lt.restore()}function Re(Lt,qt,hn,Cn){return(Lt-qt*hn)*Cn}const me=({data:Lt,rangeMin:qt,rangeMax:hn,matchedLabels:Cn,setRangeMin:gn,setRangeMax:xn,onItemFocused:Tn,focusedItemData:Wn,textAlign:Sn,onSandwich:An,colorScheme:ta,totalProfileTicks:fa,totalProfileTicksRight:la,totalViewTicks:Xn,root:Ea,direction:Ca,depth:Sa,showFlameGraphOnly:aa,collapsedMap:Yn,setCollapsedMap:za,collapsing:ns})=>{const ps=Be(),[Cs,{width:Fs}]=(0,s.A)(),cs=(0,o.useRef)(null),[hs,rr]=(0,o.useState)(),[ss,bs]=(0,o.useState)();ge({canvasRef:cs,colorScheme:ta,data:Lt,focusedItemData:Wn,root:Ea,direction:Ca,depth:Sa,rangeMax:hn,rangeMin:qt,matchedLabels:Cn,textAlign:Sn,totalViewTicks:Xn,totalColorTicks:Lt.isDiffFlamegraph()?fa:Xn,totalTicksRight:la,wrapperWidth:Fs,collapsedMap:Yn});const tr=(0,o.useCallback)(Ya=>{rr(void 0);const Ws=cs.current.clientWidth/Xn/(hn-qt),Bs=we({x:Ya.nativeEvent.offsetX,y:Ya.nativeEvent.offsetY},Ea,Ca,Sa,Ws,Xn,qt,Yn);bs(Bs?{posY:Ya.clientY,posX:Ya.clientX,item:Bs,label:Lt.getLabel(Bs.itemIndexes[0])}:void 0)},[Lt,qt,hn,Xn,Ea,Ca,Sa,Yn]),[or,vs]=(0,o.useState)(),hr=(0,o.useCallback)(Ya=>{if(ss===void 0){rr(void 0),vs(void 0);const Ws=cs.current.clientWidth/Xn/(hn-qt),Bs=we({x:Ya.nativeEvent.offsetX,y:Ya.nativeEvent.offsetY},Ea,Ca,Sa,Ws,Xn,qt,Yn);Bs&&(vs({x:Ya.clientX,y:Ya.clientY}),rr(Bs))}},[qt,hn,Xn,ss,vs,Ea,Ca,Sa,Yn]),_s=(0,o.useCallback)(()=>{rr(void 0)},[]);return(0,o.useEffect)(()=>{const Ya=Ws=>{Ws.target instanceof HTMLElement&&Ws.target.parentElement?.id!=="flameGraphCanvasContainer_clickOutsideCheck"&&bs(void 0)};return window.addEventListener("click",Ya),()=>window.removeEventListener("click",Ya)},[bs]),o.createElement("div",{className:ps.graph},o.createElement("div",{className:ps.canvasWrapper,id:"flameGraphCanvasContainer_clickOutsideCheck",ref:Cs},o.createElement("canvas",{ref:cs,"data-testid":"flameGraph",onClick:tr,onMouseMove:hr,onMouseLeave:_s})),o.createElement(H,{position:or,item:hs,data:Lt,totalTicks:Xn,collapseConfig:hs?Yn.get(hs):void 0}),!aa&&ss&&o.createElement(T,{itemData:ss,collapsing:ns,collapseConfig:Yn.get(ss.item),onMenuItemClick:()=>{bs(void 0)},onItemFocus:()=>{gn(ss.item.start/Xn),xn((ss.item.start+ss.item.value)/Xn),Tn(ss)},onSandwich:()=>{An(Lt.getLabel(ss.item.itemIndexes[0]))},onExpandGroup:()=>{za(he(Yn,ss.item,!1))},onCollapseGroup:()=>{za(he(Yn,ss.item,!0))},onExpandAllGroups:()=>{za(Te(Yn,!1))},onCollapseAllGroups:()=>{za(Te(Yn,!0))},allGroupsCollapsed:Array.from(Yn.values()).every(Ya=>Ya.collapsed),allGroupsExpanded:Array.from(Yn.values()).every(Ya=>!Ya.collapsed)}))};function he(Lt,qt,hn){const Cn=new Map(Lt),gn=Lt.get(qt),xn={...gn,collapsed:hn};for(const Tn of gn.items)Cn.set(Tn,xn);return Cn}function Te(Lt,qt){const hn=new Map(Lt);for(const Cn of Lt.keys()){const xn={...Lt.get(Cn),collapsed:qt};hn.set(Cn,xn)}return hn}const Be=()=>({graph:(0,t.css)({label:"graph",overflow:"auto",flexGrow:1,flexBasis:"50%"}),canvasContainer:(0,t.css)({label:"canvasContainer",display:"flex"}),canvasWrapper:(0,t.css)({label:"canvasWrapper",cursor:"pointer",flex:1,overflow:"hidden"}),sandwichMarker:(0,t.css)({label:"sandwichMarker",writingMode:"vertical-lr",transform:"rotate(180deg)",overflow:"hidden",whiteSpace:"nowrap"}),sandwichMarkerIcon:(0,t.css)({label:"sandwichMarkerIcon",verticalAlign:"baseline"})}),we=(Lt,qt,hn,Cn,gn,xn,Tn,Wn)=>{let Sn=qt,An=hn==="children"?0:Cn-1;const ta=Math.floor(Lt.y/(u/window.devicePixelRatio));let fa;for(;Sn;){const la=Sn;if(Sn=void 0,An===ta){fa=la;break}const Xn=hn==="children"?la.children:la.parents||[];for(const Ea of Xn){const Ca=Re(Ea.start,xn,Tn,gn),Sa=Re(Ea.start+Ea.value,xn,Tn,gn);if(Ca<=Lt.x&&Lt.x<Sa){Sn=Ea;const aa=Wn.get(Ea);(!aa||!aa.collapsed||aa.items[0]===Ea)&&(An=An+(hn==="children"?1:-1));break}}}return fa},Ne=me;var Ze=e(29158);const st=o.memo(({data:Lt,focusedItem:qt,totalTicks:hn,sandwichedLabel:Cn,onFocusPillClick:gn,onSandwichPillClick:xn})=>{const Tn=(0,I.of)(Qe),Wn=[],Sn=(0,M.j_)("short")(hn),An=Lt.valueDisplayProcessor(hn);let ta=An.text+An.suffix;const fa=Lt.getUnitTitle();if(fa==="Count"&&(An.suffix||(ta=An.text)),Wn.push(o.createElement("div",{className:Tn.metadataPill,key:"default"},ta," | ",Sn.text,Sn.suffix," samples (",fa,")")),Cn&&Wn.push(o.createElement("span",{key:"sandwich"},o.createElement(g.I,{size:"sm",name:"angle-right"}),o.createElement("div",{className:Tn.metadataPill},o.createElement(g.I,{size:"sm",name:"gf-show-context"})," ",o.createElement("span",{className:Tn.metadataPillName},Cn.substring(Cn.lastIndexOf("/")+1)),o.createElement(Ze.K,{className:Tn.pillCloseButton,name:"times",size:"sm",onClick:xn,tooltip:"Remove sandwich view","aria-label":"Remove sandwich view"})))),qt){const la=Math.round(1e4*(qt.item.value/hn))/100;Wn.push(o.createElement("span",{key:"focus"},o.createElement(g.I,{size:"sm",name:"angle-right"}),o.createElement("div",{className:Tn.metadataPill},o.createElement(g.I,{size:"sm",name:"eye"})," ",la,"% of total",o.createElement(Ze.K,{className:Tn.pillCloseButton,name:"times",size:"sm",onClick:gn,tooltip:"Remove focus","aria-label":"Remove focus"}))))}return o.createElement(o.Fragment,null,o.createElement("div",{className:Tn.metadata},Wn))});st.displayName="FlameGraphMetadata";const Qe=Lt=>({metadataPill:(0,t.css)`
    label: metadataPill;
    display: inline-flex;
    align-items: center;
    background: ${Lt.colors.background.secondary};
    border-radius: ${Lt.shape.borderRadius(8)};
    padding: ${Lt.spacing(.5,1)};
    font-size: ${Lt.typography.bodySmall.fontSize};
    font-weight: ${Lt.typography.fontWeightMedium};
    line-height: ${Lt.typography.bodySmall.lineHeight};
    color: ${Lt.colors.text.secondary};
  `,pillCloseButton:(0,t.css)`
    label: pillCloseButton;
    vertical-align: text-bottom;
    margin: ${Lt.spacing(0,.5)};
  `,metadata:(0,t.css)`
    margin: 8px 0;
    text-align: center;
  `,metadataPillName:(0,t.css)`
    label: metadataPillName;
    max-width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-left: ${Lt.spacing(.5)};
  `}),ke=st,je=({data:Lt,rangeMin:qt,rangeMax:hn,matchedLabels:Cn,setRangeMin:gn,setRangeMax:xn,onItemFocused:Tn,focusedItemData:Wn,textAlign:Sn,onSandwich:An,sandwichItem:ta,onFocusPillClick:fa,onSandwichPillClick:la,colorScheme:Xn,showFlameGraphOnly:Ea,collapsing:Ca})=>{const Sa=He(),[aa,Yn]=(0,o.useState)(new Map),[za,ns]=(0,o.useState)(),[ps,Cs]=(0,o.useState)(),[Fs,cs]=(0,o.useState)(0),[hs,rr]=(0,o.useState)(),[ss,bs]=(0,o.useState)(0);if((0,o.useEffect)(()=>{if(Lt){Yn(Lt.getCollapsedMap());let vs=Lt.getLevels(),hr=vs.length?vs[0][0].value:0,_s=vs.length?vs[0][0].valueRight:void 0,Ya=hr,Ws;if(ta){const[Bs,Ks]=Lt.getSandwichLevels(ta);vs=Ks,Ws=Bs,Ya=Ks[0]?.[0]?.value??0}ns(vs),Cs(Ws),cs(hr),rr(_s),bs(Ya)}},[Lt,ta]),!za)return null;const tr={data:Lt,rangeMin:qt,rangeMax:hn,matchedLabels:Cn,setRangeMin:gn,setRangeMax:xn,onItemFocused:Tn,focusedItemData:Wn,textAlign:Sn,onSandwich:An,colorScheme:Xn,totalProfileTicks:Fs,totalProfileTicksRight:hs,totalViewTicks:ss,showFlameGraphOnly:Ea,collapsedMap:aa,setCollapsedMap:Yn,collapsing:Ca},or=ps?o.createElement(o.Fragment,null,o.createElement("div",{className:Sa.sandwichCanvasWrapper},o.createElement("div",{className:Sa.sandwichMarker},"Callers",o.createElement(g.I,{className:Sa.sandwichMarkerIcon,name:"arrow-down"})),o.createElement(Ne,{...tr,root:ps[ps.length-1][0],depth:ps.length,direction:"parents",collapsing:!1})),o.createElement("div",{className:Sa.sandwichCanvasWrapper},o.createElement("div",{className:(0,t.cx)(Sa.sandwichMarker,Sa.sandwichMarkerCalees)},o.createElement(g.I,{className:Sa.sandwichMarkerIcon,name:"arrow-up"}),"Callees"),o.createElement(Ne,{...tr,root:za[0][0],depth:za.length,direction:"children",collapsing:!1}))):o.createElement(Ne,{...tr,root:za[0][0],depth:za.length,direction:"children"});return o.createElement("div",{className:Sa.graph},o.createElement(ke,{data:Lt,focusedItem:Wn,sandwichedLabel:ta,totalTicks:ss,onFocusPillClick:fa,onSandwichPillClick:la}),or)},He=()=>({graph:(0,t.css)`
    label: graph;
    overflow: auto;
    flex-grow: 1;
    flex-basis: 50%;
  `,sandwichCanvasWrapper:(0,t.css)`
    label: sandwichCanvasWrapper;
    display: flex;
    margin-bottom: ${u/window.devicePixelRatio}px;
  `,sandwichMarker:(0,t.css)`
    label: sandwichMarker;
    writing-mode: vertical-lr;
    transform: rotate(180deg);
    overflow: hidden;
    white-space: nowrap;
  `,sandwichMarkerCalees:(0,t.css)`
    label: sandwichMarkerCalees;
    text-align: right;
  `,sandwichMarkerIcon:(0,t.css)`
    label: sandwichMarkerIcon;
    vertical-align: baseline;
  `}),Ge=je;var Oe=e(76365),Ke=e(75198),Ee=e(80292),J=e(55852),oe=e(10354),ue=e(94354),be=e(38138),Le=e(83122);const _e=({search:Lt,setSearch:qt,selectedView:hn,setSelectedView:Cn,containerWidth:gn,onReset:xn,textAlign:Tn,onTextAlignChange:Wn,showResetButton:Sn,colorScheme:An,onColorSchemeChange:ta,stickyHeader:fa,extraHeaderElements:la,vertical:Xn,isDiffMode:Ea})=>{const Ca=(0,I.of)(at,fa),[Sa,aa]=it(Lt,qt),Yn=Sa!==""?o.createElement(J.$n,{icon:"times",fill:"text",size:"sm",onClick:()=>{qt(""),aa("")}},"Clear"):null;return o.createElement("div",{className:Ca.header},o.createElement("div",{className:Ca.inputContainer},o.createElement(oe.p,{value:Sa||"",onChange:za=>{aa(za.currentTarget.value)},placeholder:"Search...",suffix:Yn})),o.createElement("div",{className:Ca.rightContainer},Sn&&o.createElement(J.$n,{variant:"secondary",fill:"outline",size:"sm",icon:"history-alt",tooltip:"Reset focus and sandwich state",onClick:()=>{xn()},className:Ca.buttonSpacing,"aria-label":"Reset focus and sandwich state"}),o.createElement(Ve,{value:An,onChange:ta,isDiffMode:Ea}),o.createElement(ue.z,{size:"sm",disabled:hn===N.F8.TopTable,options:We,value:Tn,onChange:Wn,className:Ca.buttonSpacing}),o.createElement(ue.z,{size:"sm",options:$e(gn,Xn),value:hn,onChange:Cn}),la&&o.createElement("div",{className:Ca.extraElements},la)))};function Ve(Lt){const qt=(0,I.of)(at,!1);let hn=o.createElement(be.W,null,o.createElement(be.W.Item,{label:"By package name",onClick:()=>Lt.onChange(N.zM.PackageBased)}),o.createElement(be.W.Item,{label:"By value",onClick:()=>Lt.onChange(N.zM.ValueBased)}));Lt.isDiffMode&&(hn=o.createElement(be.W,null,o.createElement(be.W.Item,{label:"Default (green to red)",onClick:()=>Lt.onChange(N.yU.Default)}),o.createElement(be.W.Item,{label:"Color blind (blue to red)",onClick:()=>Lt.onChange(N.yU.DiffColorBlind)})));const Cn={[N.zM.ValueBased]:qt.colorDotByValue,[N.zM.PackageBased]:qt.colorDotByPackage,[N.yU.DiffColorBlind]:qt.colorDotDiffColorBlind,[N.yU.Default]:qt.colorDotDiffDefault}[Lt.value]||qt.colorDotByValue;return o.createElement(Le.m,{overlay:hn},o.createElement(J.$n,{variant:"secondary",fill:"outline",size:"sm",tooltip:"Change color scheme",onClick:()=>{},className:qt.buttonSpacing,"aria-label":"Change color scheme"},o.createElement("span",{className:(0,t.cx)(qt.colorDot,Cn)})))}const We=[{value:"left",description:"Align text left",icon:"align-left"},{value:"right",description:"Align text right",icon:"align-right"}];function $e(Lt,qt){let hn=[{value:N.F8.TopTable,label:"Top Table",description:"Only show top table"},{value:N.F8.FlameGraph,label:"Flame Graph",description:"Only show flame graph"}];return(Lt>=v||qt)&&hn.push({value:N.F8.Both,label:"Both",description:"Show both the top table and flame graph"}),hn}function it(Lt,qt){const[hn,Cn]=(0,o.useState)(Lt),gn=(0,Ee.A)(Lt);return(0,Ke.A)(()=>{qt(hn)},250,[hn]),(0,o.useEffect)(()=>{gn!==Lt&&Lt!==hn&&Cn(Lt)},[Lt,gn,hn]),[hn,Cn]}const at=(Lt,qt)=>({header:(0,t.css)`
    label: header;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    width: 100%;
    top: 0;
    ${qt?(0,t.css)`
          z-index: ${Lt.zIndex.navbarFixed};
          position: sticky;
          padding-bottom: ${Lt.spacing(1)};
          padding-top: ${Lt.spacing(1)};
          background: ${Lt.colors.background.primary};
        `:""};
  `,inputContainer:(0,t.css)`
    label: inputContainer;
    margin-right: 20px;
    flex-grow: 1;
    min-width: 150px;
    max-width: 350px;
  `,rightContainer:(0,t.css)`
    label: rightContainer;
    display: flex;
    align-items: flex-start;
    flex-wrap: wrap;
  `,buttonSpacing:(0,t.css)`
    label: buttonSpacing;
    margin-right: ${Lt.spacing(1)};
  `,resetButton:(0,t.css)`
    label: resetButton;
    display: flex;
    margin-right: ${Lt.spacing(2)};
  `,resetButtonIconWrapper:(0,t.css)`
    label: resetButtonIcon;
    padding: 0 5px;
    color: ${Lt.colors.text.disabled};
  `,colorDot:(0,t.css)`
    label: colorDot;
    display: inline-block;
    width: 10px;
    height: 10px;
    border-radius: 50%;
  `,colorDotByValue:(0,t.css)`
    label: colorDotByValue;
    background: ${k};
  `,colorDotByPackage:(0,t.css)`
    label: colorDotByPackage;
    background: ${Q};
  `,colorDotDiffDefault:(0,t.css)`
    label: colorDotDiffDefault;
    background: ${ne};
  `,colorDotDiffColorBlind:(0,t.css)`
    label: colorDotDiffColorBlind;
    background: ${te};
  `,extraElements:(0,t.css)`
    label: extraElements;
    margin-left: ${Lt.spacing(1)};
  `}),ht=_e;var ft=e(70713),gt=e(11261),Dt=e(25019),It=e(90708),jt=e(77093),Vt=e(52622);const _t=o.memo(({data:Lt,onSymbolClick:qt,search:hn,matchedLabels:Cn,onSearch:gn,sandwichItem:xn,onSandwich:Tn,onTableSort:Wn})=>{const Sn=(0,o.useMemo)(()=>{let Xn={};for(let Ea=0;Ea<Lt.data.length;Ea++){const Ca=Lt.getValue(Ea),Sa=Lt.getValueRight(Ea),aa=Lt.getSelf(Ea),Yn=Lt.getLabel(Ea);(!Cn||Cn.has(Yn))&&(Xn[Yn]=Xn[Yn]||{},Xn[Yn].self=Xn[Yn].self?Xn[Yn].self+aa:aa,Xn[Yn].total=Xn[Yn].total?Xn[Yn].total+Ca:Ca,Xn[Yn].totalRight=Xn[Yn].totalRight?Xn[Yn].totalRight+Sa:Sa)}return Xn},[Lt,Cn]),An=(0,I.of)(Yt),ta=(0,I.$j)(),[fa,la]=(0,o.useState)([{displayName:"Self",desc:!0}]);return o.createElement("div",{className:An.topTableContainer,"data-testid":"topTable"},o.createElement(ft.Ay,{style:{width:"100%"}},({width:Xn,height:Ea})=>{if(Xn<3||Ea<3)return null;const Ca=rt(Lt,Sn,Xn,qt,gn,Tn,ta,hn,xn);return o.createElement(jt.X,{initialSortBy:fa,onSortByChange:Sa=>{Sa&&Sa.length&&Wn?.(Sa[0].displayName+"_"+(Sa[0].desc?"desc":"asc")),la(Sa)},data:Ca,width:Xn,height:Ea})}))});_t.displayName="FlameGraphTopTableContainer";function rt(Lt,qt,hn,Cn,gn,xn,Tn,Wn,Sn){const An=ct(xn,gn,Wn,Sn),ta={type:gt.PU.string,name:"Symbol",values:[],config:{custom:{width:hn-pn-E*2},links:[{title:"Highlight symbol",url:"",onClick:Xn=>{const Ca=Xn.origin.field.values[Xn.origin.rowIndex];Cn(Ca)}}]}};let fa;if(Lt.isDiffFlamegraph()){ta.config.custom.width=hn-pn-E*3;const Xn=St("Baseline","percent"),Ea=St("Comparison","percent"),Ca=St("Diff","percent");Ca.config.custom.cellOptions.type=Vt.ob.ColorText,Ca.config.mappings=[{type:Dt.d.ValueToText,options:{[1/0]:{text:"new",color:"red"}}},{type:Dt.d.ValueToText,options:{[-100]:{text:"removed",color:"green"}}},{type:Dt.d.RangeToText,options:{from:0,to:1/0,result:{color:"red"}}},{type:Dt.d.RangeToText,options:{from:-1/0,to:0,result:{color:"green"}}}];const Sa=Lt.getLevels(),aa=Sa.length?Sa[0][0].value:0,Yn=Sa.length?Sa[0][0].valueRight:void 0;for(let za in qt){An.values.push(null),ta.values.push(za);const ns=qt[za].total,ps=qt[za].totalRight,Cs=aa-Yn,Fs=Math.round(1e4*ns/Cs)/100,cs=Math.round(1e4*ps/Yn)/100,hs=(cs-Fs)/Fs*100;Ca.values.push(hs),Xn.values.push(Fs),Ea.values.push(cs)}fa={fields:[An,ta,Xn,Ea,Ca],length:ta.values.length}}else{const Xn=St("Self",Lt.selfField.config.unit),Ea=St("Total",Lt.valueField.config.unit);for(let Ca in qt)An.values.push(null),ta.values.push(Ca),Xn.values.push(qt[Ca].self),Ea.values.push(qt[Ca].total);fa={fields:[An,ta,Xn,Ea],length:ta.values.length}}return(0,It.we)({data:[fa],fieldConfig:{defaults:{},overrides:[]},replaceVariables:Xn=>Xn,theme:Tn})[0]}function St(Lt,qt){const hn={width:E,align:"auto",inspect:!1,cellOptions:{type:Vt.ob.Auto}};return{type:gt.PU.number,name:Lt,values:[],config:{unit:qt,custom:hn}}}const pn=61;function ct(Lt,qt,hn,Cn){const gn={type:Vt.ob.Custom,cellComponent:Tn=>o.createElement(Ct,{frame:Tn.frame,onSandwich:Lt,onSearch:qt,search:hn,sandwichItem:Cn,rowIndex:Tn.rowIndex})},xn={filterable:!1,width:pn,hideHeader:!0,inspect:!1,align:"auto",cellOptions:gn};return{type:gt.PU.number,name:"actions",values:[],config:{custom:xn}}}function Ct(Lt){const qt=cn(),hn=Lt.frame.fields.find(xn=>xn.name==="Symbol")?.values[Lt.rowIndex],Cn=Lt.search===hn,gn=Lt.sandwichItem===hn;return o.createElement("div",{className:qt.actionCellWrapper},o.createElement(Ze.K,{className:qt.actionCellButton,name:"search",variant:Cn?"primary":"secondary",tooltip:Cn?"Clear from search":"Search for symbol","aria-label":Cn?"Clear from search":"Search for symbol",onClick:()=>{Lt.onSearch(Cn?"":hn)}}),o.createElement(Ze.K,{className:qt.actionCellButton,name:"gf-show-context",tooltip:gn?"Remove from sandwich view":"Show in sandwich view",variant:gn?"primary":"secondary","aria-label":gn?"Remove from sandwich view":"Show in sandwich view",onClick:()=>{Lt.onSandwich(gn?void 0:hn)}}))}const Yt=Lt=>({topTableContainer:(0,t.css)({label:"topTableContainer",padding:Lt.spacing(1),backgroundColor:Lt.colors.background.secondary,height:"100%"})}),cn=()=>({actionCellWrapper:(0,t.css)`
      label: actionCellWrapper;
      display: flex;
      height: 24px;
    `,actionCellButton:(0,t.css)`
      label: actionCellButton;
      margin-right: 0;
      width: 24px;
    `}),vn=_t,rn=new n.A,en=({data:Lt,onTableSymbolClick:qt,onViewSelected:hn,onTextAlignSelected:Cn,onTableSort:gn,getTheme:xn,stickyHeader:Tn,extraHeaderElements:Wn,vertical:Sn,showFlameGraphOnly:An,disableCollapsing:ta})=>{const[fa,la]=(0,o.useState)(),[Xn,Ea]=(0,o.useState)(0),[Ca,Sa]=(0,o.useState)(1),[aa,Yn]=(0,o.useState)(""),[za,ns]=(0,o.useState)(N.F8.Both),[ps,{width:Cs}]=(0,s.A)(),[Fs,cs]=(0,o.useState)("left"),[hs,rr]=(0,o.useState)(),ss=xn(),bs=(0,o.useMemo)(()=>{if(Lt)return new Oe.Jz(Lt,{collapsing:!ta},ss)},[Lt,ss,ta]),[tr,or]=mn(bs),vs=fn(ss),hr=Un(aa,bs);(0,o.useEffect)(()=>{Cs>0&&Cs<v&&za===N.F8.Both&&!Sn&&ns(N.F8.FlameGraph)},[za,ns,Cs,Sn]);const _s=(0,o.useCallback)(()=>{la(void 0),Ea(0),Sa(1)},[la,Sa,Ea]);function Ya(){rr(void 0)}(0,o.useEffect)(()=>{_s(),Ya()},[Lt,_s]);const Ws=(0,o.useCallback)(Js=>{aa===Js?Yn(""):(qt?.(Js),Yn(Js),_s())},[Yn,_s,qt,aa]);if(!bs)return null;const Bs=o.createElement(Ge,{data:bs,rangeMin:Xn,rangeMax:Ca,matchedLabels:hr,setRangeMin:Ea,setRangeMax:Sa,onItemFocused:Js=>la(Js),focusedItemData:fa,textAlign:Fs,sandwichItem:hs,onSandwich:Js=>{_s(),rr(Js)},onFocusPillClick:_s,onSandwichPillClick:Ya,colorScheme:tr,showFlameGraphOnly:An,collapsing:!ta}),Ks=o.createElement(vn,{data:bs,onSymbolClick:Ws,search:aa,matchedLabels:hr,sandwichItem:hs,onSandwich:rr,onSearch:Yn,onTableSort:gn});let Vr;return An||za===N.F8.FlameGraph?Vr=Bs:za===N.F8.TopTable?Vr=o.createElement("div",{className:vs.tableContainer},Ks):za===N.F8.Both&&(Sn?Vr=o.createElement("div",null,o.createElement("div",{className:vs.verticalGraphContainer},Bs),o.createElement("div",{className:vs.verticalTableContainer},Ks)):Vr=o.createElement("div",{className:vs.horizontalContainer},o.createElement("div",{className:vs.horizontalTableContainer},Ks),o.createElement("div",{className:vs.horizontalGraphContainer},Bs))),o.createElement(r.D.Provider,{value:ss},o.createElement("div",{ref:ps,className:vs.container},!An&&o.createElement(ht,{search:aa,setSearch:Yn,selectedView:za,setSelectedView:Js=>{ns(Js),hn?.(Js)},containerWidth:Cs,onReset:()=>{_s(),Ya()},textAlign:Fs,onTextAlignChange:Js=>{cs(Js),Cn?.(Js)},showResetButton:!!(fa||hs),colorScheme:tr,onColorSchemeChange:or,stickyHeader:!!Tn,extraHeaderElements:Wn,vertical:Sn,isDiffMode:!!bs.isDiffFlamegraph()}),o.createElement("div",{className:vs.body},Vr)))};function mn(Lt){const qt=Lt?.isDiffFlamegraph()?N.yU.Default:N.zM.PackageBased,[hn,Cn]=(0,o.useState)(qt);return(0,o.useEffect)(()=>{Cn(qt)},[qt]),[hn,Cn]}function Un(Lt,qt){return(0,o.useMemo)(()=>{if(Lt&&qt){const hn=new Set;let Cn=rn.filter(qt.getUniqueLabels(),Lt);if(Cn)for(let gn of Cn)hn.add(qt.getUniqueLabels()[gn]);return hn}},[Lt,qt])}function fn(Lt){return{container:(0,t.css)({label:"container",overflow:"auto",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0,gap:Lt.spacing(1)}),body:(0,t.css)({label:"body",flexGrow:1}),tableContainer:(0,t.css)({height:800}),horizontalContainer:(0,t.css)({label:"horizontalContainer",display:"flex",minHeight:0,flexDirection:"row",columnGap:Lt.spacing(1),width:"100%"}),horizontalGraphContainer:(0,t.css)({flexBasis:"50%"}),horizontalTableContainer:(0,t.css)({flexBasis:"50%",maxHeight:800}),verticalGraphContainer:(0,t.css)({marginBottom:Lt.spacing(1)}),verticalTableContainer:(0,t.css)({height:800})}}const ca=en},5546:(Y,A,e)=>{"use strict";e.d(A,{F8:()=>n,Zk:()=>t,yU:()=>s,zM:()=>o});var t=(r=>(r.Bytes="bytes",r.Short="short",r.Nanoseconds="ns",r))(t||{}),n=(r=>(r.TopTable="topTable",r.FlameGraph="flameGraph",r.Both="both",r))(n||{}),o=(r=>(r.ValueBased="valueBased",r.PackageBased="packageBased",r))(o||{}),s=(r=>(r.Default="default",r.DiffColorBlind="diffColorBlind",r))(s||{})},20323:(Y,A,e)=>{"use strict";e.d(A,{e:()=>u});var t=e(96540),n=e(40996),o=e(14186),s=e(10354);const r=/^(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])$/,g=(d,i)=>!(d.match(i)||!d),u=d=>{const i=d.validationRegex||r,[l,f]=(0,t.useState)(()=>d.value?g(d.value,i):!1);(0,n.A)(()=>{f(g(d.value,i))},500,[d.value]);const c={labelWidth:26,disabled:d.disabled??!1,invalid:l,error:d.isInvalidError};return d.label&&(c.label=d.label,c.tooltip=d.tooltip||""),t.createElement(o.I,{...c},t.createElement(s.p,{type:"text",placeholder:d.placeholder||"0",width:d.width||40,onChange:h=>{d.onChange(h.currentTarget.value)},value:d.value,"aria-label":d.ariaLabel||"interval input"}))}},61653:(Y,A,e)=>{"use strict";e.d(A,{Dk:()=>p,NI:()=>a,ft:()=>h,x3:()=>c});var t=e(32196),n=e(96540),o=e(50877),s=e(22391),r=e(29020),g=e(35931),u=e(40845),d=e(39268),i=e(14186),l=e(88323),f=e(10354);const c="None",h="Duration",p="Tag";function m({options:E,onOptionsChange:D}){const b=(0,u.of)(v),P=[c,h,p].map(o.z);return n.createElement("div",{className:(0,t.css)({width:"100%"})},n.createElement(d.C,{className:b.row},n.createElement(i.I,{label:"Label",labelWidth:26,tooltip:"Default: duration",grow:!0},n.createElement(l.l6,{inputId:"label",options:P,value:E.jsonData.spanBar?.type||"",onChange:y=>{(0,s.lO)({onOptionsChange:D,options:E},"spanBar",{...E.jsonData.spanBar,type:y?.value??""})},placeholder:"Duration",isClearable:!0,"aria-label":"select-label-name",width:40}))),E.jsonData.spanBar?.type===p&&n.createElement(d.C,{className:b.row},n.createElement(i.I,{label:"Tag key",labelWidth:26,tooltip:"Tag key which will be used to get the tag value. A span's attributes and resources will be searched for the tag key"},n.createElement(f.p,{type:"text",placeholder:"Enter tag key",onChange:y=>(0,s.lO)({onOptionsChange:D,options:E},"spanBar",{...E.jsonData.spanBar,tag:y.currentTarget.value}),value:E.jsonData.spanBar?.tag||"",width:40}))))}const a=({options:E,onOptionsChange:D})=>{let b=E.type;return b+=E.type==="tempo"?"/configure-tempo-data-source/#span-bar":"/#span-bar",n.createElement(r.I,{title:"Span bar",description:n.createElement(g.H,{description:"Add additional info next to the service and operation on a span bar row in the trace view.",suffix:b,feature:"the span bar"})},n.createElement(m,{options:E,onOptionsChange:D}))},v=E=>({infoText:(0,t.css)({label:"infoText",paddingBottom:E.spacing(2),color:E.colors.text.secondary}),row:(0,t.css)({label:"row",alignItems:"baseline"})})},63009:(Y,A,e)=>{"use strict";e.d(A,{l:()=>u});var t=e(32196),n=e(96540),o=e(40845),s=e(57752),r=e(76892),g=e(27746);const u=({values:i,onChange:l,id:f})=>{const c=(0,o.of)(d);return n.createElement("div",{className:c.wrapper},i.length?i.map((h,p)=>n.createElement("div",{className:c.pair,key:p},n.createElement(s.o,{id:`${f}-key-${p}`,placeholder:"Tag name",value:h.key,onChange:m=>{l(i.map((a,v)=>v===p?{...a,key:String(m)}:a))}}),n.createElement(r.c,{"aria-label":"equals",className:c.operator},"as"),n.createElement(s.o,{id:`${f}-value-${p}`,placeholder:"New name (optional)",value:h.value||"",onChange:m=>{l(i.map((a,v)=>v===p?{...a,value:String(m)}:a))}}),n.createElement(g.I,{onClick:()=>l([...i.slice(0,p),...i.slice(p+1)]),className:(0,t.cx)(c.removeTag,"query-part"),"aria-label":"Remove tag",type:"button",icon:"times"}),p===i.length-1?n.createElement(g.I,{onClick:()=>l([...i,{key:"",value:""}]),className:"query-part","aria-label":"Add tag",type:"button",icon:"plus"}):null)):n.createElement(g.I,{icon:"plus",onClick:()=>l([...i,{key:"",value:""}]),className:"query-part","aria-label":"Add tag",type:"button"}))},d=i=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column",gap:`${i.spacing(.5)} 0`}),pair:(0,t.css)({display:"flex",justifyContent:"start",alignItems:"center"}),operator:(0,t.css)({color:i.v1.palette.orange,width:"auto"}),removeTag:(0,t.css)({marginRight:i.spacing(.5)})})},43549:(Y,A,e)=>{"use strict";e.d(A,{FJ:()=>v,T0:()=>E,XX:()=>a,cJ:()=>m,sn:()=>c});var t=e(32196),n=e(96540),o=e(91062),s=e(35931),r=e(55882),g=e(39268),u=e(14186),d=e(15292),i=e(10354),l=e(20323),f=e(63009);function c(D){if(D?.tracesToLogsV2)return D.tracesToLogsV2;if(!D?.tracesToLogs)return;const b={customQuery:!1};return b.datasourceUid=D.tracesToLogs.datasourceUid,b.tags=D.tracesToLogs.mapTagNamesEnabled?D.tracesToLogs.mappedTags:D.tracesToLogs.tags?.map(P=>({key:P})),b.filterByTraceID=D.tracesToLogs.filterByTraceID,b.filterBySpanID=D.tracesToLogs.filterBySpanID,b.spanStartTimeShift=D.tracesToLogs.spanStartTimeShift,b.spanEndTimeShift=D.tracesToLogs.spanEndTimeShift,b}function h({options:D,onOptionsChange:b}){const P=["loki","elasticsearch","grafana-splunk-datasource","grafana-opensearch-datasource","grafana-falconlogscale-datasource","googlecloud-logging-datasource"],y=(0,n.useMemo)(()=>c(D.jsonData)||{customQuery:!1},[D.jsonData]),{query:T="",tags:M,customQuery:I}=y,x=(0,n.useCallback)(S=>{b({...D,jsonData:{...D.jsonData,tracesToLogsV2:{...y,...S},tracesToLogs:void 0}})},[b,D,y]);return n.createElement("div",{className:(0,t.css)({width:"100%"})},n.createElement(g.C,null,n.createElement(u.I,{tooltip:"The logs data source the trace is going to navigate to",label:"Data source",labelWidth:26},n.createElement(r.s,{inputId:"trace-to-logs-data-source-picker",filter:S=>P.includes(S.type),current:y.datasourceUid,noDefault:!0,width:40,onChange:S=>x({datasourceUid:S.uid})}))),n.createElement(g.C,null,n.createElement(l.e,{label:m("start"),tooltip:a("start","0"),value:y.spanStartTimeShift||"",onChange:S=>{x({spanStartTimeShift:S})},isInvalidError:v})),n.createElement(g.C,null,n.createElement(l.e,{label:m("end"),tooltip:a("end","0"),value:y.spanEndTimeShift||"",onChange:S=>{x({spanEndTimeShift:S})},isInvalidError:v})),n.createElement(g.C,null,n.createElement(u.I,{tooltip:"Tags that will be used in the query. Default tags: 'cluster', 'hostname', 'namespace', 'pod', 'service.name', 'service.namespace'",label:"Tags",labelWidth:26},n.createElement(f.l,{values:M??[],onChange:S=>x({tags:S})}))),n.createElement(p,{disabled:I,type:"trace",id:"filterByTraceID",value:!!y.filterByTraceID,onChange:S=>x({filterByTraceID:S})}),n.createElement(p,{disabled:I,type:"span",id:"filterBySpanID",value:!!y.filterBySpanID,onChange:S=>x({filterBySpanID:S})}),n.createElement(g.C,null,n.createElement(u.I,{tooltip:"Use a custom query with the possibility to interpolate variables from the trace or span",label:"Use custom query",labelWidth:26},n.createElement(d.K,{id:"customQuerySwitch",value:I,onChange:S=>x({customQuery:S.currentTarget.checked})}))),I&&n.createElement(u.I,{label:"Query",labelWidth:26,tooltip:"The query that will run when navigating from a trace to logs data source. Interpolate tags using the `$__tags` keyword",grow:!0},n.createElement(i.p,{label:"Query",type:"text",allowFullScreen:!0,value:T,onChange:S=>x({query:S.currentTarget.value})})))}function p(D){return n.createElement(g.C,null,n.createElement(u.I,{disabled:D.disabled,label:`Filter by ${D.type} ID`,labelWidth:26,grow:!0,tooltip:`Filters logs by ${D.type} ID`},n.createElement(d.K,{id:D.id,value:D.value,onChange:b=>D.onChange(b.currentTarget.checked)})))}const m=D=>`Span ${D} time shift`,a=(D,b)=>`Shifts the ${D} time of the span. Default: ${b} (Time units can be used here, for example: 5s, -1m, 3h)`,v="Invalid time shift. See tooltip for examples.",E=({options:D,onOptionsChange:b})=>{let P=D.type;return P+=D.type==="tempo"?"/configure-tempo-data-source/#trace-to-logs":"/#trace-to-logs",n.createElement(o.A,{title:"Trace to logs",description:n.createElement(s.H,{description:"Navigate from a trace span to the selected data source's logs.",suffix:P,feature:"trace to logs"}),isCollapsible:!0,isInitiallyOpen:!0},n.createElement(h,{options:D,onOptionsChange:b}))}},80822:(Y,A,e)=>{"use strict";e.d(A,{Wn:()=>r,_k:()=>s});var t=e(41260),n=e(11261),o=e(21423);function s(c,h){const p=r({data:c.series},{data:h.series}).data;return{...c,series:p}}function r(c,h){if(!c)return i(h);h.data.forEach(v=>{const E=c.data.find(D=>f(D,v));if(!E){c.data.push(l(v));return}g(E,v)});const p=[...c.errors??[],...h.errors??[]];p.length>0&&(c.errors=p);const m=c.error??h.error;m!=null&&(c.error=m);const a=[...c.traceIds??[],...h.traceIds??[]];return a.length>0&&(c.traceIds=a),c}function g(c,h){const p=Math.max(c.fields.length,h.fields.length);for(let m=0;m<p;m++){if(!c.fields[m])continue;const a=c.fields[m].name?h.fields.find(v=>v.name===c.fields[m].name):h.fields[m];if(a&&(c.fields[m].values=[].concat.apply(a.values,c.fields[m].values),a.nanos)){const v=c.fields[m].nanos?.slice()||[];c.fields[m].nanos=h.fields[m].nanos?.concat(v)}}c.length+=h.length,c.meta={...c.meta,stats:d(c.meta?.stats??[],h.meta?.stats??[])}}const u="Summary: total bytes processed";function d(c,h){const p=c.find(v=>v.displayName===u),m=h.find(v=>v.displayName===u);if(m!=null&&p!=null)return[{value:m.value+p.value,displayName:u,unit:p.unit}];const a=m??p;return a!=null?[a]:[]}function i(c){return{...c,data:c.data.map(l)}}function l(c){return{...c,fields:c.fields.map(h=>({...h,values:h.values}))}}function f(c,h){if(c.refId!==h.refId)return!1;const p=c.meta?.type,m=h.meta?.type;if(p!==m)return!1;if(p===t.m.TimeSeriesMulti){const E=c.fields.find(b=>b.type===n.PU.number),D=h.fields.find(b=>b.type===n.PU.number);return E===void 0||D===void 0?!1:(0,o.ab)(E.labels??{},D.labels??{})}const a=c.meta?.custom?.frameType,v=h.meta?.custom?.frameType;return a==="LabeledTimeValues"&&v==="LabeledTimeValues"}},32528:(Y,A,e)=>{"use strict";e.d(A,{GT:()=>g,dY:()=>d,jP:()=>s,pl:()=>r});var t=e(37471),n=e(25352),o=e(11261);function s(i){return i.sort((f,c)=>f[0]-c[0]),i.reduce((f,c)=>{if(!f.length)return[c];const h=f.slice(-1)[0],[p,m]=h,[a,v]=c;return v<m?f:a>m?[...f,c]:[...f.slice(0,-1),[p,v]]},[]).reduce((f,c)=>f+(c[1]-c[0]),0)}function r(i){const l={};let f;for(let c=0;f=i(c),!!f;c++){l[f.id]?l[f.id].span=f.span:l[f.id]={span:f.span,children:[]};for(const h of f.parentIds)h&&(l[h]?l[h].children.push(f.id):l[h]={span:void 0,children:[f.id]})}return l}function g(i,l,f){return{main:`${u(i)}ms (${u(i/l*100)}%)`,secondary:`${u(f)}ms (${u(f/i*100)}%)`}}function u(i){return parseFloat(i.toFixed(2))}function d(){const i=new t.k({fields:[{name:n.u.id,type:o.PU.string},{name:n.u.title,type:o.PU.string},{name:n.u.subTitle,type:o.PU.string},{name:n.u.mainStat,type:o.PU.string,config:{displayName:"Total time (% of trace)"}},{name:n.u.secondaryStat,type:o.PU.string,config:{displayName:"Self time (% of total)"}},{name:n.u.color,type:o.PU.number,config:{color:{mode:"continuous-GrYlRd"},displayName:"Self time / Trace duration"}}],meta:{preferredVisualisationType:"nodeGraph"}}),l=new t.k({fields:[{name:n.u.id,type:o.PU.string},{name:n.u.target,type:o.PU.string},{name:n.u.source,type:o.PU.string}],meta:{preferredVisualisationType:"nodeGraph"}});return[i,l]}},5261:(Y,A,e)=>{"use strict";e.d(A,{L:()=>n,y:()=>o});var t=e(32264);function n(s){return{grafana_version:t.$.buildInfo.version,plugin_type:String(s.type),plugin_version:s.info.version,plugin_id:s.id,plugin_name:s.name}}function o(s){return{...n(s.meta),datasource_uid:s.uid}}},44027:(Y,A,e)=>{"use strict";e.d(A,{G:()=>u});var t=e(96540),n=e(92470),o=e(95187),s=e(14110),r=e(5261);const g="grafana_plugin_";function u(){const i=(0,n.Q)();return(0,t.useMemo)(()=>{const l=(0,o.S)(i)?(0,r.y)(i.instanceSettings):(0,r.L)(i.meta);return(f,c)=>{if(!d(f))throw new Error(`Interactions reported in plugins should start with: "${g}".`);return(0,s.rR)(f,{...c,...l})}},[i])}function d(i){return i.startsWith(g)&&i.length>g.length}},61298:(Y,A,e)=>{"use strict";e.d(A,{fX:()=>o,nB:()=>n,n_:()=>t,p6:()=>s});var t=(r=>(r.DashboardView="dashboard-view",r.DataRequest="data-request",r))(t||{});const n=r=>!!r.payload.page,o=r=>!!r.payload.interactionName,s=r=>!!r.payload.experimentId},14110:(Y,A,e)=>{"use strict";e.d(A,{G$:()=>s,Jy:()=>r,Xp:()=>u,rR:()=>g});var t=e(32264),n=e(12131),o=e(63415);const s=d=>{(0,o.x$)().addEvent({type:o.on.MetaAnalytics,payload:d})},r=()=>{const d=n.Ny.getLocation(),i=`${t.$.appSubUrl??""}${d.pathname}${d.search}${d.hash}`;(0,o.x$)().addEvent({type:o.on.Pageview,payload:{page:i}})},g=(d,i)=>{(0,o.x$)().addEvent({type:o.on.Interaction,payload:{interactionName:d,properties:i}})},u=(d,i,l)=>{(0,o.x$)().addEvent({type:o.on.ExperimentView,payload:{experimentId:d,experimentGroup:i,experimentVariant:l}})}},55882:(Y,A,e)=>{"use strict";e.d(A,{s:()=>l});var t=e(96540),n=e(22391),o=e(51527),s=e(13544),r=e(88323),g=e(66864),u=e(98624),d=e(19347),i=e(26657);class l extends t.PureComponent{constructor(c){super(c),this.dataSourceSrv=(0,d.l)(),this.state={},this.onChange=(h,p)=>{if(p.action==="clear"&&this.props.onClear){this.props.onClear();return}const m=this.dataSourceSrv.getInstanceSettings(h.value);m&&(this.props.onChange(m),this.setState({error:void 0}))}}componentDidMount(){const{current:c}=this.props;this.dataSourceSrv.getInstanceSettings(c)||this.setState({error:"Could not find data source "+c})}getCurrentValue(){const{current:c,hideTextValue:h,noDefault:p}=this.props;if(!c&&p)return;const m=this.dataSourceSrv.getInstanceSettings(c);if(m)return{label:m.name.slice(0,37),value:m.uid,imgUrl:m.meta.info.logos.small,hideText:h,meta:m.meta};const a=(0,n.Iz)(c);return a===i.dR.uid||a===i.dR.name?{label:a,value:a,hideText:h}:{label:(a??"no name")+" - not found",value:a??void 0,imgUrl:"",hideText:h}}getDataSourceOptions(){const{alerting:c,tracing:h,metrics:p,mixed:m,dashboard:a,variables:v,annotations:E,pluginId:D,type:b,filter:P,logs:y}=this.props;return this.dataSourceSrv.getList({alerting:c,tracing:h,metrics:p,logs:y,dashboard:a,mixed:m,variables:v,annotations:E,pluginId:D,filter:P,type:b}).map(M=>({value:M.name,label:`${M.name}${M.isDefault?" (default)":""}`,imgUrl:M.meta.info.logos.small,meta:M.meta}))}render(){const{autoFocus:c,onBlur:h,onClear:p,openMenuOnFocus:m,placeholder:a,width:v,inputId:E,disabled:D=!1,isLoading:b=!1}=this.props,{error:P}=this.state,y=this.getDataSourceOptions(),T=this.getCurrentValue(),M=typeof p=="function";return t.createElement("div",{"aria-label":"Data source picker select container","data-testid":s.Tp.components.DataSourcePicker.container},t.createElement(r.l6,{isLoading:b,disabled:D,"aria-label":"Select a data source","data-testid":s.Tp.components.DataSourcePicker.inputV2,inputId:E||"data-source-picker",className:"ds-picker select-container",isMulti:!1,isClearable:M,backspaceRemovesValue:!1,onChange:this.onChange,options:y,autoFocus:c,onBlur:h,width:v,openMenuOnFocus:m,maxMenuHeight:500,placeholder:a,noOptionsMessage:"No datasources found",value:T??null,invalid:!!P||!!this.props.invalid,getOptionLabel:I=>I.meta&&(0,o.x)(I.meta.signature)&&I!==T?t.createElement(g.Gy,{align:"center",justify:"space-between",height:"auto"},t.createElement("span",null,I.label)," ",t.createElement(u.B,{status:I.meta.signature})):I.label||""}))}}l.defaultProps={autoFocus:!1,openMenuOnFocus:!1,placeholder:"Select data source"}},96937:(Y,A,e)=>{"use strict";e.d(A,{f:()=>t,p:()=>n});let t=()=>{throw new Error("EmbeddedDashboard requires runtime initialization")};function n(o){t=o}},97152:(Y,A,e)=>{"use strict";e.d(A,{a:()=>n,e:()=>o});var t=e(96540);let n=({message:s})=>t.createElement("div",null,"Unable to render data: ",s,".");function o(s){n=s}},24308:(Y,A,e)=>{"use strict";e.d(A,{Y:()=>o,m:()=>n});var t=e(96540);let n=()=>t.createElement("div",null,"PanelRenderer can only be used after Grafana instance has been started.");function o(s){n=s}},46235:(Y,A,e)=>{"use strict";e.d(A,{V:()=>n,l:()=>o});var t=e(96540);let n=({children:s})=>t.createElement("div",null,s);function o(s){n=s}},32264:(Y,A,e)=>{"use strict";e.d(A,{$:()=>l,p:()=>r});var t=e(2543),n=e.n(t),o=e(42994),s=e(97594);class r{constructor(c){this.publicDashboardsEnabled=!0,this.snapshotEnabled=!0,this.datasources={},this.panels={},this.apps={},this.auth={},this.minRefreshInterval="",this.appUrl="",this.appSubUrl="",this.namespace="default",this.windowTitlePrefix="",this.newPanelTitle="",this.externalUserMngLinkUrl="",this.externalUserMngLinkName="",this.externalUserMngInfo="",this.allowOrgCreate=!1,this.feedbackLinksEnabled=!0,this.disableLoginForm=!1,this.defaultDatasource="",this.alertingEnabled=!1,this.alertingErrorOrTimeout="",this.alertingNoDataOrNullValues="",this.alertingMinInterval=1,this.angularSupportEnabled=!1,this.authProxyEnabled=!1,this.exploreEnabled=!1,this.queryHistoryEnabled=!1,this.helpEnabled=!1,this.profileEnabled=!1,this.newsFeedEnabled=!0,this.ldapEnabled=!1,this.jwtHeaderName="",this.jwtUrlLogin=!1,this.sigV4AuthEnabled=!1,this.azureAuthEnabled=!1,this.secureSocksDSProxyEnabled=!1,this.samlEnabled=!1,this.samlName="",this.autoAssignOrg=!0,this.verifyEmailEnabled=!1,this.oauth={},this.rbacEnabled=!0,this.disableUserSignUp=!1,this.loginHint="",this.passwordHint="",this.loginError=void 0,this.viewersCanEdit=!1,this.editorsCanAdmin=!1,this.disableSanitizeHtml=!1,this.trustedTypesDefaultPolicyEnabled=!1,this.cspReportOnlyEnabled=!1,this.liveEnabled=!0,this.featureToggles={},this.anonymousEnabled=!1,this.anonymousDeviceLimit=void 0,this.licenseInfo={},this.rendererAvailable=!1,this.rendererVersion="",this.secretsManagerPluginEnabled=!1,this.supportBundlesEnabled=!1,this.http2Enabled=!1,this.grafanaJavascriptAgent={enabled:!1,customEndpoint:"",apiKey:"",errorInstrumentalizationEnabled:!0,consoleInstrumentalizationEnabled:!1,webVitalsInstrumentalizationEnabled:!1},this.pluginCatalogURL="https://grafana.com/grafana/plugins/",this.pluginAdminEnabled=!0,this.pluginAdminExternalManageEnabled=!1,this.pluginCatalogHiddenPlugins=[],this.pluginsCDNBaseURL="",this.expressionsEnabled=!1,this.awsAllowedAuthProviders=[],this.awsAssumeRoleEnabled=!1,this.azure={managedIdentityEnabled:!1,workloadIdentityEnabled:!1,userIdentityEnabled:!1},this.caching={enabled:!1},this.unifiedAlertingEnabled=!1,this.unifiedAlerting={minInterval:"",alertStateHistoryBackend:void 0,alertStateHistoryPrimary:void 0},this.recordedQueries={enabled:!0},this.featureHighlights={enabled:!1},this.reporting={enabled:!0},this.analytics={enabled:!0},this.googleAnalytics4SendManualPageViews=!1,this.sqlConnectionLimits={maxOpenConns:100,maxIdleConns:100,connMaxLifetime:14400},this.disableFrontendSandboxForPlugins=[],this.bootData=c.bootData;const h={datasources:{},windowTitlePrefix:"Grafana - ",panels:{},newPanelTitle:"Panel Title",playlist_timespan:"1m",unsaved_changes_warning:!0,appUrl:"",appSubUrl:"",buildInfo:{version:"1.0",commit:"1",env:"production"},viewersCanEdit:!1,editorsCanAdmin:!1,disableSanitizeHtml:!1};(0,t.merge)(this,h,c),this.buildInfo=c.buildInfo||h.buildInfo,this.dateFormats&&o.WC.update(this.dateFormats),this.buildInfo.env==="development"&&u(this),g(this),this.featureToggles.disableAngular&&(this.angularSupportEnabled=!1),this.theme2=(0,s.g)(this.bootData.user.theme),this.bootData.user.lightTheme=this.theme2.isLight,this.theme=this.theme2.v1}}function g(f){const c=f.featureToggles,h="grafana.featureToggles",p=window.localStorage.getItem(h);if(p){const m=p.split(",");for(const a of m){const[v,E]=a.split("="),D=E==="true"||E==="1";c[v]=D,console.log(`Setting feature toggle ${v} = ${D} via localstorage`)}}}function u(f){if(window.location.href.indexOf("__feature")===-1)return;new URLSearchParams(window.location.search).forEach((h,p)=>{if(p.startsWith("__feature.")){const m=f.featureToggles,a=p.substring(10),v=h==="true"||h==="";v!==m[p]&&(m[a]=v,console.log(`Setting feature toggle ${a} = ${v} via url`))}})}const d=window.grafanaBootData||{settings:{},user:{},navTree:[]},i=d.settings;i.bootData=d;const l=new r(i)},13303:(Y,A,e)=>{"use strict";e.r(A),e.d(A,{CopyPanelEvent:()=>l.ah,DataSourcePicker:()=>x.s,DataSourceWithBackend:()=>D.iy,EchoEventType:()=>r.on,EmbeddedDashboard:()=>L.f,FakeEchoSrv:()=>r.c_,GrafanaBootConfig:()=>h.p,HealthCheckError:()=>D.b1,HealthStatus:()=>D.VQ,HistoryWrapper:()=>i.K9,MetaAnalyticsEventName:()=>p.n_,PanelDataErrorView:()=>y.a,PanelRenderer:()=>P.m,PluginPage:()=>I.V,RefreshEvent:()=>l._,StreamingFrameAction:()=>d.Kh,SystemJS:()=>m.zO,ThemeChangedEvent:()=>l.E8,TimeRangeUpdatedEvent:()=>l.sR,config:()=>h.$,createDataSourcePluginEventProperties:()=>S.y,createMonitoringLogger:()=>E.DW,createPluginEventProperties:()=>S.L,createQueryRunner:()=>M.d,featureEnabled:()=>v.a,frameToMetricFindValue:()=>b.$h,getAngularLoader:()=>n.E,getAppEvents:()=>l.J7,getBackendSrv:()=>t.AI,getDataSourceSrv:()=>o.l,getEchoSrv:()=>r.x$,getGrafanaLiveSrv:()=>d.oF,getLegacyAngularInjector:()=>u.C,getLocationSrv:()=>s.X,getPluginComponentExtensions:()=>f.Dp,getPluginExtensions:()=>f.O3,getPluginImportUtils:()=>m.o,getPluginLinkExtensions:()=>f.Kf,getRunRequest:()=>M.XJ,getTemplateSrv:()=>g.w,isExperimentViewEvent:()=>p.p6,isFetchError:()=>t.NF,isInteractionEvent:()=>p.fX,isPageviewEvent:()=>p.nB,isPluginExtensionComponent:()=>c.a,isPluginExtensionLink:()=>c.D,loadPluginCss:()=>m.PL,locationSearchToObject:()=>i.SE,locationService:()=>i.Ny,logDebug:()=>E.MD,logError:()=>E.vV,logInfo:()=>E.fH,logWarning:()=>E.FF,navigationLogger:()=>i.Lc,registerEchoBackend:()=>r.pl,reportExperimentView:()=>a.Xp,reportInteraction:()=>a.rR,reportMetaAnalytics:()=>a.G$,reportPageview:()=>a.Jy,setAngularLoader:()=>n.w,setAppEvents:()=>l.H8,setBackendSrv:()=>t.u5,setDataSourceSrv:()=>o.h,setEchoSrv:()=>r.H2,setEmbeddedDashboard:()=>L.p,setGrafanaLiveSrv:()=>d.S8,setLegacyAngularInjector:()=>u.j,setLocationService:()=>i.vG,setLocationSrv:()=>s.T,setPluginExtensionGetter:()=>f.cE,setPluginImportUtils:()=>m.se,setQueryRunnerFactory:()=>M.HC,setReturnToPreviousHook:()=>C._,setRunRequest:()=>M.pC,setTemplateSrv:()=>g.d,toDataQueryError:()=>T.u,toDataQueryResponse:()=>b.bE,usePluginInteractionReporter:()=>O.G,useReturnToPrevious:()=>C.i});var t=e(17172),n=e(7376),o=e(19347),s=e(23509),r=e(63415),g=e(72574),u=e(81634),d=e(78731),i=e(12131),l=e(3591),f=e(4402),c=e(80882),h=e(32264),p=e(61298),m=e(89191),a=e(14110),v=e(33378),E=e(34867),D=e(26657),b=e(47773),P=e(24308),y=e(97152),T=e(12091),M=e(63639),I=e(46235),x=e(55882),S=e(5261),O=e(44027),C=e(14778),L=e(96937)},7376:(Y,A,e)=>{"use strict";e.d(A,{E:()=>o,w:()=>n});let t;function n(s){t=s}function o(){return t}},63415:(Y,A,e)=>{"use strict";e.d(A,{H2:()=>o,c_:()=>g,on:()=>t,pl:()=>r,x$:()=>s});var t=(u=>(u.Performance="performance",u.MetaAnalytics="meta-analytics",u.Pageview="pageview",u.Interaction="interaction",u.ExperimentView="experimentview",u.GrafanaJavascriptAgent="grafana-javascript-agent",u))(t||{});let n;function o(u){if(n instanceof g)for(const d of n.buffer)u.addEvent(d.event,d.meta);n=u}function s(){return n||(n=new g),n}const r=u=>{s().addBackend(u)};class g{constructor(){this.buffer=[]}flush(){this.buffer=[]}addBackend(d){}addEvent(d,i){this.buffer.push({event:d,meta:i})}}},12131:(Y,A,e)=>{"use strict";e.d(A,{K9:()=>u,Lc:()=>c,Ny:()=>i,SE:()=>d,vG:()=>l});var t=e(17929),n=e(76885),o=e(95344),s=e(91040),r=e(40621),g=e(32264);class u{constructor(p){this.history=p||t.zR({basename:g.$.appSubUrl??"/"}),this.partial=this.partial.bind(this),this.push=this.push.bind(this),this.replace=this.replace.bind(this),this.getSearch=this.getSearch.bind(this),this.getHistory=this.getHistory.bind(this),this.getLocation=this.getLocation.bind(this)}getHistory(){return this.history}getSearch(){return new URLSearchParams(this.history.location.search)}partial(p,m){const a=this.history.location,v=this.getSearchObject();for(const D of Object.keys(p))p[D]===null||p[D]===void 0?delete v[D]:v[D]=p[D];const E=n.kM.renderUrl(a.pathname,v);m?this.history.replace(E,this.history.location.state):this.history.push(E,this.history.location.state)}push(p){this.history.push(p)}replace(p){this.history.replace(p)}reload(){const p=this.history.location.state?.routeReloadCounter;this.history.replace({...this.history.location,state:{routeReloadCounter:p?p+1:1}})}getLocation(){return this.history.location}getSearchObject(){return d(this.history.location.search)}update(p){if((0,o.l)("LocationSrv","update","partial, push or replace"),p.partial&&p.query)this.partial(p.query,p.partial);else{const m={pathname:p.path};p.query&&(m.search=n.kM.toUrlParams(p.query)),p.replace?this.replace(m):this.push(m)}}}function d(h){let p=typeof h=="number"?String(h):h;return p.length>0?p.startsWith("?")?n.kM.parseKeyValue(p.substring(1)):n.kM.parseKeyValue(p):{}}let i=new u;const l=h=>{throw new Error("locationService can be only overriden in test environment")},f=(0,s.h)("Router"),c=f.logger;(0,r.h)("location",i,f)},23509:(Y,A,e)=>{"use strict";e.d(A,{T:()=>n,X:()=>o});let t;function n(s){t=s}function o(){return t}},63639:(Y,A,e)=>{"use strict";e.d(A,{HC:()=>n,XJ:()=>g,d:()=>o,pC:()=>r});let t;const n=u=>{if(t)throw new Error("Runner should only be set when Grafana is starting.");t=u},o=()=>{if(!t)throw new Error("`createQueryRunner` can only be used after Grafana instance has started.");return t()};let s;function r(u){if(s)throw new Error("runRequest function should only be set once, when Grafana is starting.");s=u}function g(){if(!s)throw new Error("getRunRequest can only be used after Grafana instance has started.");return s}},3591:(Y,A,e)=>{"use strict";e.d(A,{E8:()=>o,H8:()=>u,J7:()=>d,_:()=>n,ah:()=>r,sR:()=>s});var t=e(65463);class n extends t.a{}n.type="refresh";class o extends t.x{}o.type="theme-changed";class s extends t.x{}s.type="time-range-updated";class r extends t.x{}r.type="copy-panel";let g;function u(i){g=i}function d(){return g}},17172:(Y,A,e)=>{"use strict";e.d(A,{AI:()=>s,NF:()=>t,u5:()=>o});function t(r){return typeof r=="object"&&r!==null&&"status"in r&&"data"in r}let n;const o=r=>{n=r},s=()=>n},19347:(Y,A,e)=>{"use strict";e.d(A,{h:()=>n,l:()=>o});let t;function n(s){t=s}function o(){return t}},81634:(Y,A,e)=>{"use strict";e.d(A,{C:()=>o,j:()=>n});let t;const n=s=>{t=s},o=()=>t},78731:(Y,A,e)=>{"use strict";e.d(A,{Kh:()=>t.Kh,S8:()=>o,oF:()=>s});var t=e(9631);let n;const o=r=>{n=r},s=()=>n},4402:(Y,A,e)=>{"use strict";e.d(A,{Dp:()=>u,Kf:()=>g,O3:()=>r,cE:()=>o});var t=e(80882);let n;function o(d){if(n)throw new Error("setPluginExtensionGetter() function should only be called once, when Grafana is starting.");n=d}function s(){if(!n)throw new Error("getPluginExtensionGetter() can only be used after the Grafana instance has started.");return n}const r=d=>s()(d),g=d=>{const{extensions:i}=r(d);return{extensions:i.filter(t.D)}},u=d=>{const{extensions:i}=r(d);return{extensions:i.filter(t.a)}}},80882:(Y,A,e)=>{"use strict";e.d(A,{D:()=>n,a:()=>o});var t=e(74135);function n(s){return s?s.type===t.u.link&&("path"in s||"onClick"in s):!1}function o(s){return s?s.type===t.u.component&&"component"in s:!1}},72574:(Y,A,e)=>{"use strict";e.d(A,{d:()=>n,w:()=>o});let t;const n=s=>{t=s},o=()=>t},26657:(Y,A,e)=>{"use strict";e.d(A,{iy:()=>T,dR:()=>E,b1:()=>b,VQ:()=>P,s9:()=>D,ph:()=>I,x7:()=>M});var t=e(62467),n=e(75505),o=e(44240),s=e(63720),r=e(66847),g=e(40187),u=e(22391),d=e(55004),i=e(89667),l=e(92341),f=e(32264),c=e(19347),h=e(78731),p=e(17172),m=e(9631),a=e(47773);function v(x){const{intervalMs:S,maxDataPoints:O,requestId:C,panelId:L,queryCachingTTL:U,range:{from:R,to:B}}=x;if(!x.targets.length)return(0,t.of)({data:[]});const H={intervalMs:S,maxDataPoints:O,queryCachingTTL:U,timeRange:{from:R.valueOf().toString(),to:B.valueOf().toString(),timezone:x.timezone}};return(0,p.AI)().fetch({url:`/api/public/dashboards/${f.$.publicDashboardAccessToken}/panels/${L}/query`,method:"POST",data:H,requestId:C}).pipe((0,s.n)(W=>(0,t.of)((0,a.bE)(W,x.targets))),(0,r.W)(W=>(0,t.of)((0,a.bE)(W))))}const E=Object.freeze({type:"__expr__",uid:"__expr__",name:"Expression"});function D(x){if(!x)return!1;const S=typeof x=="string"?x:x.type;return S===E.type||S===E.name||S==="-100"}class b extends Error{constructor(S,O){super(S),this.details=O,this.name="HealthCheckError"}}var P=(x=>(x.Unknown="UNKNOWN",x.OK="OK",x.Error="ERROR",x))(P||{}),y=(x=>(x.PluginID="X-Plugin-Id",x.DatasourceUID="X-Datasource-Uid",x.DashboardUID="X-Dashboard-Uid",x.PanelID="X-Panel-Id",x.PanelPluginType="X-Panel-Plugin-Type",x.QueryGroupID="X-Query-Group-Id",x.FromExpression="X-Grafana-From-Expr",x.SkipQueryCache="X-Cache-Skip",x))(y||{});class T extends g.mA{constructor(S){super(S),this.streamOptionsProvider=I}query(S){if(f.$.publicDashboardAccessToken)return v(S);const{intervalMs:O,maxDataPoints:C,queryCachingTTL:L,range:U,requestId:R,hideFromInspector:B=!1}=S;let H=S.targets;this.filterQuery&&(H=H.filter(k=>this.filterQuery(k)));let W=!1;const N=new Set,V=new Set,G=H.map(k=>{let Q=this.getRef(),ee=this.id,ae=!0;if(D(k.datasource))return W=!0,{...k,datasource:E};if(k.datasource){const Z=(0,c.l)().getInstanceSettings(k.datasource,S.scopedVars);if(!Z)throw new Error(`Unknown Datasource: ${JSON.stringify(k.datasource)}`);const ne=Z.rawRef??(0,u.p$)(Z),q=Z.id;(ne.uid!==Q.uid||ee!==q)&&(Q=ne,ee=q,ae=!1)}return Q.type?.length&&N.add(Q.type),Q.uid?.length&&V.add(Q.uid),{...ae?this.applyTemplateVariables(k,S.scopedVars,S.filters):k,datasource:Q,datasourceId:ee,intervalMs:O,maxDataPoints:C,queryCachingTTL:L}});if(!G.length)return(0,t.of)({data:[]});const _={queries:G,from:U?.from.valueOf().toString(),to:U?.to.valueOf().toString()};if(f.$.featureToggles.queryOverLive)return(0,h.oF)().getQueryData({request:S,body:_});const K={};K["X-Plugin-Id"]=Array.from(N).join(", "),K["X-Datasource-Uid"]=Array.from(V).join(", ");let j="/api/ds/query?ds_type="+this.type;return W&&(K["X-Grafana-From-Expr"]="true",j+="&expression=true"),R&&(j+=`&requestId=${R}`),S.dashboardUID&&(K["X-Dashboard-Uid"]=S.dashboardUID),S.panelId&&(K["X-Panel-Id"]=`${S.panelId}`),S.panelPluginType&&(K["X-Panel-Plugin-Type"]=`${S.panelPluginType}`),S.queryGroupId&&(K["X-Query-Group-Id"]=`${S.queryGroupId}`),S.skipQueryCache&&(K["X-Cache-Skip"]="true"),(0,p.AI)().fetch({url:j,method:"POST",data:_,requestId:R,hideFromInspector:B,headers:K}).pipe((0,s.n)(k=>{const Q=(0,a.bE)(k,G);return Q.data?.length&&Q.data.find(ee=>ee.meta?.channel)?M(Q,S,this.streamOptionsProvider):(0,t.of)(Q)}),(0,r.W)(k=>(0,t.of)((0,a.bE)(k))))}getRequestHeaders(){const S={};return S["X-Plugin-Id"]=this.type,S["X-Datasource-Uid"]=this.uid,S}interpolateVariablesInQueries(S,O,C){return S.map(L=>this.applyTemplateVariables(L,O,C))}applyTemplateVariables(S,O,C){return S}async getResource(S,O,C){const L=this.getRequestHeaders();return(await(0,n.s)((0,p.AI)().fetch({...C,method:"GET",headers:C?.headers?{...C.headers,...L}:L,params:O??C?.params,url:`/api/datasources/uid/${this.uid}/resources/${S}`}))).data}async postResource(S,O,C){const L=this.getRequestHeaders();return(await(0,n.s)((0,p.AI)().fetch({...C,method:"POST",headers:C?.headers?{...C.headers,...L}:L,data:O??{...O},url:`/api/datasources/uid/${this.uid}/resources/${S}`}))).data}async callHealthCheck(){return(0,n.s)((0,p.AI)().fetch({method:"GET",url:`/api/datasources/uid/${this.uid}/health`,showErrorAlert:!1,headers:this.getRequestHeaders()})).then(S=>S.data).catch(S=>S.data)}async testDatasource(){return this.callHealthCheck().then(S=>S.status==="OK"?{status:"success",message:S.message}:Promise.reject({status:"error",message:S.message,error:new b(S.message,S.details)}))}}function M(x,S,O){const C=(0,h.oF)();if(!C)return(0,t.of)(x);const L=[],U=[];for(const R of x.data){const B=(0,d.DG)(R.meta?.channel);if(B){const H=R;U.push(C.getDataStream({addr:B,buffer:O(S,H),frame:(0,i.Nw)(R)}))}else L.push(R)}return L.length&&U.push((0,t.of)({...x,data:L})),U.length===1?U[0]:(0,o.h)(...U)}const I=(x,S)=>{const O={maxLength:x.maxDataPoints??500,action:m.Kh.Append};return x.rangeRaw?.to==="now"&&(O.maxDelta=x.range.to.valueOf()-x.range.from.valueOf()),O};T=(0,l.Y)(T)},33378:(Y,A,e)=>{"use strict";e.d(A,{a:()=>n});var t=e(32264);const n=o=>{const{enabledFeatures:s}=t.$.licenseInfo;return s&&s[o]}},34867:(Y,A,e)=>{"use strict";e.d(A,{DW:()=>d,FF:()=>r,MD:()=>g,fH:()=>s,vV:()=>u});var t=e(32631),n=e(37930),o=e(32264);function s(i,l){o.$.grafanaJavascriptAgent.enabled&&t.P.api.pushLog([i],{level:n.$b.INFO,context:l})}function r(i,l){o.$.grafanaJavascriptAgent.enabled&&t.P.api.pushLog([i],{level:n.$b.WARN,context:l})}function g(i,l){o.$.grafanaJavascriptAgent.enabled&&t.P.api.pushLog([i],{level:n.$b.DEBUG,context:l})}function u(i,l){o.$.grafanaJavascriptAgent.enabled&&t.P.api.pushError(i,{context:l})}function d(i,l){const f=c=>({source:i,...l,...c});return{logDebug:(c,h)=>g(c,f(h)),logInfo:(c,h)=>s(c,f(h)),logWarning:(c,h)=>r(c,f(h)),logError:(c,h)=>u(c,f(h))}}},89191:(Y,A,e)=>{"use strict";e.d(A,{PL:()=>i,o:()=>c,se:()=>f,zO:()=>d});var t=e(59511),n=e.n(t),o=e(65024),s=e.n(o),r=e(57516),g=e.n(r),u=e(32264);const d=window.System;async function i(h){try{const p=u.$.bootData.user.theme==="light"?h.light:h.dark;return d.import(p)}catch(p){console.error(p)}}let l;function f(h){if(l)throw new Error("pluginImportUtils should only be set once, when Grafana is starting.");l=h}function c(){if(!l)throw new Error("pluginImportUtils can only be used after Grafana instance has started.");return l}window.__grafana_amd_define=window.define,window.define=void 0},47773:(Y,A,e)=>{"use strict";e.d(A,{$h:()=>f,bE:()=>u});var t=e(39070),n=e(89667),o=e(14236),s=e(11261),r=e(12091);const g={severity:"info",text:"Cached response"};function u(c,h){const p={data:[],state:t.Gu.Done},m="traceId"in c?c.traceId:void 0;m!=null&&(p.traceIds=[m]);const a=c;if(a.data?.results){const v=a.data.results,E=h?.length?h.map(P=>P.refId):Object.keys(v),D=d(a),b=[];for(const P of E){const y=v[P];y&&(y.refId=P,b.push(y))}for(const P of b){if(P.error){const y={refId:P.refId,message:P.error,status:P.status};m!=null&&(y.traceId=m),p.error||(p.error={...y}),p.errors?p.errors.push({...y}):p.errors=[{...y}],p.state=t.Gu.Error}if(P.frames?.length){for(let y of P.frames){D&&(y=i(y));const T=(0,n.or)(y);T.refId||(T.refId=P.refId),p.data.push(T)}continue}if(P.series?.length)for(const y of P.series)y.refId||(y.refId=P.refId),p.data.push((0,o.Vc)(y));if(P.tables?.length)for(const y of P.tables)y.refId||(y.refId=P.refId),p.data.push((0,o.Vc)(y))}}return a.status&&a.status!==200&&(p.state!==t.Gu.Error&&(p.state=t.Gu.Error),p.error||(p.error=(0,r.u)(c))),p}function d(c){const h=c?.headers;return!h||!h.get?!1:h.get("X-Cache")==="HIT"}function i(c){return{...c,schema:{...c.schema,fields:[...c.schema?.fields??[]],meta:{...c.schema?.meta,notices:[...c.schema?.meta?.notices??[],g],isCachedResponse:!0}}}}function l(c){const h=u(c);if(h.error?.data?.message)return{status:"error",message:h.error.data.message,details:h.error?.data?.error?{message:h.error.data.error}:void 0};if(h.error?.refId&&h.error?.message)return{status:"error",message:h.error.message};throw c}function f(c){if(!c||!c.length)return[];const h=[];let p=c.fields.find(m=>m.type===s.PU.string);if(p||(p=c.fields.find(m=>m.type!==s.PU.time)),p)for(let m=0;m<p.values.length;m++)h.push({text:""+p.values[m]});return h}},14778:(Y,A,e)=>{"use strict";e.d(A,{_:()=>n,i:()=>o});let t;const n=s=>{t=s},o=()=>t?t():()=>console.error("ReturnToPrevious hook not found")},52622:(Y,A,e)=>{"use strict";e.d(A,{$N:()=>R,$l:()=>N,$m:()=>Q,$p:()=>C,D7:()=>d,F8:()=>L,GR:()=>h,J1:()=>u,L4:()=>a,Lt:()=>b,Ly:()=>T,NU:()=>p,Nj:()=>D,ON:()=>P,QH:()=>n,QR:()=>t,RU:()=>s,SV:()=>U,T6:()=>G,TZ:()=>V,WQ:()=>o,Wq:()=>K,Y$:()=>f,aG:()=>g,dx:()=>m,eX:()=>W,fY:()=>ee,gs:()=>E,lm:()=>M,ob:()=>_,on:()=>v,qM:()=>k,q_:()=>r,uH:()=>i,vM:()=>l,vp:()=>ne,wV:()=>x,xB:()=>B,yL:()=>c,yp:()=>O,zT:()=>ae});var t=(q=>(q.AlertStates="alertStates",q.Annotations="annotations",q.Series="series",q))(t||{}),n=(q=>(q.Linear="linear",q.Quad="quad",q))(n||{}),o=(q=>(q.Clamped="clamped",q.Mod="mod",q))(o||{}),s=(q=>(q.Field="field",q.Fixed="fixed",q.Template="template",q))(s||{}),r=(q=>(q.Field="field",q.Fixed="fixed",q.Mapping="mapping",q))(r||{}),g=(q=>(q.Auto="auto",q.Coords="coords",q.Geohash="geohash",q.Lookup="lookup",q))(g||{}),u=(q=>(q.Count="count",q.Size="size",q))(u||{}),d=(q=>(q.auto="auto",q.ge="ge",q.le="le",q.unknown="unknown",q))(d||{}),i=(q=>(q.Ascending="Ascending",q.Descending="Descending",q))(i||{}),l=(q=>(q.Auto="auto",q.Bottom="bottom",q.Hidden="hidden",q.Left="left",q.Right="right",q.Top="top",q))(l||{}),f=(q=>(q.Series="series",q.Text="text",q))(f||{}),c=(q=>(q.Always="always",q.Auto="auto",q.Never="never",q))(c||{}),h=(q=>(q.Bars="bars",q.Line="line",q.Points="points",q))(h||{}),p=(q=>(q.Constant="constant",q.NegativeY="negative-Y",q))(p||{}),m=(q=>(q.Linear="linear",q.Smooth="smooth",q.StepAfter="stepAfter",q.StepBefore="stepBefore",q))(m||{}),a=(q=>(q.Linear="linear",q.Log="log",q.Ordinal="ordinal",q.Symlog="symlog",q))(a||{}),v=(q=>(q.Hue="hue",q.None="none",q.Opacity="opacity",q.Scheme="scheme",q))(v||{}),E=(q=>(q.None="none",q.Normal="normal",q.Percent="percent",q))(E||{}),D=(q=>(q[q.After=1]="After",q[q.Before=-1]="Before",q[q.Center=0]="Center",q))(D||{}),b=(q=>(q[q.Horizontal=0]="Horizontal",q[q.Vertical=1]="Vertical",q))(b||{}),P=(q=>(q[q.Down=-1]="Down",q[q.Left=-1]="Left",q[q.Right=1]="Right",q[q.Up=1]="Up",q))(P||{});const y={dash:[]};var T=(q=>(q.Area="area",q.Dashed="dashed",q.DashedAndArea="dashed+area",q.Line="line",q.LineAndArea="line+area",q.Off="off",q.Series="series",q))(T||{}),M=(q=>(q.Hidden="hidden",q.List="list",q.Table="table",q))(M||{});const I={calcs:[]};var x=(q=>(q.Auto="auto",q.Horizontal="horizontal",q.Vertical="vertical",q))(x||{});const S={timezone:[]};var O=(q=>(q.Background="background",q.BackgroundSolid="background_solid",q.None="none",q.Value="value",q))(O||{}),C=(q=>(q.Area="area",q.Line="line",q.None="none",q))(C||{}),L=(q=>(q.Auto="auto",q.Center="center",q))(L||{}),U=(q=>(q.Auto="auto",q.Name="name",q.None="none",q.Value="value",q.ValueAndName="value_and_name",q))(U||{}),R=(q=>(q.Multi="multi",q.None="none",q.Single="single",q))(R||{}),B=(q=>(q.Ascending="asc",q.Descending="desc",q.None="none",q))(B||{});const H={calcs:[]};var W=(q=>(q.Basic="basic",q.Gradient="gradient",q.Lcd="lcd",q))(W||{}),N=(q=>(q.Color="color",q.Hidden="hidden",q.Text="text",q))(N||{}),V=(q=>(q.Auto="auto",q.Left="left",q.Top="top",q))(V||{}),G=(q=>(q.Auto="auto",q.Manual="manual",q))(G||{}),_=(q=>(q.Auto="auto",q.BasicGauge="basic",q.ColorBackground="color-background",q.ColorBackgroundSolid="color-background-solid",q.ColorText="color-text",q.Custom="custom",q.DataLinks="data-links",q.Gauge="gauge",q.GradientGauge="gradient-gauge",q.Image="image",q.JSONView="json-view",q.LcdGauge="lcd-gauge",q.Sparkline="sparkline",q))(_||{}),K=(q=>(q.Basic="basic",q.Gradient="gradient",q))(K||{});const j={fields:[],reducer:[]};var k=(q=>(q.Lg="lg",q.Md="md",q.Sm="sm",q))(k||{}),Q=(q=>(q.CSV="csv",q.Date="date",q.Distributed="distributed",q.DoubleQuote="doublequote",q.Glob="glob",q.HTML="html",q.JSON="json",q.Lucene="lucene",q.PercentEncode="percentencode",q.Pipe="pipe",q.QueryParam="queryparam",q.Raw="raw",q.Regex="regex",q.SQLString="sqlstring",q.SingleQuote="singlequote",q.Text="text",q.UriEncode="uriencode",q))(Q||{}),ee=(q=>(q.exact="exact",q.none="none",q.numbers="numbers",q.signature="signature",q))(ee||{}),ae=(q=>(q.EQ="eq",q.GT="gt",q.GTE="gte",q.LT="lt",q.LTE="lte",q.NEQ="neq",q))(ae||{});const Z={align:"auto",inspect:!1},ne="browser"},33623:(Y,A,e)=>{"use strict";e.d(A,{KQ:()=>o,QB:()=>s});var t=e(52622);const n="10.4.0-pre",o={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:t.wV.Auto,showValue:t.yL.Auto,stacking:t.gs.None,xTickLabelRotation:0,xTickLabelSpacing:0},s={fillOpacity:80,gradientMode:t.on.None,lineWidth:1}},16371:(Y,A,e)=>{"use strict";e.d(A,{K:()=>o});var t=e(52622);const n="10.4.0-pre",o={displayMode:t.eX.Gradient,maxVizHeight:300,minVizHeight:16,minVizWidth:8,namePlacement:t.TZ.Auto,showUnfilled:!0,sizing:t.T6.Auto,valueMode:t.$l.Color}},37827:(Y,A,e)=>{"use strict";e.d(A,{K:()=>n});const t="10.4.0-pre",n={selectedSeries:0}},44955:(Y,A,e)=>{"use strict";e.d(A,{K:()=>o});var t=e(52622);const n="10.4.0-pre",o={minVizHeight:75,minVizWidth:75,showThresholdLabels:!1,showThresholdMarkers:!0,sizing:t.T6.Auto}},87487:(Y,A,e)=>{"use strict";e.d(A,{KQ:()=>n});const t="10.4.0-pre",n={layers:[]},o={allLayers:!0,id:"zero",lat:0,lon:0,zoom:1};var s=(g=>(g.Details="details",g.None="none",g))(s||{}),r=(g=>(g.Coords="coords",g.Fit="fit",g.Zero="zero",g))(r||{})},96529:(Y,A,e)=>{"use strict";e.d(A,{KQ:()=>r});var t=e(52622);const n="10.4.0-pre";var o=(g=>(g.Opacity="opacity",g.Scheme="scheme",g))(o||{}),s=(g=>(g.Exponential="exponential",g.Linear="linear",g))(s||{});const r={calculate:!1,cellGap:1,cellValues:{},color:{scheme:"Oranges",fill:"dark-orange",reverse:!1,exponent:.5,steps:64},exemplars:{color:"rgba(255,0,255,0.7)"},filterValues:{le:1e-9},legend:{show:!0},showValue:t.yL.Auto,tooltip:{mode:t.$N.Single,yHistogram:!1,showColorScale:!1}}},42226:(Y,A,e)=>{"use strict";e.d(A,{KQ:()=>o,QB:()=>s});var t=e(52622);const n="10.4.0-pre",o={bucketCount:30,bucketOffset:0},s={fillOpacity:80,gradientMode:t.on.None,lineWidth:1}},69383:(Y,A,e)=>{"use strict";e.d(A,{K:()=>n});const t="10.4.0-pre",n={showImage:!0}},65391:(Y,A,e)=>{"use strict";e.d(A,{KQ:()=>g});const t="10.4.0-pre";var n=(u=>(u.Donut="donut",u.Pie="pie",u))(n||{}),o=(u=>(u.Name="name",u.Percent="percent",u.Value="value",u))(o||{}),s=(u=>(u.Percent="percent",u.Value="value",u))(s||{});const r={values:[]},g={displayLabels:[]}},89607:(Y,A,e)=>{"use strict";e.d(A,{K:()=>o});var t=e(52622);const n="10.4.0-pre",o={colorMode:t.yp.Value,graphMode:t.$p.Area,justifyMode:t.F8.Auto,showPercentChange:!1,textMode:t.SV.Auto,wideLayout:!0}},15821:(Y,A,e)=>{"use strict";e.d(A,{KQ:()=>o,QB:()=>s});var t=e(52622);const n="10.4.0-pre",o={alignValue:"left",mergeValues:!0,rowHeight:.9,showValue:t.yL.Auto},s={fillOpacity:70,lineWidth:0}},64337:(Y,A,e)=>{"use strict";e.d(A,{KQ:()=>o,QB:()=>s});var t=e(52622);const n="10.4.0-pre",o={colWidth:.9,rowHeight:.9,showValue:t.yL.Auto},s={fillOpacity:70,lineWidth:1}},52037:(Y,A,e)=>{"use strict";e.d(A,{K:()=>o});var t=e(52622);const n="10.4.0-pre",o={cellHeight:t.qM.Sm,footer:{show:!1,countRows:!1,reducer:[]},frameIndex:0,showHeader:!0,showTypeIcons:!1,sortBy:[]}},12183:(Y,A,e)=>{"use strict";e.d(A,{KQ:()=>g});const t="10.4.0-pre";var n=(u=>(u.Code="code",u.HTML="html",u.Markdown="markdown",u))(n||{}),o=(u=>(u.Go="go",u.Html="html",u.Json="json",u.Markdown="markdown",u.Plaintext="plaintext",u.Sql="sql",u.Typescript="typescript",u.Xml="xml",u.Yaml="yaml",u))(o||{});const s="plaintext",r={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},g={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"}},10055:(Y,A,e)=>{"use strict";e.d(A,{KQ:()=>u});var t=e(52622);const n="10.4.0-pre";var o=(d=>(d.Auto="auto",d.Manual="manual",d))(o||{}),s=(d=>(d.Lines="lines",d.Points="points",d.PointsAndLines="points+lines",d))(s||{});const r={exclude:[]},g={label:t.yL.Auto,show:"points"},u={series:[]}},73134:(Y,A,e)=>{"use strict";e.d(A,{CO:()=>g,GW:()=>T,OA:()=>D,Ol:()=>c,QB:()=>y,Ye:()=>M,ZG:()=>d,aD:()=>o,bf:()=>s,bt:()=>b,dM:()=>p,lt:()=>a,rw:()=>r,ss:()=>P,yV:()=>v});const t={tags:[]},n={exclude:!1,ids:[]},o={list:[]},s={builtIn:0,enable:!0,hide:!1},r={includeAll:!1,multi:!1,options:[],skipUrlSync:!1};var g=(I=>(I[I.never=0]="never",I[I.onDashboardLoad=1]="onDashboardLoad",I[I.onTimeRangeChanged=2]="onTimeRangeChanged",I))(g||{}),u=(I=>(I[I.dontHide=0]="dontHide",I[I.hideLabel=1]="hideLabel",I[I.hideVariable=2]="hideVariable",I))(u||{}),d=(I=>(I[I.alphabeticalAsc=1]="alphabeticalAsc",I[I.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",I[I.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",I[I.alphabeticalDesc=2]="alphabeticalDesc",I[I.disabled=0]="disabled",I[I.naturalAsc=7]="naturalAsc",I[I.naturalDesc=8]="naturalDesc",I[I.numericalAsc=3]="numericalAsc",I[I.numericalDesc=4]="numericalDesc",I))(d||{});const i={asDropdown:!1,includeVars:!1,keepTime:!1,tags:[],targetBlank:!1};var l=(I=>(I.ContinuousBlPu="continuous-BlPu",I.ContinuousBlYlRd="continuous-BlYlRd",I.ContinuousBlues="continuous-blues",I.ContinuousGrYlRd="continuous-GrYlRd",I.ContinuousGreens="continuous-greens",I.ContinuousPurples="continuous-purples",I.ContinuousRdYlGr="continuous-RdYlGr",I.ContinuousReds="continuous-reds",I.ContinuousYlBl="continuous-YlBl",I.ContinuousYlRd="continuous-YlRd",I.Fixed="fixed",I.PaletteClassic="palette-classic",I.PaletteClassicByName="palette-classic-by-name",I.Shades="shades",I.Thresholds="thresholds",I))(l||{});const f={h:9,w:12,x:0,y:0};var c=(I=>(I.Absolute="absolute",I.Percentage="percentage",I))(c||{});const h={steps:[]};var p=(I=>(I.RangeToText="range",I.RegexToText="regex",I.SpecialValue="special",I.ValueToText="value",I))(p||{}),m=(I=>(I.Empty="empty",I.False="false",I.NaN="nan",I.Null="null",I.NullAndNan="null+nan",I.True="true",I))(m||{});const a={hidden:!1,refresh_intervals:["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],time_options:["5m","15m","1h","6h","12h","24h","2d","7d","30d"]};var v=(I=>(I[I.Crosshair=1]="Crosshair",I[I.Off=0]="Off",I[I.Tooltip=2]="Tooltip",I))(v||{});const E=0,D={links:[],repeatDirection:"h",targets:[],transformations:[],transparent:!1},b={overrides:[]},P={id:""},y={links:[],mappings:[]},T={collapsed:!1,panels:[]},M={editable:!0,fiscalYearStartMonth:0,graphTooltip:0,links:[],panels:[],schemaVersion:36,tags:[],timezone:"browser"}},39651:(Y,A,e)=>{"use strict";e.d(A,{Gu:()=>o,gB:()=>n});var t=e(52622);const n={align:"auto",inspect:!1,cellOptions:{type:t.ob.Auto}};var o=(s=>(s.NotStarted="NotStarted",s.Loading="Loading",s.Streaming="Streaming",s.Done="Done",s.Error="Error",s))(o||{})},79422:(Y,A,e)=>{"use strict";e.d(A,{Ye:()=>o,lt:()=>r,rw:()=>s,zL:()=>n});var t=e(73134),n=(h=>(h[h.dontHide=0]="dontHide",h[h.hideLabel=1]="hideLabel",h[h.hideVariable=2]="hideVariable",h))(n||{});const o=t.Ye,s={...t.rw},r=t.lt,g=t.OA,u=t.GW,d=t.QB,i=t.bt,l=t.ss,f=t.bf,c=t.aD},42418:(Y,A,e)=>{"use strict";e.d(A,{F:()=>i,H:()=>l});var t=e(32196),n=e(96540),o=e(13544),s=e(40845),r=e(55852),g=e(14578),u=e(90613),d=e(94753);const i=n.forwardRef(({title:c,onRemove:h,children:p,buttonContent:m,elevated:a,bottomSpacing:v,topSpacing:E,className:D,severity:b="error",...P},y)=>{const T=(0,s.$j)(),I=f(T,b,!!c,a,v,E),x={error:"alert",warning:"alert",info:"status",success:"status"},S=P.role||x[b],O=P["aria-label"]||c;return n.createElement("div",{ref:y,className:(0,t.cx)(I.wrapper,D),role:S,"aria-label":O,...P},n.createElement(u.a,{"data-testid":o.Tp.components.Alert.alertV2(b),display:"flex",backgroundColor:b,borderRadius:"default",paddingY:1,paddingX:2,borderStyle:"solid",borderColor:b,alignItems:"stretch",boxShadow:a?"z3":void 0},n.createElement(u.a,{paddingTop:1,paddingRight:2},n.createElement("div",{className:I.icon},n.createElement(g.I,{size:"xl",name:l(b)}))),n.createElement(u.a,{paddingY:1,grow:1},n.createElement(d.E,{color:"primary",weight:"medium"},c),p&&n.createElement("div",{className:I.content},p)),h&&!m&&n.createElement("div",{className:I.close},n.createElement(r.$n,{"aria-label":"Close alert",icon:"times",onClick:h,type:"button",fill:"text",variant:"secondary"})),h&&m&&n.createElement(u.a,{marginLeft:1,display:"flex",alignItems:"center"},n.createElement(r.$n,{"aria-label":"Close alert",variant:"secondary",onClick:h,type:"button"},m))))});i.displayName="Alert";const l=c=>{switch(c){case"error":return"exclamation-circle";case"warning":return"exclamation-triangle";case"info":return"info-circle";case"success":return"check"}},f=(c,h,p,m,a,v)=>{const E=c.colors[h];return{wrapper:(0,t.css)({flexGrow:1,marginBottom:c.spacing(a??2),marginTop:c.spacing(v??0),position:"relative","&:before":{content:'""',position:"absolute",top:0,left:0,bottom:0,right:0,background:c.colors.background.primary,zIndex:-1}}),icon:(0,t.css)({color:E.text}),content:(0,t.css)({color:c.colors.text.primary,paddingTop:p?c.spacing(.5):0,maxHeight:"50vh",overflowY:"auto"}),close:(0,t.css)({position:"relative",color:c.colors.text.secondary,background:"none",display:"flex",top:"-6px",right:"-14px"})}}},28270:(Y,A,e)=>{"use strict";e.d(A,{p:()=>h});var t=e(32196),n=e(2543),o=e(96540),s=e(40845),r=e(88575),g=e(32982);const u=o.memo(()=>{const m=(0,s.of)(d);return o.createElement("div",{className:m.ellipsis},o.createElement("span",{className:m.firstDot},"."),o.createElement("span",{className:m.secondDot},"."),o.createElement("span",{className:m.thirdDot},"."))});u.displayName="EllipsisAnimated";const d=()=>({ellipsis:(0,t.css)({display:"inline"}),firstDot:(0,t.css)({animation:`${i} 2s linear infinite`}),secondDot:(0,t.css)({animation:`${l} 2s linear infinite`}),thirdDot:(0,t.css)({animation:`${f} 2s linear infinite`})}),i=(0,t.keyframes)`
  0% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,l=(0,t.keyframes)`
  0% {
    opacity: 0;
  }
  21% {
    opacity: 0.5;
  }
  22% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,f=(0,t.keyframes)`
  0% {
    opacity: 0;
  }
  43% {
    opacity: 0.5;
  }
  44% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,c=2*1e3;function h(m){const{invalid:a,loading:v,onFinishChange:E,saveErrorMessage:D="Error saving this value",error:b,children:P,disabled:y,...T}=m,[M,I]=o.useState({isLoading:!1,showSuccess:!1,showError:a}),x=(0,o.useRef)(null);o.useEffect(()=>{let U;if(M.showSuccess){const R=M.showError?0:c;U=setTimeout(()=>{I({...M,showSuccess:!1})},R)}return()=>{window.clearTimeout(U)}},[M]);const S=(0,o.useCallback)(U=>{a||(I({...M,isLoading:!0,showSuccess:!1}),E(U).then(()=>{I({isLoading:!1,showSuccess:!0,showError:!1})}).catch(()=>{I({...M,isLoading:!1,showError:!0})}))},[a,M,E]),O=(0,o.useMemo)(()=>(0,n.debounce)(S,600,{leading:!1}),[S]),C=a||M.showError||void 0,L=(0,s.of)(p);return o.createElement(o.Fragment,null,o.createElement(r.D,{...T,loading:v||void 0,invalid:C,disabled:y,error:b||M.showError&&D,ref:x,className:L.widthFitContent},o.cloneElement(P(U=>{O(U)}))),M.isLoading&&o.createElement(g.r,{referenceElement:x.current,placement:"right"},"Saving ",o.createElement(u,null)),M.showSuccess&&o.createElement(g.r,{suffixIcon:"check",referenceElement:x.current,placement:"right"},"Saved!"))}h.displayName="AutoSaveField";const p=()=>({widthFitContent:(0,t.css)({width:"fit-content"})})},39938:(Y,A,e)=>{"use strict";e.d(A,{E:()=>f});var t=e(32196),n=e(96540),o=e(70255),s=e(84140),r=e(40845),g=e(72129),u=e(14578),d=e(56034);const i=n.memo(({icon:p,color:m,text:a,tooltip:v,className:E,...D})=>{const b=(0,r.of)(h,m),P=n.createElement("div",{className:(0,t.cx)(b.wrapper,E),...D},p&&n.createElement(u.I,{name:p,size:"sm"}),a);return v?n.createElement(d.m,{content:v,placement:"auto"},P):P});i.displayName="Badge";const l=({rootProps:p})=>{const m=(0,r.of)(c);return n.createElement(o.A,{width:60,height:22,containerClassName:m.container,...p})},f=(0,g.j)(i,l),c=()=>({container:(0,t.css)({lineHeight:1})}),h=(p,m)=>{let a=p.visualization.getColorByName(m),v="",E="",D="";return p.isDark?(E=(0,s.A)(a).setAlpha(.15).toString(),v=(0,s.A)(a).setAlpha(.25).toString(),D=(0,s.A)(a).lighten(15).toString()):(E=(0,s.A)(a).setAlpha(.15).toString(),v=(0,s.A)(a).setAlpha(.25).toString(),D=(0,s.A)(a).darken(20).toString()),{wrapper:(0,t.css)({display:"inline-flex",padding:"1px 4px",borderRadius:p.shape.radius.default,background:E,border:`1px solid ${v}`,color:D,fontWeight:p.typography.fontWeightRegular,gap:"2px",fontSize:p.typography.bodySmall.fontSize,lineHeight:p.typography.bodySmall.lineHeight,alignItems:"center"})}}},97696:(Y,A,e)=>{"use strict";e.d(A,{xE:()=>P});var t=e(32196),n=e(96540),o=e(84140),s=e(58649),r=e(47070),g=e(50082),u=e(83195),d=e(24293),i=e(8066),l=e(13544),f=e(52622),c=e(29413),h=e(55852),p=e(9286);const m=18,a=50,v=150,E=1.5,D=1,b=10;class P extends n.PureComponent{render(){const{onClick:B,className:H,theme:W}=this.props,{title:N}=this.props.value,V=M(this.props);return B?n.createElement("button",{type:"button",style:V.wrapper,onClick:B,className:(0,t.cx)((0,h.my)(W),H)},n.createElement("div",{style:V.title},N),this.renderBarAndValue()):n.createElement("div",{style:V.wrapper,className:H},N&&n.createElement("div",{style:V.title},N),this.renderBarAndValue())}renderBarAndValue(){switch(this.props.displayMode){case"lcd":return this.renderRetroBars();case"basic":case"gradient":default:return this.renderBasicAndGradientBars()}}renderBasicAndGradientBars(){const{value:B,showUnfilled:H,valueDisplayMode:W}=this.props,N=O(this.props);return n.createElement("div",{style:N.wrapper},W!==f.$l.Hidden&&n.createElement(p.i,{"data-testid":l.Tp.components.Panels.Visualization.BarGauge.valueV2,value:B,style:N.value}),H&&n.createElement("div",{style:N.emptyBar}),n.createElement("div",{style:N.bar}))}renderRetroBars(){const{display:B,field:H,value:W,itemSpacing:N,alignmentFactors:V,orientation:G,lcdCellWidth:_,text:K,valueDisplayMode:j,theme:k}=this.props,{valueHeight:Q,valueWidth:ee,maxBarHeight:ae,maxBarWidth:Z,wrapperWidth:ne,wrapperHeight:q}=I(this.props),te=H.min??s.tw,re=H.max??s.d1,de=y(G),ie=re-te,ge=de?ae:Z,ve=N,ye=Math.floor(ge/_),pe=Math.floor((ge-ve*ye)/ye),le=L(this.props),De=U(V||W,le,ee,Q,G,K),Re={width:`${ne}px`,height:`${q}px`,display:"flex"};de?(Re.flexDirection="column-reverse",Re.alignItems="center"):(Re.flexDirection="row",Re.alignItems="center",De.justifyContent="flex-end");const me=[];for(let he=0;he<ye;he++){const Te=te+ie/ye*he,Be=x(Te,W,B),we={borderRadius:k.shape.radius.default};Be.isLit?we.backgroundImage=`radial-gradient(${Be.background} 10%, ${Be.backgroundShade})`:we.backgroundColor=Be.background,de?(we.height=`${pe}px`,we.width=`${Z}px`,we.marginTop=`${ve}px`):(we.width=`${pe}px`,we.height=`${ae}px`,we.marginRight=`${ve}px`),me.push(n.createElement("div",{key:he.toString(),style:we}))}return n.createElement("div",{style:Re},me,j!==f.$l.Hidden&&n.createElement(p.i,{"data-testid":l.Tp.components.Panels.Visualization.BarGauge.valueV2,value:W,style:De}))}}P.defaultProps={lcdCellWidth:12,value:{text:"100",numeric:100},displayMode:f.eX.Gradient,orientation:r.wV.Horizontal,field:{min:0,max:100,thresholds:{mode:g.O.Absolute,steps:[]}},itemSpacing:8,showUnfilled:!0};function y(R){return R===r.wV.Vertical}function T(R){const{height:B,width:H,alignmentFactors:W,orientation:N,text:V,namePlacement:G}=R,_=W?W.title:R.value.title;if(!_)return{fontSize:0,width:0,height:0,placement:"above"};if(y(N)){const Z=V?.titleSize??14;return{fontSize:Z,width:H,height:Z*E,placement:"below"}}if(B>40&&G===f.TZ.Auto||G===f.TZ.Top){if(V?.titleSize)return{fontSize:V?.titleSize,width:0,height:V.titleSize*E,placement:"above"};const ne=Math.max(Math.min(B*.45,a),17);return{fontSize:ne/E,width:0,height:ne,placement:"above"}}const Q=Math.max(B*.6,m)/E,ee=(0,c.kD)(_,Q),ae=Math.min(ee.width+15,H*.4);return{fontSize:V?.titleSize??Q,height:0,width:ae,placement:"left"}}function M(R){const B={display:"flex",overflow:"hidden",width:"100%"},H=T(R),W={fontSize:`${H.fontSize}px`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",alignItems:"center",alignSelf:"center"};return y(R.orientation)?(B.flexDirection="column-reverse",W.textAlign="center"):H.placement==="above"?B.flexDirection="column":(B.flexDirection="row",W.width=`${H.width}px`,W.textAlign="right",W.paddingRight="10px"),{wrapper:B,title:W}}function I(R){const{height:B,width:H,orientation:W,text:N,alignmentFactors:V,valueDisplayMode:G}=R,_=T(R),K=V??R.value,j=(0,u.cN)(K);let k=0,Q=0,ee=0,ae=0,Z=0,ne=0;const q=N?.valueSize??Math.max(_.fontSize,12),re=(0,c.kD)(j,q).width+b*2;return y(W)?(N?.valueSize?ee=N.valueSize*D:ee=Math.min(Math.max(B*.1,m),a),ae=H,G===f.$l.Hidden&&(ee=0,ae=0),k=B-(_.height+ee),Q=H,Z=H,ne=B-_.height):(G===f.$l.Hidden?(ee=0,ae=0):(ee=B-_.height,ae=Math.max(Math.min(H*.2,v),re)),k=B-_.height,Q=H-ae-_.width,_.placement==="above"?(Z=H,ne=B-_.height):(Z=H-_.width,ne=B)),{valueWidth:ae,valueHeight:ee,maxBarWidth:Q,maxBarHeight:k,wrapperHeight:ne,wrapperWidth:Z}}function x(R,B,H){if(R===null)return{background:d.F,border:d.F};const W=H?H(R).color:null;return W?B===null||isNaN(B.numeric)||R!==null&&R>B.numeric?{background:(0,o.A)(W).setAlpha(.18).toRgbString(),border:"transparent",isLit:!1}:{background:(0,o.A)(W).setAlpha(.95).toRgbString(),backgroundShade:(0,o.A)(W).setAlpha(.55).toRgbString(),border:(0,o.A)(W).setAlpha(.9).toRgbString(),isLit:!0}:{background:d.F,border:d.F}}function S(R,B,H){const W=Math.min((R-B)/(H-B),1);return isNaN(W)?0:W}function O(R){const{displayMode:B,field:H,value:W,alignmentFactors:N,orientation:V,theme:G,text:_}=R,{valueWidth:K,valueHeight:j,maxBarHeight:k,maxBarWidth:Q}=I(R),ee=H.min??s.tw,ae=H.max??s.d1,Z=S(W.numeric,ee,ae),ne=L(R),q=W.color??d.F,re=U(N||W,ne,K,j,V,_),de=B==="basic",ie={display:"flex",flexGrow:1},ge={borderRadius:G.shape.radius.default,position:"relative",zIndex:1},ve={background:G.colors.background.secondary,flexGrow:1,display:"flex",borderRadius:G.shape.radius.default,position:"relative"};if(y(V)){const ye=Math.max(Z*k,1);ie.flexDirection="column",ie.justifyContent="flex-end",ge.transition="height 1s",ge.height=`${ye}px`,ge.width=`${Q}px`,ve.bottom="-3px",ve.width=`${K}px`,de?(ge.background=`${(0,o.A)(q).setAlpha(.35).toRgbString()}`,ge.borderTop=`2px solid ${q}`):ge.background=C(R,k)}else{const ye=Math.max(Z*Q,1);ie.flexDirection="row-reverse",ie.justifyContent="flex-end",ie.alignItems="stretch",ge.transition="width 1s",ge.height=`${k}px`,ge.width=`${ye}px`,ve.left="-3px",ve.height=`${j}px`,de?(ge.background=`${(0,o.A)(q).setAlpha(.35).toRgbString()}`,ge.borderRight=`2px solid ${q}`):ge.background=C(R,Q)}return{wrapper:ie,bar:ge,value:re,emptyBar:ve}}function C(R,B){const{field:H,value:W,orientation:N,theme:V}=R,G=y(N)?"0deg":"90deg",_=H.min,K=H.max;let j="",k=0,Q=(0,i.Hs)(H.color?.mode);if(Q.id===d.Y.Thresholds){const ee=H.thresholds;for(let ae=0;ae<ee.steps.length;ae++){const Z=ee.steps[ae],ne=R.theme.visualization.getColorByName(Z.color),q=ee.mode===g.O.Percentage?Z.value/100:S(Z.value,_,K),te=q*B,re=Math.round(te-(te-k)/2),de=ee.mode===g.O.Percentage?_+(K-_)*q:Z.value;if(j==="")j=`linear-gradient(${G}, ${ne}, ${ne}`;else{if(W.numeric<de)break;k=te,j+=` ${re}px, ${ne}`}}return j+")"}if(Q.isContinuous&&Q.getColors){const ee=Q.getColors(V);for(let ae=0;ae<ee.length;ae++){const Z=ee[ae];if(j==="")j=`linear-gradient(${G}, ${Z} 0px`;else{const q=ae/(ee.length-1)*B;j+=`, ${Z} ${q}px`}}return j+")"}return W.color??d.F}function L(R){if(R.valueDisplayMode==="text")return R.theme.colors.text.primary;const{value:B}=R;return B.color?B.color:d.F}function U(R,B,H,W,N,V){const G={color:B,height:`${W}px`,width:`${H}px`,display:"flex",alignItems:"center",lineHeight:D};let _=H;const K=(0,u.cN)(R);return y(N)?(G.fontSize=V?.valueSize??(0,c.Vr)(K,_,W,D),G.justifyContent="center"):(G.fontSize=V?.valueSize??(0,c.Vr)(K,_-b*2,W,D),G.justifyContent="flex-end",G.paddingLeft=`${b}px`,G.paddingRight=`${b}px`,_-=b),G}},37494:(Y,A,e)=>{"use strict";e.d(A,{yV:()=>L,yp:()=>x,$p:()=>S,F8:()=>O,SV:()=>C});var t=e(32196),n=e(96540),o=e(55852),s=e(9286),r=e(84140),g=e(11261),u=e(83195),d=e(52622),i=e(24284),l=e(29413),f=e(5926),c=e(14578);const h=({percentChange:U,styles:R})=>{const B=U&&(U>0?"arrow-up":U<0?"arrow-down":void 0);return n.createElement("div",{style:R.containerStyles},B&&n.createElement(c.I,{name:B,height:R.iconSize,width:R.iconSize,viewBox:"6 6 12 12"}),p(U))},p=U=>U?.toLocaleString(void 0,{style:"percent",maximumSignificantDigits:3})??"",m=1.2,a=30,v=500;class E{constructor(R){this.props=R;const{width:B,height:H,value:W,text:N}=R;this.valueColor=W.color??"gray",this.panelPadding=H>100?12:8,this.textValues=I(R),this.justifyCenter=M(R.justifyMode,this.textValues.title),this.valueToAlignTo=this.textValues.valueToAlignTo,this.titleToAlignTo=this.textValues.titleToAlignTo,this.titleFontSize=0,this.valueFontSize=0,this.chartHeight=0,this.chartWidth=0,this.maxTextWidth=B-this.panelPadding*2,this.maxTextHeight=H-this.panelPadding*2,N&&(N.titleSize&&(this.titleFontSize=N.titleSize,this.titleToAlignTo=void 0),N.valueSize&&(this.valueFontSize=N.valueSize,this.valueToAlignTo=""))}getTitleStyles(){const R={fontSize:`${this.titleFontSize}px`,lineHeight:m};return(this.props.colorMode===x.Background||this.props.colorMode===x.BackgroundSolid)&&(R.color=(0,i.mZ)(this.valueColor,this.props.theme.isDark)),R}getValueStyles(){const R={fontSize:this.valueFontSize,fontWeight:v,lineHeight:m,position:"relative",zIndex:1};switch(this.justifyCenter&&(R.textAlign="center"),this.props.colorMode){case x.Value:R.color=this.valueColor;break;case x.Background:case x.BackgroundSolid:R.color=(0,i.mZ)(this.valueColor,this.props.theme.isDark);break;case x.None:R.color=this.props.theme.colors.text.primary;break}return R}getPercentChangeStyles(R){const H=this.getValueAndTitleContainerStyles(),W=Math.max(this.valueFontSize/2.5,12);let N=Math.max(this.valueFontSize/3,10);const V=R>0?this.props.theme.visualization.getColorByName("green"):this.props.theme.visualization.getColorByName("red"),G={fontSize:W,fontWeight:v,lineHeight:m,position:"relative",display:"flex",alignItems:"center",gap:Math.max(W/3,4),zIndex:1,color:V};switch(this.justifyCenter&&(G.textAlign="center"),H.flexDirection==="column"&&W>12&&(G.marginTop=-(W/4)),H.flexDirection==="row"&&(G.alignItems="baseline",G.lineHeight=m*2.5),this.props.colorMode){case x.Background:case x.BackgroundSolid:G.color=(0,i.mZ)(this.valueColor,this.props.theme.isDark);break}return this.props.textMode===C.None&&(G.fontSize=(0,l.Vr)(p(R),this.maxTextWidth*.8,this.maxTextHeight*.8,m,void 0,v),N=G.fontSize*.8),{containerStyles:G,iconSize:N}}getValueAndTitleContainerStyles(){const R={display:"flex",flexWrap:"wrap"};return this.justifyCenter&&(R.alignItems="center",R.justifyContent="center",R.flexGrow=1,R.gap="0.75ch"),R}getPanelStyles(){const{width:R,height:B,theme:H,colorMode:W,textMode:N}=this.props,V={width:`${R}px`,height:`${B}px`,padding:`${N===C.None?2:this.panelPadding}px`,borderRadius:H.shape.radius.default,position:"relative",display:"flex"},G=H.isDark?1:-.7;switch(W){case x.Background:const _=(0,r.A)(this.valueColor).darken(15*G).spin(8).toRgbString(),K=(0,r.A)(this.valueColor).darken(5*G).spin(-8).toRgbString();V.background=`linear-gradient(120deg, ${_}, ${K})`;break;case x.BackgroundSolid:V.background=(0,r.A)(this.valueColor).toString();break;case x.Value:V.background="transparent";break}return this.justifyCenter&&(V.alignItems="center",V.flexDirection="row"),V}renderChart(){const{sparkline:R,colorMode:B}=this.props;if(!R||R.y?.type!==g.PU.number)return null;let H,W;switch(B){case x.Background:case x.BackgroundSolid:H="rgba(255,255,255,0.4)",W=(0,r.A)(this.valueColor).brighten(40).toRgbString();break;case x.None:case x.Value:default:W=this.valueColor,H=(0,r.A)(this.valueColor).setAlpha(.2).toRgbString();break}const N={custom:{drawStyle:d.GR.Line,lineWidth:1,fillColor:H,lineColor:W}};return n.createElement("div",{style:this.getChartStyles()},n.createElement(f.O,{height:this.chartHeight,width:this.chartWidth,sparkline:R,config:N,theme:this.props.theme}))}getChartStyles(){return{position:"absolute",right:0,bottom:0}}}class D extends E{constructor(R){super(R);const B=this.titleToAlignTo?.length?.3:1;this.valueToAlignTo.length&&(this.valueFontSize=(0,l.Vr)(this.valueToAlignTo,this.maxTextWidth*B,this.maxTextHeight,m,void 0,v)),this.titleToAlignTo?.length&&(this.titleFontSize=(0,l.Vr)(this.titleToAlignTo,this.maxTextWidth*.6,this.maxTextHeight,m,a),this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const R=super.getValueAndTitleContainerStyles();return R.flexDirection="row",R.alignItems="center",R.flexGrow=1,this.justifyCenter||(R.justifyContent="space-between"),R}renderChart(){return null}getPanelStyles(){const R=super.getPanelStyles();return R.alignItems="center",R}}class b extends E{constructor(R){super(R);const{width:B,height:H}=R,W=.5,N=.6,V=1-N,G=.4;this.chartWidth=B,this.chartHeight=H*W,this.titleToAlignTo?.length&&(this.titleFontSize=(0,l.Vr)(this.titleToAlignTo,this.maxTextWidth*N,this.maxTextHeight*G,m,a)),this.valueToAlignTo.length&&(this.valueFontSize=(0,l.Vr)(this.valueToAlignTo,this.maxTextWidth*V,this.maxTextHeight*W,m,void 0,v))}getValueAndTitleContainerStyles(){const R=super.getValueAndTitleContainerStyles();return R.flexDirection="row",R.flexGrow=1,this.justifyCenter||(R.justifyContent="space-between"),R}getPanelStyles(){const R=super.getPanelStyles();return R.flexDirection="row",R.justifyContent="space-between",R}}class P extends E{constructor(R){super(R);const{width:B,height:H}=R,W=.15,N=.25;let V=0;this.chartHeight=H*N,this.chartWidth=B,this.titleToAlignTo?.length&&(this.titleFontSize=(0,l.Vr)(this.titleToAlignTo,this.maxTextWidth,H*W,m,a),V=this.titleFontSize*m),this.valueToAlignTo.length&&(this.valueFontSize=(0,l.Vr)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-this.chartHeight-V,m,void 0,v)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize)),this.chartHeight=H-this.titleFontSize*m-this.valueFontSize*m}getValueAndTitleContainerStyles(){const R=super.getValueAndTitleContainerStyles();return R.flexDirection="column",R.justifyContent="center",R}getPanelStyles(){const R=super.getPanelStyles();return R.flexDirection="column",R}}class y extends E{constructor(R){super(R);const{height:B}=R,H=.15;let W=0;this.titleToAlignTo?.length&&(this.titleFontSize=(0,l.Vr)(this.titleToAlignTo,this.maxTextWidth,B*H,m,a),W=this.titleFontSize*m),this.valueToAlignTo.length&&(this.valueFontSize=(0,l.Vr)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-W,m,void 0,v)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const R=super.getValueAndTitleContainerStyles();return R.flexDirection="column",R.flexGrow=1,R}renderChart(){return null}getPanelStyles(){const R=super.getPanelStyles();return R.alignItems="center",R}}function T(U){const{width:R,height:B,sparkline:H}=U;return R/B>2.5&&!U.disableWideLayout?B>50&&H&&H.y.values.length>1?new b(U):new D(U):B>100&&H&&H.y.values.length>1?new P(U):new y(U)}function M(U,R){return U===O.Center?!0:(R??"").length===0}function I(U){const{value:R,alignmentFactors:B,count:H}=U;let{textMode:W}=U;const N=B?B.title:R.title,V=(0,u.cN)(B||R);switch(W===C.Auto&&(H??1)===1&&(W=C.Value),W){case C.Name:return{...R,title:void 0,prefix:void 0,suffix:void 0,text:R.title||"",titleToAlignTo:void 0,valueToAlignTo:N??"",tooltip:(0,u.cN)(R)};case C.Value:return{...R,title:void 0,titleToAlignTo:void 0,valueToAlignTo:V,tooltip:R.title};case C.None:return{numeric:R.numeric,color:R.color,title:void 0,text:"",titleToAlignTo:void 0,valueToAlignTo:"1",tooltip:`Name: ${R.title}
Value: ${(0,u.cN)(R)}`};case C.ValueAndName:default:return{...R,titleToAlignTo:N,valueToAlignTo:V}}}var x=(U=>(U.Background="background",U.BackgroundSolid="background_solid",U.None="none",U.Value="value",U))(x||{}),S=(U=>(U.None="none",U.Line="line",U.Area="area",U))(S||{}),O=(U=>(U.Auto="auto",U.Center="center",U))(O||{}),C=(U=>(U.Auto="auto",U.Value="value",U.ValueAndName="value_and_name",U.Name="name",U.None="none",U))(C||{});class L extends n.PureComponent{render(){const{onClick:R,className:B,hasLinks:H,theme:W}=this.props,N=T(this.props),V=N.getPanelStyles(),G=N.getValueAndTitleContainerStyles(),_=N.getValueStyles(),K=N.getTitleStyles(),j=N.textValues,k=this.props.value.percentChange,Q=k!=null&&!Number.isNaN(k),ee=H?void 0:j.tooltip;return R?n.createElement("button",{type:"button",className:(0,t.cx)((0,o.my)(W),B),style:V,onClick:R,title:ee},n.createElement("div",{style:G},j.title&&n.createElement("div",{style:K},j.title),n.createElement(s.i,{value:j,style:_})),N.renderChart()):n.createElement("div",{className:B,style:V,title:ee},n.createElement("div",{style:G},j.title&&n.createElement("div",{style:K},j.title),n.createElement(s.i,{value:j,style:_}),Q&&n.createElement(h,{percentChange:k,styles:N.getPercentChangeStyles(k)})),N.renderChart())}}L.defaultProps={justifyMode:"auto"}},54438:(Y,A,e)=>{"use strict";e.d(A,{J:()=>u});var t=e(32196),n=e(96540),o=e(23257),s=e.n(o),r=e(40845),g=e(5313);const u=(0,n.forwardRef)(({name:i,value:l,hidden:f,facets:c,onClick:h,className:p,loading:m,searchTerm:a,active:v,style:E,title:D,highlightParts:b,...P},y)=>{const T=(0,r.$j)(),M=d(T),I=a?[a]:[],x=(0,n.useCallback)(O=>{h&&!f&&h(i,l,O)},[h,i,f,l]);let S=l||i;return c&&(S=`${S} (${c})`),n.createElement("button",{key:S,ref:y,onClick:x,style:E,title:D||S,type:"button",role:"option","aria-selected":!!v,className:(0,t.cx)(M.base,v&&M.active,m&&M.loading,f&&M.hidden,p,h&&!f&&M.hover),...P},b!==void 0?n.createElement(g.z,{text:S,highlightClassName:M.matchHighLight,highlightParts:b}):n.createElement(s(),{textToHighlight:S,searchWords:I,autoEscape:!0,highlightClassName:M.matchHighLight}))});u.displayName="Label";const d=i=>({base:(0,t.css)({display:"inline-block",cursor:"pointer",fontSize:i.typography.size.sm,lineHeight:i.typography.bodySmall.lineHeight,backgroundColor:i.colors.background.secondary,color:i.colors.text.primary,whiteSpace:"nowrap",textShadow:"none",padding:i.spacing(.5),borderRadius:i.shape.radius.default,border:"none",marginRight:i.spacing(1),marginBottom:i.spacing(.5)}),loading:(0,t.css)({fontWeight:i.typography.fontWeightMedium,backgroundColor:i.colors.primary.shade,color:i.colors.text.primary,animation:"pulse 3s ease-out 0s infinite normal forwards","@keyframes pulse":{"0%":{color:i.colors.text.primary},"50%":{color:i.colors.text.secondary},"100%":{color:i.colors.text.disabled}}}),active:(0,t.css)({fontWeight:i.typography.fontWeightMedium,backgroundColor:i.colors.primary.main,color:i.colors.primary.contrastText}),matchHighLight:(0,t.css)({background:"inherit",color:i.components.textHighlight.text,backgroundColor:i.components.textHighlight.background}),hidden:(0,t.css)({opacity:.6,cursor:"default",border:"1px solid transparent"}),hover:(0,t.css)({["&:hover"]:{opacity:.85,cursor:"pointer"}})})},55852:(Y,A,e)=>{"use strict";e.d(A,{$n:()=>l,Ez:()=>v,U_:()=>m,hs:()=>c,my:()=>a,z9:()=>f});var t=e(32196),n=e(96540),o=e(40845),s=e(16797),r=e(87266),g=e(14578),u=e(56034);const d=null,i=null,l=n.forwardRef(({variant:E="primary",size:D="md",fill:b="solid",icon:P,fullWidth:y,children:T,className:M,type:I="button",tooltip:x,tooltipPlacement:S,...O},C)=>{const L=(0,o.$j)(),U=c({theme:L,size:D,variant:E,fill:b,fullWidth:y,iconOnly:!T}),R=n.createElement("button",{className:(0,t.cx)(U.button,M),type:I,...O,ref:x?void 0:C},P&&n.createElement(g.I,{name:P,size:D,className:U.icon}),T&&n.createElement("span",{className:U.content},T));return x?n.createElement(u.m,{ref:C,content:x,placement:S},R):R});l.displayName="Button";const f=n.forwardRef(({variant:E="primary",size:D="md",fill:b="solid",icon:P,fullWidth:y,children:T,className:M,onBlur:I,onFocus:x,disabled:S,tooltip:O,tooltipPlacement:C,...L},U)=>{const R=(0,o.$j)(),B=c({theme:R,fullWidth:y,size:D,variant:E,fill:b,iconOnly:!T}),H=(0,t.cx)(B.button,{[(0,t.css)(B.disabled,{pointerEvents:"none"})]:S},M),W=n.createElement("a",{className:H,...L,tabIndex:S?-1:0,"aria-disabled":S,ref:O?void 0:U},P&&n.createElement(g.I,{name:P,size:D,className:B.icon}),T&&n.createElement("span",{className:B.content},T));return O?n.createElement(u.m,{ref:U,content:O,placement:C},W):W});f.displayName="LinkButton";const c=E=>{const{theme:D,variant:b,fill:P="solid",size:y,iconOnly:T,fullWidth:M}=E,{height:I,padding:x,fontSize:S}=(0,r.SM)(y,D),O=m(D,b,P),C=p(D,b,P),L=(0,s.getFocusStyles)(D),U=D.spacing.gridSize*x-1;return{button:(0,t.css)({label:"button",display:"inline-flex",alignItems:"center",fontSize:S,fontWeight:D.typography.fontWeightMedium,fontFamily:D.typography.fontFamily,padding:`0 ${U}px`,height:D.spacing(I),lineHeight:`${D.spacing.gridSize*I-2}px`,verticalAlign:"middle",cursor:"pointer",borderRadius:D.shape.radius.default,"&:focus":L,"&:focus-visible":L,"&:focus:not(:focus-visible)":(0,s.getMouseFocusStyles)(D),...M&&{flexGrow:1,justifyContent:"center"},...O,":disabled":C,"&[disabled]":C}),disabled:(0,t.css)(C),img:(0,t.css)({width:"16px",height:"16px",margin:D.spacing(0,1,0,.5)}),icon:T?(0,t.css)({marginRight:D.spacing(-x/2),marginLeft:D.spacing(-x/2)}):(0,t.css)({marginRight:D.spacing(x/2)}),content:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"center",whiteSpace:"nowrap",overflow:"hidden",height:"100%"})}};function h(E,D,b){let P=D.border,y="transparent",T="transparent";return D.name==="secondary"&&(y=D.border,T=E.colors.emphasize(D.border,.25),P=E.colors.border.strong),b==="outline"?{background:"transparent",color:D.text,border:`1px solid ${P}`,transition:E.transitions.create(["background-color","border-color","color"],{duration:E.transitions.duration.short}),"&:hover":{background:D.transparent,borderColor:E.colors.emphasize(P,.25),color:D.text}}:b==="text"?{background:"transparent",color:D.text,border:"1px solid transparent",transition:E.transitions.create(["background-color","color"],{duration:E.transitions.duration.short}),"&:focus":{outline:"none",textDecoration:"none"},"&:hover":{background:D.transparent,textDecoration:"none"}}:{background:D.main,color:D.contrastText,border:`1px solid ${y}`,transition:E.transitions.create(["background-color","box-shadow","border-color","color"],{duration:E.transitions.duration.short}),"&:hover":{background:D.shade,color:D.contrastText,boxShadow:E.shadows.z1,borderColor:T}}}function p(E,D,b){const P={cursor:"not-allowed",boxShadow:"none",color:E.colors.text.disabled,transition:"none"};return b==="text"?{...P,background:"transparent",border:"1px solid transparent"}:b==="outline"?{...P,background:"transparent",border:`1px solid ${E.colors.border.weak}`}:{...P,background:E.colors.action.disabledBackground,border:"1px solid transparent"}}function m(E,D,b){switch(D){case"secondary":return h(E,E.colors.secondary,b);case"destructive":return h(E,E.colors.error,b);case"success":return h(E,E.colors.success,b);case"primary":default:return h(E,E.colors.primary,b)}}const a=E=>(0,t.css)({background:"transparent",color:E.colors.text.primary,border:"none",padding:0}),v=E=>(0,t.css)({background:"transparent",border:"none",padding:0,fontFamily:"inherit",color:"inherit",height:"100%","&:hover":{background:"transparent",color:"inherit"}})},19727:(Y,A,e)=>{"use strict";e.d(A,{e:()=>s});var t=e(32196),n=e(96540),o=e(40845);const s=(0,n.forwardRef)(({className:g,children:u,...d},i)=>{const l=(0,o.of)(r);return n.createElement("div",{ref:i,className:(0,t.cx)("button-group",l.wrapper,g),...d},u)});s.displayName="ButtonGroup";const r=g=>({wrapper:(0,t.css)({display:"flex","> .button-group:not(:first-child) > button, > button:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"> .button-group:not(:last-child) > button, > button:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0,borderRightWidth:0}})})},61458:(Y,A,e)=>{"use strict";e.d(A,{V:()=>s});var t=e(32196),n=e(96540),o=e(40845);const s=({className:g,children:u})=>{const d=(0,o.of)(r);return n.createElement("div",{className:(0,t.cx)(d,g)},u)},r=()=>(0,t.css)({display:"flex",button:{flexGrow:1,justifyContent:"center"},"> *":{flexGrow:1},label:{flexGrow:1,textAlign:"center"}})},32012:(Y,A,e)=>{"use strict";e.d(A,{H:()=>d});var t=e(32196),n=e(24442),o=e(96540),s=e(40845),r=e(55852),g=e(58898),u=e(14578);const d=l=>{const{onChange:f,className:c,loadData:h,icon:p,buttonProps:m,hideDownIcon:a,variant:v,disabled:E,...D}=l,b=(0,s.of)(i);let P=l.children;return a||(P=[l.children,o.createElement(u.I,{key:"down-icon",name:"angle-down",className:b.icons.right})]),o.createElement(n.A,{onChange:(0,g.k)(f),loadData:(0,g.W)(h),dropdownClassName:b.popup,...D,expandIcon:null},o.createElement(r.$n,{icon:p,disabled:E,variant:v,...m??{}},P))};d.displayName="ButtonCascader";const i=l=>({popup:(0,t.css)({label:"popup",zIndex:l.zIndex.dropdown}),icons:{right:(0,t.css)({margin:"1px 0 0 4px"}),left:(0,t.css)({margin:"-1px 4px 0 0"})}})},76442:(Y,A,e)=>{"use strict";e.d(A,{c:()=>s});var t=e(32196),n=e(96540),o=e(40845);const s=({message:g,callToActionElement:u,footer:d,className:i})=>{const l=(0,o.of)(r);return n.createElement("div",{className:(0,t.cx)([l.wrapper,i])},g&&n.createElement("div",{className:l.message},g),u,d&&n.createElement("div",{className:l.footer},d))},r=g=>({wrapper:(0,t.css)({label:"call-to-action-card",background:g.colors.background.secondary,borderRadius:g.shape.radius.default,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,padding:g.spacing(3),[g.breakpoints.down("sm")]:{padding:g.spacing(3,1)}}),message:(0,t.css)({marginBottom:g.spacing(3),fontStyle:"italic"}),footer:(0,t.css)({marginTop:g.spacing(3)})})},10860:(Y,A,e)=>{"use strict";e.d(A,{H:()=>y,Z:()=>u});var t=e(32196),n=e(96540),o=e(40845),s=e(16797),r=e(81507);const g=n.createContext(null),u=({disabled:T,href:M,onClick:I,children:x,isSelected:S,isCompact:O,className:C,...L})=>{const U=(0,n.useMemo)(()=>n.Children.toArray(x).some(W=>n.isValidElement(W)&&W.type===d),[x]),R=T||!I&&!M,B=I&&!T?I:void 0,H=(0,o.of)(r.i,T,R,S,O);return n.createElement(r.Q,{disableEvents:T,disableHover:R,isSelected:S,className:(0,t.cx)(H.container,C),...L},n.createElement(g.Provider,{value:{href:M,onClick:B,disabled:T,isSelected:S}},!U&&n.createElement(d,null),x))},d=({children:T,className:M,"aria-label":I})=>{const x=(0,n.useContext)(g),S=(0,o.of)(i),{href:O,onClick:C,isSelected:L}=x??{href:void 0,onClick:void 0,isSelected:void 0};return n.createElement("h2",{className:(0,t.cx)(S.heading,M)},O?n.createElement("a",{href:O,className:S.linkHack,"aria-label":I,onClick:C},T):C?n.createElement("button",{onClick:C,className:S.linkHack,"aria-label":I,type:"button"},T):n.createElement(n.Fragment,null,T),L!==void 0&&n.createElement("input",{"aria-label":"option",type:"radio",checked:L,readOnly:!0}))};d.displayName="Heading";const i=T=>({heading:(0,t.css)({gridArea:"Heading",justifySelf:"start",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:0,fontSize:T.typography.size.md,letterSpacing:"inherit",lineHeight:T.typography.body.lineHeight,color:T.colors.text.primary,fontWeight:T.typography.fontWeightMedium,"& input[readonly]":{cursor:"inherit"}}),linkHack:(0,t.css)({all:"unset","&::after":{position:"absolute",content:'""',top:0,bottom:0,left:0,right:0,borderRadius:T.shape.radius.default},"&:focus-visible":{outline:"none",outlineOffset:0,boxShadow:"none","&::after":{...(0,s.getFocusStyles)(T),zIndex:1}}})}),l=({children:T,className:M})=>{const I=(0,o.of)(f);return n.createElement("div",{className:(0,t.cx)(I.tagList,M)},T)};l.displayName="Tags";const f=T=>({tagList:(0,t.css)({position:"relative",gridArea:"Tags",alignSelf:"center"})}),c=({children:T,className:M})=>{const I=(0,o.of)(h);return n.createElement("p",{className:(0,t.cx)(I.description,M)},T)};c.displayName="Description";const h=T=>({description:(0,t.css)({width:"100%",gridArea:"Description",margin:T.spacing(1,0,0),color:T.colors.text.secondary,lineHeight:T.typography.body.lineHeight})}),p=({children:T,align:M="start",className:I})=>{const x=(0,o.of)(m);return n.createElement("div",{className:(0,t.cx)(x.media,I,(0,t.css)({alignSelf:M}))},T)};p.displayName="Figure";const m=T=>({media:(0,t.css)({position:"relative",gridArea:"Figure",marginRight:T.spacing(2),width:"40px","> img":{width:"100%"},"&:empty":{display:"none"}})}),a=(0,n.memo)(({children:T,className:M,separator:I="|"})=>{const x=(0,o.of)(v);let S=T;const O=n.Children.toArray(T).filter(Boolean);return O.length?(S=O.map((C,L)=>n.createElement("div",{key:`element_${L}`,className:x.metadataItem},C)),O.length>1&&I&&(S=O.reduce((C,L,U)=>[C,n.createElement("span",{key:`separator_${U}`,className:x.separator},I),L])),n.createElement("div",{className:(0,t.cx)(x.metadata,M)},S)):null});a.displayName="Meta";const v=T=>({metadata:(0,t.css)({gridArea:"Meta",display:"flex",alignItems:"center",width:"100%",fontSize:T.typography.size.sm,color:T.colors.text.secondary,margin:T.spacing(.5,0,0),lineHeight:T.typography.bodySmall.lineHeight,overflowWrap:"anywhere"}),metadataItem:(0,t.css)({zIndex:0}),separator:(0,t.css)({margin:`0 ${T.spacing(1)}`})}),E=({children:T,disabled:M,variant:I,className:x})=>{const S=(0,o.of)(D),C=(0,n.useContext)(g)?.disabled||M,L=I==="primary"?S.actions:S.secondaryActions;return n.createElement("div",{className:(0,t.cx)(L,x)},n.Children.map(T,U=>n.isValidElement(U)?(0,n.cloneElement)(U,{disabled:C,...U.props}):null))},D=T=>({actions:(0,t.css)({display:"flex",flexDirection:"row",flexWrap:"wrap",gap:T.spacing(1),gridArea:"Actions",marginTop:T.spacing(2)}),secondaryActions:(0,t.css)({alignSelf:"center",color:T.colors.text.secondary,display:"flex",flexDirection:"row",flexWrap:"wrap",gap:T.spacing(1),gridArea:"Secondary",marginTop:T.spacing(2)})}),b=({children:T,disabled:M,className:I})=>n.createElement(E,{variant:"primary",disabled:M,className:I},T);b.displayName="Actions";const P=({children:T,disabled:M,className:I})=>n.createElement(E,{variant:"secondary",disabled:M,className:I},T);P.displayName="SecondaryActions";const y=T=>({inner:(0,t.css)({display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap"}),...i(T),...v(T),...h(T),...m(T),...D(T),...f(T)});u.Heading=d,u.Tags=l,u.Figure=p,u.Meta=a,u.Actions=b,u.SecondaryActions=P,u.Description=c},81507:(Y,A,e)=>{"use strict";e.d(A,{Q:()=>u,i:()=>d});var t=e(32196),n=e(96540),o=e(40845),s=e(16797);const r=({children:i,href:l})=>{const{inner:f}=(0,o.of)(g);return l?n.createElement("a",{className:f,href:l},i):n.createElement(n.Fragment,null,i)},g=i=>({inner:(0,t.css)({display:"flex",width:"100%",padding:i.spacing(2)})}),u=({children:i,disableEvents:l,disableHover:f,isSelected:c,className:h,href:p,...m})=>{const{oldContainer:a}=(0,o.of)(d,l,f,c);return n.createElement("div",{...m,className:(0,t.cx)(a,h)},n.createElement(r,{href:p},i))},d=(i,l=!1,f=!1,c,h)=>{const p=c!==void 0;return{container:(0,t.css)({display:"grid",position:"relative",gridTemplateColumns:"auto 1fr auto",gridTemplateRows:"1fr auto auto auto",gridAutoColumns:"1fr",gridAutoFlow:"row",gridTemplateAreas:`
        "Figure Heading Tags"
        "Figure Meta Tags"
        "Figure Description Tags"
        "Figure Actions Secondary"`,width:"100%",padding:i.spacing(h?1:2),background:i.colors.background.secondary,borderRadius:i.shape.radius.default,marginBottom:"8px",pointerEvents:l?"none":"auto",transition:i.transitions.create(["background-color","box-shadow","border-color","color"],{duration:i.transitions.duration.short}),...!f&&{"&:hover":{background:i.colors.emphasize(i.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":s.getFocusStyles(i)},...p&&{cursor:"pointer"},...c&&{outline:`solid 2px ${i.colors.primary.border}`}}),oldContainer:(0,t.css)({display:"flex",width:"100%",background:i.colors.background.secondary,borderRadius:i.shape.radius.default,position:"relative",pointerEvents:l?"none":"auto",marginBottom:i.spacing(1),transition:i.transitions.create(["background-color","box-shadow","border-color","color"],{duration:i.transitions.duration.short}),...!f&&{"&:hover":{background:i.colors.emphasize(i.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":s.getFocusStyles(i)}})}}},3988:(Y,A,e)=>{"use strict";e.d(A,{v:()=>c});var t=e(32196),n=e(47078),o=e.n(n),s=e(24442),r=e(96540),g=e(14578),u=e(10354),d=e(88323),i=e(58898);const l=(0,t.css)({"&:focus":{outline:"none"}}),f=" / ";class c extends r.PureComponent{constructor(p){super(p),this.flattenOptions=(E,D=[])=>{let b=[];for(const P of E){const y=[...D];y.push(P),!P.items||P.items.length===0?b.push({singleLabel:y[y.length-1].label,label:y.map(T=>T.label).join(this.props.separator||f),value:y.map(T=>T.value)}):b=[...b,...this.flattenOptions(P.items,y)]}return b},this.getSearchableOptions=o()(E=>this.flattenOptions(E)),this.onChange=(E,D)=>{const b=this.props.hideActiveLevelLabel?"":this.props.displayAllSelectedLevels?D.map(y=>y.label).join(this.props.separator||f):D[D.length-1].label,P={rcValue:{value:E,label:b},focusCascade:!0,activeLabel:b,isSearching:!1};this.setState(P),this.props.onSelect(D[D.length-1].value)},this.onSelect=E=>{const D=E.value||[],b=this.props.displayAllSelectedLevels?E.label:E.singleLabel||"",P={activeLabel:b,rcValue:{value:D,label:b},isSearching:!1,focusCascade:!1};this.setState(P),this.props.onSelect(D[D.length-1])},this.onCreateOption=E=>{this.setState({activeLabel:E,rcValue:[],isSearching:!1}),this.props.onSelect(E)},this.onBlur=()=>{this.setState({isSearching:!1,focusCascade:!1}),this.state.activeLabel===""&&this.setState({rcValue:[]}),this.props.onBlur?.()},this.onBlurCascade=()=>{this.setState({focusCascade:!1}),this.props.onBlur?.()},this.onInputKeyDown=E=>{["ArrowDown","ArrowUp","Enter","ArrowLeft","ArrowRight","Backspace"].includes(E.key)||this.setState({focusCascade:!1,isSearching:!0})},this.onSelectInputChange=E=>{E===""&&this.setState({isSearching:!1})};const m=this.getSearchableOptions(p.options),{rcValue:a,activeLabel:v}=this.setInitialValue(m,p.initialValue);this.state={isSearching:!1,focusCascade:!1,rcValue:a,activeLabel:v}}setInitialValue(p,m){if(!m)return{rcValue:[],activeLabel:""};for(const a of p){const v=a.value||[];if(v[v.length-1]===m)return{rcValue:v,activeLabel:this.props.displayAllSelectedLevels?a.label:a.singleLabel||""}}return this.props.allowCustomValue?{rcValue:[],activeLabel:m}:{rcValue:[],activeLabel:""}}render(){const{allowCustomValue:p,formatCreateLabel:m,placeholder:a,width:v,changeOnSelect:E,options:D,disabled:b}=this.props,{focusCascade:P,isSearching:y,rcValue:T,activeLabel:M}=this.state,I=this.getSearchableOptions(D);return r.createElement("div",null,y?r.createElement(d.l6,{allowCustomValue:p,placeholder:a,autoFocus:!P,onChange:this.onSelect,onBlur:this.onBlur,options:I,onCreateOption:this.onCreateOption,formatCreateLabel:m,width:v,onInputChange:this.onSelectInputChange,disabled:b}):r.createElement(s.A,{onChange:(0,i.k)(this.onChange),options:D,changeOnSelect:E,value:T.value,fieldNames:{label:"label",value:"value",children:"items"},expandIcon:null,open:this.props.alwaysOpen,disabled:b},r.createElement("div",{className:l},r.createElement(u.p,{autoFocus:this.props.autoFocus,width:v,placeholder:a,onBlur:this.onBlurCascade,value:M,onKeyDown:this.onInputKeyDown,onChange:()=>{},suffix:P?r.createElement(g.I,{name:"angle-up"}):r.createElement(g.I,{name:"angle-down",style:{marginBottom:0,marginLeft:"4px"}}),disabled:b}))))}}c.defaultProps={changeOnSelect:!0}},58898:(Y,A,e)=>{"use strict";e.d(A,{W:()=>n,k:()=>t});const t=r=>(g,u)=>{r&&r(g.map(d=>String(d)),o(u))},n=r=>g=>{r&&r(o(g))},o=r=>r.map(s),s=r=>({value:r.value??"",label:r.label})},8866:(Y,A,e)=>{"use strict";e.d(A,{N:()=>n});var t=e(96540);class n extends t.PureComponent{constructor(){super(...arguments),this.myRef=(0,t.createRef)(),this.state={hasEventListener:!1},this.onOutsideClick=s=>{const r=this.myRef.current;(!r||s.target instanceof Node&&!r.contains(s.target))&&this.props.onClick()}}componentDidMount(){this.props.parent.addEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.addEventListener("keyup",this.onOutsideClick,this.props.useCapture)}componentWillUnmount(){this.props.parent.removeEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.removeEventListener("keyup",this.onOutsideClick,this.props.useCapture)}render(){return t.createElement("div",{ref:this.myRef},this.props.children)}}n.defaultProps={includeButtonPress:!0,parent:typeof window<"u"?window:void 0,useCapture:!1}},10534:(Y,A,e)=>{"use strict";e.d(A,{b:()=>i});var t=e(32196),n=e(96540),o=e(76412),s=e(40845),r=e(55852),g=e(14578),u=e(32982);const d=2*1e3;function i({onClipboardCopy:c,onClipboardError:h,children:p,getText:m,icon:a,variant:v,...E}){const D=(0,s.of)(f),[b,P]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let M;return b&&(M=setTimeout(()=>{P(!1)},d)),()=>{window.clearTimeout(M)}},[b]);const y=(0,n.useRef)(null),T=(0,n.useCallback)(async()=>{const M=m();try{await l(M,y),P(!0),c?.(M)}catch(I){h?.(M,I)}},[m,c,h]);return n.createElement(n.Fragment,null,b&&n.createElement(u.r,{placement:"top",referenceElement:y.current},n.createElement(o.x,{i18nKey:"clipboard-button.inline-toast.success"},"Copied")),n.createElement(r.$n,{onClick:T,icon:a,variant:b?"success":v,"aria-label":b?"Copied":void 0,...E,className:(0,t.cx)(D.button,b&&D.successButton,E.className),ref:y},p,b&&n.createElement("div",{className:D.successOverlay},n.createElement(g.I,{name:"check"}))))}const l=async(c,h)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(c);{const p=document.createElement("textarea");h.current?.appendChild(p),p.value=c,p.focus(),p.select(),document.execCommand("copy"),p.remove()}},f=c=>({button:(0,t.css)({position:"relative"}),successButton:(0,t.css)({"> *":(0,t.css)({visibility:"hidden"})}),successOverlay:(0,t.css)({position:"absolute",top:0,bottom:0,right:0,left:0,visibility:"visible"})})},57418:(Y,A,e)=>{"use strict";e.d(A,{M:()=>i});var t=e(32196),n=e(2543),o=e.n(n),s=e(96540),r=e(40845),g=e(16797),u=e(14578),d=e(62930);const i=({label:f,isOpen:c,onToggle:h,className:p,contentClassName:m,children:a,labelId:v,loading:E=!1,headerDataTestId:D,contentDataTestId:b})=>{const[P,y]=(0,s.useState)(c),T=(0,r.of)(l),M=S=>{S.target instanceof HTMLElement&&S.target.tagName==="A"||(S.preventDefault(),S.stopPropagation(),h?.(!P),y(!P))},{current:I}=(0,s.useRef)((0,n.uniqueId)()),x=v??`collapse-label-${I}`;return s.createElement(s.Fragment,null,s.createElement("div",{onClick:M,className:(0,t.cx)(T.header,p)},s.createElement("button",{type:"button",id:`collapse-button-${I}`,className:T.button,onClick:M,"aria-expanded":P&&!E,"aria-controls":`collapse-content-${I}`,"aria-labelledby":x},E?s.createElement(d.y,{className:T.spinner}):s.createElement(u.I,{name:P?"angle-up":"angle-down",className:T.icon})),s.createElement("div",{className:T.label,id:`collapse-label-${I}`,"data-testid":D},f)),P&&s.createElement("div",{id:`collapse-content-${I}`,className:(0,t.cx)(T.content,m),"data-testid":b},a))},l=f=>({header:(0,t.css)({display:"flex",cursor:"pointer",boxSizing:"border-box",flexDirection:"row-reverse",position:"relative",justifyContent:"space-between",fontSize:f.typography.size.lg,padding:`${f.spacing(.5)} 0`,"&:focus-within":(0,g.getFocusStyles)(f)}),button:(0,t.css)({all:"unset","&:focus-visible":{outline:"none",outlineOffset:"unset",transition:"none",boxShadow:"none"}}),icon:(0,t.css)({color:f.colors.text.secondary}),content:(0,t.css)({padding:`${f.spacing(2)} 0`}),spinner:(0,t.css)({display:"flex",alignItems:"center",width:f.spacing(2)}),label:(0,t.css)({display:"flex"})})},82762:(Y,A,e)=>{"use strict";e.d(A,{S:()=>d,a:()=>u});var t=e(32196),n=e(96540),o=e(40845),s=e(55852),r=e(14578);const g=i=>({collapse:(0,t.css)({label:"collapse",marginBottom:i.spacing(1),backgroundColor:i.colors.background.primary,border:`1px solid ${i.colors.border.weak}`,position:"relative",borderRadius:i.shape.radius.default,width:"100%",display:"flex",flexDirection:"column",flex:"1 1 0"}),collapseBody:(0,t.css)({label:"collapse__body",padding:i.spacing(i.components.panel.padding),paddingTop:0,flex:1,overflow:"hidden",display:"flex",flexDirection:"column"}),bodyContentWrapper:(0,t.css)({label:"bodyContentWrapper",flex:1,overflow:"hidden"}),loader:(0,t.css)({label:"collapse__loader",height:"2px",position:"relative",overflow:"hidden",background:"none",margin:i.spacing(.5)}),loaderActive:(0,t.css)({label:"collapse__loader_active","&:after":{content:"' '",display:"block",width:"25%",top:0,height:"250%",position:"absolute",animation:"loader 2s cubic-bezier(0.17, 0.67, 0.83, 0.67) 500ms",animationIterationCount:100,left:"-25%",background:i.colors.primary.main},"@keyframes loader":{from:{left:"-25%",opacity:.1},to:{left:"100%",opacity:1}}}),header:(0,t.css)({label:"collapse__header",padding:i.spacing(1,2,1,2),display:"flex",transition:"all 0.1s linear"}),headerCollapsed:(0,t.css)({label:"collapse__header--collapsed",padding:i.spacing(1,2,1,2)}),headerLabel:(0,t.css)({label:"collapse__header-label",fontWeight:i.typography.fontWeightMedium,marginRight:i.spacing(1),fontSize:i.typography.size.md,display:"flex",flex:"0 0 100%"}),icon:(0,t.css)({label:"collapse__icon",margin:i.spacing(.25,1,0,-1)})}),u=({isOpen:i,onToggle:l,...f})=>{const[c,h]=(0,n.useState)(i);return n.createElement(d,{isOpen:c,collapsible:!0,...f,onToggle:()=>{h(!c),l&&l(!c)}})},d=({isOpen:i,label:l,loading:f,collapsible:c,onToggle:h,className:p,children:m})=>{const a=(0,o.of)(s.my),v=(0,o.of)(g),E=()=>{h&&h(!i)},D=(0,t.cx)([v.collapse,p]),b=f?(0,t.cx)([v.loader,v.loaderActive]):(0,t.cx)([v.loader]),P=c?(0,t.cx)([v.header]):(0,t.cx)([v.headerCollapsed]);return n.createElement("div",{className:D},n.createElement("button",{type:"button",className:(0,t.cx)(a,P),onClick:E},c&&n.createElement(r.I,{className:v.icon,name:i?"angle-down":"angle-right"}),n.createElement("div",{className:(0,t.cx)([v.headerLabel])},l)),i&&n.createElement("div",{className:(0,t.cx)([v.collapseBody])},n.createElement("div",{className:b}),n.createElement("div",{className:v.bodyContentWrapper},m)))};d.displayName="Collapse"},36314:(Y,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(32196),n=e(2543),o=e.n(n),s=e(96540),r=e(84140),g=e(40845),u=e(10354);const d=(0,s.forwardRef)(({color:c,onChange:h,isClearable:p=!1,onClick:m,onBlur:a,disabled:v,buttonAriaLabel:E,...D},b)=>{const[P,y]=(0,s.useState)(c),[T,M]=(0,s.useState)(c),I=(0,s.useMemo)(()=>(0,n.debounce)(h,100),[]);(0,s.useEffect)(()=>{const O=(0,r.A)(c);O.isValid()&&c!==T&&(y(O.toString()),M(c))},[c,T]);const x=O=>{const{value:C}=O.currentTarget;if(y(C),C===""&&p){I(C);return}const L=(0,r.A)(C);L.isValid()&&I(L.toString())},S=O=>{(0,r.A)(P).isValid()||y(c),a?.(O)};return s.createElement(u.p,{...D,value:P,onChange:x,disabled:v,onClick:m,onBlur:S,addonBefore:s.createElement(l,{onClick:m,ariaLabel:E,disabled:v,color:c}),ref:b})});d.displayName="ColorInput";const i=d,l=({color:c,onClick:h,disabled:p,ariaLabel:m})=>{const a=(0,g.of)(f);return s.createElement("button",{type:"button",onClick:h,"aria-label":m,disabled:p||!h,className:(0,t.cx)(a,(0,t.css)({backgroundColor:c}))})},f=c=>(0,t.css)({height:"100%",width:`${c.spacing.gridSize*4}px`,borderRadius:`${c.shape.radius.default} 0 0 ${c.shape.radius.default}`,border:`1px solid ${c.colors.border.medium}`})},83598:(Y,A,e)=>{"use strict";e.d(A,{Dp:()=>h,sk:()=>c});var t=e(32196),n=e(96540),o=e(40845),s=e(3911),r=e(40321),g=e(13840),u=e(95868),d=e(70045),i=e(83876),l=e(70104);const f=(m,a="ColorPicker")=>{var v;return v=class extends n.Component{constructor(){super(...arguments),this.pickerTriggerRef=(0,n.createRef)()}render(){const{theme:E,children:D,onChange:b,color:P}=this.props,y=p(E),T=n.createElement(m,{...this.props,children:null,onChange:b});return n.createElement(u.I,{content:T,hideAfter:300},(M,I,x)=>n.createElement(n.Fragment,null,this.pickerTriggerRef.current&&n.createElement(g.A,{...x,referenceElement:this.pickerTriggerRef.current,wrapperClassName:y.colorPicker,onMouseLeave:I,onMouseEnter:M,onKeyDown:S=>(0,r.Q)(S,I)}),D?D({ref:this.pickerTriggerRef,showColorPicker:M,hideColorPicker:I}):n.createElement(i.q,{ref:this.pickerTriggerRef,onClick:M,onMouseLeave:I,color:E.visualization.getColorByName(P||"#000000"),"aria-label":P})))}},v.displayName=a,v},c=(0,o.cV)(f(d.$,"ColorPicker")),h=(0,o.cV)(f(l.o,"SeriesColorPicker")),p=(0,s.N)(m=>({colorPicker:(0,t.css)({position:"absolute",zIndex:m.zIndex.tooltip,color:m.colors.text.primary,maxWidth:"400px",fontSize:m.typography.size.sm,padding:"15px !important",'& [data-placement^="top"]':{paddingLeft:"0 !important",paddingRight:"0 !important"},'& [data-placement^="bottom"]':{paddingLeft:"0 !important",paddingRight:"0 !important"},'& [data-placement^="left"]':{paddingTop:"0 !important"},'& [data-placement^="right"]':{paddingTop:"0 !important"}})}))},99128:(Y,A,e)=>{"use strict";e.d(A,{i:()=>l});var t=e(32196),n=e(96540),o=e(7612),s=e(65229),r=e(23596),g=e(40845),u=e(8866),d=e(36314),i=e(95151);const l=(0,n.forwardRef)(({value:c="",onChange:h,returnColorAs:p="rgb",...m},a)=>{const[v,E]=(0,n.useState)(c),[D,b]=(0,n.useState)(!1),P=(0,g.$j)(),y=(0,g.of)(f),T=(0,g.of)(i.$);return(0,s.A)(M=>{if(M===c)return;if(!M){h("");return}const I=P.visualization.getColorByName(M);h(p==="rgb"?r.asRgbString(I):r.asHexString(I))},500,[v]),n.createElement(u.N,{onClick:()=>b(!1)},n.createElement("div",{className:y.wrapper},D&&!m.disabled&&n.createElement(o.p9,{"data-testid":"color-popover",color:v,onChange:E,className:(0,t.cx)(T.root,y.picker)}),n.createElement(d.A,{...m,theme:P,color:v,onChange:E,buttonAriaLabel:"Open color picker",onClick:()=>b(!0),onBlur:()=>b(!1),ref:a,isClearable:!0})))});l.displayName="ColorPickerInput";const f=c=>({wrapper:(0,t.css)({position:"relative"}),picker:(0,t.css)({"&.react-colorful":{position:"absolute",width:"100%",zIndex:11,bottom:"36px"}}),inner:(0,t.css)({position:"absolute"})})},70045:(Y,A,e)=>{"use strict";e.d(A,{$:()=>v});var t=e(32196),n=e(7887),o=e(96540),s=e(23596),r=e(40845),g=e(3911),u=e(83876),d=e(2543);function i(D,b){const P=new Array(D.length);for(let y=0;y<D.length;y++){const T=D.length-1-y;P[y]=b(D[T],T,D)}return P}const f=({hue:D,selectedColor:b,onColorSelect:P,...y})=>{const T=(0,d.upperFirst)(D.name),M=(0,r.of)(c);return o.createElement("div",{className:M.colorRow},o.createElement("div",{className:M.colorLabel},T),o.createElement("div",{...y,className:M.swatchRow},i(D.shades,I=>o.createElement(u.q,{key:I.name,"aria-label":I.name,variant:I.primary?u.h.Large:u.h.Small,isSelected:I.name===b,color:I.color,onClick:()=>P(I.name)}))))},c=D=>({colorRow:(0,t.css)({display:"grid",gridTemplateColumns:"25% 1fr",gridColumnGap:D.spacing(2),padding:D.spacing(.5,0),"&:hover":{background:D.colors.background.secondary}}),colorLabel:(0,t.css)({paddingLeft:D.spacing(2),display:"flex",alignItems:"center"}),swatchRow:(0,t.css)({display:"flex",gap:D.spacing(1),alignItems:"center",justifyContent:"space-around",flexDirection:"row"})}),h=({color:D,onChange:b})=>{const P=(0,r.$j)(),y=(0,r.of)(p),T=[];for(const M of P.visualization.hues)T.push(o.createElement(f,{key:M.name,selectedColor:D,hue:M,onColorSelect:b}));return o.createElement(o.Fragment,null,o.createElement("div",{className:y.swatches},T),o.createElement("div",{className:y.extraColors},o.createElement(u.q,{isSelected:D==="transparent",color:"rgba(0,0,0,0)",label:"Transparent",onClick:()=>b("transparent")}),o.createElement(u.q,{isSelected:D==="text",color:P.colors.text.primary,label:"Text color",onClick:()=>b("text")})))},p=D=>({container:(0,t.css)({display:"flex",flexDirection:"column"}),extraColors:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-around",gap:D.spacing(1),padding:D.spacing(1,0)}),swatches:(0,t.css)({display:"grid",flexGrow:1})});var m=e(95151);class a extends o.Component{constructor(b){super(b),this.getTabClassName=P=>{const{activePicker:y}=this.state;return`ColorPickerPopover__tab ${y===P&&"ColorPickerPopover__tab--active"}`},this.handleChange=P=>{const{onChange:y,enableNamedColors:T,theme:M}=this.props;if(T)return y(P);y(s.asHexString(M.visualization.getColorByName(P)))},this.onTabChange=P=>()=>this.setState({activePicker:P}),this.renderPicker=()=>{const{activePicker:P}=this.state,{color:y}=this.props;switch(P){case"spectrum":return o.createElement(m.A,{color:y,onChange:this.handleChange});case"palette":return o.createElement(h,{color:y,onChange:this.handleChange});default:return this.renderCustomPicker(P)}},this.renderCustomPicker=P=>{const{customPickers:y,color:T,theme:M}=this.props;return y?o.createElement(y[P].tabComponent,{color:T,theme:M,onChange:this.handleChange}):null},this.renderCustomPickerTabs=()=>{const{customPickers:P}=this.props;return P?o.createElement(o.Fragment,null,Object.keys(P).map(y=>o.createElement("button",{className:this.getTabClassName(y),onClick:this.onTabChange(y),key:y,type:"button"},P[y].name))):null},this.state={activePicker:"palette"}}render(){const{theme:b}=this.props,P=E(b);return o.createElement(n.n1,{contain:!0,restoreFocus:!0,autoFocus:!0},o.createElement("div",{tabIndex:-1,className:P.colorPickerPopover},o.createElement("div",{className:P.colorPickerPopoverTabs},o.createElement("button",{className:this.getTabClassName("palette"),onClick:this.onTabChange("palette"),type:"button"},"Colors"),o.createElement("button",{className:this.getTabClassName("spectrum"),onClick:this.onTabChange("spectrum"),type:"button"},"Custom"),this.renderCustomPickerTabs()),o.createElement("div",{className:P.colorPickerPopoverContent},this.renderPicker())))}}const v=(0,r.cV)(a);v.displayName="ColorPickerPopover";const E=(0,g.N)(D=>({colorPickerPopover:(0,t.css)({borderRadius:D.shape.radius.default,boxShadow:D.shadows.z3,background:D.colors.background.primary,border:`1px solid ${D.colors.border.weak}`,".ColorPickerPopover__tab":{width:"50%",textAlign:"center",padding:D.spacing(1,0),background:D.colors.background.secondary,color:D.colors.text.secondary,fontSize:D.typography.bodySmall.fontSize,cursor:"pointer",border:"none","&:focus:not(:focus-visible)":{outline:"none",boxShadow:"none"},":focus-visible":{position:"relative"}},".ColorPickerPopover__tab--active":{color:D.colors.text.primary,fontWeight:D.typography.fontWeightMedium,background:D.colors.background.primary}}),colorPickerPopoverContent:(0,t.css)({width:"246px",fontSize:D.typography.bodySmall.fontSize,minHeight:"184px",padding:D.spacing(1),display:"flex",flexDirection:"column"}),colorPickerPopoverTabs:(0,t.css)({display:"flex",width:"100%",borderRadius:`${D.shape.radius.default} ${D.shape.radius.default} 0 0`})}))},83876:(Y,A,e)=>{"use strict";e.d(A,{h:()=>u,q:()=>d});var t=e(32196),n=e(7887),o=e(96540),s=e(84140),r=e(13544),g=e(40845),u=(l=>(l.Small="small",l.Large="large",l))(u||{});const d=o.forwardRef(({color:l,label:f,variant:c="small",isSelected:h,"aria-label":p,...m},a)=>{const v=(0,g.$j)(),{isFocusVisible:E,focusProps:D}=(0,n.og)(),b=i(v,c,l,E,h),P=!!f,y=p||f;return o.createElement("div",{ref:a,className:b.wrapper,"data-testid":r.Tp.components.ColorSwatch.name,...m},P&&o.createElement("span",{className:b.label},f),o.createElement("button",{className:b.swatch,...D,"aria-label":y?`${y} color`:"Pick a color",type:"button"}))}),i=(l,f,c,h,p)=>{const m=(0,s.A)(c),v=f==="small"?"16px":"32px";let E="none";return m.getAlpha()<.1&&(E=`2px solid ${l.colors.border.medium}`),{wrapper:(0,t.css)({display:"flex",alignItems:"center",cursor:"pointer"}),label:(0,t.css)({marginRight:l.spacing(1)}),swatch:(0,t.css)({width:v,height:v,background:`${c}`,border:E,borderRadius:l.shape.radius.circle,outlineOffset:"1px",outline:h?`2px solid  ${l.colors.primary.main}`:"none",boxShadow:p?`inset 0 0 0 2px ${c}, inset 0 0 0 4px ${l.colors.getContrastText(c)}`:"none",transition:l.transitions.create(["transform"],{duration:l.transitions.duration.short}),"&:hover":{transform:"scale(1.1)"},"@media (forced-colors: active)":{forcedColorAdjust:"none"}})}};d.displayName="ColorSwatch"},70104:(Y,A,e)=>{"use strict";e.d(A,{o:()=>g,t:()=>u});var t=e(32196),n=e(96540),o=e(40845),s=e(74716),r=e(70045);const g=i=>{const l=(0,o.of)(d),{yaxis:f,onToggleAxis:c,color:h,...p}=i,m=c?{yaxis:{name:"Y-Axis",tabComponent(){return n.createElement(s.d,{key:"yaxisSwitch",label:"Use right y-axis",className:l.colorPickerAxisSwitch,labelClass:l.colorPickerAxisSwitchLabel,checked:f===2,onChange:()=>{c&&c()}})}}}:void 0;return n.createElement(r.$,{...p,color:h||"#000000",customPickers:m})},u=(0,o.cV)(g),d=()=>({colorPickerAxisSwitch:(0,t.css)({width:"100%"}),colorPickerAxisSwitchLabel:(0,t.css)({display:"flex",flexGrow:1})})},95151:(Y,A,e)=>{"use strict";e.d(A,{$:()=>l,A:()=>f});var t=e(32196),n=e(96540),o=e(7612),s=e(65229),r=e(84140),g=e(23596),u=e(40845),d=e(36314);const i=({color:c,onChange:h})=>{const[p,m]=(0,n.useState)(c);(0,s.A)(D=>{h(g.asHexString(a.visualization.getColorByName(D)))},500,[p]);const a=(0,u.$j)(),v=(0,u.of)(l),E=(0,n.useMemo)(()=>p.startsWith("rgba")?p:(0,r.A)(a.visualization.getColorByName(c)).toRgbString(),[p,a,c]);return n.createElement("div",{className:v.wrapper},n.createElement(o.p9,{className:v.root,color:E,onChange:m}),n.createElement(d.A,{theme:a,color:E,onChange:m,className:v.colorInput}))},l=c=>({wrapper:(0,t.css)({flexGrow:1}),root:(0,t.css)({"&.react-colorful":{width:"auto"},".react-colorful":{"&__saturation":{borderRadius:`${c.shape.radius.default} ${c.shape.radius.default} 0 0`},"&__alpha":{borderRadius:`0 0 ${c.shape.radius.default} ${c.shape.radius.default}`},"&__alpha, &__hue":{height:c.spacing(2),position:"relative"},"&__pointer":{height:c.spacing(2),width:c.spacing(2)}}}),colorInput:(0,t.css)({marginTop:c.spacing(2)})}),f=i},82702:(Y,A,e)=>{"use strict";e.d(A,{Z:()=>u});var t=e(32196),n=e(96540),o=e(40845),s=e(3911),r=e(55852);class g extends n.PureComponent{constructor(){super(...arguments),this.mainButtonRef=n.createRef(),this.confirmButtonRef=n.createRef(),this.state={showConfirm:!1},this.onClickButton=l=>{l&&l.preventDefault(),this.setState({showConfirm:!0},()=>{this.props.autoFocus&&this.confirmButtonRef.current&&this.confirmButtonRef.current.focus()}),this.props.onClick&&this.props.onClick()},this.onClickCancel=l=>{l&&l.preventDefault(),this.setState({showConfirm:!1},()=>{this.mainButtonRef.current?.focus()}),this.props.onCancel&&this.props.onCancel()},this.onConfirm=l=>{l&&l.preventDefault(),this.props.onConfirm(),this.props.closeOnConfirm&&this.setState({showConfirm:!1})}}render(){const{theme:l,className:f,size:c,disabled:h,confirmText:p,confirmVariant:m,children:a}=this.props,v=d(l),E=(0,t.cx)(f,this.state.showConfirm?v.buttonHide:v.buttonShow,h&&v.buttonDisabled),D=(0,t.cx)(v.confirmButton,this.state.showConfirm?v.confirmButtonShow:v.confirmButtonHide),b=h?()=>{}:this.onClickButton;return n.createElement("span",{className:v.buttonContainer},n.createElement("div",{className:(0,t.cx)(h&&v.disabled)},n.createElement("span",{className:E},typeof a=="string"?n.createElement(r.$n,{size:c,fill:"text",onClick:b,ref:this.mainButtonRef},a):n.cloneElement(a,{onClick:b,ref:this.mainButtonRef}))),n.createElement("span",{className:D},n.createElement(r.$n,{size:c,variant:m,onClick:this.onConfirm,ref:this.confirmButtonRef},p),n.createElement(r.$n,{size:c,fill:"text",onClick:this.onClickCancel},"Cancel")))}}const u=(0,o.cV)(g),d=(0,s.N)(i=>({buttonContainer:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"flex-end"}),buttonDisabled:(0,t.css)({textDecoration:"none",color:i.colors.text.primary,opacity:.65,pointerEvents:"none"}),buttonShow:(0,t.css)({opacity:1,transition:"opacity 0.1s ease",zIndex:2}),buttonHide:(0,t.css)({opacity:0,transition:"opacity 0.1s ease, visibility 0 0.1s",visibility:"hidden",zIndex:0}),confirmButton:(0,t.css)({alignItems:"flex-start",background:i.colors.background.primary,display:"flex",position:"absolute",pointerEvents:"none"}),confirmButtonShow:(0,t.css)({zIndex:1,opacity:1,transition:"opacity 0.08s ease-out, transform 0.1s ease-out",transform:"translateX(0)",pointerEvents:"all"}),confirmButtonHide:(0,t.css)({opacity:0,visibility:"hidden",transition:"opacity 0.12s ease-in, transform 0.14s ease-in, visibility 0s 0.12s",transform:"translateX(100px)"}),disabled:(0,t.css)({cursor:"not-allowed"})}));u.defaultProps={size:"md",confirmText:"Save",disabled:!1,confirmVariant:"primary"},u.displayName="ConfirmButton"},91605:(Y,A,e)=>{"use strict";e.d(A,{e:()=>s});var t=e(96540),n=e(55852),o=e(82702);const s=({size:r,disabled:g,onConfirm:u,"aria-label":d,closeOnConfirm:i})=>t.createElement(o.Z,{confirmText:"Delete",confirmVariant:"destructive",size:r||"md",disabled:g,onConfirm:u,closeOnConfirm:i},t.createElement(n.$n,{"aria-label":d,variant:"destructive",icon:"times",size:r||"sm"}))},96374:(Y,A,e)=>{"use strict";e.d(A,{u:()=>i});var t=e(32196),n=e(96540),o=e(13544),s=e(40845),r=e(55852),g=e(10354),u=e(66864),d=e(37390);const i=({isOpen:f,title:c,body:h,description:p,confirmText:m,confirmVariant:a="destructive",confirmationText:v,dismissText:E="Cancel",dismissVariant:D="secondary",alternativeText:b,modalClass:P,icon:y="exclamation-triangle",onConfirm:T,onDismiss:M,onAlternative:I,confirmButtonVariant:x="destructive"})=>{const[S,O]=(0,n.useState)(!!v),C=(0,s.of)(l),L=(0,n.useRef)(null),U=B=>{O(v?.toLowerCase().localeCompare(B.currentTarget.value.toLowerCase())!==0)};(0,n.useEffect)(()=>{f&&L.current?.focus()},[f]),(0,n.useEffect)(()=>{f&&O(!!v)},[f,v]);const R=async()=>{O(!0);try{await T()}finally{O(!1)}};return n.createElement(d.a,{className:(0,t.cx)(C.modal,P),title:c,icon:y,isOpen:f,onDismiss:M},n.createElement("div",{className:C.modalText},h,p?n.createElement("div",{className:C.modalDescription},p):null,v?n.createElement("div",{className:C.modalConfirmationInput},n.createElement(u.Gy,null,n.createElement(g.p,{placeholder:`Type "${v}" to confirm`,onChange:U}))):null),n.createElement(d.a.ButtonRow,null,n.createElement(r.$n,{variant:D,onClick:M,fill:"outline"},E),n.createElement(r.$n,{variant:x,onClick:R,disabled:S,ref:L,"data-testid":o.Tp.pages.ConfirmModal.delete},m),I?n.createElement(r.$n,{variant:"primary",onClick:I},b):null))},l=f=>({modal:(0,t.css)({width:"500px"}),modalText:(0,t.css)({fontSize:f.typography.h5.fontSize,color:f.colors.text.primary}),modalDescription:(0,t.css)({fontSize:f.typography.body.fontSize}),modalConfirmationInput:(0,t.css)({paddingTop:f.spacing(1)})})},28122:(Y,A,e)=>{"use strict";e.d(A,{t:()=>g});var t=e(96540),n=e(29647),o=e(13544),s=e(38138),r=e(17464);const g=t.memo(({x:u,y:d,onClose:i,focusOnOpen:l=!0,renderMenuItems:f,renderHeader:c})=>{const h=(0,t.useRef)(null),[p,m]=(0,t.useState)({});(0,t.useLayoutEffect)(()=>{const b=h.current;if(b){const P=b.getBoundingClientRect(),y=5,T={right:window.innerWidth<u+P.width,bottom:window.innerHeight<d+P.height+y};m({position:"fixed",left:T.right?u-P.width-y:u-y,top:Math.max(0,T.bottom?d-P.height-y:d+y)})}},[u,d]),(0,n.A)(h,()=>{i?.()});const a=c?.(),v=f?.(),E=b=>{l&&b(0)},D=b=>{b.key==="Escape"&&(b.preventDefault(),b.stopPropagation(),i?.())};return t.createElement(r.ZL,null,t.createElement(s.W,{header:a,ref:h,style:p,ariaLabel:o.Tp.components.Menu.MenuComponent("Context"),onOpen:E,onClick:i,onKeyDown:D},v))});g.displayName="ContextMenu"},51686:(Y,A,e)=>{"use strict";e.d(A,{n:()=>o});var t=e(96540),n=e(28122);const o=({children:s,renderMenuItems:r,focusOnOpen:g=!0})=>{const[u,d]=(0,t.useState)(!1),[i,l]=(0,t.useState)({x:0,y:0});return t.createElement(t.Fragment,null,s({openMenu:f=>{d(!0),l({x:f.pageX,y:f.pageY})}}),u&&t.createElement(n.t,{onClose:()=>d(!1),x:i.x,y:i.y,renderMenuItems:r,focusOnOpen:g}))}},40276:(Y,A,e)=>{"use strict";e.d(A,{E:()=>u,A:()=>d});var t=e(32196),n=e(96540),o=e(62295),s=e(40845);const r=({children:l})=>{const[f,c]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!1),m=(0,n.useRef)(null),a=(0,n.useRef)(null),v=(0,s.of)(g);return(0,n.useEffect)(()=>{const E=new IntersectionObserver(D=>{D.forEach(b=>{b.target===m.current?c(!b.isIntersecting):b.target===a.current&&p(!b.isIntersecting)})});return[m,a].forEach(D=>{D.current&&E.observe(D.current)}),()=>E.disconnect()},[]),n.createElement(n.Fragment,null,n.createElement("div",{className:(0,t.cx)(v.scrollIndicator,v.scrollTopIndicator,{[v.scrollIndicatorVisible]:f})}),n.createElement("div",{className:v.scrollContent},n.createElement("div",{ref:m}),l,n.createElement("div",{ref:a})),n.createElement("div",{className:(0,t.cx)(v.scrollIndicator,v.scrollBottomIndicator,{[v.scrollIndicatorVisible]:h})}))},g=l=>({scrollContent:(0,t.css)({flex:1,position:"relative"}),scrollIndicator:(0,t.css)({height:l.spacing(6),left:0,opacity:0,pointerEvents:"none",position:"absolute",right:0,transition:l.transitions.create("opacity"),zIndex:1}),scrollTopIndicator:(0,t.css)({background:`linear-gradient(0deg, transparent, ${l.colors.background.canvas})`,top:0}),scrollBottomIndicator:(0,t.css)({background:`linear-gradient(180deg, transparent, ${l.colors.background.canvas})`,bottom:0}),scrollIndicatorVisible:(0,t.css)({opacity:1})}),u=({autoHide:l=!1,autoHideTimeout:f=200,setScrollTop:c,className:h,testId:p,autoHeightMin:m="0",autoHeightMax:a="100%",hideTracksWhenNotNeeded:v=!1,hideHorizontalTrack:E,hideVerticalTrack:D,scrollRefCallback:b,showScrollIndicators:P=!1,updateAfterMountMs:y,scrollTop:T,onScroll:M,children:I})=>{const x=(0,n.useRef)(null),S=(0,s.of)(i);(0,n.useEffect)(()=>{x.current&&b&&b(x.current.view)},[x,b]),(0,n.useEffect)(()=>{x.current&&T!=null&&x.current.scrollTop(T)},[T]),(0,n.useEffect)(()=>{y&&setTimeout(()=>{const W=x.current;W?.update&&W.update()},y)},[y]);function O(W,N,V){return V.style&&N&&(V.style.display="none"),n.createElement("div",{...V,className:W})}const C=(0,n.useCallback)(W=>O("track-horizontal",E,W),[E]),L=(0,n.useCallback)(W=>O("track-vertical",D,W),[D]),U=(0,n.useCallback)(W=>n.createElement("div",{...W,className:"thumb-horizontal"}),[]),R=(0,n.useCallback)(W=>n.createElement("div",{...W,className:"thumb-vertical"}),[]),B=(0,n.useCallback)(W=>(W.style&&W.style.WebkitOverflowScrolling==="touch"&&(W.style.WebkitOverflowScrolling="auto"),n.createElement("div",{...W,className:"scrollbar-view"})),[]),H=(0,n.useCallback)(()=>{x.current&&c&&c(x.current.getValues())},[c]);return n.createElement(o.Ay,{"data-testid":p,ref:x,className:(0,t.cx)(S.customScrollbar,h,{[S.scrollbarWithScrollIndicators]:P}),onScrollStop:H,autoHeight:!0,autoHide:l,autoHideTimeout:f,hideTracksWhenNotNeeded:v,autoHeightMax:a,autoHeightMin:m,renderTrackHorizontal:C,renderTrackVertical:L,renderThumbHorizontal:U,renderThumbVertical:R,renderView:B,onScroll:M},P?n.createElement(r,null,I):I)},d=u,i=l=>({customScrollbar:(0,t.css)({display:"flex",flexGrow:1,".scrollbar-view":{display:"flex",flexGrow:1,flexDirection:"column"},".track-vertical":{borderRadius:l.shape.borderRadius(2),width:`${l.spacing(1)} !important`,right:0,bottom:l.spacing(.25),top:l.spacing(.25)},".track-horizontal":{borderRadius:l.shape.borderRadius(2),height:`${l.spacing(1)} !important`,right:l.spacing(.25),bottom:l.spacing(.25),left:l.spacing(.25)},".thumb-vertical":{background:l.colors.action.focus,borderRadius:l.shape.borderRadius(2),opacity:0},".thumb-horizontal":{background:l.colors.action.focus,borderRadius:l.shape.borderRadius(2),opacity:0},"&:hover":{".thumb-vertical, .thumb-horizontal":{opacity:1,transition:"opacity 0.3s ease-in-out"}}}),scrollbarWithScrollIndicators:(0,t.css)({".scrollbar-view":{position:"static !important"}})})},14689:(Y,A,e)=>{"use strict";e.d(A,{R:()=>o});var t=e(96540),n=e(55852);function o({link:s,buttonProps:r}){return t.createElement("a",{href:s.href,target:s.target,rel:"noreferrer",onClick:s.onClick?g=>{!(g.ctrlKey||g.metaKey||g.shiftKey)&&s.onClick&&(g.preventDefault(),s.onClick(g))}:void 0},t.createElement(n.$n,{icon:s.target==="_blank"?"external-link-alt":void 0,variant:"primary",size:"sm",...r},s.title))}},64078:(Y,A,e)=>{"use strict";e.d(A,{l:()=>I});var t=e(32196),n=e(95361),o=e(18491),s=e(36376),r=e(28848),g=e.n(r),u=e(96540),d=e(80292),i=e(75226),l=e(29317),f=e(91890),c=e(6709),h=e(41781),p=e(40845),m=e(72307),a=e(40276),v=e(10354),E=e(17464),D=e(43538);class b{getBoundingClientRect(){const O=window.getSelection(),C=O&&O.anchorNode;return C&&C.parentElement?C.parentElement.getBoundingClientRect():{top:0,left:0,bottom:0,right:0,width:0,height:0,x:0,y:0,toJSON:()=>{}}}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}const P=(S,O)=>S-O*Math.floor(S/O),y={builtInVariable:{pattern:/(\${\S+?})/}},T=[(0,h.D)({onlyIn:S=>"type"in S&&S.type==="code_block",getSyntax:()=>"links"},{...g().languages,links:y})],M=S=>({input:(0,v.n)({theme:S,invalid:!1}).input,editor:(0,t.css)({".token.builtInVariable":{color:S.colors.success.text},".token.variable":{color:S.colors.primary.text}}),suggestionsWrapper:(0,t.css)({boxShadow:S.shadows.z2}),wrapperOverrides:(0,t.css)({width:"100%","> .slate-query-field__wrapper":{padding:0,backgroundColor:"transparent",border:"none"}})}),I=(0,u.memo)(({value:S,onChange:O,suggestions:C,placeholder:L="http://your-grafana.com/d/000000010/annotations"})=>{const U=(0,u.useRef)(null),R=(0,p.of)(M),[B,H]=(0,u.useState)(!1),[W,N]=(0,u.useState)(0),[V,G]=(0,u.useState)((0,m.mO)(S)),_=(0,d.A)(V),[K,j]=(0,u.useState)(0),k=[(0,n.cY)(({rects:de})=>({alignmentAxis:de.reference.width})),(0,o.UU)({fallbackAxisSideDirection:"start",crossAxis:!1,boundary:document.body}),(0,o.BN)()],{refs:Q,floatingStyles:ee}=(0,s.we)({open:B,placement:"bottom-start",onOpenChange:H,middleware:k,whileElementsMounted:o.ll,strategy:"fixed"}),ae=(0,u.useRef)({showingSuggestions:B,suggestions:C,suggestionsIndex:W,linkUrl:V,onChange:O});ae.current={showingSuggestions:B,suggestions:C,suggestionsIndex:W,linkUrl:V,onChange:O};const Z=(0,u.useRef)(null);(0,u.useEffect)(()=>{j(x(Z.current,W))},[W]);const ne=u.useCallback((de,ie)=>{if(!ae.current.showingSuggestions){if(de.key==="="||de.key==="$"||de.keyCode===32&&de.ctrlKey){const ge=new b;return Q.setReference(ge),H(!0)}return ie()}switch(de.key){case"Backspace":case"Escape":return H(!1),N(0);case"Enter":return de.preventDefault(),te(ae.current.suggestions[ae.current.suggestionsIndex]);case"ArrowDown":case"ArrowUp":de.preventDefault();const ge=de.key==="ArrowDown"?1:-1;return N(ve=>P(ve+ge,ae.current.suggestions.length));default:return ie()}},[]);(0,u.useEffect)(()=>{_&&_.selection.isFocused&&!V.selection.isFocused&&ae.current.onChange(i.A.serialize(V))},[V,_]);const q=u.useCallback(({value:de})=>{G(de)},[]),te=(de,ie=U.current)=>{const ve=re()==="$";de.origin!==f.$0.Template||de.value===c.c.includeVars?ie.insertText(`${ve?"":"$"}{${de.value}}`):ie.insertText(`${ve?"":"$"}{${de.value}:queryparam}`),G(ie.value),H(!1),N(0),ae.current.onChange(i.A.serialize(ie.value))},re=()=>{const de=document.getElementById("data-link-input");let ie="",ge,ve;return window.getSelection&&(ge=window.getSelection(),ge&&ge.rangeCount>0&&(ve=ge.getRangeAt(0).cloneRange(),ve.collapse(!0),ve.setStart(de,0),ie=ve.toString().slice(-1))),ie};return u.createElement("div",{className:R.wrapperOverrides},u.createElement("div",{className:"slate-query-field__wrapper"},u.createElement("div",{id:"data-link-input",className:"slate-query-field"},B&&u.createElement(E.ZL,null,u.createElement("div",{ref:Q.setFloating,style:ee},u.createElement(a.A,{scrollTop:K,autoHeightMax:"300px",setScrollTop:({scrollTop:de})=>j(de)},u.createElement(D.k,{activeRef:Z,suggestions:ae.current.suggestions,onSuggestionSelect:te,onClose:()=>H(!1),activeIndex:W})))),u.createElement(l.KE,{schema:m.yx,ref:U,placeholder:L,value:ae.current.linkUrl,onChange:q,onKeyDown:(de,ie,ge)=>ne(de,ge),plugins:T,className:(0,t.cx)(R.editor,R.input,(0,t.css)({padding:"3px 8px"}))}))))});I.displayName="DataLinkInput";function x(S,O){return(S?.clientHeight??0)*O}},43538:(Y,A,e)=>{"use strict";e.d(A,{k:()=>i});var t=e(32196),n=e(2543),o=e.n(n),s=e(96540),r=e(37151),g=e(40845),u=e(33552);const d=f=>({list:(0,t.css)({borderBottom:`1px solid ${f.colors.border.weak}`,"&:last-child":{border:"none"}}),wrapper:(0,t.css)({background:f.colors.background.primary,width:"250px"}),item:(0,t.css)({background:"none",padding:"2px 8px",userSelect:"none",color:f.colors.text.primary,cursor:"pointer","&:hover":{background:f.colors.action.hover}}),label:(0,t.css)({color:f.colors.text.secondary}),activeItem:(0,t.css)({background:f.colors.background.secondary,"&:hover":{background:f.colors.background.secondary}}),itemValue:(0,t.css)({fontFamily:f.typography.fontFamilyMonospace,fontSize:f.typography.size.sm})}),i=({suggestions:f,...c})=>{const h=(0,s.useRef)(null);(0,r.A)(h,()=>{c.onClose&&c.onClose()});const p=(0,s.useMemo)(()=>(0,n.groupBy)(f,a=>a.origin),[f]),m=(0,g.of)(d);return s.createElement("div",{role:"menu",ref:h,className:m.wrapper},Object.keys(p).map((a,v)=>{const E=v===0?0:Object.keys(p).reduce((D,b,P)=>P>=v?D:D+p[b].length,0);return s.createElement(l,{...c,suggestions:p[a],label:`${(0,n.capitalize)(a)}`,activeIndex:c.activeIndex,activeIndexOffset:E,key:a})}))};i.displayName="DataLinkSuggestions";const l=s.memo(({activeIndex:f,activeIndexOffset:c,label:h,onClose:p,onSuggestionSelect:m,suggestions:a,activeRef:v})=>{const E=(0,g.of)(d);return s.createElement(s.Fragment,null,s.createElement(u.B,{className:E.list,items:a,renderItem:(D,b)=>{const P=b+c===f;return s.createElement("div",{role:"menuitem",tabIndex:0,className:(0,t.cx)(E.item,P&&E.activeItem),ref:P?v:void 0,onClick:()=>{m(D)},title:D.documentation},s.createElement("span",{className:E.itemValue},s.createElement("span",{className:E.label},h)," ",D.label))}}))});l.displayName="DataLinkSuggestionsList"},59796:(Y,A,e)=>{"use strict";e.d(A,{e:()=>d});var t=e(32196),n=e(96540),o=e(13544),s=e(14555),r=e(51686),g=e(59093),u=e(64539);const d=({children:i,links:l,style:f})=>{const c=[{items:(0,s.J)(l),label:"Data links"}],h=c[0].items.length,p=()=>c.map((a,v)=>n.createElement(g.r,{key:`${a.label}${v}`,label:a.label},(a.items||[]).map((E,D)=>n.createElement(u.D,{key:`${a.label}-${v}-${D}}`,url:E.url,label:E.label,target:E.target,icon:E.icon,active:E.active,onClick:E.onClick})))),m=(0,t.css)({cursor:"context-menu"});if(h>1)return n.createElement(r.n,{renderMenuItems:p},({openMenu:a})=>i({openMenu:a,targetClassName:m}));{const a=l()[0];return n.createElement("a",{href:a.href,onClick:a.onClick,target:a.target,title:a.title,style:{...f,overflow:"hidden",display:"flex"},"data-testid":o.Tp.components.DataLinksContextMenu.singleLink},i({}))}}},64919:(Y,A,e)=>{"use strict";e.d(A,{e:()=>D});var t=e(32196),n=e(2543),o=e(96540),s=e(40845),r=e(55852),g=e(37390),u=e(14555),d=e(88575),i=e(10354),l=e(15292),f=e(64078);const c=P=>({listItem:(0,t.css)({marginBottom:P.spacing()}),infoText:(0,t.css)({paddingBottom:P.spacing(2),marginLeft:"66px",color:P.colors.text.secondary})}),h=o.memo(({index:P,value:y,onChange:T,suggestions:M,isLast:I})=>{const x=(0,s.of)(c),S=(L,U)=>{T(P,{...y,url:L},U)},O=L=>{T(P,{...y,title:L.target.value})},C=()=>{T(P,{...y,targetBlank:!y.targetBlank})};return o.createElement("div",{className:x.listItem},o.createElement(d.D,{label:"Title"},o.createElement(i.p,{value:y.title,onChange:O,placeholder:"Show details"})),o.createElement(d.D,{label:"URL",invalid:(0,u.F)(y.url),error:"Data link is an Explore URL in a deprecated format. Please visit the URL to be redirected, and edit this data link to use that URL."},o.createElement(f.l,{value:y.url,onChange:S,suggestions:M})),o.createElement(d.D,{label:"Open in new tab"},o.createElement(l.d,{value:y.targetBlank||!1,onChange:C})),I&&o.createElement("div",{className:x.infoText},"With data links you can reference data variables like series name, labels and values. Type CMD+Space, CTRL+Space, or $ to open variable suggestions."))});h.displayName="DataLinkEditor";const p=({link:P,index:y,getSuggestions:T,onSave:M,onCancel:I})=>{const[x,S]=(0,o.useState)(P);return o.createElement(o.Fragment,null,o.createElement(h,{value:x,index:y,isLast:!1,suggestions:T(),onChange:(O,C)=>{S(C)}}),o.createElement(g.a.ButtonRow,null,o.createElement(r.$n,{variant:"secondary",onClick:()=>I(y),fill:"outline"},"Cancel"),o.createElement(r.$n,{onClick:()=>{M(y,x)}},"Save")))};var m=e(72093),a=e(29158);const v=({link:P,onEdit:y,onRemove:T})=>{const M=(0,s.of)(E),{title:I="",url:x=""}=P,S=I.trim()!=="",O=x.trim()!=="",C=(0,u.F)(x);return o.createElement("div",{className:M.wrapper},o.createElement("div",{className:M.titleWrapper},o.createElement("div",{className:(0,t.cx)(M.url,!O&&M.notConfigured,C&&M.errored)},S?I:"Data link title not provided"),o.createElement("div",{className:M.actionButtons},o.createElement(a.K,{name:"pen",onClick:y,tooltip:"Edit data link title"}),o.createElement(a.K,{name:"times",onClick:T,tooltip:"Remove data link title"}))),o.createElement("div",{className:(0,t.cx)(M.url,!O&&M.notConfigured,C&&M.errored),title:x},O?x:"Data link url not provided"),C&&o.createElement(m.P,null,"Explore data link may not work in the future. Please edit."))},E=P=>({wrapper:(0,t.css)({marginBottom:P.spacing(2),width:"100%","&:last-child":{marginBottom:0},display:"flex",flexDirection:"column"}),titleWrapper:(0,t.css)({label:"data-links-list-item-title",justifyContent:"space-between",display:"flex",width:"100%",alignItems:"center"}),actionButtons:(0,t.css)({marginLeft:P.spacing(1),display:"flex"}),errored:(0,t.css)({color:P.colors.error.text,fontStyle:"italic"}),notConfigured:(0,t.css)({fontStyle:"italic"}),title:(0,t.css)({color:P.colors.text.primary,fontSize:P.typography.size.sm,fontWeight:P.typography.fontWeightMedium}),url:(0,t.css)({color:P.colors.text.secondary,fontSize:P.typography.size.sm,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"90%"})}),D=({links:P,onChange:y,getSuggestions:T,data:M})=>{const[I,x]=(0,o.useState)(null),[S,O]=(0,o.useState)(!1),C=(0,s.of)(b),L=P??[],U=I!==null,R=(N,V)=>{if(S)if(V.title.trim()===""&&V.url.trim()===""){O(!1),x(null);return}else x(null),O(!1);const G=(0,n.cloneDeep)(L);G[N]=V,y(G),x(null)},B=()=>{let N=(0,n.cloneDeep)(L);x(N.length),O(!0)},H=N=>{S&&O(!1),x(null)},W=N=>{const V=(0,n.cloneDeep)(L);V.splice(N,1),y(V)};return o.createElement(o.Fragment,null,L.length>0&&o.createElement("div",{className:C.wrapper},L.map((N,V)=>o.createElement(v,{key:`${N.title}/${V}`,index:V,link:N,onChange:R,onEdit:()=>x(V),onRemove:()=>W(V),data:M}))),U&&I!==null&&o.createElement(g.a,{title:"Edit link",isOpen:!0,closeOnBackdropClick:!1,onDismiss:()=>{H(I)}},o.createElement(p,{index:I,link:S?{title:"",url:""}:L[I],data:M,onSave:R,onCancel:H,getSuggestions:T})),o.createElement(r.$n,{size:"sm",icon:"plus",onClick:B,variant:"secondary"},"Add link"))},b=P=>({wrapper:(0,t.css)({marginBottom:P.spacing(2)})})},79961:(Y,A,e)=>{"use strict";e.d(A,{n:()=>g});var t=e(32196),n=e(96540),o=e(40845),s=e(14578),r=e(14689);function g({links:d}){const i=(0,o.of)(u);if(d.length===1)return n.createElement(r.R,{link:d[0]});const l=d.filter(c=>c.target==="_blank"),f=d.filter(c=>c.target==="_self");return n.createElement(n.Fragment,null,f.map((c,h)=>n.createElement(r.R,{key:h,link:c})),n.createElement("div",{className:i.wrapper},n.createElement("p",{className:i.externalLinksHeading},"External links"),l.map((c,h)=>n.createElement("a",{key:h,href:c.href,target:c.target,className:i.externalLink},n.createElement(s.I,{name:"external-link-alt"}),c.title))))}const u=d=>({wrapper:(0,t.css)({flexBasis:"150px",width:"100px",marginTop:d.spacing(1)}),externalLinksHeading:(0,t.css)({color:d.colors.text.secondary,fontWeight:d.typography.fontWeightRegular,fontSize:d.typography.size.sm,margin:0}),externalLink:(0,t.css)({color:d.colors.text.link,fontWeight:d.typography.fontWeightRegular,display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&:hover":{textDecoration:"underline"},div:{marginRight:d.spacing(1)}})})},19849:(Y,A,e)=>{"use strict";e.d(A,{i:()=>s});var t=e(96540),n=e(15292),o=e(14186);function s({options:r,onOptionsChange:g}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Alerting"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(o.I,{labelWidth:29,label:"Manage alert rules in Alerting UI",disabled:r.readOnly,tooltip:"Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source."},t.createElement(n.K,{value:r.jsonData.manageAlerts!==!1,onChange:u=>g({...r,jsonData:{...r.jsonData,manageAlerts:u.currentTarget.checked}})}))))))}},28623:(Y,A,e)=>{"use strict";e.d(A,{K:()=>u});var t=e(96540),n=e(55852),o=e(14186),s=e(39268),r=e(10354),g=e(21744);const u=({hasCert:d,label:i,onChange:l,onClick:f,placeholder:c})=>t.createElement(s.C,null,t.createElement(o.I,{label:i,labelWidth:14,disabled:d},d?t.createElement(r.p,{type:"text",value:"configured",width:24}):t.createElement(g.f,{rows:7,onChange:l,placeholder:c,required:!0})),d&&t.createElement(n.$n,{variant:"secondary",onClick:f,style:{marginLeft:4}},"Reset"))},11184:(Y,A,e)=>{"use strict";e.d(A,{P:()=>c});var t=e(32196),n=e(2543),o=e.n(n),s=e(96540),r=e(40845),g=e(55852),u=e(90090),d=e(14578),i=e(56286);const l=()=>({layout:(0,t.css)({display:"flex",alignItems:"center",marginBottom:"4px","> *":{marginLeft:"4px",marginBottom:0,height:"100%","&:first-child, &:last-child":{marginLeft:0}}})}),f=({header:p,onBlur:m,onChange:a,onRemove:v,onReset:E})=>{const D=(0,r.of)(l);return s.createElement("div",{className:D.layout},s.createElement(u.z,{label:"Header",name:"name",placeholder:"X-Custom-Header",labelWidth:5,value:p.name||"",onChange:b=>a({...p,name:b.target.value}),onBlur:m}),s.createElement(i.L,{label:"Value","aria-label":"Value",name:"value",isConfigured:p.configured,value:p.value,labelWidth:5,inputWidth:p.configured?11:12,placeholder:"Header Value",onReset:()=>E(p.id),onChange:b=>a({...p,value:b.target.value}),onBlur:m}),s.createElement(g.$n,{type:"button","aria-label":"Remove header",variant:"secondary",size:"xs",onClick:b=>v(p.id)},s.createElement(d.I,{name:"trash-alt"})))};f.displayName="CustomHeaderRow";class c extends s.PureComponent{constructor(m){super(m),this.state={headers:[]},this.updateSettings=()=>{const{headers:D}=this.state,b=Object.fromEntries(Object.entries(this.props.dataSourceConfig.jsonData).filter(([y,T])=>!y.startsWith("httpHeaderName"))),P=Object.fromEntries(Object.entries(this.props.dataSourceConfig.secureJsonData||{}).filter(([y,T])=>!y.startsWith("httpHeaderValue")));for(const[y,T]of D.entries())b[`httpHeaderName${y+1}`]=T.name,T.configured||(P[`httpHeaderValue${y+1}`]=T.value);this.props.onChange({...this.props.dataSourceConfig,jsonData:b,secureJsonData:P})},this.onHeaderAdd=()=>{this.setState(D=>({headers:[...D.headers,{id:(0,n.uniqueId)(),name:"",value:"",configured:!1}]}))},this.onHeaderChange=(D,b)=>{this.setState(({headers:P})=>({headers:P.map((y,T)=>D!==T?y:{...b})}))},this.onHeaderReset=D=>{this.setState(({headers:b})=>({headers:b.map((P,y)=>P.id!==D?P:{...P,value:"",configured:!1})}))},this.onHeaderRemove=D=>{this.setState(({headers:b})=>({headers:b.filter(P=>P.id!==D)}),this.updateSettings)};const{jsonData:a,secureJsonData:v,secureJsonFields:E}=this.props.dataSourceConfig;this.state={headers:Object.keys(a).sort().filter(D=>D.startsWith("httpHeaderName")).map((D,b)=>({id:(0,n.uniqueId)(),name:a[D],value:v!==void 0?v[D]:"",configured:E&&E[`httpHeaderValue${b+1}`]||!1}))}}render(){const{headers:m}=this.state,{dataSourceConfig:a}=this.props;return s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("h6",null,"Custom HTTP Headers")),s.createElement("div",null,m.map((v,E)=>s.createElement(f,{key:v.id,header:v,onChange:D=>{this.onHeaderChange(E,D)},onBlur:this.updateSettings,onRemove:this.onHeaderRemove,onReset:this.onHeaderReset}))),!a.readOnly&&s.createElement("div",{className:"gf-form"},s.createElement(g.$n,{variant:"secondary",icon:"plus",type:"button",onClick:v=>{this.onHeaderAdd()}},"Add header")))}}var h=null},91409:(Y,A,e)=>{"use strict";e.d(A,{t:()=>M});var t=e(32196),n=e(96540),o=e(13544),s=e(40845),r=e(90090),g=e(38894),u=e(14186),d=e(91634),i=e(14578),l=e(88323),f=e(15292),c=e(79924),h=e(56286);const p=({dataSourceConfig:I,onChange:x})=>{const S=I.secureJsonData?I.secureJsonData.basicAuthPassword:"",O=()=>{x({...I,secureJsonData:{...I.secureJsonData,basicAuthPassword:""},secureJsonFields:{...I.secureJsonFields,basicAuthPassword:!1}})},C=L=>{x({...I,secureJsonData:{...I.secureJsonData,basicAuthPassword:L.currentTarget.value}})};return n.createElement(n.Fragment,null,n.createElement(u.I,{disabled:I.readOnly},n.createElement(r.z,{label:"User",labelWidth:10,inputWidth:18,placeholder:"user",value:I.basicAuthUser,onChange:L=>x({...I,basicAuthUser:L.currentTarget.value})})),n.createElement(u.I,{disabled:I.readOnly},n.createElement(h.L,{isConfigured:!!(I.secureJsonFields&&I.secureJsonFields.basicAuthPassword),value:S||"",inputWidth:18,labelWidth:10,onReset:O,onChange:C})))};var m=e(11184);const a=26,v=({dataSourceConfig:I,onChange:x,showForwardOAuthIdentityOption:S=!0})=>n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement(u.I,{label:"TLS Client Auth",labelWidth:a,disabled:I.readOnly},n.createElement(f.K,{id:"http-settings-tls-client-auth",value:I.jsonData.tlsAuth||!1,onChange:O=>x({...I.jsonData,tlsAuth:O.currentTarget.checked})})),n.createElement(u.I,{label:"With CA Cert",tooltip:"Needed for verifying self-signed TLS Certs",labelWidth:a,disabled:I.readOnly},n.createElement(f.K,{id:"http-settings-ca-cert",value:I.jsonData.tlsAuthWithCACert||!1,onChange:O=>x({...I.jsonData,tlsAuthWithCACert:O.currentTarget.checked})}))),n.createElement("div",{className:"gf-form-inline"},n.createElement(u.I,{label:"Skip TLS Verify",labelWidth:a,disabled:I.readOnly},n.createElement(f.K,{id:"http-settings-skip-tls-verify",value:I.jsonData.tlsSkipVerify||!1,onChange:O=>x({...I.jsonData,tlsSkipVerify:O.currentTarget.checked})}))),S&&n.createElement("div",{className:"gf-form-inline"},n.createElement(u.I,{label:"Forward OAuth Identity",tooltip:"Forward the user's upstream OAuth identity to the data source (Their access token gets passed along).",labelWidth:a,disabled:I.readOnly},n.createElement(f.K,{id:"http-settings-forward-oauth",value:I.jsonData.oauthPassThru||!1,onChange:O=>x({...I.jsonData,oauthPassThru:O.currentTarget.checked})}))));var E=e(17081),D=e(95180);const b=[{label:"Server (default)",value:"proxy"},{label:"Browser",value:"direct"}],P={label:"Server (default)",value:"proxy"},y=()=>n.createElement("div",{className:"grafana-info-box m-t-2"},n.createElement("p",null,"Access mode controls how requests to the data source will be handled.",n.createElement("strong",null,"\xA0",n.createElement("i",null,"Server"))," ","should be the preferred way if nothing else is stated."),n.createElement("div",{className:"alert-title"},"Server access mode (Default):"),n.createElement("p",null,"All requests will be made from the browser to Grafana backend/server which in turn will forward the requests to the data source and by that circumvent possible Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the grafana backend/server if you select this access mode."),n.createElement("div",{className:"alert-title"},"Browser access mode:"),n.createElement("p",null,"All requests will be made from the browser directly to the data source and may be subject to Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the browser if you select this access mode.")),T=26,M=I=>{const{defaultUrl:x,dataSourceConfig:S,onChange:O,showAccessOptions:C,sigV4AuthToggleEnabled:L,showForwardOAuthIdentityOption:U,azureAuthSettings:R,renderSigV4Editor:B,secureSocksDSProxyEnabled:H,urlLabel:W,urlDocs:N}=I,[V,G]=(0,n.useState)(!1),[_,K]=(0,n.useState)(!1),j=(0,s.$j)();let k;const Q=(0,n.useCallback)(re=>{const de=R?.azureAuthSupported&&R.getAzureAuthEnabled(S)||!1;if(K(de),de){const ie=S.jsonData.oauthPassThru!==void 0?S.jsonData.oauthPassThru:!1;re={...re,jsonData:{...S.jsonData,oauthPassThru:de?!1:ie}}}O({...S,...re})},[R,S,O]);switch(S.access){case"direct":k=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Browser"),", this means the URL needs to be accessible from the browser.",N);break;case"proxy":k=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Server"),", this means the URL needs to be accessible from the grafana backend/server.",N);break;default:k=n.createElement(n.Fragment,null,"Specify a complete HTTP URL (for example http://your_server:8080) ",N)}const ee=n.createElement(l.l6,{"aria-label":"Access",className:"width-20 gf-form-input",options:b,value:b.filter(re=>re.value===S.access)[0]||P,onChange:re=>Q({access:re.value}),disabled:S.readOnly}),ae=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(S.url),Z=(0,t.css)({boxShadow:`inset 0 0px 5px ${j.v1.palette.red}`}),ne=(0,t.cx)({["width-20"]:!0,[Z]:!ae}),q=(0,n.useId)(),te=n.createElement(d.p,{id:q,className:ne,placeholder:x,value:S.url,"data-testid":o.Tp.components.DataSource.DataSourceHttpSettings.urlInput,onChange:re=>Q({url:re.currentTarget.value}),disabled:S.readOnly});return n.createElement("div",{className:"gf-form-group"},n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"HTTP"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(r.z,{interactive:!!N,label:W??"URL",labelWidth:13,tooltip:k,inputEl:te})),C&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(r.z,{label:"Access",labelWidth:13,inputWidth:20,inputEl:ee})),n.createElement("div",{className:"gf-form"},n.createElement("button",{type:"button",className:"gf-form-label query-keyword pointer",onClick:()=>G(re=>!re)},"Help\xA0",n.createElement(i.I,{name:V?"angle-down":"angle-right",style:{marginBottom:0}})))),V&&n.createElement(y,null)),S.access==="proxy"&&n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(g.I,{width:13,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source."},"Allowed cookies"),n.createElement(c.u,{tags:S.jsonData.keepCookies,width:40,onChange:re=>Q({jsonData:{...S.jsonData,keepCookies:re}}),disabled:S.readOnly})),n.createElement("div",{className:"gf-form"},n.createElement(r.z,{label:"Timeout",type:"number",labelWidth:13,inputWidth:20,tooltip:"HTTP request timeout in seconds",placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:S.jsonData.timeout,onChange:re=>{Q({jsonData:{...S.jsonData,timeout:parseInt(re.currentTarget.value,10)}})},disabled:S.readOnly}))))),n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"Auth"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement(u.I,{label:"Basic auth",labelWidth:T,disabled:S.readOnly},n.createElement(f.K,{id:"http-settings-basic-auth",value:S.basicAuth,onChange:re=>{Q({basicAuth:re.currentTarget.checked})}})),n.createElement(u.I,{label:"With Credentials",tooltip:"Whether credentials such as cookies or auth headers should be sent with cross-site requests.",labelWidth:T,disabled:S.readOnly},n.createElement(f.K,{id:"http-settings-with-credentials",value:S.withCredentials,onChange:re=>{Q({withCredentials:re.currentTarget.checked})}}))),R?.azureAuthSupported&&n.createElement("div",{className:"gf-form-inline"},n.createElement(u.I,{label:"Azure Authentication",tooltip:"Use Azure authentication for Azure endpoint.",labelWidth:T,disabled:S.readOnly},n.createElement(f.K,{id:"http-settings-azure-auth",value:_,onChange:re=>{Q(R.setAzureAuthEnabled(S,re.currentTarget.checked))}}))),L&&n.createElement("div",{className:"gf-form-inline"},n.createElement(u.I,{label:"SigV4 auth",labelWidth:T,disabled:S.readOnly},n.createElement(f.K,{id:"http-settings-sigv4-auth",value:S.jsonData.sigV4Auth||!1,onChange:re=>{Q({jsonData:{...S.jsonData,sigV4Auth:re.currentTarget.checked}})}}))),S.access==="proxy"&&n.createElement(v,{dataSourceConfig:S,onChange:re=>Q({jsonData:re}),showForwardOAuthIdentityOption:_?!1:U})),S.basicAuth&&n.createElement(n.Fragment,null,n.createElement("h6",null,"Basic Auth Details"),n.createElement("div",{className:"gf-form-group"},n.createElement(p,{...I}))),R?.azureAuthSupported&&_&&R.azureSettingsUI&&n.createElement(R.azureSettingsUI,{dataSourceConfig:S,onChange:O}),S.jsonData.sigV4Auth&&L&&B,(S.jsonData.tlsAuth||S.jsonData.tlsAuthWithCACert)&&n.createElement(D.j,{dataSourceConfig:S,onChange:O}),S.access==="proxy"&&n.createElement(m.P,{dataSourceConfig:S,onChange:O})),H&&n.createElement(E.Y,{options:S,onOptionsChange:O}))}},17081:(Y,A,e)=>{"use strict";e.d(A,{Y:()=>s});var t=e(96540),n=e(15292),o=e(14186);function s({options:r,onOptionsChange:g}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Secure Socks Proxy"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(o.I,{labelWidth:26,label:"Enabled",tooltip:"Connect to this datasource via the secure socks proxy."},t.createElement(n.K,{value:r.jsonData.enableSecureSocksProxy??!1,onChange:u=>g({...r,jsonData:{...r.jsonData,enableSecureSocksProxy:u.currentTarget.checked}})}))))))}},95180:(Y,A,e)=>{"use strict";e.d(A,{j:()=>u});var t=e(32196),n=e(96540),o=e(90090),s=e(14578),r=e(56034),g=e(28623);const u=({dataSourceConfig:d,onChange:i})=>{const l=d.secureJsonFields&&d.secureJsonFields.tlsCACert,f=d.secureJsonFields&&d.secureJsonFields.tlsClientCert,c=d.secureJsonFields&&d.secureJsonFields.tlsClientKey,h=d.jsonData&&d.jsonData.serverName,p=v=>E=>{E.preventDefault();const D={...d.secureJsonFields};D[v]=!1,i({...d,secureJsonFields:D})},m=v=>E=>{const D={...d.secureJsonData};D[v]=E.currentTarget.value,i({...d,secureJsonData:D})},a=v=>{const E={...d.jsonData,serverName:v.currentTarget.value};i({...d,jsonData:E})};return n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:(0,t.cx)("gf-form",(0,t.css)({alignItems:"baseline"}))},n.createElement("h6",null,"TLS/SSL Auth Details"),n.createElement(r.m,{placement:"right-end",content:"TLS/SSL Certs are encrypted and stored in the Grafana database.",theme:"info"},n.createElement(s.I,{name:"info-circle",size:"xs",style:{marginLeft:"10px"}}))),n.createElement("div",null,d.jsonData.tlsAuthWithCACert&&n.createElement(g.K,{hasCert:!!l,onChange:m("tlsCACert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",label:"CA Cert",onClick:p("tlsCACert")}),d.jsonData.tlsAuth&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form"},n.createElement(o.z,{label:"ServerName",labelWidth:7,inputWidth:30,placeholder:"domain.example.com",value:h&&d.jsonData.serverName,onChange:a})),n.createElement(g.K,{hasCert:!!f,label:"Client Cert",onChange:m("tlsClientCert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",onClick:p("tlsClientCert")}),n.createElement(g.K,{hasCert:!!c,label:"Client Key",placeholder:"Begins with -----BEGIN RSA PRIVATE KEY-----",onChange:m("tlsClientKey"),onClick:p("tlsClientKey")}))))}},56181:(Y,A,e)=>{"use strict";e.d(A,{l:()=>d});var t=e(32196),n=e(96540),o=e(29426),s=e(40845),r=e(8866),g=e(14578),u=e(72265);const d=(0,n.memo)(f=>{const c=(0,s.of)(l),{isOpen:h,onClose:p}=f;return h?n.createElement(r.N,{useCapture:!0,includeButtonPress:!1,onClick:p},n.createElement("div",{className:c.modal,"data-testid":"date-picker"},n.createElement(i,{...f}))):null});d.displayName="DatePicker";const i=(0,n.memo)(({value:f,minDate:c,maxDate:h,onChange:p})=>{const m=(0,s.of)(u.h2);return n.createElement(o.Ay,{className:m.body,tileClassName:m.title,value:f||new Date,minDate:c,maxDate:h,nextLabel:n.createElement(g.I,{name:"angle-right"}),prevLabel:n.createElement(g.I,{name:"angle-left"}),onChange:a=>{a&&!Array.isArray(a)&&p(a)},locale:"en"})});i.displayName="Body";const l=f=>({modal:(0,t.css)({zIndex:f.zIndex.modal,position:"absolute",boxShadow:f.shadows.z3,backgroundColor:f.colors.background.primary,border:`1px solid ${f.colors.border.weak}`,borderTopLeftRadius:f.shape.radius.default,borderBottomLeftRadius:f.shape.radius.default,"button:disabled":{color:f.colors.text.disabled}})})},98239:(Y,A,e)=>{"use strict";e.d(A,{l:()=>d});var t=e(32196),n=e(96540),o=e(47232),s=e(40845),r=e(10354),g=e(56181);const u=l=>(0,o.KQ)(l).format("L"),d=({value:l,minDate:f,maxDate:c,onChange:h,closeOnSelect:p,placeholder:m="Date",...a})=>{const[v,E]=n.useState(!1),D=(0,s.of)(i);return n.createElement("div",{className:D.container},n.createElement(r.p,{type:"text",autoComplete:"off",placeholder:m,value:l&&u(l),onClick:()=>E(!0),onChange:b=>{b.target.value===""&&h("")},className:D.input,...a}),n.createElement(g.l,{isOpen:v,value:l&&typeof l!="string"?l:(0,o.KQ)().toDate(),minDate:f,maxDate:c,onChange:b=>{h(b),p&&E(!1)},onClose:()=>E(!1)}))},i=()=>({container:(0,t.css)({position:"relative"}),input:(0,t.css)({"input[type='date']::-webkit-inner-spin-button, input[type='date']::-webkit-calendar-picker-indicator":{display:"none",WebkitAppearance:"none"}})})},63383:(Y,A,e)=>{"use strict";e.d(A,{K:()=>T});var t=e(32196),n=e(80279),o=e(7887),s=e(82148),r=e(96540),g=e(29426),u=e(39522),d=e(49045),i=e(72724),l=e(47232),f=e(13390),c=e(40845),h=e(55852),p=e(14186),m=e(14578),a=e(10354),v=e(66864),E=e(88448),D=e(17464),b=e(66070),P=e(72265),y=e(47619);const T=({date:S,maxDate:O,minDate:C,label:L,onChange:U,disabledHours:R,disabledMinutes:B,disabledSeconds:H,showSeconds:W=!0})=>{const[N,V]=(0,r.useState)(!1),G=(0,r.useRef)(null),{overlayProps:_,underlayProps:K}=(0,s.e)({onClose:()=>V(!1),isDismissable:!0,isOpen:N,shouldCloseOnInteractOutside:ge=>{const ve=document.getElementsByClassName(b.i)[0];return!(ve&&ve.contains(ge))}},G),{dialogProps:j}=(0,n.s)({},G),k=(0,c.$j)(),{modalBackdrop:Q}=(0,c.of)(E.o),ee=(0,d.A)(`(min-width: ${k.breakpoints.values.lg}px)`),ae=(0,c.of)(x),[Z,ne]=(0,r.useState)(),[q,te]=(0,r.useState)(),re=(0,u.E)(Z,q,{placement:"bottom-start"}),de=(0,r.useCallback)(ge=>{V(!1),U(ge)},[U]),ie=(0,r.useCallback)(ge=>{ge.preventDefault(),V(!0)},[V]);return r.createElement("div",{"data-testid":"date-time-picker",style:{position:"relative"}},r.createElement(M,{date:S,onChange:U,isFullscreen:ee,onOpen:ie,label:L,ref:ne,showSeconds:W}),N?ee?r.createElement(D.ZL,null,r.createElement(o.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},r.createElement("div",{ref:G,..._,...j},r.createElement(I,{date:S,onChange:de,isFullscreen:!0,onClose:()=>V(!1),maxDate:O,minDate:C,ref:te,style:re.styles.popper,showSeconds:W,disabledHours:R,disabledMinutes:B,disabledSeconds:H})))):r.createElement(D.ZL,null,r.createElement("div",{className:Q,...K}),r.createElement(o.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},r.createElement("div",{ref:G,..._,...j},r.createElement("div",{className:ae.modal},r.createElement(I,{date:S,maxDate:O,minDate:C,onChange:de,isFullscreen:!1,onClose:()=>V(!1),showSeconds:W,disabledHours:R,disabledMinutes:B,disabledSeconds:H}))))):null)},M=r.forwardRef(({date:S,label:O,onChange:C,onOpen:L,showSeconds:U=!0},R)=>{const B=U?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm",[H,W]=(0,r.useState)(()=>({value:S?(0,i.LE)(S):(0,i.LE)((0,l.KQ)()),invalid:!1}));(0,r.useEffect)(()=>{S&&W({invalid:!(0,y.f)((0,i.LE)(S,{format:B})),value:(0,l.Ar)(S)?(0,i.LE)(S,{format:B}):S})},[S,B]);const N=(0,r.useCallback)(_=>{const K=!(0,y.f)(_.currentTarget.value);W({value:_.currentTarget.value,invalid:K})},[]),V=(0,r.useCallback)(()=>{if(!H.invalid){const _=(0,l.KQ)(H.value);C(_)}},[H,C]),G=r.createElement(h.$n,{"aria-label":"Time picker",icon:"calendar-alt",variant:"secondary",onClick:L});return r.createElement(p.I,{label:O,invalid:!!(H.value&&H.invalid),className:(0,t.css)({marginBottom:0})},r.createElement(a.p,{onChange:N,addonAfter:G,value:H.value,onBlur:V,"data-testid":f.X.DateTimePicker.input,placeholder:"Select date/time",ref:R}))});M.displayName="DateTimeInput";const I=r.forwardRef(({date:S,onClose:O,onChange:C,isFullscreen:L,maxDate:U,minDate:R,style:B,showSeconds:H=!0,disabledHours:W,disabledMinutes:N,disabledSeconds:V},G)=>{const _=(0,c.of)(P.h2),K=(0,c.of)(x),[j,k]=(0,r.useState)(()=>S&&S.isValid()?S.toDate():new Date),Q=(0,r.useCallback)(ae=>{ae&&!Array.isArray(ae)&&k(Z=>(ae.setHours(Z.getHours()),ae.setMinutes(Z.getMinutes()),ae.setSeconds(Z.getSeconds()),ae))},[]),ee=(0,r.useCallback)(ae=>{k(ae.toDate())},[]);return r.createElement("div",{className:(0,t.cx)(K.container,{[K.fullScreen]:L}),style:B,ref:G},r.createElement(g.Ay,{next2Label:null,prev2Label:null,value:j,nextLabel:r.createElement(m.I,{name:"angle-right"}),nextAriaLabel:"Next month",prevLabel:r.createElement(m.I,{name:"angle-left"}),prevAriaLabel:"Previous month",onChange:Q,locale:"en",className:_.body,tileClassName:_.title,maxDate:U,minDate:R}),r.createElement("div",{className:K.time},r.createElement(b.R,{showSeconds:H,onChange:ee,value:(0,l.KQ)(j),disabledHours:W,disabledMinutes:N,disabledSeconds:V})),r.createElement(v.Gy,null,r.createElement(h.$n,{type:"button",onClick:()=>C((0,l.KQ)(j))},"Apply"),r.createElement(h.$n,{variant:"secondary",type:"button",onClick:O},"Cancel")))});I.displayName="DateTimeCalendar";const x=S=>({container:(0,t.css)({padding:S.spacing(1),border:`1px ${S.colors.border.weak} solid`,borderRadius:S.shape.radius.default,backgroundColor:S.colors.background.primary,zIndex:S.zIndex.modal}),fullScreen:(0,t.css)({position:"absolute"}),time:(0,t.css)({marginBottom:S.spacing(2)}),modal:(0,t.css)({position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:S.zIndex.modal,maxWidth:"280px"})})},3759:(Y,A,e)=>{"use strict";e.d(A,{N:()=>b});var t=e(32196),n=e(80279),o=e(7887),s=e(82148),r=e(96540),g=e(39522),u=e(40845),d=e(76412),i=e(55852),l=e(40276),f=e(88575),c=e(14578),h=e(10354),p=e(56034),m=e(42617),a=e(65172),v=e(32432),E=e(28716);const D=v.o.filter(I=>(0,E.QU)(I.from));function b(I){const{timeRange:x,onChange:S}=I,[O,C]=(0,r.useState)(!1),L=(0,r.useCallback)(()=>C(!1),[]),U=(0,E.Bw)(x),[R,B]=(0,r.useState)({value:U.from,validation:(0,E.kB)(U.from)}),[H,W]=(0,r.useState)({value:U.to,validation:(0,E.kB)(U.to)}),N=(0,r.useRef)(null),{overlayProps:V,underlayProps:G}=(0,s.e)({onClose:()=>C(!1),isDismissable:!0,isOpen:O},N),{dialogProps:_}=(0,n.s)({},N),[K,j]=(0,r.useState)(null),[k,Q]=(0,r.useState)(null),ee=(0,g.E)(K,k,{placement:"auto-start"}),ae=(0,u.of)(T(R.validation.errorMessage,H.validation.errorMessage)),Z=te=>{const re=(0,E.Tl)(te);re&&(L(),B({...R,value:te.from}),W({...H,value:te.to}),S(re))},ne=(0,r.useCallback)(te=>{te.stopPropagation(),te.preventDefault(),C(!O)},[O]),q=te=>{if(te.preventDefault(),!H.validation.isValid||!R.validation.isValid)return;const re=(0,E.Tl)({from:R.value,to:H.value,display:""});re&&(S(re),C(!1))};return r.createElement("div",{className:ae.container,ref:j},r.createElement("button",{className:ae.pickerInput,type:"button",onClick:ne},r.createElement("span",{className:ae.clockIcon},r.createElement(c.I,{name:"clock-nine"})),r.createElement("span",null,U.from," to ",U.to),r.createElement("span",{className:ae.caretIcon},r.createElement(c.I,{name:O?"angle-up":"angle-down",size:"lg"}))),O&&r.createElement("div",null,r.createElement("div",{role:"presentation",className:ae.backdrop,...G}),r.createElement(o.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},r.createElement("div",{ref:N,...V,..._},r.createElement("div",{className:ae.content,ref:Q,style:ee.styles.popper,...ee.attributes},r.createElement("div",{className:ae.body},r.createElement(l.A,{className:ae.leftSide,hideHorizontalTrack:!0},r.createElement(a.l,{title:(0,d.t)("time-picker.time-range.example-title","Example time ranges"),options:D,onChange:Z,value:U})),r.createElement("div",{className:ae.rightSide},r.createElement("div",{className:ae.title},r.createElement(m.e,null,r.createElement(p.m,{content:r.createElement(P,null),placement:"bottom",theme:"info"},r.createElement("div",null,r.createElement(d.x,{i18nKey:"time-picker.time-range.specify"},"Specify time range ",r.createElement(c.I,{name:"info-circle"})))))),r.createElement(f.D,{label:"From",invalid:!R.validation.isValid,error:R.validation.errorMessage},r.createElement(h.p,{onClick:te=>te.stopPropagation(),onBlur:()=>B({...R,validation:(0,E.kB)(R.value)}),onChange:te=>B({...R,value:te.currentTarget.value}),value:R.value})),r.createElement(f.D,{label:"To",invalid:!H.validation.isValid,error:H.validation.errorMessage},r.createElement(h.p,{onClick:te=>te.stopPropagation(),onBlur:()=>W({...H,validation:(0,E.kB)(H.value)}),onChange:te=>W({...H,value:te.currentTarget.value}),value:H.value})),r.createElement(i.$n,{"aria-label":"TimePicker submit button",onClick:q},"Apply time range"))))))))}const P=()=>{const I=(0,u.of)(y);return r.createElement(r.Fragment,null,r.createElement("div",{className:I.supported},"Supported formats: ",r.createElement("code",{className:I.tooltip},"now-[digit]s/m/h/d/w")),r.createElement("div",null,"Example: to select a time range from 10 minutes ago to now"),r.createElement("code",{className:I.tooltip},"From: now-10m To: now"),r.createElement("div",{className:I.link},"For more information see"," ",r.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/"},"docs ",r.createElement(c.I,{name:"external-link-alt"})),"."))},y=I=>({supported:(0,t.css)({marginBottom:I.spacing(1)}),tooltip:(0,t.css)({margin:0}),link:(0,t.css)({marginTop:I.spacing(1)})}),T=(I,x)=>S=>{const O=(0,h.n)({theme:S,invalid:!1}),L=250+M(S,I)+M(S,x);return{backdrop:(0,t.css)({position:"fixed",zIndex:S.zIndex.modalBackdrop,top:0,right:0,bottom:0,left:0}),container:(0,t.css)({display:"flex",position:"relative"}),pickerInput:(0,t.cx)(O.input,O.wrapper,(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",paddingRight:0,paddingLeft:0,lineHeight:`${S.spacing.gridSize*S.components.height.md-2}px`})),caretIcon:(0,t.cx)(O.suffix,(0,t.css)({position:"relative",marginLeft:S.spacing(.5)})),clockIcon:(0,t.cx)(O.prefix,(0,t.css)({position:"relative",marginRight:S.spacing(.5)})),content:(0,t.css)({background:S.colors.background.primary,boxShadow:S.shadows.z3,position:"absolute",zIndex:S.zIndex.modal,width:"500px",top:"100%",borderRadius:S.shape.radius.default,border:`1px solid ${S.colors.border.weak}`,left:0,whiteSpace:"normal"}),body:(0,t.css)({display:"flex",height:`${L}px`}),description:(0,t.css)({color:S.colors.text.secondary,fontSize:S.typography.size.sm}),leftSide:(0,t.css)({width:"50% !important",borderRight:`1px solid ${S.colors.border.medium}`}),rightSide:(0,t.css)({width:"50%",padding:S.spacing(1)}),title:(0,t.css)({marginBottom:S.spacing(1)})}};function M(I,x){return x?x.length>34?I.spacing.gridSize*6.5:I.spacing.gridSize*4:0}},28716:(Y,A,e)=>{"use strict";e.d(A,{Bw:()=>o,QU:()=>r,Tl:()=>n,kB:()=>s});const t=/^now$|^now\-(\d{1,10})([wdhms])$/,n=i=>({from:g(i.from),to:g(i.to)}),o=i=>{const l=d(i.from),f=d(i.to);return{from:l,to:f,display:`${l} to ${f}`}},s=(i,l=Date.now())=>r(i)?g(i)>Math.ceil(l/1e3)?{isValid:!1,errorMessage:"Can not enter value prior to January 1, 1970."}:{isValid:!0}:{isValid:!1,errorMessage:"Value not in relative time format."},r=i=>t.test(i),g=i=>{const l=t.exec(i);if(!l||l.length!==3)return 0;const[,f,c]=l,h=parseInt(f,10);return isNaN(h)?0:h*u[c]},u={w:604800,d:86400,h:3600,m:60,s:1},d=i=>i<=0?"now":i>=u.w&&i%u.w===0?`now-${i/u.w}w`:i>=u.d&&i%u.d===0?`now-${i/u.d}d`:i>=u.h&&i%u.h===0?`now-${i/u.h}h`:i>=u.m&&i%u.m===0?`now-${i/u.m}m`:`now-${i}s`},66070:(Y,A,e)=>{"use strict";e.d(A,{R:()=>l,i:()=>i});var t=e(32196),n=e(57389),o=e(96540),s=e(47232),r=e(40845),g=e(16797),u=e(87266),d=e(14578);const i="time-of-day-picker-panel",l=({minuteStep:h=1,showHour:p=!0,showSeconds:m=!1,onChange:a,value:v,size:E="auto",disabled:D,disabledHours:b,disabledMinutes:P,disabledSeconds:y})=>{const T=(0,r.of)(c);return o.createElement(n.A,{className:(0,t.cx)((0,u.lH)()[E],T.input),popupClassName:(0,t.cx)(T.picker,i),defaultValue:(0,s.AN)(),onChange:M=>{if((0,s.u8)(M))return a((0,s.KQ)(M))},allowEmpty:!1,showSecond:m,value:(0,s.AN)(v),showHour:p,minuteStep:h,inputIcon:o.createElement(f,{wrapperStyle:T.caretWrapper}),disabled:D,disabledHours:b,disabledMinutes:P,disabledSeconds:y})},f=({wrapperStyle:h=""})=>o.createElement("div",{className:h},o.createElement(d.I,{name:"angle-down"})),c=h=>{const p=h.components.input.background,m=h.v1.palette.black,a=h.colors.background.secondary,v=h.shape.radius.default,E=h.components.input.borderColor;return{caretWrapper:(0,t.css)({position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",display:"inline-block",textAlign:"right",color:h.colors.text.secondary}),picker:(0,t.css)({".rc-time-picker-panel-select":{fontSize:"14px",backgroundColor:p,borderColor:E,li:{outlineWidth:"2px","&.rc-time-picker-panel-select-option-selected":{backgroundColor:"inherit",border:`1px solid ${h.v1.palette.orange}`,borderRadius:v},"&:hover":{background:a},"&.rc-time-picker-panel-select-option-disabled":{color:h.colors.action.disabledText}}},".rc-time-picker-panel-inner":{boxShadow:`0px 4px 4px ${m}`,backgroundColor:p,borderColor:E,borderRadius:v,marginTop:"3px",".rc-time-picker-panel-input-wrap":{marginRight:"2px","&, .rc-time-picker-panel-input":{backgroundColor:p,paddingTop:"2px"}},".rc-time-picker-panel-combobox":{display:"flex"}}}),input:(0,t.css)({".rc-time-picker-input":{backgroundColor:p,borderRadius:v,borderColor:E,height:h.spacing(4),"&:focus":(0,g.getFocusStyles)(h),"&:disabled":{backgroundColor:h.colors.action.disabledBackground,color:h.colors.action.disabledText,border:`1px solid ${h.colors.action.disabledBackground}`,"&:focus":{boxShadow:"none"}}}})}}},54230:(Y,A,e)=>{"use strict";e.d(A,{b:()=>m});var t=e(32196),n=e(96540),o=e(47232),s=e(43127),r=e(13544),g=e(40845),u=e(8866),d=e(14578),i=e(10354),l=e(85068),f=e(3799),c=e(32432),h=e(47619);const p=()=>{},m=({value:v,onChange:E,onChangeTimeZone:D=p,clearable:b,hideTimeZone:P=!0,timeZone:y="browser",placeholder:T="Select time range",isReversed:M=!0,hideQuickRanges:I=!1,disabled:x=!1,showIcon:S=!1})=>{const[O,C]=(0,n.useState)(!1),L=(0,g.of)(a,x),U=W=>{W.stopPropagation(),W.preventDefault(),!x&&C(!O)},R=()=>{C(!1)},B=W=>{R(),E(W)},H=W=>{W.stopPropagation();const N=(0,o.KQ)(null),V=(0,o.KQ)(null);E({from:N,to:V,raw:{from:N,to:V}})};return n.createElement("div",{className:L.container},n.createElement("button",{type:"button",className:L.pickerInput,"data-testid":r.Tp.components.TimePicker.openButton,onClick:U},S&&n.createElement(d.I,{name:"clock-nine",size:"sm",className:L.icon}),n.createElement(f.f,{value:v,timeZone:y,placeholder:T}),!x&&n.createElement("span",{className:L.caretIcon},(0,h.X)(v)&&b&&n.createElement(d.I,{className:L.clearIcon,name:"times",size:"lg",onClick:H}),n.createElement(d.I,{name:O?"angle-up":"angle-down",size:"lg"}))),O&&n.createElement(u.N,{includeButtonPress:!1,onClick:R},n.createElement(l.r,{timeZone:y,value:(0,h.X)(v)?v:(0,s.E2)(),onChange:B,quickOptions:c.o,onChangeTimeZone:D,className:L.content,hideTimeZone:P,isReversed:M,hideQuickRanges:I})))},a=(v,E=!1)=>{const D=(0,i.n)({theme:v,invalid:!1});return{container:(0,t.css)({display:"flex",position:"relative"}),content:(0,t.css)({marginLeft:0,position:"absolute",top:"116%",zIndex:v.zIndex.dropdown}),pickerInput:(0,t.cx)(D.input,E&&D.inputDisabled,D.wrapper,(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",paddingRight:0,lineHeight:`${v.spacing.gridSize*4-2}px`})),caretIcon:(0,t.cx)(D.suffix,(0,t.css)({position:"relative",top:"-1px",marginLeft:v.spacing(.5)})),clearIcon:(0,t.css)({marginRight:v.spacing(.5),"&:hover":{color:v.colors.text.maxContrast}}),placeholder:(0,t.css)({color:v.colors.text.disabled,opacity:1}),icon:(0,t.css)({marginRight:v.spacing(.5)})}}},15666:(Y,A,e)=>{"use strict";e.d(A,{$6:()=>D,_8:()=>y,xS:()=>P});var t=e(32196),n=e(80279),o=e(7887),s=e(82148),r=e(96540),g=e(65879),u=e(72724),d=e(91410),i=e(85858),l=e(13544),f=e(40845),c=e(76412),h=e(19727),p=e(88448),m=e(27746),a=e(56034),v=e(85068),E=e(32432);function D(x){const[S,O]=(0,r.useState)(!1),{value:C,onMoveBackward:L,onMoveForward:U,onZoom:R,onError:B,timeZone:H,fiscalYearStartMonth:W,timeSyncButton:N,isSynced:V,history:G,onChangeTimeZone:_,onChangeFiscalYearStartMonth:K,hideQuickRanges:j,widthOverride:k,isOnCanvas:Q,onToolbarTimePickerClick:ee}=x,ae=Re=>{x.onChange(Re),O(!1)};(0,r.useEffect)(()=>{S&&ee&&ee()},[S,ee]);const Z=()=>{O(Re=>!Re)},ne=()=>{O(!1)},q=(0,r.createRef)(),te=(0,r.createRef)(),{overlayProps:re,underlayProps:de}=(0,s.e)({onClose:ne,isDismissable:!0,isOpen:S,shouldCloseOnInteractOutside:Re=>!te.current?.contains(Re)},q),{dialogProps:ie}=(0,n.s)({},q),ge=(0,f.of)(M),{modalBackdrop:ve}=(0,f.of)(p.o),ye=!g.isRelativeTime(C.raw.from)||!g.isRelativeTime(C.raw.to),pe=V?"active":Q?"canvas":"default",Me=C?.to?.isBefore(C.from)?"exclamation-triangle":"clock-nine",De=T(C,H);return r.createElement(h.e,{className:ge.container},ye&&r.createElement(m.I,{"aria-label":(0,c.t)("time-picker.range-picker.backwards-time-aria-label","Move time range backwards"),variant:pe,onClick:L,icon:"angle-left",narrow:!0}),r.createElement(a.m,{ref:te,content:r.createElement(P,{timeRange:C,timeZone:H}),placement:"bottom",interactive:!0},r.createElement(m.I,{"data-testid":l.Tp.components.TimePicker.openButton,"aria-label":(0,c.t)("time-picker.range-picker.current-time-selected","Time range selected: {{currentTimeRange}}",{currentTimeRange:De}),"aria-controls":"TimePickerContent",onClick:Z,icon:Me,isOpen:S,variant:pe},r.createElement(y,{...x}))),S&&r.createElement("div",{"data-testid":l.Tp.components.TimePicker.overlayContent},r.createElement("div",{role:"presentation",className:(0,t.cx)(ve,ge.backdrop),...de}),r.createElement(o.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},r.createElement("section",{className:ge.content,ref:q,...re,...ie},r.createElement(v.r,{timeZone:H,fiscalYearStartMonth:W,value:C,onChange:ae,quickOptions:E.o,history:G,showHistory:!0,widthOverride:k,onChangeTimeZone:_,onChangeFiscalYearStartMonth:K,hideQuickRanges:j,onError:B})))),N,ye&&r.createElement(m.I,{"aria-label":(0,c.t)("time-picker.range-picker.forwards-time-aria-label","Move time range forwards"),onClick:U,icon:"angle-right",narrow:!0,variant:pe}),r.createElement(a.m,{content:b,placement:"bottom"},r.createElement(m.I,{"aria-label":(0,c.t)("time-picker.range-picker.zoom-out-button","Zoom out time range"),onClick:R,icon:"search-minus",variant:pe})))}D.displayName="TimeRangePicker";const b=()=>r.createElement(r.Fragment,null,r.createElement(c.x,{i18nKey:"time-picker.range-picker.zoom-out-tooltip"},"Time range zoom out ",r.createElement("br",null)," CTRL+Z")),P=({timeRange:x,timeZone:S})=>{const O=(0,f.of)(I);return r.createElement(r.Fragment,null,(0,u.LE)(x.from,{timeZone:S}),r.createElement("div",{className:"text-center"},r.createElement(c.x,{i18nKey:"time-picker.range-picker.to"},"to")),(0,u.LE)(x.to,{timeZone:S}),r.createElement("div",{className:"text-center"},r.createElement("span",{className:O.utc},(0,d.le)(S))))},y=(0,r.memo)(({hideText:x,value:S,timeZone:O})=>{const C=(0,f.of)(I);return x?null:r.createElement("span",{className:C.container},r.createElement("span",null,T(S,O)),r.createElement("span",{className:C.utc},g.describeTimeRangeAbbreviation(S,O)))});y.displayName="TimePickerButtonLabel";const T=(x,S)=>{const O={to:i.isMathString(x.raw.to)?x.raw.to:x.to,from:i.isMathString(x.raw.from)?x.raw.from:x.from};return g.describeTimeRange(O,S)},M=x=>({container:(0,t.css)({position:"relative",display:"flex",verticalAlign:"middle"}),backdrop:(0,t.css)({display:"none",[x.breakpoints.down("sm")]:{display:"block"}}),content:(0,t.css)({position:"absolute",right:0,top:"116%",zIndex:x.zIndex.dropdown,[x.breakpoints.down("sm")]:{position:"fixed",right:"50%",top:"50%",transform:"translate(50%, -50%)",zIndex:x.zIndex.modal}})}),I=x=>({container:(0,t.css)({display:"flex",alignItems:"center",whiteSpace:"nowrap"}),utc:(0,t.css)({color:x.v1.palette.orange,fontSize:x.typography.size.sm,paddingLeft:"6px",lineHeight:"28px",verticalAlign:"bottom",fontWeight:x.typography.fontWeightMedium})})},72265:(Y,A,e)=>{"use strict";e.d(A,{h2:()=>h,nB:()=>d});var t=e(32196),n=e(96540),o=e(29426),s=e(91410),r=e(53531),g=e(40845),u=e(14578);function d({onChange:p,from:m,to:a,timeZone:v}){const E=i(m,a,new Date,v),D=f(p,v),b=(0,g.of)(h);return n.createElement(o.Ay,{selectRange:!0,next2Label:null,prev2Label:null,className:b.body,tileClassName:b.title,value:E,nextLabel:n.createElement(u.I,{name:"angle-right"}),prevLabel:n.createElement(u.I,{name:"angle-left"}),onChange:D,locale:"en"})}d.displayName="Body";function i(p,m,a=new Date,v){let E=p.isValid()?p.toDate():a,D=m.isValid()?m.toDate():a;return v&&([E,D]=l(E,D,v)),E>D?[D,E]:[E,D]}function l(p,m,a){const v=(0,s.HD)(a);if(!v)return[p,m];const E=v.utcOffset(p.getTime()),D=v.utcOffset(m.getTime()),b=p.getTimezoneOffset(),P=m.getTimezoneOffset(),y=E-b,T=D-P,M=new Date(p.getTime()-y*1e3*60),I=new Date(m.getTime()-T*1e3*60);return[M,I]}function f(p,m){return(0,n.useCallback)(a=>{if(!Array.isArray(a))return console.error("onCalendarChange: should be run in selectRange={true}");if(a[0]&&a[1]){const v=(0,r.b)(c(a[0]),{timeZone:m}),E=(0,r.b)(c(a[1]),{timeZone:m});p(v,E)}},[p,m])}function c(p){return[p.getFullYear(),p.getMonth(),p.getDate(),p.getHours(),p.getMinutes(),p.getSeconds()]}const h=p=>{const m=".react-calendar__tile--hasActive:not(.react-calendar__tile--range)";return{title:(0,t.css)({color:p.colors.text.primary,backgroundColor:p.colors.background.primary,fontSize:p.typography.size.md,border:"1px solid transparent","&:hover":{position:"relative"},"&:disabled":{color:p.colors.action.disabledText}}),body:(0,t.css)({zIndex:p.zIndex.modal,backgroundColor:p.colors.background.primary,width:"268px",".react-calendar__navigation":{display:"flex"},".react-calendar__navigation__label, .react-calendar__navigation__arrow, .react-calendar__navigation":{paddingTop:"4px",backgroundColor:"inherit",color:p.colors.text.primary,border:0,fontWeight:p.typography.fontWeightMedium},".react-calendar__month-view__weekdays":{backgroundColor:"inherit",textAlign:"center",color:p.colors.primary.text,abbr:{border:0,textDecoration:"none",cursor:"default",display:"block",padding:"4px 0 4px 0"}},".react-calendar__month-view__days":{backgroundColor:"inherit"},".react-calendar__tile, .react-calendar__tile--now":{marginBottom:"4px",backgroundColor:"inherit",height:"26px"},".react-calendar__navigation__label, .react-calendar__navigation > button:focus, .time-picker-calendar-tile:focus":{outline:0},[`${m}, .react-calendar__tile--active, .react-calendar__tile--active:hover`]:{color:p.colors.primary.contrastText,fontWeight:p.typography.fontWeightMedium,background:p.colors.primary.main,boxShadow:"none",border:"0px"},".react-calendar__tile--rangeEnd, .react-calendar__tile--rangeStart":{padding:0,border:"0px",color:p.colors.primary.contrastText,fontWeight:p.typography.fontWeightMedium,background:p.colors.primary.main,abbr:{backgroundColor:p.colors.primary.main,borderRadius:"100px",display:"block",paddingTop:"2px",height:"26px"}},[`${m}, .react-calendar__tile--rangeStart`]:{borderTopLeftRadius:"20px",borderBottomLeftRadius:"20px"},[`${m}, .react-calendar__tile--rangeEnd`]:{borderTopRightRadius:"20px",borderBottomRightRadius:"20px"}})}}},85068:(Y,A,e)=>{"use strict";e.d(A,{r:()=>ge});var t=e(32196),n=e(96540),o=e(47232),s=e(65879),r=e(13544),g=e(40845),u=e(16797),d=e(76412),i=e(40276),l=e(67647),f=e(14578),c=e(2543),h=e(91410),p=e(55852),m=e(88575),a=e(94354),v=e(88323),E=e(20333),D=e(79451),b=e(17624),P=e(67459),y=e(32432);const T=Te=>{const{timeZone:Be,fiscalYearStartMonth:we,timestamp:Ne=Date.now(),onChangeTimeZone:Ze,onChangeFiscalYearStartMonth:st}=Te,[Qe,ke]=(0,n.useState)(!1),[je,He]=(0,n.useState)("tz"),Ge=(0,n.useCallback)(Ee=>{Ee&&Ee.stopPropagation(),ke(!Qe)},[Qe,ke]),Oe=(0,g.of)(M);if(!(0,c.isString)(Be))return null;const Ke=(0,h.QZ)(Be,Ne);return Ke?n.createElement("div",null,n.createElement("section",{"aria-label":(0,d.t)("time-picker.footer.time-zone-selection","Time zone selection"),className:Oe.container},n.createElement("div",{className:Oe.timeZoneContainer},n.createElement("div",{className:Oe.timeZone},n.createElement(P.U,{title:Ke.name}),n.createElement("div",{className:Oe.spacer}),n.createElement(D.E,{info:Ke})),n.createElement(b.X,{timeZone:Be,timestamp:Ne})),n.createElement("div",{className:Oe.spacer}),n.createElement(p.$n,{variant:"secondary",onClick:Ge,size:"sm"},n.createElement(d.x,{i18nKey:"time-picker.footer.change-settings-button"},"Change time settings"))),Qe?n.createElement("div",{className:Oe.editContainer},n.createElement("div",null,n.createElement(a.z,{value:je,options:[{label:(0,d.t)("time-picker.footer.time-zone-option","Time zone"),value:"tz"},{label:(0,d.t)("time-picker.footer.fiscal-year-option","Fiscal year"),value:"fy"}],onChange:He})),je==="tz"?n.createElement("section",{"data-testid":r.Tp.components.TimeZonePicker.containerV2,className:(0,t.cx)(Oe.timeZoneContainer,Oe.timeSettingContainer)},n.createElement(E.U,{includeInternal:!0,onChange:Ee=>{Ge(),(0,c.isString)(Ee)&&Ze(Ee)},onBlur:Ge,menuShouldPortal:!1})):n.createElement("section",{"data-testid":r.Tp.components.TimeZonePicker.containerV2,className:(0,t.cx)(Oe.timeZoneContainer,Oe.timeSettingContainer)},n.createElement(m.D,{className:Oe.fiscalYearField,label:(0,d.t)("time-picker.footer.fiscal-year-start","Fiscal year start month")},n.createElement(v.l6,{value:we,menuShouldPortal:!1,options:y.Z,onChange:Ee=>{st&&st(Ee.value??0)}})))):null):null},M=Te=>({container:(0,t.css)({borderTop:`1px solid ${Te.colors.border.weak}`,padding:"11px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}),editContainer:(0,t.css)({borderTop:`1px solid ${Te.colors.border.weak}`,padding:"11px",justifyContent:"space-between",alignItems:"center"}),spacer:(0,t.css)({marginLeft:"7px"}),timeSettingContainer:(0,t.css)({paddingTop:Te.spacing(1)}),fiscalYearField:(0,t.css)({marginBottom:0}),timeZoneContainer:(0,t.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",flexGrow:1}),timeZone:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"baseline",flexGrow:1})});var I=e(42617),x=e(53531),S=e(72724),O=e(10354),C=e(56034),L=e(47619),U=e(80279),R=e(7887),B=e(82148),H=e(88448),W=e(72265),N=e(67061);function V({onClose:Te,onApply:Be}){return n.createElement(N.B,{gap:2,justifyContent:"space-between"},n.createElement(p.$n,{variant:"secondary",onClick:Te},n.createElement(d.x,{i18nKey:"time-picker.calendar.cancel-button"},"Cancel")),n.createElement(p.$n,{onClick:Be},n.createElement(d.x,{i18nKey:"time-picker.calendar.apply-button"},"Apply time range")))}V.displayName="Footer";var G=e(29158);function _({onClose:Te}){return n.createElement(N.B,{justifyContent:"space-between"},n.createElement(I.e,null,n.createElement(d.x,{i18nKey:"time-picker.calendar.select-time"},"Select a time range")),n.createElement(G.K,{"data-testid":r.Tp.components.TimePicker.calendar.closeButton,tooltip:(0,d.t)("time-picker.calendar.close","Close calendar"),name:"times",variant:"secondary",onClick:Te}))}_.displayName="Header";const K=(Te,Be=!1)=>({container:(0,t.css)({top:0,position:"absolute",[`${Be?"left":"right"}`]:"546px"}),modalContainer:(0,t.css)({label:"modalContainer",margin:"0 auto"}),calendar:(0,t.css)({display:"flex",flexDirection:"column",gap:Te.spacing(1),padding:Te.spacing(1),label:"calendar",boxShadow:Te.shadows.z3,backgroundColor:Te.colors.background.primary,border:`1px solid ${Te.colors.border.weak}`,borderRadius:Te.shape.radius.default}),modal:(0,t.css)({label:"modal",boxShadow:Te.shadows.z3,left:"50%",position:"fixed",top:"50%",transform:"translate(-50%, -50%)",zIndex:Te.zIndex.modal})});function j(Te){const Be=(0,g.$j)(),{modalBackdrop:we}=(0,g.of)(H.o),Ne=K(Be,Te.isReversed),{isOpen:Ze,isFullscreen:st,onClose:Qe}=Te,ke=n.createRef(),{dialogProps:je}=(0,U.s)({"aria-label":r.Tp.components.TimePicker.calendar.label},ke),{overlayProps:He}=(0,B.e)({isDismissable:!0,isOpen:Ze,onClose:Qe},ke),Ge=!st;if(!Ze)return null;const Oe=n.createElement("section",{className:Ne.calendar,ref:ke,...He,...je,"data-testid":r.Tp.components.TimePicker.calendar.label},n.createElement(_,{...Te}),n.createElement(W.nB,{...Te}),Ge&&n.createElement(V,{...Te}));return Ge?n.createElement(B.Sf,null,n.createElement("div",{className:we}),n.createElement(R.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},n.createElement("div",{className:Ne.modal},n.createElement("div",{className:Ne.modalContainer},Oe)))):n.createElement(R.n1,{contain:!0,restoreFocus:!0,autoFocus:!0},n.createElement("div",{className:Ne.container},Oe))}const k=(0,n.memo)(j);j.displayName="TimePickerCalendar";const Q={default:()=>(0,d.t)("time-picker.range-content.default-error",'Please enter a past date or "now"'),range:()=>(0,d.t)("time-picker.range-content.range-error",`"From" can't be after "To"`)},ee=Te=>{const{value:Be,isFullscreen:we=!1,timeZone:Ne,onApply:Ze,isReversed:st,fiscalYearStartMonth:Qe,onError:ke}=Te,[je,He]=Z(Be.raw.from,Be.raw.to,Ne),Ge=(0,g.of)(q),[Oe,Ke]=(0,n.useState)(je),[Ee,J]=(0,n.useState)(He),[oe,ue]=(0,n.useState)(!1),be=(0,n.useId)(),Le=(0,n.useId)();(0,n.useEffect)(()=>{const[It,jt]=Z(Be.raw.from,Be.raw.to,Ne);Ke(It),J(jt)},[Be.raw.from,Be.raw.to,Ne]);const _e=(0,n.useCallback)(It=>{It.preventDefault(),ue(!0)},[ue]),Ve=(0,n.useCallback)(()=>{if(Ee.invalid||Oe.invalid)return;const It={from:Oe.value,to:Ee.value},jt=s.convertRawToRange(It,Ne,Qe);Ze(jt)},[Oe.invalid,Oe.value,Ze,Ne,Ee.invalid,Ee.value,Qe]),We=(0,n.useCallback)((It,jt)=>{const[Vt,_t]=Z(It,jt,Ne);Ke(Vt),J(_t)},[Ne]),$e=It=>{It.key==="Enter"&&Ve()},it=()=>{const It={from:Oe.value,to:Ee.value};navigator.clipboard.writeText(JSON.stringify(It))},at=async()=>{const It=await navigator.clipboard.readText();let jt;try{jt=JSON.parse(It)}catch{ke&&ke(It);return}const[Vt,_t]=Z(jt.from,jt.to,Ne);Ke(Vt),J(_t)},ht=s.convertRawToRange({from:"now/fy",to:"now/fy"},Ne,Qe),ft=(0,d.t)("time-picker.range-content.fiscal-year","Fiscal year"),gt=n.createElement("div",{className:Ge.tooltip},s.isFiscal(Be)?n.createElement(C.m,{content:`${ft}: ${ht.from.format("MMM-DD")} - ${ht.to.format("MMM-DD")}`},n.createElement(f.I,{name:"info-circle"})):null),Dt=n.createElement(p.$n,{"aria-label":(0,d.t)("time-picker.range-content.open-input-calendar","Open calendar"),"data-testid":r.Tp.components.TimePicker.calendar.openButton,icon:"calendar-alt",variant:"secondary",type:"button",onClick:_e});return n.createElement("div",null,n.createElement("div",{className:Ge.fieldContainer},n.createElement(m.D,{label:(0,d.t)("time-picker.range-content.from-input","From"),invalid:Oe.invalid,error:Oe.errorMessage},n.createElement(O.p,{id:be,onClick:It=>It.stopPropagation(),onChange:It=>We(It.currentTarget.value,Ee.value),addonAfter:Dt,onKeyDown:$e,"data-testid":r.Tp.components.TimePicker.fromField,value:Oe.value})),gt),n.createElement("div",{className:Ge.fieldContainer},n.createElement(m.D,{label:(0,d.t)("time-picker.range-content.to-input","To"),invalid:Ee.invalid,error:Ee.errorMessage},n.createElement(O.p,{id:Le,onClick:It=>It.stopPropagation(),onChange:It=>We(Oe.value,It.currentTarget.value),addonAfter:Dt,onKeyDown:$e,"data-testid":r.Tp.components.TimePicker.toField,value:Ee.value})),gt),n.createElement("div",{className:Ge.buttonsContainer},n.createElement(p.$n,{"data-testid":r.Tp.components.TimePicker.copyTimeRange,icon:"copy",variant:"secondary",tooltip:(0,d.t)("time-picker.copy-paste.tooltip-copy","Copy time range to clipboard"),type:"button",onClick:it}),n.createElement(p.$n,{"data-testid":r.Tp.components.TimePicker.pasteTimeRange,icon:"clipboard-alt",variant:"secondary",tooltip:(0,d.t)("time-picker.copy-paste.tooltip-paste","Paste time range"),type:"button",onClick:at}),n.createElement(p.$n,{"data-testid":r.Tp.components.TimePicker.applyTimeRange,type:"button",onClick:Ve},n.createElement(d.x,{i18nKey:"time-picker.range-content.apply-button"},"Apply time range"))),n.createElement(k,{isFullscreen:we,isOpen:oe,from:(0,x.b)(Oe.value,{timeZone:Ne}),to:(0,x.b)(Ee.value,{timeZone:Ne}),onApply:Ve,onClose:()=>ue(!1),onChange:We,timeZone:Ne,isReversed:st}))};function ae(Te,Be,we){const Ne={from:Te,to:Be},Ze=s.convertRawToRange(Ne,we);return!(Ze.from.isSame(Ze.to)||Ze.from.isBefore(Ze.to))}function Z(Te,Be,we){const Ne=ne(Te,we),Ze=ne(Be,we),st=!(0,L.f)(Ne,!1,we),Qe=!(0,L.f)(Ze,!0,we),ke=ae(Ne,Ze,we)&&!Qe;return[{value:Ne,invalid:st||ke,errorMessage:ke&&!st?Q.range():Q.default()},{value:Ze,invalid:Qe,errorMessage:Q.default()}]}function ne(Te,Be){return(0,o.Ar)(Te)?(0,S.LE)(Te,{timeZone:Be}):Te}function q(Te){return{fieldContainer:(0,t.css)({display:"flex"}),buttonsContainer:(0,t.css)({display:"flex",gap:Te.spacing(.5),marginTop:Te.spacing(1)}),tooltip:(0,t.css)({paddingLeft:Te.spacing(1),paddingTop:Te.spacing(3)})}}var te=e(65172);const re=(Te,Be)=>s.convertRawToRange({from:Te.from,to:Te.to},Be),de=(Te,Be)=>{const we=(0,S.LE)(Te.from,{timeZone:Be}),Ne=(0,S.LE)(Te.to,{timeZone:Be});return{from:we,to:Ne,display:`${we} to ${Ne}`}},ie=Te=>{const{quickOptions:Be=[],isReversed:we,isFullscreen:Ne,hideQuickRanges:Ze,timeZone:st,fiscalYearStartMonth:Qe,value:ke,onChange:je,history:He,showHistory:Ge,className:Oe,hideTimeZone:Ke,onChangeTimeZone:Ee,onChangeFiscalYearStartMonth:J}=Te,oe=!He?.length,ue=Ne&&Ge||!Ne&&(Ge&&!oe||!Ze),be=(0,g.of)(De,we,Ze,ue,Ne),Le=le(He,st),_e=Me(ke.raw,Be),[Ve,We]=(0,n.useState)(""),$e=Be.filter(at=>at.display.toLowerCase().includes(Ve.toLowerCase())),it=at=>je(re(at));return n.createElement("div",{id:"TimePickerContent",className:(0,t.cx)(be.container,Oe)},n.createElement("div",{className:be.body},(!Ne||!Ze)&&n.createElement("div",{className:be.rightSide},n.createElement("div",{className:be.timeRangeFilter},n.createElement(l.Z,{width:0,value:Ve,onChange:We,placeholder:(0,d.t)("time-picker.content.filter-placeholder","Search quick ranges")})),n.createElement(i.E,null,!Ne&&n.createElement(ve,{...Te,historyOptions:Le}),!Ze&&n.createElement(te.l,{options:$e,onChange:it,value:_e}))),Ne&&n.createElement("div",{className:be.leftSide},n.createElement(ye,{...Te,historyOptions:Le}))),!Ke&&Ne&&n.createElement(T,{timeZone:st,fiscalYearStartMonth:Qe,onChangeTimeZone:Ee,onChangeFiscalYearStartMonth:J}))},ge=Te=>{const{widthOverride:Be}=Te,we=(0,g.$j)(),Ne=(Be||window.innerWidth)>=we.breakpoints.values.lg;return n.createElement(ie,{...Te,isFullscreen:Ne})},ve=Te=>{const{value:Be,hideQuickRanges:we,onChange:Ne,timeZone:Ze,historyOptions:st=[],showHistory:Qe,onError:ke}=Te,je=(0,g.of)(Re),He=(0,o.Ar)(Be.raw.from)||(0,o.Ar)(Be.raw.to),[Ge,Oe]=(0,n.useState)(!He),Ke=we?!1:Ge,Ee=J=>Ne(re(J,Ze));return n.createElement("fieldset",null,n.createElement("div",{className:je.header},n.createElement("button",{type:"button",className:je.expandButton,onClick:()=>{we||Oe(!Ke)},"data-testid":r.Tp.components.TimePicker.absoluteTimeRangeTitle,"aria-expanded":!Ke,"aria-controls":"expanded-timerange"},n.createElement(I.e,null,n.createElement(d.x,{i18nKey:"time-picker.absolute.title"},"Absolute time range")),!we&&n.createElement(f.I,{name:Ke?"angle-down":"angle-up"}))),!Ke&&n.createElement("div",{className:je.body,id:"expanded-timerange"},n.createElement("div",{className:je.form},n.createElement(ee,{value:Be,onApply:Ne,timeZone:Ze,isFullscreen:!1,onError:ke})),Qe&&n.createElement(te.l,{title:(0,d.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:st,onChange:Ee,placeholderEmpty:null})))},ye=Te=>{const{onChange:Be,value:we,timeZone:Ne,fiscalYearStartMonth:Ze,isReversed:st,historyOptions:Qe,onError:ke}=Te,je=(0,g.of)(me,Te.hideQuickRanges),He=Ge=>Be(re(Ge,Ne));return n.createElement(n.Fragment,null,n.createElement("div",{className:je.container},n.createElement("div",{className:je.title,"data-testid":r.Tp.components.TimePicker.absoluteTimeRangeTitle},n.createElement(I.e,null,n.createElement(d.x,{i18nKey:"time-picker.absolute.title"},"Absolute time range"))),n.createElement(ee,{value:we,timeZone:Ne,fiscalYearStartMonth:Ze,onApply:Be,isFullscreen:!0,isReversed:st,onError:ke})),Te.showHistory&&n.createElement("div",{className:je.recent},n.createElement(te.l,{title:(0,d.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:Qe||[],onChange:He,placeholderEmpty:n.createElement(pe,null)})))},pe=(0,n.memo)(()=>{const Te=(0,g.of)(he),Be=(0,d.t)("time-picker.content.empty-recent-list-info","It looks like you haven't used this time picker before. As soon as you enter some time intervals, recently used intervals will appear here.");return n.createElement("div",{className:Te.container},n.createElement("div",null,n.createElement("span",null,Be)),n.createElement(d.x,{i18nKey:"time-picker.content.empty-recent-list-docs"},n.createElement("div",null,n.createElement("a",{className:Te.link,href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls",target:"_new"},"Read the documentation"),n.createElement("span",null," to find out more about how to enter custom time ranges."))))});function le(Te,Be){return!Array.isArray(Te)||Te.length===0?[]:Te.map(we=>de(we,Be))}pe.displayName="EmptyRecentList";const Me=(Te,Be)=>(0,n.useMemo)(()=>{if(s.isRelativeTimeRange(Te))return Be.find(we=>we.from===Te.from&&we.to===Te.to)},[Te,Be]),De=(Te,Be,we,Ne,Ze)=>({container:(0,t.css)({background:Te.colors.background.primary,boxShadow:Te.shadows.z3,width:`${Ze?"546px":"262px"}`,borderRadius:Te.shape.radius.default,border:`1px solid ${Te.colors.border.weak}`,[`${Be?"left":"right"}`]:0}),body:(0,t.css)({display:"flex",flexDirection:"row-reverse",height:`${Ne?"381px":"217px"}`,maxHeight:"100vh"}),leftSide:(0,t.css)({display:"flex",flexDirection:"column",borderRight:`${Be?"none":`1px solid ${Te.colors.border.weak}`}`,width:`${we?"100%":"60%"}`,overflow:"hidden",order:Be?1:0}),rightSide:(0,t.css)({width:`${Ze?"40%":"100%"}; !important`,borderRight:Be?`1px solid ${Te.colors.border.weak}`:"none",display:"flex",flexDirection:"column"}),timeRangeFilter:(0,t.css)({padding:Te.spacing(1)}),spacing:(0,t.css)({marginTop:"16px"})}),Re=Te=>({header:(0,t.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${Te.colors.border.weak}`,padding:"7px 9px 7px 9px"}),expandButton:(0,t.css)({backgroundColor:"transparent",border:"none",display:"flex",width:"100%","&:focus-visible":(0,u.getFocusStyles)(Te)}),body:(0,t.css)({borderBottom:`1px solid ${Te.colors.border.weak}`}),form:(0,t.css)({padding:"7px 9px 7px 9px"})}),me=(Te,Be)=>({container:(0,t.css)({paddingTop:"9px",paddingLeft:"11px",paddingRight:Be?"11px":"20%"}),title:(0,t.css)({marginBottom:"11px"}),recent:(0,t.css)({flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"flex-end",paddingTop:Te.spacing(1)})}),he=Te=>({container:(0,t.css)({padding:"12px",margin:"12px","a, span":{fontSize:"13px"}}),link:(0,t.css)({color:Te.colors.text.link})})},42617:(Y,A,e)=>{"use strict";e.d(A,{e:()=>r});var t=e(32196),n=e(96540),o=e(40845);const s=g=>({text:(0,t.css)({fontSize:g.typography.size.md,fontWeight:g.typography.fontWeightMedium,color:g.colors.text.primary,margin:0,display:"flex"})}),r=(0,n.memo)(({children:g})=>{const u=(0,o.of)(s);return n.createElement("h3",{className:u.text},g)});r.displayName="TimePickerTitle"},3799:(Y,A,e)=>{"use strict";e.d(A,{f:()=>g});var t=e(32196),n=e(96540),o=e(40845),s=e(15666),r=e(47619);const g=(0,n.memo)(function({hideText:i,value:l,timeZone:f="browser",placeholder:c="No time range selected",className:h}){const p=(0,o.of)(u);return i?null:n.createElement("span",{className:h},(0,r.X)(l)?n.createElement(s._8,{value:l,timeZone:f}):n.createElement("span",{className:p.placeholder},c))}),u=d=>({placeholder:(0,t.css)({color:d.colors.text.disabled,opacity:1})})},65172:(Y,A,e)=>{"use strict";e.d(A,{l:()=>l});var t=e(32196),n=e(96540),o=e(40845),s=e(76412),r=e(42617),g=e(62938),u=e(16797);const d=a=>({container:(0,t.css)({display:"flex",alignItems:"center",flexDirection:"row-reverse",justifyContent:"space-between"}),selected:(0,t.css)({background:a.colors.action.selected,fontWeight:a.typography.fontWeightMedium}),radio:(0,t.css)({opacity:0,width:"0 !important","&:focus-visible + label":(0,u.getFocusStyles)(a)}),label:(0,t.css)({cursor:"pointer",flex:1,padding:"7px 9px 7px 9px","&:hover":{background:a.colors.action.hover,cursor:"pointer"}})}),i=(0,n.memo)(({value:a,onSelect:v,selected:E=!1,name:D})=>{const b=(0,o.of)(d),P=(0,g.A)();return n.createElement("li",{className:(0,t.cx)(b.container,E&&b.selected)},n.createElement("input",{className:b.radio,checked:E,name:D,type:"checkbox",id:P,onChange:()=>v(a)}),n.createElement("label",{className:b.label,htmlFor:P},a.display))});i.displayName="TimeRangeOption";const l=a=>{const v=(0,o.of)(p),{title:E,options:D,placeholderEmpty:b}=a;return typeof b<"u"&&D.length<=0?n.createElement(n.Fragment,null,b):E?n.createElement("section",{"aria-label":E},n.createElement("fieldset",null,n.createElement("div",{className:v.title},n.createElement(r.e,null,E)),n.createElement(f,{...a}))):n.createElement(f,{...a})},f=({options:a,value:v,onChange:E,title:D})=>{const b=(0,o.of)(m);return n.createElement(n.Fragment,null,n.createElement("ul",{"aria-roledescription":(0,s.t)("time-picker.time-range.aria-role","Time range selection")},a.map((P,y)=>n.createElement(i,{key:c(P,y),value:P,selected:h(P,v),onSelect:E,name:D??(0,s.t)("time-picker.time-range.default-title","Time ranges")}))),n.createElement("div",{className:b.grow}))};function c(a,v){return`${a.from}-${a.to}-${v}`}function h(a,v){return!v||!a?!1:v.from===a.from&&v.to===a.to}const p=()=>({title:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 16px 5px 9px"})}),m=()=>({grow:(0,t.css)({flexGrow:1,alignItems:"flex-start"})})},20333:(Y,A,e)=>{"use strict";e.d(A,{U:()=>E});var t=e(2543),n=e(96540),o=e(91410),s=e(76412),r=e(88323),g=e(32196),u=e(40845);const d=M=>{const{children:I,label:x}=M,S=(0,u.of)(i);return x?n.createElement("div",null,n.createElement("div",{className:S.header},n.createElement("span",{className:S.label},x)),I):n.createElement("div",null,I)},i=M=>({header:(0,g.css)({padding:"7px 10px",width:"100%",borderTop:`1px solid ${M.colors.border.weak}`,textTransform:"capitalize"}),label:(0,g.css)({fontSize:M.typography.size.sm,color:M.colors.text.secondary,fontWeight:M.typography.fontWeightMedium})});var l=e(17624),f=e(14578),c=e(79451),h=e(67459);const p="tz-utc-offset",m=M=>{const{children:I,innerProps:x,innerRef:S,data:O,isSelected:C,isFocused:L}=M,U=(0,u.of)(v),R=Date.now(),B=(0,g.cx)(U.container,L&&U.containerFocused);if(!(0,t.isString)(O.value))return null;const H=(0,o.QZ)(O.value,R);return n.createElement("div",{className:B,...x,ref:S,"aria-label":"Select option"},n.createElement("div",{className:(0,g.cx)(U.leftColumn,U.row)},n.createElement("div",{className:(0,g.cx)(U.leftColumn,U.wideRow)},n.createElement(h.U,{title:I}),n.createElement("div",{className:U.spacer}),n.createElement(c.E,{info:H})),n.createElement("div",{className:U.rightColumn},n.createElement(l.X,{timeZone:H?.ianaName||O.value,timestamp:R,className:p}),C&&n.createElement("span",null,n.createElement(f.I,{name:"check"})))))},a=M=>{const{children:I,innerProps:x,innerRef:S,data:O,isSelected:C,isFocused:L}=M,U=(0,u.of)(v),R=Date.now(),B=(0,g.cx)(U.container,L&&U.containerFocused);if(!(0,t.isString)(O.value))return null;const H=(0,o.QZ)(O.value,R);return n.createElement("div",{className:B,...x,ref:S,"aria-label":"Select option"},n.createElement("div",{className:U.body},n.createElement("div",{className:U.row},n.createElement("div",{className:U.leftColumn},n.createElement(h.U,{title:I})),n.createElement("div",{className:U.rightColumn},C&&n.createElement("span",null,n.createElement(f.I,{name:"check"})))),n.createElement("div",{className:U.row},n.createElement("div",{className:U.leftColumn},n.createElement(c.E,{info:H})),n.createElement("div",{className:U.rightColumn},n.createElement(l.X,{timestamp:R,timeZone:H?.ianaName||O.value,className:p})))))},v=M=>({container:(0,g.css)({display:"flex",alignItems:"center",flexDirection:"row",flexShrink:0,whiteSpace:"nowrap",cursor:"pointer",padding:"6px 8px 4px","&:hover":{background:M.colors.action.hover}}),containerFocused:(0,g.css)({background:M.colors.action.hover}),body:(0,g.css)({display:"flex",fontWeight:M.typography.fontWeightMedium,flexDirection:"column",flexGrow:1}),row:(0,g.css)({display:"flex",flexDirection:"row"}),leftColumn:(0,g.css)({flexGrow:1,textOverflow:"ellipsis"}),rightColumn:(0,g.css)({justifyContent:"flex-end",alignItems:"center"}),wideRow:(0,g.css)({display:"flex",flexDirection:"row",alignItems:"baseline"}),spacer:(0,g.css)({marginLeft:"6px"})}),E=M=>{const{onChange:I,width:x,autoFocus:S=!1,onBlur:O,value:C,includeInternal:L=!1,disabled:U=!1,inputId:R,menuShouldPortal:B=!0,openMenuOnFocus:H=!0}=M,W=D(L),N=b(W,C),V=y(),G=x&&x<=45?a:m,_=(0,n.useCallback)(K=>{if(!K||!(0,t.isString)(K.value))return I(C);I(K.value)},[I,C]);return n.createElement(r.l6,{inputId:R,value:N,placeholder:(0,s.t)("time-picker.zone.select-search-input","Type to search (country, city, abbreviation)"),autoFocus:S,menuShouldPortal:B,openMenuOnFocus:H,width:x,filterOption:V,options:W,onChange:_,onBlur:O,components:{Option:G,Group:d},disabled:U,"aria-label":(0,s.t)("time-picker.zone.select-aria-label","Time zone picker")})},D=M=>{const I=Date.now();return(0,o.U3)(M).map(S=>{const O=S.zones.reduce((C,L)=>{const U=(0,o.QZ)(L,I);return U&&C.push({label:U.name,value:U.zone,searchIndex:T(U,I)}),C},[]);return{label:S.name,options:O}})},b=(M,I)=>(0,n.useMemo)(()=>{if(I===void 0)return;const x=(0,t.toLower)(I);return M.find(O=>O.label?x.startsWith((0,t.toLower)(O.label)):P(x))?.options.find(O=>(0,t.isEmpty)(x)?O.value===o.g$.default:(0,t.toLower)(O.value)===x)},[M,I]),P=M=>{switch(M){case o.g$.default:case o.g$.localBrowserTime:case o.g$.utc:return!0;default:return!1}},y=()=>(0,n.useCallback)((M,I)=>!I||!M.data||!M.data.searchIndex?!0:M.data.searchIndex.indexOf((0,t.toLower)(I))>-1,[]),T=(M,I)=>{const x=[(0,t.toLower)(M.name),(0,t.toLower)(M.abbreviation),(0,t.toLower)((0,l.t)(I,M.zone))];for(const S of M.countries)x.push((0,t.toLower)(S.name)),x.push((0,t.toLower)(S.code));return x.join("|")}},79451:(Y,A,e)=>{"use strict";e.d(A,{E:()=>s});var t=e(32196),n=e(96540),o=e(40845);const s=({info:u})=>{const d=(0,o.of)(g),i=r(u);return u?n.createElement("div",{className:d.description},i):null},r=u=>(0,n.useMemo)(()=>{const d=[];if(!u)return"";if(u.name==="Europe/Simferopol")return"Ukraine, EEST";if(u.countries.length>0){const i=u.countries[0];d.push(i.name)}return u.abbreviation&&d.push(u.abbreviation),d.join(", ")},[u]),g=u=>({description:(0,t.css)({fontWeight:"normal",fontSize:u.typography.size.sm,color:u.colors.text.secondary,whiteSpace:"normal",textOverflow:"ellipsis"})})},17624:(Y,A,e)=>{"use strict";e.d(A,{X:()=>u,t:()=>d});var t=e(32196),n=e(2543),o=e.n(n),s=e(96540),r=e(72724),g=e(40845);const u=l=>{const{timestamp:f,timeZone:c,className:h}=l,p=(0,g.of)(i);return(0,n.isString)(c)?s.createElement(s.Fragment,null,s.createElement("span",{className:(0,t.cx)(p.offset,h)},d(f,c))):null},d=(l,f)=>{const c=(0,r.LE)(l,{timeZone:f,format:"Z"});return c==="+00:00"?"UTC":`UTC${c}`},i=l=>{const f=(0,t.css)({fontWeight:"normal",fontSize:l.typography.size.sm,color:l.colors.text.secondary,whiteSpace:"normal"});return{offset:(0,t.css)(f,{color:l.colors.text.primary,background:l.colors.background.secondary,padding:"2px 5px",borderRadius:l.shape.radius.default,marginLeft:"4px"})}}},67459:(Y,A,e)=>{"use strict";e.d(A,{U:()=>s});var t=e(32196),n=e(96540),o=e(40845);const s=({title:g})=>{const u=(0,o.of)(r);return g?n.createElement("span",{className:u.title},g):null},r=g=>({title:(0,t.css)({fontWeight:g.typography.fontWeightRegular,textOverflow:"ellipsis"})})},15648:(Y,A,e)=>{"use strict";e.d(A,{l:()=>r});var t=e(96540),n=e(13544),o=e(88323);const s=[{value:"",label:"Default"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"}],r=g=>{const{onChange:u,width:d,autoFocus:i=!1,onBlur:l,value:f,disabled:c=!1,inputId:h}=g,p=(0,t.useCallback)(m=>{m.value!==void 0&&u(m.value)},[u]);return t.createElement(o.l6,{inputId:h,value:s.find(m=>m.value===f)?.value,placeholder:n.Tp.components.WeekStartPicker.placeholder,autoFocus:i,openMenuOnFocus:!0,width:d,options:s,onChange:p,onBlur:l,disabled:c})}},32432:(Y,A,e)=>{"use strict";e.d(A,{Z:()=>n,o:()=>t});const t=[{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],n=[{label:"January",value:0},{label:"February",value:1},{label:"March",value:2},{label:"April",value:3},{label:"May",value:4},{label:"June",value:5},{label:"July",value:6},{label:"August",value:7},{label:"September",value:8},{label:"October",value:9},{label:"November",value:10},{label:"December",value:11}]},47619:(Y,A,e)=>{"use strict";e.d(A,{X:()=>r,f:()=>s});var t=e(47232),n=e(85858),o=e(53531);function s(g,u,d){return(0,t.Ar)(g)?g.isValid():n.isMathString(g)?n.isValid(g):(0,o.b)(g,{roundUp:u,timeZone:d}).isValid()}function r(g){return n.isValid(g.from)&&n.isValid(g.to)}},25994:(Y,A,e)=>{"use strict";e.d(A,{c:()=>s});var t=e(32196),n=e(96540),o=e(40845);const s=({direction:g="horizontal",spacing:u=2})=>{const d=(0,o.of)(r,u);return g==="vertical"?n.createElement("div",{className:d.verticalDivider}):n.createElement("hr",{className:d.horizontalDivider})};s.displayName="Divider";const r=(g,u)=>({horizontalDivider:(0,t.css)({borderTop:`1px solid ${g.colors.border.weak}`,margin:g.spacing(u,0),width:"100%"}),verticalDivider:(0,t.css)({borderRight:`1px solid ${g.colors.border.weak}`,margin:g.spacing(0,u),height:"100%"})})},69144:(Y,A,e)=>{"use strict";e.d(A,{l:()=>n});var t=e(32196);const n=(o,s)=>{const r=s||"middle",g=o.colors.emphasize(o.colors.background.secondary,.15),u=o.colors.primary.border,d=o.spacing(2),i=4,l=200;let f="50%",c="50%";switch(r){case"start":{f="0%",c="0%";break}case"end":{f="100%",c="100%";break}}const h=(0,t.css)({position:"relative","&:before":{content:'""',position:"absolute",transition:o.transitions.create("border-color"),zIndex:1},"&:after":{background:g,content:'""',position:"absolute",transition:o.transitions.create("background"),transform:"translate(-50%, -50%)",borderRadius:o.shape.radius.pill,zIndex:1},"&:hover":{"&:before":{borderColor:u},"&:after":{background:u}}});return{dragHandleVertical:(0,t.cx)(h,(0,t.css)({cursor:"col-resize",width:d,"&:before":{borderRight:"1px solid transparent",height:"100%",left:f,transform:"translateX(-50%)"},"&:after":{left:f,top:"50%",height:l,width:i}})),dragHandleHorizontal:(0,t.cx)(h,(0,t.css)({height:d,cursor:"row-resize","&:before":{borderTop:"1px solid transparent",top:c,transform:"translateY(-50%)",width:"100%"},"&:after":{left:"50%",top:c,height:i,width:l}}))}}},87978:(Y,A,e)=>{"use strict";e.d(A,{_:()=>p});var t=e(32196),n=e(80279),o=e(7887),s=e(82148),r=e(50848),g=e(96540),u=e(13544),d=e(40845),i=e(76412),l=e(40276),f=e(69144),c=e(29158),h=e(94753);function p({children:P,onClose:y,closeOnMaskClick:T=!0,scrollableContent:M=!0,title:I,subtitle:x,width:S,size:O="md",tabs:C}){const[L,U,R]=m(),B=(0,d.of)(E),H=(0,d.of)(b,O,L??S),W=(0,d.of)(f.l),N=g.useRef(null),{dialogProps:V,titleProps:G}=(0,n.s)({},N),{overlayProps:_}=(0,s.e)({isDismissable:!1,isOpen:!0,onClose:y},N);v();const K=(0,t.cx)(B.drawer,H),j=g.createElement("div",{className:B.content},P);return g.createElement(r.A,{open:!0,onClose:y,placement:"right",getContainer:".main-view",className:B.drawerContent,rootClassName:K,width:"",motion:{motionAppear:!0,motionName:B.drawerMotion},maskClassName:B.mask,maskClosable:T,maskMotion:{motionAppear:!0,motionName:B.maskMotion}},g.createElement(o.n1,{restoreFocus:!0,contain:!0,autoFocus:!0},g.createElement("div",{"aria-label":typeof I=="string"?u.Tp.components.Drawer.General.title(I):u.Tp.components.Drawer.General.title("no title"),className:B.container,..._,...V,ref:N},g.createElement("div",{className:(0,t.cx)(W.dragHandleVertical,B.resizer),onMouseDown:U,onTouchStart:R}),typeof I=="string"&&g.createElement("div",{className:(0,t.cx)(B.header,!!C&&B.headerWithTabs)},g.createElement("div",{className:B.actions},g.createElement(c.K,{name:"times",variant:"secondary",onClick:y,"data-testid":u.Tp.components.Drawer.General.close,tooltip:(0,i.t)("grafana-ui.drawer.close","Close")})),g.createElement("div",{className:B.titleWrapper},g.createElement(h.E,{element:"h3",...G},I),x&&g.createElement("div",{className:B.subtitle,"data-testid":u.Tp.components.Drawer.General.subtitle},x),C&&g.createElement("div",{className:B.tabsWrapper},C))),typeof I!="string"&&I,M?g.createElement(l.E,null,j):j)))}function m(){const[P,y]=(0,g.useState)(void 0),T=(0,g.useCallback)(C=>{y(a(C.clientX))},[]),M=(0,g.useCallback)(C=>{const L=C.touches[0];y(a(L.clientX))},[]),I=(0,g.useCallback)(C=>{document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",I)},[T]),x=(0,g.useCallback)(C=>{document.removeEventListener("touchmove",M),document.removeEventListener("touchend",x)},[M]);function S(C){C.stopPropagation(),C.preventDefault(),document.addEventListener("mousemove",T),document.addEventListener("mouseup",I)}function O(C){C.stopPropagation(),C.preventDefault(),document.addEventListener("touchmove",M),document.addEventListener("touchend",x)}return[P,S,O]}function a(P){let y=document.body.offsetWidth-(P-document.body.offsetLeft);return`${Math.min(y/document.body.clientWidth*100,98).toFixed(2)}vw`}function v(){(0,g.useEffect)(()=>{if(document.body)return document.body.classList.add("body-drawer-open"),()=>{document.body.classList.remove("body-drawer-open")}},[])}const E=P=>({container:(0,t.css)({display:"flex",flexDirection:"column",height:"100%",flex:"1 1 0",minHeight:"100%",position:"relative"}),drawer:(0,t.css)({".main-view &":{top:80},".main-view--search-bar-hidden &":{top:40},".main-view--chrome-hidden &":{top:0},".rc-drawer-content-wrapper":{boxShadow:P.shadows.z3}}),drawerContent:(0,t.css)({backgroundColor:`${P.colors.background.primary} !important`,display:"flex",overflow:"unset",flexDirection:"column"}),drawerMotion:(0,t.css)({"&-appear":{transform:"translateX(100%)",transition:"none !important","&-active":{transition:`${P.transitions.create("transform")} !important`,transform:"translateX(0)"}}}),mask:(0,t.css)({backgroundColor:"transparent",position:"fixed","&:before":{backgroundColor:`${P.components.overlay.background} !important`,backdropFilter:"blur(1px)",bottom:0,content:'""',left:0,position:"fixed",right:0,".main-view &":{top:80},".main-view--search-bar-hidden &":{top:40},".main-view--chrome-hidden &":{top:0}}}),maskMotion:(0,t.css)({"&-appear":{opacity:0,"&-active":{opacity:1,transition:P.transitions.create("opacity")}}}),header:(0,t.css)({label:"drawer-header",flexGrow:0,padding:P.spacing(2,2,3),borderBottom:`1px solid ${P.colors.border.weak}`}),headerWithTabs:(0,t.css)({borderBottom:"none"}),actions:(0,t.css)({position:"absolute",right:P.spacing(1),top:P.spacing(1)}),titleWrapper:(0,t.css)({label:"drawer-title",overflowWrap:"break-word"}),subtitle:(0,t.css)({label:"drawer-subtitle",color:P.colors.text.secondary,paddingTop:P.spacing(1)}),content:(0,t.css)({padding:P.spacing(2),height:"100%",flexGrow:1}),tabsWrapper:(0,t.css)({label:"drawer-tabs",paddingLeft:P.spacing(2),margin:P.spacing(1,-1,-3,-3)}),resizer:(0,t.css)({top:0,left:P.spacing(-1),bottom:0,position:"absolute",zIndex:P.zIndex.modal})}),D={sm:{width:"25vw",minWidth:384},md:{width:"50vw",minWidth:568},lg:{width:"75vw",minWidth:744}};function b(P,y,T){let M=T??D[y].width,I=D[y].minWidth;return(0,t.css)({".rc-drawer-content-wrapper":{label:`drawer-content-wrapper-${y}`,width:M,minWidth:I,overflow:"unset",[P.breakpoints.down("md")]:{width:`calc(100% - ${P.spacing(2)}) !important`,minWidth:0}}})}},9261:(Y,A,e)=>{"use strict";e.d(A,{f:()=>c});var t=e(32196),n=e(95361),o=e(18491),s=e(36376),r=e(7887),g=e(96540),u=e(40845),d=e(38138),i=e(64539),l=e(27746);const f=p=>{const{className:m,options:a,value:v,onChange:E,narrow:D,variant:b,...P}=p,y=(0,u.of)(h),[T,M]=(0,g.useState)(!1),I=[(0,n.cY)(0),(0,o.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,o.BN)()],{context:x,refs:S,floatingStyles:O}=(0,s.we)({open:T,placement:"bottom-end",onOpenChange:M,middleware:I,whileElementsMounted:o.ll}),C=(0,s.kp)(x),L=(0,s.s9)(x),{getReferenceProps:U,getFloatingProps:R}=(0,s.bv)([L,C]),B=H=>{E(H),M(!1)};return g.createElement("div",{className:y.wrapper},g.createElement(l.I,{className:m,isOpen:T,narrow:D,variant:b,ref:S.setReference,...U(),...P},v?.label||(v?.value!=null?String(v?.value):null)),T&&g.createElement("div",{className:y.menuWrapper,ref:S.setFloating,...R(),style:O},g.createElement(r.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},g.createElement(d.W,{tabIndex:-1,onClose:()=>M(!1)},a.map(H=>g.createElement(i.D,{key:`${H.value}`,label:H.label??String(H.value),onClick:()=>B(H),active:H.value===v?.value,ariaChecked:H.value===v?.value,ariaLabel:H.ariaLabel||H.label,role:"menuitemradio"}))))))};f.displayName="ButtonSelect";const c=g.memo(f),h=p=>({wrapper:(0,t.css)({position:"relative",display:"inline-flex"}),menuWrapper:(0,t.css)({zIndex:p.zIndex.dropdown})})},83122:(Y,A,e)=>{"use strict";e.d(A,{m:()=>f});var t=e(32196),n=e(95361),o=e(18491),s=e(36376),r=e(7887),g=e(96540),u=e(86634),d=e(67892),i=e(18976),l=e(17464);const f=g.memo(({children:h,overlay:p,placement:m,offset:a,onVisibleChange:v})=>{const[E,D]=(0,g.useState)(!1),b=(0,g.useRef)(null);(0,g.useEffect)(()=>{v?.(E)},[v,E]);const P=[(0,n.cY)({mainAxis:a?.[0]??8,crossAxis:a?.[1]??0}),(0,o.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,o.BN)()],{context:y,refs:T,floatingStyles:M}=(0,s.we)({open:E,placement:(0,i.O)(m),onOpenChange:D,middleware:P,whileElementsMounted:o.ll}),I=(0,s.kp)(y),x=(0,s.s9)(y),{getReferenceProps:S,getFloatingProps:O}=(0,s.bv)([x,I]),C=150,L=c(C),U=()=>{D(!1)},R=B=>{B.key==="Tab"&&D(!1)};return g.createElement(g.Fragment,null,g.cloneElement(h,{ref:T.setReference,...S()}),E&&g.createElement(l.ZL,null,g.createElement(r.n1,{autoFocus:!0,restoreFocus:!0,contain:!0},g.createElement("div",{ref:T.setFloating,style:M,onClick:U,onKeyDown:R},g.createElement(u.A,{nodeRef:b,appear:!0,in:!0,timeout:{appear:C,exit:0,enter:0},classNames:L},g.createElement("div",{ref:b},d.renderOrCallToRender(p,{...O()})))))))});f.displayName="Dropdown";const c=h=>({appear:(0,t.css)({opacity:"0",position:"relative",transform:"scaleY(0.5)",transformOrigin:"top"}),appearActive:(0,t.css)({opacity:"1",transform:"scaleY(1)",transition:`transform ${h}ms cubic-bezier(0.2, 0, 0.2, 1), opacity ${h}ms cubic-bezier(0.2, 0, 0.2, 1)`})})},41670:(Y,A,e)=>{"use strict";e.d(A,{Z:()=>s});var t=e(32196),n=e(96540),o=e(40845);const s=({children:g})=>{const u=(0,o.of)(r);return n.createElement("div",{className:u.container},g)},r=g=>({container:(0,t.css)({borderLeft:`3px solid ${g.colors.info.main}`,backgroundColor:`${g.colors.background.secondary}`,padding:g.spacing(2),minWidth:"350px",borderRadius:g.shape.radius.default,marginBottom:g.spacing(4)})})},66602:(Y,A,e)=>{"use strict";e.d(A,{Xc:()=>u,Xw:()=>g,tH:()=>r});var t=e(96540),n=e(32631),o=e(42418),s=e(52446);class r extends t.PureComponent{constructor(){super(...arguments),this.state={error:null,errorInfo:null}}componentDidCatch(i,l){n.P?.api?.pushError(i),this.setState({error:i,errorInfo:l}),this.props.onError&&this.props.onError(i)}componentDidUpdate(i){const{dependencies:l,onRecover:f}=this.props;if(this.state.error&&l&&i.dependencies){for(let c=0;c<l.length;c++)if(l[c]!==i.dependencies[c]){this.setState({error:null,errorInfo:null}),f&&f();break}}}render(){const{children:i}=this.props,{error:l,errorInfo:f}=this.state;return i({error:l,errorInfo:f})}}class g extends t.PureComponent{render(){const{title:i,children:l,style:f,dependencies:c}=this.props;return t.createElement(r,{dependencies:c},({error:h,errorInfo:p})=>p?f==="alertbox"?t.createElement(o.F,{title:i||""},t.createElement("details",{style:{whiteSpace:"pre-wrap"}},h&&h.toString(),t.createElement("br",null),p.componentStack)):t.createElement(s.D,{title:i||"",error:h,errorInfo:p}):l)}}g.defaultProps={title:"An unexpected error happened",style:"alertbox"};function u(d,i={}){const l=f=>t.createElement(g,{...i},t.createElement(d,{...f}));return l.displayName="WithErrorBoundary",l}},52446:(Y,A,e)=>{"use strict";e.d(A,{D:()=>s});var t=e(32196),n=e(96540),o=e(40845);const s=({error:g,errorInfo:u,title:d})=>{const i=(0,o.of)(r);return n.createElement("div",{className:i},n.createElement("h2",null,d),n.createElement("details",{style:{whiteSpace:"pre-wrap"}},g&&g.toString(),n.createElement("br",null),u&&u.componentStack))};s.displayName="ErrorWithStack";const r=()=>(0,t.css)({width:"500px",margin:"64px auto"})},37270:(Y,A,e)=>{"use strict";e.d(A,{gH:()=>c,wI:()=>m});var t=e(32196),n=e(2543),o=e.n(n),s=e(96540),r=e(20978),g=e(47172),u=e(83195),d=e(40845),i=e(42418),l=e(14578),f=e(95950);function c({options:b,children:P,readAs:y,onLoad:T,fileListRenderer:M,onFileRemove:I}){const[x,S]=(0,s.useState)([]),[O,C]=(0,s.useState)([]),L=(0,u.j_)("decbytes")(b?.maxSize?b?.maxSize:0),U=(0,s.useCallback)((Q,ee)=>{S(ae=>ae.map(Z=>(Z.id===Q.id&&ee(Z),Z)))},[]),R=(0,s.useCallback)((Q,ee,ae)=>{let Z=Q.map(E);if(b?.multiple===!1?S(Z):S(ne=>[...ne,...Z]),K(ee),b?.onDrop)b.onDrop(Q,ee,ae);else for(const ne of Z){const q=new FileReader,te=()=>{y?q[y](ne.file):q.readAsText(ne.file)};U(ne,re=>{re.abortUpload=()=>{q.abort()},re.retryUpload=()=>{U(ne,de=>{de.error=null,de.progress=void 0}),te()}}),q.onabort=()=>{U(ne,re=>{re.error=new DOMException("Aborted")})},q.onprogress=re=>{U(ne,de=>{de.progress=re.loaded})},q.onload=()=>{T?.(q.result)},q.onerror=()=>{U(ne,re=>{re.error=q.error})},te()}},[T,b,y,U]),B=Q=>{const ee=x.filter(ae=>Q.id!==ae.id);S(ee),I?.(Q)},{getRootProps:H,getInputProps:W,isDragActive:N}=(0,r.VB)({...b,useFsAccessApi:!1,onDrop:R,accept:p(b?.accept)}),V=(0,d.$j)(),G=D(V,N),_=x.map(Q=>M?M(Q,B):s.createElement(f.I,{key:Q.id,file:Q,removeFile:B})),K=Q=>{let ee=[];Q.map(ae=>{ae.errors.map(Z=>{ee.findIndex(ne=>ne.code===Z.code&&ne.message===Z.message)===-1&&ee.push(Z)})}),C(ee)},j=Q=>s.createElement("div",{className:G.errorAlert},s.createElement(i.F,{title:"Upload failed",severity:"error",onRemove:k},Q.map(ee=>{switch(ee.code){case g.O4.FileTooLarge:return s.createElement("div",{key:ee.message+ee.code},"File is larger than ",(0,u.cN)(L));default:return s.createElement("div",{key:ee.message+ee.code},ee.message)}}))),k=()=>{C([])};return s.createElement("div",{className:G.container},s.createElement("div",{"data-testid":"dropzone",...H({className:G.dropzone})},s.createElement("input",{...W()}),P??s.createElement(m,{primaryText:a(x,b)})),O.length>0&&j(O),s.createElement("small",{className:(0,t.cx)(G.small,G.acceptContainer)},b?.maxSize&&`Max file size: ${(0,u.cN)(L)}`,b?.maxSize&&b?.accept&&s.createElement("span",{className:G.acceptSeparator},"|"),b?.accept&&v(b.accept)),_)}function h(b){return["txt","json","csv","xls","yml"].some(P=>b.match(P))?"text/plain":"application/octet-stream"}function p(b){return(0,n.isString)(b)?{[h(b)]:[b]}:Array.isArray(b)?b.reduce((P,y)=>{const T=h(y);return P[T]=P[T]?[...P[T],y]:[y],P},{}):b}function m({primaryText:b="Drop file here or click to upload",secondaryText:P=""}){const y=(0,d.$j)(),T=D(y);return s.createElement("div",{className:(0,t.cx)(T.defaultDropZone),"data-testid":"file-drop-zone-default-children"},s.createElement(l.I,{className:(0,t.cx)(T.icon),name:"upload",size:"xl"}),s.createElement("h6",{className:(0,t.cx)(T.primaryText)},b),s.createElement("small",{className:T.small},P))}function a(b,P){return P?.multiple===void 0||P?.multiple?"Upload file":b.length?"Replace file":"Upload file"}function v(b){return(0,n.isString)(b)?`Accepted file type: ${b}`:Array.isArray(b)?`Accepted file types: ${b.join(", ")}`:`Accepted file types: ${Object.values(b).flat().join(", ")}`}function E(b){return{id:(0,n.uniqueId)("file"),file:b,error:null}}function D(b,P){return{container:(0,t.css)({display:"flex",flexDirection:"column",width:"100%",padding:b.spacing(2),borderRadius:b.shape.radius.default,border:`1px dashed ${b.colors.border.strong}`,backgroundColor:P?b.colors.background.secondary:b.colors.background.primary,cursor:"pointer",alignItems:"center",justifyContent:"center"}),dropzone:(0,t.css)({height:"100%",width:"100%",display:"flex",flexDirection:"column"}),defaultDropZone:(0,t.css)({textAlign:"center"}),icon:(0,t.css)({marginBottom:b.spacing(1)}),primaryText:(0,t.css)({marginBottom:b.spacing(1)}),acceptContainer:(0,t.css)({textAlign:"center",margin:0}),acceptSeparator:(0,t.css)({margin:`0 ${b.spacing(1)}`}),small:(0,t.css)({color:b.colors.text.secondary}),errorAlert:(0,t.css)({paddingTop:"10px"})}}},95950:(Y,A,e)=>{"use strict";e.d(A,{I:()=>l});var t=e(32196),n=e(96540),o=e(83195),s=e(40845),r=e(53550),g=e(55852),u=e(14578),d=e(29158);const i="Remove file";function l({file:c,removeFile:h}){const p=(0,s.of)(f),{file:m,progress:a,error:v,abortUpload:E,retryUpload:D}=c,b=()=>v?n.createElement(n.Fragment,null,n.createElement("span",{className:p.error},v.message),D&&n.createElement(d.K,{name:"sync",tooltip:"Retry",tooltipPlacement:"top",onClick:D}),h&&n.createElement(d.K,{className:D?p.marginLeft:"",name:"trash-alt",onClick:()=>h(c),tooltip:i})):a&&m.size>a?n.createElement(n.Fragment,null,n.createElement("progress",{className:p.progressBar,max:m.size,value:a}),n.createElement("span",{className:p.paddingLeft},Math.round(a/m.size*100),"%"),E&&n.createElement(g.$n,{variant:"secondary",type:"button",fill:"text",onClick:E},"Cancel upload")):h&&n.createElement(d.K,{name:"trash-alt",onClick:()=>h(c),tooltip:i,tooltipPlacement:"top"}),P=(0,o.j_)("decbytes")(m.size);return n.createElement("div",{className:p.fileListContainer},n.createElement("span",{className:p.fileNameWrapper},n.createElement(u.I,{name:"file-blank",size:"lg","aria-hidden":!0}),n.createElement("span",{className:p.padding},(0,r.i)(m.name)),n.createElement("span",null,(0,o.cN)(P))),n.createElement("div",{className:p.fileNameWrapper},b()))}function f(c){return{fileListContainer:(0,t.css)({width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:c.spacing(2),border:`1px dashed ${c.colors.border.medium}`,backgroundColor:`${c.colors.background.secondary}`,marginTop:c.spacing(1)}),fileNameWrapper:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"center"}),padding:(0,t.css)({padding:c.spacing(0,1)}),paddingLeft:(0,t.css)({paddingLeft:c.spacing(2)}),marginLeft:(0,t.css)({marginLeft:c.spacing(1)}),error:(0,t.css)({paddingRight:c.spacing(2),color:c.colors.error.text}),progressBar:(0,t.css)({borderRadius:c.shape.radius.default,height:"4px","::-webkit-progress-bar":{backgroundColor:c.colors.border.weak,borderRadius:c.shape.radius.default},"::-webkit-progress-value":{backgroundColor:c.colors.primary.main,borderRadius:c.shape.radius.default}})}}},92887:(Y,A,e)=>{"use strict";e.d(A,{IB:()=>n.I,gH:()=>t.gH,wI:()=>t.wI});var t=e(37270),n=e(95950)},73546:(Y,A,e)=>{"use strict";e.d(A,{e:()=>l});var t=e(32196),n=e(96540),o=e(62938),s=e(13544),r=e(40845),g=e(16797),u=e(53550),d=e(55852),i=e(14578);const l=({onFileUpload:c,className:h,children:p="Upload file",accept:m="*",size:a="md",showFileName:v})=>{const E=(0,r.of)(f(a)),[D,b]=(0,n.useState)(""),P=(0,o.A)(),y=(0,n.useCallback)(T=>{const M=T.currentTarget?.files?.[0];M&&b(M.name??""),c(T)},[c]);return n.createElement(n.Fragment,null,n.createElement("input",{type:"file",id:P,className:E.fileUpload,onChange:y,multiple:!1,accept:m,"data-testid":s.Tp.components.FileUpload.inputField}),n.createElement("label",{htmlFor:P,className:(0,t.cx)(E.labelWrapper,h)},n.createElement(i.I,{name:"upload",className:E.icon}),p),v&&D&&n.createElement("span",{"aria-label":"File name",className:E.fileName,"data-testid":s.Tp.components.FileUpload.fileNameSpan},(0,u.i)(D)))},f=c=>h=>{const p=(0,d.hs)({theme:h,variant:"primary",size:c,iconOnly:!1}),m=(0,g.getFocusStyles)(h);return{fileUpload:(0,t.css)({height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute",width:"0.1px",zIndex:-1,"&:focus + label":m,"&:focus-visible + label":m}),labelWrapper:p.button,icon:p.icon,fileName:(0,t.css)({marginLeft:h.spacing(.5)})}}},67647:(Y,A,e)=>{"use strict";e.d(A,{Z:()=>u});var t=e(96540),n=e(54479);function o(...d){const i=t.useRef(null);return t.useEffect(()=>{d.forEach(l=>{l&&(typeof l=="function"?l(i.current):l.current=i.current)})},[d]),i}var s=e(55852),r=e(14578),g=e(10354);const u=t.forwardRef(({value:d,width:i,onChange:l,escapeRegex:f=!0,...c},h)=>{const p=t.useRef(null),m=o(h,p),a=d!==""?t.createElement(s.$n,{icon:"times",fill:"text",size:"sm",onClick:v=>{p.current?.focus(),l(""),v.stopPropagation()}},"Clear"):null;return t.createElement(g.p,{prefix:t.createElement(r.I,{name:"search"}),suffix:a,width:i,type:"text",value:f?(0,n.xb)(d??""):d,onChange:v=>l(f?(0,n.jD)(v.currentTarget.value):v.currentTarget.value),...c,ref:m})});u.displayName="FilterInput"},92174:(Y,A,e)=>{"use strict";e.d(A,{m:()=>g});var t=e(32196),n=e(96540),o=e(40845),s=e(55852),r=e(14578);const g=({label:d,selected:i,onClick:l,icon:f="check"})=>{const c=(0,o.of)(u),h=(0,o.of)(s.my);return n.createElement("button",{type:"button",className:(0,t.cx)(h,c.wrapper,i&&c.selected),onClick:l},n.createElement("span",null,d),i&&n.createElement(r.I,{name:f,className:c.icon}))},u=d=>({wrapper:(0,t.css)({background:d.colors.background.secondary,borderRadius:d.shape.radius.pill,padding:d.spacing(0,2),fontSize:d.typography.bodySmall.fontSize,fontWeight:d.typography.fontWeightMedium,lineHeight:d.typography.bodySmall.lineHeight,color:d.colors.text.secondary,display:"flex",alignItems:"center",height:"32px",position:"relative",border:`1px solid ${d.colors.background.secondary}`,whiteSpace:"nowrap","&:hover":{background:d.colors.action.hover,color:d.colors.text.primary}}),selected:(0,t.css)({color:d.colors.text.primary,background:d.colors.action.selected,"&:hover":{background:d.colors.action.focus}}),icon:(0,t.css)({marginLeft:d.spacing(.5)})})},90090:(Y,A,e)=>{"use strict";e.d(A,{z:()=>r});var t=e(32196),n=e(96540),o=e(38894);const s={labelWidth:6,inputWidth:12},r=({label:u,tooltip:d,labelWidth:i,inputWidth:l,inputEl:f,className:c,interactive:h,...p})=>{const m=g();return n.createElement("div",{className:(0,t.cx)(m.formField,c)},n.createElement(o.I,{width:i,tooltip:d,interactive:h},u),f||n.createElement("input",{type:"text",className:`gf-form-input ${l?`width-${l}`:""}`,...p,disabled:p.disabled}))};r.displayName="FormField",r.defaultProps=s;const g=()=>({formField:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative"})})},38894:(Y,A,e)=>{"use strict";e.d(A,{I:()=>u});var t=e(46942),n=e.n(t),o=e(96540),s=e(14578),r=e(56034);const u=({children:d,isFocused:i,isInvalid:l,className:f,htmlFor:c,tooltip:h,width:p,interactive:m,...a})=>{const v=n()(f,`gf-form-label width-${p||"10"}`,{"gf-form-label--is-focused":i,"gf-form-label--is-invalid":l});return o.createElement("label",{className:v,...a,htmlFor:c},d,h&&o.createElement(r.m,{placement:"top",content:h,theme:"info",interactive:m},o.createElement(s.I,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}})))}},9286:(Y,A,e)=>{"use strict";e.d(A,{i:()=>o});var t=e(96540);function n(s){return s<20?.9:s<26?.8:.6}const o=({value:s,className:r,style:g,...u})=>{const d=(s.prefix??"").length>0,i=(s.suffix??"").length>0;let l;if(g&&g.fontSize&&typeof g.fontSize=="number"){const f=g.fontSize,c=n(f);l={fontSize:f*c}}return t.createElement("div",{className:r,style:g,...u},t.createElement("div",null,d&&t.createElement("span",null,s.prefix),t.createElement("span",null,s.text),i&&t.createElement("span",{style:l},s.suffix)))};o.displayName="FormattedDisplayValue"},10880:(Y,A,e)=>{"use strict";e.d(A,{S:()=>g});var t=e(32196),n=e(96540),o=e(40845),s=e(16797),r=e(60029);const g=n.forwardRef(({label:d,description:i,value:l,htmlValue:f,onChange:c,disabled:h,className:p,indeterminate:m,invalid:a,...v},E)=>{const D=(0,n.useCallback)(y=>{c&&c(y)},[c]),b=(0,o.of)(u,a),P=m?"mixed":void 0;return n.createElement("label",{className:(0,t.cx)(b.wrapper,p)},n.createElement("div",{className:b.checkboxWrapper},n.createElement("input",{type:"checkbox",className:(0,t.cx)(b.input,m&&b.inputIndeterminate),checked:l,disabled:h,onChange:D,value:f,"aria-checked":P,...v,ref:E}),n.createElement("span",{className:b.checkmark})),d&&n.createElement("span",{className:b.label},d),i&&n.createElement("span",{className:b.description},i))}),u=(d,i=!1)=>{const l=(0,r.f)(d),f=2,c=1,h=p=>i?d.colors.error.border:p;return{wrapper:(0,t.css)({display:"inline-grid",alignItems:"center",columnGap:d.spacing(c),gridAutoRows:"max-content",position:"relative",verticalAlign:"middle"}),input:(0,t.css)({position:"absolute",zIndex:1,top:0,left:0,width:"100% !important",height:"100%",opacity:0,"&:focus + span, &:focus-visible + span":(0,s.getFocusStyles)(d),"&:focus:not(:focus-visible) + span":(0,s.getMouseFocusStyles)(d),"&:checked + span":{background:d.colors.primary.main,border:`1px solid ${h(d.colors.primary.main)}`,"&:hover":{background:d.colors.primary.shade},"&:after":{content:'""',position:"absolute",zIndex:2,left:"4px",top:0,width:"6px",height:"12px",border:`solid ${d.colors.primary.contrastText}`,borderWidth:"0 3px 3px 0",transform:"rotate(45deg)"}},"&:disabled + span":{backgroundColor:d.colors.action.disabledBackground,cursor:"not-allowed",border:`1px solid ${h(d.colors.action.disabledBackground)}`,"&:hover":{backgroundColor:d.colors.action.disabledBackground},"&:after":{borderColor:d.colors.action.disabledText}}}),inputIndeterminate:(0,t.css)({"&[aria-checked='mixed'] + span":{border:`1px solid ${h(d.colors.primary.main)}`,background:d.colors.primary.main,"&:hover":{background:d.colors.primary.shade},"&:after":{content:'""',position:"absolute",zIndex:2,left:"2px",right:"2px",top:"calc(50% - 1.5px)",height:"3px",border:`1.5px solid ${d.colors.primary.contrastText}`,backgroundColor:d.colors.primary.contrastText,width:"auto",transform:"none"}},"&:disabled[aria-checked='mixed'] + span":{backgroundColor:d.colors.action.disabledBackground,border:`1px solid ${h(d.colors.error.transparent)}`,"&:after":{borderColor:d.colors.action.disabledText}}}),checkboxWrapper:(0,t.css)({display:"flex",alignItems:"center",gridColumnStart:1,gridRowStart:1}),checkmark:(0,t.css)({position:"relative",zIndex:2,display:"inline-block",width:d.spacing(f),height:d.spacing(f),borderRadius:d.shape.radius.default,background:d.components.input.background,border:`1px solid ${h(d.components.input.borderColor)}`,"&:hover":{cursor:"pointer",borderColor:h(d.components.input.borderHover)}}),label:(0,t.cx)(l.label,(0,t.css)({gridColumnStart:2,gridRowStart:1,position:"relative",zIndex:2,cursor:"pointer",maxWidth:"fit-content",lineHeight:d.typography.bodySmall.lineHeight,marginBottom:0})),description:(0,t.cx)(l.description,(0,t.css)({gridColumnStart:2,gridRowStart:2,lineHeight:d.typography.bodySmall.lineHeight,marginTop:0}))}};g.displayName="Checkbox"},88575:(Y,A,e)=>{"use strict";e.d(A,{D:()=>u});var t=e(32196),n=e(96540),o=e(40845),s=e(67892),r=e(72093),g=e(60029);const u=n.forwardRef(({label:l,description:f,horizontal:c,invalid:h,loading:p,disabled:m,required:a,error:v,children:E,className:D,validationMessageHorizontalOverflow:b,htmlFor:P,...y},T)=>{const M=(0,o.of)(i),I=P??(0,s.getChildId)(E),x=typeof l=="string"?n.createElement(g.J,{htmlFor:I,description:f},`${l}${a?" *":""}`):l,S=d({invalid:h,disabled:m,loading:p});return n.createElement("div",{className:(0,t.cx)(M.field,c&&M.fieldHorizontal,D),...y},x,n.createElement("div",null,n.createElement("div",{ref:T},n.cloneElement(E,S)),h&&v&&!c&&n.createElement("div",{className:(0,t.cx)(M.fieldValidationWrapper,{[M.validationMessageHorizontalOverflow]:!!b})},n.createElement(r.P,null,v))),h&&v&&c&&n.createElement("div",{className:(0,t.cx)(M.fieldValidationWrapper,M.fieldValidationWrapperHorizontal,{[M.validationMessageHorizontalOverflow]:!!b})},n.createElement(r.P,null,v)))});u.displayName="Field";function d(l){for(const f in l)l[f]===void 0&&delete l[f];return l}const i=l=>({field:(0,t.css)({display:"flex",flexDirection:"column",marginBottom:l.spacing(2)}),fieldHorizontal:(0,t.css)({flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap"}),fieldValidationWrapper:(0,t.css)({marginTop:l.spacing(.5)}),fieldValidationWrapperHorizontal:(0,t.css)({flex:"1 1 100%"}),validationMessageHorizontalOverflow:(0,t.css)({width:0,overflowX:"visible","& > *":{whiteSpace:"nowrap"}})})},95984:(Y,A,e)=>{"use strict";e.d(A,{E:()=>n});var t=e(49785);const n=({name:o,control:s,children:r,...g})=>{const{fields:u,append:d,prepend:i,remove:l,swap:f,move:c,insert:h}=(0,t.jz)({control:s,name:o,...g});return r({fields:u,append:d,prepend:i,remove:l,swap:f,move:c,insert:h})}},84167:(Y,A,e)=>{"use strict";e.d(A,{n:()=>r});var t=e(32196),n=e(96540),o=e(40845),s=e(17408);const r=({label:u,children:d,className:i,...l})=>{const f=(0,o.of)(g);return n.createElement("fieldset",{className:(0,t.cx)(f.wrapper,i),...l},u&&n.createElement(s.s,null,u),d)},g=u=>({wrapper:(0,t.css)({marginBottom:u.spacing(4),"&:last-child":{marginBottom:0}})})},72093:(Y,A,e)=>{"use strict";e.d(A,{P:()=>r});var t=e(32196),n=e(96540),o=e(40845),s=e(14578);const r=({children:u,horizontal:d,className:i})=>{const l=(0,o.of)(g),f=(0,t.cx)(d?l.horizontal:l.vertical,i);return n.createElement("div",{role:"alert",className:f},n.createElement(s.I,{className:l.fieldValidationMessageIcon,name:"exclamation-triangle"}),u)},g=u=>{const d=`
      font-size: ${u.typography.size.sm};
      font-weight: ${u.typography.fontWeightMedium};
      padding: ${u.spacing(.5,1)};
      color: ${u.colors.error.contrastText};
      background: ${u.colors.error.main};
      border-radius: ${u.shape.radius.default};
      position: relative;
      display: inline-block;
      align-self: flex-start;

      a {
        color: ${u.colors.error.contrastText};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `;return{vertical:(0,t.css)(d,{margin:u.spacing(.5,0,0,0),"&:before":{content:'""',position:"absolute",left:"9px",top:"-5px",width:0,height:0,borderWidth:"0 4px 5px 4px",borderColor:`transparent transparent ${u.colors.error.main} transparent`,borderStyle:"solid"}}),horizontal:(0,t.css)(d,{marginLeft:"10px","&:before":{content:'""',position:"absolute",left:"-5px",top:"9px",width:0,height:0,borderWidth:"4px 5px 4px 0",borderColor:"transparent #e02f44 transparent transparent",borderStyle:"solid"}}),fieldValidationMessageIcon:(0,t.css)({marginRight:u.spacing()})}}},51253:(Y,A,e)=>{"use strict";e.d(A,{l:()=>s});var t=e(32196),n=e(96540),o=e(49785);function s({defaultValues:r,onSubmit:g,validateOnMount:u=!1,validateFieldsOnMount:d,children:i,validateOn:l="onSubmit",maxWidth:f=600,...c}){const{handleSubmit:h,trigger:p,formState:m,...a}=(0,o.mN)({mode:l,defaultValues:r});return(0,n.useEffect)(()=>{u&&p(d)},[p,d,u]),n.createElement("form",{className:(0,t.css)({maxWidth:f!=="none"?f+"px":f,width:"100%"}),onSubmit:h(g),...c},i({errors:m.errors,formState:m,trigger:p,...a}))}},14186:(Y,A,e)=>{"use strict";e.d(A,{I:()=>u});var t=e(32196),n=e(96540),o=e(40845),s=e(67892),r=e(72093),g=e(76892);const u=({children:i,label:l,tooltip:f,labelWidth:c="auto",invalid:h,loading:p,disabled:m,required:a,className:v,htmlFor:E,grow:D,shrink:b,error:P,transparent:y,interactive:T,...M})=>{const I=(0,o.$j)(),x=d(I,D,b),S=E??(0,s.getChildId)(i),O=typeof l=="string"?n.createElement(g.c,{interactive:T,width:c,tooltip:f,htmlFor:S,transparent:y},`${l}${a?" *":""}`):l;return n.createElement("div",{className:(0,t.cx)(x.container,v),...M},O,n.createElement("div",{className:x.childContainer},n.cloneElement(i,{invalid:h,disabled:m,loading:p}),h&&P&&n.createElement("div",{className:(0,t.cx)(x.fieldValidationWrapper)},n.createElement(r.P,null,P))))};u.displayName="InlineField";const d=(i,l,f)=>({container:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative",flex:`${l?1:0} ${f?1:0} auto`,margin:`0 ${i.spacing(.5)} ${i.spacing(.5)} 0`}),childContainer:(0,t.css)({flex:`${l?1:0} ${f?1:0} auto`}),fieldValidationWrapper:(0,t.css)({marginTop:i.spacing(.5)})})},39268:(Y,A,e)=>{"use strict";e.d(A,{C:()=>s});var t=e(32196),n=e(96540),o=e(40845);const s=({children:g,className:u,...d})=>{const i=(0,o.of)(r);return n.createElement("div",{className:(0,t.cx)(i.container,u),...d},g)},r=g=>({container:(0,t.css)({label:"InlineFieldRow",display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",rowGap:g.spacing(.5)})})},76892:(Y,A,e)=>{"use strict";e.d(A,{c:()=>g});var t=e(32196),n=e(96540),o=e(40845),s=e(14578),r=e(56034);const g=({children:d,className:i,tooltip:l,width:f,transparent:c,interactive:h,as:p="label",...m})=>{const a=(0,o.of)(u,c,f);return n.createElement(p,{className:(0,t.cx)(a.label,i),...m},d,l&&n.createElement(r.m,{interactive:h,placement:"top",content:l,theme:"info"},n.createElement(s.I,{tabIndex:0,name:"info-circle",size:"sm",className:a.icon})))},u=(d,i=!1,l)=>({label:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0,padding:d.spacing(0,1),fontWeight:d.typography.fontWeightMedium,fontSize:d.typography.size.sm,backgroundColor:i?"transparent":d.colors.background.secondary,height:d.spacing(d.components.height.md),lineHeight:d.spacing(d.components.height.md),marginRight:d.spacing(.5),borderRadius:d.shape.radius.default,border:"none",width:l?l!=="auto"?`${8*l}px`:l:"100%",color:d.colors.text.primary}),icon:(0,t.css)({color:d.colors.text.secondary,marginLeft:"10px",":hover":{color:d.colors.text.primary}})})},63056:(Y,A,e)=>{"use strict";e.d(A,{e:()=>s});var t=e(32196),n=e(96540),o=e(40845);const s=({children:g,className:u,grow:d,...i})=>{const l=(0,o.of)(r,d);return n.createElement("div",{className:(0,t.cx)(l.container,u),...i},g)};s.displayName="InlineSegmentGroup";const r=(g,u)=>({container:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative",flex:`${u?1:0} 0 auto`,marginBottom:g.spacing(.5)})})},60029:(Y,A,e)=>{"use strict";e.d(A,{J:()=>r,f:()=>g});var t=e(32196),n=e(96540),o=e(40845),s=e(14578);const r=({children:u,description:d,className:i,category:l,...f})=>{const c=(0,o.of)(g),h=l?.map((p,m)=>n.createElement("span",{className:c.categories,key:`${p}/${m}`},n.createElement("span",null,p),n.createElement(s.I,{name:"angle-right",className:c.chevron})));return n.createElement("div",{className:(0,t.cx)(c.label,i)},n.createElement("label",{...f},n.createElement("div",{className:c.labelContent},h,u),d&&n.createElement("span",{className:c.description},d)))},g=u=>({label:(0,t.css)({label:"Label",fontSize:u.typography.size.sm,fontWeight:u.typography.fontWeightMedium,lineHeight:1.25,marginBottom:u.spacing(.5),color:u.colors.text.primary,maxWidth:"480px"}),labelContent:(0,t.css)({display:"flex",alignItems:"center"}),description:(0,t.css)({label:"Label-description",color:u.colors.text.secondary,fontSize:u.typography.size.sm,fontWeight:u.typography.fontWeightRegular,marginTop:u.spacing(.25),display:"block"}),categories:(0,t.css)({label:"Label-categories",display:"inline-flex",alignItems:"center"}),chevron:(0,t.css)({margin:u.spacing(0,.25)})})},91634:(Y,A,e)=>{"use strict";e.d(A,{O:()=>r,p:()=>g});var t=e(46942),n=e.n(t),o=e(96540),s=e(29734),r=(u=>(u.Invalid="invalid",u.Valid="valid",u))(r||{});class g extends o.PureComponent{constructor(){super(...arguments),this.state={error:null},this.validatorAsync=d=>i=>{const l=(0,s.tf)(i.target.value,d);this.setState(f=>({...f,error:l?l[0]:null}))},this.populateEventPropsWithStatus=(d,i)=>{const l={...d};return i&&Object.keys(s.Pw).forEach(f=>{((0,s.K)(f,i)||d[f])&&(l[f]=async c=>{c.persist(),(0,s.K)(f,i)&&await this.validatorAsync(i[f]).apply(this,[c]),d[f]&&d[f].apply(null,[c,this.status])})}),l}}get status(){return this.state.error?"invalid":"valid"}get isInvalid(){return this.status==="invalid"}render(){const{validationEvents:d,className:i,hideErrorMessage:l,inputRef:f,...c}=this.props,{error:h}=this.state,p=n()("gf-form-input",{invalid:this.isInvalid},i),m=this.populateEventPropsWithStatus(c,d);return o.createElement("div",{style:{flexGrow:1}},o.createElement("input",{...m,ref:f,className:p}),h&&!l&&o.createElement("span",null,h))}}g.defaultProps={className:""}},24169:(Y,A,e)=>{"use strict";e.d(A,{A:()=>r,s:()=>s});var t=e(96540),n=e(28581),o=e(14578);const s=g=>{const u=g.selectProps.menuIsOpen;return t.createElement(n.c.IndicatorsContainer,{...g},t.createElement(o.I,{name:u?"angle-up":"angle-down",style:{marginTop:"7px"}}))},r=s},11206:(Y,A,e)=>{"use strict";e.d(A,{A:()=>s,l:()=>o});var t=e(96540),n=e(28581);const o=r=>{const{children:g}=r;return t.createElement(n.c.NoOptionsMessage,{...r},t.createElement("div",{className:"gf-form-select-box__desc-option"},t.createElement("div",{className:"gf-form-select-box__desc-option__body"},g)))},s=o},99091:(Y,A,e)=>{"use strict";e.d(A,{DW:()=>y,l6:()=>P});var t=e(46942),n=e.n(t),o=e(96540),s=e(28581),r=e(46005),g=e(8539),u=e(66963),d=e(60578),i=e(40276),l=e(80970),f=e(62235),c=e(23731),h=e(56034),p=e(24169),m=e(11206),a=e(14578);const v=I=>{const{children:x,isSelected:S,data:O}=I;return o.createElement(s.c.Option,{...I},o.createElement("div",{className:"gf-form-select-box__desc-option"},O.imgUrl&&o.createElement("img",{className:"gf-form-select-box__desc-option__img",src:O.imgUrl,alt:""}),o.createElement("div",{className:"gf-form-select-box__desc-option__body"},o.createElement("div",null,x),O.description&&o.createElement("div",{className:"gf-form-select-box__desc-option__desc"},O.description)),S&&o.createElement(a.I,{name:"check","aria-hidden":"true"})))},E=null,D=I=>o.createElement(s.c.MenuList,{...I},o.createElement(i.E,{autoHide:!1,autoHeightMax:"inherit"},I.children)),b=class extends o.PureComponent{render(){const{defaultValue:I,getOptionLabel:x,getOptionValue:S,onChange:O,options:C,placeholder:L,width:U,value:R,className:B,isDisabled:H,isLoading:W,isSearchable:N,isClearable:V,backspaceRemovesValue:G,isMulti:_,autoFocus:K,openMenuOnFocus:j,onBlur:k,maxMenuHeight:Q,noOptionsMessage:ee,isOpen:ae,components:Z,tooltipContent:ne,tabSelectsValue:q,onCloseMenu:te,onOpenMenu:re,allowCustomValue:de,formatCreateLabel:ie,"aria-label":ge}=this.props;let ve="";U&&(ve="width-"+U);let ye=r.Ay;const pe={};de&&(ye=u.A,pe.formatCreateLabel=ie??(De=>De));const le=n()("gf-form-input","gf-form-input--form-dropdown",ve,B),Me={...b.defaultProps.components,...Z};return o.createElement(T,{onCloseMenu:te,onOpenMenu:re,tooltipContent:ne,isOpen:ae},(De,Re)=>o.createElement(ye,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:le,components:Me,defaultValue:I,value:R,getOptionLabel:x,getOptionValue:S,menuShouldScrollIntoView:!1,isSearchable:N,onChange:O,options:C,placeholder:L||"Choose",styles:(0,c.A)(this.context),isDisabled:H,isLoading:W,isClearable:V,autoFocus:K,onBlur:k,openMenuOnFocus:j,maxMenuHeight:Q,noOptionsMessage:ee,isMulti:_,backspaceRemovesValue:G,menuIsOpen:ae,onMenuOpen:De,onMenuClose:Re,tabSelectsValue:q,"aria-label":ge,...pe}))}};let P=b;P.contextType=d.D,P.defaultProps={className:"",isDisabled:!1,isSearchable:!0,isClearable:!1,isMulti:!1,openMenuOnFocus:!1,autoFocus:!1,isLoading:!1,backspaceRemovesValue:!0,maxMenuHeight:300,tabSelectsValue:!0,allowCustomValue:!1,components:{Option:v,SingleValue:f.K,IndicatorsContainer:p.A,MenuList:D,Group:l.n}};class y extends o.PureComponent{render(){const{defaultValue:x,getOptionLabel:S,getOptionValue:O,onChange:C,placeholder:L,width:U,value:R,className:B,loadOptions:H,defaultOptions:W,isLoading:N,loadingMessage:V,noOptionsMessage:G,isDisabled:_,isSearchable:K,isClearable:j,backspaceRemovesValue:k,autoFocus:Q,onBlur:ee,openMenuOnFocus:ae,maxMenuHeight:Z,isMulti:ne,tooltipContent:q,onCloseMenu:te,onOpenMenu:re,isOpen:de}=this.props;let ie="";U&&(ie="width-"+U);const ge=n()("gf-form-input","gf-form-input--form-dropdown",ie,B);return o.createElement(T,{onCloseMenu:te,onOpenMenu:re,tooltipContent:q,isOpen:de},(ve,ye)=>o.createElement(g.A,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:ge,components:{Option:v,SingleValue:f.K,IndicatorsContainer:p.A,NoOptionsMessage:m.A},defaultValue:x,value:R,getOptionLabel:S,getOptionValue:O,menuShouldScrollIntoView:!1,onChange:C,loadOptions:H,isLoading:N,defaultOptions:W,placeholder:L||"Choose",styles:(0,c.A)(this.context),loadingMessage:V,noOptionsMessage:G,isDisabled:_,isSearchable:K,isClearable:j,autoFocus:Q,onBlur:ee,openMenuOnFocus:ae,maxMenuHeight:Z,isMulti:ne,backspaceRemovesValue:k}))}}y.contextType=d.D,y.defaultProps={className:"",components:{},loadingMessage:()=>"Loading...",isDisabled:!1,isClearable:!1,isMulti:!1,isSearchable:!0,backspaceRemovesValue:!0,autoFocus:!1,openMenuOnFocus:!1,maxMenuHeight:300};class T extends o.PureComponent{constructor(){super(...arguments),this.state={isOpenInternal:!1},this.onOpenMenu=()=>{const{onOpenMenu:x}=this.props;x&&x(),this.setState({isOpenInternal:!0})},this.onCloseMenu=()=>{const{onCloseMenu:x}=this.props;x&&x(),this.setState({isOpenInternal:!1})}}render(){const{children:x,isOpen:S,tooltipContent:O}=this.props,{isOpenInternal:C}=this.state;let L;return(C||S)&&(L=!1),O?o.createElement(h.m,{show:L,content:O,placement:"bottom"},o.createElement("div",null,x(this.onOpenMenu,this.onCloseMenu))):o.createElement("div",null,x(this.onOpenMenu,this.onCloseMenu))}}const M=null},74716:(Y,A,e)=>{"use strict";e.d(A,{d:()=>g});var t=e(2543),n=e.n(t),o=e(96540),s=e(14578),r=e(56034);class g extends o.PureComponent{constructor(){super(...arguments),this.state={id:(0,t.uniqueId)()},this.internalOnChange=d=>{d.stopPropagation(),this.props.onChange(d)}}render(){const{labelClass:d="",switchClass:i="",label:l,checked:f,disabled:c,transparent:h,className:p,tooltip:m,tooltipPlacement:a}=this.props,v=this.state.id,E=`gf-form-label ${d} ${h?"gf-form-label--transparent":""} pointer`,D=`gf-form-switch ${i} ${h?"gf-form-switch--transparent":""}`;return o.createElement("div",{className:"gf-form-switch-container-react"},o.createElement("label",{htmlFor:v,className:`gf-form gf-form-switch-container ${p||""}`},l&&o.createElement("div",{className:E},l,m&&o.createElement(r.m,{placement:a||"auto",content:m,theme:"info"},o.createElement(s.I,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}}))),o.createElement("div",{className:D},o.createElement("input",{disabled:c,id:v,type:"checkbox",checked:f,onChange:this.internalOnChange}),o.createElement("span",{className:"gf-form-switch__slider"}))))}}},17408:(Y,A,e)=>{"use strict";e.d(A,{s:()=>r});var t=e(32196),n=e(96540),o=e(40845);const s=g=>({legend:(0,t.css)({fontSize:g.typography.h3.fontSize,fontWeight:g.typography.fontWeightRegular,margin:g.spacing(0,0,2,0)})}),r=({children:g,className:u,...d})=>{const i=(0,o.of)(s);return n.createElement("legend",{className:(0,t.cx)(i.legend,u),...d},g)}},94354:(Y,A,e)=>{"use strict";e.d(A,{z:()=>h});var t=e(32196),n=e(2543),o=e(96540),s=e(8887),r=e(40845),g=e(14578),u=e(13544),d=e(16797),i=e(56034),l=e(87266);const f=o.forwardRef(({children:m,active:a=!1,disabled:v=!1,size:E="md",onChange:D,onClick:b,id:P,name:y=void 0,description:T,fullWidth:M,"aria-label":I},x)=>{const S=(0,r.of)(c,E,M),O=o.createElement("input",{type:"radio",className:S.radio,onChange:D,onClick:b,disabled:v,id:P,checked:a,name:y,"aria-label":I,ref:x});return T?o.createElement("div",{className:S.radioOption,"data-testid":u.Tp.components.RadioButton.container},o.createElement(i.m,{content:T,placement:"bottom"},O),o.createElement("label",{className:S.radioLabel,htmlFor:P,title:T||I},m)):o.createElement("div",{className:S.radioOption,"data-testid":u.Tp.components.RadioButton.container},O,o.createElement("label",{className:S.radioLabel,htmlFor:P,title:T||I},m))});f.displayName="RadioButton";const c=(m,a,v)=>{const{fontSize:E,height:D,padding:b}=(0,l.SM)(a,m),P=m.colors.text.secondary,y=m.colors.text.primary,T=D*m.spacing.gridSize-4-2;return{radioOption:(0,t.css)({display:"flex",justifyContent:"space-between",position:"relative",flex:v?"1 0 0":"none",textAlign:"center"}),radio:(0,t.css)({position:"absolute",opacity:0,zIndex:2,width:"100% !important",height:"100%",cursor:"pointer","&:checked + label":{color:m.colors.text.primary,fontWeight:m.typography.fontWeightMedium,background:m.colors.action.selected,zIndex:1},"&:focus + label, &:focus-visible + label":(0,d.getFocusStyles)(m),"&:focus:not(:focus-visible) + label":(0,d.getMouseFocusStyles)(m),"&:disabled + label":{color:m.colors.text.disabled,cursor:"not-allowed"}}),radioLabel:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"center",fontSize:E,height:`${T}px`,lineHeight:`${T}px`,color:P,padding:m.spacing(0,b),borderRadius:m.shape.radius.default,background:m.colors.background.primary,cursor:"pointer",userSelect:"none",whiteSpace:"nowrap",flexGrow:1,"&:hover":{color:y}})}};function h({options:m,value:a,onChange:v,onClick:E,disabled:D,disabledOptions:b,size:P="md",id:y,className:T,fullWidth:M=!1,autoFocus:I=!1,"aria-label":x,invalid:S=!1}){const O=(0,o.useCallback)(H=>()=>{v&&v(H.value)},[v]),C=(0,o.useCallback)(H=>()=>{E&&E(H.value)},[E]),L=y??(0,n.uniqueId)("radiogroup-"),U=(0,o.useRef)(L),R=(0,r.of)(p),B=(0,o.useRef)(null);return(0,o.useEffect)(()=>{I&&B.current&&B.current.focus()},[I]),o.createElement("div",{role:"radiogroup","aria-label":x,className:(0,t.cx)(R.radioGroup,M&&R.fullWidth,S&&R.invalid,T)},m.map((H,W)=>{const N=b&&H.value&&b.includes(H.value),V=H.icon?(0,s.Uo)(H.icon):void 0,G=!!(H.imgUrl||H.label||H.component);return o.createElement(f,{size:P,disabled:N||D,active:a===H.value,key:`o.label-${W}`,"aria-label":H.ariaLabel,onChange:O(H),onClick:C(H),id:`option-${H.value}-${L}`,name:U.current,description:H.description,fullWidth:M,ref:a===H.value?B:void 0},V&&o.createElement(g.I,{name:V,className:(0,t.cx)(G&&R.icon)}),H.imgUrl&&o.createElement("img",{src:H.imgUrl,alt:H.label,className:R.img}),H.label," ",H.component?o.createElement(H.component,null):null)}))}h.displayName="RadioButtonGroup";const p=m=>({radioGroup:(0,t.css)({display:"inline-flex",flexDirection:"row",flexWrap:"nowrap",border:`1px solid ${m.components.input.borderColor}`,borderRadius:m.shape.radius.default,padding:"2px"}),fullWidth:(0,t.css)({display:"flex"}),icon:(0,t.css)({marginRight:"6px"}),img:(0,t.css)({width:m.spacing(2),height:m.spacing(2),marginRight:m.spacing(1)}),invalid:(0,t.css)({border:`1px solid ${m.colors.error.border}`})})},5173:(Y,A,e)=>{"use strict";e.d(A,{a:()=>u});var t=e(32196),n=e(2543),o=e(96540),s=e(40845);const r=({id:i,name:l,label:f,checked:c,value:h,disabled:p,description:m,onChange:a})=>{const v=(0,s.of)(g);return o.createElement("label",{title:m,className:v.label},o.createElement("input",{id:i,name:l,type:"radio",checked:c,value:h,disabled:p,className:v.input,onChange:()=>a&&a(i)}),o.createElement("div",null,f,m&&o.createElement("div",{className:v.description},m)))},g=i=>({input:(0,t.css)({position:"relative",appearance:"none",outline:"none",backgroundColor:i.colors.background.canvas,width:`${i.spacing(2)} !important`,height:i.spacing(2),border:`1px solid ${i.colors.border.medium}`,borderRadius:i.shape.radius.circle,margin:"3px 0",":checked":{backgroundColor:i.v1.palette.white,border:`5px solid ${i.colors.primary.main}`},":disabled":{backgroundColor:`${i.colors.action.disabledBackground} !important`,borderColor:i.colors.border.weak},":disabled:checked":{border:`1px solid ${i.colors.border.weak}`},":disabled:checked::after":{content:'""',width:"6px",height:"6px",backgroundColor:i.colors.text.disabled,borderRadius:i.shape.radius.circle,display:"inline-block",position:"absolute",top:"4px",left:"4px"},":focus":{outline:"none !important",boxShadow:`0 0 0 1px ${i.colors.background.canvas}, 0 0 0 3px ${i.colors.primary.main}`}}),label:(0,t.css)({fontSize:i.typography.fontSize,lineHeight:"22px",display:"grid",gridTemplateColumns:`${i.spacing(2)} auto`,gap:i.spacing(1)}),description:(0,t.css)({fontSize:i.typography.size.sm,color:i.colors.text.secondary})});function u({name:i,id:l,options:f,value:c,onChange:h,className:p,disabled:m,disabledOptions:a=[]}){const v=(0,s.of)(d),E=l??(0,n.uniqueId)("radiogroup-list-");return o.createElement("div",{id:l,className:(0,t.cx)(v.container,p),role:"radiogroup"},f.map((D,b)=>{const P=`${E}-${b}`,y=c&&c===D.value,T=m||a.some(I=>I===D.value),M=()=>h&&D.value&&h(D.value);return o.createElement(r,{key:b,id:P,name:i,label:D.label,description:D.description,checked:y,value:D.value,disabled:T,onChange:M})}))}const d=i=>({container:(0,t.css)({display:"grid",gap:i.spacing(1)})})},87266:(Y,A,e)=>{"use strict";e.d(A,{SM:()=>d,Xb:()=>s,g$:()=>r,gm:()=>o,lH:()=>g});var t=e(32196),n=e(16797);const o=i=>(0,t.css)({"&:focus":(0,n.getFocusStyles)(i)}),s=(i,l=!1)=>{const f=l?i.colors.error.border:i.components.input.borderColor,c=l?i.colors.error.shade:i.components.input.borderHover,h=i.components.input.background,p=i.components.input.text,m=i.isDark?"#2e2f35":"#bab4ca";return(0,t.cx)(r(i),(0,t.css)({background:h,lineHeight:i.typography.body.lineHeight,fontSize:i.typography.size.md,color:p,border:`1px solid ${f}`,"&:-webkit-autofill, &:-webkit-autofill:hover":{boxShadow:`inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${h}!important`,WebkitTextFillColor:`${p} !important`,borderColor:m},"&:-webkit-autofill:focus":{boxShadow:`0 0 0 2px ${i.colors.background.primary}, 0 0 0px 4px ${i.colors.primary.main}, inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${h}!important`,WebkitTextFillColor:`${p} !important`},"&:hover":{borderColor:c},"&:focus":{outline:"none"},"&:disabled":{backgroundColor:i.colors.action.disabledBackground,color:i.colors.action.disabledText,border:`1px solid ${i.colors.action.disabledBackground}`,"&:hover":{borderColor:f}},"&::placeholder":{color:i.colors.text.disabled,opacity:1}}))},r=i=>(0,t.css)({padding:i.spacing(0,1,0,1)}),g=()=>({sm:(0,t.css)({width:u("sm")}),md:(0,t.css)({width:u("md")}),lg:(0,t.css)({width:u("lg")}),auto:(0,t.css)({width:u("auto")})}),u=i=>{switch(i){case"sm":return"200px";case"md":return"320px";case"lg":return"580px";case"auto":default:return"auto"}};function d(i,l){switch(i){case"sm":return{padding:1,fontSize:l.typography.size.sm,height:l.components.height.sm};case"lg":return{padding:3,fontSize:l.typography.size.lg,height:l.components.height.lg};case"md":default:return{padding:2,fontSize:l.typography.size.md,height:l.components.height.md}}}},95164:(Y,A,e)=>{"use strict";e.d(A,{_:()=>m});var t=e(34796),n=e.n(t),o=e(96540),s=e(83195),r=e(58649),g=e(50082),u=e(52622),d=e(29413),i=e(55852),l=e(24293),f=e(47737);const c={mode:g.O.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]};function h(a,v,E,D){const b=E!=null,P=D===u.wV.Vertical?v:a,y=Math.min(P*.15/1.5,20),T=y*1.5,M=b?v-T:v,I=Math.min(M,a);return{showLabel:b,gaugeHeight:I,titleFontSize:y}}function p(a,v,E,D){if(v.color?.mode!==l.Y.Thresholds)return[{value:v.min??r.tw,color:E.color??l.F}];const b=v.thresholds??c,P=b.mode===g.O.Percentage,y=b.steps;let T=v.min??r.tw,M=v.max??r.d1;P&&(T=0,M=100);const I=(0,f.yQ)(T,y),x=(0,f.yQ)(M,y),S=[{value:+T.toFixed(a),color:D.visualization.getColorByName(I.color)}];let O=!0;for(let C=0;C<y.length;C++){const L=y[C];if(O){I===L&&(O=!1);continue}const U=y[C-1];if(S.push({value:L.value,color:D.visualization.getColorByName(U.color)}),L===x)break}return S.push({value:+M.toFixed(a),color:D.visualization.getColorByName(x.color)}),S}class m extends o.PureComponent{constructor(){super(...arguments),this.canvasElement=null,this.renderVisualization=()=>{const{width:v,value:E,height:D,onClick:b,text:P,theme:y,orientation:T}=this.props,M=h(v,D,E.title,T),I=T===u.wV.Vertical?`${M.gaugeHeight}px`:"100%",x=o.createElement("div",{style:{height:`${M.gaugeHeight}px`,width:I},ref:S=>this.canvasElement=S});return o.createElement(o.Fragment,null,b?o.createElement("button",{className:(0,i.my)(y),type:"button",onClick:b},x):x,M.showLabel&&o.createElement("div",{style:{textAlign:"center",fontSize:P?.titleSize??M.titleFontSize,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative",width:I,top:"-4px",cursor:"default"}},E.title))}}componentDidMount(){this.draw()}componentDidUpdate(){this.draw()}draw(){const{field:v,showThresholdLabels:E,showThresholdMarkers:D,width:b,height:P,theme:y,value:T,orientation:M}=this.props,I=h(b,P,T.title),x=M===u.wV.Vertical?I.gaugeHeight:b,S=Math.min(x,I.gaugeHeight),O=y.colors.background.secondary,C=E?1.5:1,L=Math.min(S/5.5,40)/C,U=L/5,R=(0,s.cN)(T),H=Math.min(x,S*1.3)*.9-((L+(D?U:0)+(E?10:0))*2+10),W=this.props.text?.valueSize??(0,d.Vr)(R,H,S,1,L*1.7),N=Math.max(W/2.5,12);let V=v.min??r.tw,G=v.max??r.d1,_=T.numeric;v.thresholds?.mode===g.O.Percentage&&(V=0,G=100,T.percent===void 0?_=(_-V)/(G-V)*100:_=T.percent*100);const K=v.decimals===void 0?2:v.decimals;D&&(V=+V.toFixed(K),G=+G.toFixed(K));const j={series:{gauges:{gauge:{min:V,max:G,neutralValue:v.custom?.neutral,background:{color:O},border:{color:null},shadow:{show:!1},width:L},frame:{show:!1},label:{show:!1},layout:{margin:0,thresholdWidth:0,vMargin:0},cell:{border:{width:0}},threshold:{values:p(K,v,T,y),label:{show:E,margin:U+1,font:{size:N}},show:D,width:U},value:{color:T.color,formatter:()=>R,font:{size:W,family:y.typography.fontFamily}},show:!0}}},k={data:[[0,_]],label:T.title};try{this.canvasElement&&n().plot(this.canvasElement,[k],j)}catch(Q){console.error("Gauge rendering error",Q,j,T)}}render(){return o.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},className:this.props.className},this.renderVisualization())}}m.defaultProps={showThresholdMarkers:!0,showThresholdLabels:!1,field:{min:0,max:100,thresholds:c}}},14578:(Y,A,e)=>{"use strict";e.d(A,{I:()=>d});var t=e(32196),n=e(96540),o=e(8867),s=e(8887),r=e(40845),g=e(78318);const u=i=>({icon:(0,t.css)({display:"inline-block",fill:"currentColor",flexShrink:0,label:"Icon",lineHeight:0,verticalAlign:"middle"}),orange:(0,t.css)({fill:i.v1.palette.orange})}),d=n.forwardRef(({size:i="md",type:l="default",name:f,className:c,style:h,title:p="",...m},a)=>{const v=(0,r.of)(u);(0,s.n6)(f)||console.warn("Icon component passed an invalid icon name",f);const E=f==="fa fa-spinner"?"spinner":f,D=(0,g.Wj)(),b=(0,g.cs)(i),P=b,y=f.startsWith("gf-bar-align")?16:f.startsWith("gf-interp")?30:b,T=(0,g.Xi)(E,l),M=`${D}${T}/${E}.svg`,I=(0,t.cx)(v.icon,c,l==="mono"?{[v.orange]:f==="favorite"}:"",E==="spinner"&&"fa-spin");return n.createElement(o.default,{innerRef:a,src:M,width:y,height:P,title:p,className:I,style:h,...m})});d.displayName="Icon"},78318:(Y,A,e)=>{"use strict";e.d(A,{Wj:()=>r,Xi:()=>n,cs:()=>o});const t=["grafana","favorite","heart-break","heart","panel-add","library-panel","circle-mono"];function n(g,u){return g?.startsWith("gf-")?"custom":t.includes(g)?"mono":u==="default"?"unicons":u==="solid"?"solid":"mono"}function o(g){switch(g){case"xs":return 12;case"sm":return 14;case"md":return 16;case"lg":return 18;case"xl":return 24;case"xxl":return 36;case"xxxl":return 48}}let s;function r(){if(s)return s;const g=typeof window<"u"&&window.__grafana_public_path__;return g?s=g+"img/icons/":s="public/img/icons/",s}},29158:(Y,A,e)=>{"use strict";e.d(A,{K:()=>l});var t=e(32196),n=e(96540),o=e(95344),s=e(23596),r=e(40845),g=e(16797),u=e(14578),d=e(78318),i=e(56034);const l=n.forwardRef((c,h)=>{const{size:p="md",variant:m="secondary"}=c;let a;p==="xxl"||p==="xxxl"?((0,o.l)("IconButton",'size="xxl" and size="xxxl"','size="xl"'),a="xl"):a=p;const v=(0,r.of)(f,a,m);let E,D;if("tooltip"in c){const{tooltip:b}=c;E=typeof b=="string"?b:void 0}else if("ariaLabel"in c||"aria-label"in c){const{ariaLabel:b,["aria-label"]:P}=c;E=P||b,D=h}if("tooltip"in c){const{name:b,iconType:P,className:y,tooltip:T,tooltipPlacement:M,...I}=c;return n.createElement(i.m,{ref:h,content:T,placement:M},n.createElement("button",{...I,ref:D,"aria-label":E,className:(0,t.cx)(v.button,y),type:"button"},n.createElement(u.I,{name:b,size:a,className:v.icon,type:P})))}else{const{name:b,iconType:P,className:y,...T}=c;return n.createElement("button",{...T,ref:D,"aria-label":E,className:(0,t.cx)(v.button,y),type:"button"},n.createElement(u.I,{name:b,size:a,className:v.icon,type:P}))}});l.displayName="IconButton";const f=(c,h,p)=>{const m=(0,d.cs)(h)+c.spacing.gridSize;let a=c.colors.text.primary;return p==="primary"?a=c.colors.primary.text:p==="destructive"&&(a=c.colors.error.text),{button:(0,t.css)({zIndex:0,position:"relative",margin:`0 ${c.spacing.x0_5} 0 0`,boxShadow:"none",border:"none",display:"inline-flex",background:"transparent",justifyContent:"center",alignItems:"center",padding:0,color:a,"&[disabled], &:disabled":{cursor:"not-allowed",color:c.colors.action.disabledText,opacity:.65},"&:before":{zIndex:-1,position:"absolute",opacity:0,width:`${m}px`,height:`${m}px`,borderRadius:c.shape.radius.default,content:'""',transitionDuration:"0.2s",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionProperty:"opacity"},"&:focus, &:focus-visible":(0,g.getFocusStyles)(c),"&:focus:not(:focus-visible)":(0,g.getMouseFocusStyles)(c),"&:hover":{"&:before":{backgroundColor:p==="secondary"?c.colors.action.hover:s.alpha(a,.12),opacity:1}}}),icon:(0,t.css)({verticalAlign:"baseline"})}}},86460:(Y,A,e)=>{"use strict";e.d(A,{e:()=>u,y:()=>i});var t=e(32196),n=e(96540),o=e(41987),s=e(40845),r=e(39938),g=e(37166);const u=n.memo(n.forwardRef(({title:f,featureState:c,...h},p)=>{const m=(0,s.of)(d),a=c?n.createElement(n.Fragment,null,n.createElement("div",{className:m.badge},n.createElement(i,{featureState:c})),n.createElement("h3",null,f)):n.createElement("h3",null,f);return n.createElement(g.w,{branded:!0,title:a,urlTitle:"Read documentation",ref:p,...h})}));u.displayName="FeatureInfoBox";const d=f=>({badge:(0,t.css)({marginBottom:f.spacing(1)})}),i=({featureState:f,tooltip:c})=>{const h=l(f);return n.createElement(r.E,{text:h.text,color:h.color,icon:h.icon,tooltip:c})};function l(f){switch(f){case o.Ay.alpha:return{text:"Alpha",icon:"exclamation-triangle",color:"orange"}}return{text:"Beta",icon:"rocket",color:"blue"}}},37166:(Y,A,e)=>{"use strict";e.d(A,{w:()=>g});var t=e(32196),n=e(96540),o=e(40845),s=e(42418),r=e(14578);const g=n.memo(n.forwardRef(({title:d,className:i,children:l,branded:f,url:c,urlTitle:h,onDismiss:p,severity:m="info",...a},v)=>{const E=(0,o.of)(u);return n.createElement(s.F,{severity:m,className:i,...a,ref:v,title:d},n.createElement("div",null,l),c&&n.createElement("a",{href:c,className:(0,t.cx)("external-link",E.docsLink),target:"_blank",rel:"noreferrer"},n.createElement(r.I,{name:"book"})," ",h||"Read more"))}));g.displayName="InfoBox";const u=d=>({docsLink:(0,t.css)({display:"inline-block",marginTop:d.spacing(2)})})},32982:(Y,A,e)=>{"use strict";e.d(A,{r:()=>i});var t=e(32196),n=e(95361),o=e(18491),s=e(36376),r=e(96540),g=e(40845),u=e(14578),d=e(17464);function i({referenceElement:c,children:h,suffixIcon:p,placement:m}){const a=(0,g.of)(l),v=(0,g.$j)(),E=[(0,n.cY)(8),(0,o.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,o.BN)()],{context:D,refs:b,floatingStyles:P}=(0,s.we)({open:!0,placement:m,middleware:E,whileElementsMounted:o.ll,strategy:"fixed"});(0,r.useLayoutEffect)(()=>{b.setReference(c)},[c,b]);const{styles:y}=(0,s.DL)(D,{initial:({side:T})=>({opacity:0,transform:f(T,v)}),duration:v.transitions.duration.shortest});return r.createElement(d.ZL,null,r.createElement("div",{style:{display:"inline-block",...P},ref:b.setFloating,"aria-live":"polite"},r.createElement("span",{className:(0,t.cx)(a.root),style:y},h&&r.createElement("span",null,h),p&&r.createElement(u.I,{name:p}))))}const l=c=>({root:(0,t.css)({...c.typography.bodySmall,willChange:"transform",background:c.components.tooltip.background,color:c.components.tooltip.text,padding:c.spacing(.5,1.5),borderRadius:c.shape.radius.pill,display:"inline-flex",gap:c.spacing(.5),alignItems:"center"})}),f=(c,h)=>{switch(c){case"top":return`translateY(${h.spacing(1)})`;case"bottom":return`translateY(-${h.spacing(1)})`;case"left":return`translateX(${h.spacing(1)})`;case"right":return`translateX(-${h.spacing(1)})`}}},51440:(Y,A,e)=>{"use strict";e.d(A,{D:()=>s});var t=e(96540),n=e(29413),o=e(10354);const s=t.forwardRef((g,u)=>{const{defaultValue:d="",minWidth:i=10,maxWidth:l,onCommitChange:f,onKeyDown:c,onBlur:h,...p}=g,[m,a]=t.useState(d),[v,E]=t.useState(i);return(0,t.useEffect)(()=>{E(r(m.toString(),i,l))},[m,l,i]),t.createElement(o.p,{...p,ref:u,value:m.toString(),onChange:D=>{a(D.currentTarget.value)},width:v,onBlur:D=>{h?h(D):f&&f(D)},onKeyDown:D=>{c?c(D):D.key==="Enter"&&f&&f(D)},"data-testid":"autosize-input"})});function r(g,u,d){if(!g)return u;const i=3,l=(0,n.kD)(g.toString(),14).width/8+i;return u&&l<u?u:d&&l>d?d:l}s.displayName="AutoSizeInput"},10354:(Y,A,e)=>{"use strict";e.d(A,{n:()=>i,p:()=>d});var t=e(32196),n=e(96540),o=e(71473),s=e(40845),r=e(3911),g=e(87266),u=e(62930);const d=n.forwardRef((l,f)=>{const{className:c,addonAfter:h,addonBefore:p,prefix:m,suffix:a,invalid:v,loading:E,width:D=0,...b}=l,[P,y]=(0,o.A)(),[T,M]=(0,o.A)(),I=(0,s.$j)(),x=i({theme:I,invalid:!!v,width:D});return n.createElement("div",{className:(0,t.cx)(x.wrapper,c),"data-testid":"input-wrapper"},!!p&&n.createElement("div",{className:x.addon},p),n.createElement("div",{className:x.inputWrapper},m&&n.createElement("div",{className:x.prefix,ref:P},m),n.createElement("input",{ref:f,className:x.input,...b,style:{paddingLeft:m?y.width+12:void 0,paddingRight:a||E?M.width+12:void 0}}),(a||E)&&n.createElement("div",{className:x.suffix,ref:T},E&&n.createElement(u.y,{className:x.loadingIndicator,inline:!0}),a)),!!h&&n.createElement("div",{className:x.addon},h))});d.displayName="Input";const i=(0,r.N)(({theme:l,invalid:f=!1,width:c})=>{const h="28px",p=(0,t.css)({position:"absolute",top:0,zIndex:1,display:"flex",alignItems:"center",justifyContent:"center",flexGrow:0,flexShrink:0,fontSize:l.typography.size.md,height:"100%",minWidth:h,color:l.colors.text.secondary});return{wrapper:(0,t.cx)((0,t.css)({label:"input-wrapper",display:"flex",width:c?l.spacing(c):"100%",height:l.spacing(l.components.height.md),borderRadius:l.shape.radius.default,"&:hover":{"> .prefix, .suffix, .input":{borderColor:f?l.colors.error.border:l.colors.primary.border},"input[type='number']":{appearance:"textfield"},"input[type='number']::-webkit-inner-spin-button, input[type='number']::-webkit-outer-spin-button":{WebkitAppearance:"inner-spin-button !important",opacity:1}}})),inputWrapper:(0,t.css)({label:"input-inputWrapper",position:"relative",flexGrow:1,zIndex:1,"&:not(:first-child):last-child":{"> input":{borderLeft:"none",borderTopLeftRadius:0,borderBottomLeftRadius:0}},"&:first-child:not(:last-child)":{"> input":{borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0}},"&:not(:first-child):not(:last-child)":{"> input":{borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:0,borderBottomLeftRadius:0}},input:{"&:not(:first-child)":{paddingLeft:h},"&:not(:last-child)":{paddingRight:h},"&[readonly]":{cursor:"default"}}}),input:(0,t.cx)((0,g.gm)(l),(0,g.Xb)(l,f),(0,t.css)({label:"input-input",position:"relative",zIndex:0,flexGrow:1,borderRadius:l.shape.radius.default,height:"100%",width:"100%"})),inputDisabled:(0,t.css)({backgroundColor:l.colors.action.disabledBackground,color:l.colors.action.disabledText,border:`1px solid ${l.colors.action.disabledBackground}`,"&:focus":{boxShadow:"none"}}),addon:(0,t.css)({label:"input-addon",display:"flex",justifyContent:"center",alignItems:"center",flexGrow:0,flexShrink:0,position:"relative","&:first-child":{borderTopRightRadius:0,borderBottomRightRadius:0,"> :last-child":{borderTopRightRadius:0,borderBottomRightRadius:0}},"&:last-child":{borderTopLeftRadius:0,borderBottomLeftRadius:0,"> :first-child":{borderTopLeftRadius:0,borderBottomLeftRadius:0}},"> *:focus":{zIndex:2}}),prefix:(0,t.cx)(p,(0,t.css)({label:"input-prefix",paddingLeft:l.spacing(1),paddingRight:l.spacing(.5),borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0})),suffix:(0,t.cx)(p,(0,t.css)({label:"input-suffix",paddingLeft:l.spacing(1),paddingRight:l.spacing(1),marginBottom:"-2px",borderLeft:"none",borderTopLeftRadius:0,borderBottomLeftRadius:0,right:0})),loadingIndicator:(0,t.css)({"& + *":{marginLeft:l.spacing(.5)}})}})},16504:(Y,A,e)=>{"use strict";e.d(A,{e:()=>n});var t=e(49785);const n=t.xI},28389:(Y,A,e)=>{"use strict";e.d(A,{j:()=>a});var t=e(32196),n=e(2543),o=e(96540),s=e(32885),r=e(39070),g=e(40845),u=e(14578),d=e(19384),i=e(56034),l=e(29158);const f=(0,t.css)({display:"flex",alignItems:"center",height:"100%"});function c({row:b,__rowID:P}){return o.createElement("div",{className:f},o.createElement(l.K,{tooltip:"toggle row expanded","aria-controls":P,name:b.isExpanded?"angle-down":"angle-right","aria-expanded":b.isExpanded,...b.getToggleRowExpandedProps(),size:"lg"}))}const h="__expander";function p(b){return[{id:h,Cell:c,disableSortBy:!0,width:0},...b.map(P=>({id:P.id,accessor:P.id,Header:P.header||(()=>null),sortType:P.sortType||"alphanumeric",disableSortBy:!P.sortType,width:P.disableGrow?0:void 0,visible:P.visible,...P.cell&&{Cell:P.cell}}))]}const m=b=>{const P=b.colors.emphasize(b.colors.background.primary,.03);return{container:(0,t.css)({display:"flex",gap:b.spacing(2),flexDirection:"column",width:"100%",overflowX:"auto"}),table:(0,t.css)({borderRadius:b.shape.radius.default,width:"100%",td:{padding:b.spacing(1)},"td, th":{minWidth:b.spacing(3)}}),disableGrow:(0,t.css)({width:0}),header:(0,t.css)({borderBottom:`1px solid ${b.colors.border.weak}`,"&, & > button":{position:"relative",whiteSpace:"nowrap",padding:b.spacing(1)},"& > button":{"&:after":{content:'"\\00a0"'},width:"100%",height:"100%",background:"none",border:"none",paddingRight:b.spacing(2.5),textAlign:"left",fontWeight:b.typography.fontWeightMedium}}),row:(0,t.css)({label:"row",borderBottom:`1px solid ${b.colors.border.weak}`,"&:hover":{backgroundColor:P},"&:last-child":{borderBottom:0}}),expandedRow:(0,t.css)({label:"expanded-row-content",borderBottom:"none"}),expandedContentRow:(0,t.css)({label:"expanded-row-content",td:{borderBottom:`1px solid ${b.colors.border.weak}`,position:"relative",padding:b.spacing(2,2,2,5),"&:before":{content:'""',position:"absolute",width:"1px",top:0,left:"16px",bottom:b.spacing(2),background:b.colors.border.medium}}}),sortableHeader:(0,t.css)({"&&":{padding:0}})}};function a({className:b,columns:P,data:y,getRowId:T,headerTooltips:M,pageSize:I=0,renderExpandedRow:x,fetchData:S}){const O=(0,g.of)(m),C=(0,o.useMemo)(()=>p(P),[P]),L=v(),U=(0,o.useCallback)(j=>`${L}-${j.id}`.replace(/\s/g,""),[L]),R=[s.useSortBy,s.useExpanded],B=y.length>I,H=I>0&&B;H&&R.push(s.usePagination);const W=(0,s.useTable)({columns:C,data:y,autoResetExpanded:!1,autoResetSortBy:!1,disableMultiSort:!0,manualSortBy:!!S,getRowId:T,initialState:{hiddenColumns:[!x&&h,...C.filter(j=>!(!j.visible||j.visible(y))).map(j=>j.id).filter(r.zz)].filter(r.zz)}},...R),{getTableProps:N,getTableBodyProps:V,headerGroups:G,prepareRow:_}=W,{sortBy:K}=W.state;return(0,o.useEffect)(()=>{S&&S({sortBy:K})},[K,S]),(0,o.useEffect)(()=>{H&&W.setPageSize(I)},[H,I,W.setPageSize,W]),o.createElement("div",{className:O.container},o.createElement("table",{...N(),className:(0,t.cx)(O.table,b)},o.createElement("thead",null,G.map(j=>{const{key:k,...Q}=j.getHeaderGroupProps();return o.createElement("tr",{key:k,...Q},j.headers.map(ee=>{const{key:ae,...Z}=ee.getHeaderProps(),ne=M?.[ee.id];return o.createElement("th",{key:ae,className:(0,t.cx)(O.header,{[O.disableGrow]:ee.width===0,[O.sortableHeader]:ee.canSort}),...Z,...ee.isSorted&&{"aria-sort":ee.isSortedDesc?"descending":"ascending"}},o.createElement(D,{column:ee,headerTooltip:ne}))}))})),o.createElement("tbody",{...V()},(H?W.page:W.rows).map(j=>{_(j);const{key:k,...Q}=j.getRowProps(),ee=U(j),ae=j.isExpanded;return o.createElement(o.Fragment,{key:k},o.createElement("tr",{...Q,className:(0,t.cx)(O.row,ae&&O.expandedRow)},j.cells.map(Z=>{const{key:ne,...q}=Z.getCellProps();return o.createElement("td",{key:ne,...q},Z.render("Cell",{__rowID:ee}))})),ae&&x&&o.createElement("tr",{...Q,id:ee,className:O.expandedContentRow},o.createElement("td",{colSpan:j.cells.length},x(j.original))))}))),H&&o.createElement("span",null,o.createElement(d.d,{currentPage:W.state.pageIndex+1,numberOfPages:W.pageOptions.length,onNavigate:j=>W.gotoPage(j-1)})))}const v=()=>(0,o.useMemo)(()=>(0,n.uniqueId)("InteractiveTable"),[]),E=b=>({sortIcon:(0,t.css)({position:"absolute",top:b.spacing(1)}),headerTooltipIcon:(0,t.css)({marginLeft:b.spacing(.5)})});function D({column:{canSort:b,render:P,isSorted:y,isSortedDesc:T,getSortByToggleProps:M},headerTooltip:I}){const x=(0,g.of)(E),{onClick:S}=M(),O=o.createElement(o.Fragment,null,P("Header"),I&&o.createElement(i.m,{theme:"info-alt",content:I.content,placement:"top-end"},o.createElement(u.I,{className:x.headerTooltipIcon,name:I.iconName||"info-circle","data-testid":"header-tooltip-icon"})),y&&o.createElement("span",{"aria-hidden":"true",className:x.sortIcon},o.createElement(u.I,{name:T?"angle-down":"angle-up"})));return b?o.createElement("button",{type:"button",onClick:S},O):O}},24022:(Y,A,e)=>{"use strict";e.d(A,{B:()=>o});var t=e(96540),n=e(44533);class o extends t.PureComponent{constructor(){super(...arguments),this.wrapperRef=(0,t.createRef)(),this.renderJson=()=>{const{json:r,config:g,open:u,onDidRender:d}=this.props,i=this.wrapperRef.current,l=new n.O(r,u,g);i.hasChildNodes()?i.replaceChild(l.render(),i.lastChild):i.appendChild(l.render()),d&&d(l.json)}}componentDidMount(){this.renderJson()}componentDidUpdate(){this.renderJson()}render(){const{className:r}=this.props;return t.createElement("div",{className:r,ref:this.wrapperRef})}}o.defaultProps={open:3,config:{animateOpen:!0}}},44533:(Y,A,e)=>{"use strict";e.d(A,{O:()=>v});var t=e(2543);function n(E){return E.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function o(E){return!!E&&typeof E==="object"}function s(E){if(E===void 0)return"";if(E===null||typeof E=="object"&&!E.constructor)return"Object";const b=/function ([^(]*)/.exec(E.constructor.toString());return b&&b.length>1?b[1]:""}function r(E){return E===null?"null":typeof E}function g(E,D){const b=r(E);return b==="null"||b==="undefined"?b:(b==="string"&&(D='"'+n(D)+'"'),b==="function"?E.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{\u2026}":D)}let u="";function d(E){return o(E)?(u=s(E),Array.isArray(E)&&(u+="["+E.length+"]")):u=g(E,E.toString()),u}function i(E){return`json-formatter-${E}`}function l(E,D,b){const P=document.createElement(E);return D&&P.classList.add(i(D)),b!==void 0&&(b instanceof Node?P.appendChild(b):P.appendChild(document.createTextNode(String(b)))),P}const f=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,c=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,h=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,p=10,m=typeof window<"u"&&window.requestAnimationFrame||(E=>(E(),0)),a={animateOpen:!0,animateClose:!0};class v{constructor(D,b=1,P=a,y){this.json=D,this.open=b,this.config=P,this.key=y,this._isOpen=null,this.element=null,this.skipChildren=!1}get isOpen(){return this._isOpen!==null?this._isOpen:this.open>0}set isOpen(D){this._isOpen=D}get isDate(){return this.type==="string"&&(f.test(this.json)||h.test(this.json)||c.test(this.json))}get isUrl(){return this.type==="string"&&this.json.indexOf("http")===0}get isArray(){return Array.isArray(this.json)}get isObject(){return o(this.json)}get isEmptyObject(){return!this.keys.length&&!this.isArray}get isEmpty(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray}get hasKey(){return typeof this.key<"u"}get constructorName(){return s(this.json)}get type(){return r(this.json)}get keys(){return this.isObject?Object.keys(this.json).map(D=>D||'""'):[]}toggleOpen(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(i("open")))}openAtDepth(D=1){D<0||(this.open=D,this.isOpen=D!==0,this.element&&(this.removeChildren(!1),D===0?this.element.classList.remove(i("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(i("open")))))}isNumberArray(){return this.json.length>0&&this.json.length<4&&((0,t.isNumber)(this.json[0])||(0,t.isNumber)(this.json[1]))}renderArray(){const D=l("span");return D.appendChild(l("span","bracket","[")),this.isNumberArray()?(this.json.forEach((b,P)=>{P>0&&D.appendChild(l("span","array-comma",",")),D.appendChild(l("span","number",b))}),this.skipChildren=!0):D.appendChild(l("span","number",this.json.length)),D.appendChild(l("span","bracket","]")),D}render(D=!1){this.element=l("div","row");const b=l("a","toggler-link"),P=l("span","toggler");if(this.isObject&&b.appendChild(P),this.hasKey&&b.appendChild(l("span","key",`${this.key}:`)),this.isObject){const T=l("span","value"),M=l("span"),I=l("span","constructor-name",this.constructorName);if(M.appendChild(I),this.isArray){const x=this.renderArray();M.appendChild(x)}T.appendChild(M),b.appendChild(T)}else{const T=this.isUrl?l("a"):l("span");T.classList.add(i(this.type)),this.isDate&&T.classList.add(i("date")),this.isUrl&&(T.classList.add(i("url")),T.setAttribute("href",this.json));const M=g(this.json,this.json);T.appendChild(document.createTextNode(M)),b.appendChild(T)}const y=l("div","children");return this.isObject&&y.classList.add(i("object")),this.isArray&&y.classList.add(i("array")),this.isEmpty&&y.classList.add(i("empty")),this.config&&this.config.theme&&this.element.classList.add(i(this.config.theme)),this.isOpen&&this.element.classList.add(i("open")),D||this.element.appendChild(b),this.skipChildren?b.removeChild(P):this.element.appendChild(y),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&b.addEventListener("click",this.toggleOpen.bind(this)),this.element}appendChildren(D=!1){const b=this.element&&this.element.querySelector(`div.${i("children")}`);if(!(!b||this.isEmpty))if(D){let P=0;const y=()=>{const T=this.keys[P],M=new v(this.json[T],this.open-1,this.config,T);b.appendChild(M.render()),P+=1,P<this.keys.length&&(P>p?y():m(y))};m(y)}else this.keys.forEach(P=>{const y=new v(this.json[P],this.open-1,this.config,P);b.appendChild(y.render())})}removeChildren(D=!1){const b=this.element&&this.element.querySelector(`div.${i("children")}`);if(D){let P=0;const y=()=>{b&&b.children.length&&(b.removeChild(b.children[0]),P+=1,P>p?y():m(y))};m(y)}else b&&(b.innerHTML="")}}},90613:(Y,A,e)=>{"use strict";e.d(A,{a:()=>r});var t=e(32196),n=e(96540),o=e(40845),s=e(16795);const r=(0,n.forwardRef)((i,l)=>{const{children:f,margin:c,marginX:h,marginY:p,marginTop:m,marginBottom:a,marginLeft:v,marginRight:E,padding:D,paddingX:b,paddingY:P,paddingTop:y,paddingBottom:T,paddingLeft:M,paddingRight:I,display:x,backgroundColor:S,grow:O,shrink:C,basis:L,flex:U,borderColor:R,borderStyle:B,borderRadius:H,justifyContent:W,alignItems:N,boxShadow:V,element:G,gap:_,...K}=i,j=(0,o.of)(d,c,h,p,m,a,v,E,D,b,P,y,T,M,I,x,S,O,C,L,U,R,B,H,W,N,V,_),k=G??"div";return n.createElement(k,{ref:l,className:j.root,...K},f)});r.displayName="Box";const g=(i,l)=>{switch(i){case"error":case"success":case"info":case"warning":return l.colors[i].borderTransparent;default:return i?l.colors.border[i]:void 0}},u=(i,l)=>{switch(i){case"error":case"success":case"info":case"warning":return l.colors[i].transparent;default:return i?l.colors.background[i]:void 0}},d=(i,l,f,c,h,p,m,a,v,E,D,b,P,y,T,M,I,x,S,O,C,L,U,R,B,H,W,N)=>({root:(0,t.css)([(0,s.Y)(i,l,V=>({margin:i.spacing(V)})),(0,s.Y)(i,f,V=>({marginLeft:i.spacing(V),marginRight:i.spacing(V)})),(0,s.Y)(i,c,V=>({marginTop:i.spacing(V),marginBottom:i.spacing(V)})),(0,s.Y)(i,h,V=>({marginTop:i.spacing(V)})),(0,s.Y)(i,p,V=>({marginBottom:i.spacing(V)})),(0,s.Y)(i,m,V=>({marginLeft:i.spacing(V)})),(0,s.Y)(i,a,V=>({marginRight:i.spacing(V)})),(0,s.Y)(i,v,V=>({padding:i.spacing(V)})),(0,s.Y)(i,E,V=>({paddingLeft:i.spacing(V),paddingRight:i.spacing(V)})),(0,s.Y)(i,D,V=>({paddingTop:i.spacing(V),paddingBottom:i.spacing(V)})),(0,s.Y)(i,b,V=>({paddingTop:i.spacing(V)})),(0,s.Y)(i,P,V=>({paddingBottom:i.spacing(V)})),(0,s.Y)(i,y,V=>({paddingLeft:i.spacing(V)})),(0,s.Y)(i,T,V=>({paddingRight:i.spacing(V)})),(0,s.Y)(i,M,V=>({display:V})),(0,s.Y)(i,I,V=>({backgroundColor:u(V,i)})),(0,s.Y)(i,x,V=>({flexGrow:V})),(0,s.Y)(i,S,V=>({flexShrink:V})),(0,s.Y)(i,O,V=>({flexBasis:V})),(0,s.Y)(i,C,V=>({flex:V})),(0,s.Y)(i,U,V=>({borderStyle:V})),(0,s.Y)(i,L,V=>({borderColor:g(V,i)})),(U||L)&&{borderWidth:"1px"},(0,s.Y)(i,B,V=>({justifyContent:V})),(0,s.Y)(i,H,V=>({alignItems:V})),(0,s.Y)(i,R,V=>({borderRadius:i.shape.radius[V]})),(0,s.Y)(i,W,V=>({boxShadow:i.shadows[V]})),(0,s.Y)(i,N,V=>({gap:i.spacing(V)}))])})},71259:(Y,A,e)=>{"use strict";e.d(A,{x:()=>r});var t=e(32196),n=e(96540),o=e(40845),s=e(16795);const r=(0,n.forwardRef)((u,d)=>{const{children:i,gap:l,columns:f,minColumnWidth:c,...h}=u,p=(0,o.of)(g,l,f,c);return n.createElement("div",{ref:d,...h,className:p.grid},i)});r.displayName="Grid";const g=(u,d,i,l)=>({grid:(0,t.css)([{display:"grid"},(0,s.Y)(u,d,f=>({gap:u.spacing(f)})),l&&(0,s.Y)(u,l,f=>({gridTemplateColumns:`repeat(auto-fill, minmax(${u.spacing(f)}, 1fr))`})),i&&(0,s.Y)(u,i,f=>({gridTemplateColumns:`repeat(${f}, 1fr)`}))])})},66864:(Y,A,e)=>{"use strict";e.d(A,{Gy:()=>g,PE:()=>r,gW:()=>u,mc:()=>d});var t=e(32196),n=e(96540),o=e(40845),s=(c=>(c[c.Horizontal=0]="Horizontal",c[c.Vertical=1]="Vertical",c))(s||{});const r=({children:c,orientation:h=0,spacing:p="sm",justify:m="flex-start",align:a="normal",wrap:v=!1,width:E="100%",height:D="100%",...b})=>{const P=(0,o.of)(i,h,p,m,a,v);return n.createElement("div",{className:P.layout,style:{width:E,height:D},...b},n.Children.toArray(c).filter(Boolean).map((y,T)=>n.createElement("div",{className:P.childWrapper,key:T},y)))},g=({children:c,spacing:h,justify:p,align:m="center",wrap:a,width:v,height:E})=>n.createElement(r,{spacing:h,justify:p,orientation:0,align:m,width:v,height:E,wrap:a},c),u=({children:c,spacing:h,justify:p,align:m,width:a,height:v})=>n.createElement(r,{spacing:h,justify:p,orientation:1,align:m,width:a,height:v},c),d=({children:c,padding:h,margin:p,grow:m,shrink:a})=>{const v=(0,o.of)(f,h,p);return n.createElement("div",{className:(0,t.cx)(v.wrapper,m!==void 0&&(0,t.css)({flexGrow:m}),a!==void 0&&(0,t.css)({flexShrink:a}))},c)},i=(c,h,p,m,a,v)=>{const E=p!=="none"?c.spacing(l[p]):0,D=h===0&&!v||h===1?0:`-${E}`,b=h===1?"vertical-group":"horizontal-group";return{layout:(0,t.css)({label:b,display:"flex",flexDirection:h===1?"column":"row",flexWrap:v?"wrap":"nowrap",justifyContent:m,alignItems:a,height:"100%",maxWidth:"100%",marginBottom:D}),childWrapper:(0,t.css)({label:"layoutChildrenWrapper",marginBottom:h===0&&!v?0:E,marginRight:h===0?E:0,display:"flex",alignItems:a,"&:last-child":{marginBottom:h===1?0:void 0,marginRight:h===0?0:void 0}})}},l={none:0,xs:.5,sm:1,md:2,lg:3},f=(c,h,p)=>{const m=h&&h!=="none"&&c.spacing(l[h])||0,a=p&&p!=="none"&&c.spacing(l[p])||0;return{wrapper:(0,t.css)({label:"container",margin:a,padding:m})}}},18348:(Y,A,e)=>{"use strict";e.d(A,{N:()=>n});var t=e(96540);const n=(0,t.createContext)({boostZIndex:()=>()=>{}})},68402:(Y,A,e)=>{"use strict";e.d(A,{$:()=>o});var t=e(96540),n=e(90613);const o=({v:s=0,h:r=0,layout:g})=>t.createElement(n.a,{paddingRight:r,paddingBottom:s,display:g==="inline"?"inline-block":"block"})},67061:(Y,A,e)=>{"use strict";e.d(A,{B:()=>r});var t=e(32196),n=e(96540),o=e(40845),s=e(16795);const r=n.forwardRef((u,d)=>{const{gap:i=1,alignItems:l,justifyContent:f,direction:c,wrap:h,children:p,grow:m,shrink:a,basis:v,flex:E,...D}=u,b=(0,o.of)(g,i,l,f,c,h,m,a,v,E);return n.createElement("div",{ref:d,className:b.flex,...D},p)});r.displayName="Stack";const g=(u,d,i,l,f,c,h,p,m,a)=>({flex:(0,t.css)([{display:"flex"},(0,s.Y)(u,f,v=>({flexDirection:v})),(0,s.Y)(u,c,v=>({flexWrap:v})),(0,s.Y)(u,i,v=>({alignItems:v})),(0,s.Y)(u,l,v=>({justifyContent:v})),(0,s.Y)(u,d,v=>({gap:u.spacing(v)})),(0,s.Y)(u,h,v=>({flexGrow:v})),(0,s.Y)(u,p,v=>({flexShrink:v})),(0,s.Y)(u,m,v=>({flexBasis:v})),(0,s.Y)(u,a,v=>({flex:v}))])})},16795:(Y,A,e)=>{"use strict";e.d(A,{Y:()=>n});function t(o,s,r,g){const u=s[g];if(u!=null)return{[o.breakpoints.up(g)]:r(u)}}function n(o,s,r){return s==null?null:typeof s!="object"||!("xs"in s)?r(s):[t(o,s,r,"xs"),t(o,s,r,"sm"),t(o,s,r,"md"),t(o,s,r,"lg"),t(o,s,r,"xl"),t(o,s,r,"xxl")]}},50720:(Y,A,e)=>{"use strict";e.d(A,{N:()=>r});var t=e(96540),n=e(54625),o=e(71733),s=e(40672);const r=(0,t.forwardRef)(({href:g,children:u,...d},i)=>{const l=o.I.stripBaseFromUrl(s.sQ.sanitizeUrl(g??""));return t.createElement(n.Link,{ref:i,to:l,...d},u)});r.displayName="Link"},72109:(Y,A,e)=>{"use strict";e.d(A,{Y:()=>l});var t=e(32196),n=e(96540),o=e(40672),s=e(71733),r=e(40845),g=e(14578),u=e(71356),d=e(50720);const i={h1:"xl",h2:"xl",h3:"lg",h4:"lg",h5:"md",h6:"md",body:"md",bodySmall:"xs"},l=(0,n.forwardRef)(({href:c,color:h="link",external:p=!1,inline:m=!0,variant:a="body",weight:v,icon:E,children:D,...b},P)=>{const y=o.sQ.sanitizeUrl(c??""),T=(0,r.$j)(),M=f(T,m,a,v,h),I=E||"external-link-alt";if(p)return n.createElement("a",{href:y,ref:P,...b,target:"_blank",rel:"noreferrer",className:M},D,n.createElement(g.I,{size:i[a]||"md",name:I}));const x=s.I.stripBaseFromUrl(y);return n.createElement(d.N,{ref:P,href:x,...b,className:M},D,E&&n.createElement(g.I,{name:E,size:i[a]||"md"}))});l.displayName="TextLink";const f=(c,h,p,m,a)=>(0,t.css)([p&&{...c.typography[p]},m&&{fontWeight:(0,u.iV)(m,c)},a&&{color:c.colors.text[a]},{alignItems:"center",gap:"0.25em",display:"inline-flex",textDecoration:"none","&:hover":{textDecoration:"underline",color:c.colors.text.link}},h&&{textDecoration:"underline","&:hover":{textDecoration:"none"}}])},85918:(Y,A,e)=>{"use strict";e.d(A,{p:()=>r});var t=e(32196),n=e(96540),o=e(3911);const s=(0,o.N)((g=!1)=>({list:(0,t.css)({listStyleType:"none",margin:0,padding:0}),item:(0,t.css)({display:g&&"inline-block"||"block"})}));class r extends n.PureComponent{constructor(u){super(u)}render(){const{items:u,renderItem:d,getItemKey:i,className:l,inline:f}=this.props,c=s(f);return n.createElement("ul",{className:(0,t.cx)(c.list,l)},u.map((h,p)=>n.createElement("li",{className:c.item,key:i?i(h):p},d(h,p))))}}},1551:(Y,A,e)=>{"use strict";e.d(A,{c:()=>o});var t=e(96540),n=e(85918);class o extends t.PureComponent{render(){return t.createElement(n.p,{inline:!0,...this.props})}}},33552:(Y,A,e)=>{"use strict";e.d(A,{B:()=>o});var t=e(96540),n=e(85918);class o extends t.PureComponent{render(){return t.createElement(n.p,{...this.props})}}},57514:(Y,A,e)=>{"use strict";e.d(A,{G:()=>l});var t=e(32196),n=e(96540),o=e(40845);const s=28,r=2.4,g=500,u=4e3,d=300,i=100/s*100;function l({width:c,delay:h=d,ariaLabel:p="Loading bar"}){const m=Math.min(Math.max(Math.round(c*r),g),u),a=(0,o.of)(f,h,m),v={overflow:"hidden"};return n.createElement("div",{style:v},n.createElement("div",{"aria-label":p,className:a.bar}))}const f=(c,h,p)=>{const m=(0,t.keyframes)({"0%":{transform:"translateX(-100%)"},"85%, 100%":{transform:`translateX(${i}%)`}});return{bar:(0,t.css)({width:s+"%",height:1,background:"linear-gradient(90deg, rgba(110, 159, 255, 0) 0%, #6E9FFF 80.75%, rgba(110, 159, 255, 0) 100%)",transform:"translateX(-100%)",animationName:m,animationDelay:`${h}ms`,animationDuration:`${p}ms`,animationTimingFunction:"linear",animationIterationCount:"infinite",willChange:"transform"})}}},39558:(Y,A,e)=>{"use strict";e.d(A,{_:()=>r});var t=e(32196),n=e(96540),o=e(40845),s=e(62930);const r=({text:u,className:d,...i})=>{const l=(0,o.of)(g);return n.createElement("div",{className:(0,t.cx)(l.container,d),...i},u," ",n.createElement(s.y,{inline:!0}))},g=u=>({container:(0,t.css)({marginBottom:u.spacing(4)})})},76218:(Y,A,e)=>{"use strict";e.d(A,{O:()=>s});var t=e(96540),n=e(88323),o=e(64278);const s=({value:r,onChange:g,context:u,item:d})=>{const i=d.settings??{},l=(0,o.sE)(u.data,i?.filter),f=(0,o.m3)(l,r,void 0,void 0,i.baseNameMode),c=(0,t.useCallback)(p=>{if(!(p&&!(0,o.v3)(p.value,l)))return g(p?.value)},[l,g]),h=f.find(p=>p.value===r);return t.createElement(t.Fragment,null,t.createElement(n.l6,{value:h,placeholder:i.placeholderText??"Select field",options:f,onChange:c,noOptionsMessage:i.noFieldsMessage,width:i.width,isClearable:i.isClearable!==!1}))}},9988:(Y,A,e)=>{"use strict";e.d(A,{bx:()=>d,cH:()=>f});var t=e(96540),n=e(11261),o=e(1173),s=e(85200),r=e(4025),g=e(88323);const u=(0,t.memo)(c=>{const{data:h,options:p,onChange:m,id:a}=c,v=i(h),E=l(v,p),D=(0,t.useCallback)(P=>m(P.value),[m]),b=E.find(P=>P.value===p);return t.createElement(g.l6,{inputId:a,value:b,options:E,onChange:D})});u.displayName="FieldTypeMatcherEditor";const d=[{value:n.PU.number,label:"Number",icon:(0,r.lV)(n.PU.number)},{value:n.PU.string,label:"String",icon:(0,r.lV)(n.PU.string)},{value:n.PU.time,label:"Time",icon:(0,r.lV)(n.PU.time)},{value:n.PU.boolean,label:"Boolean",icon:(0,r.lV)(n.PU.boolean)},{value:n.PU.trace,label:"Traces",icon:(0,r.lV)(n.PU.trace)},{value:n.PU.enum,label:"Enum",icon:(0,r.lV)(n.PU.enum)},{value:n.PU.other,label:"Other",icon:(0,r.lV)(n.PU.other)}],i=c=>(0,t.useMemo)(()=>{const h=new Map;for(const p of d)h.set(p.value,0);for(const p of c)for(const m of p.fields){const a=m.type||n.PU.other;let v=h.get(a);v||(v=0),h.set(a,v+1)}return h},[c]),l=(c,h)=>(0,t.useMemo)(()=>{let p=!1;const m=[];for(const a of d){const v=c.get(a.value),E=h===a.value;(v||E)&&m.push({...a,label:`${a.label} (${c.get(a.value)})`}),E&&(p=!0)}return h&&!p&&m.push({value:h,label:`${h} (No matches)`}),m},[c,h]),f={id:o.Ct.byType,component:u,matcher:s.sJ.get(o.Ct.byType),name:"Fields with type",description:"Set properties for fields of a specific type (number, string, boolean)",optionsToLabel:c=>c}},19346:(Y,A,e)=>{"use strict";e.d(A,{N:()=>l,r1:()=>p});var t=e(32196),n=e(96540),o=e(75059),s=e(1173),r=e(85200),g=e(52622),u=e(40845),d=e(10354),i=e(88323);const l=[{label:"==",value:g.zT.EQ},{label:"!=",value:g.zT.NEQ},{label:">",value:g.zT.GT},{label:">=",value:g.zT.GTE},{label:"<",value:g.zT.LT},{label:"<=",value:g.zT.LTE}];function f(m){return m===o.gy.allIsNull||m===o.gy.allIsZero}const c=({options:m,onChange:a})=>{const v=(0,u.of)(h),E=(0,n.useMemo)(()=>o.AS.selectOptions([m?.reducer]),[m?.reducer]),D=(0,n.useCallback)(M=>a({...m,reducer:M.value}),[m,a]),b=(0,n.useCallback)(M=>a({...m,op:M.value}),[m,a]),P=(0,n.useCallback)(M=>{const I=M.currentTarget.valueAsNumber;return a({...m,value:I})},[m,a]),y=m??{},T=f(m.reducer);return n.createElement("div",{className:v.spot},n.createElement(i.l6,{value:E.current,options:E.options,onChange:D,placeholder:"Select field reducer"}),y.reducer&&!T&&n.createElement(n.Fragment,null,n.createElement(i.l6,{value:l.find(M=>M.value===y.op),options:l,onChange:b,"aria-label":"Comparison operator",width:19}),n.createElement(d.p,{type:"number",value:y.value,onChange:P})))},h=m=>({spot:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"center",alignContent:"flex-end",gap:"4px"})}),p={id:s.Ct.byValue,component:c,matcher:r.sJ.get(s.Ct.byValue),name:"Fields with values",description:"Set properties for fields with reducer condition",optionsToLabel:m=>`${m?.reducer} ${m?.op} ${m?.value}`}},74668:(Y,A,e)=>{"use strict";e.d(A,{R:()=>l,X:()=>u});var t=e(96540),n=e(28240),o=e(1173),s=e(85200),r=e(88323);const g=(f,c,h)=>{if(!h)return;let p=f.find(m=>!c.some(a=>m===a));if(p)return p};function u({value:f,data:c,onChange:h,placeholder:p}){const m=(0,t.useMemo)(()=>d(c),[c]),[a,v]=(0,t.useState)({refIds:[],value:void 0}),E=(0,t.useMemo)(()=>m.find(b=>b.value===f)??g(m,a.refIds,a.value),[f,m,a]),D=(0,t.useCallback)(b=>{h(b?.value)},[h]);return(m!==a.refIds||E?.value!==a.value)&&v({refIds:m,value:E?.value}),t.createElement(r.l6,{options:m,onChange:D,isClearable:!0,placeholder:p??"Select query refId",value:E})}function d(f){const c=new Map;for(const p of f){const m=p.refId??"",a=c.get(m)??[];a.length===0&&c.set(m,a),a.push(p)}const h=[];for(const[p,m]of c.entries())h.push({value:p,label:`Query: ${p??"(missing refId)"}`,description:i(m)});return h}function i(f){return`Frames (${f.length}):
    ${f.slice(0,Math.min(3,f.length)).map(c=>(0,n.Ri)(c)).join(", ")} ${f.length>3?"...":""}`}const l={id:o.Ct.byFrameRefID,component:f=>t.createElement(u,{value:f.options,data:f.data,onChange:f.onChange}),matcher:s.sJ.get(o.Ct.byFrameRefID),name:"Fields returned by query",description:"Set properties for fields from a specific query",optionsToLabel:f=>f}},84349:(Y,A,e)=>{"use strict";e.d(A,{g:()=>v});var t=e(83077),n=e(96540),o=e(1173),s=e(85200),r=e(10354);const g=(0,n.memo)(E=>{const{options:D,onChange:b}=E,P=(0,n.useCallback)(y=>b(y.target.value),[b]);return n.createElement(r.p,{placeholder:"Enter regular expression",defaultValue:D,onBlur:P})});g.displayName="FieldNameByRegexMatcherEditor";const u={id:o.Ct.byRegexp,component:g,matcher:s.sJ.get(o.Ct.byRegexp),name:"Fields with name matching regex",description:"Set properties for fields with names matching a regex",optionsToLabel:E=>E};var d=e(88323),i=e(64278);const l=(0,n.memo)(E=>{const{data:D,options:b,onChange:P,id:y}=E,T=(0,i.sE)(D),M=(0,i.m3)(T,b),I=(0,n.useCallback)(S=>{if((0,i.v3)(S.value,T))return P(S.value)},[T,P]),x=M.find(S=>S.value===b);return n.createElement(d.l6,{value:x,options:M,onChange:I,inputId:y})});l.displayName="FieldNameMatcherEditor";const f={id:o.Ct.byName,component:l,matcher:s.sJ.get(o.Ct.byName),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:E=>E},c=(0,n.memo)(E=>{const{data:D,options:b,onChange:P}=E,{readOnly:y,prefix:T}=b,M=(0,i.sE)(D),I=(0,i.m3)(M,void 0),x=(0,n.useCallback)(S=>{if(Array.isArray(S))return P({...b,names:S.reduce((O,C)=>((0,i.v3)(C.value,M)&&O.push(C.value),O),[])})},[M,P,b]);if(y){const S=(b.names??[]).join(", ");return n.createElement(r.p,{value:S,readOnly:!0,disabled:!0,prefix:T})}return n.createElement(d.KF,{value:b.names,options:I,onChange:x})});c.displayName="FieldNameMatcherEditor";const h={id:o.Ct.byNames,component:c,matcher:s.sJ.get(o.Ct.byNames),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:E=>(E.names??[]).join(", "),excludeFromPicker:!0};var p=e(9988),m=e(19346),a=e(74668);const v=new t.O(()=>[f,u,p.cH,a.R,h,m.r1])},64278:(Y,A,e)=>{"use strict";e.d(A,{BP:()=>g,m3:()=>d,sE:()=>u,v3:()=>r});var t=e(96540),n=e(28240),o=e(27310),s=e(4025);function r(i,l){return i?l.display.has(i)||l.raw.has(i):!1}function g(i,l){const f={display:new Set,raw:new Set,fields:new Map};for(const c of i)for(const h of c.fields){if(l&&!l(h))continue;const p=(0,n.Ct)(h,c,i);f.display.add(p),f.fields.set(p,h),h.name&&p!==h.name&&(f.raw.add(h.name),f.fields.set(h.name,h))}return f}function u(i,l){return(0,t.useMemo)(()=>g(i,l),[i,l])}function d(i,l,f,c,h){return(0,t.useMemo)(()=>{let p=!1;const m=[];if(f&&m.push(f),h===o.X4.OnlyBaseNames)for(const a of i.raw)!p&&a===l&&(p=!0),m.push({value:a,label:`${a} (base field name)`});else{for(const a of i.display){!p&&a===l&&(p=!0);const v=i.fields.get(a);(!c||c===v?.type)&&m.push({value:a,label:a,icon:v?(0,s.SS)(v):void 0})}if(h!==o.X4.ExcludeBaseNames)for(const a of i.raw)i.display.has(a)||(!p&&a===l&&(p=!0),m.push({value:a,label:`${a} (base field name)`}))}return l&&!p&&m.push({value:l,label:`${l} (not found)`}),m},[i,l,f,c,h])}},38138:(Y,A,e)=>{"use strict";e.d(A,{W:()=>i});var t=e(32196),n=e(96540),o=e(40845),s=e(27183),r=e(59093),g=e(64539),u=e(32653);const d=n.forwardRef(({header:f,children:c,ariaLabel:h,onOpen:p,onClose:m,onKeyDown:a,...v},E)=>{const D=(0,o.of)(l),b=(0,n.useRef)(null);(0,n.useImperativeHandle)(E,()=>b.current);const[P]=(0,u.t)({localRef:b,onOpen:p,onClose:m,onKeyDown:a});return n.createElement("div",{...v,tabIndex:-1,ref:b,className:D.wrapper,role:"menu","aria-label":h,onKeyDown:P},f&&n.createElement("div",{className:(0,t.cx)(D.header,!!c&&n.Children.toArray(c).length>0&&D.headerBorder)},f),c)});d.displayName="Menu";const i=Object.assign(d,{Item:g.D,Divider:s.N,Group:r.r}),l=f=>({header:(0,t.css)({padding:`${f.spacing(.5,1,1,1)}`}),headerBorder:(0,t.css)({borderBottom:`1px solid ${f.colors.border.weak}`}),wrapper:(0,t.css)({background:`${f.colors.background.primary}`,boxShadow:`${f.shadows.z3}`,display:"inline-block",borderRadius:`${f.shape.radius.default}`,padding:`${f.spacing(.5,0)}`})})},27183:(Y,A,e)=>{"use strict";e.d(A,{N:()=>s});var t=e(32196),n=e(96540),o=e(40845);function s(){const g=(0,o.of)(r);return n.createElement("div",{className:g.divider})}const r=g=>({divider:(0,t.css)({height:1,backgroundColor:g.colors.border.weak,margin:g.spacing(.5,0)})})},59093:(Y,A,e)=>{"use strict";e.d(A,{r:()=>g});var t=e(32196),n=e(2543),o=e.n(n),s=e(96540),r=e(40845);const g=({label:d,ariaLabel:i,children:l})=>{const f=(0,r.of)(u),c=`group-label-${(0,n.uniqueId)()}`;return s.createElement("div",{role:"group","aria-labelledby":!i&&d?c:void 0,"aria-label":i},d&&s.createElement("label",{id:c,className:f.groupLabel,"aria-hidden":!0},d),l)};g.displayName="MenuGroup";const u=d=>({groupLabel:(0,t.css)({color:d.colors.text.secondary,fontSize:d.typography.size.sm,padding:d.spacing(.5,1)})})},64539:(Y,A,e)=>{"use strict";e.d(A,{D:()=>c});var t=e(32196),n=e(96540),o=e(40845),s=e(16797),r=e(14578),g=e(67061),u=e(13544),d=e(32653);const i=p=>{if(!p)return!1;const m=p.parentElement.getBoundingClientRect(),a=p.getBoundingClientRect();return a.width!==0&&m.right+a.width+10>window.innerWidth},l=n.memo(({items:p,isOpen:m,openedWithArrow:a,setOpenedWithArrow:v,close:E,customStyle:D})=>{const b=(0,o.of)(f),P=(0,n.useRef)(null),[y]=(0,d.t)({localRef:P,isMenuOpen:m,openedWithArrow:a,setOpenedWithArrow:v,close:E}),[T,M]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{m&&P.current&&M(i(P.current))},[m]),n.createElement(n.Fragment,null,n.createElement("div",{className:b.iconWrapper,"aria-hidden":!0,"data-testid":u.Tp.components.Menu.SubMenu.icon},n.createElement(r.I,{name:"angle-right",className:b.icon})),m&&n.createElement("div",{ref:P,className:(0,t.cx)(b.subMenu,{[b.pushLeft]:T}),"data-testid":u.Tp.components.Menu.SubMenu.container,style:D},n.createElement("div",{tabIndex:-1,className:b.itemsWrapper,role:"menu",onKeyDown:y},p)))});l.displayName="SubMenu";const f=p=>({iconWrapper:(0,t.css)({display:"flex",flex:1,justifyContent:"end"}),icon:(0,t.css)({opacity:.7,marginLeft:p.spacing(1),color:p.colors.text.secondary}),itemsWrapper:(0,t.css)({background:p.colors.background.primary,boxShadow:p.shadows.z3,display:"inline-block",borderRadius:p.shape.radius.default}),pushLeft:(0,t.css)({right:"100%",left:"unset"}),subMenu:(0,t.css)({position:"absolute",top:0,left:"100%",zIndex:p.zIndex.dropdown})}),c=n.memo(n.forwardRef((p,m)=>{const{url:a,icon:v,label:E,description:D,ariaLabel:b,ariaChecked:P,target:y,onClick:T,className:M,active:I,disabled:x,destructive:S,childItems:O,role:C="menuitem",tabIndex:L=-1,customSubMenuContainerStyles:U,shortcut:R,testId:B}=p,H=(0,o.of)(h),[W,N]=(0,n.useState)(I),[V,G]=(0,n.useState)(!1),[_,K]=(0,n.useState)(!1),j=(0,n.useCallback)(()=>{x||(G(!0),N(!0))},[x]),k=(0,n.useCallback)(()=>{x||(G(!1),N(!1))},[x]),Q=O&&O.length>0,ee=Q?"div":a===void 0?"button":"a",ae=(0,t.cx)({[H.item]:!0,[H.active]:W,[H.disabled]:x,[H.destructive]:S&&!x},M),Z={[ee==="button"?"disabled":"aria-disabled"]:x,...ee==="a"&&x&&{href:void 0,onClick:void 0},...x&&{tabIndex:-1,["data-disabled"]:x}},ne=(0,n.useRef)(null);(0,n.useImperativeHandle)(m,()=>ne.current);const q=de=>{switch(de.key){case"ArrowRight":de.preventDefault(),de.stopPropagation(),Q&&(G(!0),K(!0),N(!0));break;default:break}},te=()=>{G(!1),N(!1),ne?.current?.focus()},re=!!(R&&R.length>0);return n.createElement(ee,{target:y,className:ae,rel:y==="_blank"?"noopener noreferrer":void 0,href:a,onClick:T,onMouseEnter:j,onMouseLeave:k,onKeyDown:q,role:a===void 0?C:void 0,"data-role":"menuitem",ref:ne,"data-testid":B,"aria-label":b,"aria-checked":P,tabIndex:L,...Z},n.createElement(g.B,{direction:"row",justifyContent:"flex-start",alignItems:"center"},v&&n.createElement(r.I,{name:v,className:H.icon,"aria-hidden":!0}),n.createElement("span",{className:H.ellipsis},E),n.createElement("div",{className:(0,t.cx)(H.rightWrapper,{[H.withShortcut]:re})},re&&n.createElement("div",{className:H.shortcut},n.createElement(r.I,{name:"keyboard",title:"keyboard shortcut"}),R),Q&&n.createElement(l,{items:O,isOpen:V,openedWithArrow:_,setOpenedWithArrow:K,close:te,customStyle:U}))),D&&n.createElement("div",{className:(0,t.cx)(H.description,H.ellipsis,{[H.descriptionWithIcon]:v!==void 0})},D))}));c.displayName="MenuItem";const h=p=>({item:(0,t.css)({background:"none",cursor:"pointer",whiteSpace:"nowrap",color:p.colors.text.primary,display:"flex",flexDirection:"column",alignItems:"stretch",padding:p.spacing(.5,2),minHeight:p.spacing(4),margin:0,border:"none",width:"100%",position:"relative","&:hover, &:focus, &:focus-visible":{background:p.colors.action.hover,color:p.colors.text.primary,textDecoration:"none"},"&:focus-visible":(0,s.getFocusStyles)(p)}),active:(0,t.css)({background:p.colors.action.hover}),destructive:(0,t.css)({color:p.colors.error.text,svg:{color:p.colors.error.text},"&:hover, &:focus, &:focus-visible":{background:p.colors.error.main,color:p.colors.error.contrastText,svg:{color:p.colors.error.contrastText}}}),disabled:(0,t.css)({color:p.colors.action.disabledText,label:"menu-item-disabled","&:hover, &:focus, &:focus-visible":{cursor:"not-allowed",background:"none",color:p.colors.action.disabledText}}),icon:(0,t.css)({opacity:.7,color:p.colors.text.secondary}),rightWrapper:(0,t.css)({display:"flex",alignItems:"center",marginLeft:"auto"}),withShortcut:(0,t.css)({minWidth:p.spacing(10.5)}),shortcut:(0,t.css)({display:"flex",alignItems:"center",gap:p.spacing(1),marginLeft:p.spacing(2),color:p.colors.text.secondary,opacity:.7}),description:(0,t.css)({...p.typography.bodySmall,color:p.colors.text.secondary,textAlign:"start"}),descriptionWithIcon:(0,t.css)({marginLeft:p.spacing(3)}),ellipsis:(0,t.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})})},32653:(Y,A,e)=>{"use strict";e.d(A,{t:()=>r});var t=e(96540),n=e(94701);const o=(g,u)=>(g%u+u)%u,s=-1,r=({localRef:g,isMenuOpen:u,openedWithArrow:d,setOpenedWithArrow:i,close:l,onOpen:f,onClose:c,onKeyDown:h})=>{const[p,m]=(0,t.useState)(s);return(0,t.useEffect)(()=>{u&&d&&(m(0),i?.(!1))},[u,d,i]),(0,t.useEffect)(()=>{const v=g?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])');v?.[p]?.focus(),v?.forEach((E,D)=>{E.tabIndex=D===p?0:-1})},[g,p]),(0,n.A)(()=>{f?.(m)}),[v=>{const E=g?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])'),D=E?.length??0;switch(v.key){case"ArrowUp":v.preventDefault(),v.stopPropagation(),m(o(p-1,D));break;case"ArrowDown":v.preventDefault(),v.stopPropagation(),m(o(p+1,D));break;case"ArrowLeft":v.preventDefault(),v.stopPropagation(),m(s),l?.();break;case"Home":v.preventDefault(),v.stopPropagation(),m(0);break;case"End":v.preventDefault(),v.stopPropagation(),m(D-1);break;case"Enter":v.preventDefault(),v.stopPropagation(),E?.[p]?.click();break;case"Escape":c?.();break;case"Tab":v.preventDefault(),c?.();break;default:break}h?.(v)}]}},37390:(Y,A,e)=>{"use strict";e.d(A,{a:()=>c});var t=e(32196),n=e(80279),o=e(7887),s=e(82148),r=e(96540),g=e(40845),u=e(76412),d=e(29158),i=e(66864),l=e(29473),f=e(88448);function c(m){const{title:a,children:v,isOpen:E=!1,closeOnEscape:D=!0,closeOnBackdropClick:b=!0,className:P,contentClassName:y,onDismiss:T,onClickBackdrop:M,trapFocus:I=!0}=m,x=(0,g.of)(f.o),S=(0,r.useRef)(null),{overlayProps:O,underlayProps:C}=(0,s.e)({isKeyboardDismissDisabled:!D,isOpen:E,onClose:T},S),{dialogProps:L,titleProps:U}=(0,n.s)({},S);if(!E)return null;const R=(0,t.cx)(x.modalHeader,typeof a!="string"&&x.modalHeaderWithTabs);return r.createElement(s.Sf,null,r.createElement("div",{role:"presentation",className:x.modalBackdrop,onClick:M||(b?T:void 0),...C}),r.createElement(o.n1,{contain:I,autoFocus:!0,restoreFocus:!0},r.createElement("div",{className:(0,t.cx)(x.modal,P),ref:S,...O,...L},r.createElement("div",{className:R},typeof a=="string"&&r.createElement(p,{...m,title:a,id:U.id}),typeof a!="string"&&a,r.createElement("div",{className:x.modalHeaderClose},r.createElement(d.K,{name:"times",size:"xl",onClick:T,"aria-label":(0,u.t)("grafana-ui.modal.close-tooltip","Close")}))),r.createElement("div",{className:(0,t.cx)(x.modalContent,y)},v))))}function h({leftItems:m,children:a}){const v=(0,g.of)(f.o);return m?r.createElement("div",{className:v.modalButtonRow},r.createElement(i.Gy,{justify:"space-between"},r.createElement(i.Gy,{justify:"flex-start",spacing:"md"},m),r.createElement(i.Gy,{justify:"flex-end",spacing:"md"},a))):r.createElement("div",{className:v.modalButtonRow},r.createElement(i.Gy,{justify:"flex-end",spacing:"md",wrap:!0},a))}c.ButtonRow=h;function p({icon:m,iconTooltip:a,title:v,id:E}){return r.createElement(l.r,{icon:m,iconTooltip:a,title:v,id:E})}},29473:(Y,A,e)=>{"use strict";e.d(A,{r:()=>s});var t=e(96540),n=e(40845),o=e(88448);const s=({icon:r,iconTooltip:g,title:u,children:d,id:i})=>{const l=(0,n.of)(o.o);return t.createElement(t.Fragment,null,t.createElement("h2",{className:l.modalHeaderTitle,id:i},u),d)}},95246:(Y,A,e)=>{"use strict";e.d(A,{O:()=>n});var t=e(96540);const n=({children:o})=>t.createElement("div",{className:"share-modal-body"},t.createElement("div",{className:"share-modal-header"},t.createElement("div",{className:"share-modal-content"},o)))},25897:(Y,A,e)=>{"use strict";e.d(A,{J:()=>r});var t=e(96540),n=e(40675),o=e(63021),s=e(29473);const r=({icon:g,title:u,tabs:d,activeTab:i,onChangeTab:l})=>t.createElement(s.r,{icon:g,title:u},t.createElement(o.U,{hideBorder:!0},d.map((f,c)=>t.createElement(n.o,{key:`${f.value}-${c}`,label:f.label,icon:f.icon,suffix:f.tabSuffix,active:f.value===i,onChangeTab:()=>l(f)}))))},71678:(Y,A,e)=>{"use strict";e.d(A,{$s:()=>r,EO:()=>s,YO:()=>o,wE:()=>n});var t=e(96540);const n=t.createContext({component:null,props:{},showModal:()=>{},hideModal:()=>{}});class o extends t.Component{constructor(u){super(u),this.showModal=(d,i)=>{this.setState({component:d,props:i})},this.hideModal=()=>{this.setState({component:null,props:{}})},this.state={component:u.component||null,props:u.props||{},showModal:this.showModal,hideModal:this.hideModal}}render(){return t.createElement(n.Provider,{value:this.state},this.props.children)}}const s=()=>t.createElement(n.Consumer,null,({component:g,props:u})=>g?t.createElement(g,{...u}):null),r=n.Consumer},88448:(Y,A,e)=>{"use strict";e.d(A,{o:()=>n});var t=e(32196);const n=o=>{const s=o.shape.radius.default;return{modal:(0,t.css)({position:"fixed",zIndex:o.zIndex.modal,background:o.colors.background.primary,boxShadow:o.shadows.z3,borderRadius:s,border:`1px solid ${o.colors.border.weak}`,backgroundClip:"padding-box",outline:"none",width:"750px",maxWidth:"100%",left:0,right:0,marginLeft:"auto",marginRight:"auto",top:"10%",maxHeight:"80%",display:"flex",flexDirection:"column"}),modalBackdrop:(0,t.css)({position:"fixed",zIndex:o.zIndex.modalBackdrop,top:0,right:0,bottom:0,left:0,backgroundColor:o.components.overlay.background,backdropFilter:"blur(1px)"}),modalHeader:(0,t.css)({label:"modalHeader",display:"flex",alignItems:"center",minHeight:"42px",margin:o.spacing(1,2,0,2)}),modalHeaderWithTabs:(0,t.css)({borderBottom:`1px solid ${o.colors.border.weak}`}),modalHeaderTitle:(0,t.css)({fontSize:o.typography.size.lg,margin:o.spacing(0,4,0,1),display:"flex",alignItems:"center",position:"relative",top:"2px"}),modalHeaderIcon:(0,t.css)({marginRight:o.spacing(2),fontSize:"inherit","&:before":{verticalAlign:"baseline"}}),modalHeaderClose:(0,t.css)({height:"100%",display:"flex",alignItems:"center",color:o.colors.text.secondary,flexGrow:1,justifyContent:"flex-end"}),modalContent:(0,t.css)({overflow:"auto",padding:o.spacing(3),width:"100%"}),modalButtonRow:(0,t.css)({paddingTop:o.spacing(3)})}}},32372:(Y,A,e)=>{"use strict";e.d(A,{B:()=>h});var t=e(32196),n=e(96540),o=e(96915),s=e(13544),r=e(40845),g=e(85828),u=e(19716);function d(m){for(let a=m.length-1;a>0;a--){const v=m.charAt(a);if(v==="$")return{index:a,prefix:m.substring(a)};if(v===" "||v==="	"||v==='"'||v==="'")return{index:a+1,prefix:m.substring(a+1)}}return{index:0,prefix:m}}function i(m,a,v,E){const D=[];for(const b of v)a&&!b.label.startsWith(a)||D.push({...b,kind:l(m,b.kind),range:E,insertText:b.insertText??b.label});return D}function l(m,a){switch(a){case u.q.Method:return m.languages.CompletionItemKind.Method;case u.q.Field:return m.languages.CompletionItemKind.Field;case u.q.Property:return m.languages.CompletionItemKind.Property;case u.q.Constant:return m.languages.CompletionItemKind.Constant;case u.q.Text:return m.languages.CompletionItemKind.Text}return m.languages.CompletionItemKind.Text}function f(m,a,v,E){if(!(!a||!v))return m.languages.registerCompletionItemProvider(a,{triggerCharacters:["$"],provideCompletionItems:(D,b,P)=>{if(D.id!==E)return;const y={startLineNumber:b.lineNumber,endLineNumber:b.lineNumber,startColumn:b.column,endColumn:b.column};if(P.triggerCharacter==="$")return y.startColumn=b.column-1,{suggestions:i(m,"$",v(),y)};const T=D.getValueInRange({startLineNumber:b.lineNumber,startColumn:1,endLineNumber:b.lineNumber,endColumn:b.column}),{index:M,prefix:I}=d(T);y.startColumn=M+1;const x=i(m,I,v(),y);if(x.length)return{suggestions:x}}})}class c extends n.PureComponent{constructor(a){super(a),this.loadCustomLanguage=()=>{const{language:v}=this.props,E=o.l.getIfExists(v);return E?E.init():Promise.resolve()},this.getEditorValue=()=>"",this.onBlur=()=>{const{onBlur:v}=this.props;v&&v(this.getEditorValue())},this.onFocus=()=>{const{onFocus:v}=this.props;v&&v(this.getEditorValue())},this.onSave=()=>{const{onSave:v}=this.props;v&&v(this.getEditorValue())},this.handleBeforeMount=v=>{this.monaco=v;const{onBeforeEditorMount:E}=this.props;E?.(v)},this.handleOnMount=(v,E)=>{const{getSuggestions:D,language:b,onChange:P,onEditorDidMount:y}=this.props;this.modelId=v.getModel()?.id,this.getEditorValue=()=>v.getValue(),D&&this.modelId&&(this.completionCancel=f(E,b,D,this.modelId)),v.onKeyDown(M=>{M.keyCode===E.KeyCode.KeyS&&(M.ctrlKey||M.metaKey)&&(M.preventDefault(),this.onSave())});const T=this.loadCustomLanguage();P&&v.getModel()?.onDidChangeContent(()=>P(v.getValue())),y&&T.then(()=>y(v,E))}}componentWillUnmount(){this.completionCancel&&this.completionCancel.dispose(),this.props.onEditorWillUnmount?.()}componentDidUpdate(a){const{getSuggestions:v,language:E}=this.props,D=a.language!==E;if(a.getSuggestions!==v||D){if(this.completionCancel&&this.completionCancel.dispose(),!this.monaco){console.warn("Monaco instance not loaded yet");return}v&&this.modelId&&(this.completionCancel=f(this.monaco,E,v,this.modelId))}D&&this.loadCustomLanguage()}render(){const{theme:a,language:v,width:E,height:D,showMiniMap:b,showLineNumbers:P,readOnly:y,monacoOptions:T}=this.props,{alwaysConsumeMouseWheel:M,...I}=T??{},x=this.props.value??"",S=x.length>100,O=this.props.containerStyles??p(a).container,C={wordWrap:"off",tabSize:2,codeLens:!1,contextmenu:!1,minimap:{enabled:S&&b,renderCharacters:!1},readOnly:y,lineNumbersMinChars:4,lineDecorationsWidth:1*a.spacing.gridSize,overviewRulerBorder:!1,automaticLayout:!0,padding:{top:.5*a.spacing.gridSize,bottom:.5*a.spacing.gridSize},fixedOverflowWidgets:!0,scrollbar:{alwaysConsumeMouseWheel:M??!1}};return P||(C.glyphMargin=!1,C.folding=!1,C.lineNumbers="off",C.lineNumbersMinChars=0),n.createElement("div",{className:O,onFocus:this.onFocus,onBlur:this.onBlur,"data-testid":s.Tp.components.CodeEditor.container},n.createElement(g.m,{width:E,height:D,language:v,value:x,options:{...C,...I??{}},beforeMount:this.handleBeforeMount,onMount:this.handleOnMount,keepCurrentModel:!0}))}}const h=(0,r.cV)(c),p=m=>({container:(0,t.css)({borderRadius:m.shape.radius.default,border:`1px solid ${m.components.input.borderColor}`})})},85828:(Y,A,e)=>{"use strict";e.d(A,{m:()=>g});var t=e(96540),n=e(16817);const o=u=>{const d=(0,n.A)(async()=>await u);return{...d,dependency:d.value}};var s=e(52446),r=e(39558);const g=u=>{const{loading:d,error:i,dependency:l}=o(e.e(8926).then(e.bind(e,16556)));if(d)return t.createElement(r._,{text:""});if(i)return t.createElement(s.D,{title:"React Monaco Editor failed to load",error:i,errorInfo:{componentStack:i?.stack||""}});const f=l.ReactMonacoEditor;return t.createElement(f,{...u})}},19716:(Y,A,e)=>{"use strict";e.d(A,{q:()=>t});var t=(n=>(n.Method="method",n.Field="field",n.Property="property",n.Constant="constant",n.Text="text",n))(t||{})},99544:(Y,A,e)=>{"use strict";e.d(A,{O:()=>n});var t=e(19716);function n(o){const s="${"+o.value+"}",r=o.value===o.label?o.origin:`${o.label} / ${o.origin}`;return{label:s,kind:t.q.Property,detail:r,documentation:o.documentation}}},95247:(Y,A,e)=>{"use strict";e.d(A,{d:()=>l});var t=e(32196),n=e(96540),o=e(13544),s=e(40845),r=e(16797),g=e(14578),u=e(29158),d=e(50720),i=e(15068);const l=n.memo(({title:c,section:h,parent:p,pageIcon:m,onGoBack:a,children:v,titleHref:E,parentHref:D,leftItems:b,isFullscreen:P,className:y,"aria-label":T,buttonOverflowAlignment:M="right",forceShowLeftItems:I=!1})=>{const x=(0,s.of)(f),S=(0,t.cx)("page-toolbar",x.toolbar,{["page-toolbar--fullscreen"]:P,[x.noPageIcon]:!m},y),O=n.createElement(n.Fragment,null,n.createElement("span",{className:x.truncateText},c),h&&n.createElement("span",{className:x.pre}," / ",h));return n.createElement("nav",{className:S,"aria-label":T},n.createElement("div",{className:x.leftWrapper},m&&!a&&n.createElement("div",{className:x.pageIcon},n.createElement(g.I,{name:m,size:"lg","aria-hidden":!0})),a&&n.createElement("div",{className:x.pageIcon},n.createElement(u.K,{name:"arrow-left",tooltip:"Go back (Esc)",tooltipPlacement:"bottom",size:"xxl","data-testid":o.Tp.components.BackButton.backArrow,onClick:a})),n.createElement("nav",{"aria-label":"Search links",className:x.navElement},p&&D&&n.createElement(n.Fragment,null,n.createElement(d.N,{"aria-label":`Search dashboard in the ${p} folder`,className:(0,t.cx)(x.titleText,x.parentLink,x.titleLink,x.truncateText),href:D},p," ",n.createElement("span",{className:x.parentIcon})),E&&n.createElement("span",{className:(0,t.cx)(x.titleText,x.titleDivider),"aria-hidden":!0},"/")),(c||!!b?.length)&&n.createElement("div",{className:x.titleWrapper},c&&n.createElement("h1",{className:x.h1Styles},E?n.createElement(d.N,{"aria-label":"Search dashboard by name",className:(0,t.cx)(x.titleText,x.titleLink),href:E},O):n.createElement("div",{className:x.titleText},O)),b?.map((C,L)=>n.createElement("div",{className:(0,t.cx)(x.leftActionItem,{[x.forceShowLeftActionItems]:I}),key:L},C))))),n.createElement(i.U,{alignment:M},n.Children.toArray(v).filter(Boolean)))});l.displayName="PageToolbar";const f=c=>{const{spacing:h,typography:p}=c,m=(0,r.getFocusStyles)(c);return{pre:(0,t.css)({whiteSpace:"pre"}),toolbar:(0,t.css)({alignItems:"center",background:c.colors.background.canvas,display:"flex",gap:c.spacing(2),justifyContent:"space-between",padding:c.spacing(1.5,2),[c.breakpoints.down("md")]:{paddingLeft:"53px"}}),noPageIcon:(0,t.css)({[c.breakpoints.down("md")]:{paddingLeft:c.spacing(2)}}),leftWrapper:(0,t.css)({display:"flex",flexWrap:"nowrap",maxWidth:"70%"}),pageIcon:(0,t.css)({display:"none",[c.breakpoints.up("sm")]:{display:"flex",paddingRight:c.spacing(1),alignItems:"center"}}),truncateText:(0,t.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),titleWrapper:(0,t.css)({display:"flex",margin:0,minWidth:0}),navElement:(0,t.css)({display:"flex",alignItems:"center",minWidth:0}),h1Styles:(0,t.css)({margin:h(0,1,0,0),lineHeight:"inherit",flexGrow:1,minWidth:0}),parentIcon:(0,t.css)({marginLeft:c.spacing(.5)}),titleText:(0,t.css)({display:"flex",fontSize:p.size.lg,margin:0,borderRadius:c.shape.radius.default}),titleLink:(0,t.css)({"&:focus-visible":m}),titleDivider:(0,t.css)({padding:h(0,.5,0,.5),display:"none",[c.breakpoints.up("md")]:{display:"unset"}}),parentLink:(0,t.css)({display:"none",[c.breakpoints.up("md")]:{display:"unset",flex:1}}),leftActionItem:(0,t.css)({display:"none",alignItems:"center",paddingRight:h(.5),[c.breakpoints.up("md")]:{display:"flex"}}),forceShowLeftActionItems:(0,t.css)({display:"flex"})}}},19384:(Y,A,e)=>{"use strict";e.d(A,{d:()=>g});var t=e(32196),n=e(96540),o=e(40845),s=e(55852),r=e(14578);const g=({currentPage:d,numberOfPages:i,onNavigate:l,hideWhenSinglePage:f,showSmallVersion:c,className:h})=>{const p=(0,o.of)(u),m=c?1:8,a=(0,n.useMemo)(()=>{const v=[...new Array(i).keys()],E=i>m,D=(b,P)=>n.createElement("li",{key:b,className:p.item},n.createElement(s.$n,{size:"sm",variant:P,onClick:()=>l(b)},b));return v.reduce((b,P)=>{const y=P+1,T=y===d?"primary":"secondary",M=m,I=i-m+1,x=I-M,S=y===1||y===i,O=x>-1&&d>=M&&d<=I,C=c?1:3,L=c?0:2;return E?S||d<M&&y<M||x>=0&&d>I&&y>I||x<0&&d>=M&&y>I||O&&y>=d-L&&y<=d+L?b.push(D(y,T)):(y===M&&d<M||y===I&&d>I||O&&(y===d-C||y===d+C))&&b.push(n.createElement("li",{key:y,className:p.item},n.createElement(r.I,{className:p.ellipsis,name:"ellipsis-v"}))):b.push(D(y,T)),b},[])},[d,i,l,m,c,p.ellipsis,p.item]);return f&&i<=1?null:n.createElement("div",{className:(0,t.cx)(p.container,h)},n.createElement("ol",null,n.createElement("li",{className:p.item},n.createElement(s.$n,{"aria-label":"previous page",size:"sm",variant:"secondary",onClick:()=>l(d-1),disabled:d===1},n.createElement(r.I,{name:"angle-left"}))),a,n.createElement("li",{className:p.item},n.createElement(s.$n,{"aria-label":"next page",size:"sm",variant:"secondary",onClick:()=>l(d+1),disabled:d===i},n.createElement(r.I,{name:"angle-right"})))))},u=()=>({container:(0,t.css)({float:"right"}),item:(0,t.css)({display:"inline-block",paddingLeft:"10px",marginBottom:"5px"}),ellipsis:(0,t.css)({transform:"rotate(90deg)"})})},89963:(Y,A,e)=>{"use strict";e.d(A,{I:()=>u});var t=e(32196),n=e(96540),o=e(13544),s=e(40845),r=e(14578),g=e(56034);const u=({onCancel:i,loading:l})=>{const f=(0,s.of)(d);return l?n.createElement(g.m,{content:"Cancel query"},n.createElement(r.I,{className:(0,t.cx)("spin-clockwise",{[f.clickable]:!!i}),name:"sync",size:"sm",onClick:i,"data-testid":o.Tp.components.LoadingIndicator.icon})):null},d=()=>({clickable:(0,t.css)({cursor:"pointer"})})},79041:(Y,A,e)=>{"use strict";e.d(A,{XF:()=>s,d2:()=>r,e4:()=>o});var t=e(96540),n=e(18226);const o=t.createContext({eventsScope:"global",eventBus:new n.o}),s=o.Provider,r=()=>t.useContext(o)},91052:(Y,A,e)=>{"use strict";e.d(A,{NR:()=>U});var t=e(89963),n=e(32196),o=e(96540),s=e(42941),r=e(49185),g=e(39070),u=e(13544),d=e(40845),i=e(16797);function l({children:R,delay:B}){const[H,W]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{window.setTimeout(()=>{W(!0)},B)},[R,B]),o.createElement(o.Fragment,null,H?R:null)}var f=e(14578),c=e(57514),h=e(56034),p=e(83122),m=e(27746);function a({menu:R,title:B,placement:H="bottom",offset:W,dragClassCancel:N,menuButtonClass:V,onOpenMenu:G}){const _=B?u.Tp.components.Panels.Panel.menu(B):"panel-menu-button",K=(0,o.useCallback)(j=>{j&&G&&G()},[G]);return o.createElement(p.m,{overlay:R,placement:H,offset:W,onVisibleChange:K},o.createElement(m.I,{"aria-label":`Menu for panel with ${B?`title ${B}`:"no title"}`,title:"Menu",icon:"ellipsis-v",iconSize:"md",narrow:!0,"data-testid":_,className:(0,n.cx)(V,N)}))}function v({menu:R,title:B,dragClass:H,children:W,offset:N=-32,onOpenMenu:V}){const G=(0,d.of)(E),_=(0,o.useRef)(null),K=u.Tp.components.Panels.Panel.HoverWidget,j=(0,o.useCallback)(Q=>{_.current?.setPointerCapture(Q.pointerId)},[]),k=(0,o.useCallback)(Q=>{_.current?.releasePointerCapture(Q.pointerId)},[]);return W===void 0||o.Children.count(W)===0?null:o.createElement("div",{className:(0,n.cx)(G.container,"show-on-hover"),style:{top:N},"data-testid":K.container},H&&o.createElement("div",{className:(0,n.cx)(G.square,G.draggable,H),onPointerDown:j,onPointerUp:k,ref:_,"data-testid":K.dragIcon},o.createElement(f.I,{name:"expand-arrows",className:G.draggableIcon})),W,R&&o.createElement(a,{menu:R,title:B,placement:"bottom",menuButtonClass:G.menuButton,onOpenMenu:V}))}function E(R){return{container:(0,n.css)({label:"hover-container-widget",transition:"all .1s linear",display:"flex",position:"absolute",zIndex:1,right:0,boxSizing:"content-box",alignItems:"center",background:R.colors.background.secondary,color:R.colors.text.primary,border:`1px solid ${R.colors.border.weak}`,borderRadius:R.shape.radius.default,height:R.spacing(4),boxShadow:R.shadows.z1}),square:(0,n.css)({display:"flex",justifyContent:"center",alignItems:"center",width:R.spacing(4),height:"100%"}),draggable:(0,n.css)({cursor:"move",[R.breakpoints.down("md")]:{display:"none"}}),menuButton:(0,n.css)({background:"inherit",border:"none","&:hover":{background:R.colors.secondary.main}}),draggableIcon:(0,n.css)({transform:"rotate(45deg)",color:R.colors.text.secondary,"&:hover":{color:R.colors.text.primary}})}}var D=e(55852);const b=(0,o.forwardRef)(({className:R,children:B,href:H,onClick:W,target:N,title:V,...G},_)=>{const K=(0,d.of)(P);return H?o.createElement("a",{ref:_,href:H,onClick:W,target:N,title:V,className:(0,n.cx)(K.linkItem,R),...G},B):W?o.createElement(D.$n,{ref:_,className:(0,n.cx)(K.item,R),variant:"secondary",fill:"text",onClick:W},B):o.createElement("span",{ref:_,className:(0,n.cx)(K.item,R),...G},B)});b.displayName="TitleItem";const P=R=>{const B=(0,n.css)({color:`${R.colors.text.secondary}`,label:"panel-header-item",cursor:"auto",border:"none",borderRadius:`${R.shape.radius.default}`,padding:`${R.spacing(0,1)}`,height:`${R.spacing(R.components.panel.headerHeight)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,i.getFocusStyles)(R),zIndex:1},"&: focus:not(:focus-visible)":(0,i.getMouseFocusStyles)(R),"&:hover ":{boxShadow:`${R.shadows.z1}`,background:`${R.colors.background.secondary}`,color:`${R.colors.text.primary}`}});return{item:B,linkItem:(0,n.cx)(B,(0,n.css)({cursor:"pointer"}))}};function y({description:R,className:B}){const H=(0,d.of)(T),W=()=>{const N=typeof R=="function"?R():R;return o.createElement("div",{className:"panel-info-content markdown-html"},o.createElement("div",{dangerouslySetInnerHTML:{__html:N}}))};return R!==""?o.createElement(h.m,{interactive:!0,content:W},o.createElement(b,{className:(0,n.cx)(B,H.description)},o.createElement(f.I,{name:"info-circle",size:"md"}))):null}const T=R=>({description:(0,n.css)({code:{whiteSpace:"normal",wordWrap:"break-word"},"pre > code":{display:"block"}})});function M({message:R,onClick:B,ariaLabel:H="status"}){const W=(0,d.of)(I);return o.createElement(m.I,{className:W.buttonStyles,onClick:B,variant:"destructive",icon:"exclamation-triangle",iconSize:"md",tooltip:R||"","aria-label":H,"data-testid":u.Tp.components.Panels.Panel.status("error")})}const I=R=>{const{headerHeight:B,padding:H}=R.components.panel;return{buttonStyles:(0,n.css)({label:"panel-header-state-button",display:"flex",alignItems:"center",justifyContent:"center",padding:R.spacing(H),width:R.spacing(B),height:R.spacing(B),borderRadius:R.shape.radius.default})}};function x({width:R,height:B,children:H,padding:W="md",title:N="",description:V="",displayMode:G="default",titleItems:_,menu:K,dragClass:j,dragClassCancel:k,hoverHeader:Q=!1,hoverHeaderOffset:ee,loadingState:ae,statusMessage:Z,statusMessageOnClick:ne,leftItems:q,actions:te,onCancelQuery:re,onOpenMenu:de,collapsible:ie=!1,collapsed:ge,onToggleCollapse:ve}){const ye=(0,d.$j)(),pe=(0,d.of)(L),le=(0,o.useId)(),Me=!Q,[De,Re]=(0,s.A)(!0);ge===void 0&&(ge=!De);const me="show-on-hover",he=G==="transparent",Te=O(ye,Me),{contentStyle:Be,innerWidth:we,innerHeight:Ne}=C(W,ye,Te,ge,B,R),Ze={height:Te,cursor:j?"move":"auto"},st={width:R,height:ge?void 0:B},[Qe,{width:ke}]=(0,r.A)();q&&(te=q);const je=typeof N=="string"?u.Tp.components.Panels.Panel.title(N):"Panel",He=o.createElement(o.Fragment,null,!ie&&N&&o.createElement("h6",{title:typeof N=="string"?N:void 0,className:pe.title},N),ie&&o.createElement("h6",{className:pe.title},o.createElement("button",{type:"button",className:pe.clearButtonStyles,onClick:()=>{Re(),ve&&ve(!ge)},"aria-expanded":!ge,"aria-controls":ge?void 0:le},o.createElement(f.I,{name:ge?"angle-right":"angle-down","aria-hidden":!!N,"aria-label":N?void 0:"toggle collapse panel"}),N)),o.createElement("div",{className:(0,n.cx)(pe.titleItems,k),"data-testid":"title-items-container"},o.createElement(y,{description:V,className:k}),_),ae===g.Gu.Streaming&&o.createElement(h.m,{content:re?"Stop streaming":"Streaming"},o.createElement(b,{className:k,"data-testid":"panel-streaming",onClick:re},o.createElement(f.I,{name:"circle-mono",size:"md",className:pe.streaming}))),ae===g.Gu.Loading&&re&&o.createElement(l,{delay:2e3},o.createElement(h.m,{content:"Cancel query"},o.createElement(b,{className:(0,n.cx)(k,pe.pointer),"data-testid":"panel-cancel-query",onClick:re},o.createElement(f.I,{name:"sync-slash",size:"md"})))),o.createElement("div",{className:pe.rightAligned},te&&o.createElement("div",{className:pe.rightActions},S(te,Ge=>Ge))));return o.createElement("div",{className:(0,n.cx)(pe.container,{[pe.transparentContainer]:he}),style:st,"data-testid":je,tabIndex:0,ref:Qe},o.createElement("div",{className:pe.loadingBarContainer},ae===g.Gu.Loading?o.createElement(c.G,{width:ke,ariaLabel:"Panel loading bar"}):null),Q&&o.createElement(o.Fragment,null,o.createElement(v,{menu:K,title:typeof N=="string"?N:void 0,offset:ee,dragClass:j,onOpenMenu:de},He),Z&&o.createElement("div",{className:pe.errorContainerFloating},o.createElement(M,{message:Z,onClick:ne,ariaLabel:"Panel status"}))),Me&&o.createElement("div",{className:(0,n.cx)(pe.headerContainer,j),style:Ze,"data-testid":"header-container"},Z&&o.createElement("div",{className:k},o.createElement(M,{message:Z,onClick:ne,ariaLabel:"Panel status"})),He,K&&o.createElement(a,{menu:K,title:typeof N=="string"?N:void 0,placement:"bottom-end",menuButtonClass:(0,n.cx)(pe.menuItem,k,me),onOpenMenu:de})),!ge&&o.createElement("div",{id:le,className:(0,n.cx)(pe.content,B===void 0&&pe.containNone),style:Be},typeof H=="function"?H(we,Ne):H))}const S=(R,B)=>{const H=o.Children.toArray(R).filter(Boolean);return H.length>0?B(H):null},O=(R,B)=>B?R.spacing.gridSize*R.components.panel.headerHeight:0,C=(R,B,H,W,N,V)=>{const G=(R==="md"?B.components.panel.padding:0)*B.spacing.gridSize,_=G*2,K=1*2;let j=0;V&&(j=V-_-K);let k=0;return N&&(k=N-H-_-K),W&&(k=H),{contentStyle:{padding:G},innerWidth:j,innerHeight:k}},L=R=>{const{background:B,borderColor:H,padding:W}=R.components.panel;return{container:(0,n.css)({label:"panel-container",backgroundColor:B,border:`1px solid ${H}`,position:"relative",borderRadius:R.shape.radius.default,height:"100%",display:"flex",flexDirection:"column","> *":{zIndex:0},"&:hover, &:active, &:focus":{zIndex:R.zIndex.activePanel},".show-on-hover":{opacity:"0",visibility:"hidden"},"&:focus-visible, &:hover":{".show-on-hover":{opacity:"1",visibility:"visible"}},"&:focus-visible":(0,i.getFocusStyles)(R),"&:focus-within:not(:focus)":{".show-on-hover":{visibility:"visible",opacity:"1"}}}),transparentContainer:(0,n.css)({label:"panel-transparent-container",backgroundColor:"transparent",border:"1px solid transparent",boxSizing:"border-box","&:hover":{border:`1px solid ${H}`}}),loadingBarContainer:(0,n.css)({label:"panel-loading-bar-container",position:"absolute",top:0,width:"100%"}),containNone:(0,n.css)({contain:"none"}),content:(0,n.css)({label:"panel-content",flexGrow:1,contain:"size layout"}),headerContainer:(0,n.css)({label:"panel-header",display:"flex",alignItems:"center"}),pointer:(0,n.css)({cursor:"pointer"}),streaming:(0,n.css)({label:"panel-streaming",marginRight:0,color:R.colors.success.text,"&:hover":{color:R.colors.success.text}}),title:(0,n.css)({label:"panel-title",display:"flex",marginBottom:0,padding:R.spacing(0,W),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:R.typography.h6.fontSize,fontWeight:R.typography.h6.fontWeight}),items:(0,n.css)({display:"flex"}),item:(0,n.css)({display:"flex",justifyContent:"center",alignItems:"center"}),hiddenMenu:(0,n.css)({visibility:"hidden"}),menuItem:(0,n.css)({label:"panel-menu",border:"none",background:R.colors.secondary.main,"&:hover":{background:R.colors.secondary.shade}}),errorContainerFloating:(0,n.css)({label:"error-container",position:"absolute",left:0,top:0,zIndex:1}),rightActions:(0,n.css)({display:"flex",padding:R.spacing(0,W),gap:R.spacing(1)}),rightAligned:(0,n.css)({label:"right-aligned-container",marginLeft:"auto",display:"flex",alignItems:"center"}),titleItems:(0,n.css)({display:"flex",height:"100%"}),clearButtonStyles:(0,n.css)({alignItems:"center",display:"flex",gap:R.spacing(.5),background:"transparent",color:R.colors.text.primary,border:"none",padding:0,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:R.typography.h6.fontSize,fontWeight:R.typography.h6.fontWeight})}},U=x;U.LoadingIndicator=t.I,U.TitleItem=b},88895:(Y,A,e)=>{"use strict";e.d(A,{B:()=>t});var t=(n=>(n.ToggleSelection="select",n.AppendToSelection="append",n))(t||{})},52494:(Y,A,e)=>{"use strict";e.d(A,{_:()=>s});var t=e(32196),n=e(96540),o=e(40845);const s=({children:g,className:u,...d})=>{const i=(0,o.of)(r);return n.createElement("div",{className:(0,t.cx)(i,u),...d},g)},r=g=>(0,t.css)({backgroundColor:g.components.panel.background,border:`1px solid ${g.components.panel.borderColor}`,borderRadius:g.shape.radius.default})},98624:(Y,A,e)=>{"use strict";e.d(A,{B:()=>s});var t=e(96540),n=e(43429),o=e(39938);const s=({status:g,color:u,...d})=>{const i=r(g);return t.createElement(o.E,{text:i.text,color:i.color,icon:i.icon,tooltip:i.tooltip,...d})};s.displayName="PluginSignatureBadge";function r(g){switch(g||(g=n.Ac.invalid),g){case n.Ac.internal:return{text:"Core",color:"blue",tooltip:"Core plugin that is bundled with Grafana"};case n.Ac.valid:return{text:"Signed",icon:"lock",color:"green",tooltip:"Signed and verified plugin"};case n.Ac.invalid:return{text:"Invalid signature",icon:"exclamation-triangle",color:"red",tooltip:"Invalid plugin signature"};case n.Ac.modified:return{text:"Modified signature",icon:"exclamation-triangle",color:"red",tooltip:"Valid signature but content has been modified"};case n.Ac.missing:return{text:"Missing signature",icon:"exclamation-triangle",color:"red",tooltip:"Missing plugin signature"};default:return{text:"Unsigned",icon:"exclamation-triangle",color:"red",tooltip:"Unsigned external plugin"}}}},17464:(Y,A,e)=>{"use strict";e.d(A,{ZL:()=>s,gF:()=>r,qB:()=>g});var t=e(96540),n=e(40961),o=e(40845);function s(d){const{children:i,className:l,root:f,forwardedRef:c}=d,h=(0,o.$j)(),p=(0,t.useRef)(null),m=f??r();return p.current||(p.current=document.createElement("div"),l&&(p.current.className=l),p.current.style.position="relative",p.current.style.zIndex=`${h.zIndex.portal}`),(0,t.useLayoutEffect)(()=>(p.current&&m.appendChild(p.current),()=>{p.current&&m.removeChild(p.current)}),[m]),n.createPortal(t.createElement("div",{ref:c},i),p.current)}function r(){return window.document.getElementById("grafana-portal-container")??document.body}function g(){return t.createElement("div",{id:"grafana-portal-container"})}const u=t.forwardRef((d,i)=>t.createElement(s,{...d,forwardedRef:i}));u.displayName="RefForwardingPortal"},20084:(Y,A,e)=>{"use strict";e.d(A,{X:()=>P});var t=e(32196),n=e(46942),o=e.n(n),s=e(2543),r=e.n(s),g=e(96540),u=e(75226),d=e(29317),i=e(13544),l=e(80903),f=e(4269),c=e(88295),h=e(74738),p=e(31589),m=e(1020),a=e(99453),v=e(40845),E=e(16797),D=e(72307);class b extends g.PureComponent{constructor(M){super(M),this.lastExecutedValue=null,this.mounted=!1,this.editor=null,this.onChange=(C,L)=>{const U=C.document!==this.state.value.document,R=this.state.value;this.props.onRichValueChange&&this.props.onRichValueChange(C),this.setState({value:C},()=>{if(U){const B=u.A.serialize(R)!==u.A.serialize(C);B&&L&&this.runOnChangeAndRunQuery(),B&&!L&&this.runOnChangeDebounced()}})},this.runOnChange=()=>{const{onChange:C}=this.props,L=u.A.serialize(this.state.value);C&&C(this.cleanText(L))},this.runOnRunQuery=()=>{const{onRunQuery:C}=this.props;C&&(C(),this.lastExecutedValue=this.state.value)},this.runOnChangeAndRunQuery=()=>{this.runOnChange(),this.runOnRunQuery()},this.handleBlur=(C,L,U)=>{const{onBlur:R}=this.props;if(R)R();else{const B=this.lastExecutedValue?u.A.serialize(this.lastExecutedValue):"",H=u.A.serialize(L.value);B!==H&&this.runOnChangeAndRunQuery()}return U()},this.runOnChangeDebounced=(0,s.debounce)(this.runOnChange,500);const{onTypeahead:I,cleanText:x,portalOrigin:S,onWillApplySuggestion:O}=M;this.plugins=[(0,l.Pz)({onTypeahead:I,cleanText:x,portalOrigin:S,onWillApplySuggestion:O}),(0,f.U)({handler:this.runOnChangeAndRunQuery}),(0,c.O)(),(0,h.v)(),(0,p.l)(),(0,m.T)(),(0,a.s)(),...M.additionalPlugins||[]].filter(C=>C),this.state={suggestions:[],typeaheadContext:null,typeaheadPrefix:"",typeaheadText:"",value:(0,D.mO)(M.query||"",M.syntax)}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}componentDidUpdate(M,I){const{query:x,syntax:S,syntaxLoaded:O}=this.props;if(!M.syntaxLoaded&&O&&this.editor){const L=this.editor.insertText(" ").deleteBackward(1);this.onChange(L.value,!0)}const{value:C}=this.state;x!==M.query&&x!==u.A.serialize(C)&&this.setState({value:(0,D.mO)(x||"",S)})}cleanText(M){return M.replace(/[\r]/g,"")}render(){const{disabled:M,theme:I}=this.props,x=o()("slate-query-field__wrapper",{"slate-query-field__wrapper--disabled":M}),S=y(I);return g.createElement("div",{className:(0,t.cx)(x,S.wrapper)},g.createElement("div",{className:"slate-query-field","data-testid":i.Tp.components.QueryField.container},g.createElement(d.KE,{ref:O=>this.editor=O,schema:D.yx,autoCorrect:!1,readOnly:this.props.disabled,onBlur:this.handleBlur,onClick:this.props.onClick,onChange:O=>{this.onChange(O.value,!1)},placeholder:this.props.placeholder,plugins:this.plugins,spellCheck:!1,value:this.state.value})))}}const P=(0,v.cV)(b);P.defaultProps={onBlur:()=>{}};const y=T=>{const M=(0,E.getFocusStyles)(T);return{wrapper:(0,t.css)({"&:focus-within":M})}}},11134:(Y,A,e)=>{"use strict";e.d(A,{cC:()=>f,cb:()=>i});var t=e(91e3),n=e(96540),o=e(70416),s=e(13544),r=e(76412),g=e(19727),u=e(9261),d=e(27746);const i=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],l=class extends n.PureComponent{constructor(p){super(p),this.onChangeSelect=m=>{const{onIntervalChanged:a}=this.props;a&&m.value!=null&&a(m.value)}}getVariant(){return this.props.isLive?"primary":this.props.isLoading?"destructive":this.props.primary?"primary":this.props.isOnCanvas?"canvas":"default"}render(){const{onRefresh:p,intervals:m,tooltip:a,value:v,text:E,isLoading:D,noIntervalPicker:b,width:P,showAutoInterval:y}=this.props,T=v||"",M=this.getVariant(),I=h({intervals:m,showAutoInterval:y}),x=I.find(({value:N})=>N===T),S=c(l.offOption.value);let O=x||S;O.label===S.label&&(O={value:""});const C=O.ariaLabel,L=(0,r.t)("refresh-picker.aria-label.duration-selected","Choose refresh time interval with current interval {{durationAriaLabel}} selected",{durationAriaLabel:C}),U=(0,r.t)("refresh-picker.aria-label.choose-interval","Auto refresh turned off. Choose refresh time interval"),R=O.value===""?U:L,B=(0,r.t)("refresh-picker.tooltip.interval-selected","Set auto refresh interval"),H=(0,r.t)("refresh-picker.tooltip.turned-off","Auto refresh off"),W=O.value===""?H:B;return n.createElement(g.e,{className:"refresh-picker"},n.createElement(d.I,{"aria-label":E,tooltip:a,onClick:p,variant:M,icon:D?"spinner":"sync",style:P?{width:P}:void 0,"data-testid":s.Tp.components.RefreshPicker.runButtonV2},E),!b&&n.createElement(u.f,{value:O,options:I,onChange:this.onChangeSelect,variant:M,"data-testid":s.Tp.components.RefreshPicker.intervalButtonV2,"aria-label":R,tooltip:W}))}};let f=l;f.offOption={label:"Off",value:"",ariaLabel:"Turn off auto refresh"},f.liveOption={label:"Live",value:"LIVE",ariaLabel:"Turn on live streaming"},f.autoOption={label:"Auto",value:"auto",ariaLabel:"Select refresh from the query range"},f.isLive=p=>p===l.liveOption.value;function c(p){switch(p){case f.liveOption.value:return{label:(0,r.t)("refresh-picker.live-option.label","Live"),value:p,ariaLabel:(0,r.t)("refresh-picker.live-option.aria-label","Turn on live streaming")};case f.offOption.value:return{label:(0,r.t)("refresh-picker.off-option.label","Off"),value:p,ariaLabel:(0,r.t)("refresh-picker.off-option.aria-label","Turn off auto refresh")};case f.autoOption.value:return{label:(0,r.t)("refresh-picker.auto-option.label",f.autoOption.label),value:p,ariaLabel:(0,r.t)("refresh-picker.auto-option.aria-label",f.autoOption.ariaLabel)}}return{label:p,value:p}}function h({intervals:p=i,showAutoInterval:m=!1}={}){const a=p.map(v=>{const E=(0,o.E9)(v),D=(0,t.a)(E);return{label:v,value:v,ariaLabel:D}});return m&&a.unshift(c(f.autoOption.value)),a.unshift(c(f.offOption.value)),a}},44522:(Y,A,e)=>{"use strict";e.d(A,{I:()=>o});var t=e(96540),n=e(40672);function o({component:s,content:r,...g}){return t.createElement(s||"span",{dangerouslySetInnerHTML:{__html:n.sQ.sanitize(r)},...g})}},56286:(Y,A,e)=>{"use strict";e.d(A,{L:()=>d});var t=e(32196),n=e(2543),o=e.n(n),s=e(96540),r=e(55852),g=e(90090);const u=()=>({noRadiusInput:(0,t.css)({borderBottomRightRadius:"0 !important",borderTopRightRadius:"0 !important"}),noRadiusButton:(0,t.css)({borderBottomLeftRadius:"0 !important",borderTopLeftRadius:"0 !important"})}),d=({label:i="Password",labelWidth:l,inputWidth:f=12,onReset:c,isConfigured:h,tooltip:p,placeholder:m="Password",interactive:a,...v})=>{const E=u();return s.createElement(g.z,{label:i,tooltip:p,interactive:a,labelWidth:l,inputEl:h?s.createElement(s.Fragment,null,s.createElement("input",{type:"text",className:(0,t.cx)(`gf-form-input width-${f}`,E.noRadiusInput),disabled:!0,value:"configured",...(0,n.omit)(v,"value")}),s.createElement(r.$n,{onClick:c,variant:"secondary",type:"button"},"Reset")):s.createElement("input",{type:"password",className:`gf-form-input width-${f}`,placeholder:m,...v})})};d.displayName="SecretFormField"},9226:(Y,A,e)=>{"use strict";e.d(A,{L4:()=>u});var t=e(96540),n=e(55852),o=e(10354),s=e(67061);const r="configured",g="Reset",u=({isConfigured:d,onReset:i,...l})=>t.createElement(s.B,null,!d&&t.createElement(o.p,{...l,type:"password"}),d&&t.createElement(t.Fragment,null,t.createElement(o.p,{...l,type:"text",disabled:!0,value:r}),t.createElement(n.$n,{onClick:i,variant:"secondary"},g)))},49718:(Y,A,e)=>{"use strict";e.d(A,{L:()=>t.L4});var t=e(9226)},58724:(Y,A,e)=>{"use strict";e.d(A,{lp:()=>l});var t=e(32196),n=e(96540),o=e(40845),s=e(55852),r=e(66864),g=e(21744);const u="configured",d="Reset",i=f=>({configuredStyle:(0,t.css)({minHeight:f.spacing(f.components.height.md),paddingTop:f.spacing(.5),resize:"none"})}),l=({isConfigured:f,onReset:c,...h})=>{const p=(0,o.of)(i);return n.createElement(r.Gy,null,!f&&n.createElement(g.f,{...h}),f&&n.createElement(g.f,{...h,rows:1,disabled:!0,value:u,className:(0,t.cx)(p.configuredStyle)}),f&&n.createElement(s.$n,{onClick:c,variant:"secondary"},d))}},7968:(Y,A,e)=>{"use strict";e.d(A,{l:()=>t.lp});var t=e(58724)},38401:(Y,A,e)=>{"use strict";e.d(A,{Y:()=>l});var t=e(32196),n=e(2543),o=e.n(n),s=e(96540),r=e(40845),g=e(76892),u=e(13102),d=e(86997),i=e(2336);function l({options:f,value:c,onChange:h,Component:p,className:m,allowCustomValue:a,allowEmptyValue:v,placeholder:E,disabled:D,inputMinWidth:b,inputPlaceholder:P,onExpandedChange:y,autofocus:T=!1,...M}){const[I,x,S,O]=(0,i.Q)(T,y),C=b?Math.max(b,x):x,L=(0,r.of)(d.m);if(!S){const U=(0,n.isObject)(c)?c.label:c,R=U!=null?String(U):void 0;return s.createElement(I,{disabled:D,Component:p||s.createElement(g.c,{className:(0,t.cx)(L.segment,{[L.queryPlaceholder]:E!==void 0&&!c,[L.disabled]:D},m)},R||E)})}return s.createElement(u.a,{...M,value:c&&!(0,n.isObject)(c)?{value:c}:c,placeholder:P,options:f,width:C,onClickOutside:()=>O(!1),allowCustomValue:a,allowEmptyValue:v,onChange:U=>{O(!1),h(U)}})}},83684:(Y,A,e)=>{"use strict";e.d(A,{s:()=>c});var t=e(32196),n=e(2543),o=e.n(n),s=e(96540),r=e(41053),g=e(40845),u=e(76412),d=e(76892),i=e(13102),l=e(86997),f=e(2336);function c({value:p,onChange:m,loadOptions:a,reloadOptionsOnChange:v=!1,Component:E,className:D,allowCustomValue:b,allowEmptyValue:P,disabled:y,placeholder:T,inputMinWidth:M,inputPlaceholder:I,autofocus:x=!1,onExpandedChange:S,noOptionMessageHandler:O=h,...C}){const[L,U]=(0,r.A)(a,[a]),[R,B,H,W]=(0,f.Q)(x,S),N=M?Math.max(M,B):B,V=(0,g.of)(l.m);if(!H){const G=(0,n.isObject)(p)?p.label:p,_=G!=null?String(G):void 0;return s.createElement(R,{onClick:v?void 0:U,disabled:y,Component:E||s.createElement(d.c,{className:(0,t.cx)(V.segment,{[V.queryPlaceholder]:T!==void 0&&!p,[V.disabled]:y},D)},_||T)})}return s.createElement(i.a,{...C,value:p&&!(0,n.isObject)(p)?{value:p}:p,placeholder:I,options:L.value??[],loadOptions:v?U:void 0,width:N,noOptionsMessage:O(L),allowCustomValue:b,allowEmptyValue:P,onClickOutside:()=>{W(!1)},onChange:G=>{W(!1),m(G)}})}function h(p){return p.loading?(0,u.t)("grafana-ui.segment-async.loading","Loading options..."):p.error?(0,u.t)("grafana-ui.segment-async.error","Failed to load options"):(0,u.t)("grafana-ui.segment-async.no-options","No options found")}},57752:(Y,A,e)=>{"use strict";e.d(A,{o:()=>l});var t=e(32196),n=e(96540),o=e(37151),s=e(40845),r=e(29413),g=e(76892),u=e(86997),d=e(2336);const i=14;function l({value:f,onChange:c,Component:h,className:p,placeholder:m,inputPlaceholder:a,disabled:v,autofocus:E=!1,onExpandedChange:D,...b}){const P=(0,n.useRef)(null),[y,T]=(0,n.useState)(f),[M,I]=(0,n.useState)((0,r.kD)((f||"").toString(),i).width),[x,,S,O]=(0,d.Q)(E,D),C=(0,s.of)(u.m);if((0,o.A)(P,()=>{O(!1),c(y)}),!S)return n.createElement(x,{disabled:v,Component:h||n.createElement(g.c,{className:(0,t.cx)(C.segment,{[C.queryPlaceholder]:m!==void 0&&!y,[C.disabled]:v},p)},f||m)});const L=(0,t.css)({width:`${Math.max(M+20,32)}px`});return n.createElement("input",{...b,ref:P,autoFocus:!0,className:(0,t.cx)("gf-form gf-form-input",L),value:y,placeholder:a,onChange:U=>{const{width:R}=(0,r.kD)(U.target.value,i);I(R),T(U.target.value)},onBlur:()=>{O(!1),c(y)},onKeyDown:U=>{[13,27].includes(U.keyCode)&&(O(!1),c(y))}})}},64765:(Y,A,e)=>{"use strict";e.d(A,{L:()=>g});var t=e(32196),n=e(96540),o=e(40845),s=e(39268),r=e(76892);const g=({label:d,htmlFor:i,children:l,fill:f})=>{const c=(0,o.of)(u);return n.createElement(n.Fragment,null,n.createElement(s.C,null,n.createElement(r.c,{htmlFor:i,width:12,className:c.label},d),l,f&&n.createElement("div",{className:c.fill},n.createElement(r.c,null,""))))},u=d=>({label:(0,t.css)({color:d.colors.primary.text}),fill:(0,t.css)({flexGrow:1,marginBottom:d.spacing(.5)})})},13102:(Y,A,e)=>{"use strict";e.d(A,{a:()=>s});var t=e(96540),n=e(40845),o=e(88323);function s({value:r,placeholder:g="",options:u=[],onChange:d,onClickOutside:i,loadOptions:l=void 0,width:f,noOptionsMessage:c="",allowCustomValue:h=!1,allowEmptyValue:p=!1,...m}){const a=(0,t.useRef)(null),v=(0,n.$j)();let E=f>0?f/v.spacing.gridSize:void 0,D,b={};return l?(D=o.DW,b={loadOptions:l,defaultOptions:!0}):D=o.l6,t.createElement("div",{...m,ref:a},t.createElement(D,{width:E,noOptionsMessage:c,placeholder:g,autoFocus:!0,isOpen:!0,onChange:d,options:u,value:r,closeMenuOnSelect:!1,onCloseMenu:()=>{if(a&&a.current){const P=a.current.querySelector('input[id^="react-select-"]');P&&(P.value||p)?d({value:P.value,label:P.value}):i()}},allowCustomValue:h,...b}))}},86997:(Y,A,e)=>{"use strict";e.d(A,{m:()=>n});var t=e(32196);const n=o=>{const s="v1"in o?o.v1.palette:o.palette;return{segment:(0,t.css)({cursor:"pointer",width:"auto"}),queryPlaceholder:(0,t.css)({color:s.gray2}),disabled:(0,t.css)({cursor:"not-allowed",opacity:.65,boxShadow:"none"})}}},2336:(Y,A,e)=>{"use strict";e.d(A,{Q:()=>s});var t=e(96540),n=e(40845),o=e(55852);const s=(r,g)=>{const u=(0,t.useRef)(null),d=(0,n.of)(o.my),[i,l]=(0,t.useState)(r),[f,c]=(0,t.useState)(0),h=m=>{l(m),g&&g(m)};return[({Component:m,onClick:a,disabled:v})=>t.createElement("button",{type:"button",className:d,ref:u,disabled:v,onClick:()=>{h(!0),u&&u.current&&c(u.current.clientWidth*1.25),a?.()}},m),f,i,h]}},5342:(Y,A,e)=>{"use strict";e.d(A,{O:()=>r,p:()=>g});var t=e(96540),n=e(40845),o=e(29158),s=e(88824);const r=({innerProps:u,children:d})=>{const i=(0,n.$j)(),l=(0,s.J)(i);return t.createElement("div",{...u,className:l.multiValueContainer},d)},g=({children:u,innerProps:d})=>{const i=(0,n.$j)(),l=(0,s.J)(i);return t.createElement(o.K,{...d,name:"times",size:"sm",className:l.multiValueRemove,tooltip:"Remove"})}},88323:(Y,A,e)=>{"use strict";e.d(A,{Iv:()=>K,DW:()=>V,gZ:()=>_,KF:()=>N,l6:()=>W,KA:()=>D.K,ip:()=>G});var t=e(96540),n=e(72635),o=e(46005),s=e(8539),r=e(93943),g=e(66963),u=e(50877),d=e(40845),i=e(14578),l=e(62930);function f({selectProps:j}){const k=j.menuIsOpen,Q=k?"search":"angle-down",ee=k?"sm":"md";return t.createElement(i.I,{name:Q,size:ee})}var c=e(32196),h=e(10354);const p=t.forwardRef((j,k)=>{const{children:Q}=j,ee=(0,d.$j)(),ae=(0,h.n)({theme:ee,invalid:!1});return t.createElement("div",{className:(0,c.cx)(ae.suffix,(0,c.css)({position:"relative"})),ref:k},Q)});p.displayName="IndicatorsContainer";var m=e(87266);const a=t.forwardRef(function({focused:k,invalid:Q,disabled:ee,children:ae,innerProps:Z,prefix:ne,...q},te){const re=(0,d.of)(v,Q,!!ne);return t.createElement("div",{className:re.input,...Z,ref:te},ne&&t.createElement("div",{className:(0,c.cx)(re.prefix)},ne),ae)}),v=(j,k,Q)=>{const ee=(0,h.n)({theme:j,invalid:k});return{input:(0,c.cx)((0,m.g$)(j),(0,c.css)({width:"100%",maxWidth:"100%",display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"wrap",justifyContent:"space-between",paddingRight:0,position:"relative",boxSizing:"border-box"}),Q&&(0,c.css)({paddingLeft:0})),prefix:(0,c.cx)(ee.prefix,(0,c.css)({position:"relative"}))}};var E=e(5342),D=e(4603),b=e(12681),P=e(80970),y=e(62235),T=e(88824);class M extends t.Component{render(){const{children:k}=this.props,{selectProps:Q}=this.props;if(Q&&Array.isArray(k)&&Array.isArray(k[0])&&Q.maxVisibleValues!==void 0&&!(Q.showAllSelectedWhenOpen&&Q.menuIsOpen)){const[ee,...ae]=k,Z=ee.slice(0,Q.maxVisibleValues);return this.renderContainer([Z,...ae])}return this.renderContainer(k)}renderContainer(k){const{isMulti:Q,theme:ee,selectProps:ae}=this.props,Z=this.props.selectProps?.noMultiValueWrap&&!this.props.selectProps?.menuIsOpen,ne=(0,T.J)(ee),q=ae["data-testid"],te=(0,c.cx)(ne.valueContainer,Q&&ne.valueContainerMulti,Z&&ne.valueContainerMultiNoWrap);return t.createElement("div",{"data-testid":q,className:te},k)}}const I=(0,d.cV)(M);var x=e(23731);const S=(j,k)=>{if(Array.isArray(j)){const Q=j.filter(Boolean);return Q?.length?Q:void 0}if(typeof j=="object")return[j];if(typeof j=="string"||typeof j=="number"){const Q=O(j,k);if(Q)return[Q]}},O=(j,k)=>{for(const Q of k)if("options"in Q){let ee=O(j,Q.options);if(ee)return ee}else if("value"in Q&&Q.value===j)return Q;return null},C=j=>j.map(({description:k,...Q})=>Q),L=j=>{const{children:k,innerProps:Q,selectProps:{menuIsOpen:ee,onMenuClose:ae,onMenuOpen:Z},isFocused:ne,isMulti:q,getValue:te,innerRef:re}=j,de=j.selectProps;return de.renderControl?t.createElement(de.renderControl,{isOpen:ee,value:q?te():te()[0],ref:re,onClick:ee?ae:Z,onBlur:ae,disabled:!!de.disabled,invalid:!!de.invalid}):t.createElement(a,{ref:re,innerProps:Q,prefix:de.prefix,focused:ne,invalid:!!de.invalid,disabled:!!de.disabled},k)};function U({allowCustomValue:j=!1,allowCreateWhileLoading:k=!1,"aria-label":Q,"data-testid":ee,autoFocus:ae=!1,backspaceRemovesValue:Z=!0,blurInputOnSelect:ne,cacheOptions:q,className:te,closeMenuOnSelect:re=!0,components:de,createOptionPosition:ie="last",defaultOptions:ge,defaultValue:ve,disabled:ye=!1,filterOption:pe,formatCreateLabel:le,getOptionLabel:Me,getOptionValue:De,inputValue:Re,invalid:me,isClearable:he=!1,id:Te,isLoading:Be=!1,isMulti:we=!1,inputId:Ne,isOpen:Ze,isOptionDisabled:st,isSearchable:Qe=!0,loadOptions:ke,loadingMessage:je="Loading options...",maxMenuHeight:He=300,minMenuHeight:Ge,maxVisibleValues:Oe,menuPlacement:Ke="auto",menuPosition:Ee,menuShouldPortal:J=!0,noOptionsMessage:oe=(0,n.t)("grafana-ui.select.no-options-label","No options found"),onBlur:ue,onChange:be,onCloseMenu:Le,onCreateOption:_e,onInputChange:Ve,onKeyDown:We,onMenuScrollToBottom:$e,onMenuScrollToTop:it,onOpenMenu:at,onFocus:ht,openMenuOnFocus:ft=!1,options:gt=[],placeholder:Dt=(0,n.t)("grafana-ui.select.placeholder","Choose"),prefix:It,renderControl:jt,showAllSelectedWhenOpen:Vt=!0,tabSelectsValue:_t=!0,value:rt,virtualized:St=!1,noMultiValueWrap:pn,width:ct,isValidNewOption:Ct,formatOptionLabel:Yt,hideSelectedOptions:cn,...vn}){const rn=(0,d.$j)(),en=(0,T.J)(rn),mn=(0,t.useRef)(null),[Un,fn]=(0,t.useState)(!1),ca=(0,x.z)(rn,ct),[Lt,qt]=(0,t.useState)(!!Re);(0,t.useEffect)(()=>{if(ke&&Ze&&mn.current&&mn.current.controlRef&&Ke==="auto"){const An=window.innerHeight-mn.current.controlRef.getBoundingClientRect().bottom;fn(An<He)}},[He,Ke,ke,Ze]);const hn=(0,t.useCallback)((An,ta)=>{if(we&&An==null)return be([],ta);be(An,ta)},[we,be]);let Cn=o.Ay;const gn={};let xn={},Tn;if(we&&ke)Tn=rt;else if(we&&rt&&Array.isArray(rt)&&!ke)Tn=rt.map(An=>{const ta=O(An.value??An,gt);return!j||ta?ta:typeof An=="string"?(0,u.z)(An):An});else if(ke){const An=ve||rt;Tn=An?[An]:[]}else Tn=S(rt,gt);const Wn={"aria-label":Q,"data-testid":ee,autoFocus:ae,backspaceRemovesValue:Z,blurInputOnSelect:ne,captureMenuScroll:$e||it,closeMenuOnSelect:re,defaultValue:ve,disabled:ye,filterOption:Lt?pe:null,getOptionLabel:Me,getOptionValue:De,hideSelectedOptions:cn,inputValue:Re,invalid:me,isClearable:he,id:Te,isDisabled:ye,isLoading:Be,isMulti:we,inputId:Ne,isOptionDisabled:st,isSearchable:Qe,maxMenuHeight:He,minMenuHeight:Ge,maxVisibleValues:Oe,menuIsOpen:Ze,menuPlacement:Ke==="auto"&&Un?"top":Ke,menuPosition:Ee,menuShouldBlockScroll:!0,menuPortalTarget:J&&typeof document<"u"?document.body:void 0,menuShouldScrollIntoView:!1,onBlur:ue,onChange:hn,onInputChange:(An,ta)=>{qt(!!An),Ve?.(An,ta)},onKeyDown:We,onMenuClose:Le,onMenuOpen:at,onMenuScrollToBottom:$e,onMenuScrollToTop:it,onFocus:ht,formatOptionLabel:Yt,openMenuOnFocus:ft,options:St?C(gt):gt,placeholder:Dt,prefix:It,renderControl:jt,showAllSelectedWhenOpen:Vt,tabSelectsValue:_t,value:we?Tn:Tn?.[0],noMultiValueWrap:pn};j&&(Cn=g.A,gn.allowCreateWhileLoading=k,gn.formatCreateLabel=le??R,gn.onCreateOption=_e,gn.createOptionPosition=ie,gn.isValidNewOption=Ct),ke&&(Cn=j?r.A:s.A,xn={loadOptions:ke,cacheOptions:q,defaultOptions:ge});const Sn=St?b.zd:b.eB;return t.createElement(t.Fragment,null,t.createElement(Cn,{ref:mn,components:{MenuList:Sn,Group:P.n,ValueContainer:I,IndicatorsContainer:B,IndicatorSeparator:H,Control:L,Option:b.o5,ClearIndicator(An){const{clearValue:ta}=An;return t.createElement(i.I,{name:"times",role:"button","aria-label":"select-clear-value",className:en.singleValueRemove,onMouseDown:fa=>{fa.preventDefault(),fa.stopPropagation(),ta()}})},LoadingIndicator(){return t.createElement(l.y,{inline:!0})},LoadingMessage(){return t.createElement("div",{className:en.loadingMessage},je)},NoOptionsMessage(){return t.createElement("div",{className:en.loadingMessage,"aria-label":"No options provided"},oe)},DropdownIndicator:f,SingleValue(An){return t.createElement(y.K,{...An,isDisabled:ye})},SelectContainer:D.K,MultiValueContainer:E.O,MultiValueRemove:ye?()=>null:E.p,...de},styles:ca,className:te,...Wn,...gn,...xn,...vn}))}function R(j){return t.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"center"}},t.createElement("div",null,j),t.createElement("div",{style:{flexGrow:1}}),t.createElement("div",{className:"muted small",style:{display:"flex",gap:"8px",alignItems:"center"}},"Hit enter to add"))}function B(j){const{showAllSelectedWhenOpen:k,maxVisibleValues:Q,menuIsOpen:ee}=j.selectProps,ae=j.getValue();if(Q!==void 0&&Array.isArray(j.children)){const Z=ae.length;if(Z>Q&&!(k&&ee)){const ne=[...j.children];return ne.splice(-1,0,t.createElement("span",{key:"excess-values",id:"excess-values"},"(+",Z-Q,")")),t.createElement(p,{...j},ne)}}return t.createElement(p,{...j})}function H(){return t.createElement(t.Fragment,null)}function W(j){return t.createElement(U,{...j})}function N(j){return t.createElement(U,{...j,isMulti:!0})}function V(j){return t.createElement(U,{...j})}function G(j){return t.createElement(U,{virtualized:!0,...j})}function _(j){return t.createElement(U,{virtualized:!0,...j})}function K(j){return t.createElement(U,{...j,isMulti:!0})}},4603:(Y,A,e)=>{"use strict";e.d(A,{K:()=>d});var t=e(32196),n=e(96540),o=e(28581),s=e(40845),r=e(16797),g=e(87266),u=e(10354);const d=l=>{const{isDisabled:f,isFocused:c,children:h,selectProps:{invalid:p=!1}}=l,m=(0,s.of)(i,c,f,p);return n.createElement(o.c.SelectContainer,{...l,className:(0,t.cx)(m.wrapper,l.className)},h)},i=(l,f,c,h)=>{const p=(0,u.n)({theme:l,invalid:h});return{wrapper:(0,t.cx)(p.wrapper,(0,g.Xb)(l,h),f&&(0,t.css)((0,r.getFocusStyles)(l)),c&&p.inputDisabled,(0,t.css)({position:"relative",boxSizing:"border-box",flexDirection:"row",flexWrap:"wrap",alignItems:"stretch",justifyContent:"space-between",minHeight:"32px",height:"auto",maxWidth:"100%",padding:0,cursor:c?"not-allowed":"pointer"}))}}},12681:(Y,A,e)=>{"use strict";e.d(A,{eB:()=>f,o5:()=>m,zd:()=>p});var t=e(32196),n=e(2543),o=e.n(n),s=e(96540),r=e(91793),g=e(8887),u=e(40845),d=e(40276),i=e(14578),l=e(88824);const f=({children:a,maxHeight:v,innerRef:E,innerProps:D})=>{const b=(0,u.$j)(),P=(0,l.J)(b);return s.createElement("div",{...D,className:P.menu,style:{maxHeight:v},"aria-label":"Select options menu"},s.createElement(d.E,{scrollRefCallback:E,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0},a))};f.displayName="SelectMenu";const c=37,h=7,p=({children:a,maxHeight:v,options:E,getValue:D})=>{const b=(0,u.$j)(),P=(0,l.J)(b),[y]=D(),M=(y?E.findIndex(O=>O.value===y.value):0)*c;if(!Array.isArray(a))return null;const x=((0,n.max)(E.map(O=>O.label?.length))??0)*h,S=Math.min(E.length*c,v);return s.createElement(r.Y1,{className:P.menu,height:S,width:x,"aria-label":"Select options menu",itemCount:a.length,itemSize:c,initialScrollOffset:M},({index:O,style:C})=>s.createElement("div",{style:{...C,overflow:"hidden"}},a[O]))};p.displayName="VirtualizedSelectMenu";const m=({children:a,data:v,innerProps:E,innerRef:D,isFocused:b,isSelected:P,renderOptionLabel:y})=>{const T=(0,u.$j)(),M=(0,l.J)(T),I=v.icon?(0,g.Uo)(v.icon):void 0,{onMouseMove:x,onMouseOver:S,...O}=E;return s.createElement("div",{ref:D,className:(0,t.cx)(M.option,b&&M.optionFocused,P&&M.optionSelected,v.isDisabled&&M.optionDisabled),...O,"aria-label":"Select option",title:v.title},I&&s.createElement(i.I,{name:I,className:M.optionIcon}),v.imgUrl&&s.createElement("img",{className:M.optionImage,src:v.imgUrl,alt:v.label||String(v.value)}),s.createElement("div",{className:M.optionBody},s.createElement("span",null,y?y(v):a),v.description&&s.createElement("div",{className:M.optionDescription},v.description),v.component&&s.createElement(v.component,null)))};m.displayName="SelectMenuOptions"},80970:(Y,A,e)=>{"use strict";e.d(A,{n:()=>d});var t=e(32196),n=e(96540),o=e(3911),s=e(40845),r=e(14578);const g=(0,o.N)(i=>({header:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"flex-start",justifyItems:"center",cursor:"pointer",padding:"7px 10px",width:"100%",borderBottom:`1px solid ${i.colors.background.secondary}`,"&:hover":{color:i.colors.text.maxContrast}}),label:(0,t.css)({flexGrow:1}),icon:(0,t.css)({paddingRight:"2px"})}));class u extends n.PureComponent{constructor(){super(...arguments),this.state={expanded:!1},this.onToggleChildren=()=>{this.setState(l=>({expanded:!l.expanded}))}}componentDidMount(){if(this.props.data.expanded)this.setState({expanded:!0});else if(this.props.selectProps&&this.props.selectProps.value){const{value:l}=this.props.selectProps.value;l&&this.props.options.some(f=>f.value===l)&&this.setState({expanded:!0})}}componentDidUpdate(l){l.selectProps.inputValue!==""&&this.setState({expanded:!0})}render(){const{children:l,label:f,theme:c}=this.props,{expanded:h}=this.state,p=g(c);return n.createElement("div",null,n.createElement("div",{className:p.header,onClick:this.onToggleChildren,role:"presentation"},n.createElement("span",{className:p.label},f),n.createElement(r.I,{className:p.icon,name:h?"angle-up":"angle-down"})),h&&l)}}const d=(0,s.cV)(u)},62235:(Y,A,e)=>{"use strict";e.d(A,{K:()=>c});var t=e(32196),n=e(96540),o=e(28581),s=e(8887),r=e(40845);function g(p,m={}){const{duration:a=250,delay:v=250}=m,[E,D]=(0,n.useState)(p),b=(0,n.useRef)();return(0,n.useEffect)(()=>{let P;if(p)P=setTimeout(()=>{b.current=new Date,D(p)},v);else{const y=b.current?Date.now()-b.current.valueOf():0,T=()=>{b.current=void 0,D(p)};y>=a?T():P=setTimeout(T,a-y)}return()=>{P&&(clearTimeout(P),P=void 0)}},[p,a,v]),E}var u=e(14578),d=e(62930),i=e(31511),l=e(72960);const f=p=>({singleValue:(0,t.css)({label:"singleValue",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxSizing:"border-box",maxWidth:"100%",gridArea:"1 / 1 / 2 / 3"}),spinnerWrapper:(0,t.css)({width:"16px",height:"16px",display:"inline-block",marginRight:"10px",position:"relative",verticalAlign:"middle",overflow:"hidden"}),spinnerIcon:(0,t.css)({width:"100%",height:"100%",position:"absolute"}),optionIcon:(0,t.css)({marginRight:p.spacing(1),color:p.colors.text.secondary}),disabled:(0,t.css)({color:p.colors.text.disabled}),isOpen:(0,t.css)({color:p.colors.text.disabled})}),c=p=>{const{children:m,data:a,isDisabled:v}=p,E=(0,r.of)(f),D=g(a.loading||!1,{delay:250,duration:750}),b=a.icon?(0,s.Uo)(a.icon):void 0;return n.createElement(o.c.SingleValue,{...p,className:(0,t.cx)(E.singleValue,v&&E.disabled,p.selectProps.menuIsOpen&&E.isOpen)},a.imgUrl?n.createElement(h,{loading:D,imgUrl:a.imgUrl,styles:E,alt:String(a.label??a.value)}):n.createElement(n.Fragment,null,n.createElement(l.n,{horizontal:!0,size:16,visible:D,duration:150},n.createElement("div",{className:E.spinnerWrapper},n.createElement(d.y,{className:E.spinnerIcon,inline:!0}))),b&&n.createElement(u.I,{name:b,role:"img",className:E.optionIcon})),!a.hideText&&m)},h=p=>n.createElement("div",{className:p.styles.spinnerWrapper},n.createElement(i.A,{duration:150,visible:p.loading},n.createElement(d.y,{className:p.styles.spinnerIcon,inline:!0})),n.createElement(i.A,{duration:150,visible:!p.loading},n.createElement("img",{className:p.styles.spinnerIcon,src:p.imgUrl,alt:p.alt})))},88824:(Y,A,e)=>{"use strict";e.d(A,{J:()=>o});var t=e(32196),n=e(3911);const o=(0,n.N)(s=>({menu:(0,t.css)({label:"grafana-select-menu",background:s.components.dropdown.background,boxShadow:s.shadows.z3,position:"relative",minWidth:"100%",zIndex:1}),option:(0,t.css)({label:"grafana-select-option",padding:"8px",display:"flex",alignItems:"center",flexDirection:"row",flexShrink:0,whiteSpace:"nowrap",cursor:"pointer",borderLeft:"2px solid transparent","&:hover":{background:s.colors.action.hover,"@media (forced-colors: active), (prefers-contrast: more)":{border:`1px solid ${s.colors.primary.border}`}}}),optionIcon:(0,t.css)({marginRight:s.spacing(1)}),optionImage:(0,t.css)({label:"grafana-select-option-image",width:"16px",marginRight:"10px"}),optionDescription:(0,t.css)({label:"grafana-select-option-description",fontWeight:"normal",fontSize:s.typography.size.sm,color:s.colors.text.secondary,whiteSpace:"normal",lineHeight:s.typography.body.lineHeight}),optionBody:(0,t.css)({label:"grafana-select-option-body",display:"flex",fontWeight:s.typography.fontWeightMedium,flexDirection:"column",flexGrow:1}),optionFocused:(0,t.css)({label:"grafana-select-option-focused",background:s.colors.action.focus,"@media (forced-colors: active), (prefers-contrast: more)":{border:`1px solid ${s.colors.primary.border}`}}),optionSelected:(0,t.css)({background:s.colors.action.selected}),optionDisabled:(0,t.css)({label:"grafana-select-option-disabled",backgroundColor:s.colors.action.disabledBackground,color:s.colors.action.disabledText,cursor:"not-allowed"}),singleValue:(0,t.css)({label:"grafana-select-single-value",color:s.components.input.text,gridArea:"1 / 1 / 2 / 3",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxSizing:"border-box",maxWidth:"100%"}),valueContainer:(0,t.css)({label:"grafana-select-value-container",alignItems:"center",display:"grid",position:"relative",boxSizing:"border-box",flex:"1 1 0%",outline:"none",overflow:"hidden"}),valueContainerMulti:(0,t.css)({label:"grafana-select-value-container-multi",flexWrap:"wrap",display:"flex"}),valueContainerMultiNoWrap:(0,t.css)({flexWrap:"nowrap"}),loadingMessage:(0,t.css)({label:"grafana-select-loading-message",padding:s.spacing(1),textAlign:"center",width:"100%"}),multiValueContainer:(0,t.css)({label:"grafana-select-multi-value-container",display:"flex",alignItems:"center",lineHeight:1,background:s.colors.background.secondary,borderRadius:s.shape.radius.default,margin:s.spacing(.25,1,.25,0),padding:s.spacing(.25,0,.25,1),color:s.colors.text.primary,fontSize:s.typography.size.sm,overflow:"hidden",whiteSpace:"nowrap","&:hover":{background:s.colors.emphasize(s.colors.background.secondary)}}),multiValueRemove:(0,t.css)({label:"grafana-select-multi-value-remove",margin:s.spacing(0,.5),cursor:"pointer",svg:{marginBottom:0}}),singleValueRemove:(0,t.css)({cursor:"pointer","&:hover":{color:s.colors.text.primary}})}))},23731:(Y,A,e)=>{"use strict";e.d(A,{A:()=>n,z:()=>o});var t=e(96540);function n(s){return{clearIndicator:()=>({}),container:()=>({}),control:()=>({}),dropdownIndicator:()=>({}),group:()=>({}),groupHeading:()=>({}),indicatorsContainer:()=>({}),indicatorSeparator:()=>({}),input:function(r){return{...r,color:"inherit",margin:0,padding:0,zIndex:1}},loadingIndicator:()=>({}),loadingMessage:()=>({}),menu:()=>({}),menuList:({maxHeight:r})=>({maxHeight:r}),multiValue:()=>({}),multiValueLabel:()=>({overflow:"hidden",textOverflow:"ellipsis"}),multiValueRemove:()=>({}),noOptionsMessage:()=>({}),option:()=>({}),placeholder:r=>({...r,color:s.colors.text.secondary}),singleValue:()=>({}),valueContainer:()=>({})}}function o(s,r){return(0,t.useMemo)(()=>({...n(s),menuPortal:g=>({...g,zIndex:s.zIndex.portal}),menu:({top:g,bottom:u,position:d})=>({top:g,bottom:u,position:d,minWidth:"100%",zIndex:s.zIndex.dropdown}),container:()=>({width:r?s.spacing(r):"100%",display:r==="auto"?"inline-flex":"flex"}),option:(g,u)=>({...g,opacity:u.isDisabled?.5:1})}),[s,r])}},62883:()=>{},67570:(Y,A,e)=>{"use strict";e.d(A,{u:()=>h});var t=e(2543),n=e.n(t),o=e(96540),s=e(13752),r=e(62467),g=e(11150),u=e(96083),d=e(63720),i=e(59099),l=e(54479),f=e(11134);function c(p){return{label:p,value:stringToMs(p)}}class h extends o.PureComponent{constructor(m){super(m),this.propsSubject=new s.B,this.subscription=null}componentDidMount(){this.subscription=this.propsSubject.pipe((0,d.n)(m=>f.cC.isLive(m.interval)?(0,r.of)({}):m.loading?g.t:(0,u.Y)((0,l.dc)(m.interval))),(0,i.M)(()=>this.props.func())).subscribe(),this.propsSubject.next(this.props)}componentDidUpdate(m){f.cC.isLive(m.interval)&&f.cC.isLive(this.props.interval)||(0,t.isEqual)(m,this.props)||this.propsSubject.next(this.props)}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe(),this.propsSubject.unsubscribe()}render(){return null}}},63250:(Y,A,e)=>{"use strict";e.d(A,{I1:()=>v,_$:()=>h,gl:()=>f});var t=e(2543),n=e.n(t),o=e(75059),s=e(47070),r=e(50082),g=e(62398),u=e(24293),d=e(90708),i=e(47737);const l=["reduceOptions","orientation"];function f(E,D,b){let P=E.options;if(E.fieldConfig=E.fieldConfig||{defaults:{},overrides:[]},D==="singlestat"&&b.angular)return c(E,b);for(const y of l)b.hasOwnProperty(y)&&(P[y]=(0,t.cloneDeep)(b[y]));return P}function c(E,D){const b=D.angular,P=o.AS.getIfExists(b.valueName),y={reduceOptions:{calcs:[P?P.id:o.gy.mean]},orientation:s.wV.Horizontal},T={};if(b.format&&(T.unit=b.format),b.tableColumn&&(y.reduceOptions.fields=`/^${b.tableColumn}$/`),b.nullPointMode&&(T.nullValueMode=b.nullPointMode),b.nullText&&(T.noValue=b.nullText),(b.decimals||b.decimals===0)&&(T.decimals=b.decimals),b.thresholds&&b.colors){const I=b.thresholds.split(",").map(S=>Number(S.trim())),x=[];for(const S of b.colors){const O=x.length-1;O>=0?x.push({value:I[O],color:S}):x.push({value:-1/0,color:S})}T.thresholds={mode:r.O.Absolute,steps:x}}const M=(0,g.bh)(b,T.thresholds);return M&&M.length&&(T.mappings=M),b.gauge&&b.gauge.show&&(T.min=b.gauge.minValue,T.max=b.gauge.maxValue),E.fieldConfig.defaults=T,y}function h(E){if(!E.options)return{};const D=parseFloat(E.pluginVersion||"6.1");let b=E.options;D<6.2&&(b=m(b)),D<6.3&&(b=p(b));const{fieldOptions:P}=b;if(D<6.6&&P){if(P&&P.override){const{override:M,...I}=b.fieldOptions;b={...b,fieldOptions:{...I,overrides:[]}}}let y=P?.defaults?.thresholds;y?delete P.defaults.thresholds:(y=P?.thresholds,delete P.thresholds),y&&(P.defaults.thresholds={mode:r.O.Absolute,steps:y});const{defaults:T}=P;T.color&&typeof T.color=="string"&&(T.color={mode:u.Y.Fixed,fixedColor:T.color}),(0,d.BF)(T)}if(D<7&&(E.fieldConfig=E.fieldConfig||{defaults:{},overrides:[]},E.fieldConfig={defaults:P&&P.defaults?{...E.fieldConfig.defaults,...P.defaults}:E.fieldConfig.defaults,overrides:P&&P.overrides?[...E.fieldConfig.overrides,...P.overrides]:E.fieldConfig.overrides},P&&(b.reduceOptions={values:P.values,limit:P.limit,calcs:P.calcs}),delete b.fieldOptions),D<7.1){const y=E.fieldConfig.defaults.title;y!=null&&(E.fieldConfig.defaults.displayName=y,delete E.fieldConfig.defaults.title)}if(D<8){const y=E.fieldConfig?.defaults;let T=y?.unit;T==="percent"?((0,t.isNumber)(y.min)||(y.min=0),(0,t.isNumber)(y.max)||(y.max=100)):T==="percentunit"&&((0,t.isNumber)(y.min)||(y.min=0),(0,t.isNumber)(y.max)||(y.max=1))}return b}function p(E){const{fieldOptions:D}=E;if(!D)return E;const{mappings:b,...P}=E.fieldOptions;let y;return E.thresholds&&(y={mode:r.O.Absolute,steps:a(E.thresholds)}),{...E,fieldOptions:{...P,defaults:{...D.defaults,mappings:b,thresholds:y}}}}function m(E){const{valueOptions:D}=E;if(!D)return E;const b={},P={};if(b.mappings=E.valueMappings,b.thresholds=E.thresholds,b.defaults=P,P.unit=D.unit,P.decimals=D.decimals,D.stat){const T=o.AS.get(D.stat);T&&(b.calcs=[T.id])}P.min=E.minValue,P.max=E.maxValue;const y={...E,fieldOptions:b};return(0,t.omit)(y,"valueMappings","thresholds","valueOptions","minValue","maxValue")}function a(E){if(!E||!E.length)return;const D=E.map(b=>({value:b.value===null?-1/0:b.value,color:b.color}));return(0,i.RU)(D),D[0].value=-1/0,D}function v(E){return(0,g.bh)(E)}},37713:(Y,A,e)=>{"use strict";e.d(A,{I1:()=>t.I1,_$:()=>t._$,gl:()=>t.gl});var t=e(63250)},47097:(Y,A,e)=>{"use strict";e.d(A,{F:()=>f});var t=e(32196),n=e(94659),o=e(9821),s=e(96540),r=e(40845),g=e(80427);const u=c=>{const{value:h,children:p,visible:m,placement:a,tipFormatter:v,...E}=c,D=(0,s.useRef)(null),b=(0,s.useRef)(null),P=(0,r.of)(d);function y(){b.current!==null&&cancelAnimationFrame(b.current)}function T(){b.current=requestAnimationFrame(()=>{D.current?.forceAlign()})}return(0,s.useEffect)(()=>(m?T():y(),y),[h,m]),s.createElement(g.A,{overlayClassName:P.tooltip,placement:a,overlay:v??h,overlayInnerStyle:{minHeight:"auto"},ref:D,visible:m,...E},p)},d=c=>({tooltip:(0,t.css)({position:"absolute",display:"block",visibility:"visible",fontSize:c.typography.bodySmall.fontSize,opacity:.9,padding:3,zIndex:c.zIndex.tooltip})}),i=u;var l=e(24849);const f=({min:c,max:h,onChange:p,onAfterChange:m,orientation:a="horizontal",reverse:v,step:E,formatTooltipResult:D,value:b,tooltipAlwaysVisible:P=!0})=>{const y=(0,s.useCallback)(S=>{p?.(typeof S=="number"?[S,S]:S)},[p]),T=(0,s.useCallback)(S=>{m?.(typeof S=="number"?[S,S]:S)},[m]),M=a==="horizontal",I=(0,r.of)(l.$,M),x=(S,O)=>s.createElement(i,{value:O.value,visible:P||O.dragging,tipFormatter:D?()=>D(O.value):void 0,placement:M?"top":"right"},S);return s.createElement("div",{className:(0,t.cx)(I.container,I.slider)},s.createElement(n.Global,{styles:I.tooltip}),s.createElement(o.A,{min:c,max:h,step:E,defaultValue:b,range:!0,onChange:y,onChangeComplete:T,vertical:!M,reverse:v,handleRender:x}))};f.displayName="RangeSlider"},77014:(Y,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(32196),n=e(94659),o=e(9821),s=e(96540),r=e(40845),g=e(10354),u=e(24849);const d=({min:i,max:l,onChange:f,onAfterChange:c,orientation:h="horizontal",reverse:p,step:m,value:a,ariaLabelForHandle:v,marks:E,included:D})=>{const b=h==="horizontal",P=(0,r.of)(u.$,b,!!E),y=o.A,[T,M]=(0,s.useState)(a??i),I=(0,s.useCallback)(U=>{const R=typeof U=="number"?U:U[0];M(R),f?.(R)},[M,f]),x=(0,s.useCallback)(U=>{let R=+U.target.value;Number.isNaN(R)&&(R=0),M(R),f&&f(R),c&&c(R)},[f,c]),S=(0,s.useCallback)(U=>{const R=+U.target.value;R>l?M(l):R<i&&M(i)},[l,i]),O=(0,s.useCallback)(U=>{const R=typeof U=="number"?U:U[0];c?.(R)},[c]),C=b?[]:[P.sliderInputVertical],L=b?[]:[P.sliderInputFieldVertical];return s.createElement("div",{className:(0,t.cx)(P.container,P.slider)},s.createElement(n.Global,{styles:P.tooltip}),s.createElement("div",{className:(0,t.cx)(P.sliderInput,...C)},s.createElement(y,{min:i,max:l,step:m,defaultValue:a,value:T,onChange:I,onChangeComplete:O,vertical:!b,reverse:p,ariaLabelForHandle:v,marks:E,included:D}),s.createElement(g.p,{type:"text",className:(0,t.cx)(P.sliderInputField,...L),value:T,onChange:x,onBlur:S,min:i,max:l})))};d.displayName="Slider"},24849:(Y,A,e)=>{"use strict";e.d(A,{$:()=>o});var t=e(32196),n=e(94659);const o=(s,r,g=!1)=>{const{spacing:u}=s,d=s.colors.border.strong,i=s.colors.primary.main,l=s.colors.primary.main,c=`box-shadow: 0px 0px 0px 6px ${s.colors.primary.transparent}`;return{container:(0,t.css)({width:"100%",margin:r?"inherit":u(1,3,1,1),paddingBottom:r&&g?s.spacing(1):"inherit",height:r?"auto":"100%"}),slider:(0,t.css)`
      .rc-slider {
        display: flex;
        flex-grow: 1;
        margin-left: 7px; // half the size of the handle to align handle to the left on 0 value
      }
      .rc-slider-mark {
        top: ${s.spacing(1.75)};
      }
      .rc-slider-mark-text {
        color: ${s.colors.text.disabled};
        font-size: ${s.typography.bodySmall.fontSize};
      }
      .rc-slider-mark-text-active {
        color: ${s.colors.text.primary};
      }
      .rc-slider-handle {
        border: none;
        background-color: ${l};
        box-shadow: ${s.shadows.z1};
        cursor: pointer;
        opacity: 1;
      }

      .rc-slider-handle:hover,
      .rc-slider-handle:active,
      .rc-slider-handle-click-focused:focus {
        ${c};
      }

      // The triple class names is needed because that's the specificity used in the source css :(
      .rc-slider-handle-dragging.rc-slider-handle-dragging.rc-slider-handle-dragging,
      .rc-slider-handle:focus-visible {
        box-shadow: 0 0 0 5px ${s.colors.text.primary};
      }

      .rc-slider-dot,
      .rc-slider-dot-active {
        background-color: ${s.colors.text.primary};
        border-color: ${s.colors.text.primary};
      }

      .rc-slider-track {
        background-color: ${i};
      }
      .rc-slider-rail {
        background-color: ${d};
        cursor: pointer;
      }
    `,tooltip:(0,n.css)`
      body {
        .rc-slider-tooltip {
          cursor: grab;
          user-select: none;
          z-index: ${s.zIndex.tooltip};
        }

        .rc-slider-tooltip-inner {
          color: ${s.colors.text.primary};
          background-color: transparent !important;
          border-radius: 0;
          box-shadow: none;
        }

        .rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {
          display: none;
        }

        .rc-slider-tooltip-placement-top {
          padding: 0;
        }
      }
    `,sliderInput:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"center",width:"100%"}),sliderInputVertical:(0,t.css)({flexDirection:"column",height:"100%",".rc-slider":{margin:0,order:2}}),sliderInputField:(0,t.css)({marginLeft:s.spacing(3),width:"60px",input:{textAlign:"center"}}),sliderInputFieldVertical:(0,t.css)({margin:`0 0 ${s.spacing(3)} 0`,order:1})}}},5926:(Y,A,e)=>{"use strict";e.d(A,{O:()=>a});var t=e(2543),n=e(96540),o=e(39624),s=e(21423),r=e(11261),g=e(8066),u=e(52622),d=e(81297),i=e(51336),l=e(16895),f=e(73060),c=e(14236),h=e(46294);function p(v,E){const D=v.y.values.length,b={...v.y.config,...E},P=v.x??{name:"",values:[...Array(D).keys()],type:r.PU.number,config:{}};let y={refId:"sparkline",fields:[P,{...v.y,config:b}],length:D};return(0,f.g2)(P.values)||(y=(0,c.ES)(y,0)),(0,h.M)({frame:y,refFieldPseudoMin:v.timeRange?.from.valueOf(),refFieldPseudoMax:v.timeRange?.to.valueOf()})}const m={drawStyle:u.GR.Line,showPoints:u.yL.Auto,axisPlacement:u.vM.Hidden,pointSize:2};class a extends n.PureComponent{constructor(E){super(E);const D=p(E.sparkline,E.config);this.state={data:(0,l.bq)(D,(0,l.ro)(D)),alignedDataFrame:D,configBuilder:this.prepareConfig(D)}}static getDerivedStateFromProps(E,D){const b=p(E.sparkline,E.config),P=(0,o.C)(b);return P?{...D,data:(0,l.bq)(P,(0,l.ro)(P)),alignedDataFrame:P}:{...D}}componentDidUpdate(E,D){const{alignedDataFrame:b}=this.state;if(!b)return;let P=!1;E.sparkline!==this.props.sparkline?P=!(0,s.bW)(this.state.alignedDataFrame,D.alignedDataFrame):P=!(0,t.isEqual)(E.config,this.props.config),P&&this.setState({configBuilder:this.prepareConfig(b)})}getYRange(E){let{min:D,max:b}=this.state.alignedDataFrame.fields[1].state?.range;const P=+this.state.alignedDataFrame.fields[1].config?.noValue;return Number.isNaN(P)||(D=Math.min(D,+P),b=Math.max(b,+P)),D===b?(D===0?b=100:(D=0,b*=2),[D,b]):[Math.max(D,E.config.min??-1/0),Math.min(b,E.config.max??1/0)]}prepareConfig(E){const{theme:D}=this.props,b=new i.e;b.setCursor({show:!1,x:!1,y:!1});const P=E.fields[0];b.addScale({scaleKey:"x",orientation:u.Lt.Horizontal,direction:u.ON.Right,isTime:!1,range:()=>{const{sparkline:y}=this.props;if(y.x){if(y.timeRange&&y.x.type===r.PU.time)return[y.timeRange.from.valueOf(),y.timeRange.to.valueOf()];const T=y.x.values;return[T[0],T[T.length-1]]}return[0,y.y.values.length-1]}}),b.addAxis({scaleKey:"x",theme:D,placement:u.vM.Hidden});for(let y=0;y<E.fields.length;y++){const T=E.fields[y],M=T.config,I={...m,...M.custom};if(T===P||T.type!==r.PU.number)continue;const x=M.unit||"__fixed";b.addScale({scaleKey:x,orientation:u.Lt.Vertical,direction:u.ON.Up,range:()=>this.getYRange(T)}),b.addAxis({scaleKey:x,theme:D,placement:u.vM.Hidden});const S=(0,g.Qi)(T),O=S.getCalculator(T,D)(0,0),C=I.drawStyle===u.GR.Points?u.yL.Always:I.showPoints;b.addSeries({pxAlign:!1,scaleKey:x,theme:D,colorMode:S,thresholds:M.thresholds,drawStyle:I.drawStyle,lineColor:I.lineColor??O,lineWidth:I.lineWidth,lineInterpolation:I.lineInterpolation,showPoints:C,pointSize:I.pointSize,fillOpacity:I.fillOpacity,fillColor:I.fillColor,lineStyle:I.lineStyle,gradientMode:I.gradientMode})}return b}render(){const{data:E,configBuilder:D}=this.state,{width:b,height:P}=this.props;return n.createElement(d.Z,{data:E,config:D,width:b,height:P})}}},62930:(Y,A,e)=>{"use strict";e.d(A,{y:()=>d});var t=e(32196),n=e(96540),o=e(8867),s=e(40845),r=e(4025),g=e(14578),u=e(78318);const d=({className:f,inline:c=!1,iconClassName:h,style:p,size:m="md"})=>{const a=(0,s.of)(i),v=(0,s.of)(l,m);if(typeof m!="string"||!(0,r.rJ)(m)){const E=(0,u.Wj)(),D="spinner",b=(0,u.Xi)(D,"default"),P=`${E}${b}/${D}.svg`;return n.createElement("div",{"data-testid":"Spinner",style:p,className:(0,t.cx)({[a.inline]:c},v.wrapper,f)},n.createElement(o.default,{src:P,width:m,height:m,className:(0,t.cx)("fa-spin",v.icon,f),style:p}))}return n.createElement("div",{"data-testid":"Spinner",style:p,className:(0,t.cx)({[a.inline]:c},f)},n.createElement(g.I,{className:(0,t.cx)("fa-spin",h),name:"spinner",size:m,"aria-label":"loading spinner"}))},i=f=>({inline:(0,t.css)({display:"inline-block"})}),l=(f,c)=>({wrapper:(0,t.css)({fontSize:typeof c=="string"?c:`${c}px`}),icon:(0,t.css)({display:"inline-block",fill:"currentColor",flexShrink:0,label:"Icon",lineHeight:0,verticalAlign:"middle"})})},34722:(Y,A,e)=>{"use strict";e.d(A,{O:()=>u});var t=e(32196),n=e(2543),o=e.n(n),s=e(96540),r=e(40845),g=e(69144);function u(v){const{direction:E="row",initialSize:D=.5,primaryPaneStyles:b,secondaryPaneStyles:P,onSizeChanged:y,onResizing:T,dragPosition:M="middle",children:I}=v,{containerRef:x,firstPaneRef:S,minDimProp:O,splitterProps:C,secondPaneRef:L}=h(E,y,T),U=s.Children.toArray(I),R=(0,r.of)(d,E),B=(0,r.of)(g.l,M),H=E==="column"?B.dragHandleHorizontal:B.dragHandleVertical,W=(0,s.useId)(),V=U.length===2?"visible":"hidden";let G=D;return I[1]||(G=1),s.createElement("div",{ref:x,className:R.container},s.createElement("div",{ref:S,className:R.panel,style:{flexGrow:(0,n.clamp)(G,0,1),[O]:"min-content",...b},id:`start-panel-${W}`},U[0]),U[1]&&s.createElement(s.Fragment,null,s.createElement("div",{className:H,...C,role:"separator","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":D*100,"aria-controls":`start-panel-${W}`,"aria-label":"Pane resize widget",tabIndex:0}),s.createElement("div",{ref:L,className:R.panel,style:{flexGrow:(0,n.clamp)(1-D,0,1),[O]:"min-content",visibility:`${V}`,...P},id:`end-panel-${W}`},U[1])))}function d(v,E){return{container:(0,t.css)({display:"flex",flexDirection:E==="row"?"row":"column",width:"100%",flexGrow:1,overflow:"hidden"}),panel:(0,t.css)({display:"flex",position:"relative",flexBasis:0}),dragEdge:{second:(0,t.css)({top:0,left:v.spacing(-1),bottom:0,position:"absolute",zIndex:v.zIndex.modal}),first:(0,t.css)({top:0,left:v.spacing(-1),bottom:0,position:"absolute",zIndex:v.zIndex.modal})}}}const i=.3,l=new Set(["ArrowUp","ArrowDown"]),f=new Set(["ArrowLeft","ArrowRight"]),c={row:{dim:"width",axis:"clientX",min:"minWidth",max:"maxWidth"},column:{dim:"height",axis:"clientY",min:"minHeight",max:"maxHeight"}};function h(v,E,D){const P=(0,s.useRef)(null),y=(0,s.useRef)(null),T=(0,s.useRef)(null),M=(0,s.useRef)(null),I=(0,s.useRef)(null),x=(0,s.useRef)("1fr"),S=(0,s.useRef)(void 0),O=(0,s.useRef)(void 0),C=c[v].dim,L=c[v].axis,U=c[v].min,R=c[v].max;a(M.current,ee=>{for(const ae of ee){if(!ae.target.isSameNode(M.current)||!y.current)return;const Z=y.current.getBoundingClientRect()[C],ne=m(y.current);P.current.ariaValueNow=`${(0,n.clamp)((Z-ne[U])/(ne[R]-ne[U])*100,0,100)}`}},500,[R,U,v,C]);const B=(0,s.useRef)(null),H=(0,s.useCallback)(ee=>{y.current&&(x.current=y.current.getBoundingClientRect()[C],I.current=M.current.getBoundingClientRect()[C],B.current=ee[L],P.current.setPointerCapture(ee.pointerId),S.current=m(y.current),O.current=void 0)},[C,L]),W=(0,s.useCallback)(ee=>{if(B.current!==null&&x.current!=="1fr"){const ae=ee[L]-B.current,Z=S.current,ne=(0,n.clamp)(x.current+ae,Z[U],Z[R]),q=ne/(I.current-16);y.current.style.flexGrow=`${q}`,T.current.style.flexGrow=`${1-q}`;const te=p(ne,Z[U],Z[R]-Z[U]);P.current.ariaValueNow=`${te}`,D?.(q,ne)}},[16,L,U,R,D]),N=(0,s.useCallback)(ee=>{ee.preventDefault(),ee.stopPropagation(),P.current.releasePointerCapture(ee.pointerId),B.current=null,typeof x.current=="number"&&E?.(parseFloat(y.current.style.flexGrow),x.current)},[E]),V=(0,s.useRef)(new Set),G=(0,s.useRef)(null),_=(0,s.useCallback)(ee=>{if(V.current.size===0){G.current=null;return}else if(x.current==="1fr")return;const ne=(ee-(G.current??ee))*i;let q=0;v==="row"?(V.current.has("ArrowLeft")&&(q-=ne),V.current.has("ArrowRight")&&(q+=ne)):(V.current.has("ArrowUp")&&(q-=ne),V.current.has("ArrowDown")&&(q+=ne));const te=S.current,re=y.current.getBoundingClientRect()[C],de=(0,n.clamp)(re+q,te[U],te[R]),ie=de/(I.current-16);y.current.style.flexGrow=`${ie}`,T.current.style.flexGrow=`${1-ie}`,P.current.ariaValueNow=p(de,te[U],te[R]),D?.(ie,de),G.current=ee,window.requestAnimationFrame(_)},[v,16,U,R,C,D]),K=(0,s.useCallback)(ee=>{if(!y.current||!T.current||!P.current||!M.current)return;if(ee.key==="Enter"){O.current===void 0?(O.current=y.current.style.flexGrow,y.current.style.flexGrow="0",T.current.style.flexGrow="1"):(y.current.style.flexGrow=O.current,T.current.style.flexGrow=`${1-parseFloat(O.current)}`,O.current=void 0);return}else if(ee.key==="Home"){S.current=m(y.current),I.current=M.current.getBoundingClientRect()[C];const Z=S.current[U]/(I.current-16);y.current.style.flexGrow=`${Z}`,T.current.style.flexGrow=`${1-Z}`,P.current.ariaValueNow="0";return}else if(ee.key==="End"){S.current=m(y.current),I.current=M.current.getBoundingClientRect()[C];const Z=S.current[R]/(I.current-16);y.current.style.flexGrow=`${Z}`,T.current.style.flexGrow=`${1-Z}`,P.current.ariaValueNow="100";return}if(!(v==="column"&&l.has(ee.key)||v==="row"&&f.has(ee.key))||V.current.has(ee.key))return;if(O.current=void 0,ee.preventDefault(),ee.stopPropagation(),x.current=y.current.getBoundingClientRect()[C],I.current=M.current.getBoundingClientRect()[C],S.current=m(y.current),!V.current.has(ee.key)){const Z=V.current.size===0;V.current.add(ee.key),Z&&window.requestAnimationFrame(_)}},[v,_,16,R,C,U]),j=(0,s.useCallback)(ee=>{v==="row"&&!f.has(ee.key)||v==="column"&&!l.has(ee.key)||(V.current.delete(ee.key),typeof x.current=="number"&&E?.(parseFloat(y.current.style.flexGrow),x.current))},[v,E]),k=(0,s.useCallback)(()=>{if(!y.current||!T.current)return;y.current.style.flexGrow="0.5",T.current.style.flexGrow="0.5";const ee=m(y.current);S.current=ee,x.current=y.current.getBoundingClientRect()[C],P.current.ariaValueNow=`${(x.current-ee[U])/(ee[R]-ee[U])*100}`},[R,C,U]),Q=(0,s.useCallback)(()=>{V.current.size>0&&(V.current.clear(),B.current=null,typeof x.current=="number"&&E?.(parseFloat(y.current.style.flexGrow),x.current))},[E]);return{containerRef:M,firstPaneRef:y,minDimProp:U,splitterProps:{onPointerUp:N,onPointerDown:H,onPointerMove:W,onKeyDown:K,onKeyUp:j,onDoubleClick:k,onBlur:Q,ref:P,style:{[C]:"16px"}},secondPaneRef:T}}function p(v,E,D){return`${(0,n.clamp)((v-E)/(D-E)*100,0,100)}`}function m(v){const E=document.body.style.overflow,D=v.style.width,b=v.style.height,P=v.style.flexGrow;document.body.style.overflow="hidden",v.style.flexGrow="0";const{width:y,height:T}=v.getBoundingClientRect();v.style.flexGrow="100";const{width:M,height:I}=v.getBoundingClientRect();return document.body.style.overflow=E,v.style.width=D,v.style.height=b,v.style.flexGrow=P,{minWidth:y,maxWidth:M,minHeight:T,maxHeight:I}}function a(v,E,D=0,b){const P=(0,n.throttle)(E,D);(0,s.useLayoutEffect)(()=>{if(!v)return;const y=new ResizeObserver(P);return y.observe(v,{box:"device-pixel-content-box"}),()=>y.disconnect()},b)}},42734:(Y,A,e)=>{"use strict";e.d(A,{S:()=>g});var t=e(2543),n=e.n(t),o=e(96540),s=e(75059),r=e(88323);class g extends o.PureComponent{constructor(){super(...arguments),this.checkInput=()=>{const{stats:d,allowMultiple:i,defaultStat:l,onChange:f}=this.props,c=s.AS.list(d);if(c.length!==d.length){const h=c.map(m=>m.id),p=(0,t.difference)(d,h);console.warn("Unknown stats",p,d),f(c.map(m=>m.id))}!i&&d.length>1&&(console.warn("Removing extra stat",d),f([d[0]])),l&&d.length<1&&f([l])},this.onSelectionChange=d=>{const{onChange:i}=this.props;Array.isArray(d)?i(d.map(l=>l.value)):i(d&&d.value?[d.value]:[])}}componentDidMount(){this.checkInput()}componentDidUpdate(d){this.checkInput()}render(){const{stats:d,allowMultiple:i,defaultStat:l,placeholder:f,className:c,menuPlacement:h,width:p,inputId:m,filterOptions:a}=this.props,v=s.AS.selectOptions(d,a);return o.createElement(r.l6,{value:v.current,className:c,isClearable:!l,isMulti:i,width:p,isSearchable:!0,options:v.options,placeholder:f,onChange:this.onSelectionChange,menuPlacement:h,inputId:m})}}g.defaultProps={allowMultiple:!1}},15292:(Y,A,e)=>{"use strict";e.d(A,{K:()=>i,d:()=>d});var t=e(32196),n=e(2543),o=e.n(n),s=e(96540),r=e(95344),g=e(40845),u=e(16797);const d=s.forwardRef(({value:f,checked:c,onChange:h,id:p,label:m,disabled:a,invalid:v=!1,...E},D)=>{c&&(0,r.l)("Switch","checked prop","value");const b=(0,g.of)(l),P=(0,s.useRef)(p||(0,n.uniqueId)("switch-"));return s.createElement("div",{className:(0,t.cx)(b.switch,v&&b.invalid)},s.createElement("input",{type:"checkbox",disabled:a,checked:f,onChange:y=>{!a&&h?.(y)},id:P.current,...E,ref:D}),s.createElement("label",{htmlFor:P.current,"aria-label":m??"Toggle switch"}))});d.displayName="Switch";const i=s.forwardRef(({transparent:f,className:c,showLabel:h,label:p,value:m,id:a,invalid:v,...E},D)=>{const b=(0,g.of)(l,f);return s.createElement("div",{className:(0,t.cx)(b.inlineContainer,c,E.disabled&&b.disabled,v&&b.invalid)},h&&s.createElement("label",{htmlFor:a,className:(0,t.cx)(b.inlineLabel,m&&b.inlineLabelEnabled,"inline-switch-label")},p),s.createElement(d,{...E,id:a,label:p,ref:D,value:m}))});i.displayName="Switch";const l=(f,c)=>({switch:(0,t.css)({width:"32px",height:"16px",position:"relative",lineHeight:1,input:{opacity:0,left:"-100vw",zIndex:-1e3,position:"absolute","&:checked + label":{background:f.colors.primary.main,borderColor:f.colors.primary.main,"&:hover":{background:f.colors.primary.shade},"&::after":{transform:"translate3d(18px, -50%, 0)",background:f.colors.primary.contrastText}},"&:disabled + label":{background:f.colors.action.disabledBackground,borderColor:f.colors.border.weak,cursor:"not-allowed","&:hover":{background:f.colors.action.disabledBackground}},"&:disabled:checked + label":{"&::after":{background:f.colors.text.disabled}},"&:focus + label, &:focus-visible + label":(0,u.getFocusStyles)(f),"&:focus:not(:focus-visible) + label":(0,u.getMouseFocusStyles)(f)},label:{width:"100%",height:"100%",cursor:"pointer",borderRadius:f.shape.radius.pill,background:f.components.input.background,border:`1px solid ${f.components.input.borderColor}`,transition:"all 0.3s ease","&:hover":{borderColor:f.components.input.borderHover},"&::after":{position:"absolute",display:"block",content:'""',width:"12px",height:"12px",borderRadius:f.shape.radius.circle,background:f.colors.text.secondary,boxShadow:f.shadows.z1,top:"50%",transform:"translate3d(2px, -50%, 0)",transition:"transform 0.2s cubic-bezier(0.19, 1, 0.22, 1)","@media (forced-colors: active)":{border:"1px solid transparent"}}}}),inlineContainer:(0,t.css)({padding:f.spacing(0,1),height:f.spacing(f.components.height.md),display:"inline-flex",alignItems:"center",background:c?"transparent":f.components.input.background,border:`1px solid ${c?"transparent":f.components.input.borderColor}`,borderRadius:f.shape.radius.default,"&:hover":{border:`1px solid ${c?"transparent":f.components.input.borderHover}`,".inline-switch-label":{color:f.colors.text.primary}}}),disabled:(0,t.css)({backgroundColor:"rgba(204, 204, 220, 0.04)",color:"rgba(204, 204, 220, 0.6)",border:"1px solid rgba(204, 204, 220, 0.04)"}),inlineLabel:(0,t.css)({cursor:"pointer",paddingRight:f.spacing(1),color:f.colors.text.secondary,whiteSpace:"nowrap"}),inlineLabelEnabled:(0,t.css)({color:f.colors.text.primary}),invalid:(0,t.css)({"input + label, input:checked + label, input:hover + label":{border:`1px solid ${f.colors.error.border}`}})})},60734:(Y,A,e)=>{"use strict";e.d(A,{q:()=>i});var t=e(32196),n=e(96540),o=e(29158),s=e(63021),r=e(40675),g=e(40980),u=e(40845),d=e(40276);function i({tabs:f,defaultTab:c,closeIconTooltip:h,onClose:p}){const[m,a]=(0,n.useState)(f.some(P=>P.value===c)?c:f[0].value),v=(0,u.of)(l),E=(0,u.$j)(),D=P=>{a(P.value)},b=`calc(100% - (${E.components.menuTabs.height}px + ${E.spacing(1)}))`;return n.createElement("div",{className:v.container},n.createElement(s.U,{className:v.tabs},f.map(P=>n.createElement(r.o,{key:P.value,label:P.label,active:P.value===m,onChangeTab:()=>D(P),icon:P.icon})),n.createElement(o.K,{className:v.close,onClick:p,name:"times",tooltip:h??"Close"})),n.createElement(d.E,{autoHeightMin:b,autoHeightMax:b},n.createElement(g.J,{className:v.tabContent},f.find(P=>P.value===m)?.content)))}const l=f=>({container:(0,t.css)({height:"100%"}),tabContent:(0,t.css)({padding:f.spacing(2),backgroundColor:f.colors.background.primary,height:"100%"}),close:(0,t.css)({position:"absolute",right:"16px",top:"5px",cursor:"pointer",fontSize:f.typography.size.lg}),tabs:(0,t.css)({paddingTop:f.spacing(1),borderColor:f.colors.border.weak,ul:{marginLeft:f.spacing(2)}})})},92015:(Y,A,e)=>{"use strict";e.d(A,{u:()=>u,d:()=>i});var t=e(96540),n=e(75059),o=e(13544),s=e(32196);const r=l=>{const f=(0,s.css)({width:"100%",listStyle:"none"}),c=(0,s.css)({width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"});return l.value&&!Array.isArray(l.value)?t.createElement("span",null,l.value):l.value&&Array.isArray(l.value)&&l.value.length>0?t.createElement("ul",{className:f},l.value.map((h,p)=>{const m=Object.keys(h)[0];return t.createElement("li",{className:c,key:p},t.createElement("span",null,m),t.createElement("span",null,h[m]))})):g},g=()=>t.createElement("span",null,"\xA0");function u(l){const{totalColumnsWidth:f,footerGroups:c,isPaginationVisible:h,tableStyles:p}=l,m=o.Tp.components.Panels.Visualization.Table;return t.createElement("div",{style:{position:h?"relative":"absolute",width:f?`${f}px`:"100%",bottom:"0px"}},c.map(a=>{const{key:v,...E}=a.getFooterGroupProps();return t.createElement("div",{className:p.tfoot,...E,key:v,"data-testid":m.footer},a.headers.map(D=>d(D,p)))}))}function d(l,f){const c=l.getHeaderProps();return c?(c.style=c.style??{},c.style.position="absolute",c.style.justifyContent=l.justifyContent,t.createElement("div",{className:f.headerCell,...c},l.render("Footer"))):null}function i(l,f,c){if(f===void 0)return g;if(c){if(f[l]===void 0)return g;const h=n.AS.get(n.gy.count).name;return r({value:[{[h]:String(f[l])}]})}return r({value:f[l]})}},30355:(Y,A,e)=>{"use strict";e.d(A,{a:()=>c,t:()=>f});var t=e(96540),n=e(58563),o=e(14236),s=e(11261),r=e(52622),g=e(40845),u=e(29413),d=e(9286),i=e(5926),l=e(77659);const f={type:r.ob.Sparkline,drawStyle:r.GR.Line,lineInterpolation:r.dx.Smooth,lineWidth:1,fillOpacity:17,gradientMode:r.on.Hue,pointSize:2,barAlignment:r.Nj.Center,showPoints:r.yL.Never,hideValue:!1},c=m=>{const{field:a,innerWidth:v,tableStyles:E,cell:D,cellProps:b,timeRange:P}=m,y=h(D.value),T=(0,g.$j)();if(!y)return t.createElement("div",{...b,className:E.cellContainer},a.config.noValue||"no data");y.x&&!y.x.config.interval&&y.x.values.length>1&&(y.x.config.interval=y.x.values[1]-y.x.values[0]),y.y.values=y.y.values.map(L=>Number.isFinite(L)?L:null);const M=(0,n.AP)(y.y);y.y.config.min=M.min,y.y.config.max=M.max,y.y.state={range:M},y.timeRange=P;const I=p(a),x={color:a.config.color,custom:{...f,...I}},S=a.config.custom?.cellOptions?.hideValue;let O=0,C=null;if(!S){const L=(0,o.LI)(D.value)?D.value.value:null,U=a.display(L),R=(0,l.zi)(a,U,D.row.index);O=(0,u.kD)(`${R.prefix??""}${R.text}${R.suffix??""}`,16).width+T.spacing.gridSize,C=t.createElement(d.i,{style:{width:`${O-T.spacing.gridSize}px`,textAlign:"right",marginRight:T.spacing(1)},value:U})}return t.createElement("div",{...b,className:E.cellContainer},C,t.createElement("div",null,t.createElement(i.O,{width:v-O,height:E.cellHeightInner,sparkline:y,config:x,theme:E.theme})))};function h(m){if(Array.isArray(m))return{y:{name:"test",type:s.PU.number,values:m,config:{}}};if((0,o.ci)(m)){const a=m.fields.find(E=>E.type===s.PU.time),v=m.fields.find(E=>E.type===s.PU.number);if(a&&v)return{x:a,y:v}}}function p(m){let a=(0,l.bk)(m);if(a.type===r.ob.Auto&&(a={...a,type:r.ob.Sparkline}),a.type===r.ob.Sparkline)return a;throw new Error(`Expected options type ${r.ob.Sparkline} but got ${a.type}`)}},77093:(Y,A,e)=>{"use strict";e.d(A,{X:()=>Re});var t=e(96540),n=e(32885),o=e(75059),s=e(11261),r=e(19845),g=e(13544),u=e(52622),d=e(40845),i=e(40276),l=e(19384),f=e(92015),c=e(4025),h=e(14578),p=e(32196),m=e(13840),a=e(8866),v=e(66864),E=e(60029),D=e(29158),b=e(55852),P=e(91793),y=e(83195),T=e(67647),M=e(9261),I=e(10880);const x=28,S=x*5,O={Contains:{label:"Contains",value:"Contains",description:"Contains"},"=":{label:"=",value:"=",description:"Equals"},"!=":{label:"!=",value:"!=",description:"Not equals"},">":{label:">",value:">",description:"Greater"},">=":{label:">=",value:">=",description:"Greater or Equal"},"<":{label:"<",value:"<",description:"Less"},"<=":{label:"<=",value:"<=",description:"Less or Equal"},Expression:{label:"Expression",value:"Expression",description:'Bool Expression (Char $ represents the column value in the expression, e.g. "$ >= 10 && $ <= 12")'}},C=Object.values(O),L=O.Contains,U=O.Expression,R=me=>{if(me=me.trim().replace(/\\/g,""),/^(\d{4}-\d{2}-\d{2}|\d{4}\/\d{2}\/\d{2})/.test(me)){const Be=new Date(me);if(!isNaN(Be.getTime())){const we=(0,y.j_)("dateTimeAsIso");return(0,y.cN)(we(Be.getTime()))}}const he=parseFloat(me);if(!isNaN(he))return he;const Te=me.toLowerCase();return Te==="true"||Te==="false"?Te==="true":me},B=({options:me,values:he,caseSensitive:Te,showOperators:Be,onChange:we})=>{const[Ne,Ze]=(0,t.useState)(L),[st,Qe]=(0,t.useState)(""),ke=(0,t.useMemo)(()=>new RegExp(st,Te?void 0:"i"),[st,Te]),je=(0,t.useMemo)(()=>me.filter(Ve=>{if(!Be||!st||Ne.value===L.value)return Ve.label===void 0?!1:ke.test(Ve.label);if(Ne.value===U.value){if(Ve.value===void 0)return!1;try{const We=st.replace(/\\/g,""),$e=new Function("$",`'use strict'; return ${We};`),it=R(Ve.value);return $e(it)}catch{}return!1}else{if(Ve.value===void 0)return!1;const We=R(Ve.value),$e=R(st);switch(Ne.value){case"=":return We===$e;case"!=":return We!==$e;case">":return We>$e;case">=":return We>=$e;case"<":return We<$e;case"<=":return We<=$e}return!1}}),[me,ke,Be,Ne,st]),He=(0,t.useMemo)(()=>je.filter(Ve=>he.includes(Ve)),[je,he]),Ge=(0,t.useMemo)(()=>je.length===He.length,[je,He]),Oe=(0,t.useMemo)(()=>He.length>0&&je.length>He.length,[je,He]),Ke=(0,t.useMemo)(()=>He.length?`${He.length} selected`:"Select all",[He]),Ee=(0,t.useMemo)(()=>je.length!==He.length?"Add all displayed values to the filter":"Remove all displayed values from the filter",[je,He]),J=(0,d.of)(H),ue=(0,d.$j)().spacing.gridSize,be=(0,t.useMemo)(()=>Math.min(je.length*x,S)+ue,[ue,je.length]),Le=(0,t.useCallback)(Ve=>We=>{const $e=We.currentTarget.checked?he.concat(Ve):he.filter(it=>it.value!==Ve.value);we($e)},[we,he]),_e=(0,t.useCallback)(()=>{if(je.length===He.length){const Ve=he.filter(We=>!je.includes(We));we(Ve)}else{const Ve=[...new Set([...he,...je])];we(Ve)}},[we,he,je,He]);return t.createElement(v.gW,{spacing:"md"},!Be&&t.createElement(T.Z,{placeholder:"Filter values",onChange:Qe,value:st}),Be&&t.createElement(v.Gy,null,t.createElement(M.f,{variant:"canvas",options:C,onChange:Ze,value:Ne,tooltip:Ne.description}),t.createElement(T.Z,{placeholder:"Filter values",onChange:Qe,value:st})),!je.length&&t.createElement(E.J,null,"No values"),je.length&&t.createElement(P.Y1,{height:be,itemCount:je.length,itemSize:x,width:"100%",className:J.filterList},({index:Ve,style:We})=>{const $e=je[Ve],{value:it,label:at}=$e,ht=he.find(ft=>ft.value===it)!==void 0;return t.createElement("div",{className:J.filterListRow,style:We,title:at},t.createElement(I.S,{value:ht,label:at,onChange:Le($e)}))}),je.length&&t.createElement(v.gW,{spacing:"xs"},t.createElement("div",{className:(0,p.cx)(J.selectDivider)}),t.createElement("div",{className:(0,p.cx)(J.filterListRow)},t.createElement(I.S,{value:Ge,indeterminate:Oe,label:Ke,description:Ee,onChange:_e}))))},H=me=>({filterList:(0,p.css)({label:"filterList"}),filterListRow:(0,p.css)({label:"filterListRow",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",padding:me.spacing(.5),":hover":{backgroundColor:me.colors.action.hover}}),selectDivider:(0,p.css)({label:"selectDivider",width:"100%",borderTop:`1px solid ${me.colors.border.medium}`,padding:me.spacing(.5,2)})});var W=e(77659);const N=({column:{preFilteredRows:me,filterValue:he,setFilter:Te},onClose:Be,field:we})=>{const Ne=(0,d.$j)(),Ze=(0,t.useMemo)(()=>(0,W.MY)(me,we),[me,we]),st=(0,t.useMemo)(()=>(0,W.Yz)(Ze),[Ze]),Qe=(0,t.useMemo)(()=>(0,W.Sj)(st,he),[st,he]),[ke,je]=(0,t.useState)(Qe),[He,Ge]=(0,t.useState)(!1),Oe=(0,t.useCallback)(ue=>Be(),[Be]),Ke=(0,t.useCallback)(ue=>{const be=ke.length?ke:void 0;Te(be),Be()},[Te,ke,Be]),Ee=(0,t.useCallback)(ue=>{Te(void 0),Be()},[Te,Be]),J=(0,t.useMemo)(()=>he!==void 0,[he]),oe=(0,d.of)(V);return t.createElement(a.N,{onClick:Oe,useCapture:!0},t.createElement("div",{className:(0,p.cx)(oe.filterContainer),onClick:G},t.createElement(v.gW,{spacing:"lg"},t.createElement(v.gW,{spacing:"xs"},t.createElement(v.Gy,{justify:"space-between",align:"center"},t.createElement(E.J,{className:oe.label},"Filter by values:"),t.createElement(D.K,{name:"text-fields",tooltip:"Match case",style:{color:He?Ne.colors.text.link:Ne.colors.text.disabled},onClick:()=>{Ge(ue=>!ue)}})),t.createElement("div",{className:(0,p.cx)(oe.listDivider)}),t.createElement(B,{onChange:je,values:ke,options:st,caseSensitive:He,showOperators:!0})),t.createElement(v.Gy,{spacing:"lg"},t.createElement(v.Gy,null,t.createElement(b.$n,{size:"sm",onClick:Ke},"Ok"),t.createElement(b.$n,{size:"sm",variant:"secondary",onClick:Oe},"Cancel")),J&&t.createElement(v.Gy,null,t.createElement(b.$n,{fill:"text",size:"sm",onClick:Ee},"Clear filter"))))))},V=me=>({filterContainer:(0,p.css)({label:"filterContainer",width:"100%",minWidth:"250px",height:"100%",maxHeight:"400px",backgroundColor:me.colors.background.primary,border:`1px solid ${me.colors.border.weak}`,padding:me.spacing(2),margin:me.spacing(1,0),boxShadow:me.shadows.z3,borderRadius:me.shape.radius.default}),listDivider:(0,p.css)({label:"listDivider",width:"100%",borderTop:`1px solid ${me.colors.border.medium}`,padding:me.spacing(.5,2)}),label:(0,p.css)({marginBottom:0})}),G=me=>{me.stopPropagation()},_=({column:me,field:he,tableStyles:Te})=>{const Be=(0,t.useRef)(null),[we,Ne]=(0,t.useState)(!1),Ze=(0,d.of)(K),st=(0,t.useMemo)(()=>!!me.filterValue,[me.filterValue]),Qe=(0,t.useCallback)(()=>Ne(!0),[Ne]),ke=(0,t.useCallback)(()=>Ne(!1),[Ne]);return!he||!he.config.custom?.filterable?null:t.createElement("button",{className:(0,p.cx)(Te.headerFilter,st?Ze.filterIconEnabled:Ze.filterIconDisabled),ref:Be,type:"button",onClick:Qe},t.createElement(h.I,{name:"filter"}),we&&Be.current&&t.createElement(m.A,{content:t.createElement(N,{column:me,tableStyles:Te,field:he,onClose:ke}),placement:"bottom-start",referenceElement:Be.current,show:!0}))},K=me=>({filterIconEnabled:(0,p.css)({label:"filterIconEnabled",color:me.colors.primary.text}),filterIconDisabled:(0,p.css)({label:"filterIconDisabled",color:me.colors.text.disabled})}),j=me=>{const{headerGroups:he,showTypeIcons:Te,tableStyles:Be}=me,we=g.Tp.components.Panels.Visualization.Table;return t.createElement("div",{role:"rowgroup",className:Be.headerRow},he.map(Ne=>{const{key:Ze,...st}=Ne.getHeaderGroupProps();return t.createElement("div",{className:Be.thead,...st,key:Ze,"aria-label":we.header,role:"row"},Ne.headers.map((Qe,ke)=>k(Qe,Be,Te)))}))};function k(me,he,Te){const Be=me.getHeaderProps(),we=me.field??null;return me.canResize&&(Be.style.userSelect=me.isResizing?"none":"auto"),Be.style.position="absolute",Be.style.justifyContent=me.justifyContent,t.createElement("div",{className:he.headerCell,...Be,role:"columnheader"},me.canSort&&t.createElement(t.Fragment,null,t.createElement("button",{...me.getSortByToggleProps(),className:he.headerCellLabel},Te&&t.createElement(h.I,{name:(0,c.SS)(we),title:we?.type,size:"sm",className:he.typeIcon}),t.createElement("div",null,me.render("Header")),me.isSorted&&(me.isSortedDesc?t.createElement(h.I,{size:"lg",name:"arrow-down",className:he.sortIcon}):t.createElement(h.I,{name:"arrow-up",size:"lg",className:he.sortIcon}))),me.canFilter&&t.createElement(_,{column:me,tableStyles:he,field:we})),!me.canSort&&me.render("Header"),!me.canSort&&me.canFilter&&t.createElement(_,{column:me,tableStyles:he,field:we}),me.canResize&&t.createElement("div",{...me.getResizerProps(),className:he.resizeHandle}))}var Q=e(64423),ee=e(56978),ae=e(69129),Z=e(79041);function ne({tableStyles:me,nestedData:he,rowIndex:Te,width:Be,cellHeight:we}){const Ne=he.values,Ze=[],st=(0,d.$j)(),Qe=(0,d.of)(q);let ke=me.rowHeight+st.spacing.gridSize;return Ne[Te].forEach((je,He)=>{const Ge=!!je.meta?.custom?.noHeader,Oe=me.rowHeight*(je.length+(Ge?0:1)),Ke={height:Oe,paddingLeft:W.jV,position:"absolute",top:ke};ke+=Oe+st.spacing.gridSize,Ze.push(t.createElement("div",{style:Ke,key:`subTable_${Te}_${He}`},t.createElement(Re,{data:je,width:Be-W.jV,height:me.rowHeight*(je.length+1),noHeader:Ge,cellHeight:we})))}),t.createElement("div",{className:Qe.subTables},Ze)}const q=me=>({subTables:(0,p.css)({"&:before":{content:'""',position:"absolute",width:"1px",top:me.spacing(5),left:me.spacing(1),bottom:me.spacing(2),background:me.colors.border.medium}})});function te(me,he,Te){return me.values[he].reduce((Ne,Ze)=>{if(Ze.length){const st=!!Ze.meta?.custom?.noHeader;return Ne+Te.rowHeight*(Ze.length+(st?0:1))+8}return Ne},Te.rowHeight)??Te.rowHeight}var re=e(49618);const de=me=>{const{data:he,rows:Te,headerHeight:Be,footerPaginationEnabled:we,rowHeight:Ne,itemCount:Ze,pageIndex:st,tableState:Qe,prepareRow:ke,onCellFilterAdded:je,width:He,cellHeight:Ge=u.qM.Sm,timeRange:Oe,tableStyles:Ke,nestedDataField:Ee,listHeight:J,listRef:oe,enableSharedCrosshair:ue=!1,initialRowIndex:be=void 0}=me,[Le,_e]=(0,t.useState)(be),Ve=(0,d.$j)(),We=(0,Z.d2)(),$e=(0,t.useMemo)(()=>{const Vt=he.fields.find(_t=>_t.type===s.PU.time);return Vt?(0,W.HY)(Vt):0},[he]),it=(0,t.useCallback)((Vt,_t)=>{if(!We||!ue||!(0,r.S1)(_t))return;const rt=_t.fields.find(St=>St.type===s.PU.time);We.eventBus.publish(new ae.b_({point:{time:rt.values[Vt]}}))},[ue,We]),at=(0,t.useCallback)(()=>{!We||!ue||We.eventBus.publish(new ae.ql)},[ue,We]),ht=(0,t.useCallback)(Vt=>{if(Vt.payload.point?.time&&Vt.payload.rowIndex!==void 0){const _t=he.fields.find(ct=>ct.type===s.PU.time),rt=_t.values[Vt.payload.rowIndex],St=Vt.payload.point.time;if((0,W.Iy)(St,rt,$e)){_e(Vt.payload.rowIndex);return}const pn=_t.values.findIndex(ct=>(0,W.Iy)(St,ct,$e));if(pn!==-1){_e(pn);return}_e(void 0)}},[he.fields,$e]);(0,t.useEffect)(()=>{if(!We||!ue||!(0,r.S1)(he)||we)return;const Vt=new Q.yU;return Vt.add(We.eventBus.getStream(ae.b_).pipe((0,ee.B)(250)).subscribe({next:_t=>{We.eventBus!==_t.origin&&ht(_t)}})),Vt.add(We.eventBus.getStream(ae.ql).pipe((0,ee.B)(250)).subscribe({next:_t=>{We.eventBus!==_t.origin&&_e(void 0)}})),()=>{Vt.unsubscribe()}},[he,ue,we,ht,We]);let ft;if(Le!==void 0){const Vt=Te.findIndex(_t=>_t.index===Le);Vt!==-1&&(ft=Be+(Vt-1)*Ne)}const gt=(0,t.useCallback)(Vt=>Qe.pageIndex*Qe.pageSize+Vt,[Qe.pageIndex,Qe.pageSize]),Dt=(0,t.useCallback)(({index:Vt,style:_t,rowHighlightIndex:rt})=>{const St=gt(Vt),pn=Te[St];let ct={};ke(pn);const Ct=Qe.expanded[pn.id]?(0,p.css)({"&:hover":{background:"inherit"}}):{};return rt!==void 0&&pn.index===rt&&(_t={..._t,backgroundColor:Ve.components.table.rowHoverBackground},ct={"aria-selected":"true"}),t.createElement("div",{...pn.getRowProps({style:_t,...ct}),className:(0,p.cx)(Ke.row,Ct),onMouseEnter:()=>it(Vt,he),onMouseLeave:at},Ee&&Qe.expanded[pn.id]&&t.createElement(ne,{nestedData:Ee,tableStyles:Ke,rowIndex:Vt,width:He,cellHeight:Ge}),pn.cells.map((Yt,cn)=>t.createElement(re.n,{key:cn,tableStyles:Ke,cell:Yt,onCellFilterAdded:je,columnIndex:cn,columnCount:pn.cells.length,timeRange:Oe,frame:he})))},[Ge,he,Ee,je,it,at,ke,gt,Te,Qe.expanded,Ke,Ve.components.table.rowHoverBackground,Oe,He]),It=Vt=>{const _t=gt(Vt),rt=Te[_t];return Qe.expanded[rt.id]&&Ee?te(Ee,Vt,Ke):Ke.rowHeight},jt=Vt=>{const{scrollTop:_t}=Vt.currentTarget;oe.current!==null&&oe.current.scrollTo(_t)};return t.createElement(t.Fragment,null,t.createElement(i.A,{onScroll:jt,hideHorizontalTrack:!0,scrollTop:ft},t.createElement(P._m,{key:Ne+st,height:J,itemCount:Ze,itemSize:It,width:"100%",ref:oe,style:{overflow:void 0}},({index:Vt,style:_t})=>Dt({index:Vt,style:_t,rowHighlightIndex:Le}))))};function ie(me,he){(0,t.useEffect)(()=>{if(me.current&&he.current){const Te=me.current.querySelector(".track-vertical"),Be=he.current.firstChild;Be&&Te&&(Te.remove(),Be instanceof HTMLElement&&(Be.querySelector(":scope > .track-vertical")?.remove(),Be.append(Te)))}})}function ge(me,he,Te,Be){const we=JSON.stringify(Object.keys(me.expanded));(0,t.useEffect)(()=>{let Ne=0;Be||(Number.isFinite(me.lastExpandedOrCollapsedIndex)&&(Ne=me.lastExpandedOrCollapsedIndex),Ne=me.pageIndex===0?Ne-1:Ne-me.pageIndex-me.pageIndex*me.pageSize),he.current?.resetAfterIndex(Math.max(Ne,0))},[me.lastExpandedOrCollapsedIndex,me.pageSize,me.pageIndex,he,Te,we,Be])}var ve=e(28240);function ye({onColumnResize:me,onSortByChange:he,data:Te}){return(0,t.useCallback)((Be,we)=>{switch(we.type){case"columnDoneResizing":if(me){const Ze=Be.columnResizing.headerIdWidths[0][0],st=parseInt(Ze,10),Qe=Math.round(Be.columnResizing.columnWidths[Ze]),ke=Te.fields[st];if(!ke)return Be;const je=(0,ve.Ct)(ke,Te);me(je,Qe)}case"toggleSortBy":if(he){const Ne=[];for(const Ze of Be.sortBy){const st=Te.fields[parseInt(Ze.id,10)];st&&Ne.push({displayName:(0,ve.Ct)(st,Te),desc:Ze.desc})}he(Ne)}case"toggleRowExpanded":if(we.id)return{...Be,lastExpandedOrCollapsedIndex:parseInt(we.id,10)}}return Be},[Te,me,he])}function pe(me,he){const Te={};if(me){Te.sortBy=[];for(const Be of me)for(const we of he)we.Header===Be.displayName&&Te.sortBy.push({id:we.id,desc:Be.desc})}return Te}var le=e(69770);const Me=150,De=36,Re=(0,t.memo)(me=>{const{ariaLabel:he,data:Te,height:Be,onCellFilterAdded:we,width:Ne,columnMinWidth:Ze=Me,noHeader:st,resizable:Qe=!0,initialSortBy:ke,footerOptions:je,showTypeIcons:He,footerValues:Ge,enablePagination:Oe,cellHeight:Ke=u.qM.Sm,timeRange:Ee,enableSharedCrosshair:J=!1,initialRowIndex:oe=void 0}=me,ue=(0,t.useRef)(null),be=(0,t.useRef)(null),Le=(0,t.useRef)(null),_e=(0,d.$j)(),Ve=(0,le.k)(_e,Ke),We=st?0:Ve.rowHeight,[$e,it]=(0,t.useState)(Ge),at=(0,t.useMemo)(()=>{const xn=De;let Tn=0;if(!$e)return 0;for(const Wn of $e)Array.isArray(Wn)&&Wn.length>Tn&&(Tn=Wn.length);return Tn>1?xn*Tn:xn},[$e]),ht=(0,t.useMemo)(()=>Te.fields.length?Array(Te.length).fill(0):[],[Te]),ft=!!(je?.countRows&&je.reducer&&je.reducer.length&&je.reducer[0]===o.gy.count),gt=Te.fields.find(xn=>xn.type===s.PU.nestedFrames),Dt=gt!==void 0,It=(0,t.useMemo)(()=>(0,W.GH)(Te,Ne,Ze,Dt,$e,ft),[Te,Ne,Ze,$e,Dt,ft]),jt=(0,t.useRef)(),Vt=ye({...me,onSortByChange:xn=>{jt.current(!1),me.onSortByChange&&me.onSortByChange(xn)}}),_t=!!Te.meta?.uniqueRowIdFields?.length,rt=(0,t.useMemo)(()=>{const xn={columns:It,data:ht,disableResizing:!Qe,stateReducer:Vt,autoResetPage:!1,initialState:pe(ke,It),autoResetFilters:!1,sortTypes:{number:W.Ok,"alphanumeric-insensitive":W.IM}};return _t&&(xn.getRowId=(Tn,Wn)=>(0,r.t9)(Te,Wn),xn.autoResetExpanded=!1),xn},[ke,It,ht,Qe,Vt,_t,Te]),{getTableProps:St,headerGroups:pn,footerGroups:ct,rows:Ct,prepareRow:Yt,totalColumnsWidth:cn,page:vn,state:rn,gotoPage:en,setPageSize:mn,pageOptions:Un,toggleAllRowsExpanded:fn}=(0,n.useTable)(rt,n.useFilters,n.useSortBy,n.useAbsoluteLayout,n.useResizeColumns,n.useExpanded,n.usePagination),ca=rn;jt.current=fn,(0,t.useEffect)(()=>{je||it(Ge)},[Ge,je]),(0,t.useEffect)(()=>{if(!je)return;if(!je.show){it(void 0);return}if(ft){const Tn=[];Tn[0]=pn[0]?.headers[0]?.filteredRows.length.toString()??Te.length.toString(),it(Tn);return}const xn=(0,W.Ux)(pn[0].headers,(0,W.XX)(Ct),je,_e);it(xn)},[je,_e,rn.filters,Te]);let Lt=Be-(We+at);Oe&&(Lt-=Ve.cellHeight);const qt=Math.round(Lt/Ve.rowHeight)-1;(0,t.useEffect)(()=>{qt<=0||mn(qt)},[qt,mn]),(0,t.useEffect)(()=>{Te.length/qt<rn.pageIndex&&en(0)},[Te]),ge(ca,ue,Te,_t),ie(Le,be);const hn=(0,t.useCallback)(xn=>{en(xn-1)},[en]),Cn=Oe?vn.length:Ct.length;let gn=null;if(Oe){const xn=rn.pageIndex*rn.pageSize+1;let Tn=xn+rn.pageSize-1;const Wn=Ne<550;Tn>Te.length&&(Tn=Te.length),gn=t.createElement("div",{className:Ve.paginationWrapper},t.createElement(l.d,{currentPage:rn.pageIndex+1,numberOfPages:Un.length,showSmallVersion:Wn,onNavigate:hn}),Wn?null:t.createElement("div",{className:Ve.paginationSummary},xn," - ",Tn," of ",Te.length," rows"))}return t.createElement("div",{...St(),className:Ve.table,"aria-label":he,role:"table",ref:be,style:{width:Ne,height:Be}},t.createElement(i.E,{hideVerticalTrack:!0},t.createElement("div",{className:Ve.tableContentWrapper(cn)},!st&&t.createElement(j,{headerGroups:pn,showTypeIcons:He,tableStyles:Ve}),Cn>0?t.createElement("div",{"data-testid":g.Tp.components.Panels.Visualization.Table.body,ref:Le},t.createElement(de,{data:Te,rows:Ct,width:Ne,cellHeight:Ke,headerHeight:We,rowHeight:Ve.rowHeight,itemCount:Cn,pageIndex:rn.pageIndex,listHeight:Lt,listRef:ue,tableState:rn,prepareRow:Yt,timeRange:Ee,onCellFilterAdded:we,nestedDataField:gt,tableStyles:Ve,footerPaginationEnabled:!!Oe,enableSharedCrosshair:J,initialRowIndex:oe})):t.createElement("div",{style:{height:Be-We,width:Ne},className:Ve.noData},"No data"),$e&&t.createElement(f.u,{isPaginationVisible:!!Oe,footerValues:$e,footerGroups:ct,totalColumnsWidth:cn,tableStyles:Ve}))),gn)});Re.displayName="Table"},49618:(Y,A,e)=>{"use strict";e.d(A,{n:()=>n});var t=e(96540);const n=({cell:o,tableStyles:s,onCellFilterAdded:r,timeRange:g,userProps:u,frame:d})=>{const i=o.getCellProps(),l=o.column.field;if(!l?.display)return null;i.style&&(i.style.minWidth=i.style.width,i.style.justifyContent=o.column.justifyContent);let f=(typeof o.column.width=="number"?o.column.width:24)-s.cellPadding*2;return t.createElement(t.Fragment,null,o.render("Cell",{field:l,tableStyles:s,onCellFilterAdded:r,cellProps:i,innerWidth:f,timeRange:g,userProps:u,frame:d}))}},69770:(Y,A,e)=>{"use strict";e.d(A,{k:()=>n});var t=e(32196);function n(s,r){const g=s.colors.border.weak,u=s.colors.primary.border,d=6,i=o(s,r,d),l=i+2,f=28,c=(h,p,m,a)=>(0,t.css)({label:m?"cellContainerOverflow":"cellContainerNoOverflow",padding:`${d}px`,width:"100%",height:`${l-1}px`,display:"flex",...a?{overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap"}:{},alignItems:"center",borderRight:`1px solid ${g}`,color:h??void 0,background:p??void 0,backgroundClip:"padding-box","&:last-child:not(:only-child)":{borderRight:"none"},"&:hover":{overflow:m?"visible":void 0,width:m?"auto !important":void 0,boxShadow:m?`0 0 2px ${s.colors.primary.main}`:void 0,background:m?p??s.components.table.rowHoverBackground:void 0,zIndex:m?1:void 0,".cellActions":{visibility:"visible",opacity:1,width:"auto"}},a:{color:"inherit"},".cellActions":{display:"flex",position:m?void 0:"absolute",top:m?void 0:0,right:m?void 0:0,margin:m?s.spacing(0,-.5,0,.5):"auto",visibility:"hidden",opacity:0,width:0,alignItems:"center",height:"100%",padding:s.spacing(1,.5,1,.5),background:p?"none":s.colors.emphasize(s.colors.background.primary,.03),svg:{color:h}},".cellActionsLeft":{right:"auto !important",left:0},".cellActionsTransparent":{background:"none"}});return{theme:s,cellHeight:i,buildCellContainerStyle:c,cellPadding:d,cellHeightInner:i-d*2,rowHeight:l,table:(0,t.css)({height:"100%",width:"100%",overflow:"auto",display:"flex",flexDirection:"column"}),thead:(0,t.css)({label:"thead",height:`${f}px`,overflowY:"auto",overflowX:"hidden",position:"relative"}),tfoot:(0,t.css)({label:"tfoot",height:`${f}px`,borderTop:`1px solid ${g}`,overflowY:"auto",overflowX:"hidden",position:"relative"}),headerRow:(0,t.css)({label:"row",borderBottom:`1px solid ${g}`}),headerCell:(0,t.css)({height:"100%",padding:`0 ${d}px`,overflow:"hidden",whiteSpace:"nowrap",display:"flex",alignItems:"center",fontWeight:s.typography.fontWeightMedium,"&:last-child":{borderRight:"none"}}),headerCellLabel:(0,t.css)({border:"none",padding:0,background:"inherit",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:s.typography.fontWeightMedium,display:"flex",alignItems:"center",marginRight:s.spacing(.5),"&:hover":{textDecoration:"underline",color:s.colors.text.link}}),cellContainerText:c(void 0,void 0,!0,!0),cellContainerTextNoOverflow:c(void 0,void 0,!1,!0),cellContainer:c(void 0,void 0,!0,!1),cellContainerNoOverflow:c(void 0,void 0,!1,!1),cellText:(0,t.css)({overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap"}),sortIcon:(0,t.css)({marginLeft:s.spacing(.5)}),cellLink:(0,t.css)({cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",color:s.colors.text.link,fontWeight:s.typography.fontWeightMedium,paddingRight:s.spacing(1.5),"&:hover":{textDecoration:"underline",color:s.colors.text.link}}),cellLinkForColoredCell:(0,t.css)({cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",fontWeight:s.typography.fontWeightMedium,textDecoration:"underline"}),imageCellLink:(0,t.css)({cursor:"pointer",overflow:"hidden",height:"100%"}),headerFilter:(0,t.css)({background:"transparent",border:"none",label:"headerFilter",padding:0}),paginationWrapper:(0,t.css)({display:"flex",height:`${i}px`,justifyContent:"center",alignItems:"center",width:"100%",li:{marginBottom:0}}),paginationSummary:(0,t.css)({color:s.colors.text.secondary,fontSize:s.typography.bodySmall.fontSize,display:"flex",justifyContent:"flex-end",padding:s.spacing(0,1,0,2)}),tableContentWrapper:h=>{const p=h!==void 0?`${h}px`:"100%";return(0,t.css)({label:"tableContentWrapper",width:p,display:"flex",flexDirection:"column"})},row:(0,t.css)({label:"row",borderBottom:`1px solid ${g}`,"&:hover":{backgroundColor:s.components.table.rowHoverBackground},"&:last-child":{borderBottom:0}}),imageCell:(0,t.css)({height:"100%"}),resizeHandle:(0,t.css)({label:"resizeHandle",cursor:"col-resize !important",display:"inline-block",background:u,opacity:0,transition:"opacity 0.2s ease-in-out",width:"8px",height:"100%",position:"absolute",right:"-4px",borderRadius:s.shape.radius.default,top:0,touchAction:"none","&:hover":{opacity:1}}),typeIcon:(0,t.css)({marginRight:s.spacing(1),color:s.colors.text.secondary}),noData:(0,t.css)({alignItems:"center",display:"flex",height:"100%",justifyContent:"center",width:"100%"}),expanderCell:(0,t.css)({display:"flex",flexDirection:"column",justifyContent:"center",height:`${l}px`,cursor:"pointer"})}}function o(s,r,g){const u=s.typography.fontSize,d=s.typography.body.lineHeight;switch(r){case"md":return 42;case"lg":return 48;case"sm":default:return g*2+u*d}}},88407:(Y,A,e)=>{"use strict";e.d(A,{Zi:()=>n,mc:()=>t});const t="=",n="!="},77659:(Y,A,e)=>{"use strict";e.d(A,{jV:()=>ne,HY:()=>Qe,MY:()=>ie,XX:()=>he,zi:()=>Ze,bk:()=>Be,GH:()=>te,Sj:()=>pe,Ux:()=>Re,j1:()=>q,Iy:()=>st,o7:()=>we,IM:()=>le,Ok:()=>Me,Yz:()=>ve});var t=e(2543),n=e(47078),o=e.n(n),s=e(11261),r=e(28240),g=e(14236),u=e(19845),d=e(83195),i=e(75059),l=e(57875),f=e(52622),c=e(96540),h=e(50082),p=e(58563),m=e(47070),a=e(97696),v=e(59796);const E={mode:h.O.Absolute,steps:[{color:"blue",value:-1/0},{color:"green",value:20}]},D=ke=>{const{field:je,innerWidth:He,tableStyles:Ge,cell:Oe,cellProps:Ke,row:Ee}=ke,J=je.display(Oe.value),oe=Be(je);let ue=(0,p.xg)(je,!1);ue.thresholds||(ue={...ue,thresholds:E});let be=f.eX.Gradient,Le;oe.type===f.ob.Gauge&&(be=oe.mode??f.eX.Gradient,Le=oe.valueDisplayMode!==void 0?oe.valueDisplayMode:f.$l.Text);const _e=()=>(0,t.isFunction)(je.getLinks)?je.getLinks({valueRowIndex:Ee.index}):[],Ve=!!_e().length,We=Ze(je,J,Oe.row.index),$e=it=>{const{openMenu:at,targetClassName:ht}=it;return c.createElement(a.xE,{width:He,height:Ge.cellHeightInner,field:ue,display:je.display,text:{valueSize:14},value:J,orientation:m.wV.Horizontal,theme:Ge.theme,alignmentFactors:We,onClick:at,className:ht,itemSpacing:1,lcdCellWidth:8,displayMode:be,valueDisplayMode:Le})};return c.createElement("div",{...Ke,className:Ge.cellContainer},Ve&&c.createElement(v.e,{links:_e,style:{display:"flex",width:"100%"}},it=>$e(it)),!Ve&&$e({}))};var b=e(90914);const P=ke=>{const{field:je,row:He,cellProps:Ge,tableStyles:Oe}=ke,Ke=(0,b.k)(je,He);return c.createElement("div",{...Ge,className:Oe.cellContainerText},Ke&&Ke.map((Ee,J)=>c.createElement("span",{key:J,className:Oe.cellLink,onClick:Ee.onClick},c.createElement("a",{href:Ee.href,target:Ee.target},Ee.title))))};var y=e(32196),T=e(84140),M=e(40845),I=e(24284),x=e(55852),S=e(29158),O=e(66864),C=e(10534),L=e(37390),U=e(32372);function R({value:ke,onDismiss:je,mode:He}){let Ge=ke;if((0,t.isString)(ke)){const Ke=ke.trim();if(Ke[0]==="{"||Ke[0]==="["||He==="code")try{ke=JSON.parse(ke),He="code"}catch{He="text"}else He="text"}else Ge=JSON.stringify(ke,null," ");let Oe=Ge;return He==="code"&&(Oe=JSON.stringify(ke,null," ")),c.createElement(L.a,{onDismiss:je,isOpen:!0,title:"Inspect value"},He==="code"?c.createElement(U.B,{width:"100%",height:500,language:"json",showLineNumbers:!0,showMiniMap:(Oe&&Oe.length)>100,value:Oe,readOnly:!0}):c.createElement("pre",null,Oe),c.createElement(L.a.ButtonRow,null,c.createElement(C.b,{icon:"copy",getText:()=>Oe},"Copy to Clipboard")))}var B=e(88407);function H({field:ke,cell:je,previewMode:He,showFilters:Ge,onCellFilterAdded:Oe}){const[Ke,Ee]=(0,c.useState)(!1),J=q(ke)==="flex-end",oe=!!ke.config.custom?.inspect,ue={size:"sm",tooltipPlacement:"top"},be=(0,c.useCallback)(_e=>{Oe&&Oe({key:ke.name,operator:B.mc,value:je.value})},[je,ke,Oe]),Le=(0,c.useCallback)(_e=>{Oe&&Oe({key:ke.name,operator:B.Zi,value:je.value})},[je,ke,Oe]);return c.createElement(c.Fragment,null,c.createElement("div",{className:`cellActions ${J?"cellActionsLeft":""}`},c.createElement(O.Gy,{spacing:"xs"},oe&&c.createElement(S.K,{name:"eye",tooltip:"Inspect value",onClick:()=>{Ee(!0)},...ue}),Ge&&c.createElement(S.K,{name:"search-plus",onClick:be,tooltip:"Filter for value",...ue}),Ge&&c.createElement(S.K,{name:"search-minus",onClick:Le,tooltip:"Filter out value",...ue}))),Ke&&c.createElement(R,{mode:He,value:je.value,onDismiss:()=>{Ee(!1)}}))}const W=ke=>{const{field:je,cell:He,tableStyles:Ge,row:Oe,cellProps:Ke,frame:Ee}=ke,J=!!je.config.custom?.inspect,oe=je.display(He.value),ue=ke.onCellFilterAdded&&je.config.filterable,be=ue&&He.value!==void 0||J,Le=Be(je),_e=!!(0,b.k)(je,Oe)?.length,Ve=(0,M.of)(x.Ez),[We,$e]=(0,c.useState)(!1);let it;const at=()=>{$e(!1)},ht=()=>{$e(!0)};if(Le.type===f.ob.Custom){const Dt=Le.cellComponent;it=c.createElement(Dt,{field:je,value:He.value,rowIndex:Oe.index,frame:Ee})}else c.isValidElement(He.value)?it=He.value:it=(0,d.cN)(oe);const ft=typeof it=="string",gt=N(Ge,Le,oe,J,ft);if(ft){let Dt=Ke.style?.justifyContent;Dt==="flex-end"?Ke.style={...Ke.style,textAlign:"right"}:Dt==="center"&&(Ke.style={...Ke.style,textAlign:"center"})}return c.createElement("div",{...Ke,onMouseEnter:be?ht:void 0,onMouseLeave:be?at:void 0,className:gt},!_e&&(ft?`${it}`:c.createElement("div",{className:Ge.cellText},it)),_e&&c.createElement(v.e,{links:()=>(0,b.k)(je,Oe)||[]},Dt=>Dt.openMenu?c.createElement("button",{className:(0,y.cx)(Ve,V(Ge,Le,Dt.targetClassName)),onClick:Dt.openMenu},it):c.createElement("div",{className:V(Ge,Le,Dt.targetClassName)},it)),We&&be&&c.createElement(H,{...ke,previewMode:"text",showFilters:ue}))};function N(ke,je,He,Ge=!1,Oe=!1){const Ke=ke.theme.isDark?1:-.7;let Ee,J;if(je.type===f.ob.ColorText)Ee=He.color;else if(je.type===f.ob.ColorBackground){const oe=je.mode??f.Wq.Gradient;if(oe===f.Wq.Basic)Ee=(0,I.mZ)(He.color,ke.theme.isDark),J=(0,T.A)(He.color).toRgbString();else if(oe===f.Wq.Gradient){const ue=(0,T.A)(He.color).darken(10*Ke).spin(5);Ee=(0,I.mZ)(He.color,ke.theme.isDark),J=`linear-gradient(120deg, ${ue.toRgbString()}, ${He.color})`}}return Ee!==void 0||J!==void 0?ke.buildCellContainerStyle(Ee,J,!Ge,Oe):Oe?Ge?ke.cellContainerTextNoOverflow:ke.cellContainerText:Ge?ke.cellContainerNoOverflow:ke.cellContainer}function V(ke,je,He){return je.type===f.ob.Auto?(0,y.cx)(ke.cellLink,He):(0,y.cx)(ke.cellLinkForColoredCell,He)}var G=e(92015),_=e(64136),K=e(27430);function j(ke){const{cell:je,tableStyles:He,cellProps:Ge}=ke;let Oe="";return je.value instanceof K.A?Oe=new _.A().writeGeometry(je.value,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"}):je.value!=null&&(Oe=`${je.value}`),c.createElement("div",{...Ge,className:He.cellContainer},c.createElement("div",{className:He.cellText,style:{fontFamily:"monospace"}},Oe))}const k=ke=>{const{field:je,cell:He,tableStyles:Ge,row:Oe,cellProps:Ke}=ke,Ee=je.display(He.value),J=!!(0,b.k)(je,Oe)?.length,oe=(0,M.of)(x.Ez);return c.createElement("div",{...Ke,className:Ge.cellContainer},!J&&c.createElement("img",{src:Ee.text,className:Ge.imageCell,alt:""}),J&&c.createElement(v.e,{style:{height:"100%"},links:()=>(0,b.k)(je,Oe)||[]},ue=>{const be=c.createElement("img",{src:Ee.text,className:Ge.imageCell,alt:""});return ue.openMenu?c.createElement(x.$n,{className:(0,y.cx)(oe),onClick:ue.openMenu},be):be}))};function Q(ke){const{cell:je,tableStyles:He,cellProps:Ge,field:Oe,row:Ke}=ke,Ee=!!Oe.config.custom?.inspect,J=(0,y.css)({cursor:"pointer",fontFamily:"monospace"});let oe=je.value,ue=oe;if((0,t.isString)(oe))try{oe=JSON.parse(oe)}catch{}else ue=JSON.stringify(oe,null," ");const be=!!(0,b.k)(Oe,Ke)?.length,Le=(0,M.of)(x.Ez);return c.createElement("div",{...Ge,className:Ee?He.cellContainerNoOverflow:He.cellContainer},c.createElement("div",{className:(0,y.cx)(He.cellText,J)},!be&&c.createElement("div",{className:He.cellText},ue),be&&c.createElement(v.e,{links:()=>(0,b.k)(Oe,Ke)||[]},_e=>_e.openMenu?c.createElement(x.$n,{className:(0,y.cx)(Le),onClick:_e.openMenu},ue):c.createElement(c.Fragment,null,ue))),Ee&&c.createElement(H,{...ke,previewMode:"code"}))}var ee=e(14578);function ae({row:ke,tableStyles:je}){return c.createElement("div",{className:je.expanderCell,...ke.getToggleRowExpandedProps()},c.createElement(ee.I,{"aria-label":ke.isExpanded?"Collapse row":"Expand row",name:ke.isExpanded?"angle-down":"angle-right",size:"lg"}))}var Z=e(30355);const ne=50;function q(ke){if(!ke)return"flex-start";if(ke.config.custom)switch(ke.config.custom.align){case"right":return"flex-end";case"left":return"flex-start";case"center":return"center"}return ke.type===s.PU.number?"flex-end":"flex-start"}function te(ke,je,He,Ge,Oe,Ke){const Ee=[];let J=0;Ge&&(Ee.push({Header:()=>null,id:"expander",Cell:ae,width:ne,minWidth:ne,filter:(ue,be,Le)=>[],justifyContent:"left",field:ke.fields[0],sortType:"basic"}),je-=ne);for(const[ue,be]of ke.fields.entries()){const Le=be.config.custom||{};if(Le.hidden||be.type===s.PU.nestedFrames)continue;Le.width?je-=Le.width:J++;const _e=We=>{switch(We){case s.PU.number:case s.PU.frame:return"number";case s.PU.time:return"basic";default:return"alphanumeric-insensitive"}},Ve=re(Le.cellOptions?.type,be);Ee.push({Cell:Ve,id:ue.toString(),field:be,Header:Le.hideHeader?"":(0,r.Ct)(be,ke),accessor:(We,$e)=>be.values[$e],sortType:_e(be.type),width:Le.width,minWidth:Le.minWidth??He,filter:o()(de(be)),justifyContent:q(be),Footer:(0,G.d)(ue,Oe,Ke)})}let oe=je/J;for(let ue=J;ue>0;ue--)for(const be of Ee)!be.width&&be.minWidth>oe&&(be.width=be.minWidth,je-=be.width,J-=1,oe=je/J);for(const ue of Ee)ue.width||(ue.width=oe),ue.minWidth=50;return Ee}function re(ke,je){switch(ke){case f.ob.Custom:case f.ob.ColorText:case f.ob.ColorBackground:return W;case f.ob.Image:return k;case f.ob.Gauge:return D;case f.ob.Sparkline:return Z.a;case f.ob.JSONView:return Q;case f.ob.DataLinks:return P}if(je.type===s.PU.geo)return j;if(je.type===s.PU.frame){const He=je.values[0];return(0,g.ci)(He)&&(0,u.aH)(He)?Z.a:Q}return je.type===s.PU.other?Q:W}function de(ke){return function(je,He,Ge){return je.length===0||!Ge||!ke?je:je.filter(Oe=>{if(!Oe.values.hasOwnProperty(He))return!1;const Ke=ge(Oe,ke);return Ge.find(Ee=>Ee.value===Ke)!==void 0})}}function ie(ke,je){if(!je||ke.length===0)return{};const He={};for(let Ge=0;Ge<ke.length;Ge++){const Oe=ge(ke[Ge],je);He[Oe||"(Blanks)"]=Oe}return He}function ge(ke,je){if(!je||!ke)return"";const He=je.values[ke.index],Ge=je.display?je.display(He):He;return je.display?(0,d.cN)(Ge):Ge}function ve(ke){return Object.keys(ke).reduce((je,He)=>je.concat({value:ke[He],label:He}),[]).sort(ye)}function ye(ke,je){return ke.label===void 0&&je.label===void 0?0:ke.label===void 0&&je.label!==void 0?-1:ke.label!==void 0&&je.label===void 0?1:ke.label<je.label?-1:ke.label>je.label?1:0}function pe(ke,je){return je?ke.filter(He=>je.some(Ge=>Ge.value===He.value)):[]}function le(ke,je,He){return String(ke.values[He]).localeCompare(String(je.values[He]),void 0,{sensitivity:"base"})}function Me(ke,je,He){const Ge=De(ke.values[He]),Oe=De(je.values[He]);return Ge===Oe?0:Ge>Oe?1:-1}function De(ke){return(0,g.LI)(ke)?ke.value??Number.NEGATIVE_INFINITY:ke==null||ke===""||isNaN(ke)?Number.NEGATIVE_INFINITY:typeof ke=="number"?ke:Number(ke)}function Re(ke,je,He,Ge){return Ne(ke),ke.map((Oe,Ke)=>{if(Oe?.field?.type!==s.PU.number)return Ke===0&&He.reducer&&He.reducer.length>0?i.AS.get(He.reducer[0]).name:void 0;let Ee=(0,t.clone)(Oe.field);return Ee.values=je[Oe.id],Ee.state=void 0,Oe.field=Ee,He.fields&&He.fields.length>0?He.fields.find(oe=>oe===Oe?.field?.name)?me(Oe.field,He.reducer,Ge):void 0:me(Oe.field,He.reducer||[],Ge)})}function me(ke,je,He){const Ge=ke.display??(0,l.J)({field:ke,theme:He}),Oe=je[0],Ke=(0,i.Nw)({field:ke,reducers:je})[Oe];return(0,d.cN)(Ge(Ke))}function he(ke){const je=[];for(const He in ke)for(const[Ge,Oe]of Object.entries(ke[He].values))je[Ge]===void 0&&(je[Ge]=[]),je[Ge].push(Oe);return je}const Te={type:f.ob.Auto};function Be(ke){return ke.config.custom?.displayMode?we(ke.config.custom?.displayMode):ke.config.custom?.cellOptions?ke.config.custom.cellOptions:Te}function we(ke){switch(ke){case"basic":case"gradient-gauge":case"lcd-gauge":let je=f.eX.Basic;return ke==="gradient-gauge"?je=f.eX.Gradient:ke==="lcd-gauge"&&(je=f.eX.Lcd),{type:f.ob.Gauge,mode:je};case"color-background":case"color-background-solid":let He=f.Wq.Basic;return ke==="color-background"&&(He=f.Wq.Gradient),{type:f.ob.ColorBackground,mode:He};default:return{type:ke}}}function Ne(ke){const je=ke.findIndex((He,Ge)=>He?.id!==String(Ge));je===-1||ke[je]?.id==="expander"||(ke.splice(je,0,{id:String(je)}),Ne(ke))}function Ze(ke,je,He){let Ge=ke.state?.alignmentFactors;if(Ge)return Ge.text.length<je.text.length&&(Ge.text=je.text),Ge;{Ge={...je};const Oe=Math.min(ke.values.length,He+1e3);for(let Ke=He+1;Ke<Oe;Ke++)ke.display(ke.values[Ke]).text.length>Ge.text.length&&(Ge.text=je.text);return ke.state?ke.state.alignmentFactors=Ge:ke.state={alignmentFactors:Ge},Ge}}function st(ke,je,He){return Math.abs(Math.floor(ke)-je)<He}function Qe(ke){let je=-Number.MAX_VALUE,He=Number.MAX_VALUE;if(ke.values.length<2)return 0;for(let Ge=0;Ge<ke.values.length;Ge++){const Oe=ke.values[Ge];Oe>je&&(je=Oe),Oe<He&&(He=Oe)}return(je-He)/ke.values.length}},14746:(Y,A,e)=>{"use strict";e.d(A,{b:()=>f});var t=e(32196),n=e(2543),o=e.n(n),s=e(96540),r=e(72436),g=e(40845),u=e(3911),d=e(14578),i=e(21744);class l extends s.PureComponent{constructor(p){super(p),this.readCSV=(0,n.debounce)(()=>{const{config:v}=this.props,{text:E}=this.state;this.setState({data:(0,r.Jh)(E,{config:v})})},150),this.onTextChange=v=>{this.setState({text:v.target.value})};const{text:m,config:a}=p;this.state={text:m,data:(0,r.Jh)(m,{config:a})}}componentDidUpdate(p,m){const{text:a}=this.state;(a!==m.text||this.props.config!==p.config)&&this.readCSV(),this.props.text!==p.text&&this.props.text!==a&&this.setState({text:this.props.text}),this.state.data!==m.data&&this.props.onSeriesParsed(this.state.data,this.state.text)}render(){const{width:p,height:m,theme:a}=this.props,{data:v}=this.state,E=c(a);return s.createElement("div",{className:E.tableInputCsv},s.createElement(i.f,{style:{width:p,height:m},placeholder:"Enter CSV here...",value:this.state.text,onChange:this.onTextChange,className:E.textarea}),v&&s.createElement("footer",{className:E.footer},v.map((D,b)=>s.createElement("span",{key:b},"Rows:",D.length,", Columns:",D.fields.length," \xA0",s.createElement(d.I,{name:"check-circle"})))))}}const f=(0,g.cV)(l);f.displayName="TableInputCSV";const c=(0,u.N)(h=>({tableInputCsv:(0,t.css)({position:"relative"}),textarea:(0,t.css)({height:"100%",width:"100%"}),footer:(0,t.css)({position:"absolute",bottom:"15px",right:"15px",border:"1px solid #222",background:h.colors.success.main,padding:`1px ${h.spacing(.5)}`,fontSize:"80%"})}))},53402:(Y,A,e)=>{"use strict";e.d(A,{p:()=>r});var t=e(32196),n=e(96540),o=e(83195),s=e(40845);const r=({value:u})=>{const d=(0,s.of)(g);return n.createElement("span",{className:d.counter},(0,o.Hg)(u,0).text)},g=u=>({counter:(0,t.css)({label:"counter",marginLeft:u.spacing(1),borderRadius:u.spacing(3),backgroundColor:u.colors.action.hover,padding:u.spacing(.25,1),color:u.colors.text.secondary,fontWeight:u.typography.fontWeightMedium,fontSize:u.typography.size.sm})})},40675:(Y,A,e)=>{"use strict";e.d(A,{o:()=>i});var t=e(32196),n=e(96540),o=e(13544),s=e(40845),r=e(16797),g=e(55852),u=e(14578),d=e(53402);const i=n.forwardRef(({label:f,active:c,icon:h,onChangeTab:p,counter:m,suffix:a,className:v,href:E,...D},b)=>{const P=(0,s.of)(l),y=(0,s.of)(g.my),T=()=>n.createElement(n.Fragment,null,h&&n.createElement(u.I,{name:h}),f,typeof m=="number"&&n.createElement(d.p,{value:m}),a&&n.createElement(a,{className:P.suffix})),I={className:(0,t.cx)(y,P.link,c?P.activeStyle:P.notActive),...D,onClick:p,"aria-label":D["aria-label"]||o.Tp.components.Tab.title(f),role:"tab","aria-selected":c};return E?n.createElement("div",{className:P.item},n.createElement("a",{...I,href:E,ref:b},T())):n.createElement("div",{className:P.item},n.createElement("button",{...I,type:"button",ref:b},T()))});i.displayName="Tab";const l=f=>({item:(0,t.css)({listStyle:"none",position:"relative",display:"flex",whiteSpace:"nowrap",padding:f.spacing(.5)}),link:(0,t.css)({color:f.colors.text.secondary,padding:f.spacing(1,1.5,.5),borderRadius:f.shape.radius.default,display:"block",height:"100%",svg:{marginRight:f.spacing(1)},"&:focus-visible":(0,r.getFocusStyles)(f),"&::before":{display:"block",content:'" "',position:"absolute",left:0,right:0,height:"4px",borderRadius:f.shape.radius.default,bottom:0}}),notActive:(0,t.css)({"a:hover, &:hover, &:focus":{color:f.colors.text.primary,"&::before":{backgroundColor:f.colors.action.hover}}}),activeStyle:(0,t.css)({label:"activeTabStyle",color:f.colors.text.primary,overflow:"hidden","&::before":{backgroundImage:f.colors.gradients.brandHorizontal}}),suffix:(0,t.css)({marginLeft:f.spacing(1)})})},40980:(Y,A,e)=>{"use strict";e.d(A,{J:()=>s});var t=e(32196),n=e(96540),o=e(40845);const s=({children:g,className:u,...d})=>{const i=(0,o.of)(r);return n.createElement("div",{...d,className:(0,t.cx)(i.tabContent,u)},g)},r=g=>({tabContent:(0,t.css)({background:g.colors.background.primary})})},63021:(Y,A,e)=>{"use strict";e.d(A,{U:()=>s});var t=e(32196),n=e(96540),o=e(40845);const s=n.forwardRef(({children:g,className:u,hideBorder:d=!1},i)=>{const l=(0,o.of)(r);return n.createElement("div",{className:(0,t.cx)(l.tabsWrapper,d&&l.noBorder,u),ref:i},n.createElement("div",{className:l.tabs,role:"tablist"},g))}),r=g=>({tabsWrapper:(0,t.css)({borderBottom:`1px solid ${g.colors.border.weak}`,overflowX:"auto"}),noBorder:(0,t.css)({borderBottom:0}),tabs:(0,t.css)({position:"relative",display:"flex",height:`${g.components.menuTabs.height}px`,alignItems:"center"})});s.displayName="TabsBar"},90685:(Y,A,e)=>{"use strict";e.d(A,{s:()=>u});var t=e(32196),n=e(96540),o=e(13544),s=e(40845),r=e(14578),g=e(53402);const u=n.forwardRef(({label:i,active:l,icon:f,counter:c,className:h,suffix:p,onChangeTab:m,href:a,...v},E)=>{const D=(0,s.of)(d),b=()=>n.createElement(n.Fragment,null,f&&n.createElement(r.I,{name:f}),i,typeof c=="number"&&n.createElement(g.p,{value:c}),p&&n.createElement(p,{className:D.suffix})),P=(0,t.cx)(D.link,l&&D.activeStyle);return n.createElement("a",{href:a,className:P,...v,onClick:m,"aria-label":v["aria-label"]||o.Tp.components.Tab.title(i),role:"tab","aria-selected":l,ref:E},b())});u.displayName="Tab";const d=i=>({link:(0,t.css)({padding:"6px 12px",display:"block",height:"100%",cursor:"pointer",position:"relative",color:i.colors.text.primary,svg:{marginRight:i.spacing(1)},"&:hover, &:focus":{textDecoration:"underline"}}),activeStyle:(0,t.css)({label:"activeTabStyle",color:i.colors.text.maxContrast,overflow:"hidden","&::before":{display:"block",content:'" "',position:"absolute",left:0,width:"4px",bottom:"2px",top:"2px",borderRadius:i.shape.radius.default,backgroundImage:"linear-gradient(0deg, #f05a28 30%, #fbca0a 99%)"}}),suffix:(0,t.css)({marginLeft:i.spacing(1)})})},78369:(Y,A,e)=>{"use strict";e.d(A,{v:()=>l});var t=e(32196),n=e(96540),o=e(70255),s=e(40845),r=e(69613),g=e(72129),u=e(14578);const d=(0,n.forwardRef)(({name:h,onClick:p,icon:m,className:a,colorIndex:v,...E},D)=>{const b=(0,s.$j)(),P=c(b,h,v),y=M=>{M.preventDefault(),M.stopPropagation(),p?.(h,M)},T=(0,t.cx)(P.wrapper,a,{[P.hover]:p!==void 0});return p?n.createElement("button",{...E,className:T,onClick:y,ref:D},m&&n.createElement(u.I,{name:m}),h):n.createElement("span",{...E,className:T,ref:D},m&&n.createElement(u.I,{name:m}),h)});d.displayName="Tag";const i=({rootProps:h})=>{const p=(0,s.of)(f);return n.createElement(o.A,{width:60,height:22,containerClassName:p.container,...h})},l=(0,g.j)(d,i),f=()=>({container:(0,t.css)({lineHeight:1})}),c=(h,p,m)=>{let a;return m===void 0?a=(0,r.MC)(p):a=(0,r.yC)(m),{wrapper:(0,t.css)({appearance:"none",borderStyle:"none",fontWeight:h.typography.fontWeightMedium,fontSize:h.typography.size.sm,lineHeight:h.typography.bodySmall.lineHeight,verticalAlign:"baseline",backgroundColor:a.color,color:h.v1.palette.gray98,whiteSpace:"nowrap",textShadow:"none",padding:"3px 6px",borderRadius:h.shape.radius.default}),hover:(0,t.css)({"&:hover":{opacity:.85,cursor:"pointer"}})}}},64149:(Y,A,e)=>{"use strict";e.d(A,{L:()=>d});var t=e(32196),n=e(96540),o=e(40845),s=e(72129),r=e(78369);const g=(0,n.memo)((0,n.forwardRef)(({displayMax:f,tags:c,icon:h,onClick:p,className:m,getAriaLabel:a,getColorIndex:v},E)=>{const D=(0,o.$j)(),b=l(D,!!(f&&f>0)),P=c.length,y=f?c.slice(0,f):c;return n.createElement("ul",{className:(0,t.cx)(b.wrapper,m),"aria-label":"Tags",ref:E},y.map((T,M)=>n.createElement("li",{className:b.li,key:T},n.createElement(r.v,{name:T,icon:h,onClick:p,"aria-label":a?.(T,M),"data-tag-id":M,colorIndex:v?.(T,M)}))),f&&f>0&&P-f>0&&n.createElement("span",{className:b.moreTagsLabel},"+ ",P-f))}));g.displayName="TagList";const u=({rootProps:f})=>{const c=(0,o.of)(i);return n.createElement("div",{className:c.container,...f},n.createElement(r.v.Skeleton,null),n.createElement(r.v.Skeleton,null))},d=(0,s.j)(g,u),i=f=>({container:(0,t.css)({display:"flex",gap:f.spacing(1)})}),l=(f,c)=>({wrapper:(0,t.css)({position:"relative",alignItems:c?"center":"unset",display:"flex",flex:"1 1 auto",flexWrap:"wrap",flexShrink:c?0:1,justifyContent:"flex-end",gap:"6px"}),moreTagsLabel:(0,t.css)({color:f.colors.text.secondary,fontSize:f.typography.size.sm}),li:(0,t.css)({listStyle:"none"})})},79924:(Y,A,e)=>{"use strict";e.d(A,{u:()=>l});var t=e(32196),n=e(96540),o=e(40845),s=e(55852),r=e(10354),g=e(69613),u=e(29158);const d=({name:c,disabled:h,onRemove:p})=>{const{color:m,borderColor:a}=(0,n.useMemo)(()=>(0,g.MC)(c),[c]),v=(0,o.of)(i);return n.createElement("li",{className:v.itemStyle,style:{backgroundColor:m,borderColor:a}},n.createElement("span",{className:v.nameStyle},c),n.createElement(u.K,{name:"times",size:"lg",disabled:h,tooltip:`Remove "${c}" tag`,onClick:()=>p(c),className:v.buttonStyles}))},i=c=>{const h=c.spacing.gridSize*3;return{itemStyle:(0,t.css)({display:"flex",gap:"3px",alignItems:"center",height:`${h}px`,lineHeight:`${h-2}px`,color:"#fff",borderWidth:"1px",borderStyle:"solid",borderRadius:c.shape.radius.default,padding:`0 ${c.spacing(.5)}`,whiteSpace:"nowrap",textShadow:"none",fontWeight:500,fontSize:c.typography.size.sm}),nameStyle:(0,t.css)({maxWidth:"25ch",textOverflow:"ellipsis",overflow:"hidden"}),buttonStyles:(0,t.css)({margin:0,"&:hover::before":{display:"none"}})}},l=({placeholder:c="New tag (enter key to add)",tags:h=[],onChange:p,width:m,className:a,disabled:v,addOnBlur:E,invalid:D,id:b})=>{const[P,y]=(0,n.useState)(""),T=(0,o.of)(f),M=(0,o.$j)(),I=(0,n.useCallback)(L=>{y(L.target.value)},[]),x=L=>{p(h.filter(U=>U!==L))},S=L=>{L?.preventDefault(),h.includes(P)||p(h.concat(P)),y("")},O=()=>{E&&P&&S()},C=L=>{L.key==="Enter"&&P!==""&&S(L)};return n.createElement("div",{className:(0,t.cx)(T.wrapper,a,m?(0,t.css)({width:M.spacing(m)}):"")},n.createElement(r.p,{id:b,disabled:v,placeholder:c,onChange:I,value:P,onKeyDown:C,onBlur:O,invalid:D,suffix:n.createElement(s.$n,{fill:"text",className:T.addButtonStyle,onClick:S,size:"md",disabled:P.length<=0},"Add")}),h?.length>0&&n.createElement("ul",{className:T.tags},h.map(L=>n.createElement(d,{key:L,name:L,onRemove:x,disabled:v}))))},f=c=>({wrapper:(0,t.css)({minHeight:c.spacing(4),display:"flex",flexDirection:"column",gap:c.spacing(1),flexWrap:"wrap"}),tags:(0,t.css)({display:"flex",justifyContent:"flex-start",flexWrap:"wrap",gap:c.spacing(.5)}),addButtonStyle:(0,t.css)({margin:`0 -${c.spacing(1)}`})})},94753:(Y,A,e)=>{"use strict";e.d(A,{E:()=>d});var t=e(32196),n=e(96540),o=e(40845),s=e(65848),r=e(56034);const g=n.forwardRef(({childElement:l,children:f},c)=>{const[h,p]=(0,n.useState)(!1),m=(0,n.useRef)(null);(0,n.useImperativeHandle)(c,()=>m.current);const a=(0,n.useMemo)(()=>new ResizeObserver(E=>{for(const D of E)D.target.clientWidth&&D.target.scrollWidth&&(D.target.scrollWidth>D.target.clientWidth&&p(!0),D.target.scrollWidth<=D.target.clientWidth&&p(!1))}),[]);(0,n.useEffect)(()=>{const{current:E}=m;return E&&a.observe(E),()=>{a.disconnect()}},[p,a]);const v=E=>typeof E=="string"?E:s.renderToStaticMarkup(n.createElement(n.Fragment,null,E)).replace(/(<([^>]+)>)/gi,"");return h?n.createElement(r.m,{ref:m,content:v(f)},l(void 0)):l(m)});g.displayName="TruncatedText";var u=e(71356);const d=n.forwardRef(({element:l="span",variant:f,weight:c,color:h,truncate:p,italic:m,textAlignment:a,children:v,...E},D)=>{const b=(0,o.of)(i,l,f,h,c,p,m,a),P=y=>(0,n.createElement)(l,{...E,style:void 0,className:b,ref:y},v);return!p||l==="span"?P(void 0):n.createElement(g,{childElement:P,children:v,ref:D})});d.displayName="Text";const i=(l,f,c,h,p,m,a,v)=>(0,t.css)([{margin:0,padding:0,...(0,u.d$)(l,f,c)},c&&{...l.typography[c]},h&&{color:(0,u.vT)(h,l)},p&&{fontWeight:(0,u.iV)(p,l)},m&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},a&&{fontStyle:"italic"},v&&{textAlign:v}])},71356:(Y,A,e)=>{"use strict";e.d(A,{d$:()=>o,iV:()=>t,vT:()=>n});const t=(s,r)=>{switch(s){case"bold":return r.typography.fontWeightBold;case"medium":return r.typography.fontWeightMedium;case"light":return r.typography.fontWeightLight;case"regular":case void 0:return r.typography.fontWeightRegular}},n=(s,r)=>{switch(s){case"error":return r.colors.error.text;case"success":return r.colors.success.text;case"info":return r.colors.info.text;case"warning":return r.colors.warning.text;default:return s?r.colors.text[s]:void 0}},o=(s,r,g)=>{if(g)return s.typography[g];switch(r){case"span":return;case"h1":return s.typography.h1;case"h2":return s.typography.h2;case"h3":return s.typography.h3;case"h4":return s.typography.h4;case"h5":return s.typography.h5;case"h6":return s.typography.h6;default:return s.typography.body}}},21744:(Y,A,e)=>{"use strict";e.d(A,{f:()=>r});var t=e(32196),n=e(96540),o=e(40845),s=e(87266);const r=n.forwardRef(({invalid:u,className:d,...i},l)=>{const f=(0,o.of)(g,u);return n.createElement("textarea",{...i,className:(0,t.cx)(f.textarea,d),ref:l})}),g=(u,d=!1)=>({textarea:(0,t.cx)((0,s.Xb)(u),(0,s.gm)(u),(0,t.css)({display:"block",borderRadius:u.shape.radius.default,padding:`${u.spacing.gridSize/4}px ${u.spacing.gridSize}px`,width:"100%",borderColor:d?u.colors.error.border:u.components.input.borderColor}))});r.displayName="TextArea"},60782:(Y,A,e)=>{"use strict";e.d(A,{G:()=>l});var t=e(32196),n=e(95361),o=e(18491),s=e(34743),r=e(36376),g=e(96540),u=e(40845),d=e(18976),i=e(29158);const l=g.memo(({children:c,theme:h="info",placement:p="auto",content:m,title:a,closeButton:v=!0,onClose:E,footer:D,fitContent:b=!1,onOpen:P,show:y})=>{const T=(0,g.useRef)(null),M=(0,u.$j)(),I=(0,u.of)(f),x=I[h],[S,O]=(0,g.useState)(y),C=y??S,L=[(0,n.cY)(8),(0,o.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,o.BN)(),(0,s.UE)({element:T})],{context:U,refs:R,floatingStyles:B}=(0,r.we)({open:C,placement:(0,d.O)(p),onOpenChange:G=>{y===void 0&&O(G),G?P?.():E?.()},middleware:L,whileElementsMounted:o.ll,strategy:"fixed"}),H=(0,r.kp)(U),W=(0,r.s9)(U),{getReferenceProps:N,getFloatingProps:V}=(0,r.bv)([W,H]);return g.createElement(g.Fragment,null,g.cloneElement(c,{ref:R.setReference,tabIndex:0,"aria-expanded":C,...N()}),C&&g.createElement(r.s3,{context:U,modal:!1,closeOnFocusOut:!1},g.createElement("div",{"data-testid":"toggletip-content",className:(0,t.cx)(x.container,{[I.fitContent]:b}),ref:R.setFloating,style:B,...V()},g.createElement(r.ie,{strokeWidth:.3,stroke:M.colors.border.weak,className:x.arrow,ref:T,context:U}),!!a&&g.createElement("div",{className:x.header},a),v&&g.createElement("div",{className:x.headerClose},g.createElement(i.K,{"aria-label":"Close",name:"times","data-testid":"toggletip-header-close",onClick:()=>{O(!1),E?.()}})),g.createElement("div",{className:x.body},(typeof m=="string"||g.isValidElement(m))&&m,typeof m=="function"&&m({})),!!D&&g.createElement("div",{className:x.footer},D))))});l.displayName="Toggletip";const f=c=>{const h=(0,d.f)(c,c.colors.background.primary,c.colors.border.weak,c.components.tooltip.text,{topBottom:2,rightLeft:2}),p=(0,d.f)(c,c.colors.error.main,c.colors.error.main,c.colors.error.contrastText,{topBottom:2,rightLeft:2});return{info:h,error:p,fitContent:(0,t.css)({maxWidth:"fit-content"})}}},27746:(Y,A,e)=>{"use strict";e.d(A,{I:()=>l});var t=e(32196),n=e(96540),o=e(8887),s=e(13544),r=e(40845),g=e(16797),u=e(55852),d=e(14578),i=e(56034);const l=(0,n.forwardRef)(({tooltip:p,icon:m,iconSize:a,className:v,children:E,imgSrc:D,imgAlt:b,fullWidth:P,isOpen:y,narrow:T,variant:M="default",iconOnly:I,"aria-label":x,isHighlighted:S,...O},C)=>{const L=(0,r.of)(h),U=(0,t.cx)({[L.button]:!0,[L.buttonFullWidth]:P,[L.narrow]:T},L[M],v),R=(0,t.cx)({[L.content]:!0,[L.contentWithIcon]:!!m,[L.contentWithRightIcon]:y!==void 0}),B=n.createElement("button",{ref:C,className:U,"aria-label":f(x,p),"aria-expanded":y,...O},c(m,a),D&&n.createElement("img",{className:L.img,src:D,alt:b??""}),E&&!I&&n.createElement("div",{className:R},E),y===!1&&n.createElement(d.I,{name:"angle-down"}),y===!0&&n.createElement(d.I,{name:"angle-up"}),S&&n.createElement("div",{className:L.highlight}));return p?n.createElement(i.m,{ref:C,content:p,placement:"bottom"},B):B});l.displayName="ToolbarButton";function f(p,m){return p||(m?s.Tp.components.PageToolbar.item(m):void 0)}function c(p,m){return p?(0,o.n6)(p)?n.createElement(d.I,{name:p,size:`${m||"lg"}`}):p:null}const h=p=>{const m=(0,u.U_)(p,"primary","solid"),a=(0,u.U_)(p,"destructive","solid"),v=(0,t.css)({color:p.colors.text.primary,background:p.colors.secondary.main,"&:hover":{color:p.colors.text.primary,background:p.colors.secondary.shade,border:`1px solid ${p.colors.border.medium}`}});return{button:(0,t.css)({label:"toolbar-button",position:"relative",display:"flex",alignItems:"center",height:p.spacing(p.components.height.md),padding:p.spacing(0,1),borderRadius:p.shape.radius.default,lineHeight:`${p.components.height.md*p.spacing.gridSize-2}px`,fontWeight:p.typography.fontWeightMedium,border:`1px solid ${p.colors.secondary.border}`,whiteSpace:"nowrap",transition:p.transitions.create(["background","box-shadow","border-color","color"],{duration:p.transitions.duration.short}),"&:focus, &:focus-visible":{...(0,g.getFocusStyles)(p),zIndex:1},"&:focus:not(:focus-visible)":(0,g.getMouseFocusStyles)(p),"&:hover":{boxShadow:p.shadows.z1},"&[disabled], &:disabled":{cursor:"not-allowed",opacity:p.colors.action.disabledOpacity,background:p.colors.action.disabledBackground,boxShadow:"none","&:hover":{color:p.colors.text.disabled,background:p.colors.action.disabledBackground,boxShadow:"none"}}}),default:(0,t.css)({color:p.colors.text.secondary,background:"transparent",border:"1px solid transparent","&:hover":{color:p.colors.text.primary,background:p.colors.background.secondary}}),canvas:v,active:(0,t.cx)(v,(0,t.css)({"&::before":{display:"block",content:'" "',position:"absolute",left:0,right:0,height:"2px",bottom:0,borderRadius:p.shape.radius.default,backgroundImage:p.colors.gradients.brandHorizontal}})),primary:(0,t.css)(m),destructive:(0,t.css)(a),narrow:(0,t.css)({padding:p.spacing(0,.5)}),img:(0,t.css)({width:"16px",height:"16px",marginRight:p.spacing(1)}),buttonFullWidth:(0,t.css)({flexGrow:1}),content:(0,t.css)({flexGrow:1}),contentWithIcon:(0,t.css)({display:"none",paddingLeft:p.spacing(1),[`@media ${g.mediaUp(p.v1.breakpoints.md)}`]:{display:"block"}}),contentWithRightIcon:(0,t.css)({paddingRight:p.spacing(.5)}),highlight:(0,t.css)({backgroundColor:p.colors.success.main,borderRadius:p.shape.radius.circle,width:"6px",height:"6px",position:"absolute",top:"-3px",right:"-3px",zIndex:1})}}},15068:(Y,A,e)=>{"use strict";e.d(A,{U:()=>i});var t=e(32196),n=e(80279),o=e(7887),s=e(82148),r=e(96540),g=e(40845),u=e(17464),d=e(27746);const i=(0,r.forwardRef)(({alignment:f="left",className:c,children:h,...p},m)=>{const a=r.Children.toArray(h).filter(C=>C!=null),[v,E]=(0,r.useState)(Array(a.length).fill(!1)),D=(0,r.useRef)(null),[b,P]=(0,r.useState)(!1),y=(0,r.useRef)(null),T=(0,r.createRef)(),{overlayProps:M}=(0,s.e)({onClose:()=>P(!1),isDismissable:!0,isOpen:b,shouldCloseOnInteractOutside:C=>{const L=(0,u.gF)();return!y.current?.contains(C)&&!L.contains(C)}},T),{dialogProps:I}=(0,n.s)({},T),x=(0,g.$j)(),S=f==="left"?v.indexOf(!1)-1:v.length,O=l(x,S,f);return(0,r.useLayoutEffect)(()=>{const C=new IntersectionObserver(L=>{L.forEach(U=>{if(U.target instanceof HTMLElement&&U.target.parentNode){const R=Array.prototype.indexOf.call(U.target.parentNode.children,U.target);E(B=>{const H=[...B];return H[R]=U.isIntersecting,H})}})},{threshold:1,root:D.current});return D.current&&Array.from(D.current.children).forEach(L=>{L instanceof HTMLElement&&L!==y.current&&C.observe(L)}),()=>C.disconnect()},[h]),r.createElement("div",{ref:D,className:(0,t.cx)(O.container,c),...p},a.map((C,L)=>r.createElement("div",{key:L,style:{order:L,visibility:v[L]?"visible":"hidden"},className:O.childWrapper},C)),v.includes(!1)&&r.createElement("div",{ref:y,className:O.overflowButton},r.createElement(d.I,{variant:b?"active":"default",tooltip:"Show more items",onClick:()=>P(!b),icon:"ellipsis-v",iconOnly:!0,narrow:!0}),b&&r.createElement(o.n1,{contain:!0,autoFocus:!0},r.createElement("div",{className:O.overflowItems,ref:T,...M,...I},a.map((C,L)=>!v[L]&&C)))))});i.displayName="ToolbarButtonRow";const l=(f,c,h)=>({overflowButton:(0,t.css)({order:c}),overflowItems:(0,t.css)({alignItems:"center",backgroundColor:f.colors.background.primary,borderRadius:f.shape.radius.default,boxShadow:f.shadows.z2,display:"flex",flexWrap:"wrap",gap:f.spacing(1),marginTop:f.spacing(1),maxWidth:"80vw",padding:f.spacing(.5,1),position:"absolute",right:0,top:"100%",width:"max-content",zIndex:f.zIndex.dropdown}),container:(0,t.css)({alignItems:"center",display:"flex",gap:f.spacing(1),justifyContent:h==="left"?"flex-start":"flex-end",minWidth:0,position:"relative"}),childWrapper:(0,t.css)({alignItems:"center",display:"flex",gap:f.spacing(1)})})},13840:(Y,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(96540),n=e(16802),o=e(69703),s=e(22669),r=e(17464);const g={transitionProperty:"opacity",transitionDuration:"200ms",transitionTimingFunction:"linear",opacity:0},u={exited:{opacity:0},entering:{opacity:0},entered:{opacity:1,transitionDelay:"0s"},exiting:{opacity:0,transitionDelay:"500ms"}};class d extends t.PureComponent{render(){const{content:l,show:f,placement:c,className:h,wrapperClassName:p,renderArrow:m,referenceElement:a,...v}=this.props;return t.createElement(n.mS,null,t.createElement(s.Ay,{in:f,timeout:100,mountOnEnter:!0,unmountOnExit:!0},E=>t.createElement(r.ZL,null,t.createElement(o.N,{placement:c,referenceElement:a,modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"eventListeners",options:{scroll:!0,resize:!0}}]},({ref:D,style:b,placement:P,arrowProps:y,update:T})=>t.createElement("div",{ref:D,style:{...b,...g,...u[E]},"data-placement":P,className:`${p}`,...v},t.createElement("div",{className:h},typeof l=="string"&&l,t.isValidElement(l)&&t.cloneElement(l),typeof l=="function"&&l({updatePopperPosition:T}),m&&m({arrowProps:y,placement:P})))))))}}},95868:(Y,A,e)=>{"use strict";e.d(A,{I:()=>n});var t=e(96540);class n extends t.Component{constructor(){super(...arguments),this.hideTimeout=null,this.state={show:!1},this.showPopper=()=>{this.hideTimeout&&clearTimeout(this.hideTimeout),this.setState({show:!0})},this.hidePopper=()=>{this.hideTimeout=setTimeout(()=>{this.setState({show:!1})},this.props.hideAfter)}}render(){const{children:s,content:r,placement:g="auto"}=this.props,{show:u}=this.state;return s(this.showPopper,this.hidePopper,{show:u,placement:g,content:r})}}},56034:(Y,A,e)=>{"use strict";e.d(A,{m:()=>l});var t=e(95361),n=e(18491),o=e(34743),s=e(36376),r=e(96540),g=e(13544),u=e(40845),d=e(18976),i=e(17464);const l=r.forwardRef(({children:c,theme:h,interactive:p,show:m,placement:a,content:v},E)=>{const D=(0,r.useRef)(null),[b,P]=(0,r.useState)(m),y=m??b,T=[(0,t.cY)(8),(0,n.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,n.BN)(),(0,o.UE)({element:D})],{context:M,refs:I,floatingStyles:x}=(0,s.we)({open:y,placement:(0,d.O)(a),onOpenChange:P,middleware:T,whileElementsMounted:n.ll}),S=(0,r.useId)(),O=(0,s.Mk)(M,{delay:{close:p?100:0},move:!1}),C=(0,s.iQ)(M),L=(0,s.s9)(M),{getReferenceProps:U,getFloatingProps:R}=(0,s.bv)([L,O,C]),B=typeof v=="function",W=(0,u.of)(f)[h??"info"],N=(0,r.useCallback)(G=>{I.setReference(G),typeof E=="function"?E(G):E&&(E.current=G)},[E,I]),V="aria-label"in c.props&&c.props["aria-label"]===v;return r.createElement(r.Fragment,null,r.cloneElement(c,{ref:N,tabIndex:0,"aria-describedby":!V&&y?S:void 0,...U()}),y&&r.createElement(i.ZL,null,r.createElement("div",{ref:I.setFloating,style:x,...R()},r.createElement(s.ie,{className:W.arrow,ref:D,context:M}),r.createElement("div",{"data-testid":g.Tp.components.Tooltip.container,id:S,role:"tooltip",className:W.container},typeof v=="string"&&v,r.isValidElement(v)&&r.cloneElement(v),B&&v({})))))});l.displayName="Tooltip";const f=c=>{const h=(0,d.f)(c,c.components.tooltip.background,c.components.tooltip.background,c.components.tooltip.text,{topBottom:.5,rightLeft:1}),p=(0,d.f)(c,c.colors.error.main,c.colors.error.main,c.colors.error.contrastText,{topBottom:.5,rightLeft:1});return{info:h,["info-alt"]:h,error:p}}},5313:(Y,A,e)=>{"use strict";e.d(A,{z:()=>o});var t=e(96540);function n(s,r){const g=[];return s.forEach(u=>{g.push(u.start,u.end+1)}),g[0]!==0&&g.unshift(0),g[g.length-1]!==r&&g.push(r),g}const o=s=>{let{highlightParts:r,text:g,highlightClassName:u}=s;if(!r?.length)return null;let d=[],i=n(r,g.length),l=r[0].start===0;for(let f=1;f<i.length;f++){let c=i[f-1],h=i[f];d.push((0,t.createElement)(l?"mark":"span",{key:f-1,className:l?u:void 0},g.substring(c,h))),l=!l}return t.createElement("div",null,d)}},2056:(Y,A,e)=>{"use strict";e.d(A,{p:()=>r});var t=e(96540),n=e(83195),o=e(3988);function s(g){return`Custom unit: ${g}`}class r extends t.PureComponent{constructor(){super(...arguments),this.onChange=u=>{this.props.onChange(u.value)}}render(){const{value:u,width:d}=this.props;let i;const f=(0,n.Ke)().map(c=>{const h=c.submenu.map(p=>{const m={label:p.text,value:p.value};return p.value===u&&(i=m),m});return{label:c.text,value:c.text,items:h}});return u&&!i&&(i={value:u,label:u}),t.createElement(o.v,{width:d,initialValue:i&&i.label,allowCustomValue:!0,changeOnSelect:!1,formatCreateLabel:s,options:f,placeholder:"Choose",onSelect:this.props.onChange})}}},12942:(Y,A,e)=>{"use strict";e.d(A,{e:()=>r});var t=e(32196),n=e(96540),o=e(40845),s=e(16795);const r=({src:u,alt:d,width:i,height:l})=>{const f=(0,o.of)(g,i,l);return n.createElement("img",{className:f.image,src:u,alt:d})},g=(u,d=3,i=3)=>({image:(0,t.css)([(0,s.Y)(u,d,l=>({width:u.spacing(l)})),(0,s.Y)(u,i,l=>({height:u.spacing(l)})),{borderRadius:u.shape.radius.circle}])})},99635:(Y,A,e)=>{"use strict";e.d(A,{n:()=>d});var t=e(32196),n=e(96540),o=e(47232),s=e(40845),r=e(56034);const g=f=>{const h=(0,o.KQ)(f).diff((0,o.KQ)(),"hours",!1);return`Active last ${(Math.floor(-h/24)+1)*24}h`},u=f=>{if(!f)return"";const[c,h]=f.split(" ");return`${c?.[0]??""}${h?.[0]??""}`.toUpperCase()},d=({userView:f,className:c,children:h,onClick:p,showTooltip:m=!0})=>{const{user:a,lastActiveAt:v}=f,E=(0,o.KQ)(v).diff((0,o.KQ)(),"minutes",!0)>=-15,D=(0,s.$j)(),b=(0,n.useMemo)(()=>l(D,E),[D,E]),P=n.createElement("button",{type:"button",onClick:p,className:(0,t.cx)(b.container,p&&b.pointer,c),"aria-label":`${a.name} icon`},h?n.createElement("div",{className:(0,t.cx)(b.content,b.textContent)},h):a.avatarUrl?n.createElement("img",{className:b.content,src:a.avatarUrl,alt:`${a.name} avatar`}):n.createElement("div",{className:(0,t.cx)(b.content,b.textContent)},u(a.name)));if(m){const y=n.createElement("div",{className:b.tooltipContainer},n.createElement("div",{className:b.tooltipName},a.name),n.createElement("div",{className:b.tooltipDate},E?n.createElement("div",{className:b.dotContainer},n.createElement("span",null,"Active last 15m"),n.createElement("span",{className:b.dot})):g(v)));return n.createElement(r.m,{content:y},P)}else return P},i=f=>`0 0 0 1px ${f}`,l=(f,c)=>{const h=c?f.colors.primary.main:f.colors.border.medium,p=c?f.colors.primary.text:f.colors.border.strong;return{container:(0,t.css)({padding:0,width:"30px",height:"30px",background:"none",border:"none",borderRadius:f.shape.radius.circle,"& > *":{borderRadius:f.shape.radius.circle}}),content:(0,t.css)({lineHeight:"24px",maxWidth:"100%",border:`3px ${f.colors.background.primary} solid`,boxShadow:i(h),backgroundClip:"padding-box","&:hover":{boxShadow:i(p)}}),textContent:(0,t.css)({background:f.colors.background.primary,padding:0,color:f.colors.text.secondary,textAlign:"center",fontSize:f.typography.size.sm,"&:focus":{boxShadow:i(h)}}),tooltipContainer:(0,t.css)({textAlign:"center",padding:f.spacing(0,1)}),tooltipName:(0,t.css)({fontWeight:f.typography.fontWeightBold}),tooltipDate:(0,t.css)({fontWeight:f.typography.fontWeightRegular}),dotContainer:(0,t.css)({display:"flex",alignItems:"center"}),dot:(0,t.css)({height:"6px",width:"6px",backgroundColor:f.colors.primary.main,borderRadius:f.shape.radius.circle,display:"inline-block",marginLeft:f.spacing(1)}),pointer:(0,t.css)({cursor:"pointer"})}}},51986:(Y,A,e)=>{"use strict";e.d(A,{i:()=>g});var t=e(96540),n=e(13544),o=e(40845),s=e(55852),r=e(88323);function g({"aria-label":u,label:d,icon:i,options:l,onChange:f,variant:c,minWidth:h=16,size:p="sm",isFullWidth:m=!0,menuPlacement:a,fill:v,buttonCss:E}){const[D,b]=(0,t.useState)(!1),P=(0,o.$j)();return t.createElement(t.Fragment,null,!D&&t.createElement(s.$n,{size:p||"sm",className:E,icon:i||"plus",onClick:()=>b(!0),variant:c,fill:v,fullWidth:m,"data-testid":n.Tp.components.ValuePicker.button(u??d)},d),D&&t.createElement("span",{style:{minWidth:P.spacing(h),flexGrow:m?1:void 0}},t.createElement(r.l6,{placeholder:d,options:l,"aria-label":n.Tp.components.ValuePicker.select(u??d),isOpen:!0,onCloseMenu:()=>b(!1),autoFocus:!0,onChange:y=>{b(!1),f(y)},menuPlacement:a})))}},67266:(Y,A,e)=>{"use strict";e.d(A,{KU:()=>u});var t=e(32196),n=e(96540),o=e(49185),s=e(40845),r=e(16797),g=e(40276);const u=({width:l,height:f,legend:c,children:h})=>{const p=(0,s.$j)(),m=(0,s.of)(d),a={display:"flex",width:`${l}px`,height:`${f}px`},[v,E]=(0,o.A)();if(!c)return n.createElement(n.Fragment,null,n.createElement("div",{style:a,className:m.viz},h(l,f)));let{placement:D,maxHeight:b="35%",maxWidth:P="60%"}=c.props;document.body.clientWidth<p.breakpoints.values.lg&&(D="bottom");let y=null;const T={};switch(D){case"bottom":a.flexDirection="column",T.maxHeight=b,E.height&&(y={width:l,height:f-E.height});break;case"right":a.flexDirection="row",T.maxWidth=P,E.width&&(y={width:l-E.width,height:f}),c.props.width&&(T.width=c.props.width,y={width:l-c.props.width,height:f});break}return y?.width===0&&(y.width=l),y?.height===0&&(y.height=f),n.createElement("div",{style:a},n.createElement("div",{className:m.viz},y&&h(y.width,y.height)),n.createElement("div",{style:T,ref:v},n.createElement(g.E,{hideHorizontalTrack:!0},c)))},d=l=>({viz:(0,t.css)({flexGrow:2,borderRadius:l.shape.radius.default,"&:focus-visible":(0,r.getFocusStyles)(l)})}),i=({children:l})=>n.createElement(n.Fragment,null,l);u.Legend=i},94536:(Y,A,e)=>{"use strict";e.d(A,{p:()=>r});var t=e(32196),n=e(96540),o=e(8066),s=e(40845);const r=n.memo(n.forwardRef(({color:u,className:d,gradient:i,...l},f)=>{const c=(0,s.$j)(),h=(0,s.of)(g);let p;if(i){const a=o.uf.get(i).getColors?.(c);a?.length?p=`linear-gradient(90deg, ${a.join(", ")})`:p=c.visualization.getColorByName("")}else p=u;const m={background:p,width:"14px",height:"4px",borderRadius:c.shape.radius.pill,display:"inline-block",marginRight:"8px"};return n.createElement("div",{"data-testid":"series-icon",ref:f,className:(0,t.cx)(d,h.forcedColors),style:m,...l})})),g=()=>({forcedColors:(0,t.css)({"@media (forced-colors: active)":{forcedColorAdjust:"none"}})});r.displayName="SeriesIcon"},55726:(Y,A,e)=>{"use strict";e.d(A,{t:()=>I});var t=e(96540),n=e(69129),o=e(52622),s=e(79041),r=e(88895),g=e(32196),u=e(40845),d=e(1551),i=e(33552),l=e(34375);const f=({items:x,itemRenderer:S,onLabelMouseOver:O,onLabelMouseOut:C,onLabelClick:L,placement:U,className:R,readonly:B})=>{const H=(0,u.of)(c);S||(S=N=>t.createElement(l.M,{item:N,onLabelClick:L,onLabelMouseOver:O,onLabelMouseOut:C,readonly:B}));const W=N=>`${N.getItemKey?N.getItemKey():N.label}`;switch(U){case"right":{const N=(V,G)=>t.createElement("span",{className:H.itemRight},S(V,G));return t.createElement("div",{className:(0,g.cx)(H.rightWrapper,R)},t.createElement(i.B,{items:x,renderItem:N,getItemKey:W}))}case"bottom":default:{const N=x.filter(_=>_.yAxis===1),V=x.filter(_=>_.yAxis!==1),G=(_,K)=>t.createElement("span",{className:H.itemBottom},S(_,K));return t.createElement("div",{className:(0,g.cx)(H.bottomWrapper,R)},N.length>0&&t.createElement("div",{className:H.section},t.createElement(d.c,{items:N,renderItem:G,getItemKey:W})),V.length>0&&t.createElement("div",{className:(0,g.cx)(H.section,H.sectionRight)},t.createElement(d.c,{items:V,renderItem:G,getItemKey:W})))}}};f.displayName="VizLegendList";const c=x=>{const S=(0,g.css)({paddingRight:"10px",display:"flex",fontSize:x.typography.bodySmall.fontSize,whiteSpace:"nowrap"});return{itemBottom:S,itemRight:(0,g.cx)(S,(0,g.css)({marginBottom:x.spacing(.5)})),rightWrapper:(0,g.css)({paddingLeft:x.spacing(.5)}),bottomWrapper:(0,g.css)({display:"flex",flexWrap:"wrap",justifyContent:"space-between",width:"100%",paddingLeft:x.spacing(.5),gap:"15px 25px"}),section:(0,g.css)({display:"flex"}),sectionRight:(0,g.css)({justifyContent:"flex-end",flexGrow:1,flexBasis:"50%"})}};var h=e(14578),p=e(83195),m=e(16797),a=e(94134);const v=({item:x,onLabelClick:S,onLabelMouseOver:O,onLabelMouseOut:C,className:L,readonly:U})=>{const R=(0,u.of)(E),B=(0,t.useCallback)(N=>{O&&O(x,N)},[x,O]),H=(0,t.useCallback)(N=>{C&&C(x,N)},[x,C]),W=(0,t.useCallback)(N=>{S&&S(x,N)},[x,S]);return t.createElement("tr",{className:(0,g.cx)(R.row,L)},t.createElement("td",null,t.createElement("span",{className:R.itemWrapper},t.createElement(a.R,{color:x.color,seriesName:x.label,readonly:U}),t.createElement("button",{disabled:U,type:"button",title:x.label,onBlur:H,onFocus:B,onMouseOver:B,onMouseOut:H,onClick:U?void 0:W,className:(0,g.cx)(R.label,x.disabled&&R.labelDisabled)},x.label," ",x.yAxis===2&&t.createElement("span",{className:R.yAxisLabel},"(right y-axis)")))),x.getDisplayValues&&x.getDisplayValues().map((N,V)=>t.createElement("td",{className:R.value,key:`${N.title}-${V}`},(0,p.cN)(N))))};v.displayName="LegendTableItem";const E=x=>{const S=m.hoverColor(x.colors.background.primary,x);return{row:(0,g.css)({label:"LegendRow",fontSize:x.v1.typography.size.sm,borderBottom:`1px solid ${x.colors.border.weak}`,td:{padding:x.spacing(.25,1),whiteSpace:"nowrap"},"&:hover":{background:S}}),label:(0,g.css)({label:"LegendLabel",whiteSpace:"nowrap",background:"none",border:"none",fontSize:"inherit",padding:0,maxWidth:"600px",textOverflow:"ellipsis",overflow:"hidden"}),labelDisabled:(0,g.css)({label:"LegendLabelDisabled",color:x.colors.text.disabled}),itemWrapper:(0,g.css)({display:"flex",whiteSpace:"nowrap",alignItems:"center"}),value:(0,g.css)({textAlign:"right"}),yAxisLabel:(0,g.css)({color:x.colors.text.secondary})}},D="Name",b=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}).compare,P=({items:x,sortBy:S,sortDesc:O,itemRenderer:C,className:L,onToggleSort:U,onLabelClick:R,onLabelMouseOver:B,onLabelMouseOut:H,readonly:W,isSortable:N})=>{const V=(0,u.of)(y),G={};N&&(G[D]="");for(const _ of x)if(_.getDisplayValues)for(const K of _.getDisplayValues())G[K.title??"?"]=K.description??"";if(S!=null){let _=new Map;x.forEach(j=>{if(S!==D&&j.getDisplayValues){const k=j.getDisplayValues().find(ee=>ee.title===S),Q=k==null||Number.isNaN(k.numeric)?-1/0:k.numeric;_.set(j,Q)}});let K=O?-1:1;S===D?x.sort((j,k)=>K*b(j.label,k.label)):x.sort((j,k)=>{const Q=_.get(j)??0,ee=_.get(k)??0;return K*(Q-ee)})}return C||(C=(_,K)=>t.createElement(v,{key:`${_.label}-${K}`,item:_,onLabelClick:R,onLabelMouseOver:B,onLabelMouseOut:H,readonly:W})),t.createElement("table",{className:(0,g.cx)(V.table,L)},t.createElement("thead",null,t.createElement("tr",null,!N&&t.createElement("th",null),Object.keys(G).map(_=>t.createElement("th",{title:G[_],key:_,className:(0,g.cx)(V.header,U&&V.headerSortable,N&&V.nameHeader,{[V.withIcon]:S===_}),onClick:()=>{U&&U(_)}},_,S===_&&t.createElement(h.I,{size:"xs",name:O?"angle-down":"angle-up"}))))),t.createElement("tbody",null,x.map(C)))},y=x=>({table:(0,g.css)({width:"100%","th:first-child":{width:"100%",borderBottom:`1px solid ${x.colors.border.weak}`}}),header:(0,g.css)({color:x.colors.primary.text,fontWeight:x.typography.fontWeightMedium,borderBottom:`1px solid ${x.colors.border.weak}`,padding:x.spacing(.25,1,.25,1),fontSize:x.typography.bodySmall.fontSize,textAlign:"right",whiteSpace:"nowrap"}),nameHeader:(0,g.css)({textAlign:"left",paddingLeft:"30px"}),withIcon:(0,g.css)({paddingRight:"4px"}),headerSortable:(0,g.css)({cursor:"pointer"})});var T=e(29995);function M(x){return x.ctrlKey||x.metaKey||x.shiftKey?r.B.AppendToSelection:r.B.ToggleSelection}function I({items:x,displayMode:S,sortBy:O,seriesVisibilityChangeBehavior:C=T.K.Isolate,sortDesc:L,onLabelClick:U,onToggleSort:R,placement:B,className:H,itemRenderer:W,readonly:N,isSortable:V}){const{eventBus:G,onToggleSeriesVisibility:_,onToggleLegendSort:K}=(0,s.d2)(),j=(0,t.useCallback)((ee,ae)=>{G?.publish({type:n.b_.type,payload:{raw:ae,x:0,y:0,dataId:ee.label}})},[G]),k=(0,t.useCallback)((ee,ae)=>{G?.publish({type:n.ql.type,payload:{raw:ae,x:0,y:0,dataId:ee.label}})},[G]),Q=(0,t.useCallback)((ee,ae)=>{U&&U(ee,ae),_&&_(ee.label,C===T.K.Hide?r.B.AppendToSelection:M(ae))},[_,U,C]);switch(S){case o.lm.Table:return t.createElement(P,{className:H,items:x,placement:B,sortBy:O,sortDesc:L,onLabelClick:Q,onToggleSort:R||K,onLabelMouseOver:j,onLabelMouseOut:k,itemRenderer:W,readonly:N,isSortable:V});case o.lm.List:return t.createElement(f,{className:H,items:x,placement:B,onLabelMouseOver:j,onLabelMouseOut:k,onLabelClick:Q,itemRenderer:W,readonly:N});default:return null}}I.displayName="VizLegend"},34375:(Y,A,e)=>{"use strict";e.d(A,{M:()=>f});var t=e(32196),n=e(96540),o=e(13544),s=e(40845),r=e(94134),g=e(2543),u=e(83195),d=e(1551);const i=({stats:h})=>{const p=(0,s.of)(l);return h.length===0?null:n.createElement(d.c,{className:p.list,items:h,renderItem:m=>n.createElement("div",{className:p.item,title:m.description},m.title&&`${(0,g.capitalize)(m.title)}:`," ",(0,u.cN)(m))})},l=()=>({list:(0,t.css)({flexGrow:1,textAlign:"right"}),item:(0,t.css)({marginLeft:"8px"})});i.displayName="VizLegendStatsList";const f=({item:h,onLabelClick:p,onLabelMouseOver:m,onLabelMouseOut:a,className:v,readonly:E})=>{const D=(0,s.of)(c),b=(0,n.useCallback)(T=>{m&&m(h,T)},[h,m]),P=(0,n.useCallback)(T=>{a&&a(h,T)},[h,a]),y=(0,n.useCallback)(T=>{p&&p(h,T)},[h,p]);return n.createElement("div",{className:(0,t.cx)(D.itemWrapper,h.disabled&&D.itemDisabled,v),"data-testid":o.Tp.components.VizLegend.seriesName(h.label)},n.createElement(r.R,{seriesName:h.label,color:h.color,gradient:h.gradient,readonly:E}),n.createElement("button",{disabled:E,type:"button",onBlur:P,onFocus:b,onMouseOver:b,onMouseOut:P,onClick:y,className:D.label},h.label),h.getDisplayValues&&n.createElement(i,{stats:h.getDisplayValues()}))};f.displayName="VizLegendListItem";const c=h=>({label:(0,t.css)({label:"LegendLabel",whiteSpace:"nowrap",background:"none",border:"none",fontSize:"inherit",padding:0,userSelect:"text"}),itemDisabled:(0,t.css)({label:"LegendLabelDisabled",color:h.colors.text.disabled}),itemWrapper:(0,t.css)({label:"LegendItemWrapper",display:"flex",whiteSpace:"nowrap",alignItems:"center",flexGrow:1}),value:(0,t.css)({textAlign:"right"}),yAxisLabel:(0,t.css)({color:h.v1.palette.gray2})})},94134:(Y,A,e)=>{"use strict";e.d(A,{R:()=>r});var t=e(96540),n=e(83598),o=e(79041),s=e(94536);const r=t.memo(({seriesName:g,color:u,gradient:d,readonly:i})=>{const{onSeriesColorChange:l}=(0,o.d2)(),f=(0,t.useCallback)(c=>l(g,c),[g,l]);return g&&l&&u&&!i?t.createElement(n.Dp,{color:u,onChange:f,enableNamedColors:!0},({ref:c,showColorPicker:h,hideColorPicker:p})=>t.createElement(s.p,{color:u,className:"pointer",ref:c,onClick:h,onMouseLeave:p})):t.createElement(s.p,{color:u,gradient:d})});r.displayName="VizLegendSeriesIcon"},29995:(Y,A,e)=>{"use strict";e.d(A,{K:()=>t});var t=(n=>(n[n.Isolate=0]="Isolate",n[n.Hide=1]="Hide",n))(t||{})},12509:(Y,A,e)=>{"use strict";e.d(A,{S:()=>g});var t=e(2543),n=e(96540),o=e(47070);const s=(d,i,l,f)=>{const c=r(d,i,f),h=r(i,d,f),p=Math.max(c,h);let m=Math.floor(d/p),a=Math.ceil(f/m);m=Math.ceil(f/a);const v=m-(m*a-f),E=d/v-l+l/v;return{width:d/m-l+l/m,height:i/a-l+l/a,widthOnLastRow:E,xCount:m,yCount:a}};function r(d,i,l){const f=Math.ceil(Math.sqrt(l*d/i));return Math.floor(f*i/d)*f<l?i/Math.ceil(f*i/d):d/f}class g extends n.PureComponent{constructor(i){super(i),this.state={values:i.getValues()}}componentDidUpdate(i){const{renderCounter:l,source:f}=this.props;(l!==i.renderCounter||f!==i.source)&&this.setState({values:this.props.getValues()})}getOrientation(){const{orientation:i,width:l,height:f}=this.props;return i===o.wV.Auto?l>f?o.wV.Vertical:o.wV.Horizontal:i}renderGrid(){const{renderValue:i,height:l,width:f,itemSpacing:c,getAlignmentFactors:h,orientation:p}=this.props,{values:m}=this.state,a=s(f,l,c,m.length),v=h?h(m,a.width,a.height):{};let E=0,D=0,b=[];for(let P=0;P<m.length;P++){const y=m[P],M=D===a.yCount-1?a.widthOnLastRow:a.width,I=a.height,x=E*M+c*E,S=D*I+c*D,O={position:"absolute",left:x,top:S,width:`${M}px`,height:`${I}px`};b.push(n.createElement("div",{key:P,style:O},i({value:y,width:M,height:I,alignmentFactors:v,orientation:p,count:m.length}))),E++,E===a.xCount&&(E=0,D++)}return n.createElement("div",{style:{position:"relative"}},b)}render(){const{renderValue:i,height:l,width:f,itemSpacing:c,getAlignmentFactors:h,autoGrid:p,orientation:m,maxVizHeight:a,minVizWidth:v,minVizHeight:E}=this.props,{values:D}=this.state;if(p&&m===o.wV.Auto)return this.renderGrid();const b={display:"flex"},P={display:"flex",overflow:`${v?"auto":"hidden"} ${E?"auto":"hidden"}`};let y=l,T=f;const M=this.getOrientation();switch(M){case o.wV.Horizontal:const x=(l+c)/D.length-c;P.flexDirection="column",P.height=`${l}px`,b.marginBottom=`${c}px`,T=f,y=(0,t.clamp)(x,E??0,a??x);break;case o.wV.Vertical:P.flexDirection="row",P.justifyContent="space-between",b.marginRight=`${c}px`,y=l,T=Math.max(f/D.length-c+c/D.length,v??0)}b.width=`${T}px`,b.height=`${y}px`;const I=h?h(D,T,y):{};return n.createElement("div",{style:P},D.map((x,S)=>n.createElement("div",{key:S,style:u(b,S,D.length)},i({value:x,width:T,height:y,alignmentFactors:I,orientation:M,count:D.length}))))}}g.defaultProps={itemSpacing:8};function u(d,i,l){return i===l-1?{...d,marginRight:0,marginBottom:0}:d}},3139:(Y,A,e)=>{"use strict";e.d(A,{g:()=>g,o:()=>u});var t=e(32196),n=e(96540),o=e(40845),s=e(94536);const r=d=>({icon:(0,t.css)({marginRight:d.spacing(1),verticalAlign:"middle"}),seriesTable:(0,t.css)({display:"table"}),seriesTableRow:(0,t.css)({display:"table-row",fontSize:d.typography.bodySmall.fontSize}),seriesTableCell:(0,t.css)({display:"table-cell"}),label:(0,t.css)({wordBreak:"break-all"}),value:(0,t.css)({paddingLeft:d.spacing(2),textAlign:"right"}),activeSeries:(0,t.css)({fontWeight:d.typography.fontWeightBold,color:d.colors.text.maxContrast}),timestamp:(0,t.css)({fontWeight:d.typography.fontWeightBold,fontSize:d.typography.bodySmall.fontSize})}),g=({color:d,label:i,value:l,isActive:f})=>{const c=(0,o.of)(r);return n.createElement("div",{"data-testid":"SeriesTableRow",className:(0,t.cx)(c.seriesTableRow,f&&c.activeSeries)},d&&n.createElement("div",{className:c.seriesTableCell},n.createElement(s.p,{color:d,className:c.icon})),i&&n.createElement("div",{className:(0,t.cx)(c.seriesTableCell,c.label)},i),l&&n.createElement("div",{className:(0,t.cx)(c.seriesTableCell,c.value)},l))},u=({timestamp:d,series:i})=>{const l=(0,o.of)(r);return n.createElement(n.Fragment,null,d&&n.createElement("div",{className:l.timestamp,"aria-label":"Timestamp"},d),i.map((f,c)=>n.createElement(g,{isActive:f.isActive,label:f.label,color:f.color,value:f.value,key:`${f.label}-${c}`})))}},75128:(Y,A,e)=>{"use strict";e.d(A,{n:()=>g});var t=e(32196),n=e(96540),o=e(40845),s=e(17464),r=e(69503);const g=({content:d,position:i,offset:l})=>{const f=(0,o.of)(u);return i?n.createElement(s.ZL,{className:f.portal},n.createElement(r.o,{position:i,offset:l||{x:0,y:0}},d)):null};g.displayName="VizTooltip";const u=()=>({portal:(0,t.css)({position:"absolute",top:0,left:0,pointerEvents:"none",width:"100%",height:"100%"})})},69503:(Y,A,e)=>{"use strict";e.d(A,{o:()=>u});var t=e(32196),n=e(96540),o=e(52908),s=e(40845),r=e(16797),g=e(10875);const u=({position:{x:i,y:l},offset:{x:f,y:c},children:h,allowPointerEvents:p=!1,className:m,...a})=>{const v=(0,n.useRef)(null),[E,D]=(0,n.useState)({width:0,height:0}),{width:b,height:P}=(0,o.A)(),[y,T]=(0,n.useState)({x:i+f,y:l+c}),M=(0,n.useMemo)(()=>new ResizeObserver(x=>{for(let S of x){const O=Math.floor(S.contentRect.width+16),C=Math.floor(S.contentRect.height+2*8);(E.width!==O||E.height!==C)&&D({width:Math.min(O,b),height:Math.min(C,P)})}}),[E,b,P]);(0,n.useLayoutEffect)(()=>(v.current&&M.observe(v.current),()=>{M.disconnect()}),[M]),(0,n.useLayoutEffect)(()=>{if(v&&v.current){const{x,y:S}=(0,g.Ju)(i,l,E.width,E.height,f,c,b,P);T({x,y:S})}},[b,P,i,f,l,c,E]);const I=(0,s.of)(d);return n.createElement("div",{ref:v,style:{position:"fixed",left:0,pointerEvents:p?"auto":"none",top:0,transform:`translate(${y.x}px, ${y.y}px)`,transition:"transform ease-out 0.1s"},"aria-live":"polite","aria-atomic":"true",...a,className:(0,t.cx)(I.wrapper,m)},h)};u.displayName="VizTooltipContainer";const d=i=>({wrapper:(0,t.css)((0,r.getTooltipContainerStyles)(i))})},11389:(Y,A,e)=>{"use strict";e.d(A,{o:()=>r});var t=e(32196),n=e(96540),o=e(40845),s=e(13471);const r=({contentLabelValue:u,customContent:d,isPinned:i,scrollable:l=!1})=>{const f=(0,o.of)(g),c=l?{maxHeight:400,overflowY:"auto"}:{};return n.createElement("div",{className:f.wrapper,style:c},n.createElement("div",null,u.map((h,p)=>{const{label:m,value:a,color:v,colorIndicator:E,colorPlacement:D,isActive:b}=h;return n.createElement(s.B,{key:p,label:m,value:a,color:v,colorIndicator:E,colorPlacement:D,isActive:b,justify:"space-between",isPinned:i})})),d?.map((h,p)=>n.createElement("div",{key:p,className:f.customContentPadding},h)))},g=u=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column",flex:1,gap:4,borderTop:`1px solid ${u.colors.border.medium}`,padding:u.spacing(1)}),customContentPadding:(0,t.css)({padding:`${u.spacing(1)} 0`})})},58749:(Y,A,e)=>{"use strict";e.d(A,{S:()=>d});var t=e(32196),n=e(96540),o=e(66864),s=e(14689),r=e(55852),g=e(40845);const u="add-annotation-button",d=({dataLinks:l,annotate:f})=>{const c=(0,g.of)(i),h=()=>{const p={variant:"secondary"};return n.createElement(o.Gy,null,l.map((m,a)=>n.createElement(s.R,{key:a,link:m,buttonProps:p})))};return n.createElement("div",{className:c.wrapper},l.length>0&&n.createElement("div",{className:c.dataLinks},h()),f&&n.createElement("div",{className:c.addAnnotations},n.createElement(r.$n,{icon:"comment-alt",variant:"secondary",size:"sm",id:u,onClick:f},"Add annotation")))},i=l=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column",flex:1,padding:l.spacing(0)}),dataLinks:(0,t.css)({overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap",maskImage:"linear-gradient(90deg, rgba(0, 0, 0, 1) 80%, transparent)",borderTop:`1px solid ${l.colors.border.medium}`,padding:l.spacing(1)}),addAnnotations:(0,t.css)({borderTop:`1px solid ${l.colors.border.medium}`,padding:l.spacing(1)})})},92663:(Y,A,e)=>{"use strict";e.d(A,{A:()=>u});var t=e(32196),n=e(96540),o=e(40845),s=e(13471);const r=({headerLabel:i,isPinned:l})=>{const{label:f,value:c,color:h,colorIndicator:p}=i;return n.createElement(s.B,{label:f,value:c,color:h,colorIndicator:p,marginRight:"22px",isPinned:l})},g=({keyValuePairs:i,isPinned:l})=>n.createElement(n.Fragment,null,i?.map((f,c)=>n.createElement(s.B,{key:c,label:f.label,value:f.value,color:f.color,colorIndicator:f.colorIndicator,justify:"space-between",isPinned:l}))),u=({headerLabel:i,keyValuePairs:l,customValueDisplay:f,isPinned:c})=>{const h=(0,o.of)(d);return n.createElement("div",{className:h.wrapper},n.createElement(r,{headerLabel:i,isPinned:c}),f||n.createElement(g,{keyValuePairs:l,isPinned:c}))},d=i=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column",flex:1,padding:i.spacing(1)})})},13471:(Y,A,e)=>{"use strict";e.d(A,{B:()=>m});var t=e(32196),n=e(96540),o=e(40845),s=e(32982),r=e(56034),g=e(24293),u=e(79871),d=e(10875),i=(v=>(v[v.Leading=0]="Leading",v[v.Trailing=1]="Trailing",v))(i||{});const l=({color:v=g.F,colorIndicator:E=u.Ev,position:D=0})=>{const b=(0,o.of)(f);return n.createElement("span",{style:{backgroundColor:v},className:(0,t.cx)(D===0?b.leading:b.trailing,(0,d.L$)(E,b))})},f=v=>({leading:(0,t.css)({marginRight:v.spacing(.5)}),trailing:(0,t.css)({marginLeft:v.spacing(.5)}),series:(0,t.css)({width:"14px",height:"4px",borderRadius:v.shape.radius.pill,minWidth:"14px"}),value:(0,t.css)({width:"12px",height:"12px",borderRadius:v.shape.radius.default,fontWeight:500,minWidth:"12px"}),hexagon:(0,t.css)({}),pie_1_4:(0,t.css)({}),pie_2_4:(0,t.css)({}),pie_3_4:(0,t.css)({}),marker_sm:(0,t.css)({width:"4px",height:"4px",borderRadius:v.shape.radius.circle,minWidth:"4px"}),marker_md:(0,t.css)({width:"8px",height:"8px",borderRadius:v.shape.radius.circle,minWidth:"8px"}),marker_lg:(0,t.css)({width:"12px",height:"12px",borderRadius:v.shape.radius.circle,minWidth:"12px"})});var c=(v=>(v.label="label",v.value="value",v))(c||{});const h="Copied to clipboard",p=2*1e3,m=({label:v,value:E,color:D,colorIndicator:b,colorPlacement:P=u.lJ.first,justify:y="flex-start",isActive:T=!1,marginRight:M="0px",isPinned:I})=>{const x=(0,o.of)(a,y,M),[S,O]=(0,n.useState)(!1),[C,L]=(0,n.useState)(!1),[U,R]=(0,n.useState)(null),[B,H]=(0,n.useState)(!1),W=(0,n.useRef)(null),N=(0,n.useRef)(null);(0,n.useEffect)(()=>{let Q;return B&&(Q=setTimeout(()=>{H(!1)},p)),()=>{window.clearTimeout(Q)}},[B]);const V=async(Q,ee)=>{if(!(navigator?.clipboard&&window.isSecureContext)){G(Q,ee);return}try{await navigator.clipboard.writeText(Q),R({[`${ee}`]:Q}),H(!0)}catch{R(null)}},G=(Q,ee)=>{const ae=document.createElement("textarea");W.current?.appendChild(ae),ae.value=Q,ae.focus(),ae.select();try{document.execCommand("copy")&&(R({[`${ee}`]:Q}),H(!0))}catch(Z){console.error("Unable to copy to clipboard",Z)}ae.remove()},_=Q=>{Q.currentTarget.offsetWidth<Q.currentTarget.scrollWidth&&O(!0)},K=()=>O(!1),j=Q=>{Q.currentTarget.offsetWidth<Q.currentTarget.scrollWidth&&L(!0)},k=()=>L(!1);return n.createElement("div",{className:x.contentWrapper},(D||v)&&n.createElement("div",{className:x.valueWrapper},D&&P===u.lJ.first&&n.createElement(l,{color:D,colorIndicator:b}),I?n.createElement(n.Fragment,null,n.createElement(r.m,{content:v,interactive:!1,show:S},n.createElement(n.Fragment,null,B&&U?.label&&n.createElement(s.r,{placement:"top",referenceElement:W.current},h),n.createElement("div",{className:(0,t.cx)(x.label,T&&x.activeSeries,navigator?.clipboard&&x.copy),onMouseEnter:_,onMouseLeave:K,onClick:()=>V(v,"label"),ref:W},v)))):n.createElement("div",{className:(0,t.cx)(x.label,T&&x.activeSeries)},v)),n.createElement("div",{className:x.valueWrapper},D&&P===u.lJ.leading&&n.createElement(l,{color:D,colorIndicator:b,position:i.Leading}),I?n.createElement(r.m,{content:E?E.toString():"",interactive:!1,show:C},n.createElement(n.Fragment,null,B&&U?.value&&n.createElement(s.r,{placement:"top",referenceElement:N.current},h),n.createElement("div",{className:(0,t.cx)(x.value,T,navigator?.clipboard&&x.copy),onMouseEnter:j,onMouseLeave:k,onClick:()=>V(E?E.toString():"","value"),ref:N},E))):n.createElement("div",{className:(0,t.cx)(x.value,T)},E),D&&P===u.lJ.trailing&&n.createElement(l,{color:D,colorIndicator:b,position:i.Trailing})))},a=(v,E,D)=>({contentWrapper:(0,t.css)({display:"flex",alignItems:"center",justifyContent:E,flexWrap:"wrap",marginRight:D}),label:(0,t.css)({color:v.colors.text.secondary,fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",marginRight:v.spacing(2)}),value:(0,t.css)({fontWeight:500,textOverflow:"ellipsis",overflow:"hidden"}),valueWrapper:(0,t.css)({display:"flex",alignItems:"center",minWidth:0}),activeSeries:(0,t.css)({fontWeight:v.typography.fontWeightBold,color:v.colors.text.maxContrast}),copy:(0,t.css)({cursor:"pointer"})})},79871:(Y,A,e)=>{"use strict";e.d(A,{Ev:()=>o,fX:()=>t,lJ:()=>n});var t=(s=>(s.series="series",s.value="value",s.hexagon="hexagon",s.pie_1_4="pie_1_4",s.pie_2_4="pie_2_4",s.pie_3_4="pie_3_4",s.marker_sm="marker_sm",s.marker_md="marker_md",s.marker_lg="marker_lg",s))(t||{}),n=(s=>(s.hidden="hidden",s.first="first",s.leading="leading",s.trailing="trailing",s))(n||{});const o="series"},10875:(Y,A,e)=>{"use strict";e.d(A,{Ju:()=>g,L$:()=>u,cp:()=>f});var t=e(11261),n=e(83195),o=e(24293),s=e(52622),r=e(79871);const g=(c=0,h=0,p=0,m=0,a=0,v=0,E=0,D=0)=>{let b=c,P=h;const y=Math.max(c+a+p-(E-a),0),T=Math.abs(Math.min(c-a-p-a,0)),M=y>0,I=T>0,x=Math.max(h+v+m-(D-v),0),S=Math.abs(Math.min(h-v-m-v,0)),O=x>0,C=S>0;return M&&I?b=y>T?a:E-a-p:M?b=c-a-p:b=c+a,O&&C?P=x>S?v:D-v-m:O?P=h-v-m:P=h+v,{x:b,y:P}},u=(c,h)=>{switch(c){case r.fX.value:return h.value;case r.fX.series:return h.series;case r.fX.hexagon:return h.hexagon;case r.fX.pie_1_4:return h.pie_1_4;case r.fX.pie_2_4:return h.pie_2_4;case r.fX.pie_3_4:return h.pie_3_4;case r.fX.marker_sm:return h.marker_sm;case r.fX.marker_md:return h.marker_md;case r.fX.marker_lg:return h.marker_lg;default:return h.value}},d=(c,h)=>c.numeric-h.numeric,i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),l=(c,h)=>i.compare(`${c.value}`,`${h.value}`),f=(c,h,p,m,a,v,E=D=>!0)=>{let D=[],b=!1;for(let P=0;P<c.length;P++){const y=c[P];if(y===h||y.type===t.PU.time||!E(y)||y.config.custom?.hideFrom?.tooltip||y.config.custom?.hideFrom?.viz||a===s.$N.Single&&m!==P)continue;let T=p[P];if(T==null)continue;y.type===t.PU.number||y.type===t.PU.boolean||y.type===t.PU.enum||(b=!1);const M=c[P].values[T],I=y.display(M),x=Number.isNaN(I.numeric)?v===s.xB.Descending?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER:I.numeric;D.push({label:y.state?.displayName??y.name,value:(0,n.cN)(I),color:I.color??o.F,colorIndicator:r.fX.series,colorPlacement:r.lJ.first,isActive:a===s.$N.Multi&&m===P,numeric:x})}if(v!==s.xB.None&&D.length>1){const P=b?d:l,y=v===s.xB.Descending?-1:1;D.sort((T,M)=>y*P(T,M))}return D}},94333:(Y,A,e)=>{"use strict";e.r(A),e.d(A,{Alert:()=>We.F,AlertingSettings:()=>qt.i,AsyncMultiSelect:()=>Dr.Iv,AsyncSelect:()=>Dr.DW,AsyncVirtualizedSelect:()=>Dr.gZ,AutoSaveField:()=>Q.p,AutoSizeInput:()=>ts.D,Avatar:()=>Vn.e,Badge:()=>ko.E,BarGauge:()=>He.xE,BarGaugeDisplayMode:()=>ar.eX,BigValue:()=>Qe.yV,BigValueColorMode:()=>Qe.yp,BigValueGraphMode:()=>Qe.$p,BigValueJustifyMode:()=>Qe.F8,BigValueTextMode:()=>Qe.SV,Box:()=>bs.a,BrowserLabel:()=>As.J,Button:()=>za.$n,ButtonCascader:()=>P.H,ButtonGroup:()=>ns.e,ButtonSelect:()=>ln.f,CallToActionCard:()=>jt.c,Card:()=>fo.Z,CardContainer:()=>Mt.Q,Cascader:()=>b.v,CertificationKey:()=>gn.K,Checkbox:()=>Ho.S,ClickOutsideWrapper:()=>Dt.N,ClipboardButton:()=>D.b,CodeEditor:()=>re.B,CodeEditorSuggestionItemKind:()=>ie.q,CollapsableSection:()=>at.M,Collapse:()=>it.S,ColorPicker:()=>I.sk,ColorPickerInput:()=>x.i,ConfirmButton:()=>l.Z,ConfirmModal:()=>q.u,Container:()=>nr.mc,ContextMenu:()=>Vt.t,ControlledCollapse:()=>it.a,Counter:()=>Ze.p,CustomHeadersSettings:()=>Lt.P,CustomScrollbar:()=>v.E,DataLinkButton:()=>ht.R,DataLinkInput:()=>Ct.l,DataLinksContextMenu:()=>Yt.e,DataLinksInlineEditor:()=>ct.e,DataSourceHttpSettings:()=>ca.t,DatePicker:()=>V.l,DatePickerWithInput:()=>G.l,DateTimePicker:()=>_.K,DeleteButton:()=>f.e,Divider:()=>ga.c,Drawer:()=>Xn._,Dropdown:()=>Zt.m,EmptySearchResult:()=>O.Z,ErrorBoundary:()=>Un.tH,ErrorBoundaryAlert:()=>Un.Xw,ErrorWithStack:()=>fn.D,EventsCanvas:()=>Us.a,FIXED_UNIT:()=>Hs.s,FadeTransition:()=>Tn.A,FeatureBadge:()=>rn.y,FeatureInfoBox:()=>rn.e,Field:()=>_s.D,FieldArray:()=>yr.E,FieldLinkList:()=>ft.n,FieldSet:()=>Ws.n,FieldValidationMessage:()=>Bs.P,FileDropzone:()=>ir.gH,FileDropzoneDefaultChildren:()=>ir.wI,FileListItem:()=>ir.IB,FileUpload:()=>_r.e,FilterInput:()=>Ts.Z,FilterPill:()=>ne.m,Form:()=>Sa.l,FormattedValueDisplay:()=>Ft.i,FullWidthButtonContainer:()=>gt.V,Gauge:()=>je._,Graph:()=>Ha.T,GraphContextMenu:()=>no.H,GraphContextMenuHeader:()=>no.i,GraphNG:()=>jo.o,GraphSeriesToggler:()=>$e.M,GraphWithLegend:()=>cr.I,Grid:()=>or.x,HorizontalGroup:()=>nr.Gy,Icon:()=>d.I,IconButton:()=>i.K,InfoBox:()=>vn.w,InlineField:()=>Ks.I,InlineFieldRow:()=>Er.C,InlineFormLabel:()=>sa.I,InlineLabel:()=>Js.c,InlineSegmentGroup:()=>Vr.e,InlineSwitch:()=>Ir.K,InlineToast:()=>y.r,Input:()=>to.p,InputControl:()=>Yn.e,InteractiveTable:()=>j.j,JSONFormatter:()=>en.B,JsonExplorer:()=>mn.O,KeyboardPlugin:()=>lr.Z7,Label:()=>hr.J,LayoutItemContext:()=>xa.N,LegacyForms:()=>Zo,LegacyInputStatus:()=>n.O,Legend:()=>Ya.s,Link:()=>hs.N,LinkButton:()=>za.z9,List:()=>K.B,LoadingBar:()=>M.G,LoadingPlaceholder:()=>T._,Marker:()=>Us.pH,Menu:()=>_t.W,MenuGroup:()=>rt.r,MenuItem:()=>St.D,Modal:()=>ve.a,ModalHeader:()=>ye.r,ModalRoot:()=>Me.EO,ModalTabContent:()=>le.O,ModalTabsHeader:()=>pe.J,ModalsContext:()=>Me.wE,ModalsController:()=>Me.$s,ModalsProvider:()=>Me.YO,MultiSelect:()=>Dr.KF,PageToolbar:()=>De.d,Pagination:()=>ee.d,PanelChrome:()=>J.NR,PanelChromeLoadingIndicator:()=>oe.I,PanelContainer:()=>zr._,PanelContextProvider:()=>ue.XF,PanelContextRoot:()=>ue.e4,PlotLegend:()=>xs.$,PluginSignatureBadge:()=>En.B,Popover:()=>p.A,PopoverController:()=>h.I,Portal:()=>a.ZL,PortalContainer:()=>a.qB,QueryField:()=>te.X,RadioButtonGroup:()=>zs.z,RadioButtonList:()=>Es.a,RangeSlider:()=>Ca.F,ReactMonacoEditor:()=>de.m,RefreshPicker:()=>U.cC,RelativeTimeRangePicker:()=>yo.N,RenderUserContentAsHTML:()=>st.I,ScaleDistribution:()=>ar.L4,SecretInput:()=>Zn.L,SecretTextArea:()=>xt.l,SecureSocksProxySettings:()=>hn.Y,Segment:()=>Sn.Y,SegmentAsync:()=>An.s,SegmentInput:()=>ta.o,SegmentSection:()=>la.L,SegmentSelect:()=>fa.a,Select:()=>Dr.l6,SelectContainer:()=>Dr.KA,SeriesColorPicker:()=>I.Dp,SeriesColorPickerPopover:()=>S.o,SeriesColorPickerPopoverWithTheme:()=>S.t,SeriesIcon:()=>cn.p,SeriesTable:()=>Ke.o,SeriesTableRow:()=>Ke.g,SeriesVisibilityChangeBehavior:()=>Le.K,SeriesVisibilityChangeMode:()=>Oa.B,SetInterval:()=>Re.u,SlideOutTransition:()=>Wn.n,Slider:()=>Ea.A,Space:()=>vs.$,Sparkline:()=>ke.O,Spinner:()=>xn.y,Splitter:()=>qa.O,Stack:()=>tr.B,StatsPicker:()=>L.S,Switch:()=>Ir.d,TLSAuthSettings:()=>Cn.j,Tab:()=>Be.o,TabContent:()=>Ne.J,TabbedContainer:()=>E.q,Table:()=>me.X,TableInputCSV:()=>he.b,TabsBar:()=>Te.U,Tag:()=>ae.v,TagList:()=>Z.L,TagsInput:()=>k.u,Text:()=>ss.E,TextArea:()=>Ar.f,TextLink:()=>rr.Y,TimeOfDayPicker:()=>H.R,TimePickerTooltip:()=>R.xS,TimeRangeInput:()=>Go.b,TimeRangeLabel:()=>B.f,TimeRangePicker:()=>R.$6,TimeSeries:()=>Ao.Z,TimeZonePicker:()=>W.U,Toggletip:()=>m.G,ToolbarButton:()=>ps.I,ToolbarButtonRow:()=>Cs.U,Tooltip:()=>c.m,TooltipPlugin:()=>lr.Tk,TooltipPlugin2:()=>lr.xl,UPLOT_AXIS_FONT_SIZE:()=>ks.pi,UPlotChart:()=>Ss.Z,UPlotConfigBuilder:()=>ys.e,UnitPicker:()=>C.p,UserIcon:()=>Fn.n,ValuePicker:()=>Fs.i,VerticalGroup:()=>nr.gW,VerticalTab:()=>we.s,VirtualizedSelect:()=>Dr.ip,VizLayout:()=>be.KU,VizLegend:()=>_e.t,VizLegendListItem:()=>Ve.M,VizRepeater:()=>Ee.S,VizTooltip:()=>Ge.n,VizTooltipContainer:()=>Oe.o,WeekStartPicker:()=>N.l,WithContextMenu:()=>pn.n,XYCanvas:()=>Us._X,ZoomPlugin:()=>lr.jn,buildScaleKey:()=>Ro.My,clearButtonStyles:()=>za.my,convertOldAngularValueMapping:()=>It.I1,defaultIntervals:()=>U.cb,fieldMatchersUI:()=>cs.g,getCardStyles:()=>fo.H,getDragStyles:()=>Ga.l,getInputStyles:()=>to.n,getPortalContainer:()=>a.gF,getSelectStyles:()=>qr.J,graphFieldOptions:()=>Qa.t,graphTickFormatter:()=>Do.Yn,graphTimeFormat:()=>Do.Jc,preparePlotFrame:()=>Ro.mY,resetSelectStyles:()=>zo.A,sharedInputStyle:()=>aa.Xb,sharedSingleStatMigrationHandler:()=>It._$,sharedSingleStatPanelChangedHandler:()=>It.gl,useGraphNGContext:()=>Ui.I,usePanelContext:()=>ue.d2,variableSuggestionToCodeEditorSuggestion:()=>ge.O,withErrorBoundary:()=>Un.Xc});var t=e(90090),n=e(91634),o=e(24169),s=e(11206),r=e(99091),g=e(74716),u=e(56286),d=e(14578),i=e(29158),l=e(82702),f=e(91605),c=e(56034),h=e(95868),p=e(13840),m=e(60782),a=e(17464),v=e(40276),E=e(60734),D=e(10534),b=e(3988),P=e(32012),y=e(32982),T=e(39558),M=e(57514),I=e(83598),x=e(99128),S=e(70104),O=e(41670),C=e(2056),L=e(42734),U=e(11134),R=e(15666),B=e(3799),H=e(66070),W=e(20333),N=e(15648),V=e(56181),G=e(98239),_=e(63383),K=e(33552),j=e(28389),k=e(79924),Q=e(28270),ee=e(19384),ae=e(78369),Z=e(64149),ne=e(92174),q=e(96374),te=e(20084),re=e(32372),de=e(85828),ie=e(19716),ge=e(99544),ve=e(37390),ye=e(29473),pe=e(25897),le=e(95246),Me=e(71678),De=e(95247),Re=e(67570),me=e(77093),he=e(14746),Te=e(63021),Be=e(40675),we=e(90685),Ne=e(40980),Ze=e(53402),st=e(44522),Qe=e(37494),ke=e(5926),je=e(95164),He=e(97696),Ge=e(75128),Oe=e(69503),Ke=e(3139),Ee=e(12509),J=e(91052),oe=e(89963),ue=e(79041),be=e(67266),Le=e(29995),_e=e(55726),Ve=e(34375),We=e(42418),$e=e(84656),it=e(82762),at=e(57418),ht=e(14689),ft=e(79961),gt=e(61458),Dt=e(8866),It=e(37713),jt=e(76442),Vt=e(28122),_t=e(38138),rt=e(59093),St=e(64539),pn=e(51686),ct=e(64919),Ct=e(64078),Yt=e(59796),cn=e(94536),vn=e(37166),rn=e(86460),en=e(24022),mn=e(44533),Un=e(66602),fn=e(52446),ca=e(91409),Lt=e(11184),qt=e(19849),hn=e(17081),Cn=e(95180),gn=e(28623),xn=e(62930),Tn=e(31511),Wn=e(72960),Sn=e(38401),An=e(83684),ta=e(57752),fa=e(13102),la=e(64765),Xn=e(87978),Ea=e(77014),Ca=e(47097),Sa=e(51253),aa=e(87266),Yn=e(16504),za=e(55852),ns=e(19727),ps=e(27746),Cs=e(15068),Fs=e(51986),cs=e(84349),hs=e(50720),rr=e(72109),ss=e(94753),bs=e(90613),tr=e(67061),or=e(71259),vs=e(68402),hr=e(60029),_s=e(88575),Ya=e(17408),Ws=e(84167),Bs=e(72093),Ks=e(14186),Vr=e(63056),Js=e(76892),Er=e(39268),yr=e(95984),zo=e(23731),Dr=e(88323),qr=e(88824),us=e(62883),eo=e.n(us),Fr={};for(const qo in us)["default","Icon","IconButton","ConfirmButton","DeleteButton","Tooltip","PopoverController","Popover","Toggletip","Portal","getPortalContainer","PortalContainer","CustomScrollbar","TabbedContainer","ClipboardButton","Cascader","ButtonCascader","InlineToast","LoadingPlaceholder","LoadingBar","ColorPicker","SeriesColorPicker","ColorPickerInput","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","EmptySearchResult","UnitPicker","StatsPicker","RefreshPicker","defaultIntervals","TimeRangePicker","TimePickerTooltip","TimeRangeLabel","TimeOfDayPicker","TimeZonePicker","WeekStartPicker","DatePicker","DatePickerWithInput","DateTimePicker","List","InteractiveTable","TagsInput","AutoSaveField","Pagination","Tag","TagList","FilterPill","ConfirmModal","QueryField","CodeEditor","ReactMonacoEditor","CodeEditorSuggestionItemKind","variableSuggestionToCodeEditorSuggestion","Modal","ModalHeader","ModalTabsHeader","ModalTabContent","ModalsProvider","ModalRoot","ModalsController","ModalsContext","PageToolbar","SetInterval","Table","TableInputCSV","TabsBar","Tab","VerticalTab","TabContent","Counter","RenderUserContentAsHTML","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","Sparkline","Gauge","BarGauge","VizTooltip","VizTooltipContainer","SeriesTable","SeriesTableRow","VizRepeater","PanelChrome","PanelChromeLoadingIndicator","PanelContextProvider","PanelContextRoot","usePanelContext","VizLayout","SeriesVisibilityChangeBehavior","VizLegend","VizLegendListItem","Alert","GraphSeriesToggler","Collapse","ControlledCollapse","CollapsableSection","DataLinkButton","FieldLinkList","FullWidthButtonContainer","ClickOutsideWrapper","CallToActionCard","ContextMenu","Menu","MenuGroup","MenuItem","WithContextMenu","DataLinksInlineEditor","DataLinkInput","DataLinksContextMenu","SeriesIcon","InfoBox","FeatureBadge","FeatureInfoBox","JSONFormatter","JsonExplorer","ErrorBoundary","ErrorBoundaryAlert","withErrorBoundary","ErrorWithStack","DataSourceHttpSettings","CustomHeadersSettings","AlertingSettings","SecureSocksProxySettings","TLSAuthSettings","CertificationKey","Spinner","FadeTransition","SlideOutTransition","Segment","SegmentAsync","SegmentInput","SegmentSelect","SegmentSection","Drawer","Slider","RangeSlider","Form","sharedInputStyle","InputControl","Button","LinkButton","ButtonGroup","clearButtonStyles","ToolbarButton","ToolbarButtonRow","ValuePicker","fieldMatchersUI","Link","TextLink","Text","Box","Stack","Grid","Space","Label","Field","Legend","FieldSet","FieldValidationMessage","InlineField","InlineSegmentGroup","InlineLabel","InlineFieldRow","FieldArray","resetSelectStyles","getSelectStyles","HorizontalGroup","VerticalGroup","Container","Badge","RadioButtonGroup","RadioButtonList","Input","getInputStyles","AutoSizeInput","FilterInput","Switch","InlineSwitch","Checkbox","TextArea","FileUpload","TimeRangeInput","RelativeTimeRangePicker","Card","getCardStyles","CardContainer","FormattedValueDisplay","ButtonSelect","Dropdown","PluginSignatureBadge","UserIcon","Avatar","InlineFormLabel","Divider","getDragStyles","Splitter","LayoutItemContext","LegacyForms","LegacyInputStatus","ScaleDistribution","BarGaugeDisplayMode","UPlotConfigBuilder","UPLOT_AXIS_FONT_SIZE","UPlotChart","PlotLegend","FIXED_UNIT","BrowserLabel","PanelContainer","Graph","GraphWithLegend","GraphContextMenu","GraphContextMenuHeader","graphTimeFormat","graphTickFormatter","GraphNG","TimeSeries","useGraphNGContext","preparePlotFrame","buildScaleKey","convertOldAngularValueMapping","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","MultiSelect","Select","SelectContainer","VirtualizedSelect"].indexOf(qo)<0&&(Fr[qo]=()=>us[qo]);e.d(A,Fr);var nr=e(66864),ko=e(39938),zs=e(94354),Es=e(5173),to=e(10354),ts=e(51440),Ts=e(67647),Zn=e(49718),xt=e(7968),Ir=e(15292),Ho=e(10880),Ar=e(21744),_r=e(73546),ir=e(92887),Go=e(54230),yo=e(3759),fo=e(10860),Mt=e(81507),Ft=e(9286),ln=e(9261),Zt=e(83122),En=e(98624),Fn=e(99635),Vn=e(12942),sa=e(38894),ga=e(25994),Ga=e(69144),qa=e(34722),xa=e(18348),Qa=e(52198),ar=e(52622),ys=e(51336),ks=e(30501),Ss=e(81297),xs=e(24182),Us=e(96747),lr=e(66737),Hs=e(52811),Oa=e(88895),As=e(54438),zr=e(52494),Ha=e(48747),cr=e(5484),no=e(33083),Do=e(65036),jo=e(99755),Ao=e(18262),Ui=e(16998),Ro=e(65575);const Zo={SecretFormField:u.L,FormField:t.z,Select:r.l6,AsyncSelect:r.DW,IndicatorsContainer:o.s,NoOptionsMessage:s.l,Input:n.p,Switch:g.d}},31511:(Y,A,e)=>{"use strict";e.d(A,{A:()=>r});var t=e(32196),n=e(96540),o=e(86634),s=e(40845);function r(u){const{visible:d,children:i,duration:l=250}=u,f=(0,s.of)(g,l);return n.createElement(o.A,{in:d,mountOnEnter:!0,unmountOnExit:!0,timeout:l,classNames:f},i)}const g=(u,d)=>({enter:(0,t.css)({label:"enter",opacity:0}),enterActive:(0,t.css)({label:"enterActive",opacity:1,transition:`opacity ${d}ms ease-out`}),exit:(0,t.css)({label:"exit",opacity:1}),exitActive:(0,t.css)({label:"exitActive",opacity:0,transition:`opacity ${d}ms ease-out`})})},72960:(Y,A,e)=>{"use strict";e.d(A,{n:()=>r});var t=e(32196),n=e(96540),o=e(86634),s=e(40845);function r(u){const{visible:d,children:i,duration:l=250,horizontal:f,size:c}=u,h=(0,s.of)(g,l,f?"width":"height",c);return n.createElement(o.A,{in:d,mountOnEnter:!0,unmountOnExit:!0,timeout:l,classNames:h},i)}const g=(u,d,i,l)=>({enter:(0,t.css)({label:"enter",[`${i}`]:0,opacity:0}),enterActive:(0,t.css)({label:"enterActive",[`${i}`]:`${l}px`,opacity:1,transition:`opacity ${d}ms ease-out, ${i} ${d}ms ease-out`}),exit:(0,t.css)({label:"exit",[`${i}`]:`${l}px`,opacity:1}),exitActive:(0,t.css)({label:"exitActive",opacity:0,[`${i}`]:0,transition:`opacity ${d}ms ease-out, ${i} ${d}ms ease-out`})})},81297:(Y,A,e)=>{"use strict";e.d(A,{Z:()=>u});var t=e(96540),n=e(36613),o=e(16895);function s(d,i){return i.width===d.width&&i.height===d.height}function r(d,i){return i.data===d.data}function g(d,i){return i.config===d.config}class u extends t.Component{constructor(i){super(i),this.plotContainer=(0,t.createRef)(),this.plotCanvasBBox=(0,t.createRef)(),this.state={plot:null}}reinitPlot(){let{width:i,height:l,plotRef:f}=this.props;if(this.state.plot?.destroy(),i===0&&l===0)return;this.props.config.addHook("setSize",p=>{p.over});const c={width:Math.floor(this.props.width),height:Math.floor(this.props.height),...this.props.config.getConfig()};(0,o.uY)("UPlot",!1,"Reinitializing plot",c);const h=new n.A(c,this.props.data,this.plotContainer.current);f&&f(h),this.setState({plot:h})}componentDidMount(){this.reinitPlot()}componentWillUnmount(){this.state.plot?.destroy()}componentDidUpdate(i){let{plot:l}=this.state;s(i,this.props)?g(i,this.props)?r(i,this.props)||l?.setData(this.props.data):this.reinitPlot():l?.setSize({width:Math.floor(this.props.width),height:Math.floor(this.props.height)})}render(){return t.createElement("div",{style:{position:"relative"}},t.createElement("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children)}}},24182:(Y,A,e)=>{"use strict";e.d(A,{$:()=>c,t:()=>f});var t=e(96540),n=e(28240),o=e(8066),s=e(75059),r=e(57875),g=e(52622),u=e(40845),d=e(67266),i=e(55726);const l=h=>h==null?"-":h.toFixed(1);function f(h,p){return h.getSeries().some(m=>{const a=m.props.dataFrameFieldIndex;if(!a)return!1;const v=p[a.frameIndex]?.fields[a.fieldIndex];return!(!v||v.config.custom?.hideFrom?.legend)})}const c=t.memo(({data:h,config:p,placement:m,calcs:a,displayMode:v,...E})=>{const D=(0,u.$j)(),b=p.getSeries().map(P=>{const y=P.props,T=y.dataFrameFieldIndex,M=p.getAxisPlacement(P.props.scaleKey);if(!T)return;const I=h[T.frameIndex]?.fields[T.fieldIndex];if(!I||I.config.custom?.hideFrom?.legend)return;const x=(0,n.Ct)(I,h[T.frameIndex],h),O=(0,o.lz)(I,D).color;return{disabled:!(y.show??!0),fieldIndex:T,color:O,label:x,yAxis:M===g.vM.Left||M===g.vM.Bottom?1:2,getDisplayValues:()=>{if(!a?.length)return[];const C=I.display??l;let L=null;const U=(0,s.Nw)({field:I,reducers:a});return a.map(R=>{const B=s.AS.get(R);let H=C;return B.id===s.gy.diffperc&&(H=(0,r.J)({field:{...I,config:{...I.config,unit:"percentunit"}},theme:D})),(B.id===s.gy.count||B.id===s.gy.changeCount||B.id===s.gy.distinctCount)&&(L||(L=(0,r.J)({field:{...I,config:{...I.config,unit:"none"}},theme:D})),H=L),{...H(U[R]),title:B.name,description:B.description}})},getItemKey:()=>`${x}-${T.frameIndex}-${T.fieldIndex}`}}).filter(P=>P!==void 0);return t.createElement(d.KU.Legend,{placement:m,...E},t.createElement(i.t,{placement:m,items:b,displayMode:v,sortBy:E.sortBy,sortDesc:E.sortDesc,isSortable:!0}))});c.displayName="PlotLegend"},52198:(Y,A,e)=>{"use strict";e.d(A,{t:()=>n});var t=e(52622);const n={drawStyle:[{label:"Lines",value:t.GR.Line},{label:"Bars",value:t.GR.Bars},{label:"Points",value:t.GR.Points}],lineInterpolation:[{description:"Linear",value:t.dx.Linear,icon:"gf-interpolation-linear"},{description:"Smooth",value:t.dx.Smooth,icon:"gf-interpolation-smooth"},{description:"Step before",value:t.dx.StepBefore,icon:"gf-interpolation-step-before"},{description:"Step after",value:t.dx.StepAfter,icon:"gf-interpolation-step-after"}],barAlignment:[{description:"Before",value:t.Nj.Before,icon:"gf-bar-alignment-before"},{description:"Center",value:t.Nj.Center,icon:"gf-bar-alignment-center"},{description:"After",value:t.Nj.After,icon:"gf-bar-alignment-after"}],showPoints:[{label:"Auto",value:t.yL.Auto,description:"Show points when the density is low"},{label:"Always",value:t.yL.Always},{label:"Never",value:t.yL.Never}],axisPlacement:[{label:"Auto",value:t.vM.Auto,description:"First field on the left, everything else on the right"},{label:"Left",value:t.vM.Left},{label:"Right",value:t.vM.Right},{label:"Hidden",value:t.vM.Hidden}],fillGradient:[{label:"None",value:t.on.None},{label:"Opacity",value:t.on.Opacity,description:"Enable fill opacity gradient"},{label:"Hue",value:t.on.Hue,description:"Small color hue gradient"},{label:"Scheme",value:t.on.Scheme,description:"Use color scheme to define gradient"}],stacking:[{label:"Off",value:t.gs.None},{label:"Normal",value:t.gs.Normal},{label:"100%",value:t.gs.Percent}],thresholdsDisplayModes:[{label:"Off",value:t.Ly.Off},{label:"As lines",value:t.Ly.Line},{label:"As lines (dashed)",value:t.Ly.Dashed},{label:"As filled regions",value:t.Ly.Area},{label:"As filled regions and lines",value:t.Ly.LineAndArea},{label:"As filled regions and lines (dashed)",value:t.Ly.DashedAndArea}]}},30501:(Y,A,e)=>{"use strict";e.d(A,{fU:()=>h,pi:()=>i,zH:()=>f});var t=e(83195),n=e(97706),o=e(42994),s=e(72724),r=e(52622),g=e(29413),u=e(52811),d=e(93060);const i=12,l=8;class f extends u.R{merge(a){this.props.size=(0,d.Y)("max",this.props.size,a.size),this.props.label||(this.props.label=a.label),this.props.placement===r.vM.Auto&&(this.props.placement=a.placement)}calculateSpace(a,v,E,D,b){const P=a.axes[v],y=a.scales[P.scale];if(P.side!==2||!y)return 30;const T=40;if(y.time){const M=b/T,I=(D-E)/M,x=h(a,[E],v,T,I);return(0,g.kD)(x[0],i).width+18}return T}calculateAxisSize(a,v,E){const D=a.axes[E];let b=D.ticks.size;if(D.side===2)b+=D.gap+i;else if(v?.length){let P=v.reduce((T,M)=>Math.max(T,(0,g.kD)(M,i).width),0);const y=Math.min(a.width*.4,P);b+=D.gap+D.labelGap+y}return Math.ceil(b)}getConfig(){let{scaleKey:a,label:v,show:E=!0,placement:D=r.vM.Auto,grid:b={show:!0},ticks:P,space:y,filter:T,gap:M=5,formatValue:I,splits:x,values:S,incrs:O,isTime:C,timeZone:L,theme:U,tickLabelRotation:R,size:B,color:H,border:W,decimals:N,distr:V=r.L4.Linear}=this.props;const G=`${i}px ${U.typography.fontFamily}`,_=U.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,t.j9)(a)&&(x=[0,1]),N===0&&V===r.L4.Linear&&(T=(j,k)=>k.map(Q=>Number.isInteger(Q)?Q:null));let K={scale:a,show:E,stroke:H??U.colors.text.primary,side:p(D),font:G,size:B??((j,k,Q)=>this.calculateAxisSize(j,k,Q)),rotate:R,gap:M,labelGap:0,grid:{show:b.show,stroke:_,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:W?.show?H??U.colors.text.primary:_,width:1/devicePixelRatio,size:4},P),splits:x,values:S,space:y??((j,k,Q,ee,ae)=>this.calculateSpace(j,k,Q,ee,ae)),filter:T,incrs:O};return W?.show&&(K.border={stroke:H??U.colors.text.primary,width:1/devicePixelRatio,...W}),v!=null&&v.length>0&&(K.label=v,K.labelSize=i+l,K.labelFont=G,K.labelGap=l),S?K.values=S:C?K.values=h:I&&(K.values=(j,k,Q,ee,ae)=>{let Z=(0,n.E)((0,n.h)(ae,6));return k.map(ne=>I(ne,Z>0?Z:void 0))}),K.timeZone=L,K}}const c={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:28*24*60*60*1e3,year:365*24*60*60*1e3};function h(m,a,v,E,D){const b=m.axes[v].timeZone,P=m.scales.x,y=(P?.max??0)-(P?.min??0),T=Math.round(c.year/c.day)*c.day,M=Math.round(D/c.day)*c.day;let I=o.WC.interval.year;return D<c.second?I=o.WC.interval.millisecond:D<=c.minute?I=o.WC.interval.second:y<=c.day?I=o.WC.interval.minute:D<=c.day?I=o.WC.interval.hour:y<c.year?I=o.WC.interval.day:M===T?I=o.WC.interval.year:D<=c.year&&(I=o.WC.interval.month),a.map(x=>x==null?"":(0,s.LE)(x,{format:I,timeZone:b}))}function p(m){switch(m){case r.vM.Top:return 0;case r.vM.Right:return 1;case r.vM.Bottom:return 2;case r.vM.Left:}return 3}},51336:(Y,A,e)=>{"use strict";e.d(A,{e:()=>b});var t=e(2543),n=e(36613),o=e(43127),s=e(91410),r=e(52622),g=e(16895),u=e(30501),d=e(93060),i=e(24293),l=e(23596),f=e(52811),c=e(74863);class h extends f.R{getConfig(){const{facets:y,drawStyle:T,pathBuilder:M,pointsBuilder:I,pointsFilter:x,lineInterpolation:S,lineWidth:O,lineStyle:C,barAlignment:L,barWidthFactor:U,barMaxWidth:R,showPoints:B,pointSize:H,scaleKey:W,pxAlign:N,spanNulls:V,show:G=!0}=this.props;let _={},K=this.getLineColor();_.stroke=K,_.width=O,C&&C.fill!=="solid"&&(C.fill==="dot"&&(_.cap="round"),_.dash=C.dash??[10,10]),M!=null?_.paths=M:T===r.GR.Points?_.paths=()=>null:T!=null&&(_.paths=(Q,ee,ae,Z)=>m(T,S,L,U,R)(Q,ee,ae,Z));const j=typeof K=="string"?K:(Q,ee)=>Q.series[ee]._stroke,k={points:{stroke:j,fill:j,size:!H||H<O?void 0:H,filter:x}};return I!=null?k.points.show=I:T===r.GR.Points?k.points.show=!0:B===r.yL.Auto?T===r.GR.Bars&&(k.points.show=!1):B===r.yL.Never?k.points.show=!1:B===r.yL.Always&&(k.points.show=!0),{scale:W,facets:y,spanGaps:typeof V=="number"?!1:V,value:()=>"",pxAlign:N,show:G,fill:this.getFill(),..._,...k}}getLineColor(){const{lineColor:y,gradientMode:T,colorMode:M,thresholds:I,theme:x,hardMin:S,hardMax:O,softMin:C,softMax:L,dynamicSeriesColor:U}=this.props;return T===r.on.None&&U?(R,B)=>U(B)??y??i.F:T===r.on.Scheme&&M?.id!==i.Y.Fixed?(0,c.pl)(1,x,M,I,S,O,C,L):T===r.on.Hue?(0,c.B5)(y??i.F,1,x):y??i.F}getFill(){const{lineColor:y,fillColor:T,gradientMode:M,fillOpacity:I,colorMode:x,thresholds:S,theme:O,hardMin:C,hardMax:L,softMin:U,softMax:R,dynamicSeriesColor:B}=this.props;if(T)return T;const H=M??r.on.None,W=(I??0)/100;if(H===r.on.None&&B&&W>0)return(N,V)=>{let G=N.series[V]._stroke;return l.alpha(G??"",W)};switch(H){case r.on.Opacity:return(0,c.WO)(T??y,W);case r.on.Hue:return(0,c.B5)(T??y,W,O);case r.on.Scheme:if(x?.id!==i.Y.Fixed)return(0,c.pl)(W,O,x,S,C,L,U,R);default:if(W>0)return l.alpha(y??"",W)}}}let p;function m(P,y,T=r.Nj.Center,M=.6,I=200){const x=n.A.paths;if(p||(p={linear:x.linear(),smooth:x.spline(),stepBefore:x.stepped({align:-1}),stepAfter:x.stepped({align:1})}),P===r.GR.Bars){let S=`bars|${T}|${M}|${I}`;return p[S]||(p[S]=x.bars({size:[M,I],align:T})),p[S]}else if(P===r.GR.Line){if(y===r.dx.StepBefore)return p.stepBefore;if(y===r.dx.StepAfter)return p.stepAfter;if(y===r.dx.Smooth)return p.smooth}return p.linear}var a=e(84140),v=e(50082);function E(P){const y=P.config.mode===r.Ly.Dashed||P.config.mode===r.Ly.DashedAndArea?[10,10]:null;function T(B,H,W,N){let V=B.ctx,G=0;for(let _=0;_<W.length;_++)if(W[_].color==="transparent"){G=_;break}V.lineWidth=2,y&&V.setLineDash(y);for(let _=1;_<W.length;_++){const K=W[_];let j;G>=_&&_>0?j=(0,a.A)(N.visualization.getColorByName(W[_-1].color)):j=(0,a.A)(N.visualization.getColorByName(K.color)),j.getAlpha()===1&&j.setAlpha(.7);let k=Math.round(B.bbox.left),Q=Math.round(B.valToPos(K.value,H,!0)),ee=Math.round(B.bbox.left+B.bbox.width),ae=Math.round(B.valToPos(K.value,H,!0));V.beginPath(),V.moveTo(k,Q),V.lineTo(ee,ae),V.strokeStyle=j.toString(),V.stroke()}}function M(B,H,W,N){let V=B.ctx,G=(0,c.Z8)(B,H,W.map(_=>{let K=(0,a.A)(N.visualization.getColorByName(_.color));return K.getAlpha()===1&&K.setAlpha(.15),[_.value,K.toString()]}),!0);V.fillStyle=G,V.fillRect(B.bbox.left,B.bbox.top,B.bbox.width,B.bbox.height)}const{scaleKey:I,thresholds:x,theme:S,config:O,hardMin:C,hardMax:L,softMin:U,softMax:R}=P;return B=>{const H=B.ctx,{min:W,max:N}=B.scales.x,{min:V,max:G}=B.scales[I];if(W==null||N==null||V==null||G==null)return;let{steps:_,mode:K}=x;if(K===v.O.Percentage){let[j,k]=(0,c.EJ)(B,I,C,L,U,R),Q=k-j;_=_.map(ee=>({...ee,value:j+Q*(ee.value/100)}))}switch(H.save(),O.mode){case r.Ly.Line:case r.Ly.Dashed:T(B,I,_,S);break;case r.Ly.Area:M(B,I,_,S);break;case r.Ly.LineAndArea:case r.Ly.DashedAndArea:M(B,I,_,S),T(B,I,_,S)}H.restore()}}const D={drag:{setScale:!1},points:{size:(P,y)=>P.series[y].points.size*2,width:(P,y,T)=>T/4},focus:{prox:30}};class b{constructor(y=o.lE){this.series=[],this.axes={},this.scales=[],this.bands=[],this.stackingGroups=[],this.hasLeftAxis=!1,this.hooks={},this.tz=void 0,this.sync=!1,this.mode=1,this.frames=void 0,this.thresholds={},this.tooltipInterpolator=void 0,this.padding=void 0,this.prepData=void 0,this.scaleKeys=["",""],this.tzDate=T=>{let M=new Date(T);return this.tz?n.A.tzDate(M,this.tz):M},this.tz=(0,s.QZ)(y,Date.now())?.ianaName}addHook(y,T){(0,g.uY)("UPlotConfigBuilder",!1,"addHook",y),this.hooks[y]||(this.hooks[y]=[]),this.hooks[y].push(T)}addThresholds(y){this.thresholds[y.scaleKey]||(this.thresholds[y.scaleKey]=y,this.addHook("drawClear",E(y)))}addAxis(y){y.placement=y.placement??r.vM.Auto,y.grid=y.grid??{};let T=y.scaleKey;if(T==="x"&&(T+=y.timeZone??""),this.axes[T]){this.axes[T].merge(y);return}y.placement===r.vM.Auto&&(y.placement=this.hasLeftAxis?r.vM.Right:r.vM.Left),y.placement===r.vM.Left&&(this.hasLeftAxis=!0),y.placement===r.vM.Hidden&&(y.grid.show=!1,y.size=0),this.axes[T]=new u.zH(y)}getAxisPlacement(y){return this.axes[y]?.props.placement??r.vM.Left}setCursor(y){this.cursor=(0,t.merge)({},this.cursor,y)}setMode(y){this.mode=y}setSelect(y){this.select=y}addSeries(y){this.series.push(new h(y))}getSeries(){return this.series}addScale(y){const T=this.scales.find(M=>M.props.scaleKey===y.scaleKey);if(T){T.merge(y);return}this.scales.push(new d.G(y))}addBand(y){this.bands.push(y)}setStackingGroups(y){this.stackingGroups=y}getStackingGroups(){return this.stackingGroups}setTooltipInterpolator(y){this.tooltipInterpolator=y}getTooltipInterpolator(){return this.tooltipInterpolator}setPrepData(y){this.prepData=T=>(this.frames=T,y(T,this.getStackingGroups()))}setSync(){this.sync=!0}hasSync(){return this.sync}setPadding(y){this.padding=y}getConfig(){if(this.cachedConfig)return this.cachedConfig;const y={...g.NN,mode:this.mode,series:[this.mode===2?null:{value:()=>""}]};y.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map(M=>M.getConfig()),y.series=[...y.series,...this.series.map(M=>M.getConfig())],y.scales=this.scales.reduce((M,I)=>({...M,...I.getConfig()}),{}),y.hooks=this.hooks,y.select=this.select;const T=(M="")=>(I,x)=>{let S=I.series[x].points._stroke;if(typeof S!="string"){let O=this.frames[0].fields[x];S=O.display(O.values[I.cursor.idxs[x]]).color}return S+M};return y.cursor=(0,t.merge)({},D,{points:{stroke:T("80"),fill:T()}},this.cursor),y.tzDate=this.tzDate,Array.isArray(this.padding)&&(y.padding=this.padding),this.stackingGroups.forEach(M=>{(0,g.Tz)(M).forEach(I=>{this.addBand(I)})}),this.bands.length&&(y.bands=this.bands),this.cachedConfig=y,y}ensureNonOverlappingAxes(y){const T=y.find(x=>x.props.scaleKey==="x"),M=y.filter(x=>x.props.grid?.show===void 0),I=M.findIndex(x=>x.props.placement===r.vM.Left||x.props.placement===r.vM.Right||x.props.placement===r.vM.Bottom&&x!==T);for(let x=0;x<M.length;x++)M[x]===T||x===I?M[x].props.grid.show=!0:M[x].props.grid.show=!1;return y}}},93060:(Y,A,e)=>{"use strict";e.d(A,{G:()=>g,Y:()=>u});var t=e(36613),n=e(77678),o=e(83195),s=e(52622),r=e(52811);class g extends r.R{merge(i){this.props.min=u("min",this.props.min,i.min),this.props.max=u("max",this.props.max,i.max)}getConfig(){let{isTime:i,scaleKey:l,min:f,max:c,softMin:h,softMax:p,range:m,direction:a,orientation:v,centeredZero:E,decimals:D}=this.props;const b=this.props.distribution,P=i?{}:{distr:b===s.L4.Symlog?4:b===s.L4.Log?3:b===s.L4.Ordinal?2:1,log:b===s.L4.Log||b===s.L4.Symlog?this.props.log??2:void 0,asinh:b===s.L4.Symlog?this.props.linearThreshold??1:void 0};if(b===s.L4.Log){let L=this.props.log,U=L===2?Math.log2:Math.log10;f!=null&&(f<=0?f=null:f=L**Math.floor(U(f))),c!=null&&(c<=0?c=null:c=L**Math.ceil(U(c))),h!=null&&(h<=0?h=null:h=L**Math.floor(U(h))),p!=null&&(p<=0?p=null:p=L**Math.ceil(U(p)))}let y=h==null?3:1,T=p==null?3:1;const M={min:{pad:.1,hard:f??-1/0,soft:h||0,mode:y},max:{pad:.1,hard:c??1/0,soft:p||0,mode:T}};let I=h==null&&f!=null,x=p==null&&c!=null,S=I&&x;const O=(L,U,R,B)=>{const H=L.scales[B];let W=[U,R];if(B==="x"&&!i&&b===s.L4.Linear||!S&&U==null&&R==null)return W;let N=H.log??10;if(H.distr===1||H.distr===2||H.distr===4){if(E){let V=Math.abs(U),G=Math.abs(R),_=Math.max(V,G);_===0&&(_=80),U=-_,R=_}H.distr===4?W=t.A.rangeAsinh(U,R,N,!0):W=t.A.rangeNum(I?f:U,x?c:R,M)}else H.distr===3&&(W=t.A.rangeLog(f??U,c??R,N,!0));if(D===0)if(H.distr===1||H.distr===2)W[0]=(0,n.rs)(W[0],1),W[1]=(0,n.Uh)(W[1],1);else if(H.distr===3){let V=H.log===2?Math.log2:Math.log10;if(W[0]<=1)W[0]=1;else{let _=Math.floor(V(W[0]));W[0]=N**_}let G=Math.ceil(V(W[1]));W[1]=N**G,W[0]===W[1]&&(W[1]*=N)}else H.distr===4&&(W[0]=(0,n.rs)(W[0],1),W[1]=(0,n.Uh)(W[1],1));return(H.distr===1||H.distr===4)&&(I&&(W[0]=f),x&&(W[1]=c)),W[0]>=W[1]&&(W[0]=H.distr===3?1:0,W[1]=100),W};let C=!i&&!S;return(0,o.j9)(l)&&(C=!1,m=[0,1]),{[l]:{time:i,auto:C,range:m??O,dir:a,ori:v,...P}}}}function u(d,i,l){const f=i!=null,c=l!=null;return f?c?d==="min"?i<l?i:l:i>l?i:l:i:l}},74863:(Y,A,e)=>{"use strict";e.d(A,{B5:()=>i,EJ:()=>h,WO:()=>d,Z8:()=>f,pl:()=>m});var t=e(84140),n=e(23596),o=e(24293),s=e(50082),r=e(52622),g=e(29413);function u(a,v,E){let D=0,b=0,P=0,y=0;return a===3?(b=v.top,y=v.top+v.height):a===2?(D=v.left+v.width,P=v.left):a===1?(b=v.top+v.height,y=v.top):a===0&&(D=v.left,P=v.left+v.width),E.createLinearGradient(D,b,P,y)}function d(a,v){return(E,D)=>{const b=(0,g.Yc)(),P=u(E.scales.x.ori===r.Lt.Horizontal?3:2,E.bbox,b);return P.addColorStop(0,n.alpha(a,v)),P.addColorStop(1,n.alpha(a,0)),P}}function i(a,v,E){return(D,b)=>{const P=(0,g.Yc)(),y=u(D.scales.x.ori===r.Lt.Horizontal?3:2,D.bbox,P),T=(0,t.A)(a).spin(-25).darken(5),M=(0,t.A)(a).saturate(20).spin(20).brighten(10);return E.isDark?(y.addColorStop(0,M.lighten(10).setAlpha(v).toString()),y.addColorStop(1,T.darken(10).setAlpha(v).toString())):(y.addColorStop(0,M.lighten(10).setAlpha(v).toString()),y.addColorStop(1,T.setAlpha(v).toString())),y}}var l=(a=>(a[a.Right=0]="Right",a[a.Up=1]="Up",a[a.Left=2]="Left",a[a.Down=3]="Down",a))(l||{});function f(a,v,E,D=!1){let b=a.scales[v],P=null,y=null;for(let W=0;W<E.length;W++){let N=E[W][0];if((N<=b.min||P==null)&&(P=W),y=W,N>=b.max)break}if(P===y)return E[P][1];let T=E[P][0],M=E[y][0];T===-1/0&&(T=b.min),M===1/0&&(M=b.max);let I=Math.round(a.valToPos(T,v,!0)),x=Math.round(a.valToPos(M,v,!0)),S=I-x;if(S===0)return E[y][1];let O,C,L,U;a.scales.x.ori===r.Lt.Horizontal?(O=L=0,C=I,U=x):(C=U=0,O=I,L=x);let B=(0,g.Yc)().createLinearGradient(O,C,L,U),H;for(let W=P;W<=y;W++){let N=E[W],V=W===P?I:W===y?x:Math.round(a.valToPos(N[0],v,!0)),G=(I-V)/S;D&&W>P&&B.addColorStop(G,H),B.addColorStop(G,H=N[1])}return B}function c(a,v){let E=a.scales[v],D=1/0,b=-1/0;return a.series.forEach((P,y)=>{if(P.show&&P.scale===v)if(P.min==null){let T=a.data[y];for(let M=0;M<T.length;M++)T[M]!=null&&(D=Math.min(D,T[M]),b=Math.max(b,T[M]))}else D=Math.min(D,P.min),b=Math.max(b,P.max)}),b===D&&(D=E.min,b=E.max),[D,b]}function h(a,v,E,D,b,P){let y=E??b??null,T=D??P??null;if(y==null||T==null){let[M,I]=c(a,v);y=y??M??0,T=T??I??100}return[y,T]}function p(a){return a==="transparent"||a[0]==="#"&&a.slice(-2)==="00"}function m(a,v,E,D,b,P,y,T){if(!E)throw Error("Missing colorMode required for color scheme gradients");if(!D)throw Error("Missing thresholds required for color scheme gradients");return(M,I)=>{let x=M.series[I].scale,S="";if(E.id===o.Y.Thresholds)if(D.mode===s.O.Absolute){const O=D.steps.map(C=>[C.value,p(C.color)?"#0000":n.alpha(v.visualization.getColorByName(C.color),a)]);S=f(M,x,O,!0)}else{const[O,C]=h(M,x,b,P,y,T),L=C-O,U=D.steps.map(R=>[O+L*(R.value/100),n.alpha(v.visualization.getColorByName(R.color),a)]);S=f(M,x,U,!0)}else if(E.getColors){const O=E.getColors(v),[C,L]=h(M,x,b,P,y,T),U=L-C,R=O.map((B,H)=>[C+U*(H/(O.length-1)),n.alpha(v.visualization.getColorByName(B),a)]);S=f(M,x,R,!1)}return S}}},78226:(Y,A,e)=>{"use strict";e.d(A,{a:()=>r});var t=e(96540),n=e(1604),o=e(6967),s=e(97620);function r({id:g,events:u,renderEventMarker:d,mapEventToXYCoords:i,config:l}){const f=(0,t.useRef)(),[c,h]=(0,t.useState)(0),p=(0,n.A)();(0,t.useLayoutEffect)(()=>{l.addHook("init",a=>{f.current=a}),l.addHook("draw",()=>{p()&&h(a=>a+1)})},[l,h]);const m=(0,t.useMemo)(()=>{const a=[];if(!f.current||u.length===0)return a;for(let v=0;v<u.length;v++){const E=u[v];for(let D=0;D<E.length;D++){const b=i(E,{fieldIndex:D,frameIndex:v});b&&a.push(t.createElement(o.p,{...b,key:`${g}-marker-${v}-${D}`},d(E,{fieldIndex:D,frameIndex:v})))}}return t.createElement(t.Fragment,null,a)},[u,d,c]);return f.current?t.createElement(s._,{left:f.current.bbox.left/window.devicePixelRatio,top:f.current.bbox.top/window.devicePixelRatio},m):null}},6967:(Y,A,e)=>{"use strict";e.d(A,{p:()=>n});var t=e(96540);const n=({x:o,y:s,children:r})=>t.createElement("div",{style:{position:"absolute",top:`${s}px`,left:`${o}px`}},r)},97620:(Y,A,e)=>{"use strict";e.d(A,{_:()=>o});var t=e(32196),n=e(96540);const o=({children:s,left:r,top:g})=>{const u=(0,n.useMemo)(()=>(0,t.css)({position:"absolute",overflow:"visible",left:`${r}px`,top:`${g}px`}),[r,g]);return n.createElement("div",{className:u},s)}},96747:(Y,A,e)=>{"use strict";e.d(A,{_X:()=>o._,a:()=>t.a,pH:()=>n.p});var t=e(78226),n=e(6967),o=e(97620)},55129:(Y,A,e)=>{"use strict";e.d(A,{M:()=>o});var t=e(52622),n=e(52811);function o(r,g){const u="na",d=`${r.min!==void 0?r.min:u}-${r.max!==void 0?r.max:u}`,i=`${r.custom?.axisSoftMin!==void 0?r.custom.axisSoftMin:u}-${r.custom?.axisSoftMax!==void 0?r.custom.axisSoftMax:u}`,l=`${r.custom?.axisPlacement!==void 0?r.custom?.axisPlacement:t.vM.Auto}`,f=r.unit??n.s,c=r.custom?.scaleDistribution?s(r.custom.scaleDistribution):t.L4.Linear,h=r.custom?.axisLabel?r.custom.axisLabel:u;return`${f}/${d}/${i}/${l}/${c}/${h}/${g}`}function s(r){return r.type===t.L4.Log?`${r.type}${r.log}`:r.type}},23117:(Y,A,e)=>{"use strict";e.d(A,{Z:()=>d});var t=e(2543),n=e.n(t),o=e(96540);const s=.1,r=2,g=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Shift"," "]),u=i=>{let l=i.root.closest("[tabindex]"),f=new Set,c=null,h=null;if(!l)return;const p=(P,y)=>{const{cursor:T}=i;if(T.left===void 0||T.top===void 0)return;const{width:M,height:I}=i.over.style,[x,S]=[Math.floor(parseFloat(M)),Math.floor(parseFloat(I))];i.setCursor({left:(0,t.clamp)(T.left+P,0,x),top:(0,t.clamp)(T.top+y,0,S)})},m=P=>{if(f.size===0||!i){h=null;return}const M=(P-(h??P))*s;let I=0,x=0;f.has("ArrowUp")&&(x-=M),f.has("ArrowDown")&&(x+=M),f.has("ArrowLeft")&&(I-=M),f.has("ArrowRight")&&(I+=M),f.has("Shift")&&(I*=r,x*=r),p(I,x);const{cursor:S}=i;if(f.has(" ")&&S){const O=Number(i.over.style.height.slice(0,-2));i.setSelect({left:S.left<c?S.left:c,top:0,width:Math.abs(S.left-(c??S.left)),height:O},!1)}h=P,window.requestAnimationFrame(m)},a=P=>{if(P.key==="Tab"){i.setCursor({left:-5,top:-5});return}if(!g.has(P.key))return;if(P.preventDefault(),P.stopPropagation(),!f.has(P.key)){const T=f.size===0;f.add(P.key),c=P.key===" "&&c===null?i.cursor.left:c,T&&window.requestAnimationFrame(m)}},v=P=>{g.has(P.key)&&(f.delete(P.key),P.key===" "&&(P.preventDefault(),P.stopPropagation(),i.setSelect(i.select),c=null))},E=()=>{if(!l?.matches(":focus-visible"))return;const P=parseFloat(i.over.style.width),y=parseFloat(i.over.style.height);i.setCursor({left:P/2,top:y/2})},D=()=>{h=null,c=null,f.clear(),i.setSelect({left:0,top:0,width:0,height:0},!1)};l.addEventListener("keydown",a),l.addEventListener("keyup",v),l.addEventListener("focus",E),l.addEventListener("blur",D);const b=()=>{l?.removeEventListener("keydown",a),l?.removeEventListener("keyup",v),l?.removeEventListener("focus",E),l?.removeEventListener("blur",D),l=null};(i.hooks.destroy??=[]).push(b)},d=({config:i})=>((0,o.useLayoutEffect)(()=>i.addHook("init",u),[i]),null)},16615:(Y,A,e)=>{"use strict";e.d(A,{T:()=>E,n:()=>b});var t=e(32196),n=e(96540),o=e(1604),s=e(94624),r=e(57875),g=e(24293),u=e(28240),d=e(83195),i=e(11261),l=e(14588),f=e(52622),c=e(40845),h=e(17464),p=e(3139),m=e(69503),a=e(16895);const v=10,E=({mode:y=f.$N.Single,sortOrder:T=f.xB.None,sync:M,timeZone:I,config:x,renderTooltip:S,...O})=>{const C=(0,n.useRef)(),L=(0,c.$j)(),[U,R]=(0,n.useState)(null),[B,H]=(0,n.useState)(null),[W,N]=(0,n.useState)([]),[V,G]=(0,n.useState)(null),[_,K]=(0,n.useState)(!1),j=(0,o.A)();let k=null;const Q="TooltipPlugin",ee=(0,c.of)(P);if((0,n.useEffect)(()=>{(0,a.uY)(Q,!0,`Focused series: ${U}, focused point: ${B}`)},[B,U]),(0,n.useLayoutEffect)(()=>{let te;const re=()=>{j()&&(K(!0),C.current?.root.classList.add("plot-active"))},de=()=>{j()&&(G(null),K(!1),C.current?.root.classList.remove("plot-active"))};x.addHook("syncRect",(ge,ve)=>te=ve),x.addHook("init",ge=>{C.current=ge,ge.over.addEventListener("mouseenter",re),ge.over.addEventListener("mouseleave",de),k=ge.root.closest("[tabindex]"),k&&(k.addEventListener("focus",re),k.addEventListener("blur",de)),M&&M()===s.y.Crosshair&&ge.root.classList.add("shared-crosshair")});const ie=x.getTooltipInterpolator();return ie?x.addHook("setCursor",ge=>{ie(R,H,ve=>{if(ve){G(null);return}if(!te)return;const{x:ye,y:pe}=b(ge,te);ye!==void 0&&pe!==void 0&&G({x:ye,y:pe})},ge)}):(x.addHook("setLegend",ge=>{j()&&(H(ge.legend.idx),N(ge.legend.idxs.slice()))}),x.addHook("setCursor",ge=>{if(!te||!j())return;const{x:ve,y:ye}=b(ge,te);G(ve!==void 0&&ye!==void 0?{x:ve,y:ye}:null)}),x.addHook("setSeries",(ge,ve)=>{j()&&R(ve)})),()=>{G(null),C.current&&(C.current.over.removeEventListener("mouseleave",de),C.current.over.removeEventListener("mouseenter",re),k&&(k.removeEventListener("focus",re),k.removeEventListener("blur",de)))}},[x,G,K,H,N]),B===null||!_&&M&&M()===s.y.Crosshair)return null;let ae=O.data.fields[0];if(!ae)return null;const Z=ae.display||(0,r.J)({field:ae,timeZone:I,theme:L});let ne=null,q=Z(ae.values[B]).text;if(S)ne=S(O.data,U,B);else{if(y===f.$N.Single&&U!==null){const te=O.data.fields[U];if(!te)return null;const re=W?.[U]??B;q=Z(ae.values[re]).text;const ie=(te.display||(0,r.J)({field:te,timeZone:I,theme:L}))(te.values[re]);ne=n.createElement(p.o,{series:[{color:ie.color||g.F,label:(0,u.Ct)(te,O.data,O.frames),value:ie?(0,d.cN)(ie):null}],timestamp:q})}if(y===f.$N.Multi){let te=[];const re=O.data,de=re.fields,ie=[];for(let ge=0;ge<de.length;ge++){const ve=re.fields[ge];if(!ve||ve===ae||ve.type===i.PU.time||ve.type!==i.PU.number||ve.config.custom?.hideFrom?.tooltip||ve.config.custom?.hideFrom?.viz)continue;const ye=O.data.fields[ge].values[W[ge]],pe=ve.display(ye);ie.push(ye),te.push({color:pe.color||g.F,label:(0,u.Ct)(ve,re,O.frames),value:pe?(0,d.cN)(pe):null,isActive:U===ge})}if(T!==f.xB.None){const ge=[...te],ve=l.sortValues(T);te.sort((ye,pe)=>{const le=ge.indexOf(ye),Me=ge.indexOf(pe);return ve(ie[le],ie[Me])})}ne=n.createElement(p.o,{series:te,timestamp:q})}}return n.createElement(h.ZL,{className:_?ee.tooltipWrapper:void 0},ne&&V&&n.createElement(m.o,{position:{x:V.x,y:V.y},offset:{x:v,y:v}},ne))};function D({left:y,top:T},M){return y===void 0||T===void 0?!1:y<0||y>M.width||T<0||T>M.height}function b(y,T){let M,I;const x=y.cursor.left||0,S=y.cursor.top||0;if(D(y.cursor,T)){const O=y.posToIdx(x);if(S<0||S>T.height){let C=(0,a.sw)(y,O);C&&(I=T.top+C,x>=0&&x<=T.width&&(M=T.left+y.valToPos(y.data[0][y.posToIdx(x)],y.series[0].scale)))}}else M=T.left+x,I=T.top+S;return{x:M,y:I}}const P=y=>({tooltipWrapper:(0,t.css)({"z-index":y.zIndex.portal+1+" !important"})})},77455:(Y,A,e)=>{"use strict";e.d(A,{b3:()=>c,xl:()=>v});var t=e(32196),n=e(96540),o=e(40961),s=e(40845),r=e(18348),g=e(29158);const u=({onClick:D,"aria-label":b,style:P})=>{const y=(0,s.of)(d);return n.createElement(g.K,{"aria-label":b??"Close",className:y,name:"times",onClick:D,style:P})},d=D=>(0,t.css)({position:"absolute",margin:"0px",right:D.spacing(1),top:D.spacing(1.25)}),i=void 0,l=void 0,f=10;var c=(D=>(D[D.xOne=0]="xOne",D[D.xAll=1]="xAll",D[D.xyOne=2]="xyOne",D))(c||{});function h(D,b){return{...D,...b,style:{...D.style,...b.style}}}const p={style:{transform:"",pointerEvents:"none"},isHovering:!1,isPinned:!1,contents:null,plot:null,dismiss:()=>{}},m=5,a=D=>D!=null&&!D.ctrlKey&&!D.metaKey,v=({config:D,hoverMode:b,render:P,clientZoom:y=!1,queryZoom:T,maxWidth:M,maxHeight:I})=>{const x=(0,n.useRef)(null),[{plot:S,isHovering:O,isPinned:C,contents:L,style:U,dismiss:R},B]=(0,n.useReducer)(h,p),{boostZIndex:H}=(0,n.useContext)(r.N);(0,n.useEffect)(()=>C?H():void 0,[C]);const W=(0,n.useRef)();M=C?i:M??i,I??=l;const N=(0,s.of)(E,M,I),V=(0,n.useRef)(P);return V.current=P,(0,n.useLayoutEffect)(()=>{W.current={width:0,height:0,observer:new ResizeObserver(De=>{let Re=W.current;for(const me of De)me.borderBoxSize?.length>0?(Re.width=me.borderBoxSize[0].inlineSize,Re.height=me.borderBoxSize[0].blockSize):(Re.width=me.contentRect.width,Re.height=me.contentRect.height)})};let G=!1,_=!1,K=S,j=O,k=!1,Q=C,ee=U;const ae=()=>{j=de!=null||b===1&&k};let Z=0,ne=0,q={lft:0,top:0,rgt:screen.width,btm:screen.height},te=null,re=S?.cursor.idxs.slice(),de=null,ie=!1,ge=!1,ve=!1;const ye=(De=!1)=>{ge||(j?queueMicrotask(le):setTimeout(le,100),ge=!0),De&&(ve=!0)},pe=De=>{x.current.contains(De.target)||Me()},le=()=>{ge=!1,ve&&(ee={pointerEvents:Q?"all":"none"},K.cursor._lock=Q,Q?(document.addEventListener("mousedown",pe,!0),document.addEventListener("keydown",pe,!0)):(document.removeEventListener("mousedown",pe,!0),document.removeEventListener("keydown",pe,!0)),ve=!1);let De={style:ee,isPinned:Q,isHovering:j,contents:j||te!=null?V.current(K,re,de,Q,Me,te,ie):null,dismiss:Me};B(De),te=null,ie=!1},Me=()=>{let De=Q;Q=!1,j=!1,K.setCursor({left:-10,top:-10}),ye(De)};D.addHook("init",De=>{B({plot:K=De}),y&&De.over.addEventListener("mousedown",he=>{if(a(he)&&he.button===0&&he.shiftKey){_=!0,De.cursor.drag.x=!1,De.cursor.drag.y=!0;let Te=Be=>{De.cursor.drag.x=!0,De.cursor.drag.y=!1,document.removeEventListener("mouseup",Te,!0)};document.addEventListener("mouseup",Te,!0)}},!0),De.over.addEventListener("click",he=>{if(he.target===De.over)if(he.ctrlKey||he.metaKey){let Te=De.posToVal(De.cursor.left,"x");te={from:Te,to:Te},ye(!1)}else j&&de!=null&&!Q&&(Q=!0,ye(!0))});const Re="pageContent",me=16;De.over.addEventListener("mouseenter",()=>{let he=document.documentElement,Te=he.clientWidth-me,Be=he.clientHeight-me,we=0,Ne=0,Ze=Te,st=Be,Qe=De.root;for(;Qe!=null&&Qe.id!==Re;){let ke=getComputedStyle(Qe),je=ke.getPropertyValue("overflow-x"),He=ke.getPropertyValue("overflow-y");if(je!=="visible"||He!=="visible"){let Ge=Qe.getBoundingClientRect();we=Math.max(Ge.x,we),Ne=Math.max(Ge.y,Ne),Ze=Math.min(we+Ge.width,Ze),st=Math.min(Ne+Ge.height,st);break}Qe=Qe.parentElement}q.lft=we,q.top=Ne,q.rgt=Ze,q.btm=st},{capture:!0})}),D.addHook("setSelect",De=>{if(y||T!=null)if(a(De.cursor.event)){if(y&&_){if(De.select.height>=m){for(let Re in De.scales)if(Re!=="x"){const me=De.posToVal(De.select.top,Re),he=De.posToVal(De.select.top+De.select.height,Re);De.setScale(Re,{min:he,max:me})}G=!0}_=!1}else if(T!=null&&De.select.width>=m){const Re=De.posToVal(De.select.left,"x"),me=De.posToVal(De.select.left+De.select.width,"x");T({from:Re,to:me}),G=!1}}else te={from:De.posToVal(De.select.left,"x"),to:De.posToVal(De.select.left+De.select.width,"x")},ye(!0);De.setSelect({left:0,width:0,top:0,height:0},!1)}),(y||T!=null)&&D.setCursor({bind:{dblclick:De=>()=>{if(!a(De.cursor.event))return null;if(y&&G){for(let Re in De.scales)Re!=="x"&&De.setScale(Re,{min:null,max:null});G=!1}else if(T!=null){let Re=De.scales.x;const me=Re.min,he=Re.max,Te=(he-me)/2;T({from:me-Te,to:he+Te})}return null}}}),D.addHook("setData",De=>{G=!1,_=!1}),D.addHook("setSeries",(De,Re)=>{de=Re,ae(),ye()}),D.addHook("setLegend",De=>{re=K?.cursor.idxs.slice(),k=re.some((Re,me)=>me>0&&Re!=null),ae(),ye()}),D.addHook("setCursor",De=>{let{left:Re=-10,top:me=-10,event:he}=De.cursor;if(Re>=0||me>=0){ie=he==null;let Te="";if(ie)Te=`translateX(${Re}px) translateY(${De.rect.height/2}px) translateY(-50%)`;else{let{width:Be,height:we}=W.current;Be+=f,we+=f;let Ne=De.rect.left+Re,Ze=De.rect.top+me;ne!==0?Ze+we<q.btm||Ze-we<0?ne=0:ne!==-we&&(ne=-we):Ze+we>q.btm&&Ze-we>=0&&(ne=-we),Z!==0?Ne+Be<q.rgt||Ne-Be<0?Z=0:Z!==-Be&&(Z=-Be):Ne+Be>q.rgt&&Ne-Be>=0&&(Z=-Be);const st=Re+(Z===0?f:-f),Qe=me+(ne===0?f:-f);Te=`translateX(${st}px) ${Z===0?"":"translateX(-100%)"} translateY(${Qe}px) ${ne===0?"":"translateY(-100%)"}`}j&&(x.current!=null?x.current.style.transform=Te:(ee.transform=Te,ye()))}})},[D]),(0,n.useLayoutEffect)(()=>{const G=W.current;x.current!=null&&G.observer.observe(x.current)},[x.current]),S&&O?(0,o.createPortal)(n.createElement("div",{className:(0,t.cx)(N.tooltipWrapper,C&&N.pinned),style:U,ref:x},C&&n.createElement(u,{onClick:R}),L),S.over):null},E=(D,b,P)=>({tooltipWrapper:(0,t.css)({top:0,left:0,zIndex:D.zIndex.tooltip,whiteSpace:"pre",borderRadius:D.shape.radius.default,position:"absolute",background:D.colors.background.primary,border:`1px solid ${D.colors.border.weak}`,boxShadow:D.shadows.z2,userSelect:"text",maxWidth:b??"none",maxHeight:P??"none",overflowY:"auto"}),pinned:(0,t.css)({boxShadow:D.shadows.z3})})},10175:(Y,A,e)=>{"use strict";e.d(A,{j:()=>s});var t=e(96540);const n=5,o=r=>r!=null&&!r.ctrlKey&&!r.metaKey,s=({onZoom:r,config:g,withZoomY:u=!1})=>((0,t.useLayoutEffect)(()=>{let d=!1,i=!1;u&&g.addHook("init",l=>{l.over.addEventListener("mousedown",f=>{if(o(f)&&f.button===0&&f.shiftKey){i=!0,l.cursor.drag.x=!1,l.cursor.drag.y=!0;let c=h=>{l.cursor.drag.x=!0,l.cursor.drag.y=!1,document.removeEventListener("mouseup",c,!0)};document.addEventListener("mouseup",c,!0)}},!0)}),g.addHook("setSelect",l=>{if(o(l.cursor.event)){if(u&&i){if(l.select.height>=n){for(let f in l.scales)if(f!=="x"){const c=l.posToVal(l.select.top,f),h=l.posToVal(l.select.top+l.select.height,f);l.setScale(f,{min:h,max:c})}d=!0}i=!1}else if(l.select.width>=n){const f=l.posToVal(l.select.left,"x"),c=l.posToVal(l.select.left+l.select.width,"x");r({from:f,to:c}),d=!1}}l.setSelect({left:0,width:0,top:0,height:0},!1)}),g.setCursor({bind:{dblclick:l=>()=>{if(!o(l.cursor.event))return null;if(u&&d){for(let f in l.scales)f!=="x"&&l.setScale(f,{min:null,max:null});d=!1}else{let f=l.scales.x;const c=f.min,h=f.max,p=(h-c)/2;r({from:c-p,to:h+p})}return null}}})},[g]),null)},66737:(Y,A,e)=>{"use strict";e.d(A,{Tk:()=>n.T,Z7:()=>s.Z,jn:()=>t.j,xl:()=>o.xl});var t=e(10175),n=e(16615),o=e(77455),s=e(23117)},52811:(Y,A,e)=>{"use strict";e.d(A,{R:()=>n,s:()=>t});const t="__fixed";class n{constructor(s){this.props=s}}},16895:(Y,A,e)=>{"use strict";e.d(A,{NN:()=>l,Tz:()=>c,bq:()=>p,ro:()=>h,sw:()=>m,uY:()=>D});var t=e(11261),n=e(50311),o=e(52622),s=e(40621),r=e(91040),g=e(55129);const u=/\b(YYYY|YY|MMMM|MMM|MM|M|DD|D|WWWW|WWW|HH|H|h|AA|aa|a|mm|m|ss|s|fff)\b/g;function d(b){return b.replace(u,P=>`{${P}}`)}const i=(b,P,y)=>{let T=P%2?y[0]||y[2]:y[1]||y[3];return y[P]||!T?0:8},l={ms:1,focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[i,i,i,i],series:[],hooks:{}};var f=(b=>(b[b.Pos=1]="Pos",b[b.Neg=-1]="Neg",b))(f||{});function c(b){let P=[],{series:y,dir:T}=b,M=y.length-1,I=y.slice().reverse();return I.forEach((x,S)=>{if(S!==M){let O=I[S+1];P.push({series:[x,O],dir:-1*T})}}),P}function h(b){let P=new Map;return b.fields.forEach(({config:y,values:T,type:M},I)=>{if(I===0)return;let{custom:x}=y;if(x==null||x.hideFrom?.viz)return;let{stacking:S}=x;if(S==null)return;let{mode:O,group:C}=S;if(O===o.gs.None)return;let L=x.transform,U=a(L,T),R=x.drawStyle,B=R===o.GR.Bars?x.barAlignment:R===o.GR.Line?x.lineInterpolation:null,H=`${U}|${O}|${C}|${(0,g.M)(y,M)}|${R}|${B}`,W=P.get(H);W==null&&(W={series:[],dir:U},P.set(H,W)),W.series.push(I)}),[...P.values()]}function p(b,P,y){let T=Array(b.fields.length),M=P.length,I=b.length,x=M>0?Array(I).fill(0):[],S=M>0?Array(I).fill(!1):[],O=Array.from({length:M},()=>x.slice()),C=Array.from({length:M},()=>S.slice());if(P.forEach((L,U)=>{let R=C[U];L.series.forEach(B=>{let H=b.fields[B];if(H.config.custom?.hideFrom?.viz)return;let W=H.values;for(let N=0;N<I;N++)W[N]!=null&&(R[N]=!0)})}),b.fields.forEach((L,U)=>{let R=L.values;if(U===0){L.type===t.PU.time?T[U]=(0,n.ks)(L).values:T[U]=R;return}let{custom:B}=L.config;if(!B||B.hideFrom?.viz){T[U]=R;return}if(B.transform===o.NU.Constant){let W=R.findIndex(V=>V!=null),N=R[W];R=Array(R.length).fill(void 0),R[W]=N}else if(R=R.slice(),B.transform===o.NU.NegativeY)for(let W=0;W<R.length;W++)R[W]!=null&&(R[W]*=-1);let H=B.stacking?.mode;if(!H||H===o.gs.None)T[U]=R;else{let W=P.findIndex(_=>_.series.indexOf(U)>-1),N=O[W],V=C[W],G=T[U]=Array(I);for(let _=0;_<I;_++){let K=R[_];K!=null?G[_]=N[_]+=K:G[_]=V[_]?N[_]:K}}}),y){let L=T.map((U,R)=>{let B=P.findIndex(H=>H.series.indexOf(R)>-1);return B!==-1?O[B]:U});y({totals:L})}return b.fields.forEach((L,U)=>{if(U===0||L.config.custom?.hideFrom?.viz)return;if(L.config.custom?.stacking?.mode===o.gs.Percent){let B=P.findIndex(V=>V.series.indexOf(U)>-1),H=O[B],W=P[B],N=T[U];for(let V=0;V<I;V++){let G=N[V];G!=null&&(N[V]=H[V]===0?0:W.dir*(G/H[V]))}}}),T}function m(b,P){let y,T=1,M=1,I=b.data[1][P],x=b.data[1][P];for(let S=1;S<b.data.length;S++){const C=b.data[S][P];C!=null&&(I==null?I=C:C>I&&(I=b.data[S][P],T=S),x==null?x=C:C<x&&(x=b.data[S][P],M=S))}return x==null&&I==null?y=void 0:x!=null&&I!=null?y=(b.valToPos(x,b.series[M].scale)+b.valToPos(I,b.series[T].scale))/2:y=b.valToPos(x||I,b.series[T||M].scale),y!==void 0&&y<0&&(y=b.bbox.height/devicePixelRatio),y}function a(b,P){const y=v(P);return b===o.NU.NegativeY?y?1:-1:y?-1:1}function v(b,P=100){const y=b.length;if(y===0)return!1;let T=0,M=y-1;for(;T<=M&&b[T]==null;)T++;for(;M>=T&&b[M]==null;)M--;let I=0,x=0;if(M>=T){const S=Math.max(1,Math.floor((M-T+1)/P));for(let O=T;O<=M;O+=S){const C=b[O];C!=null&&typeof C=="number"&&(C<0||Object.is(C,-0)?I++:C>0&&x++)}if(I>x)return!0}return!1}const E=(0,r.h)("uPlot"),D=E.logger;(0,s.h)("graphng",void 0,E)},48747:(Y,A,e)=>{"use strict";e.d(A,{T:()=>a});var t=e(34796),n=e.n(t),o=e(2543),s=e(96540),r=e(61443),g=e(52622),u=e(75128),d=e(33083),i=e(3139),l=e(65036);const f=({dimensions:E,activeDimensions:D,pos:b,timeZone:P})=>{let y=null;if(D.xAxis===null)return null;D.yAxis&&(y=D.yAxis[0]);const T=D.xAxis[1]?(0,r.WK)(E.xAxis,D.xAxis[0],D.xAxis[1]):b.x,M=(0,l.DU)(E.yAxis.columns,E.xAxis.columns,T,P),I=M.time,x=M.results.map((S,O)=>({color:S.color,label:S.label,value:S.value,isActive:y===O}));return s.createElement(i.o,{series:x,timestamp:I})};f.displayName="MultiModeGraphTooltip";var c=e(83195),h=e(28240);const p=({dimensions:E,activeDimensions:D,timeZone:b})=>{if(D.yAxis===null||D.yAxis[1]===void 0||D.xAxis===null||D.xAxis[1]===void 0)return null;const P=(0,r.WK)(E.xAxis,D.xAxis[0],D.xAxis[1]),y=(0,r.P4)(E.xAxis,D.xAxis[0]),T=y.display?(0,c.cN)(y.display(P)):P,M=(0,r.P4)(E.yAxis,D.yAxis[0]),I=(0,r.WK)(E.yAxis,D.yAxis[0],D.yAxis[1]),x=M.display,S=x(I);return s.createElement(i.o,{series:[{color:S.color,label:(0,h.Ct)(M),value:(0,c.cN)(S)}],timestamp:T})};p.displayName="SingleModeGraphTooltip";const m=({mode:E=g.$N.Single,dimensions:D,activeDimensions:b,pos:P,timeZone:y})=>!b||!b.xAxis?null:E==="single"?s.createElement(p,{dimensions:D,activeDimensions:b,timeZone:y}):s.createElement(f,{dimensions:D,activeDimensions:b,pos:P,timeZone:y});m.displayName="GraphTooltip";class a extends s.PureComponent{constructor(){super(...arguments),this.state={isTooltipVisible:!1,isContextVisible:!1},this.element=null,this.$element=null,this.onPlotSelected=(D,b)=>{const{onHorizontalRegionSelected:P}=this.props;P&&P(b.xaxis.from,b.xaxis.to)},this.onPlotHover=(D,b,P)=>{this.setState({isTooltipVisible:!0,activeItem:P,pos:b})},this.onPlotClick=(D,b,P)=>{this.setState({isContextVisible:!0,isTooltipVisible:!1,contextItem:P,contextPos:b})},this.renderTooltip=()=>{const{children:D,series:b,timeZone:P}=this.props,{pos:y,activeItem:T,isTooltipVisible:M}=this.state;let I;if(!M||!y||b.length===0||(s.Children.forEach(D,H=>{if(I)return;(H&&H.type&&(H.type.displayName||H.type.name))===u.n.displayName&&(I=H)}),!I))return null;const x=I.props,S=x.mode||"single";if(!T&&S==="single")return null;const O=x.tooltipComponent||m,C=T?T.series.seriesIndex:0,L=T?T.dataIndex:void 0,U={xAxis:[C,L],yAxis:T?[T.series.seriesIndex,T.dataIndex]:null},R={dimensions:{xAxis:(0,r.r4)("xAxis",b.map(H=>H.timeField)),yAxis:(0,r.r4)("yAxis",b.map(H=>H.valueField))},activeDimensions:U,pos:y,mode:x.mode||g.$N.Single,timeZone:P},B=s.createElement(O,{...R});return s.cloneElement(I,{content:B,position:{x:y.pageX,y:y.pageY},offset:{x:10,y:10}})},this.renderContextMenu=()=>{const{series:D}=this.props,{contextPos:b,contextItem:P,isContextVisible:y}=this.state;if(!y||!b||!P||D.length===0)return null;const T=P?P.series.seriesIndex:0,M=P?P.dataIndex:void 0,I={xAxis:[T,M],yAxis:P?[P.series.seriesIndex,P.dataIndex]:null},x={xAxis:(0,r.r4)("xAxis",D.map(L=>L.timeField)),yAxis:(0,r.r4)("yAxis",D.map(L=>L.valueField))},S=()=>this.setState({isContextVisible:!1}),O=()=>({datapoint:P.datapoint,dataIndex:P.dataIndex,series:P.series,seriesIndex:P.series.seriesIndex,pageX:b.pageX,pageY:b.pageY}),C={x:b.pageX,y:b.pageY,onClose:S,getContextMenuSource:O,timeZone:this.props.timeZone,dimensions:x,contextDimensions:I};return s.createElement(d.H,{...C})},this.getBarWidth=()=>{const{series:D}=this.props;return Math.min(...D.map(b=>b.timeStep))}}componentDidUpdate(D,b){D!==this.props&&this.draw()}componentDidMount(){this.draw(),this.element&&(this.$element=n()(this.element),this.$element.bind("plotselected",this.onPlotSelected),this.$element.bind("plothover",this.onPlotHover),this.$element.bind("plotclick",this.onPlotClick))}componentWillUnmount(){this.$element&&this.$element.unbind("plotselected",this.onPlotSelected)}getYAxes(D){return D.length===0?[{show:!0,min:-1,max:1}]:(0,o.uniqBy)(D.map(b=>{const P=b.yAxis?b.yAxis.index:1,y=b.yAxis&&b.yAxis.min&&!isNaN(b.yAxis.min)?b.yAxis.min:null,T=b.yAxis&&b.yAxis.tickDecimals&&!isNaN(b.yAxis.tickDecimals)?b.yAxis.tickDecimals:null;return{show:!0,index:P,position:P===1?"left":"right",min:y,tickDecimals:T}}),b=>b.index)}draw(){if(this.element===null)return;const{width:D,series:b,timeRange:P,showLines:y,showBars:T,showPoints:M,isStacked:I,lineWidth:x,timeZone:S,onHorizontalRegionSelected:O}=this.props;if(!D)return;const C=D/100,L=P.from.valueOf(),U=P.to.valueOf(),R=this.getYAxes(b),B={legend:{show:!1},series:{stack:I,lines:{show:y,lineWidth:x,zero:!1},points:{show:M,fill:1,fillColor:!1,radius:2},bars:{show:T,fill:1,barWidth:T?this.getBarWidth()/1.5:1,zero:!1,lineWidth:x},shadowSize:0},xaxis:{timezone:S,show:!0,mode:"time",min:L,max:U,label:"Datetime",ticks:C,timeformat:(0,l.Jc)(C,L,U),tickFormatter:l.Yn},yaxes:R,grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0,mouseActiveRadius:30},selection:{mode:O?"x":null,color:"#666"},crosshair:{mode:"x"}};try{n().plot(this.element,b.filter(H=>H.isVisible),B)}catch(H){throw console.error("Graph rendering error",H,B,b),new Error("Error rendering panel")}}render(){const{ariaLabel:D,height:b,width:P,series:y}=this.props,T=y.length===0,M=this.renderTooltip(),I=this.renderContextMenu();return s.createElement("div",{className:"graph-panel","aria-label":D},s.createElement("div",{className:"graph-panel__chart",ref:x=>this.element=x,style:{height:b,width:P},onMouseLeave:()=>{this.setState({isTooltipVisible:!1})}}),T&&s.createElement("div",{className:"datapoints-warning"},"No data"),M,I)}}a.defaultProps={showLines:!0,showPoints:!1,showBars:!1,isStacked:!1,lineWidth:1};const v=null},33083:(Y,A,e)=>{"use strict";e.d(A,{H:()=>c,i:()=>h});var t=e(32196),n=e(96540),o=e(61443),s=e(72724),r=e(28122),g=e(9286),u=e(66864),d=e(59093),i=e(64539),l=e(94536),f=e(40845);const c=({getContextMenuSource:m,timeZone:a,itemsGroup:v,dimensions:E,contextDimensions:D,...b})=>{const P=m(),y=v?v.map(I=>({...I,items:I.items?.filter(x=>x.label)})):[],T=()=>{if(!P)return null;let I;if(E?.yAxis&&D?.yAxis?.[1]){const S=(0,o.WK)(E.yAxis,D.yAxis[0],D.yAxis[1]),O=P.series.valueField.display;I=O(S)}const x=(0,s.LE)(P.datapoint[0],{defaultWithMS:P.series.hasMsResolution,timeZone:a});return n.createElement(h,{timestamp:x,seriesColor:P.series.color,displayName:P.series.alias||P.series.label,displayValue:I})},M=()=>y?.map((I,x)=>n.createElement(d.r,{key:`${I.label}${x}`,label:I.label},(I.items||[]).map(S=>n.createElement(i.D,{key:`${S.label}`,url:S.url,label:S.label,target:S.target,icon:S.icon,active:S.active,onClick:S.onClick}))));return n.createElement(r.t,{...b,renderMenuItems:M,renderHeader:T})},h=({timestamp:m,seriesColor:a,displayName:v,displayValue:E})=>{const D=(0,f.of)(p);return n.createElement("div",{className:D.wrapper},n.createElement("strong",null,m),n.createElement(u.Gy,null,n.createElement("div",null,n.createElement(l.p,{color:a}),n.createElement("span",{className:D.displayName},v)),E&&n.createElement(g.i,{value:E})))};function p(m){return{wrapper:(0,t.css)({padding:m.spacing(.5,1),fontSize:m.typography.size.sm,zIndex:m.zIndex.tooltip}),displayName:(0,t.css)({whiteSpace:"nowrap",paddingLeft:m.spacing(.5)})}}},84656:(Y,A,e)=>{"use strict";e.d(A,{M:()=>s});var t=e(2543),n=e.n(t),o=e(96540);class s extends o.Component{constructor(g){super(g),this.onSeriesToggle=this.onSeriesToggle.bind(this),this.state={hiddenSeries:[],toggledSeries:g.series}}componentDidUpdate(g){const{series:u}=this.props;(0,t.isEqual)(g.series,u)||this.setState({hiddenSeries:[],toggledSeries:u})}onSeriesToggle(g,u){const{series:d,onHiddenSeriesChanged:i}=this.props,{hiddenSeries:l}=this.state;if(u.ctrlKey||u.metaKey||u.shiftKey){const p=l.indexOf(g)>-1?l.filter(a=>a!==g):l.concat([g]),m=d.map(a=>({...a,isVisible:p.indexOf(a.label)===-1}));this.setState({hiddenSeries:p,toggledSeries:m},()=>i?i(p):void 0);return}const f=d.map(p=>p.label),c=l.length+1===f.length?[]:(0,t.difference)(f,[g]),h=d.map(p=>({...p,isVisible:c.indexOf(p.label)===-1}));this.setState({hiddenSeries:c,toggledSeries:h},()=>i?i(c):void 0)}render(){const{children:g}=this.props,{toggledSeries:u}=this.state;return g({onSeriesToggle:this.onSeriesToggle,toggledSeries:u})}}},5484:(Y,A,e)=>{"use strict";e.d(A,{I:()=>d});var t=e(32196),n=e(96540),o=e(40276),s=e(55726),r=e(40845),g=e(48747);const u=(l,f=!1,c=!1)=>{const h=l.reduce((m,a)=>m+(a[1]||0),0)===0,p=!l.reduce((m,a)=>m&&a[1]!==null,!0);return f&&p||c&&h},d=l=>{const{series:f,timeRange:c,width:h,height:p,showBars:m,showLines:a,showPoints:v,sortLegendBy:E,sortLegendDesc:D,legendDisplayMode:b,legendVisibility:P,placement:y,onSeriesToggle:T,onToggleSort:M,hideEmpty:I,hideZero:x,isStacked:S,lineWidth:O,onHorizontalRegionSelected:C,timeZone:L,children:U,ariaLabel:R}=l,{graphContainer:B,wrapper:H,legendContainer:W}=(0,r.of)(i,l.placement),N=f.reduce((V,G)=>u(G.data,I,x)?V:V.concat([{label:G.label,color:G.color||"",disabled:!G.isVisible,yAxis:G.yAxis.index,getDisplayValues:()=>G.info||[]}]),[]);return n.createElement("div",{className:H,"aria-label":R},n.createElement("div",{className:B},n.createElement(g.T,{series:f,timeRange:c,timeZone:L,showLines:a,showPoints:v,showBars:m,width:h,height:p,isStacked:S,lineWidth:O,onHorizontalRegionSelected:C},U)),P&&n.createElement("div",{className:W},n.createElement(o.E,{hideHorizontalTrack:!0},n.createElement(s.t,{items:N,displayMode:b,placement:y,sortBy:E,sortDesc:D,onLabelClick:(V,G)=>{T&&T(V.label,G)},onToggleSort:M}))))},i=(l,f)=>({wrapper:(0,t.css)({display:"flex",flexDirection:f==="bottom"?"column":"row"}),graphContainer:(0,t.css)({minHeight:"65%",flexGrow:1}),legendContainer:(0,t.css)({padding:"10px 0",maxHeight:f==="bottom"?"35%":"none"})})},65036:(Y,A,e)=>{"use strict";e.d(A,{DU:()=>g,Jc:()=>d,Yn:()=>u});var t=e(83195),n=e(28240),o=e(72724),s=e(42994);const r=(i,l)=>{let f=0,c=i.values.length-1,h;for(;;){if(f>c)return Math.max(c,0);h=Math.floor((f+c)/2);const p=i.values[h];if(p===l)return h;p&&p<l?f=h+1:c=h-1}},g=(i,l,f,c)=>{let h,p,m,a,v;const E=[];let D,b;for(h=0;h<i.length;h++){p=i[h];const P=l[h];m=r(P,f),a=f-P.values[m],v=P.values[m],(D===void 0||a>=0&&(a<D||D<0)||a<0&&a>D)&&(D=a,b=P.display?(0,t.cN)(P.display(v)):v);const y=p.display(p.values[m]);E.push({value:(0,t.cN)(y),datapointIndex:m,seriesIndex:h,color:y.color,label:(0,n.Ct)(p),time:P.display?(0,t.cN)(P.display(v)):v})}return{results:E,time:b}},u=(i,l)=>(0,o.LE)(i,{format:l?.options?.timeformat,timeZone:l?.options?.timezone}),d=(i,l,f)=>{if(l&&f&&i){const c=f-l,h=c/i/1e3,p=86400010,m=31536e6;return h<=10?s.WC.interval.millisecond:h<=45?s.WC.interval.second:c<=p?s.WC.interval.minute:h<=8e4?s.WC.interval.hour:c<=m?s.WC.interval.day:h<=31536e3?s.WC.interval.month:s.WC.interval.year}return s.WC.interval.minute}},99755:(Y,A,e)=>{"use strict";e.d(A,{o:()=>m});var t=e(96540),n=e(64423),o=e(99165),s=e(85200),r=e(1173),g=e(11261),u=e(69129),d=e(26272),i=e(79041),l=e(67266),f=e(81297),c=e(16895),h=e(65575);function p(a,v,E=[]){for(const D of E)if(typeof D=="function"){if(!D(a,v))return!1}else if(v[D]!==a[D])return!1;return!0}class m extends t.Component{constructor(v){super(v),this.panelContext={},this.subscription=new n.yU,this.getTimeRange=()=>this.props.timeRange;let E=this.prepState(v);E.alignedData=E.config.prepData([E.alignedFrame]),this.state=E,this.plotInstance=t.createRef()}prepState(v,E=!0){let D=null;const{frames:b,fields:P,preparePlotFrame:y}=v,M=(y||h.mY)(b,P||{x:s.sJ.get(r.Ct.firstTimeField).get({}),y:s.sJ.get(r.Ct.byTypes).get(new Set([g.PU.number,g.PU.enum]))},v.timeRange);if((0,c.uY)("GraphNG",!1,"data aligned",M),M){let I=this.state?.config;E&&(I=v.prepConfig(M,this.props.frames,this.getTimeRange),(0,c.uY)("GraphNG",!1,"config prepared",I)),D={alignedFrame:M,config:I},(0,c.uY)("GraphNG",!1,"data prepared",D.alignedData)}return D}handleCursorUpdate(v){const E=v.payload?.point?.time,D=this.plotInstance.current;if(D&&E){const b=D.valToPos(E,"x");let P;if(b&&(P=(0,c.sw)(D,D.posToIdx(b))),!P||!b)return;D.setCursor({left:b,top:P})}}componentDidMount(){this.panelContext=this.context;const{eventBus:v}=this.panelContext;this.subscription.add(v.getStream(u.b_).pipe((0,o.c)(50)).subscribe({next:E=>{v!==E.origin&&this.handleCursorUpdate(E)}})),this.subscription.add(v.getStream(d.kb).pipe((0,o.c)(50)).subscribe({next:E=>this.handleCursorUpdate(E)})),this.subscription.add(v.getStream(u.ql).pipe((0,o.c)(50)).subscribe({next:()=>{const E=this.plotInstance?.current;E&&!E.cursor._lock&&E.setCursor({left:-10,top:-10})}}))}componentDidUpdate(v){const{frames:E,structureRev:D,timeZone:b,propsToDiff:P}=this.props,y=!p(v,this.props,P);if(E!==v.frames||y||b!==v.timeZone){let T=this.prepState(this.props,!1);T&&((this.state.config===void 0||b!==v.timeZone||D!==v.structureRev||!D||y)&&(T.config=this.props.prepConfig(T.alignedFrame,this.props.frames,this.getTimeRange),(0,c.uY)("GraphNG",!1,"config recreated",T.config)),T.alignedData=T.config.prepData([T.alignedFrame]),this.setState(T))}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:v,height:E,children:D,renderLegend:b}=this.props,{config:P,alignedFrame:y,alignedData:T}=this.state;return P?t.createElement(l.KU,{width:v,height:E,legend:b(P)},(M,I)=>t.createElement(f.Z,{config:P,data:T,width:M,height:I,plotRef:x=>this.plotInstance.current=x},D?D(P,y):null)):null}}m.contextType=i.e4},16998:(Y,A,e)=>{"use strict";e.d(A,{I:()=>o});var t=e(96540);const n=t.createContext({}),o=()=>{const{data:s,dimFields:r,mapSeriesIndexToDataFrameFieldIndex:g}=(0,t.useContext)(n),u=(0,t.useCallback)(()=>{const d=r.x;let i=null;for(let l=0;l<s.fields.length;l++)if(d(s.fields[l],s,[s])){i=s.fields[l];break}return i},[s,r]);return{dimFields:r,mapSeriesIndexToDataFrameFieldIndex:g,getXAxisField:u,alignedData:s}}},65575:(Y,A,e)=>{"use strict";e.d(A,{My:()=>h,wX:()=>l,mY:()=>c});var t=e(11261),n=e(73060),o=e(52622),s=e(52811);const r={threshold:(m,a,v)=>m+v,midpoint:(m,a,v)=>(m+a)/2,plusone:(m,a,v)=>m+1};function g(m){if(m.frame.length===0)return m.frame;let a=!0,{frame:v,refFieldName:E,refFieldPseudoMax:D,refFieldPseudoMin:b,insertMode:P}=m;P||(P=r.threshold);const y=l(v,E);if(y==null)return v;y.state={...y.state,nullThresholdApplied:!0};const T=v.fields.map(I=>I.config.custom?.insertNulls||y.config.interval||null),M=new Set(T);if(M.delete(null),M.size===0)return v;if(M.size===1){const I=M.values().next().value;if(I<=0)return v;const x=y.values,S=v.fields.map(C=>C.values),O=u(x,S,I,b,D,P,a);return O===S?v:{...v,length:O[0].length,fields:v.fields.map((C,L)=>({...C,values:O[L]}))}}return v}function u(m,a,v,E=null,D=null,b,P){const y=m.length,T=[];if(E!=null&&E<m[0]){let S=Math.ceil((m[0]-E)/v),O=m[0]-S*v;for(;O<m[0];)T.push(b(O-v,O,v)),O+=v}T.push(m[0]);let M=m[0];for(let S=1;S<y;S++){const O=m[S];for(;O-M>v&&(T.push(b(M,O,v)),M+=v,!!P););T.push(O),M=O}if(D!=null&&D>M)for(;M+v<D;)T.push(b(M,D,v)),M+=v;const I=T.length;if(I===y)return a;const x=[];for(let S of a){let O;if(S!==m){O=Array(I);for(let C=0,L=0;C<I;C++)O[C]=m[L]===T[C]?S[L++]:null}else O=T;x.push(O)}return x}function d(m,a,v){let E,D;for(let b=0;b<a.length;b++)if(a[b]==null)D==null&&E!=null&&(D=b);else{if(D!=null){if(m[b]-E<v)for(;D<b;)a[D++]=void 0;D=null}E=m[b]}return a}function i(m){return m.type===t.PU.number&&m.config.custom?.drawStyle===o.GR.Bars&&!m.config.custom?.hideFrom?.viz}function l(m,a){return m.fields.find(v=>a!=null?v.name===a:v.type===t.PU.time)}function f(m,a){const v=l(m,a);let E=v?.values;for(let D=0;D<m.fields.length;D++){let b=m.fields[D];if(b===v||i(b))continue;let P=b.config.custom?.spanNulls;typeof P=="number"&&P!==-1&&E&&(b.values=d(E,b.values,P))}return m}function c(m,a,v){let E;e:for(let y of m)for(let T of y.fields)if(a.x(T,y,m)){E=T;break e}m=m.map(y=>E?.state?.nullThresholdApplied?y:g({frame:y,refFieldName:E.name,refFieldPseudoMin:v?.from.valueOf(),refFieldPseudoMax:v?.to.valueOf()}));let D=0;m.forEach(y=>{y.fields.forEach(T=>{i(T)&&(T.config.custom={...T.config.custom,spanNulls:-1},D++)})});let b=1/0;D>1&&m.forEach(y=>{if(!y.fields.some(i))return;const T=E.values;for(let M=0;M<T.length;M++)M>0&&(b=Math.min(b,T[M]-T[M-1]))});let P=(0,n.Fd)({frames:m,joinBy:a.x,keep:a.y,keepOriginIndices:!0});return P?(P=f(P,E.name),b!==1/0&&(P.fields.forEach((y,T)=>{let M=y.values;if(T===0){let I=M[M.length-1];M.push(I+b,I+2*b)}else i(y)?M.push(null,null):M.push(void 0,void 0)}),P.length+=2),P):null}function h(m,a){const v="na",E=`${m.min!==void 0?m.min:v}-${m.max!==void 0?m.max:v}`,D=`${m.custom?.axisSoftMin!==void 0?m.custom.axisSoftMin:v}-${m.custom?.axisSoftMax!==void 0?m.custom.axisSoftMax:v}`,b=`${m.custom?.axisPlacement!==void 0?m.custom?.axisPlacement:o.vM.Auto}`,P=m.unit??s.s,y=m.custom?.scaleDistribution?p(m.custom.scaleDistribution):o.L4.Linear,T=m.custom?.axisLabel?m.custom.axisLabel:v;return`${P}/${E}/${D}/${b}/${y}/${T}/${a}`}function p(m){return m.type===o.L4.Log?`${m.type}${m.log}`:m.type}},18262:(Y,A,e)=>{"use strict";e.d(A,{Z:()=>C});var t=e(96540),n=e(79041),o=e(24182),s=e(40845),r=e(99755),g=e(2543),u=e(36613),d=e(11261),i=e(83195),l=e(57875),f=e(8066),c=e(24293),h=e(28240),p=e(94624),m=e(69129),a=e(52622),v=e(51336),E=e(74863),D=e(16895),b=e(65575);const P=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),y=Array(53);for(let L=0;L<y.length;L++)y[L]=2**L;const T=(L,U=1)=>L==null?"-":L.toFixed(U),M={drawStyle:a.GR.Line,showPoints:a.yL.Auto,axisPlacement:a.vM.Auto},I=({frame:L,theme:U,timeZones:R,getTimeRange:B,eventBus:H,sync:W,allFrames:N,renderers:V,tweakScale:G=j=>j,tweakAxis:_=j=>j,eventsScope:K="__global_"})=>{const j=new v.e(R[0]);let k;j.setPrepData(ve=>(k=ve[0],(0,D.bq)(ve[0],j.getStackingGroups())));const Q=L.fields[0];if(!Q)return j;const ee="x";let ae="_x",Z="";const ne=Q.config.custom?.axisPlacement!==a.vM.Hidden?a.vM.Bottom:a.vM.Hidden,q=Q.config.custom?.axisPlacement!==a.vM.Hidden;if(Q.type===d.PU.time){ae="time",j.addScale({scaleKey:ee,orientation:a.Lt.Horizontal,direction:a.ON.Right,isTime:!0,range:()=>{const ye=B();return[ye.from.valueOf(),ye.to.valueOf()]}});const ve=R.length>1?(ye,pe)=>pe.map((le,Me)=>Me<2?null:le):void 0;for(let ye=0;ye<R.length;ye++){const pe=R[ye];j.addAxis({scaleKey:ee,isTime:!0,placement:ne,show:q,label:Q.config.custom?.axisLabel,timeZone:pe,theme:U,grid:{show:ye===0&&Q.config.custom?.axisGridShow},filter:ve})}R.length>1&&j.addHook("drawAxes",ye=>{ye.ctx.save(),ye.ctx.fillStyle=U.colors.text.primary,ye.ctx.textAlign="left",ye.ctx.textBaseline="bottom";let pe=0;ye.axes.forEach(le=>{if(le.side===2){let Me=le._pos+le._size;ye.ctx.fillText(R[pe],ye.bbox.left,Me*u.A.pxRatio),pe++}}),ye.ctx.restore()})}else Q.config.unit&&(ae=Q.config.unit),j.addScale({scaleKey:ee,orientation:a.Lt.Horizontal,direction:a.ON.Right,range:(ve,ye,pe)=>[Q.config.min??ye,Q.config.max??pe]}),j.addAxis({scaleKey:ee,placement:ne,show:q,label:Q.config.custom?.axisLabel,theme:U,grid:{show:Q.config.custom?.axisGridShow},formatValue:(ve,ye)=>(0,i.cN)(Q.display(ve,ye))});let te=V?.flatMap(ve=>Object.values(ve.fieldMap).filter(ye=>ve.indicesOnly.indexOf(ye)===-1))??[],re;for(let ve=1;ve<L.fields.length;ve++){const ye=L.fields[ve],pe={...ye.config,custom:{...M,...ye.config.custom}},le=pe.custom;if(ye===Q||ye.type!==d.PU.number&&ye.type!==d.PU.enum)continue;let Me=ye.display??T;ye.config.custom?.stacking?.mode===a.gs.Percent&&(Me=(0,l.J)({field:{...ye,config:{...ye.config,unit:"percentunit"}},theme:U}));const De=(0,b.My)(pe,ye.type),Re=(0,f.Qi)(ye),he=(0,f.lz)(ye,U).color;if(j.addScale(G({scaleKey:De,orientation:a.Lt.Vertical,direction:a.ON.Up,distribution:le.scaleDistribution?.type,log:le.scaleDistribution?.log,linearThreshold:le.scaleDistribution?.linearThreshold,min:ye.config.min,max:ye.config.max,softMin:le.axisSoftMin,softMax:le.axisSoftMax,centeredZero:le.axisCenteredZero,range:le.stacking?.mode===a.gs.Percent?(Qe,ke,je)=>(ke=ke<0?-1:0,je=je>0?1:0,[ke,je]):ye.type===d.PU.enum?(Qe,ke,je)=>[-1,ye.config.type.enum.text.length]:void 0,decimals:ye.config.decimals},ye)),Z||(Z=De),le.axisPlacement!==a.vM.Hidden){let Qe;le.axisColorMode===a.Y$.Series&&(Re.isByValue&&ye.config.custom?.gradientMode===a.on.Scheme&&Re.id===c.Y.Thresholds?Qe=(0,E.pl)(1,U,Re,ye.config.thresholds):Qe=he);const ke={border:{show:le.axisBorderShow||!1,width:1/devicePixelRatio,stroke:Qe||U.colors.text.primary},ticks:{show:le.axisBorderShow||!1,stroke:Qe||U.colors.text.primary},color:Qe||U.colors.text.primary};let je,He,Ge;if(P.has(pe.unit))je=y;else if(ye.type===d.PU.enum){let Oe=ye.config.type.enum.text;Ge=Oe.map((Ke,Ee)=>Ee),He=Oe}j.addAxis(_({scaleKey:De,label:le.axisLabel,size:le.axisWidth,placement:le.axisPlacement??a.vM.Auto,formatValue:(Oe,Ke)=>(0,i.cN)(Me(Oe,Ke)),theme:U,grid:{show:le.axisGridShow},decimals:ye.config.decimals,distr:le.scaleDistribution?.type,splits:Ge,values:He,incrs:je,...ke},ye))}const Te=le.drawStyle===a.GR.Points?a.yL.Always:le.showPoints;let Be=()=>null;le.spanNulls!==!0&&(Be=(Qe,ke,je,He)=>{let Ge=[],Oe=Qe.series[ke];if(!je&&He&&He.length){const[Ke,Ee]=Oe.idxs,J=Qe.data[0],oe=Qe.data[ke],ue=Math.round(Qe.valToPos(J[Ke],"x",!0)),be=Math.round(Qe.valToPos(J[Ee],"x",!0));He[0][0]===ue&&Ge.push(Ke);for(let Le=0;Le<He.length;Le++){let _e=He[Le],Ve=He[Le+1];if(Ve&&_e[1]===Ve[0]){let We=Qe.posToIdx(_e[1],!0);if(oe[We]==null)for(let $e=1;$e<100;$e++){if(oe[We+$e]!=null){We+=$e;break}if(oe[We-$e]!=null){We-=$e;break}}Ge.push(We)}}He[He.length-1][1]===be&&Ge.push(Ee)}return Ge.length?Ge:null});let{fillOpacity:we}=le,Ne=null,Ze=null;if(ye.state?.origin){re||(re=x(L,N));const Qe=N[ye.state.origin.frameIndex],ke=Qe?.fields[ye.state.origin.fieldIndex],je=(0,h.Ct)(ke??ye,Qe,N);if(te.indexOf(je)>=0)Ne=()=>null,Ze=()=>{};else if(le.transform===a.NU.Constant){const He=u.A.paths.linear();Ne=(Ge,Oe)=>{const Ke=Ge._data,Ee=B();let J=[Ee.from.valueOf(),Ee.to.valueOf()],oe=Ke[Oe].find(Le=>Le!=null),ue=[oe,oe],be=Ke.slice();return be[0]=J,be[Oe]=ue,He({...Ge,_data:be},Oe,0,1)}}if(le.fillBelowTo){const He=L.fields.find(Ee=>le.fillBelowTo===Ee.name||le.fillBelowTo===Ee.config?.displayNameFromDS||le.fillBelowTo===(0,h.Ct)(Ee,L,N)),Ge=He?(0,h.Ct)(He,L,N):le.fillBelowTo,Oe=re.get(je),Ke=re.get(Ge);(0,g.isNumber)(Ke)&&(0,g.isNumber)(Oe)?(j.addBand({series:[Oe,Ke],fill:void 0}),we||(we=35)):we=0}}let st;Re.id===c.Y.Thresholds&&(st=Qe=>(0,f.lz)(k.fields[Qe],U).color),j.addSeries({pathBuilder:Ne,pointsBuilder:Ze,scaleKey:De,showPoints:Te,pointsFilter:Be,colorMode:Re,fillOpacity:we,theme:U,dynamicSeriesColor:st,drawStyle:le.drawStyle,lineColor:le.lineColor??he,lineWidth:le.lineWidth,lineInterpolation:le.lineInterpolation,lineStyle:le.lineStyle,barAlignment:le.barAlignment,barWidthFactor:le.barWidthFactor,barMaxWidth:le.barMaxWidth,pointSize:le.pointSize,spanNulls:le.spanNulls||!1,show:!le.hideFrom?.viz,gradientMode:le.gradientMode,thresholds:pe.thresholds,hardMin:ye.config.min,hardMax:ye.config.max,softMin:le.axisSoftMin,softMax:le.axisSoftMax,dataFrameFieldIndex:ye.state?.origin}),le.thresholdsStyle&&pe.thresholds&&(le.thresholdsStyle.mode??a.Ly.Off)!==a.Ly.Off&&j.addThresholds({config:le.thresholdsStyle,thresholds:pe.thresholds,scaleKey:De,theme:U,hardMin:ye.config.min,hardMax:ye.config.max,softMin:le.axisSoftMin,softMax:le.axisSoftMax})}let de=(0,D.ro)(L);j.setStackingGroups(de),V?.forEach(ve=>{re||(re=x(L,N));let ye={};for(let pe in ve.fieldMap){let le=ve.fieldMap[pe];ye[pe]=re.get(le)}ve.init(j,ye)}),j.scaleKeys=[ee,Z];const ie=15;let ge={dataIdx:(ve,ye,pe,le)=>{let Me=ve.data[ye];if(Me[pe]==null){let De=null,Re=null,me;for(me=pe;De==null&&me-- >0;)Me[me]!=null&&(De=me);for(me=pe;Re==null&&me++<Me.length;)Me[me]!=null&&(Re=me);let he=ve.data[0],Te=ve.valToPos(le,"x"),Be=Re==null?1/0:ve.valToPos(he[Re],"x"),we=De==null?-1/0:ve.valToPos(he[De],"x"),Ne=Te-we,Ze=Be-Te;Ne<=Ze?Ne<=ie&&(pe=De):Ze<=ie&&(pe=Re)}return pe}};if(W&&W()!==p.y.Off){const ve={point:{[ee]:null,[Z]:null},data:L},ye=new m.b_(ve);ge.sync={key:K,filters:{pub:(pe,le,Me,De,Re,me,he)=>W&&W()===p.y.Off?!1:(ve.rowIndex=he,Me<0&&De<0?(ve.point[ae]=null,ve.point[Z]=null,H.publish(new m.ql)):(ve.point[ae]=le.posToVal(Me,ee),ve.point[Z]=le.posToVal(De,Z),ve.point.panelRelY=De>0?De/me:1,H.publish(ye),ye.payload.down=void 0),!0)},scales:[ee,Z]}}return j.setSync(),j.setCursor(ge),j};function x(L,U){const R=new Map;return L.fields.forEach((B,H)=>{const W=B.state?.origin;if(W){const N=U[W.frameIndex]?.fields[W.fieldIndex];N&&R.set((0,h.Ct)(N,U[W.frameIndex],U),H)}}),R}const S=["legend","options","theme"];class O extends t.Component{constructor(){super(...arguments),this.prepConfig=(U,R,B)=>{const{eventBus:H,eventsScope:W,sync:N}=this.context,{theme:V,timeZone:G,renderers:_,tweakAxis:K,tweakScale:j}=this.props;return I({frame:U,theme:V,timeZones:Array.isArray(G)?G:[G],getTimeRange:B,eventBus:H,sync:N,allFrames:R,renderers:_,tweakScale:j,tweakAxis:K,eventsScope:W})},this.renderLegend=U=>{const{legend:R,frames:B}=this.props;return!U||R&&!R.showLegend||!(0,o.t)(U,B)?null:t.createElement(o.$,{data:B,config:U,...R})}}render(){return t.createElement(r.o,{...this.props,prepConfig:this.prepConfig,propsToDiff:S,renderLegend:this.renderLegend})}}O.contextType=n.e4;const C=(0,s.cV)(O);C.displayName="TimeSeries"},8984:(Y,A,e)=>{"use strict";e.r(A),e.d(A,{ALERTING_COLOR:()=>s.xj,AxisPlacement:()=>d.vM,BarAlignment:()=>d.Nj,BarValueVisibility:()=>d.TC,BracesPlugin:()=>u.e1,ClearPlugin:()=>u.vJ,ClipboardPlugin:()=>u.sW,DEFAULT_ANNOTATION_COLOR:()=>s.Mk,DOMUtil:()=>s.bk,DrawStyle:()=>d.yg,EventsWithValidation:()=>s.Pw,GlobalStyles:()=>r.kH,GraphGradientMode:()=>d.on,GraphThresholdsStyleMode:()=>d.Ly,IndentationPlugin:()=>u.TA,LegendDisplayMode:()=>d.lm,LineInterpolation:()=>d.dx,NO_DATA_COLOR:()=>s.nO,NewlinePlugin:()=>u.Om,NodeGraphDataFrameFieldNames:()=>s.uc,OK_COLOR:()=>s.Xw,PENDING_COLOR:()=>s.ct,PointVisibility:()=>d.nT,REGION_FILL_ALPHA:()=>s.UJ,ReactUtils:()=>s.zt,RunnerPlugin:()=>u.Ul,SCHEMA:()=>s.yx,ScaleDirection:()=>d.ON,ScaleOrientation:()=>d.Lt,SearchFunctionType:()=>s.Tt,SelectionShortcutsPlugin:()=>u.l9,SlatePrism:()=>u.De,StackingMode:()=>d.gs,SuggestionsPlugin:()=>u.Pz,TableCellDisplayMode:()=>d.ob,ThemeContext:()=>r.Dx,TooltipDisplayMode:()=>d.$N,ansicolor:()=>s.DB,attachDebugger:()=>s.hF,calculateFontSize:()=>s.Vr,colors:()=>s.Tj,commonOptionsBuilder:()=>g.j,createLogger:()=>s.h,fuzzyMatch:()=>s.It,getCanvasContext:()=>s.Yc,getCellLinks:()=>s.kl,getScrollbarWidth:()=>s.XJ,getTagColor:()=>s.yC,getTagColorIndexFromName:()=>s.JF,getTagColorsFromName:()=>s.MC,getTextColorForAlphaBackground:()=>s.mZ,getTextColorForBackground:()=>s.sg,getTheme:()=>r.O4,hasValidationEvent:()=>s.K,isCompactUrl:()=>s.Fr,linkModelToContextMenuItems:()=>s.Jl,makeFragment:()=>s.dF,makeValue:()=>s.mO,measureText:()=>s.kD,mockTheme:()=>r.mG,mockThemeContext:()=>r.fq,regexValidation:()=>s.RP,sortedColors:()=>s.Ih,styleMixins:()=>r.YF,stylesFactory:()=>r.N3,useForceUpdate:()=>s.CH,useStyles:()=>r.IS,useStyles2:()=>r.of,useTheme:()=>r.DP,useTheme2:()=>r.$j,validate:()=>s.tf,withTheme:()=>r.SL,withTheme2:()=>r.cV});var t=e(94333),o={};for(const i in t)i!=="default"&&(o[i]=()=>t[i]);e.d(A,o);var n=e(80186),o={};for(const i in n)["default","Icon","IconButton","ConfirmButton","DeleteButton","Tooltip","PopoverController","Popover","Toggletip","Portal","getPortalContainer","PortalContainer","CustomScrollbar","TabbedContainer","ClipboardButton","Cascader","ButtonCascader","InlineToast","LoadingPlaceholder","LoadingBar","ColorPicker","SeriesColorPicker","ColorPickerInput","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","EmptySearchResult","UnitPicker","StatsPicker","RefreshPicker","defaultIntervals","TimeRangePicker","TimePickerTooltip","TimeRangeLabel","TimeOfDayPicker","TimeZonePicker","WeekStartPicker","DatePicker","DatePickerWithInput","DateTimePicker","List","InteractiveTable","TagsInput","AutoSaveField","Pagination","Tag","TagList","FilterPill","ConfirmModal","QueryField","CodeEditor","ReactMonacoEditor","CodeEditorSuggestionItemKind","variableSuggestionToCodeEditorSuggestion","Modal","ModalHeader","ModalTabsHeader","ModalTabContent","ModalsProvider","ModalRoot","ModalsController","ModalsContext","PageToolbar","SetInterval","Table","TableInputCSV","TabsBar","Tab","VerticalTab","TabContent","Counter","RenderUserContentAsHTML","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","Sparkline","Gauge","BarGauge","VizTooltip","VizTooltipContainer","SeriesTable","SeriesTableRow","VizRepeater","PanelChrome","PanelChromeLoadingIndicator","PanelContextProvider","PanelContextRoot","usePanelContext","VizLayout","SeriesVisibilityChangeBehavior","VizLegend","VizLegendListItem","Alert","GraphSeriesToggler","Collapse","ControlledCollapse","CollapsableSection","DataLinkButton","FieldLinkList","FullWidthButtonContainer","ClickOutsideWrapper","CallToActionCard","ContextMenu","Menu","MenuGroup","MenuItem","WithContextMenu","DataLinksInlineEditor","DataLinkInput","DataLinksContextMenu","SeriesIcon","InfoBox","FeatureBadge","FeatureInfoBox","JSONFormatter","JsonExplorer","ErrorBoundary","ErrorBoundaryAlert","withErrorBoundary","ErrorWithStack","DataSourceHttpSettings","CustomHeadersSettings","AlertingSettings","SecureSocksProxySettings","TLSAuthSettings","CertificationKey","Spinner","FadeTransition","SlideOutTransition","Segment","SegmentAsync","SegmentInput","SegmentSelect","SegmentSection","Drawer","Slider","RangeSlider","Form","sharedInputStyle","InputControl","Button","LinkButton","ButtonGroup","clearButtonStyles","ToolbarButton","ToolbarButtonRow","ValuePicker","fieldMatchersUI","Link","TextLink","Text","Box","Stack","Grid","Space","Label","Field","Legend","FieldSet","FieldValidationMessage","InlineField","InlineSegmentGroup","InlineLabel","InlineFieldRow","FieldArray","resetSelectStyles","getSelectStyles","HorizontalGroup","VerticalGroup","Container","Badge","RadioButtonGroup","RadioButtonList","Input","getInputStyles","AutoSizeInput","FilterInput","Switch","InlineSwitch","Checkbox","TextArea","FileUpload","TimeRangeInput","RelativeTimeRangePicker","Card","getCardStyles","CardContainer","FormattedValueDisplay","ButtonSelect","Dropdown","PluginSignatureBadge","UserIcon","Avatar","InlineFormLabel","Divider","getDragStyles","Splitter","LayoutItemContext","LegacyForms","LegacyInputStatus","ScaleDistribution","BarGaugeDisplayMode","UPlotConfigBuilder","UPLOT_AXIS_FONT_SIZE","UPlotChart","PlotLegend","FIXED_UNIT","BrowserLabel","PanelContainer","Graph","GraphWithLegend","GraphContextMenu","GraphContextMenuHeader","graphTimeFormat","graphTickFormatter","GraphNG","TimeSeries","useGraphNGContext","preparePlotFrame","buildScaleKey","convertOldAngularValueMapping","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","MultiSelect","Select","SelectContainer","VirtualizedSelect","SecretInput","SecretTextArea","FileDropzone","FileDropzoneDefaultChildren","FileListItem","graphFieldOptions","EventsCanvas","Marker","XYCanvas","KeyboardPlugin","TooltipPlugin","TooltipPlugin2","ZoomPlugin","SeriesVisibilityChangeMode"].indexOf(i)<0&&(o[i]=()=>n[i]);e.d(A,o);var s=e(99598),r=e(7918),g=e(42482),u=e(82175),d=e(49149)},38248:(Y,A,e)=>{"use strict";e.d(A,{W:()=>h,r:()=>l});var t=e(96540),n=e(11261),o=e(27310),s=e(52622),r=e(88575),g=e(94354),u=e(10354),d=e(88323),i=e(52198);function l(p,m,a){const v=["Axis"];p.addRadio({path:"axisPlacement",name:"Placement",category:v,defaultValue:i.t.axisPlacement[0].value,settings:{options:i.t.axisPlacement}}).addTextInput({path:"axisLabel",name:"Label",category:v,defaultValue:"",settings:{placeholder:"Optional text",expandTemplateVars:!0},showIf:E=>E.axisPlacement!==s.vM.Hidden,shouldApply:E=>E.type!==n.PU.time&&E.type!==n.PU.string}).addNumberInput({path:"axisWidth",name:"Width",category:v,settings:{placeholder:"Auto"},showIf:E=>E.axisPlacement!==s.vM.Hidden}).addRadio({path:"axisGridShow",name:"Show grid lines",category:v,defaultValue:void 0,settings:{options:[{value:void 0,label:"Auto"},{value:!0,label:"On"},{value:!1,label:"Off"}]},showIf:E=>E.axisPlacement!==s.vM.Hidden}).addRadio({path:"axisColorMode",name:"Color",category:v,defaultValue:s.Y$.Text,settings:{options:[{value:s.Y$.Text,label:"Text"},{value:s.Y$.Series,label:"Series"}]},showIf:E=>E.axisPlacement!==s.vM.Hidden}).addBooleanSwitch({path:"axisBorderShow",name:"Show border",category:v,defaultValue:!1,showIf:E=>E.axisPlacement!==s.vM.Hidden}),p.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Scale",category:v,editor:h,override:h,defaultValue:{type:s.L4.Linear},shouldApply:E=>E.type===n.PU.number,process:o.hS}).addBooleanSwitch({path:"axisCenteredZero",name:"Centered zero",category:v,defaultValue:!1,showIf:E=>E.scaleDistribution?.type!==s.L4.Log}).addNumberInput({path:"axisSoftMin",name:"Soft min",defaultValue:m.axisSoftMin,category:v,settings:{placeholder:"See: Standard options > Min"}}).addNumberInput({path:"axisSoftMax",name:"Soft max",defaultValue:m.axisSoftMax,category:v,settings:{placeholder:"See: Standard options > Max"}})}const f=[{label:"Linear",value:s.L4.Linear},{label:"Logarithmic",value:s.L4.Log},{label:"Symlog",value:s.L4.Symlog}],c=[{label:"2",value:2},{label:"10",value:10}],h=({value:p,onChange:m})=>{const a=p?.type??s.L4.Linear,v=p?.log??2;return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:16}},t.createElement(g.z,{value:a,options:f,onChange:E=>{m({...p,type:E,log:E===s.L4.Linear?void 0:v})}})),(a===s.L4.Log||a===s.L4.Symlog)&&t.createElement(r.D,{label:"Log base"},t.createElement(d.l6,{options:c,value:v,onChange:E=>{m({...p,log:E.value})}})),a===s.L4.Symlog&&t.createElement(r.D,{label:"Linear threshold"},t.createElement(u.p,{placeholder:"1",value:p?.linearThreshold,onChange:E=>{m({...p,linearThreshold:Number(E.currentTarget.value)})}})))}},11404:(Y,A,e)=>{"use strict";e.d(A,{e:()=>u});var t=e(2543),n=e.n(t),o=e(96540),s=e(92174),r=e(66864);const g=({value:d,onChange:i})=>{const l=(0,o.useCallback)(f=>{i({...d,[f]:!d[f]})},[d,i]);return o.createElement(r.Gy,{spacing:"xs"},Object.keys(d).map(f=>{const c=f;return o.createElement(s.m,{icon:d[c]?"eye-slash":"eye",onClick:()=>l(c),key:c,label:(0,t.startCase)(c),selected:d[c]})}))};function u(d){d.addCustomEditor({id:"hideFrom",name:"Hide in area",category:["Series"],path:"hideFrom",defaultValue:{tooltip:!1,viz:!1,legend:!1},editor:g,override:g,shouldApply:()=>!0,hideFromDefaults:!0,process:i=>i})}},22680:(Y,A,e)=>{"use strict";e.d(A,{H:()=>o});var t=e(69550),n=e(52622);function o(s,r=!0){s.addBooleanSwitch({path:"legend.showLegend",name:"Visibility",category:["Legend"],description:"",defaultValue:!0}).addRadio({path:"legend.displayMode",name:"Mode",category:["Legend"],description:"",defaultValue:n.lm.List,settings:{options:[{value:n.lm.List,label:"List"},{value:n.lm.Table,label:"Table"}]},showIf:g=>g.legend.showLegend}).addRadio({path:"legend.placement",name:"Placement",category:["Legend"],description:"",defaultValue:"bottom",settings:{options:[{value:"bottom",label:"Bottom"},{value:"right",label:"Right"}]},showIf:g=>g.legend.showLegend}).addNumberInput({path:"legend.width",name:"Width",category:["Legend"],settings:{placeholder:"Auto"},showIf:g=>g.legend.showLegend&&g.legend.placement==="right"}),r&&s.addCustomEditor({id:"legend.calcs",path:"legend.calcs",name:"Values",category:["Legend"],description:"Select values or calculations to show in legend",editor:t.D.get("stats-picker").editor,defaultValue:[],settings:{allowMultiple:!0},showIf:g=>g.legend.showLegend!==!1})}},56675:(Y,A,e)=>{"use strict";e.d(A,{I:()=>f,m:()=>l});var t=e(96540),n=e(27310),o=e(11261),s=e(52622),r=e(94354),g=e(29158),u=e(10354),d=e(66864),i=e(52198);const l=({value:c,context:h,onChange:p,item:m})=>t.createElement(d.Gy,null,t.createElement(r.z,{value:c?.mode||s.gs.None,options:m.settings?.options??[],onChange:a=>{p({...c,mode:a})}}),h.isOverride&&c?.mode&&c?.mode!==s.gs.None&&t.createElement(u.p,{type:"text",placeholder:"Group",suffix:t.createElement(g.K,{name:"question-circle",tooltip:"Name of the stacking group",tooltipPlacement:"top"}),defaultValue:c?.group,onChange:a=>{p({...c,group:a.currentTarget.value.trim()})}}));function f(c,h,p=["Graph styles"]){c.addCustomEditor({id:"stacking",path:"stacking",name:"Stack series",category:p,defaultValue:h,editor:l,override:l,settings:{options:i.t.stacking},process:n.hS,shouldApply:m=>m.type===o.PU.number})}},71242:(Y,A,e)=>{"use strict";e.d(A,{I:()=>t});function t(n,o=!0){o&&n.addNumberInput({path:"text.titleSize",category:["Text size"],name:"Title",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0}),n.addNumberInput({path:"text.valueSize",category:["Text size"],name:"Value",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0})}},89654:(Y,A,e)=>{"use strict";e.d(A,{D:()=>n});var t=e(52622);function n(o,s=!1,r=!1,g){const u=["Tooltip"],d=s?[{value:t.$N.Single,label:"Single"},{value:t.$N.None,label:"Hidden"}]:[{value:t.$N.Single,label:"Single"},{value:t.$N.Multi,label:"All"},{value:t.$N.None,label:"Hidden"}],i=[{value:t.xB.None,label:"None"},{value:t.xB.Ascending,label:"Ascending"},{value:t.xB.Descending,label:"Descending"}];o.addRadio({path:"tooltip.mode",name:"Tooltip mode",category:u,defaultValue:g?.tooltip?.mode??t.$N.Single,settings:{options:d}}).addRadio({path:"tooltip.sort",name:"Values sort order",category:u,defaultValue:g?.tooltip?.sort??t.xB.None,showIf:l=>l.tooltip?.mode===t.$N.Multi,settings:{options:i}}),r&&o.addNumberInput({path:"tooltip.hoverProximity",name:"Hover proximity",description:"How close the cursor must be to a point to trigger the tooltip, in pixels",category:u,settings:{integer:!0}}),o.addNumberInput({path:"tooltip.maxWidth",name:"Max width",category:u,settings:{integer:!0},showIf:l=>l.tooltip?.mode!==t.$N.None}).addNumberInput({path:"tooltip.maxHeight",name:"Max height",category:u,settings:{integer:!0},showIf:l=>l.tooltip?.mode!==t.$N.None})}},42482:(Y,A,e)=>{"use strict";e.d(A,{j:()=>t});var t={};e.r(t),e.d(t,{ScaleDistributionEditor:()=>n.W,StackingEditor:()=>u.m,addAxisConfig:()=>n.r,addHideFrom:()=>o.e,addLegendOptions:()=>s.H,addStackingConfig:()=>u.I,addTextSizeOptions:()=>g.I,addTooltipOptions:()=>r.D});var n=e(38248),o=e(11404),s=e(22680),r=e(89654),g=e(71242),u=e(56675)},49149:(Y,A,e)=>{"use strict";e.d(A,{$N:()=>t.$N,Lt:()=>t.Lt,Ly:()=>t.Ly,Nj:()=>t.Nj,ON:()=>t.ON,TC:()=>t.yL,dx:()=>t.dx,gs:()=>t.gs,lm:()=>t.lm,nT:()=>t.yL,ob:()=>t.ob,on:()=>t.on,vM:()=>t.vM,yg:()=>t.GR});var t=e(52622)},3547:(Y,A,e)=>{"use strict";e.d(A,{e:()=>s});var t=e(62938);const n={"[":"]","{":"}","(":")"},o="brace_match";function s(){return{onKeyDown(r,g,u){const{value:d}=g;switch(r.key){case"(":case"{":case"[":{const{start:{offset:i,key:l},end:{offset:f,key:c},focus:{offset:h}}=d.selection,p=d.focusText.text;if(d.selection.isExpanded)return r.preventDefault(),g.insertTextByKey(l,i,r.key).insertTextByKey(c,f+1,n[r.key]).moveEndBackward(1),!0;if(h===p.length||p[h]===" "||Object.values(n).includes(p[h])){r.preventDefault();const m=n[r.key],a={key:`${o}-${(0,t.A)()}`,type:`${o}-${m}`,anchor:{key:l,offset:i,object:"point"},focus:{key:c,offset:f+1,object:"point"},object:"annotation"};return g.insertText(r.key).insertText(m).addAnnotation(a).moveBackward(1),!0}break}case")":case"}":case"]":{const i=d.anchorText.text,l=d.selection.anchor.offset,f=i[l],c=r.key,h=`${o}-${c}`,p=d.annotations.find(m=>m?.type===h&&m.anchor.key===d.anchorText.key);if(p&&f===c&&!d.selection.isExpanded)return r.preventDefault(),g.moveFocusForward(1).removeAnnotation(p).moveAnchorForward(1),!0;break}case"Backspace":{const i=d.anchorText.text,l=d.selection.anchor.offset,f=i[l-1],c=i[l];if(n[f]&&n[f]===c)return r.preventDefault(),g.deleteBackward(1).deleteForward(1).focus(),!0}default:break}return u()}}}},74738:(Y,A,e)=>{"use strict";e.d(A,{v:()=>t});function t(){return{onKeyDown(n,o,s){const r=o.value;if(r.selection.isExpanded)return s();if(n.key==="k"&&n.ctrlKey){n.preventDefault();const g=r.anchorText.text,u=r.selection.anchor.offset,i=g.length-u;return o.deleteForward(i),!0}return s()}}}},99453:(Y,A,e)=>{"use strict";e.d(A,{s:()=>o});const t=(s,r,g)=>{if(!s.length)return;const u=s.slice(0,-1).join("").length+s.length-1;return s.join(`
`).slice(r,u+g)},n=s=>s?.replace(/[\uFEFF]/g,"");function o(){const s={onCopy(r,g,u){r.preventDefault();const{document:d,selection:i}=g.value,{start:{offset:l},end:{offset:f}}=i,c=d.getLeafBlocksAtRange(i).toArray().map(p=>p.text),h=n(t(c,l,f));return h&&r.clipboardData&&r.clipboardData.setData("Text",h),!0},onPaste(r,g,u){if(r.preventDefault(),r.clipboardData){const i=n(r.clipboardData.getData("Text"))?.split(`
`);if(i&&i.length){g.insertText(i[0]);for(const l of i.slice(1))g.splitBlock().insertText(l)}}return!0}};return{...s,onCut(r,g,u){return s.onCopy(r,g,u),g.deleteAtRange(g.value.selection),!0}}}},1020:(Y,A,e)=>{"use strict";e.d(A,{T:()=>l});var t=e(57746),n=e(82611),o=e(75226);const s=(0,t.Sn)("mod+["),r=(0,t.Sn)("shift+tab"),g=(0,t.Sn)("mod+]"),u="  ",d=(f,c,h)=>{const{startBlock:p,endBlock:m,selection:{start:{offset:a,key:v},end:{offset:E,key:D}}}=c.value;if(o.A.serialize(c.value)==="")return;f.preventDefault();const b=p.getFirstText();b&&a===0&&v===b.key&&E===b.text.length&&D===b.key||!p.equals(m)?i(c,"right"):c.insertText(u)},i=(f,c)=>{const h=f.value.selection,p=f.value.document.getLeafBlocksAtRange(h).toArray();if(c==="left")for(const m of p){const a=m.text.length-m.text.trimLeft().length,v=m.getFirstText().key,E={anchor:{key:v,offset:a,path:[]},focus:{key:v,offset:a,path:[]}};f.deleteBackwardAtRange(n.Q6.create(E),Math.min(u.length,a))}else{const{startText:m}=f.value,a=m.text.slice(0,h.start.offset),v=/^\s*$/.test(a);for(const E of p)f.insertTextByKey(E.getFirstText().key,0,u);v&&f.moveStartBackward(u.length)}};function l(){return{onKeyDown(f,c,h){if(s(f)||r(f))f.preventDefault(),i(c,"left");else if(g(f))f.preventDefault(),i(c,"right");else if(f.key==="Tab")d(f,c,h);else return h();return!0}}}},82175:(Y,A,e)=>{"use strict";e.d(A,{De:()=>d.D,Om:()=>r.O,Pz:()=>i.Pz,TA:()=>s.T,Ul:()=>g.U,e1:()=>t.e,l9:()=>u.l,sW:()=>o.s,vJ:()=>n.v});var t=e(3547),n=e(74738),o=e(99453),s=e(1020),r=e(88295),g=e(4269),u=e(31589),d=e(41781),i=e(80903)},88295:(Y,A,e)=>{"use strict";e.d(A,{O:()=>n});function t(o){let s=o.length-o.trimLeft().length;if(s){let r=o[0];for(;--s;)r+=o[0];return r}return""}function n(){return{onKeyDown(o,s,r){const g=s.value;if(g.selection.isExpanded)return r();if(o.key==="Enter"){o.preventDefault();const{startBlock:u}=g,d=u.text,i=t(d);return s.splitBlock().insertText(i).focus()}return r()}}}},4269:(Y,A,e)=>{"use strict";e.d(A,{U:()=>t});function t({handler:n}){return{onKeyDown(o,s,r){return n&&o.key==="Enter"&&(o.shiftKey||o.ctrlKey)?(o.preventDefault(),n(o),s):r()}}}},31589:(Y,A,e)=>{"use strict";e.d(A,{l:()=>o});var t=e(57746);const n=(0,t.Sn)("mod+l");function o(){return{onKeyDown(s,r,g){if(n(s)){s.preventDefault();const{focusBlock:u,document:d}=r.value;r.moveAnchorToStartOfBlock(),d.getNextBlock(u.key)?r.moveFocusToStartOfNextBlock():r.moveFocusToEndOfText()}else return g();return!0}}}},84694:(Y,A,e)=>{"use strict";e.d(A,{A:()=>n});const n="prism-token"},41781:(Y,A,e)=>{"use strict";e.d(A,{D:()=>c,R:()=>a});var t=e(28848),n=e.n(t),o=e(82611),s=e(84694),r=e(49568),g=e(96540);function u(v){return v.object==="block"&&v.type==="code_block"}function d(v){return"javascript"}function i(v,E,D){const{decoration:b}=v;if(b.type!==s.A)return D();const P=b.data.get("className");return g.createElement("span",{className:P},v.children)}class l extends(0,r.Record)({onlyIn:u,getSyntax:d,renderDecoration:i}){constructor(E){super(E)}}const f=l;function c(v={},E=n().languages){const D=new f(v);return{decorateNode:(b,P,y)=>{if(!D.onlyIn(b))return y();const T=o.eB.create(b),M=D.getSyntax(T),I=E[M];if(!I)return[];const S=T.getTexts().map(U=>U&&U.getText()).join(`
`),O=n().tokenize(S,I),C=a(O),L=P.value.data.set("tokens",C);return P.setData(L),h(D,O,T)},renderDecoration:(b,P,y)=>D.renderDecoration({children:b.children,decoration:b.decoration},P,y)}}function h(v,E,D){const b=D.getTexts(),P=[];let y=0,T=0;return b.forEach(M=>{T=y+M.getText().length;let I=0;function x(S,O){if(typeof S=="string"){if(O){const C=p({text:M,textStart:y,textEnd:T,start:I,end:I+S.length,className:`prism-token token ${O}`,block:D});C&&P.push(C)}I+=S.length}else if(O=`${O} ${S.type}`,S.alias&&(O+=" "+S.alias),typeof S.content=="string"){const C=p({text:M,textStart:y,textEnd:T,start:I,end:I+S.content.length,className:`prism-token token ${O}`,block:D});C&&P.push(C),I+=S.content.length}else for(let C=0;C<S.content.length;C+=1)x(S.content[C],O)}E.forEach(x),y=T+1}),P}function p({text:v,textStart:E,textEnd:D,start:b,end:P,className:y,block:T}){return b>=D||P<=E?null:(b=Math.max(b,E),P=Math.min(P,D),b-=E,P-=E,T.createDecoration({object:"decoration",anchor:{key:v.key,offset:b,object:"point"},focus:{key:v.key,offset:P,object:"point"},type:s.A,data:{className:y}}))}function m(v){return typeof v=="string"?[{content:v,types:[],aliases:[]}]:Array.isArray(v)?v.flatMap(E=>m(E)):v instanceof n().Token?m(v.content).flatMap(E=>{let D=[];return typeof v.alias=="string"?D=[v.alias]:D=v.alias??[],{content:E.content,types:[v.type,...E.types],aliases:[...D,...E.aliases]}}):[]}function a(v){const E=m(v);if(!E.length)return[];const D=E[0];D.prev=null,D.next=E.length>=2?E[1]:null,D.offsets={start:0,end:D.content.length};for(let P=1;P<E.length-1;P++)E[P].prev=E[P-1],E[P].next=E[P+1],E[P].offsets={start:E[P-1].offsets.end,end:E[P-1].offsets.end+E[P].content.length};const b=E[E.length-1];return b.prev=E.length>=2?E[E.length-2]:null,b.next=null,b.offsets={start:E.length>=2?E[E.length-2].offsets.end:0,end:E.length>=2?E[E.length-2].offsets.end+b.content.length:b.content.length},E}},80903:(Y,A,e)=>{"use strict";e.d(A,{Pz:()=>U});var t=e(2543),n=e(96540),o=e(40961),s=e(91793),r=e(60578),g=e(50774),u=e(49579);const d=H=>H.reduce((W,{items:N,label:V})=>(W.push({label:V,kind:g.I.GroupTitle}),N.reduce((G,_)=>(G.push(_),G),W)),[]),i=H=>H.reduce((W,N)=>W.length<N.label.length?N.label:W,""),l=(H,W,N)=>{const V=(0,u.A)(N,{font:H.typography.fontFamilyMonospace,fontSize:H.typography.bodySmall.fontSize,fontWeight:"normal"}),G=c(V.width,H),_=f(V.height,H),K=h(_,W);return{listWidth:G,listHeight:K,itemHeight:_}},f=(H,W)=>{const N=W.spacing.gridSize*2;return H+N},c=(H,W)=>{const N=W.spacing.gridSize*3,V=800;return Math.min(Math.max(H+N,200),V)},h=(H,W)=>{const N=Math.min(W.length,10),V=100,G=N*H;return Math.max(G,V)};var p=e(32196),m=e(36663),a=e(40845);const v=(H,W,N)=>({typeaheadItem:(0,p.css)({label:"type-ahead-item",zIndex:11,padding:H.spacing(1,1,1,2),border:H.colors.border.medium,overflowY:"scroll",overflowX:"hidden",outline:"none",background:H.colors.background.secondary,color:H.colors.text.secondary,boxShadow:`0 0 20px ${H.v1.colors.dropdownShadow}`,visibility:N===!0?"visible":"hidden",width:"250px",minHeight:`${W+parseInt(H.spacing(.25),10)}px`,position:"relative",wordBreak:"break-word"})}),E=({item:H,height:W})=>{const N=H&&!!H.documentation,V=H?H.label:"",G=(0,m.G)(H?.documentation),_=(0,a.$j)(),K=v(_,W,N);return n.createElement("div",{className:(0,p.cx)([K.typeaheadItem])},n.createElement("b",null,V),n.createElement("hr",null),n.createElement("div",{dangerouslySetInnerHTML:{__html:G}}))};var D=e(23257),b=e.n(D),P=e(5313);const y=H=>({typeaheadItem:(0,p.css)({border:"none",background:"none",textAlign:"left",label:"type-ahead-item",height:"auto",fontFamily:H.typography.fontFamilyMonospace,padding:H.spacing(1,1,1,2),fontSize:H.typography.bodySmall.fontSize,textOverflow:"ellipsis",overflow:"hidden",zIndex:11,display:"block",whiteSpace:"nowrap",cursor:"pointer",transition:"color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), border-color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), padding 0.15s cubic-bezier(0.645, 0.045, 0.355, 1)"}),typeaheadItemSelected:(0,p.css)({label:"type-ahead-item-selected",backgroundColor:H.colors.background.secondary}),typeaheadItemMatch:(0,p.css)({label:"type-ahead-item-match",color:H.v1.palette.yellow,borderBottom:`1px solid ${H.v1.palette.yellow}`,padding:"inherit",background:"inherit"}),typeaheadItemGroupTitle:(0,p.css)({label:"type-ahead-item-group-title",color:H.colors.text.secondary,fontSize:H.typography.bodySmall.fontSize,lineHeight:H.typography.body.lineHeight,padding:H.spacing(1)})}),T=H=>{const W=(0,a.of)(y),{isSelected:N,item:V,prefix:G,style:_,onMouseEnter:K,onMouseLeave:j,onClickItem:k}=H,Q=N?(0,p.cx)([W.typeaheadItem,W.typeaheadItemSelected]):(0,p.cx)([W.typeaheadItem]),ee=(0,p.cx)([W.typeaheadItemMatch]),ae=(0,p.cx)([W.typeaheadItemGroupTitle]),Z=V.label||"";return V.kind===g.I.GroupTitle?n.createElement("li",{className:ae,style:_},n.createElement("span",null,Z)):n.createElement("li",{role:"none"},n.createElement("button",{role:"menuitem",className:Q,style:_,onMouseDown:k,onMouseEnter:K,onMouseLeave:j,type:"button"},V.highlightParts!==void 0?n.createElement(P.z,{text:Z,highlightClassName:ee,highlightParts:V.highlightParts}):n.createElement(b(),{textToHighlight:Z,searchWords:[G??""],autoEscape:!0,highlightClassName:ee})))},M=(H,W)=>H-W*Math.floor(H/W);class I extends n.PureComponent{constructor(){super(...arguments),this.listRef=(0,n.createRef)(),this.state={hoveredItem:null,typeaheadIndex:null,allItems:[],listWidth:-1,listHeight:-1,itemHeight:-1},this.componentDidMount=()=>{this.props.menuRef&&this.props.menuRef(this),document.addEventListener("selectionchange",this.handleSelectionChange);const W=d(this.props.groupedItems),N=i(W),{listWidth:V,listHeight:G,itemHeight:_}=l(this.context,W,N);this.setState({listWidth:V,listHeight:G,itemHeight:_,allItems:W})},this.componentWillUnmount=()=>{document.removeEventListener("selectionchange",this.handleSelectionChange)},this.handleSelectionChange=()=>{this.forceUpdate()},this.componentDidUpdate=(W,N)=>{if(this.state.typeaheadIndex!==null&&N.typeaheadIndex!==this.state.typeaheadIndex&&this.listRef&&this.listRef.current){if(this.state.typeaheadIndex===1){this.listRef.current.scrollToItem(0);return}this.listRef.current.scrollToItem(this.state.typeaheadIndex)}if((0,t.isEqual)(W.groupedItems,this.props.groupedItems)===!1){const V=d(this.props.groupedItems),G=i(V),{listWidth:_,listHeight:K,itemHeight:j}=l(this.context,V,G);this.setState({listWidth:_,listHeight:K,itemHeight:j,allItems:V,typeaheadIndex:null})}},this.onMouseEnter=W=>{this.setState({hoveredItem:W})},this.onMouseLeave=()=>{this.setState({hoveredItem:null})},this.moveMenuIndex=W=>{const N=this.state.allItems.length;if(N){const V=this.state.typeaheadIndex||0;let G=M(V+W,N);this.state.allItems[G].kind===g.I.GroupTitle&&(G=M(G+W,N)),this.setState({typeaheadIndex:G});return}},this.insertSuggestion=()=>{this.props.onSelectSuggestion&&this.state.typeaheadIndex!==null&&this.props.onSelectSuggestion(this.state.allItems[this.state.typeaheadIndex])}}get menuPosition(){if(!window.getSelection)return"";const W=window.getSelection(),N=W&&W.anchorNode;if(N&&N.parentElement){const V=N.parentElement.getBoundingClientRect(),G=window.scrollX,_=window.scrollY;return`position: absolute; display: flex; top: ${V.top+_+V.height+6}px; left: ${V.left+G-2}px`}return""}render(){const{prefix:W,isOpen:N=!1,origin:V}=this.props,{allItems:G,listWidth:_,listHeight:K,itemHeight:j,hoveredItem:k,typeaheadIndex:Q}=this.state,ee=k||Q,ae=G[k||Q||0];return n.createElement(x,{origin:V,isOpen:N,style:this.menuPosition},n.createElement("ul",{role:"menu",className:"typeahead","data-testid":"typeahead"},n.createElement(s.Y1,{ref:this.listRef,itemCount:G.length,itemSize:j,itemKey:Z=>{const ne=G&&G[Z];return ne?`${Z}-${ne.label}`:`${Z}`},width:_,height:K},({index:Z,style:ne})=>{const q=G&&G[Z];return q?n.createElement(T,{onClickItem:()=>this.props.onSelectSuggestion?this.props.onSelectSuggestion(q):{},isSelected:Q===null?!1:G[Q]===q,item:q,prefix:W,style:ne,onMouseEnter:()=>this.onMouseEnter(Z),onMouseLeave:this.onMouseLeave}):null})),ee&&n.createElement(E,{height:K,item:ae}))}}I.contextType=r.D;class x extends n.PureComponent{constructor(W){super(W);const{index:N=0,origin:V="query",style:G}=W;this.node=document.createElement("div"),this.node.setAttribute("style",G),this.node.classList.add("slate-typeahead",`slate-typeahead-${V}-${N}`),document.body.appendChild(this.node)}componentWillUnmount(){document.body.removeChild(this.node)}render(){return this.props.isOpen?(this.node.setAttribute("style",this.props.style),this.node.classList.add("slate-typeahead--open"),o.createPortal(this.props.children,this.node)):(this.node.classList.remove("slate-typeahead--open"),null)}}var S=e(72307),O=e(75071),C=e(84694);const L=250;function U({onTypeahead:H,cleanText:W,onWillApplySuggestion:N,portalOrigin:V}){let G,_={groupedItems:[],typeaheadPrefix:"",typeaheadContext:"",typeaheadText:""};const K=(0,t.debounce)(R,L),j=k=>{_={..._,...k}};return{onBlur:(k,Q,ee)=>(_={..._,groupedItems:[]},ee()),onClick:(k,Q,ee)=>(_={..._,groupedItems:[]},ee()),onKeyDown:(k,Q,ee)=>{const Z=_.groupedItems.length;switch(k.key){case"Escape":{if(Z)return k.preventDefault(),_={..._,groupedItems:[]},Q.insertText("");break}case"ArrowDown":case"ArrowUp":if(Z){k.preventDefault(),G.moveMenuIndex(k.key==="ArrowDown"?1:-1);return}break;case"Enter":{if(!(k.shiftKey||k.ctrlKey)&&Z)return k.preventDefault(),G.insertSuggestion();break}case"Tab":{if(Z)return k.preventDefault(),G.insertSuggestion();break}default:{k.key.length===1&&K(Q,j,H,W);break}}return ee()},commands:{selectSuggestion:(k,Q)=>{const ee=_.groupedItems;if(!ee||!ee.length)return k;const ae=k.applyTypeahead(Q);return K(k,j,H,W),ae},applyTypeahead:(k,Q)=>{let ee=Q.insertText||Q.label;const ae=Q.kind==="function",Z=Q.move||0,ne=Z>0?Z:0,q=Z<0?-Z:0,{typeaheadPrefix:te,typeaheadText:re,typeaheadContext:de}=_;N&&(ee=N(ee,{groupedItems:_.groupedItems,typeaheadContext:de,typeaheadPrefix:te,typeaheadText:re}));const{forward:ie,backward:ge}=B(ee,te,re,ae,Q.deleteBackwards,W);if(ee.match(/\n/)){const ve=(0,S.dF)(ee);return k.deleteBackward(ge).deleteForward(ie).insertFragment(ve).focus(),k}return _={..._,groupedItems:[]},k.snapshotSelection().deleteBackward(ge).deleteForward(ie).insertText(ee).moveForward(ne).moveBackward(q).focus(),k}},renderEditor(k,Q,ee){if(Q.value.selection.isExpanded)return ee();const ae=ee();return n.createElement(n.Fragment,null,ae,n.createElement(I,{menuRef:Z=>G=Z,origin:V,prefix:_.typeaheadPrefix,isOpen:!!_.groupedItems.length,groupedItems:_.groupedItems,onSelectSuggestion:Q.selectSuggestion}))}}}const R=async(H,W,N,V)=>{if(!N)return;const{value:G}=H,{selection:_}=G,K=G.document.getClosestBlock(G.focusBlock.key),j=G.selection.start.offset-1,k=K&&K.getDecorations(H),Q=k?k.filter(ge=>ge.start.offset<=j&&ge.end.offset>j&&ge.type===C.A).toArray():[],ee=k&&k.filter(ge=>ge.end.offset<=j&&ge.type===C.A&&ge.data.get("className").includes("label-key")).last(),ae=ee&&G.focusText.text.slice(ee.start.offset,ee.end.offset),Z=Q.map(ge=>ge.data.get("className")).join(" ").split(" ").filter(ge=>ge.length);let ne=G.focusText.text,q=ne.slice(0,_.focus.offset);Q.length&&(ne=G.focusText.text.slice(Q[0].start.offset,Q[0].end.offset),q=G.focusText.text.slice(Q[0].start.offset,_.focus.offset));const te=q.match(/(?:!?=~?"?|")(.*)/);te?q=te[1]:V&&(q=V(q));const{suggestions:re,context:de}=await N({prefix:q,text:ne,value:G,wrapperClasses:Z,labelKey:ae||void 0,editor:H}),ie=re.map(ge=>{if(!ge.items)return ge;const ve=ge.searchFunctionType||(ge.prefixMatch?O.T.Prefix:O.T.Word),ye=O.H[ve];let pe={...ge};return q&&(ge.skipFilter||(pe.items=pe.items.filter(le=>(le.filterText||le.label).length>=q.length),pe.items=ye(pe.items,q)),pe.items=pe.items.filter(le=>!(le.insertText===q||(le.filterText??le.label)===q))),ge.skipSort||(pe.items=(0,t.sortBy)(pe.items,le=>le.sortText===void 0?le.sortValue!==void 0?le.sortValue:le.label:le.sortText||le.label)),pe}).filter(ge=>ge.items&&ge.items.length);W({groupedItems:ie,typeaheadPrefix:q,typeaheadContext:de,typeaheadText:ne}),H.blur().focus()};function B(H,W,N,V,G,_){const K=G||W.length,j=_?_(N):N,k=N.indexOf(W),Q=k>-1?j.length-k-W.length:j.length-W.length;return{forward:!!(W&&Q>0||H===N)&&!V?Q+k:0,backward:K}}},93218:(Y,A,e)=>{"use strict";e.d(A,{k:()=>m});var t=e(94659),n=e(96540),o=e(40845);function s(a){return(0,t.css)({".panel-options-group":{borderBottom:`1px solid ${a.colors.border.weak}`},".panel-options-group__header":{padding:a.spacing(1,2,1,1),position:"relative",display:"flex",alignItems:"center",cursor:"pointer",fontWeight:500,color:a.colors.text.primary,"&:hover":{background:a.colors.emphasize(a.colors.background.primary,.03)}},".panel-options-group__icon":{color:a.colors.text.secondary,marginRight:a.spacing(1),padding:a.spacing(0,.9,0,.6)},".panel-options-group__title":{position:"relative"},".panel-options-group__body":{padding:a.spacing(1,2,1,4)}})}function r(a){return(0,t.css)({".card-section":{marginBottom:a.spacing(4)},".card-list":{display:"flex",flexDirection:"row",flexWrap:"wrap",listStyleType:"none"},".card-item":{display:"block",height:"100%",background:a.colors.background.secondary,boxShadow:"none",padding:a.spacing(2),borderRadius:"4px","&:hover":{background:a.colors.emphasize(a.colors.background.secondary,.03)},".label-tag":{marginLeft:a.spacing(1),fontSize:"11px",padding:"2px 6px"}},".card-item-body":{display:"flex",overflow:"hidden"},".card-item-details":{overflow:"hidden"},".card-item-header":{marginBottom:a.spacing(2)},".card-item-type":{color:a.colors.text.secondary,textTransform:"uppercase",fontSize:a.typography.size.sm,fontWeight:a.typography.fontWeightMedium},".card-item-badge":{margin:"6px 0"},".card-item-notice":{fontSize:a.typography.size.sm},".card-item-name":{color:a.colors.text.primary,overflow:"hidden",textOverflow:"ellipsis",width:"100%"},".card-item-label":{marginLeft:a.spacing(1)},".card-item-sub-name":{color:a.colors.text.secondary,overflow:"hidden",textOverflow:"ellipsis",width:"100%"},".card-item-sub-name--header":{color:a.colors.text.secondary,textTransform:"uppercase",marginBottom:a.spacing(2),fontSize:a.typography.size.sm,fontWeight:"bold"},".card-list-layout-grid":{".card-item-type":{display:"inline-block"},".card-item-notice":{fontSize:a.typography.size.sm,display:"inline-block",marginLeft:a.spacing(2)},".card-item-header-action":{float:"right"},".card-item-wrapper":{width:"100%",padding:a.spacing(0,2,2,0)},".card-item-wrapper--clickable":{cursor:"pointer"},".card-item-figure":{margin:a.spacing(0,2,2,0),height:"80px",img:{width:"80px"}},".card-item-name":{fontSize:a.typography.h3.fontSize},[a.breakpoints.up("md")]:{".card-item-wrapper":{width:"50%"}},[a.breakpoints.up("lg")]:{".card-item-wrapper":{width:"33.333333%"}},"&.card-list-layout-grid--max-2-col":{[a.breakpoints.up("lg")]:{".card-item-wrapper":{width:"50%"}}}},".card-list-layout-list":{".card-item-wrapper":{padding:0,width:"100%",marginBottom:a.spacing(1)},".card-item-wrapper--clickable":{cursor:"pointer"},".card-item":{borderRadius:"2px"},".card-item-header":{float:"right",textAlign:"right"},".card-item-figure":{margin:a.spacing(0,2,0,0),img:{width:"48px"}},".card-item-name":{fontSize:a.typography.h4.fontSize},".card-item-sub-name":{fontSize:a.typography.size.sm},".layout-selector":{marginRight:0}}})}var g=e(16797);function u(a){return(0,t.css)({html:{MsOverflowStyle:"scrollbar",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",height:"100%",fontSize:`${a.typography.htmlFontSize}px`,fontFamily:a.typography.fontFamily,lineHeight:a.typography.body.lineHeight,fontKerning:"normal"},":root":{colorScheme:a.colors.mode},body:{height:"100%",width:"100%",position:"absolute",color:a.colors.text.primary,backgroundColor:a.colors.background.canvas,...d(a.typography.body)},"h1, .h1":d(a.typography.h1),"h2, .h2":d(a.typography.h2),"h3, .h3":d(a.typography.h3),"h4, .h4":d(a.typography.h4),"h5, .h5":d(a.typography.h5),"h6, .h6":d(a.typography.h6),p:{margin:a.spacing(0,0,2)},button:{letterSpacing:a.typography.body.letterSpacing,"&:focus-visible":(0,g.getFocusStyles)(a),"&:focus":{outline:"none"}},small:{fontSize:a.typography.bodySmall.fontSize},"b, strong":{fontWeight:a.typography.fontWeightMedium},em:{fontStyle:"italic",color:a.colors.text.primary},cite:{fontStyle:"normal"},".muted":{color:a.colors.text.secondary},"a.muted:hover, a.muted:focus":{color:a.colors.text.primary},".text-warning":{color:a.colors.warning.text,"&:hover, &:focus":{color:a.colors.emphasize(a.colors.warning.text,.15)}},".text-error":{color:a.colors.error.text,"&:hover, &:focus":{color:a.colors.emphasize(a.colors.error.text,.15)}},".text-success":{color:"$success-text-color","&:hover, &:focus":{color:a.colors.emphasize(a.colors.success.text,.15)}},a:{cursor:"pointer",color:a.colors.text.primary,textDecoration:"none","&:focus":{outline:"none"},"&:focus-visible":(0,g.getFocusStyles)(a),"&:[disabled]":{cursor:"default",pointerEvents:"none !important"}},".text-link":{textDecoration:"underline"},".text-left":{textAlign:"left"},".text-right":{textAlign:"right"},".text-center":{textAlign:"center"},".highlight-search-match":{background:a.components.textHighlight.background,color:a.components.textHighlight.text,padding:0}})}function d(a){return{margin:0,fontSize:a.fontSize,lineHeight:a.lineHeight,fontWeight:a.fontWeight,letterSpacing:a.letterSpacing,fontFamily:a.fontFamily,marginBottom:"0.45em"}}function i(a){return(0,t.css)({"iframe.intercom-borderless-frame":{colorScheme:a.colors.mode}})}function l(a){return(0,t.css)({"input, button, select, textarea":{fontFamily:a.typography.body.fontFamily,fontSize:a.typography.body.fontSize,fontWeight:a.typography.body.fontWeight,lineHeight:a.typography.body.lineHeight},"input, select":{backgroundColor:a.components.input.background,color:a.components.input.text,border:"none",boxShadow:"none"},textarea:{height:"auto"},"input[type='file'], input[type='image'], input[type='submit'], input[type='reset'], input[type='button'], input[type='radio'], input[type='checkbox']":{width:"auto"}})}function f(a){return(0,t.css)({})}function c(a){const v=a.breakpoints.values.xxl+a.spacing.gridSize*2+a.components.sidemenu.width;return(0,t.css)({".grafana-app":{display:"flex",alignItems:"stretch",position:"absolute",width:"100%",height:"100%",top:0,left:0},".main-view":{position:"relative",display:"flex",flexDirection:"column",flexGrow:1,height:"100%",flex:"1 1 0",minWidth:0},".page-scrollbar-content":{display:"flex",minHeight:"100%",flexDirection:"column",width:"100%",height:"100%"},".page-container":{flexGrow:1,flexBasis:"100%",paddingLeft:a.spacing(2),paddingRight:a.spacing(2),[a.breakpoints.up("sm")]:{margin:a.spacing(0,1)},[a.breakpoints.up("md")]:{margin:a.spacing(0,2)},[`@media (min-width: ${v}px)`]:{maxWidth:`${a.breakpoints.values.xxl}px`,marginLeft:"auto",marginRight:"auto",width:"100%"}},".page-full":{marginLeft:a.spacing(2),paddingLeft:a.spacing(2),paddingRight:a.spacing(2)},".page-body":{padding:a.spacing(1),background:a.components.panel.background,border:`1px solid ${a.components.panel.borderColor}`,marginBottom:"32px",[a.breakpoints.up("md")]:{padding:a.spacing(2)},[a.breakpoints.up("lg")]:{padding:a.spacing(3)}},".page-heading":{fontSize:a.typography.h4.fontSize,marginTop:0,marginBottom:a.spacing(2)},".page-action-bar":{marginBottom:a.spacing(2),display:"flex",alignItems:"flex-start",gap:a.spacing(2)},".page-action-bar--narrow":{marginBottom:0},".page-action-bar__spacer":{width:a.spacing(2),flexGrow:1},".page-sub-heading":{marginBottom:a.spacing(2)},".page-sub-heading-icon":{marginLeft:a.spacing(1),marginTop:a.spacing(.5)},".page-hidden":{display:"none"}})}var h=e(72129);const p=a=>(0,t.css)({".react-loading-skeleton":h.Q});function m(){const a=(0,o.$j)();return n.createElement(t.Global,{styles:[u(a),i(a),l(a),c(a),r(a),s(a),f(a),p(a)]})}},40845:(Y,A,e)=>{"use strict";e.d(A,{$j:()=>h,DP:()=>c,IS:()=>p,SL:()=>l,cV:()=>f,fq:()=>a,of:()=>m});var t=e(4146),n=e.n(t),o=e(47078),s=e.n(o),r=e(96540),g=e(60578),u=e(3911);let d=null;const i=new WeakMap,l=v=>{const E=D=>{const b=d||g.D;return r.createElement(b.Consumer,null,P=>r.createElement(v,{...D,theme:P.v1}))};return E.displayName=`WithTheme(${v.displayName})`,n()(E,v),E},f=v=>{const E=D=>{const b=d||g.D;return r.createElement(b.Consumer,null,P=>r.createElement(v,{...D,theme:P}))};return E.displayName=`WithTheme(${v.displayName})`,n()(E,v),E};function c(){return(0,r.useContext)(d||g.D).v1}function h(){return(0,r.useContext)(d||g.D)}function p(v){const E=c();let D=i.get(v);return D||(D=(0,u.N)(v),i.set(v,D)),D(E)}function m(v,...E){const D=h();let b=i.get(v);return b||(b=s()(v,{maxSize:10}),i.set(v,b)),b(D,...E)}const a=v=>(d=r.createContext(v),()=>{d=null})},7918:(Y,A,e)=>{"use strict";e.d(A,{kH:()=>d.k,Dx:()=>t.D,O4:()=>r,mG:()=>g,fq:()=>n.fq,YF:()=>i,N3:()=>u.N,IS:()=>n.IS,of:()=>n.of,DP:()=>n.DP,$j:()=>n.$j,SL:()=>n.SL,cV:()=>n.cV});var t=e(60578),n=e(40845),o=e(47696);let s;const r=(l="dark")=>s?s(l):(0,o.a)({colors:{mode:l}}).v1,g=l=>(s=l,()=>{s=null});var u=e(3911),d=e(93218),i=e(16797)},16797:(Y,A,e)=>{"use strict";e.r(A),e.d(A,{cardChrome:()=>n,focusCss:()=>d,getFocusStyles:()=>l,getMouseFocusStyles:()=>i,getTooltipContainerStyles:()=>f,hoverColor:()=>o,listItem:()=>s,listItemSelected:()=>r,mediaUp:()=>g});var t=e(84140);function n(c){return`
    background: ${c.colors.background.secondary};
    &:hover {
      background: ${o(c.colors.background.secondary,c)};
    }
    box-shadow: ${c.components.panel.boxShadow};
    border-radius: ${c.shape.radius.default};
`}function o(c,h){return h.isDark?(0,t.A)(c).brighten(2).toString():(0,t.A)(c).darken(2).toString()}function s(c){return`
  background: ${c.colors.background.secondary};
  &:hover {
    background: ${o(c.colors.background.secondary,c)};
  }
  box-shadow: ${c.components.panel.boxShadow};
  border-radius: ${c.shape.radius.default};
`}function r(c){return`
    background: ${o(c.colors.background.secondary,c)};
    color: ${c.colors.text.maxContrast};
`}function g(c){return`only screen and (min-width: ${c})`}const u=c=>c.hasOwnProperty("v1"),d=c=>{const h=u(c),p=h?c.colors.background.canvas:c.colors.bodyBg,m=h?c.colors.primary.main:c.colors.formFocusOutline;return`
  outline: 2px dotted transparent;
  outline-offset: 2px;
  box-shadow: 0 0 0 2px ${p}, 0 0 0px 4px ${m};
  transition-property: outline, outline-offset, box-shadow;
  transition-duration: 0.2s;
  transition-timing-function: cubic-bezier(0.19, 1, 0.22, 1);`};function i(c){return{outline:"none",boxShadow:"none"}}function l(c){return{outline:"2px dotted transparent",outlineOffset:"2px",boxShadow:`0 0 0 2px ${c.colors.background.canvas}, 0 0 0px 4px ${c.colors.primary.main}`,transitionTimingFunction:"cubic-bezier(0.19, 1, 0.22, 1)",transitionDuration:"0.2s",transitionProperty:"outline, outline-offset, box-shadow"}}const f=c=>({overflow:"hidden",background:c.colors.background.secondary,boxShadow:c.shadows.z2,maxWidth:"800px",padding:c.spacing(1),borderRadius:c.shape.radius.default,zIndex:c.zIndex.tooltip})},3911:(Y,A,e)=>{"use strict";e.d(A,{N:()=>o});var t=e(47078),n=e.n(t);function o(s){return n()(s)}},50774:(Y,A,e)=>{"use strict";e.d(A,{I:()=>t});var t=(n=>(n.GroupTitle="GroupTitle",n))(t||{})},29621:()=>{"use strict"},4025:(Y,A,e)=>{"use strict";e.d(A,{GO:()=>s,SS:()=>r,Uo:()=>t.Uo,lV:()=>g,rJ:()=>o});var t=e(8887),n=e(11261);const o=u=>["xs","sm","md","lg","xl","xxl","xxxl"].includes(u),s=()=>Object.keys(t.az);function r(u){return g(u?.type)}function g(u){if(u)switch(u){case n.PU.time:return"clock-nine";case n.PU.string:return"font";case n.PU.number:return"calculator-alt";case n.PU.boolean:return"toggle-on";case n.PU.trace:return"info-circle";case n.PU.enum:return"list-ol";case n.PU.geo:return"map-marker";case n.PU.other:return"brackets-curly"}return"question-circle"}},80186:(Y,A,e)=>{"use strict";e.r(A),e.d(A,{CompletionItemKind:()=>r.I,getAvailableIcons:()=>d.GO,getFieldTypeIcon:()=>d.SS,getFieldTypeIconName:()=>d.lV,isIconSize:()=>d.rJ,toIconName:()=>d.Uo});var t=e(64611),n=e.n(t),m={};for(const a in t)a!=="default"&&(m[a]=()=>t[a]);e.d(A,m);var o=e(11866),s=e.n(o),m={};for(const a in o)a!=="default"&&(m[a]=()=>o[a]);e.d(A,m);var r=e(50774),g=e(29621),u=e.n(g),m={};for(const a in g)["default","CompletionItemKind"].indexOf(a)<0&&(m[a]=()=>g[a]);e.d(A,m);var d=e(4025),i=e(19932),l=e.n(i),m={};for(const a in i)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","isIconSize","toIconName"].indexOf(a)<0&&(m[a]=()=>i[a]);e.d(A,m);var f=e(72389),c=e.n(f),m={};for(const a in f)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","isIconSize","toIconName"].indexOf(a)<0&&(m[a]=()=>f[a]);e.d(A,m);var h=e(65484),p=e.n(h),m={};for(const a in h)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","isIconSize","toIconName"].indexOf(a)<0&&(m[a]=()=>h[a]);e.d(A,m)},11866:()=>{"use strict"},65484:()=>{"use strict"},19932:()=>{"use strict"},72389:()=>{"use strict"},64611:()=>{"use strict"},40321:(Y,A,e)=>{"use strict";e.d(A,{Q:()=>t});const t=(n,o)=>{n.key==="Tab"||n.altKey||n.ctrlKey||n.metaKey||(n.stopPropagation(),n.key==="Escape"&&o())}},24284:(Y,A,e)=>{"use strict";e.d(A,{Ih:()=>v,Mk:()=>r,Tj:()=>f,UJ:()=>l,Xw:()=>g,ct:()=>i,mZ:()=>a,nO:()=>d,sg:()=>m,xj:()=>u});var t=e(2543),n=e.n(t),o=e(84140);const s=4,r="rgba(0, 211, 255, 1)",g="rgba(11, 237, 50, 1)",u="rgba(237, 46, 24, 1)",d="rgba(150, 150, 150, 1)",i="rgba(247, 149, 32, 1)",l=.09,f=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function c(E){const D=(0,t.map)(E,h),b=(0,t.sortBy)(D,["h"]),P=(0,t.chunk)(b,s),y=(0,t.map)(P,M=>(0,t.sortBy)(M,"l")),T=(0,t.flattenDeep)((0,t.zip)(...y));return(0,t.map)(T,p)}function h(E){return(0,o.A)(E).toHsl()}function p(E){return(0,o.A)(E).toHexString()}function m(E){return(0,o.A)(E).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}function a(E,D){const b=(0,o.A)(E),P=b.getBrightness();return b.getAlpha()<.3?D?"rgb(247, 248, 250)":"rgb(32, 34, 38)":P>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let v=c(f)},14555:(Y,A,e)=>{"use strict";e.d(A,{F:()=>n,J:()=>t});const t=o=>o().map(s=>({label:s.title,ariaLabel:s.title,url:s.href,target:s.target,icon:`${s.target==="_blank"?"external-link-alt":"link"}`,onClick:s.onClick})),n=o=>/\/explore\?.*&(left|right)=\[(.*\,){2,}(.*){1}\]/.test(o)},40621:(Y,A,e)=>{"use strict";e.d(A,{h:()=>t});function t(n,o,s){}},53550:(Y,A,e)=>{"use strict";e.d(A,{i:()=>t});function t(n){const s=n.lastIndexOf("."),r=n.substring(s),g=n.substring(0,s);return g.length<16?n:`${g.substring(0,16)}...${r}`}},9830:(Y,A,e)=>{"use strict";e.d(A,{I:()=>o});var t=e(2543),n=e.n(t);function o(s,r){let g=0,u=s.indexOf(r);r=r.replace(/\s/g,"");const d=[];if(u!==-1)return{distance:0,found:!0,ranges:[{start:u,end:u+r.length-1}]};for(const i of r){const l=s.indexOf(i,u);if(l===-1)return{distance:1/0,ranges:[],found:!1};if(u!==-1&&(g+=l-u),u=l+1,d.length===0)d.push({start:l,end:l});else{const f=(0,t.last)(d);l===f.end+1?f.end++:d.push({start:l,end:l})}}return{distance:g,ranges:d,found:!0}}},76412:(Y,A,e)=>{"use strict";e.d(A,{t:()=>d,x:()=>g});var t=e(72635),n=e(96540),o=e(65414),s=e(52822);function r(){typeof t.default.options.resources!="object"&&t.default.use(o.r9).init({resources:{},returnEmptyString:!1,lng:"en-US"})}const g=i=>(r(),n.createElement(s.x,{...i})),u=t.default.t,d=(i,l,f)=>(r(),u(i,l,f))},99598:(Y,A,e)=>{"use strict";e.d(A,{xj:()=>r.xj,Mk:()=>r.Mk,bk:()=>t,Pw:()=>g.Pw,nO:()=>r.nO,uc:()=>E,Xw:()=>r.Xw,ct:()=>r.ct,UJ:()=>r.UJ,zt:()=>s,yx:()=>u.yx,Tt:()=>p.T,DB:()=>m.DB,hF:()=>v.h,Vr:()=>c.Vr,Tj:()=>r.Tj,h:()=>a.h,It:()=>D.I,Yc:()=>c.Yc,kl:()=>f.k,XJ:()=>l.X,yC:()=>i.yC,JF:()=>i.JF,MC:()=>i.MC,mZ:()=>r.mZ,sg:()=>r.sg,K:()=>g.K,Fr:()=>d.F,Jl:()=>d.J,dF:()=>u.dF,mO:()=>u.mO,kD:()=>c.kD,RP:()=>g.RP,Ih:()=>r.Ih,CH:()=>h.C,tf:()=>g.tf});var t={};e.r(t),e.d(t,{getNextCharacter:()=>o,getPreviousCousin:()=>n}),typeof window<"u"&&"Element"in window&&!Element.prototype.closest&&(Element.prototype.closest=function(b){const P=(this.document||this.ownerDocument).querySelectorAll(b);let y=this,T;do{for(T=P.length;--T>=0&&P.item(T)!==y;);y=y.parentElement}while(T<0&&y);return y});function n(b,P){let y=b.parentElement.previousSibling,T;for(;y;){if(T=y.querySelector(P),T)return T;y=y.previousSibling}}function o(b){const P=(b||window).getSelection();if(!P||!P.anchorNode)return null;const y=P.getRangeAt(0),T=P.anchorNode.textContent,M=y.startOffset;return T.slice(M,M+1)}var s=e(67892),r=e(24284),g=e(29734),u=e(72307),d=e(14555),i=e(69613),l=e(5260),f=e(90914),c=e(29413),h=e(69731),p=e(75071),m=e(88838),a=e(91040),v=e(40621),E=(b=>(b.id="id",b.title="title",b.subTitle="subTitle",b.mainStat="mainStat",b.secondaryStat="secondaryStat",b.source="source",b.target="target",b.detail="detail__",b.arc="arc__",b.color="color",b))(E||{}),D=e(9830)},91040:(Y,A,e)=>{"use strict";e.d(A,{h:()=>s});var t=e(2543),n=e.n(t);const o=(0,t.throttle)((...r)=>{console.log(...r)},500),s=r=>{let g=!1;return typeof window<"u"&&(g=window.localStorage.getItem("grafana.debug")==="true"),{logger:(u,d=!1,...i)=>{},enable:()=>g=!0,disable:()=>g=!1,isEnabled:()=>g}}},29413:(Y,A,e)=>{"use strict";e.d(A,{Vr:()=>u,Yc:()=>r,kD:()=>g});let t;const n=new Map,o=500;let s="";function r(){return t||(t=document.createElement("canvas").getContext("2d")),t}function g(d,i,l=400){const f=`${l} ${i}px 'Inter'`,c=d+f,h=n.get(c);if(h)return h;const p=r();s!==f&&(p.font=s=f);const m=p.measureText(d);return n.size===o&&n.clear(),n.set(c,m),m}function u(d,i,l,f,c,h){const p=g(d,14,h),m=i/(p.width+2)*14,a=l/f,v=Math.min(a,m);return Math.min(v,c??v)}},67892:(Y,A,e)=>{"use strict";e.r(A),e.d(A,{getChildId:()=>n,renderOrCallToRender:()=>o});var t=e(96540);function n(s){let r;const g=t.Children.only(s);return"id"in g?.props?r=g.props.id:"inputId"in g.props&&(r=g?.props.inputId),typeof r=="string"?r:void 0}function o(s,r){if(t.isValidElement(s)||typeof s=="string"||typeof s=="number")return s;if(typeof s=="function"&&r)return s(r);throw new Error(`${s} is not a React element nor a function that returns React element`)}},5260:(Y,A,e)=>{"use strict";e.d(A,{X:()=>n});let t=null;function n(){if(t!==null)return t;if(typeof document<"u"){const o=document.createElement("div"),s={width:"100px",height:"100px",position:"absolute",top:"-9999px",overflow:"scroll",MsOverflowStyle:"scrollbar"};Object.keys(s).map(r=>{o.style[r]=s[r]}),document.body.appendChild(o),t=o.offsetWidth-o.clientWidth,document.body.removeChild(o)}else t=0;return t||0}},75071:(Y,A,e)=>{"use strict";e.d(A,{H:()=>g,T:()=>n});var t=e(9830),n=(u=>(u.Word="Word",u.Prefix="Prefix",u.Fuzzy="Fuzzy",u))(n||{});const g={Word:(u,d)=>u.filter(i=>(i.filterText||i.label).includes(d)),Prefix:(u,d)=>u.filter(i=>(i.filterText||i.label).startsWith(d)),Fuzzy:(u,d)=>(d=d.toLowerCase(),u.filter(i=>{const{distance:l,ranges:f,found:c}=(0,t.I)(i.label.toLowerCase(),d);return c?(i.sortValue=l,i.highlightParts=f,!0):!1}))}},72129:(Y,A,e)=>{"use strict";e.d(A,{Q:()=>s,j:()=>r});var t=e(32196),n=e(96540);const s={animationName:(0,t.keyframes)({"0%":{opacity:0},"100%":{opacity:1}}),animationDelay:"100ms",animationTimingFunction:"ease-in",animationDuration:"100ms",animationFillMode:"backwards"},r=(g,u)=>Object.assign(g,{Skeleton:i=>n.createElement(u,{...i,rootProps:{style:s}})})},72307:(Y,A,e)=>{"use strict";e.d(A,{dF:()=>o,mO:()=>s,yx:()=>n});var t=e(82611);const n={document:{nodes:[{match:[{type:"paragraph"},{type:"code_block"},{type:"code_line"}]}]},inlines:{}},o=(r,g)=>{const u=r.split(`
`).map(i=>t.eB.create({type:"code_line",nodes:[t.EY.create(i)]})),d=t.eB.create({data:{syntax:g},type:"code_block",nodes:u});return t.yo.create({nodes:[d]})},s=(r,g)=>{const u=o(r,g);return t.WT.create({document:u})}},90914:(Y,A,e)=>{"use strict";e.d(A,{k:()=>t});const t=(n,o)=>{let s;if(n.getLinks&&(s=n.getLinks({valueRowIndex:o.index})),!!s){for(let r=0;r<s?.length;r++)if(s[r].onClick){const g=s[r].onClick;s[r].onClick=u=>{u.ctrlKey||u.metaKey||u.shiftKey||(u.preventDefault(),g(u,{field:n,rowIndex:o.index}))}}return s}}},69613:(Y,A,e)=>{"use strict";e.d(A,{JF:()=>o,MC:()=>s,yC:()=>r});const t=["#D32D20","#1E72B8","#B240A2","#705DA0","#466803","#497A3C","#3D71AA","#B15415","#890F02","#6E6E6E","#0A437C","#6D1F62","#584477","#4C7A3F","#2F4F4F","#BF1B00","#7662B1","#8A2EB8","#517A00","#000000","#3F6833","#2F575E","#99440A","#AE561A","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],n=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];function o(d=""){const i=g(d.toLowerCase());return Math.abs(i%t.length)}function s(d=""){const i=o(d);return r(i)}function r(d){return{color:t[d],borderColor:n[d]}}function g(d){let i=5381;for(let l=0;l<d.length;l++)i=(i<<5)+i+d.charCodeAt(l);return i}var u={getTagColorsFromName:s}},18976:(Y,A,e)=>{"use strict";e.d(A,{O:()=>o,f:()=>s});var t=e(32196),n=e(23596);function o(r){switch(r){case"auto":return"bottom";case"auto-start":return"bottom-start";case"auto-end":return"bottom-end";default:return r??"bottom"}}function s(r,g,u,d,i){return{arrow:(0,t.css)({fill:g}),container:(0,t.css)({backgroundColor:g,borderRadius:r.shape.radius.default,border:`1px solid ${u}`,boxShadow:r.shadows.z2,color:d,fontSize:r.typography.bodySmall.fontSize,padding:r.spacing(i.topBottom,i.rightLeft),transition:"opacity 0.3s",zIndex:r.zIndex.tooltip,maxWidth:"400px",overflowWrap:"break-word","&[data-popper-interactive='false']":{pointerEvents:"none"},code:{border:"none",display:"inline",background:n.darken(g,.1),color:d,whiteSpace:"normal"},pre:{background:n.darken(g,.1),color:d},a:{color:d,textDecoration:"underline"},"a:hover":{textDecoration:"none"}}),headerClose:(0,t.css)({color:r.colors.text.secondary,position:"absolute",right:r.spacing(1),top:r.spacing(1.5),backgroundColor:"transparent",border:0}),header:(0,t.css)({paddingTop:r.spacing(1),paddingBottom:r.spacing(2)}),body:(0,t.css)({paddingTop:r.spacing(1),paddingBottom:r.spacing(1)}),footer:(0,t.css)({paddingTop:r.spacing(2),paddingBottom:r.spacing(1)})}}},69731:(Y,A,e)=>{"use strict";e.d(A,{C:()=>n});var t=e(96540);function n(){const[o,s]=(0,t.useState)(0);return()=>s(r=>r+1)}},29734:(Y,A,e)=>{"use strict";e.d(A,{K:()=>o,Pw:()=>t,RP:()=>s,tf:()=>n});var t=(r=>(r.onBlur="onBlur",r.onFocus="onFocus",r.onChange="onChange",r))(t||{});const n=(r,g)=>{const u=g.reduce((d,i)=>i.rule(r)?d:d.concat(i.errorMessage),[]);return u.length>0?u:null},o=(r,g)=>g&&g[r],s=(r,g)=>({rule:u=>!!u.match(r),errorMessage:g||"Value is not valid"})},91950:(Y,A,e)=>{"use strict";e.d(A,{A:()=>o,f:()=>r});var t=e(2543),n=e.n(t);class o{constructor(u){if(this.columns=[],this.columnMap={},this.rows=[],this.type="table",u){if(u.columns)for(const d of u.columns)this.addColumn(d);if(u.rows)for(const d of u.rows)this.addRow(d)}}sort(u){u.col===null||u.col===void 0||this.columns.length<=u.col||(this.rows.sort((d,i)=>(d=d[u.col],i=i[u.col],+(d==null)-+(i==null)||+(d>i)||-(d<i))),u.desc&&this.rows.reverse(),this.columns[u.col].sort=!0,this.columns[u.col].desc=u.desc)}addColumn(u){this.columnMap[u.text]||(this.columns.push(u),this.columnMap[u.text]=u)}addRow(u){this.rows.push(u)}}function s(g,u,d){let i=!1;for(let l=0;l<g.length;l++)if(u[l]!==void 0&&d[l]!==void 0){if(u[l]!==d[l])return!1}else(u[l]===void 0||d[l]===void 0)&&(i=!0);return i}function r(g,...u){const d=g||new o;if(arguments.length===1)return d;if(arguments.length===2)return d.columns=u[0].hasOwnProperty("columns")?[...u[0].columns]:[],d.rows=u[0].hasOwnProperty("rows")?[...u[0].rows]:[],d;const i=u.filter(a=>!!a.columns),l={},f=i.slice().reduce((a,v)=>(v.columns.forEach(E=>{const{text:D}=E;l[D]===void 0&&(l[D]=a.length,a.push(E))}),a),[]),c=i.map(a=>a.columns.map(v=>l[v.text])),h=i.reduce((a,v,E)=>{const D=c[E];return v.rows.forEach(b=>{const P=[];D.forEach((y,T)=>{P[y]=b[T]}),a.push(P)}),a},[]),p={},m=h.reduce((a,v,E)=>{if(!p[E]){let D=E+1;for(;D<h.length;){const b=(0,t.findIndex)(h,P=>s(f,v,P),D);if(b>-1){const P=h[b];for(let y=0;y<f.length;y++)v[y]===void 0&&P[y]!==void 0&&(v[y]=P[y]);p[b]=P,D=b+1}else break}a.push(v)}return a},[]);return d.columns=f,d.rows=m,d}},97007:(Y,A,e)=>{"use strict";e.d(A,{N:()=>n});var t=e(30038);const n=(0,t.VP)("core/cleanUpState")},82467:(Y,A,e)=>{"use strict";e.d(A,{Do:()=>t.Do,Vz:()=>n.Vz,YA:()=>n.YA,dx:()=>t.dx});var t=e(16001),n=e(28215)},28138:(Y,A,e)=>{"use strict";e.d(A,{A:()=>o,l:()=>n});var t=e(18226);const n=new t.o,o=n},5108:(Y,A,e)=>{"use strict";e.d(A,{x:()=>H});var t=e(32196),n=e(2543),o=e(96540),s=e(40845),r=e(68402),g=e(90613),u=e(94753),d=e(55852),i=e(9025),l=e(44836),f=e(27677),c=e(43907),h=e(67061),p=e(88323),m=e(25469),a=e(17172);class v extends o.Component{constructor(Q){super(Q),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,n.debounce)(this.search,300,{leading:!0,trailing:!0})}search(Q){return this.setState({isLoading:!0}),(0,n.isNil)(Q)&&(Q=""),(0,a.AI)().get("/api/serviceaccounts/search").then(ee=>ee.serviceAccounts.map(ae=>({id:ae.id,value:ae.id,label:ae.login,imgUrl:ae.avatarUrl,login:ae.login}))).finally(()=>{this.setState({isLoading:!1})})}render(){const{className:Q,onSelected:ee,inputId:ae}=this.props,{isLoading:Z}=this.state;return o.createElement("div",{className:"service-account-picker","data-testid":"serviceAccountPicker"},o.createElement(p.DW,{isClearable:!0,className:Q,inputId:ae,isLoading:Z,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:ee,placeholder:"Start typing to search for service accounts",noOptionsMessage:"No service accounts found","aria-label":"Service Account picker"}))}}class E extends o.Component{constructor(Q){super(Q),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,n.debounce)(this.search,300,{leading:!0,trailing:!0})}componentDidMount(){const{teamId:Q}=this.props;Q&&(0,a.AI)().get(`/api/teams/${Q}`).then(ee=>{this.setState({value:{value:ee,label:ee.name,imgUrl:ee.avatarUrl}})})}search(Q){return this.setState({isLoading:!0}),(0,n.isNil)(Q)&&(Q=""),(0,a.AI)().get(`/api/teams/search?perpage=100&page=1&query=${Q}`).then(ee=>{const ae=ee.teams.map(Z=>({value:Z,label:Z.name,imgUrl:Z.avatarUrl}));return this.setState({isLoading:!1}),ae})}render(){const{onSelected:Q,className:ee}=this.props,{isLoading:ae,value:Z}=this.state;return o.createElement("div",{className:"user-picker","data-testid":"teamPicker"},o.createElement(p.DW,{isLoading:ae,defaultOptions:!0,loadOptions:this.debouncedSearch,value:Z,onChange:Q,className:ee,placeholder:"Select a team",noOptionsMessage:"No teams found","aria-label":"Team picker"}))}}class D extends o.Component{constructor(Q){super(Q),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,n.debounce)(this.search,300,{leading:!0,trailing:!0})}search(Q){return this.setState({isLoading:!0}),(0,n.isNil)(Q)&&(Q=""),(0,a.AI)().get(`/api/org/users/lookup?query=${Q}&limit=100`).then(ee=>ee.map(ae=>({id:ae.userId,value:ae.userId,label:ae.login,imgUrl:ae.avatarUrl,login:ae.login}))).finally(()=>{this.setState({isLoading:!1})})}render(){const{className:Q,onSelected:ee,inputId:ae}=this.props,{isLoading:Z}=this.state;return o.createElement("div",{className:"user-picker","data-testid":"userPicker"},o.createElement(p.DW,{isClearable:!0,className:Q,inputId:ae,isLoading:Z,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:ee,placeholder:"Start typing to search for user",noOptionsMessage:"No users found","aria-label":"User picker"}))}}var b=e(24897),P=(k=>(k.None="None",k.Team="Team",k.User="User",k.ServiceAccount="ServiceAccount",k.BuiltInRole="builtInRole",k))(P||{});const y=({title:k=(0,l.t)("access-control.add-permission.title","Add permission for"),permissions:Q,assignments:ee,onAdd:ae,onCancel:Z})=>{const[ne,q]=(0,o.useState)(P.None),[te,re]=(0,o.useState)(0),[de,ie]=(0,o.useState)(0),[ge,ve]=(0,o.useState)(""),[ye,pe]=(0,o.useState)(""),le=(0,o.useMemo)(()=>{const De=[];return ee.users&&De.push({value:P.User,label:(0,l.t)("access-control.add-permission.user-label","User")}),ee.serviceAccounts&&De.push({value:P.ServiceAccount,label:(0,l.t)("access-control.add-permission.serviceaccount-label","Service Account")}),ee.teams&&De.push({value:P.Team,label:(0,l.t)("access-control.add-permission.team-label","Team")}),ee.builtInRoles&&De.push({value:P.BuiltInRole,label:(0,l.t)("access-control.add-permission.role-label","Role")}),De},[ee]);(0,o.useEffect)(()=>{Q.length>0&&pe(Q[0])},[Q]);const Me=()=>ne===P.Team&&te>0||ne===P.User&&de>0||ne===P.ServiceAccount&&de>0||P.BuiltInRole&&b.XT.hasOwnProperty(ge);return o.createElement("div",{className:"cta-form","aria-label":"Permissions slider"},o.createElement(m.J,{onClick:Z}),o.createElement("h5",null,k),o.createElement("form",{name:"addPermission",onSubmit:De=>{De.preventDefault(),ae({userId:de,teamId:te,builtInRole:ge,permission:ye,target:ne})}},o.createElement(h.B,{gap:1,direction:"row"},o.createElement(p.l6,{"aria-label":"Role to add new permission to",value:ne,options:le,onChange:De=>q(De.value),disabled:le.length===0,width:"auto"}),ne===P.User&&o.createElement(D,{onSelected:De=>ie(De?.value||0)}),ne===P.ServiceAccount&&o.createElement(v,{onSelected:De=>ie(De?.value||0)}),ne===P.Team&&o.createElement(E,{onSelected:De=>re(De.value?.id||0)}),ne===P.BuiltInRole&&o.createElement(p.l6,{"aria-label":"Built-in role picker",options:Object.values(b.XT).filter(De=>De!==b.XT.None).map(De=>({value:De,label:De})),onChange:De=>ve(De.value||""),width:"auto"}),o.createElement(p.l6,{"aria-label":"Permission Level",width:"auto",value:Q.find(De=>De===ye),options:Q.map(De=>({label:De,value:De})),onChange:De=>pe(De.value||"")}),o.createElement(d.$n,{type:"submit",disabled:!Me()},o.createElement(l.x6,{i18nKey:"access-control.add-permissions.save"},"Save")))))};var T=e(56034),M=e(14578);const I=({item:k,permissionLevels:Q,canSet:ee,onRemove:ae,onChange:Z})=>{const ne=(0,s.of)(L);return o.createElement("tr",null,o.createElement("td",null,x(k)),o.createElement("td",null,O(k)),o.createElement("td",null,k.isInherited&&o.createElement("em",{className:"muted no-wrap"},"Inherited from folder")),o.createElement("td",null,o.createElement(p.l6,{disabled:!ee||!k.isManaged,onChange:q=>Z(k,q.value),value:Q.find(q=>q===k.permission),options:Q.map(q=>({value:q,label:q}))})),o.createElement("td",null,k.warning?o.createElement(T.m,{content:o.createElement(o.Fragment,null,o.createElement(g.a,{marginBottom:1},k.warning),C(k))},o.createElement(M.I,{name:"exclamation-triangle",className:ne.warning})):o.createElement(T.m,{content:C(k)},o.createElement(M.I,{name:"info-circle"}))),o.createElement("td",null,k.isManaged?o.createElement(d.$n,{size:"sm",icon:"times",variant:"destructive",disabled:!ee,onClick:()=>ae(k),"aria-label":`Remove permission for ${S(k)}`}):o.createElement(T.m,{content:k.isInherited?"Inherited Permission":"Provisioned Permission"},o.createElement(d.$n,{size:"sm",icon:"lock"}))))},x=k=>k.teamId?o.createElement("img",{className:"filter-table__avatar",src:k.teamAvatarUrl,alt:`Avatar for team ${k.teamId}`}):k.userId?o.createElement("img",{className:"filter-table__avatar",src:k.userAvatarUrl,alt:`Avatar for user ${k.userId}`}):o.createElement(M.I,{size:"xl",name:"shield"}),S=k=>k.userId?k.userLogin:k.teamId?k.team:k.builtInRole,O=k=>k.userId?o.createElement("span",{key:"name"},k.userLogin," "):k.teamId?o.createElement("span",{key:"name"},k.team," "):k.builtInRole?o.createElement("span",{key:"name"},k.builtInRole," "):o.createElement("span",{key:"name"}),C=k=>`Actions: ${[...new Set(k.actions)].sort().join(" ")}`,L=k=>({warning:(0,t.css)({color:k.colors.warning.main})}),U=({title:k,items:Q,compareKey:ee,permissionLevels:ae,canSet:Z,onRemove:ne,onChange:q})=>{const te=(0,o.useMemo)(()=>{const re={};for(let de of Q){const ie=de[ee];if(!re[ie]){re[ie]=de;continue}if(de.actions.length>re[ie].actions.length){re[ie]=de;continue}de.actions.length===re[ie].actions.length&&!de.isInherited&&(re[ie]=de)}return Object.keys(re).map(de=>re[de])},[Q,ee]);return te.length===0?null:o.createElement("div",null,o.createElement("table",{className:"filter-table gf-form-group"},o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",{style:{width:"1%"}}),o.createElement("th",null,k),o.createElement("th",{style:{width:"1%"}}),o.createElement("th",{style:{width:"40%"}},o.createElement(l.x6,{i18nKey:"access-control.permission-list.permission"},"Permission")),o.createElement("th",{style:{width:"1%"}}),o.createElement("th",{style:{width:"1%"}}))),o.createElement("tbody",null,te.map((re,de)=>o.createElement(I,{item:re,onRemove:ne,onChange:q,canSet:Z,key:`${de}-${re.userId}`,permissionLevels:ae})))))},R="",B={permissions:[],assignments:{teams:!1,users:!1,serviceAccounts:!1,builtInRoles:!1}},H=({title:k=(0,l.t)("access-control.permissions.title","Permissions"),buttonLabel:Q=(0,l.t)("access-control.permissions.add-label","Add a permission"),emptyLabel:ee=(0,l.t)("access-control.permissions.no-permissions","There are no permissions"),resource:ae,resourceId:Z,canSetPermissions:ne,addPermissionTitle:q,getWarnings:te})=>{const re=(0,s.of)(j),[de,ie]=(0,o.useState)(!1),[ge,ve]=(0,o.useState)([]),[ye,pe]=(0,o.useState)(B),le=(0,o.useCallback)(async()=>{let Qe=await N(ae,Z);te&&(Qe=te(Qe)),ve(Qe)},[ae,Z,te]);(0,o.useEffect)(()=>{W(ae).then(Qe=>(pe(Qe),le()))},[ae,Z,le]);const Me=Qe=>{let ke=null;Qe.target===P.User||Qe.target===P.ServiceAccount?ke=V(ae,Z,Qe.userId,Qe.permission):Qe.target===P.Team?ke=G(ae,Z,Qe.teamId,Qe.permission):Qe.target===P.BuiltInRole&&(ke=_(ae,Z,Qe.builtInRole,Qe.permission)),ke!==null&&ke.then(le)},De=Qe=>{let ke=null;Qe.userId?ke=V(ae,Z,Qe.userId,R):Qe.teamId?ke=G(ae,Z,Qe.teamId,R):Qe.isServiceAccount&&Qe.userId?ke=V(ae,Z,Qe.userId,R):Qe.builtInRole&&(ke=_(ae,Z,Qe.builtInRole,R)),ke!==null&&ke.then(le)},Re=(Qe,ke)=>{Qe.permission!==ke&&(Qe.userId?Me({permission:ke,userId:Qe.userId,target:P.User}):Qe.isServiceAccount?Me({permission:ke,userId:Qe.userId,target:P.User}):Qe.teamId?Me({permission:ke,teamId:Qe.teamId,target:P.Team}):Qe.builtInRole&&Me({permission:ke,builtInRole:Qe.builtInRole,target:P.BuiltInRole}))},me=(0,o.useMemo)(()=>(0,n.sortBy)(ge.filter(Qe=>Qe.teamId),["team","isManaged"]),[ge]),he=(0,o.useMemo)(()=>(0,n.sortBy)(ge.filter(Qe=>Qe.userId&&!Qe.isServiceAccount),["userLogin","isManaged"]),[ge]),Te=(0,o.useMemo)(()=>(0,n.sortBy)(ge.filter(Qe=>Qe.userId&&Qe.isServiceAccount),["userLogin","isManaged"]),[ge]),Be=(0,o.useMemo)(()=>(0,n.sortBy)(ge.filter(Qe=>Qe.builtInRole),["builtInRole","isManaged"]),[ge]),we=(0,l.t)("access-control.permissions.role","Role"),Ne=(0,l.t)("access-control.permissions.user","User"),Ze=(0,l.t)("access-control.permissions.serviceaccount","Service Account"),st=(0,l.t)("access-control.permissions.team","Team");return o.createElement("div",null,ne&&ae==="folders"&&o.createElement(o.Fragment,null,o.createElement(l.x6,{i18nKey:"access-control.permissions.permissions-change-warning"},"This will change permissions for this folder and all its descendants. In total, this will affect:"),o.createElement(c.x,{selectedItems:{folder:{[Z]:!0},dashboard:{},panel:{},$all:!1}}),o.createElement(r.$,{v:2})),ge.length===0&&o.createElement(g.a,null,o.createElement(u.E,null,ee)),o.createElement(U,{title:we,items:Be,compareKey:"builtInRole",permissionLevels:ye.permissions,onChange:Re,onRemove:De,canSet:ne}),o.createElement(U,{title:Ne,items:he,compareKey:"userLogin",permissionLevels:ye.permissions,onChange:Re,onRemove:De,canSet:ne}),o.createElement(U,{title:Ze,items:Te,compareKey:"userLogin",permissionLevels:ye.permissions,onChange:Re,onRemove:De,canSet:ne}),o.createElement(U,{title:st,items:me,compareKey:"team",permissionLevels:ye.permissions,onChange:Re,onRemove:De,canSet:ne}),ne&&o.createElement(o.Fragment,null,o.createElement(d.$n,{className:re.addPermissionButton,variant:"primary",key:"add-permission",onClick:()=>ie(!0),icon:"plus"},Q),o.createElement(i.a,{in:de},o.createElement(y,{title:q,onAdd:Me,permissions:ye.permissions,assignments:ye.assignments,onCancel:()=>ie(!1)}))))},W=async k=>{try{return await(0,f.AI)().get(`/api/access-control/${k}/description`)}catch(Q){return console.error("failed to load resource description: ",Q),B}},N=(k,Q)=>(0,f.AI)().get(`/api/access-control/${k}/${Q}`),V=(k,Q,ee,ae)=>K(k,Q,"users",ee,ae),G=(k,Q,ee,ae)=>K(k,Q,"teams",ee,ae),_=(k,Q,ee,ae)=>K(k,Q,"builtInRoles",ee,ae),K=(k,Q,ee,ae,Z)=>(0,f.AI)().post(`/api/access-control/${k}/${Q}/${ee}/${ae}`,{permission:Z}),j=k=>({breakdown:(0,t.css)({...k.typography.bodySmall,color:k.colors.text.secondary,marginBottom:k.spacing(2)}),addPermissionButton:(0,t.css)({marginBottom:k.spacing(2)})})},9025:(Y,A,e)=>{"use strict";e.d(A,{a:()=>g});var t=e(96540),n=e(22669);const o="200px",s=200,r={transition:`max-height ${s}ms ease-in-out`,overflow:"hidden"},g=({children:u,in:d,maxHeight:i=o,style:l=r})=>{const f={exited:{maxHeight:0},entering:{maxHeight:i},entered:{maxHeight:"unset",overflow:"visible"},exiting:{maxHeight:0}};return t.createElement(n.Ay,{in:d,timeout:s},c=>t.createElement("div",{style:{...l,...f[c]}},u))}},75269:(Y,A,e)=>{"use strict";e.d(A,{H:()=>o});var t=e(96540),n=e(76888);const o=t.memo(({actions:s})=>{const{chrome:r}=(0,n.Il)();return(0,t.useLayoutEffect)(()=>{r.update({actions:s})}),null});o.displayName="TopNavUpdate"},10804:(Y,A,e)=>{"use strict";e.d(A,{K:()=>s});var t=e(32196),n=e(96540),o=e(40845);function s({className:g,leftActionsSeparator:u}){const d=(0,o.of)(r);return u?n.createElement("div",{className:(0,t.cx)(g,d.leftActionsSeparator)}):n.createElement("div",{className:(0,t.cx)(g,d.line)})}const r=g=>({leftActionsSeparator:(0,t.css)({display:"flex",flexGrow:1}),line:(0,t.css)({width:1,backgroundColor:g.colors.border.medium,height:24})})},57571:(Y,A,e)=>{"use strict";e.d(A,{l:()=>t});const t=40},19361:(Y,A,e)=>{"use strict";e.d(A,{M:()=>i});var t=e(32196),n=e(96540),o=e(23596),s=e(40845);const r=({className:l,logo:f})=>n.createElement("img",{className:l,src:`${f||"public/img/grafana_icon.svg"}`,alt:"Grafana"}),g=({className:l,children:f})=>{const c=(0,s.$j)(),h=(0,t.css)({"&:before":{content:'""',position:"fixed",left:0,right:0,bottom:0,top:0,background:`url(public/img/g8_login_${c.isDark?"dark":"light"}.svg)`,backgroundPosition:"top center",backgroundSize:"auto",backgroundRepeat:"no-repeat",opacity:0,transition:"opacity 3s ease-in-out",[c.breakpoints.up("md")]:{backgroundPosition:"center",backgroundSize:"cover"}}});return n.createElement("div",{className:(0,t.cx)(h,l)},f)},u=({className:l})=>n.createElement("img",{className:l,src:"public/img/grafana_icon.svg",alt:"Grafana"}),d=()=>{const l=(0,s.$j)();return(0,t.css)({background:o.alpha(l.colors.background.primary,.7),backgroundSize:"cover"})};class i{}i.LoginLogo=r,i.LoginBackground=g,i.MenuLogo=u,i.LoginBoxBackground=d,i.AppTitle="vDSP Provisioning",i.LoginTitle="Welcome to vDSP Provisioning",i.HideEdition=!1,i.GetLoginSubTitle=()=>null},3984:(Y,A,e)=>{"use strict";e.d(A,{Z:()=>t});function t(n,o,s){const r=[];let g=!1,u;function d(i,l=!1){if(g)return;const f=i.url?.split("?")??["",""];let c=f[0];const h=new URLSearchParams(f[1]);if(h.has("editview")&&(c+=`?editview=${h.get("editview")}`),s&&c===s.url){r.unshift({text:s.text,href:i.url??""}),g=!0;return}const p=c.length>0&&u===c;u=c,!i.hideFromBreadcrumbs&&!(l&&p)&&r.unshift({text:i.text,href:i.url??""}),i.parentItem&&d(i.parentItem)}return o&&d(o),d(n,!0),r}},25469:(Y,A,e)=>{"use strict";e.d(A,{J:()=>r});var t=e(32196),n=e(96540),o=e(40845),s=e(29158);const r=({onClick:u,"aria-label":d,style:i})=>{const l=(0,o.of)(g);return n.createElement(s.K,{"aria-label":d??"Close",className:l,name:"times",onClick:u,style:i,tooltip:"Close"})},g=u=>(0,t.css)({position:"absolute",right:u.spacing(.5),top:u.spacing(1)})},27921:(Y,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(96540);const n=o=>t.lazy(o)},7521:(Y,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(32196),n=e(96540),o=e(13544),s=e(14578),r=e(55852),g=e(76442);const u=(0,t.css)({textAlign:"center"}),d=(0,t.css)({maxWidth:"700px",margin:"0 auto"}),l=({title:f,buttonIcon:c,buttonLink:h,buttonTitle:p,buttonDisabled:m,onClick:a,proTip:v,proTipLink:E,proTipLinkTitle:D,proTipTarget:b,infoBox:P,infoBoxTitle:y})=>{const T=()=>n.createElement(n.Fragment,null,v?n.createElement("span",{key:"proTipFooter"},n.createElement(s.I,{name:"rocket"}),n.createElement(n.Fragment,null," ProTip: ",v," "),E&&n.createElement("a",{href:E,target:b,className:"text-link"},D)):"",P?n.createElement("div",{key:"infoBoxHtml",className:`grafana-info-box ${d}`},y&&n.createElement("h5",null,y),n.createElement("div",{dangerouslySetInnerHTML:P})):""),M=T()?"":(0,t.css)({marginBottom:"20px"}),I=h?r.z9:r.$n,x=n.createElement(I,{size:"lg",onClick:a,href:h,icon:c,className:M,"data-testid":o.Tp.components.CallToActionCard.buttonV2(p),disabled:m},p);return n.createElement(g.c,{className:u,message:f,footer:T(),callToActionElement:x})}},38645:(Y,A,e)=>{"use strict";e.d(A,{Dd:()=>r,wi:()=>i});var t=e(96540),n=e(32264),o=e(14578),s=e(44836);let r=()=>[{target:"_blank",id:"documentation",text:(0,s.t)("nav.help/documentation","Documentation"),icon:"document-info",url:"https://grafana.com/docs/grafana/latest/?utm_source=grafana_footer"},{target:"_blank",id:"support",text:(0,s.t)("nav.help/support","Support"),icon:"question-circle",url:"https://grafana.com/products/enterprise/?utm_source=grafana_footer"},{target:"_blank",id:"community",text:(0,s.t)("nav.help/community","Community"),icon:"comments-alt",url:"https://community.grafana.com/?utm_source=grafana_footer"}];function g(f){return{hasReleaseNotes:!0,isBeta:f.includes("-beta")}}function u(f){const{buildInfo:c,licenseInfo:h}=n.$,p=[],m=h.stateInfo?` (${h.stateInfo})`:"";if(f||p.push({target:"_blank",id:"license",text:`${c.edition}${m}`,url:h.licenseUrl}),c.hideVersion)return p;const{hasReleaseNotes:a}=g(c.version);return p.push({target:"_blank",id:"version",text:`v${c.version} (${c.commit})`,url:a?"https://github.com/grafana/grafana/blob/main/CHANGELOG.md":void 0}),c.hasUpdate&&p.push(),p}function d(f){r=f}const i=t.memo(({customLinks:f,hideEdition:c})=>{const h=(f||r()).concat(u(c));return t.createElement("footer",{className:"footer"},t.createElement("div",{className:"text-center"},t.createElement("ul",null,h.map(p=>t.createElement("li",{key:p.text},t.createElement(l,{item:p}))))))});i.displayName="Footer";function l({item:f}){const c=f.url?t.createElement("a",{href:f.url,target:f.target,rel:"noopener noreferrer",id:f.id},f.text):f.text;return t.createElement(t.Fragment,null,f.icon&&t.createElement(o.I,{name:f.icon})," ",c)}},53153:(Y,A,e)=>{"use strict";e.d(A,{S:()=>c});var t=e(96540),n=e(49785),o=e(13544),s=e(40845),r=e(42418),g=e(88575),u=e(66864),d=e(55852),i=e(56034),l=e(4691),f=e(78361);const c=({onSubmit:h,onSkip:p,showDefaultPasswordWarning:m})=>{const a=(0,s.of)(l.$),{handleSubmit:v,register:E,getValues:D,formState:{errors:b}}=(0,n.mN)({defaultValues:{newPassword:"",confirmNew:""}}),P=y=>{h(y.newPassword)};return t.createElement("form",{onSubmit:v(P)},m&&t.createElement(r.F,{severity:"info",title:"Continuing to use the default password exposes you to security risks."}),t.createElement(g.D,{label:"New password",invalid:!!b.newPassword,error:b?.newPassword?.message},t.createElement(f.s,{...E("newPassword",{required:"New Password is required"}),id:"new-password",autoFocus:!0,autoComplete:"new-password"})),t.createElement(g.D,{label:"Confirm new password",invalid:!!b.confirmNew,error:b?.confirmNew?.message},t.createElement(f.s,{...E("confirmNew",{required:"Confirmed Password is required",validate:y=>y===D().newPassword||"Passwords must match!"}),id:"confirm-new-password",autoComplete:"new-password"})),t.createElement(u.gW,null,t.createElement(d.$n,{type:"submit",className:a.submitButton},"Submit"),p&&t.createElement(i.m,{content:"If you skip you will be prompted to change password next time you log in.",placement:"bottom"},t.createElement(d.$n,{fill:"text",onClick:p,type:"button","data-testid":o.Tp.pages.Login.skip},"Skip"))))}},30249:(Y,A,e)=>{"use strict";e.d(A,{o:()=>m});var t=e(96540),n=e(64423),o=e(99165),s=e(85200),r=e(1173),g=e(11261),u=e(69129),d=e(26272),i=e(67266),l=e(79041),f=e(81297),c=e(16895),h=e(40458);function p(a,v,E=[]){for(const D of E)if(typeof D=="function"){if(!D(a,v))return!1}else if(v[D]!==a[D])return!1;return!0}class m extends t.Component{constructor(v){super(v),this.panelContext={},this.subscription=new n.yU,this.getTimeRange=()=>this.props.timeRange;let E=this.prepState(v);E.alignedData=E.config.prepData([E.alignedFrame]),this.state=E,this.plotInstance=t.createRef()}prepState(v,E=!0){let D=null;const{frames:b,fields:P,preparePlotFrame:y}=v,M=(y||h.m)(b,P||{x:s.sJ.get(r.Ct.firstTimeField).get({}),y:s.sJ.get(r.Ct.byTypes).get(new Set([g.PU.number,g.PU.enum]))},v.timeRange);if((0,c.uY)("GraphNG",!1,"data aligned",M),M){let I=this.state?.config;E&&(I=v.prepConfig(M,this.props.frames,this.getTimeRange),(0,c.uY)("GraphNG",!1,"config prepared",I)),D={alignedFrame:M,config:I},(0,c.uY)("GraphNG",!1,"data prepared",D.alignedData)}return D}handleCursorUpdate(v){if(v.tags?.has("uplot"))return;const E=v.payload?.point?.time,D=this.plotInstance.current;if(D&&E){const b=D.valToPos(E,"x");let P;if(b&&(P=(0,c.sw)(D,D.posToIdx(b))),!P||!b)return;D.setCursor({left:b,top:P})}}componentDidMount(){this.panelContext=this.context;const{eventBus:v}=this.panelContext;this.subscription.add(v.getStream(u.b_).pipe((0,o.c)(50)).subscribe({next:E=>{v!==E.origin&&this.handleCursorUpdate(E)}})),this.subscription.add(v.getStream(d.kb).pipe((0,o.c)(50)).subscribe({next:E=>this.handleCursorUpdate(E)})),this.subscription.add(v.getStream(u.ql).pipe((0,o.c)(50)).subscribe({next:()=>{const E=this.plotInstance?.current;E&&!E.cursor._lock&&E.setCursor({left:-10,top:-10})}}))}componentDidUpdate(v){const{frames:E,structureRev:D,timeZone:b,propsToDiff:P}=this.props,y=!p(v,this.props,P);if(E!==v.frames||y||b!==v.timeZone){let T=this.prepState(this.props,!1);T&&((this.state.config===void 0||b!==v.timeZone||D!==v.structureRev||!D||y)&&(T.config=this.props.prepConfig(T.alignedFrame,this.props.frames,this.getTimeRange),(0,c.uY)("GraphNG",!1,"config recreated",T.config)),T.alignedData=T.config.prepData([T.alignedFrame]),this.setState(T))}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:v,height:E,children:D,renderLegend:b}=this.props,{config:P,alignedFrame:y,alignedData:T}=this.state;return P?t.createElement(i.KU,{width:v,height:E,legend:b(P)},(M,I)=>t.createElement(f.Z,{config:P,data:T,width:M,height:I,plotRef:x=>this.plotInstance.current=x},D?D(P,y):null)):null}}m.contextType=l.e4},40458:(Y,A,e)=>{"use strict";e.d(A,{m:()=>i});var t=e(11261),n=e(73060),o=e(46294);function s(l,f,c){let h,p;for(let m=0;m<f.length;m++)if(f[m]==null)p==null&&h!=null&&(p=m);else{if(p!=null&&h!=null){if(l[m]-h<c)for(;p<m;)f[p++]=void 0;p=null}h=l[m]}return f}var r=e(52622);function g(l){return l.type===t.PU.number&&l.config.custom?.drawStyle===r.GR.Bars&&!l.config.custom?.hideFrom?.viz}function u(l,f){return l.fields.find(c=>f!=null?c.name===f:c.type===t.PU.time)}function d(l,f){const c=u(l,f);let h=c?.values;for(let p=0;p<l.fields.length;p++){let m=l.fields[p];if(m===c||g(m))continue;let a=m.config.custom?.spanNulls;typeof a=="number"&&a!==-1&&h&&(m.values=s(h,m.values,a))}return l}function i(l,f,c){let h;e:for(let v of l)for(let E of v.fields)if(f.x(E,v,l)){h=E;break e}l=l.map(v=>h?.state?.nullThresholdApplied?v:(0,o.M)({frame:v,refFieldName:h.name,refFieldPseudoMin:c?.from.valueOf(),refFieldPseudoMax:c?.to.valueOf()}));let p=0;l.forEach(v=>{v.fields.forEach(E=>{g(E)&&(E.config.custom={...E.config.custom,spanNulls:-1},p++)})});let m=1/0;p>1&&l.forEach(v=>{if(!v.fields.some(g))return;const E=h.values;for(let D=0;D<E.length;D++)D>0&&(m=Math.min(m,E[D]-E[D-1]))});let a=(0,n.Fd)({frames:l,joinBy:f.x,keep:f.y,keepOriginIndices:!0});return a?(a=d(a,h.name),m!==1/0&&(a.fields.forEach((v,E)=>{let D=v.values;if(E===0){let b=D[D.length-1];D.push(b+m,b+2*m)}else g(v)?D.push(null,null):D.push(void 0,void 0)}),a.length+=2),a):null}},18759:(Y,A,e)=>{"use strict";e.d(A,{T:()=>r});var t=e(32196),n=e(96540),o=e(40845),s=e(16795);function r({children:u,spacing:d,level:i}){const l=(0,o.of)(g,d,i);return n.createElement("span",{className:(0,t.css)(l.indentor)},u)}const g=(u,d,i)=>({indentor:(0,t.css)((0,s.Y)(u,d,l=>({paddingLeft:u.spacing(l*i)})))})},54391:(Y,A,e)=>{"use strict";e.d(A,{R:()=>u});var t=e(32196),n=e(96540),o=e(40845),s=e(14578),r=e(10354),g=e(72093);const u=({name:i,onChange:l,verifyLayerNameUniqueness:f,overrideStyles:c})=>{const h=(0,o.of)(d),[p,m]=(0,n.useState)(!1),[a,v]=(0,n.useState)(null),E=M=>{m(!0)},D=M=>{if(m(!1),a){v(null);return}i!==M&&l(M)},b=M=>{const I=M.currentTarget.value.trim();if(I.length===0){v("An empty layer name is not allowed");return}if(f&&!f(I)&&I!==i){v("Layer name already exists");return}a&&v(null)},P=M=>{D(M.currentTarget.value.trim())},y=M=>{M.key==="Enter"&&D(M.currentTarget.value)},T=M=>{M.target.select()};return n.createElement(n.Fragment,null,n.createElement("div",{className:h.wrapper},!p&&n.createElement("button",{className:h.layerNameWrapper,title:"Edit layer name",onClick:E,"data-testid":"layer-name-div"},n.createElement("span",{className:c?"":h.layerName},i),n.createElement(s.I,{name:"pen",className:h.layerEditIcon,size:"sm"})),p&&n.createElement(n.Fragment,null,n.createElement(r.p,{type:"text",defaultValue:i,onBlur:P,autoFocus:!0,onKeyDown:y,onFocus:T,invalid:a!==null,onChange:b,className:h.layerNameInput,"data-testid":"layer-name-input"}),a&&n.createElement(g.P,{horizontal:!0},a))))},d=i=>({wrapper:(0,t.css)({label:"Wrapper",display:"flex",alignItems:"center",marginLeft:i.spacing(.5)}),layerNameWrapper:(0,t.css)({display:"flex",cursor:"pointer",border:"1px solid transparent",borderRadius:i.shape.radius.default,alignItems:"center",padding:`0 0 0 ${i.spacing(.5)}`,margin:0,background:"transparent","&:hover":{background:i.colors.action.hover,border:`1px dashed ${i.colors.border.strong}`},"&:focus":{border:`2px solid ${i.colors.primary.border}`},"&:hover, &:focus":{".query-name-edit-icon":{visibility:"visible"}}}),layerName:(0,t.css)({fontWeight:i.typography.fontWeightMedium,color:i.colors.primary.text,cursor:"pointer",overflow:"hidden",marginLeft:i.spacing(.5)}),layerEditIcon:(0,t.cx)((0,t.css)({marginLeft:i.spacing(2),visibility:"hidden"}),"query-name-edit-icon"),layerNameInput:(0,t.css)({maxWidth:"300px",margin:"-4px 0"})})},61680:(Y,A,e)=>{"use strict";e.d(A,{b:()=>o});var t=e(96540),n=e(33390);const o=s=>{const{children:r,storageKey:g,defaultValue:u}=s,[d,i]=(0,t.useState)({value:n.A.getObject(s.storageKey,s.defaultValue)});(0,t.useEffect)(()=>{const c=h=>{h.key===g&&i({value:n.A.getObject(s.storageKey,s.defaultValue)})};return window.addEventListener("storage",c),()=>{window.removeEventListener("storage",c)}});const l=c=>{try{n.A.setObject(g,c)}catch(h){console.error(h)}i({value:c})},f=()=>{try{n.A.delete(g)}catch(c){console.log(c)}i({value:u})};return t.createElement(t.Fragment,null,r(d.value,l,f))}},87570:(Y,A,e)=>{"use strict";e.d(A,{A:()=>u});var t=e(96540),n=e(17172),o=e(2913),s=e(44836);const r=()=>!!o.Ay.oauth&&Object.keys(o.Ay.oauth).length>0;class g extends t.PureComponent{constructor(l){super(l),this.changePassword=f=>{const c={newPassword:f,confirmNew:f,oldPassword:"admin"};if(this.props.resetCode){const h={code:this.props.resetCode,newPassword:f,confirmPassword:f};(0,n.AI)().post("/api/user/password/reset",h).then(()=>{this.toGrafana()})}else(0,n.AI)().put("/api/user/password",c).then(()=>{this.toGrafana()}).catch(h=>console.error(h))},this.login=f=>{this.setState({loginErrorMessage:void 0,isLoggingIn:!0}),(0,n.AI)().post("/login",f,{showErrorAlert:!1}).then(c=>{if(this.result=c,f.password!=="admin"||o.Ay.ldapEnabled||o.Ay.authProxyEnabled){this.toGrafana();return}else this.changeView(f.password==="admin")}).catch(c=>{const h=(0,n.NF)(c)?d(c):void 0;this.setState({isLoggingIn:!1,loginErrorMessage:h||(0,s.t)("login.error.unknown","Unknown error occurred")})})},this.changeView=f=>{this.setState({isChangingPassword:!0,showDefaultPasswordWarning:f})},this.toGrafana=()=>{this.result?.redirectUrl?o.Ay.appSubUrl!==""&&!this.result.redirectUrl.startsWith(o.Ay.appSubUrl)?window.location.assign(o.Ay.appSubUrl+this.result.redirectUrl):window.location.assign(this.result.redirectUrl):window.location.assign(o.Ay.appSubUrl+"/")},this.state={isLoggingIn:!1,isChangingPassword:!1,showDefaultPasswordWarning:!1,loginErrorMessage:o.Ay.loginError}}render(){const{children:l}=this.props,{isLoggingIn:f,isChangingPassword:c,showDefaultPasswordWarning:h,loginErrorMessage:p}=this.state,{login:m,toGrafana:a,changePassword:v}=this,{loginHint:E,passwordHint:D,disableLoginForm:b,disableUserSignUp:P}=o.Ay;return t.createElement(t.Fragment,null,l({isOauthEnabled:r(),loginHint:E,passwordHint:D,disableLoginForm:b,disableUserSignUp:P,login:m,isLoggingIn:f,changePassword:v,skipPasswordChange:a,isChangingPassword:c,showDefaultPasswordWarning:h,loginErrorMessage:p}))}}const u=g;function d(i){switch(i.data?.messageId){case"password-auth.empty":case"password-auth.failed":case"password-auth.invalid":return(0,s.t)("login.error.invalid-user-or-password","Invalid username or password");case"login-attempt.blocked":return(0,s.t)("login.error.blocked","You have exceeded the number of login attempts for this user. Please try again later.");default:return i.data?.message}}},4691:(Y,A,e)=>{"use strict";e.d(A,{$:()=>c,Q:()=>f});var t=e(32196),n=e(96540),o=e(49785),s=e(13544),r=e(40845),g=e(88575),u=e(10354),d=e(55852),i=e(44836),l=e(78361);const f=({children:h,onSubmit:p,isLoggingIn:m,passwordHint:a,loginHint:v})=>{const E=(0,r.of)(c),D=(0,n.useId)(),b=(0,n.useId)(),{handleSubmit:P,register:y,formState:{errors:T}}=(0,o.mN)({mode:"onChange"});return n.createElement("div",{className:E.wrapper},n.createElement("form",{onSubmit:P(p)},n.createElement(g.D,{label:(0,i.t)("login.form.username-label","Email or username"),invalid:!!T.user,error:T.user?.message},n.createElement(u.p,{...y("user",{required:(0,i.t)("login.form.username-required","Email or username is required")}),id:D,autoFocus:!0,autoCapitalize:"none",placeholder:v,"data-testid":s.Tp.pages.Login.username})),n.createElement(g.D,{label:(0,i.t)("login.form.password-label","Password"),invalid:!!T.password,error:T.password?.message},n.createElement(l.s,{...y("password",{required:(0,i.t)("login.form.password-required","Password is required")}),id:b,autoComplete:"current-password",placeholder:a})),n.createElement(d.$n,{type:"submit","data-testid":s.Tp.pages.Login.submit,className:E.submitButton,disabled:m},m?(0,i.t)("login.form.submit-loading-label","Logging in..."):(0,i.t)("login.form.submit-label","Log in")),h))},c=h=>({wrapper:(0,t.css)({width:"100%",paddingBottom:h.spacing(2)}),submitButton:(0,t.css)({justifyContent:"center",width:"100%",backgroundColor:"#CA1B28",":hover":{backgroundColor:"#E0226E"}})})},20851:(Y,A,e)=>{"use strict";e.d(A,{GU:()=>u,YO:()=>i,qm:()=>g});var t=e(32196),n=e(96540),o=e(40845),s=e(19361),r=e(38645);const g=({children:l,enterAnimation:f=!0})=>{const c=(0,o.of)(i);return n.createElement("div",{className:(0,t.cx)(c.loginInnerBox,f&&c.enterAnimation)},l)},u=({children:l,branding:f,isChangingPassword:c})=>{const h=(0,o.of)(i),[p,m]=(0,n.useState)(!1),a=f?.loginSubtitle??s.M.GetLoginSubTitle(),v=f?.loginTitle??s.M.LoginTitle,E=f?.loginBoxBackground||s.M.LoginBoxBackground(),D=f?.loginLogo,b=f?.hideEdition??s.M.HideEdition;return(0,n.useEffect)(()=>m(!0),[]),n.createElement(s.M.LoginBackground,{className:(0,t.cx)(h.container,p&&h.loginAnim,f?.loginBackground)},n.createElement("div",{className:h.loginMain},n.createElement("div",{className:(0,t.cx)(h.loginContent,E,"login-content-box")},n.createElement("div",{className:h.loginLogoWrapper},n.createElement(s.M.LoginLogo,{className:h.loginLogo,logo:D}),n.createElement("div",{className:h.titleWrapper},c?n.createElement("h1",{className:h.mainTitle},"Update your password"):n.createElement(n.Fragment,null,n.createElement("h1",{className:h.mainTitle},v),a&&n.createElement("h3",{className:h.subTitle},a)))),n.createElement("div",{className:h.loginOuterBox},l))),f?.hideFooter?n.createElement(n.Fragment,null):n.createElement(r.wi,{hideEdition:b,customLinks:f?.footerLinks}))},d=(0,t.keyframes)`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,i=l=>({loginMain:(0,t.css)({flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:"100%"}),container:(0,t.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:(0,t.css)({["&:before"]:{opacity:1},[".login-content-box"]:{opacity:1}}),submitButton:(0,t.css)({justifyContent:"center",width:"100%"}),loginLogo:(0,t.css)({width:"100%",maxWidth:60,marginBottom:l.spacing(2),[l.breakpoints.up("sm")]:{maxWidth:100}}),loginLogoWrapper:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",padding:l.spacing(3)}),titleWrapper:(0,t.css)({textAlign:"center"}),mainTitle:(0,t.css)({fontSize:22,[l.breakpoints.up("sm")]:{fontSize:32}}),subTitle:(0,t.css)({fontSize:l.typography.size.md,color:l.colors.text.secondary}),loginContent:(0,t.css)({maxWidth:478,width:"calc(100% - 2rem)",display:"flex",alignItems:"stretch",flexDirection:"column",position:"relative",justifyContent:"flex-start",zIndex:1,minHeight:320,borderRadius:l.shape.radius.default,padding:l.spacing(2,0),opacity:0,transition:"opacity 0.5s ease-in-out",[l.breakpoints.up("sm")]:{minHeight:l.spacing(40),justifyContent:"center"}}),loginOuterBox:(0,t.css)({display:"flex",overflowY:"hidden",alignItems:"center",justifyContent:"center"}),loginInnerBox:(0,t.css)({padding:l.spacing(0,2,2,2),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,maxWidth:415,width:"100%",transform:"translate(0px, 0px)",transition:"0.25s ease"}),enterAnimation:(0,t.css)({animation:`${d} ease-out 0.2s`})})},60188:(Y,A,e)=>{"use strict";e.d(A,{Q:()=>g});var t=e(2543),n=e.n(t),o=e(96540),s=e(10354),r=e(88575);class g extends o.PureComponent{constructor(){super(...arguments),this.state={text:"",inputCorrected:!1},this.inputRef=o.createRef(),this.updateValue=()=>{const d=this.inputRef.current?.value;let i=!1,l="";const f=this.props.min,c=this.props.max;let h=d!==""?Number(d):void 0;h&&!Number.isNaN(h)&&(f!=null&&h<f?(l=f.toString(),i=!0):c!=null&&h>c?(l=c.toString(),i=!0):l=d??"",this.setState({text:l,inputCorrected:i})),i&&this.updateValueDebounced(),!Number.isNaN(h)&&h!==this.props.value&&this.props.onChange(h)},this.updateValueDebounced=(0,t.debounce)(this.updateValue,500),this.onChange=d=>{this.setState({text:d.currentTarget.value}),this.updateValueDebounced()},this.onKeyPress=d=>{d.key==="Enter"&&this.updateValue()}}componentDidMount(){this.setState({text:isNaN(this.props.value)?"":`${this.props.value}`})}componentDidUpdate(d){if(this.props.value!==d.value){const i=isNaN(this.props.value)?"":`${this.props.value}`;i!==this.state.text&&this.setState({text:i})}}renderInput(){return o.createElement(s.p,{type:"number",ref:this.inputRef,min:this.props.min,max:this.props.max,step:this.props.step,autoFocus:this.props.autoFocus,value:this.state.text,onChange:this.onChange,onBlur:this.updateValue,onKeyPress:this.onKeyPress,placeholder:this.props.placeholder,disabled:this.props.fieldDisabled,width:this.props.width,suffix:this.props.suffix})}render(){const{inputCorrected:d}=this.state;if(d){let i="",{min:l,max:f}=this.props;return f==null?l!=null&&(i=`< ${l}`):l!=null?i=`${l} < > ${f}`:i=`> ${f}`,o.createElement(r.D,{invalid:d,error:`Out of range ${i}`,validationMessageHorizontalOverflow:!0,style:{direction:"rtl"}},this.renderInput())}return this.renderInput()}}},77268:(Y,A,e)=>{"use strict";e.d(A,{a:()=>u});var t=e(32196),n=e(96540),o=e(40845),s=e(83598),r=e(29158),g=e(83876);const u=({value:i,settings:l,onChange:f,details:c})=>{const h=(0,o.$j)(),p=(0,o.of)(d);return n.createElement(s.sk,{color:i??"",onChange:f,enableNamedColors:l?.enableNamedColors!==!1},({ref:m,showColorPicker:a,hideColorPicker:v})=>n.createElement("div",{className:p.spot},n.createElement("div",{className:p.colorPicker},n.createElement(g.q,{ref:m,onClick:a,onMouseLeave:v,color:i?h.visualization.getColorByName(i):h.components.input.borderColor})),c&&n.createElement(n.Fragment,null,i?n.createElement("span",{className:p.colorText,onClick:a},i):n.createElement("span",{className:p.placeholderText,onClick:a},l?.placeholder??"Select color"),l?.isClearable&&i&&n.createElement(r.K,{name:"times",onClick:()=>f(void 0),tooltip:"Clear settings"}))))},d=i=>({spot:(0,t.css)({cursor:"pointer",color:i.colors.text.primary,background:i.components.input.background,padding:"3px",height:i.v1.spacing.formInputHeight,border:`1px solid ${i.components.input.borderColor}`,display:"flex",flexDirection:"row",alignItems:"center",alignContent:"flex-end","&:hover":{border:`1px solid ${i.components.input.borderHover}`}}),colorPicker:(0,t.css)({padding:`0 ${i.spacing(1)}`}),colorText:(0,t.css)({flexGrow:2}),placeholderText:(0,t.css)({flexGrow:2,color:i.colors.text.secondary})})},72626:(Y,A,e)=>{"use strict";e.d(A,{w:()=>o});var t=e(96540),n=e(60188);const o=({value:s,onChange:r,item:g})=>{const{settings:u}=g,d=(0,t.useCallback)(i=>{r(u?.integer&&i!==void 0?Math.floor(i):i)},[r,u?.integer]);return t.createElement(n.Q,{value:s,min:u?.min,max:u?.max,step:u?.step,placeholder:u?.placeholder,onChange:d})}},33919:(Y,A,e)=>{"use strict";e.d(A,{H:()=>Oe,u:()=>Ke});var t=e(96540),n=e(69550),o=e(27310),s=e(11261),r=e(50082),g=e(15292),u=e(94354),d=e(20333),i=e(76218),l=e(32196),f=e(2543),c=e(47737),h=e(60578),p=e(24284),m=e(10354),a=e(83598),v=e(29158),E=e(55852),D=e(60029),b=e(3911);const P=[{value:r.O.Absolute,label:"Absolute",description:"Pick thresholds based on the absolute values"},{value:r.O.Percentage,label:"Percentage",description:"Pick threshold based on the percent between min/max"}];class y extends t.PureComponent{constructor(J){super(J),this.onAddThreshold=()=>{const{steps:ue}=this.state;let be=0;ue.length>1&&(be=ue[ue.length-1].value+10);let Le=p.Tj.filter(We=>!ue.some($e=>$e.color===We))[1];Le||(Le="#CCCCCC");const _e={value:be,color:Le,key:T++},Ve=[...ue,_e];(0,c.RU)(Ve),this.setState({steps:Ve},()=>{this.latestThresholdInputRef.current&&this.latestThresholdInputRef.current.focus(),this.onChange()})},this.onRemoveThreshold=ue=>{const{steps:be}=this.state;be.length&&ue.key!==be[0].key&&this.setState({steps:be.filter(Le=>Le.key!==ue.key)},this.onChange)},this.onChangeThresholdValue=(ue,be)=>{const Le=ue.target.value.replace(/,/g,"."),_e=parseFloat(Le),Ve=isNaN(_e)?"":_e,We=this.state.steps.map($e=>($e.key===be.key&&($e={...$e,value:Ve}),$e));We.length&&(We[0].value=-1/0),(0,c.RU)(We),this.setState({steps:We})},this.onChangeThresholdColor=(ue,be)=>{const{steps:Le}=this.state,_e=Le.map(Ve=>(Ve.key===ue.key&&(Ve={...Ve,color:be}),Ve));this.setState({steps:_e},this.onChange)},this.onBlur=()=>{const ue=[...this.state.steps];(0,c.RU)(ue),this.setState({steps:ue},this.onChange)},this.onChange=()=>{this.props.onChange(I(this.props.thresholds,this.state.steps))},this.onModeChanged=ue=>{this.props.onChange({...this.props.thresholds,mode:ue})};const oe=M(J.thresholds.steps);oe[0].value=-1/0,this.state={steps:oe},this.latestThresholdInputRef=t.createRef()}renderInput(J,oe,ue){const be=this.props.thresholds.mode===r.O.Percentage,Le=`Threshold ${ue+1}`;return isFinite(J.value)?t.createElement(m.p,{type:"number",step:"0.0001",key:be.toString(),onChange:_e=>this.onChangeThresholdValue(_e,J),value:J.value,"aria-label":Le,ref:ue===0?this.latestThresholdInputRef:null,onBlur:this.onBlur,prefix:t.createElement("div",{className:oe.inputPrefix},t.createElement("div",{className:oe.colorPicker},t.createElement(a.sk,{color:J.color,onChange:_e=>this.onChangeThresholdColor(J,_e),enableNamedColors:!0})),be&&t.createElement("div",{className:oe.percentIcon},"%")),suffix:t.createElement(v.K,{className:oe.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveThreshold(J),tooltip:`Remove ${Le}`})}):t.createElement(m.p,{type:"text",value:"Base","aria-label":Le,disabled:!0,prefix:t.createElement("div",{className:oe.colorPicker},t.createElement(a.sk,{color:J.color,onChange:_e=>this.onChangeThresholdColor(J,_e),enableNamedColors:!0}))})}render(){const{thresholds:J}=this.props,{steps:oe}=this.state;return t.createElement(h.D.Consumer,null,ue=>{const be=x(ue);return t.createElement("div",{className:be.wrapper},t.createElement(E.$n,{size:"sm",icon:"plus",onClick:()=>this.onAddThreshold(),variant:"secondary",className:be.addButton,fullWidth:!0},"Add threshold"),t.createElement("div",{className:be.thresholds},oe.slice(0).reverse().map((Le,_e)=>t.createElement("div",{className:be.item,key:`${Le.key}`},this.renderInput(Le,be,_e)))),t.createElement("div",null,t.createElement(D.J,{description:"Percentage means thresholds relative to min & max"},"Thresholds mode"),t.createElement(u.z,{options:P,onChange:this.onModeChanged,value:J.mode})))})}}let T=100;function M(Ee){return(!Ee||Ee.length===0)&&(Ee=[{value:-1/0,color:"green"}]),Ee.filter((J,oe)=>(0,f.isNumber)(J.value)||oe===0).map(J=>({color:J.color,value:J.value===null?-1/0:J.value,key:T++}))}function I(Ee,J){return{mode:Ee.mode??r.O.Absolute,steps:J.map(ue=>{const{key:be,...Le}=ue;return Le})}}const x=(0,b.N)(Ee=>({wrapper:(0,l.css)`
      display: flex;
      flex-direction: column;
    `,thresholds:(0,l.css)`
      display: flex;
      flex-direction: column;
      margin-bottom: ${Ee.spacing(2)};
    `,item:(0,l.css)`
      margin-bottom: ${Ee.spacing(1)};

      &:last-child {
        margin-bottom: 0;
      }
    `,colorPicker:(0,l.css)`
      padding: 0 ${Ee.spacing(1)};
    `,addButton:(0,l.css)`
      margin-bottom: ${Ee.spacing(1)};
    `,percentIcon:(0,l.css)`
      font-size: ${Ee.typography.bodySmall.fontSize};
      color: ${Ee.colors.text.secondary};
    `,inputPrefix:(0,l.css)`
      display: flex;
      align-items: center;
    `,trashIcon:(0,l.css)`
      color: ${Ee.colors.text.secondary};
      cursor: pointer;
      margin-right: 0;

      &:hover {
        color: ${Ee.colors.text};
      }
    `}));class S extends t.PureComponent{constructor(J){super(J)}render(){const{onChange:J}=this.props;let oe=this.props.value;return oe||(oe={mode:r.O.Percentage,steps:[]}),t.createElement(y,{thresholds:oe,onChange:J})}}var O=e(25019),C=e(40845),L=e(66864),U=e(14578),R=e(37390),B=e(80744),H=e(25148),W=e(75494),N=e(51986),V=e(88323);function G({mapping:Ee,index:J,onChange:oe,onRemove:ue,onDuplicate:be,showIconPicker:Le}){const{key:_e,result:Ve,id:We}=Ee,$e=(0,C.of)(_),it=(0,t.useRef)(null),at=(0,t.useCallback)(ct=>{const Ct={...Ee,result:{...Ee.result}};ct(Ct),oe(J,Ct)},[Ee,J,oe]);(0,t.useEffect)(()=>{it.current&&Ee.isNew&&(it.current.focus(),at(ct=>{ct.isNew=!1}))},[Ee,it,at]);const ht=ct=>{at(Ct=>{Ct.result.color=ct})},ft=()=>{at(ct=>{ct.result.color=void 0})},gt=ct=>{at(Ct=>{Ct.result.icon=ct})},Dt=()=>{at(ct=>{ct.result.icon=void 0})},It=ct=>{at(Ct=>{Ct.key=ct.currentTarget.value})},jt=ct=>{at(Ct=>{Ct.result.text=ct.currentTarget.value})},Vt=ct=>{at(Ct=>{Ct.from=parseFloat(ct.currentTarget.value)})},_t=ct=>{at(Ct=>{Ct.to=parseFloat(ct.currentTarget.value)})},rt=ct=>{at(Ct=>{Ct.pattern=ct.currentTarget.value})},St=ct=>{at(Ct=>{Ct.specialMatch=ct.value})},pn=[{label:"Null",value:O.W.Null,description:"Matches null and undefined values"},{label:"NaN",value:O.W.NaN,description:"Matches against Number.NaN (not a number)"},{label:"Null + NaN",value:O.W.NullAndNaN,description:"Matches null, undefined and NaN"},{label:"True",value:O.W.True,description:"Boolean true values"},{label:"False",value:O.W.False,description:"Boolean false values"},{label:"Empty",value:O.W.Empty,description:"Empty string"}];return t.createElement(W.sx,{key:We,draggableId:We,index:J},ct=>t.createElement("tr",{className:$e.dragRow,ref:ct.innerRef,...ct.draggableProps},t.createElement("td",null,t.createElement("div",{className:$e.dragHandle,...ct.dragHandleProps},t.createElement(U.I,{name:"draggabledots",size:"lg"}))),t.createElement("td",{className:$e.typeColumn},Ee.type),t.createElement("td",null,Ee.type===O.d.ValueToText&&t.createElement(m.p,{ref:it,type:"text",value:_e??"",onChange:It,placeholder:"Exact value to match"}),Ee.type===O.d.RangeToText&&t.createElement("div",{className:$e.rangeInputWrapper},t.createElement(m.p,{type:"number",value:Ee.from??"",placeholder:"Range start",onChange:Vt,prefix:"From"}),t.createElement(m.p,{type:"number",value:Ee.to??"",placeholder:"Range end",onChange:_t,prefix:"To"})),Ee.type===O.d.RegexToText&&t.createElement(m.p,{type:"text",value:Ee.pattern??"",placeholder:"Regular expression",onChange:rt}),Ee.type===O.d.SpecialValue&&t.createElement(V.l6,{value:pn.find(Ct=>Ct.value===Ee.specialMatch),options:pn,onChange:St})),t.createElement("td",null,t.createElement(m.p,{type:"text",value:Ve.text??"",onChange:jt,placeholder:"Optional display text"})),t.createElement("td",{className:$e.textAlignCenter},Ve.color&&t.createElement(L.Gy,{spacing:"sm",justify:"center"},t.createElement(a.sk,{color:Ve.color,onChange:ht,enableNamedColors:!0}),t.createElement(v.K,{name:"times",onClick:ft,tooltip:"Remove color",tooltipPlacement:"top"})),!Ve.color&&t.createElement(a.sk,{color:"gray",onChange:ht,enableNamedColors:!0},Ct=>t.createElement(E.$n,{variant:"primary",fill:"text",onClick:Ct.showColorPicker,ref:Ct.ref,size:"sm"},"Set color"))),Le&&t.createElement("td",{className:$e.textAlignCenter},t.createElement(L.Gy,{spacing:"sm",justify:"center"},t.createElement(H.n,{onChange:gt,onClear:Dt,value:Ve.icon,size:B.Iy.SMALL,folderName:B.Iu.Icon,mediaType:B.zu.Icon,color:Ve.color}),Ve.icon&&t.createElement(v.K,{name:"times",onClick:Dt,tooltip:"Remove icon",tooltipPlacement:"top"}))),t.createElement("td",{className:$e.textAlignCenter},t.createElement(L.Gy,{spacing:"sm"},t.createElement(v.K,{name:"copy",onClick:()=>be(J),"data-testid":"duplicate-value-mapping","aria-label":"Duplicate value mapping",tooltip:"Duplicate"}),t.createElement(v.K,{name:"trash-alt",onClick:()=>ue(J),"data-testid":"remove-value-mapping","aria-label":"Delete value mapping",tooltip:"Delete"})))))}const _=Ee=>({dragRow:(0,l.css)({position:"relative"}),dragHandle:(0,l.css)({cursor:"grab","&:focus-visible&:after":{bottom:0,content:'""',left:0,position:"absolute",right:0,top:0,outline:`2px solid ${Ee.colors.primary.main}`,outlineOffset:"-2px"}}),rangeInputWrapper:(0,l.css)({display:"flex","> div:first-child":{marginRight:Ee.spacing(2)}}),regexInputWrapper:(0,l.css)({display:"flex","> div:first-child":{marginRight:Ee.spacing(2)}}),typeColumn:(0,l.css)({textTransform:"capitalize",textAlign:"center",width:"1%"}),textAlignCenter:(0,l.css)({textAlign:"center"})});function K({value:Ee,onChange:J,onClose:oe,showIconPicker:ue}){const be=(0,C.of)(j),[Le,_e]=(0,t.useState)([]);(0,t.useEffect)(()=>{_e(Z(Ee))},[Ee]);const Ve=gt=>{if(!Ee||!gt.destination)return;const Dt=[...Le],It=Dt[gt.source.index];Dt.splice(gt.source.index,1),Dt.splice(gt.destination.index,0,It),_e(Dt)},We=(gt,Dt)=>{const It=[...Le];It.splice(gt,1,Dt),_e(It)},$e=gt=>{const Dt=[...Le];Dt.splice(gt,1),_e(Dt)},it=[{label:"Value",value:O.d.ValueToText,description:"Match a specific text value"},{label:"Range",value:O.d.RangeToText,description:"Match a numerical range of values"},{label:"Regex",value:O.d.RegexToText,description:"Match a regular expression with replacement"},{label:"Special",value:O.d.SpecialValue,description:"Match on null, NaN, boolean and empty values"}],at=gt=>{_e([...Le,Q({type:gt.value,result:{},isNew:!0})])},ht=gt=>{const Dt=ee(Le[gt]),It=[...Le];It.splice(gt,0,{...Dt});for(let jt=gt;jt<Le.length;jt++)It[jt].result.index=jt;_e(It)},ft=()=>{J(ae(Le)),oe()};return(0,t.useEffect)(()=>{Ee?.length||at({value:O.d.ValueToText})},[]),t.createElement(t.Fragment,null,t.createElement("div",{className:be.tableWrap},t.createElement("table",{className:be.editTable},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{style:{width:"1%"}}),t.createElement("th",{style:{width:"40%",textAlign:"left"},colSpan:2},"Condition"),t.createElement("th",{style:{textAlign:"left"}},"Display text"),t.createElement("th",{style:{width:"10%"}},"Color"),ue&&t.createElement("th",{style:{width:"10%"}},"Icon"),t.createElement("th",{style:{width:"1%"}}))),t.createElement(W.JY,{onDragEnd:Ve},t.createElement(W.gL,{droppableId:"sortable-field-mappings",direction:"vertical"},gt=>t.createElement("tbody",{ref:gt.innerRef,...gt.droppableProps},Le.map((Dt,It)=>t.createElement(G,{key:Dt.id,mapping:Dt,index:It,onChange:We,onRemove:$e,onDuplicate:ht,showIconPicker:ue})),gt.placeholder))))),t.createElement(R.a.ButtonRow,{leftItems:t.createElement(N.i,{label:"Add a new mapping",variant:"secondary",size:"md",icon:"plus",menuPlacement:"auto",minWidth:40,options:it,onChange:at})},t.createElement(E.$n,{variant:"secondary",fill:"outline",onClick:oe},"Cancel"),t.createElement(E.$n,{variant:"primary",onClick:ft},"Update")))}const j=Ee=>({tableWrap:(0,l.css)`
    max-height: calc(80vh - 170px);
    min-height: 40px;
    overflow: auto;
  `,editTable:(0,l.css)({width:"100%",marginBottom:Ee.spacing(2),"thead th":{textAlign:"center"},"tbody tr:hover":{background:Ee.colors.action.hover}," th, td":{padding:Ee.spacing(1)}})});function k(){return(0,f.uniqueId)("mapping-")}function Q(Ee){return{type:O.d.ValueToText,result:{},id:k(),...Ee}}function ee(Ee){return{...Q(Ee),id:k()}}function ae(Ee){const J=[],oe={type:O.d.ValueToText,options:{}};return Ee.forEach((ue,be)=>{const Le={...ue.result,index:be};switch((!Le.text||Le.text.trim().length===0)&&(Le.text=void 0),ue.type){case O.d.ValueToText:ue.key!=null&&(oe.options[ue.key]=Le);break;case O.d.RangeToText:ue.from!=null&&ue.to!=null&&J.push({type:ue.type,options:{from:ue.from,to:ue.to,result:Le}});break;case O.d.RegexToText:ue.pattern!=null&&J.push({type:ue.type,options:{pattern:ue.pattern,result:Le}});break;case O.d.SpecialValue:J.push({type:ue.type,options:{match:ue.specialMatch,result:Le}})}}),Object.keys(oe.options).length>0&&J.unshift(oe),J}function Z(Ee){const J=[];if(Ee)for(const oe of Ee)switch(oe.type){case O.d.ValueToText:for(const ue of Object.keys(oe.options))J.push(Q({type:oe.type,result:oe.options[ue],key:ue}));break;case O.d.RangeToText:J.push(Q({type:oe.type,result:oe.options.result,from:oe.options.from??0,to:oe.options.to??0}));break;case O.d.RegexToText:J.push(Q({type:oe.type,result:oe.options.result,pattern:oe.options.pattern}));break;case O.d.SpecialValue:J.push(Q({type:oe.type,result:oe.options.result,specialMatch:oe.options.match??O.W.Null}))}return J.sort((oe,ue)=>(oe.result.index??0)>(ue.result.index??0)?1:-1),J}const ne=t.memo(Ee=>{const{value:J,onChange:oe,item:ue}=Ee,be=(0,C.of)(q),Le=ue.settings?.icon,[_e,Ve]=(0,t.useState)(!1),We=(0,t.useCallback)(()=>{Ve(!1)},[Ve]),$e=(0,t.useMemo)(()=>Z(J),[J]),it=(0,t.useCallback)((ht,ft)=>{$e[ft].result.color=ht,oe(ae($e))},[$e,oe]),at=(0,t.useCallback)((ht,ft)=>{$e[ft].result.icon=ht,oe(ae($e))},[$e,oe]);return t.createElement(L.gW,null,t.createElement("table",{className:be.compactTable},t.createElement("tbody",null,$e.map((ht,ft)=>t.createElement("tr",{key:ft.toString()},t.createElement("td",null,ht.type===O.d.ValueToText&&ht.key,ht.type===O.d.RangeToText&&t.createElement("span",null,"[",ht.from," - ",ht.to,"]"),ht.type===O.d.RegexToText&&ht.pattern,ht.type===O.d.SpecialValue&&ht.specialMatch),t.createElement("td",null,t.createElement(U.I,{name:"arrow-right"})),t.createElement("td",null,ht.result.text),ht.result.color&&t.createElement("td",null,t.createElement(a.sk,{color:ht.result.color,onChange:gt=>it(gt,ft),enableNamedColors:!0})),Le&&ht.result.icon&&t.createElement("td",{"data-testid":"iconPicker"},t.createElement(H.n,{onChange:gt=>at(gt,ft),value:ht.result.icon,size:B.Iy.SMALL,folderName:B.Iu.Icon,mediaType:B.zu.Icon,color:ht.result.color})))))),t.createElement(E.$n,{variant:"secondary",size:"sm",fullWidth:!0,onClick:()=>Ve(!0)},$e.length>0&&t.createElement("span",null,"Edit value mappings"),$e.length===0&&t.createElement("span",null,"Add value mappings")),t.createElement(R.a,{isOpen:_e,title:"Value mappings",onDismiss:We,className:be.modal,closeOnBackdropClick:!1},t.createElement(K,{value:J,onChange:oe,onClose:We,showIconPicker:Le})))});ne.displayName="ValueMappingsEditor";const q=Ee=>({modal:(0,l.css)({width:"980px"}),compactTable:(0,l.css)({width:"100%","tbody td":{padding:Ee.spacing(.5)}})});var te=e(59429);const re=({value:Ee,onChange:J,item:oe})=>{const{placeholder:ue,isClearable:be}=oe?.settings??{},Le=(0,t.useCallback)(_e=>{J(_e?.value?.uid)},[J]);return t.createElement(te.b,{isClearable:be,defaultOptions:!0,onChange:Le,placeholder:ue,value:Ee})};var de=e(77268),ie=e(8066),ge=e(24293),ve=e(88575);const ye=({value:Ee,onChange:J,item:oe,id:ue})=>{const be=(0,C.$j)(),Le=(0,C.of)(le),_e=(0,ie.Hs)(Ee?.mode),We=(oe.settings?.byValueSupport?ie.uf.list():ie.uf.list().filter(ft=>!ft.isByValue)).filter(ft=>!ft.excludeFromPicker).map(ft=>{let gt=ft.isByValue?" (by value)":"";return{value:ft.id,label:`${ft.name}${gt}`,description:ft.description,isContinuous:ft.isContinuous,isByValue:ft.isByValue,component(){return t.createElement(pe,{mode:ft,theme:be})}}}),$e=ft=>{J({...Ee,mode:ft.value})},it=ft=>{J({...Ee,mode:ht,fixedColor:ft})},at=ft=>{J({...Ee,mode:ht,seriesBy:ft})},ht=Ee?.mode??ge.Y.Thresholds;if(ht===ge.Y.Fixed||ht===ge.Y.Shades)return t.createElement("div",{className:Le.group},t.createElement(V.l6,{minMenuHeight:200,options:We,value:ht,onChange:$e,className:Le.select,inputId:ue}),t.createElement(de.a,{value:Ee?.fixedColor,onChange:it}));if(oe.settings?.bySeriesSupport&&_e.isByValue){const ft=[{label:"Last",value:"last"},{label:"Min",value:"min"},{label:"Max",value:"max"}];return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:be.spacing(2)}},t.createElement(V.l6,{minMenuHeight:200,options:We,value:ht,onChange:$e,inputId:ue})),t.createElement(ve.D,{label:"Color series by"},t.createElement(u.z,{value:Ee?.seriesBy??"last",options:ft,onChange:at})))}return t.createElement(V.l6,{minMenuHeight:200,options:We,value:ht,onChange:$e,inputId:ue})},pe=({mode:Ee,theme:J})=>{if(!Ee.getColors)return null;const oe=Ee.getColors(J).map(J.visualization.getColorByName),ue={height:"8px",width:"100%",margin:"2px 0",borderRadius:"3px",opacity:1};if(Ee.isContinuous)ue.background=`linear-gradient(90deg, ${oe.join(",")})`;else{let be="",Le="";for(let _e=0;_e<oe.length;_e++){const Ve=oe[_e];if(be==="")be=`linear-gradient(90deg, ${Ve} 0%`;else{const $e=_e/(oe.length-1)*100;be+=`, ${Le} ${$e}%, ${Ve} ${$e}%`}Le=Ve}ue.background=be}return t.createElement("div",{style:ue})},le=Ee=>({group:(0,l.css)({display:"flex"}),select:(0,l.css)({marginRight:Ee.spacing(1),flexGrow:1})});var Me=e(91890),De=e(64919);const Re=({value:Ee,onChange:J,context:oe})=>t.createElement(De.e,{links:Ee,onChange:J,data:oe.data,getSuggestions:()=>oe.getSuggestions?oe.getSuggestions(Me.uP.Values):[]});class me extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:J}=this.props,{settings:oe}=J;let ue=J.settings?.options||[];oe?.getOptions&&(ue=await oe.getOptions(this.props.context)),this.state.options!==ue&&this.setState({isLoading:!1,options:ue})}}componentDidMount(){this.updateOptions()}componentDidUpdate(J){const oe=J.item?.settings,ue=this.props.item?.settings;if(oe!==ue)this.updateOptions();else if(ue?.getOptions){const be=J.context?.data,Le=this.props.context?.data;be!==Le&&this.updateOptions()}}render(){const{options:J,isLoading:oe}=this.state,{value:ue,onChange:be,item:Le}=this.props,{settings:_e}=Le;return t.createElement(V.KF,{isLoading:oe,value:ue,defaultValue:ue,allowCustomValue:_e?.allowCustomValue,onChange:Ve=>{be(Ve.map(We=>We.value).flatMap(We=>We!==void 0?[We]:[]))},options:J})}}var he=e(72626);class Te extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:J}=this.props,{settings:oe}=J;let ue=J.settings?.options||[];oe?.getOptions&&(ue=await oe.getOptions(this.props.context)),this.state.options!==ue&&this.setState({isLoading:!1,options:ue})}}componentDidMount(){this.updateOptions()}componentDidUpdate(J){const oe=J.item?.settings,ue=this.props.item?.settings;if(oe!==ue)this.updateOptions();else if(ue?.getOptions){const be=J.context?.data,Le=this.props.context?.data;be!==Le&&this.updateOptions()}}render(){const{options:J,isLoading:oe}=this.state,{value:ue,onChange:be,item:Le}=this.props,{settings:_e}=Le;let Ve=J.find(We=>We.value===ue);return!Ve&&ue&&(Ve={label:`${ue}`,value:ue}),t.createElement(V.l6,{isLoading:oe,value:Ve,defaultValue:ue,allowCustomValue:_e?.allowCustomValue,isClearable:_e?.isClearable,onChange:We=>be(We?.value),options:J})}}var Be=e(57602),we=e(42734);const Ne=({value:Ee,onChange:J,item:oe,id:ue})=>t.createElement(we.S,{stats:Ee,onChange:J,allowMultiple:!!oe.settings?.allowMultiple,defaultStat:oe.settings?.defaultStat,inputId:ue});var Ze=e(29286),st=e(32264);class Qe extends t.PureComponent{constructor(){super(...arguments),this.state={showAdd:!1},this.onRemoveString=J=>{const{value:oe,onChange:ue}=this.props,be=[...oe];be.splice(J,1),ue(be)},this.onValueChange=(J,oe)=>{if("key"in J&&J.key!=="Enter")return;const{value:ue,onChange:be}=this.props,Le=J.currentTarget.value.trim();if(oe<0){Le&&(J.currentTarget.value="",be([...ue,Le])),this.setState({showAdd:!1});return}if(!Le)return this.onRemoveString(oe);const _e=[...ue];_e[oe]=Le,be(_e)}}render(){const{value:J,item:oe}=this.props,{showAdd:ue}=this.state,be=ke(st.$.theme2),Le=oe.settings?.placeholder||"Add text";return t.createElement("div",null,J.map((_e,Ve)=>t.createElement(m.p,{className:be.textInput,key:`${Ve}/${_e}`,defaultValue:_e||"",onBlur:We=>this.onValueChange(We,Ve),onKeyDown:We=>this.onValueChange(We,Ve),suffix:t.createElement(U.I,{className:be.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveString(Ve)})})),ue?t.createElement(m.p,{autoFocus:!0,className:be.textInput,placeholder:Le,defaultValue:"",onBlur:_e=>this.onValueChange(_e,-1),onKeyDown:_e=>this.onValueChange(_e,-1),suffix:t.createElement(U.I,{name:"plus-circle"})}):t.createElement(E.$n,{icon:"plus",size:"sm",variant:"secondary",onClick:()=>this.setState({showAdd:!0})},Le))}}const ke=(0,b.N)(Ee=>({textInput:(0,l.css)({marginBottom:"5px","&:hover":{border:`1px solid ${Ee.components.input.borderHover}`}}),trashIcon:(0,l.css)({color:Ee.colors.text.secondary,cursor:"pointer","&:hover":{color:Ee.colors.text.primary}})}));var je=e(2056);function He({value:Ee,onChange:J,item:oe}){const ue=(0,C.of)(Ge);return oe?.settings?.isClearable&&Ee!=null?t.createElement("div",{className:ue.wrapper},t.createElement("span",{className:ue.first},t.createElement(je.p,{value:Ee,onChange:J})),t.createElement(v.K,{name:"times",onClick:()=>J(void 0),tooltip:"Clear unit selection"})):t.createElement(je.p,{value:Ee,onChange:J})}const Ge=Ee=>({wrapper:(0,l.css)({width:"100%",display:"flex",flexDirection:"row",alignItems:"center"}),first:(0,l.css)({marginRight:Ee.spacing(1),flexGrow:2})}),Oe=()=>{const Ee={id:"number",name:"Number",description:"Allows numeric values input",editor:he.w},J={id:"slider",name:"Slider",description:"Allows numeric values input",editor:Be.G},oe={id:"text",name:"Text",description:"Allows string values input",editor:Ze.g},ue={id:"strings",name:"String array",description:"An array of strings",editor:Qe},be={id:"boolean",name:"Boolean",description:"Allows boolean values input",editor(Vt){const{id:_t,...rt}=Vt;return t.createElement(g.d,{...rt,onChange:St=>Vt.onChange(St.currentTarget.checked)})}},Le={id:"select",name:"Select",description:"Allows option selection",editor:Te},_e={id:"multi-select",name:"Multi select",description:"Allows for multiple option selection",editor:me},Ve={id:"radio",name:"Radio",description:"Allows option selection",editor(Vt){return t.createElement(u.z,{...Vt,options:Vt.item.settings?.options})}},We={id:"unit",name:"Unit",description:"Allows unit input",editor:He},$e={id:"color",name:"Color",description:"Allows color selection",editor(Vt){return t.createElement(de.a,{value:Vt.value,onChange:Vt.onChange,settings:Vt.item.settings,details:!0})}},it={id:"fieldColor",name:"Field Color",description:"Field color selection",editor:ye},at={id:"links",name:"Links",description:"Allows defining data links",editor:Re},ht={id:"stats-picker",name:"Stats Picker",editor:Ne,description:""},ft={id:"timezone",name:"Time zone",description:"Time zone selection",editor:d.U},gt={id:"field-name",name:"Field name",description:"Allows selecting a field name from a data frame",editor:i.O};return[oe,Ee,J,be,Ve,Le,We,at,ht,ue,ft,it,$e,_e,gt,{id:"dashboard-uid",name:"Dashboard",description:"Select dashboard",editor:re},{id:"mappings",name:"Mappings",description:"Allows defining value mappings",editor:ne},{id:"thresholds",name:"Thresholds",description:"Allows defining thresholds",editor:S}]},Ke=()=>{const Ee=["Standard options"],J={id:"displayName",path:"displayName",name:"Display name",description:"Change the field or series name",editor:n.D.get("text").editor,override:n.D.get("text").editor,process:o.AM,settings:{placeholder:"none",expandTemplateVars:!0},shouldApply:()=>!0,category:Ee},oe={id:"unit",path:"unit",name:"Unit",description:"",editor:n.D.get("unit").editor,override:n.D.get("unit").editor,process:o.OU,settings:{placeholder:"none"},shouldApply:()=>!0,category:Ee},ue={id:"fieldMinMax",path:"fieldMinMax",name:"Field min/max",description:"Calculate min max per field",editor:n.D.get("boolean").editor,override:n.D.get("boolean").editor,process:o.FM,shouldApply:ft=>ft.type===s.PU.number,showIf:ft=>ft.min===void 0||ft.max===void 0,category:Ee},be={id:"min",path:"min",name:"Min",description:"Leave empty to calculate based on all values",editor:n.D.get("number").editor,override:n.D.get("number").editor,process:o.m0,settings:{placeholder:"auto"},shouldApply:ft=>ft.type===s.PU.number,category:Ee},Le={id:"max",path:"max",name:"Max",description:"Leave empty to calculate based on all values",editor:n.D.get("number").editor,override:n.D.get("number").editor,process:o.m0,settings:{placeholder:"auto"},shouldApply:ft=>ft.type===s.PU.number,category:Ee},_e={id:"decimals",path:"decimals",name:"Decimals",editor:n.D.get("number").editor,override:n.D.get("number").editor,process:o.m0,settings:{placeholder:"auto",min:0,max:15,integer:!0},shouldApply:ft=>ft.type===s.PU.number,category:Ee},Ve={id:"noValue",path:"noValue",name:"No value",description:"What to show when there is no value",editor:n.D.get("text").editor,override:n.D.get("text").editor,process:o.OU,settings:{placeholder:"-"},shouldApply:()=>!0,category:Ee},We={id:"links",path:"links",name:"Data links",editor:n.D.get("links").editor,override:n.D.get("links").editor,process:o.Ch,settings:{placeholder:"-"},shouldApply:()=>!0,category:["Data links"],getItemsCount:ft=>ft?ft.length:0},$e={id:"color",path:"color",name:"Color scheme",editor:n.D.get("fieldColor").editor,override:n.D.get("fieldColor").editor,process:o.hS,shouldApply:()=>!0,settings:{byValueSupport:!0,preferThresholdsMode:!0},category:Ee},it={id:"mappings",path:"mappings",name:"Value mappings",description:"Modify the display text based on input value",editor:n.D.get("mappings").editor,override:n.D.get("mappings").editor,process:o.xT,settings:{},defaultValue:[],shouldApply:ft=>ft.type!==s.PU.time,category:["Value mappings"],getItemsCount:ft=>ft?ft.length:0},at={id:"thresholds",path:"thresholds",name:"Thresholds",editor:n.D.get("thresholds").editor,override:n.D.get("thresholds").editor,process:o.N7,settings:{},defaultValue:{mode:r.O.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]},shouldApply:()=>!0,category:["Thresholds"],getItemsCount:ft=>ft?ft.steps.length:0},ht={id:"filterable",path:"filterable",name:"Ad-hoc filterable",hideFromDefaults:!0,editor:n.D.get("boolean").editor,override:n.D.get("boolean").editor,process:o.FM,shouldApply:()=>!0,settings:{},category:Ee};return[oe,be,Le,ue,_e,J,$e,Ve,We,it,at,ht]}},57602:(Y,A,e)=>{"use strict";e.d(A,{G:()=>d});var t=e(32196),n=e(94659),o=e(9821),s=e(96540),r=e(40845),g=e(24849),u=e(60188);const d=({value:f,onChange:c,item:h})=>{const p=(0,s.useRef)(null),{settings:m}=h,a=m?.min||0,v=m?.max||100,E=m?.step,D=m?.marks||{[a]:a,[v]:v},b=m?.included,P=m?.ariaLabelForHandle,y=75,T=!0,M=(0,r.$j)(),[I,x]=(0,s.useState)(f??a),[S,O]=(0,s.useState)(y);(0,s.useEffect)(()=>{f!=null&&f!==I&&x(f)},[f,I]),(0,s.useEffect)(()=>{const H=getComputedStyle(p.current),W=H.getPropertyValue("font-weight")||"normal",N=H.getPropertyValue("font-size")||"16px",V=H.getPropertyValue("font-family")||"Arial",G="0",_=4,K=8,j=Math.max((v+(E||0)).toString().length,(v-(E||0)).toString().length)+_,k=G.repeat(j),Q=i(k,`${W} ${N} ${V}`);Q&&O(Q+K*2)},[v,E]);const C=(0,s.useCallback)(H=>{const W=typeof H=="number"?H:H[0];x(W),c&&c(W)},[x,c]),L=(0,s.useCallback)(H=>{let W=H;(Number.isNaN(W)||!W)&&(W=0),x(W),c&&c(W)},[c]),U=(0,g.$)(M,T,!!D),R=l(M,S),B=T?[]:[U.sliderInputVertical];return s.createElement("div",{className:(0,t.cx)(U.container,U.slider)},s.createElement(n.Global,{styles:U.slider}),s.createElement("div",{className:(0,t.cx)(U.sliderInput,...B)},s.createElement(o.A,{min:a,max:v,step:E,defaultValue:f,value:I,onChange:C,vertical:!T,reverse:!1,ariaLabelForHandle:P,marks:D,included:b}),s.createElement("span",{className:R.numberInputWrapper,ref:p},s.createElement(u.Q,{value:I,onChange:L,max:v,min:a,step:E}))))};function i(f,c){const p=document.createElement("canvas").getContext("2d");return p?(p.font=c,p.measureText(f).width):null}const l=(f,c)=>({numberInputWrapper:(0,t.css)({marginLeft:f.spacing(3),maxHeight:"32px",maxWidth:c,minWidth:c,overflow:"visible",width:"100%"})})},29286:(Y,A,e)=>{"use strict";e.d(A,{g:()=>s});var t=e(96540),n=e(21744),o=e(10354);const s=({value:r,onChange:g,item:u,suffix:d})=>{const i=u.settings?.useTextarea?n.f:o.p,l=(0,t.useCallback)(f=>{let c=r??"";"key"in f?f.key==="Enter"&&!u.settings?.useTextarea&&(c=f.currentTarget.value.trim()):c=f.currentTarget.value.trim(),c!==r&&g(c===""?void 0:c)},[r,u.settings?.useTextarea,g]);return t.createElement(i,{placeholder:u.settings?.placeholder,defaultValue:r||"",rows:u.settings?.useTextarea&&u.settings.rows||5,onBlur:l,onKeyDown:l,suffix:d})}},36830:(Y,A,e)=>{"use strict";e.d(A,{Y:()=>L});var t=e(32196),n=e(96540),o=e(64388),s=e(40845),r=e(40276),g=e(76888),u=e(39419);const d=({isLoading:R,children:B,className:H})=>{let W=H?n.createElement("div",{className:H},B):B;return n.createElement(n.Fragment,null,R?n.createElement(u.A,null):W)};var i=e(13773),l=e(17172),f=e(94753),c=e(29158),h=e(88575),p=e(10354);const m=({value:R,onEdit:B})=>{const H=(0,s.of)(a),[W,N]=(0,n.useState)(R),[V,G]=(0,n.useState)(!1),[_,K]=(0,n.useState)(!1),[j,k]=(0,n.useState)();(0,n.useEffect)(()=>{N(R)},[R]);const Q=(0,n.useCallback)(async ee=>{const ae=ee.currentTarget.value;if(!ae)k("Please enter a title");else if(ae===R)k(void 0),G(!1);else{K(!0);try{await B(ae),k(void 0),G(!1)}catch(Z){(0,l.NF)(Z)?k(Z.data.message):Z instanceof Error&&k(Z.message)}K(!1)}},[B,R]);return V?n.createElement("div",{className:H.inputContainer},n.createElement(h.D,{className:H.field,loading:_,invalid:!!j,error:j},n.createElement(p.p,{className:H.input,defaultValue:W,onKeyDown:ee=>{ee.key==="Enter"&&Q(ee)},autoFocus:!0,onBlur:Q,onChange:ee=>N(ee.currentTarget.value),onFocus:()=>G(!0)}))):n.createElement("div",{className:H.textContainer},n.createElement("div",{className:H.textWrapper},n.createElement(f.E,{element:"h1",truncate:!0},W),n.createElement(c.K,{name:"pen",size:"lg",tooltip:"Edit title",onClick:()=>G(!0)})))};m.displayName="EditableTitle";const a=R=>({textContainer:(0,t.css)({minWidth:0}),field:(0,t.css)({flex:1,left:`calc(-${R.spacing(1)} - 1px)`,position:"relative",marginBottom:0}),input:(0,t.css)({input:{...R.typography.h1}}),inputContainer:(0,t.css)({display:"flex",flex:1}),textWrapper:(0,t.css)({alignItems:"center",display:"flex",gap:R.spacing(1)})});function v({navItem:R,renderTitle:B,actions:H,info:W,subTitle:N,onEditTitle:V}){const G=(0,s.of)(E),_=N??R.subTitle,K=V?n.createElement(m,{value:R.text,onEdit:V}):n.createElement("div",{className:G.title},R.img&&n.createElement("img",{className:G.img,src:R.img,alt:`logo for ${R.text}`}),B?B(R.text):n.createElement("h1",null,R.text));return n.createElement("div",{className:G.pageHeader},n.createElement("div",{className:G.topRow},n.createElement("div",{className:G.titleInfoContainer},K,W&&n.createElement(i.Q,{info:W})),n.createElement("div",{className:G.actions},H)),_&&n.createElement("div",{className:G.subTitle},_))}const E=R=>({topRow:(0,t.css)({alignItems:"flex-start",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:R.spacing(1,3)}),title:(0,t.css)({display:"flex",flexDirection:"row",maxWidth:"100%",h1:{display:"flex",marginBottom:0}}),actions:(0,t.css)({display:"flex",flexDirection:"row",gap:R.spacing(1)}),titleInfoContainer:(0,t.css)({display:"flex",label:"title-info-container",flex:1,flexWrap:"wrap",gap:R.spacing(1,4),justifyContent:"space-between",maxWidth:"100%",minWidth:"200px"}),pageHeader:(0,t.css)({label:"page-header",display:"flex",flexDirection:"column",gap:R.spacing(1),marginBottom:R.spacing(2)}),subTitle:(0,t.css)({position:"relative",color:R.colors.text.secondary}),img:(0,t.css)({width:"32px",height:"32px",marginRight:R.spacing(2)})});var D=e(63021),b=e(8984),P=e(40675);function y({navItem:R}){const B=(0,s.of)(T);return n.createElement("div",{className:B.tabsWrapper},n.createElement(D.U,null,R.children.map((H,W)=>{const N=H.icon?(0,b.toIconName)(H.icon):void 0;return!H.hideFromTabs&&n.createElement(P.o,{label:H.text,active:H.active,key:`${H.url}-${W}`,icon:N,counter:H.tabCounter,href:H.url,suffix:H.tabSuffix,onChangeTab:H.onClick})})))}const T=R=>({tabsWrapper:(0,t.css)({paddingBottom:R.spacing(3)})});var M=e(77109),I=e(28215),x=e(80348),S=e(19361),O=e(3984);function C(R,B){const H=(0,x.useSelector)(W=>W.navIndex)?.[I.Id];(0,n.useEffect)(()=>{const W=(R?.node!==R?.main?R?.node:R?.main)??{text:"Grafana"},N=(0,O.Z)(W,B,H).map(V=>V.text).reverse();N[N.length-1]=S.M.AppTitle,document.title=N.join(" - ")},[H,R,B])}const L=({navId:R,navModel:B,pageNav:H,renderTitle:W,onEditTitle:N,actions:V,subTitle:G,children:_,className:K,info:j,layout:k=o.k.Standard,scrollTop:Q,scrollRef:ee,...ae})=>{const Z=(0,s.of)(U),ne=(0,M.i)(R,B),{chrome:q}=(0,g.Il)();C(ne,H);const te=H??ne?.node;return(0,n.useLayoutEffect)(()=>{ne&&q.update({sectionNav:ne,pageNav:H,layout:k})},[ne,H,q,k]),n.createElement("div",{className:(0,t.cx)(Z.wrapper,K),...ae},k===o.k.Standard&&n.createElement(r.E,{autoHeightMin:"100%",scrollTop:Q,scrollRefCallback:ee},n.createElement("div",{className:Z.pageInner},te&&n.createElement(v,{actions:V,onEditTitle:N,navItem:te,renderTitle:W,info:j,subTitle:G}),H&&H.children&&n.createElement(y,{navItem:H}),n.createElement("div",{className:Z.pageContent},_))),k===o.k.Canvas&&n.createElement(r.E,{autoHeightMin:"100%",scrollTop:Q,scrollRefCallback:ee},n.createElement("div",{className:Z.canvasContent},_)),k===o.k.Custom&&_)};L.Contents=d;const U=R=>({wrapper:(0,t.css)({label:"page-wrapper",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0}),pageContent:(0,t.css)({label:"page-content",flexGrow:1}),pageInner:(0,t.css)({label:"page-inner",padding:R.spacing(2),borderBottom:"none",background:R.colors.background.primary,display:"flex",flexDirection:"column",flexGrow:1,margin:R.spacing(0,0,0,0),[R.breakpoints.up("md")]:{padding:R.spacing(4)}}),canvasContent:(0,t.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:R.spacing(2),flexBasis:"100%",flexGrow:1})})},77109:(Y,A,e)=>{"use strict";e.d(A,{i:()=>r});var t=e(1081),n=e(17422),o=e(99140),s=e(80348);function r(u,d){if(d)return d;if(u&&o.M_)return(0,s.useSelector)((0,t.Mz)(g,i=>(0,n.tc)(i,u??"home")))}function g(u){return u.navIndex}},13773:(Y,A,e)=>{"use strict";e.d(A,{Q:()=>s});var t=e(32196),n=e(96540),o=e(40845);function s({info:g}){const u=(0,o.of)(r);return n.createElement("div",{className:u.container},g.map((d,i)=>n.createElement(n.Fragment,{key:i},n.createElement("div",{className:u.infoItem},n.createElement("div",{className:u.label},d.label),d.value),i+1<g.length&&n.createElement("div",{"data-testid":"page-info-separator",className:u.separator}))))}const r=g=>({container:(0,t.css)({display:"flex",flexDirection:"row",gap:g.spacing(1.5),overflow:"auto"}),infoItem:(0,t.css)({...g.typography.bodySmall,display:"flex",flexDirection:"column",gap:g.spacing(.5)}),label:(0,t.css)({color:g.colors.text.secondary}),separator:(0,t.css)({borderLeft:`1px solid ${g.colors.border.weak}`})})},39419:(Y,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(96540),n=e(39558);const s=({pageName:r=""})=>{const g=`Loading ${r}...`;return t.createElement("div",{className:"page-loader-wrapper"},t.createElement(n._,{text:g}))}},7392:(Y,A,e)=>{"use strict";e.d(A,{L:()=>s});var t=e(32196),n=e(96540),o=e(40845);function s({entity:g="Page"}){const u=(0,o.of)(r),d=(0,o.$j)();return n.createElement("div",{className:u.container},n.createElement("h1",null,g," not found"),n.createElement("div",{className:u.subtitle},"We're looking but can't seem to find this ",g.toLowerCase(),". Try returning"," ",n.createElement("a",{href:"/",className:"external-link"},"home")," ","or seeking help on the"," ",n.createElement("a",{href:"https://community.grafana.com",target:"_blank",rel:"noreferrer",className:"external-link"},"community site.")),n.createElement("div",{className:u.grot},n.createElement("img",{src:`public/img/grot-404-${d.isDark?"dark":"light"}.svg`,width:"100%",alt:"grot"})))}function r(g){return{container:(0,t.css)({display:"flex",flexDirection:"column",padding:g.spacing(8,2,2,2),h1:{textAlign:"center"}}),subtitle:(0,t.css)({color:g.colors.text.secondary,fontSize:g.typography.h5.fontSize,padding:g.spacing(2,0),textAlign:"center"}),grot:(0,t.css)({maxWidth:"450px",paddingTop:g.spacing(8),margin:"0 auto"})}}},78361:(Y,A,e)=>{"use strict";e.d(A,{s:()=>r});var t=e(96540),n=e(13544),o=e(10354),s=e(29158);const r=t.forwardRef((g,u)=>{const[d,i]=(0,t.useState)(!1);return t.createElement(o.p,{...g,type:d?"text":"password","data-testid":n.Tp.pages.Login.password,ref:u,suffix:t.createElement(s.K,{name:d?"eye-slash":"eye","aria-controls":g.id,role:"switch","aria-checked":d,onClick:()=>{i(!d)},tooltip:d?"Hide password":"Show password"})})});r.displayName="PasswordField"},22214:(Y,A,e)=>{"use strict";e.d(A,{j:()=>r});var t=e(32196),n=e(96540),o=e(36663),s=e(40845);const r=n.memo(n.forwardRef(({className:d,children:i,markdown:l,styleOverrides:f,onRemove:c,...h},p)=>{const m=(0,s.of)(a=>u(a,f?.borderTop));return n.createElement("div",{className:(0,t.cx)(m.wrapper,d),...h,ref:p},l&&g(l),i)}));function g(d){const i=(0,o.G)(d);return n.createElement("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:i}})}r.displayName="OperationRowHelp";const u=(d,i)=>{const l=d.shape.radius.default,f=d.colors.background.secondary;return{wrapper:(0,t.css)`
      padding: ${d.spacing(2)};
      border: 2px solid ${f};
      border-top: ${i?i+f:"none"};
      border-radius: 0 0 ${l} ${l};
      position: relative;
      top: -4px;
    `}}},10343:(Y,A,e)=>{"use strict";e.d(A,{A:()=>d,q:()=>u});var t=e(32196),n=e(96540),o=e(13544),s=e(40845),r=e(29158);function g(l){const f=(0,s.of)(i);return n.createElement("div",{className:(0,t.cx)(f.icon,"active"in l&&l.active&&f.active)},n.createElement(r.K,{name:l.icon,tooltip:l.title,className:f.icon,disabled:!!l.disabled,onClick:l.onClick,type:"button","data-testid":l.dataTestId??o.Tp.components.QueryEditorRow.actionButton(l.title),..."active"in l&&{"aria-pressed":l.active}}))}function u(l){return n.createElement(g,{...l})}const d=l=>n.createElement(g,{...l}),i=l=>({icon:(0,t.css)({display:"flex",position:"relative",color:l.colors.text.secondary}),active:(0,t.css)({"&:before":{display:"block",content:'" "',position:"absolute",left:-1,right:2,height:3,borderRadius:l.shape.radius.default,bottom:-8,backgroundImage:l.colors.gradients.brandHorizontal}})})},7788:(Y,A,e)=>{"use strict";e.d(A,{u:()=>p});var t=e(32196),n=e(96540),o=e(75494),s=e(22589),r=e(14110),g=e(40845),u=e(67892),d=e(29158),i=e(67061),l=e(14578),f=e(44836);const c=({actionsElement:a,disabled:v,draggable:E,collapsable:D=!0,dragHandleProps:b,headerElement:P,isContentVisible:y,onRowToggle:T,reportDragMousePosition:M,title:I,id:x,expanderMessages:S})=>{const O=(0,g.of)(h);let C=y?(0,f.t)("query-operation.header.collapse-row","Collapse query row"):(0,f.t)("query-operation.header.expand-row","Expand query row");S!==void 0&&y?C=S.close:S!==void 0&&(C=S?.open);const L=(0,f.t)("query-operation.header.drag-and-drop","Drag and drop to reorder");return n.createElement("div",{className:O.header},n.createElement("div",{className:O.column},D&&n.createElement(d.K,{name:y?"angle-down":"angle-right",tooltip:C,className:O.collapseIcon,onClick:T,"aria-expanded":y,"aria-controls":x}),I&&n.createElement("div",{className:O.titleWrapper,onClick:T,"aria-label":"Query operation row title"},n.createElement("div",{className:(0,t.cx)(O.title,v&&O.disabled)},I)),P),n.createElement(i.B,{gap:1,alignItems:"center"},a,E&&n.createElement("div",{onMouseMove:M,...b},n.createElement(l.I,{title:L,name:"draggabledots",size:"lg",className:O.dragIcon}))))},h=a=>({header:(0,t.css)`
    label: Header;
    padding: ${a.spacing(.5,.5)};
    border-radius: ${a.shape.radius.default};
    background: ${a.colors.background.secondary};
    min-height: ${a.spacing(4)};
    display: grid;
    grid-template-columns: minmax(100px, max-content) min-content;
    align-items: center;
    justify-content: space-between;
    white-space: nowrap;

    &:focus {
      outline: none;
    }
  `,column:(0,t.css)`
    label: Column;
    display: flex;
    align-items: center;
  `,dragIcon:(0,t.css)`
    cursor: grab;
    color: ${a.colors.text.disabled};
    margin: ${a.spacing(0,.5)};
    &:hover {
      color: ${a.colors.text};
    }
  `,collapseIcon:(0,t.css)`
    margin-left: ${a.spacing(.5)};
    color: ${a.colors.text.disabled};
    }
  `,titleWrapper:(0,t.css)`
    display: flex;
    align-items: center;
    flex-grow: 1;
    cursor: pointer;
    overflow: hidden;
    margin-right: ${a.spacing(.5)};
  `,title:(0,t.css)`
    font-weight: ${a.typography.fontWeightBold};
    color: ${a.colors.text.link};
    margin-left: ${a.spacing(.5)};
    overflow: hidden;
    text-overflow: ellipsis;
  `,disabled:(0,t.css)`
    color: ${a.colors.text.disabled};
  `});c.displayName="QueryOperationRowHeader";function p({children:a,actions:v,title:E,headerElement:D,onClose:b,onOpen:P,isOpen:y,disabled:T,draggable:M,collapsable:I,index:x,id:S,expanderMessages:O}){const[C,L]=(0,n.useState)(y!==void 0?y:!0),U=(0,g.of)(m),R=(0,n.useCallback)(()=>{L(!C)},[C,L]);(0,n.useEffect)(()=>{typeof y=="boolean"&&L(y)},[y]);const B=(0,n.useCallback)(V=>{if(V.defaultPrevented){const G=V.currentTarget.getBoundingClientRect(),_=V.clientX-G.left,K=V.clientY-G.top;(0,r.rR)("query_row_reorder_drag_position",{x:_/G.width,y:K/G.height,width:G.width,height:G.height})}},[]);(0,s.A)(()=>{C?P&&P():b&&b()},[C]);const H={isOpen:C,onOpen:()=>{L(!0)},onClose:()=>{L(!1)}},W=v&&u.renderOrCallToRender(v,H),N=D&&u.renderOrCallToRender(D,H);return M?n.createElement(o.sx,{draggableId:S,index:x},V=>n.createElement(n.Fragment,null,n.createElement("div",{ref:V.innerRef,className:U.wrapper,...V.draggableProps},n.createElement("div",null,n.createElement(c,{id:S,actionsElement:W,disabled:T,draggable:!0,collapsable:I,dragHandleProps:V.dragHandleProps,headerElement:N,isContentVisible:C,onRowToggle:R,reportDragMousePosition:B,title:E,expanderMessages:O})),C&&n.createElement("div",{className:U.content},a)))):n.createElement("div",{className:U.wrapper},n.createElement(c,{id:S,actionsElement:W,disabled:T,draggable:!1,collapsable:I,headerElement:N,isContentVisible:C,onRowToggle:R,reportDragMousePosition:B,title:E,expanderMessages:O}),C&&n.createElement("div",{className:U.content},a))}const m=a=>({wrapper:(0,t.css)`
      margin-bottom: ${a.spacing(2)};
    `,content:(0,t.css)`
      margin-top: ${a.spacing(.5)};
      margin-left: ${a.spacing(3)};
    `});p.displayName="QueryOperationRow"},37425:(Y,A,e)=>{"use strict";e.d(A,{n:()=>ye});var t=e(96540),n=e(40845),o=e(8866),s=e(17464),r=e(32196),g=e(62930),u=e(14578),d=e(56034),i=e(10354),l=e(87266),f=e(16797),c=e(88824);const h=(0,t.forwardRef)(({children:pe,iconName:le},Me)=>{const De=(0,n.of)(p);return t.createElement("div",{className:De.container,ref:Me},le&&t.createElement(u.I,{name:le,size:"xs"}),pe)});h.displayName="ValueContainer";const p=pe=>{const{prefix:le}=(0,i.n)({theme:pe}),{multiValueContainer:Me}=(0,c.J)(pe);return{container:(0,r.cx)(le,Me,(0,r.css)`
        position: relative;
        padding: ${pe.spacing(.5,1,.5,1)};

        svg {
          margin-right: ${pe.spacing(.5)};
        }
      `)}},m=360,a=300,v=320,E=360,D=320,b=360,P=E+b,y=pe=>pe.stopPropagation(),T=({appliedRoles:pe,basicRole:le,disabled:Me,isFocused:De,query:Re,showBasicRole:me,width:he,isLoading:Te,onOpen:Be,onClose:we,onQueryChange:Ne,...Ze})=>{const st=(0,n.of)(I,!1,!!De,!!Me,!1,he),Qe=(0,t.useRef)(null);(0,t.useEffect)(()=>{De&&Qe.current?.focus()});const ke=He=>{const Ge=He.target?.value;Ne(Ge)},je=me&&le!=="None";return De?t.createElement("div",{className:st.wrapper},je&&t.createElement(h,null,le),pe.map(He=>t.createElement(h,{key:He.uid},He.group+":"+(He.displayName||He.name))),!Me&&t.createElement("input",{...Ze,className:st.input,ref:Qe,onMouseDown:y,onChange:ke,"data-testid":"role-picker-input",placeholder:De?"Select role":"",value:Re}),t.createElement("div",{className:st.suffix},t.createElement(u.I,{name:"angle-up",className:st.dropdownIndicator,onMouseDown:we}))):t.createElement("div",{className:(0,r.cx)(st.wrapper,st.selectedRoles),onMouseDown:Be},je&&t.createElement(h,null,le),t.createElement(M,{appliedRoles:pe,numberOfRoles:pe.length,showBuiltInRole:je}),Te&&t.createElement("div",{className:st.spinner},t.createElement(g.y,{size:16,inline:!0})))};T.displayName="RolePickerInput";const M=({showBuiltInRole:pe,numberOfRoles:le,appliedRoles:Me})=>{const De=(0,n.of)(Re=>x(Re));return t.createElement(t.Fragment,null,le?t.createElement(d.m,{content:t.createElement("div",{className:De.tooltip},Me?.map(Re=>t.createElement("p",{key:Re.uid},Re.group+":"+(Re.displayName||Re.name))))},t.createElement(h,null,`${pe?"+":""}${le} role${le>1?"s":""}`)):!pe&&t.createElement(h,null,"No roles assigned"))},I=(pe,le,Me,De,Re,me)=>{const he=(0,i.n)({theme:pe,invalid:le});return{wrapper:(0,r.cx)(he.wrapper,(0,l.Xb)(pe,le),Me&&(0,r.css)`
          ${f.focusCss(pe.v1)}
        `,De&&he.inputDisabled,(0,r.css)({minWidth:me||m+"px",width:me,minHeight:"32px",height:"auto",flexDirection:"row",paddingRight:pe.spacing(1),maxWidth:"100%",alignItems:"center",display:"flex",flexWrap:"wrap",justifyContent:"flex-start",position:"relative",boxSizing:"border-box",cursor:"default"}),Re&&(0,r.css)`
          padding-left: 0;
        `),input:(0,r.cx)((0,l.Xb)(pe,le),(0,r.css)`
        max-width: 120px;
        border: none;
        cursor: ${Me?"default":"pointer"};
      `),suffix:he.suffix,dropdownIndicator:(0,r.css)`
      cursor: pointer;
    `,selectedRoles:(0,r.css)`
      display: flex;
      align-items: center;
      cursor: ${De?"not-allowed":"pointer"};
    `,tooltip:(0,r.css)`
      p {
        margin-bottom: ${pe.spacing(.5)};
      }
    `,spinner:(0,r.css)({display:"flex",flexGrow:1,justifyContent:"flex-end"})}},x=pe=>({tooltip:(0,r.css)`
    p {
      margin-bottom: ${pe.spacing(.5)};
    }
  `});var S=e(72109),O=e(40276),C=e(66864),L=e(55852),U=e(5173),R=e(80348);const B=pe=>({hideScrollBar:(0,r.css)({".scrollbar-view":{"&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"}}),menuWrapper:(0,r.css)({display:"flex",maxHeight:"650px",position:"absolute",zIndex:pe.zIndex.dropdown,overflow:"hidden",minWidth:"auto"}),menu:(0,r.css)({minWidth:`${v}px`,maxWidth:`${E}px`,"& > div":{paddingTop:pe.spacing(1)}}),menuLeft:(0,r.css)({flexDirection:"row-reverse"}),subMenu:(0,r.css)({height:"100%",minWidth:`${D}px`,maxWidth:`${b}px`,display:"flex",flexDirection:"column",borderLeft:`1px solid ${pe.components.input.borderColor}`,"& > div":{paddingTop:pe.spacing(1)}}),subMenuLeft:(0,r.css)({borderRight:`1px solid ${pe.components.input.borderColor}`,borderLeft:"unset"}),groupHeader:(0,r.css)({padding:pe.spacing(0,4.5),display:"flex",alignItems:"center",color:pe.colors.text.primary,fontWeight:pe.typography.fontWeightBold}),container:(0,r.css)({padding:pe.spacing(1),border:`1px ${pe.colors.border.weak} solid`,borderRadius:pe.shape.radius.default,backgroundColor:pe.colors.background.primary,zIndex:pe.zIndex.modal}),menuSection:(0,r.css)({marginBottom:pe.spacing(2)}),menuOptionCheckbox:(0,r.css)({display:"flex",margin:pe.spacing(0,1,0,.25)}),menuButtonRow:(0,r.css)({backgroundColor:pe.colors.background.primary,padding:pe.spacing(1)}),menuOptionBody:(0,r.css)({fontWeight:pe.typography.fontWeightRegular,padding:pe.spacing(0,1.5,0,0)}),menuOptionDisabled:(0,r.css)({color:pe.colors.text.disabled,cursor:"not-allowed"}),menuOptionExpand:(0,r.css)({position:"absolute",right:pe.spacing(1.25),color:pe.colors.text.disabled,"&:after":{content:'">"'}}),menuOptionInfoSign:(0,r.css)({color:pe.colors.text.disabled}),basicRoleSelector:(0,r.css)({margin:pe.spacing(1,1.25,1,1.5)}),subMenuPortal:(0,r.css)({height:"100%","> div":{height:"100%"}}),subMenuButtonRow:(0,r.css)({backgroundColor:pe.colors.background.primary,padding:pe.spacing(1)}),checkboxPartiallyChecked:(0,r.css)({input:{"&:checked + span":{"&:after":{borderWidth:"0 3px 0px 0",transform:"rotate(90deg)"}}}}),loadingSpinner:(0,r.css)({marginLeft:pe.spacing(1)})}),H=Object.values(R.OrgRole).map(pe=>({label:pe===R.OrgRole.None?"No basic role":pe,value:pe})),W=({value:pe,onChange:le,disabled:Me,disabledMesssage:De,tooltipMessage:Re})=>{const me=(0,n.of)(B),he=(0,n.$j)();return t.createElement(t.Fragment,null,t.createElement("div",{className:me.groupHeader},t.createElement("span",{style:{marginRight:he.spacing(1)}},"Basic roles"),Me&&De&&t.createElement(d.m,{placement:"right-end",interactive:!0,content:t.createElement("div",null,De)},t.createElement(u.I,{name:"question-circle"})),!Me&&Re&&t.createElement(d.m,{placement:"right-end",interactive:!0,content:Re},t.createElement(u.I,{name:"info-circle",size:"xs"}))),t.createElement(U.a,{name:"Basic Role Selector",className:me.basicRoleSelector,options:H,value:pe,onChange:le,disabled:Me}))};var N=e(10880);const V=(0,t.memo)(t.forwardRef(({name:pe,value:le,isFocused:Me,isSelected:De,partiallySelected:Re,disabled:me,onChange:he,onClick:Te,onOpenSubMenu:Be,onCloseSubMenu:we,children:Ne,root:Ze},st)=>{const Qe=(0,n.$j)(),ke=(0,c.J)(Qe),je=(0,n.of)(B),He=(0,r.cx)(ke.option,Me&&ke.optionFocused,me&&je.menuOptionDisabled),Ge=J=>{me||le&&he(le)},Oe=J=>{Te&&Te(le)},Ke=()=>{Be&&Be(le)},Ee=()=>{we&&we()};return t.createElement("div",{onMouseEnter:Ke,onMouseLeave:Ee},t.createElement("div",{ref:st,className:He,"aria-label":"Role picker option",onClick:Oe},t.createElement(N.S,{value:De,className:(0,r.cx)(je.menuOptionCheckbox,{[je.checkboxPartiallyChecked]:Re}),onChange:Ge,disabled:me}),t.createElement("div",{className:(0,r.cx)(ke.optionBody,je.menuOptionBody)},t.createElement("span",null,pe),t.createElement("span",{className:je.menuOptionExpand})),Ze&&Ne&&t.createElement(s.ZL,{className:je.subMenuPortal,root:Ze},Ne)))}));V.displayName="RoleMenuGroupOption";const G=t.forwardRef(({data:pe,isFocused:le,isSelected:Me,disabled:De,onChange:Re,hideDescription:me},he)=>{const Te=(0,n.$j)(),Be=(0,c.J)(Te),we=(0,n.of)(B),Ne=(0,r.cx)(Be.option,le&&Be.optionFocused,De&&we.menuOptionDisabled),Ze=st=>{De||(st.preventDefault(),st.stopPropagation(),Re(pe))};return t.createElement("div",{ref:he,className:Ne,"aria-label":"Role picker option",onClick:Ze},t.createElement(N.S,{value:Me,className:we.menuOptionCheckbox,onChange:Ze,disabled:De}),t.createElement("div",{className:(0,r.cx)(Be.optionBody,we.menuOptionBody)},t.createElement("span",null,pe.displayName||pe.name),!me&&pe.description&&t.createElement("div",{className:Be.optionDescription},pe.description)),pe.description&&t.createElement(d.m,{content:pe.description},t.createElement(u.I,{name:"info-circle",className:we.menuOptionInfoSign})))});G.displayName="RoleMenuOption";var _=e(3246);const K=({options:pe,selectedOptions:le,disabledOptions:Me,onSelect:De,onClear:Re,showOnLeft:me})=>{const he=(0,n.$j)(),Te=(0,c.J)(he),Be=(0,n.of)(B),we=async()=>{Re&&Re()};return t.createElement("div",{className:(0,r.cx)(Be.subMenu,{[Be.subMenuLeft]:me}),"aria-label":"Role picker submenu"},t.createElement(O.E,{autoHide:!1,autoHeightMax:`${a}px`,hideHorizontalTrack:!0},t.createElement("div",{className:Te.optionBody},pe.map((Ne,Ze)=>t.createElement(G,{data:Ne,key:Ze,isSelected:!!(Ne.uid&&(le.find(st=>st.uid===Ne.uid)||Me?.find(st=>st.uid===Ne.uid))),disabled:!!(Ne.uid&&Me?.find(st=>st.uid===Ne.uid))||(0,_.W)(Ne),onChange:De,hideDescription:!0})))),t.createElement("div",{className:Be.subMenuButtonRow},t.createElement(C.Gy,{justify:"flex-end"},t.createElement(L.$n,{size:"sm",fill:"text",onClick:we},"Clear"))))},j=t.forwardRef(({roles:pe,renderedName:le,showGroups:Me,optionGroups:De,onGroupChange:Re,groupSelected:me,groupPartiallySelected:he,subMenuNode:Te,selectedOptions:Be,onRoleChange:we,onClearSubMenu:Ne,showOnLeftSubMenu:Ze},st)=>{const[Qe,ke]=(0,t.useState)(!1),[je,He]=(0,t.useState)(""),Ge=(0,n.$j)(),Oe=(0,c.J)(Ge),Ke=(0,n.of)(B),Ee=(0,t.useCallback)(oe=>{He(oe),ke(!0)},[]),J=(0,t.useCallback)(()=>{ke(!1),He("")},[]);return t.createElement("div",null,pe.length>0&&t.createElement("div",{className:Ke.menuSection},t.createElement("div",{className:Ke.groupHeader},le),t.createElement("div",{className:Oe.optionBody}),Me&&De?.length?De.map(oe=>t.createElement(V,{key:oe.value,name:oe.name,value:oe.value,isSelected:me(oe.value)||he(oe.value),partiallySelected:he(oe.value),disabled:oe.options?.every(_.W),onChange:Re,onOpenSubMenu:Ee,onCloseSubMenu:J,root:Te,isFocused:Qe&&je===oe.value},Qe&&je===oe.value&&t.createElement(K,{options:oe.options,selectedOptions:Be,onSelect:we,onClear:()=>Ne(je),showOnLeft:Ze}))):pe.map(oe=>t.createElement(G,{data:oe,key:oe.uid,isSelected:!!(oe.uid&&Be.find(ue=>ue.uid===oe.uid)),disabled:(0,_.W)(oe),onChange:we,hideDescription:!0}))))});j.displayName="RoleMenuGroupsSection";var k=(pe=>(pe.fixed="fixed",pe.custom="custom",pe.plugin="plugin",pe))(k||{});const Q={ldap:"LDAP",current:"Current org"},ee=t.createElement(t.Fragment,null,'You can now select the "No basic role" option and add permissions to your custom needs. You can find more information in\xA0',t.createElement(S.Y,{href:"https://grafana.com/docs/grafana/latest/administration/roles-and-permissions/#organization-roles",variant:"bodySmall",external:!0},"our documentation"),"."),ae=({basicRole:pe,options:le,appliedRoles:Me,showGroups:De,basicRoleDisabled:Re,disabledMessage:me,showBasicRole:he,onSelect:Te,onBasicRoleSelect:Be,onUpdate:we,updateDisabled:Ne,offset:Ze,menuLeft:st,apply:Qe})=>{const[ke,je]=(0,t.useState)(Me),[He,Ge]=(0,t.useState)(pe),[Oe,Ke]=(0,t.useState)({}),Ee=(0,t.useRef)(null),J=(0,n.$j)(),oe=(0,c.J)(J),ue=(0,n.of)(B);(0,t.useEffect)(()=>{Te(ke)},[ke,Te]),(0,t.useEffect)(()=>{Be&&He&&Be(He)},[He,Be]),(0,t.useEffect)(()=>{const ft=le.filter(Z).sort(ge),gt=le.filter(ne).sort(ge),Dt=le.filter(q).sort(ge),It={fixed:te(gt).sort((jt,Vt)=>jt.name.localeCompare(Vt.name)),custom:te(ft).sort((jt,Vt)=>jt.name.localeCompare(Vt.name)),plugin:te(Dt).sort((jt,Vt)=>jt.name.localeCompare(Vt.name))};Ke({fixed:{groupType:"fixed",optionGroup:It.fixed,renderedName:"Fixed roles",roles:gt},custom:{groupType:"custom",optionGroup:It.custom,renderedName:"Custom roles",roles:ft},plugin:{groupType:"plugin",optionGroup:It.plugin,renderedName:"Plugin roles",roles:Dt}})},[le]);const be=ft=>{const gt=[];for(const Dt of ke)re(Dt)===ft&&gt.push(Dt);return gt},Le=(ft,gt)=>{const Dt=be(gt),It=Oe[ft]?.optionGroup.find(jt=>jt.value===gt);return Dt.length>0&&Dt.length>=It.options.length},_e=(ft,gt)=>{const Dt=be(gt),It=Oe[ft]?.optionGroup.find(jt=>jt.value===gt);return Dt.length>0&&Dt.length<It.options.length},Ve=ft=>{ke.find(gt=>gt.uid===ft.uid)?je(ke.filter(gt=>gt.uid!==ft.uid)):je([...ke,ft])},We=(ft,gt)=>{const Dt=Oe[ft]?.optionGroup.find(It=>It.value===gt);if(Dt)if(Le(ft,gt)||_e(ft,gt))je(ke.filter(It=>!Dt.options.find(jt=>It.uid===jt.uid)));else{const It=Dt.options.filter(Vt=>Vt.delegatable),jt=ke.filter(Vt=>!Dt.options.find(_t=>Vt.uid===_t.uid));je([...jt,...It])}},$e=ft=>{Ge(ft)},it=async()=>{je([])},at=ft=>{const gt=ke.filter(Dt=>re(Dt)!==ft);je(gt)},ht=()=>{we(ke,He)};return t.createElement("div",{className:(0,r.cx)(oe.menu,ue.menuWrapper,{[ue.menuLeft]:st},(0,r.css)({top:`${Ze.vertical}px`,left:st?"unset":`${Ze.horizontal}px`,right:st?`${Ze.horizontal}px`:"unset"}))},t.createElement("div",{className:ue.menu,"aria-label":"Role picker menu"},t.createElement(O.E,{autoHide:!1,autoHeightMax:`${a}px`,hideHorizontalTrack:!0,hideVerticalTrack:!0,className:(0,r.cx)(ue.hideScrollBar)},he&&t.createElement("div",{className:ue.menuSection},t.createElement(W,{value:He,onChange:$e,disabled:Re,disabledMesssage:me,tooltipMessage:ee})),Object.entries(Oe).map(([ft,gt])=>t.createElement(j,{key:ft,roles:gt.roles,renderedName:gt.renderedName,showGroups:De,optionGroups:gt.optionGroup,groupSelected:Dt=>Le(gt.groupType,Dt),groupPartiallySelected:Dt=>_e(gt.groupType,Dt),onGroupChange:Dt=>We(gt.groupType,Dt),subMenuNode:Ee?.current,selectedOptions:ke,onRoleChange:Ve,onClearSubMenu:at,showOnLeftSubMenu:st}))),t.createElement("div",{className:ue.menuButtonRow},t.createElement(C.Gy,{justify:"flex-end"},t.createElement(L.$n,{size:"sm",fill:"text",onClick:it,disabled:Ne},"Clear all"),t.createElement(L.$n,{size:"sm",onClick:ht,disabled:Ne},Qe?"Apply":"Update")))),t.createElement("div",{ref:Ee}))},Z=pe=>!pe.name?.startsWith("fixed:")&&!pe.name.startsWith("plugins:"),ne=pe=>pe.name?.startsWith("fixed:"),q=pe=>pe.name?.startsWith("plugins:"),te=pe=>{const le={};return pe.forEach(De=>{const Re=re(De),me=de(De);le[Re]||(le[Re]={name:me,roles:[]}),le[Re].roles.push(De)}),Object.entries(le).map(([De,Re])=>({name:Q[De]||ve(Re.name),value:De,options:Re.roles.sort(ge)}))},re=pe=>{const le=ie(pe),Me=de(pe);return`${le}:${Me}`},de=pe=>pe.group||"Other",ie=pe=>{const le=pe.name.indexOf(":");return le<0?"unknown":pe.name.substring(0,le)},ge=(pe,le)=>pe.name.localeCompare(le.name),ve=pe=>pe.slice(0,1).toUpperCase()+pe.slice(1),ye=({basicRole:pe,appliedRoles:le,roleOptions:Me,disabled:De,isLoading:Re,basicRoleDisabled:me,basicRoleDisabledMessage:he,showBasicRole:Te,onRolesChange:Be,onBasicRoleChange:we,canUpdateRoles:Ne=!0,apply:Ze=!1,maxWidth:st=m,width:Qe})=>{const[ke,je]=(0,t.useState)(!1),[He,Ge]=(0,t.useState)(le),[Oe,Ke]=(0,t.useState)(pe),[Ee,J]=(0,t.useState)(""),[oe,ue]=(0,t.useState)({vertical:0,horizontal:0}),[be,Le]=(0,t.useState)(!1),_e=(0,t.useRef)(null),Ve=(0,n.$j)(),We=typeof Qe=="number"?Ve.spacing(Qe):Qe;(0,t.useEffect)(()=>{Ke(pe),Ge(le)},[le,pe,we]);const $e=(0,t.useCallback)(()=>{const{horizontal:_t,vertical:rt,menuToLeft:St}=it();_t&&rt&&(ue({horizontal:_t,vertical:rt}),Le(St))},[]);(0,t.useEffect)(()=>{ke&&$e()},[ke,He,$e]);const it=()=>{const _t=_e?.current?.getBoundingClientRect();if(!_t)return{};const{bottom:rt,top:St,left:pn,right:ct}=_t;let Ct=pn,Yt=rt+10,cn=!1;return window.innerHeight-rt<a+20&&(Yt=St-a-50),pn+P>window.innerWidth&&(Ct=window.innerWidth-ct,cn=!0),{horizontal:Ct,vertical:Yt,menuToLeft:cn}},at=(0,t.useCallback)(_t=>{De||(_t.preventDefault(),_t.stopPropagation(),$e(),je(!0))},[De,$e]),ht=(0,t.useCallback)(()=>{je(!1),J(""),Ge(le),Ke(pe)},[le,pe]),ft=()=>ke&&ht(),gt=_t=>{J(_t||"")},Dt=_t=>{Ge(_t)},It=_t=>{Ke(_t)},jt=(_t,rt)=>{we&&rt&&rt!==pe&&we(rt),Ne&&Be(_t),J(""),je(!1)},Vt=()=>{const _t=Me.map(rt=>({...rt,delegatable:Ne&&rt.delegatable}));return Ee&&Ee.trim()!==""?_t.filter(rt=>rt.name?.toLowerCase().includes(Ee.toLowerCase())):_t};return t.createElement("div",{"data-testid":"role-picker",style:{position:"relative",maxWidth:We||st,width:We},ref:_e},t.createElement(o.N,{onClick:ft,useCapture:!1},t.createElement(T,{basicRole:Oe,appliedRoles:He,query:Ee,onQueryChange:gt,onOpen:at,onClose:ht,isFocused:ke,disabled:De,showBasicRole:Te,width:We,isLoading:Re}),ke&&t.createElement(s.ZL,null,t.createElement("div",{onClick:_t=>_t.stopPropagation()},t.createElement(ae,{options:Vt(),basicRole:Oe,appliedRoles:le,onBasicRoleSelect:It,onSelect:Dt,onUpdate:jt,showGroups:Ee.length===0||Ee.trim()==="",basicRoleDisabled:me,disabledMessage:he,showBasicRole:Te,updateDisabled:me&&!Ne,apply:Ze,offset:oe,menuLeft:be})))))}},89062:(Y,A,e)=>{"use strict";e.d(A,{y:()=>u});var t=e(96540),n=e(41053),o=e(10096),s=e(80348),r=e(37425),g=e(85927);const u=({basicRole:d,roles:i,userId:l,orgId:f,onBasicRoleChange:c,roleOptions:h,disabled:p,basicRoleDisabled:m,basicRoleDisabledMessage:a,apply:v=!1,onApplyRoles:E,pendingRoles:D,maxWidth:b,width:P,isLoading:y})=>{const[{loading:T,value:M=i||[]},I]=(0,n.A)(async()=>{try{if(i)return i;if(v&&D?.length)return D;if(o.TP.hasPermission(s.AccessControlAction.ActionUserRolesList))return await(0,g.Xh)(l,f)}catch{console.error("Error loading options")}return[]},[f,l,D,i]);(0,t.useEffect)(()=>{f&&I()},[I,f]);const x=async O=>{v?E&&E(O,l,f):(await(0,g.eA)(O,l,f),await I())},S=o.TP.hasPermission(s.AccessControlAction.ActionUserRolesAdd)&&o.TP.hasPermission(s.AccessControlAction.ActionUserRolesRemove);return t.createElement(r.n,{appliedRoles:M,basicRole:d,onRolesChange:x,onBasicRoleChange:c,roleOptions:h,isLoading:T||y,disabled:p,basicRoleDisabled:m,basicRoleDisabledMessage:a,showBasicRole:!0,apply:v,canUpdateRoles:S,maxWidth:b,width:P})}},85927:(Y,A,e)=>{"use strict";e.d(A,{G3:()=>u,RL:()=>o,Xh:()=>s,eA:()=>r,xN:()=>g});var t=e(17172),n=e(3246);const o=async d=>{let i="/api/access-control/roles?delegatable=true";d&&(i+=`&targetOrgId=${d}`);const l=await(0,t.AI)().get(i);return!l||!l.length?[]:l.map(n.c)},s=async(d,i)=>{let l=`/api/access-control/users/${d}/roles`;i&&(l+=`?targetOrgId=${i}`);try{const f=await(0,t.AI)().get(l);return!f||!f.length?[]:f.map(n.c)}catch(f){return(0,t.NF)(f)&&(f.isHandled=!0),[]}},r=(d,i,l)=>{let f=`/api/access-control/users/${i}/roles`;l&&(f+=`?targetOrgId=${l}`);const c=d.flatMap(h=>h.uid);return(0,t.AI)().put(f,{orgId:l,roleUids:c})},g=async(d,i)=>{let l=`/api/access-control/teams/${d}/roles`;i&&(l+=`?targetOrgId=${i}`);try{const f=await(0,t.AI)().get(l);return!f||!f.length?[]:f.map(n.c)}catch(f){return(0,t.NF)(f)&&(f.isHandled=!0),[]}},u=(d,i,l)=>{let f=`/api/access-control/teams/${i}/roles`;l&&(f+=`?targetOrgId=${l}`);const c=d.flatMap(h=>h.uid);return(0,t.AI)().put(f,{orgId:l,roleUids:c})}},3246:(Y,A,e)=>{"use strict";e.d(A,{W:()=>t,c:()=>n});const t=o=>o.delegatable!==void 0&&!o.delegatable,n=o=>{const s="fixed:";if(!o.displayName&&o.name.startsWith(s)){let r="";r=o.name.replace(s,"").replace(/:/g," "),o.displayName=r}return o}},47694:(Y,A,e)=>{"use strict";e.d(A,{y:()=>l});var t=e(96540),n=e(8867),o=e(40672),s=e(62938);const r=2,g=5,u=p=>{const m=p.match(new RegExp('<style type="text/css">([\\s\\S]*?)<\\/style>'));return m?m[0]:null},d=p=>p.match(new RegExp(`<svg.*id\\s*=\\s*(['"])(.*?)\\1`))?.[r],i=p=>{let m=d(p);if(!m){m=`x${(0,s.A)()}`;const v=p.indexOf("<svg")+g;p=p.substring(0,v)+`id="${m}" `+p.substring(v)}let a=u(p);if(a){let v=a.replace(/(#(.*?))?\./g,`#${m} .`);p=p.replace(a,v)}return p},l=p=>{const{cleanStyle:m,...a}=p;return t.createElement(n.default,{...a,cacheRequests:!0,preProcessor:m?h:c})};let f=new Map;function c(p){let m=f.get(p);return m||(m=o.sQ.sanitizeSVGContent(p),f.set(p,m)),m}function h(p){let m=f.get(p);return m||(m=o.sQ.sanitizeSVGContent(p),m.indexOf('<style type="text/css">')>-1&&(m=i(m)),f.set(p,m)),m}},59429:(Y,A,e)=>{"use strict";e.d(A,{b:()=>i});var t=e(76459),n=e.n(t),o=e(96540),s=e(88323),r=e(27677);const g=(l="General",f)=>`${l}/${f}`;async function u(l=""){return r.IB.search({type:"dash-db",query:l,limit:100}).then(f=>f.map(c=>({value:{uid:c.uid,title:c.title,folderTitle:c.folderTitle,folderUid:c.folderUid},label:g(c?.folderTitle,c.title)})))}const d=n()(u,250,{leading:!0}),i=({value:l,onChange:f,placeholder:c="Select dashboard",noOptionsMessage:h="No dashboards found",...p})=>{const[m,a]=(0,o.useState)();(0,o.useEffect)(()=>{!l||l===m?.value?.uid||(async()=>{const E=await r.IB.getDashboardByUid(l);E.dashboard&&a({value:{uid:E.dashboard.uid,title:E.dashboard.title,folderTitle:E.meta.folderTitle,folderUid:E.meta.folderUid},label:g(E.meta?.folderTitle,E.dashboard.title)})})()},[l]);const v=(0,o.useCallback)(E=>{a(E),f?.(E?.value)},[f,a]);return o.createElement(s.DW,{loadOptions:d,onChange:v,placeholder:c,noOptionsMessage:h,value:m,defaultOptions:!0,...p})}},70096:(Y,A,e)=>{"use strict";e.d(A,{d:()=>Z});var t=e(96540),n=e(32264),o=e(32196),s=e(18491),r=e(36376),g=e(76459),u=e.n(g),d=e(40845),i=e(10354),l=e(14578),f=e(42418),c=e(57514),h=e(44836),p=e(55314),m=e(92955),a=e(37690),v=e(93519),E=e(24439),D=e(40957),b=e(64756),P=e(70255),y=e(91793),T=e(10022),M=e(29158),I=e(94753),x=e(18759),S=e(80348);const O=40,C="md",L=(q,te)=>`${q}-${te||"root"}`;function U({items:q,focusedItemIndex:te,foldersAreOpenable:re,idPrefix:de,selectedFolder:ie,onFolderExpand:ge,onFolderSelect:ve,isItemLoaded:ye,requestLoadMore:pe}){const le=(0,t.useRef)(null),Me=(0,d.of)(H),De=(0,t.useMemo)(()=>({items:q,focusedItemIndex:te,foldersAreOpenable:re,selectedFolder:ie,onFolderExpand:ge,onFolderSelect:ve,idPrefix:de}),[q,te,re,ie,ge,ve,de]),Re=(0,t.useCallback)(he=>ye(he),[ye]),me=(0,t.useCallback)((he,Te)=>{const{parentUID:Be}=q[he];pe(Be)},[pe,q]);return t.createElement("div",{className:Me.table,role:"tree"},q.length>0?t.createElement(T.A,{ref:le,itemCount:q.length,isItemLoaded:Re,loadMoreItems:me},({onItemsRendered:he,ref:Te})=>t.createElement(y.Y1,{ref:Te,height:O*Math.min(6.5,q.length),width:"100%",itemData:De,itemSize:O,itemCount:q.length,onItemsRendered:he},B)):t.createElement("div",{className:Me.emptyMessage},t.createElement(h.x6,{i18nKey:"browse-dashboards.folder-picker.empty-message"},"No folders found")))}const R=[100,200,130,160,150];function B({index:q,style:te,data:re}){const{items:de,focusedItemIndex:ie,foldersAreOpenable:ge,selectedFolder:ve,onFolderExpand:ye,onFolderSelect:pe,idPrefix:le}=re,{item:Me,isOpen:De,level:Re,parentUID:me}=de[q],he=(0,t.useRef)(null),Te=(0,t.useId)(),Be=(0,S.useSelector)(a.ku),we=(0,S.useSelector)(a.Am),Ne=(Me.uid?we[Me.uid]:Be)?.items??[];let Ze=[];Me.uid&&(Ze=(me?we[me]:Be)?.items??[]);const st=(0,d.of)(H),Qe=(0,t.useCallback)(je=>{je.preventDefault(),je.stopPropagation(),Me.uid&&ye(Me.uid,!De)},[Me.uid,De,ye]),ke=(0,t.useCallback)(()=>{Me.kind==="folder"&&pe(Me)},[Me,pe]);return Me.kind==="ui"&&Me.uiKind==="pagination-placeholder"?t.createElement("span",{style:te,className:st.row},t.createElement(x.T,{level:Re,spacing:2}),t.createElement(P.A,{width:R[q%R.length]})):Me.kind!=="folder"?null:t.createElement("div",{ref:he,style:te,className:(0,o.cx)(st.row,{[st.rowFocused]:q===ie,[st.rowSelected]:Me.uid===ve}),tabIndex:-1,onClick:ke,"aria-expanded":De,"aria-selected":Me.uid===ve,"aria-labelledby":Te,"aria-level":Re+1,role:"treeitem","aria-owns":Ne.length>0?Ne.map(je=>L(le,je.uid)).join(" "):void 0,"aria-setsize":Ne.length,"aria-posinset":Ze.findIndex(je=>je.uid===Me.uid)+1,id:L(le,Me.uid)},t.createElement("div",{className:st.rowBody},t.createElement(x.T,{level:Re,spacing:2}),ge?t.createElement(M.K,{size:C,onMouseDown:Qe,tabIndex:-1,"aria-label":De?`Collapse folder ${Me.title}`:`Expand folder ${Me.title}`,name:De?"angle-down":"angle-right"}):t.createElement("span",{className:st.folderButtonSpacer}),t.createElement("label",{className:st.label,id:Te},t.createElement(I.E,{truncate:!0},Me.title))))}const H=q=>{const te=(0,o.css)({height:O,display:"flex",position:"relative",alignItems:"center",flexGrow:1,gap:q.spacing(.5),overflow:"hidden",padding:q.spacing(0,1)});return{table:(0,o.css)({background:q.components.input.background}),emptyMessage:(0,o.css)({padding:q.spacing(1),textAlign:"center",width:"100%"}),folderButtonSpacer:(0,o.css)({paddingLeft:q.spacing(.5)}),row:(0,o.css)({display:"flex",position:"relative",alignItems:"center",[":not(:first-child)"]:{borderTop:`solid 1px ${q.colors.border.weak}`}}),rowFocused:(0,o.css)({backgroundColor:q.colors.background.secondary}),rowSelected:(0,o.css)({"&::before":{display:"block",content:'""',position:"absolute",left:0,bottom:0,top:0,width:4,borderRadius:q.shape.radius.default,backgroundImage:q.colors.gradients.brandVertical}}),rowBody:te,label:(0,o.css)({lineHeight:O+"px",flexGrow:1,minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","&:hover":{textDecoration:"underline",cursor:"pointer"}})}};var W=e(16797);function N({handleClearSelection:q,isLoading:te,invalid:re,label:de,...ie},ge){const ve=(0,d.$j)(),ye=G(ve,re),pe=le=>{(le.key==="Enter"||le.key===" ")&&q?.(le)};return t.createElement("div",{className:ye.wrapper},t.createElement("div",{className:ye.inputWrapper},de?t.createElement("div",{className:ye.prefix},t.createElement(l.I,{name:"folder"})):void 0,t.createElement("button",{type:"button",className:(0,o.cx)(ye.fakeInput,de?ye.hasPrefix:void 0),...ie,ref:ge},te?t.createElement(P.A,{width:100}):de?t.createElement(I.E,{truncate:!0},de):t.createElement(I.E,{truncate:!0,color:"secondary"},t.createElement(h.x6,{i18nKey:"browse-dashboards.folder-picker.button-label"},"Select folder")),!te&&q&&t.createElement(l.I,{role:"button",tabIndex:0,"aria-label":(0,h.t)("browse-dashboards.folder-picker.clear-selection","Clear selection"),className:ye.clearIcon,name:"times",onClick:q,onKeyDown:pe})),t.createElement("div",{className:ye.suffix},t.createElement(l.I,{name:"angle-down"}))))}const V=(0,t.forwardRef)(N),G=(q,te=!1)=>{const re=(0,i.n)({theme:q,invalid:te});return{wrapper:re.wrapper,inputWrapper:re.inputWrapper,prefix:(0,o.css)([re.prefix,{pointerEvents:"none",color:q.colors.text.primary}]),suffix:(0,o.css)([re.suffix,{pointerEvents:"none"}]),fakeInput:(0,o.css)([re.input,{textAlign:"left",letterSpacing:"normal","&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":(0,o.css)`
          ${(0,W.focusCss)(q)}
        `,alignItems:"center",display:"flex",flexWrap:"nowrap",justifyContent:"space-between",paddingRight:28}]),hasPrefix:(0,o.css)({paddingLeft:28}),clearIcon:(0,o.css)({color:q.colors.text.secondary,cursor:"pointer","&:hover":{color:q.colors.text.primary},"&:focus:not(:focus-visible)":(0,W.getMouseFocusStyles)(q),"&:focus-visible":(0,W.getFocusStyles)(q)})}};function _({tree:q,handleCloseOverlay:te,handleFolderSelect:re,handleFolderExpand:de,idPrefix:ie,search:ge,visible:ve}){const[ye,pe]=(0,t.useState)(-1),le=!!n.$.featureToggles.nestedFolders;(0,t.useEffect)(()=>{ve&&pe(-1)},[ve]),(0,t.useEffect)(()=>{pe(0)},[ge]),(0,t.useEffect)(()=>{document.getElementById(L(ie,q[ye]?.item.uid))?.scrollIntoView({block:"nearest",inline:"nearest"})},[ye,ie,q]);const Me=(0,t.useCallback)(De=>{const Re=le&&!ge;switch(De.key){case"ArrowRight":case"ArrowLeft":Re&&(De.preventDefault(),de(q[ye].item.uid,De.key==="ArrowRight"));break;case"ArrowUp":ye>0&&(De.preventDefault(),pe(ye-1));break;case"ArrowDown":ye<q.length-1&&(De.preventDefault(),pe(ye+1));break;case"Enter":De.preventDefault();const me=q[ye].item;me.kind==="folder"&&re(me);break;case"Tab":De.stopPropagation(),te();break;case"Escape":De.stopPropagation(),De.preventDefault(),te();break}},[ye,te,de,re,le,ge,q]);return{focusedItemIndex:ye,handleKeyDown:Me}}const K=["empty-folder","dashboard"],j=u()(k,300);async function k(q){const te=await(0,E.getGrafanaSearcher)().search({query:q,kind:["folder"],limit:100}),re=te.view.map(de=>(0,D.hI)(de,te.view));return{...te,items:re}}function Q({value:q,invalid:te,showRootFolder:re=!0,clearable:de=!1,excludeUIDs:ie,onChange:ge}){const ve=(0,d.of)(ee),ye=(0,b.wA)(),pe=(0,p.kH)(q||p.hT),le=(0,a.eC)(void 0),Me=!!n.$.featureToggles.nestedFolders,[De,Re]=(0,t.useState)(""),[me,he]=(0,t.useState)(null),[Te,Be]=(0,t.useState)(!1),[we,Ne]=(0,t.useState)(!1),[Ze,st]=(0,t.useState)(!1),[Qe,ke]=(0,t.useState)({}),je=(0,t.useId)(),[He]=(0,t.useState)(void 0),Ge=(0,t.useRef)(0);(0,t.useEffect)(()=>{if(!De){he(null);return}const St=Date.now();Be(!0),j(De).then(pn=>{if(St>Ge.current){const ct=pn.view.map(Ct=>(0,D.hI)(Ct,pn.view));he({...pn,items:ct}),Be(!1),Ge.current=St}})},[De]);const Oe=(0,b.d4)(a.ku),Ke=(0,b.d4)(a.Am),Ee=[(0,s.UU)({crossAxis:!1,boundary:document.body})],{context:J,refs:oe,floatingStyles:ue,elements:be}=(0,r.we)({open:Ze,placement:"bottom",onOpenChange:St=>{St&&(Re(""),Ne(!0)),st(St)},middleware:Ee,whileElementsMounted:s.ll}),Le=(0,r.kp)(J),_e=(0,r.s9)(J),{getReferenceProps:Ve,getFloatingProps:We}=(0,r.bv)([_e,Le]),$e=(0,t.useCallback)(async(St,pn)=>{ke(ct=>({...ct,[St]:pn})),pn&&!Qe[St]&&ye((0,a.Ii)({parentUID:St,pageSize:m.md,excludeKinds:K}))},[ye,Qe]),it=(0,t.useCallback)(St=>{ge&&ge(St.uid,St.title),st(!1)},[ge]),at=(0,t.useCallback)(St=>{St.preventDefault(),St.stopPropagation(),ge&&ge(void 0,void 0)},[ge]),ht=(0,t.useCallback)(()=>st(!1),[st]),ft=(0,a.Zg)(K),gt=(0,t.useCallback)(St=>{De||ft(St)},[De,ft]),Dt=(0,t.useMemo)(()=>{if(De&&me){const ct={isFullyLoaded:!0,lastKindHasMoreItems:!1,lastFetchedKind:"folder",lastFetchedPage:1,items:me.items??[]};return(0,a.A4)(void 0,ct,Ke,{},0,K,ie)}const St=n.$.sharedWithMeFolderUID?[...ie||[],n.$.sharedWithMeFolderUID]:ie;let pn=(0,a.A4)(void 0,Oe,Ke,Qe,0,K,St);if(re){for(const ct of pn)ct.level+=1;pn.unshift({isOpen:!0,level:0,item:{kind:"folder",title:"Dashboards",uid:""}})}return Oe||(pn=pn.concat((0,v.T)(m.md,void 0,0))),pn},[De,me,Oe,Ke,Qe,ie,re]),It=(0,t.useCallback)(St=>{const pn=Dt[St];if(!pn)return!1;const ct=pn.item;return!(ct.kind==="ui"&&ct.uiKind==="pagination-placeholder")},[Dt]),jt=le==="pending"||Te,{focusedItemIndex:Vt,handleKeyDown:_t}=_({tree:Dt,handleCloseOverlay:ht,handleFolderSelect:it,handleFolderExpand:$e,idPrefix:je,search:De,visible:Ze});let rt=pe.data?.title;return q===""&&(rt="Dashboards"),Ze?t.createElement(t.Fragment,null,t.createElement(i.p,{ref:oe.setReference,autoFocus:!0,prefix:rt?t.createElement(l.I,{name:"folder"}):null,placeholder:rt??(0,h.t)("browse-dashboards.folder-picker.search-placeholder","Search folders"),value:De,invalid:te,className:ve.search,onChange:St=>Re(St.currentTarget.value),"aria-autocomplete":"list","aria-expanded":!0,"aria-haspopup":!0,"aria-controls":je,"aria-owns":je,"aria-activedescendant":L(je,Dt[Vt]?.item.uid),role:"combobox",suffix:t.createElement(l.I,{name:"search"}),...Ve(),onKeyDown:_t}),t.createElement("fieldset",{ref:oe.setFloating,id:je,className:ve.tableWrapper,style:{...ue,width:be.domReference?.clientWidth},...We()},He?t.createElement(f.F,{className:ve.error,severity:"warning",title:(0,h.t)("browse-dashboards.folder-picker.error-title","Error loading folders")},He.message||He.toString?.()||(0,h.t)("browse-dashboards.folder-picker.unknown-error","Unknown error")):t.createElement("div",null,jt&&t.createElement("div",{className:ve.loader},t.createElement(c.G,{width:600})),t.createElement(U,{items:Dt,selectedFolder:q,focusedItemIndex:Vt,onFolderExpand:$e,onFolderSelect:it,idPrefix:je,foldersAreOpenable:Me&&!(De&&me),isItemLoaded:It,requestLoadMore:gt})))):t.createElement(V,{label:rt,handleClearSelection:de&&q!==void 0?at:void 0,invalid:te,isLoading:pe.isLoading,autoFocus:we,ref:oe.setReference,"aria-label":rt?(0,h.t)("browse-dashboards.folder-picker.accessible-label","Select folder: {{ label }} currently selected",{label:rt}):void 0,...Ve()})}const ee=q=>({button:(0,o.css)({maxWidth:"100%"}),error:(0,o.css)({marginBottom:0}),tableWrapper:(0,o.css)({boxShadow:q.shadows.z3,position:"relative",zIndex:q.zIndex.portal}),loader:(0,o.css)({position:"absolute",top:0,left:0,right:0,zIndex:q.zIndex.portal+1,overflow:"hidden"}),search:(0,o.css)({input:{cursor:"default"}})});var ae=e(85242);function Z(q){const te=n.$.featureToggles.newFolderPicker||n.$.featureToggles.nestedFolders&&n.$.featureToggles.nestedFolderPicker,{initialTitle:re,dashboardId:de,enableCreateNew:ie,...ge}=q;return te?t.createElement(Q,{...ge}):t.createElement(ne,{...q})}function ne({value:q,showRootFolder:te,onChange:re,initialTitle:de,dashboardId:ie,enableCreateNew:ge,inputId:ve,skipInitialLoad:ye}){const pe=(0,t.useCallback)(le=>{re&&re(le.uid,le.title)},[re]);return t.createElement(ae.sR,{onChange:pe,showRoot:te,initialFolderUid:q,initialTitle:de,inputId:ve,skipInitialLoad:ye,dashboardId:ie,enableCreateNew:ge})}},85242:(Y,A,e)=>{"use strict";e.d(A,{sR:()=>D});var t=e(32196),n=e(76459),o=e.n(n),s=e(96540),r=e(16817),g=e(26272),u=e(13544),d=e(14110),i=e(40845),l=e(10354),f=e(88323),c=e(28138),h=e(44836),p=e(16233),m=e(11230),a=e(80348);const v="+ Add new",E="-10";function D(T){const{dashboardId:M,allowEmpty:I,onChange:x,filter:S,enableCreateNew:O,inputId:C,onClear:L,enableReset:U,initialFolderUid:R,initialTitle:B="",permissionLevel:H=a.PermissionLevelString.Edit,rootName:W,showRoot:N=!0,skipInitialLoad:V,searchQueryType:G,customAdd:_,folderWarning:K,invalid:j}=T,k=W??"Dashboards",[Q,ee]=(0,s.useState)(null),[ae,Z]=(0,s.useState)(!1),[ne,q]=(0,s.useState)(""),[te,re]=(0,s.useState)(Q?.title??""),de=(0,i.of)(y),ie=typeof L=="function",ge=(0,s.useCallback)(async Be=>{const we=await(0,m.c0)(Be,H,G),Ze=b(we,S);return(0,d.rR)("grafana_folder_picker_results_loaded",{results:Ze.length,searchTermLength:Be.length,enableCreateNew:!!O}),(p.TP.hasPermission(a.AccessControlAction.DashboardsWrite)||p.TP.hasPermission(a.AccessControlAction.DashboardsCreate))&&k?.toLowerCase().startsWith(Be.toLowerCase())&&N&&Ze.unshift({label:k,value:""}),U&&Be===""&&B!==""&&!Ze.find(Qe=>Qe.label===B)&&Ze.unshift({label:B,value:R}),O&&_?[...Ze,{value:E,label:v,title:Be}]:Ze},[U,R,B,H,k,N,G,S,O,_]),ve=(0,s.useMemo)(()=>o()(ge,300,{leading:!0}),[ge]),ye=async()=>{const Be={label:B,value:void 0},we={label:k,value:""},Ne=await ge("");let Ze=null;R!=null?Ze=Ne.find(st=>st.value===R)||null:U&&B?Ze=Be:R&&(Ze=Ne.find(st=>st.id===R)||null),!Ze&&!I&&(p.TP.isEditor?Ze=we:!!M?Ze=Be:Ze=Ne.length>0?Ne[0]:Be),!ae&&ee(Ze)};(0,s.useEffect)(()=>{Q&&Q.value!==R&&!ae&&Q.value&&Q.label&&x({uid:Q.value,title:Q.label})},[Q,R]),(0,r.A)(async()=>{if(V){const Be=await P({getFolder:m.Ql,folderUid:R,folderName:B});ee(Be)}await ye()},[V,R,B]),(0,s.useEffect)(()=>{Q&&Q.id===E&&Z(!0)},[Q]);const pe=(0,s.useCallback)((Be,we)=>{if(Be?.value===E)ee({id:E,title:ne}),re(ne);else{if(Be||(Be={value:"",label:k}),we.action==="clear"&&L){L();return}ee(Be),x({uid:Be.value,title:Be.label})}},[x,L,k,ne]),le=(0,s.useCallback)(async Be=>{if(K?.warningCondition(Be))return(0,d.rR)("grafana_folder_picker_folder_created",{status:"failed_condition"}),!1;const we=await(0,m.vV)({title:Be});let Ne={value:"",label:"Not created"};return we.uid?((0,d.rR)("grafana_folder_picker_folder_created",{status:"success"}),c.A.emit(g.r1.alertSuccess,["Folder Created","OK"]),Ne={value:we.uid,label:we.title},ee(we),pe(Ne,{action:"create-option",option:Ne})):((0,d.rR)("grafana_folder_picker_folder_created",{status:"failed"}),c.A.emit(g.r1.alertError,["Folder could not be created"])),Ne},[K,pe]),Me=(0,s.useCallback)(Be=>{const we=!!_?.disallowValues;if(Be.key==="Enter"&&we&&!_?.isAllowedValue(te)){Be.preventDefault();return}switch(Be.key){case"Enter":{le(Q?.title),Z(!1);break}case"Escape":ee({value:"",label:k}),Z(!1)}},[_?.disallowValues,_?.isAllowedValue,te,le,Q?.title,k]),De=Be=>{const we=Be.currentTarget.value;re(we),ee({id:void 0,title:we})},Re=()=>{ee({value:"",label:k}),Z(!1)},me=(Be,{action:we})=>{we==="input-change"&&q(Ne=>Be),we==="menu-close"&&q(Ne=>Be)},he=()=>K?.warningCondition(te)?s.createElement(K.warningComponent,null):null,Te=()=>K?.warningCondition(ne)?s.createElement(K.warningComponent,null):null;return ae?s.createElement(s.Fragment,null,s.createElement(he,null),s.createElement("div",{className:de.newFolder},"Press enter to create the new folder."),s.createElement(l.p,{width:30,autoFocus:!0,value:te,onChange:De,onKeyDown:Me,placeholder:"Press enter to confirm new folder.",onBlur:Re})):s.createElement("div",{"data-testid":u.Tp.components.FolderPicker.containerV2},s.createElement(Te,null),s.createElement(f.gZ,{inputId:C,"data-testid":u.Tp.components.FolderPicker.input,loadingMessage:(0,h.t)("folder-picker.loading","Loading folders..."),defaultOptions:!0,defaultValue:Q,inputValue:ne,onInputChange:me,value:Q,allowCustomValue:O&&!_,loadOptions:ve,onChange:pe,onCreateOption:le,invalid:j,isClearable:ie}))}function b(T,M){return(M?M(T):T).map(x=>({label:x.title,value:x.uid}))}async function P({folderName:T,folderUid:M,getFolder:I}){if(M==null)throw new Error("folderUid is not found.");return T?{label:T,value:M}:{label:(await I(M)).title,value:M}}const y=T=>({newFolder:(0,t.css)({color:T.colors.warning.main,fontSize:T.typography.bodySmall.fontSize,paddingBottom:T.spacing(1)})})},46334:(Y,A,e)=>{"use strict";e.d(A,{E:()=>s});var t=e(96540),n=e(69613),o=e(14578);class s extends t.Component{constructor(g){super(g)}render(){const{label:g,removeIcon:u,count:d,onClick:i}=this.props,{color:l}=(0,n.MC)(g),f={backgroundColor:l},c=d!==0&&t.createElement("span",{className:"tag-count-label"},`(${d})`);return t.createElement("span",{className:"label label-tag",style:f},u&&t.createElement(o.I,{onClick:i,name:"times"}),g," ",c)}}},99818:(Y,A,e)=>{"use strict";e.d(A,{$:()=>h});var t=e(32196),n=e(96540),o=e(28581),s=e(54479),r=e(40845),g=e(88323),u=e(14578),d=e(44836),i=e(46334);const l=({data:m,className:a,label:v,isFocused:E,innerProps:D})=>{const b=(0,r.of)(f);return n.createElement("div",{className:(0,t.cx)(b.option,E&&b.optionFocused),"aria-label":"Tag option",...D},n.createElement("div",{className:`tag-filter-option ${a||""}`},typeof v=="string"?n.createElement(i.E,{label:v,removeIcon:!1,count:m.count??0}):v))},f=m=>({option:(0,t.css)`
      padding: 8px;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;
      &:hover {
        background: ${m.colors.background.secondary};
      }
    `,optionFocused:(0,t.css)`
      background: ${m.colors.background.secondary};
      border-style: solid;
      border-top: 0;
      border-right: 0;
      border-bottom: 0;
      border-left-width: 2px;
    `}),c=(m,a)=>RegExp((0,s.jD)(a),"i").test(m.value),h=({allowCustomValue:m=!1,formatCreateLabel:a,hideValues:v,inputId:E,isClearable:D,onChange:b,placeholder:P,tagOptions:y,tags:T,width:M})=>{const I=(0,r.of)(p),x=T.map(K=>({value:K,label:K,count:0})),[S,O]=(0,n.useState)(x),[C,L]=(0,n.useState)(!1),[U,R]=(0,n.useState)(T),[B,H]=(0,n.useState)(x),W=(0,n.useMemo)(()=>T.join(),[T]),N=(0,n.useCallback)(async()=>(await y()).map(j=>T.includes(j.term)?{value:j.term,label:j.term,count:0}:{value:j.term,label:j.term,count:j.count}),[y,T]),V=(0,n.useCallback)(async()=>{L(!0);const K=await N();m&&B.forEach(j=>K.push(j)),O(K),L(!1)},[m,B,N]);(0,n.useEffect)(()=>{T.length>0&&S.length===0&&V()},[V,S.length,T.length]),(0,n.useEffect)(()=>{T!==U&&(R(T),V())},[V,U,T]);const G=K=>{K.forEach(j=>j.count=0),b((K||[]).map(j=>j.value)),m&&H(K.filter(j=>!T.includes(j)))},_={key:W,onFocus:V,isLoading:C,options:S,allowCreateWhileLoading:!0,allowCustomValue:m,formatCreateLabel:a,defaultOptions:!0,filterOption:c,getOptionLabel:K=>K.label,getOptionValue:K=>K.value,inputId:E,isMulti:!0,onChange:G,loadingMessage:(0,d.t)("tag-filter.loading","Loading..."),noOptionsMessage:(0,d.t)("tag-filter.no-tags","No tags found"),placeholder:P||(0,d.t)("tag-filter.placeholder","Filter by tag"),value:x,width:M,components:{Option:l,MultiValueLabel:()=>null,MultiValueRemove(K){const{data:j}=K;return n.createElement(o.c.MultiValueRemove,{...K},n.createElement(i.E,{key:j.label,label:j.label,removeIcon:!0,count:j.count}))},MultiValueContainer:v?()=>null:o.c.MultiValueContainer}};return n.createElement("div",{className:I.tagFilter},D&&T.length>0&&n.createElement("button",{className:I.clear,onClick:()=>G([])},"Clear tags"),n.createElement(g.KF,{..._,prefix:n.createElement(u.I,{name:"tag-alt"}),"aria-label":"Tag filter"}))};h.displayName="TagFilter";const p=m=>({tagFilter:(0,t.css)`
    position: relative;
    min-width: 180px;
    flex-grow: 1;

    .label-tag {
      margin-left: 6px;
      cursor: pointer;
    }
  `,clear:(0,t.css)`
    background: none;
    border: none;
    text-decoration: underline;
    font-size: 12px;
    padding: none;
    position: absolute;
    top: -17px;
    right: 0;
    cursor: pointer;
    color: ${m.colors.text.secondary};

    &:hover {
      color: ${m.colors.text.primary};
    }
  `})},25573:(Y,A,e)=>{"use strict";e.d(A,{m:()=>c});var t=e(2543),n=e.n(t),o=e(96540),s=e(26272),r=e(65879),g=e(47232),u=e(15666),d=e(76412),i=e(28138),l=e(61680);const f="grafana.dashboard.timepicker.history",c=E=>o.createElement(l.b,{storageKey:f,defaultValue:[]},(D,b)=>{const P=p(D),y=h(P);return o.createElement(u.$6,{...E,history:y,onChange:T=>{m(T,P,b),E.onChange(T)},onError:T=>i.A.emit(s.r1.alertError,[(0,d.t)("time-picker.copy-paste.default-error-title","Invalid time range"),(0,d.t)("time-picker.copy-paste.default-error-message","{{error}} is not a valid time range",{error:T})])})});function h(E){return E.map(D=>r.convertRawToRange(D,"utc",void 0,"YYYY-MM-DD HH:mm:ss"))}function p(E){return E.map(D=>{const b=typeof D.from=="string"?D.from:D.from.toISOString(),P=typeof D.to=="string"?D.to:D.to.toISOString();return{from:b,to:P}})}function m(E,D,b){if(!a(E))return;const P={from:typeof E.raw.from=="string"?E.raw.from:E.raw.from.toISOString(),to:typeof E.raw.to=="string"?E.raw.to:E.raw.to.toISOString()},y=v([P,...D]);b(y)}function a(E){return(0,g.Ar)(E.raw.from)||(0,g.Ar)(E.raw.to)}function v(E){return(0,t.uniqBy)(E,D=>D.from+D.to).slice(0,4)}},82389:(Y,A,e)=>{"use strict";e.d(A,{I:()=>f});var t=e(96540),n=e(24293),o=e(11261),s=e(52622),r=e(67266),g=e(55726),u=e(79041),d=e(30249),i=e(28895);const l=["rowHeight","colWidth","showValue","mergeValues","alignValue","tooltip"];class f extends t.Component{constructor(){super(...arguments),this.getValueColor=(h,p,m)=>{const a=this.props.frames[h].fields[p];if(a.display){const v=a.display(m);if(v.color)return v.color}return n.F},this.prepConfig=(h,p,m)=>{this.panelContext=this.context;const{eventBus:a,sync:v}=this.panelContext;return(0,i.iE)({frame:h,getTimeRange:m,eventBus:a,sync:v,allFrames:this.props.frames,...this.props,timeZones:Array.isArray(this.props.timeZone)?this.props.timeZone:[this.props.timeZone],rowHeight:h.fields.length>2?this.props.rowHeight:1,getValueColor:this.getValueColor,hoverMulti:this.props.tooltip?.mode===s.$N.Multi})},this.renderLegend=h=>{const{legend:p,legendItems:m}=this.props;return!h||!m||!p||p.showLegend===!1?null:t.createElement(r.KU.Legend,{placement:p.placement},t.createElement(g.t,{placement:p.placement,items:m,displayMode:p.displayMode,readonly:!0}))}}render(){return t.createElement(d.o,{...this.props,fields:{x:h=>h.type===o.PU.time,y:h=>h.type===o.PU.number||h.type===o.PU.boolean||h.type===o.PU.string||h.type===o.PU.enum},prepConfig:this.prepConfig,propsToDiff:l,renderLegend:this.renderLegend})}}f.contextType=u.e4},28895:(Y,A,e)=>{"use strict";e.d(A,{pm:()=>U,GY:()=>ee,c5:()=>ae,jY:()=>k,EI:()=>K,iE:()=>H,Qe:()=>_,Or:()=>j});var t=e(24293),n=e(28240),o=e(83195),s=e(69129),r=e(94624),g=e(11261),u=e(50082),d=e(58563),i=e(47737),l=e(73060),f=e(46294),c=e(39624),h=e(73134),p=e(52622),m=e(51336),a=e(52811),v=e(16895),E=e(36613),D=e(23596),b=e(39758),P=e(4134);const{round:y,min:T,ceil:M}=Math,I=2;let x=6;const S=b.ur;function O(Z,ne,q,te,re){(0,b.mn)(q,Z,S,ne,(de,ie,ge)=>{let ve=te*ie,ye=te*ge;re(de,ve,ye)})}function C(Z){const{mode:ne,numSeries:q,isDiscrete:te,hasMappedNull:re,rowHeight:de=0,colWidth:ie=0,showValue:ge,mergeValues:ve=!1,theme:ye,label:pe,formatValue:le,alignValue:Me="left",getTimeRange:De,getValueColor:Re,getFieldConfig:me,onHover:he,onLeave:Te,hoverMulti:Be}=Z;let we,Ne;const Ze=at=>{Ne=Array(q).fill(null).map(ht=>Array(at).fill(null))},st=`500 ${Math.round(12*devicePixelRatio)}px ${ye.typography.fontFamily}`,Qe=Array(q).fill(null);let ke=null;const je=[ie,1/0],He=1-je[0],Ge=(je[1]??1/0)*E.A.pxRatio,Oe=new Map,Ke=new Map;function Ee(at){Oe.forEach((ht,ft)=>{at.fillStyle=ft,at.fill(ht)}),Ke.forEach((ht,ft)=>{at.strokeStyle=ft,at.stroke(ht)}),Oe.clear(),Ke.clear()}function J(at,ht,ft,gt,Dt,It,jt,Vt,_t,rt,St,pn,ct){jt=Math.max(1,jt);const Ct=Re(rt+1,pn),Yt=me(rt),cn=L(Yt,Ct);if(Ne[rt][St]={x:y(Dt-ft),y:y(It-gt),w:jt,h:Vt,sidx:rt+1,didx:St,fillColor:cn},ct){let vn=cn,rn=Oe.get(vn);if(rn==null&&Oe.set(vn,rn=new Path2D),ht(rn,Dt,It,jt,Vt),_t){let en=Ct,mn=Ke.get(en);mn==null&&Ke.set(en,mn=new Path2D),ht(mn,Dt+_t/2,It+_t/2,jt-_t,Vt-_t)}}else at.beginPath(),ht(at,Dt,It,jt,Vt),at.fillStyle=cn,at.fill(),_t&&(at.beginPath(),ht(at,Dt+_t/2,It+_t/2,jt-_t,Vt-_t),at.strokeStyle=Ct,at.lineWidth=_t,at.stroke())}const oe=(at,ht,ft,gt)=>(E.A.orient(at,ht,(Dt,It,jt,Vt,_t,rt,St,pn,ct,Ct,Yt,cn,vn,rn)=>{let en=y((Dt.width||0)*E.A.pxRatio),mn=te(ht),Un=mn&&re(ht);at.ctx.save(),rn(at.ctx,at.bbox.left,at.bbox.top,at.bbox.width,at.bbox.height),at.ctx.clip(),O(de,ht-1,q,Yt,(fn,ca,Lt)=>{if(ne===U.Changes)for(let qt=0;qt<jt.length;qt++){let hn=jt[qt];if(hn!=null||Un){let Cn=Math.round(rt(It[qt],Vt,Ct,pn)),gn=qt;for(;++gn<jt.length&&(jt[gn]===void 0||ve&&jt[gn]===hn););let xn=gn===jt.length?pn+Ct+en:Math.round(rt(It[gn],Vt,Ct,pn));J(at.ctx,rn,pn,ct,Cn,y(ct+ca),xn-Cn,y(Lt),en,fn,qt,hn,mn),qt=gn-1}}else if(ne===U.Samples){let qt=rt(It[1],Vt,Ct,pn)-rt(It[0],Vt,Ct,pn),hn=qt*He,Cn=y(T(Ge,qt-hn)-en),gn=Cn/2;for(let xn=ft;xn<=gt;xn++){let Tn=jt[xn];if(Tn!=null||Un){let Wn=rt(It[xn],Vt,Ct,pn);J(at.ctx,rn,pn,ct,y(Wn-gn),y(ct+ca),Cn,y(Lt),en,fn,xn,Tn,mn)}}}}),mn&&(at.ctx.lineWidth=en,Ee(at.ctx)),at.ctx.restore()}),null),ue=le==null||ge===p.yL.Never?!1:(at,ht,ft,gt)=>(at.ctx.save(),at.ctx.rect(at.bbox.left,at.bbox.top,at.bbox.width,at.bbox.height),at.ctx.clip(),at.ctx.font=st,at.ctx.textAlign=ne===U.Changes?Me:"center",at.ctx.textBaseline="middle",E.A.orient(at,ht,(Dt,It,jt,Vt,_t,rt,St,pn,ct,Ct,Yt)=>{let cn=y((Dt.width||0)*E.A.pxRatio),rn=te(ht)&&re(ht),en=y(ct+We[ht-1]);for(let mn=0;mn<jt.length;mn++)if(jt[mn]!=null||rn){const Un=Ne[ht-1][mn];if(!Un||Un.x>=Ct)continue;let fn=Math.floor(Un?.w/x);if(ge===p.yL.Auto&&fn<2)continue;let ca=le(ht,jt[mn]),Lt=y(Un.x+pn+Un.w/2);ne===U.Changes&&(Me==="left"?Lt=y(Un.x+pn+cn+I):Me==="right"&&(Lt=y(Un.x+pn+Un.w-cn-I))),at.ctx.fillStyle=ye.colors.getContrastText(Un.fillColor,3),at.ctx.fillText(ca.slice(0,fn),Lt,en)}}),at.ctx.restore(),!1),be=at=>{let ht="";for(let ft=32;ft<=126;ft++)ht+=String.fromCharCode(ft);x=Math.ceil(at.ctx.measureText(ht).width/ht.length*E.A.pxRatio),x+=2.5,at.root.querySelectorAll(".u-cursor-pt").forEach(ft=>{ft.style.borderRadius="0"})},Le=at=>{we=we||new P.C$(0,0,at.bbox.width,at.bbox.height),we.clear(),Ze(at.data[0].length),at.series.forEach(ht=>{ht._paths=null})};function _e(at,ht,ft){if(Qe.fill(null),ke=null,!(at<0))for(let gt=0;gt<ft.length;gt++){let Dt=ft[gt];we.get(at,Dt,1,1,It=>{(0,P.ur)(at,Dt,It.x,It.y,It.x+It.w,It.y+It.h)&&(Qe[It.sidx]=It,Math.abs(ht-Dt)<=It.h/2&&(ke=It))})}}const Ve={x:ne===U.Changes,y:!1,dataIdx:(at,ht)=>{if(ht===1){if(we.o.length===0&&we.q==null)for(const It of Ne)for(const jt of It)jt&&we.add(jt);let ft=at.cursor.left*E.A.pxRatio,gt=at.cursor.top*E.A.pxRatio,Dt=ke;_e(ft,gt,Be?We:[gt]),ke!=null?ke!==Dt&&he(ke.sidx,ke.didx,ke):Dt!=null&&Te()}return Qe[ht]?.didx},focus:{prox:1e3,dist:(at,ht)=>ke?.sidx===ht?0:1/0},points:{fill:"rgba(255,255,255,0.2)",bbox:(at,ht)=>{let ft=Qe[ht],gt=ft!=null;return{left:gt?ft.x/E.A.pxRatio:-10,top:gt?ft.y/E.A.pxRatio:-10,width:gt?ft.w/E.A.pxRatio:0,height:gt?ft.h/E.A.pxRatio:0}}}},We=Array(q).fill(0),$e=Array(q).fill(0),it=[0,1];return{cursor:Ve,xSplits:ne===U.Samples?(at,ht,ft,gt,Dt,It)=>{let jt=[],Vt=at.data[0][1]-at.data[0][0],_t=M(Dt/Vt);for(let rt=0;rt<at.data[0].length;rt+=_t){let St=at.data[0][rt];St>=ft&&St<=gt&&jt.push(St)}return jt}:null,xRange:at=>{const ht=De();let ft=ht.from.valueOf(),gt=ht.to.valueOf();if(ne===U.Samples){let jt=(at.data[0][1]-at.data[0][0])/2;ft<=at.data[0][0]&&(ft=at.data[0][0]-jt);let Vt=at.data[0].length-1;gt>=at.data[0][Vt]&&(gt=at.data[0][Vt]+jt)}return[ft,gt]},ySplits:at=>(O(de,null,q,at.bbox.height,(ht,ft,gt)=>{We[ht]=y(ft+gt/2),$e[ht]=at.posToVal(We[ht]/E.A.pxRatio,a.s)}),$e),yValues:(at,ht)=>ht.map((ft,gt)=>pe(gt+1)),yRange:it,drawPaths:oe,drawPoints:ue,init:be,drawClear:Le}}function L(Z,ne){if(ne[0]==="#"&&ne.length===9)return ne;const q=(Z.fillOpacity??100)/100;return(0,D.alpha)(ne,q)}var U=(Z=>(Z.Changes="changes",Z.Samples="samples",Z))(U||{});const R={lineWidth:0,fillOpacity:80};function B(Z){return Z.ctrlKey||Z.metaKey||Z.shiftKey?SeriesVisibilityChangeMode.AppendToSelection:SeriesVisibilityChangeMode.ToggleSelection}const H=({frame:Z,theme:ne,timeZones:q,getTimeRange:te,mode:re,eventBus:de,sync:ie,rowHeight:ge,colWidth:ve,showValue:ye,alignValue:pe,mergeValues:le,getValueColor:Me,eventsScope:De="__global_",hoverMulti:Re})=>{const me=new m.e(q[0]),he="time",Te="x",Be=J=>{const oe=J.config?.color?.mode;return!(oe&&J.display&&oe.startsWith("continuous-"))},we=J=>J.config.mappings?.some(oe=>oe.type===h.dM.SpecialValue&&oe.options.match==="null")||!1,Ne=(J,oe)=>{const ue=Z.fields[J];return ue.state?.origin?.fieldIndex!==void 0&&ue.state?.origin?.frameIndex!==void 0&&Me?Me(ue.state?.origin?.frameIndex,ue.state?.origin?.fieldIndex,oe):t.F},Ze={mode:re,numSeries:Z.fields.length-1,isDiscrete:J=>Be(Z.fields[J]),hasMappedNull:J=>we(Z.fields[J]),mergeValues:le,rowHeight:ge,colWidth:ve,showValue:ye,alignValue:pe,theme:ne,label:J=>(0,n.Ct)(Z.fields[J],Z),getFieldConfig:J=>Z.fields[J].config.custom,getValueColor:Ne,getTimeRange:te,formatValue:(J,oe)=>(0,o.cN)(Z.fields[J].display(oe)),onHover:(J,oe)=>{Qe=J,ke=oe,st=!0},onLeave:()=>{Qe=null,ke=null,st=!0},hoverMulti:Re};let st=!1,Qe=null,ke=null;const je=C(Ze),He={point:{[he]:null,[a.s]:null},data:Z},Ge=new s.b_(He).setTags(["uplot"]),Oe=new s.ql().setTags(["uplot"]);me.addHook("init",je.init),me.addHook("drawClear",je.drawClear);const Ke=(J,oe,ue)=>{st&&(Qe!=null&&(J(Qe),oe(ke)),st=!1),ue(Qe==null)};me.setTooltipInterpolator(Ke),me.setPrepData(J=>(0,v.bq)(J[0],(0,v.ro)(J[0]))),me.setCursor(je.cursor),me.addScale({scaleKey:Te,isTime:!0,orientation:p.Lt.Horizontal,direction:p.ON.Right,range:je.xRange}),me.addScale({scaleKey:a.s,isTime:!1,orientation:p.Lt.Vertical,direction:p.ON.Up,range:je.yRange}),me.addAxis({scaleKey:Te,isTime:!0,splits:je.xSplits,placement:p.vM.Bottom,timeZone:q[0],theme:ne,grid:{show:!0}}),me.addAxis({scaleKey:a.s,isTime:!1,placement:p.vM.Left,splits:je.ySplits,values:je.yValues,grid:{show:!1},ticks:{show:!1},gap:16,theme:ne});let Ee=0;for(let J=0;J<Z.fields.length;J++){if(J===0)continue;const oe=Z.fields[J],ue=oe.config,be={...R,...ue.custom};oe.state.seriesIndex=Ee++,me.addSeries({scaleKey:a.s,pathBuilder:je.drawPaths,pointsBuilder:je.drawPoints,lineWidth:be.lineWidth,fillOpacity:be.fillOpacity,theme:ne,show:!be.hideFrom?.viz,thresholds:ue.thresholds,dataFrameFieldIndex:oe.state?.origin})}if(ie&&ie()!==r.y.Off){let J={};J.sync={key:De,filters:{pub:(oe,ue,be,Le,_e,Ve,We)=>ie&&ie()===r.y.Off?!1:(He.rowIndex=We,be<0&&Le<0?de.publish(Oe):(He.point[he]=ue.posToVal(be,Te),He.point.panelRelY=Le>0?Le/Ve:1,He.down=void 0,de.publish(Ge)),!0)},scales:[Te,null]},me.setSync(),me.setCursor(J)}return me};function W(Z){const ne=new Map;for(let q=0;q<Z.fields.length;q++)ne.set(getFieldDisplayName(Z.fields[q],Z),q);return ne}function N(Z){let ne=Z[0],q;for(let te=1;te<Z.length;te++){let re=Z[te];re===null?ne=null:re===ne?(q||(q=[...Z]),q[te]=void 0):re!=null&&(ne=re)}return q}function V(Z){let ne=Z.config.custom?.spanNulls;return ne?ne===!0?1/0:ne:-1}function G(Z,ne){const q=Z.config.thresholds;if(Z.type!==g.PU.number||!q||!q.steps.length)return;const te=K(Z.config,ne);if(te.length!==q.steps.length)return;const re=new Map,de=new Map;for(let ve=0;ve<te.length;ve++)re.set(q.steps[ve],te[ve].label),de.set(te[ve].label,te[ve].color);let ie=Z.values;const ge=new Array(Z.values.length);if(q.mode===u.O.Percentage){const{min:ve,max:ye}=(0,d.xg)(Z),pe=ye-ve;ie=ie.map(le=>le==null?le:(le-ve)/pe*100)}for(let ve=0;ve<ge.length;ve++){const ye=ie[ve];ye==null?ge[ve]=ye:ge[ve]=re.get((0,i.yQ)(ye,q.steps))}return{...Z,config:{...Z.config,custom:{...Z.config.custom,spanNulls:V(Z)}},type:g.PU.string,values:ge,display:ve=>({text:String(ve),color:de.get(String(ve)),numeric:NaN})}}function _(Z,ne,q,te){if(!Z?.length)return{warn:"No data in response"};let re=!1;const de=[];for(let ie of Z){let ge=!1,ve=!1,ye=(0,l.Yj)(ie,ie.fields.findIndex(Me=>Me.type===g.PU.time)),pe=(0,f.M)({frame:ye,refFieldPseudoMin:q.from.valueOf(),refFieldPseudoMax:q.to.valueOf()});pe!==ie&&(ve=!0);const le=[];for(let Me of(0,c.C)(pe).fields)if(!Me.config.custom?.hideFrom?.viz)switch(Me.type){case g.PU.time:ge=!0,re=!0,le.push(Me);break;case g.PU.enum:case g.PU.number:if(ne&&Me.config.color?.mode===t.Y.Thresholds){const De=G(Me,te);if(De){le.push(De),ve=!0;continue}}case g.PU.boolean:case g.PU.string:Me={...Me,config:{...Me.config,custom:{...Me.config.custom,spanNulls:V(Me)}}},le.push(Me);break;default:ve=!0}ge&&le.length>1&&(re=!0,ve?de.push({...ye,fields:le}):de.push(ye))}return re?de.length?{frames:de}:{warn:"No graphable fields"}:{warn:"Data does not have a time field"}}function K(Z,ne){const q=[],te=Z.thresholds;if(!te||!te.steps.length)return q;const re=te.steps,de=(0,o.j_)(te.mode===u.O.Percentage?"percent":Z.unit??""),ie=ge=>(0,o.cN)(de(ge,Z.decimals??void 0));for(let ge=0;ge<re.length;ge++){let ve=re[ge],ye=ve.value,pe="",le="";ye===-1/0&&ge<re.length-1?(ye=re[ge+1].value,pe="< "):le="+",q.push({label:`${pe}${ie(ye)}${le}`,color:ne.visualization.getColorByName(ve.color),yAxis:1})}return q}function j(Z,ne,q){if(!(!Z||ne.showLegend===!1))return k(Q(Z),q)}function k(Z,ne){if(!Z.length)return;const q=[],te=Z[0].config,re=te.color?.mode??t.Y.Fixed,de=te.thresholds;if(re===t.Y.Thresholds&&de?.steps&&de.steps.length>1)return K(te,ne);if(re.startsWith("continuous"))return;const ie=new Map;return Z.forEach(ge=>{ge.config.custom?.hideFrom?.legend||ge.values.forEach(ve=>{let ye=ge.display(ve);ye.color&&ie.set(ye.text,ye.color)})}),ie.forEach((ge,ve)=>{ve.length>0&&q.push({label:ve,color:ne.visualization.getColorByName(ge??t.F),yAxis:1})}),q}function Q(Z){const ne=[];for(const q of Z)for(const te of q.fields)te.type!==g.PU.time&&ne.push(te);return ne}function ee(Z,ne){let q,te=ne+1;if(te>=Z.values.length)return null;const re=Z.values[ne];for(;q===void 0;){if(te>=Z.values.length)return null;const de=Z.values[te];de===void 0||de===re?te++:q=te}return q}function ae(Z){if(Z<0||Number.isNaN(Z))return"";let ne,q,te,re,de,ie,ge,ve;return ge=Math.floor(Z/1e3),ie=Math.floor(ge/60),ge=ge%60,de=Math.floor(ie/60),ie=ie%60,re=Math.floor(de/24),de=de%24,ne=Math.floor(re/365),ne>0&&(re=re%365),q=Math.floor(re/30),q>0&&(re=re%30),te=Math.floor(re/7),te>0&&(re=re%7),ve=Math.round(Z%1e3*1e3)/1e3,(ne>0?ne+"y "+(q>0?q+"mo ":"")+(te>0?te+"w ":"")+(re>0?re+"d ":""):q>0?q+"mo "+(te>0?te+"w ":"")+(re>0?re+"d ":""):te>0?te+"w "+(re>0?re+"d ":""):re>0?re+"d "+(de>0?de+"h ":""):de>0?de+"h "+(ie>0?ie+"m ":""):ie>0?ie+"m "+(ge>0?ge+"s ":""):ge>0?ge+"s "+(ve>0?ve+"ms ":""):ve>0?ve+"ms ":"0").trim()}},76323:(Y,A,e)=>{"use strict";e.d(A,{J:()=>r});var t=e(32196),n=e(96540),o=e(14110),s=e(40845);const r=({text:u="PRO",className:d,experimentId:i,eventVariant:l="",...f})=>{const c=(0,s.of)(g);return(0,n.useEffect)(()=>{i&&(0,o.Xp)(i,"test",l)},[i,l]),n.createElement("span",{className:(0,t.cx)(c.badge,d),...f},u)},g=u=>({badge:(0,t.css)`
      margin-left: ${u.spacing(1.25)};
      border-radius: ${u.shape.borderRadius(5)};
      background-color: ${u.colors.success.main};
      padding: ${u.spacing(.25,.75)};
      color: white; // use the same color for both themes
      font-weight: ${u.typography.fontWeightMedium};
      font-size: ${u.typography.pxToRem(10)};
    `})},93522:(Y,A,e)=>{"use strict";e.d(A,{N:()=>d});var t=e(32196),n=e(96540),o=e(40845),s=e(37390),r=e(44836),g=e(63917);const u=l=>[{category:(0,r.t)("help-modal.shortcuts-category.global","Global"),shortcuts:[{keys:["g","h"],description:(0,r.t)("help-modal.shortcuts-description.go-to-home-dashboard","Go to Home Dashboard")},{keys:["g","d"],description:(0,r.t)("help-modal.shortcuts-description.go-to-dashboards","Go to Dashboards")},{keys:["g","e"],description:(0,r.t)("help-modal.shortcuts-description.go-to-explore","Go to Explore")},{keys:["g","p"],description:(0,r.t)("help-modal.shortcuts-description.go-to-profile","Go to Profile")},{keys:[`${l} + k`],description:(0,r.t)("help-modal.shortcuts-description.open-search","Open search")},{keys:["esc"],description:(0,r.t)("help-modal.shortcuts-description.exit-edit/setting-views","Exit edit/setting views")},{keys:[`${l} + h`],description:(0,r.t)("help-modal.shortcuts-description.show-all-shortcuts","Show all keyboard shortcuts")},{keys:["c","t"],description:(0,r.t)("help-modal.shortcuts-description.change-theme","Change theme")}]},{category:(0,r.t)("help-modal.shortcuts-category.dashboard","Dashboard"),shortcuts:[{keys:[`${l}+s`],description:(0,r.t)("help-modal.shortcuts-description.save-dashboard","Save dashboard")},{keys:["d","r"],description:(0,r.t)("help-modal.shortcuts-description.refresh-all-panels","Refresh all panels")},{keys:["d","s"],description:(0,r.t)("help-modal.shortcuts-description.dashboard-settings","Dashboard settings")},{keys:["d","v"],description:(0,r.t)("help-modal.shortcuts-description.toggle-active-mode","Toggle in-active / view mode")},{keys:["d","k"],description:(0,r.t)("help-modal.shortcuts-description.toggle-kiosk","Toggle kiosk mode (hides top nav)")},{keys:["d","E"],description:(0,r.t)("help-modal.shortcuts-description.expand-all-rows","Expand all rows")},{keys:["d","C"],description:(0,r.t)("help-modal.shortcuts-description.collapse-all-rows","Collapse all rows")},{keys:["d","a"],description:(0,r.t)("help-modal.shortcuts-description.toggle-auto-fit","Toggle auto fit panels (experimental feature)")},{keys:[`${l} + o`],description:(0,r.t)("help-modal.shortcuts-description.toggle-graph-crosshair","Toggle shared graph crosshair")},{keys:["d","l"],description:(0,r.t)("help-modal.shortcuts-description.toggle-all-panel-legends","Toggle all panel legends")},{keys:["d","x"],description:(0,r.t)("help-modal.shortcuts-description.toggle-exemplars","Toggle exemplars in all panel")}]},{category:(0,r.t)("help-modal.shortcuts-category.focused-panel","Focused Panel"),shortcuts:[{keys:["e"],description:(0,r.t)("help-modal.shortcuts-description.toggle-panel-edit","Toggle panel edit view")},{keys:["v"],description:(0,r.t)("help-modal.shortcuts-description.toggle-panel-fullscreen","Toggle panel fullscreen view")},{keys:["p","s"],description:(0,r.t)("help-modal.shortcuts-description.open-shared-modal","Open Panel Share Modal")},{keys:["p","d"],description:(0,r.t)("help-modal.shortcuts-description.duplicate-panel","Duplicate Panel")},{keys:["p","r"],description:(0,r.t)("help-modal.shortcuts-description.remove-panel","Remove Panel")},{keys:["p","l"],description:(0,r.t)("help-modal.shortcuts-description.toggle-panel-legend","Toggle panel legend")}]},{category:(0,r.t)("help-modal.shortcuts-category.time-range","Time Range"),shortcuts:[{keys:["t","z"],description:(0,r.t)("help-modal.shortcuts-description.zoom-out-time-range","Zoom out time range")},{keys:["t","\u2190"],description:(0,r.t)("help-modal.shortcuts-description.move-time-range-back","Move time range back")},{keys:["t","\u2192"],description:(0,r.t)("help-modal.shortcuts-description.move-time-range-forward","Move time range forward")},{keys:["t","a"],description:(0,r.t)("help-modal.shortcuts-description.make-time-range-permanent","Make time range absolute/permanent")},{keys:["t","c"],description:(0,r.t)("help-modal.shortcuts-description.copy-time-range","Copy time range")},{keys:["t","v"],description:(0,r.t)("help-modal.shortcuts-description.paste-time-range","Paste time range")}]}],d=({onDismiss:l})=>{const f=(0,o.of)(i),c=(0,n.useMemo)(()=>(0,g.gn)(),[]),h=(0,n.useMemo)(()=>u(c),[c]);return n.createElement(s.a,{title:(0,r.t)("help-modal.title","Shortcuts"),isOpen:!0,onDismiss:l,onClickBackdrop:l},n.createElement("div",{className:f.categories},Object.values(h).map(({category:p,shortcuts:m},a)=>n.createElement("div",{className:f.shortcutCategory,key:a},n.createElement("table",{className:f.shortcutTable},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",{className:f.shortcutTableCategoryHeader,colSpan:2},p)),m.map((v,E)=>n.createElement("tr",{key:`${a}-${E}`},n.createElement("td",{className:f.shortcutTableKeys},v.keys.map((D,b)=>n.createElement("span",{className:f.shortcutTableKey,key:`${a}-${E}-${b}`},D))),n.createElement("td",{className:f.shortcutTableDescription},v.description)))))))))};function i(l){return{titleDescription:(0,t.css)({fontSize:l.typography.bodySmall.fontSize,fontWeight:l.typography.bodySmall.fontWeight,color:l.colors.text.disabled,paddingBottom:l.spacing(2)}),categories:(0,t.css)({fontSize:l.typography.bodySmall.fontSize,display:"flex",flexFlow:"row wrap",justifyContent:"space-between",alignItems:"flex-start"}),shortcutCategory:(0,t.css)({width:"50%",fontSize:l.typography.bodySmall.fontSize}),shortcutTable:(0,t.css)({marginBottom:l.spacing(2)}),shortcutTableCategoryHeader:(0,t.css)({fontWeight:"normal",fontSize:l.typography.h6.fontSize,textAlign:"left"}),shortcutTableDescription:(0,t.css)({textAlign:"left",color:l.colors.text.disabled,width:"99%",padding:l.spacing(1,2)}),shortcutTableKeys:(0,t.css)({whiteSpace:"nowrap",width:"1%",textAlign:"right",color:l.colors.text.primary}),shortcutTableKey:(0,t.css)({display:"inline-block",textAlign:"center",marginRight:l.spacing(.5),padding:"3px 5px",font:"11px Consolas, 'Liberation Mono', Menlo, Courier, monospace",lineHeight:"10px",verticalAlign:"middle",border:`solid 1px ${l.colors.border.medium}`,borderRadius:l.shape.radius.default,color:l.colors.text.primary,backgroundColor:l.colors.background.secondary})}}},2913:(Y,A,e)=>{"use strict";e.d(A,{$W:()=>n.$,Ay:()=>s,yn:()=>u,zj:()=>r});var t=e(43429),n=e(32264);let o=n.$;const s=o,r=()=>o,g=d=>{o={...o,...d}},u=n.$.panels?.debug?.state===t.pn.alpha},15054:(Y,A,e)=>{"use strict";e.d(A,{FG:()=>c,HG:()=>r,IZ:()=>l,MM:()=>p,Pz:()=>s,bJ:()=>u,cV:()=>o,cx:()=>d,dU:()=>n,o9:()=>g,sD:()=>t,tH:()=>i,wV:()=>h});const t=30,n=8,o=24,s="v",r="h",g=4,u=250,d=t*3,i="panel-copy",l=2,f=23763571993,c=40,h="VisualizationSelectPane.ListMode",p="WidgetSelectPane.ListMode"},76888:(Y,A,e)=>{"use strict";e.d(A,{Il:()=>s,YE:()=>o,ni:()=>r});var t=e(96540),n=e(12131);const o=t.createContext(void 0);function s(){const g=(0,t.useContext)(o);if(!g)throw new Error("No GrafanaContext found");return g}function r(){const{chrome:g}=s();return(0,t.useCallback)((u,d)=>{const{pathname:i,search:l}=n.Ny.getLocation();g.setReturnToPrevious({title:u,href:d??i+l})},[g])}},3169:(Y,A,e)=>{"use strict";e.d(A,{_2:()=>c,gi:()=>l,q8:()=>f,tZ:()=>i});var t=e(96540),n=e(62938),o=e(94954),s=e(80348),r=e(82467);const g={title:"",text:"",severity:s.AppNotificationSeverity.Success,icon:"check"},u={title:"",text:"",severity:s.AppNotificationSeverity.Warning,icon:"exclamation-triangle"},d={title:"",text:"",severity:s.AppNotificationSeverity.Error,icon:"exclamation-triangle"},i=(h,p="",m)=>({...g,title:h,text:p,id:(0,n.A)(),timestamp:Date.now(),showing:!0}),l=(h,p="",m,a)=>({...d,text:(0,o.q)(p),title:h,id:(0,n.A)(),traceId:m,component:a,timestamp:Date.now(),showing:!0}),f=(h,p="",m)=>({...u,title:h,text:p,traceId:m,id:(0,n.A)(),timestamp:Date.now(),showing:!0});function c(){const h=(0,s.useDispatch)();return(0,t.useMemo)(()=>({success:(p,m="")=>{h((0,r.dx)(i(p,m)))},warning:(p,m="",a)=>{h((0,r.dx)(f(p,m,a)))},error:(p,m="",a)=>{h((0,r.dx)(l(p,m,a)))}}),[h])}},10096:(Y,A,e)=>{"use strict";e.d(A,{Ef:()=>n.E,TP:()=>o.TP,lE:()=>t.A,rO:()=>s.r});var t=e(28138),n=e(18898),o=e(16233),s=e(31140)},53919:(Y,A,e)=>{"use strict";e.d(A,{$H:()=>a,Ay:()=>v});var t=e(2543),n=e(33390),o=e(38877),s=e(19347);const r=x=>{const S=(0,s.l)().getInstanceSettings(x.datasourceName);return{id:x.ts.toString(),createdAt:x.ts,datasourceName:x.datasourceName,datasourceUid:S?.uid||"",starred:x.starred,comment:x.comment,queries:x.queries}},g=x=>{if(!(0,s.l)().getInstanceSettings({uid:x.datasourceUid}))throw new Error("Datasource not found.");return{ts:x.createdAt,datasourceName:x.datasourceName,starred:x.starred,comment:x.comment,queries:x.queries}};var u=e(91650);function d(x,S,O,C,L){const U=f(x,O),R=c(U,C),B=L?l(R,L):R;return h(B,S)}const i=(x,S)=>{const O=new Date,C=new Date(O.setDate(O.getDate()-x));return S?C.setHours(24,0,0,0):C.setHours(0,0,0,0)};function l(x,S){const O=i(S[0],!0),C=i(S[1],!1);return x.filter(L=>L.createdAt<O&&L.createdAt>C)}function f(x,S){return S.length>0?x.filter(O=>S.includes(O.datasourceName)):x}function c(x,S){return x.filter(O=>O.comment.includes(S)?!0:O.queries.filter(L=>Object.values((0,t.omit)(L,["datasource","key","refId","hide","queryType"])).some(U=>U?.toString().includes(S))).length>0)}const h=(x,S)=>{let O;return S===u.x.Ascending&&(O=(C,L)=>C.createdAt<L.createdAt?-1:C.createdAt>L.createdAt?1:0),S===u.x.Descending&&(O=(C,L)=>C.createdAt<L.createdAt?1:C.createdAt>L.createdAt?-1:0),S===u.x.DatasourceZA&&(O=(C,L)=>C.datasourceName<L.datasourceName?-1:C.datasourceName>L.datasourceName?1:0),S===u.x.DatasourceAZ&&(O=(C,L)=>C.datasourceName<L.datasourceName?1:C.datasourceName>L.datasourceName?-1:0),x.sort(O)},p={retentionPeriod:"grafana.explore.richHistory.retentionPeriod",starredTabAsFirstTab:"grafana.explore.richHistory.starredTabAsFirstTab",activeDatasourceOnly:"grafana.explore.richHistory.activeDatasourceOnly",datasourceFilters:"grafana.explore.richHistory.datasourceFilters"},m="grafana.explore.richHistory",a=1e4;class v{async getRichHistory(S){const O=P().map(r),C=S.starred?O.filter(U=>U.starred===!0):O,L=d(C,S.sortOrder,S.datasourceFilters,S.search,[S.from,S.to]);return{richHistory:L,total:L.length}}async addToRichHistory(S){const O=Date.now(),C={id:O.toString(),createdAt:O,...S},L=g(C),U=D(P()),R=L.queries.map(V=>(0,t.omit)(V,["key","refId"])),B=U.length>0&&U[0].queries.map(V=>(0,t.omit)(V,["key","refId"]));if((0,t.isEqual)(R,B)){const V=new Error("Entry already exists");throw V.name=o.m.DuplicatedEntry,V}const{queriesToKeep:H,limitExceeded:W}=b(U),N=[L,...H];try{n.A.setObject(m,N)}catch(V){if(V instanceof Error&&V.name==="QuotaExceededError")I(o.m.StorageFull,`Saving rich history failed: ${V.message}`);else throw V}return W?{warning:{type:o.C.LimitExceeded,message:`Query history reached the limit of ${a}. Old, not-starred items have been removed.`},richHistoryQuery:C}:{richHistoryQuery:C}}async deleteAll(){n.A.delete(m)}async deleteRichHistory(S){const O=parseInt(S,10),L=n.A.getObject(m,[]).filter(U=>U.ts!==O);n.A.setObject(m,L)}async updateStarred(S,O){return E(S,C=>C.starred=O)}async updateComment(S,O){return E(S,C=>C.comment=O)}async getSettings(){return{activeDatasourceOnly:n.A.getObject(p.activeDatasourceOnly,!1),retentionPeriod:n.A.getObject(p.retentionPeriod,7),starredTabAsFirstTab:n.A.getBool(p.starredTabAsFirstTab,!1),lastUsedDatasourceFilters:n.A.getObject(p.datasourceFilters,[]).map(S=>S.value)}}async updateSettings(S){n.A.set(p.activeDatasourceOnly,S.activeDatasourceOnly),n.A.set(p.retentionPeriod,S.retentionPeriod),n.A.set(p.starredTabAsFirstTab,S.starredTabAsFirstTab),n.A.setObject(p.datasourceFilters,(S.lastUsedDatasourceFilters||[]).map(O=>({value:O})))}}function E(x,S){const O=parseInt(x,10),C=n.A.getObject(m,[]),L=(0,t.find)(C,{ts:O});if(!L)throw new Error("Rich history item not found.");return S(L),n.A.setObject(m,C),r(L)}function D(x){const S=n.A.getObject(p.retentionPeriod,7),O=i(S,!1);return x.filter(C=>C.ts>O||C.starred===!0)||[]}function b(x){let S=!1,O=x.length-1;for(;O>=0&&x.length>=a;)x[O].starred||(x.splice(O,1),S=!0),O--;return{queriesToKeep:x,limitExceeded:S}}function P(){const x=n.A.getObject(m,[]);return y(x)}function y(x){return x.map(O=>{const C=O.queries.map((L,U)=>T(O,L,U));return{...O,queries:C}})}function T(x,S,O){const C="ABCDEFGHIJKLMNOPQRSTUVXYZ";return typeof S=="object"?S:M(S)?JSON.parse(S):{expr:S,refId:C[O]}}function M(x){try{JSON.parse(x)}catch{return!1}return!0}function I(x,S){const O=new Error(S);throw O.name=x,O}},38877:(Y,A,e)=>{"use strict";e.d(A,{C:()=>n,m:()=>t});var t=(o=>(o.StorageFull="StorageFull",o.DuplicatedEntry="DuplicatedEntry",o))(t||{}),n=(o=>(o.LimitExceeded="LimitExceeded",o))(n||{})},11401:(Y,A,e)=>{"use strict";e.d(A,{a:()=>m,g:()=>a});var t=e(32264),n=e(10096),o=e(91650),s=e(53919),r=e(75505),g=e(17172),u=e(19347),d=e(65615);const i=v=>{const E=(0,u.l)().getInstanceSettings({uid:v.datasourceUid});return{id:v.uid,createdAt:v.createdAt*1e3,datasourceName:E?.name||"",datasourceUid:v.datasourceUid,starred:v.starred,comment:v.comment,queries:v.queries}},l=v=>({uid:v.id,createdAt:Math.floor(v.createdAt/1e3),datasourceUid:v.datasourceUid,starred:v.starred,comment:v.comment,queries:v.queries});class f{constructor(){this.preferenceService=new d.W("user")}async addToRichHistory(E){const{result:D}=await(0,g.AI)().post("/api/query-history",{dataSourceUid:E.datasourceUid,queries:E.queries});return{richHistoryQuery:i(D)}}async deleteAll(){throw new Error("not supported")}async deleteRichHistory(E){(0,g.AI)().delete(`/api/query-history/${E}`)}async getRichHistory(E){const D=c(E);let b="query-history-get-all";E.starred&&(b="query-history-get-starred");const y=(await(0,r.s)((0,g.AI)().fetch({method:"GET",url:`/api/query-history?${D}`,requestId:b}))).data,T=(y.result.queryHistory||[]).map(i),M=y.result.totalCount||0;return{richHistory:T,total:M}}async getSettings(){return{activeDatasourceOnly:!1,lastUsedDatasourceFilters:void 0,retentionPeriod:14,starredTabAsFirstTab:(await this.preferenceService.load()).queryHistory?.homeTab==="starred"}}async updateComment(E,D){const b=await(0,g.AI)().patch(`/api/query-history/${E}`,{comment:D});return i(b.result)}updateSettings(E){return this.preferenceService.patch({queryHistory:{homeTab:E.starredTabAsFirstTab?"starred":"query"}})}async updateStarred(E,D){let b;return D?b=await(0,g.AI)().post(`/api/query-history/star/${E}`):b=await(0,g.AI)().delete(`/api/query-history/star/${E}`),i(b.result)}}function c(v){let E=`${v.datasourceFilters.map(D=>{const b=(0,u.l)().getInstanceSettings(D).uid;return`datasourceUid=${encodeURIComponent(b)}`}).join("&")}`;if(v.search&&(E=E+`&searchString=${v.search}`),v.sortOrder&&(E=E+`&sort=${v.sortOrder===o.x.Ascending?"time-asc":"time-desc"}`),!v.starred){const D=v.from===0?"now":`now-${v.from}d`,b=v.to===0?"now":`now-${v.to}d`;E=E+`&to=${D}`,E=E+`&from=${b}`}return E=E+"&limit=100",E=E+`&page=${v.page||1}`,v.starred&&(E=E+`&onlyStarred=${v.starred}`),E}const h=new s.Ay,p=new f,m=()=>t.$.queryHistoryEnabled?p:h,a=()=>t.$.queryHistoryEnabled?{availableFilters:[o.x.Descending,o.x.Ascending],lastUsedDataSourcesAvailable:!1,clearHistory:!1,onlyActiveDataSource:!1,changeRetention:!1,queryHistoryAvailable:n.TP.isSignedIn}:{availableFilters:[o.x.Descending,o.x.Ascending,o.x.DatasourceAZ,o.x.DatasourceZA],lastUsedDataSourcesAvailable:!0,clearHistory:!0,onlyActiveDataSource:!0,changeRetention:!0,queryHistoryAvailable:!0}},16021:(Y,A,e)=>{"use strict";e.d(A,{u:()=>n});var t=e(96540);function n(o,s){const[r,g]=(0,t.useState)();return(0,t.useEffect)(()=>{const u=o.subscribe(s,g);return()=>u.unsubscribe()},[o,s]),r}},60619:(Y,A,e)=>{"use strict";e.d(A,{Y:()=>n});var t=e(96540);function n({breakpoint:o,onChange:s}){(0,t.useEffect)(()=>{const r=window.matchMedia(`(min-width: ${o}px)`),g=u=>s(u);return r.addEventListener("change",g),()=>r.removeEventListener("change",g)},[o,s])}},25249:(Y,A,e)=>{"use strict";e.d(A,{C:()=>o});var t=e(80348),n=e(17422);const o=s=>{const r=(0,t.useSelector)(g=>g.navIndex);return(0,n.tc)(r,s)}},83277:(Y,A,e)=>{"use strict";e.d(A,{s:()=>s});var t=e(96540),n=e(24180),o=e(12131);function s(){const{search:r}=(0,n.zy)(),g=(0,t.useMemo)(()=>(0,o.SE)(r||""),[r]),u=(0,t.useCallback)((d,i)=>o.Ny.partial(d,i),[]);return[g,u]}},74513:(Y,A,e)=>{"use strict";e.d(A,{Yj:()=>d,rd:()=>i});const t="en-US",n="fr-FR",o="es-ES",s="de-DE",r="zh-Hans",g="pseudo-LOCALE",u=null,d=[{code:t,name:"English",loader:()=>e.e(9521).then(e.t.bind(e,19521,19))},{code:n,name:"Fran\xE7ais",loader:()=>e.e(5648).then(e.t.bind(e,35648,19))},{code:o,name:"Espa\xF1ol",loader:()=>e.e(680).then(e.t.bind(e,70680,19))},{code:s,name:"Deutsch",loader:()=>e.e(3082).then(e.t.bind(e,23082,19))},{code:r,name:"\u4E2D\u6587\uFF08\u7B80\u4F53\uFF09",loader:()=>e.e(9538).then(e.t.bind(e,29538,19))}],i=d.map(l=>l.code)},44836:(Y,A,e)=>{"use strict";e.d(A,{JL:()=>i,Xj:()=>p,t:()=>h,x6:()=>f});var t=e(72635),n=e(94997),o=e(96540),s=e(65414),r=e(52822),g=e(74513);const u=m=>m.split("-")[0].toLowerCase(),d={type:"backend",init(){},async read(m,a,v){let E=g.Yj.find(b=>b.code===m);if(E||(E=g.Yj.find(b=>u(b.code)===u(m))),!E)return v(new Error("No message loader available for "+m),null);const D=await E.loader();v(null,D)}};function i(m){const a={partialBundledLanguages:!0,resources:{},returnEmptyString:!1};let v=t.default;if(m==="detect"){v=v.use(n.A);const E={order:["navigator"],caches:[]};a.detection=E}else a.lng=g.rd.includes(m)?m:void 0;return v.use(d).use(s.r9).init(a)}function l(m){const a=VALID_LANGUAGES.includes(m)?m:void 0;return i18n.changeLanguage(a)}const f=m=>o.createElement(r.x,{shouldUnescape:!0,...m}),c=t.default.t,h=(m,a,v)=>c(m,a,v),p=(m,a={})=>typeof m=="string"?p(new Date(m),a):new Intl.DateTimeFormat(t.default.language,a).format(m)},18898:(Y,A,e)=>{"use strict";e.d(A,{E:()=>n});class t{constructor(){this.panelsRendered=0,this.enabled=void 0}renderingCompleted(){this.panelsRendered+=1,window.panelsRendered=this.panelsRendered}}const n=new t},16001:(Y,A,e)=>{"use strict";e.d(A,{$K:()=>m,Do:()=>l,XC:()=>c,XR:()=>f,dx:()=>i,fX:()=>D,g5:()=>p,oF:()=>h,qN:()=>E});var t=e(30038),n=e(1081),o=e(80348);const s=25,r="notifications",g=`${r}/lastRead`,u={byId:T(),lastRead:Number.parseInt(window.localStorage.getItem(g)??`${Date.now()}`,10)},d=(0,t.Z0)({name:"appNotifications",initialState:u,reducers:{notifyApp:(I,{payload:x})=>{Object.values(I.byId).some(S=>b(x,S)&&S.showing)||(I.byId[x.id]=x,M(I.byId))},hideAppNotification:(I,{payload:x})=>{x in I.byId&&(I.byId[x].showing=!1,M(I.byId))},clearNotification:(I,{payload:x})=>{delete I.byId[x],M(I.byId)},clearAllNotifications:I=>{I.byId={},M(I.byId)},readAllNotifications:(I,{payload:x})=>{I.lastRead=x}}}),{notifyApp:i,hideAppNotification:l,clearNotification:f,clearAllNotifications:c,readAllNotifications:h}=d.actions,p=d.reducer,m=I=>I.lastRead,a=I=>I.byId,v=(0,n.Mz)(a,I=>Object.values(I).sort((x,S)=>S.timestamp-x.timestamp)),E=(0,n.Mz)(v,I=>I.filter(P)),D=(0,n.Mz)(a,I=>Object.values(I).filter(x=>x.showing));function b(I,x){return I.icon===x.icon&&I.severity===x.severity&&I.text===x.text&&I.title===x.title}function P(I){return I.severity===o.AppNotificationSeverity.Warning||I.severity===o.AppNotificationSeverity.Error}function y(I){return typeof I=="object"&&I!==null&&"id"in I&&"icon"in I&&"title"in I&&"text"in I}function T(){const I=window.localStorage.getItem(r);if(!I)return{};const x=JSON.parse(I);return Object.values(x).every(S=>y(S))?x:{}}function M(I){const x=Object.values(I).filter(P).sort((S,O)=>O.timestamp-S.timestamp).slice(0,s).reduce((S,O)=>(S[O.id]={id:O.id,severity:O.severity,icon:O.icon,title:O.title,text:O.text,traceId:O.traceId,timestamp:O.timestamp,showing:!1},S),{});try{window.localStorage.setItem(r,JSON.stringify(x))}catch(S){console.error("Unable to persist notifications to local storage"),console.error(S)}}},91219:(Y,A,e)=>{"use strict";e.d(A,{I_:()=>f,TU:()=>l,ci:()=>d,fc:()=>i});var t=e(30038),n=e(32264),o=e(36689);const s=n.$.bootData?.navTree??[];function r(c){return c.map(h=>{const p=h.children&&r(h.children);return{...h,children:p,text:(0,o.C)(h.id)??h.text,subTitle:(0,o.o)(h.id)??h.subTitle,emptyMessage:(0,o.C)(h.emptyMessageId)}})}const g="starred/",u=(0,t.Z0)({name:"navBarTree",initialState:()=>r(n.$.bootData?.navTree??[]),reducers:{setStarred:(c,h)=>{const p=c.find(D=>D.id==="starred"),{id:m,title:a,url:v,isStarred:E}=h.payload;if(p)if(E){p.children||(p.children=[]);const D={id:g+m,text:a,url:v};p.children.push(D),p.children.sort((b,P)=>b.text.localeCompare(P.text))}else{const D=p.children?.findIndex(b=>b.id===g+m)??-1;D>-1&&p?.children?.splice(D,1)}},updateDashboardName:(c,h)=>{const{id:p,title:m,url:a}=h.payload,v=c.find(E=>E.id==="starred");if(v){const E=v.children?.find(D=>D.id===p);E&&(E.text=m,E.url=a,v.children?.sort((D,b)=>D.text.localeCompare(b.text)))}},removePluginFromNavTree:(c,h)=>{const p="plugin-page-"+h.payload.pluginID,m=c.findIndex(a=>a.id===p);m>-1&&c.splice(m,1)}}}),{setStarred:d,removePluginFromNavTree:i,updateDashboardName:l}=u.actions,f=u.reducer},28215:(Y,A,e)=>{"use strict";e.d(A,{Id:()=>g,Vz:()=>f,YA:()=>c,_h:()=>p,s2:()=>u});var t=e(30038),n=e(2543),o=e.n(n),s=e(2913),r=e(36689);const g="home";function u(){const m={},a=(0,n.cloneDeep)(s.Ay.bootData.navTree),v=a.find(D=>D.id===g),E=a.filter(D=>D.id!==g);return v&&d(m,[v]),d(m,E,m[g]),m}function d(m,a,v){const E=[];for(const D of a){const b={...D,text:(0,r.C)(D.id)??D.text,subTitle:(0,r.o)(D.id)??D.subTitle,emptyMessage:(0,r.C)(D.emptyMessageId),parentItem:v};b.id&&(m[b.id]=b),b.children&&d(m,b.children,b),E.push(b)}v&&(v.children=E),m["not-found"]={...i("Page not found","404 Error").node},m.error={...i("Page error","An unexpected error").node}}function i(m,a){const v={text:m,subTitle:a,icon:"exclamation-triangle"};return{node:v,main:v}}const l={},f=(0,t.VP)("navIndex/updateNavIndex"),c=(0,t.VP)("navIndex/updateConfigurationSubtitle"),h=(m,a)=>({...m,parentItem:{...m.parentItem,text:m.parentItem?.text??"",subTitle:a}}),p=(m=l,a)=>{if(f.match(a)){let E=function(P){if(P.children)for(const y of P.children)D[y.id]={...y,parentItem:P};P.parentItem&&E(P.parentItem)};var v=E;const D={},b=a.payload;return E(b),{...m,...D}}else if(c.match(a)){const E=`Organization: ${a.payload}`;return{...m,cfg:{...m.cfg,subTitle:E},datasources:h(m.datasources,E),correlations:h(m.correlations,E),users:h(m.users,E),teams:h(m.teams,E),plugins:h(m.plugins,E),"org-settings":h(m["org-settings"],E),apikeys:h(m.apikeys,E)}}return m}},17422:(Y,A,e)=>{"use strict";e.d(A,{rH:()=>g,tc:()=>r});var t=e(41811),n=e(71101),o=e(28215);const s=()=>{const i={id:"not-found",text:"Page not found",icon:"exclamation-triangle",subTitle:"404 Error",url:"not-found"};return{node:i,main:i}},r=(0,t.A)((i,l,f,c=!1)=>{if(i[l]){const h=i[l],p=c?h:g(h),m=u(p,l);return{node:h,main:m}}return f||s()});function g(i){return i.id===n.Rj?i:i.parentItem&&i.parentItem.id!==o.Id?g(i.parentItem):i}function u(i,l){return i.id===l?{...i,active:!0}:i.children&&i.children.length>0?{...i,children:i.children.map(f=>u(f,l))}:i}const d=i=>`${i.main.text}${i.node.text?": "+i.node.text:""}`},65615:(Y,A,e)=>{"use strict";e.d(A,{W:()=>n});var t=e(27677);class n{constructor(s){this.resourceUri=s}update(s){return t.IB.put(`/api/${this.resourceUri}/preferences`,s)}patch(s){return t.IB.patch(`/api/${this.resourceUri}/preferences`,s)}load(){return t.IB.get(`/api/${this.resourceUri}/preferences`)}}},2619:(Y,A,e)=>{"use strict";e.d(A,{Q:()=>s});var t=e(96540),n=e(13752),o=e(69731);class s{constructor(u){this._subject=new n.B,this._state=u}useState(){return r(this)}get state(){return this._state}setState(u){this._state={...this._state,...u},this._subject.next(this._state)}subscribeToState(u){return this._subject.subscribe(u)}}function r(g){const u=(0,o.C)();return(0,t.useEffect)(()=>{const d=g.subscribeToState({next:u});return()=>d.unsubscribe()},[g,u]),g.state}},27677:(Y,A,e)=>{"use strict";e.d(A,{Mf:()=>he,IB:()=>Te,AI:()=>Be});var t=e(56568),n=e(13752),o=e(75505),s=e(88483),r=e(64423),g=e(13288),u=e(65474),d=e(20039),i=e(81160),l=e(69862),f=e(59099),c=e(37748),h=e(66847),p=e(67791),m=e(16126),a=e(41560),v=e(69850),E=e(1005),D=e(62938),b=e(26272),P=e(40187),y=e(32264),T=e(28138),M=e(2913),I=e(92315),x=e(67027),S=e(32196),O=e(96540),C=e(40845),L=e(17464),U=e(37166),R=e(55852),B=e(88448);const H=we=>{const Ne=(0,C.of)(W),Ze=(0,C.$j)(),st=(0,B.o)(Ze),Qe=!!we.maxConcurrentSessions,ke=()=>{window.location.reload()};return O.createElement(L.ZL,null,O.createElement("div",{className:st.modal},O.createElement(U.w,{title:"You have been automatically signed out",severity:"warning",className:Ne.infobox},O.createElement("div",{className:Ne.text},O.createElement("p",null,"Your session token was automatically revoked because you have reached",O.createElement("strong",null,` the maximum number of ${Qe?we.maxConcurrentSessions:""} concurrent sessions `),"for your account."),O.createElement("p",null,O.createElement("strong",null,"To resume your session, sign in again."),"Contact your administrator or visit the license page to review your quota if you are repeatedly signed out automatically.")),O.createElement(R.$n,{size:"md",variant:"primary",onClick:ke},"Sign in"))),O.createElement("div",{className:(0,S.cx)(st.modalBackdrop,Ne.backdrop)}))},W=we=>({infobox:(0,S.css)`
    margin-bottom: 0;
  `,text:(0,S.css)`
    margin: ${we.spacing(1,0,2)};
  `,backdrop:(0,S.css)`
    background-color: ${we.colors.background.canvas};
    opacity: 0.8;
  `});var N=e(28444),V=e(2543),G=e(95344);const _=we=>{const Ne=we.method,Ze=Z(we),st=ne(Ze),Qe=q(we,st),ke=ie(we);return{method:Ne,headers:Ze,body:Qe,credentials:ke}},K={canParse:()=>!0,parse:we=>(we.get("accept")||we.set("accept","application/json, text/plain, */*"),we)},j=we=>({canParse:Ne=>(Ne?.method?Ne?.method.toLowerCase():"")===we,parse:Ne=>(Ne.get("content-type")||Ne.set("content-type","application/json"),Ne)}),k=j("post"),Q=j("put"),ee=j("patch"),ae=[k,Q,ee,K],Z=we=>{const Ne=we?.headers?new Headers(we.headers):new Headers;return ae.filter(Qe=>Qe.canParse(we)).reduce((Qe,ke)=>ke.parse(Qe),Ne)},ne=we=>{if(!we)return!1;const Ne=we.get("content-type");return!!(Ne&&Ne.toLowerCase()==="application/json")},q=(we,Ne)=>we&&(!we.data||typeof we.data=="string"||we.data instanceof Blob?we.data:Ne?JSON.stringify(we.data):new URLSearchParams(we.data));async function te(we,Ne){if(Ne)switch(Ne){case"arraybuffer":return we.arrayBuffer();case"blob":return we.blob();case"json":return we.headers.get("Content-Length")==="0"?(console.warn(`${we.url} returned an invalid JSON`),{}):await we.json();case"text":return we.text()}const Ze=await we.text();try{return JSON.parse(Ze)}catch{}return Ze}function re(we){return Object.keys(we).map(Ne=>{const Ze=we[Ne];return Array.isArray(Ze)?Ze.map(st=>`${encodeURIComponent(Ne)}=${encodeURIComponent(st)}`).join("&"):`${encodeURIComponent(Ne)}=${encodeURIComponent(Ze)}`}).join("&")}const de=we=>{const Ne=(0,V.omitBy)(we.params,st=>st===void 0||st&&st.length===0),Ze=re(Ne);return we.params&&Ze.length?`${we.url}?${Ze}`:we.url},ie=we=>we&&(we.credentials?we.credentials:we.withCredentials?((0,G.l)("BackendSrvRequest","withCredentials","credentials"),"include"):"same-origin");var ge=e(21969),ve=(we=>(we[we.Pending=0]="Pending",we[we.InProgress=1]="InProgress",we[we.Done=2]="Done",we))(ve||{});class ye{constructor(Ne=!1){this.state={},this.queue=new n.B,this.updates=new n.B,this.add=(Ze,st)=>this.queue.next({id:Ze,options:st,state:0}),this.setInProgress=Ze=>this.queue.next({id:Ze,state:1}),this.setDone=Ze=>this.queue.next({id:Ze,state:2}),this.getUpdates=()=>this.updates.asObservable(),this.getUpdate=Ze=>{const st=Object.keys(Ze).filter(ke=>Ze[ke].state===1).length;return{noOfPending:Object.keys(Ze).filter(ke=>Ze[ke].state===0).length,noOfInProgress:st,state:Ze}},this.publishUpdate=(Ze,st)=>{this.printState(Ze,st),this.updates.next(Ze)},this.printState=(Ze,st)=>{if(!st)return;const Qe=Object.keys(Ze.state).reduce((ke,je)=>{const He={id:je,state:Ze.state[je].state};return ke.push(He),ke},[]);console.log("FetchQueue noOfStarted",Ze.noOfInProgress),console.log("FetchQueue noOfNotStarted",Ze.noOfPending),console.log("FetchQueue state",Qe)},this.queue.subscribe(Ze=>{const{id:st,state:Qe,options:ke}=Ze;if(this.state[st]||(this.state[st]={state:0,options:{url:""}}),Qe===2){delete this.state[st];const He=this.getUpdate(this.state);this.publishUpdate(He,Ne);return}this.state[st].state=Qe,ke&&(this.state[st].options=ke);const je=this.getUpdate(this.state);this.publishUpdate(je,Ne)})}}var pe=e(95864);class le{constructor(Ne,Ze,st){const Qe=st?.http2Enabled?1e3:5;Ne.getUpdates().pipe((0,m.p)(({noOfPending:ke})=>ke>0),(0,pe.H)(({state:ke,noOfInProgress:je})=>{const He=Object.keys(ke).filter(Ee=>ke[Ee].state===ve.Pending&&!(0,ge.dr)(ke[Ee].options.url)).reduce((Ee,J)=>{const oe={id:J,options:ke[J].options};return Ee.push(oe),Ee},[]),Ge=Object.keys(ke).filter(Ee=>ke[Ee].state===ve.Pending&&(0,ge.dr)(ke[Ee].options.url)).reduce((Ee,J)=>{const oe={id:J,options:ke[J].options};return Ee.push(oe),Ee},[]),Oe=Math.max(Qe-je-He.length,0),Ke=Ge.slice(0,Oe);return He.concat(Ke)})).subscribe(({id:ke,options:je})=>{Ze.add(ke,je)})}}class Me{constructor(Ne,Ze){this.queue=new n.B,this.responses=new n.B,this.add=(st,Qe)=>{this.queue.next({id:st,options:Qe})},this.getResponses=st=>this.responses.asObservable().pipe((0,m.p)(Qe=>Qe.id===st)),this.queue.subscribe(st=>{const{id:Qe,options:ke}=st;Ne.setInProgress(Qe),this.responses.next({id:Qe,observable:Ze(ke)})})}}var De=e(16233);const Re="cancel_all_requests_request_id",me="grafana-trace-id";class he{constructor(Ne){this.inFlightRequests=new n.B,this.HTTP_REQUEST_CANCELED=-1,this.inspectorStream=new n.B,this._tokenRotationInProgress=null,this.deviceID=null,this.dependencies={fromFetch:d.$,appEvents:T.A,contextSrv:De.TP,logout:()=>{De.TP.setLoggedOut()}},Ne&&(this.dependencies={...this.dependencies,...Ne}),this.noBackendCache=!1,this.internalFetch=this.internalFetch.bind(this),this.fetchQueue=new ye,this.responseQueue=new Me(this.fetchQueue,this.internalFetch),this.initGrafanaDeviceID(),new le(this.fetchQueue,this.responseQueue,(0,M.zj)())}async initGrafanaDeviceID(){try{const Ze=await(await t.Ay.load()).get();this.deviceID=Ze.visitorId}catch(Ne){console.error(Ne)}}async request(Ne){return await(0,o.s)(this.fetch(Ne).pipe((0,i.T)(Ze=>Ze.data)))}fetch(Ne){const Ze=(0,D.A)(),st=this.fetchQueue;return new s.c(Qe=>{const ke=new r.yU;return ke.add(this.responseQueue.getResponses(Ze).subscribe(je=>{ke.add(je.observable.subscribe(Qe))})),this.fetchQueue.add(Ze,Ne),function(){st.setDone(Ze),ke.unsubscribe()}})}internalFetch(Ne){Ne.requestId&&this.inFlightRequests.next(Ne.requestId),Ne=this.parseRequestOptions(Ne);const Ze=(0,x.r)();return Ze!==null&&Ze!==""&&y.$.jwtUrlLogin&&y.$.jwtHeaderName&&(Ne.headers=Ne.headers??{},Ne.headers[y.$.jwtHeaderName]=`${Ze}`),this.deviceID&&(Ne.headers=Ne.headers??{},Ne.headers["X-Grafana-Device-Id"]=`${this.deviceID}`),this.getFromFetchStream(Ne).pipe(this.handleStreamResponse(Ne),this.handleStreamError(Ne),this.handleStreamCancellation(Ne))}resolveCancelerIfExists(Ne){this.inFlightRequests.next(Ne)}cancelAllInFlightRequests(){this.inFlightRequests.next(Re)}async datasourceRequest(Ne){return(0,o.s)(this.fetch(Ne))}parseRequestOptions(Ne){const Ze=this.dependencies.contextSrv.user?.orgId;return Ne.retry=Ne.retry??0,(0,ge.Lr)(Ne.url)&&(Ze&&(Ne.headers=Ne.headers??{},Ne.headers["X-Grafana-Org-Id"]=Ze),Ne.url.startsWith("/")&&(Ne.url=Ne.url.substring(1)),Ne.headers?.Authorization&&(Ne.headers["X-DS-Authorization"]=Ne.headers.Authorization,delete Ne.headers.Authorization),this.noBackendCache&&(Ne.headers=Ne.headers??{},Ne.headers["X-Grafana-NoCache"]="true")),Ne.hideFromInspector===void 0&&(Ne.hideFromInspector=(0,ge.Lr)(Ne.url)&&!(0,ge.dr)(Ne.url)),Ne}getFromFetchStream(Ne){const Ze=de(Ne),st=_(Ne);return this.dependencies.fromFetch(Ze,st).pipe((0,l.Z)(async Qe=>{const{status:ke,statusText:je,ok:He,headers:Ge,url:Oe,type:Ke,redirected:Ee}=Qe,J=Ne.responseType??(ne(Ge)?"json":void 0),oe=await te(Qe,J);return{status:ke,statusText:je,ok:He,data:oe,headers:Ge,url:Oe,type:Ke,redirected:Ee,config:Ne,traceId:Qe.headers.get(me)??void 0}}))}showApplicationErrorAlert(Ne){}showSuccessAlert(Ne){const{config:Ze}=Ne;if(Ze.showSuccessAlert===!1||Ze.showSuccessAlert===void 0&&(Ze.method==="GET"||(0,ge.dr)(Ze.url)||!(0,ge.Lr)(Ze.url)))return;const st=Ne.data;st?.message&&this.dependencies.appEvents.emit(b.r1.alertSuccess,[st.message])}showErrorAlert(Ne,Ze){if(Ne.showErrorAlert===!1||Ne.showErrorAlert===void 0&&((0,ge.dr)(Ne.url)||!(0,ge.Lr)(Ne.url)))return;let st="",Qe=Ze.data.message;Qe==="Unexpected error"&&Ze.message&&(Qe=Ze.message),Qe.length>80&&(st=Qe,Qe="Error"),Ze.status===422&&(st=Ze.data.message,Qe="Validation failed"),this.dependencies.appEvents.emit(Ze.status<500?b.r1.alertWarning:b.r1.alertError,[Qe,st,Ze.data.traceID])}processRequestError(Ne,Ze){return Ze.data=Ze.data??{message:"Unexpected error"},typeof Ze.data=="string"&&(Ze.data={message:Ze.data,error:Ze.statusText,response:Ze.data}),Ze.data&&!Ze.data.message&&typeof Ze.data.error=="string"&&(Ze.data.message=Ze.data.error),Ze.data.message&&setTimeout(()=>{Ze.isHandled||this.showErrorAlert(Ne,Ze)},50),this.inspectorStream.next({response:Ze,requestId:Ne.requestId}),Ze}handleStreamResponse(Ne){return Ze=>Ze.pipe((0,i.T)(st=>{if(!st.ok){const{status:Qe,statusText:ke,data:je}=st;throw{status:Qe,statusText:ke,data:je,config:Ne,traceId:st.headers.get(me)??void 0}}return st}),(0,f.M)(st=>{this.showSuccessAlert(st),this.inspectorStream.next({response:st,requestId:Ne.requestId})}))}handleStreamError(Ne){const{isSignedIn:Ze}=this.dependencies.contextSrv.user;return st=>st.pipe((0,c.l)(Qe=>Qe.pipe((0,l.Z)((ke,je)=>{const He=je===0&&Ne.retry===0;if(ke.status===401&&(0,ge.Lr)(Ne.url)&&He&&Ze){if(ke.data?.error?.id==="ERR_TOKEN_REVOKED")return this.dependencies.appEvents.publish(new N.S8({component:H,props:{maxConcurrentSessions:ke.data?.error?.maxConcurrentSessions}})),(0,g.$)(()=>ke);let Ge=this.loginPing();return(0,I.W)()*1e3<Date.now()&&(Ge=this.rotateToken()),(0,u.H)(Ge).pipe((0,h.W)(Ke=>(Ke.status===401&&this.dependencies.logout(),(0,g.$)(Ke))))}return(0,g.$)(ke)}))),(0,h.W)(Qe=>(0,g.$)(()=>this.processRequestError(Ne,Qe))))}handleStreamCancellation(Ne){return Ze=>Ze.pipe((0,p.Q)(this.inFlightRequests.pipe((0,m.p)(st=>{let Qe=!1;return Ne&&Ne.requestId&&Ne.requestId===st&&(Qe=!0),st===Re&&(Qe=!0),Qe}))),(0,a.v)(()=>({type:P.v2.Cancelled,cancelled:!0,data:null,status:this.HTTP_REQUEST_CANCELED,statusText:"Request was aborted",config:Ne})))}getInspectorStream(){return this.inspectorStream}async get(Ne,Ze,st,Qe){return this.request({...Qe,method:"GET",url:Ne,params:Ze,requestId:st})}async delete(Ne,Ze,st){return this.request({...st,method:"DELETE",url:Ne,data:Ze})}async post(Ne,Ze,st){return this.request({...st,method:"POST",url:Ne,data:Ze})}async patch(Ne,Ze,st){return this.request({...st,method:"PATCH",url:Ne,data:Ze})}async put(Ne,Ze,st){return this.request({...st,method:"PUT",url:Ne,data:Ze})}withNoBackendCache(Ne){return this.noBackendCache=!0,Ne().finally(()=>{this.noBackendCache=!1})}rotateToken(){return this._tokenRotationInProgress?this._tokenRotationInProgress:(this._tokenRotationInProgress=this.fetch({url:"/api/user/auth-tokens/rotate",method:"POST",retry:1}).pipe((0,v.j)(()=>{this._tokenRotationInProgress=null}),(0,E.u)()),this._tokenRotationInProgress)}loginPing(){return this.fetch({url:"/api/login/ping",method:"GET",retry:1})}search(Ne){return this.get("/api/search",Ne)}getDashboardByUid(Ne){return this.get(`/api/dashboards/uid/${Ne}`)}validateDashboard(Ne){return Promise.resolve({isValid:!1,message:"dashboard validation is supported"})}getPublicDashboardByUid(Ne){return this.get(`/api/public/dashboards/${Ne}`)}getFolderByUid(Ne,Ze={}){const st=new URLSearchParams;return Ze.withAccessControl&&st.set("accesscontrol","true"),this.get(`/api/folders/${Ne}?${st.toString()}`,void 0,void 0,{showErrorAlert:!1})}}const Te=new he,Be=()=>Te},16233:(Y,A,e)=>{"use strict";e.d(A,{SM:()=>i,TP:()=>c});var t=e(2543),n=e.n(t),o=e(65879),s=e(17172),r=e(33378),g=e(92315),u=e(80348),d=e(2913);const i="auto";class l{constructor(){this.id=0,this.uid="",this.isGrafanaAdmin=!1,this.isSignedIn=!1,this.orgRole="",this.orgId=0,this.orgName="",this.login="",this.externalUserId="",this.orgCount=0,this.timezone="",this.fiscalYearStartMonth=0,this.helpFlags1=0,this.theme="dark",this.hasEditPermissionInFolders=!1,this.email="",this.name="",this.locale="",this.language="",this.weekStart="",this.gravatarUrl="",this.analytics={identifier:""},this.authenticatedBy="",d.Ay.bootData.user&&(0,t.extend)(this,d.Ay.bootData.user)}}class f{constructor(){this.sidemenuSmallBreakpoint=!1,this.tokenRotationJobId=0,d.Ay.bootData||(d.Ay.bootData={user:{},settings:{},navTree:[]}),this.user=new l,this.isSignedIn=this.user.isSignedIn,this.isGrafanaAdmin=this.user.isGrafanaAdmin,this.isEditor=this.hasRole("Editor")||this.hasRole("Admin"),this.hasEditPermissionInFolders=this.user.hasEditPermissionInFolders,this.minRefreshInterval=d.Ay.minRefreshInterval,this.scheduleTokenRotationJob()}async fetchUserPermissions(){try{this.user.permissions=await(0,s.AI)().get("/api/access-control/user/actions",{reloadcache:!0})}catch(m){console.error(m)}}setLoggedOut(){this.cancelTokenRotationJob(),this.user.isSignedIn=!1,this.isSignedIn=!1,window.location.reload()}hasRole(m){return m==="ServerAdmin"?this.isGrafanaAdmin:this.user.orgRole===m}licensedAccessControlEnabled(){return(0,r.a)("accesscontrol")}hasPermissionInMetadata(m,a){return!!a.accessControl?.[m]}hasPermission(m){return!!this.user.permissions?.[m]}isGrafanaVisible(){return document.visibilityState===void 0||document.visibilityState==="visible"}isAllowedInterval(m){return!d.Ay.minRefreshInterval||m===i?!0:o.intervalToMs(m)>=o.intervalToMs(d.Ay.minRefreshInterval)}getValidInterval(m){return this.isAllowedInterval(m)?m:d.Ay.minRefreshInterval}getValidIntervals(m){return this.minRefreshInterval?m.filter(a=>a!=="").filter(this.isAllowedInterval):m}hasAccessToExplore(){return this.hasPermission(u.AccessControlAction.DataSourcesExplore)&&d.Ay.exploreEnabled}evaluatePermission(m){return m.some(a=>this.hasPermission(a))?[]:["Reject"]}scheduleTokenRotationJob(){if(this.canScheduleRotation()){let m=(0,g.W)(),v=(m-Math.floor(Math.random()*(20-1)+1))*1e3-Date.now();this.tokenRotationJobId=setTimeout(()=>{if((0,g.W)()>m){this.scheduleTokenRotationJob();return}this.rotateToken().then()},v)}}canScheduleRotation(){return!(!this.isSignedIn||(0,g.W)()===0)}cancelTokenRotationJob(){this.tokenRotationJobId>0&&clearTimeout(this.tokenRotationJobId)}rotateToken(){return fetch(d.Ay.appSubUrl+"/api/user/auth-tokens/rotate",{method:"POST"}).then(m=>{if(m.status===200){this.scheduleTokenRotationJob();return}if(m.status===401){this.setLoggedOut();return}}).catch(m=>{console.error(m)})}}let c=new f;const h=p=>{throw new Error("contextSrv can be only overridden in test environment")}},62301:(Y,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(2543),n=e.n(t),o=e(17172),s=e(2913),r=e(33390);class g{constructor(){}addDashboardImpression(l){const f=this.impressionKey();let c=[];r.A.exists(f)&&(c=JSON.parse(r.A.get(f)),(0,t.isArray)(c)||(c=[])),c=c.filter(h=>l!==h),c.unshift(l),c.length>50&&c.pop(),r.A.set(f,JSON.stringify(c))}async convertToUIDs(){let l=this.getImpressions();const f=(0,t.filter)(l,h=>(0,t.isNumber)(h));if(!f.length)return;const c=await(0,o.AI)().get(`/api/dashboards/ids/${f.join(",")}`);r.A.set(this.impressionKey(),JSON.stringify([...(0,t.filter)(l,h=>(0,t.isString)(h)),...c]))}getImpressions(){const l=r.A.get(this.impressionKey())||"[]";return JSON.parse(l)}async getDashboardOpened(){try{await this.convertToUIDs()}catch{}return(0,t.filter)(this.getImpressions(),f=>(0,t.isString)(f))}impressionKey(){return"dashboard_impressions-"+s.Ay.bootData.user.orgId}}const d=new g},2769:(Y,A,e)=>{"use strict";e.d(A,{K:()=>u,O:()=>d});var t=e(97594),n=e(3591),o=e(28138),s=e(2913),r=e(10096),g=e(65615);async function u(i,l){const f=s.$W.theme2,c=(0,t.g)(i);if(o.A.publish(new n.E8(c)),f.colors.mode!==c.colors.mode){const m=document.createElement("link");m.rel="stylesheet",m.href=s.$W.bootData.assets[c.colors.mode],m.onload=()=>{const a=document.getElementsByTagName("link");for(let v=0;v<a.length;v++){const E=a[v];E.href&&E.href.includes(`build/grafana.${f.colors.mode}`)&&E.remove()}},document.head.insertBefore(m,document.head.firstChild)}if(l||!r.TP.isSignedIn)return;const h=new g.W("user"),p=await h.load();await h.update({...p,theme:c.colors.mode})}async function d(i){const l=s.$W.theme2;u(l.isDark?"light":"dark",i)}},33390:(Y,A,e)=>{"use strict";e.d(A,{A:()=>o});class t{get(r){return window.localStorage[r]}set(r,g){window.localStorage[r]=g}getBool(r,g){return g!==void 0&&!this.exists(r)?g:window.localStorage[r]==="true"}getObject(r,g){let u=g;if(this.exists(r)){const d=window.localStorage[r];try{u=JSON.parse(d)}catch(i){console.error(`Error parsing store object: ${r}. Returning default: ${g}. [${i}]`)}}return u}setObject(r,g){let u;try{u=JSON.stringify(g)}catch(d){throw new Error(`Could not stringify object: ${r}. [${d}]`)}try{this.set(r,u)}catch(d){const i=new Error(`Could not save item in localStorage: ${r}. [${d}]`);throw d instanceof Error&&(i.name=d.name),i}return!0}exists(r){return window.localStorage[r]!==void 0}delete(r){window.localStorage.removeItem(r)}}const o=new t},31140:(Y,A,e)=>{"use strict";e.d(A,{A:()=>i,r:()=>d});var t=e(2543),n=e.n(t),o=e(54479),s=e(83195);function r(l,f){if(!l)return!1;if(l[0]==="/"){const c=(0,o.dO)(l);return f.match(c)!=null}return l===f}function g(l){return l===0?.001:l/10}function u(l){return l?{colors:[{opacity:0},{opacity:l/10}]}:null}function d(l,f,c){for(let h=0;h<l.length;h++){const p=l[h],m=f.yaxes,a=p.yaxis||1,v=m[a-1],E=(0,s.j_)(v.format);(0,t.isNumber)(f.decimals)?p.updateLegendValues(E,f.decimals):(0,t.isNumber)(v.decimals)?p.updateLegendValues(E,v.decimals+1):p.updateLegendValues(E,null)}}class i{constructor(f){this.datapoints=f.datapoints,this.label=f.alias,this.id=f.alias,this.alias=f.alias,this.aliasEscaped=(0,t.escape)(f.alias),this.color=f.color,this.bars={fillColor:f.color},this.valueFormater=(0,s.j_)("none"),this.stats={},this.legend=!0,this.unit=f.unit,this.dataFrameIndex=f.dataFrameIndex,this.fieldIndex=f.fieldIndex,this.hasMsResolution=this.isMsResolutionNeeded()}applySeriesOverrides(f){this.lines={},this.dashes={dashLength:[]},this.points={},this.yaxis=1,this.zindex=0,this.nullPointMode=null,delete this.stack,delete this.bars.show;for(let c=0;c<f.length;c++){const h=f[c];r(h.alias,this.alias)&&(h.lines!==void 0&&(this.lines.show=h.lines),h.dashes!==void 0&&(this.dashes.show=h.dashes,this.lines.lineWidth=0),h.points!==void 0&&(this.points.show=h.points),h.bars!==void 0&&(this.bars.show=h.bars),h.fill!==void 0&&(this.lines.fill=g(h.fill)),h.fillGradient!==void 0&&(this.lines.fillColor=u(h.fillGradient)),h.stack!==void 0&&(this.stack=h.stack),h.linewidth!==void 0&&(this.lines.lineWidth=this.dashes.show?0:h.linewidth,this.dashes.lineWidth=h.linewidth),h.dashLength!==void 0&&(this.dashes.dashLength[0]=h.dashLength),h.spaceLength!==void 0&&(this.dashes.dashLength[1]=h.spaceLength),h.nullPointMode!==void 0&&(this.nullPointMode=h.nullPointMode),h.pointradius!==void 0&&(this.points.radius=h.pointradius),h.steppedLine!==void 0&&(this.lines.steps=h.steppedLine),h.zindex!==void 0&&(this.zindex=h.zindex),h.fillBelowTo!==void 0&&(this.fillBelowTo=h.fillBelowTo),h.color!==void 0&&this.setColor(h.color),h.transform!==void 0&&(this.transform=h.transform),h.legend!==void 0&&(this.legend=h.legend),h.hideTooltip!==void 0&&(this.hideTooltip=h.hideTooltip),h.yaxis!==void 0&&(this.yaxis=h.yaxis),h.hiddenSeries!==void 0&&(this.hiddenSeries=h.hiddenSeries))}}getFlotPairs(f){const c=[];this.stats.total=0,this.stats.max=-Number.MAX_VALUE,this.stats.min=Number.MAX_VALUE,this.stats.logmin=Number.MAX_VALUE,this.stats.avg=null,this.stats.current=null,this.stats.first=null,this.stats.delta=0,this.stats.diff=null,this.stats.diffperc=0,this.stats.range=null,this.stats.timeStep=Number.MAX_VALUE,this.allIsNull=!0,this.allIsZero=!0;const h=f==="connected",p=f==="null as zero";let m,a,v=0,E,D=0,b=!0;for(let P=0;P<this.datapoints.length;P++){if(a=this.datapoints[P][0],m=this.datapoints[P][1],E!==void 0){const y=m-E;y<this.stats.timeStep&&(this.stats.timeStep=y)}if(E=m,a===null){if(h)continue;p&&(a=0)}a!==null&&((0,t.isNumber)(a)&&(this.stats.total+=a,this.allIsNull=!1,v++),a>this.stats.max&&(this.stats.max=a),a<this.stats.min&&(this.stats.min=a),this.stats.first===null?this.stats.first=a:D>a?(b=!1,P===this.datapoints.length-1&&(this.stats.delta+=a)):(b?this.stats.delta+=a-D:this.stats.delta+=a,b=!0),D=a,a<this.stats.logmin&&a>0&&(this.stats.logmin=a),a!==0&&(this.allIsZero=!1)),c.push([m,a])}return this.stats.max===-Number.MAX_VALUE&&(this.stats.max=null),this.stats.min===Number.MAX_VALUE&&(this.stats.min=null),c.length&&!this.allIsNull&&(this.stats.avg=this.stats.total/v,this.stats.current=c[c.length-1][1],this.stats.current===null&&c.length>1&&(this.stats.current=c[c.length-2][1])),this.stats.max!==null&&this.stats.min!==null&&(this.stats.range=this.stats.max-this.stats.min),this.stats.current!==null&&this.stats.first!==null&&(this.stats.diff=this.stats.current-this.stats.first,this.stats.diffperc=this.stats.diff/this.stats.first),this.stats.count=c.length,c}updateLegendValues(f,c){this.valueFormater=f,this.decimals=c}formatValue(f){return(0,t.isFinite)(f)||(f=null),(0,s.cN)(this.valueFormater(f,this.decimals))}isMsResolutionNeeded(){for(let f=0;f<this.datapoints.length;f++)if(this.datapoints[f][1]!==null&&this.datapoints[f][1]!==void 0){const c=this.datapoints[f][1].toString();if(c.length===13&&c%1e3!==0)return!0}return!1}hideFromLegend(f){return!!(f.hideEmpty&&this.allIsNull||!this.legend||f.hideZero&&this.allIsZero)}setColor(f){this.color=f,this.bars.fillColor=f}}},6262:(Y,A,e)=>{"use strict";e.d(A,{G:()=>s});var t=e(40672),n=e(32264);const o=n.$.bootData.settings.cspReportOnlyEnabled,s={createHTML:(r,g,u)=>o?(console.error("[HTML not sanitized with Trusted Types]",r,g,u),r):r.replace(/<script/gi,"&lt;script"),createScript:r=>r,createScriptURL:(r,g,u)=>o?(console.error("[ScriptURL not sanitized with Trusted Types]",r,g,u),r):t.sQ.sanitizeUrl(r)};n.$.bootData.settings.trustedTypesDefaultPolicyEnabled&&window.trustedTypes&&window.trustedTypes.createPolicy&&window.trustedTypes.createPolicy("default",s)},96378:(Y,A,e)=>{"use strict";e.d(A,{N:()=>d,e:()=>i});var t=e(96540),n=e(70255),o=e(60578),s=e(3591),r=e(32264),g=e(10096),u=e(34295);const d=({children:l,value:f})=>{const[c,h]=(0,t.useState)(f);return(0,t.useEffect)(()=>{const p=g.lE.subscribe(s.E8,m=>{r.$.theme2=m.payload,h(m.payload)});return()=>p.unsubscribe()},[]),t.createElement(o.D.Provider,{value:c},t.createElement(n.z,{baseColor:c.colors.emphasize(c.colors.background.secondary),highlightColor:c.colors.emphasize(c.colors.background.secondary,.1),borderRadius:c.shape.radius.default},l))},i=(l,f)=>function(h){return t.createElement(d,{value:f},t.createElement(l,{...h}))}},67278:(Y,A,e)=>{"use strict";e.d(A,{c:()=>t});class t extends window.Worker{constructor(o,s){const r=o.toString(),g=r.split("/");g.pop();const u=`${g.join("/")}/`,d=`importScripts('${r}');`,i=URL.createObjectURL(new Blob([`__webpack_worker_public_path__ = '${u}'; ${d}`],{type:"application/javascript"}));super(i,s),URL.revokeObjectURL(i)}}},80714:(Y,A,e)=>{"use strict";e.d(A,{F:()=>t});function t(n={}){return{...n,accesscontrol:!0}}},94041:(Y,A,e)=>{"use strict";e.d(A,{b:()=>t});const t=(n,o,s)=>(n.splice(s,0,n.splice(o,1)[0]),n)},92315:(Y,A,e)=>{"use strict";e.d(A,{W:()=>t});function t(){const n=document.cookie.split("; ").find(s=>s.startsWith("grafana_session_expiry="));if(!n)return 0;let o=n.split("=").at(1);return o?parseInt(o,10):0}},63917:(Y,A,e)=>{"use strict";e.d(A,{gn:()=>o});function t(){const s=navigator.userAgent.indexOf("MSIE")>-1,r=navigator.userAgent.indexOf("Edge/")>-1||navigator.userAgent.indexOf("Edg/")>-1,g=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,u=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),d=/Edge\/([0-9.]+)/.exec(navigator.userAgent);return s&&parseFloat(/Trident\/([0-9.]+)/.exec(navigator.userAgent)[1])<=7||r&&(d&&parseFloat(d[1])<=16||parseFloat(/Edg\/([0-9.]+)/.exec(navigator.userAgent)[1])<=16)||g&&parseFloat(/Firefox\/([0-9.]+)/.exec(navigator.userAgent)[1])<=64?!1:!(u&&parseFloat(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1])<=54)}function n(){return/(iPhone|iPad|Mac)/.test(navigator.platform)}function o(){return n()?"cmd":"ctrl"}},34525:(Y,A,e)=>{"use strict";e.d(A,{TS:()=>o});class t{_linkTo(u,d){d<=0&&u.inputEdges.push(this),d>=0&&u.outputEdges.push(this),u.edges.push(this)}link(u,d){if(!u)throw Error("inputNode is required");if(!d)throw Error("outputNode is required");return this.unlink(),this.inputNode=u,this.outputNode=d,this._linkTo(u,1),this._linkTo(d,-1),this}unlink(){let u;const d=this.inputNode,i=this.outputNode;d&&i&&(u=d.edges.indexOf(this),u>-1&&d.edges.splice(u,1),u=i.edges.indexOf(this),u>-1&&i.edges.splice(u,1),u=d.outputEdges.indexOf(this),u>-1&&d.outputEdges.splice(u,1),u=i.inputEdges.indexOf(this),u>-1&&i.inputEdges.splice(u,1))}}class n{constructor(u){this.name=u,this.edges=[],this.inputEdges=[],this.outputEdges=[]}getEdgeFrom(u){return u?typeof u=="object"?this.inputEdges.find(d=>d.inputNode?.name===u.name):this.inputEdges.find(d=>d.inputNode?.name===u):null}getEdgeTo(u){return u?typeof u=="object"?this.outputEdges.find(d=>d.outputNode?.name===u.name):this.outputEdges.find(d=>d.outputNode?.name===u):null}getOptimizedInputEdges(){const u=[];return this.inputEdges.forEach(d=>{d.inputNode?.inputEdges.map(l=>l.inputNode)?.forEach(l=>{const f=l?.getEdgeTo(this.name);f&&u.push(f)})}),this.inputEdges.filter(d=>u.indexOf(d)===-1)}}class o{constructor(){this.nodes={}}createNode(u){const d=new n(u);return this.nodes[u]=d,d}createNodes(u){const d=[];return u.forEach(i=>{d.push(this.createNode(i))}),d}link(u,d){let i=[],l=[];const f=[],c=[];u instanceof Array?i=u:i=[u],d instanceof Array?l=d:l=[d];for(let p=0;p<i.length;p++){const m=i[p];if(typeof m=="string"){const a=this.getNode(m);if(!a)throw Error(`cannot link input node named ${m} since it doesn't exist in graph`);f.push(a)}else f.push(m)}for(let p=0;p<l.length;p++){const m=l[p];if(typeof m=="string"){const a=this.getNode(m);if(!a)throw Error(`cannot link output node named ${m} since it doesn't exist in graph`);c.push(a)}else c.push(m)}const h=[];return f.forEach(p=>{c.forEach(m=>{h.push(this.createEdge().link(p,m))})}),h}descendants(u){if(!u.length)return new Set;const d=new Set(r(u)?u.map(i=>this.nodes[i]).filter(i=>i!==void 0):u);return this.descendantsRecursive(d)}descendantsRecursive(u,d=new Set){for(const i of u){const l=new Set;for(const{inputNode:f}of i.inputEdges)f&&!d.has(f)&&(d.add(f),l.add(f));this.descendantsRecursive(l,d)}return d}createEdge(){return new t}getNode(u){return this.nodes[u]}}const s=g=>{Object.keys(g.nodes).forEach(u=>{const d=g.nodes[u];let i=d.outputEdges.map(f=>f.outputNode?.name).join(", ");i||(i="<none>");let l=d.inputEdges.map(f=>f.inputNode?.name).join(", ");l||(l="<none>"),console.log(`${d.name}:
 - links to:   ${i}
 - links from: ${l}`)})};function r(g){return g.length>0&&typeof g[0]=="string"}},94954:(Y,A,e)=>{"use strict";e.d(A,{q:()=>n});var t=e(17172);function n(o){if(typeof o=="string")return o;if(o){if(o instanceof Error)return o.message;if((0,t.NF)(o)){if(o.data&&o.data.message)return o.data.message;if(o.statusText)return o.statusText}}return JSON.stringify(o)}},87490:(Y,A,e)=>{"use strict";e.d(A,{Al:()=>B,HQ:()=>D,Ll:()=>O,MA:()=>x,WP:()=>p,Xe:()=>y,_u:()=>V,bI:()=>M,dY:()=>H,di:()=>L,dr:()=>b,eF:()=>C,o$:()=>P,uE:()=>N,uJ:()=>_,uq:()=>T,w4:()=>I,zT:()=>R,zq:()=>W});var t=e(44329),n=e(62938),o=e(52622),s=e(76885),r=e(41987),g=e(43127),u=e(65879),d=e(19347),i=e(11134),l=e(33390),f=e(66718),c=e(21969);const h={dedupStrategy:o.fY.none},p="0123456789abcdefghijklmnopqrstuvwxyz",m=(0,t.d_)(p,3),a=100,v="grafana.explore.datasource",E=K=>`${v}.${K}`,D=K=>l.A.getObject(E(K)),b=(K,j)=>l.A.setObject(E(K),j);function P(){for(;;){const K=m(3);if(!/^\d+$/.test(K))return K}}async function y(K){const{queries:j,dsRef:k,timeRange:Q,scopedVars:ee,adhocFilters:ae}=K,Z=(await Promise.allSettled(j.filter(q=>q.datasource?.uid!==f.Uj).map(async q=>{const te=await(0,d.l)().get(q.datasource||k);return{...te.interpolateVariablesInQueries?.([q],ee??{},ae)[0]||q,...!te.meta.mixed&&{datasource:te.getRef()}}}))).filter(q=>q.status==="fulfilled").map(q=>q.value),ne=JSON.stringify({[P()]:{range:(0,s.sQ)(Q.raw),queries:Z,datasource:k?.uid}});return s.kM.renderUrl("/explore",{panes:ne,schemaVersion:1})}function T(K){return`explore_${K}`}function M(K,j,k,Q,ee,ae,Z){const ne=Number.parseInt(K,36),{interval:q,intervalMs:te}=G(Q,k.minInterval,k.maxDataPoints),re={app:r.Jk.Explore,timezone:ae||g.lE,startTime:Date.now(),interval:q,intervalMs:te,panelId:ne,targets:j,range:Q,requestId:T(K),rangeRaw:Q.raw,scopedVars:{__interval:{text:q,value:q},__interval_ms:{text:te,value:te},...Z},maxDataPoints:k.maxDataPoints,liveStreaming:k.liveStreaming};return{queries:j,request:re,scanning:ee,id:S(),done:!1}}const I=({key:K,...j})=>j,x=(K,j)=>{if(K==null)return"";try{return JSON.stringify(K,null,j)}catch(k){console.error(k)}return""};function S(K=0){return`Q-${(0,n.A)()}-${K}`}async function O(K,j=0,k){let Q,ee,ae;return k?ee=k:K.length>0&&K[K.length-1].datasource?ee=K[K.length-1].datasource:(Q=await(0,d.l)().get(),ae=Q.getDefaultQuery?.(r.Jk.Explore),ee=Q.getRef()),Q||(Q=await(0,d.l)().get(ee),ae=Q.getDefaultQuery?.(r.Jk.Explore)),{...ae,refId:(0,c.W3)(K),key:S(j),datasource:ee}}const C=(K,j,k=0)=>{const Q=S(k),ee=K.refId||(0,c.W3)(j);return{...K,refId:ee,key:Q}};async function L(K,j){if(K&&typeof K=="object"&&K.length>0){const k=[];for(let Q=0;Q<K.length;Q++){const ee=K[Q],ae=S(Q);let Z=ee.refId;Z||(Z=(0,c.W3)(k));let ne=!0;if(ee.datasource)try{await(0,d.l)().get(ee.datasource.uid)}catch{console.error("One of the queries has a datasource that is no longer available and was removed."),ne=!1}ne&&k.push({...ee,refId:Z,key:ae})}return k}try{const k=j??(await(0,d.l)().get()).getRef();return[await O(K??[],void 0,k)]}catch{return[]}}const U=["refId","key","context","datasource"];function R(K){return K&&K.some(j=>Object.entries(j).filter(([Q,ee])=>U.indexOf(Q)===-1).filter(([Q,ee])=>ee).length>0)}function B(K,j,k){const Q=Date.now();let ee=K;k.forEach(Z=>{ee=[{query:Z,ts:Q},...ee]}),ee.length>a&&(ee=ee.slice(0,a));const ae=`grafana.explore.history.${j}`;try{return l.A.setObject(ae,ee),ee}catch(Z){return console.error(Z),K}}const H=K=>K.reduce((k,Q,ee)=>{const ae=Q.datasource?.uid||Q.key;return k.concat(`${ae}-${ee}`)},[]),W=(K,j,k)=>u.convertRawToRange(j,K,k),N=K=>i.cC.isLive(K)?o.uH.Ascending:o.uH.Descending,V=K=>{K&&K.unsubscribe()};function G(K,j,k){return k?u.calculateInterval(K,k,j):{interval:"1s",intervalMs:1e3}}const _=K=>{if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(K);else{const j=document.createElement("textarea");j.value=K,document.body.appendChild(j),j.select(),document.execCommand("copy"),document.body.removeChild(j)}}},78827:(Y,A,e)=>{"use strict";e.r(A),e.d(A,{default:()=>t});function t(n,o){o=o||{};const s=o.delimiter||".";let r=o.maxDepth||3,g=1;const u={};function d(i,l){Object.keys(i).forEach(f=>{const c=i[f],h=o?.safe&&Array.isArray(c),m=Object.prototype.toString.call(c)==="[object Object]",a=l?l+s+f:f;if(o?.maxDepth||(r=g+1),!h&&m&&Object.keys(c).length&&g<r)return++g,d(c,a);u[a]=c})}return d(n,null),u}},68576:(Y,A,e)=>{"use strict";e.d(A,{A:()=>u});var t=e(95344),n=e(54479),o=e(65879),s=e(83195);const g={valueFormats:{},intervalRegex:/(\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,intervalsInSeconds:{y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001},regexEscape:d=>((0,t.l)("kbn.ts","kbn.regexEscape()","escapeRegex from @grafana/data"),(0,n.$f)(d)),roundInterval:d=>((0,t.l)("kbn.ts","kbn.roundInterval()","@grafana/data"),o.roundInterval(d)),secondsToHms:d=>((0,t.l)("kbn.ts","kbn.secondsToHms()","@grafana/data"),o.secondsToHms(d)),secondsToHhmmss:d=>{const i=[],l=Math.floor(d/3600),f=Math.floor(d%3600/60),c=Math.floor(d%3600%60);return l>9?i.push(""+l):i.push("0"+l),f>9?i.push(""+f):i.push("0"+f),c>9?i.push(""+c):i.push("0"+c),i.join(":")},toPercent:(d,i)=>Math.floor(d/i*1e4)/100+"%",addSlashes:d=>d.replace(/[\'\"\\0]/g,"\\$&"),describeInterval:d=>((0,t.l)("kbn.ts","kbn.describeInterval()","@grafana/data"),o.describeInterval(d)),intervalToSeconds:d=>((0,t.l)("kbn.ts","rangeUtil.intervalToSeconds()","@grafana/data"),o.intervalToSeconds(d)),intervalToMs:d=>((0,t.l)("kbn.ts","rangeUtil.intervalToMs()","@grafana/data"),o.intervalToMs(d)),calculateInterval:(d,i,l)=>((0,t.l)("kbn.ts","kbn.calculateInterval()","@grafana/data"),o.calculateInterval(d,i,l)),queryColorDot:(d,i)=>'<div class="icon-circle" style="'+["display:inline-block","color:"+d,"font-size:"+i+"px"].join(";")+'"></div>',slugifyForUrl:d=>d.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),stringToJsRegex:d=>((0,t.l)("kbn.ts","kbn.stringToJsRegex()","@grafana/data"),(0,n.dO)(d)),toFixed:(d,i)=>{if(d===null)return"";const l=i?Math.pow(10,Math.max(0,i)):1,f=String(Math.round(d*l)/l);if(f.indexOf("e")!==-1||d===0)return f;if(i!=null){const c=f.indexOf("."),h=c===-1?0:f.length-c-1;if(h<i)return(h?f:f+".")+String(l).slice(1,i-h+1)}return f},toFixedScaled:(d,i,l,f,c)=>l===null?g.toFixed(d,i)+c:g.toFixed(d,l+f)+c,roundValue:(d,i)=>{if(d===null)return null;const l=Math.pow(10,i),f=(l*d).toFixed(i);return Math.round(parseFloat(f))/l},getUnitFormats:s.Ke};typeof Proxy<"u"?g.valueFormats=new Proxy(g.valueFormats,{get(d,i,l){if(typeof i!="string")throw{message:`Value format ${String(i)} is not a string`};const f=(0,s.j_)(i);return f?(c,h,p,m)=>(0,s.cN)(f(c,h,p,m?"utc":"browser")):Reflect.get(d,i,l)}}):g.valueFormats=(0,s.uH)();const u=g},36689:(Y,A,e)=>{"use strict";e.d(A,{C:()=>n,o:()=>o});var t=e(44836);function n(s){switch(s){case"home":return(0,t.t)("nav.home.title","Home");case"new":return(0,t.t)("nav.new.title","New");case"create":return(0,t.t)("nav.create.title","Create");case"create-dashboard":return(0,t.t)("nav.create-dashboard.title","Dashboard");case"folder":return(0,t.t)("nav.create-folder.title","Folder");case"import":return(0,t.t)("nav.create-import.title","Import dashboard");case"alert":return(0,t.t)("nav.create-alert.title","New alert rule");case"starred":return(0,t.t)("nav.starred.title","Starred");case"starred-empty":return(0,t.t)("nav.starred-empty.title","Your starred dashboards will appear here");case"dashboards":return(0,t.t)("nav.dashboards.title","Dashboards");case"dashboards/browse":return(0,t.t)("nav.dashboards.title","Dashboards");case"dashboards/playlists":return(0,t.t)("nav.playlists.title","Playlists");case"dashboards/snapshots":return(0,t.t)("nav.snapshots.title","Snapshots");case"dashboards/library-panels":return(0,t.t)("nav.library-panels.title","Library panels");case"reports":return(0,t.t)("nav.reporting.title","Reporting");case"dashboards/public":return(0,t.t)("nav.public.title","Public dashboards");case"dashboards/new":return(0,t.t)("nav.new-dashboard.title","New dashboard");case"dashboards/folder/new":return(0,t.t)("nav.new-folder.title","New folder");case"dashboards/import":return(0,t.t)("nav.create-import.title","Import dashboard");case"scenes":return(0,t.t)("nav.scenes.title","Scenes");case"explore":return(0,t.t)("nav.explore.title","Explore");case"alerting":return(0,t.t)("nav.alerting.title","Alerting");case"plugin-page-grafana-oncall-app":return(0,t.t)("nav.oncall.title","OnCall");case"alerting-legacy":return(0,t.t)("nav.alerting-legacy.title","Alerting (legacy)");case"alerting-upgrade":return(0,t.t)("nav.alerting-upgrade.title","Alerting upgrade");case"alert-home":return(0,t.t)("nav.alerting-home.title","Home");case"alert-list":return(0,t.t)("nav.alerting-list.title","Alert rules");case"alert-list-legacy":return(0,t.t)("nav.alert-list-legacy.title","Alert rules");case"receivers":return(0,t.t)("nav.alerting-receivers.title","Contact points");case"am-routes":return(0,t.t)("nav.alerting-am-routes.title","Notification policies");case"channels":return(0,t.t)("nav.alerting-channels.title","Notification channels");case"silences":return(0,t.t)("nav.alerting-silences.title","Silences");case"groups":return(0,t.t)("nav.alerting-groups.title","Groups");case"alerting-admin":return(0,t.t)("nav.alerting-admin.title","Admin");case"cfg":return(0,t.t)("nav.config.title","Administration");case"cfg/general":return(0,t.t)("nav.config-general.title","General");case"cfg/plugins":return(0,t.t)("nav.config-plugins.title","Plugins and data");case"cfg/access":return(0,t.t)("nav.config-access.title","Users and access");case"datasources":return(0,t.t)("nav.datasources.title","Data sources");case"authentication":return(0,t.t)("nav.authentication.title","Authentication");case"licensing":return(0,t.t)("nav.statistics-and-licensing.title","Statistics and licensing");case"recordedQueries":return(0,t.t)("nav.recorded-queries.title","Recorded queries");case"correlations":return(0,t.t)("nav.correlations.title","Correlations");case"users":return(0,t.t)("nav.users.title","Users");case"teams":return(0,t.t)("nav.teams.title","Teams");case"plugins":return(0,t.t)("nav.plugins.title","Plugins");case"org-settings":return(0,t.t)("nav.org-settings.title","Default preferences");case"apikeys":return(0,t.t)("nav.api-keys.title","API keys");case"serviceaccounts":return(0,t.t)("nav.service-accounts.title","Service accounts");case"admin":return(0,t.t)("nav.admin.title","Server admin");case"support-bundles":return(0,t.t)("nav.support-bundles.title","Support bundles");case"global-users":return(0,t.t)("nav.global-users.title","Users");case"global-orgs":return(0,t.t)("nav.global-orgs.title","Organizations");case"server-settings":return(0,t.t)("nav.server-settings.title","Settings");case"storage":return(0,t.t)("nav.storage.title","Storage");case"upgrading":return(0,t.t)("nav.upgrading.title","Stats and license");case"monitoring":return(0,t.t)("nav.monitoring.title","Observability");case"infrastructure":return(0,t.t)("nav.infrastructure.title","Infrastructure");case"frontend":return(0,t.t)("nav.frontend.title","Frontend");case"apps":return(0,t.t)("nav.apps.title","Apps");case"alerts-and-incidents":return(0,t.t)("nav.alerts-and-incidents.title","Alerts & IRM");case"testing-and-synthetics":return(0,t.t)("nav.testing-and-synthetics.title","Testing & synthetics");case"plugin-page-grafana-incident-app":return(0,t.t)("nav.incidents.title","Incidents");case"plugin-page-grafana-ml-app":return(0,t.t)("nav.machine-learning.title","Machine learning");case"plugin-page-grafana-slo-app":return(0,t.t)("nav.slo.title","SLO");case"plugin-page-k6-app":return(0,t.t)("nav.k6.title","Performance");case"monitoring":return(0,t.t)("nav.observability.title","Observability");case"plugin-page-grafana-k8s-app":return(0,t.t)("nav.kubernetes.title","Kubernetes");case"plugin-page-grafana-app-observability-app":return(0,t.t)("nav.application.title","Application");case"plugin-page-grafana-pyroscope-app":return(0,t.t)("nav.profiles.title","Profiles");case"plugin-page-grafana-kowalski-app":return(0,t.t)("nav.frontend-app.title","Frontend");case"plugin-page-grafana-synthetic-monitoring-app":return(0,t.t)("nav.synthetics.title","Synthetics");case"help":return(0,t.t)("nav.help.title","Help");case"profile/settings":return(0,t.t)("nav.profile/settings.title","Profile");case"profile/notifications":return(0,t.t)("nav.profile/notifications.title","Notification history");case"profile/password":return(0,t.t)("nav.profile/password.title","Change password");case"sign-out":return(0,t.t)("nav.sign-out.title","Sign out");case"search":return(0,t.t)("nav.search-dashboards.title","Search dashboards");case"connections":return(0,t.t)("nav.connections.title","Connections");case"connections-add-new-connection":return(0,t.t)("nav.add-new-connections.title","Add new connection");case"standalone-plugin-page-/connections/collector":return(0,t.t)("nav.collector.title","Collector");case"connections-datasources":return(0,t.t)("nav.data-sources.title","Data sources");case"standalone-plugin-page-/connections/infrastructure":return(0,t.t)("nav.integrations.title","Integrations");case"standalone-plugin-page-/connections/connect-data":return(0,t.t)("nav.connect-data.title","Connect data");case"standalone-plugin-page-/connections/private-data-source-connections":return(0,t.t)("nav.private-data-source-connections.title","Private data source connect");case"plugin-page-grafana-detect-app":return(0,t.t)("nav.detect.title","Detect");case"plugin-page-grafana-quaderno-app":return(0,t.t)("nav.grafana-quaderno.title","Grafana Quaderno");default:return}}function o(s){switch(s){case"dashboards":return(0,t.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"dashboards/browse":return(0,t.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"manage-folder":return(0,t.t)("nav.manage-folder.subtitle","Manage folder dashboards and permissions");case"dashboards/playlists":return(0,t.t)("nav.playlists.subtitle","Groups of dashboards that are displayed in a sequence");case"dashboards/snapshots":return(0,t.t)("nav.snapshots.subtitle","Interactive, publically available, point-in-time representations of dashboards");case"dashboards/library-panels":return(0,t.t)("nav.library-panels.subtitle","Reusable panels that can be added to multiple dashboards");case"alerting":return(0,t.t)("nav.alerting.subtitle","Learn about problems in your systems moments after they occur");case"alerting-upgrade":return(0,t.t)("nav.alerting-upgrade.subtitle","Upgrade your existing legacy alerts and notification channels to the new Grafana Alerting");case"alert-list":return(0,t.t)("nav.alerting-list.subtitle","Rules that determine whether an alert will fire");case"receivers":return(0,t.t)("nav.alerting-receivers.subtitle","Choose how to notify your contact points when an alert instance fires");case"am-routes":return(0,t.t)("nav.alerting-am-routes.subtitle","Determine how alerts are routed to contact points");case"silences":return(0,t.t)("nav.alerting-silences.subtitle","Stop notifications from one or more alerting rules");case"groups":return(0,t.t)("nav.alerting-groups.subtitle","See grouped alerts from an Alertmanager instance");case"datasources":return(0,t.t)("nav.datasources.subtitle","Add and configure data sources");case"correlations":return(0,t.t)("nav.correlations.subtitle","Add and configure correlations");case"users":return(0,t.t)("nav.users.subtitle","Invite and assign roles to users");case"teams":return(0,t.t)("nav.teams.subtitle","Groups of users that have common dashboard and permission needs");case"plugins":return(0,t.t)("nav.plugins.subtitle","Extend the Grafana experience with plugins");case"org-settings":return(0,t.t)("nav.org-settings.subtitle","Manage preferences across an organization");case"apikeys":return(0,t.t)("nav.api-keys.subtitle","Manage and create API keys that are used to interact with Grafana HTTP APIs");case"serviceaccounts":return(0,t.t)("nav.service-accounts.subtitle","Use service accounts to run automated workloads in Grafana");case"global-users":return(0,t.t)("nav.global-users.subtitle","Manage users in Grafana");case"global-orgs":return(0,t.t)("nav.global-orgs.subtitle","Isolated instances of Grafana running on the same server");case"server-settings":return(0,t.t)("nav.server-settings.subtitle","View the settings defined in your Grafana config");case"storage":return(0,t.t)("nav.storage.subtitle","Manage file storage");case"support-bundles":return(0,t.t)("nav.support-bundles.subtitle","Download support bundles");case"admin":return(0,t.t)("nav.admin.subtitle","Manage server-wide settings and access to resources such as organizations, users, and licenses");case"cfg/general":return(0,t.t)("nav.config-general.subtitle","Manage default preferences and settings across Grafana");case"cfg/plugins":return(0,t.t)("nav.config-plugins.subtitle","Install plugins and define the relationships between data");case"cfg/access":return(0,t.t)("nav.config-access.subtitle","Configure access for individual users, teams, and service accounts");case"apps":return(0,t.t)("nav.apps.subtitle","App plugins that extend the Grafana experience");case"monitoring":return(0,t.t)("nav.monitoring.subtitle","Out-of-the-box observability solutions");case"infrastructure":return(0,t.t)("nav.infrastructure.subtitle","Understand your infrastructure's health");case"frontend":return(0,t.t)("nav.frontend.subtitle","Gain real user monitoring insights");case"alerts-and-incidents":return(0,t.t)("nav.alerts-and-incidents.subtitle","Alerting and incident management apps");case"testing-and-synthetics":return(0,t.t)("nav.testing-and-synthetics.subtitle","Optimize performance with k6 and Synthetic Monitoring insights");case"connections-add-new-connection":return(0,t.t)("nav.connections.subtitle","Browse and create new connections");case"connections-datasources":return(0,t.t)("nav.data-sources.subtitle","View and manage your connected data source connections");case"connections-private-data-source-connections":return(0,t.t)("nav.private-data-source-connections.subtitle","Query data that lives within a secured network without opening the network to inbound traffic from Grafana Cloud. Learn more in our docs.");default:return}}},28874:(Y,A,e)=>{"use strict";e.d(A,{v:()=>o});var t=e(2543),n=e.n(t);function o(s){return(0,t.isArray)(s)?s.map(o):(0,t.isPlainObject)(s)?Object.keys(s).sort().reduce((r,g)=>{const u=s[g];return u!=null&&(r[g]=o(u)),r},{}):s}},21969:(Y,A,e)=>{"use strict";e.d(A,{Ih:()=>n,Lr:()=>r,U7:()=>o,W3:()=>t,dr:()=>s,fE:()=>u});const t=d=>{for(let i=0;;i++){const l=g(i);if(!d.some(f=>f.refId===l))return l}};function n(d){const i=["refId","hide","key","queryType","datasource"];for(const l in d)if(l!=="label"&&!i.includes(l))return!1;return!0}function o(d,i,l){const f={...i,refId:t(d),hide:!1};return!f.datasource&&l&&(f.datasource=l),[...d,f]}function s(d){return d.indexOf("api/datasources/proxy")!==-1||d.indexOf("api/ds/query")!==-1}function r(d){return!d.match(/^http/)}function g(d){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return d<i.length?i[d]:g(Math.floor(d/i.length)-1)+i[d%i.length]}function u(d){return d||void 0}},81523:(Y,A,e)=>{"use strict";e.d(A,{Ax:()=>x,DI:()=>p,Gx:()=>a,IA:()=>y,NC:()=>b,TR:()=>O,U3:()=>P,X1:()=>v,cX:()=>D,l0:()=>h,oU:()=>E,rs:()=>m,x8:()=>S,xB:()=>c.x});var t=e(2543),n=e.n(t),o=e(76885),s=e(72724),r=e(19347),g=e(82467),u=e(3169),d=e(44836),i=e(99140),l=e(38877),f=e(11401),c=e(91650);async function h(L,U,R,B,H,W,N){const V=R&&R.filter(G=>C(G));if(V.length>0){let G=!1,_=!1,K;try{K=(await(0,f.a)().addToRichHistory({datasourceUid:L,datasourceName:U??"",queries:V,starred:B,comment:H??""})).warning}catch(j){return j instanceof Error&&(j.name===l.m.StorageFull?(G=!0,W&&(0,i.JD)((0,g.dx)((0,u.gi)(j.message)))):j.name!==l.m.DuplicatedEntry&&(0,i.JD)((0,g.dx)((0,u.gi)((0,d.t)("explore.rich-history-utils-notification.update-failed","Rich History update failed"),j.message)))),{richHistoryStorageFull:G,limitExceeded:_}}return K&&K.type===l.C.LimitExceeded&&(_=!0,N&&(0,i.JD)((0,g.dx)((0,u.q8)(K.message)))),{richHistoryStorageFull:G,limitExceeded:_}}return{}}async function p(L){return await(0,f.a)().getRichHistory(L)}async function m(L){await(0,f.a)().updateSettings(L)}async function a(){return await(0,f.a)().getSettings()}async function v(){return(0,f.a)().deleteAll()}async function E(L,U){try{return await(0,f.a)().updateStarred(L,U)}catch(R){R instanceof Error&&(0,i.JD)((0,g.dx)((0,u.gi)((0,d.t)("explore.rich-history-utils-notification.saving-failed","Saving rich history failed"),R.message)));return}}async function D(L,U){try{return await(0,f.a)().updateComment(L,U)}catch(R){R instanceof Error&&(0,i.JD)((0,g.dx)((0,u.gi)((0,d.t)("explore.rich-history-utils-notification.saving-failed","Saving rich history failed"),R.message)));return}}async function b(L){try{return await(0,f.a)().deleteRichHistory(L),L}catch(U){U instanceof Error&&(0,i.JD)((0,g.dx)((0,u.gi)((0,d.t)("explore.rich-history-utils-notification.saving-failed","Saving rich history failed"),U.message)));return}}const P=L=>{const U={range:{from:(0,d.t)("explore.rich-history-utils.default-from","now-1h"),to:(0,d.t)("explore.rich-history-utils.default-to","now")},datasource:L.datasourceName,queries:L.queries},R=(0,o.Pp)(U),B=/.*(?=\/explore)/.exec(`${window.location.href}`)[0];return o.kM.renderUrl(`${B}/explore`,{left:R})},y=L=>{let U;switch(L){case 0:U=(0,d.t)("explore.rich-history-utils.today","today");break;case 1:U=(0,d.t)("explore.rich-history-utils.yesterday","yesterday");break;case 7:U=(0,d.t)("explore.rich-history-utils.a-week-ago","a week ago");break;case 14:U=(0,d.t)("explore.rich-history-utils.two-weeks-ago","two weeks ago");break;default:U=(0,d.t)("explore.rich-history-utils.days-ago","{{num}} days ago",{num:`${L}`})}return U};function T(L){return(0,s.LE)(L,{format:"MMMM D"})}function M(L){const U=(0,t.omit)(L,["key","refId","datasource"]);return JSON.stringify(U)}function I(L,U){let R="";return U===c.x.DatasourceAZ||U===c.x.DatasourceZA?R=L.datasourceName:R=T(L.createdAt),R}function x(L,U){return U?.getQueryDisplayText?U.getQueryDisplayText(L):M(L)}function S(L,U){let R={};return L.forEach(B=>{let H=I(B,U);H in R?R[H]=[...R[H],B]:R[H]=[B]}),R}function O(){return(0,r.l)().getList({mixed:!0}).map(L=>({name:L.name,uid:L.uid}))}function C(L){const U=(0,t.omit)(L,["key","refId","datasource"]);return Object.keys(U).length>0}},91650:(Y,A,e)=>{"use strict";e.d(A,{x:()=>t});var t=(n=>(n.Descending="Descending",n.Ascending="Ascending",n.DatasourceAZ="Datasource A-Z",n.DatasourceZA="Datasource Z-A",n))(t||{})},7030:(Y,A,e)=>{"use strict";e.d(A,{V:()=>f,f:()=>l});var t=e(41811),n=e(32264),o=e(17172),s=e(82467),r=e(3169),g=e(99140),u=e(87490);function d(){return`${window.location.protocol}//${window.location.host}${n.$.appSubUrl}`}function i(c){let h=c.replace(d(),"");return h.startsWith("/")?h.substring(1,h.length):h}const l=(0,t.A)(async function(c){try{return(await(0,o.AI)().post("/api/short-urls",{path:i(c)})).url}catch(h){console.error("Error when creating shortened link: ",h),(0,g.JD)((0,s.dx)((0,r.gi)("Error generating shortened link")))}}),f=async c=>{const h=await l(c);h?((0,u.uJ)(h),(0,g.JD)((0,s.dx)((0,r.tZ)("Shortened link copied to clipboard")))):(0,g.JD)((0,s.dx)((0,r.gi)("Error generating shortened link")))}},92247:(Y,A,e)=>{"use strict";e.r(A),e.d(A,{getPrecision:()=>r,getScaledDecimals:()=>n,getStringPrecision:()=>g,grafanaTimeFormat:()=>o,logp:()=>s,tickStep:()=>t});function t(u,d,i){const l=Math.sqrt(50),f=Math.sqrt(10),c=Math.sqrt(2),h=Math.abs(d-u)/Math.max(0,i);let p=Math.pow(10,Math.floor(Math.log(h)/Math.LN10));const m=h/p;return m>=l?p*=10:m>=f?p*=5:m>=c&&(p*=2),d<u?-p:p}function n(u,d){return u-Math.floor(Math.log(d)/Math.LN10)}function o(u,d,i){if(d&&i&&u){const l=i-d,f=l/u/1e3,c=864e5,h=31536e6;return f<=45?"HH:mm:ss":f<=7200||l<=c?"HH:mm":f<=8e4?"MM/DD HH:mm":f<=2419200||l<=h?"MM/DD":"YYYY-MM"}return"HH:mm"}function s(u,d){return Math.log(u)/Math.log(d)}function r(u){const d=u.toString();return g(d)}function g(u){if(isNaN(u))return 0;const d=u.indexOf(".");return d===-1?0:u.length-d-1}},80582:(Y,A,e)=>{"use strict";e.d(A,{Wb:()=>n,Zk:()=>o,zG:()=>s});var t=e(47232);const n=(r,g)=>{const u={from:(0,t.yT)(g.from),to:(0,t.yT)(g.to)},d=(u.to.valueOf()-u.from.valueOf())/2;let i,l;return r===-1?(i=u.to.valueOf()-d,l=u.from.valueOf()-d):r===1?(i=u.to.valueOf()+d,l=u.from.valueOf()+d,i>Date.now()&&u.to.valueOf()<Date.now()&&(i=Date.now(),l=u.from.valueOf())):(i=u.to.valueOf(),l=u.from.valueOf()),{from:l,to:i}},o=(r,g)=>{const u=r.to.valueOf()-r.from.valueOf(),d=r.to.valueOf()-u/2,i=u===0?3e4:u*g,l=d+i/2;return{from:d-i/2,to:l}};async function s(){const r=await navigator.clipboard.readText();let g;try{return g=JSON.parse(r),!g.from||!g.to?{range:r,isError:!0}:{range:g,isError:!1}}catch{return{range:r,isError:!0}}}},94515:(Y,A,e)=>{"use strict";e.d(A,{iU:()=>n});var t=e(47232);function n(r,g){if(!(r.fromDayOfWeek||r.from)&&!(r.toDayOfWeek||r.to))return[];const u={...r};u.from&&!u.to&&(u.to=u.from),!u.from&&u.to&&(u.from=u.to);const d={from:o(u.from),to:o(u.to)};if(!u.fromDayOfWeek&&u.toDayOfWeek&&(u.fromDayOfWeek=u.toDayOfWeek),!u.toDayOfWeek&&u.fromDayOfWeek&&(u.toDayOfWeek=u.fromDayOfWeek),u.fromDayOfWeek&&(d.from.dayOfWeek=Number(u.fromDayOfWeek)),u.toDayOfWeek&&(d.to.dayOfWeek=Number(u.toDayOfWeek)),d.from.dayOfWeek&&d.from.h==null&&d.from.m==null&&(d.from.h=0,d.from.m=0,d.from.s=0),d.to.dayOfWeek&&d.to.h==null&&d.to.m==null&&(d.to.h=23,d.to.m=59,d.to.s=59),!d.from||!d.to)return[];d.from.h==null&&(d.from.h=0),d.to.h==null&&(d.to.h=23);const i=[],l=(0,t.KQ)(g.from).utc();for(l.set("hour",0),l.set("minute",0),l.set("second",0),l.set("millisecond",0),l.add(d.from.h,"hours"),l.add(d.from.m,"minutes"),l.add(d.from.s,"seconds");l.unix()<=g.to.unix();){for(;d.from.dayOfWeek&&d.from.dayOfWeek!==l.isoWeekday();)l.add(24,"hours");if(l.unix()>g.to.unix())break;const f=(0,t.KQ)(l).utc();if(f.hour)if(d.from.h<=d.to.h)f.add(d.to.h-d.from.h,"hours");else if(d.from.h>d.to.h)for(;f.hour()!==d.to.h;)f.add(1,"hours");else for(f.add(24-d.from.h,"hours");f.hour()!==d.to.h;)f.add(1,"hours");for(f.set("minute",d.to.m??0),f.set("second",d.to.s??0);d.to.dayOfWeek&&d.to.dayOfWeek!==f.isoWeekday();)f.add(24,"hours");l.unix()<g.from.unix()&&f.unix()<g.from.unix()||l.unix()>g.to.unix()&&f.unix()>g.to.unix()||i.push({from:l.valueOf(),to:f.valueOf()}),l.add(24,"hours")}return i}function o(r){const g={};if(!r?.length)return g;const u=r.split(":");return u?.length&&(g.h=Math.min(23,Math.max(0,Number(u[0]))),u.length>1&&(g.m=Math.min(60,Math.max(0,Number(u[1]))),u.length>2&&(g.s=Math.min(60,Math.max(0,Number(u[2])))))),g}function s(r){if(!r||r.h==null&&r.m==null&&r.s==null)return"";let g=String(r.h??0).padStart(2,"0")+":"+String(r.m??0).padStart(2,"0");return r.s!=null&&(g+=String(r.s??0).padStart(2,"0")),g}},67027:(Y,A,e)=>{"use strict";e.d(A,{r:()=>n});let t="";const n=()=>{const s=new URLSearchParams(window.location.search).get("auth_token");return s!==null&&s!==""?(t=s,s):t}},5133:(Y,A,e)=>{"use strict";e.d(A,{r:()=>g});var t=e(96540),n=e(62625),o=e(88323);const r=Object.values(n.X).filter(u=>u!==n.X.None).map(u=>({label:u,value:u}));function g({value:u,onChange:d,"aria-label":i,inputId:l,autoFocus:f,...c}){return t.createElement(o.l6,{inputId:l,value:u,options:r,onChange:h=>d(h.value),placeholder:"Choose role...","aria-label":i,autoFocus:f,...c})}},57334:(Y,A,e)=>{"use strict";e.d(A,{$u:()=>V,A5:()=>Q,Bc:()=>ee,DX:()=>U,JI:()=>C,Jc:()=>R,Kg:()=>L,MV:()=>a,N6:()=>D,P3:()=>y,Pi:()=>T,T$:()=>I,TK:()=>p,VR:()=>x,Vk:()=>_,hG:()=>E,hU:()=>H,is:()=>ae,kz:()=>c,ly:()=>m,mI:()=>O,nM:()=>N,nh:()=>P,nr:()=>v,pm:()=>S,xq:()=>j,yd:()=>G});var t=e(2543),n=e.n(t),o=e(72724),s=e(33378),r=e(17172),g=e(12131),u=e(2913),d=e(10096),i=e(80714),l=e(80348),f=e(44672);function c(Z){return async ne=>{try{ne((0,f.D1)(!1)),await ne(h(Z)),await ne(b(Z)),await ne(M(Z)),u.Ay.ldapEnabled&&(0,s.a)("ldapsync")&&await ne(S()),ne((0,f.D1)(!0))}catch(q){if(console.error(q),(0,r.NF)(q)){const te={title:q.data.message,body:q.data.error};ne((0,f.PV)(te))}}}}function h(Z){return async ne=>{const q=await(0,r.AI)().get(`/api/users/${Z}`,(0,i.F)());ne((0,f.G_)(q))}}function p(Z){return async ne=>{await(0,r.AI)().put(`/api/users/${Z.id}`,Z),ne(c(Z.id))}}function m(Z,ne){return async q=>{const te={password:ne};await(0,r.AI)().put(`/api/admin/users/${Z}/password`,te),q(c(Z))}}function a(Z){return async ne=>{await(0,r.AI)().post(`/api/admin/users/${Z}/disable`),g.Ny.push("/admin/users")}}function v(Z){return async ne=>{await(0,r.AI)().post(`/api/admin/users/${Z}/enable`),ne(c(Z))}}function E(Z){return async ne=>{await(0,r.AI)().delete(`/api/admin/users/${Z}`),g.Ny.push("/admin/users")}}function D(Z,ne){return async q=>{const te={isGrafanaAdmin:ne};await(0,r.AI)().put(`/api/admin/users/${Z}/permissions`,te),q(c(Z))}}function b(Z){return async ne=>{const q=await(0,r.AI)().get(`/api/users/${Z}/orgs`);ne((0,f.OF)(q))}}function P(Z,ne,q){return async te=>{const re={loginOrEmail:Z.login,role:q};await(0,r.AI)().post(`/api/orgs/${ne}/users/`,re),te(c(Z.id))}}function y(Z,ne,q){return async te=>{const re={role:q};await(0,r.AI)().patch(`/api/orgs/${ne}/users/${Z}`,re),te(c(Z))}}function T(Z,ne){return async q=>{await(0,r.AI)().delete(`/api/orgs/${ne}/users/${Z}`),q(c(Z))}}function M(Z){return async ne=>{if(!d.TP.hasPermission(l.AccessControlAction.UsersAuthTokenList))return;const q=await(0,r.AI)().get(`/api/admin/users/${Z}/auth-tokens`);q.reverse();const te=q.map(re=>({id:re.id,isActive:re.isActive,seenAt:(0,o.fq)(re.seenAt),createdAt:re.createdAt,clientIp:re.clientIp,browser:re.browser,browserVersion:re.browserVersion,os:re.os,osVersion:re.osVersion,device:re.device}));ne((0,f.ag)(te))}}function I(Z,ne){return async q=>{const te={authTokenId:Z};await(0,r.AI)().post(`/api/admin/users/${ne}/revoke-auth-token`,te),q(M(ne))}}function x(Z){return async ne=>{await(0,r.AI)().post(`/api/admin/users/${Z}/logout`),ne(M(Z))}}function S(){return async Z=>{const ne=d.TP.hasPermission(l.AccessControlAction.LDAPStatusRead);if((0,s.a)("ldapsync")&&ne){const q=await(0,r.AI)().get("/api/admin/ldap-sync-status");Z((0,f.OR)(q))}}}function O(Z){return async ne=>{await(0,r.AI)().post(`/api/admin/ldap/sync/${Z}`),ne(c(Z))}}function C(){return async Z=>{if(d.TP.hasPermission(l.AccessControlAction.LDAPStatusRead))try{const ne=await(0,r.AI)().get("/api/admin/ldap/status");Z((0,f.pH)(ne))}catch(ne){if((0,r.NF)(ne)){ne.isHandled=!0;const q={title:ne.data.message,body:ne.data.error};Z((0,f.V$)(q))}}}}function L(Z){return async ne=>{try{const q=await(0,r.AI)().get(`/api/admin/ldap/${encodeURIComponent(Z)}`),{name:te,surname:re,email:de,login:ie,isGrafanaAdmin:ge,isDisabled:ve,roles:ye,teams:pe}=q,le={info:{name:te,surname:re,email:de,login:ie},permissions:{isGrafanaAdmin:ge,isDisabled:ve},roles:ye,teams:pe};ne((0,f.TW)(le))}catch(q){if((0,r.NF)(q)){q.isHandled=!0;const te={title:q.data.message,body:q.data.error};ne((0,f.Vv)()),ne((0,f.Nf)(te))}}}}function U(){return Z=>{Z((0,f.zi)())}}function R(){return Z=>{Z((0,f.zi)()),Z((0,f.Vv)())}}const B=Z=>Z.map(ne=>Array.isArray(ne.value)?ne.value.map(q=>`${ne.name}=${q.value}`).join("&"):`${ne.name}=${ne.value}`).join("&");function H(){return async(Z,ne)=>{try{const{perPage:q,page:te,query:re,filters:de,sort:ie}=ne().userListAdmin;let ge=`/api/users/search?perpage=${q}&page=${te}&query=${re}&${B(de)}`;ie&&(ge+=`&sort=${ie}`);const ve=await(0,r.AI)().get(ge);Z((0,f.Mb)(ve))}catch(q){(0,f.g4)(),console.error(q)}}}const W=(0,t.debounce)(Z=>Z(H()),500);function N(Z){return async ne=>{ne((0,f.Cj)()),ne((0,f.L5)(Z)),W(ne)}}function V(Z){return async ne=>{ne((0,f.Cj)()),ne((0,f.jX)(Z)),W(ne)}}function G(Z){return async ne=>{ne((0,f.Cj)()),ne((0,f.EC)(Z)),ne(H())}}function _({sortBy:Z}){const ne=Z.length?`${Z[0].id}-${Z[0].desc?"desc":"asc"}`:void 0;return async(q,te)=>{te().userListAdmin.sort!==ne&&(q((0,f.Cj)()),q((0,f.$u)(ne)),q(H()))}}const K=Z=>Z.map(ne=>Array.isArray(ne.value)?ne.value.map(q=>`${ne.name}=${q.value}`).join("&"):`${ne.name}=${ne.value}`).join("&");function j(){return async(Z,ne)=>{try{const{perPage:q,page:te,query:re,filters:de,sort:ie}=ne().userListAnonymousDevices;let ge=`/api/anonymous/search?perpage=${q}&page=${te}&query=${re}&${K(de)}`;ie&&(ge+=`&sort=${ie}`);const ve=await(0,r.AI)().get(ge);Z((0,f.o3)(ve))}catch(q){console.error(q)}}}const k=(0,t.debounce)(Z=>Z(j()),500);function Q({sortBy:Z}){const ne=Z.length?`${Z[0].id}-${Z[0].desc?"desc":"asc"}`:void 0;return async(q,te)=>{te().userListAnonymousDevices.sort!==ne&&(q((0,f.kh)(ne)),q(j()))}}function ee(Z){return async ne=>{ne((0,f.xx)(Z)),k(ne)}}function ae(Z){return async ne=>{ne((0,f.iK)(Z)),ne(j())}}},44672:(Y,A,e)=>{"use strict";e.d(A,{$u:()=>O,Ay:()=>V,Cj:()=>T,D1:()=>v,EC:()=>x,G_:()=>p,L5:()=>I,Mb:()=>y,Nf:()=>i,OF:()=>m,OR:()=>d,PV:()=>E,TW:()=>l,V$:()=>u,Vv:()=>r,ag:()=>a,g4:()=>M,iK:()=>H,jX:()=>S,kh:()=>B,o3:()=>R,pH:()=>g,xx:()=>W,zi:()=>s});var t=e(30038);const n={connectionInfo:[],syncInfo:void 0,user:void 0,connectionError:void 0,userError:void 0},o=(0,t.Z0)({name:"ldap",initialState:n,reducers:{ldapConnectionInfoLoadedAction:(G,_)=>({...G,ldapError:void 0,connectionInfo:_.payload}),ldapFailedAction:(G,_)=>({...G,ldapError:_.payload}),ldapSyncStatusLoadedAction:(G,_)=>({...G,syncInfo:_.payload}),userMappingInfoLoadedAction:(G,_)=>({...G,user:_.payload,userError:void 0}),userMappingInfoFailedAction:(G,_)=>({...G,user:void 0,userError:_.payload}),clearUserMappingInfoAction:(G,_)=>({...G,user:void 0}),clearUserErrorAction:(G,_)=>({...G,userError:void 0})}}),{clearUserErrorAction:s,clearUserMappingInfoAction:r,ldapConnectionInfoLoadedAction:g,ldapFailedAction:u,ldapSyncStatusLoadedAction:d,userMappingInfoFailedAction:i,userMappingInfoLoadedAction:l}=o.actions,f=o.reducer,c={user:void 0,sessions:[],orgs:[],isLoading:!0,error:void 0},h=(0,t.Z0)({name:"userAdmin",initialState:c,reducers:{userProfileLoadedAction:(G,_)=>({...G,user:_.payload}),userOrgsLoadedAction:(G,_)=>({...G,orgs:_.payload}),userSessionsLoadedAction:(G,_)=>({...G,sessions:_.payload}),userAdminPageLoadedAction:(G,_)=>({...G,isLoading:!_.payload}),userAdminPageFailedAction:(G,_)=>({...G,error:_.payload,isLoading:!1})}}),{userProfileLoadedAction:p,userOrgsLoadedAction:m,userSessionsLoadedAction:a,userAdminPageLoadedAction:v,userAdminPageFailedAction:E}=h.actions,D=h.reducer,b={users:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!1}],isLoading:!0},P=(0,t.Z0)({name:"userListAdmin",initialState:b,reducers:{usersFetched:(G,_)=>{const{totalCount:K,perPage:j,...k}=_.payload,Q=Math.ceil(K/j);return{...G,...k,totalPages:Q,perPage:j,showPaging:Q>1,isLoading:!1}},usersFetchBegin:G=>({...G,isLoading:!0}),usersFetchEnd:G=>({...G,isLoading:!1}),queryChanged:(G,_)=>({...G,query:_.payload,page:0}),pageChanged:(G,_)=>({...G,page:_.payload}),sortChanged:(G,_)=>({...G,page:0,sort:_.payload}),filterChanged:(G,_)=>{const{name:K,value:j}=_.payload;return G.filters.some(k=>k.name===K)?{...G,page:0,filters:G.filters.map(k=>k.name===K?{...k,value:j}:k)}:{...G,page:0,filters:[...G.filters,_.payload]}}}}),{usersFetched:y,usersFetchBegin:T,usersFetchEnd:M,queryChanged:I,pageChanged:x,filterChanged:S,sortChanged:O}=P.actions,C=P.reducer,L={devices:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!0}]},U=(0,t.Z0)({name:"userListAnonymousDevices",initialState:L,reducers:{usersAnonymousDevicesFetched:(G,_)=>{const{totalCount:K,perPage:j,...k}=_.payload,Q=Math.ceil(K/j);return{...G,...k,totalPages:Q,perPage:j,showPaging:Q>1}},anonQueryChanged:(G,_)=>({...G,query:_.payload,page:0}),anonPageChanged:(G,_)=>({...G,page:_.payload}),anonUserSortChanged:(G,_)=>({...G,page:0,sort:_.payload}),filterChanged:(G,_)=>{const{name:K,value:j}=_.payload;return G.filters.some(k=>k.name===K)?{...G,page:0,filters:G.filters.map(k=>k.name===K?{...k,value:j}:k)}:{...G,page:0,filters:[...G.filters,_.payload]}}}}),{usersAnonymousDevicesFetched:R,anonUserSortChanged:B,anonPageChanged:H,anonQueryChanged:W}=U.actions,N=U.reducer,V={ldap:f,userAdmin:D,userListAdmin:C,userListAnonymousDevices:N}},35538:(Y,A,e)=>{"use strict";e.d(A,{pL:()=>n,z5:()=>s});var t=e(32264);const n=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function o(){const r=t.$.licenseInfo?.trialExpiry;return!!(r&&r>0)}const s=()=>o()&&t.$.featureToggles.featureHighlights},55907:(Y,A,e)=>{"use strict";e.d(A,{A:()=>E,p:()=>u});var t=e(2543),n=e.n(t),o=e(1062);const s=new o.tI({type:"query",params:[{name:"queryRefId",type:"string",dynamicLookup:!0},{name:"from",type:"string",options:["10s","1m","5m","10m","15m","1h","2h","6h","12h","24h","48h"]},{name:"to",type:"string",options:["now","now-1m","now-5m","now-10m","now-1h"]}],defaultParams:["#A","15m","now","avg"]}),r=[{text:"Query",value:"query"}],g={alerting:1,firing:1,no_data:2,pending:3,ok:4,paused:5,inactive:5};var u=(D=>(D.IsAbove="gt",D.IsBelow="lt",D.IsOutsideRange="outside_range",D.IsWithinRange="within_range",D.HasNoValue="no_value",D))(u||{});const d=[{value:"gt",text:"IS ABOVE"},{value:"lt",text:"IS BELOW"},{value:"outside_range",text:"IS OUTSIDE RANGE"},{value:"within_range",text:"IS WITHIN RANGE"},{value:"no_value",text:"HAS NO VALUE"}],i=[{text:"OR",value:"or"},{text:"AND",value:"and"}],l=[{text:"avg()",value:"avg"},{text:"min()",value:"min"},{text:"max()",value:"max"},{text:"sum()",value:"sum"},{text:"count()",value:"count"},{text:"last()",value:"last"},{text:"median()",value:"median"},{text:"diff()",value:"diff"},{text:"diff_abs()",value:"diff_abs"},{text:"percent_diff()",value:"percent_diff"},{text:"percent_diff_abs()",value:"percent_diff_abs"},{text:"count_non_null()",value:"count_non_null"}],f=[{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Keep Last State",value:"keep_state"},{text:"Ok",value:"ok"}],c=[{text:"Alerting",value:"alerting"},{text:"Keep Last State",value:"keep_state"}];function h(D){const b=new o.tI({type:D.type,defaultParams:[]});return new o.kW(D,b)}function p(D){return D.toLowerCase().replace(/_/g,"").split(" ")[0]}function m(D){switch(p(D)){case"normal":case"ok":return{text:"OK",iconClass:"heart",stateClass:"alert-state-ok"};case"alerting":return{text:"ALERTING",iconClass:"heart-break",stateClass:"alert-state-critical"};case"nodata":return{text:"NO DATA",iconClass:"question-circle",stateClass:"alert-state-warning"};case"paused":return{text:"PAUSED",iconClass:"pause",stateClass:"alert-state-paused"};case"pending":return{text:"PENDING",iconClass:"hourglass",stateClass:"alert-state-warning"};case"firing":return{text:"FIRING",iconClass:"fire",stateClass:""};case"inactive":return{text:"INACTIVE",iconClass:"check",stateClass:""};case"error":return{text:"ERROR",iconClass:"heart-break",stateClass:"alert-state-critical"};case"unknown":default:return{text:"UNKNOWN",iconClass:"question-circle",stateClass:".alert-state-paused"}}}function a(D,b){return(0,t.reduce)(D,(P,y)=>(y.metric!==void 0&&y.value!==void 0&&P.push(y.metric+"="+y.value),y.Metric!==void 0&&y.Value!==void 0&&P.push(y.Metric+"="+y.Value),P),[]).join(b)}function v(D){return(0,t.isArray)(D.data)?a(D.data,", "):(0,t.isArray)(D.data.evalMatches)?a(D.data.evalMatches,", "):D.data.error?"Error: "+D.data.error:""}const E={alertQueryDef:s,getStateDisplayModel:m,conditionTypes:r,evalFunctions:d,evalOperators:i,noDataModes:f,executionErrorModes:c,reducerTypes:l,createReducerPart:h,getAlertAnnotationInfo:v,alertStateSortScore:g}},1062:(Y,A,e)=>{"use strict";e.d(A,{Dw:()=>g,Wn:()=>r,kW:()=>s,tI:()=>o});var t=e(2543),n=e.n(t);class o{constructor(l){this.type=l.type,this.params=l.params,this.defaultParams=l.defaultParams,this.renderer=l.renderer,this.category=l.category,this.addStrategy=l.addStrategy}}class s{constructor(l,f){if(this.part=l,this.def=f,!this.def)throw{message:"Could not find query part "+l.type};l.params=l.params||(0,t.clone)(this.def.defaultParams),this.params=l.params,this.text="",this.updateText()}render(l){return this.def.renderer(this,l)}hasMultipleParamsInString(l,f){return l.indexOf(",")===-1?!1:this.def.params[f+1]&&this.def.params[f+1].optional}updateParam(l,f){if(this.hasMultipleParamsInString(l,f)){(0,t.each)(l.split(","),(c,h)=>{this.updateParam(c.trim(),h)});return}l===""&&this.def.params[f].optional?this.params.splice(f,1):this.params[f]=l,this.part.params=this.params,this.updateText()}updateText(){if(this.params.length===0){this.text=this.def.type+"()";return}let l=this.def.type+"(";l+=this.params.join(", "),l+=")",this.text=l}}function r(i,l){const f=i.def.type+"(",c=(0,t.map)(i.params,(h,p)=>{const m=i.def.params[p];return m.type==="time"&&h==="auto"&&(h="$__interval"),m.quote==="single"?"'"+h+"'":m.quote==="double"?'"'+h+'"':h});return l&&c.unshift(l),f+c.join(", ")+")"}function g(i,l){return l+" "+i.params[0]}function u(i,l){return i.params[0]}function d(i,l){return'"'+i.params[0]+'"'}},52806:(Y,A,e)=>{"use strict";e.d(A,{Ay:()=>y,lB:()=>l,EF:()=>p,L9:()=>m,cN:()=>E,NR:()=>D,of:()=>v,Ri:()=>a});var t=e(30038),n=e(47232),o=e(82960),s=e(88467),r=e(23770);const u=(0,o.combineReducers)({dataSources:(0,s.Xw)("dataSources",r.DC,({rulesSourceName:I})=>I).reducer,promRules:(0,s.Xw)("promRules",r.mB,({rulesSourceName:I})=>I).reducer,rulerRules:(0,s.Xw)("rulerRules",r.eB,({rulesSourceName:I})=>I).reducer,silences:(0,s.Xw)("silences",r.ly,I=>I).reducer,ruleForm:(0,o.combineReducers)({saveRule:(0,s.J7)("saveRule",r._$).reducer,existingRule:(0,s.J7)("existingRule",r.pT).reducer}),grafanaNotifiers:(0,s.J7)("grafanaNotifiers",r.mF).reducer,saveAMConfig:(0,s.J7)("saveAMConfig",r.RW).reducer,deleteAMConfig:(0,s.J7)("deleteAMConfig",r.nO).reducer,updateSilence:(0,s.J7)("updateSilence",r.a7).reducer,amAlerts:(0,s.Xw)("amAlerts",r.El,I=>I).reducer,folders:(0,s.Xw)("folders",r.Tp,I=>I).reducer,amAlertGroups:(0,s.Xw)("amAlertGroups",r.D3,I=>I).reducer,testReceivers:(0,s.J7)("testReceivers",r.bO).reducer,updateLotexNamespaceAndGroup:(0,s.J7)("updateLotexNamespaceAndGroup",r.LU).reducer,externalAlertmanagers:(0,o.combineReducers)({alertmanagerConfig:(0,s.J7)("alertmanagerConfig",r.ef).reducer,discoveredAlertmanagers:(0,s.J7)("discoveredAlertmanagers",r.IX).reducer}),managedAlertStateHistory:(0,s.J7)("managedAlertStateHistory",r.JH).reducer});var d=e(55907);const i={items:[],searchQuery:"",isLoading:!1},l={notificationChannelTypes:[],notificationChannel:{},notifiers:[]};function f(I,x){const S=d.A.getStateDisplayModel(x),O={...I,stateText:S.text,stateIcon:S.iconClass,stateClass:S.stateClass,stateAge:(0,n.KQ)(I.newStateDate).fromNow(!0)};return O.state!=="paused"&&(O.executionError&&(O.info="Execution Error: "+O.executionError),O.evalData&&O.evalData.noData&&(O.info="Query returned no data")),O}const c=(0,t.Z0)({name:"alertRules",initialState:i,reducers:{loadAlertRules:I=>({...I,isLoading:!0}),loadedAlertRules:(I,x)=>{const O=x.payload.map(C=>f(C,C.state));return{...I,items:O,isLoading:!1}},setSearchQuery:(I,x)=>({...I,searchQuery:x.payload})}}),h=(0,t.Z0)({name:"notificationChannel",initialState:l,reducers:{setNotificationChannels:(I,x)=>({...I,notificationChannelTypes:M(x.payload),notifiers:x.payload}),notificationChannelLoaded:(I,x)=>{const S=x.payload,C=I.notifiers.find(L=>L.type===S.type).options.filter(L=>L.secure);return C.length>0&&C.some(L=>S.settings[L.propertyName]!=="")?T(I,x.payload,C):{...I,notificationChannel:S}},resetSecureField:(I,x)=>({...I,notificationChannel:{...I.notificationChannel,secureFields:{...I.notificationChannel.secureFields,[x.payload]:!1}}})}}),{loadAlertRules:p,loadedAlertRules:m,setSearchQuery:a}=c.actions,{setNotificationChannels:v,notificationChannelLoaded:E,resetSecureField:D}=h.actions,b=c.reducer,P=h.reducer,y={alertRules:b,notificationChannel:P,unifiedAlerting:u};function T(I,x,S){const O={},C={};return S.forEach(L=>{C[L.propertyName]=x.settings[L.propertyName],O[L.propertyName]=""}),{...I,notificationChannel:{...x,settings:{...x.settings,...O},secureSettings:{...C}}}}function M(I){return I.map(x=>({value:x.type,label:x.name,...x,typeName:x.type})).sort((x,S)=>x.name>S.name?1:-1)}},25027:(Y,A,e)=>{"use strict";e.d(A,{AK:()=>y,Ke:()=>m,QA:()=>c,SN:()=>P,Sq:()=>E,U7:()=>h,fH:()=>l,le:()=>d,vV:()=>f});var t=e(47232),n=e(34867),o=e(17172),s=e(32264),r=e(14110),g=e(10096);const u=7,d={filterByLabel:"filtering alert instances by label",loadedList:"loaded Alert Rules list",leavingRuleGroupEdit:"leaving rule group edit without saving",alertRuleFromPanel:"creating alert rule from panel",alertRuleFromScratch:"creating alert rule from scratch",recordingRuleFromScratch:"creating recording rule from scratch",clickingAlertStateFilters:"clicking alert state filters",cancelSavingAlertRule:"user canceled alert rule creation",successSavingAlertRule:"alert rule saved successfully",unknownMessageFromError:"unknown messageFromError"},i=(0,n.DW)("features.alerting",{module:"Alerting"});function l(T,M){i.logInfo(T,M)}function f(T,M){i.logError(T,M)}function c(T,M,I){return async function(...x){const S=performance.now(),O=await T(...x);return l(M,{loadTimeMs:(performance.now()-S).toFixed(0),...I}),O}}function h(T,M,I){return async(...x)=>{const S=performance.now(),O=await T(...x),{namespacesCount:C,groupsCount:L,rulesCount:U}=p(O);return l(M,{loadTimeMs:(performance.now()-S).toFixed(0),namespacesCount:C,groupsCount:L,rulesCount:U,...I}),O}}function p(T){const M=T.length,I=T.flatMap(O=>O.groups).length,x=T.flatMap(O=>O.groups).flatMap(O=>O.rules).length;return{namespacesCount:M.toFixed(0),groupsCount:I.toFixed(0),rulesCount:x.toFixed(0)}}function m(T,M,I){return async(...x)=>{const S=performance.now(),O=await T(...x),{namespacesCount:C,groupsCount:L,rulesCount:U}=a(O);return l(M,{loadTimeMs:(performance.now()-S).toFixed(0),namespacesCount:C,groupsCount:L,rulesCount:U,...I}),O}}function a(T){const M=Object.keys(T).length,I=Object.values(T).flatMap(S=>S),x=I.flatMap(S=>S.rules);return{namespacesCount:M.toFixed(0),groupsCount:I.length.toFixed(0),rulesCount:x.length.toFixed(0)}}async function v(){try{const{createdAt:T}=await(0,o.AI)().get("/api/user"),M=(0,t.KQ)().subtract(u,"days"),I=(0,t.KQ)(T);return M.isBefore(I)}catch{return!0}}const E=async(T={grafana_version:s.$.buildInfo.version,org_id:g.TP.user.orgId,user_id:g.TP.user.id})=>{await v()||(0,r.rR)("grafana_alerting_navigation",T)},D=async T=>{await v()||reportInteraction("grafana_alerting_rule_creation",T)},b=async T=>{await v()||reportInteraction("grafana_alerting_rule_aborted",T)},P=async T=>{await v()||(0,r.rR)("grafana_alerting_rule_form_error",T)},y=async T=>{const M={grafana_version:s.$.buildInfo.version,org_id:g.TP.user.orgId,user_id:g.TP.user.id};(0,r.rR)("grafana_alerting_insights",{...M,...T})}},79741:(Y,A,e)=>{"use strict";e.r(A),e.d(A,{default:()=>P,defaultPageNav:()=>v});var t=e(96540),n=e(32264),o=e(17172),s=e(42418),r=e(66602),g=e(27921),u=e(7392),d=e(33450),i=e(56812),l=e(730),f=e(56361),c=e(18461);const h=(0,g.A)(()=>e.e(21).then(e.bind(e,90021))),p=t.lazy(()=>Promise.resolve().then(e.bind(e,51174))),m=!!n.$.featureToggles?.alertingDetailsViewV2,a=y=>m?t.createElement(D,{...y}):t.createElement(E,{...y}),v={id:"alert-rule-view",text:""},E=y=>t.createElement(h,{...y}),D=y=>{const T=(0,c.uE)(y.match.params),M=t.useMemo(()=>{if(!T)throw new Error("Rule ID is required");return(0,c.qg)(T,!0)},[T]),{loading:I,error:x,result:S}=(0,l.ZU)({ruleIdentifier:M});return x?t.createElement(d.d,{pageNav:v,navId:"alert-list"},t.createElement(b,{error:x})):I?t.createElement(d.d,{pageNav:v,navId:"alert-list",isLoading:!0},t.createElement(t.Fragment,null)):S?t.createElement(i.K,{identifier:M,rule:S},t.createElement(p,null)):null};function b({error:y}){return(0,o.NF)(y)&&y.status===404?t.createElement(u.L,{entity:"Rule"}):t.createElement(s.F,{title:"Something went wrong loading the rule"},(0,f.JZ)(y))}const P=(0,r.Xc)(a,{style:"page"})},79938:(Y,A,e)=>{"use strict";e.d(A,{hK:()=>i});var t=e(57220),n=e(75214),o=e(23662),s=e(49962),r=e(49498),g=e(28220);const u="/api/v1/rule/test/grafana",d="api/prometheus/grafana/api/v1/rules",i=s.H.injectEndpoints({endpoints:l=>({preview:l.mutation({query:({alertQueries:f,condition:c,customLabels:h,folder:p,alertName:m,alertUid:a})=>({url:u,data:{rule:{grafana_alert:{data:f,condition:c,no_data_state:"Alerting",title:m,uid:a??"N/A"},for:"0s",labels:(0,n.x4)(h),annotations:{}},folderUid:p.uid,folderTitle:p.title},method:"POST"})}),prometheusRulesByNamespace:l.query({query:({limitAlerts:f,identifier:c,filter:h,state:p,matcher:m})=>{const a=new URLSearchParams;f&&a.set("limit_alerts",String(f)),c&&((0,o.Mj)(c)||(0,o.X4)(c))&&(a.set("file",c.namespace),a.set("rule_group",c.groupName));const v=(0,r.bZ)(a,h);return{url:d,params:(0,r.Dj)(v,p,m)}},transformResponse:f=>(0,r.lH)(f.data.groups,t.hY)}),prometheusRuleNamespaces:l.query({query:({ruleSourceName:f,namespace:c,groupName:h,ruleName:p,dashboardUid:m})=>{const a={file:c,rule_group:h,rule_name:p,dashboard_uid:m};return{url:`api/prometheus/${(0,t.w5)(f)}/api/v1/rules`,params:a}},transformResponse:(f,c,h)=>(0,r.lH)(f.data.groups,h.ruleSourceName)}),rulerRules:l.query({query:({rulerConfig:f,filter:c})=>{const{path:h,params:p}=(0,g.$o)(f).rules(c);return{url:h,params:p}}}),rulerRuleGroup:l.query({query:({rulerConfig:f,namespace:c,group:h})=>{const{path:p,params:m}=(0,g.$o)(f).namespaceGroup(c,h);return{url:p,params:m}}}),exportRules:l.query({query:({format:f,folderUid:c,group:h,ruleUid:p})=>({url:"/api/ruler/grafana/api/v1/export/rules",params:{format:f,folderUid:c,group:h,ruleUid:p},responseType:"text"}),keepUnusedDataFor:0}),exportReceiver:l.query({query:({receiverName:f,decrypt:c,format:h})=>({url:"/api/v1/provisioning/contact-points/export/",params:{format:h,decrypt:c,name:f},responseType:"text"}),keepUnusedDataFor:0}),exportReceivers:l.query({query:({decrypt:f,format:c})=>({url:"/api/v1/provisioning/contact-points/export/",params:{format:c,decrypt:f},responseType:"text"}),keepUnusedDataFor:0}),exportPolicies:l.query({query:({format:f})=>({url:"/api/v1/provisioning/policies/export/",params:{format:f},responseType:"text"}),keepUnusedDataFor:0}),exportModifiedRuleGroup:l.mutation({query:({payload:f,format:c,nameSpaceUID:h})=>({url:`/api/ruler/grafana/api/v1/rules/${h}/export/`,params:{format:c},responseType:"text",data:f,method:"POST"})}),exportMuteTimings:l.query({query:({format:f})=>({url:"/api/v1/provisioning/mute-timings/export/",params:{format:f},responseType:"text"}),keepUnusedDataFor:0}),exportMuteTiming:l.query({query:({format:f,muteTiming:c})=>({url:`/api/v1/provisioning/mute-timings/${c}/export/`,params:{format:f},responseType:"text"}),keepUnusedDataFor:0})})})},49962:(Y,A,e)=>{"use strict";e.d(A,{H:()=>g});var t=e(93020),n=e(75505),o=e(17172),s=e(25027);const r=()=>async u=>{try{const d=performance.now(),{data:i,...l}=await(0,n.s)((0,o.AI)().fetch(u));return(0,s.fH)("Request finished",{loadTimeMs:(performance.now()-d).toFixed(0),url:u.url,method:u.method??"",responseStatus:l.statusText}),{data:i,meta:l}}catch(d){return{error:d}}},g=(0,t.xP)({reducerPath:"alertingApi",baseQuery:r(),tagTypes:["AlertmanagerChoice","AlertmanagerConfiguration","OnCallIntegrations","OrgMigrationState","DataSourceSettings"],endpoints:()=>({})})},32415:(Y,A,e)=>{"use strict";e.d(A,{By:()=>m,Bz:()=>i,Mn:()=>c,VO:()=>p,Vv:()=>y,WS:()=>g,Wf:()=>P,_P:()=>b,as:()=>l,dk:()=>f,f4:()=>h,nd:()=>d,vk:()=>u});var t=e(75505),n=e(76885),o=e(39070),s=e(17172),r=e(57220);async function g(M){try{const I=await(0,t.s)((0,s.AI)().fetch({url:`/api/alertmanager/${(0,r.w5)(M)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}));return{template_files:I.data.template_files??{},template_file_provenances:I.data.template_file_provenances??{},alertmanager_config:I.data.alertmanager_config??{},last_applied:I.data.last_applied,id:I.data.id}}catch(I){if(M===r.hY&&(0,s.NF)(I)&&I.data?.message?.includes("could not find an Alertmanager configuration"))return{template_files:{},alertmanager_config:{}};throw I}}async function u(M,I){await(0,t.s)((0,s.AI)().fetch({method:"POST",url:`/api/alertmanager/${(0,r.w5)(M)}/config/api/v1/alerts`,data:I,showErrorAlert:!1,showSuccessAlert:!1}))}async function d(M){await(0,t.s)((0,s.AI)().fetch({method:"DELETE",url:`/api/alertmanager/${(0,r.w5)(M)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}))}async function i(M){return(await(0,t.s)((0,s.AI)().fetch({url:`/api/alertmanager/${(0,r.w5)(M)}/api/v2/silences`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function l(M,I){return(await(0,t.s)((0,s.AI)().fetch({url:`/api/alertmanager/${(0,r.w5)(M)}/api/v2/silences`,data:I,showErrorAlert:!1,showSuccessAlert:!1,method:"POST"}))).data}async function f(M,I){await(0,s.AI)().delete(`/api/alertmanager/${(0,r.w5)(M)}/api/v2/silence/${encodeURIComponent(I)}`)}async function c(M,I,x=!0,S=!0,O=!0){const C=n.kM.toUrlParams({silenced:x,active:S,inhibited:O})+I?.map(U=>`filter=${encodeURIComponent(`${T(U.name)}=${U.isRegex?"~":""}"${T(U.value)}"`)}`).join("&")||"";return(await(0,t.s)((0,s.AI)().fetch({url:`/api/alertmanager/${(0,r.w5)(M)}/api/v2/alerts`+(C?"?"+C:""),showErrorAlert:!1,showSuccessAlert:!1}))).data}async function h(M){return(await(0,t.s)((0,s.AI)().fetch({url:`/api/alertmanager/${(0,r.w5)(M)}/api/v2/alerts/groups`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function p(M){return(await(0,t.s)((0,s.AI)().fetch({url:`/api/alertmanager/${(0,r.w5)(M)}/api/v2/status`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function m(M,I,x){const S={receivers:I,alert:x};try{const O=await(0,t.s)((0,s.AI)().fetch({method:"POST",data:S,url:`/api/alertmanager/${(0,r.w5)(M)}/config/api/v1/receivers/test`,showErrorAlert:!1,showSuccessAlert:!1}));if(a(O.data))throw new Error(D(O.data))}catch(O){throw(0,s.NF)(O)&&v(O.data)&&a(O.data)?new Error(D(O.data)):O}}function a(M){return M.receivers.some(I=>I.grafana_managed_receiver_configs.some(x=>x.status==="failed"))}function v(M){return(0,o.Gv)(M)&&"receivers"in M&&Array.isArray(M.receivers)?M.receivers.every(E):!1}function E(M){return(0,o.Gv)(M)&&"name"in M&&typeof M.name=="string"&&"grafana_managed_receiver_configs"in M&&Array.isArray(M.grafana_managed_receiver_configs)}function D(M){return M.receivers.flatMap(I=>I.grafana_managed_receiver_configs.filter(x=>x.status==="failed").map(x=>x.error??"Unknown error.")).join("; ")}async function b(M){await(0,t.s)((0,s.AI)().fetch({method:"POST",data:M,url:"/api/v1/ngalert/admin_config",showErrorAlert:!1,showSuccessAlert:!1})).then(()=>{y()})}async function P(){return(await(0,t.s)((0,s.AI)().fetch({method:"GET",url:"/api/v1/ngalert/alertmanagers"}))).data}async function y(){return(await(0,t.s)((0,s.AI)().fetch({method:"GET",url:"/api/v1/ngalert/admin_config",showErrorAlert:!1}))).data}function T(M){return M.replace(/"/g,'\\"')}},82843:(Y,A,e)=>{"use strict";e.d(A,{m:()=>p});var t=e(2543),n=e.n(t),o=e(99140),s=e(25027),r=e(98164),g=e(57220),u=e(56361),d=e(88467),i=e(49962),l=e(32415),f=e(77583);const c=10,h=30*1e3,p=i.H.injectEndpoints({endpoints:m=>({getAlertmanagerAlerts:m.query({query:({amSourceName:a,filter:v})=>{const E=v?.matchers?.filter(I=>I.name&&I.value).map(I=>`${I.name}${(0,r.MN)(I)}${(0,u.Y9)(I.value)}`),{silenced:D,inhibited:b,unprocessed:P,active:y}=v||{},T=Object.fromEntries(Object.entries({silenced:D,active:y,inhibited:b,unprocessed:P}).filter(([I,x])=>x!==void 0)),M={filter:E};return T&&Object.keys(T).forEach(I=>{M[I]=T[I]}),{url:`/api/alertmanager/${(0,g.w5)(a)}/api/v2/alerts`,params:M}}}),getAlertmanagerAlertGroups:m.query({query:({amSourceName:a})=>({url:`/api/alertmanager/${(0,g.w5)(a)}/api/v2/alerts/groups`})}),grafanaNotifiers:m.query({query:()=>({url:"/api/alert-notifiers"})}),getAlertmanagerChoiceStatus:m.query({query:()=>({url:"/api/v1/ngalert"}),providesTags:["AlertmanagerChoice"]}),getExternalAlertmanagerConfig:m.query({query:()=>({url:"/api/v1/ngalert/admin_config"}),providesTags:["AlertmanagerChoice"]}),getExternalAlertmanagers:m.query({query:()=>({url:"/api/v1/ngalert/alertmanagers"}),transformResponse:a=>a.data}),saveExternalAlertmanagersConfig:m.mutation({query:a=>({url:"/api/v1/ngalert/admin_config",method:"POST",data:a}),invalidatesTags:["AlertmanagerChoice"]}),getValidAlertManagersConfig:m.query({query:()=>({url:`/api/alertmanager/${(0,g.w5)(g.hY)}/config/history?limit=${c}`})}),resetAlertManagerConfigToOldVersion:m.mutation({query:a=>({url:`/api/alertmanager/${(0,g.w5)(g.hY)}/config/history/${a.id}/_activate`,method:"POST"})}),getAlertmanagerConfiguration:m.query({queryFn:async a=>{const v=a===g.hY;if((0,g.AL)(a))return(0,d.$I)((0,l.VO)(a).then(M=>({data:{alertmanager_config:M.config,template_files:{}}})));const{data:D}=await(0,o.JD)(f.L.endpoints.discoverAmFeatures.initiate({amSourceName:a})),b={alertmanager_config:{},template_files:{},template_file_provenances:{}},P=D?.lazyConfigInit??!1,y=(0,s.QA)(l.WS,`[${a}] Alertmanager config loaded`,{dataSourceName:a,thunk:"unifiedalerting/fetchAmConfig"}),T=(0,u.i9)(()=>y(a),M=>!!(0,d.CZ)(M)?.includes("alertmanager storage object not found")&&!P,h).then(M=>v?M:(0,t.isEmpty)(M.alertmanager_config)&&(0,t.isEmpty)(M.template_files)?(0,l.VO)(a).then(x=>({alertmanager_config:x.config,template_files:{},template_file_provenances:M.template_file_provenances,last_applied:M.last_applied,id:M.id})):M).then(M=>M??b).then(M=>({data:M})).catch(M=>{if(P&&(0,d.CZ)(M)?.includes("alertmanager storage object not found"))return{data:b};throw M});return(0,d.$I)(T).catch(M=>({error:M,data:void 0}))},providesTags:["AlertmanagerConfiguration"]}),updateAlertmanagerConfiguration:m.mutation({query:({selectedAlertmanager:a,config:v,...E})=>({url:`/api/alertmanager/${(0,g.w5)(a)}/config/api/v1/alerts`,method:"POST",data:v,...E}),invalidatesTags:["AlertmanagerConfiguration"]}),getContactPointsStatus:m.query({query:()=>({url:`/api/alertmanager/${(0,g.w5)(g.hY)}/config/api/v1/receivers`}),transformResponse:a=>{const v=E=>E.startsWith("0001-01-01");return a.map(E=>({...E,integrations:E.integrations.map(D=>{const b=v(D.lastNotifyAttempt);return{...D,lastNotifyAttempt:b?"":D.lastNotifyAttempt,lastNotifyAttemptDuration:b?"":D.lastNotifyAttemptDuration}})}))}}),getContactPointsList:m.query({query:()=>({url:"/api/v1/notifications/receivers"})}),getMuteTimingList:m.query({query:()=>({url:"/api/v1/notifications/time-intervals"})})})})},92240:(Y,A,e)=>{"use strict";e.d(A,{O5:()=>f,_y:()=>l,nD:()=>d});var t=e(75505),n=e(17172),o=e(94822),s=e(55740),r=e(57220),g=e(49498),u=e(28220);async function d(v){if(v===r.hY)return{features:{rulerApiEnabled:!0}};const E=(0,r.oh)(v);if(!E)throw new Error(`Cannot find data source configuration for ${v}`);const{url:D,name:b,type:P}=E;if(!D)throw new Error("The data source url cannot be empty.");if(P!=="prometheus"&&P!=="loki")throw new Error(`The build info request is not available for ${P}. Only 'prometheus' and 'loki' are supported`);return i({name:b,url:D,type:P})}async function i(v){const{url:E,name:D,type:b}=v,P=b==="loki"?void 0:await h(E);if(!(P!==void 0)){if(!await p(D))throw new Error(`Unable to fetch alert rules. Is the ${D} data source properly configured?`);const I=await m(D);return{application:o.N1.Cortex,features:{rulerApiEnabled:I}}}const{features:T}=P.data;return T?{application:o.N1.Mimir,features:{rulerApiEnabled:T?.ruler_config_api==="true"}}:{application:o.N1.Prometheus,features:{rulerApiEnabled:!1}}}async function l(v){if(v===r.hY)return{lazyConfigInit:!1};const E=c(v),{url:D,type:b}=E;if(!D)throw new Error("The data source url cannot be empty.");if(b!=="alertmanager")throw new Error(`Alertmanager feature discovery is not available for ${b}. Only 'alertmanager' type is supported`);return await f(D)}async function f(v){try{return{lazyConfigInit:(await h(v))?.data?.application==="Grafana Mimir"}}catch{return{lazyConfigInit:!1}}}function c(v){const E=(0,r.oh)(v);if(!E)throw new Error(`Cannot find data source configuration for ${v}`);return E}async function h(v){return(await(0,t.s)((0,n.AI)().fetch({url:`${v}/api/v1/status/buildinfo`,showErrorAlert:!1,showSuccessAlert:!1})).catch(D=>{if(!("status"in D&&D.status===404))throw D}))?.data}async function p(v){try{return await(0,g.sA)(v),!0}catch{return!1}}async function m(v){try{return await(0,u.Zp)(v),!0}catch(E){if(a(E))return!1;throw E}}function a(v){return(0,n.NF)(v)?v.data.message?.includes("GetRuleGroup unsupported in rule local store")||v.data.message?.includes("page not found")||v.data.message?.includes(s.UU):v instanceof Error&&v.message?.includes("404 from rules config endpoint")}},77583:(Y,A,e)=>{"use strict";e.d(A,{L:()=>g});var t=e(94822),n=e(25027),o=e(57220),s=e(49962),r=e(92240);const g=s.H.injectEndpoints({endpoints:u=>({discoverAmFeatures:u.query({queryFn:async({amSourceName:d})=>{try{return{data:await(0,r._y)(d)}}catch(i){return{error:i}}}}),discoverDsFeatures:u.query({queryFn:async({rulesSourceName:d})=>{const i=(0,o.Jz)(d);if(!i)return{error:new Error(`Missing data source configuration for ${d}`)};const f=await(0,n.QA)(r.nD,`[${d}] Rules source features discovered`,{dataSourceName:d,endpoint:"unifiedalerting/featureDiscoveryApi/discoverDsFeatures"})(i.name);return{data:{rulerConfig:f.features.rulerApiEnabled?{dataSourceName:i.name,apiVersion:f.application===t.N1.Cortex?"legacy":"config"}:void 0}}}})})})},68788:(Y,A,e)=>{"use strict";e.d(A,{Es:()=>s,pB:()=>d});var t=e(75505),n=e(17172),o=e(57220);function s(){return(0,n.AI)().get("/api/alert-notifiers")}const r=i=>{const l=i.match(/^(\w+)(\[\d+\])?$/);return l?{type:l[1],index:l[2]}:{type:i,index:void 0}},g=i=>{const l={receivers:{},errorCount:0};i.forEach(c=>{l.receivers[c.name]={active:c.active,notifiers:{},errorCount:0};const h=l.receivers[c.name];c.integrations.forEach(p=>{!!p?.lastNotifyAttemptError&&(h.errorCount+=1);const a=u(p.name);a&&(h.notifiers[a]||(h.notifiers[a]=[]),h.notifiers[a].push(p))})});const f=Object.values(l.receivers).reduce((c,h)=>c+h.errorCount,0);return{...l,errorCount:f}},u=i=>r(i)?.type;async function d(i){try{const l=await(0,t.s)((0,n.AI)().fetch({url:`/api/alertmanager/${(0,o.w5)(i)}/config/api/v1/receivers`,showErrorAlert:!1,showSuccessAlert:!1}));return g(l.data)}catch{return g([])}}},49498:(Y,A,e)=>{"use strict";e.d(A,{Dj:()=>u,bZ:()=>g,lH:()=>d,sA:()=>i});var t=e(75505),n=e(17172),o=e(57220),s=e(23662);function r(l){const{dataSourceName:f,limitAlerts:c,identifier:h}=l;return{rules:(p,m,a)=>{const v=new URLSearchParams;f===o.hY&&c&&v.set("limit_alerts",String(c)),h&&((0,s.Mj)(h)||(0,s.X4)(h))&&(v.set("file",h.namespace),v.set("rule_group",h.groupName));const E=g(v,p);return{url:`/api/prometheus/${(0,o.w5)(f)}/api/v1/rules`,params:u(E,m,a)}}}}function g(l,f){return f?.dashboardUID&&(l.set("dashboard_uid",f.dashboardUID),f?.panelId&&l.set("panel_id",String(f.panelId))),Object.fromEntries(l)}function u(l,f,c){let h={...l};if(f?.length&&(h={...h,state:f}),c?.length){const p=c.map(m=>JSON.stringify(m));h={...h,matcher:p}}return h}const d=(l,f)=>{const c={};return l.forEach(h=>{h.rules.forEach(p=>{p.query=p.query||""}),c[h.file]?c[h.file].groups.push(h):c[h.file]={dataSourceName:f,name:h.file,groups:[h]}}),Object.values(c)};async function i(l,f,c,h,p,m){if(f?.dashboardUID&&l!==o.hY)throw new Error("Filtering by dashboard UID is only supported for Grafana Managed rules.");const{url:a,params:v}=r({dataSourceName:l,limitAlerts:c,identifier:m}).rules(f,p,h),E=await(0,t.s)((0,n.AI)().fetch({url:a,params:v,showErrorAlert:!1,showSuccessAlert:!1})).catch(D=>{throw"status"in D&&D.status===404?new Error("404 from rule state endpoint. Perhaps ruler API is not enabled?"):D});return d(E.data.data.groups,l)}},28220:(Y,A,e)=>{"use strict";e.d(A,{$o:()=>u,AJ:()=>h,BK:()=>E,E8:()=>d,HO:()=>c,Zp:()=>f,iy:()=>i});var t=e(75505),n=e(39070),o=e(17172),s=e(55740),r=e(57220),g=e(49498);function u(D){const P=`${`/api/ruler/${(0,r.w5)(D.dataSourceName)}`}/api/v1/rules`,y=new URLSearchParams;return y.set("subtype",D.apiVersion==="legacy"?"cortex":"mimir"),{rules:T=>{const M=(0,g.bZ)(y,T);return{path:`${P}`,params:M}},namespace:T=>({path:`${P}/${encodeURIComponent(T)}`,params:Object.fromEntries(y)}),namespaceGroup:(T,M)=>({path:`${P}/${encodeURIComponent(T)}/${encodeURIComponent(M)}`,params:Object.fromEntries(y)})}}async function d(D,b,P){const{path:y,params:T}=u(D).namespace(b);await(0,t.s)((0,o.AI)().fetch({method:"POST",url:y,data:P,showErrorAlert:!1,showSuccessAlert:!1,params:T}))}async function i(D,b){if(b?.dashboardUID&&D.dataSourceName!==r.hY)throw new Error("Filtering by dashboard UID is only supported by Grafana.");const{path:P,params:y}=u(D).rules(b);return p(P,{},y)}async function l(D,b){const{path:P,params:y}=u(D).namespace(b);return(await p(P,{},y))[b]||[]}async function f(D){return p(`/api/ruler/${(0,r.w5)(D)}/api/v1/rules/test/test`,null)}async function c(D,b,P){const{path:y,params:T}=u(D).namespaceGroup(b,P);return p(y,null,T)}async function h(D,b,P){const{path:y,params:T}=u(D).namespaceGroup(b,P);await(0,t.s)((0,o.AI)().fetch({url:y,method:"DELETE",showSuccessAlert:!1,showErrorAlert:!1,params:T}))}async function p(D,b,P){try{return(await(0,t.s)((0,o.AI)().fetch({url:D,showErrorAlert:!1,showSuccessAlert:!1,params:P}))).data}catch(y){if(!m(y))throw y;if(v(y))return b;throw a(y)?{...y,data:{...y.data,message:s.UU}}:y}}function m(D){if(!(0,n.Gv)(D))return!1;const b="data"in D&&D.data!==null&&D.data!==void 0;return"status"in D&&Number.isFinite(D.status)&&b}function a(D){return D.status===404||D.status===500&&D.data.message?.includes("unexpected content type from upstream. expected YAML, got text/html")}function v(D){return D.status===404&&(D.data.message?.includes("group does not exist")||D.data.message?.includes("no rule groups found"))}async function E(D,b){const{path:P,params:y}=u(D).namespace(b);await(0,t.s)((0,o.AI)().fetch({method:"DELETE",url:P,showErrorAlert:!1,showSuccessAlert:!1,params:y}))}},15458:(Y,A,e)=>{"use strict";e.d(A,{R:()=>r});var t=e(32196),n=e(96540),o=e(40845),s=e(29158);const r=({labelKey:u,value:d,operator:i="=",onRemoveLabel:l})=>{const f=(0,o.of)(g);return n.createElement("div",{className:f.wrapper},u,i,d,!!l&&n.createElement(s.K,{name:"times",size:"xs",onClick:l,tooltip:"Remove label"}))},g=u=>({wrapper:(0,t.css)`
    padding: ${u.spacing(.5,1)};
    border-radius: ${u.shape.radius.default};
    border: solid 1px ${u.colors.border.medium};
    font-size: ${u.typography.bodySmall.fontSize};
    background-color: ${u.colors.background.secondary};
    font-weight: ${u.typography.fontWeightBold};
    color: ${u.colors.text.primary};
    display: inline-block;
    line-height: 1.2;
  `})},69087:(Y,A,e)=>{"use strict";e.d(A,{m:()=>f});var t=e(32196),n=e(2543),o=e.n(n),s=e(55127),r=e.n(s),g=e(96540),u=e(40845),d=e(55852),i=e(69613),l=e(8406);const f=({labels:m,commonLabels:a={},size:v})=>{const E=(0,u.of)(p,v),[D,b]=(0,g.useState)(!1),P=(0,n.chain)(m).toPairs().reject(h).reject(([M])=>D?!1:M in a).value(),y=Object.keys(a).length,T=y>0;return g.createElement("div",{className:E.wrapper,role:"list","aria-label":"Labels"},P.map(([M,I])=>g.createElement(l.J,{key:M+I,size:v,label:M,value:I,color:c(M)})),!D&&T&&g.createElement(d.$n,{variant:"secondary",fill:"text",onClick:()=>b(!0),tooltip:"Show common labels",tooltipPlacement:"top",size:"sm"},"+",y," common ",r()("label",y)),D&&T&&g.createElement(d.$n,{variant:"secondary",fill:"text",onClick:()=>b(!1),tooltipPlacement:"top",size:"sm"},"Hide common labels"))};function c(m){return(0,i.MC)(m).color}const h=([m,a])=>m.startsWith("__")&&m.endsWith("__"),p=(m,a)=>({wrapper:(0,t.css)`
    display: flex;
    flex-wrap: wrap;
    align-items: center;

    gap: ${a==="md"?m.spacing():m.spacing(.5)};
  `})},33450:(Y,A,e)=>{"use strict";e.d(A,{d:()=>S,y:()=>O});var t=e(96540),n=e(87586),o=e(36830),s=e(32264),r=e(72109),g=e(32196),u=e(78685),d=e(40845),i=e(66864),l=e(56034),f=e(55852),c=e(42418);const h=({localStoreKey:U,startClosed:R=!1,severity:B="error",collapseText:H,collapseTooltip:W,collapseJustify:N="flex-end",alertTitle:V,children:G})=>{const _=(0,d.$j)(),K=p(_,B),[j,k]=(0,u.A)(U,R);return t.createElement(t.Fragment,null,j&&t.createElement(i.Gy,{justify:N},t.createElement(l.m,{content:W,placement:"bottom"},t.createElement(f.$n,{fill:"text",variant:"secondary",icon:(0,c.H)(B),className:K.warningButton,onClick:()=>k(!1)},H))),!j&&t.createElement(c.F,{severity:B,title:V,onRemove:()=>k(!0)},G))},p=(U,R)=>{const B=U.colors[R];return{warningButton:(0,g.css)({color:B.text,"&:hover":{background:B.transparent}})}},m="grafana.unifiedalerting.upgrade.previewNotice",a=()=>s.$.unifiedAlertingEnabled||!s.$.featureToggles.alertingPreviewUpgrade?null:t.createElement(h,{localStoreKey:m,alertTitle:"This is a preview of the upgraded Grafana Alerting",collapseText:"Grafana Alerting Preview",collapseTooltip:"Show preview warning",severity:"warning"},t.createElement("p",null,"No rules are being evaluated and legacy alerting is still running.",t.createElement("br",null),"Please contact your administrator to upgrade permanently."),t.createElement(r.Y,{external:!0,href:"https://grafana.com/docs/grafana/latest/alerting/set-up/migrating-alerts/"},"Read about upgrading"));var v=e(70383),E=e(14186),D=e(88323),b=e(57220);function P(U){return U.name===b.hY?"Grafana":U.name.slice(0,37)}const y=({disabled:U=!1})=>{const R=(0,d.of)(T),{selectedAlertmanager:B,availableAlertManagers:H,setSelectedAlertmanager:W}=(0,v.VI)(),N=(0,t.useMemo)(()=>H.map(V=>({label:P(V),value:V.name,imgUrl:V.imgUrl,meta:V.meta})),[H]);return t.createElement(E.I,{className:R.field,label:U?"Alertmanager":"Choose Alertmanager",disabled:U||N.length===1,"data-testid":"alertmanager-picker"},t.createElement(D.l6,{"aria-label":U?"Alertmanager":"Choose Alertmanager",width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:V=>{V?.value&&W(V.value)},options:N,maxMenuHeight:500,noOptionsMessage:"No datasources found",value:B,getOptionLabel:V=>V.label}))},T=U=>({field:(0,g.css)`
    margin: 0;
  `}),M=()=>t.createElement(c.F,{title:"No Alertmanager found",severity:"warning"},"We could not find any external Alertmanagers and you may not have access to the built-in Grafana Alertmanager."),I=()=>t.createElement(c.F,{title:"Selected Alertmanager not found.",severity:"warning"},"The selected Alertmanager no longer exists or you may not have permission to access it. You can select a different Alertmanager from the dropdown."),x=({availableAlertManagers:U})=>{const R=U.length>0;return t.createElement("div",null,R?t.createElement(I,null):t.createElement(M,null))},S=({children:U,isLoading:R,...B})=>t.createElement(o.Y,{...B},t.createElement(o.Y.Contents,{isLoading:R},t.createElement("div",null,t.createElement(a,null),U))),O=({children:U,accessType:R,...B})=>{const H=C();return t.createElement(v.b9,{accessType:R},t.createElement(S,{...B,actions:t.createElement(y,{disabled:H})},t.createElement(L,null,U)))};function C(){const U=(0,n.A)();return["/edit","/new"].some(B=>U?.pathname?.includes(B))}const L=({children:U})=>{const{availableAlertManagers:R,selectedAlertmanager:B}=(0,v.VI)();return B?t.createElement(t.Fragment,null,U):t.createElement(x,{availableAlertManagers:R})}},71223:(Y,A,e)=>{"use strict";e.d(A,{s:()=>f});var t=e(32196),n=e(96540),o=e(56034),s=e(40845),r=e(72109),g=e(55740),u=e(84396),d=e(16577),i=e(73750);const l=["message","description"],f=({annotationKey:p,value:m,valueLink:a})=>{const v=g.J3[p]?n.createElement(o.m,{content:p,placement:"top",theme:"info"},n.createElement("span",null,g.J3[p])):p;return n.createElement(u.X,{label:v,horizontal:!0},n.createElement(c,{annotationKey:p,value:m,valueLink:a}))},c=({annotationKey:p,value:m,valueLink:a})=>{const v=(0,s.of)(h),E=l.includes(p),D=m&&m.startsWith("http"),b=n.createElement(d.Y,{input:m,delimiter:["{{","}}"]});return a?n.createElement(r.Y,{href:a,external:!0},m):E?n.createElement(i.L,{className:v.well},b):D?n.createElement(r.Y,{href:m,external:!0},m):n.createElement(n.Fragment,null,b)},h=p=>({well:(0,t.css)`
    word-break: break-word;
  `})},64047:(Y,A,e)=>{"use strict";e.d(A,{e:()=>o});var t=e(96540),n=e(55852);const o=({isCollapsed:s,onToggle:r,idControlled:g,className:u,text:d,size:i="xl",...l})=>t.createElement(n.$n,{type:"button",fill:"text",variant:"secondary","aria-expanded":!s,"aria-controls":g,className:u,icon:s?"angle-right":"angle-down",onClick:()=>r(!s),...l},d)},84396:(Y,A,e)=>{"use strict";e.d(A,{X:()=>s});var t=e(32196),n=e(96540),o=e(40845);const s=({className:g,label:u,horizontal:d,children:i,childrenWrapperClassName:l})=>{const f=(0,o.of)(r);return n.createElement("div",{className:(0,t.cx)(f.field,d?f.fieldHorizontal:f.fieldVertical,g)},n.createElement("div",null,u),n.createElement("div",{className:l},i))},r=g=>({fieldHorizontal:(0,t.css)`
    flex-direction: row;
    ${g.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,fieldVertical:(0,t.css)`
    flex-direction: column;
  `,field:(0,t.css)`
    display: flex;
    margin: ${g.spacing(2)} 0;

    & > div:first-child {
      width: 110px;
      padding-right: ${g.spacing(1)};
      font-size: ${g.typography.size.sm};
      font-weight: ${g.typography.fontWeightBold};
      line-height: 1.8;
    }
    & > div:nth-child(2) {
      flex: 1;
      color: ${g.colors.text.secondary};
    }
  `})},75591:(Y,A,e)=>{"use strict";e.d(A,{E:()=>d});var t=e(32196),n=e(96540),o=e(40845),s=e(29158),r=e(19384),g=e(98439),u=e(22620);const d=({cols:l,items:f,isExpandable:c=!1,onCollapse:h,onExpand:p,isExpanded:m,renderExpandedContent:a,testIdGenerator:v,pagination:E,paginationStyles:D,renderPrefixCell:b,renderPrefixHeader:P,footerRow:y,dataTestId:T})=>{const M=(0,o.of)(u.H);if((h||p||m)&&!(h&&p&&m))throw new Error("either all of onCollapse, onExpand, isExpanded must be provided, or none");if((c||a)&&!(c&&a))throw new Error("either both isExpanded and renderExpandedContent must be provided, or neither");const I=(0,o.of)(i(l,c,!!P)),[x,S]=(0,n.useState)([]),O=H=>{m&&h&&p?m(H)?h(H):p(H):S(x.includes(H.id)?x.filter(W=>W!==H.id):[...x,H.id])},C=E?.itemsPerPage??f.length,{page:L,numberOfPages:U,onPageChange:R,pageItems:B}=(0,g.W)(f,1,C);return n.createElement(n.Fragment,null,n.createElement("div",{className:I.container,"data-testid":T??"dynamic-table"},n.createElement("div",{className:I.row,"data-testid":"header"},P&&P(),c&&n.createElement("div",{className:I.cell}),l.map(H=>n.createElement("div",{className:I.cell,key:H.id},H.label))),B.map((H,W)=>{const N=m?m(H):x.includes(H.id);return n.createElement("div",{className:I.row,key:`${H.id}-${W}`,"data-testid":v?.(H,W)??"row"},b&&b(H,W,f),c&&n.createElement("div",{className:(0,t.cx)(I.cell,I.expandCell)},n.createElement(s.K,{tooltip:`${N?"Collapse":"Expand"} row`,"data-testid":"collapse-toggle",name:N?"angle-down":"angle-right",onClick:()=>O(H)})),l.map(V=>n.createElement("div",{className:(0,t.cx)(I.cell,I.bodyCell,V.className),"data-column":V.label,key:`${H.id}-${V.id}`},V.renderCell(H,W))),N&&a&&n.createElement("div",{className:I.expandedContentRow,"data-testid":"expanded-content"},a(H,W,f)))}),y&&n.createElement("div",{className:(0,t.cx)(I.row,I.footerRow)},y)),E&&n.createElement(r.d,{className:(0,t.cx)(M,D),currentPage:L,numberOfPages:U,onNavigate:R,hideWhenSinglePage:!0}))},i=(l,f,c)=>{const h=l.map(p=>p.size?typeof p.size=="number"?`${p.size}fr`:p.size:"auto");return f&&h.unshift("calc(1em + 16px)"),c&&h.unshift("0"),p=>({container:(0,t.css)`
      border: 1px solid ${p.colors.border.weak};
      border-radius: ${p.shape.radius.default};
      color: ${p.colors.text.secondary};
    `,row:(0,t.css)`
      display: grid;
      grid-template-columns: ${h.join(" ")};
      grid-template-rows: 1fr auto;

      &:nth-child(2n + 1) {
        background-color: ${p.colors.background.secondary};
      }

      &:nth-child(2n) {
        background-color: ${p.colors.background.primary};
      }

      ${p.breakpoints.down("sm")} {
        grid-template-columns: auto 1fr;
        grid-template-areas: 'left right';
        padding: 0 ${p.spacing(.5)};

        &:first-child {
          display: none;
        }

        ${c?`
            & > *:first-child {
              display: none;
            }
          `:""}
      }
    `,footerRow:(0,t.css)`
      display: flex;
      padding: ${p.spacing(1)};
    `,cell:(0,t.css)`
      display: flex;
      align-items: center;
      padding: ${p.spacing(1)};

      ${p.breakpoints.down("sm")} {
        padding: ${p.spacing(1)} 0;
        grid-template-columns: 1fr;
      }
    `,bodyCell:(0,t.css)`
      overflow: hidden;

      ${p.breakpoints.down("sm")} {
        grid-column-end: right;
        grid-column-start: right;

        &::before {
          content: attr(data-column);
          display: block;
          color: ${p.colors.text.primary};
        }
      }
    `,expandCell:(0,t.css)`
      justify-content: center;

      ${p.breakpoints.down("sm")} {
        align-items: start;
        grid-area: left;
      }
    `,expandedContentRow:(0,t.css)`
      grid-column-end: ${h.length+1};
      grid-column-start: ${c?3:2};
      grid-row: 2;
      padding: 0 ${p.spacing(3)} 0 ${p.spacing(1)};
      position: relative;

      ${p.breakpoints.down("sm")} {
        grid-column-start: 2;
        border-top: 1px solid ${p.colors.border.strong};
        grid-row: auto;
        padding: ${p.spacing(1)} 0 0 0;
      }
    `})}},10562:(Y,A,e)=>{"use strict";e.d(A,{B:()=>r});var t=e(32196),n=e(96540),o=e(40845),s=e(75591);const r=({renderExpandedContent:u,...d})=>{const i=(0,o.of)(g);return n.createElement(s.E,{renderExpandedContent:u?(l,f,c)=>n.createElement(n.Fragment,null,f!==c.length-1&&n.createElement("div",{className:(0,t.cx)(i.contentGuideline,i.guideline)}),u(l,f,c)):void 0,renderPrefixHeader:()=>n.createElement("div",{className:i.relative},n.createElement("div",{className:(0,t.cx)(i.headerGuideline,i.guideline)})),renderPrefixCell:(l,f,c)=>n.createElement("div",{className:i.relative},n.createElement("div",{className:(0,t.cx)(i.topGuideline,i.guideline)}),f!==c.length-1&&n.createElement("div",{className:(0,t.cx)(i.bottomGuideline,i.guideline)})),...d})},g=u=>({relative:(0,t.css)`
    position: relative;
    height: 100%;
  `,guideline:(0,t.css)`
    left: -19px;
    border-left: 1px solid ${u.colors.border.weak};
    position: absolute;

    ${u.breakpoints.down("md")} {
      display: none;
    }
  `,topGuideline:(0,t.css)`
    width: 18px;
    border-bottom: 1px solid ${u.colors.border.medium};
    top: 0;
    bottom: 50%;
  `,bottomGuideline:(0,t.css)`
    top: 50%;
    bottom: 0;
  `,contentGuideline:(0,t.css)`
    top: 0;
    bottom: 0;
    left: -49px !important;
  `,headerGuideline:(0,t.css)`
    top: -17px;
    bottom: 0;
  `})},35108:(Y,A,e)=>{"use strict";e.d(A,{j:()=>i});var t=e(32196),n=e(46942),o=e.n(n),s=e(96540),r=e(40845),g=e(67061),u=e(95868),d=e(13840);const i=({children:f,header:c,content:h,footer:p,arrow:m,showAfter:a=300,wrapperClassName:v,disabled:E=!1,...D})=>{const b=(0,s.useRef)(null),P=(0,r.of)(l);if(E)return f;const y=s.createElement(g.B,{direction:"column",gap:0},c&&s.createElement("div",{className:P.card.header},c),s.createElement("div",{className:P.card.body},h),p&&s.createElement("div",{className:P.card.footer},p));return s.createElement(u.I,{content:y,hideAfter:100},(T,M,I)=>s.createElement(s.Fragment,null,b.current&&s.createElement(d.A,{...I,...D,wrapperClassName:o()(P.popover(m?1.25:0),v),onMouseLeave:M,onMouseEnter:T,onFocus:T,onBlur:M,referenceElement:b.current,renderArrow:m?({arrowProps:x,placement:S})=>s.createElement("div",{className:P.arrow(S),...x}):()=>s.createElement(s.Fragment,null)}),s.cloneElement(f,{ref:b,onMouseEnter:T,onMouseLeave:M,onFocus:T,onBlur:M})))},l=f=>({popover:c=>(0,t.css)`
    border-radius: ${f.shape.radius.default};
    box-shadow: ${f.shadows.z3};
    background: ${f.colors.background.primary};
    border: 1px solid ${f.colors.border.medium};

    margin-bottom: ${f.spacing(c)};
  `,card:{body:(0,t.css)`
      padding: ${f.spacing(1)};
    `,header:(0,t.css)`
      padding: ${f.spacing(1)};
      background: ${f.colors.background.secondary};
      border-bottom: solid 1px ${f.colors.border.medium};
    `,footer:(0,t.css)`
      padding: ${f.spacing(.5)} ${f.spacing(1)};
      background: ${f.colors.background.secondary};
      border-top: solid 1px ${f.colors.border.medium};
    `},arrow:c=>{const h="9px";return(0,t.css)`
      width: 0;
      height: 0;

      border-left: ${h} solid transparent;
      border-right: ${h} solid transparent;
      /* using hex colors here because the border colors use alpha transparency */
      border-top: ${h} solid ${f.isLight?"#d2d3d4":"#2d3037"};

      &:after {
        content: '';
        position: absolute;

        border: ${h} solid ${f.colors.background.primary};
        border-bottom: 0;
        border-left-color: transparent;
        border-right-color: transparent;

        margin-top: 1px;
        bottom: 1px;
        left: -${h};
      }
    `}})},8406:(Y,A,e)=>{"use strict";e.d(A,{J:()=>u});var t=e(32196),n=e(96540),o=e(84140),s=e(40845),r=e(67061),g=e(14578);const u=({label:i,value:l,icon:f,color:c,size:h="md"})=>{const p=(0,s.of)(d,c,h),m=`${i}: ${l}`;return n.createElement("div",{className:p.wrapper,role:"listitem","aria-label":m},n.createElement(r.B,{direction:"row",gap:0,alignItems:"stretch"},n.createElement("div",{className:p.label},n.createElement(r.B,{direction:"row",gap:.5,alignItems:"center"},f&&n.createElement(g.I,{name:f})," ",i??"")),n.createElement("div",{className:p.value},l)))},d=(i,l,f)=>{const c=l??i.colors.secondary.main,h=i.isDark?(0,o.A)(c).lighten(5).toString():(0,o.A)(c).darken(5).toString(),p=i.isDark?(0,o.A)(c).darken(5).toString():(0,o.A)(c).lighten(5).toString(),m=l?o.A.mostReadable(c,["#000","#fff"]).toString():i.colors.text.primary,a=f==="md"?`${i.spacing(.33)} ${i.spacing(1)}`:`${i.spacing(.2)} ${i.spacing(.6)}`;return{wrapper:(0,t.css)`
      color: ${m};
      font-size: ${i.typography.bodySmall.fontSize};

      border-radius: ${i.shape.borderRadius(2)};
    `,label:(0,t.css)`
      display: flex;
      align-items: center;
      color: inherit;

      padding: ${a};
      background: ${c};

      border: solid 1px ${h};
      border-top-left-radius: ${i.shape.borderRadius(2)};
      border-bottom-left-radius: ${i.shape.borderRadius(2)};
    `,value:(0,t.css)`
      color: inherit;
      padding: ${a};
      background: ${p};

      border: solid 1px ${h};
      border-left: none;
      border-top-right-radius: ${i.shape.borderRadius(2)};
      border-bottom-right-radius: ${i.shape.borderRadius(2)};
    `}}},55196:(Y,A,e)=>{"use strict";e.d(A,{P:()=>u});var t=e(32196),n=e(96540),o=e(40845),s=e(94753),r=e(67061),g=e(14578);const u=({children:i,icon:l,color:f="secondary",direction:c="row",...h})=>{const p=(0,o.of)(d),m=typeof h.onClick=="function",a=c==="row",v=a?"center":"flex-start",E=a?.5:0;return n.createElement("div",{className:(0,t.cx)({[p.interactive]:m}),...h},n.createElement(s.E,{variant:"bodySmall",color:f},n.createElement(r.B,{direction:c,alignItems:v,gap:E,wrap:"wrap"},l&&n.createElement(g.I,{size:"sm",name:l}),i)))},d=()=>({interactive:(0,t.css)`
    cursor: pointer;
  `})},90141:(Y,A,e)=>{"use strict";e.d(A,{A:()=>g});var t=e(96540),n=e(55852),o=e(67061),s=e(14578);const g=(0,t.forwardRef)(function(d,i){return t.createElement(n.$n,{variant:"secondary",size:"sm",type:"button","aria-label":"more-actions","data-testid":"more-actions",ref:i,...d},t.createElement(o.B,{direction:"row",alignItems:"center",gap:0},"More ",t.createElement(s.I,{name:"angle-down"})))})},76156:(Y,A,e)=>{"use strict";e.d(A,{h:()=>s});var t=e(96540),n=e(12210);const o=({children:r,plugin:g,loadingComponent:u,notInstalledFallback:d})=>{const{loading:i,installed:l}=usePluginBridge(g);return i?u??null:l?React.createElement(React.Fragment,null,r):d??null};function s(r,g,u){const d=new URLSearchParams(u).toString();return`/a/${r}${g}`+(d?"?"+d:"")}},48205:(Y,A,e)=>{"use strict";e.d(A,{Yi:()=>r,hk:()=>s,rS:()=>g});var t=e(96540),n=e(42418),o=e(39938),s=(u=>(u.ContactPoint="contact point",u.Template="template",u.MuteTiming="mute timing",u.AlertRule="alert rule",u.RootNotificationPolicy="root notification policy",u))(s||{});const r=({resource:u,...d})=>t.createElement(n.F,{title:`This ${u} cannot be edited through the UI`,severity:"info",...d},"This ",u," has been provisioned, that means it was created by config. Please contact your server admin to update this ",u,"."),g=()=>t.createElement(o.E,{text:"Provisioned",color:"purple"})},82437:(Y,A,e)=>{"use strict";e.d(A,{c:()=>o});var t=e(96540),n=e(14578);const o=({namespace:s,group:r})=>r?t.createElement(t.Fragment,null,s," ",t.createElement(n.I,{name:"angle-right"})," ",r):t.createElement(t.Fragment,null,s)},26058:(Y,A,e)=>{"use strict";e.d(A,{h:()=>o});var t=e(32196),n=e(96540);const o=()=>n.createElement("span",{className:(0,t.css)`
      flex: 1;
    `})},65415:(Y,A,e)=>{"use strict";e.d(A,{O:()=>s});var t=e(32196),n=e(96540),o=e(40845);const s=({children:g,state:u,size:d="md",muted:i=!1})=>{const l=(0,o.of)(r);return n.createElement("span",{className:(0,t.cx)(l.common,l[u],l[d],{[l.muted]:i})},g||u)},r=g=>({common:(0,t.css)`
    display: inline-block;
    color: white;
    border-radius: ${g.shape.radius.default};
    font-size: ${g.typography.size.sm};
    text-transform: capitalize;
    line-height: 1.2;
    text-align: center;
    font-weight: ${g.typography.fontWeightBold};
  `,good:(0,t.css)`
    background-color: ${g.colors.success.main};
    border: solid 1px ${g.colors.success.main};
    color: ${g.colors.success.contrastText};
  `,warning:(0,t.css)`
    background-color: ${g.colors.warning.main};
    border: solid 1px ${g.colors.warning.main};
    color: ${g.colors.warning.contrastText};
  `,bad:(0,t.css)`
    background-color: ${g.colors.error.main};
    border: solid 1px ${g.colors.error.main};
    color: ${g.colors.error.contrastText};
  `,neutral:(0,t.css)`
    background-color: ${g.colors.secondary.main};
    border: solid 1px ${g.colors.secondary.main};
    color: ${g.colors.secondary.contrastText};
  `,info:(0,t.css)`
    background-color: ${g.colors.primary.main};
    border: solid 1px ${g.colors.primary.main};
    color: ${g.colors.primary.contrastText};
  `,md:(0,t.css)`
    padding: ${g.spacing(.5,1)};
    min-width: ${g.spacing(8)};
  `,sm:(0,t.css)`
    padding: ${g.spacing(.3,.5)};
    min-width: 52px;
  `,muted:(0,t.css)`
    opacity: 0.5;
  `})},16577:(Y,A,e)=>{"use strict";e.d(A,{Y:()=>d});var t=e(32196),n=e(96540),o=e(40845),s=e(39938),r=e(35108),g=e(83225);const u=["$",".",'"'];function d({input:a,delimiter:v=["{{","}}"]}){const E=(0,o.of)(m),[D,b]=v,P=new RegExp(`(?<before>.*?)(${D}(?<token>.*?)${b}|$)`,"gm"),y=a.split(`
`),T=[];return y.forEach((M,I)=>{Array.from(M.matchAll(P)).forEach((S,O)=>{const C=S.groups?.before,L=S.groups?.token?.trim();if(C&&T.push(n.createElement("span",{key:`${I}-${O}-before`},C)),L){const U=p(L),R=U==="variable"?L:"",B=`${D} ${L} ${b}`;T.push(n.createElement(l,{key:`${I}-${O}-token`,content:B,type:U,description:R}))}}),T.push(n.createElement("br",{key:`${I}-newline`}))}),n.createElement("span",{className:E.wrapper},T)}var i=(a=>(a.Variable="variable",a.Function="function",a.Keyword="keyword",a.Unknown="unknown",a))(i||{});function l({content:a,description:v,type:E}){const D=(0,o.of)(m),b=!E;return n.createElement(r.j,{placement:"top-start",disabled:b,content:n.createElement("div",{className:D.hoverTokenItem},n.createElement(s.E,{tabIndex:0,text:n.createElement(n.Fragment,null,E),color:"blue"})," ",v&&n.createElement("code",null,v))},n.createElement("span",null,n.createElement(s.E,{tabIndex:0,className:D.token,text:a,color:"blue"})))}function f(a){return u.some(v=>a.startsWith(v))}function c(a){return g.keywords.some(v=>a.startsWith(v))}function h(a){return g.builtinFunctions.some(v=>a.startsWith(v))}function p(a){let v;return f(a)?v="variable":c(a)?v="keyword":h(a)?v="function":v="unknown",v}const m=a=>({wrapper:(0,t.css)`
    white-space: pre-wrap;
  `,token:(0,t.css)`
    cursor: default;
    font-family: ${a.typography.fontFamilyMonospace};
  `,popover:(0,t.css)`
    border-radius: ${a.shape.radius.default};
    box-shadow: ${a.shadows.z3};
    background: ${a.colors.background.primary};
    border: 1px solid ${a.colors.border.medium};

    padding: ${a.spacing(1)};
  `,hoverTokenItem:(0,t.css)`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${a.spacing(1)};
  `})},73750:(Y,A,e)=>{"use strict";e.d(A,{L:()=>s});var t=e(32196),n=e(96540),o=e(40845);const s=({children:g,className:u})=>{const d=(0,o.of)(r);return n.createElement("div",{className:(0,t.cx)(d.wrapper,u)},g)},r=g=>({wrapper:(0,t.css)`
    background-color: ${g.components.panel.background};
    border: solid 1px ${g.components.input.borderColor};
    border-radius: ${g.shape.radius.default};
    padding: ${g.spacing(.5,1)};
    font-family: ${g.typography.fontFamilyMonospace};
  `})},96636:(Y,A,e)=>{"use strict";e.d(A,{d:()=>o});var t=e(96540),n=e(14778);const o=({component:s,title:r="previous page"})=>{const g=(0,n.i)(),u=(0,t.useCallback)(()=>{g(r)},[g,r]);return t.cloneElement(s,{onClick:u})}},27962:(Y,A,e)=>{"use strict";e.d(A,{f:()=>g});var t=e(55127),n=e.n(t),o=e(96540),s=e(40845),r=e(38858);const g=({group:u})=>{const d=(0,s.of)(r.q),i=u.alerts.length,l=u.alerts.reduce((f,c)=>(f[c.status.state]?f[c.status.state]+=1:f[c.status.state]=1,f),{});return o.createElement("div",null,`${i} ${n()("alert",i)}: `,Object.entries(l).map(([f,c],h)=>o.createElement("span",{key:`${JSON.stringify(u.labels)}-notifications-${h}`,className:d[f]},h>0&&", ",`${c} ${f}`)))}},53876:(Y,A,e)=>{"use strict";e.d(A,{X:()=>p});var t=e(32196),n=e(2543),o=e.n(n),s=e(96540),r=e(40845),g=e(14578),u=e(88575),d=e(60029),i=e(67061),l=e(56034),f=e(10354),c=e(25027),h=e(98164);const p=({onFilterChange:a,defaultQueryString:v})=>{const E=(0,r.of)(m),D=(0,s.useMemo)(()=>(0,n.debounce)(y=>{(0,c.fH)(c.le.filterByLabel);const T=y.target;a(T.value)},600),[a]);(0,s.useEffect)(()=>D.cancel(),[D]);const b=s.createElement(g.I,{name:"search"}),P=v?(0,h.J$)(v).length===0:!1;return s.createElement(u.D,{className:E.fixMargin,invalid:P||void 0,error:P?"Query must use valid matcher syntax. See the examples in the help tooltip.":null,label:s.createElement(d.J,null,s.createElement(i.B,{gap:.5},s.createElement("span",null,"Search by label"),s.createElement(l.m,{content:s.createElement("div",null,"Filter alerts using label querying without spaces, ex:",s.createElement("pre",null,'{severity="critical", instance=~"cluster-us-.+"}'),"Invalid use of spaces:",s.createElement("pre",null,'{severity= "critical"}'),s.createElement("pre",null,'{severity ="critical"}'),"Valid use of spaces:",s.createElement("pre",null,'{severity=" critical"}'),"Filter alerts using label querying without braces, ex:",s.createElement("pre",null,'severity="critical", instance=~"cluster-us-.+"'))},s.createElement(g.I,{name:"info-circle",size:"sm"}))))},s.createElement(f.p,{placeholder:"Search",defaultValue:v??"",onChange:D,"data-testid":"search-query-input",prefix:b,className:E.inputWidth}))},m=a=>({fixMargin:(0,t.css)({marginBottom:0}),inputWidth:(0,t.css)({width:340,flexGrow:0})})},68291:(Y,A,e)=>{"use strict";e.d(A,{b:()=>d,d:()=>i});var t=e(96540),n=e(55852),o=e(56034),s=e(38138),r=e(12210),g=e(99494),u=e(76156);const d=({title:l="",severity:f="",url:c=""})=>{const h=(0,u.h)(g.W.Incident,"/incidents/declare",{title:l,severity:f,url:c}),{loading:p,installed:m,settings:a}=(0,r._)(g.W.Incident);return t.createElement(t.Fragment,null,p===!0&&t.createElement(n.$n,{icon:"fire",size:"sm",type:"button",disabled:!0},"Declare Incident"),m===!1&&t.createElement(o.m,{content:"Grafana Incident is not installed or is not configured correctly"},t.createElement(n.$n,{icon:"fire",size:"sm",type:"button",disabled:!0},"Declare Incident")),a&&t.createElement(n.z9,{icon:"fire",size:"sm",type:"button",href:h},"Declare Incident"))},i=({title:l="",severity:f="",url:c=""})=>{const h=(0,u.h)(g.W.Incident,"/incidents/declare",{title:l,severity:f,url:c}),{loading:p,installed:m,settings:a}=(0,r._)(g.W.Incident);return t.createElement(t.Fragment,null,p===!0&&t.createElement(s.W.Item,{label:"Declare incident",icon:"fire",disabled:!0}),m===!1&&t.createElement(o.m,{content:"Grafana Incident is not installed or is not configured correctly"},t.createElement(s.W.Item,{label:"Declare incident",icon:"fire",disabled:!0})),a&&t.createElement(s.W.Item,{label:"Declare incident",url:h,icon:"fire"}))}},56528:(Y,A,e)=>{"use strict";e.d(A,{GX:()=>L,r4:()=>O});var t=e(32196),n=e(2543),o=e.n(n),s=e(96540),r=e(49785),g=e(39070),u=e(19845),d=e(72724),i=e(40845),l=e(42418),f=e(67061),c=e(55852),h=e(51440),p=e(29158),m=e(98808),a=e(71680),v=e(1712),E=e(34263),D=e(76658),b=e(66718),P=e(94822),y=e(98439),T=e(35108),M=e(26058),I=e(30423),x=e(81875),S=e(99106);const O=({queries:V=[],query:G,data:_,error:K,warning:j,isAlertCondition:k,onSetCondition:Q,onUpdateRefId:ee,onRemoveExpression:ae,onUpdateExpressionType:Z,onChangeQuery:ne})=>{const q=(0,i.of)(N),te=G?.type,{setError:re,clearErrors:de}=(0,r.xW)(),ie=(0,s.useCallback)(he=>{he?re("queries",{type:"custom",message:he}):de("queries")},[re,de]),ge=_&&Object.values(_).some(he=>!!he&&he.state===g.Gu.Loading),ve=Array.isArray(_?.series)&&!ge,ye=_?.series??[],pe=k??!1,{seriesCount:le,groupedByState:Me}=R(ye),De=(0,s.useCallback)(he=>{const Te=V.filter(Be=>he.refId!==Be.refId).map(Be=>({value:Be.refId,label:Be.refId}));switch(he.type){case b.Tz.math:return s.createElement(a.z,{onChange:ne,query:he,labelWidth:"auto",onRunQuery:()=>{}});case b.Tz.reduce:return s.createElement(v.Z,{onChange:ne,refIds:Te,labelWidth:"auto",query:he});case b.Tz.resample:return s.createElement(E.C,{onChange:ne,query:he,labelWidth:"auto",refIds:Te});case b.Tz.classic:return s.createElement(m.z,{onChange:ne,query:he,refIds:Te});case b.Tz.threshold:return s.createElement(D.O,{onChange:ne,query:he,labelWidth:"auto",refIds:Te,onError:ie,useHysteresis:!0});default:return s.createElement(s.Fragment,null,"Expression not supported: ",he.type)}},[ne,V,ie]),me=b.uQ.find(he=>he.value===te)?.description??"";return s.createElement("div",{className:(0,t.cx)(q.expression.wrapper,pe&&q.expression.alertCondition,te===b.Tz.classic&&q.expression.classic,te!==b.Tz.classic&&q.expression.nonClassic)},s.createElement("div",{className:q.expression.stack},s.createElement(B,{refId:G.refId,queryType:te,onRemoveExpression:()=>ae(G.refId),onUpdateRefId:he=>ee(G.refId,he),onUpdateExpressionType:he=>Z(G.refId,he),onSetCondition:Q,query:G,alertCondition:pe}),s.createElement("div",{className:q.expression.body},K&&s.createElement(l.F,{title:"Expression failed",severity:"error"},K.message),j&&s.createElement(l.F,{title:"Expression warning",severity:"warning"},j.message),s.createElement("div",{className:q.expression.description},me),De(G)),ve&&s.createElement(s.Fragment,null,s.createElement(L,{series:ye,isAlertCondition:k}),s.createElement("div",{className:q.footer},s.createElement(f.B,{direction:"row",alignItems:"center"},s.createElement(M.h,null),s.createElement(U,{isCondition:!!k,firing:Me[P.cF.Firing].length,normal:Me[P.cF.Inactive].length,seriesCount:le}))))))},C=20,L=({series:V,isAlertCondition:G})=>{const{pageItems:_,previousPage:K,nextPage:j,numberOfPages:k,pageStart:Q,pageEnd:ee}=(0,y.W)(V,1,C),ae=(0,i.of)(N),Z=(0,S.PI)(V),ne=!Z&&(0,u.jq)(V),q=k>1;return s.createElement("div",{className:ae.expression.results},!Z&&ne&&s.createElement("div",null,_.map((te,re)=>s.createElement(W,{key:(0,n.uniqueId)(),frame:te,index:Q+re,isAlertCondition:G}))),!Z&&!ne&&_.map((te,re)=>s.createElement(H,{key:(0,n.uniqueId)(),frame:te,index:Q+re,isAlertCondition:G})),Z&&s.createElement("div",{className:(0,t.cx)(ae.expression.noData,ae.mutedText)},"No data"),q&&s.createElement("div",{className:ae.pagination.wrapper,"data-testid":"paginate-expression"},s.createElement(f.B,null,s.createElement(c.$n,{variant:"secondary",fill:"outline",onClick:K,icon:"angle-left",size:"sm","aria-label":"previous-page"}),s.createElement(M.h,null),s.createElement("span",{className:ae.mutedText},Q," - ",ee," of ",V.length),s.createElement(M.h,null),s.createElement(c.$n,{variant:"secondary",fill:"outline",onClick:j,icon:"angle-right",size:"sm","aria-label":"next-page"}))))},U=({firing:V,normal:G,isCondition:_,seriesCount:K})=>{const{mutedText:j}=(0,i.of)(N);return K===0?s.createElement("span",{className:j},"No series"):_?s.createElement("span",{className:j},`${K} series: ${V} firing, ${G} normal`):s.createElement("span",{className:j},`${K} series`)};function R(V){const G=V.filter(j=>(0,S.Lm)(j)===void 0).length,_={[P.cF.Firing]:V.filter(j=>(0,S.Lm)(j)!==void 0&&(0,S.Lm)(j)!==0),[P.cF.Inactive]:V.filter(j=>(0,S.Lm)(j)===0)},K=V.length-G;return{groupedByState:_,seriesCount:K}}const B=({refId:V,queryType:G,onUpdateRefId:_,onRemoveExpression:K,onSetCondition:j,alertCondition:k,query:Q})=>{const ee=(0,i.of)(N),ae=(0,i.of)(c.my),[Z,ne]=(0,s.useState)(!1),te=Z!==!1&&Z==="refId";return s.createElement("header",{className:ee.header.wrapper},s.createElement(f.B,{direction:"row",gap:.5,alignItems:"center"},s.createElement(f.B,{direction:"row",gap:1,alignItems:"center"},!te&&s.createElement("button",{type:"button",className:(0,t.cx)(ae,ee.editable),onClick:()=>ne("refId")},s.createElement("div",{className:ee.expression.refId},V)),te&&s.createElement(h.D,{autoFocus:!0,defaultValue:V,minWidth:5,onChange:re=>{_(re.currentTarget.value),ne(!1)},onFocus:re=>re.target.select(),onBlur:re=>{_(re.currentTarget.value),ne(!1)}}),s.createElement("div",null,(0,b.NI)(G))),s.createElement(M.h,null),s.createElement(x.a,{onSetCondition:()=>j(Q.refId),isCondition:k}),s.createElement(p.K,{name:"trash-alt",variant:"secondary",className:ee.mutedIcon,onClick:K,tooltip:"Remove expression"})))},H=({frame:V,index:G,isAlertCondition:_})=>{const K=(0,i.of)(N),j=(0,S.Jw)(V)||"Series "+G,k=(0,S.Lm)(V),Q=(0,S.JQ)(V),ee=Object.entries(Q),ae=ee.length>0,Z=_&&k!==0,ne=_&&k===0,q=`${ae?"":j}${ae?`{${(0,S.h6)(Q)}}`:""}`;return s.createElement("div",{className:K.expression.resultsRow},s.createElement(f.B,{direction:"row",gap:1,alignItems:"center"},s.createElement("div",{className:K.expression.resultLabel,title:q},s.createElement("span",null,ae?"":j),ae&&s.createElement(s.Fragment,null,s.createElement("span",null,"{"),ee.map(([te,re],de)=>s.createElement("span",{key:(0,n.uniqueId)()},s.createElement("span",{className:K.expression.labelKey},te),s.createElement("span",null,"="),s.createElement("span",null,'"'),s.createElement("span",{className:K.expression.labelValue},re),s.createElement("span",null,'"'),de<ee.length-1&&s.createElement("span",null,", "))),s.createElement("span",null,"}"))),s.createElement("div",{className:K.expression.resultValue},k),Z&&s.createElement(I.C,{state:P.cF.Firing,size:"sm"}),ne&&s.createElement(I.C,{state:P.cF.Inactive,size:"sm"})))},W=({frame:V,index:G})=>{const _=(0,i.of)(N),K=V.fields[1],j=K.labels,Q=K.config?.displayNameFromDS??(j?(0,S.h6)(K.labels??{}):"Series "+G),ee=V.fields[0].values,ae=ne=>V.fields[0].values[ne],Z=ne=>V.fields[1].values[ne];return s.createElement("div",{className:_.expression.resultsRow},s.createElement(f.B,{direction:"row",alignItems:"center"},s.createElement("span",{className:(0,t.cx)(_.mutedText,_.expression.resultLabel),title:Q},Q),s.createElement("div",{className:_.expression.resultValue},s.createElement(T.j,{placement:"right",wrapperClassName:_.timeseriesTableWrapper,content:s.createElement("table",{className:_.timeseriesTable},s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",null,"Timestamp"),s.createElement("th",null,"Value"))),s.createElement("tbody",null,ee.map((ne,q)=>s.createElement("tr",{key:q},s.createElement("td",{className:_.mutedText},(0,d.LE)(ae(q))),s.createElement("td",{className:_.expression.resultValue},Z(q))))))},s.createElement("span",null,"Time series data")))))},N=V=>({expression:{wrapper:(0,t.css)`
      display: flex;
      border: solid 1px ${V.colors.border.medium};
      flex: 1;
      flex-basis: 400px;
      border-radius: ${V.shape.radius.default};
    `,stack:(0,t.css)`
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;
      gap: 0;
      width: 100%;
      min-width: 0; // this one is important to prevent text overflow
    `,classic:(0,t.css)`
      max-width: 100%;
    `,nonClassic:(0,t.css)`
      max-width: 640px;
    `,alertCondition:(0,t.css)``,body:(0,t.css)`
      padding: ${V.spacing(1)};
      flex: 1;
    `,description:(0,t.css)`
      margin-bottom: ${V.spacing(1)};
      font-size: ${V.typography.size.xs};
      color: ${V.colors.text.secondary};
    `,refId:(0,t.css)`
      font-weight: ${V.typography.fontWeightBold};
      color: ${V.colors.primary.text};
    `,results:(0,t.css)`
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;

      border-top: solid 1px ${V.colors.border.medium};
    `,noResults:(0,t.css)`
      display: flex;
      align-items: center;
      justify-content: center;
    `,resultsRow:(0,t.css)`
      padding: ${V.spacing(.75)} ${V.spacing(1)};

      &:nth-child(odd) {
        background-color: ${V.colors.background.secondary};
      }

      &:hover {
        background-color: ${V.colors.background.canvas};
      }
    `,labelKey:(0,t.css)`
      color: ${V.isDark?"#73bf69":"#56a64b"};
    `,labelValue:(0,t.css)`
      color: ${V.isDark?"#ce9178":"#a31515"};
    `,resultValue:(0,t.css)`
      text-align: right;
    `,resultLabel:(0,t.css)`
      flex: 1;
      overflow-x: auto;

      display: inline-block;
      white-space: nowrap;
    `,noData:(0,t.css)`
      display: flex;
      align-items: center;
      justify-content: center;
      padding: ${V.spacing()};
    `},mutedText:(0,t.css)`
    color: ${V.colors.text.secondary};
    font-size: 0.9em;

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,header:{wrapper:(0,t.css)`
      background: ${V.colors.background.secondary};
      padding: ${V.spacing(.5)} ${V.spacing(1)};
      border-bottom: solid 1px ${V.colors.border.weak};
    `},footer:(0,t.css)`
    background: ${V.colors.background.secondary};
    padding: ${V.spacing(1)};
    border-top: solid 1px ${V.colors.border.weak};
  `,draggableIcon:(0,t.css)`
    cursor: grab;
  `,mutedIcon:(0,t.css)`
    color: ${V.colors.text.secondary};
  `,editable:(0,t.css)`
    padding: ${V.spacing(.5)} ${V.spacing(1)};
    border: solid 1px ${V.colors.border.weak};
    border-radius: ${V.shape.radius.default};

    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${V.spacing(1)};

    cursor: pointer;
  `,timeseriesTableWrapper:(0,t.css)`
    max-height: 500px;

    overflow-y: scroll;
  `,timeseriesTable:(0,t.css)`
    table-layout: auto;

    width: 100%;
    height: 100%;

    td,
    th {
      padding: ${V.spacing(1)};
    }

    td {
      background: ${V.colors.background.primary};
    }

    th {
      background: ${V.colors.background.secondary};
    }

    tr {
      border-bottom: 1px solid ${V.colors.border.medium};

      &:last-of-type {
        border-bottom: none;
      }
    }
  `,pagination:{wrapper:(0,t.css)`
      border-top: 1px solid ${V.colors.border.medium};
      padding: ${V.spacing()};
    `}})},81875:(Y,A,e)=>{"use strict";e.d(A,{a:()=>g});var t=e(32196),n=e(96540),o=e(40845),s=e(39938),r=e(55852);const g=({isCondition:d,onSetCondition:i})=>{const l=(0,o.of)(u);return d?n.createElement(s.E,{key:"condition",color:"green",icon:"check",text:"Alert condition"}):n.createElement("button",{key:"make-condition",type:"button",className:l.actionLink,onClick:()=>i&&i()},"Set as alert condition")},u=d=>{const i=(0,r.my)(d);return{actionLink:(0,t.css)`
      ${i};
      color: ${d.colors.text.link};
      cursor: pointer;

      &:hover {
        text-decoration: underline;
      }
    `}}},99106:(Y,A,e)=>{"use strict";e.d(A,{EL:()=>i,JQ:()=>u,Jw:()=>r,Lm:()=>g,PI:()=>f,h6:()=>d,wf:()=>l});var t=e(2543),n=e.n(t),o=e(97706),s=e(57220);const r=c=>{const h=c.fields[0];return h?.config?.displayNameFromDS??c.name??h?.labels?.__name__},g=c=>{const h=c.fields[0]?.values[0];return Number.isFinite(h)?(0,o.h)(h,5):h},u=c=>c.fields[0]?.labels??{},d=c=>Object.entries(c).map(([h,p])=>h+"="+p).join(", "),i=c=>{const h=c.name;if((0,s.Eb)(c.rulesSource))return{name:h,parents:[]};try{const p=JSON.parse(h);if(!Array.isArray(p))throw new Error("not a nested Grafana folder");const m=(0,t.last)(p)??h,a=(0,t.dropRight)(p,1);return{name:m,parents:a}}catch{return{name:c.name,parents:[]}}},l=(c,h=[])=>JSON.stringify(h.concat(c)),f=c=>c.every(p=>p.fields.every(m=>m.values.every(a=>a==null)))},83225:(Y,A,e)=>{"use strict";e.r(A),e.d(A,{AlertmanagerTemplateFunction:()=>n,availableAlertManagerFunctions:()=>o,builtinFunctions:()=>r,conf:()=>d,keywords:()=>g,language:()=>u});var t=(i=>(i.Delimiter="delimiter",i.Keyword="keyword",i.Function="type.identifier",i.String="string",i.Variable="variable.name",i.Number="number",i.Comment="comment",i.Operator="operator",i.Identifier="idenfifier",i))(t||{}),n=(i=>(i.toUpper="toUpper",i.toLower="toLower",i.title="title",i.join="join",i.match="match",i.safeHtml="safeHtml",i.reReplaceAll="reReplaceAll",i.stringSlice="stringSlice",i))(n||{});const o=Object.values(n),r=["and","call","html","index","slice","js","len","not","or","print","printf","println","urlquery",...["eq","ne","lt","le","gt","ge"]],g=["define","if","else","end","range","break","continue","template","block","with"],u={defaultToken:"",keywords:g,functions:[...r,...o],operators:["|"],tokenizer:{root:[[/"/,"string","@string"],[/`/,"string","@rawstring"],[/\d*\d+[eE]([\-+]?\d+)?/,"number.float"],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F']*[0-9a-fA-F]/,"number.hex"],[/0[0-7']*[0-7]/,"number.octal"],[/0[bB][0-1']*[0-1]/,"number.binary"],[/\d[\d']*/,"number"],[/\d/,"number"],[/[;,.]/,"delimiter"],[/{{-?/,"delimiter"],[/-?}}/,"delimiter"],[/\.([A-Za-z]+)?/,"variable.name"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":{token:"keyword"},"@functions":{token:"type.identifier"},"@default":"idenfifier"}}],[/\/\*.*\*\//,"comment"]],string:[[/[^\\"]+/,"string"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],rawstring:[[/[^\`]/,"string"],[/`/,"string","@pop"]]}},d={comments:{blockComment:["/*","*/"]},brackets:[["{{","}}"],["(",")"]],autoClosingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}]}},74685:(Y,A,e)=>{"use strict";e.d(A,{j:()=>l});var t=e(32196),n=e(96540),o=e(70713),s=e(19845),r=e(40845),g=e(28138),u=e(72519),d=e(56528),i=e(7921);const l=({data:c,thresholds:h,thresholdsType:p})=>{const m=(0,r.of)(f),a=(0,s.jq)(c.series),v=(0,i.yW)(c),E=p?{mode:p}:void 0,D={from:c.timeRange.from.valueOf(),to:c.timeRange.to.valueOf()};return n.createElement("div",{className:m.wrapper},n.createElement(o.Ay,{disableHeight:!0},({width:b})=>n.createElement("div",{style:{width:b}},a?n.createElement(u.y,{statusMessage:v,data:c.series,eventBus:g.A,height:300,width:b,absoluteRange:D,timeZone:"browser",onChangeTime:()=>{},splitOpenFn:()=>{},loadingState:c.state,thresholdsConfig:h,thresholdsStyle:E}):n.createElement("div",{className:m.instantVectorResultWrapper},n.createElement("header",{className:m.title},"Table"),n.createElement(d.GX,{series:c.series})))))},f=c=>({wrapper:(0,t.css)`
    width: 100%;
    position: relative;
  `,instantVectorResultWrapper:(0,t.css)`
    border: solid 1px ${c.colors.border.medium};
    border-radius: ${c.shape.radius.default};
    padding: 0;

    display: flex;
    flex-direction: column;
    flex-wrap: nowrap;
  `,title:(0,t.css)({label:"panel-title",padding:c.spacing(),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:c.typography.h6.fontSize,fontWeight:c.typography.h6.fontWeight})})},7921:(Y,A,e)=>{"use strict";e.d(A,{G0:()=>T,zy:()=>M,lb:()=>I,YG:()=>U,yW:()=>C,an:()=>S,I3:()=>b,xb:()=>y,_u:()=>L,yr:()=>x});var t=e(2543),n=e(19845),o=e(50082),s=e(39070),r=e(52622),g=e(2913),u=e(55907),d=e(69437),i=e(66718),l=e(86590),f=e(41811),c=e(34525);const h=(0,f.A)(p,(R,B)=>D(R[0])===D(B[0]));function p(R){const B=new c.TS,H=R.map(W=>W.refId);return B.createNodes(H),R.forEach(W=>{const N=W.refId;((0,d.f)(W.model)&&W.model.type==="math"?m(W.model.expression??""):[W.model.expression]).forEach(_=>{N&&_&&!(N===_)&&B.link(_,N)})}),B}function m(R){const B=new RegExp(/\$\{(?<var>[a-zA-Z0-9_ ]+?)\}/gm),H=new RegExp(/\$(?<var>[a-zA-Z0-9_]+)/gm),W=Array.from(R.matchAll(B)).map(V=>V.groups?.var),N=Array.from(R.matchAll(H)).map(V=>V.groups?.var);return(0,t.compact)((0,t.uniq)([...W,...N]))}const a=(0,t.memoize)(v,(R,B)=>R+E(B));function v(R,B){const H=B.getNode(R);let W=[];function N(V){const G=V.inputEdges;G.length>0?G.forEach(_=>{_.inputNode&&N(_.inputNode)}):W?.push(V)}return N(H),W.map(V=>V.name)}function E(R){return Object.keys(R.nodes).map(B=>{const H=R.nodes[B];let W=H.outputEdges.map(V=>V.outputNode?.name).join(", "),N=H.inputEdges.map(V=>V.inputNode?.name).join(", ");return`${H.name}:${W}:${N}`}).join(" ")}function D(R){return R.map(B=>{const H=(0,d.f)(B.model)?B.model.type:B.queryType;return B.refId+(B.model.expression??"")+H}).join()}function b(R,B,H){return R.map(W=>{if(B===H||!(0,d.f)(W.model))return W;const N=W.model.type==="math",V=W.model.type==="reduce",G=W.model.type==="resample",_=W.model.type==="classic_conditions",K=W.model.type==="threshold";if(N)return{...W,model:{...W.model,expression:P(W.model.expression??"",B,H)}};if(G||V||K){const j=W.model.expression===B;return{...W,model:{...W.model,expression:j?H:W.model.expression}}}if(_){const j=W.model.conditions?.map(k=>({...k,query:{...k.query,params:k.query.params.map(Q=>Q===B?H:Q)}}));return{...W,model:{...W.model,conditions:j}}}return W})}function P(R,B,H){const W=new RegExp("(\\$"+B+"\\b)|(\\${"+B+"})","gm"),N="${"+H+"}";return R.replace(W,N)}function y(R,B){return R.find(H=>H.refId===B)!==void 0}function T(R){return R.includes("/")||R.includes("\\")?'Cannot contain "/" or "\\" characters':!0}function M(R){if(R.series.length===0)return;const B=(0,n.jq)(R.series);let H;return B&&(H=new Error("You cannot use time series data as an alert condition, consider adding a reduce expression.")),H}function I(R){if(R.errors?.length)return new Error(R.errors[0].message)}function x(R){const H=(R[0]?.meta?.notices??[]).find(W=>W.severity==="warning")?.text;return H?new Error(H):void 0}function S(R,B){const H={},W=[i.Tz.threshold,i.Tz.classic];if(!B)return H;for(const G of R){if(!(0,d.f)(G.model)||!W.includes(G.model.type)||!Array.isArray(G.model.conditions)||G.model.refId!==B)continue;const _=G.model.conditions.some(O);G.model.conditions.forEach(K=>{const j=K.evaluator.params,k=K.query?.params[0]??G.model.expression;if(!k)return;const Q=O(K);try{const ee=h(R),ae=a(k,ee);R.filter(ne=>ae.includes(ne.refId)).forEach(ne=>{const q=ne.refId,re=!!(!(0,d.f)(ne?.model)&&q);q&&!H[q]&&(H[q]={config:{mode:o.O.Absolute,steps:[]},mode:r.Ly.Line}),q&&re&&!Q&&!_?N(q,j[0]):q&&re&&Q&&(V(q,j,K.evaluator.type),H[q].mode=r.Ly.LineAndArea)})}catch(ee){console.error("Failed to parse thresholds",ee);return}})}function N(G,_){H[G].config.steps.push({value:-1/0,color:"transparent"},{value:_,color:g.$W.theme2.colors.error.main})}function V(G,_,K){K===u.p.IsWithinRange&&H[G].config.steps.push({value:-1/0,color:"transparent"},{value:_[0],color:g.$W.theme2.colors.error.main},{value:_[1],color:g.$W.theme2.colors.error.main},{value:_[1],color:"transparent"}),K===u.p.IsOutsideRange&&H[G].config.steps.push({value:-1/0,color:g.$W.theme2.colors.error.main},{value:_[0],color:g.$W.theme2.colors.error.main},{value:_[0],color:"transparent"},{value:_[1],color:g.$W.theme2.colors.error.main}),H[G].config.steps.sort((j,k)=>j.value-k.value),H[G].config.steps=H[G].config.steps.filter(j=>j.value!==void 0)}return H}function O(R){return R.evaluator.type===u.p.IsWithinRange||R.evaluator.type===u.p.IsOutsideRange}function C(R){const B="Failed to fetch data";if(R.state!==s.Gu.Error)return;const H=R.errors;return H?.length?H.map(W=>W.message??B).join(", "):R.error?.message??B}function L(R=""){return R==="recording"?l.Z.cloudRecording:l.Z.grafana}function U(R,B){const H=B.filter(G=>!(0,d.f)(G.model)).map(G=>G.refId),W=R.filter(G=>!(0,d.f)(G.model)).map(G=>G.refId),[N,V]=(0,t.xor)(W,H);return[N,V]}},47207:(Y,A,e)=>{"use strict";e.d(A,{D:()=>ve});var t=e(1932),n=e(96540),o=e(24120),s=e(39070),r=e(32264),g=e(42418),u=e(32196),d=e(20382),i=e(2543),l=e(40845),f=e(67061),c=e(39938),h=e(28716),p=e(69437),m=e(66718),a=e(55907),v=e(56528),E=e(7921),D=e(47232),b=e(76885),P=e(63383),y=e(55852),T=e(10096),M=e(96636),I=e(74685);const x=4;function S({data:pe,model:le,thresholds:Me,dsSettings:De,relativeTimeRange:Re,onTimeRangeChange:me,className:he}){const Te=(0,l.of)(C),Be=(0,p.f)(le),we=(0,n.useCallback)(st=>{const Qe=(0,D.KQ)().unix()-st.unix();if(Re){const ke=Re.from-Re.to;me({from:Qe+ke,to:Qe})}},[me,Re]),Ne=(0,n.useCallback)(st=>st===0?(0,D.KQ)():(0,D.KQ)().subtract(st,"seconds"),[]);if(!pe)return null;const Ze=T.TP.hasAccessToExplore();return n.createElement("div",{className:he},n.createElement("div",{className:Te.header},n.createElement("div",{className:Te.actions},!Be&&Re?n.createElement(P.K,{date:Ne(Re.to),onChange:we,maxDate:new Date}):null,Ze&&!Be&&n.createElement(M.d,{component:n.createElement(y.z9,{size:"md",variant:"secondary",icon:"compass",href:O(De,le)},"View in Explore")}))),n.createElement(I.j,{data:pe,thresholds:Me?.config,thresholdsType:Me?.mode}))}function O(pe,le){const{uid:Me,type:De}=pe,{refId:Re,...me}=le;return b.kM.renderUrl(`${r.$.appSubUrl}/explore`,{left:JSON.stringify({datasource:pe.uid,queries:[{refId:"A",...me,datasource:{type:De,uid:Me}}],range:{from:"now-1h",to:"now"}})})}const C=pe=>({header:(0,u.css)`
      height: ${pe.spacing(x)};
      display: flex;
      align-items: center;
      justify-content: flex-end;
      white-space: nowrap;
      margin-bottom: ${pe.spacing(2)};
    `,refId:(0,u.css)`
      font-weight: ${pe.typography.fontWeightMedium};
      color: ${pe.colors.text.link};
      overflow: hidden;
    `,dataSource:(0,u.css)`
      margin-left: ${pe.spacing(1)};
      font-style: italic;
      color: ${pe.colors.text.secondary};
    `,actions:(0,u.css)`
      display: flex;
      align-items: center;
    `,errorMessage:(0,u.css)`
      white-space: pre-wrap;
    `});function L({queries:pe,condition:le,evalDataByQuery:Me={},evalTimeRanges:De={},onTimeRangeChange:Re}){const me=(0,i.keyBy)(Object.values(r.$.datasources),Ne=>Ne.uid),he=pe.filter(Ne=>!(0,p.f)(Ne.model)),Te=pe.filter(Ne=>(0,p.f)(Ne.model)),Be=(0,l.of)(Q),we=(0,E.an)(pe,le);return n.createElement(f.B,{gap:2,direction:"column"},n.createElement("div",{className:Be.maxWidthContainer},n.createElement(f.B,{gap:2,wrap:"wrap","data-testid":"queries-container"},he.map(({model:Ne,relativeTimeRange:Ze,refId:st,datasourceUid:Qe},ke)=>{const je=me[Qe];return n.createElement(U,{key:ke,refId:st,isAlertCondition:le===st,model:Ne,relativeTimeRange:Ze,evalTimeRange:De[st],dataSource:je,thresholds:we[st],queryData:Me[st],onEvalTimeRangeChange:He=>Re(st,He)})}))),n.createElement("div",{className:Be.maxWidthContainer},n.createElement(f.B,{gap:1,wrap:"wrap","data-testid":"expressions-container"},Te.map(({model:Ne,refId:Ze,datasourceUid:st},Qe)=>{const ke=me[st];return(0,p.f)(Ne)&&n.createElement(B,{key:Qe,refId:Ze,isAlertCondition:le===Ze,model:Ne,dataSource:ke,evalData:Me[Ze]})}))))}function U({refId:pe,relativeTimeRange:le,thresholds:Me,model:De,dataSource:Re,queryData:me,evalTimeRange:he,onEvalTimeRangeChange:Te}){const Be=(0,l.of)(R),we=[Re?.name??"[[Data source not found]]"];return le&&we.push((0,h.Bw)(le).display),n.createElement(H,{refId:pe,headerItems:we,className:Be.contentBox},n.createElement("pre",{className:Be.code},n.createElement("code",null,(0,d.Bh)(De))),Re&&n.createElement(S,{refId:pe,dsSettings:Re,model:De,data:me,thresholds:Me,relativeTimeRange:he,onTimeRangeChange:Te,className:Be.visualization}))}const R=pe=>({code:(0,u.css)`
    margin: ${pe.spacing(1)};
  `,contentBox:(0,u.css)`
    flex: 1 0 100%;
  `,visualization:(0,u.css)`
    padding: ${pe.spacing(1)};
  `});function B({refId:pe,model:le,evalData:Me,isAlertCondition:De}){function Re(){switch(le.type){case m.Tz.math:return n.createElement(ee,{model:le});case m.Tz.reduce:return n.createElement(G,{model:le});case m.Tz.resample:return n.createElement(K,{model:le});case m.Tz.classic:return n.createElement(N,{model:le});case m.Tz.threshold:return n.createElement(k,{model:le});default:return n.createElement(n.Fragment,null,"Expression not supported: ",le.type)}}return n.createElement(H,{refId:pe,headerItems:[(0,i.startCase)(le.type)],isAlertCondition:De},Re(),Me&&n.createElement(v.GX,{series:Me.series,isAlertCondition:De}))}function H({refId:pe,headerItems:le=[],children:Me,isAlertCondition:De,className:Re}){const me=(0,l.of)(W);return n.createElement("div",{className:(0,u.cx)(me.container,Re)},n.createElement("header",{className:me.header},n.createElement("span",{className:me.refId},pe),le.map((he,Te)=>n.createElement("span",{key:Te,className:me.textBlock},he)),De&&n.createElement("div",{className:me.conditionIndicator},n.createElement(c.E,{color:"green",icon:"check",text:"Alert condition"}))),Me)}const W=pe=>({container:(0,u.css)`
    flex: 1 0 25%;
    border: 1px solid ${pe.colors.border.strong};
    max-width: 100%;
  `,header:(0,u.css)`
    display: flex;
    align-items: center;
    gap: ${pe.spacing(1)};
    padding: ${pe.spacing(1)};
    background-color: ${pe.colors.background.secondary};
  `,textBlock:(0,u.css)`
    border: 1px solid ${pe.colors.border.weak};
    padding: ${pe.spacing(.5,1)};
    background-color: ${pe.colors.background.primary};
  `,refId:(0,u.css)`
    color: ${pe.colors.text.link};
    padding: ${pe.spacing(.5,1)};
    border: 1px solid ${pe.colors.border.weak};
  `,conditionIndicator:(0,u.css)`
    margin-left: auto;
  `});function N({model:pe}){const le=(0,l.of)(V),Me=(0,i.keyBy)(a.A.reducerTypes,me=>me.value),De=(0,i.keyBy)(a.A.evalOperators,me=>me.value),Re=(0,i.keyBy)(a.A.evalFunctions,me=>me.value);return n.createElement("div",{className:le.container},pe.conditions?.map(({query:me,operator:he,reducer:Te,evaluator:Be},we)=>{const Ne=Z(Be);return n.createElement(n.Fragment,{key:we},n.createElement("div",{className:le.blue},we===0?"WHEN":!!he?.type&&De[he?.type]?.text),n.createElement("div",{className:le.bold},Te?.type&&Me[Te.type]?.text),n.createElement("div",{className:le.blue},"OF"),n.createElement("div",{className:le.bold},me.params[0]),n.createElement("div",{className:le.blue},Re[Be.type].text),n.createElement("div",{className:le.bold},Ne?`(${Be.params[0]}; ${Be.params[1]})`:Be.params[0]))}))}const V=pe=>({container:(0,u.css)`
    padding: ${pe.spacing(1)};
    display: grid;
    grid-template-columns: max-content max-content max-content max-content max-content max-content;
    gap: ${pe.spacing(0,1)};
  `,...ae(pe)});function G({model:pe}){const le=(0,l.of)(_),{reducer:Me,expression:De,settings:Re}=pe,me=m.Cu.find(Be=>Be.value===Me),he=Re?.mode??m.Mt.Strict,Te=m.HZ.find(Be=>Be.value===he);return n.createElement("div",{className:le.container},n.createElement("div",{className:le.label},"Function"),n.createElement("div",{className:le.value},me?.label),n.createElement("div",{className:le.label},"Input"),n.createElement("div",{className:le.value},De),n.createElement("div",{className:le.label},"Mode"),n.createElement("div",{className:le.value},Te?.label))}const _=pe=>({container:(0,u.css)`
    padding: ${pe.spacing(1)};
    display: grid;
    gap: ${pe.spacing(1)};
    grid-template-rows: 1fr 1fr;
    grid-template-columns: 1fr 1fr 1fr 1fr;

    > :nth-child(6) {
      grid-column: span 3;
    }
  `,...ae(pe)});function K({model:pe}){const le=(0,l.of)(j),{expression:Me,window:De,downsampler:Re,upsampler:me}=pe,he=m.PN.find(Be=>Be.value===Re),Te=m.iX.find(Be=>Be.value===me);return n.createElement("div",{className:le.container},n.createElement("div",{className:le.label},"Input"),n.createElement("div",{className:le.value},Me),n.createElement("div",{className:le.label},"Resample to"),n.createElement("div",{className:le.value},De),n.createElement("div",{className:le.label},"Downsample"),n.createElement("div",{className:le.value},he?.label),n.createElement("div",{className:le.label},"Upsample"),n.createElement("div",{className:le.value},Te?.label))}const j=pe=>({container:(0,u.css)`
    padding: ${pe.spacing(1)};
    display: grid;
    gap: ${pe.spacing(1)};
    grid-template-columns: 1fr 1fr 1fr 1fr;
    grid-template-rows: 1fr 1fr;
  `,...ae(pe)});function k({model:pe}){const le=(0,l.of)(Q),{expression:Me,conditions:De}=pe,Re=De&&De[0]?.evaluator,me=m.zd.find(Ne=>Ne.value===Re?.type),he=Re?Z(Re):!1,Te=De&&De[0]?.unloadEvaluator,Be=m.zd.find(Ne=>Ne.value===Te?.type),we=Te?Z(Te):!1;return n.createElement(n.Fragment,null,n.createElement("div",{className:le.container},n.createElement("div",{className:le.label},"Input"),n.createElement("div",{className:le.value},Me),Re&&n.createElement(n.Fragment,null,n.createElement("div",{className:le.blue},me?.label),n.createElement("div",{className:le.bold},he?`(${Re.params[0]}; ${Re.params[1]})`:Re.params[0]))),n.createElement("div",{className:le.container},Te&&n.createElement(n.Fragment,null,n.createElement("div",{className:le.label},"Stop alerting when "),n.createElement("div",{className:le.value},Me),n.createElement(n.Fragment,null,n.createElement("div",{className:le.blue},Be?.label),n.createElement("div",{className:le.bold},we?`(${Te.params[0]}; ${Te.params[1]})`:Te.params[0])))))}const Q=pe=>{const{blue:le,bold:Me,...De}=ae(pe);return{...De,maxWidthContainer:(0,u.css)`
      max-width: 100%;
    `,container:(0,u.css)`
      padding: ${pe.spacing(1)};
      display: flex;
      gap: ${pe.spacing(1)};
    `,blue:(0,u.css)`
      ${le};
      margin: auto 0;
    `,bold:(0,u.css)`
      ${Me};
      margin: auto 0;
    `}};function ee({model:pe}){const le=(0,l.of)(Q),{expression:Me}=pe;return n.createElement("div",{className:le.container},n.createElement("div",{className:le.label},"Input"),n.createElement("div",{className:le.value},Me))}const ae=pe=>({blue:(0,u.css)`
    color: ${pe.colors.text.link};
  `,bold:(0,u.css)`
    font-weight: ${pe.typography.fontWeightBold};
  `,label:(0,u.css)`
    display: flex;
    align-items: center;
    padding: ${pe.spacing(.5,1)};
    background-color: ${pe.colors.background.secondary};
    font-size: ${pe.typography.bodySmall.fontSize};
    line-height: ${pe.typography.bodySmall.lineHeight};
    font-weight: ${pe.typography.fontWeightBold};
  `,value:(0,u.css)`
    padding: ${pe.spacing(.5,1)};
    border: 1px solid ${pe.colors.border.weak};
  `});function Z(pe){return pe.type===a.p.IsWithinRange||pe.type===a.p.IsOutsideRange}var ne=e(36135),q=e(28318),te=e(57220),re=e(23662);function de(pe){if(!pe)return[];const{namespace:le,rulerRule:Me}=pe,{rulesSource:De}=le;if((0,te.z2)(De)&&(0,re.lT)(Me))return Me.grafana_alert.data;if((0,te.Eb)(De)){const Re=ge(De,pe);return[ie(Re,De.uid)]}return[]}function ie(pe,le){return{refId:pe.refId,datasourceUid:le,queryType:"",model:pe,relativeTimeRange:{from:360,to:0}}}function ge(pe,le){const Me="A";switch(pe.type){case"prometheus":return{refId:Me,expr:le.query};case"loki":return{refId:Me,expr:le.query};default:throw new Error(`Query for datasource type ${pe.type} is currently not supported by cloud alert rules.`)}}const ve=({rule:pe})=>{const[le,Me]=(0,n.useState)({}),De=(0,n.useMemo)(()=>new q.t,[]),Re=(0,o.A)(De.get()),me=ye(Re),he=(0,n.useMemo)(()=>de(pe),[pe]),{allDataSourcesAvailable:Te}=(0,ne.g)(he),Be=(0,n.useCallback)(()=>{if(he.length>0&&Te){const Ze=he.map(Qe=>({...Qe,relativeTimeRange:le[Qe.refId]??Qe.relativeTimeRange}));let st;pe&&(0,re.lT)(pe.rulerRule)&&(st=pe.rulerRule.grafana_alert.condition),De.run(Ze,st??"A")}},[he,Te,pe,De,le]);(0,n.useEffect)(()=>{const Ze=de(pe),st=Object.fromEntries(Ze.map(Qe=>[Qe.refId,Qe.relativeTimeRange??{from:0,to:0}]));Me(st)},[pe]),(0,n.useEffect)(()=>{Te&&Be()},[Te,Be]),(0,n.useEffect)(()=>()=>De.destroy(),[De]);const we=(0,n.useCallback)((Ze,st)=>{const Qe=(0,t.jM)(le,ke=>{ke[Ze]=st});Me(Qe)},[le,Me]),Ne=(0,re.YN)(pe.group);return n.createElement(n.Fragment,null,me?"Loading...":n.createElement(n.Fragment,null,(0,re.lT)(pe.rulerRule)&&!Ne&&n.createElement(L,{condition:pe.rulerRule.grafana_alert.condition,queries:he,evalDataByQuery:Re,evalTimeRanges:le,onTimeRangeChange:we}),!(0,re.lT)(pe.rulerRule)&&!Ne&&Re&&Object.keys(Re).length>0&&n.createElement("div",null,he.map(Ze=>n.createElement(U,{key:Ze.refId,refId:Ze.refId,model:Ze.model,dataSource:Object.values(r.$.datasources).find(st=>st.uid===Ze.datasourceUid),queryData:Re[Ze.refId],relativeTimeRange:Ze.relativeTimeRange,evalTimeRange:le[Ze.refId],onEvalTimeRangeChange:st=>we(Ze.refId,st),isAlertCondition:!1}))),!Ne&&!Te&&n.createElement(g.F,{title:"Query not available",severity:"warning"},"Cannot display the query preview. Some of the data sources used in the queries are not available.")))};function ye(pe){return pe?!!Object.values(pe).find(le=>le.state===s.Gu.Loading):!0}},56812:(Y,A,e)=>{"use strict";e.d(A,{K:()=>o,k:()=>s});var t=e(96540);const n=t.createContext(void 0),o=({children:r,rule:g,identifier:u})=>{const d={rule:g,identifier:u};return t.createElement(n.Provider,{value:d},r)},s=()=>{const r=t.useContext(n);if(r===void 0)throw new Error("useAlertRule must be used within a AlertRuleContext");return r}},51174:(Y,A,e)=>{"use strict";e.r(A),e.d(A,{Title:()=>ke,createListFilterLink:()=>Qe,default:()=>Ee,isErrorHealth:()=>je});var t=e(32196),n=e(2543),o=e(96540),s=e(67061),r=e(42418),g=e(40980),u=e(72109),d=e(94753),i=e(40845),l=e(55852),f=e(83277),c=e(94822),h=e(79741),p=e(55740),m=e(56361),a=e(23662),v=e(3704),E=e(69087),D=e(33450),b=e(48205),P=e(96636),y=e(99106),T=e(51921);function M(){return o.createElement(r.F,{severity:"info",title:"This rule is part of a federated rule group.",bottomSpacing:0,topSpacing:2},o.createElement(s.B,{direction:"column"},"Federated rule groups are currently an experimental feature.",o.createElement(l.$n,{fill:"text",icon:"book"},o.createElement("a",{href:"https://grafana.com/docs/metrics-enterprise/latest/tenant-management/tenant-federation/#cross-tenant-alerting-and-recording-rule-federation"},"Read documentation"))))}var I=e(72095),x=e(10534),S=e(55196),O=e(16577),C=(J=>(J.GrafanaManagedAlertRule="Grafana-managed alert rule",J.CloudAlertRule="Cloud alert rule",J.CloudRecordingRule="Cloud recording rule",J))(C||{});const L=({rule:J})=>{const oe=(0,i.of)(R);let ue;(0,a.lT)(J.rulerRule)?ue="Grafana-managed alert rule":(0,a.i7)(J.rulerRule)?ue="Cloud recording rule":ue="Cloud alert rule";const be=J.promRule?.evaluationTime,Le=J.promRule?.lastEvaluation,_e=(0,o.useCallback)(()=>(0,a.lT)(J.rulerRule)?J.rulerRule.grafana_alert.uid:"",[J.rulerRule]),Ve=(0,a.i7)(J.rulerRule)?void 0:J.annotations??[],We=Number.isFinite(be);return o.createElement(s.B,{direction:"column",gap:3},o.createElement("div",{className:oe.metadataWrapper},o.createElement(S.P,{direction:"column"},"Rule type",o.createElement(d.E,{color:"primary"},ue)),o.createElement(S.P,{direction:"column"},(0,a.lT)(J.rulerRule)&&o.createElement(o.Fragment,null,"Rule Identifier",o.createElement(s.B,{direction:"row",alignItems:"center",gap:.5},o.createElement(d.E,{color:"primary"},J.rulerRule.grafana_alert.uid,o.createElement(x.b,{fill:"text",variant:"secondary",icon:"copy",size:"sm",getText:_e}))))),o.createElement(S.P,{direction:"column"},We&&o.createElement(o.Fragment,null,"Last evaluation",Le&&be&&o.createElement("span",null,o.createElement(d.E,{color:"primary"},(0,I.B)(new Date(Le))," ago"),", took"," ",o.createElement(d.E,{color:"primary"},be,"ms")))),o.createElement(S.P,{direction:"column"},!(0,a.i7)(J.rulerRule)&&o.createElement(o.Fragment,null,"Pending period",o.createElement(d.E,{color:"primary"},J.rulerRule?.for??"0s"))),(0,a.lT)(J.rulerRule)&&o.createElement(o.Fragment,null,o.createElement(S.P,{direction:"column"},"Alert state if no data or all values are null",o.createElement(d.E,{color:"primary"},J.rulerRule.grafana_alert.no_data_state)),o.createElement(S.P,{direction:"column"},"Alert state if execution error or timeout",o.createElement(d.E,{color:"primary"},J.rulerRule.grafana_alert.exec_err_state)))),Ve&&o.createElement(o.Fragment,null,o.createElement(d.E,{variant:"h4"},"Annotations"),Object.keys(Ve).length===0?o.createElement(d.E,{variant:"bodySmall",color:"secondary",italic:!0},"No annotations"):o.createElement("div",{className:oe.metadataWrapper},Object.entries(Ve).map(([$e,it])=>o.createElement(S.P,{direction:"column",key:$e},$e,o.createElement(U,{value:it}))))))};function U({value:J}){const oe=J&&J.startsWith("http"),ue=o.createElement(O.Y,{input:J,delimiter:["{{","}}"]});return oe?o.createElement(u.Y,{variant:"bodySmall",href:J,external:!0},J):o.createElement(d.E,{color:"primary"},ue)}const R=J=>({metadataWrapper:(0,t.css)({display:"grid",gridTemplateColumns:"auto auto",rowGap:J.spacing(3),columnGap:J.spacing(12)})});var B=e(32264),H=e(46013);const W=(0,o.lazy)(()=>e.e(7409).then(e.bind(e,87409))),N=(0,o.lazy)(()=>e.e(1121).then(e.bind(e,31121))),V=({rule:J})=>{const oe=B.$.unifiedAlerting.alertStateHistoryBackend,ue=B.$.unifiedAlerting.alertStateHistoryPrimary,Le=[oe,ue].some(We=>We===H.Q.Loki)?H.Q.Loki:H.Q.Annotations,_e=J.grafana_alert.id??"",Ve=J.grafana_alert.uid;return o.createElement(o.Suspense,{fallback:"Loading..."},Le===H.Q.Loki&&o.createElement(N,{ruleUID:Ve}),Le===H.Q.Annotations&&o.createElement(W,{alertId:_e}))};var G=e(15054),_=e(99938);const K=({rule:J})=>o.createElement(_.s,{rule:J,pagination:{itemsPerPage:G.FG},enableFiltering:!0});var j=e(47207);const k=()=>o.createElement(o.Fragment,null,"Routing");var Q=e(26272),ee=e(83122),ae=e(38138),Z=e(28138),ne=e(19073),q=e(18461),te=e(90141),re=e(68291),de=e(56812);const ie=({handleDelete:J,handleDuplicateRule:oe})=>{const{rule:ue,identifier:be}=(0,de.k)(),[Le,_e]=(0,ne.mh)(ue,ne.j5.Update),Ve=Le&&_e,[We,$e]=(0,ne.mh)(ue,ne.j5.Delete),it=We&&$e,[at,ht]=(0,ne.mh)(ue,ne.j5.Duplicate),ft=at&&ht,[gt,Dt]=(0,ne.mh)(ue,ne.j5.Silence),It=gt&&Dt,[jt,Vt]=(0,ne.mh)(ue,ne.j5.ModifyExport),_t=jt&&Vt,rt=!(0,m.y$)()||(0,m.ES)(),St=(0,m.S2)(ue.namespace.rulesSource,ue);return[Ve&&o.createElement(ye,{key:"edit-action",identifier:be}),o.createElement(ee.m,{key:"more-actions",overlay:o.createElement(ae.W,null,It&&o.createElement(ae.W.Item,{label:"Silence",icon:"bell-slash",url:(0,m.t7)(be.ruleSourceName,ue)}),rt&&o.createElement(re.d,{title:ue.name,url:""}),ft&&o.createElement(ae.W.Item,{label:"Duplicate",icon:"copy",onClick:()=>oe(be)}),o.createElement(ae.W.Divider,null),o.createElement(ae.W.Item,{label:"Copy link",icon:"share-alt",onClick:()=>ge(St)}),_t&&o.createElement(ae.W.Item,{label:"Export",icon:"download-alt",childItems:[o.createElement(ve,{key:"export-with-modifications",identifier:be})]}),it&&o.createElement(o.Fragment,null,o.createElement(ae.W.Divider,null),o.createElement(ae.W.Item,{label:"Delete",icon:"trash-alt",destructive:!0,onClick:()=>J(ue)})))},o.createElement(te.A,{size:"md"}))]};function ge(J){navigator.clipboard?.writeText(J).then(()=>{Z.A.emit(Q.r1.alertSuccess,["URL copied to clipboard"])})}const ve=({identifier:J})=>{const oe=location.pathname+location.search,ue=(0,v.c)(`/alerting/${encodeURIComponent(q.$9(J))}/modify-export`,{returnTo:oe});return o.createElement(ae.W.Item,{key:"with-modifications",label:"With modifications",icon:"file-edit-alt",url:ue})},ye=({identifier:J})=>{const oe=location.pathname+location.search,ue=q.$9(J),be=(0,v.c)(`/alerting/${encodeURIComponent(ue)}/edit`,{returnTo:oe});return o.createElement(l.z9,{variant:"secondary",icon:"pen",href:be},"Edit")};var pe=e(96374),le=e(99140),Me=e(23770),De=e(57220);const Re=()=>{const[J,oe]=(0,o.useState)(),ue=(0,o.useCallback)(()=>{oe(void 0)},[]),be=(0,o.useCallback)(Ve=>{oe(Ve)},[]),Le=(0,o.useCallback)(Ve=>{if(Ve&&Ve.rulerRule){const We=(0,q.P1)((0,De.EV)(Ve.namespace.rulesSource),Ve.namespace.name,Ve.group.name,Ve.rulerRule);(0,le.JD)((0,Me.KH)(We,{navigateTo:"/alerting/list"})),ue()}},[ue]);return[(0,o.useMemo)(()=>o.createElement(pe.u,{isOpen:!!J,title:"Delete rule",body:"Deleting this rule will permanently remove it from your alert rule list. Are you sure you want to delete this rule?",confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:()=>Le(J),onDismiss:ue}),[Le,ue,J]),be,ue]},me=J=>{const oe=(0,i.of)(he,J);return o.createElement(s.B,{direction:"row",gap:.5},o.createElement("div",{className:oe.dot}))},he=(J,oe)=>{const ue=J.spacing(1.25),be=`calc(${ue} / 2.5)`,Le=oe.color==="error",_e=oe.color==="success",Ve=oe.color==="warning";return{dot:(0,t.css)`
      width: ${ue};
      height: ${ue};

      border-radius: 100%;

      background-color: ${J.colors.secondary.main};
      outline: solid ${be} ${J.colors.secondary.transparent};
      margin: ${be};

      ${_e&&(0,t.css)({backgroundColor:J.colors.success.main,outlineColor:J.colors.success.transparent})}

      ${Ve&&(0,t.css)({backgroundColor:J.colors.warning.main,outlineColor:J.colors.warning.transparent})}

      ${Le&&(0,t.css)({backgroundColor:J.colors.error.main,outlineColor:J.colors.error.transparent})}
    `}},Te=({health:J})=>{const oe=je(J),ue=oe?"error":"success",be=oe?"Recording error":"Recording";return o.createElement(we,{color:ue,text:be})},Be=({state:J,health:oe})=>{let ue,be;switch(J){case c.cF.Inactive:be="success",ue="Normal";break;case c.cF.Firing:be="error",ue="Firing";break;case c.cF.Pending:be="warning",ue="Pending";break}return je(oe)&&(be="error",ue="Error"),oe==="nodata"&&(be="warning",ue="No data"),o.createElement(we,{color:be,text:ue})};function we({color:J,text:oe}){return o.createElement(s.B,{direction:"row",gap:.5,wrap:"nowrap",flex:"0 0 auto"},o.createElement(me,{color:J}),o.createElement(d.E,{variant:"bodySmall",color:J},oe))}var Ne=(J=>(J.Query="query",J.Instances="instances",J.History="history",J.Routing="routing",J.Details="details",J))(Ne||{});const Ze=()=>{const{rule:J}=(0,de.k)(),{pageNav:oe,activeTab:ue}=Oe(J),[be,Le]=(0,o.useState)(),[_e,Ve]=Re(),We=ie({handleDuplicateRule:Le,handleDelete:Ve}),{annotations:$e,promRule:it}=J,at=je(J.promRule?.health),ht=(0,a.Z8)(it),ft=(0,a.YN)(J.group),gt=(0,a.lT)(J.rulerRule)&&!!J.rulerRule.grafana_alert.provenance,Dt=$e[p.YH.summary];return o.createElement(D.d,{pageNav:oe,navId:"alert-list",isLoading:!1,renderTitle:It=>o.createElement(ke,{name:It,state:ht?it.state:void 0,health:J.promRule?.health,ruleType:J.promRule?.type}),actions:We,info:st(J),subTitle:o.createElement(s.B,{direction:"column"},Dt,ft&&o.createElement(M,null),gt&&o.createElement(b.Yi,{resource:b.hk.AlertRule,bottomSpacing:0,topSpacing:2}),at&&o.createElement(r.F,{title:"Something went wrong when evaluating this alert rule",bottomSpacing:0,topSpacing:2},o.createElement("pre",{style:{marginBottom:0}},o.createElement("code",null,J.promRule?.lastError??"No error message"))))},o.createElement(s.B,{direction:"column",gap:2},o.createElement(g.J,null,ue==="query"&&o.createElement(j.D,{rule:J}),ue==="instances"&&o.createElement(K,{rule:J}),ue==="history"&&(0,a.lT)(J.rulerRule)&&o.createElement(V,{rule:J.rulerRule}),ue==="routing"&&o.createElement(k,null),ue==="details"&&o.createElement(L,{rule:J}))),_e,be&&o.createElement(T.Z,{redirectTo:!0,identifier:be,isProvisioned:gt,onDismiss:()=>Le(void 0)}))},st=J=>{const{labels:oe,annotations:ue,group:be}=J,Le=[],_e=ue[p.YH.runbookURL],Ve=ue[p.YH.dashboardUID],We=ue[p.YH.panelID],$e=Ve&&We,it=Ve,at=!(0,n.isEmpty)(oe),ht=be.interval;return _e&&Le.push({label:"Runbook",value:o.createElement(u.Y,{variant:"bodySmall",href:_e,external:!0},(0,n.truncate)(_e,{length:42}))}),$e?Le.push({label:"Dashboard and panel",value:o.createElement(P.d,{title:J.name,component:o.createElement(u.Y,{variant:"bodySmall",href:(0,m.D2)(Ve,We)},"View panel")})}):it&&Le.push({label:"Dashboard",value:o.createElement(P.d,{title:J.name,component:o.createElement(u.Y,{title:J.name,variant:"bodySmall",href:(0,m.JM)(Ve)},"View dashboard")})}),ht&&Le.push({label:"Evaluation interval",value:o.createElement(d.E,{color:"primary"},"Every ",ht)}),at&&Le.push({label:"Labels",value:o.createElement(E.m,{labels:oe,size:"sm"})}),Le},Qe=J=>{const oe=new URLSearchParams([["search",J.map(([ue,be])=>`${ue}:"${be}"`).join(" ")]]);return(0,v.c)("/alerting/list?"+oe.toString())},ke=({name:J,state:oe,health:ue,ruleType:be})=>{const Le=(0,i.of)(Ke),_e=be===c.JS.Recording;return o.createElement("div",{className:Le.title},o.createElement(l.z9,{variant:"secondary",icon:"angle-left",href:"/alerting/list"}),o.createElement(d.E,{variant:"h1",truncate:!0},J),oe&&o.createElement(Be,{state:oe,health:ue}),_e&&o.createElement(Te,{health:ue}))},je=J=>J==="error"||J==="err";function He(){const[J,oe]=(0,f.s)(),ue=J.tab;return[Ge(ue)?ue:"query",_e=>{oe({tab:_e})}]}function Ge(J){return typeof J=="string"&&Object.values(Ne).includes(J)}function Oe(J){const[oe,ue]=He(),{annotations:be,promRule:Le}=J,_e=be[p.YH.summary],Ve=(0,a.Z8)(Le),We=Ve?(Le.alerts??[]).length:void 0,$e=(0,y.EL)(J.namespace).name,it=J.group.name,at=(0,a.lT)(J.rulerRule)&&Ve,ht=(0,a.KB)(J.promRule);return{pageNav:{...h.defaultPageNav,text:J.name,subTitle:_e,children:[{text:"Query and conditions",active:oe==="query",onClick:()=>{ue("query")}},{text:"Instances",active:oe==="instances",onClick:()=>{ue("instances")},tabCounter:We,hideFromTabs:ht},{text:"History",active:oe==="history",onClick:()=>{ue("history")},hideFromTabs:!at},{text:"Details",active:oe==="details",onClick:()=>{ue("details")}}],parentItem:{text:it,url:Qe([["namespace",$e],["group",it]]),parentItem:{text:$e,url:Qe([["namespace",$e]])}}},activeTab:oe}}const Ke=()=>({title:(0,t.css)({display:"flex",alignItems:"center",gap:8,minWidth:0})}),Ee=Ze},2426:(Y,A,e)=>{"use strict";e.d(A,{D:()=>b});var t=e(96540),n=e(8249),o=e(47232),s=e(74135),r=e(23662),g=e(69087),u=e(75591),d=e(4402),i=e(83122),l=e(29158),f=e(24401),c=e(30973);const h=({rule:y,instance:T,extensionPointId:M})=>{const[I,x]=(0,t.useState)(),O=p({instance:T,rule:y},M);if(O.length===0)return null;const C=t.createElement(c.w,{extensions:O,onSelect:x});return t.createElement(t.Fragment,null,t.createElement(i.m,{placement:"bottom-start",overlay:C},t.createElement(l.K,{name:"ellipsis-v","aria-label":"Actions",variant:"secondary"})),!!I&&!!I.path&&t.createElement(f.s,{path:I.path,title:I.title,onDismiss:()=>x(void 0)}))};function p(y,T){return(0,t.useMemo)(()=>{const{extensions:M}=(0,d.Kf)({extensionPointId:T,context:y,limitPerPlugin:3});return M},[y,T])}var m=e(33225),a=e(71223),v=e(84396);const E=({instance:y})=>{const T=(0,m.Hx)(y.annotations),M=(0,m.gO)(T);return t.createElement("div",null,y.value&&t.createElement(v.X,{label:"Value",horizontal:!0},y.value),T.map(([I,x])=>t.createElement(a.s,{key:I,annotationKey:I,value:x,valueLink:M.get(I)})))};var D=e(30423);const b=({rule:y,instances:T,pagination:M,footerRow:I})=>{const x=(0,t.useMemo)(()=>T.length>1?(0,n.yO)(T.map(O=>O.labels)):{},[T]),S=(0,t.useMemo)(()=>T.map(O=>({data:{rule:y,alert:{...O,commonLabels:x}},id:(0,r.RI)(O)})),[x,T,y]);return t.createElement(u.E,{cols:P,isExpandable:!0,items:S,renderExpandedContent:({data:O})=>t.createElement(E,{instance:O.alert}),pagination:M,footerRow:I})},P=[{id:"state",label:"State",renderCell:({data:{alert:{state:y}}})=>t.createElement(D.C,{state:y}),size:"80px"},{id:"labels",label:"Labels",renderCell:({data:{alert:{labels:y,commonLabels:T}}})=>t.createElement(g.m,{labels:y,commonLabels:T,size:"sm"})},{id:"created",label:"Created",renderCell:({data:{alert:{activeAt:y}}})=>t.createElement(t.Fragment,null,y.startsWith("0001")?"-":(0,o.KQ)(y).format("YYYY-MM-DD HH:mm:ss")),size:"150px"},{id:"actions",label:"",renderCell:({data:{alert:y,rule:T}})=>t.createElement(h,{rule:T,instance:y,extensionPointId:s.S.AlertInstanceAction,key:"alert-instance-extension-point"}),size:"40px"}]},30423:(Y,A,e)=>{"use strict";e.d(A,{C:()=>s});var t=e(96540),n=e(23662),o=e(65415);const s=t.memo(({state:r,isPaused:g=!1,size:u="md",muted:d=!1})=>t.createElement(o.O,{state:(0,n.Wy)(r),size:u,muted:d},(0,n.XI)(r)," ",g?" (Paused)":""));s.displayName="AlertStateTag"},51921:(Y,A,e)=>{"use strict";e.d(A,{Z:()=>g});var t=e(96540),n=e(24180),o=e(96374),s=e(55852),r=e(18461);function g({identifier:d,isProvisioned:i,redirectTo:l=!1,onDismiss:f}){const c=(0,n.zy)(),[h,p]=(0,t.useState)(i?"confirm":"redirect");if(h==="redirect"){const m=r.$9(d),a=c.pathname+c.search,v=new URLSearchParams({copyFrom:m,returnTo:l?a:""});return t.createElement(n.rd,{to:"/alerting/new?"+v.toString(),push:!0})}return t.createElement(o.u,{isOpen:h==="confirm",title:"Copy provisioned alert rule",body:t.createElement("div",null,t.createElement("p",null,"The new rule will ",t.createElement("strong",null,"not")," be marked as a provisioned rule."),t.createElement("p",null,"You will need to set a new evaluation group for the copied rule because the original one has been provisioned and cannot be used for rules created in the UI.")),confirmText:"Copy",onConfirm:()=>p("redirect"),onDismiss:f})}const u=t.forwardRef(({text:d,ruleIdentifier:i,isProvisioned:l,className:f},c)=>{const[h,p]=(0,t.useState)(!1);return t.createElement(t.Fragment,null,t.createElement(s.$n,{title:"Copy",className:f,size:"sm",key:"clone",variant:"secondary",icon:"copy",onClick:()=>p(!0),ref:c},d),h&&t.createElement(g,{identifier:i,isProvisioned:l,onDismiss:()=>p(!1)}))});u.displayName="CloneRuleButton"},11536:(Y,A,e)=>{"use strict";e.d(A,{DI:()=>D,Ys:()=>E});var t=e(32196),n=e(96540),o=e(72724),s=e(47232),r=e(40845),g=e(56034),u=e(97814),d=e(33225),i=e(23662),l=e(25968),f=e(69087),c=e(84396),h=e(147),p=e(60996),m=e(52788),a=e(43644),v=e(99938);const E=15,D=({rule:y})=>{const T=(0,r.of)(P),{namespace:{rulesSource:M}}=y,I=(0,d.Hx)(y.annotations);return n.createElement("div",null,n.createElement(h.Q,{rule:y,rulesSource:M,isViewMode:!1}),n.createElement("div",{className:T.wrapper},n.createElement("div",{className:T.leftSide},n.createElement(b,{rule:y}),!!y.labels&&!!Object.keys(y.labels).length&&n.createElement(c.X,{label:"Labels",horizontal:!0},n.createElement(f.m,{labels:y.labels})),n.createElement(a.z,{rulesSource:M,rule:y,annotations:I}),n.createElement(p.Z,{annotations:I})),n.createElement("div",{className:T.rightSide},n.createElement(m.Z,{rulesSource:M,rule:y}))),n.createElement(c.X,{label:"Matching instances",horizontal:!0},n.createElement(v.s,{rule:y,itemsDisplayLimit:E})))},b=({rule:y})=>{let T,M=y.group.interval,I=y.promRule?.lastEvaluation,x=y.promRule?.evaluationTime;return(0,i.i7)(y.rulerRule)||(T=y.rulerRule?.for??"0s"),n.createElement(n.Fragment,null,M&&n.createElement(c.X,{label:"Evaluate",horizontal:!0},"Every ",M),n.createElement(c.X,{label:"Pending period",horizontal:!0},T),I&&!(0,l.mo)(I)&&n.createElement(c.X,{label:"Last evaluation",horizontal:!0},n.createElement(g.m,{placement:"top",content:`${(0,o.LE)(I,{format:"YYYY-MM-DD HH:mm:ss"})}`,theme:"info"},n.createElement("span",null,`${(0,s.KQ)(I).locale("en").fromNow(!0)} ago`))),I&&!(0,l.mo)(I)&&x!==void 0&&n.createElement(c.X,{label:"Evaluation time",horizontal:!0},n.createElement(g.m,{placement:"top",content:`${x}s`,theme:"info"},n.createElement("span",null,(0,u.g)({timeInMs:x*1e3,humanize:!0})))))},P=y=>({wrapper:(0,t.css)`
    display: flex;
    flex-direction: row;

    ${y.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,leftSide:(0,t.css)`
    flex: 1;
  `,rightSide:(0,t.css)`
    ${y.breakpoints.up("md")} {
      padding-left: 90px;
      width: 300px;
    }
  `})},147:(Y,A,e)=>{"use strict";e.d(A,{Q:()=>B});var t=e(32196),n=e(2543),o=e.n(n),s=e(96540),r=e(24180),g=e(40672),u=e(76885),d=e(14778),i=e(32264),l=e(40845),f=e(55852),c=e(10534),h=e(38138),p=e(66864),m=e(83122),a=e(14578),v=e(96374),E=e(3169),D=e(80348),b=e(94822),P=e(19073),y=e(46013),T=e(23770),M=e(98164),I=e(55740),x=e(57220),S=e(56361),O=e(18461),C=e(23662),L=e(3704),U=e(68291),R=e(51921);const B=({rule:N,rulesSource:V,isViewMode:G})=>{const _=(0,l.of)(W),{namespace:K,group:j,rulerRule:k}=N,{StateHistoryModal:Q,showStateHistoryModal:ee}=(0,y.G)(),ae=(0,D.useDispatch)(),Z=(0,r.zy)(),ne=(0,E._2)(),q=(0,d.i)(),[te,re]=(0,s.useState)(),[de,ie]=(0,s.useState)(void 0),ge=(0,x.z2)(V)?V:(0,M.F9)(V.jsonData.alertmanagerUid)?.name,[ve,ye]=(0,P.mh)(N,P.j5.Duplicate),[pe,le]=(0,P.mh)(N,P.j5.Silence),[Me,De]=(0,P.mh)(N,P.j5.Explore),[Re,me]=(0,P.mh)(N,P.j5.Delete),[he,Te]=(0,P.mh)(N,P.j5.Update),Be=[],we=[],Ne=[],Ze=()=>{if(te&&te.rulerRule){const J=O.P1((0,x.EV)(te.namespace.rulesSource),te.namespace.name,te.group.name,te.rulerRule);ae((0,T.KH)(J,{navigateTo:G?"/alerting/list":void 0})),re(void 0)}},st=(0,C.YN)(j),Qe=(0,C.lT)(N.rulerRule)&&!!N.rulerRule.grafana_alert.provenance,ke=(0,C.Z8)(N.promRule)&&N.promRule.state===b.cF.Firing,je=Re&&me,He=he&&Te,Ge=pe&&le&&ge,Oe=ve&&ye&&!st,Ke=()=>(0,S.S2)(V,N),Ee=Z.pathname+Z.search;if((0,x.Eb)(V)&&Me&&De&&!st&&Be.push(s.createElement(f.z9,{size:"sm",key:"explore",variant:"primary",icon:"chart-line",target:"_blank",href:(0,S.Yp)(V,N.query)},"See graph")),N.annotations[I.YH.runbookURL]&&Be.push(s.createElement(f.z9,{size:"sm",key:"runbook",variant:"primary",icon:"book",target:"_blank",href:g.sQ.sanitizeUrl(N.annotations[I.YH.runbookURL])},"View runbook")),N.annotations[I.YH.dashboardUID]){const J=N.annotations[I.YH.dashboardUID];if(J){Be.push(i.$.featureToggles.returnToPrevious?s.createElement(f.z9,{size:"sm",key:"dashboard",variant:"primary",icon:"apps",href:`d/${encodeURIComponent(J)}`,onClick:()=>{q(N.name)}},"Go to dashboard"):s.createElement(f.z9,{size:"sm",key:"dashboard",variant:"primary",icon:"apps",target:"_blank",href:`d/${encodeURIComponent(J)}`},"Go to dashboard"));const oe=N.annotations[I.YH.panelID];oe&&Be.push(s.createElement(f.z9,{size:"sm",key:"panel",variant:"primary",icon:"apps",target:"_blank",href:`d/${encodeURIComponent(J)}?viewPanel=${encodeURIComponent(oe)}`},"Go to panel"))}}if(Ge&&Be.push(s.createElement(f.z9,{size:"sm",key:"silence",icon:"bell-slash",target:"_blank",href:(0,S.t7)(ge,N)},"Silence")),(0,C.lT)(N.rulerRule)&&Be.push(s.createElement(s.Fragment,{key:"history"},s.createElement(f.$n,{size:"sm",icon:"history",onClick:()=>(0,C.lT)(N.rulerRule)&&ee(N.rulerRule)},"Show state history"),Q)),ke&&H()&&Be.push(s.createElement(s.Fragment,{key:"declare-incident"},s.createElement(U.b,{title:N.name,url:Ke()}))),G&&k){const J=(0,x.EV)(V),oe=O.P1(J,K.name,j.name,k);if(He&&(we.push(s.createElement(c.b,{key:"copy",icon:"copy",onClipboardError:ue=>{ne.error("Error while copying URL",ue)},size:"sm",getText:Ke},"Copy link to rule")),!Qe)){const ue=u.kM.renderUrl(`${i.$.appSubUrl}/alerting/${encodeURIComponent(O.$9(oe))}/edit`,{returnTo:Ee});we.push(s.createElement(f.z9,{size:"sm",key:"edit",variant:"secondary",icon:"pen",href:ue},"Edit"))}if((0,C.lT)(k)){const ue=(0,L.c)(`/alerting/${encodeURIComponent(O.$9(oe))}/modify-export`);Ne.push(s.createElement(h.W.Item,{label:"Modify export",icon:"edit",url:ue}))}Oe&&Ne.push(s.createElement(h.W.Item,{label:"Duplicate",icon:"copy",onClick:()=>ie({identifier:oe,isProvisioned:Qe})})),je&&(Ne.push(s.createElement(h.W.Divider,null)),Ne.push(s.createElement(h.W.Item,{key:"delete",label:"Delete",icon:"trash-alt",onClick:()=>re(N)})))}return Be.length||we.length||Ne.length?s.createElement(s.Fragment,null,s.createElement("div",{className:_.wrapper},s.createElement(p.Gy,{width:"auto"},Be.length?Be:s.createElement("div",null)),s.createElement(p.Gy,{width:"auto"},we.length&&we,Ne.length&&s.createElement(m.m,{overlay:s.createElement(h.W,null,Ne.map(J=>s.createElement(s.Fragment,{key:(0,n.uniqueId)("action_")},J)))},s.createElement(f.$n,{variant:"secondary",size:"sm"},"More",s.createElement(a.I,{name:"angle-down"}))))),!!te&&s.createElement(v.u,{isOpen:!0,title:"Delete rule",body:"Deleting this rule will permanently remove it from your alert rule list. Are you sure you want to delete this rule?",confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:Ze,onDismiss:()=>re(void 0)}),de&&s.createElement(R.Z,{identifier:de.identifier,isProvisioned:de.isProvisioned,onDismiss:()=>ie(void 0)})):null};function H(){return!(0,S.y$)()||(0,S.ES)()}const W=N=>({wrapper:(0,t.css)`
    padding: 0 0 ${N.spacing(2)} 0;
    gap: ${N.spacing(1)};
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    flex-wrap: wrap;
    border-bottom: solid 1px ${N.colors.border.medium};
  `})},60996:(Y,A,e)=>{"use strict";e.d(A,{Z:()=>g});var t=e(32196),n=e(96540),o=e(40845),s=e(33225),r=e(71223);function g(d){const i=(0,o.of)(u),{annotations:l}=d,f=(0,s.gO)(l);return l.length===0?null:n.createElement("div",{className:i.annotations},l.map(([c,h])=>n.createElement(r.s,{key:c,annotationKey:c,value:h,valueLink:f.get(c)})))}const u=()=>({annotations:(0,t.css)`
    margin-top: 46px;
  `})},52788:(Y,A,e)=>{"use strict";e.d(A,{Z:()=>i});var t=e(32196),n=e(96540),o=e(19347),s=e(40845),r=e(66718),g=e(57220),u=e(23662),d=e(84396);function i(f){const{rulesSource:c,rule:h}=f,p=(0,s.of)(l),m=(0,n.useMemo)(()=>{if((0,g.Eb)(c))return[{name:c.name,icon:c.meta.info.logos.small}];if((0,u.lT)(h.rulerRule)){const{data:a}=h.rulerRule.grafana_alert,v=a.reduce((E,D)=>{const b=(0,o.l)().getInstanceSettings(D.datasourceUid);return!b||b.uid===r.Uj||(E[b.name]={name:b.name,icon:b.meta.info.logos.small}),E},{});return Object.values(v)}return[]},[h,c]);return m.length===0?null:n.createElement(d.X,{label:"Data source"},m.map(({name:a,icon:v},E)=>n.createElement("div",{key:a},v&&n.createElement(n.Fragment,null,n.createElement("img",{alt:`${a} datasource logo`,className:p.dataSourceIcon,src:v})," "),a)))}function l(f){const c=f.spacing(2);return{dataSourceIcon:(0,t.css)`
      width: ${c};
      height: ${c};
    `}}},43644:(Y,A,e)=>{"use strict";e.d(A,{z:()=>a});var t=e(32196),n=e(96540),o=e(57220),s=e(84396),r=e(28848),g=e(29317),u=e(41781),d=e(72307),i=e(40845),l=e(71713),f=e(69470),c=e(73750);const h=({language:E,expr:D})=>{const b=(0,n.useMemo)(()=>[(0,u.D)({onlyIn:y=>"type"in y&&y.type==="code_block",getSyntax:()=>E},{...r.languages,[E]:E==="logql"?l.Ay:f.Ay})],[E]),P=(0,n.useMemo)(()=>(0,d.mO)(D),[D]);return n.createElement(g.KE,{"data-testid":"expression-editor",plugins:b,value:P})},p=({expression:E,rulesSource:D})=>{const b=(0,i.of)(m);return n.createElement(c.L,{className:(0,t.cx)(b.well,"slate-query-field")},(0,o.Eb)(D)?n.createElement(h,{expr:E,language:D.type===o.ol.Loki?"logql":"promql"}):E)},m=E=>({well:(0,t.css)`
    font-family: ${E.typography.fontFamilyMonospace};
  `});function a(E){const{annotations:D,rulesSource:b,rule:P}=E,y=v();return(0,o.Eb)(b)?n.createElement(s.X,{label:"Expression",horizontal:!0,className:(0,t.cx)({[y.exprRow]:!!D.length})},n.createElement(p,{expression:P.query,rulesSource:b})):null}const v=()=>({exprRow:(0,t.css)`
    margin-bottom: 46px;
  `})},99938:(Y,A,e)=>{"use strict";e.d(A,{s:()=>y});var t=e(32196),n=e(2543),o=e(96540),s=e(24180),r=e(40845),g=e(55852),u=e(53876),d=e(78369),i=e(60029),l=e(94354),f=e(94822);const c=({className:I,onStateFilterChange:x,stateFilter:S,filterType:O,itemPerStateStats:C})=>{const L=(0,r.of)(h),U=N=>function(){return C&&C[N]?o.createElement(d.v,{name:C[N].toFixed(0),colorIndex:9,className:L.tag}):null},R=Object.values(f.Gi).map(N=>({label:N,value:N,component:U(N)})),H=[f.cF.Firing,f.cF.Pending].map(N=>({label:(0,n.capitalize)(N),value:N,component:U(N)})),W=O==="grafana"?R:H;return o.createElement("div",{className:I,"data-testid":"alert-instance-state-filter"},o.createElement(i.J,null,"State"),o.createElement(l.z,{options:W,value:S,onChange:x,onClick:N=>{N===S&&x(void 0)}}))};function h(I){return{tag:(0,t.css)`
      font-size: 11px;
      font-weight: normal;
      padding: ${I.spacing(.25,.5)};
      vertical-align: middle;
      margin-left: ${I.spacing(.5)};
    `}}var p=e(98164),m=e(56361),a=e(64861),v=e(57220),E=e(23662),D=e(2426),b=e(92467);function P(I){const x=(0,r.of)(M),{onClick:S,stats:O}=I;return o.createElement("div",{className:x.footerRow},o.createElement("div",null,"Showing ",O.visibleItemsCount," out of ",O.totalItemsCount," instances"),o.createElement(g.$n,{size:"sm",variant:"secondary","data-testid":"show-all",onClick:S},"Show all ",O.totalItemsCount," alert instances"))}function y(I){const x=(0,s.W6)(),{rule:S,itemsDisplayLimit:O=Number.POSITIVE_INFINITY,pagination:C,enableFiltering:L=!1}=I,{promRule:U,namespace:R,instanceTotals:B}=S,[H,W]=(0,o.useState)(),[N,V]=(0,o.useState)(),[G]=(0,o.useState)(Math.floor(Math.random()*100)),_=`queryString-${G}`,K=(0,r.of)(M),j=(0,v.z2)(R.rulesSource)?v.hY:"prometheus",k=(0,o.useMemo)(()=>(0,E.Z8)(U)&&U.alerts?.length?T(H,N,(0,m.Cp)(a.xB.Importance,U.alerts)):[],[U,N,H]);if(!(0,E.Z8)(U))return null;const Q=k.slice(0,O),ee=(0,n.countBy)(U.alerts,ve=>(0,f.lh)(ve.state)),ae=(0,n.sum)([B.alerting,B.inactive,B.pending,B.nodata]),Z=ae-Q.length,ne={totalItemsCount:ae,visibleItemsCount:Q.length},q=(0,m.w$)(R.rulesSource,I.rule,location.pathname+location.search),te=(0,b.kc)(B),ie=L?()=>V(void 0):()=>x.push(q),ge=Z?o.createElement(P,{stats:ne,onClick:ie}):void 0;return o.createElement(o.Fragment,null,L&&o.createElement("div",{className:(0,t.cx)(K.flexRow,K.spaceBetween)},o.createElement("div",{className:K.flexRow},o.createElement(u.X,{key:_,defaultQueryString:H,onFilterChange:ve=>W(ve)}),o.createElement(c,{filterType:j,stateFilter:N,onStateFilterChange:V,itemPerStateStats:ee}))),!L&&o.createElement("div",{className:K.stats},te),o.createElement(D.D,{rule:S,instances:Q,pagination:C,footerRow:ge}))}function T(I,x,S){let O=[...S];if(I){const C=(0,p.J$)(I||"");O=O.filter(({labels:L})=>(0,p.Av)(L,C))}return x&&(O=O.filter(C=>(0,f.lh)(C.state)===x)),O}const M=I=>({flexRow:(0,t.css)`
      display: flex;
      flex-direction: row;
      align-items: flex-end;
      width: 100%;
      flex-wrap: wrap;
      margin-bottom: ${I.spacing(1)};
      gap: ${I.spacing(1)};
    `,spaceBetween:(0,t.css)`
      justify-content: space-between;
    `,footerRow:(0,t.css)`
      display: flex;
      flex-direction: column;
      gap: ${I.spacing(1)};
      justify-content: space-between;
      align-items: center;
      width: 100%;
    `,instancesContainer:(0,t.css)`
      margin-bottom: ${I.spacing(2)};
    `,stats:(0,t.css)`
      display: flex;
      gap: ${I.spacing(1)};
      padding: ${I.spacing(1,0)};
    `})},41886:(Y,A,e)=>{"use strict";e.d(A,{J:()=>u});var t=e(32196),n=e(96540),o=e(40845),s=e(56034),r=e(14578),g=e(51174);const u=({rule:i})=>{const l=(0,o.of)(d);return(0,g.isErrorHealth)(i.health)?n.createElement(s.m,{theme:"error",content:i.lastError||"No error message provided."},n.createElement("div",{className:l.warn},n.createElement(r.I,{name:"exclamation-triangle"}),n.createElement("span",null,"error"))):n.createElement(n.Fragment,null,i.health)},d=i=>({warn:(0,t.css)`
    display: inline-flex;
    flex-direction: row;
    align-items: center;
    gap: ${i.spacing(1)};

    color: ${i.colors.warning.text};
  `})},16625:(Y,A,e)=>{"use strict";e.d(A,{_:()=>l});var t=e(32196),n=e(96540),o=e(70416),s=e(40845),r=e(67061),g=e(62930),u=e(94822),d=e(23662),i=e(30423);const l=({rule:c,isDeleting:h,isCreating:p,isPaused:m})=>{const a=(0,s.of)(f),{promRule:v}=c,E=(0,n.useMemo)(()=>{if(v&&(0,d.Z8)(v)&&v.alerts?.length&&v.state!==u.cF.Inactive){const D=v.activeAt?new Date(v.activeAt):(0,d.Om)(v);if(D)return n.createElement("span",{title:String(D),className:a.for},"for"," ",(0,o.dU)({start:D,end:new Date},!1))}return null},[v,a]);return h?n.createElement(r.B,{gap:1},n.createElement(g.y,null),"Deleting"):p?n.createElement(r.B,{gap:1},n.createElement(g.y,null),"Creating"):v&&(0,d.Z8)(v)?n.createElement(r.B,{gap:1},n.createElement(i.C,{state:v.state,isPaused:m}),E):v&&(0,d.KB)(v)?n.createElement(n.Fragment,null,"Recording rule"):n.createElement(n.Fragment,null,"n/a")},f=c=>({for:(0,t.css)`
    font-size: ${c.typography.bodySmall.fontSize};
    color: ${c.colors.text.secondary};
    white-space: nowrap;
    padding-top: 2px;
  `})},92467:(Y,A,e)=>{"use strict";e.d(A,{M_:()=>f,j7:()=>c,kc:()=>h});var t=e(2543),n=e.n(t),o=e(55127),s=e.n(o),r=e(96540),g=e(67061),u=e(39938),d=e(54317),i=e(94822);const l={recording:0,alerting:0,[i.cF.Pending]:0,[i.cF.Inactive]:0,paused:0,error:0,nodata:0},f=({namespaces:p})=>{const m={...l};p.forEach(({groups:D})=>{D.forEach(b=>{const P=(0,t.omitBy)(b.totals,t.isUndefined);for(let y in P)m[y]+=P[y]})});const a=h(m),v=!!a.length,E=(0,t.sum)(Object.values(m));return a.unshift(r.createElement(r.Fragment,{key:"total"},E," ",s()("rule",E))),r.createElement(g.B,{direction:"row"},v&&r.createElement("div",null,r.createElement(g.B,{gap:.5},a)))},c=({group:p})=>{const m=p.totals,a=p?.interval,v=h(m),E=!!v.length;return r.createElement(g.B,{direction:"row"},E&&r.createElement("div",null,r.createElement(g.B,{gap:.5},v)),a&&r.createElement(r.Fragment,null,r.createElement("div",null,"|"),r.createElement(u.E,{text:a,icon:"clock-nine",color:"blue"})))};function h(p){const m=[];return p[d.$.Alerting]&&m.push(r.createElement(u.E,{color:"red",key:"firing",text:`${p[d.$.Alerting]} firing`})),p.error&&m.push(r.createElement(u.E,{color:"red",key:"errors",text:`${p.error} errors`})),p.nodata&&m.push(r.createElement(u.E,{color:"blue",key:"nodata",text:`${p.nodata} no data`})),p[d.$.Pending]&&m.push(r.createElement(u.E,{color:"orange",key:"pending",text:`${p[d.$.Pending]} pending`})),p[d.$.Normal]&&p.paused&&m.push(r.createElement(u.E,{color:"green",key:"paused",text:`${p[d.$.Normal]} normal (${p.paused} paused)`})),p[d.$.Normal]&&!p.paused&&m.push(r.createElement(u.E,{color:"green",key:"inactive",text:`${p[d.$.Normal]} normal`})),p.recording&&m.push(r.createElement(u.E,{color:"purple",key:"recording",text:`${p.recording} recording`})),m}},82422:(Y,A,e)=>{"use strict";e.d(A,{s:()=>q});var t=e(32196),n=e(72880),o=e(91e3),s=e(96540),r=e(70416),g=e(47232),u=e(72724),d=e(40845),i=e(56034),l=e(15054),f=e(83903),c=e(55740),h=e(23662),p=e(75591),m=e(10562),a=e(48205),v=e(82437),E=e(16577),D=e(2543),b=e(24180),P=e(55852),y=e(10534),T=e(38138),M=e(67061),I=e(83122),x=e(14578),S=e(96374),O=e(3169),C=e(80348),L=e(19073),U=e(23770),R=e(57220),B=e(56361),H=e(18461),W=e(3704),N=e(51921);const V=de=>window.matchMedia(`(max-width: ${de}px)`).matches,G=({rule:de,rulesSource:ie})=>{const ge=(0,C.useDispatch)(),ve=(0,b.zy)(),ye=(0,O._2)(),pe=(0,d.of)(K),[le,Me]=(0,s.useState)(void 0),{namespace:De,group:Re,rulerRule:me}=de,[he,Te]=(0,s.useState)(),Be=ve.pathname+ve.search,we=_(ve.pathname),Ne=(0,h.lT)(de.rulerRule)&&!!de.rulerRule.grafana_alert.provenance,[Ze,st]=(0,L.mh)(de,L.j5.Update),[Qe,ke]=(0,L.mh)(de,L.j5.Delete),[je,He]=(0,L.mh)(de,L.j5.Duplicate),[Ge,Oe]=(0,L.mh)(de,L.j5.ModifyExport),Ke=Ze&&st,Ee=Qe&&ke,J=je&&He,oe=Ge&&Oe,ue=[],be=[],Le=()=>{if(he&&he.rulerRule){const We=H.P1((0,R.EV)(he.namespace.rulesSource),he.namespace.name,he.group.name,he.rulerRule);ge((0,U.KH)(We,{navigateTo:we?"/alerting/list":void 0})),Te(void 0)}},_e=()=>(0,B.S2)(ie,de),Ve=(0,R.EV)(ie);if(we||ue.push(s.createElement(i.m,{placement:"top",content:"View"},s.createElement(P.z9,{className:pe.button,title:"View",size:"sm",key:"view",variant:"secondary",icon:"eye",href:(0,B.w$)(ie,de,Be)}))),me){const We=H.P1(Ve,De.name,Re.name,me);if(Ke){const $e=(0,W.c)(`/alerting/${encodeURIComponent(H.$9(We))}/edit`,{returnTo:Be});ue.push(s.createElement(i.m,{placement:"top",content:"Edit"},s.createElement(P.z9,{title:"Edit",className:pe.button,size:"sm",key:"edit",variant:"secondary",icon:"pen",href:$e})))}we&&ue.push(s.createElement(y.b,{key:"copy",icon:"copy",onClipboardError:$e=>{ye.error("Error while copying URL",$e)},className:pe.button,size:"sm",getText:_e},"Copy link to rule")),J&&be.push(s.createElement(T.W.Item,{label:"Duplicate",icon:"copy",onClick:()=>Me({identifier:We,isProvisioned:Ne})})),oe&&be.push(s.createElement(T.W.Item,{label:"Modify export",icon:"edit",url:(0,W.c)(`/alerting/${encodeURIComponent(H.$9(We))}/modify-export`,{returnTo:ve.pathname+ve.search})})),Ee&&be.push(s.createElement(T.W.Item,{label:"Delete",icon:"trash-alt",onClick:()=>Te(de)}))}return ue.length||be.length?s.createElement(s.Fragment,null,s.createElement(M.B,{gap:1},ue.map((We,$e)=>s.createElement(s.Fragment,{key:$e},We)),be.length>0&&s.createElement(I.m,{overlay:s.createElement(T.W,null,be.map(We=>s.createElement(s.Fragment,{key:(0,D.uniqueId)("action_")},We)))},s.createElement(P.$n,{variant:"secondary",size:"sm"},"More",s.createElement(x.I,{name:"angle-down"})))),!!he&&s.createElement(S.u,{isOpen:!0,title:"Delete rule",body:s.createElement("div",null,s.createElement("p",null,'Deleting "',s.createElement("strong",null,he.name),'" will permanently remove it from your alert rule list.'),s.createElement("p",null,"Are you sure you want to delete this rule?")),confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:Le,onDismiss:()=>Te(void 0)}),le&&s.createElement(N.Z,{identifier:le.identifier,isProvisioned:le.isProvisioned,onDismiss:()=>Me(void 0)})):null};function _(de){return de.endsWith("/view")}const K=de=>({button:(0,t.css)`
    padding: 0 ${de.spacing(2)};
  `});var j=e(32264),k=e(82775);function Q({rule:de}){const ie=(0,d.of)(ee),{exceedsLimit:ge}=(0,s.useMemo)(()=>(0,k.q)(de.group.interval),[de.group.interval]);return ge?s.createElement(i.m,{theme:"error",content:s.createElement("div",null,"A minimum evaluation interval of"," ",s.createElement("span",{className:ie.globalLimitValue},j.$.unifiedAlerting.minInterval)," has been configured in Grafana and will be used instead of the ",de.group.interval," interval configured for the Rule Group.")},s.createElement(x.I,{name:"stopwatch-slash",className:ie.icon})):null}function ee(de){return{globalLimitValue:(0,t.css)`
      font-weight: ${de.typography.fontWeightBold};
    `,icon:(0,t.css)`
      fill: ${de.colors.warning.text};
    `}}var ae=e(11536),Z=e(41886),ne=e(16625);const q=({rules:de,className:ie,showGuidelines:ge=!1,emptyMessage:ve="No rules found.",showGroupColumn:ye=!1,showSummaryColumn:pe=!1,showNextEvaluationColumn:le=!1})=>{const Me=(0,d.of)(te),De=(0,t.cx)(Me.wrapper,ie,{[Me.wrapperMargin]:ge}),Re=(0,s.useMemo)(()=>de.map((Te,Be)=>({id:`${Te.namespace.name}-${Te.group.name}-${Te.name}-${Be}`,data:Te})),[de]),me=re(pe,ye,le);if(!de.length)return s.createElement("div",{className:(0,t.cx)(De,Me.emptyMessage)},ve);const he=ge?m.B:p.E;return s.createElement("div",{className:De,"data-testid":"rules-table"},s.createElement(he,{cols:me,isExpandable:!0,items:Re,renderExpandedContent:({data:Te})=>s.createElement(ae.DI,{rule:Te}),pagination:{itemsPerPage:l.FG},paginationStyles:Me.pagination}))},te=de=>({wrapperMargin:(0,t.css)`
    ${de.breakpoints.up("md")} {
      margin-left: 36px;
    }
  `,emptyMessage:(0,t.css)`
    padding: ${de.spacing(1)};
  `,wrapper:(0,t.css)`
    width: auto;
    border-radius: ${de.shape.radius.default};
  `,pagination:(0,t.css)`
    display: flex;
    margin: 0;
    padding-top: ${de.spacing(1)};
    padding-bottom: ${de.spacing(.25)};
    justify-content: center;
    border-left: 1px solid ${de.colors.border.medium};
    border-right: 1px solid ${de.colors.border.medium};
    border-bottom: 1px solid ${de.colors.border.medium};
  `});function re(de,ie,ge){const{hasRuler:ve,rulerRulesLoaded:ye}=(0,f.y)(),pe=(0,s.useCallback)(le=>{const Me=le.promRule?.lastEvaluation&&(0,r.vd)(le.promRule.lastEvaluation),De=le.group.interval&&(0,r.di)(le.group.interval);if(!Me||!De||(0,h.HH)(le))return;const Re=(0,r.E9)(le.group.interval),me=Date.parse(le.promRule?.lastEvaluation||""),he=(0,r.Ri)(me,Re);return(0,n.Y)(he,new Date)?{humanized:`within ${(0,o.a)(Re)}`,fullDate:`within ${(0,o.a)(Re)}`}:{humanized:`in ${(0,g.KQ)(he).locale("en").fromNow(!0)}`,fullDate:(0,u.LE)(he,{format:"YYYY-MM-DD HH:mm:ss"})}},[]);return(0,s.useMemo)(()=>{const le=[{id:"state",label:"State",renderCell:({data:Me})=>{const{namespace:De}=Me,{rulesSource:Re}=De,{promRule:me,rulerRule:he}=Me,Te=!!(ve(Re)&&ye(Re)&&me&&!he),Be=!!(ve(Re)&&ye(Re)&&he&&!me),we=(0,h.HH)(Me);return s.createElement(ne._,{rule:Me,isDeleting:Te,isCreating:Be,isPaused:we})},size:"165px"},{id:"name",label:"Name",renderCell:({data:Me})=>Me.name,size:ge?4:5},{id:"provisioned",label:"",renderCell:({data:Me})=>{const De=Me.rulerRule;return(0,h.lT)(De)&&De.grafana_alert.provenance?s.createElement(a.rS,null):null},size:"100px"},{id:"warnings",label:"",renderCell:({data:Me})=>s.createElement(Q,{rule:Me}),size:"45px"},{id:"health",label:"Health",renderCell:({data:{promRule:Me,group:De}})=>Me?s.createElement(Z.J,{rule:Me}):null,size:"75px"}];return de&&le.push({id:"summary",label:"Summary",renderCell:({data:Me})=>s.createElement(E.Y,{input:Me.annotations[c.YH.summary]??""}),size:ge?4:5}),ge&&le.push({id:"nextEvaluation",label:"Next evaluation",renderCell:({data:Me})=>{const De=pe(Me);return De&&s.createElement(i.m,{placement:"top",content:`${De?.fullDate}`,theme:"info"},s.createElement("span",null,De?.humanized))},size:2}),ie&&le.push({id:"group",label:"Group",renderCell:({data:Me})=>{const{namespace:De,group:Re}=Me;return Re.name==="default"?s.createElement(v.c,{namespace:De.name}):s.createElement(v.c,{namespace:De.name,group:Re.name})},size:5}),le.push({id:"actions",label:"Actions",renderCell:({data:Me})=>s.createElement(G,{rule:Me,rulesSource:Me.namespace.rulesSource}),size:"200px"}),le},[de,ie,ge,ve,ye,pe])}},19073:(Y,A,e)=>{"use strict";e.d(A,{Ej:()=>v,Hl:()=>T,L7:()=>y,QI:()=>f,RY:()=>h,e2:()=>a,iI:()=>P,j5:()=>c,mh:()=>E});var t=e(96540),n=e(16233),o=e(60021),s=e(80348),r=e(82843),g=e(70383),u=e(75471),d=e(57220),i=e(23662),l=e(97009),f=(x=>(x.ViewExternalConfiguration="view-external-configuration",x.UpdateExternalConfiguration="update-external-configuration",x.CreateContactPoint="create-contact-point",x.ViewContactPoint="view-contact-point",x.UpdateContactPoint="edit-contact-points",x.DeleteContactPoint="delete-contact-point",x.ExportContactPoint="export-contact-point",x.CreateNotificationTemplate="create-notification-template",x.ViewNotificationTemplate="view-notification-template",x.UpdateNotificationTemplate="edit-notification-template",x.DeleteNotificationTemplate="delete-notification-template",x.DecryptSecrets="decrypt-secrets",x.CreateNotificationPolicy="create-notification-policy",x.ViewNotificationPolicyTree="view-notification-policy-tree",x.UpdateNotificationPolicyTree="update-notification-policy-tree",x.DeleteNotificationPolicy="delete-notification-policy",x.ExportNotificationPolicies="export-notification-policies",x.ViewAutogeneratedPolicyTree="view-autogenerated-policy-tree",x.CreateSilence="create-silence",x.ViewSilence="view-silence",x.UpdateSilence="update-silence",x.ViewMuteTiming="view-mute-timing",x.CreateMuteTiming="create-mute-timing",x.UpdateMuteTiming="update-mute-timing",x.DeleteMuteTiming="delete-mute-timing",x.ExportMuteTimings="export-mute-timings",x))(f||{}),c=(x=>(x.Duplicate="duplicate-alert-rule",x.View="view-alert-rule",x.Update="update-alert-rule",x.Delete="delete-alert-rule",x.Explore="explore-alert-rule",x.Silence="silence-alert-rule",x.ModifyExport="modify-export-rule",x))(c||{}),h=(x=>(x.CreateAlertRule="create-alert-rule",x.ViewAlertRule="view-alert-rule",x.UpdateAlertRule="update-alert-rule",x.DeleteAlertRule="delete-alert-rule",x.ExportGrafanaManagedRules="export-grafana-managed-rules",x.CreateExternalAlertRule="create-external-alert-rule",x.ViewExternalAlertRule="view-external-alert-rule",x.UpdateExternalAlertRule="update-external-alert-rule",x.DeleteExternalAlertRule="delete-external-alert-rule",x))(h||{});const p=!0,m=!1,a=()=>({["create-alert-rule"]:I(p,s.AccessControlAction.AlertingRuleCreate),["view-alert-rule"]:I(p,s.AccessControlAction.AlertingRuleRead),["update-alert-rule"]:I(p,s.AccessControlAction.AlertingRuleUpdate),["delete-alert-rule"]:I(p,s.AccessControlAction.AlertingRuleDelete),["export-grafana-managed-rules"]:I(p,s.AccessControlAction.AlertingRuleRead),["create-external-alert-rule"]:I(p,s.AccessControlAction.AlertingRuleExternalWrite),["view-external-alert-rule"]:I(p,s.AccessControlAction.AlertingRuleExternalRead),["update-external-alert-rule"]:I(p,s.AccessControlAction.AlertingRuleExternalWrite),["delete-external-alert-rule"]:I(p,s.AccessControlAction.AlertingRuleExternalWrite)}),v=x=>a()[x];function E(x,S){const O=b(x);return(0,t.useMemo)(()=>O[S],[O,S])}function D(x,S){const O=b(x);return useMemo(()=>S.map(C=>O[C]),[O,S])}function b(x){const S=x.namespace.rulesSource,O=typeof S=="string"?S:S.name,C=(0,i.lT)(x.rulerRule)&&!!x.rulerRule.grafana_alert.provenance,L=(0,i.YN)(x.group),U=(0,i.lT)(x.rulerRule),R=C||L,{isEditable:B,isRemovable:H,isRulerAvailable:W=!1,loading:N}=(0,l.g)(O,x.rulerRule),[V,G]=v("export-grafana-managed-rules"),_=N?m:W,K=R?m:_,j=(0,u.Wd)(O),k=M(S);return{["duplicate-alert-rule"]:I(_,j.create),["view-alert-rule"]:I(p,j.read),["update-alert-rule"]:[K,B??!1],["delete-alert-rule"]:[K,H??!1],["explore-alert-rule"]:I(p,s.AccessControlAction.DataSourcesExplore),["silence-alert-rule"]:k,["modify-export-rule"]:[U,G]}}function P(){const{selectedAlertmanager:x,hasConfigurationAPI:S,isGrafanaAlertmanager:O}=(0,g.VI)(),C=(0,u.lV)(x),L=(0,u.jy)(x),U=n.TP.hasRole("Admin")||n.TP.isGrafanaAdmin;return{["view-external-configuration"]:I(p,s.AccessControlAction.AlertingNotificationsExternalRead),["update-external-configuration"]:I(S,s.AccessControlAction.AlertingNotificationsExternalWrite),["create-contact-point"]:I(S,C.create),["view-contact-point"]:I(p,C.read),["edit-contact-points"]:I(S,C.update),["delete-contact-point"]:I(S,C.delete),["export-contact-point"]:I(O,C.read),["create-notification-template"]:I(S,C.create),["view-notification-template"]:I(p,C.read),["edit-notification-template"]:I(S,C.update),["delete-notification-template"]:I(S,C.delete),["create-notification-policy"]:I(S,C.create),["view-notification-policy-tree"]:I(p,C.read),["update-notification-policy-tree"]:I(S,C.update),["delete-notification-policy"]:I(S,C.delete),["export-notification-policies"]:I(O,C.read),["decrypt-secrets"]:I(O,C.provisioning.readSecrets),["view-autogenerated-policy-tree"]:[O,U],["create-silence"]:I(p,L.create),["view-silence"]:I(p,L.read),["update-silence"]:I(p,L.update),["create-mute-timing"]:I(S,C.create),["view-mute-timing"]:I(p,C.read),["update-mute-timing"]:I(S,C.update),["delete-mute-timing"]:I(S,C.delete),["export-mute-timings"]:I(O,C.read)}}function y(x){const S=P();return(0,t.useMemo)(()=>S[x],[S,x])}function T(x){const S=P();return(0,t.useMemo)(()=>x.map(O=>S[O]),[S,x])}function M(x){const S=x===d.hY,{useGetAlertmanagerChoiceStatusQuery:O}=r.m,{currentData:C,isLoading:L}=O(void 0,{skip:!S});if(!S||L)return[!1,!1];const U=C?.alertmanagersChoice===o.nA.External,R=C?.alertmanagersChoice===o.nA.All;return I(!U||R,s.AccessControlAction.AlertingInstanceCreate)}const I=(x,S)=>[x,n.TP.hasPermission(S)]},62190:(Y,A,e)=>{"use strict";e.d(A,{W:()=>o});var t=e(96540),n=e(57220);function o(s){return(0,t.useMemo)(()=>(0,n.sq)(s),[s])}},36135:(Y,A,e)=>{"use strict";e.d(A,{g:()=>s});var t=e(96540),n=e(19347),o=e(26657);function s(r){return{allDataSourcesAvailable:(0,t.useMemo)(()=>r.filter(u=>!(0,o.s9)(u.datasourceUid)).every(u=>!!(0,n.l)().getInstanceSettings(u.datasourceUid)),[r])}}},730:(Y,A,e)=>{"use strict";e.d(A,{O3:()=>b,ZU:()=>v,we:()=>p});var t=e(96540),n=e(16817),o=e(80348),s=e(79938),r=e(77583),g=e(23770),u=e(57220),d=e(88467),i=e(18461),l=e(23662),f=e(9518),c=e(61410);function h(P,y){const T=m(y),M=useCombinedRuleNamespaces(y),I=useMemo(()=>{if(!P||!y||M.length===0)return[];const x=[];for(const S of M)for(const O of S.groups)for(const C of O.rules)C.name===P&&x.push(C);return x},[P,y,M]);return{...T,result:I}}function p(P,y,T){const M=(0,u.oh)(y),{dsFeatures:I,isLoadingDsFeatures:x}=b(y),{currentData:S=[],isLoading:O,error:C}=s.hK.endpoints.prometheusRuleNamespaces.useQuery({ruleSourceName:y,ruleName:P,namespace:T?.namespace,groupName:T?.groupName}),[L]=s.hK.endpoints.rulerRuleGroup.useLazyQuery(),{loading:U,error:R,value:B}=(0,n.A)(async()=>{if(!M)throw new Error("Unable to obtain data source settings");if(C)throw new Error("Unable to obtain Prometheus rules");const H=[];if(I?.rulerConfig){const V=I.rulerConfig,G=S.map(_=>_.groups.map(K=>({namespace:_,group:K}))).flat();await Promise.allSettled(G.map(async _=>{const K=await L({rulerConfig:V,namespace:_.namespace.name,group:_.group.name}).unwrap();H.push(K)}))}return S.map(V=>(0,f.O6)(M,V,H)).flatMap(V=>V.groups.flatMap(G=>G.rules))},[M,I,O,C,S,L]);return{loading:x||U,error:R,rules:B}}function m(P,y){const T=useDispatch(),M=useUnifiedAlertingSelector(C=>C.promRules),I=a(P,M),x=useUnifiedAlertingSelector(C=>C.rulerRules),S=a(P,x),{loading:O}=useAsync(async()=>{P&&await T(fetchPromAndRulerRulesAction({rulesSourceName:P,identifier:y}))},[T,P]);return{loading:O,error:I.error??isRulerNotSupportedResponse(S)?void 0:S.error,dispatched:I.dispatched&&S.dispatched}}function a(P,y){if(!P)return initialAsyncRequestState;const T=y[P];return T||initialAsyncRequestState}function v({ruleIdentifier:P}){const{ruleSourceName:y}=P,T=(0,u.oh)(y),{dsFeatures:M,isLoadingDsFeatures:I}=b(y),{currentData:x,isLoading:S,error:O}=s.hK.endpoints.prometheusRuleNamespaces.useQuery({ruleSourceName:P.ruleSourceName,namespace:(0,l.Mj)(P)||(0,l.X4)(P)?P.namespace:void 0,groupName:(0,l.Mj)(P)||(0,l.X4)(P)?P.groupName:void 0,ruleName:(0,l.Mj)(P)||(0,l.X4)(P)?P.ruleName:void 0}),[C,{currentData:L,isLoading:U,error:R}]=s.hK.endpoints.rulerRuleGroup.useLazyQuery(),[B,{currentData:H,isLoading:W,error:N}]=s.hK.endpoints.rulerRules.useLazyQuery();(0,t.useEffect)(()=>{M?.rulerConfig&&(M.rulerConfig&&(0,l.X4)(P)?C({rulerConfig:M.rulerConfig,namespace:P.namespace,group:P.groupName}):(0,l.A4)(P)&&B({rulerConfig:M.rulerConfig}))},[M,C,B,P]);const V=(0,t.useMemo)(()=>{if(x){if((0,l.A4)(P)){const G=(0,f.Ph)("grafana",x,H);for(const _ of G)for(const K of _.groups)for(const j of K.rules){const k=i.UP(y,j);if(i.LC(k,P))return j}}if(T&&x.length>0&&((0,l.X4)(P)||(0,l.Mj)(P))){const G=x.map(_=>(0,f.O6)(T,_,L?[L]:[]));for(const _ of G)for(const K of _.groups)for(const j of K.rules){const k=i.UP(y,j);if(i.LC(k,P))return j}}}},[P,y,x,L,H,T]);return{loading:I||S||U||W,error:O??R??N,result:V}}const D={rulerConfig:{dataSourceName:u.hY,apiVersion:"legacy"}};function b(P){const y=(0,u.z2)(P),{currentData:T,isLoading:M}=r.L.endpoints.discoverDsFeatures.useQuery({rulesSourceName:P},{skip:y});return y?{isLoadingDsFeatures:!1,dsFeatures:D}:{isLoadingDsFeatures:M,dsFeatures:T}}},9518:(Y,A,e)=>{"use strict";e.d(A,{Jr:()=>h,NW:()=>E,O6:()=>f,Ph:()=>l,Tj:()=>D,Ug:()=>v,dy:()=>i});var t=e(2543),n=e.n(t),o=e(96540),s=e(54317),r=e(94822),g=e(57220),u=e(23662),d=e(61410);function i(x,S){const O=(0,d.$)(R=>R.promRules),C=(0,d.$)(R=>R.rulerRules),L=(0,o.useRef)({}),U=(0,o.useMemo)(()=>{if(x){const R=(0,g.Zw)(x);if(!R)throw new Error(`Unknown rules source: ${x}`);return[R]}return(0,g.lS)()},[x]);return(0,o.useMemo)(()=>U.map(R=>{const B=(0,g.Eb)(R)?R.name:R,H=C[B]?.result;let W=O[B]?.result;B===g.hY&&S&&(W=S);const N=L.current[B];if(N&&N.promRules===W&&N.rulerRules===H)return N.result;const V={};Object.entries(H||{}).forEach(([_,K])=>{const j={rulesSource:R,name:_,groups:[]};(0,u.lT)(K[0].rules[0])&&(j.uid=K[0].rules[0].grafana_alert.namespace_uid),V[_]=j,m(j,K)}),W?.forEach(({name:_,groups:K})=>{const j=V[_]=V[_]||{rulesSource:R,name:_,groups:[]};a(j,K)});const G=Object.values(V);return L.current[B]={promRules:W,rulerRules:H,result:G},G}).flat(),[O,C,U,S])}function l(x,S,O){const C={};return Object.entries(O||{}).forEach(([L,U])=>{const R={rulesSource:x,name:L,groups:[]};C[L]=R,m(R,U)}),S?.forEach(({name:L,groups:U})=>{const R=C[L]=C[L]||{rulesSource:x,name:L,groups:[]};a(R,U)}),Object.values(C)}function f(x,S,O){const C={rulesSource:x,name:S.name,groups:[]};return m(C,O),a(C,S.groups),C.groups.forEach(L=>{L.rules=L.rules.filter(U=>U.promRule)}),C}function c(x,S,O){return m(x,O),a(x,S),x}function h(x){return x.map(S=>{const O={...S,groups:[]};return O.groups.push({name:"default",rules:p(S.groups.flatMap(C=>C.rules)),totals:b(S.groups)}),O})}function p(x){return x.sort((S,O)=>S.name.localeCompare(O.name))}function m(x,S=[]){x.groups=S.map(O=>{const C=O.rules.filter(R=>(0,u.i7)(R)).length,L=O.rules.filter(R=>(0,u.lT)(R)&&R.grafana_alert.is_paused).length,U={name:O.name,interval:O.interval,source_tenants:O.source_tenants,rules:[],totals:{paused:L,recording:C}};return U.rules=O.rules.map(R=>y(R,x,U)),U})}function a(x,S){const O=new Map;x.groups.forEach(C=>O.set(C.name,C)),S.forEach(C=>{let L=O.get(C.name);L||(L={name:C.name,rules:[],totals:D(C)},x.groups.push(L),O.set(C.name,L)),L.totals={...L.totals,...D(C)};const U=new Map;L.rules.forEach(R=>{const B=U.get(R.name);B?B.push(R):U.set(R.name,[R])}),(C.rules??[]).forEach(R=>{const B=T(R,U,x.rulesSource);B?(B.promRule=R,B.instanceTotals=(0,u.Z8)(R)?v(R):{},B.filteredInstanceTotals=(0,u.Z8)(R)?E(R):{}):L.rules.push(P(R,x,L))})})}function v(x){const S=(0,t.countBy)(x.alerts,"state");if(x.totals){const{normal:O,...C}=x.totals;return{...C,inactive:O}}return{alerting:S[s.$.Alerting]||S.firing,pending:S[s.$.Pending],inactive:S[s.$.Normal],nodata:S[s.$.NoData],error:S[s.$.Error]||S.err||void 0}}function E(x){if(x.totalsFiltered){const{normal:S,...O}=x.totalsFiltered;return{...O,inactive:S}}return{}}function D(x){if(x.totals){const{firing:L,...U}=x.totals;return{...U,alerting:L}}const S=(0,t.countBy)(x.rules,L=>(0,u.Z8)(L)&&L.state),O=(0,t.countBy)(x.rules,L=>L.health),C=x.rules.filter(L=>(0,u.KB)(L)).length;return{alerting:S[r.cF.Firing],error:O.error,nodata:O.nodata,inactive:S[r.cF.Inactive],pending:S[r.cF.Pending],recording:C}}function b(x){const S={};return x.forEach(O=>{const C=O.totals;Object.entries(C).forEach(([L,U])=>{S[L]||(S[L]=0),S[L]+=U})}),S}function P(x,S,O){return{name:x.name,query:x.query,labels:x.labels||{},annotations:(0,u.Z8)(x)?x.annotations||{}:{},promRule:x,namespace:S,group:O,instanceTotals:(0,u.Z8)(x)?v(x):{},filteredInstanceTotals:(0,u.Z8)(x)?E(x):{}}}function y(x,S,O){return(0,u.$y)(x)?{name:x.alert,query:x.expr,labels:x.labels||{},annotations:x.annotations||{},rulerRule:x,namespace:S,group:O,instanceTotals:{},filteredInstanceTotals:{}}:(0,u.i7)(x)?{name:x.record,query:x.expr,labels:x.labels||{},annotations:{},rulerRule:x,namespace:S,group:O,instanceTotals:{},filteredInstanceTotals:{}}:{name:x.grafana_alert.title,query:"",labels:x.labels||{},annotations:x.annotations||{},rulerRule:x,namespace:S,group:O,instanceTotals:{},filteredInstanceTotals:{}}}function T(x,S,O){const C=S.get(x.name);if(!C)return;if((0,g.z2)(O))return C[0];const L=C.find(R=>!R.promRule&&M(R,x,!0));if(L)return L;const U=C.find(R=>!R.promRule&&M(R,x,!1));if(U)return U}function M(x,S,O=!0){return x.name===S.name?(0,t.isEqual)([O?I(x.query):"",x.labels,x.annotations],[O?I(S.query):"",S.labels||{},(0,u.Z8)(S)?S.annotations||{}:{}]):!1}function I(x){return x.length>1&&x[0]==="("&&x[x.length-1]===")"&&(x=x.slice(1,-1)),x=x.replace(/\s|\n/g,""),x.split("").sort().join("")}},11167:(Y,A,e)=>{"use strict";e.d(A,{a:()=>g});var t=e(96540),n=e(80348),o=e(23770),s=e(88467),r=e(61410);function g(u){const d=(0,n.useDispatch)(),i=(0,r.$)(l=>l.folders);if((0,t.useEffect)(()=>{u&&d((0,o.Om)(u))},[d,u]),u){const l=i[u]||s.jA;return{folder:l.result,loading:l.loading}}return{loading:!1}}},83903:(Y,A,e)=>{"use strict";e.d(A,{y:()=>s});var t=e(96540),n=e(57220),o=e(61410);function s(){const r=(0,o.$)(d=>d.rulerRules),g=(0,t.useCallback)(d=>{const i=typeof d=="string"?d:d.name;return i===n.hY||!!r[i]?.result},[r]),u=(0,t.useCallback)(d=>{const i=(0,n.EV)(d);return!!r[i]?.result},[r]);return{hasRuler:g,rulerRulesLoaded:u}}},97009:(Y,A,e)=>{"use strict";e.d(A,{g:()=>u});var t=e(16233),n=e(77583),o=e(75471),s=e(23662),r=e(11167),g=e(61410);function u(d,i){const l=(0,g.$)(b=>b.dataSources),{currentData:f,isLoading:c}=n.L.endpoints.discoverDsFeatures.useQuery({rulesSourceName:d}),h=i&&(0,s.lT)(i)?i.grafana_alert.namespace_uid:void 0,p=(0,o.Wd)(d),{folder:m,loading:a}=(0,r.a)(h);if(!i)return{isEditable:!1,isRemovable:!1,loading:!1};if((0,s.lT)(i)){if(!h)throw new Error(`Rule ${i.grafana_alert.title} does not have a folder uid, cannot determine if it is editable.`);if(!m)return{isRulerAvailable:!0,isEditable:!1,isRemovable:!1,loading:a};const b=t.TP.hasPermissionInMetadata(p.update,m),P=t.TP.hasPermissionInMetadata(p.delete,m);return{isRulerAvailable:!0,isEditable:b,isRemovable:P,loading:a||c}}const v=!!l[d]?.result?.rulerConfig||!!f?.rulerConfig,E=t.TP.hasPermission(p.update),D=t.TP.hasPermission(p.delete);return{isRulerAvailable:v,isEditable:E&&v,isRemovable:D&&v,loading:c||l[d]?.loading}}},98439:(Y,A,e)=>{"use strict";e.d(A,{W:()=>s});var t=e(2543),n=e.n(t),o=e(96540);function s(r,g=1,u){const[d,i]=(0,o.useState)(g),l=(0,o.useMemo)(()=>(0,t.chunk)(r,u),[r,u]),f=l.length,c=l[d-1]??[],h=(d-1)*u+1,p=(0,t.clamp)(d*u,r.length),m=(0,o.useCallback)(E=>{i((0,t.clamp)(E,1,l.length))},[i,l]),a=(0,o.useCallback)(()=>m(d+1),[d,m]),v=(0,o.useCallback)(()=>m(d-1),[d,m]);return(0,o.useEffect)(()=>i(1),[f]),{page:d,onPageChange:m,numberOfPages:f,pageItems:c,pageStart:h,pageEnd:p,nextPage:a,previousPage:v}}},27747:(Y,A,e)=>{"use strict";e.d(A,{S:()=>i});var t=e(96540),n=e(80348),o=e(23770),s=e(55740),r=e(57220),g=e(88467),u=e(9518),d=e(61410);function i({dashboardUID:l,panelId:f,poll:c=!1}){const h=(0,n.useDispatch)(),p=(0,d.$)(b=>b.promRules[r.hY])??g.jA,m=(0,d.$)(b=>b.rulerRules[r.hY])??g.jA;(0,t.useEffect)(()=>{const b=()=>{h((0,o.mB)({rulesSourceName:r.hY,filter:{dashboardUID:l,panelId:f}})),h((0,o.eB)({rulesSourceName:r.hY,filter:{dashboardUID:l,panelId:f}}))};if(b(),c){const P=setInterval(b,s.HH);return()=>{clearInterval(P)}}return()=>{}},[h,c,f,l]);const a=p.loading||m.loading,v=[p.error,m.error].filter(b=>!!b),E=(0,u.dy)(r.hY);return{rules:(0,t.useMemo)(()=>E.flatMap(b=>b.groups).flatMap(b=>b.rules).filter(b=>b.annotations[s.YH.dashboardUID]===l&&b.annotations[s.YH.panelID]===String(f)),[E,l,f]),errors:v,loading:a}}},12210:(Y,A,e)=>{"use strict";e.d(A,{_:()=>o});var t=e(16817),n=e(27716);function o(s){const{loading:r,error:g,value:u}=(0,t.A)(()=>(0,n.x)(s,{showErrorAlert:!1})),d=u&&!g&&!r,i=u?.enabled;return r&&!u?{loading:!0}:!d||!i?{loading:!1,installed:!1}:{loading:r,installed:!0,settings:u}}},46013:(Y,A,e)=>{"use strict";e.d(A,{G:()=>i,Q:()=>d});var t=e(32196),n=e(96540),o=e(32264),s=e(40845),r=e(37390);const g=(0,n.lazy)(()=>e.e(7409).then(e.bind(e,87409))),u=(0,n.lazy)(()=>e.e(1121).then(e.bind(e,31121)));var d=(f=>(f.Loki="loki",f.Annotations="annotations",f))(d||{});function i(){const[f,c]=(0,n.useState)(!1),[h,p]=(0,n.useState)(),m=(0,s.of)(l),a=o.$.unifiedAlerting.alertStateHistoryBackend,v=o.$.unifiedAlerting.alertStateHistoryPrimary,D=[a,v].some(T=>T==="loki")?"loki":"annotations",b=(0,n.useCallback)(()=>{p(void 0),c(!1)},[]),P=(0,n.useCallback)(T=>{p(T),c(!0)},[]);return{StateHistoryModal:(0,n.useMemo)(()=>h?n.createElement(r.a,{isOpen:f,onDismiss:b,closeOnBackdropClick:!0,closeOnEscape:!0,title:"State history",className:m.modal,contentClassName:m.modalContent},n.createElement(n.Suspense,{fallback:"Loading..."},D==="loki"&&n.createElement(u,{ruleUID:h.grafana_alert.uid}),D==="annotations"&&n.createElement(g,{alertId:h.grafana_alert.id??""}))):null,[h,f,b,D,m]),showStateHistoryModal:P,hideStateHistoryModal:b}}const l=f=>({modal:(0,t.css)`
    width: 80%;
    height: 80%;
    min-width: 800px;
  `,modalContent:(0,t.css)`
    height: 100%;
    width: 100%;
    padding: ${f.spacing(2)};
  `})},39964:(Y,A,e)=>{"use strict";e.d(A,{l:()=>s});var t=e(96540),n=e(24180),o=e(12131);function s(){const{search:r}=(0,n.zy)(),g=(0,t.useMemo)(()=>new URLSearchParams(r),[r]),u=(0,t.useCallback)((d,i)=>{o.Ny.partial(d,i)},[]);return[g,u]}},61410:(Y,A,e)=>{"use strict";e.d(A,{$:()=>o});var t=e(1081),n=e(80348);function o(s,r){return(0,n.useSelector)((0,t.Mz)(g=>g.unifiedAlerting,g=>s(g)),r)}},81156:(Y,A,e)=>{"use strict";e.d(A,{A:()=>c});var t=e(2543),n=e.n(t),o=e(96540),s=e(42941),r=e(32264),g=e(72109),u=e(42418),d=e(82762),i=e(28389),l=e(56361);const f=!r.$.unifiedAlertingEnabled;function c({dashboard:m}){if(f)return null;const a=h(m);return(0,t.isEmpty)(a)?null:m.uid?o.createElement(p,{dashboardUid:m.uid,panels:a}):null}function h(m){return m.panels?.filter(v=>{const E="alert"in v,D="options"in v&&v.options?"alertThreshold"in v.options:!1;return E||D})??[]}function p({dashboardUid:m,panels:a}){const[v,E]=(0,s.A)(!1),D=[{id:"id",header:"ID"},{id:"title",header:"Title",cell:b=>o.createElement(g.Y,{external:!0,href:(0,l.D2)(m,String(b.row.id),{editPanel:b.row.id,tab:"alert"})},b.value)}];return o.createElement(u.F,{severity:"warning",title:"Legacy alert rules are deprecated"},o.createElement("p",null,"You have legacy alert rules in this dashboard that were deprecated in Grafana 11 and are no longer supported."),o.createElement("p",null,"Refer to"," ",o.createElement(g.Y,{href:"https://grafana.com/docs/grafana/latest/alerting/set-up/migrating-alerts/",external:!0},"our documentation")," ","on how to migrate legacy alert rules and how to import and export using Grafana Alerting."),o.createElement(d.S,{label:"List of panels using legacy alerts",collapsible:!0,isOpen:v,onToggle:E},o.createElement(i.j,{columns:D,data:a,getRowId:b=>String(b.id),pageSize:5})))}},28475:(Y,A,e)=>{"use strict";e.d(A,{Jc:()=>V,kL:()=>_,XY:()=>G});var t=e(94822),n=e(23662);const o=1,s=2,r=3,g=4,u=5,d=6,i=7,l=8,f=9,c=10,h=11,p=12,m=13,a=0,v=1,E=2,D=3,b=4,P=5,y=6,T=7,M=8;var I=e(2543),x=e(48820);const S=x.U1.deserialize({version:14,states:"!vOQOPOOOuOPO'#CiOOOO'#Ci'#CiOQOPO'#CmOOOO'#Cj'#CjQQOPOOO!mOQO'#C^O!rOPO'#CkO!wOPO,59TOOOO,59X,59XOOOO-E6h-E6hOOOO,58x,58xOOOO,59V,59VOOOO-E6i-E6i",stateData:"$[~ORUOTUOUUOVUOWUOXUOYUOZUO[UObPOdQO~OcVOR]XT]XU]XV]XW]XX]XY]XZ]X[]Xb]Xd]X~OSZO~Ob[O~OcVOR]aT]aU]aV]aW]aX]aY]aZ]a[]ab]ad]a~OR~T~U~V~W~Y~Z~[~R[ZYXWVUTb~",goto:"{bPPcPPPPPPPPPPchnPtVRORTQTORYTQWPR]WSSOTRXR",nodeNames:"\u26A0 AlertRuleSearch FilterExpression DataSourceToken FilterValue NameSpaceToken LabelToken GroupToken RuleToken StateToken TypeToken HealthToken DashboardToken FreeFormExpression",maxTerm:20,skippedNodes:[0],repeatNodeCount:2,tokenData:"#0PRRqqr#Yrs&fst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]+h!]#W#Y#W#X,z#X#Z#Y#Z#[Ia#[#]!$Z#]#`#Y#`#a!.m#a#b#Y#b#c!7g#c#f#Y#f#g!Fe#g#h!Mu#h#i#(o#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#acSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YQ$qcSQqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lQ&PP;=`<%l$lQ&VP;=`;NQ$lR&]P;=`<%l#YR&cP;=`;NQ#YR&irX^(spq(sqr(sst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR(vsX^(spq(sqr(srs+Tst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR+[OSQdPR+_P;=`<%l(sR+eP;=`;NQ(sR+ocSQcPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR-ReSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U.d#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR.kfSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h0P#h#i;{#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR0WeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#[#Y#[#]1i#]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR1peSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#U#Y#U#V3R#V$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR3YeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d4k#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR4reSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U6T#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR6[eSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g7m#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR7teSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#W#Y#W#X9V#X$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR9^cSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]:i!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR:pcSQ[Pqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR<SeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U=e#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR=leSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h>}#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR?UeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d@g#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR@neSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#jBP#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRBWeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#gCi#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRCpeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#WER#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YREYeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#YFk#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRFrcSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]G}!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRHUcSQRPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lRIheSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#gJy#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRKQeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#dLc#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRLjeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#jM{#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRNSeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e! e#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR! lcSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!!w!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!#OcSQVPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!$beSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!%s#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!%zeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!']#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!'deSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!(u#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!(|eSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!*_#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!*feSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#[#Y#[#]!+w#]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!,OcSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!-Z!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!-bcSQZPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!.teSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!0V#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!0^eSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#U#Y#U#V!1o#V$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!1veSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!3X#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!3`eSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!4q#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!4xcSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!6T!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!6[cSQUPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!7neSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!9P#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!9WeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#a#Y#a#b!:i#b$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!:peSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!<R#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!<YeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h!=k#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!=reSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!?T#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!?[eSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!@m#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!@teSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W!BV#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!B^eSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!Co#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!CvcSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!ER!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!EYcSQTPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!FleSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j!G}#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!HUeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!Ig#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!IneSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!KP#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!KWcSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!Lc!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!LjcSQWPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!M|eSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i# _#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR# feSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U#!w#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR##OeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i#$a#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#$heSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y#%y#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#&QcSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]#']!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#'dcSQXPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR#(veSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#m#Y#m#n#*X#n$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#*`eSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e#+q#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#+xeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y#-Z#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#-bcSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]#.m!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#.tcSQYPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$l",tokenizers:[0,1],topRules:{AlertRuleSearch:[0,1]},dialects:{dataSourceFilter:123,nameSpaceFilter:125,labelFilter:127,groupFilter:129,ruleFilter:131,stateFilter:72,typeFilter:133,healthFilter:135,dashboardFilter:137},tokenPrec:139}),O={[r]:"datasource",[u]:"namespace",[d]:"label",[l]:"rule",[i]:"group",[f]:"state",[c]:"type",[h]:"health",[p]:"dashboard"};var C=(j=>(j.dataSource="dataSourceFilter",j.nameSpace="nameSpaceFilter",j.label="labelFilter",j.group="groupFilter",j.rule="ruleFilter",j.state="stateFilter",j.type="typeFilter",j.health="healthFilter",j.dashboard="dashboardFilter",j))(C||{});function L(j,k,Q){H(j,k,ee=>{if(ee.type.id===s){const ae=U(j,ee);if(ae.type&&ae.value){const Z=Q[ae.type];Z&&Z(ae.value)}}else if(ee.type.id===m){const ae=Q[m];ae&&ae(R(j,ee))}})}function U(j,k){if(k.type.id!==s)throw new Error("Invalid node provided. Only FilterExpression nodes are supported");const Q=k.firstChild;if(!Q)return{type:void 0,value:void 0};const ee=k.getChild(g),ae=ee?(0,I.trim)(R(j,ee),'"'):void 0;return{type:Q.type.id,value:ae}}function R(j,k){return j.slice(k.from,k.to).trim().replace(/\"/g,"")}function B(j,k,Q){const ee=[];H(j,k,Z=>{Z.type.id===s&&Z.firstChild&&ee.push(Z.firstChild),Z.type.id===m&&ee.push(Z)});let ae=[];return ee.forEach(Z=>{const ne=Q.findIndex(q=>q.type===Z.type.id);if(ne!==-1){if(Z.parent?.type.is(s)){const q=O[Z.type.id],te=Q.splice(ne,1)[0];ae.push(`${q}:${W(te.value)}`)}if(Z.type.is(m)){const q=Q.splice(ne,1)[0];ae.push(q.value)}}}),Q.forEach(Z=>{Z.type===m?ae.push(Z.value):ae.push(`${O[Z.type]}:${W(Z.value)}`)}),ae.join(" ")}function H(j,k,Q){const ee=k.join(" ");let Z=S.configure({dialect:ee}).parse(j).cursor();do Q(Z.node);while(Z.next())}function W(j){return/\s/.test(j)?`"${j}"`:j}const N=[C.dataSource,C.nameSpace,C.label,C.group,C.rule,C.state,C.type,C.health,C.dashboard];var V=(j=>(j.Ok="ok",j.Error="error",j.NoData="nodata",j.Unknown="unknown",j))(V||{});function G(j){const k={labels:[],freeFormWords:[],dataSourceNames:[]},Q={[r]:ee=>k.dataSourceNames.push(ee),[u]:ee=>k.namespace=ee,[i]:ee=>k.groupName=ee,[l]:ee=>k.ruleName=ee,[d]:ee=>k.labels.push(ee),[f]:ee=>k.ruleState=K(ee),[c]:ee=>(0,n.nf)(ee)?k.ruleType=ee:void 0,[h]:ee=>k.ruleHealth=(0,n.f6)(ee),[p]:ee=>k.dashboardUid=ee,[m]:ee=>k.freeFormWords.push(ee)};return L(j,N,Q),k}function _(j,k){const Q=[];return k.dataSourceNames&&Q.push(...k.dataSourceNames.map(ee=>({type:r,value:ee}))),k.namespace&&Q.push({type:u,value:k.namespace}),k.groupName&&Q.push({type:i,value:k.groupName}),k.ruleName&&Q.push({type:l,value:k.ruleName}),k.ruleState&&Q.push({type:f,value:k.ruleState}),k.ruleType&&Q.push({type:c,value:k.ruleType}),k.ruleHealth&&Q.push({type:h,value:k.ruleHealth}),k.labels&&Q.push(...k.labels.map(ee=>({type:d,value:ee}))),k.dashboardUid&&Q.push({type:p,value:k.dashboardUid}),k.freeFormWords&&Q.push(...k.freeFormWords.map(ee=>({type:m,value:ee}))),B(j,N,Q)}function K(j){if(j==="normal")return t.cF.Inactive;if((0,t.Si)(j))return j}},28318:(Y,A,e)=>{"use strict";e.d(A,{t:()=>C});var t=e(2543),n=e(39741),o=e(62467),s=e(66847),r=e(1005),g=e(81160),u=e(62938),d=e(39070),i=e(14236),l=e(72495),f=e(65879),c=e(43127),h=e(89667),p=e(19347),m=e(26657),a=e(12091),v=e(27677),E=e(69437),D=e(81583),b=e(72955),P=e(66718);const y={from:21600,to:0},T=(N,V)=>{const G=M(N,V);if(!G)return y;const{from:_,to:K}=x(G,V);return!_.length&&!K.length?y:{from:Math.max(..._),to:Math.min(...K)}},M=(N,V)=>{switch(N.type){case P.Tz.classic:return I(N);case P.Tz.math:return S(N,V);case P.Tz.resample:case P.Tz.reduce:case P.Tz.threshold:return O(N)}},I=N=>N.conditions?.map(V=>V.query.params[0]),x=(N,V)=>{let G=[],_=[y.to];for(const K of N){const j=V.find(k=>k.refId===K);!j||!j.relativeTimeRange||(G.push(j.relativeTimeRange.from),_.push(j.relativeTimeRange.to))}return{from:G,to:_}},S=(N,V)=>V.filter(G=>G.queryType==="query"&&N.expression?.includes(G.refId)).map(G=>G.refId),O=N=>N.expression?[N.expression]:void 0;class C{constructor(V=(0,v.AI)(),G=(0,p.l)()){this.backendSrv=V,this.dataSourceSrv=G,this.subject=new n.m(1),this.lastResult={}}get(){return this.subject.asObservable()}async run(V,G){const _=U(V,d.Gu.Done),K=[];for(const k of V){const Q=k.model.refId;if((0,E.f)(k.model))continue;const ee=await this.dataSourceSrv.get(k.datasourceUid);ee instanceof m.iy&&ee.filterQuery&&!ee.filterQuery(k.model)&&K.push(Q)}const j=(0,t.reject)(V,k=>K.includes(k.model.refId));if(j.length===0)return this.subject.next(_);this.subscription=L(this.backendSrv,j,G).subscribe({next:k=>{const Q=W(k,(ee,ae)=>{const Z=this.lastResult[ee],ne=(0,i.N$)(ae,Z);return(0,b.B)(ne,Z)});this.lastResult=Q,this.subject.next(this.lastResult)},error:k=>{this.lastResult=H(this.lastResult,k),this.subject.next(this.lastResult)}})}cancel(){if(!this.subscription)return;this.subscription.unsubscribe();let V=!1;const G=W(this.lastResult,(_,K)=>(K.state===d.Gu.Loading&&(V=!0),{...K,state:d.Gu.Done}));V&&this.subject.next(G)}destroy(){this.subject&&this.subject.complete(),this.cancel()}}const L=(N,V,G)=>{const _=U(V,d.Gu.Loading),K={data:{data:V,condition:G},url:"/api/v1/eval",method:"POST",requestId:(0,u.A)()};return(0,l.k)({whileLoading:_,source:N.fetch(K).pipe(B(_),(0,s.W)(j=>(0,o.of)(H(_,j))),(0,D.N)(N,K.requestId),(0,r.u)())})},U=(N,V)=>N.reduce((G,_)=>(G[_.refId]={state:V,series:[],timeRange:R(_,N)},G),{}),R=(N,V)=>{if((0,E.f)(N.model)){const G=T(N.model,V);return f.relativeToTimeRange(G)}return N.relativeTimeRange?f.relativeToTimeRange(N.relativeTimeRange):(console.warn(`Query with refId: ${N.refId} did not have any relative time range, using default.`),(0,c.E2)())},B=N=>(0,g.T)(V=>{const{data:G}=V,_={};for(const[K,j]of Object.entries(G.results)){const{error:k,status:Q,frames:ee=[]}=j,ae=k?[{message:k,refId:K,status:Q}]:[];_[K]={errors:ae,timeRange:N[K].timeRange,state:d.Gu.Done,series:ee.map(h.or)}}return _}),H=(N,V)=>{const G=(0,a.u)(V);return W(N,(_,K)=>({...K,state:d.Gu.Error,error:G}))},W=(N,V)=>{const G={};for(const[_,K]of Object.entries(N))G[_]=V(_,K);return G}},70383:(Y,A,e)=>{"use strict";e.d(A,{Kh:()=>h,VI:()=>l,b9:()=>i});var t=e(96540),n=e(33390),o=e(60021),s=e(62190),r=e(39964),g=e(55740),u=e(57220);const d=t.createContext(void 0),i=({children:p,accessType:m,alertmanagerSourceName:a})=>{const[v,E]=(0,r.l)(),D=(0,s.W)(m),b=D.availableInternalDataSources.concat(D.availableExternalDataSources),P=t.useCallback(R=>{f(b,R)&&(R===u.hY?(n.A.delete(g.Oq),E({[g.DD]:void 0})):(n.A.set(g.Oq,R),E({[g.DD]:R})))},[b,E]),y=v.get(g.DD),T=n.A.get(g.Oq),M=u.hY;t.useEffect(()=>{y&&y!==T&&n.A.set(g.Oq,y)},[y,T]);const I=a??y??T??M,x=f(b,I)?I:void 0,S=(0,u.r3)(x)?.jsonData,O=x===u.hY,C=S?h(S):!1,U={selectedAlertmanager:x,hasConfigurationAPI:O||C,isGrafanaAlertmanager:O,selectedAlertmanagerConfig:S,availableAlertManagers:b,setSelectedAlertmanager:P};return t.createElement(d.Provider,{value:U},p)};function l(){const p=t.useContext(d);if(p===void 0)throw new Error("useAlertmanager must be used within a AlertmanagerContext");return p}function f(p,m){return p.map(v=>v.name).includes(m)}const c=[o.Oz.mimir,o.Oz.cortex,void 0];function h(p){return c.includes(p.implementation)}},23770:(Y,A,e)=>{"use strict";e.d(A,{a7:()=>te,nO:()=>ye,$8:()=>pe,KH:()=>k,g6:()=>j,EY:()=>de,Nj:()=>q,D3:()=>ve,yo:()=>G,wE:()=>N,nV:()=>_,El:()=>ne,pT:()=>K,IX:()=>L,ef:()=>U,Tp:()=>ie,Om:()=>ge,JH:()=>ae,mF:()=>ee,Lc:()=>B,mB:()=>C,eB:()=>R,HB:()=>W,DC:()=>V,ly:()=>H,uQ:()=>Me,_$:()=>Q,bO:()=>le,RW:()=>Z,LU:()=>De,DN:()=>Re});var t=e(30038),n=e(2543),o=e(12131),s=e(94822),r=e(27677),g=e(25027),u=e(32415),d=e(82843),i=e(17172);function l(he){return(0,i.AI)().get("/api/annotations",{alertId:he}).then(Te=>Te?.sort(f))}function f(he,Te){const Be=(Ze,st)=>Ze>st?-1:st>Ze?1:0,we=Be(he.timeEnd,Te.timeEnd);if(we)return we;const Ne=Be(he.time,Te.time);return Ne||Be(he.id,Te.id)}var c=e(92240),h=e(68788),p=e(49498),m=e(28220),a=e(86590),v=e(98164),E=e(57220),D=e(56361),b=e(88467),P=e(18461),y=e(63066),T=e(23662);function M(he){const Te=async ke=>{if((0,T.A4)(ke)){const je=await(0,m.iy)(he);for(const[He,Ge]of Object.entries(je))for(const Oe of Ge){const Ke=Oe.rules.find(Ee=>(0,T.lT)(Ee)&&Ee.grafana_alert?.uid===ke.uid);if(Ke)return{group:Oe,ruleSourceName:E.hY,namespace:He,namespace_uid:(0,T.lT)(Ke)&&Ke.grafana_alert.namespace_uid||void 0,rule:Ke}}}if((0,T.X4)(ke)){const{ruleSourceName:je,namespace:He,groupName:Ge}=ke,Oe=await(0,m.HO)(he,He,Ge);if(!Oe)return null;const Ke=Oe.rules.find(Ee=>{const J=P.P1(je,He,Oe.name,Ee);return P.LC(J,ke)});return Ke?{group:Oe,ruleSourceName:je,namespace:He,rule:Ke}:null}if((0,T.Mj)(ke))throw new Error("Native prometheus rules can not be edited in grafana.");return null},Be=async ke=>{const{namespace:je,group:He,rule:Ge,namespace_uid:Oe}=ke;if(He.rules.length===1){await(0,m.AJ)(he,Oe||je,He.name);return}await(0,m.E8)(he,Oe||je,{...He,rules:He.rules.filter(Ke=>Ke!==Ge)})},we=async(ke,je,He)=>{const{dataSourceName:Ge,group:Oe,namespace:Ke}=ke,Ee=(0,y.l1)(ke);if(Ge&&Oe&&Ke){if(He){const ue=await Te(P.Yd(He));if(!ue)throw new Error("Rule not found.");if(ue.namespace!==Ke||ue.group.name!==Oe)await Be(ue);else{const be={...ue.group,rules:ue.group.rules.map(Le=>Le===ue.rule?Ee:Le),evaluateEvery:je};return await(0,m.E8)(he,Ke,be),P.P1(Ge,Ke,Oe,Ee)}}const J=await(0,m.HO)(he,Ke,Oe),oe=J?{...J,rules:[...J.rules,Ee]}:{name:Oe,rules:[Ee]};return await(0,m.E8)(he,Ke,oe),P.P1(Ge,Ke,Oe,Ee)}else throw new Error("Data source and location must be specified")},Ne=async(ke,je,He)=>{const{folder:Ge,group:Oe}=ke;if(!Ge)throw new Error("Folder must be specified");const Ke=(0,y.Z9)(ke),Ee=Ge.uid,J={name:Oe,interval:je};if(!He)return Ze(Ee,J,Ke);const oe=await Te(P.Yd(He));if(!oe)throw new Error("Rule not found.");const ue=oe.namespace_uid===Ee,be=oe.group.name===ke.group;return ue&&be?Qe(oe,Ke,je):st(Ee,J,oe,Ke)},Ze=async(ke,je,He)=>{const Ge=await(0,m.HO)(he,ke,je.name);if(!Ge)throw new Error(`No group found with name "${je.name}"`);const Oe={name:je.name,interval:je.interval,rules:(Ge.rules??[]).concat(He)};return await(0,m.E8)(he,ke,Oe),{uid:He.grafana_alert.uid??"",ruleSourceName:E.hY}},st=async(ke,je,He,Ge)=>(I(He,Ge),await Ze(ke,je,Ge)),Qe=async(ke,je,He)=>{I(ke,je);const Ge=ke.group.rules.map(Oe=>(0,T.lT)(Oe)&&Oe.grafana_alert.uid===ke.rule.grafana_alert.uid?je:Oe);return await(0,m.E8)(he,ke.namespace_uid??"",{name:ke.group.name,interval:He,rules:Ge}),{uid:ke.rule.grafana_alert.uid,ruleSourceName:E.hY}};return{findEditableRule:Te,deleteRule:Be,saveLotexRule:we,saveGrafanaRule:Ne}}function I(he,Te){if(!(0,T.lT)(he.rule))throw new Error("The rule is not a Grafana managed rule");const Be=he.rule.grafana_alert.uid;Te.grafana_alert.uid=Be}var x=e(25968);function S(he,Te){const we=he().unifiedAlerting.dataSources[Te]?.result;if(!we)throw new Error(`Data source configuration is not available for "${Te}" data source`);return we}function O(he,Te){const Be=S(he,Te);if(!Be.rulerConfig)throw new Error(`Ruler API is not available for ${Te}`);return Be.rulerConfig}const C=(0,t.zD)("unifiedalerting/fetchPromRules",async({rulesSourceName:he,filter:Te,limitAlerts:Be,matcher:we,state:Ne,identifier:Ze},st)=>{await st.dispatch(V({rulesSourceName:he}));const Qe=(0,g.U7)(p.sA,`[${he}] Prometheus rules loaded`,{dataSourceName:he,thunk:"unifiedalerting/fetchPromRules"});return await(0,b.$I)(Qe(he,Te,Be,we,Ne,Ze))}),L=(0,t.zD)("unifiedAlerting/fetchExternalAlertmanagers",()=>(0,b.$I)((0,u.Wf)())),U=(0,t.zD)("unifiedAlerting/fetchExternAlertmanagersConfig",()=>(0,b.$I)((0,u.Vv)())),R=(0,t.zD)("unifiedalerting/fetchRulerRules",async({rulesSourceName:he,filter:Te},{dispatch:Be,getState:we})=>{await Be(V({rulesSourceName:he}));const Ne=O(we,he),Ze=(0,g.Ke)(m.iy,`[${he}] Ruler rules loaded`,{dataSourceName:he,thunk:"unifiedalerting/fetchRulerRules"});return await(0,b.$I)(Ze(Ne,Te))});function B({rulesSourceName:he,identifier:Te,filter:Be,limitAlerts:we,matcher:Ne,state:Ze}){return async(st,Qe)=>{await st(V({rulesSourceName:he}));const ke=S(Qe,he);await st(C({rulesSourceName:he,identifier:Te,filter:Be,limitAlerts:we,matcher:Ne,state:Ze})),ke.rulerConfig&&await st(R({rulesSourceName:he}))}}const H=(0,t.zD)("unifiedalerting/fetchSilences",he=>{const Te=(0,g.QA)(u.Bz,`[${he}] Silences loaded`,{dataSourceName:he,thunk:"unifiedalerting/fetchSilences"});return(0,b.$I)(Te(he))});function W(he){return(Te,Be)=>{const{rulerRules:we}=Be().unifiedAlerting,Ne=we[he];(0,n.isEmpty)(Ne?.result)&&!(Ne&&(0,T.$7)(Ne))&&!Ne?.loading&&Te(R({rulesSourceName:he}))}}function N(){return async he=>{const Te=(0,E.gR)().map(Be=>he(V({rulesSourceName:Be})));await Promise.allSettled(Te)}}const V=(0,t.zD)("unifiedalerting/fetchPromBuildinfo",async({rulesSourceName:he})=>(0,b.$I)((async()=>{if(he===E.hY)return{name:E.hY,id:E.hY,rulerConfig:{dataSourceName:E.hY,apiVersion:"legacy"}};const Te=(0,E.Jz)(he);if(!Te)throw new Error(`Missing data source configuration for ${he}`);const{id:Be,name:we}=Te,Ze=await(0,g.QA)(c.nD,`[${he}] Rules source features discovered`,{dataSourceName:he,thunk:"unifiedalerting/fetchPromBuildinfo"})(we),st=Ze.features.rulerApiEnabled?{dataSourceName:we,apiVersion:Ze.application===s.N1.Cortex?"legacy":"config"}:void 0;return{name:we,id:Be,rulerConfig:st}})()),{condition:({rulesSourceName:he},{getState:Te})=>{const Be=Te().unifiedAlerting.dataSources,we=!!Be[he]?.result,Ne=!!Be[he]?.error;return!(we||Ne)}});function G(he=!1,Te={}){return async(Be,we)=>{const Ne=performance.now();await Promise.allSettled((0,E.gR)().map(async Ze=>{await Be(V({rulesSourceName:Ze}));const{promRules:st,rulerRules:Qe,dataSources:ke}=we().unifiedAlerting,je=ke[Ze].result;if(!je)return;const He=he||!st[Ze]?.loading,Ge=(he||!Qe[Ze]?.loading)&&!!je.rulerConfig;await Promise.allSettled([He&&Be(C({rulesSourceName:Ze,...Te})),Ge&&Be(R({rulesSourceName:Ze}))])})),(0,g.fH)("All Prom and Ruler rules loaded",{loadTimeMs:(performance.now()-Ne).toFixed(0)})}}function _(he=!1){return async(Te,Be)=>{const{promRules:we}=Be().unifiedAlerting;(0,E.gR)().map(Ne=>{(he||!we[Ne]?.loading)&&Te(C({rulesSourceName:Ne}))})}}const K=(0,t.zD)("unifiedalerting/fetchEditableRule",(he,Te)=>{const Be=O(Te.getState,he.ruleSourceName);return(0,b.$I)(M(Be).findEditableRule(he))});function j(he,Te){return async(Be,we)=>{(0,b.v5)((async()=>{const Ne=(0,E.EV)(he.rulesSource),Ze=O(we,Ne);await(0,m.AJ)(Ze,he.name,Te.name),await Be(B({rulesSourceName:Ne}))})(),{successMessage:"Group deleted"})}}function k(he,Te={}){return async(Be,we)=>{await Be(V({rulesSourceName:he.ruleSourceName})),(0,b.v5)((async()=>{const Ne=O(we,he.ruleSourceName),Ze=M(Ne),st=await Ze.findEditableRule(he);if(!st)throw new Error("Rule not found.");await Ze.deleteRule(st),await Be(B({rulesSourceName:st.ruleSourceName})),Te.navigateTo&&o.Ny.replace(Te.navigateTo)})(),{successMessage:"Rule deleted."})}}const Q=(0,t.zD)("unifiedalerting/saveRuleForm",({values:he,existing:Te,redirectOnSave:Be,evaluateEvery:we},Ne)=>(0,b.v5)((0,b.$I)((async()=>{const{type:Ze}=he;let st;if(Ze===a.Z.cloudAlerting||Ze===a.Z.cloudRecording){if(!he.dataSourceName)throw new Error("The Data source has not been defined.");const Qe=O(Ne.getState,he.dataSourceName);st=await M(Qe).saveLotexRule(he,we,Te),await Ne.dispatch(R({rulesSourceName:he.dataSourceName}))}else if(Ze===a.Z.grafana){const Qe=O(Ne.getState,E.hY);st=await M(Qe).saveGrafanaRule(he,we,Te),await Ne.dispatch(R({rulesSourceName:E.hY}))}else throw new Error("Unexpected rule form type");if((0,g.fH)(g.le.successSavingAlertRule,{type:Ze,isNew:(!Te).toString()}),Be)o.Ny.push(Be);else{const Qe=P.$9(st);if(!Qe){o.Ny.push("/alerting/list");return}const ke=`/alerting/${encodeURIComponent(Qe)}/edit`;o.Ny.getLocation().pathname!==ke?o.Ny.replace(ke):Ne.dispatch(K(st))}})()),{successMessage:Te?`Rule "${he.name}" updated.`:`Rule "${he.name}" saved.`,errorMessage:"Failed to save rule"})),ee=(0,t.zD)("unifiedalerting/fetchGrafanaNotifiers",()=>(0,b.$I)((0,h.Es)())),ae=(0,t.zD)("unifiedalerting/fetchGrafanaAnnotations",he=>(0,b.$I)(l(he))),Z=(0,t.zD)("unifiedalerting/updateAMConfig",({alertManagerSourceName:he,oldConfig:Te,newConfig:Be,successMessage:we,redirectPath:Ne,redirectSearch:Ze},st)=>(0,b.v5)((0,b.$I)((async()=>{const Qe=await st.dispatch(d.m.endpoints.getAlertmanagerConfiguration.initiate(he)).unwrap(),ke=(0,n.isEmpty)(Qe.alertmanager_config)&&(0,n.isEmpty)(Qe.template_files),je=JSON.stringify(Qe)!==JSON.stringify(Te);if(!ke&&je)throw new Error("A newer Alertmanager configuration is available. Please reload the page and try again to not overwrite recent changes.");if(await(0,u.vk)(he,(0,v.MZ)(Be)),st.dispatch(d.m.util.invalidateTags(["AlertmanagerConfiguration"])),Ne){const He=new URLSearchParams(Ze??"");o.Ny.push((0,D.nL)(Ne,he,He))}})()),{successMessage:we})),ne=(0,t.zD)("unifiedalerting/fetchAmAlerts",he=>(0,b.$I)((0,u.Mn)(he,[],!0,!0,!0))),q=(he,Te)=>async Be=>{await(0,b.v5)((0,u.dk)(he,Te),{successMessage:"Silence expired."}),Be(H(he)),Be(ne(he))},te=(0,t.zD)("unifiedalerting/updateSilence",({alertManagerSourceName:he,payload:Te,exitOnSave:Be,successMessage:we})=>(0,b.v5)((0,b.$I)((async()=>{await(0,u.as)(he,Te),Be&&o.Ny.push((0,D.nL)("/alerting/silences",he))})()),{successMessage:we})),re=(he,Te)=>async Be=>{const we=await Be(alertmanagerApi.endpoints.getAlertmanagerConfiguration.initiate(Te)).unwrap();if(!we)throw new Error(`Config for ${Te} not found`);if(!we.alertmanager_config.receivers?.find(Ze=>Ze.name===he))throw new Error(`Cannot delete receiver ${he}: not found in config.`);const Ne={...we,alertmanager_config:{...we.alertmanager_config,receivers:we.alertmanager_config.receivers.filter(Ze=>Ze.name!==he)}};return Be(Z({newConfig:Ne,oldConfig:we,alertManagerSourceName:Te,successMessage:"Contact point deleted."}))},de=(he,Te)=>async Be=>{const we=await Be(d.m.endpoints.getAlertmanagerConfiguration.initiate(Te)).unwrap();if(!we)throw new Error(`Config for ${Te} not found`);if(typeof we.template_files?.[he]!="string")throw new Error(`Cannot delete template ${he}: not found in config.`);const Ne={...we.template_files};delete Ne[he];const Ze={...we,alertmanager_config:{...we.alertmanager_config,templates:we.alertmanager_config.templates?.filter(st=>st!==he)},template_files:Ne};return Be(Z({newConfig:Ze,oldConfig:we,alertManagerSourceName:Te,successMessage:"Template deleted."}))},ie=(0,t.zD)("unifiedalerting/fetchFolder",he=>(0,b.$I)(r.IB.getFolderByUid(he,{withAccessControl:!0}))),ge=he=>(Te,Be)=>{Be().unifiedAlerting.folders[he]?.dispatched||Te(ie(he))},ve=(0,t.zD)("unifiedalerting/fetchAlertGroups",he=>(0,b.$I)((0,u.f4)(he))),ye=(0,t.zD)("unifiedalerting/deleteAlertManagerConfig",async(he,Te)=>(0,b.v5)((0,b.$I)((async()=>{await(0,u.nd)(he),await Te.dispatch(d.m.util.invalidateTags(["AlertmanagerConfiguration"]))})()),{errorMessage:"Failed to reset Alertmanager configuration",successMessage:"Alertmanager configuration reset."})),pe=(he,Te)=>async Be=>{const we=await Be(d.m.endpoints.getAlertmanagerConfiguration.initiate(he)).unwrap(),Ne=we?.alertmanager_config?.mute_time_intervals?.filter(({name:Ze})=>Ze!==Te)??[];we&&(0,b.v5)(Be(Z({alertManagerSourceName:he,oldConfig:we,newConfig:{...we,alertmanager_config:{...we.alertmanager_config,route:we.alertmanager_config.route?(0,v.Dk)(Te,we.alertmanager_config?.route):void 0,mute_time_intervals:Ne}}})),{successMessage:`Deleted "${Te}" from Alertmanager configuration`,errorMessage:"Failed to delete mute timing"})},le=(0,t.zD)("unifiedalerting/testReceivers",({alertManagerSourceName:he,receivers:Te,alert:Be})=>(0,b.v5)((0,b.$I)((0,u.By)(he,Te,Be)),{errorMessage:"Failed to send test alert.",successMessage:"Test alert sent."})),Me=(he,Te)=>he.filter(Be=>{const{forDuration:we}=(0,T.jg)(Be,Te),Ne=(0,x.ge)(we),Ze=(0,x.ge)(Te);return Ne!==0&&Ne<Ze}),De=(0,t.zD)("unifiedalerting/updateLotexNamespaceAndGroup",async(he,Te)=>(0,b.v5)((0,b.$I)((async()=>{const{rulesSourceName:Be,namespaceName:we,groupName:Ne,newNamespaceName:Ze,newGroupName:st,groupInterval:Qe,folderUid:ke}=he,je=O(Te.getState,Be),He=await(0,m.iy)(je);if(!!!He[we])throw new Error(`Namespace "${we}" not found.`);const Oe=He[we].find(J=>J.name===Ne);if(!Oe)throw new Error(`Group "${Ne}" not found.`);const Ke=!!He[we].find(J=>J.name===st);if(st!==Ne&&Ke)throw new Error(`Group "${st}" already exists in namespace "${we}".`);const Ee=!!He[Ze];if(Ze!==we&&Ee)throw new Error(`Namespace "${Ze}" already exists.`);if(Ze===we&&Ne===st&&Qe===Oe.interval)throw new Error("Nothing changed.");if(Qe!==Oe.interval){const J=Me(Oe.rules,Qe??"1m");if(J.length>0)throw new Error(`These alerts belonging to this group will have an invalid 'For' value: ${J.map(oe=>{const{alertName:ue}=(0,T.jg)(oe,Qe??"");return ue}).join(",")}`)}if(Ze!==we){for(const J of He[we])await(0,m.E8)(je,Ze,J.name===Ne?{...J,name:st,interval:Qe}:J);await(0,m.BK)(je,ke||we)}else await(0,m.E8)(je,ke||we,{...Oe,name:st,interval:Qe}),st!==Ne&&await(0,m.AJ)(je,ke||we,Ne);await Te.dispatch(R({rulesSourceName:Be}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),Re=(0,t.zD)("unifiedalerting/updateRulesOrderForGroup",async(he,Te)=>(0,b.v5)((0,b.$I)((async()=>{const{rulesSourceName:Be,namespaceName:we,groupName:Ne,newRules:Ze,folderUid:st}=he,Qe=O(Te.getState,Be),je=(await(0,m.iy)(Qe))[we].find(Ge=>Ge.name===Ne);if(!je)throw new Error(`Group "${Ne}" not found.`);const He={name:je.name,interval:je.interval,rules:Ze};await(0,m.E8)(Qe,st??we,He),await Te.dispatch(R({rulesSourceName:Be}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),me=(0,t.zD)("unifiedAlerting/addExternalAlertmanagers",async(he,Te)=>(0,b.v5)((0,b.$I)((async()=>{await(0,u._P)(he),Te.dispatch(U())})()),{errorMessage:"Failed adding alertmanagers",successMessage:"Alertmanagers updated"}))},38858:(Y,A,e)=>{"use strict";e.d(A,{q:()=>o});var t=e(32196),n=e(60021);const o=s=>({[n.Or.Active]:(0,t.css)`
    color: ${s.colors.error.text};
  `,[n.Or.Suppressed]:(0,t.css)`
    color: ${s.colors.primary.text};
  `,[n.Or.Unprocessed]:(0,t.css)`
    color: ${s.colors.secondary.text};
  `})},22620:(Y,A,e)=>{"use strict";e.d(A,{H:()=>n});var t=e(32196);const n=o=>(0,t.css)`
    float: none;
    display: flex;
    justify-content: flex-start;
    margin: ${o.spacing(2,0)};
  `},99494:(Y,A,e)=>{"use strict";e.d(A,{W:()=>t});var t=(n=>(n.Incident="grafana-incident-app",n.OnCall="grafana-oncall-app",n.MachineLearning="grafana-ml-app",n))(t||{})},86590:(Y,A,e)=>{"use strict";e.d(A,{Z:()=>t});var t=(n=>(n.grafana="grafana",n.cloudAlerting="cloud-alerting",n.cloudRecording="cloud-recording",n))(t||{})},41068:(Y,A,e)=>{"use strict";e.d(A,{y:()=>t});var t=(n=>(n.seconds="s",n.minutes="m",n.hours="h",n.days="d",n.weeks="w",n))(t||{})},75471:(Y,A,e)=>{"use strict";e.d(A,{C0:()=>h,HL:()=>g,Q9:()=>p,VQ:()=>u,Wd:()=>c,jy:()=>l,lV:()=>f,q0:()=>m});var t=e(2913),n=e(16233),o=e(80348),s=e(57220);function r(a){return(0,s.z2)(a)?"grafana":"external"}const g={read:{grafana:o.AccessControlAction.AlertingInstanceRead,external:o.AccessControlAction.AlertingInstancesExternalRead},create:{grafana:o.AccessControlAction.AlertingInstanceCreate,external:o.AccessControlAction.AlertingInstancesExternalWrite},update:{grafana:o.AccessControlAction.AlertingInstanceUpdate,external:o.AccessControlAction.AlertingInstancesExternalWrite},delete:{grafana:o.AccessControlAction.AlertingInstanceUpdate,external:o.AccessControlAction.AlertingInstancesExternalWrite}},u={read:{grafana:o.AccessControlAction.AlertingNotificationsRead,external:o.AccessControlAction.AlertingNotificationsExternalRead},create:{grafana:o.AccessControlAction.AlertingNotificationsWrite,external:o.AccessControlAction.AlertingNotificationsExternalWrite},update:{grafana:o.AccessControlAction.AlertingNotificationsWrite,external:o.AccessControlAction.AlertingNotificationsExternalWrite},delete:{grafana:o.AccessControlAction.AlertingNotificationsWrite,external:o.AccessControlAction.AlertingNotificationsExternalWrite}},d={read:o.AccessControlAction.AlertingProvisioningRead,readSecrets:o.AccessControlAction.AlertingProvisioningReadSecrets,write:o.AccessControlAction.AlertingProvisioningWrite},i={read:{grafana:o.AccessControlAction.AlertingRuleRead,external:o.AccessControlAction.AlertingRuleExternalRead},create:{grafana:o.AccessControlAction.AlertingRuleCreate,external:o.AccessControlAction.AlertingRuleExternalWrite},update:{grafana:o.AccessControlAction.AlertingRuleUpdate,external:o.AccessControlAction.AlertingRuleExternalWrite},delete:{grafana:o.AccessControlAction.AlertingRuleDelete,external:o.AccessControlAction.AlertingRuleExternalWrite}};function l(a){const v=r(a);return{read:g.read[v],create:g.create[v],update:g.update[v],delete:g.delete[v]}}function f(a){const v=r(a);return{read:u.read[v],create:u.create[v],update:u.update[v],delete:u.delete[v],provisioning:d}}function c(a){const v=r(a);return{read:i.read[v],create:i.create[v],update:i.update[v],delete:i.delete[v]}}function h(a){return()=>n.TP.evaluatePermission(a)}function p(){return{canCreateGrafanaRules:n.TP.hasPermission(o.AccessControlAction.FoldersRead)&&n.TP.hasPermission(i.create.grafana),canCreateCloudRules:n.TP.hasPermission(o.AccessControlAction.DataSourcesRead)&&n.TP.hasPermission(i.create.external),canEditRules:a=>n.TP.hasPermission(c(a).update)}}function m(){const{unifiedAlertingEnabled:a}=(0,t.zj)(),v=n.TP.hasPermission(c(s.hY).read),E=n.TP.hasPermission(c(s.hY).update);return a&&v&&E}},98164:(Y,A,e)=>{"use strict";e.d(A,{$P:()=>C,Av:()=>b,Dk:()=>d,Dm:()=>x,EU:()=>P,F9:()=>M,J$:()=>E,LF:()=>I,Lt:()=>i,MN:()=>f,MU:()=>h,MZ:()=>u,NL:()=>v,UL:()=>O,VE:()=>y,Wc:()=>p,mP:()=>L,uH:()=>S,xH:()=>a});var t=e(2543),n=e.n(t),o=e(60021),s=e(82775),r=e(57220),g=e(32642);function u(U){return U.alertmanager_config.receivers||(U.alertmanager_config.receivers=[{name:"default "}]),U.alertmanager_config.route||(U.alertmanager_config.route={receiver:U.alertmanager_config.receivers[0].name}),U.template_files||(U.template_files={}),U}function d(U,R){return{...R,mute_time_intervals:R.mute_time_intervals?.filter(H=>H!==U)??[],routes:R.routes?.map(H=>d(U,H))}}function i(U,R,B){return{...B,mute_time_intervals:B.mute_time_intervals?.map(H=>H===R?U:H),routes:B.routes?.map(H=>i(U,R,H))}}function l(U){return U.map(([R,B,H])=>[R,B,unquoteWithUnescape(H)])}function f(U){return U.isEqual?U.isRegex?o.ho.regex:o.ho.equal:U.isRegex?o.ho.notRegex:o.ho.notEqual}function c(U){switch(U){case o.ho.equal:return{isEqual:!0,isRegex:!1};case o.ho.notEqual:return{isEqual:!1,isRegex:!1};case o.ho.regex:return{isEqual:!0,isRegex:!0};case o.ho.notRegex:return{isEqual:!1,isRegex:!0}}}function h(U){return{name:U.name,value:U.value,operator:f(U)}}function p(U){return{name:U.name,value:U.value,...c(U.operator)}}function m(U){return`{${U.map(h).reduce((H,W)=>{const N=`${W.name}${W.operator}"${W.value}"`;return H?`${H},${N}`:N},"")}}`}const a=[{label:o.ho.equal,description:"Equals",value:o.ho.equal},{label:o.ho.notEqual,description:"Does not equal",value:o.ho.notEqual},{label:o.ho.regex,description:"Matches regex",value:o.ho.regex},{label:o.ho.notRegex,description:"Does not match regex",value:o.ho.notRegex}];function v(U){const R=f(U);return[U.name,R,U.value]}function E(U){const R=/\b([\w.-]+)(=~|!=|!~|=(?="?\w))"?([^"\n,}]*)"?/g,B=[];return U.replace(R,(H,W,N,V)=>{const G=N===o.ho.equal||N===o.ho.regex,_=N===o.ho.regex||N===o.ho.notRegex;return B.push({name:W,value:_?D(V.trim()):V.trim(),isEqual:G,isRegex:_}),""}),B}function D(U){try{return new RegExp(U),U}catch{return""}}function b(U,R){return R.every(({name:B,value:H,isRegex:W,isEqual:N})=>Object.entries(U).some(([V,G])=>{const _=B===V;let K;return N&&!W&&(K=H===G),!N&&!W&&(K=H!==G),N&&W&&(K=new RegExp(H).test(G)),!N&&W&&(K=!new RegExp(H).test(G)),_&&K}))}function P(...U){const R=U.map(E).flat(),B=(0,t.uniqWith)(R,t.isEqual);return m(B)}function y(U){return U===r.hY?"default":"unquote"}function T(){return(0,s.k)().filter(U=>U.type===r.ol.Alertmanager)}function M(U){return T().find(R=>U===R.uid)}function I(U){const{times:R,weekdays:B,days_of_month:H,months:W,years:N,location:V}=U,G=x(R,V),_=S(B),K=O(H),j=C(W),k=L(N);return[G,_,K,j,k].join(", ")}function x(U,R){return"Times: "+(U?U?.map(({start_time:B,end_time:H})=>`${B} - ${H} [${R??"UTC"}]`).join(" and "):"All")}function S(U){return"Weekdays: "+(U?.map(R=>{if(R.includes(":"))return R.split(":").map(B=>{const H=B.slice(0,3);return H[0].toLocaleUpperCase()+H.slice(1)}).join("-");{const B=R.slice(0,3);return B[0].toLocaleUpperCase()+B.slice(1)}}).join(", ")??"All")}function O(U){return"Days of the month: "+(U?.join(", ")??"All")}function C(U){return"Months: "+(U?.join(", ")??"All")}function L(U){return"Years: "+(U?.join(", ")??"All")}},33225:(Y,A,e)=>{"use strict";e.d(A,{Hx:()=>r,gO:()=>g});var t=e(96540),n=e(55740),o=e(56361);function s(u){return{dashboardUID:u.find(([d])=>d===n.YH.dashboardUID)?.[1],panelId:u.find(([d])=>d===n.YH.panelID)?.[1]}}function r(u){return(0,t.useMemo)(()=>Object.entries(u||{}).filter(([d,i])=>!!i.trim()),[u])}function g(u){const d=new Map,{panelId:i,dashboardUID:l}=s(u);return l&&d.set(n.YH.dashboardUID,(0,o.JM)(l)),l&&i&&d.set(n.YH.panelID,(0,o.D2)(l,i)),d}},82775:(Y,A,e)=>{"use strict";e.d(A,{k:()=>o,q:()=>s});var t=e(32264),n=e(25968);function o(){return Object.values(t.$.datasources)}function s(r){if(!(0,n.TN)(t.$.unifiedAlerting.minInterval))return{globalLimit:0,exceedsLimit:!1};const g=(0,n.M9)(t.$.unifiedAlerting.minInterval);if(!r||!(0,n.TN)(r))return{globalLimit:g,exceedsLimit:!1};const u=(0,n.M9)(r),d=g>u&&u>0;return{globalLimit:g,exceedsLimit:d}}},55740:(Y,A,e)=>{"use strict";e.d(A,{DD:()=>o,H8:()=>h,HH:()=>n,J3:()=>c,Oq:()=>s,U3:()=>g,UU:()=>t,YH:()=>f,cB:()=>u,kl:()=>p,wG:()=>r});const t="ruler not supported",n=2e4,o="alertmanager",s="alerting-alertmanager",r=2e4,g=2e4,u=2e4,d="timeseries",i="table",l="stat";var f=(m=>(m.description="description",m.summary="summary",m.runbookURL="runbook_url",m.alertId="__alertId__",m.dashboardUID="__dashboardUid__",m.panelID="__panelId__",m))(f||{});const c={description:"Description",summary:"Summary",runbook_url:"Runbook URL",__dashboardUid__:"Dashboard UID",__panelId__:"Panel ID",__alertId__:"Alert ID"},h={description:"Description of what the alert rule does.",summary:"Short summary of what happened and why.",runbook_url:"Webpage where you keep your runbook for the alert.",__dashboardUid__:"",__panelId__:"",__alertId__:""},p=[{key:"summary",value:""},{key:"description",value:""},{key:"runbook_url",value:""}]},57220:(Y,A,e)=>{"use strict";e.d(A,{AL:()=>L,EV:()=>S,Eb:()=>C,Jz:()=>m,Zw:()=>H,bD:()=>E,cy:()=>y,gR:()=>I,hP:()=>_,hY:()=>l,lS:()=>x,oh:()=>R,ol:()=>c,qi:()=>p,r3:()=>B,r8:()=>P,sq:()=>T,v0:()=>O,vv:()=>f,w5:()=>N,y9:()=>G,z2:()=>U});var t=e(19347),n=e(16233),o=e(60021),s=e(80348),r=e(82843),g=e(62190),u=e(70383),d=e(75471),i=e(82775);const l="grafana",f="-- Grafana --";var c=(K=>(K.Alertmanager="alertmanager",K.Loki="loki",K.Prometheus="prometheus",K))(c||{});const h=["loki","prometheus"];function p(){return n.TP.hasPermission(s.AccessControlAction.AlertingRuleExternalRead)?(0,i.k)().filter(K=>h.includes(K.type)&&K.jsonData.manageAlerts!==!1).sort((K,j)=>K.name.localeCompare(j.name)):[]}function m(K){return p().find(j=>j.name===K)}function a(){return(0,i.k)().filter(v).sort((K,j)=>K.name.localeCompare(j.name))}function v(K){return K.type==="alertmanager"}function E(K){return K.type==="alertmanager"}function D(){return a().filter(K=>K.jsonData.handleGrafanaManagedAlerts)}const b={name:l,imgUrl:"public/img/grafana_icon.svg",hasConfigurationAPI:!0};function P(){return[b,...a().map(K=>({name:K.name,displayName:K.name,imgUrl:K.meta.info.logos.small,meta:K.meta}))]}function y(K){const j=(0,g.W)(K),k=j.availableExternalDataSources.filter(Z=>Z.handleGrafanaManagedAlerts),Q=j.availableInternalDataSources,{currentData:ee}=r.m.useGetAlertmanagerChoiceStatusQuery(void 0);switch(ee?.alertmanagersChoice){case o.nA.Internal:return Q;case o.nA.External:return k;default:return[...Q,...k]}}function T(K){const j=[],k=[],Q={instance:d.HL.read,notification:d.VQ.read};if(n.TP.hasPermission(Q[K].grafana)&&j.push(b),n.TP.hasPermission(Q[K].external)){const ee=a().map(ae=>({name:ae.name,displayName:ae.name,imgUrl:ae.meta.info.logos.small,meta:ae.meta,hasConfigurationAPI:(0,u.Kh)(ae.jsonData),handleGrafanaManagedAlerts:ae.jsonData.handleGrafanaManagedAlerts}));k.push(...ee)}return{availableInternalDataSources:j,availableExternalDataSources:k}}function M(K){const j=R(K);if(!j)throw new Error(`Data source ${K} not found`);if(j.type!=="loki"&&j.type!=="prometheus")throw new Error(`Unexpected data source type ${j.type}`);return j}function I(){const K=p().map(j=>j.name);return n.TP.hasPermission(s.AccessControlAction.AlertingRuleRead)&&K.push(l),K}function x(){const K=p();return n.TP.hasPermission(s.AccessControlAction.AlertingRuleRead)&&K.push(l),K}function S(K){return C(K)?K.name:K}function O(K){return C(K)?K.uid:l}function C(K){return K!==l}function L(K){return K!==l&&B(K)?.jsonData?.implementation===o.Oz.prometheus}function U(K){return K===l}function R(K){return(0,i.k)().find(j=>j.name===K)}function B(K){return(0,i.k)().filter(v).find(j=>j.name===K)}function H(K){return K===l?l:R(K)}function W(K){if(K===l)return l;const j=R(K);if(!j)throw new Error(`Datasource "${K}" not found`);return String(j.id)}function N(K){if(K===l)return l;const j=R(K);if(!j)throw new Error(`Datasource "${K}" not found`);return j.uid}function V(){return(0,t.l)().getList({alerting:!0})[0]}function G(){const K=(0,t.l)().getInstanceSettings("default");return K?.meta.alerting??!1?K:V()}function _(K){return K.jsonData.manageAlerts!==!1}},75214:(Y,A,e)=>{"use strict";e.d(A,{Dd:()=>n,M4:()=>t,x4:()=>s,zm:()=>o});function t(r){return Object.entries(r).map(([g,u])=>`${g}=${u}`).sort()}function n(r){return Object.entries(r).map(([g,u])=>[g,u])}function o(r){const g={};return r.forEach(u=>{g[u[0]]=u[1]}),g}function s(r){const g={};return r.forEach(u=>{u.key&&(g[u.key]=u.value)}),g}},32642:(Y,A,e)=>{"use strict";e.d(A,{Ig:()=>l,J$:()=>d,J9:()=>u,ot:()=>i,ou:()=>g,qR:()=>r,t8:()=>f});var t=e(2543),n=e.n(t),o=e(60021);const s=[o.ho.regex,o.ho.notRegex,o.ho.notEqual,o.ho.equal];function r(c){if(c.startsWith("{")&&c.endsWith("}"))throw new Error(`PromQL matchers not supported yet, sorry! PromQL matcher found: ${c}`);const h=s.map(E=>[E,c.indexOf(E)]).filter(([E,D])=>D>-1).sort((E,D)=>E[1]-D[1]);if(!h.length)throw new Error(`Invalid matcher: ${c}`);const[p,m]=h[0],a=c.slice(0,m).trim(),v=c.slice(m+p.length);if(!a)throw new Error(`Invalid matcher: ${c}`);return{name:a,value:v,isRegex:p===o.ho.regex||p===o.ho.notRegex,isEqual:p===o.ho.equal||p===o.ho.regex}}function g(c){const h=c.filter(p=>!!p.trim()).map(p=>r(p));return(0,t.uniqBy)(h,p=>p.name)}const u=c=>{const h=Object.entries(c).filter(([m])=>!(m.startsWith("__")&&m.endsWith("__"))),p=new URLSearchParams;return h.forEach(([m,a])=>p.append("matcher",`${m}=${a}`)),p},d=c=>{const h=[];return c.matchers&&c.matchers.forEach(p=>{const{name:m,value:a,isEqual:v,isRegex:E}=r(p);let D=o.ho.equal;v&&E&&(D=o.ho.regex),!v&&E&&(D=o.ho.notRegex),v&&!E&&(D=o.ho.equal),!v&&!E&&(D=o.ho.notEqual),h.push([m,D,a])}),c.object_matchers&&h.push(...c.object_matchers),c.match_re&&Object.entries(c.match_re).forEach(([p,m])=>{h.push([p,o.ho.regex,m])}),c.match&&Object.entries(c.match).forEach(([p,m])=>{h.push([p,o.ho.equal,m])}),h};function i(c){return`"${c.replace(/[\\"]/g,p=>`\\${p}`)}"`}function l(c){return/^"(.*)"$/.test(c)?c.replace(/^"(.*)"$/,"$1").replace(/\\"/g,'"').replace(/\\\\/g,"\\"):c}const f={default:([c,h,p])=>`${c} ${h} ${p||""}`,unquote:([c,h,p])=>{const m=l(p)||'""';return`${c} ${h} ${m}`}}},56361:(Y,A,e)=>{"use strict";e.d(A,{BK:()=>O,Cp:()=>V,D2:()=>H,ES:()=>_,GD:()=>C,Ht:()=>b,JM:()=>B,JZ:()=>j,KT:()=>T,NH:()=>L,S2:()=>E,Sl:()=>D,Y9:()=>x,Yp:()=>m,bg:()=>a,c$:()=>U,i7:()=>v,i9:()=>W,nL:()=>M,qN:()=>R,qy:()=>y,t7:()=>S,w$:()=>p,y$:()=>G});var t=e(2543),n=e.n(t),o=e(61268),s=e(32264),r=e(17172),g=e(18461),u=e(23662),d=e(64861),i=e(94822),l=e(55740),f=e(57220),c=e(32642),h=e(3704);function p(k,Q,ee){const ae=(0,f.EV)(k),Z=g.UP(ae,Q),ne=encodeURIComponent(g.$9(Z)),q=encodeURIComponent(ae);return(0,h.c)(`/alerting/${q}/${ne}/view`,{returnTo:ee})}function m(k,Q){const{uid:ee,type:ae}=k;return(0,h.c)("/explore",{left:JSON.stringify({datasource:k.uid,queries:[{refId:"A",datasource:{uid:ee,type:ae},expr:Q}],range:{from:"now-1h",to:"now"}})})}function a(k,Q=""){return(0,h.c)(`/alerting/notifications/receivers/${encodeURIComponent(k)}/edit`,{alertmanager:Q})}function v(k,Q=""){return(0,h.c)("/alerting/routes/mute-timing/edit",{muteName:k,alertmanager:Q})}function E(k,Q){return(0,f.Eb)(k)?(0,h.z)(`/alerting/${encodeURIComponent(k.name)}/${encodeURIComponent((0,g.PH)(Q.name))}/find`):window.location.href.split("?")[0]}function D(k){return k.reduce((Q,{key:ee,value:ae})=>(Q[ee]=ae,Q),{})}const b=k=>{const Q=k.queryString===void 0?void 0:String(k.queryString),ee=k.alertState===void 0?void 0:String(k.alertState),ae=k.dataSource===void 0?void 0:String(k.dataSource),Z=k.ruleType===void 0?void 0:String(k.ruleType),ne=k.groupBy===void 0?void 0:String(k.groupBy).split(",");return{queryString:Q,alertState:ee,dataSource:ae,groupBy:ne,ruleType:Z}},P=k=>({queryString:k.get("queryString")??void 0,contactPoint:k.get("contactPoint")??void 0}),y=k=>{const Q=k.queryString===void 0?void 0:String(k.queryString),ee=k.silenceState===void 0?void 0:String(k.silenceState);return{queryString:Q,silenceState:ee}};function T(k){return Object.entries(k).map(([Q,ee])=>({key:Q,value:ee}))}function M(k,Q,ee){const ae=new URLSearchParams(ee);return Q&&ae.set(l.DD,Q),`${k}?${ae.toString()}`}const I=k=>k.replace(/\"/g,'\\"');function x(k){return k.startsWith('"')&&k.endsWith('"')?I(k):`"${I(k)}"`}function S(k,Q){const ee={alertname:Q.name,...Q.labels};return O(k,ee)}function O(k,Q){const ee=new URLSearchParams;return ee.append("alertmanager",k),(0,c.J9)(Q).forEach((Z,ne)=>ee.append(ne,Z)),(0,h.c)("/alerting/silence/new",ee)}function C(k){return(0,h.c)(`/datasources/edit/${k}`)}function L(k){return(0,h.c)(`/dashboards/f/${k}`)}function U(k,Q){return(0,h.c)(`/dashboards/f/${k}/${Q}/alerting`)}function R(k){return(0,h.c)(`/dashboards/f/${k.uid}/settings`)}function B(k){return(0,h.c)(`/d/${encodeURIComponent(k)}`)}function H(k,Q,ee={}){const ae=new URLSearchParams(ee);return(0,h.c)(`/d/${encodeURIComponent(k)}`,ae)}function W(k,Q,ee,ae=1e3){const Z=new Date().getTime(),ne=()=>k().catch(q=>{if(Q(q)&&new Date().getTime()-Z<ee)return new Promise(te=>setTimeout(te,ae)).then(ne);throw q});return ne()}const N={[i.Gi.Alerting]:1,[i.cF.Firing]:1,[i.Gi.Error]:1,[i.Gi.Pending]:2,[i.cF.Pending]:2,[i.cF.Inactive]:2,[i.Gi.NoData]:3,[i.Gi.Normal]:4};function V(k,Q){if(k===d.xB.Importance)return(0,t.sortBy)(Q,ae=>[N[(0,i.lh)(ae.state)],(0,u.RI)(ae).toLocaleLowerCase()]);if(k===d.xB.TimeAsc)return(0,t.sortBy)(Q,ae=>[new Date(ae.activeAt)||new Date,(0,u.RI)(ae).toLocaleLowerCase()]);if(k===d.xB.TimeDesc)return(0,t.sortBy)(Q,ae=>[new Date(ae.activeAt)||new Date,(0,u.RI)(ae).toLocaleLowerCase()]).reverse();const ee=(0,t.sortBy)(Q,ae=>(0,u.RI)(ae).toLocaleLowerCase());return k===d.xB.AlphaDesc&&ee.reverse(),ee}function G(){return s.$.buildInfo.edition===o.r.OpenSource}function _(){return s.$.buildInfo.env==="development"}function K(k){return"message"in k}function j(k){return(0,r.NF)(k)?k.data.message:K(k)?k.message:String(k)}},88467:(Y,A,e)=>{"use strict";e.d(A,{$I:()=>l,BU:()=>b,CZ:()=>h,J7:()=>d,ML:()=>P,Vf:()=>E,Xw:()=>i,jA:()=>g,p0:()=>p,t4:()=>D,v5:()=>f});var t=e(30038),n=e(26272),o=e(17172),s=e(10096),r=e(25027);const g=Object.freeze({loading:!1,result:void 0,error:void 0,dispatched:!1});function u(y,T=g,M){if(y.pending.match(M))return{result:T.result,loading:!0,error:T.error,dispatched:!0,requestId:M.meta.requestId};if(y.fulfilled.match(M)){if(T.requestId===void 0||T.requestId===M.meta.requestId)return{...T,result:M.payload,loading:!1,error:void 0}}else if(y.rejected.match(M)&&T.requestId===M.meta.requestId)return{...T,loading:!1,error:M.error};return T}function d(y,T){return(0,t.Z0)({name:y,initialState:g,reducers:{},extraReducers:M=>M.addDefaultCase((I,x)=>u(T,I,x))})}function i(y,T,M){return(0,t.Z0)({name:y,initialState:{},reducers:{},extraReducers:I=>I.addDefaultCase((x,S)=>{if((0,t.$S)(T)(S)){const O=S,C=M(O.meta.arg);return{...x,[C]:u(T,x[C],O)}}return x})})}function l(y){return y.catch(T=>{throw{message:h(T),code:T.statusCode}})}function f(y,T){return y.then(M=>(T.successMessage&&s.lE.emit(n.r1.alertSuccess,[T.successMessage]),M)).catch(M=>{const I=h(M);throw s.lE.emit(n.r1.alertError,[`${T.errorMessage??"Error"}: ${I}`]),M})}const c="Unknown Error";function h(y){if((0,o.NF)(y))if(y.data?.message){let M=y.data?.message;return typeof y.data?.error=="string"&&(M+=`; ${y.data.error}`),M}else{if(Array.isArray(y.data)&&y.data.length&&y.data[0]?.message)return y.data.map(M=>M?.message).filter(M=>!!M).join(" ");if(y.statusText)return y.statusText}const T=y?.message;return T||((0,r.fH)(r.le.unknownMessageFromError,{error:JSON.stringify(y)}),c)}function p(y){return Object.values(y).every(m)}function m(y){return y.dispatched&&!y.loading}function a(y){return Object.values(y).every(v)}function v(y){return y.dispatched&&!y.loading&&!y.error}function E(y){return Object.values(y).some(P)}function D(y){return Object.values(y).some(T=>T.dispatched)}function b(y){return Object.values(y).some(v)}function P(y){return y?y.dispatched&&y.loading:!1}},63066:(Y,A,e)=>{"use strict";e.d(A,{Bu:()=>Q,IJ:()=>T,J6:()=>_,JE:()=>S,Q8:()=>y,QX:()=>U,Qk:()=>R,Rk:()=>ee,XI:()=>B,Z9:()=>C,ir:()=>ae,l1:()=>I,mp:()=>G,pY:()=>P,qO:()=>H});var t=e(2543),n=e.n(t),o=e(43127),s=e(65879),r=e(32264),g=e(19347),u=e(26657),d=e(79065),i=e(21969),l=e(74730),f=e(66718),c=e(94822),h=e(55907),p=e(86590),m=e(75471),a=e(55740),v=e(57220),E=e(56361),D=e(23662),b=e(25968);const P="1m",y="grafana.alerting.manualRouting",T=()=>{const{canCreateGrafanaRules:Z,canCreateCloudRules:ne}=(0,m.Q9)();return Object.freeze({name:"",uid:"",labels:[{key:"",value:""}],annotations:a.kl,dataSourceName:null,type:Z?p.Z.grafana:ne?p.Z.cloudAlerting:void 0,group:"",folder:null,queries:[],recordingRulesQueries:[],condition:"",noDataState:c.Q8.NoData,execErrState:c.Q8.Error,evaluateFor:"5m",evaluateEvery:P,manualRouting:M(),contactPoints:{},overrideGrouping:!1,overrideTimings:!1,muteTimeIntervals:[],namespace:"",expression:"",forTime:1,forTimeUnit:"m"})},M=()=>r.$.featureToggles.alertingSimplifiedRouting??!1?localStorage.getItem(y)!=="false":!1;function I(Z){const{name:ne,expression:q,forTime:te,forTimeUnit:re,keepFiringForTime:de,keepFiringForTimeUnit:ie,type:ge}=Z;if(ge===p.Z.cloudAlerting){let ve;return de&&ie&&(ve=`${de}${ie}`),{alert:ne,for:`${te}${re}`,keep_firing_for:ve,annotations:(0,E.Sl)(Z.annotations||[]),labels:(0,E.Sl)(Z.labels||[]),expr:q}}else if(ge===p.Z.cloudRecording)return{record:ne,labels:(0,E.Sl)(Z.labels||[]),expr:q};throw new Error(`unexpected rule type: ${ge}`)}function x(Z,ne){const q=[...(0,E.KT)(Z||{})];return ne&&q.push({key:"",value:""}),q}function S(Z){const ne=[...Z];return a.kl.map(te=>te.key).forEach((te,re)=>{const de=ne.findIndex(ie=>ie.key===te);if(de===-1){const ie={key:te,value:""};ne.splice(re,0,ie)}else de!==re&&ne.splice(re,0,ne.splice(de,1)[0])}),ne}function O(Z,ne){if(ne?.grafana?.selectedContactPoint&&Z)return{receiver:ne?.grafana?.selectedContactPoint,mute_time_intervals:ne?.grafana?.muteTimeIntervals,group_by:ne?.grafana?.overrideGrouping?ne?.grafana?.groupBy:void 0,group_wait:ne?.grafana?.overrideTimings&&ne?.grafana?.groupWaitValue?ne?.grafana?.groupWaitValue:void 0,group_interval:ne?.grafana?.overrideTimings&&ne?.grafana?.groupIntervalValue?ne?.grafana?.groupIntervalValue:void 0,repeat_interval:ne?.grafana?.overrideTimings&&ne?.grafana?.repeatIntervalValue?ne?.grafana?.repeatIntervalValue:void 0}}function C(Z){const{name:ne,condition:q,noDataState:te,execErrState:re,evaluateFor:de,queries:ie,isPaused:ge,contactPoints:ve,manualRouting:ye}=Z;if(q){const pe=O(ye,ve);return{grafana_alert:{title:ne,condition:q,no_data_state:te,exec_err_state:re,data:ie.map(j),is_paused:!!ge,notification_settings:pe},for:de,annotations:(0,E.Sl)(Z.annotations||[]),labels:(0,E.Sl)(Z.labels||[])}}throw new Error("Cannot create rule without specifying alert condition")}function L(Z){const ne=Z.notification_settings?{selectedContactPoint:Z.notification_settings.receiver,muteTimeIntervals:Z.notification_settings.mute_time_intervals??[],overrideGrouping:Array.isArray(Z.notification_settings.group_by)&&Z.notification_settings.group_by.length>0,overrideTimings:[Z.notification_settings.group_wait,Z.notification_settings.group_interval,Z.notification_settings.repeat_interval].some(Boolean),groupBy:Z.notification_settings.group_by||[],groupWaitValue:Z.notification_settings.group_wait||"",groupIntervalValue:Z.notification_settings.group_interval||"",repeatIntervalValue:Z.notification_settings.repeat_interval||""}:void 0;return ne?{[v.hY]:ne}:void 0}function U(Z){const{ruleSourceName:ne,namespace:q,group:te,rule:re}=Z,de=T();if((0,v.z2)(ne))if((0,D.lT)(re)){const ie=re.grafana_alert,ge=L(ie);return{...de,name:ie.title,type:p.Z.grafana,group:te.name,evaluateEvery:te.interval||de.evaluateEvery,evaluateFor:re.for||"0",noDataState:ie.no_data_state,execErrState:ie.exec_err_state,queries:ie.data,condition:ie.condition,annotations:S(x(re.annotations,!1)),labels:x(re.labels,!0),folder:{title:q,uid:ie.namespace_uid},isPaused:ie.is_paused,contactPoints:ge,manualRouting:!!ge}}else throw new Error("Unexpected type of rule for grafana rules source");else if((0,D.$y)(re)){const ge={refId:"A",datasourceUid:(0,g.l)().getInstanceSettings(ne)?.uid??"",queryType:"",relativeTimeRange:(0,o.Cn)(),expr:re.expr,model:{refId:"A",hide:!1,expr:re.expr}},ve=R(re);return{...de,...ve,queries:[ge],annotations:S(x(re.annotations,!1)),type:p.Z.cloudAlerting,dataSourceName:ne,namespace:q,group:te.name}}else if((0,D.i7)(re)){const ie=B(re);return{...de,...ie,type:p.Z.cloudRecording,dataSourceName:ne,namespace:q,group:te.name}}else throw new Error("Unexpected type of rule for cloud rules source")}function R(Z){const ne=T(),[q,te]=Z.for?(0,b.P1)(Z.for):[0,"s"],[re,de]=Z.keep_firing_for?(0,b.P1)(Z.keep_firing_for):[ne.keepFiringForTime,ne.keepFiringForTimeUnit];return{name:Z.alert,expression:Z.expr,forTime:q,forTimeUnit:te,keepFiringForTime:re,keepFiringForTimeUnit:de,annotations:x(Z.annotations,!1),labels:x(Z.labels,!0)}}function B(Z){return{name:Z.record,expression:Z.expr,labels:x(Z.labels,!0)}}const H=()=>{const Z=(0,v.y9)();if(!Z)return[...N("A","B")];const ne=(0,o.Cn)();return[{refId:"A",datasourceUid:Z.uid,queryType:"",relativeTimeRange:ne,model:{refId:"A"}},...N("B","C")]},W=Z=>{const ne=getDefaultRelativeTimeRange();return[{refId:"A",datasourceUid:Z[0]?.uid||"",queryType:"",relativeTimeRange:ne,model:{refId:"A"}}]},N=(...Z)=>{const ne=Z[0],q=Z[1],te={refId:Z[0],type:f.Tz.reduce,datasource:{uid:f.Uj,type:u.dR.type},conditions:[{type:"query",evaluator:{params:[],type:h.p.IsAbove},operator:{type:"and"},query:{params:[ne]},reducer:{params:[],type:"last"}}],reducer:"last",expression:"A"},re={refId:q,type:f.Tz.threshold,datasource:{uid:f.Uj,type:u.dR.type},conditions:[{type:"query",evaluator:{params:[0],type:h.p.IsAbove},operator:{type:"and"},query:{params:[q]},reducer:{params:[],type:"last"}}],expression:ne};return[{refId:ne,datasourceUid:f.Uj,queryType:"",model:te},{refId:q,datasourceUid:f.Uj,queryType:"",model:re}]},V=async(Z,ne,q,te,re,de)=>{const ie=[];for(const ge of Z){const ve=await(0,g.l)().get(ge.datasource?.uid?ge.datasource:te),ye={uid:ve.uid,type:ve.type},pe=s.relativeToTimeRange(ne),{interval:le,intervalMs:Me}=K(pe,de??ve.interval,re),De={__interval:{text:le,value:le},__interval_ms:{text:Me,value:Me},...q},Re=ve.interpolateVariablesInQueries?ve.interpolateVariablesInQueries([ge],De)[0]:ge;if(ye.uid===f.Uj){const me={refId:Re.refId,queryType:"",relativeTimeRange:ne,datasourceUid:f.Uj,model:Re};ie.push(me)}else{const me=(0,g.l)().getInstanceSettings(ye);if(me&&me.meta.alerting){const he={refId:Re.refId,queryType:Re.queryType??"",relativeTimeRange:ne,datasourceUid:me.uid,model:{...Re,maxDataPoints:re,intervalMs:Me}};ie.push(he)}}}return ie},G=async(Z,ne)=>{const{targets:q}=Z;if(!Z.id||!ne.uid)return;const te=s.timeRangeToRelative(s.convertRawToRange(ne.time)),re=await V(q,te,Z.scopedVars||{},Z.datasource??void 0,Z.maxDataPoints??void 0,Z.interval??void 0);if(!re.length||!re.find(ve=>ve.datasourceUid!==f.Uj))return;if(!re.find(ve=>ve.datasourceUid===f.Uj)){const[ve,ye]=N((0,i.W3)(re),"-");re.push(ve);const[pe,le]=N(ve.refId,(0,i.W3)(re));re.push(le)}const{folderTitle:de,folderUid:ie}=ne.meta;return{type:p.Z.grafana,folder:ie&&de?{uid:ie,title:de}:void 0,queries:re,name:Z.title,condition:re[re.length-1].refId,annotations:[{key:a.YH.dashboardUID,value:ne.uid},{key:a.YH.panelID,value:String(Z.id)}]}},_=async Z=>{if(!Z.state.key)return;const ne=d.jh.getTimeRange(Z),q=(0,l.un)(Z);if(!q)return;const{queries:te,datasource:re,maxDataPoints:de,minInterval:ie}=q.state,ge=(0,l.YQ)(Z);if(!ge||!ge.state.uid)return;const ve=await V(te,s.timeRangeToRelative(s.convertRawToRange(ne.state.value.raw)),{__sceneObject:{value:Z}},re,de,ie);if(!ve.length||!ve.find(Me=>Me.datasourceUid!==f.Uj))return;if(!ve.find(Me=>Me.datasourceUid===f.Uj)){const[Me,De]=N((0,i.W3)(ve),"-");ve.push(Me);const[Re,me]=N(Me.refId,(0,i.W3)(ve));ve.push(me)}const{folderTitle:ye,folderUid:pe}=ge.state.meta;return{type:p.Z.grafana,folder:pe&&ye?{uid:pe,title:ye}:void 0,queries:ve,name:Z.state.title,condition:ve[ve.length-1].refId,annotations:[{key:a.YH.dashboardUID,value:ge.state.uid},{key:a.YH.panelID,value:String((0,l.Cs)(Z))}]}};function K(Z,ne,q){return q?s.calculateInterval(Z,q,ne):ne&&s.intervalToMs(ne)>1e3?{interval:ne,intervalMs:s.intervalToMs(ne)}:{interval:"1s",intervalMs:1e3}}function j(Z){const ne=Z.model;return k(ne)&&ne.instant&&ne.range?{...Z,model:{...ne,range:!0,instant:!1}}:Z}function k(Z){return"expr"in Z&&"instant"in Z&&"range"in Z}function Q(Z){return"expr"in Z}const ee=Z=>({...Z,queries:Z.queries?.map(ne=>(0,t.omit)(ne,"model.hide"))});function ae(Z){return ee(U(Z))}},18461:(Y,A,e)=>{"use strict";e.d(A,{$9:()=>D,LC:()=>l,Ns:()=>P,P1:()=>g,PH:()=>m,UP:()=>d,VY:()=>M,Yd:()=>i,c:()=>a,qg:()=>v,uE:()=>I,x6:()=>E});var t=e(2543),n=e.n(t),o=e(12131),s=e(57220),r=e(23662);function g(x,S,O,C){return(0,r.lT)(C)?{uid:C.grafana_alert.uid,ruleSourceName:"grafana"}:{ruleSourceName:x,namespace:S,groupName:O,ruleName:(0,r.$y)(C)?C.alert:C.record,rulerRuleHash:P(C)}}function u(x,S,O,C){return{ruleSourceName:x,namespace:S,groupName:O,ruleName:C.name,ruleHash:y(C)}}function d(x,S){const O=S.namespace.name,C=S.group.name;if(S.rulerRule)return g(x,O,C,S.rulerRule);if(S.promRule)return u(x,O,C,S.promRule);throw new Error("Could not create an id for a rule that is missing both `rulerRule` and `promRule`.")}function i(x){return g(x.ruleSourceName,x.namespace,x.group.name,x.rule)}function l(x,S){return(0,r.A4)(x)&&(0,r.A4)(S)?x.uid===S.uid:(0,r.X4)(x)&&(0,r.X4)(S)?x.groupName===S.groupName&&x.namespace===S.namespace&&x.ruleName===S.ruleName&&x.rulerRuleHash===S.rulerRuleHash&&x.ruleSourceName===S.ruleSourceName:(0,r.Mj)(x)&&(0,r.Mj)(S)?x.groupName===S.groupName&&x.namespace===S.namespace&&x.ruleName===S.ruleName&&x.ruleHash===S.ruleHash&&x.ruleSourceName===S.ruleSourceName:!1}const f="cri",c="pri";function h(x){return x.replace(/\$/g,"_DOLLAR_")}function p(x){return x.replace(/\_DOLLAR\_/g,"$")}function m(x){return x.replace(/\//g,"").replace(/\\/g,"")}function a(x){return x.replace(/\x1f/g,"/").replace(/\x1e/g,"\\")}function v(x,S=!1){const C=(S?decodeURIComponent(x):x).split("$");if(C.length===1)return{uid:x,ruleSourceName:"grafana"};if(C.length===6){const[L,U,R,B,H,W]=C.map(p).map(a);if(L===f)return{ruleSourceName:U,namespace:R,groupName:B,ruleName:H,rulerRuleHash:W};if(L===c)return{ruleSourceName:U,namespace:R,groupName:B,ruleName:H,ruleHash:W}}throw new Error(`Failed to parse rule location: ${x}`)}function E(x,S=!1){if(x)try{return v(x,S)}catch{return}}function D(x){return(0,r.A4)(x)?x.uid:(0,r.X4)(x)?[f,x.ruleSourceName,x.namespace,x.groupName,x.ruleName,x.rulerRuleHash].map(String).map(h).map(m).join("$"):[c,x.ruleSourceName,x.namespace,x.groupName,x.ruleName,x.ruleHash].map(String).map(h).map(m).join("$")}function b(x){let S=0;if(x.length===0)return S;for(let O=0;O<x.length;O++){const C=x.charCodeAt(O);S=(S<<5)-S+C,S=S&S}return S}function P(x){if((0,r.i7)(x))return b(JSON.stringify([x.record,x.expr,T(x.labels)])).toString();if((0,r.$y)(x))return b(JSON.stringify([x.alert,x.expr,T(x.annotations),T(x.labels)])).toString();if((0,r.lT)(x))return x.grafana_alert.uid;throw new Error("only recording and alerting ruler rules can be hashed")}function y(x){if((0,r.KB)(x))return b(JSON.stringify([x.type,x.query,T(x.labels)])).toString();if((0,r.Z8)(x))return b(JSON.stringify([x.type,x.query,T(x.annotations),T(x.labels)])).toString();throw new Error("only recording and alerting rules can be hashed")}function T(x){return JSON.stringify(Object.entries(x||{}).sort((S,O)=>S[0].localeCompare(O[0])))}function M(x){return(0,r.A4)(x)?s.hY:x.ruleSourceName}function I(x){const{pathname:S=""}=o.Ny.getLocation(),{id:O}=x;return O?(0,t.nth)(S.split("/"),-2):void 0}},23662:(Y,A,e)=>{"use strict";e.d(A,{$7:()=>a,$y:()=>f,A4:()=>v,HH:()=>p,KB:()=>l,Mj:()=>b,Om:()=>O,RI:()=>m,TU:()=>M,Wy:()=>x,X4:()=>E,XI:()=>y,YN:()=>C,Z8:()=>i,dS:()=>I,f6:()=>P,i7:()=>c,jg:()=>U,lT:()=>h,nf:()=>D,qz:()=>L});var t=e(2543),n=e.n(t),o=e(43585),s=e(94822),r=e(28475),g=e(55740),u=e(57220),d=e(25968);function i(B){return typeof B=="object"&&B.type===s.JS.Alerting}function l(B){return typeof B=="object"&&B.type===s.JS.Recording}function f(B){return typeof B=="object"&&"alert"in B}function c(B){return typeof B=="object"&&"record"in B}function h(B){return typeof B=="object"&&"grafana_alert"in B}function p(B){return B.rulerRule&&h(B.rulerRule)&&!!B.rulerRule.grafana_alert.is_paused}function m(B){return JSON.stringify(B.labels)}function a(B){return B.error&&B.error?.message?.includes(g.UU)}function v(B){return"uid"in B}function E(B){return"rulerRuleHash"in B}function D(B){return Object.values(s.JS).includes(B)}function b(B){return"ruleHash"in B}function P(B){switch(B){case"ok":return r.Jc.Ok;case"nodata":return r.Jc.NoData;case"error":case"err":return r.Jc.Error;case"unknown":return r.Jc.Unknown;default:return}}function y(B){return B===s.cF.Inactive?"Normal":(0,t.capitalize)(B)}const T=B=>B.reduce((H,{dataSourceName:W,name:N,groups:V})=>(V.forEach(({name:G,rules:_})=>{_.forEach(K=>{i(K)&&H.push({dataSourceName:W,namespaceName:N,groupName:G,rule:K})})}),H),[]),M=B=>i(B.promRule)?B.promRule:null,I=B=>B.reduce((H,{rulesSource:W,name:N,groups:V})=>(V.forEach(({name:G,rules:_})=>{_.forEach(K=>{K.promRule&&i(K.promRule)&&H.push({dataSourceName:(0,u.EV)(W),namespaceName:N,groupName:G,...K})})}),H),[]);function x(B){let H;return Object.values(o.O).includes(B)?H=B:H=(0,s.lh)(B),S[H]}const S={[s.cF.Inactive]:"good",[s.cF.Firing]:"bad",[s.cF.Pending]:"warning",[s.Gi.Alerting]:"bad",[s.Gi.Error]:"bad",[s.Gi.NoData]:"info",[s.Gi.Normal]:"good",[s.Gi.Pending]:"warning",[o.O.NoData]:"info",[o.O.Paused]:"warning",[o.O.Alerting]:"bad",[o.O.OK]:"good",[o.O.Unknown]:"info"};function O(B){return B?.alerts?B.alerts.reduce((H,W)=>{const N=(0,s.lh)(W.state)!==s.Gi.Normal;if(W.activeAt&&N){const V=new Date(W.activeAt);if(H===null||H.getTime()>V.getTime())return V}return H},null):null}function C(B){return Array.isArray(B.source_tenants)}function L(B){return h(B)?B.grafana_alert.title:f(B)?B.alert:c(B)?B.record:""}const U=(B,H)=>{const W={alertName:"",forDuration:"0s",evaluationsToFire:0};return h(B)?{alertName:B.grafana_alert.title,forDuration:B.for,evaluationsToFire:R(B.for,H)}:f(B)?{alertName:B.alert,forDuration:B.for??"0s",evaluationsToFire:R(B.for??"0s",H)}:W},R=(B,H)=>{const W=(0,d.ge)(H),N=(0,d.ge)(B);return N===0&&W!==0?1:W===0||N/W<1?0:Math.ceil(N/W)+1}},25968:(Y,A,e)=>{"use strict";e.d(A,{M9:()=>i,P1:()=>n,TN:()=>r,ge:()=>l,mo:()=>f,sc:()=>s,yl:()=>c});var t=e(41068);function n(h){const p=h.match(/(\d+)(\w+)/);if(p)return[Number(p[1]),p[2]];throw new Error(`Invalid interval description: ${h}`)}function o(h){const{sec:p,count:m}=describeInterval(h);return p*m}const s=Object.entries(t.y).map(([h,p])=>({label:h[0].toUpperCase()+h.slice(1),value:p}));function r(h){try{return i(h),!0}catch{return!1}}const g={ms:1,s:1e3,m:60*1e3,h:60*60*1e3,d:24*60*60*1e3,w:7*24*60*60*1e3,y:365*24*60*60*1e3},u=new RegExp(/^(?:(?<value>\d+)(?<type>ms|s|m|h|d|w|y))|0$/),d=new Error(`Must be of format "(number)(unit)", for example "1m", or just "0". Available units: ${Object.values(t.y).join(", ")}`);function i(h){let p=h,m=[];function a(E){const D=u.exec(E),b=D?.groups?.value&&D?.groups?.type;if(!D||!b)throw d;D&&D.groups?.value&&D.groups?.type&&(p=p.replace(D[0],""),m.push([Number(D.groups.value),D.groups.type])),p&&a(p)}if(a(h),!m.length)throw d;return m.reduce((E,[D,b])=>{const P=D*g[b];return E+P},0)}const l=h=>{try{return i(h)}catch{return 0}},f=h=>h.includes("0001-01-01T00");function c(h){return h%(1e3*60*60)===0?h/(1e3*60*60)+"h":h%(1e3*60)===0?h/(1e3*60)+"m":h%1e3===0?h/1e3+"s":h.toFixed()+"ms"}},3704:(Y,A,e)=>{"use strict";e.d(A,{c:()=>n,z:()=>o});var t=e(32264);function n(s,r){const u=new URLSearchParams(r).toString();return`${t.$.appSubUrl}${s}${u?`?${u}`:""}`}function o(s,r){const u=new URLSearchParams(r).toString();try{const d=new URL(t.$.appSubUrl,t.$.appUrl);return d.pathname=s,`${d.href}${u?`?${u}`:""}`}catch{return n(s,r)}}},10154:(Y,A,e)=>{"use strict";e.d(A,{Xm:()=>s,rJ:()=>o,vJ:()=>n,vy:()=>r});var t=e(17172);function n(g){return(0,t.AI)().post("/api/annotations",g)}function o(g){return(0,t.AI)().put(`/api/annotations/${g.id}`,g)}function s(g){return(0,t.AI)().delete(`/api/annotations/${g.id}`)}async function r(){return(await(0,t.AI)().get("/api/annotations/tags")).result.tags.map(({tag:u,count:d})=>({term:u,count:d}))}},82241:(Y,A,e)=>{"use strict";e.d(A,{A:()=>b});var t=e(32196),n=e(96540),o=e(75505),s=e(39070),r=e(76287),g=e(14578),u=e(62930),d=e(55852),i=e(14792),l=e(74856),f=e(34214),c=e(27302),h=e(42493),p=e(28240),m=e(8790),a=e(83195),v=e(56034),E=e(88323);class D extends n.PureComponent{constructor(y){super(y),this.updateFields=()=>{const T=this.props.response?.panelData,M=T?.series?.[0]??T?.annotations?.[0];if(M&&M.fields){const I=M.fields.map(x=>{const S=(0,p.Ct)(x,M);let O="";for(let C=0;C<M.length;C++){if(C>0&&(O+=", "),C>2){O+="...";break}O+=x.values[C]}return O.length>50&&(O=O.substring(0,50)+"..."),{label:`${S} (${x.type})`,value:S,description:O}});this.setState({fieldNames:I})}},this.onFieldSourceChange=(T,M)=>{const I=this.props.mappings||{},x=I[T]||{};this.props.change({...I,[T]:{...x,source:M.value||m.V.Field}})},this.onFieldNameChange=(T,M)=>{const I=this.props.mappings||{};if(!M){const S={...this.props.mappings};delete S[T],this.props.change(S);return}const x=I[T]||{};this.props.change({...I,[T]:{...x,value:M.value,source:m.V.Field}})},this.state={fieldNames:[]}}componentDidMount(){this.updateFields()}componentDidUpdate(y){y.response!==this.props.response&&this.updateFields()}renderRow(y,T,M){const{fieldNames:I}=this.state;let x=[...I];const S=T.value;let O=I.find(L=>S===L.value);S&&!O&&x.push({label:S,value:S});let C=M?M[y.key]:"";if(C&&y.key.startsWith("time")){const L=(0,a.j_)("dateTimeAsIso");C=(0,a.cN)(L(C))}return C==null&&(C=""),n.createElement("tr",{key:y.key},n.createElement("td",null,y.label||y.key," ",y.help&&n.createElement(v.m,{content:y.help},n.createElement(g.I,{name:"info-circle"}))),n.createElement("td",null,n.createElement(E.l6,{value:O,options:x,placeholder:y.placeholder||y.key,onChange:L=>{this.onFieldNameChange(y.key,L)},noOptionsMessage:"Unknown field names",allowCustomValue:!0,isClearable:!0})),n.createElement("td",null,`${C}`))}render(){const y=this.props.response?.events?.[0],T=this.props.mappings||{};return n.createElement("table",{className:"filter-table"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Annotation"),n.createElement("th",null,"From"),n.createElement("th",null,"First Value"))),n.createElement("tbody",null,h.kj.map(M=>this.renderRow(M,T[M.key]||{},y))))}}class b extends n.PureComponent{constructor(){super(...arguments),this.state={},this.onRunQuery=async()=>{const{datasource:y,annotation:T}=this.props;if((0,h.E7)(y))return;const M=(0,i.UA)().getCurrent();if(!M)return;this.setState({running:!0});const I=await(0,o.s)((0,c.b)({range:(0,l.jG)().timeRange(),panel:new f.a({}),dashboard:M},y,T));this.setState({running:!1,response:I})},this.onQueryChange=y=>{this.props.onChange({...this.props.annotation,target:y})},this.onMappingChange=y=>{this.props.onChange({...this.props.annotation,mappings:y})},this.onAnnotationChange=y=>{this.props.onChange(y)}}componentDidMount(){this.verifyDataSource()}componentDidUpdate(y){this.props.annotation!==y.annotation&&!(0,h.E7)(this.props.datasource)&&this.verifyDataSource()}verifyDataSource(){const{datasource:y,annotation:T}=this.props,I={...h.CU,...y.annotations}.prepareAnnotation(T);I!==T?this.props.onChange(I):this.onRunQuery()}renderStatus(){const{response:y,running:T}=this.state;let M="alert-info",I="...",x;if(T||y?.panelData?.state===s.Gu.Loading||!y)I="loading...";else{const{events:S,panelData:O}=y;if(O?.error)M="alert-error",x="exclamation-triangle",I=O.error.message??"error";else if(!S?.length)M="alert-warning",x="exclamation-triangle",I="No events found";else{const C=O?.series?.[0]??O?.annotations?.[0];I=`${S.length} events (from ${C?.fields.length} fields)`}}return n.createElement("div",{className:(0,t.cx)(M,(0,t.css)`
            margin: 4px 0px;
            padding: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          `)},n.createElement("div",null,x&&n.createElement(n.Fragment,null,n.createElement(g.I,{name:x}),"\xA0"),I),n.createElement("div",null,T?n.createElement(u.y,null):n.createElement(d.$n,{variant:"secondary",size:"xs",onClick:this.onRunQuery},"TEST")))}render(){const{datasource:y,annotation:T,datasourceInstanceSettings:M}=this.props,{response:I}=this.state;let x=y.annotations?.QueryEditor||y.components?.QueryEditor;if(!x)return n.createElement("div",null,"Annotations are not supported. This datasource needs to export a QueryEditor");const S={...y.annotations?.getDefaultQuery?.(),...T.target??{refId:"Anno"}};return n.createElement(n.Fragment,null,n.createElement(r.p,{instanceSettings:M},n.createElement(x,{key:y?.name,query:S,datasource:y,onChange:this.onQueryChange,onRunQuery:this.onRunQuery,data:I?.panelData,range:(0,l.jG)().timeRange(),annotation:T,onAnnotationChange:this.onAnnotationChange})),(0,h.JX)(y)&&n.createElement(n.Fragment,null,this.renderStatus(),n.createElement(D,{response:I,mappings:T.mappings,change:this.onMappingChange})))}}},27302:(Y,A,e)=>{"use strict";e.d(A,{b:()=>l});var t=e(62467),n=e(69862),o=e(81160),s=e(65879),r=e(41987),g=e(39374),u=e(42493);let d=100;function i(){return"AQ"+d++}function l(f,c,h){const p={...u.CU,...c.annotations},m={...p.getDefaultQuery?.(),...h},a=p.prepareAnnotation(m);if(!a)return(0,t.of)({});const v=p.prepareQuery(a);if(!v)return(0,t.of)({});const E=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,D=s.calculateInterval(f.range,E,c.interval),b={__interval:{text:D.interval,value:D.interval},__interval_ms:{text:D.intervalMs.toString(),value:D.intervalMs},__annotation:{text:a.name,value:a}},P={startTime:Date.now(),requestId:i(),range:f.range,maxDataPoints:E,scopedVars:b,...D,app:r.Jk.Dashboard,timezone:f.dashboard.timezone,targets:[{...v,refId:"Anno"}]};return(0,g.BN)(c,P).pipe((0,n.Z)(y=>{const T=y?.series.length?y.series:y.annotations;return T?.length?p.processEvents(a,T).pipe((0,o.T)(M=>({panelData:y,events:M}))):(0,t.of)({panelData:y,events:[]})}))}},42493:(Y,A,e)=>{"use strict";e.d(A,{CU:()=>f,E7:()=>D,JX:()=>E,kj:()=>h});var t=e(2543),n=e.n(t),o=e(62467),s=e(69862),r=e(81160),g=e(57934),u=e(11261),d=e(28240),i=e(8790),l=e(2913);const f={prepareAnnotation:b=>{if((0,t.isString)(b?.query)){const{query:P,...y}=b;return{...y,target:{refId:"annotation_query",query:P},mappings:{}}}return b},prepareQuery:b=>b.target,processEvents:(b,P)=>a(P,b.mappings)};function c(){return b=>b.pipe((0,s.Z)(P=>{if(!P?.length)return(0,o.of)(void 0);if(P.length===1)return(0,o.of)(P[0]);const y={interpolate:T=>T};return(0,o.of)(P).pipe(g.c.mergeTransformer.operator({},y),(0,r.T)(T=>T[0]))}))}const h=[{key:"time",field:b=>b.fields.find(P=>P.type===u.PU.time),placeholder:"time, or the first time field"},{key:"timeEnd",label:"end time",help:"When this field is defined, the annotation will be treated as a range"},{key:"title"},{key:"text",field:b=>b.fields.find(P=>P.type===u.PU.string),placeholder:"text, or the first text field"},{key:"tags",split:",",help:"The results will be split on comma (,)"},{key:"id"}],p=[{key:"color"},{key:"isRegion"},{key:"source"}],m=[...l.$W.publicDashboardAccessToken?p:[],...h,{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"},{key:"dashboardId"},{key:"dashboardUID"}];function a(b,P){return(0,o.of)(b).pipe(c(),(0,r.T)(y=>{if(!y?.length)return[];let T=!1,M=!1;const I={};for(const O of y.fields){const C=(0,d.Ct)(O,y);I[C.toLowerCase()]=O}P||(P={});const x=[];for(const O of m){const C=P[O.key]||{};if(C.source===i.V.Skip)continue;const L={key:O.key,split:O.split};if(C.source===i.V.Text)L.text=C.value;else{const U=(C.value||O.key).toLowerCase();L.field=I[U],!L.field&&O.field&&(L.field=O.field(y))}(L.field||L.text)&&(x.push(L),L.key==="time"?T=!0:L.key==="text"&&(M=!0))}if(!T||!M)return console.error("Cannot process annotation fields. No time or text present."),[];const S=[];for(let O=0;O<y.length;O++){const C={type:"default",color:"red"};for(const L of x){let U;if(L.text)U=L.text;else if(L.field&&(U=L.field.values[O],U!==void 0&&L.regex)){const R=L.regex.exec(U);R&&(U=R[1]?R[1]:R[0])}U!=null&&(L.split&&typeof U=="string"&&(U=U.split(",")),C[L.key]=U)}S.push(C)}return S}))}const v=["prometheus","loki","elasticsearch","grafana-opensearch-datasource"];function E(b){const{type:P}=b;return!(P==="datasource"||v.includes(P))}function D(b){const{type:P}=b;return v.includes(P)}},93584:(Y,A,e)=>{"use strict";e.d(A,{Ay:()=>l,QB:()=>d,Ri:()=>u,Sf:()=>s,cV:()=>r,h8:()=>g});var t=e(30038);const n={hasFetched:!1,includeExpired:!1,keys:[],keysIncludingExpired:[],searchQuery:"",migrationResult:{total:0,migrated:0,failed:0,failedApikeyIDs:[0],failedDetails:[]}},o=(0,t.Z0)({name:"apiKeys",initialState:n,reducers:{apiKeysLoaded:(f,c)=>{const{keys:h,keysIncludingExpired:p}=c.payload,m=c.payload.keys.length===0&&c.payload.keysIncludingExpired.length>0?!0:f.includeExpired;return{...f,hasFetched:!0,keys:h,keysIncludingExpired:p,includeExpired:m}},setSearchQuery:(f,c)=>({...f,searchQuery:c.payload}),includeExpiredToggled:f=>({...f,includeExpired:!f.includeExpired}),isFetching:f=>({...f,hasFetched:!1}),setMigrationResult:(f,c)=>({...f,migrationResult:c.payload})}}),{apiKeysLoaded:s,includeExpiredToggled:r,isFetching:g,setSearchQuery:u,setMigrationResult:d}=o.actions,l={apiKeys:o.reducer}},73399:(Y,A,e)=>{"use strict";e.d(A,{getAuthProviderStatus:()=>l,getRegisteredAuthProviders:()=>u,initAuthConfig:()=>f});var t=e(10096),n=e(27677),o=e(80348);const s=[],r={};function g(h,p){s.find(m=>m.id===h.id)||(s.push(h),p&&(r[h.id]=p))}function u(){return s}function d(h){return s.find(p=>p.id===h)}function i(h){const p=[];for(const[m,a]of Object.entries(h)){const v=s.find(E=>`auth.${E.id}`===m);if(v){const E={...a,providerId:v.id,displayName:a.name||v.displayName};p.push(E)}}return p}async function l(h){if(r[h]){const p=r[h];return p()}return{configured:!1,enabled:!1}}function f(){g({id:"ldap",type:"LDAP",protocol:"LDAP",displayName:"LDAP",configPath:"ldap"},c)}async function c(){if(t.TP.hasPermission(o.AccessControlAction.SettingsRead)){const p=(await(0,n.AI)().get("/api/admin/settings"))["auth.ldap"]||{};return{configured:p.enabled==="true",enabled:p.enabled==="true",hide:p.enabled!=="true"}}return{configured:!1,enabled:!1}}},20604:(Y,A,e)=>{"use strict";e.d(A,{Ay:()=>p,MH:()=>u,Oy:()=>c,TO:()=>r,jA:()=>s,sr:()=>g});var t=e(30038);const n={settings:{},providerStatuses:{},isLoading:!1,providers:[]},o=(0,t.Z0)({name:"authConfig",initialState:n,reducers:{settingsUpdated:(m,a)=>({...m,settings:a.payload}),providerStatusesLoaded:(m,a)=>({...m,providerStatuses:a.payload}),loadingBegin:m=>({...m,isLoading:!0}),loadingEnd:m=>({...m,isLoading:!1}),setError:(m,a)=>({...m,updateError:a.payload}),resetError:m=>({...m,updateError:void 0}),setWarning:(m,a)=>({...m,warning:a.payload}),resetWarning:m=>({...m,warning:void 0}),providersLoaded:(m,a)=>({...m,providers:a.payload})}}),{settingsUpdated:s,providerStatusesLoaded:r,loadingBegin:g,loadingEnd:u,setError:d,resetError:i,setWarning:l,resetWarning:f,providersLoaded:c}=o.actions,p={authConfig:o.reducer}},55314:(Y,A,e)=>{"use strict";e.d(A,{G2:()=>D,Ko:()=>v,Vc:()=>T,aF:()=>P,cU:()=>m,e8:()=>M,hT:()=>h.hT,iB:()=>I,kH:()=>b,uz:()=>E,vZ:()=>a,wt:()=>y});var t=e(93020),n=e(75505),o=e(71733),s=e(39070),r=e(17172),g=e(12131),u=e(82467),d=e(3169),i=e(10096),l=e(6473),f=e(37690),c=e(92955),h=e(51066);function p({baseURL:x}){async function S(O){try{const{data:C,...L}=await(0,n.s)((0,r.AI)().fetch({...O,url:x+O.url,showErrorAlert:O.showErrorAlert}));return{data:C,meta:L}}catch(C){return O.manageError?O.manageError(C):{error:C}}}return S}const m=(0,t.xP)({tagTypes:["getFolder"],reducerPath:"browseDashboardsAPI",baseQuery:p({baseURL:"/api"}),endpoints:x=>({getFolder:x.query({providesTags:(S,O,C)=>[{type:"getFolder",id:C}],query:S=>({url:`/folders/${S}`,params:{accesscontrol:!0}})}),newFolder:x.mutation({query:({title:S,parentUid:O})=>({method:"POST",url:"/folders",data:{title:S,parentUid:O}}),onQueryStarted:({parentUid:S},{queryFulfilled:O,dispatch:C})=>{O.then(async({data:L})=>{await i.TP.fetchUserPermissions(),C((0,u.dx)((0,d.tZ)("Folder created"))),C((0,f.bw)({parentUID:S,pageSize:c.md})),g.Ny.push(o.I.stripBaseFromUrl(L.url))})}}),saveFolder:x.mutation({invalidatesTags:["getFolder"],query:({uid:S,title:O,version:C})=>({method:"PUT",url:`/folders/${S}`,data:{title:O,version:C}}),onQueryStarted:({parentUid:S},{queryFulfilled:O,dispatch:C})=>{O.then(()=>{C((0,f.bw)({parentUID:S,pageSize:c.md}))})}}),moveFolder:x.mutation({invalidatesTags:["getFolder"],query:({folder:S,destinationUID:O})=>({url:`/folders/${S.uid}/move`,method:"POST",data:{parentUID:O}}),onQueryStarted:({folder:S,destinationUID:O},{queryFulfilled:C,dispatch:L})=>{const{parentUid:U}=S;C.then(()=>{L((0,f.bw)({parentUID:U,pageSize:c.md})),L((0,f.bw)({parentUID:O,pageSize:c.md}))})}}),deleteFolder:x.mutation({query:({uid:S})=>({url:`/folders/${S}`,method:"DELETE",params:{forceDeleteRules:!1}}),onQueryStarted:({parentUid:S},{queryFulfilled:O,dispatch:C})=>{O.then(()=>{C((0,f.bw)({parentUID:S,pageSize:c.md}))})}}),getAffectedItems:x.query({queryFn:async S=>{const C=Object.keys(S.folder).filter(R=>S.folder[R]).map(R=>(0,r.AI)().get(`/api/folders/${R}/counts`)),L=await Promise.all(C),U={folder:Object.values(S.folder).filter(s.zz).length,dashboard:Object.values(S.dashboard).filter(s.zz).length,libraryPanel:0,alertRule:0};for(const R of L)U.folder+=R.folder??0,U.dashboard+=R.dashboard,U.alertRule+=R.alertrule,U.libraryPanel+=R.librarypanel;return{data:U}}}),moveItems:x.mutation({invalidatesTags:["getFolder"],queryFn:async({selectedItems:S,destinationUID:O},C,L,U)=>{const R=Object.keys(S.dashboard).filter(H=>S.dashboard[H]),B=Object.keys(S.folder).filter(H=>S.folder[H]);for(const H of B)await U({url:`/folders/${H}/move`,method:"POST",data:{parentUID:O}});for(const H of R){const N={dashboard:(await(0,r.AI)().get(`/api/dashboards/uid/${H}`)).dashboard,folderUid:O,overwrite:!1,message:""};await U({url:"/dashboards/db",method:"POST",data:N})}return{data:void 0}},onQueryStarted:({destinationUID:S,selectedItems:O},{queryFulfilled:C,dispatch:L})=>{const U=Object.keys(O.dashboard).filter(B=>O.dashboard[B]),R=Object.keys(O.folder).filter(B=>O.folder[B]);C.then(()=>{L((0,f.bw)({parentUID:S,pageSize:c.md})),L((0,f.Zw)([...R,...U]))})}}),deleteItems:x.mutation({queryFn:async({selectedItems:S},O,C,L)=>{const U=Object.keys(S.dashboard).filter(B=>S.dashboard[B]),R=Object.keys(S.folder).filter(B=>S.folder[B]);for(const B of R)await L({url:`/folders/${B}`,method:"DELETE",params:{forceDeleteRules:!1}});for(const B of U)await L({url:`/dashboards/uid/${B}`,method:"DELETE"});return{data:void 0}},onQueryStarted:({selectedItems:S},{queryFulfilled:O,dispatch:C})=>{const L=Object.keys(S.dashboard).filter(R=>S.dashboard[R]),U=Object.keys(S.folder).filter(R=>S.folder[R]);O.then(()=>{C((0,f.Zw)([...U,...L]))})}}),saveDashboard:x.mutation({query:({dashboard:S,folderUid:O,message:C,overwrite:L,showErrorAlert:U})=>({url:"/dashboards/db",method:"POST",showErrorAlert:U,data:{dashboard:S,folderUid:O,message:C??"",overwrite:!!L}}),onQueryStarted:({folderUid:S},{queryFulfilled:O,dispatch:C})=>{l.t.ignoreNextSave(),O.then(async()=>{await i.TP.fetchUserPermissions(),C((0,f.bw)({parentUID:S,pageSize:c.md}))})}}),importDashboard:x.mutation({query:({dashboard:S,overwrite:O,inputs:C,folderUid:L})=>({method:"POST",url:"/dashboards/import",data:{dashboard:S,overwrite:O,inputs:C,folderUid:L}}),onQueryStarted:({folderUid:S},{queryFulfilled:O,dispatch:C})=>{O.then(async L=>{C((0,f.bw)({parentUID:S,pageSize:c.md}));const U=o.I.stripBaseFromUrl(L.data.importedUrl);g.Ny.push(U)})}})})}),{endpoints:a,useDeleteFolderMutation:v,useDeleteItemsMutation:E,useGetAffectedItemsQuery:D,useGetFolderQuery:b,useMoveFolderMutation:P,useMoveItemsMutation:y,useNewFolderMutation:T,useSaveDashboardMutation:M,useSaveFolderMutation:I}=m},92955:(Y,A,e)=>{"use strict";e.d(A,{aw:()=>f,md:()=>i,uT:()=>l});var t=e(32264),n=e(17172),o=e(53477),s=e(24439),r=e(40957),g=e(10096),u=e(80348),d=e(49952);const i=50;async function l(c,h,p=1,m=i){if(c&&!t.$.featureToggles.nestedFolders)return[];const a=(0,n.AI)();let v=[];return g.TP.hasPermission(u.AccessControlAction.FoldersRead)&&(v=await a.get("/api/folders",{parentUid:c,page:p,limit:m})),v.map(E=>({kind:"folder",uid:E.uid,title:E.title,parentTitle:h,parentUID:c,url:(0,d.I)(E.uid)?void 0:`/dashboards/f/${E.uid}/`}))}async function f(c,h=1,p=i){const a=await(0,s.getGrafanaSearcher)().search({kind:["dashboard"],query:"*",location:c||"general",from:(h-1)*p,limit:p});return a.view.map(v=>{const E=(0,r.hI)(v,a.view);return E.parentUID===o.TF&&(E.parentUID=void 0),E})}},43907:(Y,A,e)=>{"use strict";e.d(A,{x:()=>d});var t=e(96540),n=e(70255),o=e(94753),s=e(42418),r=e(55314),g=e(44836);function u(i,l,f,c){const h=i+l+f+c,p=[];i&&p.push((0,g.t)("browse-dashboards.counts.folder","{{count}} folder",{count:i})),l&&p.push((0,g.t)("browse-dashboards.counts.dashboard","{{count}} dashboard",{count:l})),f&&p.push((0,g.t)("browse-dashboards.counts.libraryPanel","{{count}} library panel",{count:f})),c&&p.push((0,g.t)("browse-dashboards.counts.alertRule","{{count}} alert rule",{count:c}));let m=(0,g.t)("browse-dashboards.counts.total","{{count}} item",{count:h});return p.length>0&&(m+=`: ${p.join(", ")}`),m}const d=({selectedItems:i})=>{const{data:l,isFetching:f,isLoading:c,error:h}=(0,r.G2)(i);return t.createElement(t.Fragment,null,t.createElement(o.E,{element:"p",color:"secondary"},l&&u(l.folder,l.dashboard,l.libraryPanel,l.alertRule),(f||c)&&t.createElement(n.A,{width:200})),h&&t.createElement(s.F,{severity:"error",title:"Unable to retrieve descendant information"}))}},49952:(Y,A,e)=>{"use strict";e.d(A,{I:()=>o,e:()=>n});var t=e(32264);function n(s,r){return s+r.uid}function o(s){return s===t.$.sharedWithMeFolderUID}},36141:(Y,A,e)=>{"use strict";e.d(A,{Ii:()=>u,Zw:()=>r,bw:()=>g});var t=e(53477),n=e(80348),o=e(92955),s=e(93519);const r=(0,n.createAsyncThunk)("browseDashboards/refreshParents",async(d,{getState:i,dispatch:l})=>{const{browseDashboards:f}=i(),{rootItems:c,childrenByParentUID:h}=f,p=new Set;for(const m of d){const a=(0,s.R)(c?.items??[],h,m);p.add(a?.parentUID)}for(const m of p)l(g({parentUID:m,pageSize:o.md}))}),g=(0,n.createAsyncThunk)("browseDashboards/refetchChildren",async({parentUID:d,pageSize:i})=>{const l=d===t.TF?void 0:d;let f=1,c="folder",h=await(0,o.uT)(l,void 0,f,i),p=h.length<i;if(c==="folder"&&p){c="dashboard",f=1;const m=await(0,o.aw)(l,f,i);p=m.length<i,h=h.concat(m)}return{children:h,lastPageOfKind:p,page:f,kind:c}}),u=(0,n.createAsyncThunk)("browseDashboards/fetchNextChildrenPage",async({parentUID:d,excludeKinds:i=[],pageSize:l},f)=>{const c=!i.includes("dashboard"),h=d===t.TF?void 0:d,p=f.getState().browseDashboards,m=h?p.childrenByParentUID[h]:p.rootItems;let a=1,v;if(m?m.lastFetchedKind==="dashboard"&&!m.lastKindHasMoreItems?console.warn(`fetchNextChildrenPage called for ${h} but that collection is fully loaded`):m.lastFetchedKind==="folder"&&m.lastKindHasMoreItems?(a=m.lastFetchedPage+1,v="folder"):c&&(a=m.lastFetchedKind==="folder"?1:m.lastFetchedPage+1,v="dashboard"):(a=1,v="folder"),!v)return;let E=v==="folder"?await(0,o.uT)(h,void 0,a,l):await(0,o.aw)(h,a,l),D=E.length<l;if(v==="folder"&&D&&c){v="dashboard",a=1;const b=await(0,o.aw)(h,a,l);D=b.length<l,E=E.concat(b)}return{children:E,lastPageOfKind:D,page:a,kind:v}})},37690:(Y,A,e)=>{"use strict";e.d(A,{Am:()=>l,A4:()=>T,Ii:()=>n.Ii,bw:()=>n.bw,Zw:()=>n.Zw,ku:()=>i,cT:()=>t.cT,wn:()=>t.wn,t$:()=>t.t$,xK:()=>P,eC:()=>a,Ms:()=>D,V6:()=>b,q0:()=>v,QE:()=>E,Zg:()=>y});var t=e(79763),n=e(36141),o=e(96540),s=e(1081),r=e(80348),g=e(92955),u=e(49952),d=e(93519);const i=M=>M.browseDashboards.rootItems,l=M=>M.browseDashboards.childrenByParentUID,f=M=>M.browseDashboards.openFolders,c=M=>M.browseDashboards.selectedItems,h=(0,s.Mz)(i,l,f,(M,I)=>I,(M,I,x,S)=>T(S,M,I,x)),p=(0,s.Mz)(c,M=>Object.values(M).some(I=>Object.values(I).some(x=>x))),m=(0,s.Mz)(c,l,(M,I)=>{const x={dashboard:{...M.dashboard},folder:{...M.folder}};for(const S of Object.keys(M.folder))if(M.folder[S]){const C=I[S];if(C)for(const L of C.items)L.kind==="dashboard"&&(x.dashboard[L.uid]=!1),L.kind==="folder"&&(x.folder[L.uid]=!1)}return x});function a(M){return(0,r.useSelector)(I=>(M?I.browseDashboards.childrenByParentUID[M]:I.browseDashboards.rootItems)?"fulfilled":"pending")}function v(M){return(0,r.useSelector)(I=>h(I,M))}function E(){return(0,r.useSelector)(M=>p(M))}function D(){return(0,r.useSelector)(c)}function b(){return(0,r.useSelector)(M=>M.browseDashboards.childrenByParentUID)}function P(){return(0,r.useSelector)(M=>m(M))}function y(M=[]){const I=(0,r.useDispatch)(),x=(0,o.useRef)(!1);return(0,o.useCallback)(O=>{if(x.current)return Promise.resolve();x.current=!0;const C=I((0,n.Ii)({parentUID:O,excludeKinds:M,pageSize:g.md}));return C.finally(()=>x.current=!1),C},[I,M])}function T(M,I,x,S,O=0,C=[],L=[]){function U(G,_,K){if(C.includes(G.kind)||L.includes(G.uid))return[];const j=T(G.uid,I,x,S,K+1,C,L),k=!!S[G.uid],Q=x[G.uid]?.items.length===0;k&&Q&&!C.includes("empty-folder")&&j.push({isOpen:!1,level:K+1,item:{kind:"ui",uiKind:"empty-folder",uid:G.uid+"empty-folder"},parentUID:_});const ee={item:G,parentUID:_,level:K,isOpen:k},ae=[ee,...j];return(0,u.I)(ee.item.uid)&&ae.push({item:{kind:"ui",uiKind:"divider",uid:"shared-with-me-divider"},parentUID:_,level:K+1,isOpen:!1}),ae}const R=M&&S[M]||O===0,B=M?x[M]:I;let W=((M?R&&B?.items:B?.items)||[]).flatMap(G=>U(G,M,O));const N=C.includes("dashboard")&&B?.lastFetchedKind==="dashboard";return(O===0&&!B||R&&B&&!(B.isFullyLoaded||N))&&(W=W.concat((0,d.T)(g.md,M,O))),W}},79763:(Y,A,e)=>{"use strict";e.d(A,{Ay:()=>b,cT:()=>D,wn:()=>v,t$:()=>E});var t={};e.r(t),e.d(t,{fetchNextChildrenPageFulfilled:()=>u,refetchChildrenFulfilled:()=>g,setAllSelection:()=>l,setFolderOpenState:()=>d,setItemSelectionState:()=>i});var n=e(30038),o=e(36141),s=e(49952),r=e(93519);function g(P,y){const{children:T,page:M,kind:I,lastPageOfKind:x}=y.payload,{parentUID:S}=y.meta.arg,O={items:T,lastFetchedKind:I,lastFetchedPage:M,lastKindHasMoreItems:!x,isFullyLoaded:I==="dashboard"&&x};S?P.childrenByParentUID[S]=O:P.rootItems=O}function u(P,y){const T=y.payload;if(!T)return;const{children:M,page:I,kind:x,lastPageOfKind:S}=T,{parentUID:O,excludeKinds:C=[]}=y.meta.arg,R={items:((O?P.childrenByParentUID[O]:P.rootItems)?.items??[]).concat(M),lastFetchedKind:x,lastFetchedPage:I,lastKindHasMoreItems:!S,isFullyLoaded:(C.includes("dashboard")||x==="dashboard")&&S};if(!O){P.rootItems=R;return}if(P.childrenByParentUID[O]=R,P.selectedItems.folder[O])for(const H of M)P.selectedItems[H.kind][H.uid]=!0}function d(P,y){const{folderUID:T,isOpen:M}=y.payload;P.openFolders[T]=M}function i(P,y){const{item:T,isSelected:M}=y.payload;if((0,s.I)(T.uid))return;function I(x,S){if(P.selectedItems[x][S]=M,x!=="folder")return;let O=P.childrenByParentUID[S];for(const C of O?.items??[])I(C.kind,C.uid)}if(I(T.kind,T.uid),!M){let x=T.parentUID;for(;x;){const S=(0,r.R)(P.rootItems?.items??[],P.childrenByParentUID,x);if(!S)break;P.selectedItems[S.kind][S.uid]=!1,x=S.parentUID}}P.selectedItems.$all=P.rootItems?.items?.every(x=>P.selectedItems[x.kind][x.uid])??!1}function l(P,y){const{isSelected:T,folderUID:M}=y.payload;if(!(M&&(0,s.I)(M)))if(P.selectedItems.$all=T,T){let x=function(S){if(S&&(0,s.I)(S))return;const O=S?P.childrenByParentUID[S]:P.rootItems;if(O)for(const C of O.items)(0,s.I)(C.uid)||(P.selectedItems[C.kind][C.uid]=T,C.kind==="folder"&&x(C.uid))};var I=x;x(M)}else for(const x in P.selectedItems){if(!(x==="dashboard"||x==="panel"||x==="folder"))continue;const S=P.selectedItems[x];for(const O in S)S[O]=T}}const{fetchNextChildrenPageFulfilled:f,refetchChildrenFulfilled:c,...h}=t,p={rootItems:void 0,childrenByParentUID:{},openFolders:{},selectedItems:{dashboard:{},folder:{},panel:{},$all:!1}},m=(0,n.Z0)({name:"browseDashboards",initialState:p,reducers:h,extraReducers:P=>{P.addCase(o.Ii.fulfilled,f),P.addCase(o.bw.fulfilled,c)}}),a=m.reducer,{setFolderOpenState:v,setItemSelectionState:E,setAllSelection:D}=m.actions,b={browseDashboards:a}},93519:(Y,A,e)=>{"use strict";e.d(A,{R:()=>t,T:()=>n});function t(o,s,r){for(const g of o)if(g.uid===r)return g;for(const g in s){const u=s[g];if(u){for(const d of u.items)if(d.uid===r)return d}}}function n(o,s,r){return new Array(o).fill(null).map((g,u)=>({parentUID:s,level:r,isOpen:!1,item:{kind:"ui",uiKind:"pagination-placeholder",uid:`${s}-pagination-${u}`}}))}},6320:(Y,A,e)=>{"use strict";e.d(A,{b:()=>n,q:()=>t});const t="connections",n={Base:`/${t}`,DataSources:`/${t}/datasources`,DataSourcesNew:`/${t}/datasources/new`,DataSourcesEdit:`/${t}/datasources/edit/:uid`,DataSourcesDashboards:`/${t}/datasources/edit/:uid/dashboards`,AddNewConnection:`/${t}/add-new-connection`,DataSourcesDetails:`/${t}/datasources/:id`,ConnectDataOutdated:`/${t}/connect-data`,YourConnectionsOutdated:`/${t}/your-connections`}},67023:(Y,A,e)=>{"use strict";e.d(A,{k:()=>r});var t=e(60455),n=e.n(t),o=e(91890),s=e(87490);const r=(g,u,d)=>{let i={},l={};if(g.type===o.CC.Regex&&g.expression){const f=new RegExp(g.expression,"gi"),h=(typeof u=="string"?u:(0,s.MA)(u)).matchAll(f);for(const p of h)p.groups?l=p.groups:l[g.mapValue||d]=p[1]||p[0]}else g.type===o.CC.Logfmt&&(l=n().parse(u));return Object.keys(l).forEach(f=>{const c=typeof l[f]=="string"?l[f]:(0,s.MA)(l[f]);i[f]={value:c}}),i}},40511:(Y,A,e)=>{"use strict";e.d(A,{F0:()=>d,bQ:()=>i,lW:()=>l});var t=e(41053),n=e(75505),o=e(19347),s=e(76888),r=e(18380);const g=({sourceUID:f,targetUID:c,...h})=>{const p=(0,o.l)().getInstanceSettings(f),m=(0,o.l)().getInstanceSettings(c);if((h?.orgId===void 0||h?.orgId===null||h?.orgId===0)&&r.kb.logWarning("Invalid correlation config: Missing org id."),p&&p?.uid!==void 0&&m&&m.uid!==void 0)return{...h,source:p,target:m};r.kb.logWarning("Invalid correlation config: Missing source or target.",{source:JSON.stringify(p),target:JSON.stringify(m)})},u=f=>!!f,d=f=>({...f,correlations:f.correlations.map(g).filter(u)});function i(f){return f.data}const l=()=>{const{backend:f}=(0,s.Il)(),[c,h]=(0,t.A)(b=>(0,n.s)(f.fetch({url:"/api/datasources/correlations",params:{page:b.page},method:"GET",showErrorAlert:!1})).then(i).then(d),[f]),[p,m]=(0,t.A)(({sourceUID:b,...P})=>f.post(`/api/datasources/uid/${b}/correlations`,P).then(y=>{const T=g(y.result);if(T!==void 0)return T;throw new Error("invalid sourceUID")}),[f]),[a,v]=(0,t.A)(({sourceUID:b,uid:P})=>f.delete(`/api/datasources/uid/${b}/correlations/${P}`),[f]),[E,D]=(0,t.A)(({sourceUID:b,uid:P,...y})=>f.patch(`/api/datasources/uid/${b}/correlations/${P}`,y).then(T=>{const M=g(T.result);if(M!==void 0)return M;throw new Error("invalid sourceUID")}),[f]);return{create:{execute:m,...p},update:{execute:D,...E},get:{execute:h,...c},remove:{execute:v,...a}}}},18380:(Y,A,e)=>{"use strict";e.d(A,{$q:()=>f,J6:()=>l,cA:()=>d,kb:()=>p,tZ:()=>h});var t=e(75505),n=e(91890),o=e(17172),s=e(19347),r=e(34867),g=e(9651),u=e(40511);const d=(m,a,v)=>(m.forEach(E=>{const D=E.refId;if(!D)return;let b=v[D];if(b===void 0&&E.meta?.preferredVisualisationType==="rawPrometheus"){const y=(0,g.a)(D);b=v[y]}const P=a.filter(y=>y.source.uid===b);i(E,P)}),m),i=(m,a)=>{m.fields.forEach(v=>{v.config.links=v.config.links?.filter(E=>E.origin!==n.x0.Correlations)||[],a.map(E=>{if(E.config?.field===v.name){const D=E.config?.target||{};v.config.links.push({internal:{query:{...D,datasource:{uid:E.target.uid}},datasourceUid:E.target.uid,datasourceName:E.target.name,transformations:E.config?.transformations},url:"",title:E.label||E.target.name,origin:n.x0.Correlations})}})})},l=async m=>(0,t.s)((0,o.AI)().fetch({url:"/api/datasources/correlations",method:"GET",showErrorAlert:!1,params:{sourceUID:m}})).then(u.bQ).then(u.F0),f=async(m,a)=>(0,o.AI)().post(`/api/datasources/uid/${m}/correlations`,a),c=async m=>m.datasourceInstance?.meta.mixed?await(0,s.l)().get(m.queries[0].datasource):m.datasourceInstance,h=async(m,a)=>Promise.all([c(m),c(a)]).then(v=>v[0]?.name!==void 0&&v[1]?.name!==void 0?`${v[0]?.name} to ${v[1]?.name}`:""),p=(0,r.DW)("features.correlations")},41524:(Y,A,e)=>{"use strict";e.d(A,{W:()=>o});var t=e(11261);function n(){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZ",r="abcdefghijklmnopqrstuvwxyz",g=s.length,u=new Map;return d=>{const i=u.get(d);if(i!=null)return i;const l=[...d].map(f=>f.toLowerCase()&&f!==f.toUpperCase()?r.charAt(Math.floor(Math.random()*g)):f.toUpperCase()&&f!==f.toUpperCase()?s.charAt(Math.floor(Math.random()*g)):f).join("");return u.set(d,l),l}}function o(s,r){if(!(r.labels||r.names||r.values))return s;const g=new Set(["time","value","exemplar","traceid","id","uid","uuid","__name__","le","name"]),u=n();return s.map(d=>{let{schema:i,data:l}=d;if(i&&l){if(r.labels){for(const f of i.fields)if(f.labels){const c={};for(const[h,p]of Object.entries(f.labels))c[h]=u(p);f.labels=c}}if(r.names)for(const f of i.fields)f.name?.length&&!g.has(f.name.toLowerCase())&&(f.name=u(f.name));r.values&&i.fields.forEach((f,c)=>{if(f.type===t.PU.string&&l){const h=l.values[c].map(p=>u(String(p)));l.values[c]=h}})}return{schema:i,data:l}})}},72255:(Y,A,e)=>{"use strict";e.d(A,{m6:()=>m,sP:()=>E});var t=e(71733),n=e(17172),o=e(12131),s=e(82467),r=e(2619),g=e(27677),u=e(17493),d=e(14792),i=e(71101),l=e(99140),f=e(80348),c=e(71176),h=e(64468);const p=500,m="__grafana_home_uid__";class a extends r.Q{constructor(){super(...arguments),this.cache={}}async fetchDashboard({uid:b,route:P,urlFolderUid:y}){const T=P===f.DashboardRoutes.Home?m:b,M=this.getFromCache(T);if(M)return M;let I;try{switch(P){case f.DashboardRoutes.New:I=(0,c.X)(y);break;case f.DashboardRoutes.Home:if(I=await(0,n.AI)().get("/api/dashboards/home"),I?.redirectUri){const x=t.I.stripBaseFromUrl(I.redirectUri);return o.Ny.replace(x),null}I?.meta&&(I.meta.canSave=!1,I.meta.canShare=!1,I.meta.canStar=!1);break;default:I=await u.np.loadDashboard("db","",b),P===f.DashboardRoutes.Embedded&&(I.meta.isEmbedded=!0)}if(I.meta.url&&P!==f.DashboardRoutes.Embedded){const x=t.I.stripBaseFromUrl(I.meta.url),S=o.Ny.getLocation().pathname;x!==S&&(o.Ny.replace({...o.Ny.getLocation(),pathname:x}),console.log("not correct url correcting",x,S))}await this.initNavModel(I),this.dashboardCache={dashboard:I,ts:Date.now(),cacheKey:T}}catch(x){if((0,n.NF)(x)&&x.cancelled)return null;throw console.error(x),x}return I}async loadSnapshot(b){try{const P=await this.loadSnapshotScene(b);this.setState({dashboard:P,isLoading:!1})}catch(P){this.setState({isLoading:!1,loadError:String(P)})}}async loadSnapshotScene(b){const P=await u.np.loadDashboard("snapshot",b,"");if(P?.dashboard)return(0,h.wM)(P);throw new Error("Snapshot not found")}async loadDashboard(b){try{const P=await this.loadScene(b);P.startUrlSync(),this.setState({dashboard:P,isLoading:!1})}catch(P){this.setState({isLoading:!1,loadError:String(P)})}}async loadScene(b){const P=await this.fetchDashboard(b),y=this.cache[b.uid];if(y&&y.state.version===P?.dashboard.version)return y;if(this.setState({isLoading:!0}),P?.dashboard){const T=(0,h.wM)(P);return b.uid&&(this.cache[b.uid]=T),T}throw new Error("Dashboard not found")}getFromCache(b){const P=this.dashboardCache;return P&&P.cacheKey===b&&Date.now()-P?.ts<p?P.dashboard:null}async initNavModel(b){if(b.meta.folderUid)try{const P=await g.IB.getFolderByUid(b.meta.folderUid);l.M_.dispatch((0,s.Vz)((0,i.R4)(P)))}catch(P){console.warn("Error fetching parent folder",b.meta.folderUid,"for dashboard",P)}}clearState(){(0,d.UA)().setCurrent(void 0),this.setState({dashboard:void 0,loadError:void 0,isLoading:!1,panelEditor:void 0})}setDashboardCache(b,P){this.dashboardCache={dashboard:P,ts:Date.now(),cacheKey:b}}clearDashboardCache(){this.dashboardCache=void 0}}let v=null;function E(){return v||(v=new a({})),v}},79280:(Y,A,e)=>{"use strict";e.d(A,{p:()=>d});var t=e(96540),n=e(13544),o=e(90613),s=e(67061),r=e(94753),g=e(55852),u=e(44836);function d(i){return t.createElement(o.a,{alignItems:"center",padding:4},t.createElement(s.B,{direction:"column",alignItems:"center",gap:2},t.createElement(r.E,{element:"h3",textAlignment:"center"},t.createElement(u.x6,{key:"transformations.empty.add-transformation-header"},"Start transforming data")),t.createElement(r.E,{element:"p",textAlignment:"center","data-testid":n.Tp.components.Transforms.noTransformationsMessage},t.createElement(u.x6,{key:"transformations.empty.add-transformation-body"},"Transformations allow data to be changed in various ways before your visualization is shown.",t.createElement("br",null),"This includes joining data together, renaming fields, making calculations, formatting data for display, and more.")),t.createElement(g.$n,{icon:"plus",variant:"primary",size:"md",onClick:i.onShowPicker,"data-testid":n.Tp.components.Transforms.addTransformationButton},"Add transformation")))}},91309:(Y,A,e)=>{"use strict";e.d(A,{C:()=>b,S:()=>P});var t=e(65474),n=e(81160),o=e(52622),s=e(43585),r=e(39070),g=e(14236),u=e(17172),d=e(32264),i=e(79065),l=e(82467),f=e(3169),c=e(10096),h=e(94954),p=e(55740),m=e(23662),a=e(99140),v=e(80348),E=e(94822),D=e(74730);class b extends i.VE{constructor(T){super({isEnabled:!0,...T,isHidden:!0}),this.hasAlertRules=!0,this.topic=o.QR.AlertStates,this.handleError=M=>{const I=(0,f.gi)("AlertStatesDataLayer",(0,h.q)(M));(0,a.JD)((0,l.dx)(I))}}onEnable(){const T=i.jh.getTimeRange(this);this._timeRangeSub=T.subscribeToState(()=>{this.runWithTimeRange(T)})}onDisable(){this._timeRangeSub?.unsubscribe()}runLayer(){const T=i.jh.getTimeRange(this);this.runWithTimeRange(T)}async runWithTimeRange(T){const M=(0,D.YQ)(this),{uid:I,id:x}=M.state;if(this.querySub&&this.querySub.unsubscribe(),!this.canWork(T))return;let S;this.isUsingLegacyAlerting()?S=(0,t.H)((0,u.AI)().get("/api/alerts/states-for-dashboard",{dashboardId:x},`dashboard-query-runner-alert-states-${x}`)).pipe((0,n.T)(O=>O)):S=(0,t.H)((0,u.AI)().get("/api/prometheus/grafana/api/v1/rules",{dashboard_uid:I},`dashboard-query-runner-unified-alert-states-${x}`)).pipe((0,n.T)(O=>{if(O.status==="success"){this.hasAlertRules=!1;const C={};return O.data.groups.forEach(L=>L.rules.forEach(U=>{if((0,m.Z8)(U)&&U.annotations&&U.annotations[p.YH.panelID]){this.hasAlertRules=!0;const R=Number(U.annotations[p.YH.panelID]),B=P(U.state);C[R]?B===s.O.Alerting&&C[R].state!==s.O.Alerting?C[R].state=s.O.Alerting:B===s.O.Pending&&C[R].state!==s.O.Alerting&&C[R].state!==s.O.Pending&&(C[R].state=s.O.Pending):C[R]={state:B,id:Object.keys(C).length,panelId:R,dashboardId:x}}})),Object.values(C)}throw new Error("Unexpected alert rules response.")})),this.querySub=S.subscribe({next:O=>{this.publishResults({state:r.Gu.Done,series:[(0,g.Vc)(O)],timeRange:T.state.value},o.QR.AlertStates)},error:O=>{this.handleError(O),this.publishResults({state:r.Gu.Error,series:[],errors:[{message:(0,h.q)(O)}],timeRange:T.state.value},o.QR.AlertStates)}})}canWork(T){const M=(0,D.YQ)(this),{uid:I,id:x}=M.state;return this.isUsingLegacyAlerting()?!(!x||T.state.value.raw.to!=="now"):!(!I||d.$.publicDashboardAccessToken||T.state.value.raw.to!=="now"||this.hasAlertRules===!1||!(c.TP.hasPermission(v.AccessControlAction.AlertingRuleRead)&&c.TP.hasPermission(v.AccessControlAction.AlertingRuleExternalRead)))}isUsingLegacyAlerting(){return!d.$.unifiedAlertingEnabled}}function P(y){return y===E.cF.Firing?s.O.Alerting:y===E.cF.Pending?s.O.Pending:s.O.OK}},38477:(Y,A,e)=>{"use strict";e.d(A,{g:()=>u});var t=e(43127),n=e(33948),o=e(52622),s=e(32264),r=e(79065),g=e(90569);class u extends r.tV.g{async resolveDataSource(i){return s.$.publicDashboardAccessToken?new g.X:super.resolveDataSource(i)}processEvents(i,l){if(s.$.publicDashboardAccessToken){const f={series:[],timeRange:(0,t.E2)(),state:l.state},c=(0,n.I)(l.events);return c.meta={...c.meta,dataTopic:o.QR.Annotations},f.annotations=[c],f}else return super.processEvents(i,l)}}},48548:(Y,A,e)=>{"use strict";e.d(A,{x:()=>r});var t=e(96540),n=e(79065),o=e(67061),s=e(90613);class r extends n.Bs{}r.Component=g;function g({model:u}){const{variableControls:d,linkControls:i,timeControls:l,hideTimeControls:f}=u.useState();return t.createElement(o.B,{grow:1,direction:{md:"row",xs:"column"}},t.createElement(o.B,{grow:1,wrap:"wrap"},d.map(c=>t.createElement(c.Component,{model:c,key:c.state.key})),t.createElement(s.a,{grow:1}),t.createElement(i.Component,{model:i})),t.createElement(o.B,{justifyContent:"flex-end"},!f&&l.map(c=>t.createElement(c.Component,{model:c,key:c.state.key}))))}},36043:(Y,A,e)=>{"use strict";e.d(A,{H$:()=>Hi});var t=e(71733),n=e(26272),o=e(41987),s=e(12131),r=e(79065),g=e(28138),u=e(15054),d=e(17422),i=e(33390),l=e(14792),f=e(34214),c=e(6473),h=e(80484),p=e(28444),m=e(96540),a=e(63021),v=e(40675),E=e(87978),D=e(54943),b=e(49785),P=e(55852),y=e(42418),T=e(67061),M=e(88575),I=e(10354),x=e(21744),S=e(15292),O=e(90613),C=e(60029),L=e(70096),U=e(71500),R=e(13544),B=e(17172);function H(Se){return(0,B.NF)(Se)&&Se.data&&Se.data.status==="version-mismatch"}function W(Se){return(0,B.NF)(Se)&&Se.data&&Se.data.status==="name-exists"}function N(Se){return(0,B.NF)(Se)&&Se.data&&Se.data.status==="plugin-dashboard"}function V({cancelButton:Se,saveButton:Ae}){return m.createElement(y.F,{title:"Name already exists",severity:"error"},m.createElement("p",null,"A dashboard with the same name in selected folder already exists. Would you still like to save this dashboard?"),m.createElement(O.a,{paddingTop:2},m.createElement(T.B,{alignItems:"center"},Se,Ae(!0))))}function G({overwrite:Se,isLoading:Ae,isValid:Ye,onSave:dt}){return m.createElement(P.$n,{disabled:!Ye||Ae,icon:Ae?"spinner":void 0,"aria-label":R.Tp.pages.SaveDashboardModal.save,onClick:()=>dt(Se),variant:Se?"destructive":"primary"},Ae?"Saving...":Se?"Save and overwrite":"Save")}var _=e(41053),K=e(14110),j=e(3169),k=e(91219),Q=e(55314),ee=e(80348),ae=e(36974);function Z(Se=!1){const Ae=(0,ee.useDispatch)(),Ye=(0,j._2)(),[dt]=(0,Q.e8)(),[bt,Rt]=(0,_.A)(async(kt,Jt,$t)=>{{const an=await dt({dashboard:Jt,folderUid:$t.folderUid,message:$t.message,overwrite:$t.overwrite,showErrorAlert:!1});if("error"in an)throw an.error;const Ln=an.data;kt.saveCompleted(Jt,Ln,$t.folderUid),g.A.publish(new p.Eu),Ye.success("Dashboard saved"),(0,ae.ko)(Ln.uid),Se?(0,K.rR)("grafana_dashboard_copied",{name:Jt.title,url:Ln.url}):(0,K.rR)(`grafana_dashboard_${Ln.uid?"saved":"created"}`,{name:Jt.title,url:Ln.url});const ra=s.Ny.getLocation(),ya=t.I.stripBaseFromUrl(Ln.url);return ya!==ra.pathname&&setTimeout(()=>{kt.stopUrlSync(),s.Ny.push({pathname:ya,search:ra.search}),kt.startUrlSync()}),kt.state.meta.isStarred&&Ae((0,k.TU)({id:Ln.uid,title:kt.state.title,url:ya})),an.data}},[Ae,Ye]);return{state:bt,onSaveDashboard:Rt}}function ne({dashboard:Se,drawer:Ae,changeInfo:Ye}){const{changedSaveModel:dt}=Ye,{register:bt,handleSubmit:Rt,setValue:kt,formState:Jt,getValues:$t,watch:an}=(0,b.mN)({mode:"onBlur",defaultValues:{title:Ye.isNew?dt.title:`${dt.title} Copy`,description:dt.description??"",folder:{uid:Se.state.meta.folderUid,title:Se.state.meta.folderTitle},copyTags:!1}}),{errors:Ln,isValid:ra,defaultValues:ya}=Jt,Hn=an(),{state:Da,onSaveDashboard:ja}=Z(!1),Ls=async Na=>{const Ns=$t(),Gs=de(dt,Ns,Ye.isNew);(await ja(Se,Gs,{overwrite:Na,folderUid:Ns.folder.uid})).status==="success"&&Se.closeModal()},jr=m.createElement(P.$n,{variant:"secondary",onClick:()=>Se.closeModal(),fill:"outline"},"Cancel"),qs=Na=>m.createElement(G,{isValid:ra,isLoading:Da.loading,onSave:Ls,overwrite:Na});function So(Na){return W(Na)?m.createElement(V,{cancelButton:jr,saveButton:qs}):m.createElement(m.Fragment,null,Na&&m.createElement(y.F,{title:"Failed to save dashboard",severity:"error"},m.createElement("p",null,Na.message)),m.createElement(T.B,{alignItems:"center"},jr,qs(!1)))}return m.createElement("form",{onSubmit:Rt(()=>Ls(!1))},m.createElement(M.D,{label:m.createElement(q,{dashboard:dt,onChange:kt}),invalid:!!Ln.title,error:Ln.title?.message},m.createElement(I.p,{...bt("title",{required:"Required",validate:re}),"aria-label":"Save dashboard title field",autoFocus:!0})),m.createElement(M.D,{label:m.createElement(te,{dashboard:dt,onChange:kt}),invalid:!!Ln.description,error:Ln.description?.message},m.createElement(x.f,{...bt("description",{required:!1}),"aria-label":"Save dashboard description field",autoFocus:!0})),m.createElement(M.D,{label:"Folder"},m.createElement(L.d,{onChange:(Na,Ns)=>kt("folder",{uid:Na,title:Ns}),value:Hn.folder?.uid,initialTitle:ya.folder.title,dashboardId:dt.id??void 0,enableCreateNew:!0})),!Ye.isNew&&m.createElement(M.D,{label:"Copy tags"},m.createElement(S.d,{...bt("copyTags")})),m.createElement(O.a,{paddingTop:2},So(Da.error)))}function q(Se){return m.createElement(T.B,{justifyContent:"space-between"},m.createElement(C.J,{htmlFor:"description"},"Title"))}function te(Se){return m.createElement(T.B,{justifyContent:"space-between"},m.createElement(C.J,{htmlFor:"description"},"Description"))}async function re(Se,Ae){if(Se===Ae.folder.title?.trim())return"Dashboard name cannot be the same as folder name";try{return await U.P.validateNewDashboardName(Ae.folder.uid??"general",Se),!0}catch(Ye){return Ye instanceof Error?Ye.message:"Dashboard name is invalid"}}function de(Se,Ae,Ye){return{...Se,id:null,uid:"",title:Ae.title,description:Ae.description,tags:Ye||Ae.copyTags?Se.tags:[]}}var ie=e(10880);function ge({dashboard:Se,drawer:Ae,changeInfo:Ye}){const{changedSaveModel:dt,hasChanges:bt}=Ye,{state:Rt,onSaveDashboard:kt}=Z(!1),[Jt,$t]=(0,m.useState)({folderUid:Se.state.meta.folderUid}),an=async Hn=>{(await kt(Se,dt,{...Jt,overwrite:Hn})).status==="success"&&Se.closeModal()},Ln=m.createElement(P.$n,{variant:"secondary",onClick:()=>Se.closeModal(),fill:"outline"},"Cancel"),ra=Hn=>m.createElement(G,{isValid:bt,isLoading:Rt.loading,onSave:an,overwrite:Hn});function ya(Hn){return H(Hn)?m.createElement(y.F,{title:"Someone else has updated this dashboard",severity:"error"},m.createElement("p",null,"Would you still like to save this dashboard?"),m.createElement(O.a,{paddingTop:2},m.createElement(T.B,{alignItems:"center"},Ln,ra(!0)))):W(Hn)?m.createElement(V,{cancelButton:Ln,saveButton:ra}):N(Hn)?m.createElement(y.F,{title:"Plugin dashboard",severity:"error"},m.createElement("p",null,"Your changes will be lost when you update the plugin. Use ",m.createElement("strong",null,"Save As")," to create custom version."),m.createElement(O.a,{paddingTop:2},m.createElement(T.B,{alignItems:"center"},Ln,ra(!0)))):m.createElement(m.Fragment,null,Hn&&m.createElement(y.F,{title:"Failed to save dashboard",severity:"error"},m.createElement("p",null,Hn.message)),m.createElement(T.B,{alignItems:"center"},Ln,ra(!1),!bt&&m.createElement("div",null,"No changes to save")))}return m.createElement(T.B,{gap:0,direction:"column"},m.createElement(ve,{drawer:Ae,changeInfo:Ye}),m.createElement(M.D,{label:"Message"},m.createElement(x.f,{"aria-label":"message",value:Jt.message??"",onChange:Hn=>{$t({...Jt,message:Hn.currentTarget.value})},placeholder:"Add a note to describe your changes (optional).",autoFocus:!0,rows:5})),m.createElement(O.a,{paddingTop:2},ya(Rt.error)))}function ve({drawer:Se,changeInfo:Ae}){const{saveVariables:Ye=!1,saveTimeRange:dt=!1}=Se.useState(),{hasTimeChanges:bt,hasVariableValueChanges:Rt}=Ae;return m.createElement(m.Fragment,null,bt&&m.createElement(M.D,{label:"Update default time range",description:"Will make current time range the new default"},m.createElement(ie.S,{id:"save-timerange",checked:dt,onChange:Se.onToggleSaveTimeRange,"aria-label":R.Tp.pages.SaveDashboardModal.saveTimerange})),Rt&&m.createElement(M.D,{label:"Update default variable values",description:"Will make the current values the new default"},m.createElement(ie.S,{id:"save-variables",checked:Ye,onChange:Se.onToggleSaveVariables,"aria-label":R.Tp.pages.SaveDashboardModal.saveVariables})))}var ye=e(32196),pe=e(4213),le=e.n(pe),Me=e(70713),De=e(32372),Re=e(10534);function me({dashboard:Se,drawer:Ae,changeInfo:Ye}){const dt=(0,m.useMemo)(()=>JSON.stringify(Ye.changedSaveModel,null,2),[Ye]),bt=(0,m.useCallback)(()=>{const Rt=new Blob([dt],{type:"application/json;charset=utf-8"});(0,pe.saveAs)(Rt,Ye.changedSaveModel.title+"-"+new Date().getTime()+".json")},[Ye.changedSaveModel,dt]);return m.createElement("div",{className:he.container},m.createElement(T.B,{direction:"column",gap:2,grow:1},m.createElement("div",null,"This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source.",m.createElement("br",null),m.createElement("i",null,"See"," ",m.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),m.createElement("br",null)," ",m.createElement("br",null),m.createElement("strong",null,"File path: ")," ",Se.state.meta.provisionedExternalId),m.createElement(T.B,{direction:"column",gap:0},m.createElement(ve,{drawer:Ae,changeInfo:Ye})),m.createElement("div",{className:he.json},m.createElement(Me.Ay,{disableWidth:!0},({height:Rt})=>m.createElement(De.B,{width:"100%",height:Rt,language:"json",showLineNumbers:!0,showMiniMap:dt.length>100,value:dt,readOnly:!0}))),m.createElement(O.a,{paddingTop:2},m.createElement(T.B,{gap:2},m.createElement(P.$n,{variant:"secondary",onClick:Ae.onClose,fill:"outline"},"Cancel"),m.createElement(Re.b,{icon:"copy",getText:()=>dt},"Copy JSON to clipboard"),m.createElement(P.$n,{type:"submit",onClick:bt},"Save JSON to file")))))}const he={container:(0,ye.css)({height:"100%",display:"flex"}),json:(0,ye.css)({flexGrow:1,maxHeight:"800px"})};var Te=e(2543),Be=e(56555),we=e(56596);function Ne(Se,Ae,Ye){const dt=Se.getInitialSaveModel();Se.state.editPanel&&Se.state.editPanel.commitChanges();const bt=(0,Be.Uy)(Se),Rt=Ze(bt,dt),kt=st(bt,dt,Ye);Ae||(bt.time=dt.time);const Jt=(0,we.G4)(dt,bt);let $t=0;for(const an of Object.values(Jt))$t+=an.length;return{changedSaveModel:bt,initialSaveModel:dt,diffs:Jt,diffCount:$t,hasChanges:$t>0,hasTimeChanges:Rt,isNew:bt.version===0,hasVariableValueChanges:kt}}function Ze(Se,Ae){return Se.time?.from!==Ae.time?.from||Se.time?.to!==Ae.time?.to}function st(Se,Ae,Ye){const dt=Ae.templating?.list??[],bt=Se.templating?.list??[];let Rt=!1;for(const kt of bt){const Jt=dt.find(({name:$t,type:an})=>$t===kt.name&&an===kt.type);if(Jt&&(Jt.current&&Object.hasOwn(Jt.current,"selected")&&delete Jt.current.selected,(0,Te.isEqual)(kt.current,Jt.current)||(Rt=!0),!Ye)){const $t=kt;$t.type==="adhoc"?$t.filters=Jt.filters:(kt.current=Jt.current,kt.options=Jt.options)}}return Rt}class Qe extends r.Bs{constructor(){super(...arguments),this.onClose=()=>{this.state.dashboardRef.resolve().setState({overlay:void 0})},this.onToggleSaveTimeRange=()=>{this.setState({saveTimeRange:!this.state.saveTimeRange})},this.onToggleSaveVariables=()=>{this.setState({saveVariables:!this.state.saveVariables})}}}Qe.Component=({model:Se})=>{const{showDiff:Ae,saveAsCopy:Ye,saveTimeRange:dt,saveVariables:bt}=Se.useState(),Rt=Ne(Se.state.dashboardRef.resolve(),dt,bt),{changedSaveModel:kt,initialSaveModel:Jt,diffs:$t,diffCount:an}=Rt,Ln=Se.state.dashboardRef.resolve(),ra=Ln.state.meta.provisioned,ya=m.createElement(a.U,null,m.createElement(v.o,{label:"Details",active:!Ae,onChangeTab:()=>Se.setState({showDiff:!1})}),an>0&&m.createElement(v.o,{label:"Changes",active:Ae,onChangeTab:()=>Se.setState({showDiff:!0}),counter:an}));let Hn="Save dashboard";Ye?Hn="Save dashboard copy":ra&&(Hn="Provisioned dashboard");const Da=()=>Ae?m.createElement(D.l,{diff:$t,oldValue:Jt,newValue:kt}):Ye||Rt.isNew?m.createElement(ne,{dashboard:Ln,changeInfo:Rt,drawer:Se}):ra?m.createElement(me,{dashboard:Ln,changeInfo:Rt,drawer:Se}):m.createElement(ge,{dashboard:Ln,changeInfo:Rt,drawer:Se});return m.createElement(E._,{title:Hn,subtitle:Ln.state.title,onClose:Se.onClose,tabs:ya},Da())};var ke=e(24180),je=e(64388),He=e(40845),Ge=e(40276),Oe=e(36830),Ke=e(68064),Ee=e(15068),J=e(27746),oe=e(14578),ue=e(38138),be=e(19727),Le=e(83122),_e=e(75269),Ve=e(10804),We=e(10096),$e=e(44836),it=e(58441),at=e(7758),ht=e(99246),ft=e(40672),gt=e(32264),Dt=e(96374);function It(Se){return m.createElement(J.I,{key:"button-snapshot","data-testid":"button-snapshot",tooltip:(0,$e.t)("dashboard.toolbar.open-original","Open original dashboard"),icon:"link",onClick:()=>jt(Se.originalURL)})}const jt=Se=>{const Ae=Se??"",Ye=ft.sQ.sanitizeUrl(Ae);try{const dt=new URL(Ye,gt.$.appUrl),bt=new URL(gt.$.appUrl);dt.host!==bt.host?g.A.publish(new p.S8({component:Dt.u,props:{title:"Proceed to external site?",modalClass:(0,ye.css)({width:"max-content",maxWidth:"80vw"}),body:m.createElement(m.Fragment,null,m.createElement("p",null,"This link connects to an external website at"," ",m.createElement("code",null,Ae)),m.createElement("p",null,"Are you sure you'd like to proceed?")),confirmVariant:"primary",confirmText:"Proceed",onConfirm:()=>{window.location.href=dt.href}}})):s.Ny.push(Ye)}catch(dt){console.error("Failed to open original dashboard",dt)}},Vt=m.memo(({dashboard:Se})=>{const Ae=m.createElement(Ee.U,{alignment:"right"},m.createElement(_t,{dashboard:Se}));return m.createElement(_e.H,{actions:Ae})});Vt.displayName="NavToolbarActions";function _t({dashboard:Se}){const{isEditing:Ae,viewPanelScene:Ye,isDirty:dt,uid:bt,meta:Rt,editview:kt,editPanel:Jt}=Se.useState(),$t=We.TP.hasEditPermissionInFolders,an=[],Ln=(0,He.of)(rt),ra=!!Jt,ya=!!Ye;an.push({group:"icon-actions",condition:bt&&!kt&&!!Rt.canStar&&!ra,render:()=>{let ja=Rt.isStarred?(0,$e.t)("dashboard.toolbar.unmark-favorite","Unmark as favorite"):(0,$e.t)("dashboard.toolbar.mark-favorite","Mark as favorite");return m.createElement(J.I,{tooltip:ja,icon:m.createElement(oe.I,{name:Rt.isStarred?"favorite":"star",size:"lg",type:Rt.isStarred?"mono":"default"}),key:"star-dashboard-button",onClick:()=>{at.c.toolbarFavoritesClick(),Se.onStarDashboard()}})}}),an.push({group:"icon-actions",condition:bt&&!kt&&!ra,render:()=>m.createElement(J.I,{key:"view-in-old-dashboard-button",tooltip:"Switch to old dashboard page",icon:"apps",onClick:()=>{Rt.isSnapshot?s.Ny.partial({scenes:null}):s.Ny.push(`/d/${bt}`)}})}),an.push({group:"icon-actions",condition:Rt.isSnapshot&&!Ae,render:()=>m.createElement(It,{originalURL:Se.getInitialSaveModel()?.snapshot?.originalUrl??""})}),ht.C.left.length>0&&!ra&&ht.C.left.map((ja,Ls)=>{const jr={dashboard:(0,l.UA)().getCurrent()};if(ja.show(jr)){const qs=ja.component;an.push({group:"icon-actions",condition:!0,render:()=>m.createElement(qs,{...jr})})}}),an.push({group:"back-button",condition:ya||ra,render:()=>m.createElement(P.$n,{onClick:()=>{s.Ny.partial({viewPanel:null,editPanel:null})},tooltip:"",key:"back",variant:"secondary",size:"sm",icon:"arrow-left"},"Back to dashboard")}),an.push({group:"back-button",condition:!!kt,render:()=>m.createElement(P.$n,{onClick:()=>{s.Ny.partial({editview:null})},tooltip:"",key:"back",fill:"text",variant:"secondary",size:"sm",icon:"arrow-left"},"Back to dashboard")}),an.push({group:"main-buttons",condition:bt&&!Ae&&!Rt.isSnapshot,render:()=>m.createElement(P.$n,{key:"share-dashboard-button",tooltip:(0,$e.t)("dashboard.toolbar.share","Share dashboard"),size:"sm",className:Ln,fill:"outline",onClick:()=>{at.c.toolbarShareClick(),Se.showModal(new it.Z({dashboardRef:Se.getRef()}))}},"Share")}),an.push({group:"main-buttons",condition:!Ae&&Se.canEditDashboard()&&!ya&&!ra,render:()=>m.createElement(P.$n,{onClick:()=>{Se.onEnterEditMode()},tooltip:"Enter edit mode",key:"edit",className:Ln,variant:"primary",size:"sm"},"Edit")}),an.push({group:"settings",condition:Ae&&Se.canEditDashboard()&&!ya&&!ra&&!kt,render:()=>m.createElement(P.$n,{onClick:()=>{Se.onOpenSettings()},tooltip:"Dashboard settings",fill:"text",size:"sm",key:"settings",variant:"secondary"},"Settings")}),an.push({group:"main-buttons",condition:Ae&&!kt&&!Rt.isNew&&!ya&&!ra,render:()=>m.createElement(P.$n,{onClick:()=>Se.exitEditMode({skipConfirm:!1}),tooltip:"Exits edit mode and discards unsaved changes",size:"sm",key:"discard",fill:"text",variant:"primary"},"Exit edit")}),an.push({group:"main-buttons",condition:ra&&!kt&&!Rt.isNew&&!ya,render:()=>m.createElement(P.$n,{onClick:Jt?.onDiscard,tooltip:"Discard panel changes",size:"sm",key:"discard",fill:"outline",variant:"destructive"},"Discard panel changes")}),an.push({group:"main-buttons",condition:Ae&&(Rt.canSave||$t),render:()=>{if(Rt.isNew)return m.createElement(P.$n,{onClick:()=>{at.c.toolbarSaveClick(),Se.openSaveDrawer({})},className:Ln,tooltip:"Save changes",key:"save",size:"sm",variant:"primary"},"Save dashboard");if($t&&!Rt.canSave)return m.createElement(P.$n,{onClick:()=>{at.c.toolbarSaveClick(),Se.openSaveDrawer({saveAsCopy:!0})},className:Ln,tooltip:"Save as copy",key:"save",size:"sm",variant:dt?"primary":"secondary"},"Save as copy");const ja=m.createElement(ue.W,null,m.createElement(ue.W.Item,{label:"Save",icon:"save",onClick:()=>{at.c.toolbarSaveClick(),Se.openSaveDrawer({})}}),m.createElement(ue.W.Item,{label:"Save as copy",icon:"copy",onClick:()=>{at.c.toolbarSaveAsClick(),Se.openSaveDrawer({saveAsCopy:!0})}}));return m.createElement(be.e,{className:Ln,key:"save"},m.createElement(P.$n,{onClick:()=>{at.c.toolbarSaveClick(),Se.openSaveDrawer({})},tooltip:"Save changes",size:"sm",variant:dt?"primary":"secondary"},"Save dashboard"),m.createElement(Le.m,{overlay:ja},m.createElement(P.$n,{icon:"angle-down",variant:dt?"primary":"secondary",size:"sm"})))}});const Hn=[];let Da="";for(const ja of an)ja.condition&&(Da&&Da!==ja.group&&Da&&Hn.push(m.createElement(Ve.K,{key:`${ja.group}-separator`})),Hn.push(ja.render()),Da=ja.group);return Hn}function rt(Se){return(0,ye.css)({margin:Se.spacing(0,.5)})}function St({model:Se}){const{controls:Ae,overlay:Ye,editview:dt,editPanel:bt}=Se.useState(),Rt=(0,He.of)(pn),kt=(0,ke.zy)(),Jt=(0,ee.useSelector)(Da=>Da.navIndex),$t=Se.getPageNav(kt,Jt),an=Se.getBodyToRender(),Ln=(0,d.tc)(Jt,"dashboards/browse"),ra=kt.search.includes("scene-debugger");if(dt)return m.createElement(m.Fragment,null,m.createElement(dt.Component,{model:dt}),Ye&&m.createElement(Ye.Component,{model:Ye}));const ya=m.createElement(m.Fragment,null,m.createElement("div",{className:Rt.controls},ra&&m.createElement(r.or,{scene:Se,key:"scene-debugger"})),m.createElement(Ke.A,{dashboard:Se,canCreate:!!Se.state.meta.canEdit})),Hn=m.createElement(m.Fragment,null,Ae&&m.createElement("div",{className:Rt.controls},Ae.map(Da=>m.createElement(Da.Component,{key:Da.state.key,model:Da})),ra&&m.createElement(r.or,{scene:Se,key:"scene-debugger"})),m.createElement("div",{className:(0,ye.cx)(Rt.body)},m.createElement(an.Component,{model:an})));return m.createElement(Oe.Y,{navModel:Ln,pageNav:$t,layout:je.k.Custom},bt&&m.createElement(bt.Component,{model:bt}),!bt&&m.createElement(Ge.E,{autoHeightMin:"100%"},m.createElement("div",{className:Rt.canvasContent},m.createElement(Vt,{dashboard:Se}),Se.isEmpty()?ya:Hn)),Ye&&m.createElement(Ye.Component,{model:Ye}))}function pn(Se){return{canvasContent:(0,ye.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:Se.spacing(0,2),flexBasis:"100%",flexGrow:1}),body:(0,ye.css)({label:"body",flexGrow:1,display:"flex",gap:"8px",marginBottom:Se.spacing(2)}),controls:(0,ye.css)({display:"flex",flexWrap:"wrap",alignItems:"center",gap:Se.spacing(1),position:"sticky",top:0,background:Se.colors.background.canvas,zIndex:Se.zIndex.activePanel,padding:Se.spacing(2,0),marginLeft:"auto"})}}var ct=e(64468),Ct=e(57714),Yt=e(64423),cn=e(18226),vn=e(94624),rn=e(72724),en=e(3591),mn=e(13989),Un=e(60656),fn=e(74730);class ca{constructor(Ae){this._vizPanel=Ae}get id(){const Ae=(0,fn.Cs)(this._vizPanel.parent instanceof Un.F?this._vizPanel.parent:this._vizPanel);return isNaN(Ae)?(console.error("VizPanel key could not be translated to a legacy numeric panel id",this._vizPanel),0):Ae}get description(){return this._vizPanel.state.description}get type(){return this._vizPanel.state.pluginId}get title(){return this._vizPanel.state.title}get transformations(){return this._vizPanel.state.$data instanceof r.Es?this._vizPanel.state.$data.state.transformations:[]}get targets(){const Ae=(0,fn.un)(this._vizPanel);return Ae?Ae.state.queries:[]}get datasource(){return(0,fn.un)(this._vizPanel)?.state.datasource}get options(){return this._vizPanel.state.options}get fieldConfig(){return this._vizPanel.state.fieldConfig}get pluginVersion(){return this._vizPanel.state.pluginVersion}}var Lt=e(32023);class qt{constructor(Ae){this._scene=Ae,this.events=new cn.o,this._subs=new Yt.yU;const Ye=r.jh.getTimeRange(Ae);this.formatDate=this.formatDate.bind(this),this._subs.add(Ye.subscribeToState((dt,bt)=>{dt.value!==bt.value&&this.events.publish(new en.sR(dt.value))}))}get id(){return this._scene.state.id??null}get uid(){return this._scene.state.uid??null}get title(){return this._scene.state.title}get description(){return this._scene.state.description}get editable(){return this._scene.state.editable}get graphTooltip(){return this._getSyncMode()}get timepicker(){return{refresh_intervals:Lt.b.getRefreshPicker(this._scene)?.state.intervals,hidden:Lt.b.getDashboardControls(this._scene)?.state.hideTimeControls??!1}}get timezone(){return this.getTimezone()}get weekStart(){return r.jh.getTimeRange(this._scene).state.weekStart}get tags(){return this._scene.state.tags}get links(){return this._scene.state.links}get meta(){return this._scene.state.meta}get time(){const Ae=r.jh.getTimeRange(this._scene);return{from:Ae.state.from,to:Ae.state.to}}get panels(){return hn(this._scene,Ye=>Ye instanceof r.Eb).map(Ye=>new ca(Ye))}get annotations(){const Ae={list:[]};return this._scene.state.$data instanceof r.zr&&(Ae.list=(0,mn.O)(this._scene.state.$data.state.layers)),Ae}getTimezone(){return r.jh.getTimeRange(this._scene).getTimeZone()}sharedTooltipModeEnabled(){return this._getSyncMode()>0}sharedCrosshairModeOnly(){return this._getSyncMode()===1}_getSyncMode(){if(this._scene.state.$behaviors){for(const Ae of this._scene.state.$behaviors)if(Ae instanceof r.Gg.K2)return Ae.state.sync}return vn.y.Off}otherPanelInFullscreen(Ae){return!1}formatDate(Ae,Ye){return(0,rn.LE)(Ae,{format:Ye,timeZone:this.getTimezone()})}getPanelById(Ae){const Ye=(0,fn.vL)(this._scene,(0,fn.XA)(Ae));return Ye?new ca(Ye):null}removePanel(Ae){const Ye=(0,fn.vL)(this._scene,(0,fn.XA)(Ae.id));if(!Ye){console.error("Trying to remove a panel that was not found in scene",Ae);return}const dt=Ye.parent;if(!(dt instanceof r.M$)){console.error("Trying to remove a panel that is not wrapped in SceneGridItem");return}const bt=r.jh.getLayout(Ye);if(!(bt instanceof r.hy)){console.error("Trying to remove a panel in a layout that is not SceneGridLayout ");return}if(bt===dt.parent&&bt.setState({children:bt.state.children.filter(Rt=>Rt!==dt)}),dt.parent instanceof r.tI){const Rt=bt.clone({children:bt.state.children.filter(kt=>kt!==dt)});bt.parent instanceof r.hy&&bt.parent.setState({children:bt.parent.state.children.map(kt=>kt===bt?Rt:kt)})}}canEditAnnotations(Ae){return this._scene.canEditDashboard()?Ae?!!this._scene.state.meta.annotationsPermissions?.dashboard.canEdit:!!this._scene.state.meta.annotationsPermissions?.organization.canEdit:!1}panelInitialized(){}destroy(){this.events.removeAllListeners(),this._subs.unsubscribe()}hasUnsavedChanges(){return this._scene.state.isDirty}}function hn(Se,Ae){let Ye=[];return Se.forEachChild(dt=>{Ae(dt)?Ye.push(dt):Ye=Ye.concat(hn(dt,Ae))}),Ye}function Cn(Se){let Ae=5381;for(let Ye=0;Ye<Se.length;Ye++)Ae=Ae*33^Se.charCodeAt(Ye);return Ae>>>0}var gn=e(11982),xn=e(48548),Tn=e(65123),Wn=e(54612),Sn=e(16560),An=e(86460),ta=e(62930),fa=e(88323),la=e(66864),Xn=e(16233),Ea=e(83195),Ca=e(2619),Sa=e(89667),aa=e(52622),Yn=e(39070),za=e(68706),ns=e(41524);function ps(Se){const Ae=[];if(Se?.series)for(const Ye of Se.series)Ae.push((0,Sa.Nw)(Ye));if(Se?.annotations)for(const Ye of Se.annotations){const dt=(0,Sa.Nw)(Ye);dt.schema?.meta||(dt.schema.meta={}),dt.schema.meta.dataTopic=aa.QR.Annotations,Ae.push(dt)}return Ae}function Cs(Se,Ae){const Ye={panelType:Se.state.pluginId,datasource:"??"},dt=`${gt.$.buildInfo.version} (${gt.$.buildInfo.commit})`;let bt=`| Key | Value |
|--|--|
| Panel | ${Ye.panelType} @ ${Se.state.pluginVersion??dt} |
| Grafana | ${dt} // ${gt.$.buildInfo.edition} |
`;return Ae&&(bt+="<details><summary>Panel debug snapshot dashboard</summary>\n\n```json\n"+Ae+"\n```\n</details>"),bt}async function Fs(Se,Ae,Ye){const dt=(0,Be.ZB)(Se.parent),bt=(0,Te.cloneDeep)(ss),Rt={panelType:dt.type,datasource:"??"},kt=(0,fn.un)(Se);if(!kt.state.data)return;const Jt=kt.state.data,$t=kt?.state.datasource,an=(0,ns.W)(ps(Jt),Ae),Ln=`${gt.$.buildInfo.version} (${gt.$.buildInfo.commit})`,ra=kt.state.queries??[],ya=`<table width="100%">
    <tr>
      <th width="2%">Panel</th>
      <td >${Rt.panelType} @ ${dt.pluginVersion??Ln}</td>
    </tr>
    <tr>
      <th>Queries</th>
      <td>${ra.map(Hn=>{const Da=Hn.datasource??$t;return`${Hn.refId}[${Da?.type}]`}).join(", ")}</td>
    </tr>
    ${cs(dt)}
    ${hs(Jt,an)}
    ${rr(Jt)}
    <tr>
      <th>Grafana</th>
      <td>${Ln} // ${gt.$.buildInfo.edition}</td>
    </tr>
  </table>`.trim();if(bt.panels[0]={...dt,...bt.panels[0],targets:[{refId:"A",datasource:{type:"grafana",uid:"grafana"},queryType:za.nj.Snapshot,snapshot:an}]},dt.transformations?.length){const Hn=bt.panels[bt.panels.length-1];Hn.title=Hn.title+" (after transformations)";const Da=(0,Te.cloneDeep)(Hn);Da.id=100,Da.title="Data (before transformations)",Da.gridPos.w=24,Da.targets[0].withTransforms=!1,bt.panels.push(Da)}return Jt.annotations?.length&&bt.panels.push({id:7,gridPos:{h:6,w:24,x:0,y:20},type:"table",title:"Annotations",datasource:{type:"datasource",uid:"-- Dashboard --"},options:{showTypeIcons:!0},targets:[{datasource:{type:"datasource",uid:"-- Dashboard --"},panelId:2,withTransforms:!0,topic:aa.QR.Annotations,refId:"A"}]}),bt.panels[1].options.content=ya,bt.panels[2].options.content=JSON.stringify(dt,null,2),bt.title=`Debug: ${dt.title} // ${(0,rn.LE)(new Date)}`,bt.tags=["debug",`debug-${Rt.panelType}`],bt.time={from:Ye.from.toISOString(),to:Ye.to.toISOString()},bt}function cs(Se){return Se.transformations?`<tr>
      <th>Transform</th>
      <td>${Se.transformations.map(Ae=>Ae.id).join(", ")}</td>
  </tr>`:""}function hs(Se,Ae){let Ye=Se.series.length??0,dt=0,bt=0;for(const Rt of Se.series)dt+=Rt.fields.length,bt+=Rt.length;return`<tr><th>Data</th><td>${Se.state!==Yn.Gu.Done?Se.state:""} ${Ye} frames, ${dt} fields, ${bt} rows </td></tr>`}function rr(Se){return Se.annotations?.length?`<tr>
  <th>Annotations</th>
  <td>${Se.annotations.map((Ae,Ye)=>`<span>${Ae.length}</span>`)}</td>
</tr>`:""}const ss={panels:[{id:2,title:"Reproduced with embedded data",datasource:{type:"grafana",uid:"grafana"},gridPos:{h:13,w:15,x:0,y:0}},{gridPos:{h:7,w:9,x:15,y:0},id:5,options:{content:"...",mode:"html"},title:"Debug info",type:"text"},{id:6,title:"Original Panel JSON",type:"text",gridPos:{h:13,w:9,x:15,y:7},options:{content:"...",mode:"code",code:{language:"json",showLineNumbers:!0,showMiniMap:!0}}},{id:3,title:"Data from panel above",type:"table",datasource:{type:"datasource",uid:"-- Dashboard --"},gridPos:{h:7,w:15,x:0,y:13},options:{showTypeIcons:!0},targets:[{datasource:{type:"datasource",uid:"-- Dashboard --"},panelId:2,withTransforms:!0,refId:"A"}]}],schemaVersion:37};var bs=(Se=>(Se[Se.Support=0]="Support",Se[Se.Data=1]="Data",Se))(bs||{}),tr=(Se=>(Se[Se.PanelSnapshot=0]="PanelSnapshot",Se[Se.GithubComment=1]="GithubComment",Se))(tr||{});class or extends Ca.Q{constructor(Ae){super({panel:Ae,panelTitle:r.jh.interpolate(Ae,Ae.state.title,{},"text"),currentTab:0,showMessage:1,snapshotText:"",markdownText:"",randomize:{},snapshotUpdate:0,options:[{label:"GitHub comment",description:"Copy and paste this message into a GitHub issue or comment",value:1},{label:"Panel support snapshot",description:"Dashboard JSON used to help troubleshoot visualization issues",value:0}]}),this.onCurrentTabChange=Ye=>{this.setState({currentTab:Ye})},this.onShowMessageChange=Ye=>{this.setState({showMessage:Ye.value})},this.onGetMarkdownForClipboard=()=>{const{markdownText:Ye}=this.state,dt=Math.pow(1024,2)*1.5;return Ye.length>dt?(this.setState({error:{title:"Copy to clipboard failed",message:"Snapshot is too large, consider download and attaching a file instead"}}),""):Ye},this.onDownloadDashboard=()=>{const{snapshotText:Ye,panelTitle:dt}=this.state,bt=new Blob([Ye],{type:"text/plain"}),Rt=`debug-${dt}-${(0,rn.LE)(new Date)}.json.txt`;le()(bt,Rt)},this.onSetSnapshotText=Ye=>{this.setState({snapshotText:Ye})},this.onToggleRandomize=Ye=>{const{randomize:dt}=this.state;this.setState({randomize:{...dt,[Ye]:!dt[Ye]}})}}async buildDebugDashboard(){const{panel:Ae,randomize:Ye,snapshotUpdate:dt}=this.state,bt=await Fs(Ae,Ye,r.jh.getTimeRange(Ae).state.value),Rt=JSON.stringify(bt,null,2),kt=Cs(Ae,Rt),Jt=(0,Ea.cN)((0,Ea.j_)("bytes")(Rt?.length??0));let $t;try{$t=(0,ct.wM)({dashboard:bt,meta:{isEmbedded:!0}}).state.body}catch(an){console.log("Error creating scene:",an)}this.setState({snapshot:bt,snapshotText:Rt,markdownText:kt,snapshotSize:Jt,snapshotUpdate:dt+1,scene:$t})}}function vs({panel:Se,onClose:Ae}){const Ye=(0,He.of)(hr),dt=(0,m.useMemo)(()=>new or(Se),[Se]),bt=Se.getPlugin(),{currentTab:Rt,loading:kt,error:Jt,options:$t,showMessage:an,snapshotSize:Ln,markdownText:ra,snapshotText:ya,randomize:Hn,panelTitle:Da,scene:ja}=dt.useState();if((0,m.useEffect)(()=>{dt.buildDebugDashboard()},[dt,bt,Hn]),!bt)return null;const Ls=[{label:"Snapshot",value:bs.Support},{label:"Data",value:bs.Data}],jr=gt.$.supportBundlesEnabled&&Xn.TP.hasPermission(ee.AccessControlAction.ActionSupportBundlesCreate);return m.createElement(E._,{title:"Get help with this panel",size:"lg",onClose:Ae,subtitle:m.createElement(T.B,{direction:"column",gap:1},m.createElement(T.B,{direction:"row",gap:1},m.createElement(An.y,{featureState:o.Ay.beta}),m.createElement("a",{href:"https://grafana.com/docs/grafana/latest/troubleshooting/",target:"blank",className:"external-link",rel:"noopener noreferrer"},"Troubleshooting docs ",m.createElement(oe.I,{name:"external-link-alt"}))),m.createElement("span",{className:"muted"},"To request troubleshooting help, send a snapshot of this panel to Grafana Labs Technical Support. The snapshot contains query response data and panel settings."),jr&&m.createElement("span",{className:"muted"},"You can also retrieve a support bundle containing information concerning your Grafana instance and configured datasources in the ",m.createElement("a",{href:"/support-bundles"},"support bundles section"),".")),tabs:m.createElement(a.U,null,Ls.map((qs,So)=>m.createElement(v.o,{key:`${qs.value}-${So}`,label:qs.label,active:qs.value===Rt,onChangeTab:()=>dt.onCurrentTabChange(qs.value)})))},kt&&m.createElement(ta.y,null),Jt&&m.createElement(y.F,{title:Jt.title},Jt.message),Rt===bs.Data&&m.createElement("div",{className:Ye.code},m.createElement("div",{className:Ye.opts},m.createElement(M.D,{label:"Template",className:Ye.field},m.createElement(fa.l6,{options:$t,value:an,onChange:dt.onShowMessageChange})),an===tr.GithubComment?m.createElement(Re.b,{icon:"copy",getText:dt.onGetMarkdownForClipboard},"Copy to clipboard"):m.createElement(P.$n,{icon:"download-alt",onClick:dt.onDownloadDashboard},"Download (",Ln,")")),m.createElement(Me.Ay,{disableWidth:!0},({height:qs})=>m.createElement(De.B,{width:"100%",height:qs,language:an===tr.GithubComment?"markdown":"json",showLineNumbers:!0,showMiniMap:!0,value:an===tr.GithubComment?ra:ya,readOnly:!1,onBlur:dt.onSetSnapshotText}))),Rt===bs.Support&&m.createElement(m.Fragment,null,m.createElement(M.D,{label:"Randomize data",description:"Modify the original data to hide sensitve information.  Note the lengths will stay the same, and duplicate values will be equal."},m.createElement(la.Gy,null,m.createElement(S.K,{label:"Labels",id:"randomize-labels",showLabel:!0,value:!!Hn.labels,onChange:()=>dt.onToggleRandomize("labels")}),m.createElement(S.K,{label:"Field names",id:"randomize-field-names",showLabel:!0,value:!!Hn.names,onChange:()=>dt.onToggleRandomize("names")}),m.createElement(S.K,{label:"String values",id:"randomize-string-values",showLabel:!0,value:!!Hn.values,onChange:()=>dt.onToggleRandomize("values")}))),m.createElement(M.D,{label:"Support snapshot",description:`Panel: ${Da}`},m.createElement(T.B,null,m.createElement(P.$n,{icon:"download-alt",onClick:dt.onDownloadDashboard},"Dashboard (",Ln,")"),m.createElement(Re.b,{icon:"github",getText:dt.onGetMarkdownForClipboard,title:"Copy a complete GitHub comment to the clipboard"},"Copy to clipboard"))),m.createElement(Me.Ay,{disableWidth:!0},({height:qs})=>m.createElement("div",{style:{height:qs,overflow:"auto"}},ja&&m.createElement(ja.Component,{model:ja})))))}const hr=Se=>({code:(0,ye.css)({flexGrow:1,height:"100%",overflow:"scroll"}),field:(0,ye.css)({width:"100%"}),opts:(0,ye.css)({display:"flex",width:"100%",flexGrow:0,alignItems:"center",justifyContent:"flex-end","& button":{marginLeft:Se.spacing(1)}})});var _s=e(61453);class Ya extends r.Bs{constructor(Ae){super({...Ae,options:{withTransforms:!0,withFieldConfig:!0}}),this.onOptionsChange=Ye=>{this.setState({options:Ye})}}getTabLabel(){return(0,$e.t)("dashboard.inspect.data-tab","Data")}getTabValue(){return Sn.q.Data}}Ya.Component=({model:Se})=>{const{options:Ae}=Se.useState(),Ye=Se.state.panelRef.resolve(),dt=r.jh.getData(Ye),{data:bt}=Bs(dt,Ae.withTransforms).useState(),Rt=r.jh.getTimeRange(Ye);return m.createElement(_s.q,{isLoading:bt?.state===Yn.Gu.Loading,data:bt?.series,options:Ae,hasTransformations:Ws(dt),timeZone:Rt.getTimeZone(),panelPluginId:Ye.state.pluginId,dataName:Ye.state.title,fieldConfig:Ye.state.fieldConfig,onOptionsChange:Se.onOptionsChange})};function Ws(Se){return Se instanceof r.Es?Se.state.transformations.length>0:!1}function Bs(Se,Ae){return Ae&&Se instanceof r.Es?Se.state.$data:Se}var Ks=e(18803),Vr=e(26323),Js=e(77938),Er=e(6204),yr=e(11497);class zo extends r.Bs{constructor(Ae){super({...Ae,source:"panel-json",jsonText:Dr("panel-json",Ae.panelRef.resolve())}),this.onChangeSource=Ye=>{this.setState({source:Ye.value,jsonText:Dr(Ye.value,this.state.panelRef.resolve())})},this.onApplyChange=()=>{const Ye=this.state.panelRef.resolve(),dt=(0,fn.YQ)(Ye),bt=JSON.parse(this.state.jsonText),Rt=new f.a(bt),kt=(0,ct.tt)(Rt),Jt=r.Go.cloneSceneObjectState(kt.state);if(!(Ye.parent instanceof r.M$)||!(kt instanceof r.M$)){console.error("Cannot update state of panel",Ye,kt);return}this.state.onClose(),dt.state.isEditing||dt.onEnterEditMode(),Ye.parent.setState(Jt),(0,Er.B9)(Sn.q.JSON,"apply",{panel_type_changed:Ye.state.pluginId!==Rt.type,panel_id_changed:(0,fn.Cs)(Ye)!==Rt.id,panel_grid_pos_changed:qr(Ye.parent.state,Jt),panel_targets_changed:us((0,fn.un)(Ye),(0,fn.un)(Jt.$data))})},this.onCodeEditorBlur=Ye=>{this.setState({jsonText:Ye})}}getTabLabel(){return(0,$e.t)("dashboard.inspect.json-tab","JSON")}getTabValue(){return Sn.q.JSON}getOptions(){const Ye=this.state.panelRef.resolve().state.$data,dt=[{label:(0,$e.t)("dashboard.inspect-json.panel-json-label","Panel JSON"),description:(0,$e.t)("dashboard.inspect-json.panel-json-description","The model saved in the dashboard JSON that configures how everything works."),value:"panel-json"}];return Ye&&(dt.push({label:(0,$e.t)("dashboard.inspect-json.panel-data-label","Panel data"),description:(0,$e.t)("dashboard.inspect-json.panel-data-description","The raw model passed to the panel visualization"),value:"panel-data"}),dt.push({label:(0,$e.t)("dashboard.inspect-json.dataframe-label","DataFrame JSON (from Query)"),description:(0,$e.t)("dashboard.inspect-json.dataframe-description","Raw data without transformations and field config applied. "),value:"data-frames"})),dt}isEditable(){if(this.state.source!=="panel-json")return!1;const Ae=this.state.panelRef.resolve();return Ae.parent instanceof r.M$?(0,fn.YQ)(Ae).state.meta.canEdit:!1}}zo.Component=({model:Se})=>{const{source:Ae,jsonText:Ye}=Se.useState(),dt=(0,He.of)(Vr.A),bt=Se.getOptions();return m.createElement("div",{className:dt.wrap},m.createElement("div",{className:dt.toolbar,"aria-label":R.Tp.components.PanelInspector.Json.content},m.createElement(M.D,{label:(0,$e.t)("dashboard.inspect-json.select-source","Select source"),className:"flex-grow-1"},m.createElement(fa.l6,{inputId:"select-source-dropdown",options:bt,value:bt.find(Rt=>Rt.value===Ae)??bt[0].value,onChange:Se.onChangeSource})),Se.isEditable()&&m.createElement(P.$n,{className:dt.toolbarItem,onClick:Se.onApplyChange},"Apply")),m.createElement("div",{className:dt.content},m.createElement(Me.Ay,{disableWidth:!0},({height:Rt})=>m.createElement(De.B,{width:"100%",height:Rt,language:"json",showLineNumbers:!0,showMiniMap:Ye.length>100,value:Ye,readOnly:!Se.isEditable(),onBlur:Se.onCodeEditorBlur}))))};function Dr(Se,Ae){let Ye={};switch(Se){case"panel-json":{(0,Er.B9)(Sn.q.JSON,"panelData"),(Ae.parent instanceof r.M$||Ae.parent instanceof yr.w)&&(Ye=(0,Be.ZB)(Ae.parent));break}case"panel-data":{(0,Er.B9)(Sn.q.JSON,"panelJSON");const dt=r.jh.getData(Ae);dt.state.data&&(Ye=Ae.applyFieldConfig(dt.state.data));break}case"data-frames":{(0,Er.B9)(Sn.q.JSON,"dataFrame");const dt=r.jh.getData(Ae);dt.state.data&&(dt instanceof r.Es&&dt.state.$data?.state.data?Ye=(0,Ks.B6)(dt.state.$data.state.data):Ye=(0,Ks.B6)(dt.state.data))}}return(0,Js.p)(Ye)}function qr(Se,Ae){return Se.x!==Ae.x||Se.y!==Ae.y||Se.width!==Ae.width||Se.height!==Ae.height}function us(Se,Ae){return Se===void 0||Ae===void 0?!1:!(0,Te.isEqual)(Se.state.queries,Ae.state.queries)}class eo extends r.Bs{getTabLabel(){return(0,$e.t)("dashboard.inspect.meta-tab","Meta data")}getTabValue(){return Sn.q.Meta}}eo.Component=({model:Se})=>{const{panelRef:Ae,dataSource:Ye}=Se.state,dt=r.jh.getData(Ae.resolve()),bt=Ye.components?.MetadataInspector;return!dt.state.data||!bt?null:m.createElement(bt,{datasource:Ye,data:dt.state.data.series})};var Fr=e(90820);class nr extends r.Bs{constructor(){super(...arguments),this.onRefreshQuery=()=>{const Ae=(0,fn.un)(this.state.panelRef.resolve());Ae&&Ae.runQueries()}}getTabLabel(){return(0,$e.t)("dashboard.inspect.query-tab","Query")}getTabValue(){return Sn.q.Query}}nr.Component=({model:Se})=>{const Ae=r.jh.getData(Se.state.panelRef.resolve()).useState();return Ae.data?m.createElement(Fr.e,{data:Ae.data,onRefreshQuery:Se.onRefreshQuery}):null};var ko=e(32067);class zs extends r.Bs{getTabLabel(){return(0,$e.t)("dashboard.inspect.stats-tab","Stats")}getTabValue(){return Sn.q.Stats}}zs.Component=({model:Se})=>{const Ae=r.jh.getData(Se.state.panelRef.resolve()).useState(),Ye=r.jh.getTimeRange(Se.state.panelRef.resolve());return Ae.data?m.createElement(ko.N,{data:Ae.data,timeZone:Ye.getTimeZone()}):null};class Es extends r.Bs{constructor(Ae){super(Ae),this.onClose=()=>{const Ye=(0,fn.YQ)(this);s.Ny.push((0,gn.uZ)({uid:Ye.state.uid,slug:Ye.state.meta.slug,currentQueryParams:s.Ny.getLocation().search,updateQuery:{inspect:null,inspectTab:null}}))},this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){this.buildTabs(0)}async buildTabs(Ae){const Ye=this.state.panelRef,dt=Ye?.resolve()?.getPlugin(),bt=[];if(dt||(Ae<2e3?setTimeout(()=>this.buildTabs(Ae+100),100):this.setState({pluginNotLoaded:!0})),Ye){if((0,Wn.$)(dt)){const Rt=r.jh.getData(Ye.resolve());bt.push(new Ya({panelRef:Ye})),bt.push(new zs({panelRef:Ye})),bt.push(new nr({panelRef:Ye}));const kt=await(0,Tn.BN)(Rt.state.data);kt&&bt.push(new eo({panelRef:Ye,dataSource:kt}))}bt.push(new zo({panelRef:Ye,onClose:this.onClose}))}this.setState({tabs:bt})}getDrawerTitle(){const Ae=this.state.panelRef?.resolve();return Ae?r.jh.interpolate(Ae,`Inspect: ${Ae.state.title}`):"Inspect panel"}}Es.Component=to;function to({model:Se}){const{tabs:Ae,pluginNotLoaded:Ye,panelRef:dt}=Se.useState(),bt=(0,ke.zy)(),Rt=new URLSearchParams(bt.search);if(!Ae)return null;const kt=Rt.get("inspectTab"),Jt=Ae.find(an=>an.getTabValue()===kt)??Ae[0],$t=dt.resolve();return kt===Sn.q.Help?m.createElement(vs,{panel:$t,onClose:Se.onClose}):m.createElement(E._,{title:Se.getDrawerTitle(),onClose:Se.onClose,size:"md",tabs:m.createElement(a.U,null,Ae.map(an=>m.createElement(v.o,{key:an.state.key,label:an.getTabLabel(),active:an===Jt,href:t.I.getUrlForPartial(bt,{inspectTab:an.getTabValue()})})))},Ye&&m.createElement(y.F,{title:"Panel plugin not loaded"},"Make sure the panel you want to inspect is visible and has been displayed before opening inspect."),Jt&&Jt.Component&&m.createElement(Jt.Component,{model:Jt}))}var ts=e(40980),Ts=e(95689),Zn=e(39558),xt=e(82422),Ir=e(27747),Ho=e(75471),Ar=e(16817),_r=e(76885),ir=e(34867),Go=e(25027),yo=e(63066);const fo=({panel:Se,className:Ae})=>{const Ye=(0,ke.zy)(),{loading:dt,value:bt}=(0,Ar.A)(()=>(0,yo.J6)(Se),[Se]);if(dt)return m.createElement(P.$n,{disabled:!0},"New alert rule");if(!bt)return m.createElement(y.F,{severity:"info",title:"No alerting capable query found"},"Cannot create alerts from this panel because no query to an alerting capable datasource is found.");const Rt=async()=>{(0,ir.fH)(Go.le.alertRuleFromPanel);const kt=await(0,yo.J6)(Se),Jt=_r.kM.renderUrl("/alerting/new",{defaults:JSON.stringify(kt),returnTo:Ye.pathname+Ye.search});s.Ny.push(Jt)};return m.createElement(P.$n,{icon:"bell",onClick:Rt,className:Ae,"data-testid":"create-alert-rule-button"},"New alert rule")};var Mt=(Se=>(Se.Queries="queries",Se.Transformations="transformations",Se.Alert="alert",Se))(Mt||{});class Ft extends r.Bs{constructor(Ae){super({}),this.tabId=Mt.Alert,this.TabComponent=Ye=>En({...Ye,model:this}),this._panelManager=Ae}getTabLabel(){return"Alert"}getDashboardUID(){return this.getDashboard().state.uid}getDashboard(){return(0,fn.YQ)(this._panelManager)}getLegacyPanelId(){return(0,fn.Cs)(this._panelManager.state.panel)}getCanCreateRules(){const Ae=(0,Ho.Wd)("grafana");return this.getDashboard().state.meta.canSave&&We.TP.hasPermission(Ae.create)}get panelManager(){return this._panelManager}get panel(){return this._panelManager.state.panel}}Ft.Component=ln;function ln(Se){const{model:Ae}=Se,Ye=(0,He.of)(Zt),{errors:dt,loading:bt,rules:Rt}=(0,Ir.S)({dashboardUID:Ae.getDashboardUID(),panelId:Ae.getLegacyPanelId()}),kt=dt.length?m.createElement(y.F,{title:"Errors loading rules",severity:"error"},dt.map((an,Ln)=>m.createElement("div",{key:Ln},"Failed to load Grafana rules state: ",an.message||"Unknown error."))):null;if(bt&&!Rt.length)return m.createElement(m.Fragment,null,kt,m.createElement(Zn._,{text:"Loading rules..."}));const{panel:Jt}=Ae,$t=Ae.getCanCreateRules();return Rt.length?m.createElement(m.Fragment,null,m.createElement(xt.s,{rules:Rt}),$t&&m.createElement(fo,{className:Ye.newButton,panel:Jt})):m.createElement("div",{className:Ye.noRulesWrapper},m.createElement("p",null,"There are no alert rules linked to this panel."),$t&&m.createElement(fo,{panel:Jt}))}const Zt=Se=>({newButton:(0,ye.css)({marginTop:Se.spacing(3)}),noRulesWrapper:(0,ye.css)({margin:Se.spacing(2),backgroundColor:Se.colors.background.secondary,padding:Se.spacing(3)})});function En(Se){const{model:Ae}=Se,{rules:Ye}=(0,Ir.S)({dashboardUID:Ae.getDashboardUID(),panelId:Ae.getLegacyPanelId(),poll:!1});return m.createElement(v.o,{key:Se.key,label:Ae.getTabLabel(),icon:"bell",counter:Ye.length,active:Se.active,onChangeTab:Se.onChangeTab})}var Fn=e(21969),Vn=e(53478),sa=e(64152),ga=e(44932),Ga=e(37464),qa=e(14348),xa=e(7928);class Qa extends r.Bs{constructor(Ae){super({}),this.tabId=Mt.Queries,this.icon="database",this.onOpenInspector=()=>{this._panelManager.inspectPanel()},this.onChangeDataSource=async(Ye,dt)=>{this._panelManager.changePanelDataSource(Ye,dt)},this.onQueryOptionsChange=Ye=>{this._panelManager.changeQueryOptions(Ye)},this.onQueriesChange=Ye=>{this._panelManager.changeQueries(Ye)},this.onRunQueries=()=>{this._panelManager.queryRunner.runQueries()},this.addQueryClick=()=>{const Ye=this.getQueries();this.onQueriesChange((0,Fn.U7)(Ye,this.newQuery()))},this.onAddQuery=Ye=>{const dt=this.getQueries(),bt=this._panelManager.state.dsSettings;this.onQueriesChange((0,Fn.U7)(dt,Ye,{type:bt?.type,uid:bt?.uid}))},this.onAddExpressionClick=()=>{const Ye=this.getQueries();this.onQueriesChange((0,Fn.U7)(Ye,Vn.Ex.newQuery()))},this.TabComponent=Ye=>ys({...Ye,model:this}),this._panelManager=Ae}getTabLabel(){return"Queries"}getItemsCount(){return this.getQueries().length}buildQueryOptions(){const Ae=this._panelManager,Ye=this._panelManager.state.panel,dt=this._panelManager.queryRunner,bt=r.jh.getTimeRange(Ye);let Rt={from:void 0,shift:void 0,hide:void 0};bt instanceof xa.v&&(Rt={from:bt.state.timeFrom,shift:bt.state.timeShift,hide:bt.state.hideTimeOverride});let kt=dt.state.queries;return{cacheTimeout:Ae.state.dsSettings?.meta.queryOptions?.cacheTimeout?dt.state.cacheTimeout:void 0,queryCachingTTL:Ae.state.dsSettings?.cachingConfig?.enabled?dt.state.queryCachingTTL:void 0,dataSource:{default:Ae.state.dsSettings?.isDefault,type:Ae.state.dsSettings?.type,uid:Ae.state.dsSettings?.uid},queries:kt,maxDataPoints:dt.state.maxDataPoints,minInterval:dt.state.minInterval,timeRange:Rt}}getQueries(){return this._panelManager.queryRunner.state.queries}newQuery(){const{dsSettings:Ae,datasource:Ye}=this._panelManager.state,dt=Ae?.meta.mixed?Ye:Ae;return{...Ye?.getDefaultQuery?.(o.Jk.PanelEditor),datasource:{uid:dt?.uid,type:dt?.type}}}isExpressionsSupported(Ae){return(Ae.meta.alerting||Ae.meta.mixed)===!0}renderExtraActions(){return sa.m.getAllExtraRenderAction().map((Ae,Ye)=>Ae({onAddQuery:this.onAddQuery,onChangeDataSource:this.onChangeDataSource,key:Ye})).filter(Boolean)}get queryRunner(){return this._panelManager.queryRunner}get panelManager(){return this._panelManager}}Qa.Component=ar;function ar({model:Se}){const{datasource:Ae,dsSettings:Ye}=Se.panelManager.useState(),{data:dt}=Se.panelManager.queryRunner.useState();if(!Ae||!Ye||!dt)return null;const bt=!(0,qa.kN)(Ye.name);return m.createElement(m.Fragment,null,m.createElement(Ga.K,{data:dt,dsSettings:Ye,dataSource:Ae,options:Se.buildQueryOptions(),onDataSourceChange:Se.onChangeDataSource,onOptionsChange:Se.onQueryOptionsChange,onOpenQueryInspector:Se.onOpenInspector}),m.createElement(ga.L,{data:dt,queries:Se.getQueries(),dsSettings:Ye,onAddQuery:Se.onAddQuery,onQueriesChange:Se.onQueriesChange,onRunQueries:Se.onRunQueries}),m.createElement(la.Gy,{spacing:"md",align:"flex-start"},bt&&m.createElement(P.$n,{icon:"plus",onClick:Se.addQueryClick,variant:"secondary","data-testid":R.Tp.components.QueryTab.addQuery},"Add query"),gt.$.expressionsEnabled&&Se.isExpressionsSupported(Ye)&&m.createElement(P.$n,{icon:"plus",onClick:Se.onAddExpressionClick,variant:"secondary","data-testid":"query-tab-add-expression"},m.createElement("span",null,"Expression\xA0")),Se.renderExtraActions()))}function ys(Se){const{model:Ae}=Se,Ye=Ae.queryRunner.useState();return m.createElement(v.o,{key:Se.key,label:Ae.getTabLabel(),icon:"database",counter:Ye.queries.length,active:Se.active,onChangeTab:Se.onChangeTab})}var ks=e(75494),Ss=e(57650),xs=e(79280),Us=e(97497),lr=e(29158),Hs=e(21427),Oa=e(57120);function As(Se){const{isOpen:Ae,series:Ye,onClose:dt,onTransformationAdd:bt}=Se,[Rt,kt]=(0,m.useState)({search:"",showIllustrations:!0}),Jt=Hn=>kt({...Rt,search:Hn.currentTarget.value}),$t=Hn=>kt({...Rt,showIllustrations:Hn}),an=Hn=>kt({...Rt,selectedFilter:Hn}),Ln=(0,m.useMemo)(()=>Us.h.list().sort((Hn,Da)=>Hn.name>Da.name?1:Da.name>Hn.name?-1:0),[]),ra=Ln.filter(Hn=>Rt.selectedFilter&&Rt.selectedFilter!==Oa.e&&!Hn.categories?.has(Rt.selectedFilter)?!1:Hn.name.toLocaleLowerCase().includes(Rt.search.toLocaleLowerCase())),ya=m.createElement(m.Fragment,null,ra.length," / ",Ln.length," \xA0\xA0",m.createElement(lr.K,{name:"times",onClick:()=>{kt({...Rt,search:""})},tooltip:"Clear search"}));if(Ae)return m.createElement(Hs.R,{data:Ye,onTransformationAdd:bt,xforms:ra,search:Rt.search,noTransforms:!1,suffix:Rt.search!==""?ya:m.createElement(m.Fragment,null),selectedFilter:Rt.selectedFilter,onSearchChange:Jt,onSearchKeyDown:()=>{},showIllustrations:Rt.showIllustrations,onShowIllustrationsChange:$t,onSelectedFilterChange:an,onClose:dt})}class zr extends r.Bs{constructor(Ae){super({}),this.tabId=Mt.Transformations,this.icon="process",this.TabComponent=Ye=>Do({...Ye,model:this}),this._panelManager=Ae}getTabLabel(){return"Transformations"}getQueryRunner(){return this._panelManager.queryRunner}getDataTransformer(){return this._panelManager.dataTransformer}onChangeTransformations(Ae){this._panelManager.changeTransformations(Ae)}get panelManager(){return this._panelManager}}zr.Component=Ha;function Ha({model:Se}){const Ae=(0,He.of)(no),Ye=Se.getQueryRunner().useState(),{data:dt,transformations:bt}=Se.getDataTransformer().useState(),Rt=bt,[kt,Jt]=(0,m.useState)(!1),[$t,an]=(0,m.useState)(!1),Ln=()=>Jt(!0),ra=()=>Jt(!1);if(!dt||!Ye.data)return;const ya=m.createElement(As,{onClose:ra,onTransformationAdd:Hn=>{Hn.value!==void 0&&(Se.onChangeTransformations([...Rt,{id:Hn.value,options:{}}]),ra())},isOpen:kt,series:dt.series});return Rt.length<1?m.createElement(m.Fragment,null,m.createElement(xs.p,{onShowPicker:Ln}),ya):m.createElement(m.Fragment,null,m.createElement(cr,{data:Ye.data,transformations:Rt,model:Se}),m.createElement(be.e,null,m.createElement(P.$n,{icon:"plus",variant:"secondary",onClick:Ln,"data-testid":R.Tp.components.Transforms.addTransformationButton},"Add another transformation"),m.createElement(P.$n,{"data-testid":R.Tp.components.Transforms.removeAllTransformationsButton,className:Ae.removeAll,icon:"times",variant:"secondary",onClick:()=>an(!0)},"Delete all transformations")),m.createElement(Dt.u,{isOpen:$t,title:"Delete all transformations?",body:"By deleting all transformations, you will go back to the main selection screen.",confirmText:"Delete all",onConfirm:()=>{Se.onChangeTransformations([]),an(!1)},onDismiss:()=>an(!1)}),ya)}function cr({transformations:Se,model:Ae,data:Ye}){const dt=Se.map((Rt,kt)=>({id:`${kt} - ${Rt.id}`,transformation:Rt})),bt=Rt=>{if(!Rt||!Rt.destination)return;const kt=Rt.source.index,Jt=Rt.destination.index;if(kt===Jt)return;const $t=Array.from(dt),[an]=$t.splice(kt,1);$t.splice(Jt,0,an),Ae.onChangeTransformations($t.map(Ln=>Ln.transformation))};return m.createElement(ks.JY,{onDragEnd:bt},m.createElement(ks.gL,{droppableId:"transformations-list",direction:"vertical"},Rt=>m.createElement("div",{ref:Rt.innerRef,...Rt.droppableProps},m.createElement(Ss.A,{onChange:(kt,Jt)=>{const $t=Se.slice();$t[kt]=Jt,Ae.onChangeTransformations($t)},onRemove:kt=>{const Jt=Se.slice();Jt.splice(kt,1),Ae.onChangeTransformations(Jt)},configs:dt,data:Ye}),Rt.placeholder)))}const no=Se=>({removeAll:(0,ye.css)({marginLeft:Se.spacing(2)})});function Do(Se){const{model:Ae}=Se,Ye=Ae.getDataTransformer().useState();return m.createElement(v.o,{key:Se.key,label:Ae.getTabLabel(),icon:"process",counter:Ye.transformations.length,active:Se.active,onChangeTab:Se.onChangeTab})}class jo extends r.Bs{constructor(Ae){super({tab:Mt.Queries,tabs:[]}),this._urlSync=new r.So(this,{keys:["tab"]}),this._initialTabsBuilt=!1,this.onChangeTab=Ye=>{this.setState({tab:Ye.tabId})},this.panelManager=Ae,this.addActivationHandler(()=>this.onActivate())}getUrlState(){return{tab:this.state.tab}}updateFromUrl(Ae){Ae.tab&&typeof Ae.tab=="string"&&this.setState({tab:Ae.tab})}onActivate(){const Ae=this.panelManager.state.panel;return this.setupPanelSubscription(Ae),this.buildTabs(),this._subs.add(this.panelManager.subscribeToState((Ye,dt)=>{Ye.panel!==dt.panel&&(this.buildTabs(),this.setupPanelSubscription(Ye.panel))})),()=>{this.panelSubscription&&(this.panelSubscription.unsubscribe(),this.panelSubscription=void 0)}}setupPanelSubscription(Ae){this.panelSubscription&&(this._initialTabsBuilt=!1,this.panelSubscription.unsubscribe()),this.panelSubscription=Ae.subscribeToState(()=>{Ae.getPlugin()&&!this._initialTabsBuilt&&(this.buildTabs(),this._initialTabsBuilt=!0)})}buildTabs(){const Ye=this.panelManager.state.panel,dt=this.panelManager.queryRunner,bt=[];if(Ye){const Rt=Ye.getPlugin();if(!Rt)return;if(Rt.meta.skipDataQuery){this.setState({tabs:bt});return}else dt&&bt.push(new Qa(this.panelManager)),bt.push(new zr(this.panelManager)),(0,Ts.e)(Rt)&&bt.push(new Ft(this.panelManager))}this.setState({tabs:bt})}}jo.Component=Ao;function Ao({model:Se}){const{tab:Ae,tabs:Ye}=Se.useState(),dt=(0,He.of)(Ui);if(!Ye)return;const bt=Ye.find(Rt=>Rt.tabId===Ae);return m.createElement("div",{className:dt.dataPane},m.createElement(a.U,{hideBorder:!0,className:dt.tabsBar},Ye.map((Rt,kt)=>m.createElement(Rt.TabComponent,{key:`${Rt.getTabLabel()}-${kt}`,active:Rt.tabId===Ae,onChangeTab:()=>Se.onChangeTab(Rt)}))),m.createElement(Ge.E,{className:dt.scroll},m.createElement(ts.J,{className:dt.tabContent},m.createElement(la.mc,null,bt&&m.createElement(bt.Component,{model:bt})))))}function Ui(Se){return{dataPane:(0,ye.css)({display:"flex",flexDirection:"column",flexGrow:1,minHeight:0,height:"100%"}),tabContent:(0,ye.css)({padding:Se.spacing(2),border:`1px solid ${Se.colors.border.weak}`,borderLeft:"none",borderBottom:"none",borderTopRightRadius:Se.shape.radius.default,flexGrow:1}),tabsBar:(0,ye.css)({flexShrink:0,paddingLeft:Se.spacing(2)}),scroll:(0,ye.css)({background:Se.colors.background.primary})}}var Ro=e(34722);function Zo({model:Se}){const Ae=(0,fn.YQ)(Se),{optionsPane:Ye,vizManager:dt,dataPane:bt,optionsPaneSize:Rt}=Se.useState(),{controls:kt}=Ae.useState(),Jt=(0,He.of)(qo),[$t,an]=(0,m.useMemo)(()=>Rt>0?[{flexGrow:1-Rt},{minWidth:"unset",overflow:"hidden",flexGrow:Rt}]:[{flexGrow:1},{minWidth:"unset",flexGrow:0}],[Rt]);return m.createElement(m.Fragment,null,m.createElement(Vt,{dashboard:Ae}),m.createElement(Ro.O,{direction:"row",dragPosition:"end",initialSize:.75,primaryPaneStyles:$t,secondaryPaneStyles:an,onResizing:Se.onOptionsPaneResizing,onSizeChanged:Se.onOptionsPaneSizeChanged},m.createElement("div",{className:Jt.body},m.createElement("div",{className:Jt.canvasContent},kt&&m.createElement("div",{className:Jt.controls},kt.map(Ln=>m.createElement(Ln.Component,{key:Ln.state.key,model:Ln}))),m.createElement(Ro.O,{direction:"column",primaryPaneStyles:{minHeight:0,paddingBottom:bt?0:16},secondaryPaneStyles:{minHeight:0,overflow:"hidden"},dragPosition:"start"},m.createElement(dt.Component,{model:dt}),bt&&m.createElement(bt.Component,{model:bt})))),Ye&&m.createElement(Ye.Component,{model:Ye})))}function qo(Se){return{canvasContent:(0,ye.css)({label:"canvas-content",display:"flex",flexDirection:"column",flexBasis:"100%",flexGrow:1,minHeight:0,width:"100%"}),body:(0,ye.css)({label:"body",flexGrow:1,display:"flex",position:"relative",minHeight:0,gap:"8px"}),controls:(0,ye.css)({display:"flex",flexWrap:"wrap",alignItems:"center",gap:Se.spacing(1),padding:Se.spacing(2,0,2,2)})}}var el=e(67647),ur=e(14183),tl=e(17706),nl=e(22290),al=e(50632),ei=e(7600);const Wr=m.memo(({vizManager:Se,searchQuery:Ae,listMode:Ye})=>{const{panel:dt}=Se.state,{data:bt}=r.jh.getData(dt).useState(),{options:Rt,fieldConfig:kt}=dt.useState(),Jt=(0,m.useMemo)(()=>(0,al.I)(dt),[dt]),$t=(0,m.useMemo)(()=>{const ya=dt.getPlugin();if(ya)return(0,ei.Z4)({panel:dt,plugin:ya,eventBus:dt.getPanelContext().eventBus,instanceState:dt.getPanelContext().instanceState})},[dt,Rt,kt]),an=(0,m.useMemo)(()=>(0,nl.v)(kt,dt.getPlugin()?.fieldConfigRegistry,bt?.series??[],Ae,ya=>{dt.setState({fieldConfig:ya})}),[Ae,dt,kt]),Ln=Ae.length>0,ra=[];if(Ln)ra.push((0,ur.Po)([Jt,...$t??[]],an,Ae));else switch(Ye){case ur.gs.All:ra.push(Jt.render());for(const ya of $t??[])ra.push(ya.render());for(const ya of an)ra.push(ya.render());break;case ur.gs.Overrides:for(const ya of an)ra.push(ya.render());default:break}return ra});Wr.displayName="PanelOptions";var ti=e(78685),ao=e(94354),Po=e(32696),Co=e(56707),kr=e(86292);function Ni({vizManager:Se,data:Ae,onChange:Ye}){const{panel:dt}=Se.useState(),bt=(0,He.of)(hl),[Rt,kt]=(0,m.useState)(""),Jt=!1,$t=Jt?u.MM:u.wV,an=Jt?Po.__.Widgets:Po.__.Visualizations,Ln=(0,m.useMemo)(()=>new ca(dt),[dt]),[ra,ya]=(0,ti.A)($t,an),Hn=[{label:"Visualizations",value:Po.__.Visualizations},{label:"Suggestions",value:Po.__.Suggestions}],Da=ja=>{Se.changePluginType(ja.pluginId),Ye()};return m.createElement("div",{className:bt.wrapper},m.createElement(el.Z,{className:bt.filter,value:Rt,onChange:kt,autoFocus:!0,placeholder:"Search for..."}),m.createElement(M.D,{className:bt.customFieldMargin},m.createElement(ao.z,{options:Hn,value:ra,onChange:ya,fullWidth:!0})),m.createElement(Ge.E,{autoHeightMin:"100%"},ra===Po.__.Visualizations&&m.createElement(kr.G,{pluginId:dt.state.pluginId,searchQuery:Rt,onChange:Da}),ra===Po.__.Suggestions&&m.createElement(Co.a,{onChange:Da,searchQuery:Rt,panel:Ln,data:Ae})))}const hl=Se=>({wrapper:(0,ye.css)({display:"flex",flexDirection:"column",flexGrow:1,padding:Se.spacing(2,1),height:"100%",gap:Se.spacing(2),border:`1px solid ${Se.colors.border.weak}`,borderRight:"none",borderBottom:"none",borderTopLeftRadius:Se.shape.radius.default}),customFieldMargin:(0,ye.css)({marginBottom:Se.spacing(1)}),filter:(0,ye.css)({minHeight:Se.spacing(4)})});class mi extends r.Bs{constructor(Ae){super({searchQuery:"",listMode:ur.gs.All,...Ae}),this.onToggleVizPicker=()=>{this.setState({isVizPickerOpen:!this.state.isVizPickerOpen})},this.onSetSearchQuery=Ye=>{this.setState({searchQuery:Ye})},this.onSetListMode=Ye=>{this.setState({listMode:Ye})},this.onCollapsePane=()=>{r.jh.getAncestor(this,fi).toggleOptionsPane()}}}mi.Component=({model:Se})=>{const{isVizPickerOpen:Ae,searchQuery:Ye,listMode:dt}=Se.useState(),bt=r.jh.getAncestor(Se,fi),{optionsCollapsed:Rt,vizManager:kt}=bt.useState(),{pluginId:Jt}=kt.state.panel.useState(),$t=(0,He.of)(vl);return Rt?m.createElement("div",{className:$t.pane},m.createElement("div",{className:$t.top},m.createElement(J.I,{tooltip:"Open options pane",icon:"arrow-to-right",onClick:Se.onCollapsePane,variant:"canvas",className:$t.rotateIcon,"data-testid":R.Tp.components.PanelEditor.toggleVizOptions,"aria-label":"Open options pane"}))):m.createElement("div",{className:$t.pane},!Ae&&m.createElement(m.Fragment,null,m.createElement("div",{className:$t.top},m.createElement(El,{pluginId:Jt,onOpen:Se.onToggleVizPicker,isOpen:Ae,onTogglePane:Se.onCollapsePane}),m.createElement(el.Z,{className:$t.searchOptions,value:Ye,placeholder:"Search options",onChange:Se.onSetSearchQuery})),m.createElement("div",{className:$t.listOfOptions},m.createElement(Wr,{vizManager:kt,searchQuery:Ye,listMode:dt}))),Ae&&m.createElement(Ni,{vizManager:kt,onChange:Se.onToggleVizPicker}))};function vl(Se){return{pane:(0,ye.css)({display:"flex",flexDirection:"column",flexGrow:"1",borderLeft:`1px solid ${Se.colors.border.weak}`,background:Se.colors.background.primary}),top:(0,ye.css)({display:"flex",flexDirection:"column",padding:Se.spacing(2,1),gap:Se.spacing(2)}),listOfOptions:(0,ye.css)({display:"flex",flexDirection:"column",flexGrow:"1",overflow:"auto"}),searchOptions:(0,ye.css)({minHeight:Se.spacing(4)}),searchWrapper:(0,ye.css)({padding:Se.spacing(2,2,2,0)}),vizField:(0,ye.css)({marginBottom:Se.spacing(1)}),rotateIcon:(0,ye.css)({rotate:"180deg"})}}function El({pluginId:Se,onOpen:Ae,isOpen:Ye,onTogglePane:dt}){const bt=(0,He.of)(Lo),Rt=(0,m.useMemo)(()=>(0,tl.A4)().filter(kt=>kt.id===Se)[0],[Se]);return m.createElement(T.B,{gap:1},m.createElement(J.I,{className:bt.vizButton,tooltip:"Click to change visualization",imgSrc:Rt.info.logos.small,onClick:Ae,"data-testid":R.Tp.components.PanelEditor.toggleVizPicker,"aria-label":"Change Visualization",variant:"canvas",isOpen:!1,fullWidth:!0},Rt.name))}function Lo(Se){return{vizButton:(0,ye.css)({textAlign:"left"})}}var bo=e(581),Rr=e(19347),ni=e(84423),yl=e(47311),is=e(93117);class ai extends r.Bs{constructor(Ae){super({panel:Ae}),this._cachedPluginOptions={},this.addActivationHandler(()=>this._onActivate())}_onActivate(){this.loadDataSource()}async loadDataSource(){if(!this.state.panel.state.$data)return;let Ye=this.queryRunner.state.datasource;if(Ye)try{const dt=await(0,Rr.l)().get(Ye),bt=(0,Rr.l)().getInstanceSettings(Ye);dt&&bt&&(this.setState({datasource:dt,dsSettings:bt}),(0,yl.tw)({type:bt.type,uid:bt.uid}))}catch(dt){console.error(dt)}}changePluginType(Ae){const{options:Ye,fieldConfig:dt,pluginId:bt,...Rt}=r.Go.cloneSceneObjectState(this.state.panel.state);let kt={...dt};kt.defaults={...kt.defaults,custom:{}},kt.overrides=(0,bo.aW)(kt.overrides,bo.nx),this._cachedPluginOptions[bt]={options:Ye,fieldConfig:dt};const Jt=this._cachedPluginOptions[Ae]?.options,$t=this._cachedPluginOptions[Ae]?.fieldConfig;$t&&(kt=(0,bo.H9)(kt,$t));const an=new r.Eb({options:Jt??{},fieldConfig:kt,pluginId:Ae,...Rt});if(!Rt.$data&&!gt.$.panels[Ae].skipDataQuery){let Hn=(0,ae.CW)((0,fn.YQ)(this).state.uid)?.datasourceUid;Hn||(Hn=gt.$.defaultDatasource),an.setState({$data:new r.Es({$data:new r.dt({datasource:{uid:Hn},queries:[{refId:"A"}]}),transformations:[]})})}const Ln=an.getPlugin(),ra={title:an.state.title,options:an.state.options,fieldConfig:an.state.fieldConfig,id:1,type:Ae},ya=Ln?.onPanelTypeChanged?.(ra,bt,Ye,dt);ya&&an.onOptionsChange(ya,!0),Ln?.onPanelMigration&&an.setState({pluginVersion:(0,ni.Ar)(Ln)}),this.setState({panel:an}),this.loadDataSource()}async changePanelDataSource(Ae,Ye){const{dsSettings:dt}=this.state,bt=this.queryRunner,Rt=dt?await(0,Rr.l)().get({uid:dt.uid}):void 0,kt=await(0,Rr.l)().get({uid:Ae.uid}),Jt=bt.state.queries,$t=Ye||await(0,is.y)(kt,Ae.uid,Jt,Rt);bt.setState({datasource:{type:Ae.type,uid:Ae.uid},queries:$t}),Ye&&bt.runQueries(),this.loadDataSource()}changeQueryOptions(Ae){const Ye=this.state.panel,dt=this.queryRunner;let bt=r.jh.getTimeRange(Ye);const Rt={},kt={};Ae.maxDataPoints!==dt.state.maxDataPoints&&(Rt.maxDataPoints=Ae.maxDataPoints??void 0),Ae.minInterval!==dt.state.minInterval&&Ae.minInterval!==null&&(Rt.minInterval=Ae.minInterval),Ae.timeRange&&(kt.timeFrom=Ae.timeRange.from??void 0,kt.timeShift=Ae.timeRange.shift??void 0,kt.hideTimeOverride=Ae.timeRange.hide),bt instanceof xa.v?kt.timeFrom!==void 0||kt.timeShift!==void 0?bt.setState(kt):Ye.setState({$timeRange:void 0}):Ye.setState({$timeRange:new xa.v(kt)}),Ae.cacheTimeout!==dt?.state.cacheTimeout&&(Rt.cacheTimeout=Ae.cacheTimeout),Ae.queryCachingTTL!==dt?.state.queryCachingTTL&&(Rt.queryCachingTTL=Ae.queryCachingTTL),dt.setState(Rt),dt.runQueries()}changeQueries(Ae){this.queryRunner.setState({queries:Ae})}changeTransformations(Ae){const Ye=this.dataTransformer;Ye.setState({transformations:Ae}),Ye.reprocessTransformations()}inspectPanel(){const Ae=this.state.panel,Ye=(0,fn.Cs)(Ae);s.Ny.partial({inspect:Ye,inspectTab:"query"})}get queryRunner(){const Ae=(0,fn.un)(this.state.panel);if(!Ae)throw new Error("Query runner not found");return Ae}get dataTransformer(){const Ae=this.state.panel.state.$data;if(!Ae||!(Ae instanceof r.Es))throw new Error("Could not find SceneDataTransformer for panel");return Ae}get panelData(){return this.state.panel.state.$data}}ai.Component=({model:Se})=>{const{panel:Ae}=Se.useState(),Ye=(0,He.of)(go);return m.createElement("div",{className:Ye.wrapper},m.createElement(Ae.Component,{model:Ae}))};function go(Se){return{wrapper:(0,ye.css)({height:"100%",width:"100%",paddingLeft:Se.spacing(2)})}}class fi extends r.Bs{constructor(Ae){super(Ae),this._discardChanges=!1,this.onDiscard=()=>{this._discardChanges=!0,s.Ny.partial({editPanel:null})},this.onOptionsPaneResizing=(Ye,dt)=>{if(Ye<=0&&dt<=0)return;const bt=dt/Ye*(1-Ye);this.state.optionsCollapsed&&bt>wi&&this.setState({optionsCollapsed:!1}),!this.state.optionsCollapsed&&bt<wi&&this.setState({optionsCollapsed:!0})},this.onOptionsPaneSizeChanged=(Ye,dt)=>{if(Ye<=0&&dt<=0)return;const bt=1-Ye,Rt=this.state.optionsPaneSize===0,kt=dt/Ye,Jt=gi/kt;this.state.optionsCollapsed?Rt?this.setState({optionsPaneSize:Math.max(bt,Jt),optionsCollapsed:!1}):this.setState({optionsPaneSize:0}):Rt&&this.setState({optionsPaneSize:bt})},this.addActivationHandler(this._activationHandler.bind(this))}_activationHandler(){const Ae=this.state.vizManager,Ye=Ae.state.panel;return this._subs.add(Ae.subscribeToState((dt,bt)=>{dt.panel.state.pluginId!==bt.panel.state.pluginId&&this._initDataPane(dt.panel.state.pluginId)})),this._initDataPane(Ye.state.pluginId),()=>{this._discardChanges||this.commitChanges()}}_initDataPane(Ae){const Ye=gt.$.panels[Ae].skipDataQuery;Ye&&this.state.dataPane&&(s.Ny.partial({tab:null},!0),this.setState({dataPane:void 0})),!Ye&&!this.state.dataPane&&this.setState({dataPane:new jo(this.state.vizManager)})}getUrlKey(){return this.state.panelId.toString()}getPageNav(Ae,Ye){return{text:"Edit panel",parentItem:(0,fn.YQ)(this).getPageNav(Ae,Ye)}}commitChanges(){const Ae=(0,fn.YQ)(this),Ye=(0,fn.vL)(Ae.state.body,(0,fn.XA)(this.state.panelId));Ae.state.isEditing||Ae.onEnterEditMode(),Ye.parent instanceof r.M$&&Ye.parent.setState({body:this.state.vizManager.state.panel.clone()})}toggleOptionsPane(){this.setState({optionsCollapsed:!this.state.optionsCollapsed,optionsPaneSize:Fi})}}fi.Component=Zo;const wi=300,gi=400,Fi=.25;function sl(Se){const Ae=Se.clone(),Ye=new ai(Ae);return new fi({panelId:(0,fn.Cs)(Se),optionsPane:new mi({}),vizManager:Ye,optionsPaneSize:Fi})}var co=e(22391),Wi=e(38477);class Ki{constructor(Ae){this._scene=Ae}getKeys(){return["editIndex"]}getUrlState(){const Ae=this._scene.state;return{editIndex:Ae.editIndex!==void 0?String(Ae.editIndex):void 0}}updateFromUrl(Ae){let Ye={};typeof Ae.editIndex=="string"?Ye={editIndex:Number(Ae.editIndex)}:Ye={editIndex:void 0},Object.keys(Ye).length>0&&this._scene.setState(Ye)}}var so=e(84167),$i=e(77268),Lr=e(82241),Bo=e(51612),Pr=e(46502);const Uo="New annotation",Hr=({annotation:Se,editIndex:Ae,panels:Ye,onUpdate:dt,onBackToList:bt,onDelete:Rt})=>{const kt=(0,He.of)(Vi),Jt=(0,m.useMemo)(()=>Se.filter?Se.filter.exclude?2:1:0,[Se.filter]),{value:$t}=(0,Ar.A)(()=>(0,Rr.l)().get(Se.datasource),[Se.datasource]),an=(0,Rr.l)().getInstanceSettings(Se.datasource),Ln=Na=>{dt({...Se,name:Na.currentTarget.value},Ae)},ra=Na=>{const Ns=(0,co.p$)(Na);Se.datasource?.type!==Ns.type?dt({datasource:Ns,builtIn:Se.builtIn,enable:Se.enable,iconColor:Se.iconColor,name:Se.name,hide:Se.hide,filter:Se.filter,mappings:Se.mappings,type:Se.type},Ae):dt({...Se,datasource:Ns},Ae)},ya=Na=>{const Ns=Na.currentTarget;dt({...Se,[Ns.name]:Ns.type==="checkbox"?Ns.checked:Ns.value},Ae)},Hn=Na=>{dt({...Se,iconColor:Na},Ae)},Da=Na=>{let Ns=Na.value===0?void 0:{exclude:Na.value===2,ids:Se.filter?.ids??[]};dt({...Se,filter:Ns},Ae)},ja=Na=>{if(!Array.isArray(Na))return;const Ns={exclude:Jt===2,ids:[]};Na.forEach(Gs=>Gs.value&&Ns.ids.push(Gs.value)),dt({...Se,filter:Ns},Ae)},Ls=()=>{Rt(Ae),bt()},jr=Se.name===Uo,qs=(Na,Ns)=>Na.label&&Ns.label?Na.label.toLowerCase().localeCompare(Ns.label.toLowerCase()):-1,So=(0,m.useMemo)(()=>Ye.filter(Na=>gt.$.panels[Na.state.pluginId]).map(Na=>({value:(0,fn.Cs)(Na),label:Na.state.title??`Panel ${(0,fn.Cs)(Na)}`,description:Na.state.description,imgUrl:gt.$.panels[Na.state.pluginId].info.logos.small})).sort(qs)??[],[Ye]);return m.createElement("div",null,m.createElement(so.n,{className:kt.settingsForm},m.createElement(M.D,{label:"Name"},m.createElement(I.p,{"data-testid":R.Tp.pages.Dashboard.Settings.Annotations.Settings.name,name:"name",id:"name",autoFocus:jr,value:Se.name,onChange:Ln})),m.createElement(M.D,{label:"Data source",htmlFor:"data-source-picker"},m.createElement(Bo.s,{annotations:!0,variables:!0,current:Se.datasource,onChange:ra})),m.createElement(M.D,{label:"Enabled",description:"When enabled the annotation query is issued every dashboard refresh"},m.createElement(ie.S,{name:"enable",id:"enable",value:Se.enable,onChange:ya,"data-testid":R.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.enable})),m.createElement(M.D,{label:"Hidden",description:"Annotation queries can be toggled on or off at the top of the dashboard. With this option checked this toggle will be hidden."},m.createElement(ie.S,{name:"hide",id:"hide",value:Se.hide,onChange:ya,"data-testid":R.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.hide})),m.createElement(M.D,{label:"Color",description:"Color to use for the annotation event markers"},m.createElement(la.Gy,null,m.createElement($i.a,{value:Se?.iconColor,onChange:Hn}))),m.createElement(M.D,{label:"Show in","data-testid":R.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.showInLabel},m.createElement(m.Fragment,null,m.createElement(fa.l6,{options:Pl,value:Jt,onChange:Da,"data-testid":R.Tp.components.Annotations.annotationsTypeInput}),Jt!==0&&m.createElement(fa.KF,{options:So,value:So.filter(Na=>Se.filter?.ids.includes(Na.value)),onChange:ja,isClearable:!0,placeholder:"Choose panels",width:100,closeMenuOnSelect:!1,className:kt.select,"data-testid":R.Tp.components.Annotations.annotationsChoosePanelInput})))),m.createElement(so.n,null,m.createElement("h3",{className:"page-heading"},"Query"),$t?.annotations&&an&&m.createElement(Lr.A,{datasource:$t,datasourceInstanceSettings:an,annotation:Se,onChange:Na=>dt(Na,Ae)}),$t&&!$t.annotations&&m.createElement(Pr.F,{datasource:$t,annotation:Se,onChange:Na=>dt(Na,Ae)})),m.createElement(T.B,null,!Se.builtIn&&m.createElement(P.$n,{variant:"destructive",onClick:Ls,"data-testid":R.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.delete},"Delete"),m.createElement(P.$n,{variant:"secondary",onClick:bt,"data-testid":R.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.apply},"Back to list")))},Vi=Se=>({settingsForm:(0,ye.css)({maxWidth:Se.spacing(60),marginBottom:Se.spacing(2)}),select:(0,ye.css)({marginTop:"8px"})});var Dl=(Se=>(Se[Se.AllPanels=0]="AllPanels",Se[Se.IncludePanels=1]="IncludePanels",Se[Se.ExcludePanels=2]="ExcludePanels",Se))(Dl||{});const Pl=[{label:"All panels",value:0,description:"Send the annotation data to all panels that support annotations"},{label:"Selected panels",value:1,description:"Send the annotations to the explicitly listed panels"},{label:"All panels except",value:2,description:"Do not send annotation data to the following panels"}];var pi=e(91605),po=e(7521),Cl=e(46991);const _i="Add annotation query",hi=({annotations:Se,onNew:Ae,onEdit:Ye,onMove:dt,onDelete:bt})=>{const Rt=(0,He.of)(si),kt=Se.length===0||Se.length===1&&Se[0].builtIn,Jt=an=>an.enable===!1?m.createElement("em",{className:"muted"},"(Disabled) \xA0 ",an.name):an.builtIn?m.createElement("em",{className:"muted"},an.name," \xA0 (Built-in)"):m.createElement(m.Fragment,null,an.name),$t=(0,Rr.l)();return m.createElement(la.gW,null,Se.length>0&&m.createElement("div",{className:Rt.table},m.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},m.createElement("thead",null,m.createElement("tr",null,m.createElement("th",null,"Query name"),m.createElement("th",null,"Data source"),m.createElement("th",{colSpan:3}))),m.createElement("tbody",{"data-testid":R.Tp.pages.Dashboard.Settings.Annotations.List.annotations},Se.map((an,Ln)=>m.createElement("tr",{key:`${an.name}-${Ln}`},an.builtIn?m.createElement("td",{role:"gridcell",style:{width:"90%"},className:"pointer",onClick:()=>Ye(Ln)},m.createElement(P.$n,{size:"sm",fill:"text",variant:"secondary"},Jt(an))):m.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>Ye(Ln)},m.createElement(P.$n,{size:"sm",fill:"text",variant:"secondary"},Jt(an))),m.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>Ye(Ln)},$t.getInstanceSettings(an.datasource)?.name||an.datasource?.uid),m.createElement("td",{role:"gridcell",style:{width:"1%"}},Ln!==0&&m.createElement(lr.K,{name:"arrow-up",onClick:()=>dt(Ln,vi.UP),tooltip:"Move up"})),m.createElement("td",{role:"gridcell",style:{width:"1%"}},Se.length>1&&Ln!==Se.length-1?m.createElement(lr.K,{name:"arrow-down",onClick:()=>dt(Ln,vi.DOWN),tooltip:"Move down"}):null),m.createElement("td",{role:"gridcell",style:{width:"1%"}},!an.builtIn&&m.createElement(pi.e,{size:"sm",onConfirm:()=>bt(Ln),"aria-label":`Delete query with title "${an.name}"`}))))))),kt&&m.createElement(po.A,{onClick:Ae,title:"There are no custom annotation queries added yet",buttonIcon:"comment-alt",buttonTitle:_i,infoBoxTitle:"What are annotation queries?",infoBox:{__html:`<p>Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines
          and icons on all graph panels. When you hover over an annotation icon you can get event text &amp; tags for
          the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or
          drag region). These will be stored in Grafana's annotation database.
        </p>
        Checkout the
        <a class='external-link' target='_blank' href='http://docs.grafana.org/reference/annotations/'
          >Annotations documentation</a
        >
        for more information.`}}),!kt&&m.createElement(Cl.d,{onClick:Ae},"New query"))},si=()=>({table:(0,ye.css)({width:"100%",overflowX:"scroll"})});var vi=(Se=>(Se[Se.UP=-1]="UP",Se[Se.DOWN=1]="DOWN",Se))(vi||{});class No extends r.Bs{constructor(){super(...arguments),this._urlSync=new Ki(this),this.onNew=()=>{const Ae={name:Uo,enable:!0,datasource:(0,co.p$)((0,Rr.l)().getInstanceSettings(null)),iconColor:"red"},Ye=new Wi.g({key:`annotations-${Ae.name}`,query:Ae,name:Ae.name,isEnabled:!!Ae.enable,isHidden:!!Ae.hide}),dt=Lt.b.getDataLayers(this._dashboard),bt=[...dt.state.layers];bt.splice(this.getAnnotationsLength(),0,Ye),dt.setState({layers:bt}),Ye.activate(),this.setState({editIndex:this.getAnnotationsLength()-1})},this.onEdit=Ae=>{this.setState({editIndex:Ae})},this.onBackToList=()=>{this.setState({editIndex:void 0})},this.onMove=(Ae,Ye)=>{const dt=Lt.b.getDataLayers(this._dashboard),bt=[...dt.state.layers],[Rt]=bt.splice(Ae,1);bt.splice(Ae+Ye,0,Rt),dt.setState({layers:bt})},this.onDelete=Ae=>{const Ye=Lt.b.getDataLayers(this._dashboard),dt=[...Ye.state.layers];dt.splice(Ae,1),Ye.setState({layers:dt})},this.onUpdate=(Ae,Ye)=>{const dt=this.getDataLayer(Ye);dt.setState({key:`annotations-${Ae.name}`,name:Ae.name,isEnabled:!!Ae.enable,isHidden:!!Ae.hide,query:Ae}),dt.runLayer()}}getUrlKey(){return"annotations"}get _dashboard(){return(0,fn.YQ)(this)}getDataLayer(Ae){const dt=Lt.b.getDataLayers(this._dashboard).state.layers[Ae];if(!(dt instanceof r.tV.g))throw new Error("AnnotationsDataLayer not found at index "+Ae);return dt}getAnnotationsLength(){return Lt.b.getDataLayers(this._dashboard).state.layers.filter(Ae=>Ae.topic===aa.QR.Annotations).length}getDashboard(){return this._dashboard}}No.Component=qe;function qe({model:Se}){const Ae=Se.getDashboard(),{layers:Ye}=Lt.b.getDataLayers(Ae).useState(),{navModel:dt,pageNav:bt}=Ka(Ae,Se.getUrlKey()),{editIndex:Rt}=Se.useState(),kt=Lt.b.getVizPanels(Ae),Jt=(0,mn.O)(Ye);return Rt!=null&&Rt<Se.getAnnotationsLength()?m.createElement(tt,{annotationLayer:Se.getDataLayer(Rt),pageNav:bt,panels:kt,editIndex:Rt,navModel:dt,dashboard:Ae,onUpdate:Se.onUpdate,onBackToList:Se.onBackToList,onDelete:Se.onDelete}):m.createElement(Oe.Y,{navModel:dt,pageNav:bt,layout:je.k.Standard},m.createElement(Vt,{dashboard:Ae}),m.createElement(hi,{annotations:Jt,onNew:Se.onNew,onEdit:Se.onEdit,onDelete:Se.onDelete,onMove:Se.onMove}))}function tt({annotationLayer:Se,pageNav:Ae,navModel:Ye,panels:dt,editIndex:bt,dashboard:Rt,onUpdate:kt,onBackToList:Jt,onDelete:$t}){const an=Ae.children.find(Hn=>Hn.active);an.parentItem=Ae;const{name:Ln,query:ra}=Se.useState(),ya={text:Ln,parentItem:an};return m.createElement(Oe.Y,{navModel:Ye,pageNav:ya,layout:je.k.Standard},m.createElement(Vt,{dashboard:Rt}),m.createElement(Hr,{annotation:ra,editIndex:bt,panels:dt,onUpdate:kt,onBackToList:Jt,onDelete:$t}))}var nt=e(14588),ut=e(65857),Ot=e(6199),Wt=e(4588);class Kt extends r.Bs{constructor(){super(...arguments),this._urlSync=new Ki(this),this.onNewLink=()=>{this.links=[...this.links,Wt.q],this.setState({editIndex:this.links.length-1})},this.onDelete=Ae=>{this.links=[...this.links.slice(0,Ae),...this.links.slice(Ae+1)],this.setState({editIndex:void 0})},this.onDuplicate=Ae=>{this.links=[...this.links,{...Ae}]},this.onOrderChange=(Ae,Ye)=>{this.links=nt.moveItemImmutably(this.links,Ae,Ae+Ye)},this.onEdit=Ae=>{this.setState({editIndex:Ae})},this.onUpdateLink=Ae=>{const Ye=this.state.editIndex;Ye!==void 0&&(this.links=[...this.links.slice(0,Ye),Ae,...this.links.slice(Ye+1)])},this.onGoBack=()=>{this.setState({editIndex:void 0})}}getUrlKey(){return"links"}get dashboard(){return(0,fn.YQ)(this)}get links(){return this.dashboard.state.links}set links(Ae){this.dashboard.setState({links:Ae})}}Kt.Component=tn;function tn({model:Se}){const{editIndex:Ae}=Se.useState(),Ye=(0,fn.YQ)(Se),{links:dt,overlay:bt}=Ye.useState(),{navModel:Rt,pageNav:kt}=Ka(Ye,Se.getUrlKey()),Jt=Ae!==void 0?dt[Ae]:void 0;return Jt?m.createElement(un,{pageNav:kt,navModel:Rt,link:Jt,dashboard:Ye,onChange:Se.onUpdateLink,onGoBack:Se.onGoBack}):m.createElement(Oe.Y,{navModel:Rt,pageNav:kt,layout:je.k.Standard},m.createElement(Vt,{dashboard:Ye}),m.createElement(Ot.X,{links:dt,onNew:Se.onNewLink,onEdit:Se.onEdit,onDelete:Se.onDelete,onDuplicate:Se.onDuplicate,onOrderChange:Se.onOrderChange}),bt&&m.createElement(bt.Component,{model:bt}))}function un({pageNav:Se,link:Ae,navModel:Ye,dashboard:dt,onChange:bt,onGoBack:Rt}){const kt=Se.children.find($t=>$t.active);kt.parentItem=Se;const Jt={text:"Edit link",parentItem:kt};return m.createElement(Oe.Y,{navModel:Ye,pageNav:Jt,layout:je.k.Standard},m.createElement(Vt,{dashboard:dt}),m.createElement(ut.d,{link:Ae,onUpdate:bt,onGoBack:Rt}))}var yn=e(79924),$n=e(57418),na=e(75590),Qn=e(39712);const Jn=[{label:"Editable",value:!0},{label:"Read-only",value:!1}],ba=[{value:0,label:"Default"},{value:1,label:"Shared crosshair"},{value:2,label:"Shared Tooltip"}];class ha extends r.Bs{constructor(){super(...arguments),this.onTitleChange=Ae=>{this._dashboard.setState({title:Ae})},this.onDescriptionChange=Ae=>{this._dashboard.setState({description:Ae})},this.onTagsChange=Ae=>{this._dashboard.setState({tags:Ae})},this.onFolderChange=(Ae,Ye)=>{const dt={...this._dashboard.state.meta,folderUid:Ae||this._dashboard.state.meta.folderUid,folderTitle:Ye||this._dashboard.state.meta.folderTitle,hasUnsavedFolderChange:!0};this._dashboard.setState({meta:dt})},this.onEditableChange=Ae=>{this._dashboard.setState({editable:Ae})},this.onTimeZoneChange=Ae=>{this.getTimeRange().setState({timeZone:Ae})},this.onWeekStartChange=Ae=>{this.getTimeRange().setState({weekStart:Ae})},this.onRefreshIntervalChange=Ae=>{this.getRefreshPicker()?.setState({intervals:Ae})},this.onNowDelayChange=Ae=>{this.getTimeRange()?.setState({UNSAFE_nowDelay:Ae})},this.onHideTimePickerChange=Ae=>{this.getDashboardControls()?.setState({hideTimeControls:Ae})},this.onLiveNowChange=Ae=>{},this.onTooltipChange=Ae=>{this.getCursorSync()?.setState({sync:Ae})}}get _dashboard(){return(0,fn.YQ)(this)}getUrlKey(){return"settings"}getDashboard(){return this._dashboard}getTimeRange(){return r.jh.getTimeRange(this._dashboard)}getRefreshPicker(){return Lt.b.getRefreshPicker(this._dashboard)}getCursorSync(){const Ae=this._dashboard.state.$behaviors?.find(Ye=>Ye instanceof r.Gg.K2);if(Ae instanceof r.Gg.K2)return Ae}getDashboardControls(){return Lt.b.getDashboardControls(this._dashboard)}}ha.Component=({model:Se})=>{const{navModel:Ae,pageNav:Ye}=Ka(Se.getDashboard(),Se.getUrlKey()),{title:dt,description:bt,tags:Rt,meta:kt,editable:Jt}=Se.getDashboard().useState(),{sync:$t}=Se.getCursorSync()?.useState()||{},{timeZone:an,weekStart:Ln,UNSAFE_nowDelay:ra}=Se.getTimeRange().useState(),{intervals:ya}=Se.getRefreshPicker()?.useState()||{},{hideTimeControls:Hn}=Se.getDashboardControls()?.useState()||{};return m.createElement(Oe.Y,{navModel:Ae,pageNav:Ye,layout:je.k.Standard},m.createElement(Vt,{dashboard:Se.getDashboard()}),m.createElement("div",{style:{maxWidth:"600px"}},m.createElement(O.a,{marginBottom:5},m.createElement(M.D,{label:m.createElement(la.Gy,{justify:"space-between"},m.createElement(C.J,{htmlFor:"title-input"},m.createElement($e.x6,{i18nKey:"dashboard-settings.general.title-label"},"Title")))},m.createElement(I.p,{id:"title-input",name:"title",defaultValue:dt,onBlur:Da=>Se.onTitleChange(Da.target.value)})),m.createElement(M.D,{label:m.createElement(la.Gy,{justify:"space-between"},m.createElement(C.J,{htmlFor:"description-input"},(0,$e.t)("dashboard-settings.general.description-label","Description")))},m.createElement(x.f,{id:"description-input",name:"description",defaultValue:bt,onBlur:Da=>Se.onDescriptionChange(Da.target.value)})),m.createElement(M.D,{label:(0,$e.t)("dashboard-settings.general.tags-label","Tags")},m.createElement(yn.u,{id:"tags-input",tags:Rt,onChange:Se.onTagsChange,width:40})),m.createElement(M.D,{label:(0,$e.t)("dashboard-settings.general.folder-label","Folder")},m.createElement(L.d,{value:kt.folderUid,onChange:Se.onFolderChange,initialTitle:kt.folderTitle,inputId:"dashboard-folder-input",enableCreateNew:!0,skipInitialLoad:!0})),m.createElement(M.D,{label:(0,$e.t)("dashboard-settings.general.editable-label","Editable"),description:(0,$e.t)("dashboard-settings.general.editable-description","Set to read-only to disable all editing. Reload the dashboard for changes to take effect")},m.createElement(ao.z,{value:Jt,options:Jn,onChange:Se.onEditableChange}))),m.createElement(na.p,{onTimeZoneChange:Se.onTimeZoneChange,onWeekStartChange:Se.onWeekStartChange,onRefreshIntervalChange:Se.onRefreshIntervalChange,onNowDelayChange:Se.onNowDelayChange,onHideTimePickerChange:Se.onHideTimePickerChange,onLiveNowChange:Se.onLiveNowChange,refreshIntervals:ya,timePickerHidden:Hn,nowDelay:ra||"",liveNow:!1,timezone:an||"",weekStart:Ln||""}),m.createElement($n.M,{label:(0,$e.t)("dashboard-settings.general.panel-options-label","Panel options"),isOpen:!0},m.createElement(M.D,{label:(0,$e.t)("dashboard-settings.general.panel-options-graph-tooltip-label","Graph tooltip"),description:(0,$e.t)("dashboard-settings.general.panel-options-graph-tooltip-description","Controls tooltip and hover highlight behavior across different panels. Reload the dashboard for changes to take effect")},m.createElement(ao.z,{onChange:Se.onTooltipChange,options:ba,value:$t}))),m.createElement(O.a,{marginTop:3},kt.canDelete&&m.createElement(Qn.c,null))))};var Aa=e(81156);class ma extends r.Bs{constructor(Ae){super({...Ae,jsonText:""}),this.onCodeEditorBlur=Ye=>{this.setState({jsonText:Ye})},this.onApplyChange=()=>{const Ye=JSON.parse(this.state.jsonText),dt=this.getDashboard(),bt={dashboard:Ye,meta:dt.state.meta},Rt=(0,ct.wM)(bt),kt=r.Go.cloneSceneObjectState(Rt.state);dt.setState(kt)},this.addActivationHandler(()=>this.setState({jsonText:this.getJsonText()}))}getUrlKey(){return"json-model"}getDashboard(){return(0,fn.YQ)(this)}getSaveModel(){const Ae=this.getDashboard();return(0,Be.Uy)(Ae)}getJsonText(){const Ae=this.getSaveModel();return(0,Js.p)(Ae)}}ma.Component=({model:Se})=>{const Ae=Se.getDashboard(),{navModel:Ye,pageNav:dt}=Ka(Ae,Se.getUrlKey()),bt=Ae.useState().meta.canSave,{jsonText:Rt}=Se.useState(),kt=(0,He.of)(Ua),Jt=Se.getSaveModel();return m.createElement(Oe.Y,{navModel:Ye,pageNav:dt,layout:je.k.Standard},m.createElement(Vt,{dashboard:Ae}),m.createElement("div",{className:kt.wrapper},m.createElement($e.x6,{i18nKey:"dashboard-settings.json-editor.subtitle"},"The JSON model below is the data structure that defines the dashboard. This includes dashboard settings, panel settings, layout, queries, and so on."),m.createElement(Aa.A,{dashboard:Jt}),m.createElement(De.B,{width:"100%",value:Rt,language:"json",showLineNumbers:!0,showMiniMap:!0,containerStyles:kt.codeEditor,onBlur:Se.onCodeEditorBlur}),bt&&m.createElement("div",null,m.createElement(P.$n,{type:"submit",onClick:Se.onApplyChange},m.createElement($e.x6,{i18nKey:"dashboard-settings.json-editor.apply-button"},"Apply changes")))))};const Ua=Se=>({wrapper:(0,ye.css)({display:"flex",height:"100%",flexDirection:"column",gap:Se.spacing(2)}),codeEditor:(0,ye.css)({flexGrow:1})});var Ja=e(5108);class da extends r.Bs{get _dashboard(){return(0,fn.YQ)(this)}getUrlKey(){return"permissions"}getDashboard(){return this._dashboard}}da.Component=Za;function Za({model:Se}){const Ae=Se.getDashboard(),{uid:Ye}=Ae.useState(),{navModel:dt,pageNav:bt}=Ka(Ae,Se.getUrlKey()),Rt=We.TP.hasPermission(ee.AccessControlAction.DashboardsPermissionsWrite);return m.createElement(Oe.Y,{navModel:dt,pageNav:bt,layout:je.k.Standard},m.createElement(Vt,{dashboard:Ae}),m.createElement(Ja.x,{resource:"dashboards",resourceId:Ye??"",canSetPermissions:Rt}))}var es=e(75505),Os=e(79422),Rs=e(71678),Xs=e(8964),Ds=e(58975),Br=e(85140),mr=e(14329),Zs=e(41820),sr=e(85830),Ur=e(89458),Cr=e(27803);function Gr(Se){const{variable:Ae}=Se,Ye=Ae.useState().datasource??void 0,{value:dt}=(0,Ar.A)(async()=>await(0,Rr.l)().get(Ye),[Ye]),bt=dt?.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters yet.",Rt=kt=>{const Jt={uid:kt.uid,type:kt.type};Ae.setState({datasource:Jt})};return m.createElement(Cr.Q,{datasource:Ye,infoText:bt,onDataSourceChange:Rt})}var as=e(95802);function qn({variable:Se}){const{value:Ae}=Se.useState(),Ye=dt=>{Se.setState({value:dt.currentTarget.value})};return m.createElement(as.d,{constantValue:String(Ae),onChange:Ye})}var pa=e(58711);function Wa({variable:Se,onRunQuery:Ae}){const{query:Ye,isMulti:dt,allValue:bt,includeAll:Rt}=Se.useState(),kt=Ln=>{Se.setState({isMulti:Ln.currentTarget.checked})},Jt=Ln=>{Se.setState({includeAll:Ln.currentTarget.checked})},$t=Ln=>{Se.setState({query:Ln.currentTarget.value}),Ae()},an=Ln=>{Se.setState({allValue:Ln.currentTarget.value})};return m.createElement(pa.w,{query:Ye??"",multi:!!dt,allValue:bt??"",includeAll:!!Rt,onMultiChange:kt,onIncludeAllChange:Jt,onQueryChange:$t,onAllValueChange:an})}var os=e(98917);function Nr({variable:Se,onRunQuery:Ae}){const{pluginId:Ye,regex:dt,isMulti:bt,allValue:Rt,includeAll:kt}=Se.useState(),Jt=yc(),$t=Hn=>{Se.setState({pluginId:Hn.value}),Ae()},an=Hn=>{Se.setState({regex:Hn.currentTarget.value}),Ae()},Ln=Hn=>{Se.setState({isMulti:Hn.currentTarget.checked})},ra=Hn=>{Se.setState({includeAll:Hn.currentTarget.checked})},ya=Hn=>{Se.setState({allValue:Hn.currentTarget.value})};return m.createElement(os.y,{query:Ye,regex:dt,multi:bt||!1,allValue:Rt,includeAll:kt||!1,optionTypes:Jt,onChange:$t,onRegExBlur:an,onMultiChange:Ln,onIncludeAllChange:ra,onAllValueChange:ya})}var js=e(72436);function vr({datasource:Se,defaultOptions:Ae,infoText:Ye,onDataSourceChange:dt,onDefaultOptionsChange:bt}){const Rt=(0,m.useCallback)(kt=>{const Jt=(0,js.Jh)(`key,value
`+kt)[0],$t=[];for(let an=0;an<Jt.length;an++)$t.push({text:Jt.fields[0].values[an],value:Jt.fields[1].values[an]});bt($t)},[bt]);return m.createElement(m.Fragment,null,m.createElement(Ds.Y,null,"Group by options"),m.createElement(M.D,{label:"Data source",htmlFor:"data-source-picker"},m.createElement(Bo.s,{current:Se,onChange:dt,width:30,variables:!0,noDefault:!0})),Ye?m.createElement(y.F,{title:Ye,severity:"info","data-testid":R.Tp.pages.Dashboard.Settings.Variables.Edit.GroupByVariable.infoText}):null,m.createElement(M.D,{label:"Use static Group By dimensions",description:"Provide dimensions as CSV: dimensionId, dimensionName "},m.createElement(S.d,{"data-testid":R.Tp.pages.Dashboard.Settings.Variables.Edit.GroupByVariable.modeToggle,value:Ae!==void 0,onChange:kt=>{bt(Ae===void 0?[]:void 0)}})),Ae!==void 0&&m.createElement(De.B,{height:300,language:"csv",value:Ae.map(kt=>`${kt.text},${kt.value}`).join(`
`),onBlur:Rt,onSave:Rt,showMiniMap:!1,showLineNumbers:!0}))}function ls(Se){const{variable:Ae,onRunQuery:Ye}=Se,{datasource:dt,defaultOptions:bt}=Ae.useState(),{value:Rt}=(0,Ar.A)(async()=>await(0,Rr.l)().get(dt),[Ae.state]),kt=Rt?.getTagKeys?"Group by dimensions are applied automatically to all queries that target this data source":"This data source does not support group by variable yet.",Jt=async an=>{const Ln={uid:an.uid,type:an.type};Ae.setState({datasource:Ln}),Ye()},$t=async an=>{Ae.setState({defaultOptions:an}),Ye()};return m.createElement(vr,{defaultOptions:bt,datasource:dt??void 0,infoText:dt?kt:void 0,onDataSourceChange:Jt,onDefaultOptionsChange:$t})}var ho=e(49317);function $s({variable:Se,onRunQuery:Ae}){const{intervals:Ye,autoStepCount:dt,autoEnabled:bt,autoMinInterval:Rt}=Se.useState(),kt=(0,fn.bx)(Ye),Jt=ra=>{const ya=(0,fn.Sm)(ra.currentTarget.value);Se.setState({intervals:ya}),Ae()},$t=ra=>{Se.setState({autoStepCount:ra.value})},an=ra=>{Se.setState({autoEnabled:ra.target.checked})},Ln=ra=>{Se.setState({autoMinInterval:ra.currentTarget.value})};return m.createElement(ho.s,{intervals:kt,autoStepCount:dt,autoEnabled:bt,onAutoCountChanged:$t,onIntervalsChange:Jt,onAutoEnabledChange:an,onAutoMinIntervalChanged:Ln,autoMinInterval:Rt})}var zi=e(70766),wo=e(44890);function gs({variable:Se,onRunQuery:Ae}){const{datasource:Ye,regex:dt,sort:bt,refresh:Rt,isMulti:kt,includeAll:Jt,allValue:$t,query:an}=Se.useState(),{value:Ln}=r.jh.getTimeRange(Se).useState(),{value:ra}=(0,Ar.A)(async()=>{const Gs=await(0,Rr.l)().get(Ye??""),ol=await(0,zi.y)(Gs);return{datasource:Gs,VariableQueryEditor:ol}},[Ye]),{datasource:ya,VariableQueryEditor:Hn}=ra??{},Da=Gs=>{Se.setState({regex:Gs.currentTarget.value})},ja=Gs=>{Se.setState({sort:Gs.value})},Ls=Gs=>{Se.setState({refresh:Gs})},jr=Gs=>{Se.setState({isMulti:Gs.currentTarget.checked})},qs=Gs=>{Se.setState({includeAll:Gs.currentTarget.checked})},So=Gs=>{Se.setState({allValue:Gs.currentTarget.value})},Na=Gs=>{const ol={uid:Gs.uid,type:Gs.type};Se.setState({datasource:ol})},Ns=Gs=>{Se.setState({query:Gs}),Ae()};return m.createElement(wo.u,{datasource:ya,onDataSourceChange:Na,query:an,onQueryChange:Ns,onLegacyQueryChange:Ns,VariableQueryEditor:Hn,timeRange:Ln,regex:dt,onRegExChange:Da,sort:bt,onSortChange:ja,refresh:Rt,onRefreshChange:Ls,isMulti:!!kt,onMultiChange:jr,includeAll:!!Jt,onIncludeAllChange:qs,allValue:$t??"",onAllValueChange:So})}function br({defaultValue:Se,value:Ae,onChange:Ye,onBlur:dt}){return m.createElement(m.Fragment,null,m.createElement(Ds.Y,null,"Text options"),m.createElement(mr._,{value:Ae,defaultValue:Se,name:"Default value",placeholder:"default value, if any",onChange:Ye,onBlur:dt,width:30,testId:R.Tp.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInputV2}))}function To({variable:Se}){const{value:Ae}=Se.useState(),Ye=dt=>{Se.setState({value:dt.currentTarget.value})};return m.createElement(br,{defaultValue:Ae,onBlur:Ye})}function Mo(Se){return Se!=="system"}const ri={custom:{name:"Custom",description:"Define variable values manually",editor:Wa},query:{name:"Query",description:"Variable values are fetched from a datasource query",editor:gs},constant:{name:"Constant",description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share",editor:qn},interval:{name:"Interval",description:"Define a timespan interval (ex 1m, 1h, 1d)",editor:$s},datasource:{name:"Data source",description:"Enables you to dynamically switch the data source for multiple panels",editor:Nr},adhoc:{name:"Ad hoc filters",description:"Add key/value filters on the fly",editor:Gr},groupby:{name:"Group by",description:"Add keys to group by on the fly",editor:ls},textbox:{name:"Textbox",description:"Define a textbox variable, where users can enter any arbitrary string",editor:To}},vc=["query","custom","textbox","constant","datasource","interval","adhoc","groupby"];function Ec(){const Se=vc.map(Ae=>({label:ri[Ae].name,value:Ae,description:ri[Ae].description}));return gt.$.featureToggles.groupByVariable?Se:Se.filter(Ae=>Ae.value!=="groupby")}function $l(Se){return ri[Se].editor}function Ei(Se,Ae){switch(Se){case"custom":return new r.yP(Ae);case"query":return new r.fS(Ae);case"constant":return new r.x0(Ae);case"interval":return new r.Yj(Ae);case"datasource":return new r.mI(Ae);case"adhoc":return new r.H9(Ae);case"groupby":return new r.ZG(Ae);case"textbox":return new r.TS(Ae)}}function yi(Se){const Ye=Vl("query",Se);return new r.fS({name:Ye})}function Vl(Se,Ae){let Ye=0,dt=`${Se}${Ye}`;for(;Ae.find(bt=>bt.state.name===dt);)dt=`${Se}${++Ye}`;return dt}function _l(Se){return"options"in Se.state||"intervals"in Se.state}function zl(Se){let Ae="";return Se instanceof r.fS?Ae=Se.state.definition||(typeof Se.state.query=="string"?Se.state.query:""):Se instanceof r.mI?Ae=String(Se.state.pluginId):Se instanceof r.yP?Ae=Se.state.query:Se instanceof r.Yj?Ae=(0,fn.bx)(Se.state.intervals):(Se instanceof r.TS||Se instanceof r.x0)&&(Ae=String(Se.state.value)),Ae}function yc(){const Se=(0,Rr.l)().getList({metrics:!0,variables:!0}),Ae=(0,Te.chain)(Se).uniqBy("meta.id").map(Ye=>({label:Ye.meta.name,value:Ye.meta.id})).value();return Ae.unshift({label:"",value:""}),Ae}function bl({onChange:Se,type:Ae}){const Ye=(0,m.useMemo)(()=>Ec(),[]),dt=(0,m.useMemo)(()=>Ye.find(bt=>bt.value===Ae)??Ye[0],[Ye,Ae]);return m.createElement(Ur.v,{name:"Select variable type",value:dt,options:Ye,onChange:Se,testId:R.Tp.pages.Dashboard.Settings.Variables.Edit.General.generalTypeSelectV2})}function Dc({variable:Se,onTypeChange:Ae,onGoBack:Ye,onDelete:dt}){const bt=(0,He.of)(Pc),{name:Rt,type:kt,label:Jt,description:$t,hide:an}=Se.useState(),Ln=Mo(kt)?$l(kt):void 0,[ra,ya]=(0,_.A)(async()=>{await(0,es.s)(Se.validateAndUpdate())},[Se]),Hn=Na=>{Na.value&&Ae(Na.value)},Da=Na=>Se.setState({name:Na.currentTarget.value}),ja=Na=>Se.setState({label:Na.currentTarget.value}),Ls=Na=>Se.setState({description:Na.currentTarget.value}),jr=Na=>Se.setState({hide:Na}),qs=_l(Se),So=Na=>()=>{(0,K.rR)("Delete variable"),dt(Rt),Na()};return m.createElement("form",{"aria-label":"Variable editor Form"},m.createElement(bl,{onChange:Hn,type:kt}),m.createElement(Ds.Y,null,"General"),m.createElement(mr._,{name:"Name",description:"The name of the template variable. (Max. 50 characters)",placeholder:"Variable name",defaultValue:Rt??"",onBlur:Da,testId:R.Tp.pages.Dashboard.Settings.Variables.Edit.General.generalNameInputV2,maxLength:sr.M.MaxSize,required:!0}),m.createElement(mr._,{name:"Label",description:"Optional display name",placeholder:"Label name",defaultValue:Jt??"",onBlur:ja,testId:R.Tp.pages.Dashboard.Settings.Variables.Edit.General.generalLabelInputV2}),m.createElement(Br.Z,{name:"Description",defaultValue:$t??"",placeholder:"Descriptive text",onBlur:Ls,width:52}),m.createElement(Xs.D,{onChange:jr,hide:an||Os.rw.hide,type:kt}),Ln&&m.createElement(Ln,{variable:Se,onRunQuery:ya}),qs&&m.createElement(Zs.j,{options:Se.getOptionsForSelect()}),m.createElement("div",{className:bt.buttonContainer},m.createElement(T.B,{gap:2},m.createElement(Rs.$s,null,({showModal:Na,hideModal:Ns})=>m.createElement(P.$n,{variant:"destructive",fill:"outline",onClick:()=>{Na(Dt.u,{title:"Delete variable",body:`Are you sure you want to delete: ${Rt}?`,confirmText:"Delete variable",onConfirm:So(Ns),onDismiss:Ns,isOpen:!0})}},"Delete")),m.createElement(P.$n,{variant:"secondary","data-testid":R.Tp.pages.Dashboard.Settings.Variables.Edit.General.applyButton,onClick:Ye},"Back to list"),qs&&m.createElement(P.$n,{disabled:ra.loading,variant:"secondary","data-testid":R.Tp.pages.Dashboard.Settings.Variables.Edit.General.submitButton,onClick:ya},ra.loading?m.createElement(Zn._,{text:"Running query..."}):"Run query"))))}const Pc=Se=>({buttonContainer:(0,ye.css)({marginTop:Se.spacing(2)})});function Tl({index:Se,variable:Ae,onEdit:Ye,onDuplicate:dt,onDelete:bt}){const Rt=(0,He.$j)(),kt=(0,He.of)(dr),Jt=zl(Ae),$t=Ae.state,an=$t.name,[Ln,ra]=(0,m.useState)(!1),ya=Da=>()=>{ra(Da)},Hn=()=>{(0,K.rR)("Delete variable"),bt(an)};return m.createElement(ks.sx,{draggableId:JSON.stringify(an),index:Se},(Da,ja)=>m.createElement("tr",{ref:Da.innerRef,...Da.draggableProps,style:{userSelect:ja.isDragging?"none":"auto",background:ja.isDragging?Rt.colors.background.secondary:void 0,...Da.draggableProps.style}},m.createElement("td",{role:"gridcell",className:kt.column},m.createElement(P.$n,{size:"xs",fill:"text",onClick:Ls=>{Ls.preventDefault(),Ye(an)},className:kt.nameLink,"data-testid":R.Tp.pages.Dashboard.Settings.Variables.List.tableRowNameFields($t.name)},$t.name)),m.createElement("td",{role:"gridcell",className:kt.definitionColumn,onClick:Ls=>{Ls.preventDefault(),Ye(an)},"data-testid":R.Tp.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields($t.name)},Jt),m.createElement("td",{role:"gridcell",className:kt.column},m.createElement("div",{className:kt.icons},m.createElement(lr.K,{onClick:Ls=>{Ls.preventDefault(),(0,K.rR)("Duplicate variable"),dt(an)},name:"copy",tooltip:"Duplicate variable","data-testid":R.Tp.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons($t.name)}),m.createElement(lr.K,{onClick:Ls=>{Ls.preventDefault(),ra(!0)},name:"trash-alt",tooltip:"Remove variable","data-testid":R.Tp.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons($t.name)}),m.createElement(Dt.u,{isOpen:Ln,title:"Delete variable",body:`Are you sure you want to delete: ${$t.name}?`,confirmText:"Delete variable",onConfirm:Hn,onDismiss:ya(!1)}),m.createElement("div",{...Da.dragHandleProps,className:kt.dragHandle},m.createElement(oe.I,{name:"draggabledots",size:"lg"}))))))}function dr(Se){return{dragHandle:(0,ye.css)({cursor:"grab",marginLeft:Se.spacing(1)}),column:(0,ye.css)({width:"1%"}),nameLink:(0,ye.css)({cursor:"pointer",color:Se.colors.primary.text}),definitionColumn:(0,ye.css)({width:"100%",maxWidth:"200px",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),iconPassed:(0,ye.css)({color:Se.v1.palette.greenBase,marginRight:Se.spacing(2)}),iconFailed:(0,ye.css)({color:Se.v1.palette.orange,marginRight:Se.spacing(2)}),icons:(0,ye.css)({display:"flex",gap:Se.spacing(2),alignItems:"center"})}}function ro({variables:Se,onChangeOrder:Ae,onDelete:Ye,onDuplicate:dt,onAdd:bt,onEdit:Rt}){const kt=(0,He.of)(ki),Jt=$t=>{!$t.destination||!$t.source||((0,K.rR)("Variable drag and drop"),Ae($t.source.index,$t.destination.index))};return m.createElement("div",null,m.createElement("div",null,Se.length===0&&m.createElement(ds,{onAdd:bt}),Se.length>0&&m.createElement(T.B,{direction:"column",gap:3},m.createElement("div",{className:kt.tableContainer},m.createElement("table",{className:"filter-table filter-table--hover","data-testid":R.Tp.pages.Dashboard.Settings.Variables.List.table,role:"grid"},m.createElement("thead",null,m.createElement("tr",null,m.createElement("th",null,"Variable"),m.createElement("th",null,"Definition"),m.createElement("th",{colSpan:5}))),m.createElement(ks.JY,{onDragEnd:Jt},m.createElement(ks.gL,{droppableId:"variables-list",direction:"vertical"},$t=>m.createElement("tbody",{ref:$t.innerRef,...$t.droppableProps},Se.map((an,Ln)=>{const ra=an.state;return m.createElement(Tl,{index:Ln,key:`${ra.name}-${Ln}`,variable:an,onDelete:Ye,onDuplicate:dt,onEdit:Rt})}),$t.placeholder))))),m.createElement(T.B,null,m.createElement(P.$n,{"data-testid":R.Tp.pages.Dashboard.Settings.Variables.List.newButton,onClick:bt,icon:"plus"},"New variable")))))}function ds({onAdd:Se}){return m.createElement("div",null,m.createElement(po.A,{title:"There are no variables yet",buttonIcon:"calculator-alt",buttonTitle:"Add variable",infoBox:{__html:` <p>
                    Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server
                    or sensor names in your metric queries you can use variables in their place. Variables are shown as
                    list boxes at the top of the dashboard. These drop-down lists make it easy to change the data
                    being displayed in your dashboard. Check out the
                    <a class="external-link" href="https://grafana.com/docs/grafana/latest/variables/" target="_blank">
                      Templates and variables documentation
                    </a>
                    for more information.
                  </p>`},infoBoxTitle:"What do variables do?",onClick:Ae=>{Ae.preventDefault(),Se()}}))}const ki=()=>({tableContainer:(0,ye.css)({overflow:"scroll",width:"100%"})});class Ys extends r.Bs{constructor(){super(...arguments),this._urlSync=new Ki(this),this.getVariableIndex=Ae=>this.getVariables().findIndex(dt=>dt.state.name===Ae),this.replaceEditVariable=Ae=>{const Ye=this.state.editIndex??-1,{variables:dt}=this.getVariableSet().state;if(!dt[Ye]){console.error("Variable not found");return}const Rt=[...dt.slice(0,Ye),Ae,...dt.slice(Ye+1)];this.getVariableSet().setState({variables:Rt})},this.onDelete=Ae=>{const Ye=this.getVariableIndex(Ae),{variables:dt}=this.getVariableSet().state;if(Ye===-1){console.error("Variable not found");return}const bt=[...dt.slice(0,Ye),...dt.slice(Ye+1)];this.getVariableSet().setState({variables:bt})},this.onDuplicated=Ae=>{const Ye=this.getVariableIndex(Ae),dt=this.getVariableSet().state.variables;if(Ye===-1){console.error("Variable not found");return}const bt=dt[Ye];let Rt=0,kt=`copy_of_${bt.state.name}`;for(;dt.some(an=>an.state.name===kt);)Rt++,kt=`copy_of_${bt.state.name}_${Rt}`;const Jt=bt.clone(bt.state);Jt.setState({name:kt});const $t=[...dt.slice(0,Ye+1),Jt,...dt.slice(Ye+1)];this.getVariableSet().setState({variables:$t})},this.onOrderChanged=(Ae,Ye)=>{const dt=this.getVariableSet().state.variables;if(!this.getVariableSet())return;if(Ae<0||Ae>=dt.length||Ye<0||Ye>=dt.length){console.error("Invalid index");return}const bt=[...dt],Rt=bt.splice(Ae,1);bt.splice(Ye,0,Rt[0]),this.getVariableSet().setState({variables:bt})},this.onEdit=Ae=>{const Ye=this.getVariableIndex(Ae);if(Ye===-1){console.error("Variable not found");return}this.setState({editIndex:Ye})},this.onAdd=()=>{const Ae=this.getVariables(),Ye=Ae.length,dt=yi(Ae);this.getVariableSet().setState({variables:[...this.getVariables(),dt]}),this.setState({editIndex:Ye})},this.onTypeChange=Ae=>{const Ye=this.state.editIndex??-1,{variables:dt}=this.getVariableSet().state,bt=dt[Ye];if(!bt){console.error("Variable not found");return}const{name:Rt,label:kt}=bt.state,Jt=Ei(Ae,{name:Rt,label:kt});this.replaceEditVariable(Jt)},this.onGoBack=()=>{this.setState({editIndex:void 0})}}getUrlKey(){return"variables"}getDashboard(){return(0,fn.YQ)(this)}getVariableSet(){return r.jh.getVariables(this.getDashboard())}getVariables(){return this.getVariableSet().state.variables}}Ys.Component=rl;function rl({model:Se}){const Ae=Se.getDashboard(),{navModel:Ye,pageNav:dt}=Ka(Ae,Se.getUrlKey()),{onDelete:bt,onDuplicated:Rt,onOrderChanged:kt,onEdit:Jt,onTypeChange:$t,onGoBack:an,onAdd:Ln}=Se,{variables:ra}=Se.getVariableSet().useState(),{editIndex:ya}=Se.useState();if(ya!==void 0&&ra[ya]){const Hn=ra[ya];if(Hn)return m.createElement(Ml,{variable:Hn,onTypeChange:$t,onGoBack:an,pageNav:dt,navModel:Ye,dashboard:Ae,onDelete:bt})}return m.createElement(Oe.Y,{navModel:Ye,pageNav:dt,layout:je.k.Standard},m.createElement(Vt,{dashboard:Ae}),m.createElement(ro,{variables:ra,onDelete:bt,onDuplicate:Rt,onChangeOrder:kt,onAdd:Ln,onEdit:Jt}))}function Ml({variable:Se,pageNav:Ae,navModel:Ye,dashboard:dt,onTypeChange:bt,onGoBack:Rt,onDelete:kt}){const Jt=Ae.children.find(Ln=>Ln.active);Jt.parentItem=Ae;const{name:$t}=Se.useState(),an={text:$t,parentItem:Jt};return m.createElement(Oe.Y,{navModel:Ye,pageNav:an,layout:je.k.Standard},m.createElement(Vt,{dashboard:dt}),m.createElement(Dc,{variable:Se,onTypeChange:bt,onGoBack:Rt,onDelete:kt}))}const oi=10;class Yo extends r.Bs{constructor(Ae){super({...Ae,versions:[],isLoading:!0,isAppending:!0,viewMode:"list",isNewLatest:!1,diffData:{lhs:"",rhs:""}}),this._limit=oi,this._start=0,this.fetchVersions=(Ye=!1)=>{const dt=this._dashboard.state.uid;dt&&(this.setState({isAppending:Ye}),Ct.wL.getHistoryList(dt,{limit:this._limit,start:this._start}).then(bt=>{this.setState({isLoading:!1,versions:[...this.state.versions??[],...this.decorateVersions(bt)]}),this._start+=this._limit}).catch(bt=>console.log(bt)).finally(()=>this.setState({isAppending:!1})))},this.getDiff=async()=>{const Ye=this.versions.filter($t=>$t.checked),[dt,bt]=Ye,Rt=dt.version===this._dashboard.state.version;if(this.setState({isLoading:!0}),!this._dashboard.state.uid)return;const kt=await Ct.wL.getDashboardVersion(this._dashboard.state.uid,bt.version),Jt=await Ct.wL.getDashboardVersion(this._dashboard.state.uid,dt.version);this.setState({baseInfo:bt,isLoading:!1,isNewLatest:Rt,newInfo:dt,viewMode:"compare",diffData:{lhs:kt.data,rhs:Jt.data}})},this.reset=()=>{this.setState({baseInfo:void 0,diffData:{lhs:"",rhs:""},isNewLatest:!1,newInfo:void 0,versions:this.versions.map(Ye=>({...Ye,checked:!1})),viewMode:"list"})},this.onCheck=(Ye,dt)=>{this.setState({versions:this.versions.map(bt=>bt.id===dt?{...bt,checked:Ye.currentTarget.checked}:bt)})},this.addActivationHandler(()=>{this.fetchVersions()})}get _dashboard(){return(0,fn.YQ)(this)}get diffData(){return this.state.diffData??{lhs:"",rhs:""}}get versions(){return this.state.versions??[]}get limit(){return this._limit}get start(){return this._start}getUrlKey(){return"versions"}getDashboard(){return this._dashboard}getTimeRange(){return r.jh.getTimeRange(this._dashboard)}decorateVersions(Ae){const Ye=this.getTimeRange().getTimeZone();return Ae.map(dt=>({...dt,createdDateString:(0,rn.LE)(dt.created,{timeZone:Ye}),ageString:(0,rn.fq)(dt.created,{timeZone:Ye}),checked:!1}))}}Yo.Component=Tr;function Tr({model:Se}){const Ae=Se.getDashboard(),{isLoading:Ye,isAppending:dt,viewMode:bt,baseInfo:Rt,newInfo:kt,isNewLatest:Jt}=Se.useState(),{navModel:$t,pageNav:an}=Ka(Ae,Se.getUrlKey()),Ln=Se.versions.filter(Ls=>Ls.checked).length===2,ra=Se.versions.length>1,ya=Se.versions.length>=Se.limit,Hn=Se.versions.find(Ls=>Ls.version===1),Da=m.createElement(m.Fragment,null,m.createElement(Ct.me,{onClick:Se.reset,baseVersion:Rt?.version,newVersion:kt?.version,isNewLatest:Jt}),Ye?m.createElement(Di,{msg:"Fetching changes\u2026"}):m.createElement(Ct.Cc,{newInfo:kt,baseInfo:Rt,isNewLatest:Jt,diffData:Se.diffData,onRestore:Ae.onRestore})),ja=m.createElement(m.Fragment,null,Ye?m.createElement(Di,{msg:"Fetching history list\u2026"}):m.createElement(Ct.bS,{versions:Se.versions,onCheck:Se.onCheck,canCompare:Ln,onRestore:Ae.onRestore}),dt&&m.createElement(Di,{msg:"Fetching more entries\u2026"}),ra&&m.createElement(Ct.rJ,{hasMore:ya,canCompare:Ln,getVersions:Se.fetchVersions,getDiff:Se.getDiff,isLastPage:!!Hn}));return m.createElement(Oe.Y,{navModel:$t,pageNav:an,layout:je.k.Standard},m.createElement(Vt,{dashboard:Ae}),bt==="compare"?Da:ja)}const Di=({msg:Se})=>m.createElement(la.Gy,null,m.createElement(ta.y,null),m.createElement("em",null,Se));function Ka(Se,Ae){const Ye=(0,ke.zy)(),dt=(0,ee.useSelector)(Jt=>Jt.navIndex),bt=(0,d.tc)(dt,"dashboards/browse"),Rt=Se.getPageNav(Ye,dt),kt={text:"Settings",url:t.I.getUrlForPartial(Ye,{editview:"settings",editIndex:null}),children:[{text:(0,$e.t)("dashboard-settings.general.title","General"),url:t.I.getUrlForPartial(Ye,{editview:"settings",editIndex:null}),active:Ae==="settings"},{text:(0,$e.t)("dashboard-settings.annotations.title","Annotations"),url:t.I.getUrlForPartial(Ye,{editview:"annotations",editIndex:null}),active:Ae==="annotations"},{text:(0,$e.t)("dashboard-settings.variables.title","Variables"),url:t.I.getUrlForPartial(Ye,{editview:"variables",editIndex:null}),active:Ae==="variables"},{text:(0,$e.t)("dashboard-settings.links.title","Links"),url:t.I.getUrlForPartial(Ye,{editview:"links",editIndex:null}),active:Ae==="links"},{text:(0,$e.t)("dashboard-settings.versions.title","Versions"),url:t.I.getUrlForPartial(Ye,{editview:"versions",editIndex:null}),active:Ae==="versions"},{text:(0,$e.t)("dashboard-settings.permissions.title","Permissions"),url:t.I.getUrlForPartial(Ye,{editview:"permissions",editIndex:null}),active:Ae==="permissions"},{text:(0,$e.t)("dashboard-settings.json-editor.title","JSON Model"),url:t.I.getUrlForPartial(Ye,{editview:"json-model",editIndex:null}),active:Ae==="json-model"}],parentItem:Rt};return{navModel:bt,pageNav:kt}}function Cc(Se){switch(Se){case"annotations":return new No({});case"variables":return new Ys({});case"links":return new Kt({});case"versions":return new Yo({});case"json-model":return new ma({});case"permissions":return new da({});case"settings":default:return new ha({})}}class Sl extends r.Bs{constructor(Ae){super(Ae),this.addActivationHandler(this._activationHandler.bind(this))}_activationHandler(){const Ae=this.state.panelRef.resolve(),Ye=r.Go.cloneSceneObjectState(Ae.state,{key:Ae.state.key+"-view",$variables:this.getScopedVariables(Ae)}),dt=new r.Eb(Ye);return this.setState({body:dt}),()=>{dt.state.$data&&Ae.setState({$data:dt.state.$data.clone()})}}getScopedVariables(Ae){const Ye=bc(Ae),dt=[];if(Ye&&Ye.state.$variables)for(const bt of Ye.state.$variables.state.variables)dt.push(bt.clone());if(Ae.state.$variables)for(const bt of Ae.state.$variables.state.variables)dt.push(bt.clone());if(dt.length>0)return new r.Pj({variables:dt})}getUrlKey(){return this.state.panelRef.resolve().state.key}}Sl.Component=({model:Se})=>{const{body:Ae}=Se.useState();return Ae?m.createElement(Ae.Component,{model:Ae}):null};function bc(Se){try{return r.jh.getAncestor(Se,r.tI)}catch{return}}var xl=e(30195);class Tc{constructor(Ae){this._scene=Ae}getKeys(){return["inspect","viewPanel","editPanel","editview"]}getUrlState(){const Ae=this._scene.state;return{inspect:Ae.inspectPanelKey,viewPanel:Ae.viewPanelScene?.getUrlKey(),editview:Ae.editview?.getUrlKey(),editPanel:Ae.editPanel?.getUrlKey()||void 0}}updateFromUrl(Ae){const{inspectPanelKey:Ye,viewPanelScene:dt,isEditing:bt,editPanel:Rt}=this._scene.state,kt={};if(typeof Ae.editview=="string"&&this._scene.canEditDashboard()?(kt.editview=Cc(Ae.editview),bt||setTimeout(()=>this._scene.onEnterEditMode())):Ae.hasOwnProperty("editview")&&(kt.editview=void 0),typeof Ae.inspect=="string"){if(!(0,fn.vL)(this._scene,Ae.inspect)){g.A.emit(n.r1.alertError,["Panel not found"]),s.Ny.partial({inspect:null});return}kt.inspectPanelKey=Ae.inspect,kt.overlay=new Es({$behaviors:[new Mc({panelKey:Ae.inspect})]})}else Ye&&(kt.inspectPanelKey=void 0,kt.overlay=void 0);if(typeof Ae.viewPanel=="string"){const Jt=(0,fn.vL)(this._scene,Ae.viewPanel);if(!Jt){if((0,fn.SN)(Ae.viewPanel)){this._handleViewRepeatClone(Ae.viewPanel);return}g.A.emit(n.r1.alertError,["Panel not found"]),s.Ny.partial({viewPanel:null});return}kt.viewPanelScene=new Sl({panelRef:Jt.getRef()})}else dt&&Ae.viewPanel===null&&(kt.viewPanelScene=void 0);if(typeof Ae.editPanel=="string"){const Jt=(0,fn.vL)(this._scene,Ae.editPanel);if(!Jt)return;bt||this._scene.onEnterEditMode(),kt.editPanel=sl(Jt)}else Rt&&Ae.editPanel===null&&(kt.editPanel=void 0);Object.keys(kt).length>0&&this._scene.setState(kt)}_handleViewRepeatClone(Ae){this._eventSub||(this._eventSub=this._scene.subscribeToEvent(xl.d,()=>{const Ye=(0,fn.vL)(this._scene,Ae);Ye&&(this._eventSub?.unsubscribe(),this._scene.setState({viewPanelScene:new Sl({panelRef:Ye.getRef()})}))}))}}class Mc extends r.Bs{constructor(Ae){super(Ae),this._onActivate=()=>{const Ye=this.parent;if(!Ye||!(Ye instanceof Es))throw new Error("ResolveInspectPanelByKey must be attached to a PanelInspectDrawer");const dt=(0,fn.YQ)(Ye);if(!dt)return;const bt=this.state.panelKey;let Rt=(0,fn.vL)(dt,bt);dt.state.editPanel&&(Rt=dt.state.editPanel.state.vizManager.state.panel),dt.state.viewPanelScene&&dt.state.viewPanelScene.state.body&&(Rt=dt.state.viewPanelScene.state.body),Rt&&Ye.setState({panelRef:Rt.getRef()})},this.addActivationHandler(this._onActivate)}}var kl=e(6411),Pi=e.n(kl);class Sc{constructor(){this._binds=[]}addBinding(Ae){Pi().bind(Ae.key,Ye=>{Ye.preventDefault(),Ye.stopPropagation(),Ye.returnValue=!1,Ae.onTrigger()},"keydown"),this._binds.push(Ae)}removeAll(){this._binds.forEach(Ae=>{Pi().unbind(Ae.key,Ae.type)}),this._binds=[]}}var Hl=e(98184);function Ol(Se){const Ae=new Sc;return Ae.addBinding({key:"v",onTrigger:Fo(Se,Ye=>{Se.state.viewPanelScene||s.Ny.push((0,gn.r7)(Ye))})}),Ae.addBinding({key:"e",onTrigger:Fo(Se,async Ye=>{if(Ye.getRoot()instanceof Hi){const bt=(0,fn.Cs)(Ye);Se.state.editPanel||s.Ny.push((0,gn.e0)(bt))}})}),Ae.addBinding({key:"p s",onTrigger:Fo(Se,async Ye=>{Se.showModal(new it.Z({panelRef:Ye.getRef(),dashboardRef:Se.getRef()}))})}),Ae.addBinding({key:"i",onTrigger:Fo(Se,async Ye=>{s.Ny.push((0,gn.Uu)(Ye))})}),Ae.addBinding({key:"p x",onTrigger:Fo(Se,async Ye=>{const dt=await(0,gn.Lp)(Ye);dt&&s.Ny.push(dt)})}),Ae.addBinding({key:"p l",onTrigger:Fo(Se,Hl.vR)}),Ae.addBinding({key:"d r",onTrigger:()=>r.jh.getTimeRange(Se).onRefresh()}),Ae.addBinding({key:"t z",onTrigger:()=>{Ci(Se)}}),Ae.addBinding({key:"ctrl+z",onTrigger:()=>{Ci(Se)}}),Ae.addBinding({key:"t left",onTrigger:()=>{wr(Se,"left")}}),Ae.addBinding({key:"t right",onTrigger:()=>{wr(Se,"right")}}),Ae.addBinding({key:"d s",onTrigger:Se.onOpenSettings}),Ae.addBinding({key:"mod+s",onTrigger:()=>Se.openSaveDrawer({})}),Ae.addBinding({key:"p r",onTrigger:Fo(Se,Ye=>{(0,Hl.FC)(Se,Ye,!0)})}),Ae.addBinding({key:"p d",onTrigger:Fo(Se,Ye=>{Se.duplicatePanel(Ye)})}),()=>Ae.removeAll}function Fo(Se,Ae){return()=>{const Ye=document.querySelectorAll(":hover");for(let dt=Ye.length-1;dt>0;dt--){const bt=Ye[dt];if(bt instanceof HTMLElement&&bt.dataset?.vizPanelKey){const Rt=bt.dataset?.vizPanelKey,kt=r.jh.findObject(Se,Jt=>Jt.state.key===Rt);if(kt&&kt instanceof r.Eb){Ae(kt);return}}}}}function Ci(Se){Lt.b.getTimePicker(Se)?.onZoom()}function wr(Se,Ae){const Ye=Lt.b.getTimePicker(Se);Ye&&(Ae==="left"&&Ye.onMoveBackward(),Ae==="right"&&Ye.onMoveForward())}const Gl=["title","description","tags","editable","graphTooltip","links"],vo=class extends r.Bs{constructor(Se){super({title:"Dashboard",meta:{},editable:!0,body:Se.body??new r.G1({children:[]}),links:Se.links??[],...Se}),this._urlSync=new Tc(this),this._variableDependency=new xc,this.onEnterEditMode=()=>{this._initialState=r.Go.cloneSceneObjectState(this.state),this._initialUrlState=s.Ny.getLocation(),this.setState({isEditing:!0}),this.propagateEditModeChange(),this.startTrackingChanges()},this.onRestore=async Ae=>{const Ye=await Ct.wL.restoreDashboard(Ae.uid,Ae.version);if(!Number.isInteger(Ye.version))return!1;const dt={dashboard:new f.G(Ae.data),meta:this.state.meta},bt=(0,ct.wM)(dt),Rt=r.Go.cloneSceneObjectState(bt.state);return Rt.version=Ye.version,this._initialState=Rt,this.exitEditMode({skipConfirm:!1}),!0},this.onOpenSettings=()=>{s.Ny.partial({editview:"settings"})},this.isEmpty=()=>{const{body:Ae,viewPanelScene:Ye}=this.state;if(Ye)return!!Ye.state.body;if(Ae instanceof r.G1||Ae instanceof r.hy)return Ae.state.children.length===0;throw new Error("Invalid body type")},this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){let Se=window.__grafanaSceneContext;window.__grafanaSceneContext=this,this.state.isEditing&&this.startTrackingChanges(),!this.state.meta.isEmbedded&&this.state.uid&&c.t.watch(this.state.uid);const Ae=Ol(this),Ye=new qt(this);return(0,l.UA)().setCurrent(Ye),()=>{window.__grafanaSceneContext=Se,Ae(),this.stopTrackingChanges(),this.stopUrlSync(),Ye.destroy(),c.t.leave()}}startUrlSync(){this.state.meta.isEmbedded||(0,r.Is)().initSync(this)}stopUrlSync(){(0,r.Is)().cleanUp(this)}saveCompleted(Se,Ae,Ye){this._initialSaveModel={...Se,id:Ae.id,uid:Ae.uid,version:Ae.version},this.stopTrackingChanges(),this.setState({version:Ae.version,isDirty:!1,uid:Ae.uid,id:Ae.id,meta:{...this.state.meta,uid:Ae.uid,url:Ae.url,slug:Ae.slug,folderUid:Ye}}),this.startTrackingChanges()}propagateEditModeChange(){this.state.body instanceof r.hy&&(this.state.body.setState({isDraggable:this.state.isEditing,isResizable:this.state.isEditing}),(0,fn.X0)(this.state.body,!0))}exitEditMode({skipConfirm:Se}){if(!this.canDiscard()){console.error("Trying to discard back to a state that does not exist, initialState undefined");return}if(!this.state.isDirty||Se){this.exitEditModeConfirmed();return}g.A.publish(new p.bY({title:"Discard changes to dashboard?",text:"You have unsaved changes to this dashboard. Are you sure you want to discard them?",icon:"trash-alt",yesText:"Discard",onConfirm:this.exitEditModeConfirmed.bind(this)}))}exitEditModeConfirmed(){this.stopTrackingChanges(),this.stopUrlSync(),s.Ny.replace(t.I.getUrlForPartial(this._initialUrlState,{editPanel:null,editview:null,inspect:null,inspectTab:null})),this.setState({...this._initialState,isEditing:!1}),this.startUrlSync(),this.propagateEditModeChange()}canDiscard(){return this._initialState!==void 0}openSaveDrawer({saveAsCopy:Se}){this.state.isEditing&&this.setState({overlay:new Qe({dashboardRef:this.getRef(),saveAsCopy:Se})})}getPageNav(Se,Ae){const{meta:Ye,viewPanelScene:dt,editPanel:bt}=this.state;let Rt={text:this.state.title,url:(0,gn.uZ)({uid:this.state.uid,slug:Ye.slug,currentQueryParams:Se.search,updateQuery:{viewPanel:null,inspect:null,editview:null,editPanel:null,tab:null}})};const{folderUid:kt}=Ye;if(kt){const Jt=(0,d.tc)(Ae,`folder-dashboards-${kt}`).main;Jt.id!=="not-found"&&(Rt={...Rt,parentItem:Jt})}return dt&&(Rt={text:"View panel",parentItem:Rt}),bt&&(Rt={text:"Edit panel",parentItem:Rt}),Rt}getBodyToRender(){return this.state.viewPanelScene??this.state.body}startTrackingChanges(){this._changeTrackerSub=this.subscribeToEvent(r.bZ,Se=>{Se.payload.changedObject instanceof r.WM&&Object.prototype.hasOwnProperty.call(Se.payload.partialUpdate,"intervals")&&this.setIsDirty(),Se.payload.changedObject instanceof r.zr&&this.setIsDirty(),Se.payload.changedObject instanceof r.tV.g&&(Object.prototype.hasOwnProperty.call(Se.payload.partialUpdate,"data")||this.setIsDirty()),Se.payload.changedObject instanceof r.M$&&this.setIsDirty(),Se.payload.changedObject instanceof vo&&Object.keys(Se.payload.partialUpdate).some(Ae=>Gl.includes(Ae))&&this.setIsDirty(),Se.payload.changedObject instanceof r.JZ&&this.setIsDirty(),Se.payload.changedObject instanceof xn.x&&Object.prototype.hasOwnProperty.call(Se.payload.partialUpdate,"hideTimeControls")&&this.setIsDirty()})}setIsDirty(){this.state.isDirty||this.setState({isDirty:!0})}stopTrackingChanges(){this._changeTrackerSub?.unsubscribe()}getInitialState(){return this._initialState}addPanel(Se){this.setState({body:new r.hy({children:[new r.M$({height:10,width:10,x:.2,y:0,body:Se})]})})}duplicatePanel(Se){if(!Se.parent)return;const Ae=Se.parent;if(!(Ae instanceof r.M$||yr.w)){console.error("Trying to duplicate a panel in a layout that is not SceneGridItem or PanelRepeaterGridItem");return}let Ye,dt;if(Ae instanceof yr.w){const{key:$t,...an}=r.Go.cloneSceneObjectState(Ae.state.source.state);Ye={...an},dt=r.jh.getData(Ae.state.source).clone()}else{const{key:$t,...an}=r.Go.cloneSceneObjectState(Se.state);Ye={...an},dt=r.jh.getData(Se).clone()}delete dt.state.data?.alertState;const{key:bt,...Rt}=r.Go.cloneSceneObjectState(Ae.state),kt=new r.M$({...Rt,body:new r.Eb({...Ye,$data:dt})});if(!(this.state.body instanceof r.hy)){console.error("Trying to duplicate a panel in a layout that is not SceneGridLayout ");return}const Jt=this.state.body;Jt.setState({children:[...Jt.state.children,kt]})}copyPanel(Se){if(!Se.parent)return;const Ae=Se.parent,Ye=(0,Be.ZB)(Ae);i.A.set(u.tH,JSON.stringify(Ye)),g.A.emit(n.r1.alertSuccess,["Panel copied. Click **Add panel** icon to paste."])}showModal(Se){this.setState({overlay:Se})}closeModal(){this.setState({overlay:void 0})}async onStarDashboard(){const{meta:Se,uid:Ae}=this.state;if(Ae)try{const Ye=await(0,l.UA)().starDashboard(Ae,!!Se.isStarred);this.setState({meta:{...Se,isStarred:Ye}})}catch(Ye){console.error("Failed to star dashboard",Ye)}}enrichDataRequest(Se){const Ae=(0,fn.xz)(Se);let Ye=0;return Ae&&Ae.state.key&&((0,fn.SN)(Ae.state.key)?Ye=Cn(Ae?.state.key):Ye=(0,fn.Cs)(Ae)),{app:o.Jk.Dashboard,dashboardUID:this.state.uid,panelId:Ye,panelPluginType:Ae?.state.pluginId}}canEditDashboard(){const{meta:Se}=this.state;return!!(Se.canEdit||Se.canMakeEditable)}getInitialSaveModel(){return this._initialSaveModel}setInitialSaveModel(Se){this._initialSaveModel=Se}};let Hi=vo;Hi.listenToChangesInProps=Gl,Hi.Component=St;class xc{constructor(){this._emptySet=new Set}getNames(){return this._emptySet}hasDependencyOn(){return!1}variableUpdateCompleted(Ae,Ye){Ye&&g.A.publish(new h.og({refreshAll:!0,panelIds:[]}))}}},60656:(Y,A,e)=>{"use strict";e.d(A,{F:()=>u});var t=e(96540),n=e(79065),o=e(34214),s=e(57767),r=e(96556),g=e(98184);class u extends n.Bs{constructor({uid:l,title:f,key:c,name:h}){super({uid:l,title:f,key:c,name:h,panel:new n.Eb({title:f,menu:new n.Lw({$behaviors:[g._i]})})}),this._onActivate=()=>{this.loadLibraryPanelFromPanelModel()},this.addActivationHandler(this._onActivate)}async loadLibraryPanelFromPanelModel(){let l=this.state.panel;try{const f=await(0,s.Yr)(this.state.uid,!0),c=new o.a(f.model);l=l.clone({options:c.options??{},fieldConfig:c.fieldConfig,pluginVersion:c.pluginVersion,displayMode:c.transparent?"transparent":void 0,description:c.description,pluginId:f.type,$data:(0,r.w)(c)})}catch{l.setState({_pluginLoadError:"Unable to load library panel: "+this.state.uid})}this.setState({panel:l})}}u.Component=d;function d({model:i}){const{panel:l}=i.useState();return l?t.createElement(l.Component,{model:l}):null}},42397:(Y,A,e)=>{"use strict";e.d(A,{$:()=>i,m:()=>f});var t=e(96540),n=e(79065),o=e(91052),s=e(14578),r=e(83122),g=e(27746),u=e(38138),d=e(98184);class i extends n.Bs{}i.Component=l;function l({model:h}){const{menu:p,rawLinks:m}=h.useState();if(!(h.parent instanceof n.Eb))throw new Error("VizPanelLinks must be a child of VizPanel");if(!m||m.length===0)return null;if(m.length===1){const a=(0,d.eQ)(h.parent)[0];return t.createElement(o.NR.TitleItem,{href:a.href,onClick:a.onClick,target:a.target,title:a.title},t.createElement(s.I,{name:"external-link-alt",size:"md"}))}return t.createElement(r.m,{overlay:()=>t.createElement(p.Component,{model:p,key:p.state.key})},t.createElement(g.I,{icon:"external-link-alt",iconSize:"md","aria-label":"panel links"}))}class f extends n.Bs{}f.Component=c;function c({model:h}){const{links:p}=h.useState();return p?t.createElement(u.W,null,p?.map((m,a)=>t.createElement(u.W.Item,{key:a,label:m.title,url:m.href,target:m.target,onClick:m.onClick}))):null}},98184:(Y,A,e)=>{"use strict";e.d(A,{eQ:()=>G,oV:()=>V,_i:()=>H,FC:()=>K,vR:()=>k});var t=e(74135),n=e(1933),o=e(76885),s=e(32264),r=e(4402),g=e(12131),u=e(79065),d=e(28138),i=e(44836),l=e(63066),f=e(22699),c=e(16560),h=e(32349),p=e(75462),m=e(19347),a=e(65405),v=e(74730),E=e(96540),D=e(87978),b=e(18919),P=e(1997),y=e(4200);class T extends u.Bs{constructor(Z){super(Z),this.onOpenTrail=()=>{(0,P.l)().goToUrlForTrail(this.trail.clone({embedded:!1}))},this.onClose=()=>{(0,v.YQ)(this).closeModal()},this.trail=I(Z),this.trail.addActivationHandler(()=>{this.trail.subscribeToEvent(y.PK,this.onOpenTrail)})}}T.Component=M;function M({model:ae}){return E.createElement(D._,{title:"Data trail",onClose:ae.onClose,size:"lg"},E.createElement("div",{style:{display:"flex",height:"100%"}},E.createElement(ae.trail.Component,{model:ae.trail})))}function I({query:ae,dsRef:Z,timeRange:ne}){const q=ae.labels.map(re=>({key:re.label,value:re.value,operator:re.op})),te=(0,m.l)().getInstanceSettings(Z);return new b.b({$timeRange:ne,metric:ae.metric,initialDS:te?.uid,initialFilters:q,embedded:!0})}function x(ae,Z,ne){const q=(0,v.un)(Z);if(!q)return;const te=(0,m.l)().getInstanceSettings(q.state.datasource);if(!te||te.meta.id!=="prometheus"||q.state.queries.length>1)return;const re=q.state.queries[0],de=(0,a.u)(re.expr);de.errors.length>0||ne.push({text:"Data trail",iconClassName:"code-branch",onClick:()=>{ae.showModal(new T({query:de.query,dsRef:te,timeRange:ae.state.$timeRange.clone()}))},shortcut:"p s"})}var S=e(28444),O=e(58441),C=e(7758),L=e(11982),U=e(36043),R=e(60656),B=e(42397);function H(ae){(async()=>{const ne=ae.parent,q=ne.getPlugin(),te=[],re=[],de=(0,v.Cs)(ne),ie=(0,v.YQ)(ne),{isEmbedded:ge}=ie.state.meta,ve=await W(ne);if(ge){ve&&ae.setState({items:[ve]});return}te.push({text:(0,i.t)("panel.header-menu.view","View"),iconClassName:"eye",shortcut:"v",onClick:()=>C.c.panelMenuItemClicked("view"),href:(0,L.r7)(ne)}),ie.canEditDashboard()&&te.push({text:(0,i.t)("panel.header-menu.edit","Edit"),iconClassName:"eye",shortcut:"e",onClick:()=>C.c.panelMenuItemClicked("edit"),href:(0,L.e0)(de)}),te.push({text:(0,i.t)("panel.header-menu.share","Share"),iconClassName:"share-alt",onClick:()=>{C.c.panelMenuItemClicked("share"),ie.showModal(new O.Z({panelRef:ne.getRef(),dashboardRef:ie.getRef()}))},shortcut:"p s"}),re.push({text:(0,i.t)("panel.header-menu.duplicate","Duplicate"),onClick:()=>{C.c.panelMenuItemClicked("duplicate"),ie.duplicatePanel(ne)},shortcut:"p d"}),re.push({text:(0,i.t)("panel.header-menu.copy","Copy"),onClick:()=>{C.c.panelMenuItemClicked("copy"),ie.copyPanel(ne)}}),ne.parent instanceof R.F||re.push({text:(0,i.t)("panel.header-menu.create-library-panel","Create library panel"),onClick:()=>{C.c.panelMenuItemClicked("createLibraryPanel"),ie.showModal(new O.Z({panelRef:ne.getRef(),dashboardRef:ie.getRef(),activeTab:f.wr.libraryPanel}))}}),re.push({text:(0,i.t)("panel.header-menu.new-alert-rule","New alert rule"),onClick:pe=>j(ne)}),Q(ne.state.options)&&re.push({text:ne.state.options.legend.showLegend?(0,i.t)("panel.header-menu.hide-legend","Hide legend"):(0,i.t)("panel.header-menu.show-legend","Show legend"),onClick:pe=>{pe.preventDefault(),k(ne)},shortcut:"p l"}),ie.canEditDashboard()&&q&&!q.meta.skipDataQuery&&re.push({text:(0,i.t)("panel.header-menu.get-help","Get help"),onClick:pe=>{pe.preventDefault(),ee(ne,c.q.Help)}}),s.$.featureToggles.datatrails&&x(ie,ne,te),ve&&te.push(ve),te.push(N(q,ne,ie));const{extensions:ye}=(0,r.Kf)({extensionPointId:t.S.DashboardPanelMenu,context:_(ne,ie),limitPerPlugin:3});ye.length>0&&!ie.state.isEditing&&te.push({text:"Extensions",iconClassName:"plug",type:"submenu",subMenu:(0,p.N9)(ye)}),re.length&&te.push({type:"submenu",text:(0,i.t)("panel.header-menu.more","More..."),iconClassName:"cube",subMenu:re,onClick:pe=>{pe.preventDefault()}}),te.push({text:"",type:"divider"}),te.push({text:(0,i.t)("panel.header-menu.remove","Remove"),iconClassName:"trash-alt",onClick:()=>{C.c.panelMenuItemClicked("remove"),K(ie,ne,!0)},shortcut:"p r"}),ae.setState({items:te})})()}async function W(ae){const Z=await(0,L.Lp)(ae);if(Z)return{text:(0,i.t)("panel.header-menu.explore","Explore"),iconClassName:"compass",shortcut:"p x",onClick:()=>C.c.panelMenuItemClicked("explore"),href:Z}}function N(ae,Z,ne){const q=[];return ae&&!ae.meta.skipDataQuery&&(q.push({text:(0,i.t)("panel.header-menu.inspect-data","Data"),href:(0,L.Uu)(Z,c.q.Data),onClick:te=>{te.preventDefault(),g.Ny.partial({inspect:Z.state.key,inspectTab:c.q.Data}),C.c.panelMenuInspectClicked(c.q.Data)}}),ne instanceof U.H$&&ne.state.meta.canEdit&&q.push({text:(0,i.t)("panel.header-menu.query","Query"),href:(0,L.Uu)(Z,c.q.Query),onClick:te=>{te.preventDefault(),g.Ny.partial({inspect:Z.state.key,inspectTab:c.q.Query}),C.c.panelMenuInspectClicked(c.q.Query)}})),q.push({text:(0,i.t)("panel.header-menu.inspect-json","Panel JSON"),href:(0,L.Uu)(Z,c.q.JSON),onClick:te=>{te.preventDefault(),g.Ny.partial({inspect:Z.state.key,inspectTab:c.q.JSON}),C.c.panelMenuInspectClicked(c.q.JSON)}}),{text:(0,i.t)("panel.header-menu.inspect","Inspect"),iconClassName:"info-circle",shortcut:"i",href:(0,L.Uu)(Z),onClick:te=>{te.isDefaultPrevented()||(g.Ny.partial({inspect:Z.state.key,inspectTab:c.q.Data}),C.c.panelMenuInspectClicked(c.q.Data))},subMenu:q.length>0?q:void 0}}function V(ae){if(!(ae.parent instanceof B.$))throw new Error("parent of VizPanelLinksMenu must be VizPanelLinks");const Z=ae.parent.parent;if(!(Z instanceof u.Eb))throw new Error("parent of VizPanelLinks must be VizPanel");ae.setState({links:G(Z)})}function G(ae){const Z=(te,re)=>u.jh.interpolate(ae,te,re),ne=(0,h.CH)(ae,Z);if(!ne)return[];const q=ne.getLinks(Z);return q.map(te=>({...te,onClick:(re,de)=>{C.c.panelLinkClicked({has_multiple_links:q.length>1}),te.onClick?.(re,de)}}))}function _(ae,Z){const ne=u.jh.getTimeRange(ae);let q=(0,v.un)(ae);const te=q?.state.queries,re=(0,v.Cs)(ae);let de={};if(ae.state.$variables&&ae.state.$variables.state.variables.forEach(ie=>{ie instanceof u.xc&&(de={...de,[ie.state.name]:{value:ie.getValue(),text:ie.getValueText()}})}),ae.parent?.parent instanceof u.tI){const ie=ae.parent.parent;ie.state.$variables&&ie.state.$variables.state.variables.forEach(ge=>{ge instanceof u.xc&&(de={...de,[ge.state.name]:{value:ge.getValue(),text:ge.getValueText()}})})}return{id:re,pluginId:ae.state.pluginId,title:ae.state.title,timeRange:ne.state.value.raw,timeZone:(0,n.O)({timeZone:ne.getTimeZone()}),dashboard:{uid:Z.state.uid,title:Z.state.title,tags:Z.state.tags||[]},targets:te,scopedVars:de,data:q?.state.data}}function K(ae,Z,ne){const q=u.jh.getData(Z);let te=!1;if(q.state.data?.alertState&&(te=!0),ne!==!1){const ie=te&&!s.$.unifiedAlertingEnabled?"Panel includes an alert rule. removing the panel will also remove the alert rule":void 0,ge=te?"YES":void 0;d.A.publish(new S.bY({title:"Remove panel",text:"Are you sure you want to remove this panel?",text2:ie,icon:"trash-alt",confirmText:ge,yesText:"Remove",onConfirm:()=>K(ae,Z,!1)}));return}const re=[];ae.state.body.forEachChild(ie=>{ie.state.key!==Z.parent?.state.key&&re.push(ie)});const de=ae.state.body;(de instanceof u.hy||u.G1)&&de.setState({children:re})}const j=async ae=>{C.c.panelMenuItemClicked("create-alert");const Z=await(0,l.J6)(ae),ne=o.kM.renderUrl("/alerting/new",{defaults:JSON.stringify(Z),returnTo:location.pathname+location.search});g.Ny.push(ne),C.c.panelMenuItemClicked("create-alert")};function k(ae){const Z=ae.state.options;Q(Z)&&typeof Z.legend.showLegend=="boolean"&&ae.onOptionsChange({legend:{showLegend:!Z.legend.showLegend}}),C.c.panelMenuItemClicked("toggleLegend")}function Q(ae){return ae!=null&&typeof ae=="object"&&"legend"in ae}const ee=(ae,Z)=>{g.Ny.partial({inspect:ae.state.key,inspectTab:Z}),C.c.panelMenuInspectClicked(Z??c.q.Data)}},11497:(Y,A,e)=>{"use strict";e.d(A,{w:()=>d});var t=e(32196),n=e(96540),o=e(32264),s=e(79065),r=e(15054),g=e(74730),u=e(30195);class d extends s.Bs{constructor(c){super(c),this._variableDependency=new s.Sh(this,{variableNames:[this.state.variableName],onVariableUpdateCompleted:this._onVariableUpdateCompleted.bind(this)}),this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){this._subs.add(this.subscribeToState((c,h)=>this._handleGridResize(c,h))),this._performRepeat()}_onVariableUpdateCompleted(){this._performRepeat()}_handleGridResize(c,h){const p=this.state.repeatedPanels?.length??1,m={};if(c.height!==h.height){if(this.getRepeatDirection()==="v"){const a=Math.ceil(c.height/p);m.itemHeight=a}else{const a=Math.ceil(p/this.getMaxPerRow());m.itemHeight=Math.ceil(c.height/a)}m.itemHeight!==this.state.itemHeight&&this.setState(m)}}_performRepeat(){if(this._variableDependency.hasDependencyInLoadingState())return;const c=s.jh.lookupVariable(this.state.variableName,this);if(!c){console.error("SceneGridItemRepeater: Variable not found");return}if(!(c instanceof s.n8)){console.error("PanelRepeaterGridItem: Variable is not a MultiValueVariable");return}const h=this.state.source,{values:p,texts:m}=(0,g.a7)(c),a=[];for(let y=0;y<p.length;y++){const T=h.clone({$variables:new s.Pj({variables:[new s.xc({name:c.state.name,value:p[y],text:String(m[y])})]}),key:`${h.state.key}-clone-${y}`});a.push(T)}const v=this.getRepeatDirection(),E={repeatedPanels:a},D=this.state.itemHeight??10,b=this.state.height,P=this.getMaxPerRow();if(v==="h"){const y=Math.ceil(a.length/P);E.height=y*D}else E.height=a.length*D;if(this.setState(E),b!==this.state.height){const y=s.jh.getLayout(this);y instanceof s.hy&&y.forceRender()}this.publishEvent(new u.d({source:this}),!0)}getMaxPerRow(){return this.state.maxPerRow??4}getRepeatDirection(){return this.state.repeatDirection==="v"?"v":"h"}getClassName(){return"panel-repeater-grid-item"}}d.Component=({model:f})=>{const{repeatedPanels:c,itemHeight:h}=f.useState(),p=c?.length??0,m=i(f.getRepeatDirection(),p,f.getMaxPerRow(),h??10);return c?n.createElement("div",{className:m},c.map(a=>n.createElement("div",{className:l,key:a.state.key},n.createElement(a.Component,{model:a,key:a.state.key})))):null};function i(f,c,h,p){return(0,n.useMemo)(()=>{const m=o.$.theme2,a=p*r.sD*c+(c-1)*r.dU;if(f==="h"){const v=Math.ceil(c/h),E=Math.ceil(c/v);return(0,t.css)({display:"grid",height:"100%",width:"100%",gridTemplateColumns:`repeat(${E}, 1fr)`,gridTemplateRows:`repeat(${v}, 1fr)`,gridColumnGap:m.spacing(1),gridRowGap:m.spacing(1),[m.breakpoints.down("md")]:{display:"flex",flexDirection:"column",height:a}})}return(0,t.css)({display:"flex",height:"100%",width:"100%",flexDirection:"column",gap:m.spacing(1),[m.breakpoints.down("md")]:{height:a}})},[f,c,h,p])}const l=(0,t.css)({display:"flex",flexGrow:1,position:"relative"})},7928:(Y,A,e)=>{"use strict";e.d(A,{v:()=>c});var t=e(32196),n=e(96540),o=e(43127),s=e(65879),r=e(85858),g=e(79065),u=e(40845),d=e(56034),i=e(15666),l=e(91052),f=e(14578);class c extends g.XQ{constructor(a={}){super({...a,from:"now-6h",to:"now",value:(0,o.E2)()}),this.addActivationHandler(()=>this._onActivate())}_onActivate(){this._subs.add(this.subscribeToState((a,v)=>{if(a.timeFrom!==v.timeFrom||a.timeShift!==v.timeShift){const{timeInfo:E}=this.getTimeOverride(this.getAncestorTimeRange().state.value);this.setState({timeInfo:E})}}))}ancestorTimeRangeChanged(a){const v=this.getTimeOverride(a.value);this.setState({value:v.timeRange,timeInfo:v.timeInfo})}getTimeOverride(a){const{timeFrom:v,timeShift:E}=this.state,D={timeInfo:"",timeRange:a};if(v){const b=g.jh.interpolate(this,this.state.timeFrom),P=s.describeTextRange(b);if(P.invalid)return D.timeInfo="invalid time override",D;s.isRelativeTimeRange(a.raw)&&(D.timeInfo=P.display,D.timeRange={from:r.parse(P.from),to:r.parse(P.to),raw:{from:P.from,to:P.to}})}if(E){const b=g.jh.interpolate(this,this.state.timeShift);if(s.describeTextRange(b).invalid)return D.timeInfo="invalid timeshift",D;const y="-"+b;D.timeInfo+=" timeshift "+y;const T=r.parseDateMath(y,D.timeRange.from,!1),M=r.parseDateMath(y,D.timeRange.to,!0);D.timeRange={from:T,to:M,raw:{from:T,to:M}}}return D}}c.Component=h;function h({model:m}){const{timeInfo:a,hideTimeOverride:v}=m.useState(),E=(0,u.of)(p);return!a||v?null:n.createElement(d.m,{content:n.createElement(i.xS,{timeRange:m.state.value,timeZone:m.getTimeZone()})},n.createElement(l.NR.TitleItem,{className:E.timeshift},n.createElement(f.I,{name:"clock-nine",size:"sm"})," ",a))}const p=m=>({timeshift:(0,t.css)({color:m.colors.text.link,gap:m.spacing(.5),whiteSpace:"nowrap"})})},79284:(Y,A,e)=>{"use strict";e.d(A,{L:()=>s});var t=e(79065),n=e(74730),o=e(30195);class s extends t.Bs{constructor(l){super(l),this._variableDependency=new t.Sh(this,{variableNames:[this.state.variableName],onVariableUpdateCompleted:this._onVariableUpdateCompleted.bind(this)}),this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){this._performRepeat()}_onVariableUpdateCompleted(){this._performRepeat()}_performRepeat(){if(this._variableDependency.hasDependencyInLoadingState())return;const l=t.jh.lookupVariable(this.state.variableName,this.parent?.parent);if(!l){console.error("RepeatedRowBehavior: Variable not found");return}if(!(l instanceof t.n8)){console.error("RepeatedRowBehavior: Variable is not a MultiValueVariable");return}if(!(this.parent instanceof t.tI)){console.error("RepeatedRowBehavior: Parent is not a SceneGridRow");return}const f=t.jh.getLayout(this);if(!(f instanceof t.hy)){console.error("RepeatedRowBehavior: Layout is not a SceneGridLayout");return}const c=this.parent,{values:h,texts:p}=(0,n.a7)(l),m=[],a=r(this.state.sources);let v=0;for(let E=0;E<h.length;E++){const D=[];for(const P of this.state.sources){const T=(P.state.y??0)+(a+1)*E,M=P.clone({key:`${P.state.key}-clone-${E}`,y:T});d(M,E),D.push(M),v<T+M.state.height&&(v=T+M.state.height)}const b=this.getRowClone(c,E,h[E],p[E],a,D);m.push(b)}g(f,m,v,c),this.publishEvent(new o.d({source:this}),!0)}getRowClone(l,f,c,h,p,m){if(f===0)return l.setState({$variables:new t.Pj({variables:[new t.xc({name:this.state.variableName,value:c,text:String(h)})]}),children:m}),l;const a=l.state.y??0;return l.clone({key:`${l.state.key}-clone-${f}`,$variables:new t.Pj({variables:[new t.xc({name:this.state.variableName,value:c,text:String(h)})]}),$behaviors:[],children:m,y:a+p*f+f})}}function r(i){let l=0,f=Number.MAX_VALUE;for(const c of i)c.state.y+c.state.height>l&&(l=c.state.y+c.state.height),c.state.y<f&&(f=c.state.y);return l-f}function g(i,l,f,c){const h=u(i,c),p=h.indexOf(c);if(p===-1)throw new Error("RowRepeaterBehavior: Parent row not found in layout children");const m=[...h.slice(0,p),...l,...h.slice(p+1)];if(h.length>p+1){const a=h.slice(p+1),v=a[0].state.y,E=f-v;for(const D of a)D.state.y<f&&D.setState({y:D.state.y+E})}i.setState({children:m})}function u(i,l){return i.state.children.filter(f=>!f.state.key?.startsWith(`${l.state.key}-clone-`))}function d(i,l){i.forEachChild(f=>{f.setState({key:`${f.state.key}-row-${l}`}),d(f,l)})}},30195:(Y,A,e)=>{"use strict";e.d(A,{d:()=>n});var t=e(65463);class n extends t.x{}n.type="dashboard-repeats-processed"},71176:(Y,A,e)=>{"use strict";e.d(A,{X:()=>n});var t=e(79422);function n(o){const s={meta:{canStar:!1,canShare:!1,canDelete:!1,isNew:!0,folderUid:""},dashboard:{...t.Ye,uid:"",title:"New dashboard",panels:[]}};return o&&(s.meta.folderUid=o),s}},13989:(Y,A,e)=>{"use strict";e.d(A,{O:()=>n});var t=e(79065);function n(o){const s=[];for(const r of o){if(!(r instanceof t.tV.g))continue;const g={...r.state.query,enable:!!r.state.isEnabled,hide:!!r.state.isHidden};s.push(g)}return s}},53287:(Y,A,e)=>{"use strict";e.d(A,{C:()=>g});var t=e(32264),n=e(79065),o=e(79422),s=e(73134),r=e(74730);function g(u){const d=[];for(const i of u.state.variables){const l={name:i.state.name,label:i.state.label,description:i.state.description??void 0,skipUrlSync:!!i.state.skipUrlSync,hide:i.state.hide||o.zL.dontHide,type:i.state.type};if(n.Go.isQueryVariable(i))d.push({...l,current:{value:i.state.value,text:i.state.text},options:[],query:i.state.query,definition:i.state.definition,datasource:i.state.datasource,sort:i.state.sort,refresh:i.state.refresh,regex:i.state.regex,allValue:i.state.allValue,includeAll:i.state.includeAll,multi:i.state.isMulti,skipUrlSync:i.state.skipUrlSync});else if(n.Go.isCustomVariable(i))d.push({...l,current:{text:i.state.value,value:i.state.value},options:[],query:i.state.query,multi:i.state.isMulti,allValue:i.state.allValue,includeAll:i.state.includeAll});else if(n.Go.isDataSourceVariable(i))d.push({...l,current:{value:i.state.value,text:i.state.text},options:[],regex:i.state.regex,refresh:s.CO.onDashboardLoad,query:i.state.pluginId,multi:i.state.isMulti,allValue:i.state.allValue,includeAll:i.state.includeAll});else if(n.Go.isConstantVariable(i))d.push({...l,current:{value:i.state.value,text:i.state.value},query:i.state.value,hide:o.zL.hideVariable});else if(n.Go.isIntervalVariable(i)){const f=(0,r.bx)(i.state.intervals);d.push({...l,current:{text:i.state.value,value:i.state.value},query:f,refresh:i.state.refresh,auto:i.state.autoEnabled,auto_min:i.state.autoMinInterval,auto_count:i.state.autoStepCount})}else if(n.Go.isTextBoxVariable(i))d.push({...l,current:{text:i.state.value,value:i.state.value},query:i.state.value});else if(n.Go.isGroupByVariable(i)&&t.$.featureToggles.groupByVariable)d.push({...l,datasource:i.state.datasource,options:i.state.defaultOptions?.map(f=>({text:f.text,value:String(f.value)})),current:{text:i.state.text,value:i.state.value}});else if(n.Go.isAdHocVariable(i))d.push({...l,name:i.state.name,type:"adhoc",datasource:i.state.datasource,baseFilters:i.state.baseFilters,filters:i.state.filters});else throw new Error("Unsupported variable type")}for(const i of d)i.hide===o.zL.dontHide&&delete i.hide,i.skipUrlSync||delete i.skipUrlSync,i.label===""&&delete i.label,i.multi||delete i.multi,i.sort===s.ZG.disabled&&delete i.sort;return d}},64468:(Y,A,e)=>{"use strict";e.d(A,{tt:()=>q,EH:()=>ae,wM:()=>k});var t=e(32264),n=e(79065),o=e(34214),s=e(16833),r=e(91309),g=e(38477),u=e(48548),d=e(96540),i=e(80997),l=e(13544),f=e(56034),c=e(52424),h=e(6923),p=e(4588),m=e(74730);class a extends n.Bs{}a.Component=v;function v({model:ie}){const{links:ge,uid:ve}=(0,m.YQ)(ie).useState();return!ge||!ve?null:d.createElement(d.Fragment,null,ge.map((ye,pe)=>{const le=(0,h.mQ)().getAnchorInfo(ye),Me=`${ye.title}-$${pe}`;if(ye.type==="dashboards")return d.createElement(c.aK,{key:Me,link:ye,linkInfo:le,dashboardUID:ve});const De=p.G[ye.icon],Re=d.createElement(c.Zx,{icon:De,href:(0,i.Jf)(le.href),target:ye.targetBlank?"_blank":void 0,rel:"noreferrer","data-testid":l.Tp.components.DashboardLinks.link},le.title);return d.createElement("div",{key:Me,"data-testid":l.Tp.components.DashboardLinks.container},ye.tooltip?d.createElement(f.m,{content:le.tooltip},Re):Re)}))}class E{constructor(ge,ve){this._sceneObject=ve,this.state={name:ge,type:"dashboard_macro"}}getValue(ge){const ve=(0,m.YQ)(this._sceneObject);switch(ge){case"uid":return ve.state.uid||"";case"title":case"name":case"id":default:return ve.state.title}}getValueText(){return""}}function D(){const ie=n.Go.registerVariableMacro("__dashboard",E);return()=>ie()}var b=e(36043),P=e(60656),y=e(42397),T=e(98184),M=e(2038);class I extends n.Bs{constructor(){super({}),this.onActivate=()=>{const ge=this.parent;if(!ge||!(ge instanceof n.Eb))throw new Error("PanelNotices can be used only as title items for VizPanel")},this.addActivationHandler(this.onActivate)}getPanel(){const ge=this.parent;return ge&&ge instanceof n.Eb?ge:null}}I.Component=x;function x({model:ie}){const ge=ie.getPanel(),ye=n.jh.getData(ie).useState();if(!ge)return null;const pe=(0,m.Cs)(ge);return ye.data?.series?d.createElement(M.Z,{frames:ye.data?.series,panelId:pe}):null}var S=e(11497),O=e(7928),C=e(79284),L=e(41987),U=e(69129),R=e(10154);function B(ie,ge){ge.app=L.Jk.Dashboard,ge.canAddAnnotations=()=>{const ve=(0,m.YQ)(ie);return!H(ve)||!ve.canEditDashboard()?!1:!!ve.state.meta.annotationsPermissions?.dashboard.canAdd},ge.canEditAnnotations=ve=>{const ye=(0,m.YQ)(ie);return ye.canEditDashboard()?ve?!!ye.state.meta.annotationsPermissions?.dashboard.canEdit:!!ye.state.meta.annotationsPermissions?.organization.canEdit:!1},ge.canDeleteAnnotations=ve=>{const ye=(0,m.YQ)(ie);return ye.canEditDashboard()?ve?!!ye.state.meta.annotationsPermissions?.dashboard.canDelete:!!ye.state.meta.annotationsPermissions?.organization.canDelete:!1},ge.onAnnotationCreate=async ve=>{const ye=(0,m.YQ)(ie),pe=ve.from!==ve.to,le={dashboardUID:ye.state.uid,panelId:(0,m.Cs)(ie),isRegion:pe,time:ve.from,timeEnd:pe?ve.to:0,tags:ve.tags,text:ve.description};await(0,R.vJ)(le),W(ye),ge.eventBus.publish(new U.We(le))},ge.onAnnotationUpdate=async ve=>{const ye=(0,m.YQ)(ie),pe=ve.from!==ve.to,le={id:ve.id,dashboardUID:ye.state.uid,panelId:(0,m.Cs)(ie),isRegion:pe,time:ve.from,timeEnd:pe?ve.to:0,tags:ve.tags,text:ve.description};await(0,R.rJ)(le),W(ye),ge.eventBus.publish(new U.We(le))},ge.onAnnotationDelete=async ve=>{await(0,R.Xm)({id:ve}),W((0,m.YQ)(ie)),ge.eventBus.publish(new U.We({id:ve}))},ge.onAddAdHocFilter=ve=>{const ye=(0,m.YQ)(ie),pe=(0,m.un)(ie);if(!pe)return;const le=N(ye,pe.state.datasource);V(le,ve)},ge.onUpdateData=ve=>Promise.resolve(!0),ge.instanceState={legacyPanelId:(0,m.Cs)(ie)}}function H(ie){if(ie.state.$data instanceof n.zr){for(const ge of ie.state.$data.state.layers)if(ge instanceof n.tV.g&&ge.state.isEnabled&&ge.state.query.builtIn)return ge}}function W(ie){const ge=H(ie);ge&&ge.runLayer()}function N(ie,ge){const ve=n.jh.getVariables(ie);for(const pe of ve.state.variables)if(n.Go.isAdHocVariable(pe)){const le=pe.state.datasource;if(le===ge||le?.uid===ge?.uid)return pe}const ye=new n.H9({name:"Filters",datasource:ge});return ve.setState({variables:[...ve.state.variables,ye]}),ye}function V(ie,ge){for(const ve of ie.state.filters)if(ve.key===ge.key){ie.setState({filters:ie.state.filters.map(ye=>ye.key===ge.key?ge:ye)});return}ie.setState({filters:[...ie.state.filters,ge]})}var G=e(96556),_=e(7758),K=e(84423);function j(ie){return function(ve,ye){if(ye.angularPanelCtrl){ve.options={angularOptions:ie.getOptionsToRemember()};return}if(ie.autoMigrateFrom){const pe=K.NB[ie.autoMigrateFrom]!=null,le=ie.getOptionsToRemember(),Me=ie.autoMigrateFrom;if(ye.onPanelTypeChanged){const De=pe?{angular:le}:le.options;Object.assign(ve.options,ye.onPanelTypeChanged(ve,Me,De,ve.fieldConfig))}}}}function k(ie){const ge=new o.G(ie.dashboard,ie.meta,{autoMigrateOldPanels:!1}),ve=ae(ge);return ve.setInitialSaveModel(ie.dashboard),ve}function Q(ie){const ge=[];let ve=null,ye=[];for(const pe of ie)if(pe.type==="row")ve?ve.id!==pe.id&&(ge.push(ee(ve,ye)),ve=pe,ye=[]):pe.collapsed?ge.push(ee(pe,[])):ve=pe;else if(pe.libraryPanel?.uid&&!("model"in pe.libraryPanel)){const le=ne(pe);le&&ge.push(le)}else{const le=q(pe);ve?ye.push(le):ge.push(le)}return ve&&ge.push(ee(ve,ye)),ge}function ee(ie,ge){ie.collapsed&&ie.panels&&(ge=ie.panels.map(pe=>(pe instanceof o.a||(pe=new o.a(pe)),q(pe))));let ve,ye=ge;return ie.repeat&&(ye=[],ve=[new C.L({variableName:ie.repeat,sources:ge})]),new n.tI({key:(0,m.XA)(ie.id),title:ie.title,y:ie.gridPos.y,isCollapsed:ie.collapsed,children:ye,$behaviors:ve})}function ae(ie){let ge,ve=[];if(ie.templating?.list?.length){const le=ie.templating.list.map(Me=>{try{return Z(Me)}catch(De){return console.error(De),null}}).filter(Me=>!!Me);ge=new n.Pj({variables:le})}else ge=new n.Pj({variables:[]});ie.annotations?.list?.length&&!ie.isSnapshot()&&(ve=ie.annotations?.list.map(le=>new g.g({key:`annotations-${le.name}`,query:le,name:le.name,isEnabled:!!le.enable,isHidden:!!le.hide})));let ye=t.$.unifiedAlertingEnabled;return ye||ie.panels.find(le=>!!le.alert)&&(ye=!0),ye&&ve.push(new r.C({key:"alert-states",name:"Alert States"})),new b.H$({title:ie.title,tags:ie.tags||[],links:ie.links||[],uid:ie.uid,id:ie.id,description:ie.description,editable:ie.editable,isDirty:ie.meta.isNew,isEditing:ie.meta.isNew,meta:ie.meta,version:ie.version,body:new n.hy({isLazy:!0,children:Q(ie.panels)}),$timeRange:new n.JZ({from:ie.time.from,to:ie.time.to,fiscalYearStartMonth:ie.fiscalYearStartMonth,timeZone:ie.timezone,weekStart:ie.weekStart,UNSAFE_nowDelay:ie.timepicker?.nowDelay}),$variables:ge,$behaviors:[new n.Gg.K2({sync:ie.graphTooltip}),new n.Gg.Hf,D,re(ie),de],$data:ve.length>0?new n.zr({layers:ve}):void 0,controls:[new u.x({variableControls:[new n.K8({}),new n.i7],timeControls:[new n.KE({}),new n.WM({refresh:ie.refresh,intervals:ie.timepicker.refresh_intervals,withText:!0})],linkControls:new a({}),hideTimeControls:ie.timepicker.hidden})]})}function Z(ie){const ge={name:ie.name,label:ie.label,description:ie.description};if(ie.type==="adhoc")return new n.H9({...ge,description:ie.description,skipUrlSync:ie.skipUrlSync,hide:ie.hide,datasource:ie.datasource,applyMode:"auto",filters:ie.filters??[],baseFilters:ie.baseFilters??[]});if(ie.type==="custom")return new n.yP({...ge,value:ie.current?.value??"",text:ie.current?.text??"",query:ie.query,isMulti:ie.multi,allValue:ie.allValue||void 0,includeAll:ie.includeAll,defaultToAll:!!ie.includeAll,skipUrlSync:ie.skipUrlSync,hide:ie.hide});if(ie.type==="query")return new n.fS({...ge,value:ie.current?.value??"",text:ie.current?.text??"",query:ie.query,datasource:ie.datasource,sort:ie.sort,refresh:ie.refresh,regex:ie.regex,allValue:ie.allValue||void 0,includeAll:ie.includeAll,defaultToAll:!!ie.includeAll,isMulti:ie.multi,skipUrlSync:ie.skipUrlSync,hide:ie.hide,definition:ie.definition});if(ie.type==="datasource")return new n.mI({...ge,value:ie.current?.value??"",text:ie.current?.text??"",regex:ie.regex,pluginId:ie.query,allValue:ie.allValue||void 0,includeAll:ie.includeAll,defaultToAll:!!ie.includeAll,skipUrlSync:ie.skipUrlSync,isMulti:ie.multi,hide:ie.hide});if(ie.type==="interval"){const ve=(0,m.Sm)(ie.query),ye=(0,m.pk)(ie,ve);return new n.Yj({...ge,value:ye,intervals:ve,autoEnabled:ie.auto,autoStepCount:ie.auto_count,autoMinInterval:ie.auto_min,refresh:ie.refresh,skipUrlSync:ie.skipUrlSync,hide:ie.hide})}else{if(ie.type==="constant")return new n.x0({...ge,value:ie.query,skipUrlSync:ie.skipUrlSync,hide:ie.hide});if(ie.type==="textbox")return new n.TS({...ge,value:ie.query,skipUrlSync:ie.skipUrlSync,hide:ie.hide});if(t.$.featureToggles.groupByVariable&&ie.type==="groupby")return new n.ZG({...ge,datasource:ie.datasource,value:ie.current?.value||[],text:ie.current?.text||[],skipUrlSync:ie.skipUrlSync,hide:ie.hide,defaultOptions:ie.options});throw new Error(`Scenes: Unsupported variable type ${ie.type}`)}}function ne(ie){if(!ie.libraryPanel)return null;const ge=new P.F({title:ie.title,uid:ie.libraryPanel.uid,name:ie.libraryPanel.name,key:(0,m.XA)(ie.id)});return new n.M$({body:ge,y:ie.gridPos.y,x:ie.gridPos.x,width:ie.gridPos.w,height:ie.gridPos.h})}function q(ie){const ge=[];ge.push(new y.$({rawLinks:ie.links,menu:new y.m({$behaviors:[T.oV]})})),ge.push(new I);const ve={key:(0,m.XA)(ie.id),title:ie.title,description:ie.description,pluginId:ie.type,options:ie.options??{},fieldConfig:ie.fieldConfig,pluginVersion:ie.pluginVersion,displayMode:ie.transparent?"transparent":void 0,hoverHeader:!ie.title&&!ie.timeFrom&&!ie.timeShift,$data:(0,G.w)(ie),menu:new n.Lw({$behaviors:[T._i]}),titleItems:ge,extendPanelContext:B,_UNSAFE_customMigrationHandler:j(ie)};if((ie.timeFrom||ie.timeShift)&&(ve.$timeRange=new O.v({timeFrom:ie.timeFrom,timeShift:ie.timeShift,hideTimeOverride:ie.hideTimeOverride})),ie.repeat){const pe=ie.repeatDirection??"h";return new S.w({key:`grid-item-${ie.id}`,x:ie.gridPos.x,y:ie.gridPos.y,width:pe==="h"?24:ie.gridPos.w,height:ie.gridPos.h,itemHeight:ie.gridPos.h,source:new n.Eb(ve),variableName:ie.repeat,repeatedPanels:[],repeatDirection:ie.repeatDirection,maxPerRow:ie.maxPerRow})}const ye=new n.Eb(ve);return new n.M$({key:`grid-item-${ie.id}`,x:ie.gridPos.x,y:ie.gridPos.y,width:ie.gridPos.w,height:ie.gridPos.h,body:ye})}const te=()=>{const ie=[];return ge=>{ie.includes(ge)||(ie.push(ge),_.c.panelDescriptionShown())}};function re(ie){return()=>{const ge=_.c.setScenesContext();return(0,s.d)(ie,ie.version),()=>{ge()}}}function de(ie){const ge=te();ie.subscribeToEvent(n.Kw,ve=>{const{interaction:ye}=ve.payload;switch(ye){case"panel-description-shown":ge(ve.payload.origin.state.key||"");break;case"panel-status-message-clicked":_.c.panelStatusMessageClicked();break;case"panel-cancel-query-clicked":_.c.panelCancelQueryClicked();break;case"panel-menu-shown":_.c.panelMenuShown();break}})}},56555:(Y,A,e)=>{"use strict";e.d(A,{ZB:()=>P,Uy:()=>b,c:()=>I});var t=e(2543),n=e(92041),o=e(79065),s=e(79422),r=e(73134),g=e(28874),u=e(18803),d=e(79056),i=e(68706),l=e(48548),f=e(60656),c=e(11497),h=e(7928),p=e(79284),m=e(32023),a=e(74730);const v={name:"grafana",uid:"grafana"};var E=e(13989),D=e(53287);function b(S,O=!1){const C=S.state,L=C.$timeRange.state,U=C.$data,R=C.$variables,B=C.body;let H,W,N=[],V=s.Ye.graphTooltip,G=[];if(B instanceof o.hy){for(const k of B.state.children)if(k instanceof o.M$&&N.push(P(k,O)),k instanceof c.w&&(N=N.concat(T(k,O))),k instanceof o.tI){if(k.state.key.indexOf("-clone-")>0&&!O)continue;M(k,N,O)}}let _=[];if(U instanceof o.zr){const k=U.state.layers;_=(0,E.O)(k)}if(R instanceof o.Pj&&(G=(0,D.C)(R)),C.controls&&C.controls[0]instanceof l.x){W=C.controls[0].state.hideTimeControls;const k=C.controls[0].state.timeControls;for(const Q of k)Q instanceof o.WM&&Q.state.intervals&&(H=Q.state.intervals)}if(C.$behaviors)for(const k of C.$behaviors)k instanceof o.Gg.K2&&(V=k.state.sync);const K=x({refresh_intervals:H,hidden:W,nowDelay:L.UNSAFE_nowDelay},s.lt),j={...s.Ye,title:C.title,description:C.description||void 0,uid:C.uid,id:C.id,editable:C.editable,time:{from:L.from,to:L.to},timepicker:K,panels:N,annotations:{list:_},templating:{list:G},version:C.version,timezone:L.timeZone,fiscalYearStartMonth:L.fiscalYearStartMonth,weekStart:L.weekStart,tags:C.tags,links:C.links,graphTooltip:V,schemaVersion:d.O2};return(0,g.v)(j)}function P(S,O=!1){let C,L=0,U=0,R=0,B=0;if(S instanceof o.M$){if(S.state.body instanceof f.F)return L=S.state.x??0,U=S.state.y??0,R=S.state.width??0,B=S.state.height??0,{id:(0,a.Cs)(S.state.body),title:S.state.body.state.title,gridPos:{x:L,y:U,w:R,h:B},libraryPanel:{name:S.state.body.state.name,uid:S.state.body.state.uid}};if(!(S.state.body instanceof o.Eb))throw new Error("SceneGridItem body expected to be VizPanel");C=S.state.body,L=S.state.x??0,U=S.state.y??0,R=S.state.width??0,B=S.state.height??0}if(S instanceof c.w&&(C=S.state.source,L=S.state.x??0,U=S.state.y??0,R=S.state.width??0,B=S.state.height??0),!C)throw new Error("Unsupported grid item type");const H={id:(0,a.Cs)(C),type:C.state.pluginId,title:C.state.title,gridPos:{x:L,y:U,w:R,h:B},options:C.state.options,fieldConfig:C.state.fieldConfig??{defaults:{},overrides:[]},transformations:[],transparent:C.state.displayMode==="transparent",pluginVersion:C.state.pluginVersion,...y(C,O)},W=C.state.$timeRange;W instanceof h.v&&(H.timeFrom=W.state.timeFrom,H.timeShift=W.state.timeShift,H.hideTimeOverride=W.state.hideTimeOverride),S instanceof c.w&&(H.repeat=S.state.variableName,H.maxPerRow=S.state.maxPerRow,H.repeatDirection=S.getRepeatDirection());const N=m.b.getPanelLinks(C);return H.links=N.state.rawLinks??[],H.links.length===0&&delete H.links,H.transformations?.length===0&&delete H.transformations,H.transparent||delete H.transparent,H}function y(S,O=!1){const C=S.state.$data,L={},U=(0,a.un)(S);if(U&&(L.targets=U.state.queries,L.maxDataPoints=U.state.maxDataPoints,L.datasource=U.state.datasource,U.state.cacheTimeout&&(L.cacheTimeout=U.state.cacheTimeout),U.state.queryCachingTTL&&(L.queryCachingTTL=U.state.queryCachingTTL)),C instanceof o.Es&&(L.transformations=C.state.transformations),C&&O){L.datasource=v;let R=(0,u.B6)(C.state.data);C instanceof o.Es&&(R=(0,u.B6)(C.state.$data.state.data)),L.targets=[{refId:"A",datasource:L.datasource,queryType:i.nj.Snapshot,snapshot:R}]}return L}function T(S,O=!1){if(O){if(S.state.repeatedPanels){const C=S.state.itemHeight??10,L=Math.ceil(S.state.repeatedPanels.length/S.getMaxPerRow()),U=Math.ceil(S.state.repeatedPanels.length/L),R=24/U,B=C;return S.state.repeatedPanels.map((W,N)=>{let V=0,G=0;S.state.repeatDirection==="v"?(V=S.state.x,G=N*B):(V=N%U*R,G=S.state.y+Math.floor(N/U)*B);const _={x:V,y:G,w:R,h:B},K=W.state.$variables.getByName(S.state.variableName);return{id:(0,a.Cs)(W),type:W.state.pluginId,title:W.state.title,gridPos:_,options:W.state.options,fieldConfig:W.state.fieldConfig??{defaults:{},overrides:[]},transformations:[],transparent:W.state.displayMode==="transparent",scopedVars:{[S.state.variableName]:{text:K?.state.text,value:K?.state.value}},...y(W,O)}})}return[]}else return[P(S)]}function M(S,O,C=!1){const L=!!S.state.isCollapsed,U={type:"row",id:(0,a.Cs)(S),title:S.state.title,gridPos:{x:S.state.x??0,y:S.state.y??0,w:S.state.width??24,h:S.state.height??1},collapsed:L,panels:[]};if(S.state.$behaviors?.length){const B=S.state.$behaviors[0];B instanceof p.L&&(U.repeat=B.state.variableName)}if(C&&S.state.$variables){const H=S.state.$variables.state.variables.reduce((W,N)=>({...W,[N.state.name]:{text:N.state.text,value:N.state.value}}),{});U.scopedVars=H}O.push(U);let R=[];C?S.state.children.forEach(B=>{B instanceof c.w?R=R.concat(T(B,!L)):R.push(P(B,!L))}):R=S.state.children.map(B=>P(B)),S.state.isCollapsed?U.panels=R:O.push(...R)}function I(S,O,C,L){let U={...C,title:S,time:{from:O.from.toISOString(),to:O.to.toISOString()},links:[]};if(L){const R=C.panels?.find(B=>B.id===(0,a.Cs)(L));R&&(R.gridPos={w:24,x:0,y:0,h:20},U={...U,panels:[R]})}if(U.panels?.forEach(R=>{"links"in R&&(R.links=[])}),U.annotations){const B=(U.annotations.list?.filter(H=>H.enable)||[]).map(H=>({name:H.name,enable:H.enable,iconColor:H.iconColor,type:H.type,builtIn:H.builtIn,hide:H.hide,snapshotData:[]}));U.annotations.list=B}return U.templating&&U.templating.list?.forEach(R=>{"query"in R&&(R.query=""),"options"in R&&(R.options=R.current&&!(0,n.R)(R.current)?[R.current]:[]),"refresh"in R&&(R.refresh=r.CO.never)}),U}function x(S,O){const C={...S};for(const L in O)(0,t.isEqual)(C[L],O[L])&&delete C[L];return C}},46502:(Y,A,e)=>{"use strict";e.d(A,{F:()=>o});var t=e(96540),n=e(7376);class o extends t.PureComponent{constructor(){super(...arguments),this.ref=null}componentWillUnmount(){this.angularComponent&&this.angularComponent.destroy()}componentDidMount(){this.ref&&this.loadAngular()}componentDidUpdate(r){r.datasource!==this.props.datasource&&this.loadAngular(),this.scopeProps&&this.scopeProps.ctrl.currentAnnotation!==this.props.annotation&&(this.scopeProps.ctrl.ignoreNextWatcherFiring=!0,this.scopeProps.ctrl.currentAnnotation=this.props.annotation,this.angularComponent?.digest())}loadAngular(){this.angularComponent&&(this.angularComponent.destroy(),this.scopeProps=void 0);const r=(0,n.E)(),g='<plugin-component type="annotations-query-ctrl"> </plugin-component>',u={ctrl:{currentDatasource:this.props.datasource,currentAnnotation:this.props.annotation,ignoreNextWatcherFiring:!1}};this.angularComponent=r.load(this.ref,u,g),this.angularComponent.digest(),this.angularComponent.getScope().$watch(()=>{if(u.ctrl.ignoreNextWatcherFiring){u.ctrl.ignoreNextWatcherFiring=!1;return}this.props.onChange(u.ctrl.currentAnnotation)}),this.scopeProps=u}render(){return t.createElement("div",{ref:r=>this.ref=r})}}},65857:(Y,A,e)=>{"use strict";e.d(A,{d:()=>c});var t=e(96540),n=e(88575),o=e(10354),s=e(88323),r=e(79924),g=e(57418),u=e(10880),d=e(55852),i=e(4588);const l=[{value:"dashboards",label:"Dashboards"},{value:"link",label:"Link"}],f=Object.keys(i.G).map(h=>({label:h,value:h}));function c({link:h,onUpdate:p,onGoBack:m}){const a=P=>{p({...h,tags:P})},v=P=>{const y={...h,type:P.value};y.type==="dashboards"?(y.url="",y.tooltip=""):y.tags=[],p(y)},E=P=>{p({...h,icon:P.value})},D=P=>{const y=P.currentTarget;p({...h,[y.name]:y.type==="checkbox"?y.checked:y.value})},b=h.title===i.q.title;return t.createElement("div",{style:{maxWidth:"600px"}},t.createElement(n.D,{label:"Title"},t.createElement(o.p,{name:"title",id:"title",value:h.title,onChange:D,autoFocus:b})),t.createElement(n.D,{label:"Type"},t.createElement(s.l6,{inputId:"link-type-input",value:h.type,options:l,onChange:v})),h.type==="dashboards"&&t.createElement(t.Fragment,null,t.createElement(n.D,{label:"With tags"},t.createElement(r.u,{tags:h.tags,onChange:a}))),h.type==="link"&&t.createElement(t.Fragment,null,t.createElement(n.D,{label:"URL"},t.createElement(o.p,{name:"url",value:h.url,onChange:D})),t.createElement(n.D,{label:"Tooltip"},t.createElement(o.p,{name:"tooltip",value:h.tooltip,onChange:D,placeholder:"Open dashboard"})),t.createElement(n.D,{label:"Icon"},t.createElement(s.l6,{value:h.icon,options:f,onChange:E}))),t.createElement(g.M,{label:"Options",isOpen:!0},h.type==="dashboards"&&t.createElement(n.D,null,t.createElement(u.S,{label:"Show as dropdown",name:"asDropdown",value:h.asDropdown,onChange:D})),t.createElement(n.D,null,t.createElement(u.S,{label:"Include current time range",name:"keepTime",value:h.keepTime,onChange:D})),t.createElement(n.D,null,t.createElement(u.S,{label:"Include current template variable values",name:"includeVars",value:h.includeVars,onChange:D})),t.createElement(n.D,null,t.createElement(u.S,{label:"Open link in new tab",name:"targetBlank",value:h.targetBlank,onChange:D}))),t.createElement(d.$n,{variant:"secondary",onClick:m},"Back to list"))}},6199:(Y,A,e)=>{"use strict";e.d(A,{X:()=>f});var t=e(32196),n=e(96540),o=e(40845),s=e(14578),r=e(66864),g=e(64149),u=e(29158),d=e(91605),i=e(55852),l=e(7521);function f({links:h,onNew:p,onOrderChange:m,onEdit:a,onDuplicate:v,onDelete:E}){const D=(0,o.of)(c);return h.length===0?n.createElement("div",null,n.createElement(l.A,{onClick:p,title:"There are no dashboard links added yet",buttonIcon:"link",buttonTitle:"Add dashboard link",infoBoxTitle:"What are dashboard links?",infoBox:{__html:"<p>Dashboard Links allow you to place links to other dashboards and web sites directly below the dashboard header.</p>"}})):n.createElement(n.Fragment,null,n.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Type"),n.createElement("th",null,"Info"),n.createElement("th",{colSpan:3}))),n.createElement("tbody",null,h.map((P,y)=>n.createElement("tr",{key:`${P.title}-${y}`},n.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>a(y)},n.createElement(s.I,{name:"external-link-alt"})," \xA0 ",P.type),n.createElement("td",{role:"gridcell"},n.createElement(r.Gy,null,P.title&&n.createElement("span",{className:D.titleWrapper},P.title),P.type==="link"&&n.createElement("span",{className:D.urlWrapper},P.url),P.type==="dashboards"&&n.createElement(g.L,{tags:P.tags??[]}))),n.createElement("td",{style:{width:"1%"},role:"gridcell"},y!==0&&n.createElement(u.K,{name:"arrow-up",onClick:()=>m(y,-1),tooltip:"Move link up"})),n.createElement("td",{style:{width:"1%"},role:"gridcell"},h.length>1&&y!==h.length-1?n.createElement(u.K,{name:"arrow-down",onClick:()=>m(y,1),tooltip:"Move link down"}):null),n.createElement("td",{style:{width:"1%"},role:"gridcell"},n.createElement(u.K,{name:"copy",onClick:()=>v(P),tooltip:"Copy link"})),n.createElement("td",{style:{width:"1%"},role:"gridcell"},n.createElement(d.e,{"aria-label":`Delete link with title "${P.title}"`,size:"sm",onConfirm:()=>E(y)})))))),n.createElement(i.$n,{className:D.newLinkButton,icon:"plus",onClick:p},"New link"))}const c=h=>({titleWrapper:(0,t.css)({width:"20vw",textOverflow:"ellipsis",overflow:"hidden"}),urlWrapper:(0,t.css)({width:"40vw",textOverflow:"ellipsis",overflow:"hidden"}),newLinkButton:(0,t.css)({marginTop:h.spacing(3)})})},4588:(Y,A,e)=>{"use strict";e.d(A,{G:()=>n,q:()=>t});const t={icon:"external link",title:"New link",tooltip:"",type:"dashboards",url:"",asDropdown:!1,tags:[],targetBlank:!1,keepTime:!1,includeVars:!1},n={"external link":"external-link-alt",dashboard:"apps",question:"question-circle",info:"info-circle",bolt:"bolt",doc:"file-alt",cloud:"cloud"}},27803:(Y,A,e)=>{"use strict";e.d(A,{Q:()=>u});var t=e(96540),n=e(13544),o=e(88575),s=e(42418),r=e(51612),g=e(58975);function u({datasource:d,infoText:i,onDataSourceChange:l}){return t.createElement(t.Fragment,null,t.createElement(g.Y,null,"Ad-hoc options"),t.createElement(o.D,{label:"Data source",htmlFor:"data-source-picker"},t.createElement(r.s,{current:d,onChange:l,width:30,variables:!0,noDefault:!0})),i?t.createElement(s.F,{title:i,severity:"info","data-testid":n.Tp.pages.Dashboard.Settings.Variables.Edit.AdHocFiltersVariable.infoText}):null)}},95802:(Y,A,e)=>{"use strict";e.d(A,{d:()=>r});var t=e(96540),n=e(13544),o=e(58975),s=e(14329);function r({onChange:g,constantValue:u}){return t.createElement(t.Fragment,null,t.createElement(o.Y,null,"Constant options"),t.createElement(s._,{defaultValue:u,name:"Value",placeholder:"your metric prefix",onBlur:g,testId:n.Tp.pages.Dashboard.Settings.Variables.Edit.ConstantVariable.constantOptionsQueryInputV2,width:30}))}},58711:(Y,A,e)=>{"use strict";e.d(A,{w:()=>g});var t=e(96540),n=e(13544),o=e(58975),s=e(85140),r=e(94618);function g({query:u,multi:d,allValue:i,includeAll:l,onQueryChange:f,onMultiChange:c,onIncludeAllChange:h,onAllValueChange:p}){return t.createElement(t.Fragment,null,t.createElement(o.Y,null,"Custom options"),t.createElement(s.Z,{name:"Values separated by comma",defaultValue:u,placeholder:"1, 10, mykey : myvalue, myvalue, escaped\\,value",onBlur:f,required:!0,width:52,testId:n.Tp.pages.Dashboard.Settings.Variables.Edit.CustomVariable.customValueInput}),t.createElement(o.Y,null,"Selection options"),t.createElement(r.B,{multi:d,includeAll:l,allValue:i,onMultiChange:c,onIncludeAllChange:h,onAllValueChange:p}))}},98917:(Y,A,e)=>{"use strict";e.d(A,{y:()=>u});var t=e(96540),n=e(13544),o=e(94618),s=e(58975),r=e(89458),g=e(14329);function u({query:d,regex:i,optionTypes:l,onChange:f,onRegExBlur:c,multi:h,includeAll:p,allValue:m,onMultiChange:a,onIncludeAllChange:v,onAllValueChange:E}){const D=l.find(b=>b.value===d)??l[0];return t.createElement(t.Fragment,null,t.createElement(s.Y,null,"Data source options"),t.createElement(r.v,{name:"Type",value:D,options:l,onChange:f,testId:n.Tp.pages.Dashboard.Settings.Variables.Edit.DatasourceVariable.datasourceSelect}),t.createElement(g._,{defaultValue:i,name:"Instance name filter",placeholder:"/.*-(.*)-.*/",onBlur:c,description:t.createElement("div",null,"Regex filter for which data source instances to choose from in the variable value list. Leave empty for all.",t.createElement("br",null),t.createElement("br",null),"Example: ",t.createElement("code",null,"/^prod/"))}),t.createElement(s.Y,null,"Selection options"),t.createElement(o.B,{multi:h,includeAll:p,allValue:m,onMultiChange:a,onIncludeAllChange:v,onAllValueChange:E}))}},49317:(Y,A,e)=>{"use strict";e.d(A,{s:()=>i});var t=e(32196),n=e(96540),o=e(13544),s=e(40845),r=e(99615),g=e(58975),u=e(89458),d=e(14329);function i({intervals:f,onIntervalsChange:c,onAutoEnabledChange:h,onAutoMinIntervalChanged:p,onAutoCountChanged:m,autoEnabled:a,autoMinInterval:v,autoStepCount:E}){const D=[1,2,3,4,5,10,20,30,40,50,100,200,300,400,500].map(y=>({label:`${y}`,value:y})),b=(0,s.of)(l),P=D.find(y=>y.value===E)??D[0];return n.createElement(n.Fragment,null,n.createElement(g.Y,null,"Interval options"),n.createElement(d._,{defaultValue:f,name:"Values",placeholder:"1m,10m,1h,6h,1d,7d",onBlur:c,testId:o.Tp.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.intervalsValueInput,width:32,required:!0}),n.createElement(r.c,{value:a,name:"Auto option",description:"Dynamically calculates interval by dividing time range by the count specified",onChange:h,testId:o.Tp.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.autoEnabledCheckbox}),a&&n.createElement("div",{className:b.autoFields},n.createElement(u.v,{name:"Step count",description:"How many times the current time range should be divided to calculate the value",value:P,options:D,onChange:m,width:9,testId:o.Tp.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.stepCountIntervalSelect}),n.createElement(d._,{value:v,name:"Min interval",description:"The calculated value will not go below this threshold",placeholder:"10s",onChange:p,width:11,testId:o.Tp.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.minIntervalInput})))}const l=f=>({autoFields:(0,t.css)({marginTop:f.spacing(2),display:"flex",flexDirection:"column"})})},44890:(Y,A,e)=>{"use strict";e.d(A,{u:()=>M});var t=e(96540),n=e(13544),o=e(88575),s=e(39070),r=e(72574),g=e(90613),u=e(94753),d=e(24240);function i({query:I,datasource:x,VariableQueryEditor:S,onLegacyQueryChange:O,onQueryChange:C,timeRange:L}){let U;return typeof I=="string"?U=I||(x.variables?.getDefaultQuery?.()??""):U={...x.variables?.getDefaultQuery?.(),...I},S&&(0,d.VN)(S,x)?t.createElement(g.a,{marginBottom:2},t.createElement(u.E,{element:"h4"},"Query"),t.createElement(g.a,{marginTop:1},t.createElement(S,{key:x.uid,datasource:x,query:U,templateSrv:(0,r.w)(),onChange:O}))):S&&(0,d.CH)(S,x)?t.createElement(g.a,{marginBottom:2},t.createElement(u.E,{element:"h4"},"Query"),t.createElement(g.a,{marginTop:1},t.createElement(S,{key:x.uid,datasource:x,query:U,onChange:C,onRunQuery:()=>{},data:{series:[],state:s.Gu.Done,timeRange:L},range:L,onBlur:()=>{},history:[]}))):null}var l=e(94618),f=e(51612),c=e(12470),h=e(40845),p=e(94354),m=e(60619);const a=[{label:"On dashboard load",value:c.CO.onDashboardLoad},{label:"On time range change",value:c.CO.onTimeRangeChanged}];function v({onChange:I,refresh:x,testId:S}){const O=(0,h.$j)(),[C,L]=(0,t.useState)(!1);(0,m.Y)({breakpoint:O.breakpoints.values.sm,onChange:R=>{L(!R.matches)}});const U=(0,t.useMemo)(()=>a.find(R=>R.value===x)?.value??a[0].value,[x]);return t.createElement(o.D,{label:"Refresh",description:"When to update the values of this variable","data-testid":S},t.createElement(p.z,{options:a,onChange:I,value:U,size:C?"sm":"md"}))}var E=e(89458),D=e(80484);const b=[{label:"Disabled",value:D.ZG.disabled},{label:"Alphabetical (asc)",value:D.ZG.alphabeticalAsc},{label:"Alphabetical (desc)",value:D.ZG.alphabeticalDesc},{label:"Numerical (asc)",value:D.ZG.numericalAsc},{label:"Numerical (desc)",value:D.ZG.numericalDesc},{label:"Alphabetical (case-insensitive, asc)",value:D.ZG.alphabeticalCaseInsensitiveAsc},{label:"Alphabetical (case-insensitive, desc)",value:D.ZG.alphabeticalCaseInsensitiveDesc},{label:"Natural (asc)",value:D.ZG.naturalAsc},{label:"Natural (desc)",value:D.ZG.naturalDesc}];function P({onChange:I,sort:x,testId:S}){const O=(0,t.useMemo)(()=>b.find(C=>C.value===x)??b[0],[x]);return t.createElement(E.v,{name:"Sort",description:"How to sort the values of this variable",value:O,options:b,onChange:I,testId:S,width:25})}var y=e(58975),T=e(85140);function M({datasource:I,onDataSourceChange:x,query:S,onQueryChange:O,onLegacyQueryChange:C,VariableQueryEditor:L,timeRange:U,regex:R,onRegExChange:B,sort:H,onSortChange:W,refresh:N,onRefreshChange:V,isMulti:G,onMultiChange:_,includeAll:K,onIncludeAllChange:j,allValue:k,onAllValueChange:Q}){return t.createElement(t.Fragment,null,t.createElement(y.Y,null,"Query options"),t.createElement(o.D,{label:"Data source",htmlFor:"data-source-picker"},t.createElement(f.s,{current:I,onChange:x,variables:!0,width:30})),I&&L&&t.createElement(i,{onQueryChange:O,onLegacyQueryChange:C,datasource:I,query:S,VariableQueryEditor:L,timeRange:U}),t.createElement(T.Z,{defaultValue:R??"",name:"Regex",description:t.createElement("div",null,"Optional, if you want to extract part of a series name or metric node segment.",t.createElement("br",null),"Named capture groups can be used to separate the display text and value (",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/variables/filter-variables-with-regex#filter-and-modify-using-named-text-and-value-capture-groups",target:"__blank"},"see examples"),")."),placeholder:"/.*-(?<text>.*)-(?<value>.*)-.*/",onBlur:B,testId:n.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRegExInputV2,width:52}),t.createElement(P,{testId:n.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsSortSelectV2,onChange:W,sort:H}),t.createElement(v,{testId:n.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRefreshSelectV2,onChange:V,refresh:N}),t.createElement(y.Y,null,"Selection options"),t.createElement(l.B,{multi:!!G,includeAll:!!K,allValue:k,onMultiChange:_,onIncludeAllChange:j,onAllValueChange:Q}))}},94618:(Y,A,e)=>{"use strict";e.d(A,{B:()=>g});var t=e(96540),n=e(13544),o=e(66864),s=e(99615),r=e(14329);function g({multi:u,includeAll:d,allValue:i,onMultiChange:l,onIncludeAllChange:f,onAllValueChange:c}){return t.createElement(o.gW,{spacing:"md",height:"inherit"},t.createElement(s.c,{value:u,name:"Multi-value",description:"Enables multiple values to be selected at the same time",onChange:l,testId:n.Tp.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsMultiSwitch}),t.createElement(s.c,{value:d,name:"Include All option",description:"Enables an option to include all variables",onChange:f,testId:n.Tp.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsIncludeAllSwitch}),d&&t.createElement(r._,{defaultValue:i??"",onBlur:c,name:"Custom all value",placeholder:"blank = auto",testId:n.Tp.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsCustomAllInput}))}},99615:(Y,A,e)=>{"use strict";e.d(A,{c:()=>s});var t=e(16792),n=e(96540),o=e(10880);function s({value:r,name:g,description:u,onChange:d,ariaLabel:i,testId:l}){const f=(0,t.Bi)();return n.createElement(o.S,{id:f,label:g,description:u,value:r,onChange:d,"aria-label":i,"data-testid":l})}},8964:(Y,A,e)=>{"use strict";e.d(A,{D:()=>g});var t=e(96540),n=e(12470),o=e(88575),s=e(94354);const r=[{label:"Label and value",value:n.zL.dontHide},{label:"Value",value:n.zL.hideLabel},{label:"Nothing",value:n.zL.hideVariable}];function g({onChange:u,hide:d,type:i}){const l=(0,t.useMemo)(()=>r.find(f=>f.value===d)?.value??r[0].value,[d]);return i==="constant"?null:t.createElement(o.D,{label:"Show on dashboard"},t.createElement(s.z,{options:r,onChange:u,value:l}))}},58975:(Y,A,e)=>{"use strict";e.d(A,{Y:()=>r});var t=e(32196),n=e(96540),o=e(40845),s=e(17408);function r({className:u,...d}){const i=(0,o.of)(g);return n.createElement(s.s,{...d,className:(0,t.cx)(i.legend,u)})}function g(u){return{legend:(0,t.css)({marginTop:u.spacing(3),marginBottom:u.spacing(1)})}}},89458:(Y,A,e)=>{"use strict";e.d(A,{v:()=>g});var t=e(32196),n=e(96540),o=e(40845),s=e(88575),r=e(88323);function g({name:d,description:i,value:l,options:f,onChange:c,testId:h,width:p}){const m=(0,o.of)(u),a=(0,n.useId)(),v=`variable-select-input-${d}-${a}`;return n.createElement(s.D,{label:d,description:i,htmlFor:v},n.createElement(r.l6,{"data-testid":h,inputId:v,onChange:c,value:l,width:p??30,options:f,className:m.selectContainer}))}function u(d){return{selectContainer:(0,t.css)({marginRight:d.spacing(.5)})}}},85140:(Y,A,e)=>{"use strict";e.d(A,{$:()=>d,Z:()=>u});var t=e(32196),n=e(16792),o=e(96540),s=e(40845),r=e(88575),g=e(21744);function u({value:i,defaultValue:l,name:f,description:c,placeholder:h,onChange:p,onBlur:m,ariaLabel:a,required:v,width:E,testId:D}){const b=(0,s.of)(d),P=(0,n.Bi)();return o.createElement(r.D,{label:f,description:c,htmlFor:P},o.createElement(g.f,{id:P,rows:2,value:i,defaultValue:l,onChange:p,onBlur:m,placeholder:h,required:v,"aria-label":a,cols:E,className:b.textarea,"data-testid":D}))}function d(i){return{textarea:(0,t.css)({whiteSpace:"pre-wrap",minHeight:i.spacing(4),height:"auto",overflow:"auto",padding:`${i.spacing(.75)} ${i.spacing(1)}`,width:"inherit",[i.breakpoints.down("sm")]:{width:"100%"}})}}},14329:(Y,A,e)=>{"use strict";e.d(A,{_:()=>r});var t=e(16792),n=e(96540),o=e(88575),s=e(10354);function r({value:g,defaultValue:u,name:d,placeholder:i="",onChange:l,testId:f,width:c,required:h,onBlur:p,grow:m,description:a,invalid:v,error:E,maxLength:D}){const b=(0,t.Bi)(d);return n.createElement(o.D,{label:d,description:a,invalid:v,error:E,htmlFor:b},n.createElement(s.p,{type:"text",id:b,placeholder:i,value:g,defaultValue:u,onChange:l,onBlur:p,width:m?void 0:c??30,"data-testid":f,maxLength:D,required:h}))}},41820:(Y,A,e)=>{"use strict";e.d(A,{j:()=>d});var t=e(32196),n=e(96540),o=e(13544),s=e(40845),r=e(39268),g=e(76892),u=e(55852);const d=({options:l})=>{const[f,c]=(0,n.useState)(20),[h,p]=(0,n.useState)([]),m=(0,n.useCallback)(v=>{v.preventDefault(),c(f+20)},[f,c]),a=(0,s.of)(i);return(0,n.useEffect)(()=>p(l.slice(0,f)),[f,l]),h.length?n.createElement("div",{style:{display:"flex",flexDirection:"column",marginTop:"16px"}},n.createElement("h5",null,"Preview of values"),n.createElement(r.C,null,h.map((v,E)=>n.createElement(r.C,{key:`${v.value}-${E}`,className:a.optionContainer},n.createElement(g.c,{"data-testid":o.Tp.pages.Dashboard.Settings.Variables.Edit.General.previewOfValuesOption},n.createElement("div",{className:a.label},v.label))))),l.length>f&&n.createElement(r.C,{className:a.optionContainer},n.createElement(u.$n,{onClick:m,variant:"secondary",size:"sm","aria-label":"Variable editor Preview of Values Show More link"},"Show more"))):null};d.displayName="VariableValuesPreview";function i(l){return{wrapper:(0,t.css)({display:"flex",flexDirection:"column",marginTop:l.spacing(2)}),optionContainer:(0,t.css)({marginLeft:l.spacing(.5),marginBottom:l.spacing(.5)}),label:(0,t.css)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"50vw"})}}},19626:(Y,A,e)=>{"use strict";e.d(A,{D:()=>c});var t=e(32196),n=e(2543),o=e(96540),s=e(40845),r=e(14578);const g=({diff:p})=>{const m=(0,s.of)(u),a=!(0,n.isUndefined)(p.originalValue)&&!(0,n.isArray)(p.originalValue)&&!(0,n.isObject)(p.originalValue),v=!(0,n.isUndefined)(p.value)&&!(0,n.isArray)(p.value)&&!(0,n.isObject)(p.value);return o.createElement(o.Fragment,null,a&&o.createElement("span",{className:m},String(p.originalValue)),a&&v?o.createElement(r.I,{name:"arrow-right"}):null,v&&o.createElement("span",{className:m},String(p.value)))},u=p=>(0,t.css)({backgroundColor:p.colors.action.hover,borderRadius:p.shape.radius.default,color:p.colors.text.primary,fontSize:p.typography.body.fontSize,margin:p.spacing(0,.5),padding:p.spacing(.25,.5)});var d=e(56596);const i={op:"replace",originalValue:void 0,path:[""],value:void 0,startLineNumber:0},l=({diff:p,title:m})=>{const a=(0,s.of)(f);return p?o.createElement(o.Fragment,null,o.createElement(r.I,{type:"mono",name:"circle",className:a[p.op],size:"xs"})," ",o.createElement("span",{className:a.embolden},m)," ",o.createElement("span",null,(0,d.Fl)(p,p.path.length>1))," ",o.createElement(g,{diff:p})):o.createElement("div",{className:a.withoutDiff},o.createElement(r.I,{type:"mono",name:"circle",className:a.replace,size:"xs"})," ",o.createElement("span",{className:a.embolden},m)," ",o.createElement("span",null,(0,d.Fl)(i,!1)))},f=p=>({embolden:(0,t.css)({fontWeight:p.typography.fontWeightBold}),add:(0,t.css)({color:p.colors.success.main}),replace:(0,t.css)({color:p.colors.success.main}),move:(0,t.css)({color:p.colors.success.main}),copy:(0,t.css)({color:p.colors.success.main}),_get:(0,t.css)({color:p.colors.success.main}),test:(0,t.css)({color:p.colors.success.main}),remove:(0,t.css)({color:p.colors.success.main}),withoutDiff:(0,t.css)({marginBottom:p.spacing(1)})}),c=({diffs:p,title:m})=>{const a=(0,s.of)(h);return p.length===1?o.createElement("div",{className:a.container,"data-testid":"diffGroup"},o.createElement(l,{title:m,diff:p[0]})):o.createElement("div",{className:a.container,"data-testid":"diffGroup"},o.createElement(l,{title:m}),o.createElement("ul",{className:a.list},p.map((v,E)=>o.createElement("li",{className:a.listItem,key:`${(0,n.last)(v.path)}__${E}`},o.createElement("span",null,(0,d.Fl)(v))," ",o.createElement(g,{diff:v})))))},h=p=>({container:(0,t.css)({}),list:(0,t.css)({marginLeft:p.spacing(4)}),listItem:(0,t.css)({marginBottom:p.spacing(1),"&:last-child":{marginBottom:0}})})},22764:(Y,A,e)=>{"use strict";e.d(A,{M:()=>u});var t=e(32196),n=e(96540),o=e(24773),s=e.n(o),r=e(84140),g=e(40845);const u=({oldValue:d,newValue:i})=>{const l=(0,g.$j)(),f={variables:{dark:{diffViewerBackground:l.colors.background.canvas,diffViewerColor:l.colors.text.primary,addedBackground:(0,r.A)(l.v1.palette.greenShade).setAlpha(.3).toString(),addedColor:"white",removedBackground:(0,r.A)(l.v1.palette.redShade).setAlpha(.3).toString(),removedColor:"white",wordAddedBackground:(0,r.A)(l.v1.palette.greenBase).setAlpha(.4).toString(),wordRemovedBackground:(0,r.A)(l.v1.palette.redBase).setAlpha(.4).toString(),addedGutterBackground:(0,r.A)(l.v1.palette.greenShade).setAlpha(.2).toString(),removedGutterBackground:(0,r.A)(l.v1.palette.redShade).setAlpha(.2).toString(),gutterBackground:l.colors.background.primary,gutterBackgroundDark:l.colors.background.primary,highlightBackground:(0,r.A)(l.colors.primary.main).setAlpha(.4).toString(),highlightGutterBackground:(0,r.A)(l.colors.primary.shade).setAlpha(.2).toString(),codeFoldGutterBackground:l.colors.background.secondary,codeFoldBackground:l.colors.background.secondary,emptyLineBackground:l.colors.background.secondary,gutterColor:l.colors.text.disabled,addedGutterColor:l.colors.text.primary,removedGutterColor:l.colors.text.primary,codeFoldContentColor:l.colors.text.disabled,diffViewerTitleBackground:l.colors.background.secondary,diffViewerTitleColor:l.colors.text.disabled,diffViewerTitleBorderColor:l.colors.border.strong}},codeFold:{fontSize:l.typography.bodySmall.fontSize},gutter:{pre:{color:(0,r.A)(l.colors.text.disabled).setAlpha(1).toString(),opacity:.61}}};return n.createElement("div",{className:(0,t.css)({fontSize:l.typography.bodySmall.fontSize,pre:{all:"revert"}})},n.createElement(s(),{styles:f,oldValue:d,newValue:i,splitView:!1,compareMethod:o.DiffMethod.CSS,useDarkTheme:l.isDark}))}},57714:(Y,A,e)=>{"use strict";e.d(A,{Cc:()=>C,me:()=>D,bS:()=>p,rJ:()=>T,wL:()=>o});var t=e(17172);class n{getHistoryList(R,B){return typeof R!="string"?Promise.resolve([]):(0,t.AI)().get(`api/dashboards/uid/${R}/versions`,B)}getDashboardVersion(R,B){return typeof R!="string"?Promise.resolve({}):(0,t.AI)().get(`api/dashboards/uid/${R}/versions/${B}`)}restoreDashboard(R,B){if(typeof R!="string")return Promise.resolve({});const H=`api/dashboards/uid/${R}/restore`;return(0,t.AI)().post(H,{version:B})}}const o=new n;var s=e(32196),r=e(96540),g=e(40845),u=e(10880),d=e(78369),i=e(71678),l=e(55852),f=e(96374),c=e(3169);const h=({hideModal:U,onRestore:R,version:B})=>{const H=(0,c._2)(),W=async()=>{await R(B)?H.success("Dashboard restored",`Restored from version ${B.version}`):H.error("Dashboard restore failed",`Failed to restore from version ${B.version}`),U()};return r.createElement(f.u,{isOpen:!0,title:"Restore Version",icon:"history",onDismiss:U,onConfirm:W,body:r.createElement("p",null,"Are you sure you want to restore the dashboard to version ",B.version,"? All unsaved changes will be lost."),confirmText:`Yes, restore to version ${B.version}`})},p=({versions:U,canCompare:R,onCheck:B,onRestore:H})=>{const W=(0,g.of)(m);return r.createElement("div",{className:W.margin},r.createElement("table",{className:"filter-table"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{className:"width-4"}),r.createElement("th",{className:"width-4"},"Version"),r.createElement("th",{className:"width-14"},"Date"),r.createElement("th",{className:"width-10"},"Updated by"),r.createElement("th",null,"Notes"),r.createElement("th",null))),r.createElement("tbody",null,U.map((N,V)=>r.createElement("tr",{key:N.id},r.createElement("td",null,r.createElement(u.S,{"aria-label":`Toggle selection of version ${N.version}`,className:(0,s.css)({display:"inline"}),checked:N.checked,onChange:G=>B(G,N.id),disabled:!N.checked&&R})),r.createElement("td",null,N.version),r.createElement("td",null,N.createdDateString),r.createElement("td",null,N.createdBy),r.createElement("td",null,N.message),r.createElement("td",{className:"text-right"},V===0?r.createElement(d.v,{name:"Latest",colorIndex:17}):r.createElement(i.$s,null,({showModal:G,hideModal:_})=>r.createElement(l.$n,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{G(h,{version:N,hideModal:_,onRestore:H})}},"Restore"))))))))};function m(U){return{margin:(0,s.css)({marginBottom:U.spacing(4)})}}var a=e(2543),v=e(29158),E=e(14578);const D=({onClick:U=a.noop,baseVersion:R=0,newVersion:B=0,isNewLatest:H=!1})=>{const W=(0,g.of)(b);return r.createElement("h3",{className:W.header},r.createElement(v.K,{name:"arrow-left",size:"xl",onClick:U,tooltip:"Reset version"}),r.createElement("span",null,"Comparing ",R," ",r.createElement(E.I,{name:"arrows-h"})," ",B," ",H&&r.createElement("cite",{className:"muted"},"(Latest)")))},b=U=>({header:(0,s.css)({fontSize:U.typography.h3.fontSize,display:"flex",gap:U.spacing(2),marginBottom:U.spacing(2)})});var P=e(67061),y=e(56034);const T=({hasMore:U,canCompare:R,getVersions:B,getDiff:H,isLastPage:W})=>r.createElement(P.B,null,U&&r.createElement(l.$n,{type:"button",onClick:()=>B(!0),variant:"secondary",disabled:W},"Show more versions"),r.createElement(y.m,{content:"Select two versions to start comparing",placement:"bottom"},r.createElement(l.$n,{type:"button",disabled:!R,onClick:H,icon:"code-branch"},"Compare versions")));var M=e(90613),I=e(57418),x=e(19626),S=e(22764),O=e(56596);const C=({baseInfo:U,newInfo:R,diffData:B,isNewLatest:H,onRestore:W})=>{const N=(0,O.G4)(B.lhs,B.rhs),V=(0,g.of)(L);return r.createElement(P.B,{direction:"column",gap:1},r.createElement(P.B,{justifyContent:"space-between",alignItems:"center"},r.createElement(P.B,{alignItems:"center"},r.createElement("span",{className:(0,s.cx)(V.versionInfo,V.noMarginBottom)},r.createElement("strong",null,"Version ",U.version)," updated by ",U.createdBy," ",U.ageString,U.message),r.createElement(E.I,{name:"arrow-right",size:"sm"}),r.createElement("span",{className:V.versionInfo},r.createElement("strong",null,"Version ",R.version)," updated by ",R.createdBy," ",R.ageString,R.message)),H&&r.createElement(i.$s,null,({showModal:G,hideModal:_})=>r.createElement(l.$n,{variant:"destructive",icon:"history",onClick:()=>{G(h,{version:U,onRestore:W,hideModal:_})}},"Restore to version ",U.version))),Object.entries(N).map(([G,_])=>r.createElement(x.D,{diffs:_,key:G,title:G})),r.createElement(M.a,{paddingTop:2},r.createElement(I.M,{isOpen:!1,label:"View JSON Diff"},r.createElement(S.M,{oldValue:JSON.stringify(B.lhs,null,2),newValue:JSON.stringify(B.rhs,null,2)}))))},L=U=>({versionInfo:(0,s.css)({color:U.colors.text.secondary,fontSize:U.typography.bodySmall.fontSize}),noMarginBottom:(0,s.css)({marginBottom:0})})},56596:(Y,A,e)=>{"use strict";e.d(A,{Fl:()=>g,G4:()=>r});var t=e(54949),n=e(25504),o=e(2543),s=e.n(o);const r=(i,l)=>{const f=(0,t.UD)(i,l),c=n.stringify(i,null,2),h=n.stringify(l,null,2),p=v=>v.map(E=>{let D,b,P=0;const y=(0,o.tail)(E.path.split("/"));return E.op==="replace"&&h.pointers[E.path]&&(D=(0,o.get)(i,y),b=E.value,P=h.pointers[E.path].value.line),E.op==="add"&&h.pointers[E.path]&&(b=E.value,P=h.pointers[E.path].value.line),E.op==="remove"&&c.pointers[E.path]&&(D=(0,o.get)(i,y),P=c.pointers[E.path].value.line),{op:E.op,value:b,path:y,originalValue:D,startLineNumber:P}}),m=v=>(0,o.sortBy)(v,"startLineNumber"),a=v=>v.reduce((E,D)=>{const b=D.path[0];return E[b]||(E[b]=[]),E[b].push(D),E},{});return(0,o.flow)([p,m,a])(f)},g=(i,l=!0)=>{const f=(0,o.last)(i.path),c=u(f),h=i.op==="remove"?i.originalValue:i.value;let p=d(i.op);return l&&(c?p+=` item ${f}`:(0,o.isArray)(h)&&!(0,o.isEmpty)(h)?p+=` ${h.length} ${f}`:p+=` ${f}`),p},u=i=>!(0,o.isNaN)((0,o.toNumber)(i)),d=i=>i==="add"?"added":i==="remove"?"deleted":"changed"},58441:(Y,A,e)=>{"use strict";e.d(A,{Z:()=>_e});var t=e(96540),n=e(32264),o=e(79065),s=e(25897),r=e(37390),g=e(40980),u=e(10096),d=e(44836),i=e(72254),l=e(7758),f=e(74730),c=e(4213),h=e.n(c),p=e(16817),m=e(70713),a=e(66864),v=e(88575),E=e(15292),D=e(55852),b=e(32372),P=e(10534),y=e(15858),T=e(22699),M=e(34214),I=e(56555);const x=(0,d.t)("share-modal.export.share-externally-label","Export for sharing externally");class S extends o.Bs{constructor($e){super({isSharingExternally:!1,isViewingJSON:!1,...$e}),this.tabId=T.wr.export,this._exporter=new y.M,this.onShareExternallyChange=()=>{this.setState({isSharingExternally:!this.state.isSharingExternally})},this.onViewJSON=()=>{this.setState({isViewingJSON:!this.state.isViewingJSON})}}getTabLabel(){return(0,d.t)("share-modal.tab-title.export","Export")}getClipboardText(){}async getExportableDashboardJson(){const{dashboardRef:$e,isSharingExternally:it}=this.state,at=(0,I.Uy)($e.resolve());return it?await this._exporter.makeExportable(new M.G(at)):at}async onSaveAsFile(){const $e=await this.getExportableDashboardJson(),it=JSON.stringify($e,null,2),{isSharingExternally:at}=this.state,ht=new Blob([it],{type:"application/json;charset=utf-8"}),ft=new Date().getTime();let gt="dashboard";"title"in $e&&$e.title&&(gt=$e.title),h()(ht,`${gt}-${ft}.json`),l.c.exportDownloadJsonClicked({externally:at})}}S.Component=O;function O({model:We}){const{isSharingExternally:$e,isViewingJSON:it,modalRef:at}=We.useState(),ht=(0,p.A)(async()=>{if(it){const ft=await We.getExportableDashboardJson();return JSON.stringify(ft,null,2)}return""},[it]);return t.createElement(t.Fragment,null,!it&&t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(d.x6,{i18nKey:"share-modal.export.info-text"},"Export this dashboard.")),t.createElement(a.gW,{spacing:"md"},t.createElement(v.D,{label:x},t.createElement(E.d,{id:"share-externally-toggle",value:$e,onChange:We.onShareExternallyChange}))),t.createElement(r.a.ButtonRow,null,t.createElement(D.$n,{variant:"secondary",onClick:()=>{at?.resolve().onDismiss()},fill:"outline"},t.createElement(d.x6,{i18nKey:"share-modal.export.cancel-button"},"Cancel")),t.createElement(D.$n,{variant:"secondary",icon:"brackets-curly",onClick:We.onViewJSON},t.createElement(d.x6,{i18nKey:"share-modal.export.view-button"},"View JSON")),t.createElement(D.$n,{variant:"primary",icon:"save",onClick:()=>We.onSaveAsFile()},t.createElement(d.x6,{i18nKey:"share-modal.export.save-button"},"Save to file")))),it&&t.createElement(t.Fragment,null,t.createElement(m.Ay,{disableHeight:!0},({width:ft})=>ht.value?t.createElement(b.B,{value:ht.value??"",language:"json",showMiniMap:!1,height:"500px",width:ft}):ht.loading?t.createElement("div",null,"Loading..."):null),t.createElement(r.a.ButtonRow,null,t.createElement(D.$n,{variant:"secondary",fill:"outline",onClick:We.onViewJSON,icon:"arrow-left"},t.createElement(d.x6,{i18nKey:"share-modal.export.back-button"},"Back to export config")),t.createElement(P.b,{variant:"secondary",icon:"copy",disabled:ht.loading,getText:()=>ht.value??""},t.createElement(d.x6,{i18nKey:"share-modal.view-json.copy-button"},"Copy to Clipboard")),t.createElement(D.$n,{variant:"primary",icon:"save",disabled:ht.loading,onClick:()=>We.onSaveAsFile()},t.createElement(d.x6,{i18nKey:"share-modal.export.save-button"},"Save to file")))))}var C=e(86394),L=e(11497);class U extends o.Bs{constructor(){super(...arguments),this.tabId=T.wr.libraryPanel}getTabLabel(){return(0,d.t)("share-modal.tab-title.library-panel","Library panel")}}U.Component=R;function R({model:We}){const{panelRef:$e,dashboardRef:it,modalRef:at}=We.useState();if(!$e)return null;const ht=$e.resolve();if(ht.parent instanceof o.M$||ht.parent instanceof L.w){const ft=it.resolve(),gt=(0,I.ZB)(ht.parent),Dt=new M.a(gt),It=(0,I.Uy)(ft),jt=new M.G(It);return t.createElement(C.j,{initialFolderUid:ft.state.meta.folderUid,dashboard:jt,panel:Dt,onDismiss:()=>{at?.resolve().onDismiss()}})}return null}var B=e(47232),H=e(13544),W=e(12131),N=e(84167),V=e(10354),G=e(14578),_=e(42418),K=e(7030),j=e(87895),k=e(11982);class Q extends o.Bs{constructor($e){super({...$e,useLockedTime:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""}),this.tabId=T.wr.link,this.onToggleLockedTime=()=>{this.setState({useLockedTime:!this.state.useLockedTime}),this.buildUrl()},this.onUrlShorten=()=>{this.setState({useShortUrl:!this.state.useShortUrl}),this.buildUrl()},this.onThemeChange=it=>{this.setState({selectedTheme:it}),this.buildUrl()},this.getShareUrl=()=>this.state.shareUrl,this.addActivationHandler(()=>{this.buildUrl()})}async buildUrl(){const{panelRef:$e,dashboardRef:it,useLockedTime:at,useShortUrl:ht,selectedTheme:ft}=this.state,gt=it.resolve(),Dt=$e?.resolve(),It=W.Ny.getLocation(),jt=o.jh.getTimeRange(Dt??gt),Vt={};Dt&&(Vt.viewPanel=Dt.state.key),at&&(Vt.from=jt.state.value.from.toISOString(),Vt.to=jt.state.value.to.toISOString()),ft!=="current"&&(Vt.theme=ft);let _t=(0,k.uZ)({uid:gt.state.uid,slug:gt.state.meta.slug,currentQueryParams:It.search,updateQuery:Vt,absolute:!0});ht&&(_t=await(0,K.f)(_t));let rt=Vt;Dt&&(delete rt.viewPanel,rt.panelId=Dt.state.key,rt["__feature.dashboardSceneSolo"]=!0);const St=(0,k.uZ)({uid:gt.state.uid,currentQueryParams:It.search,updateQuery:{...Vt,panelId:Dt?.state.key},absolute:!0,soloRoute:!0,render:!0,timeZone:ae(jt.getTimeZone())});this.setState({shareUrl:_t,imageUrl:St})}getTabLabel(){return(0,d.t)("share-modal.tab-title.link","Link")}onCopy(){l.c.shareLinkCopied({currentTimeRange:this.state.useLockedTime,theme:this.state.selectedTheme,shortenURL:this.state.useShortUrl})}}Q.Component=ee;function ee({model:We}){const $e=We.useState(),{panelRef:it,dashboardRef:at}=$e,ht=at.resolve(),ft=it?.resolve(),Dt=o.jh.getTimeRange(ft??ht).state.to==="now",{useLockedTime:It,useShortUrl:jt,selectedTheme:Vt,shareUrl:_t,imageUrl:rt}=$e,St=H.Tp.pages.SharePanelModal,pn=!!ht.state.uid,ct=(0,d.t)("share-modal.link.time-range-label","Lock time range"),Ct=(0,d.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),Yt=(0,d.t)("share-modal.link.shorten-url","Shorten URL"),cn=(0,d.t)("share-modal.link.link-url","Link URL");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(d.x6,{i18nKey:"share-modal.link.info-text"},"Create a direct link to this dashboard or panel, customized with the options below.")),t.createElement(N.n,null,t.createElement(v.D,{label:ct,description:Dt?Ct:""},t.createElement(E.d,{id:"share-current-time-range",value:It,onChange:We.onToggleLockedTime})),t.createElement(j.w,{selectedTheme:Vt,onChange:We.onThemeChange}),t.createElement(v.D,{label:Yt},t.createElement(E.d,{id:"share-shorten-url",value:jt,onChange:We.onUrlShorten})),t.createElement(v.D,{label:cn},t.createElement(V.p,{id:"link-url-input",value:_t,readOnly:!0,addonAfter:t.createElement(P.b,{icon:"copy",variant:"primary",getText:We.getShareUrl,onClipboardCopy:We.onCopy},t.createElement(d.x6,{i18nKey:"share-modal.link.copy-link-button"},"Copy"))}))),ft&&n.$.rendererAvailable&&t.createElement(t.Fragment,null,pn&&t.createElement("div",{className:"gf-form"},t.createElement("a",{href:rt,target:"_blank",rel:"noreferrer","aria-label":St.linkToRenderedImage},t.createElement(G.I,{name:"camera"}),"\xA0",t.createElement(d.x6,{i18nKey:"share-modal.link.rendered-image"},"Direct link rendered image"))),!pn&&t.createElement(_.F,{severity:"info",title:(0,d.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0},t.createElement(d.x6,{i18nKey:"share-modal.link.save-dashboard"},"To render a panel image, you must save the dashboard first."))),ft&&!n.$.rendererAvailable&&t.createElement(_.F,{severity:"info",title:(0,d.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0},t.createElement(d.x6,{i18nKey:"share-modal.link.render-instructions"},"To render a panel image, you must install the",t.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},"Grafana image renderer plugin"),". Please contact your Grafana administrator to install the plugin.")))}function ae(We){const $e="UTC"+encodeURIComponent((0,B.KQ)().format("Z"));if(We==="utc")return"UTC";if(We==="browser"){if(!window.Intl)return $e;const at=window.Intl.DateTimeFormat().resolvedOptions();return at.timeZone?at.timeZone:$e}return We}var Z=e(35280),ne=e(7928);class q extends o.Bs{constructor($e){super($e),this.tabId=T.wr.embed}getTabLabel(){return(0,d.t)("share-modal.tab-title.panel-embed","Embed")}}q.Component=te;function te({model:We}){const{panelRef:$e,dashboardRef:it}=We.useState(),at=$e.resolve(),ht=it.resolve(),{uid:ft}=ht.useState(),gt=(0,f.Cs)(at),Dt=o.jh.getTimeRange(at),It=Dt instanceof ne.v?Dt.state.timeFrom:void 0;return t.createElement(Z.D,{panel:{id:gt,timeFrom:It},range:Dt.state.value,dashboard:{uid:ft??"",time:Dt.state.value},buildIframe:re(ht)})}const re=We=>($e,it,at,ht,ft)=>{const gt=(0,T.XV)({useCurrentTimeRange:$e,selectedTheme:at,panel:ht,range:ft}),Dt=gt.get("editPanel")??gt.get("viewPanel")??"";return gt.set("panelId",Dt),gt.delete("editPanel"),gt.delete("viewPanel"),gt.set("__feature.dashboardSceneSolo","true"),`<iframe src="${(0,k.uZ)({absolute:!0,soloRoute:!0,uid:We.state.uid,slug:We.state.meta.slug,currentQueryParams:gt.toString()})}" width="450" height="200" frameborder="0"></iframe>`};var de=e(5805),ie=e(17172),ge=e(94354),ve=e(69064);const ye=()=>[{label:(0,d.t)("share-modal.snapshot.expire-never","Never"),value:0},{label:(0,d.t)("share-modal.snapshot.expire-hour","1 Hour"),value:60*60},{label:(0,d.t)("share-modal.snapshot.expire-day","1 Day"),value:60*60*24},{label:(0,d.t)("share-modal.snapshot.expire-week","7 Days"),value:60*60*24*7}];class pe extends o.Bs{constructor($e){super({...$e,snapshotName:$e.dashboardRef.resolve().state.title,selectedExpireOption:ye()[0]}),this.tabId=T.wr.snapshot,this.onSnasphotNameChange=it=>{this.setState({snapshotName:it.trim()})},this.onExpireChange=it=>{this.setState({selectedExpireOption:ye().find(at=>at.value===it)})},this.onSnapshotCreate=async(it=!1)=>{const{selectedExpireOption:at}=this.state,ht=this.prepareSnapshot(),ft={dashboard:ht,name:ht.title,expires:at?.value,external:it};try{return await(0,ve.s)().create(ft)}finally{it?l.c.publishSnapshotClicked({expires:ft.expires}):l.c.publishSnapshotLocalClicked({expires:ft.expires})}},this.addActivationHandler(()=>{this._onActivate()})}_onActivate(){(0,ve.s)().getSharingOptions().then($e=>{this.isActive&&this.setState({snapshotSharingOptions:$e})})}getTabLabel(){return(0,d.t)("share-modal.tab-title.snapshot","Snapshot")}prepareSnapshot(){const $e=o.jh.getTimeRange(this),{dashboardRef:it,panelRef:at}=this.state,ht=(0,I.Uy)(it.resolve(),!0);return(0,I.c)(this.state.snapshotName||"",$e.state.value,ht,at?.resolve())}}pe.Component=le;function le({model:We}){const{snapshotName:$e,selectedExpireOption:it,modalRef:at,snapshotSharingOptions:ht}=We.useState(),[ft,gt]=(0,de.default)(async(jt=!1)=>We.onSnapshotCreate(jt)),[Dt,It]=(0,de.default)(async jt=>await(0,ie.AI)().get(jt));return Dt.value?t.createElement(d.x6,{i18nKey:"share-modal.snapshot.deleted-message"},"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches."):t.createElement(t.Fragment,null,!ft.value&&t.createElement(t.Fragment,null,t.createElement("div",null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(d.x6,{i18nKey:"share-modal.snapshot.info-text-1"},"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard.")),t.createElement("p",{className:"share-modal-info-text"},t.createElement(d.x6,{i18nKey:"share-modal.snapshot.info-text-2"},"Keep in mind, your snapshot ",t.createElement("em",null,"can be viewed by anyone")," that has the link and can access the URL. Share wisely."))),t.createElement(v.D,{label:(0,d.t)("share-modal.snapshot.name","Snapshot name")},t.createElement(V.p,{id:"snapshot-name-input",width:30,defaultValue:$e,onBlur:jt=>We.onSnasphotNameChange(jt.target.value)})),t.createElement(v.D,{label:(0,d.t)("share-modal.snapshot.expire","Expire")},t.createElement(ge.z,{id:"expire-select-input",options:ye(),value:it?.value,onChange:We.onExpireChange})),t.createElement(r.a.ButtonRow,null,t.createElement(D.$n,{variant:"secondary",onClick:()=>{at?.resolve().onDismiss()},fill:"outline"},t.createElement(d.x6,{i18nKey:"share-modal.snapshot.cancel-button"},"Cancel")),ht?.externalEnabled&&t.createElement(D.$n,{variant:"secondary",disabled:ft.loading,onClick:()=>gt(!0)},ht?.externalSnapshotName),t.createElement(D.$n,{variant:"primary",disabled:ft.loading,onClick:()=>gt()},t.createElement(d.x6,{i18nKey:"share-modal.snapshot.local-button"},"Local Snapshot")))),ft.value&&t.createElement(t.Fragment,null,t.createElement(v.D,{label:(0,d.t)("share-modal.snapshot.url-label","Snapshot URL")},t.createElement(V.p,{id:"snapshot-url-input",value:ft.value.url,readOnly:!0,addonAfter:t.createElement(P.b,{icon:"copy",variant:"primary",getText:()=>ft.value.url},t.createElement(d.x6,{i18nKey:"share-modal.snapshot.copy-link-button"},"Copy"))})),t.createElement("div",{className:"pull-right",style:{padding:"5px"}},t.createElement(d.x6,{i18nKey:"share-modal.snapshot.mistake-message"},"Did you make a mistake? "),"\xA0",t.createElement(D.$n,{fill:"outline",size:"md",variant:"destructive",onClick:()=>{It(ft.value.deleteUrl)}},t.createElement(d.x6,{i18nKey:"share-modal.snapshot.delete-button"},"Delete snapshot.")))))}var Me=e(72686),De=e(4785),Re=e(32196),me=e(40845),he=e(59037),Te=e(80348),Be=e(96374);class we extends o.Bs{constructor($e){super({confirmVariant:"destructive",dismissText:"Cancel",dismissVariant:"secondary",icon:"exclamation-triangle",confirmButtonVariant:"destructive",...$e})}onDismiss(){}}we.Component=Ne;function Ne({model:We}){const $e=We.useState();return t.createElement(Be.u,{...$e})}var Ze=e(26657),st=e(31204),Qe=e(31193),ke=e(60656);const je=async We=>{let $e=new Set;for(const it of We)st.z.has(it)&&await(0,Qe.tR)().get(it)instanceof Ze.iy||$e.add(it);return Array.from($e)};function He(We){const $e=new Set,it=We.state.body;if(!(it instanceof o.hy))return[];for(const at of it.state.children){if(at instanceof o.M$){const ht=Oe(at);for(const ft of ht)$e.add(ft)}if(at instanceof o.tI){const ht=Ge(at);for(const ft of ht)$e.add(ft)}}return Array.from($e).sort()}function Ge(We){return new Set(We.state.children.map(it=>Oe(it)).flat())}function Oe(We){let $e;if(We instanceof o.M$)if(We.state.body instanceof ke.F)$e=We.state.body.state.panel;else if(We.state.body instanceof o.Eb)$e=We.state.body;else throw new Error("SceneGridItem body expected to be VizPanel");else We instanceof L.w&&($e=We.state.source);if(!$e)throw new Error("Unsupported grid item type");const it=$e.state.$data,at=new Set;if(it instanceof o.dt)for(const ht of it.state.queries)at.add(ht.datasource?.type??"");if(it instanceof o.Es){const ht=it.state.$data;if(ht instanceof o.dt)for(const ft of ht.state.queries)at.add(ft.datasource?.type??"")}return Array.from(at)}function Ke(We){const{value:$e}=(0,p.A)(async()=>{const it=He(We);return je(it)},[]);return $e}function Ee({model:We,publicDashboard:$e,isGetLoading:it}){const at=(0,me.of)(J),ht=u.TP.hasPermission(Te.AccessControlAction.DashboardsPublicWrite),{dashboardRef:ft}=We.useState(),gt=ft.resolve(),{isDirty:Dt}=gt.useState(),[It]=(0,Me.bN)(),jt=(gt.state.$variables?.state.variables.length??0)>0,Vt=Ke(gt),rt=o.jh.getTimeRange(We).useState();return t.createElement(he.b,{dashboard:gt,publicDashboard:$e,unsupportedDatasources:Vt,onRevoke:()=>{gt.showModal(new we({isOpen:!0,title:"Revoke public URL",icon:"trash-alt",confirmText:"Revoke public URL",body:t.createElement("p",{className:at.description},"Are you sure you want to revoke this URL? The dashboard will no longer be public."),onDismiss:()=>{gt.showModal(new _e({dashboardRef:ft,activeTab:"Public Dashboard"}))},onConfirm:()=>{It({dashboard:gt,dashboardUid:gt.state.uid,uid:$e.uid}),gt.closeModal()}}))},timeRange:rt.value,showSaveChangesAlert:ht&&Dt,hasTemplateVariables:jt})}const J=We=>({description:(0,Re.css)({fontSize:We.typography.body.fontSize})});var oe=e(22234);function ue({model:We}){const{dashboardRef:$e}=We.useState(),it=$e.resolve(),at=Ke(it),ht=(it.state.$variables?.state.variables.length??0)>0;return t.createElement(oe.D,{dashboard:it,unsupportedDatasources:at,unsupportedTemplateVariables:ht})}class be extends o.Bs{constructor(){super(...arguments),this.tabId=T.wr.publicDashboard}getTabLabel(){return(0,d.t)("share-modal.tab-title.public-dashboard","Public Dashboard")}}be.Component=Le;function Le({model:We}){const{data:$e,isLoading:it}=(0,Me.Bs)(We.state.dashboardRef.resolve().state.uid);return t.createElement(t.Fragment,null,it?t.createElement(De.a,null):(0,i.lI)($e)?t.createElement(Ee,{model:We,publicDashboard:$e,isGetLoading:it}):t.createElement(ue,{model:We}))}class _e extends o.Bs{constructor($e){super({activeTab:"link",...$e}),this.onDismiss=()=>{(0,f.YQ)(this).closeModal()},this.onChangeTab=it=>{l.c.sharingTabChanged({item:it.value}),this.setState({activeTab:it.value})},this.addActivationHandler(()=>this.buildTabs())}buildTabs(){const{dashboardRef:$e,panelRef:it}=this.state,at=[new Q({dashboardRef:$e,panelRef:it,modalRef:this.getRef()})];it||at.push(new S({dashboardRef:$e,modalRef:this.getRef()})),u.TP.isSignedIn&&n.$.snapshotEnabled&&at.push(new pe({panelRef:it,dashboardRef:$e,modalRef:this.getRef()})),it&&(at.push(new q({panelRef:it,dashboardRef:$e})),it.resolve()instanceof o.Eb&&at.push(new U({panelRef:it,dashboardRef:$e,modalRef:this.getRef()}))),(0,i.iR)()&&at.push(new be({dashboardRef:$e,modalRef:this.getRef()})),this.setState({tabs:at})}}_e.Component=Ve;function Ve({model:We}){const{panelRef:$e,tabs:it,activeTab:at}=We.useState(),ht=$e?(0,d.t)("share-modal.panel.title","Share Panel"):(0,d.t)("share-modal.dashboard.title","Share");if(!it)return;const ft=it?.map(It=>({label:It.getTabLabel(),value:It.tabId})),gt=t.createElement(s.J,{title:ht,icon:"share-alt",tabs:ft,activeTab:at,onChangeTab:We.onChangeTab}),Dt=it.find(It=>It.tabId===at);return t.createElement(r.a,{isOpen:!0,title:gt,onDismiss:We.onDismiss},t.createElement(g.J,null,Dt&&t.createElement(Dt.Component,{model:Dt})))}},96556:(Y,A,e)=>{"use strict";e.d(A,{w:()=>o});var t=e(32264),n=e(79065);function o(s){if(!s.targets?.length||t.$.panels[s.type]?.skipDataQuery)return;let r;return r=new n.dt({datasource:s.datasource??void 0,queries:s.targets,maxDataPoints:s.maxDataPoints??void 0,maxDataPointsFromWidth:!0,cacheTimeout:s.cacheTimeout,queryCachingTTL:s.queryCachingTTL,dataLayerFilter:{panelId:s.id}}),new n.Es({$data:r,transformations:s.transformations||[]})}},32023:(Y,A,e)=>{"use strict";e.d(A,{b:()=>l});var t=e(79065),n=e(48548),o=e(42397);function s(f){const c=g(f);if(c){const h=c.state.timeControls.find(p=>p instanceof t.KE);if(h&&h instanceof t.KE)return h}return null}function r(f){const c=g(f);if(c){for(const h of c.state.timeControls)if(h instanceof t.WM)return h}return null}function g(f){return f.state.controls?.[0]instanceof n.x?f.state.controls[0]:null}function u(f){if(f.state.titleItems&&Array.isArray(f.state.titleItems)&&f.state.titleItems[0]instanceof o.$)return f.state.titleItems[0];throw new Error("VizPanelLinks links not found")}function d(f){const c=[];return f.state.body.forEachChild(h=>{h instanceof t.M$?h.state.body instanceof t.Eb&&c.push(h.state.body):h instanceof t.tI&&h.forEachChild(p=>{p instanceof t.M$&&p.state.body instanceof t.Eb&&c.push(p.state.body)})}),c}function i(f){const c=t.jh.getData(f);if(!(c instanceof t.zr))throw new Error("SceneDataLayers not found");return c}const l={getTimePicker:s,getRefreshPicker:r,getDashboardControls:g,getPanelLinks:u,getVizPanels:d,getDataLayers:i}},7758:(Y,A,e)=>{"use strict";e.d(A,{c:()=>o});var t=e(14110);let n=!1;const o={dashboardInitialized:r=>{s("init_dashboard_completed",{...r})},panelMenuShown:r=>{s("panelheader_menu",{...r,item:"menu"})},panelMenuItemClicked:r=>{s("panelheader_menu",{item:r})},panelMenuInspectClicked(r){s("panelheader_menu",{item:"inspect",tab:r})},panelLinkClicked:r=>{s("panelheader_datalink_clicked",r)},panelStatusMessageClicked:r=>{s("panelheader_statusmessage_clicked",r)},panelCancelQueryClicked:r=>{s("panelheader_cancelquery_clicked",r)},panelDescriptionShown:r=>{s("panelheader_description_displayed",r)},sharingTabChanged:r=>{s("sharing_category_clicked",r)},shareLinkCopied:r=>{s("sharing_link_copy_clicked",r)},embedSnippetCopy:r=>{s("sharing_embed_copy_clicked",r)},publishSnapshotClicked:r=>{s("sharing_snapshot_publish_clicked",r)},publishSnapshotLocalClicked:r=>{s("sharing_snapshot_local_clicked",r)},exportDownloadJsonClicked:r=>{s("sharing_export_download_json_clicked",r)},exportCopyJsonClicked:r=>{s("sharing_export_copy_json_clicked",r)},exportSaveJsonClicked:r=>{s("sharing_export_save_json_clicked",r)},exportViewJsonClicked:r=>{s("sharing_export_view_json_clicked",r)},generatePublicDashboardUrlClicked:r=>{s("sharing_public_generate_url_clicked",r)},revokePublicDashboardEmailClicked:r=>{s("sharing_public_email_revoke_clicked",r)},resendPublicDashboardEmailClicked:r=>{s("sharing_public_email_resend_clicked",r)},publicDashboardEmailInviteClicked:r=>{s("sharing_public_email_invite_clicked",r)},publicDashboardShareTypeChange:r=>{s("sharing_public_can_view_clicked",r)},publicDashboardTimeSelectionChanged:r=>{s("sharing_public_time_picker_clicked",r)},publicDashboardAnnotationsSelectionChanged:r=>{s("sharing_public_annotations_clicked",r)},publicDashboardUrlCopied:r=>{s("sharing_public_copy_url_clicked",r)},publicDashboardPauseSharingClicked:r=>{s("sharing_public_pause_clicked",r)},revokePublicDashboardClicked:r=>{s("sharing_public_revoke_clicked",r)},emptyDashboardButtonClicked:r=>{s("emptydashboard_clicked",r)},toolbarAddButtonClicked:r=>{s("toolbar_add_clicked",r)},toolbarFavoritesClick:()=>{s("toolbar_actions_clicked",{item:"favorites"})},toolbarSettingsClick:()=>{s("toolbar_actions_clicked",{item:"settings"})},toolbarRefreshClick:()=>{s("toolbar_actions_clicked",{item:"refresh"})},toolbarTimePickerClick:()=>{s("toolbar_actions_clicked",{item:"time_picker"})},toolbarZoomClick:()=>{s("toolbar_actions_clicked",{item:"zoom_out_time_range"})},toolbarShareClick:()=>{s("toolbar_actions_clicked",{item:"share"})},toolbarSaveClick:()=>{s("toolbar_actions_clicked",{item:"save"})},toolbarSaveAsClick:()=>{s("toolbar_actions_clicked",{item:"save_as"})},toolbarAddClick:()=>{s("toolbar_actions_clicked",{item:"add"})},setScenesContext:()=>(n=!0,()=>{n=!1})},s=(r,g)=>{const u=n?{scenesView:!0}:{};g?(0,t.rR)(`dashboards_${r}`,{...g,...u}):(0,t.rR)(`dashboards_${r}`)}},99246:(Y,A,e)=>{"use strict";e.d(A,{C:()=>t,Y:()=>n});const t={left:[],right:[]};function n(o,s){t[o].push(s)}},11982:(Y,A,e)=>{"use strict";e.d(A,{Lp:()=>h,Uu:()=>c,e0:()=>f,r7:()=>l,uZ:()=>i});var t=e(76885),n=e(71733),o=e(12131),s=e(32264),r=e(79065),g=e(10096),u=e(87490),d=e(74730);function i(p){let m=`/d/${p.uid}`;p.uid||(m="/dashboard/new"),p.soloRoute&&(m=`/d-solo/${p.uid}`),p.slug&&(m+=`/${p.slug}`),p.subPath&&(m+=p.subPath),p.render&&(m="/render"+m,p.updateQuery={...p.updateQuery,width:1e3,height:500,tz:p.timeZone});const a=p.currentQueryParams?(0,o.SE)(p.currentQueryParams):{};if(p.updateQuery)for(const E of Object.keys(p.updateQuery))p.updateQuery[E]===null||p.updateQuery[E]===void 0?delete a[E]:a[E]=p.updateQuery[E];const v=t.kM.renderUrl(m,a);return p.absolute?s.$.appUrl+v.slice(1):v}function l(p){return n.I.getUrlForPartial(o.Ny.getLocation(),{viewPanel:p.state.key})}function f(p){return n.I.getUrlForPartial(o.Ny.getLocation(),{editPanel:p})}function c(p,m){const a=p.state.key?.replace("-view","");return n.I.getUrlForPartial(o.Ny.getLocation(),{inspect:a,inspectTab:m})}function h(p){const m=p.getPlugin(),a=(0,d.un)(p);if(!g.TP.hasAccessToExplore()||m?.meta.skipDataQuery||!a)return Promise.resolve(void 0);const v=r.jh.getTimeRange(p);return(0,u.Xe)({queries:a.state.queries,dsRef:a.state.datasource,timeRange:v.state.value,scopedVars:{__sceneObject:{value:p}},adhocFilters:a.state.data?.request?.filters})}},74730:(Y,A,e)=>{"use strict";e.d(A,{Cs:()=>i,OK:()=>P,SN:()=>b,Sm:()=>p,X0:()=>c,XA:()=>d,YQ:()=>E,a7:()=>h,bx:()=>m,pk:()=>a,un:()=>v,vL:()=>l,xz:()=>D});var t=e(22391),n=e(19347),o=e(79065),s=e(81515),r=e(36043),g=e(42397),u=e(98184);function d(y){return`panel-${y}`}function i(y){return parseInt(y.state.key.replace("panel-",""),10)}function l(y,T){if(!T)return null;const M=f(y,T);if(M)return M;const I=parseInt(T,10);return isNaN(I)?null:f(y,d(I))}function f(y,T){if(!T)return null;const M=o.jh.findObject(y,I=>I.state.key===T);if(M){if(M instanceof o.Eb)return M;throw new Error(`Found panel with key ${T} but it was not a VizPanel`)}return null}function c(y,T){y.forEachChild(M=>{M.isActive&&(M.forceRender(),c(M,T))})}function h(y){const{value:T,text:M,options:I}=y.state;return y.hasAllValue()?{values:I.map(x=>x.value),texts:I.map(x=>x.label)}:{values:Array.isArray(T)?T:[T],texts:Array.isArray(M)?M:[M]}}function p(y){const T=y.match(/(["'])(.*?)\1|\w+/g);if(!T)return s.Ez.query?.split(",")??[];const M=new Set,I=T.reduce((x,S)=>{const O=S.replace(/["']+/g,"");return O.startsWith("$__auto_interval_")||x.add(O),x},M);return Array.from(I)}function m(y){return Array.isArray(y)?y.join(","):""}function a(y,T){const M=Array.isArray(y.current.value)?y.current.value[0]:y.current.value;return M.startsWith("$__auto_interval_")?"$__auto":T.includes(M)?M:T[0]}function v(y){if(y){if(y.state.$data instanceof o.dt)return y.state.$data;if(y.state.$data instanceof o.Es)return v(y.state.$data)}}function E(y){const T=y.getRoot();if(T instanceof r.H$)return T;throw new Error("SceneObject root is not a DashboardScene")}function D(y){return y instanceof o.Eb?y:y.parent?D(y.parent):null}function b(y){return y.includes("clone")}function P(y){const T=new o.Eb({title:"Panel Title",key:"panel-1",pluginId:"timeseries",titleItems:[new g.$({menu:new g.m({})})],menu:new o.Lw({$behaviors:[u._i]}),$data:new o.Es({$data:new o.dt({queries:[{refId:"A"}],datasource:(0,t.p$)((0,n.l)().getInstanceSettings(null))}),transformations:[]})});return y.addPanel(T),i(T)}},72686:(Y,A,e)=>{"use strict";e.d(A,{$L:()=>v,AK:()=>D,Bs:()=>f,NA:()=>E,NY:()=>a,Sm:()=>l,T2:()=>h,U9:()=>c,_e:()=>m,bN:()=>p,g9:()=>P,kd:()=>b});var t=e(93020),n=e(75505),o=e(17172),s=e(82467),r=e(3169),g=e(36043);function u(y){return typeof y=="object"&&y!=null&&"error"in y}const d=({baseUrl:y})=>async T=>{try{const{data:M,...I}=await(0,n.s)((0,o.AI)().fetch({...T,url:y+T.url,showErrorAlert:T.showErrorAlert}));return{data:M,meta:I}}catch(M){return T.manageError?T.manageError(M):{error:M}}},i=y=>({error:(0,o.NF)(y)&&y.status!==404?y:null}),l=(0,t.xP)({reducerPath:"publicDashboardApi",baseQuery:d({baseUrl:"/api"}),tagTypes:["PublicDashboard","AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"],refetchOnMountOrArgChange:!0,endpoints:y=>({getPublicDashboard:y.query({query:T=>({url:`/dashboards/uid/${T}/public-dashboards`,manageError:i,showErrorAlert:!1}),async onQueryStarted(T,{dispatch:M,queryFulfilled:I}){try{await I}catch(x){u(x)&&(0,o.NF)(x.error)&&M((0,s.dx)((0,r.gi)(x.error.data.message)))}},providesTags:(T,M,I)=>[{type:"PublicDashboard",id:I}]}),createPublicDashboard:y.mutation({query:T=>({url:`/dashboards/uid/${T.dashboard instanceof g.H$?T.dashboard.state.uid:T.dashboard.uid}/public-dashboards`,method:"POST",data:T.payload}),async onQueryStarted({dashboard:T,payload:M},{dispatch:I,queryFulfilled:x}){const{data:S}=await x;I((0,s.dx)((0,r.tZ)("Dashboard is public!"))),T instanceof g.H$?T.setState({meta:{...T.state.meta,publicDashboardEnabled:S.isEnabled,publicDashboardUid:S.uid}}):T.updateMeta({publicDashboardUid:S.uid,publicDashboardEnabled:S.isEnabled})},invalidatesTags:(T,M,{dashboard:I})=>[{type:"PublicDashboard",id:I instanceof g.H$?I.state.uid:I.uid}]}),updatePublicDashboard:y.mutation({query:({payload:T,dashboard:M})=>({url:`/dashboards/uid/${M instanceof g.H$?M.state.uid:M.uid}/public-dashboards/${T.uid}`,method:"PATCH",data:T}),async onQueryStarted({dashboard:T},{dispatch:M,queryFulfilled:I}){const{data:x}=await I;M((0,s.dx)((0,r.tZ)("Public dashboard updated!"))),T instanceof g.H$?T.setState({meta:{...T.state.meta,publicDashboardEnabled:x.isEnabled,publicDashboardUid:x.uid}}):T.updateMeta?.({publicDashboardUid:x.uid,publicDashboardEnabled:x.isEnabled})},invalidatesTags:(T,M,{payload:I})=>[{type:"PublicDashboard",id:I.dashboardUid},"AuditTablePublicDashboard"]}),addRecipient:y.mutation({query:()=>({url:""})}),deleteRecipient:y.mutation({query:()=>({url:""})}),reshareAccessToRecipient:y.mutation({query:()=>({url:""})}),getActiveUsers:y.query({query:()=>({url:"/"}),providesTags:["UsersWithActiveSessions"]}),getActiveUserDashboards:y.query({query:()=>({url:""}),providesTags:(T,M,I)=>[{type:"ActiveUserDashboards",id:I}]}),listPublicDashboards:y.query({query:(T=1)=>({url:`/dashboards/public-dashboards?page=${T}&perpage=8`}),transformResponse:T=>({...T,totalPages:Math.ceil(T.totalCount/T.perPage)}),providesTags:["AuditTablePublicDashboard"]}),deletePublicDashboard:y.mutation({query:T=>({url:`/dashboards/uid/${T.dashboardUid}/public-dashboards/${T.uid}`,method:"DELETE"}),async onQueryStarted({dashboard:T,uid:M},{dispatch:I,queryFulfilled:x}){await x,I((0,s.dx)((0,r.tZ)("Public dashboard deleted!"))),T instanceof g.H$?T.setState({meta:{...T.state.meta,publicDashboardUid:M,publicDashboardEnabled:!1}}):T?.updateMeta({publicDashboardUid:M,publicDashboardEnabled:!1})},invalidatesTags:(T,M,{dashboardUid:I})=>[{type:"PublicDashboard",id:I},"AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"]}),revokeAllAccess:y.mutation({query:()=>({url:""})})})}),{useGetPublicDashboardQuery:f,useCreatePublicDashboardMutation:c,useUpdatePublicDashboardMutation:h,useDeletePublicDashboardMutation:p,useListPublicDashboardsQuery:m,useAddRecipientMutation:a,useDeleteRecipientMutation:v,useReshareAccessToRecipientMutation:E,useGetActiveUsersQuery:D,useGetActiveUserDashboardsQuery:b,useRevokeAllAccessMutation:P}=l},15858:(Y,A,e)=>{"use strict";e.d(A,{M:()=>l});var t=e(2543),n=e(19347),o=e(2913),s=e(57767),r=e(82792),g=e(98796),u=e(24240),d=e(80484);function i(f){return!!(f.libraryPanel?.name&&f.libraryPanel?.uid)}class l{async makeExportable(c){c.cleanUpRepeats();const h=c.getSaveModelCloneOld();h.id=null,c.processRepeats();const p=[],m={},a={},v={},E=new Map;for(const y of h.getVariables())v[y.name]=y;const D=(y,T)=>{if(y.datasource===void 0){y.datasource=T;return}let M=y.datasource,I=null;const x=M?.uid;return x&&x.indexOf("$")===0&&(I=v[x.substring(1)],I&&I.current&&(M=I.current.value)),(0,n.l)().get(M).then(S=>{if(S.meta?.builtIn||(m["datasource"+S.meta?.id]={type:"datasource",id:S.meta.id,name:S.meta.name,version:S.meta.info.version||"1.0.0"},I))return;const O=y.libraryPanel,C=O?"-for-library-panel":"";let L="DS_"+S.name.replace(" ","_").toUpperCase()+C.toUpperCase();if(a[L]={name:L,label:S.name,description:"",type:"datasource",pluginId:S.meta?.id,pluginName:S.meta?.name,usage:a[L]?.usage},O){const U=a[L]?.usage?.libraryPanels||[];U.push({name:O.name,uid:O.uid}),a[L].usage={libraryPanels:U}}y.datasource={type:S.meta.id,uid:"${"+L+"}"}})},b=async y=>{if(y.type!=="row"){if(await D(y),y.targets)for(const M of y.targets)await D(M,y.datasource);const T=o.Ay.panels[y.type];T&&(m["panel"+T.id]={type:"panel",id:T.id,name:T.name,version:T.info.version})}},P=async y=>{if((0,r.X)(y)){const{name:T,uid:M}=y.libraryPanel;let I=y.libraryPanel.model;I||(I=(await(0,s.Yr)(M,!0)).model),await D(I);const{gridPos:x,id:S,...O}=I;E.has(M)||E.set(M,{name:T,uid:M,kind:g.i.Panel,model:O})}};try{for(const M of h.panels)if(await b(M),M.collapsed!==void 0&&M.collapsed===!0&&M.panels)for(const I of M.panels)await b(I);for(const M of h.getVariables())(0,u.P4)(M)&&(await D(M),M.options=[],M.current={},M.refresh=M.refresh!==d.CO.never?M.refresh:d.CO.onDashboardLoad);for(const M of h.annotations.list)await D(M);m.grafana={type:"grafana",id:"grafana",name:"Grafana",version:o.Ay.buildInfo.version};for(const M of h.panels)if(await P(M),M.collapsed!==void 0&&M.collapsed===!0&&M.panels)for(const I of M.panels)await P(I);(0,t.each)(a,M=>{p.push(M)});for(const M of h.getVariables())if((0,u.VO)(M)){const I="VAR_"+M.name.replace(" ","_").toUpperCase();p.push({name:I,type:"constant",label:M.label||M.name,value:M.query,description:""}),M.query="${"+I+"}",M.current={value:M.query,text:M.query,selected:!1},M.options=[M.current]}const y=[...E.entries()].reduce((M,[I,x])=>(M[I]=x,M),{}),T=(0,t.defaults)({__inputs:p,__elements:y,__requires:(0,t.sortBy)(m,["id"])},h);for(let M=0;M<T.panels.length;M++){const I=T.panels[M];i(I)&&(T.panels[M]={gridPos:I.gridPos,id:I.id,libraryPanel:{uid:I.libraryPanel.uid,name:I.libraryPanel.name}})}return T}catch(y){return console.error("Export failed:",y),{error:y}}}}},20120:(Y,A,e)=>{"use strict";e.d(A,{fP:()=>te,Ay:()=>de});var t=e(32196),n=e(96540),o=e(69733),s=e(24180),r=e(40672),g=e(13544),u=e(12131),d=e(69731),i=e(96374),l=e(39938),f=e(19727),c=e(27746),h=e(71678),p=e(15068),m=e(75269),a=e(10804),v=e(2913),E=e(3169),D=e(10096),b=e(16021),P=e(44836),y=e(91219),T=e(83122),M=e(55852),I=e(14578),x=e(32264),S=e(38138),O=e(36974),C=e(7758),L=e(80348),U=e(28601);const B=({dashboard:ve})=>{const ye=(0,n.useMemo)(()=>(0,O._u)(),[]),pe=(0,L.useDispatch)(),le=(0,L.useSelector)(Me=>Me.dashboard.initialDatasource);return n.createElement(S.W,null,n.createElement(S.W.Item,{key:"add-visualisation",testId:g.Tp.pages.AddDashboard.itemButton("Add new visualization menu item"),label:(0,P.t)("dashboard.add-menu.visualization","Visualization"),onClick:()=>{const Me=(0,O.OK)(ve,le);C.c.toolbarAddButtonClicked({item:"add_visualization"}),u.Ny.partial({editPanel:Me}),pe((0,U.Ub)(void 0))}}),x.$.featureToggles.vizAndWidgetSplit&&n.createElement(S.W.Item,{key:"add-widget",testId:g.Tp.pages.AddDashboard.itemButton("Add new widget menu item"),label:(0,P.t)("dashboard.add-menu.widget","Widget"),onClick:()=>{C.c.toolbarAddButtonClicked({item:"add_widget"}),u.Ny.partial({addWidget:!0})}}),n.createElement(S.W.Item,{key:"add-row",testId:g.Tp.pages.AddDashboard.itemButton("Add new row menu item"),label:(0,P.t)("dashboard.add-menu.row","Row"),onClick:()=>{C.c.toolbarAddButtonClicked({item:"add_row"}),(0,O.SD)(ve)}}),n.createElement(S.W.Item,{key:"add-panel-lib",testId:g.Tp.pages.AddDashboard.itemButton("Add new panel from panel library menu item"),label:(0,P.t)("dashboard.add-menu.import","Import from library"),onClick:()=>{C.c.toolbarAddButtonClicked({item:"import_from_library"}),(0,O.s3)(ve)}}),n.createElement(S.W.Item,{key:"add-panel-clipboard",testId:g.Tp.pages.AddDashboard.itemButton("Add new panel from clipboard menu item"),label:(0,P.t)("dashboard.add-menu.paste-panel","Paste panel"),onClick:()=>{C.c.toolbarAddButtonClicked({item:"paste_panel"}),(0,O.no)(ve,ye)},disabled:!ye}))},W=({dashboard:ve,onToolbarAddMenuOpen:ye})=>{const[pe,le]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{pe&&ye&&ye()},[pe,ye]),n.createElement(T.m,{overlay:()=>n.createElement(B,{dashboard:ve}),placement:"bottom",offset:[0,6],onVisibleChange:le},n.createElement(M.$n,{variant:"secondary",size:"sm",fill:"outline","data-testid":g.Tp.components.PageToolbar.itemButton("Add button")},n.createElement(P.x6,{i18nKey:"dashboard.toolbar.add"},"Add"),n.createElement(I.I,{name:pe?"angle-up":"angle-down",size:"lg"})))};var N=e(70497),V=e(14792),G=e(2609),_=e(81862),K=e(28444),j=e(99246),k=e(93030),Q=e(62367);const ee=({dashboard:ve})=>n.createElement(M.$n,{"data-testid":g.Tp.pages.Dashboard.DashNav.shareButton,variant:"primary",size:"sm",onClick:()=>{C.c.toolbarShareClick(),u.Ny.partial({shareView:"link"})}},n.createElement(P.x6,{i18nKey:"dashboard.toolbar.share-button"},"Share")),ae={setStarred:y.ci,updateTimeZoneForSession:_.Cj},Z=(0,o.connect)(null,ae),ne=g.Tp.pages.Dashboard.DashNav;function q(ve){registerDynamicDashNavAction("left",ve)}function te(ve){(0,j.Y)("right",ve)}const re=n.memo(ve=>{(0,s.zy)();const ye=(0,d.C)();(0,b.u)(ve.dashboard.events,K.Cf);const pe=ve.dashboard.snapshot?.originalUrl??"",le=()=>{window.location.href=r.sQ.sanitizeUrl(ve.dashboard.snapshot.originalUrl)},Me=(0,E._2)(),De=()=>{try{const je=new URL(r.sQ.sanitizeUrl(pe),v.Ay.appUrl),He=new URL(v.Ay.appUrl);je.host!==He.host?D.lE.publish(new K.S8({component:i.u,props:{title:"Proceed to external site?",modalClass:ie,body:n.createElement(n.Fragment,null,n.createElement("p",null,"This link connects to an external website at"," ",n.createElement("code",null,pe)),n.createElement("p",null,"Are you sure you'd like to proceed?")),confirmVariant:"primary",confirmText:"Proceed",onConfirm:le}})):le()}catch(je){Me.error("Invalid URL",je instanceof Error?je.message:void 0)}},Re=()=>{C.c.toolbarFavoritesClick();const je=(0,V.UA)(),{dashboard:He,setStarred:Ge}=ve;je.starDashboard(He.uid,!!He.meta.isStarred).then(Oe=>{Ge({id:He.uid,title:He.title,url:He.meta.url??"",isStarred:Oe}),He.meta.isStarred=Oe,ye()})},me=()=>{C.c.toolbarSettingsClick(),u.Ny.partial({editview:"settings"})},he=()=>{G._o.prev()},Te=()=>{G._o.next()},Be=()=>{G._o.stop(),ye()},we=(je,He)=>{je.map((Ge,Oe)=>{const Ke=Ge.component,Ee=n.createElement(Ke,{...ve,key:`button-custom-${Oe}`});typeof Ge.index=="number"?He.splice(Ge.index,0,Ee):He.push(Ee)})},Ne=()=>G._o.isPlaying,Ze=()=>{const{dashboard:je,kioskMode:He}=ve,{canStar:Ge,isStarred:Oe}=je.meta,Ke=[];if(He||Ne())return[];if(Ge){let Ee=Oe?(0,P.t)("dashboard.toolbar.unmark-favorite","Unmark as favorite"):(0,P.t)("dashboard.toolbar.mark-favorite","Mark as favorite");Ke.push(n.createElement(k._,{tooltip:Ee,icon:Oe?"favorite":"star",iconType:Oe?"mono":"default",iconSize:"lg",onClick:Re,key:"button-star"}))}return je.meta.publicDashboardEnabled&&Ke.push(n.createElement(l.E,{color:"blue",text:"Public",key:"public-dashboard-button-badge",className:ge,"data-testid":ne.publicDashboardTag})),v.Ay.featureToggles.scenes&&Ke.push(n.createElement(k._,{key:"button-scenes",tooltip:"View as Scene",icon:"apps",onClick:()=>{u.Ny.partial({scenes:!0})}})),we(j.C.left,Ke),Ke},st=()=>n.createElement(f.e,{key:"playlist-buttons"},n.createElement(c.I,{tooltip:(0,P.t)("dashboard.toolbar.playlist-previous","Go to previous dashboard"),icon:"backward",onClick:he,narrow:!0}),n.createElement(c.I,{onClick:Be},n.createElement(P.x6,{i18nKey:"dashboard.toolbar.playlist-stop"},"Stop playlist")),n.createElement(c.I,{tooltip:(0,P.t)("dashboard.toolbar.playlist-next","Go to next dashboard"),icon:"forward",onClick:Te,narrow:!0})),Qe=()=>{const{dashboard:je,updateTimeZoneForSession:He,hideTimePicker:Ge}=ve;return Ge?null:n.createElement(Q.$,{dashboard:je,onChangeTimeZone:He,onToolbarRefreshClick:C.c.toolbarRefreshClick,onToolbarZoomClick:C.c.toolbarZoomClick,onToolbarTimePickerClick:C.c.toolbarTimePickerClick,key:"time-controls"})},ke=()=>{const{dashboard:je,isFullscreen:He,kioskMode:Ge,hideTimePicker:Oe}=ve,{canSave:Ke,canEdit:Ee,showSettings:J,canShare:oe}=je.meta,{snapshot:ue}=je,be=ue&&ue.originalUrl,Le=[];return Ne()?[st(),Qe()]:Ge===L.KioskMode.TV?[Qe()]:(be&&Le.push(n.createElement(c.I,{tooltip:(0,P.t)("dashboard.toolbar.open-original","Open original dashboard"),onClick:De,icon:"link",key:"button-snapshot"})),Ke&&!He&&Le.push(n.createElement(h.$s,{key:"button-save"},({showModal:_e,hideModal:Ve})=>n.createElement(c.I,{tooltip:(0,P.t)("dashboard.toolbar.save","Save dashboard"),icon:"save",onClick:()=>{C.c.toolbarSaveClick(),_e(N.$,{dashboard:je,onDismiss:Ve})}}))),we(j.C.right,Le),J&&Le.push(n.createElement(c.I,{tooltip:(0,P.t)("dashboard.toolbar.settings","Dashboard settings"),icon:"cog",onClick:me,key:"button-settings"})),Ee&&!He&&Le.push(n.createElement(W,{dashboard:je,onToolbarAddMenuOpen:C.c.toolbarAddClick,key:"panel-add-dropdown"})),oe&&Le.push(n.createElement(ee,{key:"button-share",dashboard:je})),Oe||Le.push(n.createElement(a.K,{key:"toolbar-separator"})),Le.push(Qe()),Le)};return n.createElement(m.H,{actions:n.createElement(n.Fragment,null,Ze(),n.createElement(a.K,{leftActionsSeparator:!0}),n.createElement(p.U,{alignment:"right"},ke()))})});re.displayName="DashNav";const de=Z(re),ie=(0,t.css)({width:"max-content",maxWidth:"80vw"}),ge=(0,t.css)({color:"grey",backgroundColor:"transparent",border:"1px solid"})},93030:(Y,A,e)=>{"use strict";e.d(A,{_:()=>r});var t=e(32196),n=e(96540),o=e(40845),s=e(29158);const r=({icon:u,iconType:d,iconSize:i,tooltip:l,onClick:f,children:c})=>{const h=(0,o.of)(g);return n.createElement("div",{className:h.noBorderContainer},u&&n.createElement(s.K,{name:u,size:i,iconType:d,tooltip:l,tooltipPlacement:"bottom",onClick:f}),c)},g=u=>({noBorderContainer:(0,t.css)`
    padding: 0 ${u.spacing(.5)};
    display: flex;
  `})},62367:(Y,A,e)=>{"use strict";e.d(A,{$:()=>f});var t=e(96540),n=e(85858),o=e(3591),s=e(11134),r=e(25573),g=e(10096),u=e(44836),d=e(16233),i=e(74856),l=e(28444);class f extends t.Component{constructor(){super(...arguments),this.onChangeRefreshInterval=h=>{(0,i.jG)().setAutoRefresh(h),this.forceUpdate()},this.onRefresh=()=>((0,i.jG)().refreshTimeModel(),Promise.resolve()),this.onMoveBack=()=>{g.lE.publish(new l.Io({direction:l.xL.Left}))},this.onMoveForward=()=>{g.lE.publish(new l.Io({direction:l.xL.Right}))},this.onChangeTimePicker=h=>{const{dashboard:p}=this.props,m=p.timepicker,a=m.nowDelay&&h.raw.to==="now",v=n.isMathString(h.raw.from)?h.raw.from:h.from,E=n.isMathString(h.raw.to)?h.raw.to:h.to,D={from:v,to:a?"now-"+m.nowDelay:E};(0,i.jG)().setTime(D)},this.onChangeTimeZone=h=>{this.props.dashboard.timezone=h,this.props.onChangeTimeZone(h),this.onRefresh()},this.onChangeFiscalYearStartMonth=h=>{this.props.dashboard.fiscalYearStartMonth=h,this.onRefresh()},this.onZoom=()=>{this.props.onToolbarZoomClick&&this.props.onToolbarZoomClick(),g.lE.publish(new l.U0({scale:2}))},this.onRefreshClick=()=>{this.props.onToolbarRefreshClick&&this.props.onToolbarRefreshClick(),this.onRefresh()}}componentDidMount(){this.sub=this.props.dashboard.events.subscribe(o.sR,()=>this.forceUpdate())}componentWillUnmount(){this.sub?.unsubscribe()}render(){const{dashboard:h,isOnCanvas:p}=this.props,{refresh_intervals:m}=h.timepicker,a=(0,i.jG)().getValidIntervals(m||s.cb),v=(0,i.jG)().timeRange(),E=h.getTimezone(),D=h.fiscalYearStartMonth,b=h.panelInEdit?.isEditing;let P;return h.refresh===d.SM&&(P=(0,i.jG)().getAutoRefreshInteval().interval),t.createElement(t.Fragment,null,t.createElement(r.m,{value:v,onChange:this.onChangeTimePicker,timeZone:E,fiscalYearStartMonth:D,onMoveBackward:this.onMoveBack,onMoveForward:this.onMoveForward,onZoom:this.onZoom,onChangeTimeZone:this.onChangeTimeZone,onChangeFiscalYearStartMonth:this.onChangeFiscalYearStartMonth,isOnCanvas:p,onToolbarTimePickerClick:this.props.onToolbarTimePickerClick}),t.createElement(s.cC,{onIntervalChanged:this.onChangeRefreshInterval,onRefresh:this.onRefreshClick,value:h.refresh,intervals:a,isOnCanvas:p,tooltip:(0,u.t)("dashboard.toolbar.refresh","Refresh dashboard"),noIntervalPicker:b,showAutoInterval:!0,text:P}))}}},16495:(Y,A,e)=>{"use strict";e.d(A,{U:()=>t.Ay});var t=e(20120)},46991:(Y,A,e)=>{"use strict";e.d(A,{d:()=>r});var t=e(32196),n=e(96540),o=e(40845),s=e(55852);const r=({children:u,...d})=>{const i=(0,o.of)(g);return n.createElement("div",{className:i.buttonWrapper},n.createElement(s.$n,{icon:"plus",...d},u))},g=u=>({buttonWrapper:(0,t.css)`
    padding: ${u.spacing(3)} 0;
  `})},75590:(Y,A,e)=>{"use strict";e.d(A,{p:()=>v});var t=e(2543),n=e(96540),o=e(65879),s=e(13544),r=e(57418),g=e(88575),u=e(20333),d=e(15648),i=e(10354),l=e(15292),f=e(44836),c=e(11134),h=e(74856);const p=({refreshIntervals:E,onRefreshIntervalChange:D,getIntervalsFunc:b=a,validateIntervalsFunc:P=m})=>{const[y,T]=(0,n.useState)(b(E??c.cb)),[M,I]=(0,n.useState)(null);(0,n.useEffect)(()=>{const C=b(E??c.cb);T(C)},[b,E]);const x=(0,n.useMemo)(()=>Array.isArray(y)?y.join(","):"",[y]),S=(0,n.useCallback)(C=>{const L=C.currentTarget.value?C.currentTarget.value.split(","):[];T(L)},[T]),O=(0,n.useCallback)(C=>{const L=P(y);L===null&&D(b(y)),I(L)},[b,y,D,P]);return n.createElement(g.D,{label:(0,f.t)("dashboard-settings.general.auto-refresh-label","Auto refresh"),description:(0,f.t)("dashboard-settings.general.auto-refresh-description","Define the auto refresh intervals that should be available in the auto refresh list."),error:M,invalid:!!M},n.createElement(i.p,{id:"auto-refresh-input",invalid:!!M,value:x,onChange:S,onBlur:O}))},m=(E,D={getTimeSrv:h.jG})=>{try{return a(E,D),null}catch(b){return b instanceof Error?b.message:"Invalid intervals"}},a=(E,D={getTimeSrv:h.jG})=>{const b=E.filter(P=>P.trim()!=="").map(P=>P.replace(/\s+/g,""));return[...new Set(D.getTimeSrv().getValidIntervals(b))]};class v extends n.PureComponent{constructor(){super(...arguments),this.state={isNowDelayValid:!0},this.onNowDelayChange=D=>{const b=D.currentTarget.value;if((0,t.isEmpty)(b))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(b);if(o.isValidTimeSpan(b))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(b);this.setState({isNowDelayValid:!1})},this.onHideTimePickerChange=()=>{this.props.onHideTimePickerChange(!this.props.timePickerHidden)},this.onLiveNowChange=()=>{this.props.onLiveNowChange(!this.props.liveNow)},this.onTimeZoneChange=D=>{typeof D=="string"&&this.props.onTimeZoneChange(D)},this.onWeekStartChange=D=>{this.props.onWeekStartChange(D)}}render(){return n.createElement(r.M,{label:(0,f.t)("dashboard-settings.time-picker.time-options-label","Time options"),isOpen:!0},n.createElement(g.D,{label:(0,f.t)("dashboard-settings.time-picker.time-zone-label","Time zone"),"data-testid":s.Tp.components.TimeZonePicker.containerV2},n.createElement(u.U,{inputId:"time-options-input",includeInternal:!0,value:this.props.timezone,onChange:this.onTimeZoneChange,width:40})),n.createElement(g.D,{label:(0,f.t)("dashboard-settings.time-picker.week-start-label","Week start"),"data-testid":s.Tp.components.WeekStartPicker.containerV2},n.createElement(d.l,{inputId:"week-start-input",width:40,value:this.props.weekStart,onChange:this.onWeekStartChange})),n.createElement(p,{refreshIntervals:this.props.refreshIntervals,onRefreshIntervalChange:this.props.onRefreshIntervalChange}),n.createElement(g.D,{label:(0,f.t)("dashboard-settings.time-picker.now-delay-label","Now delay"),description:(0,f.t)("dashboard-settings.time-picker.now-delay-description","Exclude recent data that may be incomplete.")},n.createElement(i.p,{id:"now-delay-input",invalid:!this.state.isNowDelayValid,placeholder:"0m",onChange:this.onNowDelayChange,defaultValue:this.props.nowDelay})),n.createElement(g.D,{label:(0,f.t)("dashboard-settings.time-picker.hide-time-picker","Hide time picker")},n.createElement(l.d,{id:"hide-time-picker-toggle",value:!!this.props.timePickerHidden,onChange:this.onHideTimePickerChange})),n.createElement(g.D,{label:(0,f.t)("dashboard-settings.time-picker.refresh-live-dashboards-label","Refresh live dashboards"),description:(0,f.t)("dashboard-settings.time-picker.refresh-live-dashboards-description","Continuously re-draw panels where the time range references 'now'")},n.createElement(l.d,{id:"refresh-live-dashboards-toggle",value:!!this.props.liveNow,onChange:this.onLiveNowChange})))}}},92107:(Y,A,e)=>{"use strict";e.d(A,{s:()=>Ar});var t=e(96540),n=e(24180),o=e(71733),s=e(13544),r=e(12131),g=e(55852),u=e(15068),d=e(75269),i=e(36830),l=e(44836),f=e(16233),c=e(80348),h=e(28444),p=e(69733),m=e(82960),a=e(32196),v=e(16817),E=e(14110),D=e(40845),b=e(57418),P=e(66864),y=e(62930),T=e(56034),M=e(14578),I=e(29158),x=e(37390);const S=({nodes:Mt,edges:Ft,direction:ln,width:Zt,height:En,onDoubleClick:Fn})=>{const Vn=(0,t.useRef)(null),sa=(0,t.useRef)(null),ga=(0,t.useCallback)(Ga=>{Fn&&Fn(Ga.nodes[0])},[Fn]);return(0,t.useEffect)(()=>((async()=>{const qa=await e.e(5083).then(e.t.bind(e,83416,23)),xa={nodes:O(qa,Mt),edges:C(qa,Ft)},Qa={width:"100%",height:"100%",autoResize:!0,layout:{improvedLayout:!0,hierarchical:{enabled:!0,direction:ln??"DU",sortMethod:"directed"}},interaction:{navigationButtons:!0,dragNodes:!1}};Vn.current=new qa.Network(sa.current,xa,Qa),Vn.current?.on("doubleClick",ga)})(),()=>{Vn.current&&Vn.current.off("doubleClick")}),[ln,Ft,Mt,ga]),t.createElement("div",null,t.createElement("div",{ref:sa,style:{width:Zt??"100%",height:En??"60vh"}}))};function O(Mt,Ft){const ln=Ft.map(Zt=>({...Zt,shape:"box"}));return new Mt.DataSet(ln)}function C(Mt,Ft){const ln=Ft.map(Zt=>({...Zt,arrows:"to",dashes:!0}));return new Mt.DataSet(ln)}function L({edges:Mt,nodes:Ft,show:ln,title:Zt,children:En}){const[Fn,Vn]=(0,t.useState)(ln),sa=(0,t.useCallback)(()=>Vn(!0),[Vn]),ga=(0,t.useCallback)(()=>Vn(!1),[Vn]);return t.createElement(t.Fragment,null,t.createElement(x.a,{isOpen:Fn,title:Zt,icon:"info-circle",iconTooltip:"The graph can be moved, zoomed in, and zoomed out.",onClickBackdrop:ga,onDismiss:ga},t.createElement(S,{nodes:Ft,edges:Mt})),En({showModal:sa}))}const U=({id:Mt,usages:Ft})=>{const ln=(0,t.useMemo)(()=>Ft.find(En=>En.variable.id===Mt),[Mt,Ft]);if(!ln)return null;const Zt=ln.nodes.map(En=>En.label.includes(`$${Mt}`)?{...En,color:"#FB7E81"}:En);return t.createElement(L,{show:!1,title:`Showing usages for: $${Mt}`,nodes:Zt,edges:ln.edges},({showModal:En})=>t.createElement(I.K,{onClick:()=>En(),name:"code-branch",tooltip:"Show usages","data-testid":"VariablesUnknownButton"}))};var R=e(12846);const B=1e3;function H({variables:Mt,dashboard:Ft}){const[ln,Zt]=(0,t.useState)(!1),[En,Fn]=(0,t.useState)(0),[Vn,sa]=(0,t.useState)([]),ga=(0,D.of)(G);(0,t.useEffect)(()=>Fn(xa=>xa+1),[Mt,Ft]);const{loading:Ga}=(0,v.A)(async()=>{if(ln&&En>0){const xa=Date.now(),Qa=await(0,R.g0)(Mt,Ft),ys=Date.now()-xa;return ys>=B&&(0,E.rR)("Slow unknown variables expansion",{elapsed:ys}),Fn(0),sa(Qa),Qa}return[]},[Mt,Ft,ln,En]),qa=xa=>{xa&&(0,E.rR)("Unknown variables section expanded"),Zt(xa)};return t.createElement("div",{className:ga.container},t.createElement(b.M,{label:t.createElement(W,null),isOpen:ln,onToggle:qa},Ga&&t.createElement(P.gW,{justify:"center"},t.createElement(P.Gy,{justify:"center"},t.createElement("span",null,"Loading..."),t.createElement(y.y,null))),!Ga&&Vn&&t.createElement(t.Fragment,null,Vn.length===0&&t.createElement(N,null),Vn.length>0&&t.createElement(V,{usages:Vn}))))}function W(){const Mt=(0,D.of)(G);return t.createElement("h5",null,"Renamed or missing variables",t.createElement(T.m,{content:"Click to expand a list with all variable references that have been renamed or are missing from the dashboard."},t.createElement(M.I,{name:"info-circle",className:Mt.infoIcon})))}function N(){return t.createElement("span",null,"No renamed or missing variables found.")}function V({usages:Mt}){const Ft=(0,D.of)(G);return t.createElement("table",{className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Variable"),t.createElement("th",{colSpan:5}))),t.createElement("tbody",null,Mt.map(ln=>{const{variable:Zt}=ln,{id:En,name:Fn}=Zt;return t.createElement("tr",{key:En},t.createElement("td",{className:Ft.firstColumn},t.createElement("span",null,Fn)),t.createElement("td",{className:Ft.defaultColumn}),t.createElement("td",{className:Ft.defaultColumn}),t.createElement("td",{className:Ft.defaultColumn}),t.createElement("td",{className:Ft.lastColumn},t.createElement(U,{id:Zt.id,usages:Mt})))})))}const G=Mt=>({container:(0,a.css)`
    margin-top: ${Mt.spacing(4)};
    padding-top: ${Mt.spacing(4)};
  `,infoIcon:(0,a.css)`
    margin-left: ${Mt.spacing(1)};
  `,defaultColumn:(0,a.css)`
    width: 1%;
  `,firstColumn:(0,a.css)`
    width: 1%;
    vertical-align: top;
    color: ${Mt.colors.text.maxContrast};
  `,lastColumn:(0,a.css)`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    text-align: right;
  `});var _=e(48594),K=e(87421),j=e(56968),k=e(75096),Q=e(96374);function ee({varName:Mt,isOpen:Ft=!1,onConfirm:ln,onDismiss:Zt}){return t.createElement(Q.u,{title:"Delete variable",isOpen:Ft,onConfirm:ln,onDismiss:Zt,body:`
      Are you sure you want to delete variable "${Mt}"?
    `,modalClass:ae.modal,confirmText:"Delete"})}const ae={modal:(0,a.css)({width:"max-content",maxWidth:"80vw"})};var Z=e(39070),ne=e(8964),q=e(58975),te=e(85140),re=e(14329),de=e(41820),ie=e(20601),ge=e(24240),ve=e(72401),ye=e(89458);function pe({onChange:Mt,type:Ft}){const ln=(0,t.useMemo)(()=>(0,k.AX)(),[]),Zt=(0,t.useMemo)(()=>ln.find(En=>En.value===Ft)??ln[0],[ln,Ft]);return t.createElement(ye.v,{name:"Select variable type",value:Zt,options:ln,onChange:Mt,testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.General.generalTypeSelectV2})}var le=e(2543),Me=e(27238),De=e(3843);const Re=Mt=>async Ft=>{const{rootStateKey:ln}=Mt;Ft((0,_.kb)(ln,(0,De.sJ)({name:(0,K.dn)(Mt).name,id:Mt.id})))},me=Mt=>async(Ft,ln)=>{const{rootStateKey:Zt}=Mt;Ft((0,_.kb)(Zt,(0,De.T7)((0,k.qD)(Mt))))},he=(Mt,Ft)=>(ln,Zt)=>{const{id:En,rootStateKey:Fn}=Mt;let Vn=null;if(Ft.match(/^(?!__).*$/)||(Vn="Template names cannot begin with '__', that's reserved for Grafana's global variables"),Ft.match(/^\w+$/)||(Vn="Only word characters are allowed in variable names"),(0,K.SS)(Fn,Zt()).filter(Ga=>Ga.name===Ft&&Ga.id!==En).length&&(Vn="Variable with the same name already exists"),Vn){ln((0,_.kb)(Fn,(0,De.DW)({newName:Ft,errorText:Vn})));return}ln(Te(Mt,Ft))},Te=(Mt,Ft)=>(ln,Zt)=>{const{rootStateKey:En}=Mt,Fn=(0,K.dn)(Mt,Zt());if(Fn.name===Ft){ln((0,_.kb)(En,(0,De.FN)((0,k.qD)(Mt,{newName:Ft}))));return}const Vn={...(0,le.cloneDeep)(Fn),name:Ft,id:Ft},sa=Fn.global,ga=Fn.index,Ga=(0,k.jX)(Vn);ln((0,_.kb)(En,(0,j.QV)((0,k.qD)(Ga,{global:sa,index:ga,model:Vn})))),ln((0,_.kb)(En,(0,De.FN)((0,k.qD)(Ga,{newName:Ft})))),ln((0,_.kb)(En,(0,j.Hr)((0,k.qD)(Mt,{reIndex:!1}))))},Be=(Mt,Ft="query")=>(ln,Zt)=>{const En=(0,k.q4)(Mt),Fn=(0,K.SS)(En,Zt()),Vn=Ne(Ft,Fn),sa={type:Ft,id:Vn},ga=!1,Ga=(0,K.hk)(En,Zt()),qa=(0,le.cloneDeep)(ie.B.get(Ft).initialState);qa.id=Vn,qa.name=Vn,qa.rootStateKey=En,ln((0,_.kb)(En,(0,j.QV)((0,k.qD)(sa,{global:ga,model:qa,index:Ga})))),r.Ny.partial({editIndex:Fn.length})},we=Mt=>(Ft,ln)=>{const Zt=(0,k.q4)(Mt),En=ln(),Fn=(0,K.nS)(Zt,En),Vn=En.dashboard.getModel(),{usages:sa}=(0,R.hM)(Fn,Vn),ga=(0,R.Ow)(sa);Ft((0,_.kb)(Zt,(0,Me.bX)({usages:sa,usagesNetwork:ga})))};function Ne(Mt,Ft){let ln=0,Zt=`${Mt}${ln}`;for(;Ft.find(En=>En.id===Zt);)Zt=`${Mt}${++ln}`;return Zt}var Ze=e(85830);const st=(Mt,Ft)=>({editor:(0,K.nx)(Ft.identifier.rootStateKey,Mt).editor,variable:(0,K.dn)(Ft.identifier,Mt)}),Qe=Mt=>({...(0,m.bindActionCreators)({variableEditorMount:Re,variableEditorUnMount:me,changeVariableName:he,updateOptions:ve.mZ},Mt),changeVariableProp:(Ft,ln,Zt)=>Mt((0,_.kb)(Ft.rootStateKey,(0,j.QP)((0,k.qD)(Ft,{propName:ln,propValue:Zt})))),changeVariableType:(Ft,ln)=>Mt((0,_.kb)(Ft.rootStateKey,(0,j.l_)((0,k.qD)(Ft,{newType:ln})))),removeVariable:Ft=>{Mt((0,_.kb)(Ft.rootStateKey,(0,j.Hr)((0,k.qD)(Ft,{reIndex:!0}))))}}),ke=(0,p.connect)(st,Qe);class je extends t.PureComponent{constructor(){super(...arguments),this.state={showDeleteModal:!1},this.onNameChange=Ft=>{Ft.preventDefault(),this.props.changeVariableName(this.props.identifier,Ft.currentTarget.value)},this.onTypeChange=Ft=>{Ft.value&&this.props.changeVariableType(this.props.identifier,Ft.value)},this.onLabelChange=Ft=>{Ft.preventDefault(),this.props.changeVariableProp(this.props.identifier,"label",Ft.currentTarget.value)},this.onDescriptionChange=Ft=>{this.props.changeVariableProp(this.props.identifier,"description",Ft.currentTarget.value)},this.onHideChange=Ft=>{this.props.changeVariableProp(this.props.identifier,"hide",Ft)},this.onPropChanged=({propName:Ft,propValue:ln,updateOptions:Zt=!1})=>{this.props.changeVariableProp(this.props.identifier,Ft,ln),Zt&&this.props.updateOptions((0,k.jX)(this.props.variable))},this.onHandleSubmit=async Ft=>{Ft.preventDefault(),this.props.editor.isValid&&this.props.updateOptions((0,k.jX)(this.props.variable))},this.onModalOpen=()=>{this.setState({showDeleteModal:!0})},this.onModalClose=()=>{this.setState({showDeleteModal:!1})},this.onDelete=()=>{this.props.removeVariable(this.props.identifier),this.onModalClose(),r.Ny.partial({editIndex:null})},this.onApply=()=>{r.Ny.partial({editIndex:null})},this.getVariableOptions=()=>{const{variable:Ft}=this.props;return(0,ge.SP)(Ft)?Ft.options.map(ln=>({label:String(ln.text),value:String(ln.value)})):[]}}componentDidMount(){this.props.variableEditorMount(this.props.identifier)}componentWillUnmount(){this.props.variableEditorUnMount(this.props.identifier)}render(){const{variable:Ft}=this.props,ln=ie.B.get(this.props.variable.type).editor;if(!ln)return null;const Zt=Ft.state===Z.Gu.Loading;return t.createElement(t.Fragment,null,t.createElement("form",{"aria-label":"Variable editor Form",onSubmit:this.onHandleSubmit},t.createElement(pe,{onChange:this.onTypeChange,type:this.props.variable.type}),t.createElement(q.Y,null,"General"),t.createElement(re._,{value:this.props.editor.name,onChange:this.onNameChange,name:"Name",placeholder:"Variable name",description:"The name of the template variable. (Max. 50 characters)",invalid:!!this.props.editor.errors.name,error:this.props.editor.errors.name,testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.General.generalNameInputV2,maxLength:Ze.M.MaxSize,required:!0}),t.createElement(re._,{name:"Label",description:"Optional display name",value:this.props.variable.label??"",placeholder:"Label name",onChange:this.onLabelChange,testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.General.generalLabelInputV2}),t.createElement(te.Z,{name:"Description",value:Ft.description??"",placeholder:"Descriptive text",onChange:this.onDescriptionChange,width:52}),t.createElement(ne.D,{onChange:this.onHideChange,hide:this.props.variable.hide,type:this.props.variable.type}),ln&&t.createElement(ln,{variable:this.props.variable,onPropChange:this.onPropChanged}),(0,ge.SP)(this.props.variable)?t.createElement(de.j,{options:this.getVariableOptions()}):null,t.createElement("div",{style:{marginTop:"16px"}},t.createElement(P.Gy,{spacing:"md",height:"inherit"},t.createElement(g.$n,{variant:"destructive",fill:"outline",onClick:this.onModalOpen},"Delete"),t.createElement(g.$n,{type:"submit","data-testid":s.Tp.pages.Dashboard.Settings.Variables.Edit.General.submitButton,disabled:Zt,variant:"secondary"},"Run query",Zt&&t.createElement(M.I,{className:"spin-clockwise",name:"sync",size:"sm",style:{marginLeft:"2px"}})),t.createElement(g.$n,{variant:"primary",onClick:this.onApply,"data-testid":s.Tp.pages.Dashboard.Settings.Variables.Edit.General.applyButton},"Apply")))),t.createElement(ee,{isOpen:this.state.showDeleteModal,varName:this.props.editor.name,onConfirm:this.onDelete,onDismiss:this.onModalClose}))}}const He=ke(je);var Ge=e(75494),Oe=e(67061),Ke=e(7521),Ee=e(99140);const J=({variables:Mt})=>{const Ft=(0,t.useMemo)(()=>(0,R.hI)(Mt),[Mt]),ln=(0,t.useMemo)(()=>(0,R.qJ)(Mt),[Mt]);return ln.length?t.createElement(L,{show:!1,title:"Dependencies",nodes:(0,R.H7)(Ft,ln),edges:ln},({showModal:Zt})=>t.createElement(g.$n,{onClick:()=>{(0,E.rR)("Show variable dependencies"),Zt()},icon:"channel-add",variant:"secondary"},"Show dependencies")):null},oe=Mt=>t.createElement(p.Provider,{store:Ee.M_},t.createElement(J,{...Mt})),ue=({id:Mt,usages:Ft,isAdhoc:ln})=>{const Zt=(0,t.useMemo)(()=>Ft.find(Fn=>Fn.variable.id===Mt),[Ft,Mt]);if(Ft.length===0||ln||!Zt)return null;const En=Zt.nodes.map(Fn=>Fn.label.includes(`$${Mt}`)?{...Fn,color:"#FB7E81"}:Fn);return t.createElement(L,{show:!1,title:`Showing usages for: $${Mt}`,nodes:En,edges:Zt.edges},({showModal:Fn})=>t.createElement(I.K,{onClick:()=>{(0,E.rR)("Show variable usages"),Fn()},name:"code-branch",tooltip:"Show usages"}))};function be({index:Mt,variable:Ft,usageTree:ln,usagesNetwork:Zt,onEdit:En,onDuplicate:Fn,onDelete:Vn}){const sa=(0,D.$j)(),ga=(0,D.of)(Ve),Ga=Le(Ft),xa=(0,R.PK)(Ft.id,ln)>0||Ft.type==="adhoc",Qa=(0,k.jX)(Ft);return t.createElement(Ge.sx,{draggableId:JSON.stringify(Qa),index:Mt},(ar,ys)=>t.createElement("tr",{ref:ar.innerRef,...ar.draggableProps,style:{userSelect:ys.isDragging?"none":"auto",background:ys.isDragging?sa.colors.background.secondary:void 0,...ar.draggableProps.style}},t.createElement("td",{role:"gridcell",className:ga.column},t.createElement(g.$n,{size:"xs",fill:"text",onClick:ks=>{ks.preventDefault(),En(Qa)},className:ga.nameLink,"aria-label":s.Tp.pages.Dashboard.Settings.Variables.List.tableRowNameFields(Ft.name)},Ft.name)),t.createElement("td",{role:"gridcell",className:ga.definitionColumn,onClick:ks=>{ks.preventDefault(),En(Qa)},"aria-label":s.Tp.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields(Ft.name)},Ga),t.createElement("td",{role:"gridcell",className:ga.column},t.createElement("div",{className:ga.icons},t.createElement(_e,{passed:xa}),t.createElement(ue,{id:Ft.id,isAdhoc:Ft.type==="adhoc",usages:Zt}),t.createElement(I.K,{onClick:ks=>{ks.preventDefault(),(0,E.rR)("Duplicate variable"),Fn(Qa)},name:"copy",tooltip:"Duplicate variable","aria-label":s.Tp.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons(Ft.name)}),t.createElement(I.K,{onClick:ks=>{ks.preventDefault(),(0,E.rR)("Delete variable"),Vn(Qa)},name:"trash-alt",tooltip:"Remove variable","aria-label":s.Tp.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons(Ft.name)}),t.createElement("div",{...ar.dragHandleProps,className:ga.dragHandle},t.createElement(M.I,{name:"draggabledots",size:"lg"}))))))}function Le(Mt){let Ft="";return Mt.type==="query"?Mt.definition?Ft=Mt.definition:typeof Mt.query=="string"&&(Ft=Mt.query):(0,ge.SP)(Mt)&&(Ft=Mt.query),Ft}function _e({passed:Mt}){const Ft=(0,D.of)(Ve);return Mt?t.createElement(M.I,{name:"check",className:Ft.iconPassed,title:"This variable is referenced by other variables or dashboard."}):t.createElement(M.I,{name:"exclamation-triangle",className:Ft.iconFailed,title:"This variable is not referenced by any variable or dashboard."})}function Ve(Mt){return{dragHandle:(0,a.css)`
      cursor: grab;
      margin-left: ${Mt.spacing(1)};
    `,column:(0,a.css)`
      width: 1%;
    `,nameLink:(0,a.css)`
      cursor: pointer;
      color: ${Mt.colors.primary.text};
    `,definitionColumn:(0,a.css)`
      width: 100%;
      max-width: 200px;
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      -o-text-overflow: ellipsis;
      white-space: nowrap;
    `,iconPassed:(0,a.css)`
      color: ${Mt.v1.palette.greenBase};
      margin-right: ${Mt.spacing(2)};
    `,iconFailed:(0,a.css)`
      color: ${Mt.v1.palette.orange};
      margin-right: ${Mt.spacing(2)};
    `,icons:(0,a.css)`
      display: flex;
      gap: ${Mt.spacing(2)};
      align-items: center;
    `}}function We({variables:Mt,usages:Ft,usagesNetwork:ln,onChangeOrder:Zt,onAdd:En,onEdit:Fn,onDelete:Vn,onDuplicate:sa}){const ga=(0,D.of)(it),Ga=qa=>{if(!qa.destination||!qa.source)return;(0,E.rR)("Variable drag and drop");const xa=JSON.parse(qa.draggableId);Zt(xa,Mt[qa.source.index].index,Mt[qa.destination.index].index)};return t.createElement("div",null,t.createElement("div",null,Mt.length===0&&t.createElement($e,{onAdd:En}),Mt.length>0&&t.createElement(Oe.B,{direction:"column",gap:4},t.createElement("div",{className:ga.tableContainer},t.createElement("table",{className:"filter-table filter-table--hover","aria-label":s.Tp.pages.Dashboard.Settings.Variables.List.table,role:"grid"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Variable"),t.createElement("th",null,"Definition"),t.createElement("th",{colSpan:5}))),t.createElement(Ge.JY,{onDragEnd:Ga},t.createElement(Ge.gL,{droppableId:"variables-list",direction:"vertical"},qa=>t.createElement("tbody",{ref:qa.innerRef,...qa.droppableProps},Mt.map((xa,Qa)=>t.createElement(be,{index:Qa,key:`${xa.name}-${Qa}`,variable:xa,usageTree:Ft,usagesNetwork:ln,onDelete:Vn,onDuplicate:sa,onEdit:Fn})),qa.placeholder))))),t.createElement(Oe.B,null,t.createElement(oe,{variables:Mt}),t.createElement(g.$n,{"aria-label":s.Tp.pages.Dashboard.Settings.Variables.List.newButton,onClick:En,icon:"plus"},"New variable")))))}function $e({onAdd:Mt}){return t.createElement("div",null,t.createElement(Ke.A,{title:"There are no variables yet",buttonIcon:"calculator-alt",buttonTitle:"Add variable",infoBox:{__html:` <p>
                    Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server
                    or sensor names in your metric queries you can use variables in their place. Variables are shown as
                    list boxes at the top of the dashboard. These drop-down lists make it easy to change the data
                    being displayed in your dashboard. Check out the
                    <a class="external-link" href="https://grafana.com/docs/grafana/latest/variables/" target="_blank">
                      Templates and variables documentation
                    </a>
                    for more information.
                  </p>`},infoBoxTitle:"What do variables do?",onClick:Ft=>{Ft.preventDefault(),Mt()}}))}const it=()=>({tableContainer:(0,a.css)`
    overflow: scroll;
    width: 100%;
  `}),at=(Mt,Ft)=>{const{uid:ln}=Ft.dashboard,Zt=(0,K.nx)(ln,Mt);return{variables:(0,K.nS)(ln,Mt),idInEditor:Zt.editor.id,usagesNetwork:Zt.inspect.usagesNetwork,usages:Zt.inspect.usages}},ht=Mt=>({...(0,m.bindActionCreators)({createNewVariable:Be,initListMode:we},Mt),changeVariableOrder:(Ft,ln,Zt)=>Mt((0,_.kb)(Ft.rootStateKey,(0,j.hj)((0,k.qD)(Ft,{fromIndex:ln,toIndex:Zt})))),duplicateVariable:Ft=>Mt((0,_.kb)(Ft.rootStateKey,(0,j.ut)((0,k.qD)(Ft,{newId:void 0})))),removeVariable:Ft=>{Mt((0,_.kb)(Ft.rootStateKey,(0,j.Hr)((0,k.qD)(Ft,{reIndex:!0}))))}}),ft=(0,p.connect)(at,ht);class gt extends t.PureComponent{constructor(){super(...arguments),this.state={variableId:void 0},this.onEditVariable=Ft=>{const ln=this.props.variables.findIndex(Zt=>Zt.id===Ft.id);r.Ny.partial({editIndex:ln})},this.onNewVariable=()=>{this.props.createNewVariable(this.props.dashboard.uid)},this.onChangeVariableOrder=(Ft,ln,Zt)=>{this.props.changeVariableOrder(Ft,ln,Zt)},this.onDuplicateVariable=Ft=>{this.props.duplicateVariable(Ft)},this.onModalOpen=Ft=>{this.setState({variableId:Ft})},this.onModalClose=()=>{this.setState({variableId:void 0})},this.onRemoveVariable=()=>{this.props.removeVariable(this.state.variableId),this.onModalClose()}}componentDidMount(){this.props.initListMode(this.props.dashboard.uid)}render(){const{editIndex:Ft,variables:ln,sectionNav:Zt}=this.props,En=Ft!=null?ln[Ft]:void 0,Fn=Zt.node,Vn=Fn.parentItem?{...Fn.parentItem,url:Fn.url}:void 0,sa=En?{text:En.name,parentItem:Vn}:Vn;return t.createElement(i.Y,{navModel:this.props.sectionNav,pageNav:sa},!En&&t.createElement(We,{variables:this.props.variables,onAdd:this.onNewVariable,onEdit:this.onEditVariable,onChangeOrder:this.onChangeVariableOrder,onDuplicate:this.onDuplicateVariable,onDelete:this.onModalOpen,usages:this.props.usages,usagesNetwork:this.props.usagesNetwork}),!En&&this.props.variables.length>0&&t.createElement(H,{variables:this.props.variables,dashboard:this.props.dashboard}),En&&t.createElement(He,{identifier:(0,k.jX)(En)}),t.createElement(ee,{isOpen:this.state.variableId!==void 0,varName:this.state.variableId?.id??"",onConfirm:this.onRemoveVariable,onDismiss:this.onModalClose}))}}const Dt=ft(gt);var It=e(5108),jt=e(10096);const Vt=({dashboard:Mt,sectionNav:Ft})=>{const ln=jt.TP.hasPermission(c.AccessControlAction.DashboardsPermissionsWrite),Zt=Ft.node.parentItem;return t.createElement(i.Y,{navModel:Ft,pageNav:Zt},t.createElement(It.x,{resource:"dashboards",resourceId:Mt.uid,canSetPermissions:ln}))};var _t=e(78050),rt=e(22391),St=e(19347),pn=e(84167),ct=e(88575),Ct=e(10354),Yt=e(10880),cn=e(88323),vn=e(77268),rn=e(2913),en=e(82241),mn=e(46502),Un=e(51612);const fn="New annotation",ca=({editIdx:Mt,dashboard:Ft})=>{const ln=(0,D.of)(Lt),[Zt,En]=(0,t.useState)(Ft.annotations.list[Mt]),Fn=(0,t.useMemo)(()=>Zt.filter?Zt.filter.exclude?2:1:0,[Zt.filter]),{value:Vn}=(0,v.A)(()=>(0,St.l)().get(Zt.datasource),[Zt.datasource]),sa=(0,St.l)().getInstanceSettings(Zt.datasource),ga=Oa=>{const As=[...Ft.annotations.list];As.splice(Mt,1,Oa),En(Oa),Ft.annotations.list=As},Ga=Oa=>{ga({...Zt,name:Oa.currentTarget.value})},qa=Oa=>{const As=(0,rt.p$)(Oa);Zt.datasource?.type!==As.type?ga({datasource:As,builtIn:Zt.builtIn,enable:Zt.enable,iconColor:Zt.iconColor,name:Zt.name,hide:Zt.hide,filter:Zt.filter,mappings:Zt.mappings,type:Zt.type}):ga({...Zt,datasource:As})},xa=Oa=>{const As=Oa.currentTarget;ga({...Zt,[As.name]:As.type==="checkbox"?As.checked:As.value})},Qa=Oa=>{ga({...Zt,iconColor:Oa})},ar=Oa=>{let As=Oa.value===0?void 0:{exclude:Oa.value===2,ids:Zt.filter?.ids??[]};ga({...Zt,filter:As})},ys=Oa=>{if(!Array.isArray(Oa))return;const As={exclude:Fn===2,ids:[]};Oa.forEach(zr=>zr.value&&As.ids.push(zr.value)),ga({...Zt,filter:As})},ks=qt,Ss=()=>{r.Ny.partial({editview:null,editIndex:null})},xs=()=>{const Oa=Ft.annotations.list;Ft.annotations.list=[...Oa.slice(0,Mt),...Oa.slice(Mt+1)],qt()},Us=Zt.name===fn,lr=(Oa,As)=>Oa.label&&As.label?Oa.label.toLowerCase().localeCompare(As.label.toLowerCase()):-1,Hs=(0,t.useMemo)(()=>Ft?.panels.filter(Oa=>rn.Ay.panels[Oa.type]).map(Oa=>({value:Oa.id,label:Oa.title??`Panel ${Oa.id}`,description:Oa.description,imgUrl:rn.Ay.panels[Oa.type].info.logos.small})).sort(lr)??[],[Ft]);return t.createElement("div",null,t.createElement(pn.n,{className:ln.settingsForm},t.createElement(ct.D,{label:"Name"},t.createElement(Ct.p,{"aria-label":s.Tp.pages.Dashboard.Settings.Annotations.Settings.name,name:"name",id:"name",autoFocus:Us,value:Zt.name,onChange:Ga})),t.createElement(ct.D,{label:"Data source",htmlFor:"data-source-picker"},t.createElement(Un.s,{annotations:!0,variables:!0,current:Zt.datasource,onChange:qa})),t.createElement(ct.D,{label:"Enabled",description:"When enabled the annotation query is issued every dashboard refresh"},t.createElement(Yt.S,{name:"enable",id:"enable",value:Zt.enable,onChange:xa})),t.createElement(ct.D,{label:"Hidden",description:"Annotation queries can be toggled on or off at the top of the dashboard. With this option checked this toggle will be hidden."},t.createElement(Yt.S,{name:"hide",id:"hide",value:Zt.hide,onChange:xa})),t.createElement(ct.D,{label:"Color",description:"Color to use for the annotation event markers"},t.createElement(P.Gy,null,t.createElement(vn.a,{value:Zt?.iconColor,onChange:Qa}))),t.createElement(ct.D,{label:"Show in","aria-label":s.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.showInLabel},t.createElement(t.Fragment,null,t.createElement(cn.l6,{options:Cn,value:Fn,onChange:ar,"aria-label":s.Tp.components.Annotations.annotationsTypeInput}),Fn!==0&&t.createElement(cn.KF,{options:Hs,value:Hs.filter(Oa=>Zt.filter?.ids.includes(Oa.value)),onChange:ys,isClearable:!0,placeholder:"Choose panels",width:100,closeMenuOnSelect:!1,className:ln.select,"aria-label":s.Tp.components.Annotations.annotationsChoosePanelInput})))),t.createElement(pn.n,null,t.createElement("h3",{className:"page-heading"},"Query"),Vn?.annotations&&sa&&t.createElement(en.A,{datasource:Vn,datasourceInstanceSettings:sa,annotation:Zt,onChange:ga}),Vn&&!Vn.annotations&&t.createElement(mn.F,{datasource:Vn,annotation:Zt,onChange:ga})),t.createElement(Oe.B,null,!Zt.builtIn&&t.createElement(g.$n,{variant:"destructive",onClick:xs},"Delete"),t.createElement(g.$n,{variant:"secondary",onClick:Ss,"data-testid":s.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.previewInDashboard},"Preview in dashboard"),t.createElement(g.$n,{variant:"primary",onClick:ks},"Apply")))},Lt=Mt=>({settingsForm:(0,a.css)({maxWidth:Mt.spacing(60),marginBottom:Mt.spacing(2)}),select:(0,a.css)`
      margin-top: 8px;
    `});function qt(){r.Ny.partial({editIndex:null})}var hn=(Mt=>(Mt[Mt.AllPanels=0]="AllPanels",Mt[Mt.IncludePanels=1]="IncludePanels",Mt[Mt.ExcludePanels=2]="ExcludePanels",Mt))(hn||{});const Cn=[{label:"All panels",value:0,description:"Send the annotation data to all panels that support annotations"},{label:"Selected panels",value:1,description:"Send the annotations to the explicitly listed panels"},{label:"All panels except",value:2,description:"Do not send annotation data to the following panels"}];var gn=e(14588),xn=e(91605),Tn=e(46991);const Wn=({dashboard:Mt,onNew:Ft,onEdit:ln})=>{const Zt=(0,D.of)(Sn),[En,Fn]=(0,t.useState)(Mt.annotations.list),Vn=(xa,Qa)=>{Mt.annotations.list=gn.moveItemImmutably(En,xa,xa+Qa),Fn(Mt.annotations.list)},sa=xa=>{Mt.annotations.list=[...En.slice(0,xa),...En.slice(xa+1)],Fn(Mt.annotations.list)},ga=En.length===0||En.length===1&&En[0].builtIn,Ga=xa=>xa.enable===!1?t.createElement(t.Fragment,null,t.createElement("em",{className:"muted"},"(Disabled) \xA0 ",xa.name)):xa.builtIn?t.createElement(t.Fragment,null,t.createElement("em",{className:"muted"},xa.name," \xA0 (Built-in)")):t.createElement(t.Fragment,null,xa.name),qa=(0,St.l)();return t.createElement(P.gW,null,En.length>0&&t.createElement("div",{className:Zt.table},t.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Query name"),t.createElement("th",null,"Data source"),t.createElement("th",{colSpan:3}))),t.createElement("tbody",null,Mt.annotations.list.map((xa,Qa)=>t.createElement("tr",{key:`${xa.name}-${Qa}`},xa.builtIn?t.createElement("td",{role:"gridcell",style:{width:"90%"},className:"pointer",onClick:()=>ln(Qa)},t.createElement(g.$n,{size:"sm",fill:"text",variant:"secondary"},Ga(xa))):t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>ln(Qa)},t.createElement(g.$n,{size:"sm",fill:"text",variant:"secondary"},Ga(xa))),t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>ln(Qa)},qa.getInstanceSettings(xa.datasource)?.name||xa.datasource?.uid),t.createElement("td",{role:"gridcell",style:{width:"1%"}},Qa!==0&&t.createElement(I.K,{name:"arrow-up",onClick:()=>Vn(Qa,-1),tooltip:"Move up"})),t.createElement("td",{role:"gridcell",style:{width:"1%"}},Mt.annotations.list.length>1&&Qa!==Mt.annotations.list.length-1?t.createElement(I.K,{name:"arrow-down",onClick:()=>Vn(Qa,1),tooltip:"Move down"}):null),t.createElement("td",{role:"gridcell",style:{width:"1%"}},!xa.builtIn&&t.createElement(xn.e,{size:"sm",onConfirm:()=>sa(Qa),"aria-label":`Delete query with title "${xa.name}"`}))))))),ga&&t.createElement(Ke.A,{onClick:Ft,title:"There are no custom annotation queries added yet",buttonIcon:"comment-alt",buttonTitle:"Add annotation query",infoBoxTitle:"What are annotation queries?",infoBox:{__html:`<p>Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines
          and icons on all graph panels. When you hover over an annotation icon you can get event text &amp; tags for
          the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or
          drag region). These will be stored in Grafana's annotation database.
        </p>
        Checkout the
        <a class='external-link' target='_blank' href='http://docs.grafana.org/reference/annotations/'
          >Annotations documentation</a
        >
        for more information.`}}),!ga&&t.createElement(Tn.d,{onClick:Ft},"New query"))},Sn=()=>({table:(0,a.css)`
    width: 100%;
    overflow-x: scroll;
  `});function An({dashboard:Mt,editIndex:Ft,sectionNav:ln}){const Zt=()=>{const Vn={name:fn,enable:!0,datasource:(0,rt.p$)((0,St.l)().getInstanceSettings(null)),iconColor:"red"};Mt.annotations.list=[...Mt.annotations.list,{...Vn}],r.Ny.partial({editIndex:Mt.annotations.list.length-1})},En=Vn=>{r.Ny.partial({editIndex:Vn})},Fn=Ft!=null&&Ft<Mt.annotations.list.length;return t.createElement(i.Y,{navModel:ln,pageNav:ta(Mt,Ft,ln.node)},!Fn&&t.createElement(Wn,{dashboard:Mt,onNew:Zt,onEdit:En}),Fn&&t.createElement(ca,{dashboard:Mt,editIdx:Ft}))}function ta(Mt,Ft,ln){const Zt=ln.parentItem;if(Ft==null)return Zt;const En=Mt.annotations.list[Ft];if(En)return{text:En.name,parentItem:Zt&&{...Zt,url:ln.url}}}var fa=e(32264),la=e(90613),Xn=e(60029),Ea=e(21744),Ca=e(79924),Sa=e(94354),aa=e(70096),Yn=e(3673),za=e(39712),ns=e(81394),ps=e(27966),Cs=e(75590);const Fs=[{value:0,label:"Default"},{value:1,label:"Shared crosshair"},{value:2,label:"Shared Tooltip"}];function cs({dashboard:Mt,updateTimeZone:Ft,updateWeekStart:ln,sectionNav:Zt}){const[En,Fn]=(0,t.useState)(0),[Vn,sa]=(0,t.useState)(Mt.title),[ga,Ga]=(0,t.useState)(Mt.description),qa=Zt.node.parentItem,xa=(Ha,cr)=>{Mt.meta.folderUid=Ha,Mt.meta.folderTitle=cr,Mt.meta.hasUnsavedFolderChange=!0,Fn(En+1)},Qa=t.useCallback(Ha=>{Mt.title=Ha,sa(Ha)},[sa,Mt]),ar=t.useCallback(Ha=>{Mt.description=Ha,Ga(Ha)},[Ga,Mt]),ys=Ha=>{Mt.graphTooltip=Ha,Fn(En+1)},ks=Ha=>{Mt.timepicker.refresh_intervals=Ha.filter(cr=>cr.trim()!=="")},Ss=Ha=>{Mt.timepicker.nowDelay=Ha},xs=Ha=>{Mt.timepicker.hidden=Ha,Fn(En+1)},Us=Ha=>{Mt.liveNow=Ha,Fn(En+1)},lr=Ha=>{Mt.timezone=Ha,Fn(En+1),Ft(Ha)},Hs=Ha=>{Mt.weekStart=Ha,Fn(En+1),ln(Ha)},Oa=Ha=>{Mt.tags=Ha,Fn(En+1)},As=Ha=>{Mt.editable=Ha,Fn(En+1)},zr=[{label:"Editable",value:!0},{label:"Read-only",value:!1}];return t.createElement(i.Y,{navModel:Zt,pageNav:qa},t.createElement("div",{style:{maxWidth:"600px"}},t.createElement(la.a,{marginBottom:5},t.createElement(ct.D,{label:t.createElement(P.Gy,{justify:"space-between"},t.createElement(Xn.J,{htmlFor:"title-input"},t.createElement(l.x6,{i18nKey:"dashboard-settings.general.title-label"},"Title")),fa.$.featureToggles.dashgpt&&t.createElement(ps.Z,{onGenerate:Qa,dashboard:Mt}))},t.createElement(Ct.p,{id:"title-input",name:"title",value:Vn,onChange:Ha=>Qa(Ha.target.value)})),t.createElement(ct.D,{label:t.createElement(P.Gy,{justify:"space-between"},t.createElement(Xn.J,{htmlFor:"description-input"},(0,l.t)("dashboard-settings.general.description-label","Description")),fa.$.featureToggles.dashgpt&&t.createElement(ns.V,{onGenerate:ar,dashboard:Mt}))},t.createElement(Ea.f,{id:"description-input",name:"description",value:ga,onChange:Ha=>ar(Ha.target.value)})),t.createElement(ct.D,{label:(0,l.t)("dashboard-settings.general.tags-label","Tags")},t.createElement(Ca.u,{id:"tags-input",tags:Mt.tags,onChange:Oa,width:40})),t.createElement(ct.D,{label:(0,l.t)("dashboard-settings.general.folder-label","Folder")},t.createElement(aa.d,{value:Mt.meta.folderUid,onChange:xa,initialTitle:Mt.meta.folderTitle,inputId:"dashboard-folder-input",enableCreateNew:!0,dashboardId:Mt.id,skipInitialLoad:!0})),t.createElement(ct.D,{label:(0,l.t)("dashboard-settings.general.editable-label","Editable"),description:(0,l.t)("dashboard-settings.general.editable-description","Set to read-only to disable all editing. Reload the dashboard for changes to take effect")},t.createElement(Sa.z,{value:Mt.editable,options:zr,onChange:As}))),t.createElement(Cs.p,{onTimeZoneChange:lr,onWeekStartChange:Hs,onRefreshIntervalChange:ks,onNowDelayChange:Ss,onHideTimePickerChange:xs,onLiveNowChange:Us,refreshIntervals:Mt.timepicker.refresh_intervals,timePickerHidden:Mt.timepicker.hidden,nowDelay:Mt.timepicker.nowDelay,timezone:Mt.timezone,weekStart:Mt.weekStart,liveNow:Mt.liveNow}),t.createElement(b.M,{label:(0,l.t)("dashboard-settings.general.panel-options-label","Panel options"),isOpen:!0},t.createElement(ct.D,{label:(0,l.t)("dashboard-settings.general.panel-options-graph-tooltip-label","Graph tooltip"),description:(0,l.t)("dashboard-settings.general.panel-options-graph-tooltip-description","Controls tooltip and hover highlight behavior across different panels. Reload the dashboard for changes to take effect")},t.createElement(Sa.z,{onChange:ys,options:Fs,value:Mt.graphTooltip}))),t.createElement(la.a,{marginTop:3},Mt.meta.canDelete&&t.createElement(za.c,null))))}const hs={updateTimeZone:Yn.lC,updateWeekStart:Yn.Ss},ss=(0,p.connect)(null,hs)(cs);var bs=e(32372),tr=e(81156),or=e(6473),vs=e(14792);function hr({dashboard:Mt,sectionNav:Ft}){const ln=Mt.getSaveModelClone(),[Zt,En]=(0,t.useState)(JSON.stringify(ln,null,2)),Fn=Ft.node.parentItem,Vn=async()=>{await(0,vs.UA)().saveJSONDashboard(Zt),or.t.reloadPage()},sa=(0,D.of)(_s);return t.createElement(i.Y,{navModel:Ft,pageNav:Fn},t.createElement("div",{className:sa.wrapper},t.createElement(l.x6,{i18nKey:"dashboard-settings.json-editor.subtitle"},"The JSON model below is the data structure that defines the dashboard. This includes dashboard settings, panel settings, layout, queries, and so on."),t.createElement(tr.A,{dashboard:ln}),t.createElement(bs.B,{value:Zt,language:"json",showMiniMap:!0,showLineNumbers:!0,onBlur:En,containerStyles:sa.codeEditor}),Mt.meta.canSave&&t.createElement("div",null,t.createElement(g.$n,{type:"submit",onClick:Vn},t.createElement(l.x6,{i18nKey:"dashboard-settings.json-editor.save-button"},"Save changes")))))}const _s=Mt=>({wrapper:(0,a.css)({display:"flex",height:"100%",flexDirection:"column",gap:Mt.spacing(2)}),codeEditor:(0,a.css)({flexGrow:1})});var Ya=e(4588),Ws=e(65857);const Bs=({editLinkIdx:Mt,dashboard:Ft,onGoBack:ln})=>{const[Zt,En]=(0,t.useState)(Mt!==null?Ft.links[Mt]:Ya.q),Fn=Vn=>{const sa=[...Ft.links];sa.splice(Mt,1,Vn),Ft.links=sa,En(Vn)};return t.createElement(Ws.d,{link:Zt,onUpdate:Fn,onGoBack:ln})};var Ks=e(6199);const Vr=({dashboard:Mt,onNew:Ft,onEdit:ln})=>{const[Zt,En]=(0,t.useState)(Mt.links),Fn=(ga,Ga)=>{Mt.links=gn.moveItemImmutably(Zt,ga,ga+Ga),En(Mt.links)},Vn=ga=>{Mt.links=[...Zt,{...ga}],En(Mt.links)},sa=ga=>{Mt.links=[...Zt.slice(0,ga),...Zt.slice(ga+1)],En(Mt.links)};return t.createElement(Ks.X,{links:Zt,onNew:Ft,onEdit:ln,onDuplicate:Vn,onDelete:sa,onOrderChange:Fn})};function Js({dashboard:Mt,sectionNav:Ft,editIndex:ln}){const[Zt,En]=(0,t.useState)(!1),Fn=()=>{En(!1),r.Ny.partial({editIndex:void 0})},Vn=()=>{Mt.links=[...Mt.links,{...Ya.q}],En(!0),r.Ny.partial({editIndex:Mt.links.length-1})},sa=qa=>{En(!1),r.Ny.partial({editIndex:qa})},ga=ln!==void 0;let Ga=Ft.node.parentItem;if(ga){Ga={text:Zt?"New link":"Edit link",subTitle:Zt?"Create a new link on your dashboard":"Edit a specific link of your dashboard"};const Qa=Ft.node.url;Ga.parentItem=Ft.node.parentItem&&{...Ft.node.parentItem,url:Qa}}return t.createElement(i.Y,{navModel:Ft,pageNav:Ga},!ga&&t.createElement(Vr,{dashboard:Mt,onNew:Vn,onEdit:sa}),ga&&t.createElement(Bs,{dashboard:Mt,editLinkIdx:ln,onGoBack:Fn}))}var Er=e(57714),yr=e(71678),zo=e(19626),Dr=e(22764),qr=e(56596),us=e(41053),eo=e(3169);const Fr=async(Mt,Ft)=>(or.t.ignoreNextSave(),await Er.wL.restoreDashboard(Ft.uid,Mt)),nr=Mt=>{const Ft=(0,c.useSelector)(Fn=>Fn.dashboard.getModel()),[ln,Zt]=(0,us.A)(async()=>await Fr(Mt,Ft),[]),En=(0,eo._2)();return(0,t.useEffect)(()=>{if(ln.value){const Fn=r.Ny.getLocation(),Vn=o.I.stripBaseFromUrl(ln.value.url),sa=Fn.state?.routeReloadCounter;r.Ny.replace({...Fn,pathname:Vn,state:{routeReloadCounter:sa?sa+1:1}}),En.success("Dashboard restored",`Restored from version ${Mt}`)}},[ln,Mt,En]),{state:ln,onRestoreDashboard:Zt}},ko=({hideModal:Mt,version:Ft})=>{const{state:ln,onRestoreDashboard:Zt}=nr(Ft);return(0,t.useEffect)(()=>{!ln.loading&&ln.value&&Mt()},[ln,Mt]),t.createElement(Q.u,{isOpen:!0,title:"Restore Version",icon:"history",onDismiss:Mt,onConfirm:Zt,body:t.createElement("p",null,"Are you sure you want to restore the dashboard to version ",Ft,"? All unsaved changes will be lost."),confirmText:`Yes, restore to version ${Ft}`})},zs=({baseInfo:Mt,newInfo:Ft,diffData:ln,isNewLatest:Zt})=>{const En=(0,qr.G4)(ln.lhs,ln.rhs),Fn=(0,D.of)(Es);return t.createElement(Oe.B,{direction:"column",gap:1},t.createElement(Oe.B,{justifyContent:"space-between",alignItems:"center"},t.createElement(Oe.B,{alignItems:"center"},t.createElement("span",{className:(0,a.cx)(Fn.versionInfo,Fn.noMarginBottom)},t.createElement("strong",null,"Version ",Mt.version)," updated by ",Mt.createdBy," ",Mt.ageString,Mt.message),t.createElement(M.I,{name:"arrow-right",size:"sm"}),t.createElement("span",{className:Fn.versionInfo},t.createElement("strong",null,"Version ",Ft.version)," updated by ",Ft.createdBy," ",Ft.ageString,Ft.message)),Zt&&t.createElement(yr.$s,null,({showModal:Vn,hideModal:sa})=>t.createElement(g.$n,{variant:"destructive",icon:"history",onClick:()=>{Vn(ko,{version:Mt.version,hideModal:sa})}},"Restore to version ",Mt.version))),Object.entries(En).map(([Vn,sa])=>t.createElement(zo.D,{diffs:sa,key:Vn,title:Vn})),t.createElement(la.a,{paddingTop:2},t.createElement(b.M,{isOpen:!1,label:"View JSON Diff"},t.createElement(Dr.M,{oldValue:JSON.stringify(ln.lhs,null,2),newValue:JSON.stringify(ln.rhs,null,2)}))))},Es=Mt=>({versionInfo:(0,a.css)({color:Mt.colors.text.secondary,fontSize:Mt.typography.bodySmall.fontSize}),noMarginBottom:(0,a.css)({marginBottom:0})});var to=e(78369);const ts=({versions:Mt,canCompare:Ft,onCheck:ln})=>{const Zt=(0,D.of)(Ts);return t.createElement("div",{className:Zt.margin},t.createElement("table",{className:"filter-table"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{className:"width-4"}),t.createElement("th",{className:"width-4"},"Version"),t.createElement("th",{className:"width-14"},"Date"),t.createElement("th",{className:"width-10"},"Updated by"),t.createElement("th",null,"Notes"),t.createElement("th",null))),t.createElement("tbody",null,Mt.map((En,Fn)=>t.createElement("tr",{key:En.id},t.createElement("td",null,t.createElement(Yt.S,{"aria-label":`Toggle selection of version ${En.version}`,className:(0,a.css)({display:"inline"}),checked:En.checked,onChange:Vn=>ln(Vn,En.id),disabled:!En.checked&&Ft})),t.createElement("td",null,En.version),t.createElement("td",null,En.createdDateString),t.createElement("td",null,En.createdBy),t.createElement("td",null,En.message),t.createElement("td",{className:"text-right"},Fn===0?t.createElement(to.v,{name:"Latest",colorIndex:17}):t.createElement(yr.$s,null,({showModal:Vn,hideModal:sa})=>t.createElement(g.$n,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{Vn(ko,{version:En.version,hideModal:sa})}},"Restore"))))))))};function Ts(Mt){return{margin:(0,a.css)({marginBottom:Mt.spacing(4)})}}const Zn=10;class xt extends t.PureComponent{constructor(Ft){super(Ft),this.getVersions=(ln=!1)=>{this.setState({isAppending:ln}),Er.wL.getHistoryList(this.props.dashboard.uid,{limit:this.limit,start:this.start}).then(Zt=>{this.setState({isLoading:!1,versions:[...this.state.versions,...this.decorateVersions(Zt)]}),this.start+=this.limit}).catch(Zt=>console.log(Zt)).finally(()=>this.setState({isAppending:!1}))},this.getDiff=async()=>{const ln=this.state.versions.filter(ga=>ga.checked),[Zt,En]=ln,Fn=Zt.version===this.props.dashboard.version;this.setState({isLoading:!0});const Vn=await Er.wL.getDashboardVersion(this.props.dashboard.uid,En.version),sa=await Er.wL.getDashboardVersion(this.props.dashboard.uid,Zt.version);this.setState({baseInfo:En,isLoading:!1,isNewLatest:Fn,newInfo:Zt,viewMode:"compare",diffData:{lhs:Vn.data,rhs:sa.data}})},this.decorateVersions=ln=>ln.map(Zt=>({...Zt,createdDateString:this.props.dashboard.formatDate(Zt.created),ageString:this.props.dashboard.getRelativeTime(Zt.created),checked:!1})),this.onCheck=(ln,Zt)=>{this.setState({versions:this.state.versions.map(En=>En.id===Zt?{...En,checked:ln.currentTarget.checked}:En)})},this.reset=()=>{this.setState({baseInfo:void 0,diffData:{lhs:"",rhs:""},isNewLatest:!1,newInfo:void 0,versions:this.state.versions.map(ln=>({...ln,checked:!1})),viewMode:"list"})},this.limit=Zn,this.start=0,this.state={isAppending:!0,isLoading:!0,versions:[],viewMode:"list",isNewLatest:!1,diffData:{lhs:"",rhs:""}}}componentDidMount(){this.getVersions()}isLastPage(){return this.state.versions.find(Ft=>Ft.version===1)}render(){const{versions:Ft,viewMode:ln,baseInfo:Zt,newInfo:En,isNewLatest:Fn,isLoading:Vn,diffData:sa}=this.state,ga=Ft.filter(Qa=>Qa.checked).length===2,Ga=Ft.length>1,qa=Ft.length>=this.limit,xa=this.props.sectionNav.node.parentItem;return ln==="compare"?t.createElement(i.Y,{navModel:this.props.sectionNav,pageNav:xa},t.createElement(Er.me,{onClick:this.reset,baseVersion:Zt?.version,newVersion:En?.version,isNewLatest:Fn}),Vn?t.createElement(Ir,{msg:"Fetching changes\u2026"}):t.createElement(zs,{newInfo:En,baseInfo:Zt,isNewLatest:Fn,diffData:sa})):t.createElement(i.Y,{navModel:this.props.sectionNav,pageNav:xa},Vn?t.createElement(Ir,{msg:"Fetching history list\u2026"}):t.createElement(ts,{versions:Ft,onCheck:this.onCheck,canCompare:ga}),this.state.isAppending&&t.createElement(Ir,{msg:"Fetching more entries\u2026"}),Ga&&t.createElement(Er.rJ,{hasMore:qa,canCompare:ga,getVersions:this.getVersions,getDiff:this.getDiff,isLastPage:!!this.isLastPage()}))}}const Ir=({msg:Mt})=>t.createElement(P.Gy,null,t.createElement(y.y,null),t.createElement("em",null,Mt)),Ho=()=>r.Ny.partial({editview:null,editIndex:null});function Ar({dashboard:Mt,editview:Ft,pageNav:ln,sectionNav:Zt}){const[En,Fn]=(0,t.useState)(0);(0,t.useEffect)(()=>{Mt.events.subscribe(h.Cf,()=>Fn(Ss=>Ss+1))},[Mt]);const Vn=(0,t.useMemo)(()=>_r(Mt),[Mt,En]),sa=()=>{Mt.meta.hasUnsavedFolderChange=!1},ga=Vn.find(Ss=>Ss.id===Ft)??Vn[0],Ga=f.TP.hasEditPermissionInFolders,qa=Mt.meta.canSave,xa=(0,n.zy)(),Qa=fo(xa),ar=Go(ln,Zt,Vn,ga,xa),ys="sm",ks=[t.createElement(g.$n,{"data-testid":s.Tp.pages.Dashboard.Settings.Actions.close,variant:"secondary",key:"close",fill:"outline",size:ys,onClick:Ho},"Close"),Ga&&t.createElement(_t.m,{dashboard:Mt,onSaveSuccess:sa,variant:"secondary",key:"save as",size:ys}),qa&&t.createElement(_t.C,{dashboard:Mt,onSaveSuccess:sa,key:"Save",size:ys})];return t.createElement(t.Fragment,null,t.createElement(d.H,{actions:t.createElement(u.U,{alignment:"right"},ks)}),t.createElement(ga.component,{sectionNav:ar,dashboard:Mt,editIndex:Qa}))}function _r(Mt){const Ft=[],ln=(0,l.t)("dashboard-settings.general.title","General");Mt.meta.canEdit&&(Ft.push({title:ln,id:"settings",icon:"sliders-v-alt",component:ss}),Ft.push({title:(0,l.t)("dashboard-settings.annotations.title","Annotations"),id:"annotations",icon:"comment-alt",component:An,subTitle:"Annotation queries return events that can be visualized as event markers in graphs across the dashboard."}),Ft.push({title:(0,l.t)("dashboard-settings.variables.title","Variables"),id:"templating",icon:"calculator-alt",component:Dt,subTitle:"Variables can make your dashboard more dynamic and act as global filters."}),Ft.push({title:(0,l.t)("dashboard-settings.links.title","Links"),id:"links",icon:"link",component:Js})),Mt.meta.canMakeEditable&&Ft.push({title:ln,icon:"sliders-v-alt",id:"settings",component:yo}),Mt.id&&Mt.meta.canSave&&Ft.push({title:(0,l.t)("dashboard-settings.versions.title","Versions"),id:"versions",icon:"history",component:xt});const Zt=(0,l.t)("dashboard-settings.permissions.title","Permissions");return Mt.id&&Mt.meta.canAdmin&&f.TP.hasPermission(c.AccessControlAction.DashboardsPermissionsRead)&&Ft.push({title:Zt,id:"permissions",icon:"lock",component:Vt}),Ft.push({title:(0,l.t)("dashboard-settings.json-editor.title","JSON Model"),id:"dashboard_json",icon:"arrow",component:hr}),Ft}function ir(Mt,Ft){return{...Mt,parentItem:Mt.parentItem?ir(Mt.parentItem,Ft):Ft}}function Go(Mt,Ft,ln,Zt,En){const Fn={text:(0,l.t)("dashboard-settings.settings.title","Settings"),children:[],icon:"apps",hideFromBreadcrumbs:!1,url:o.I.getUrlForPartial(En,{editview:"settings",editIndex:null})};Fn.children=ln.map(sa=>({text:sa.title,icon:sa.icon,id:sa.id,url:o.I.getUrlForPartial(En,{editview:sa.id,editIndex:null}),active:sa===Zt,parentItem:Fn,subTitle:sa.subTitle}));const Vn=ir(Mt,Ft.node);return Fn.parentItem=Vn,{main:Fn,node:Fn.children.find(sa=>sa.active)}}function yo({dashboard:Mt,sectionNav:Ft}){return t.createElement(i.Y,{navModel:Ft},t.createElement("div",{className:"dashboard-settings__header"},"Dashboard not editable"),t.createElement(g.$n,{type:"submit",onClick:()=>Mt.makeEditable()},"Make editable"))}function fo(Mt){const Ft=new URLSearchParams(Mt.search).get("editIndex");if(Ft!=null)return parseInt(Ft,10)}},39712:(Y,A,e)=>{"use strict";e.d(A,{c:()=>y});var t=e(96540),n=e(71678),o=e(55852),s=e(44836),r=e(14792),g=e(32196),u=e(2543),d=e(69733),i=e(5805),l=e(12131),f=e(96374),c=e(37390),h=e(2913),p=e(3673),m=e(11230);const a={cleanUpDashboardAndVariables:p.Bz},v=(0,d.connect)(null,a),E=({hideModal:T,cleanUpDashboardAndVariables:M,dashboard:I})=>{const x=I.meta.provisioned,[,S]=(0,i.default)(async()=>{await(0,m.A_)(I.uid,!0),M(),T(),l.Ny.replace("/")},[T]),O=D(I.panels,I.title);return x?t.createElement(b,{hideModal:T,provisionedId:I.meta.provisionedExternalId}):t.createElement(f.u,{isOpen:!0,body:O,onConfirm:S,onDismiss:T,title:"Delete",icon:"trash-alt",confirmText:"Delete"})},D=(T,M)=>{const I=(0,u.sumBy)(T,x=>x.alert?1:0);return I>0&&!h.$W.unifiedAlertingEnabled?t.createElement(t.Fragment,null,t.createElement("p",null,"Do you want to delete this dashboard?"),t.createElement("p",null,"This dashboard contains ",I," alert",I>1?"s":"",". Deleting this dashboard also deletes those alerts.")):t.createElement(t.Fragment,null,t.createElement("p",null,"Do you want to delete this dashboard?"),t.createElement("p",null,M))},b=({hideModal:T,provisionedId:M})=>t.createElement(c.a,{isOpen:!0,title:"Cannot delete provisioned dashboard",icon:"trash-alt",onDismiss:T,className:(0,g.css)`
      width: 500px;
    `},t.createElement("p",null,"This dashboard is managed by Grafana provisioning and cannot be deleted. Remove the dashboard from the config file to delete it."),t.createElement("p",null,t.createElement("i",null,"See"," ",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),t.createElement("br",null),"File path: ",M),t.createElement(c.a.ButtonRow,null,t.createElement(o.$n,{variant:"primary",onClick:T},"OK"))),P=v(E),y=()=>{const T=(0,r.UA)().getCurrent();return t.createElement(n.$s,null,({showModal:M,hideModal:I})=>t.createElement(o.$n,{variant:"destructive",onClick:()=>{M(P,{dashboard:T,hideModal:I})},"aria-label":"Dashboard settings page delete dashboard button"},t.createElement(s.x6,{i18nKey:"dashboard-settings.dashboard-delete-button"},"Delete Dashboard")))}},10740:(Y,A,e)=>{"use strict";e.d(A,{n:()=>W,C:()=>H});var t=e(32196),n=e(96540),o=e(40845),s=e(55852),r=e(94753),g=e(60782),u=e(62930),d=e(56034),i=e(42418),l=e(66864),f=e(10354),c=e(29158),h=e(14578),p=e(72109);const m=({currentPage:V,numberOfPages:G,onNavigate:_,hideWhenSinglePage:K,className:j})=>{const k=(0,o.of)(a);return K&&G<=1?null:n.createElement("div",{className:(0,t.cx)(k.wrapper,j)},n.createElement(c.K,{name:"angle-left",size:"md",tooltip:"Previous",onClick:()=>_(V-1),disabled:V===1}),V," of ",G,n.createElement(c.K,{name:"angle-right",size:"md",tooltip:"Next",onClick:()=>_(V+1),disabled:V===G}))},a=V=>({wrapper:(0,t.css)({display:"flex",flexDirection:"row",gap:16,userSelect:"none"})});var v=e(16817),E=e(65418),D=e(34867),b=e(3169),P=e(3363);const y=(0,D.DW)("features.dashboards.genai");var T=(V=>(V.IDLE="idle",V.GENERATING="generating",V.COMPLETED="completed",V))(T||{});const M=1e4;function I(V=P.C4,G=1){const[_,K]=(0,n.useState)([]),[j,k]=(0,n.useState)(!1),[Q,ee]=(0,n.useState)(""),[ae,Z]=(0,n.useState)("idle"),[ne,q]=(0,n.useState)(),{error:te}=(0,b._2)(),re=(0,n.useCallback)(ye=>{Z("idle"),K([]),k(!1),q(ye),te("Failed to generate content using OpenAI","Please try again or if the problem persists, contact your organization admin."),console.error(ye),y.logError(ye,{messages:JSON.stringify(_),model:V,temperature:String(G)})},[_,V,G,te]),{error:de,value:ie}=(0,v.A)(async()=>await(0,P.QX)(),[P.QX]),{error:ge,value:ve}=(0,v.A)(async()=>{if(!ie||!_.length)return{enabled:ie};Z("generating"),q(void 0);const ye=E.qH({model:V,temperature:G,messages:_}).pipe(E.qA());return{enabled:ie,stream:ye.subscribe({next:ee,error:re,complete:()=>{Z("completed"),setTimeout(()=>{Z("idle")}),K([]),k(!1),q(void 0)}})}},[_,ie]);return(0,n.useEffect)(()=>()=>{ve?.stream&&ve.stream.unsubscribe()},[ve]),(0,n.useEffect)(()=>{j&&(ve?.stream?.unsubscribe(),Z("idle"),k(!1),q(void 0),K([]))},[j,ve?.stream]),(0,n.useEffect)(()=>{let ye;return ae==="generating"&&Q===""&&(ye=setTimeout(()=>{re(new Error(`OpenAI stream timed out after ${M}ms`))},M)),()=>{ye&&clearTimeout(ye)}},[ae,Q,re]),(ge||de)&&q(ge||de),{setMessages:K,setStopGeneration:k,messages:_,reply:Q,streamStatus:ae,error:ne,value:ve}}const x=({history:V,index:G,reply:_,streamStatus:K,onNavigate:j})=>{const k=(0,o.of)(S),Q=V.length,ee=()=>_&&K!==T.IDLE?_:V[G-1];return n.createElement(n.Fragment,null,n.createElement(m,{currentPage:G,numberOfPages:Q,onNavigate:j,hideWhenSinglePage:!0,className:k.paginationWrapper}),n.createElement("div",{className:k.contentWrapper},n.createElement(r.E,{element:"p",color:"secondary"},ee())))},S=V=>({paginationWrapper:(0,t.css)({display:"flex",flexDirection:"row",justifyContent:"flex-end",marginTop:15}),contentWrapper:(0,t.css)({display:"flex",flexBasis:"100%",flexGrow:3,whiteSpace:"pre-wrap",marginTop:20,height:110,overflowY:"scroll"})}),O=({onSuggestionClick:V,isGenerating:G})=>{const _=(0,o.of)(C);return n.createElement("div",{className:_.quickSuggestionsWrapper},n.createElement(s.$n,{onClick:()=>V(P.HG.Shorter),size:"sm",variant:"secondary",disabled:G},P.HG.Shorter),n.createElement(s.$n,{onClick:()=>V(P.HG.MoreDescriptive),size:"sm",variant:"secondary",disabled:G},P.HG.MoreDescriptive),n.createElement(s.$n,{onClick:()=>V(P.HG.Regenerate),size:"sm",variant:"secondary",disabled:G},P.HG.Regenerate))},C=V=>({quickSuggestionsWrapper:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"wrap",flexGrow:1,gap:8,paddingTop:10})});var L=e(57725);const U=.5,R=({eventTrackingSrc:V,history:G,messages:_,onApplySuggestion:K,updateHistory:j})=>{const k=(0,o.of)(B),[Q,ee]=(0,n.useState)(1),[ae,Z]=(0,n.useState)(!1),[ne,q]=(0,n.useState)(""),{setMessages:te,setStopGeneration:re,reply:de,streamStatus:ie,error:ge}=I(P.C4,U),ve=ie===T.GENERATING,ye=(Be,we)=>(0,L.XX)(V,Be,we);(0,n.useEffect)(()=>{!ve&&de!==""&&ee(1)},[ve,de]),(0,n.useEffect)(()=>{ie===T.COMPLETED&&j((0,P.Kb)(de))},[ie,de,j]),(0,n.useEffect)(()=>{ge&&Z(!0),ie===T.GENERATING&&Z(!1)},[ge,ie]);const pe=Be=>{De(Be),ye(L.KR.customFeedback,{customFeedback:Be})},le=()=>{ve?(re(!0),de!==""&&j((0,P.Kb)(de))):K(G[Q-1])},Me=Be=>{ee(Be),ye(Be>Q?L.KR.backHistoryItem:L.KR.forwardHistoryItem)},De=Be=>{Be!==P.HG.Regenerate&&(_=[..._,...(0,P.To)(G[Q],Be)]),te(_),Be in P.HG&&ye(L.KR.quickFeedback,{quickFeedbackItem:Be})},Re=Be=>Be.key==="Enter"&&pe(ne),me=Be=>q(Be.currentTarget.value),he=()=>pe(ne),Te=()=>ye(L.KR.linkToDocs);return n.createElement("div",{className:k.container},ae&&n.createElement("div",null,n.createElement(i.F,{title:""},n.createElement(l.gW,null,n.createElement("div",null,"Sorry, I was unable to complete your request. Please try again.")))),n.createElement(f.p,{placeholder:"Tell AI what to do next...",suffix:n.createElement(c.K,{name:"corner-down-right-alt",variant:"secondary","aria-label":"Send custom feedback",onClick:he,disabled:ne===""}),value:ne,onChange:me,onKeyDown:Re}),n.createElement("div",{className:k.actions},n.createElement(O,{onSuggestionClick:De,isGenerating:ve}),n.createElement(x,{history:G,index:Q,onNavigate:Me,reply:(0,P.Kb)(de),streamStatus:ie})),n.createElement("div",{className:k.applySuggestion},n.createElement(l.Gy,{justify:"flex-end"},n.createElement(s.$n,{icon:ve?"fa fa-spinner":"check",onClick:le},ve?H:"Apply"))),n.createElement("div",{className:k.footer},n.createElement(h.I,{name:"exclamation-circle","aria-label":"exclamation-circle",className:k.infoColor}),n.createElement(r.E,{variant:"bodySmall",color:"secondary"},"This content is AI-generated using the"," ",n.createElement(p.Y,{variant:"bodySmall",href:"https://grafana.com/docs/grafana-cloud/alerting-and-irm/machine-learning/llm-plugin/",external:!0,onClick:Te},"Grafana LLM plugin"))))},B=V=>({container:(0,t.css)({display:"flex",flexDirection:"column",width:520,height:250,paddingBottom:35}),applySuggestion:(0,t.css)({marginTop:V.spacing(1)}),actions:(0,t.css)({display:"flex",flexDirection:"row",flexWrap:"wrap"}),footer:(0,t.css)({position:"absolute",bottom:0,left:0,width:"100%",display:"flex",flexDirection:"row",margin:0,padding:V.spacing(1),paddingLeft:V.spacing(2),alignItems:"center",gap:V.spacing(1),borderTop:`1px solid ${V.colors.border.weak}`,marginTop:V.spacing(2)}),infoColor:(0,t.css)({color:V.colors.info.main})}),H="Stop generating",W=({text:V="Auto-generate",toggleTipTitle:G="",onClick:_,model:K=P.C4,messages:j,onGenerate:k,temperature:Q=1,eventTrackingSrc:ee,disabled:ae})=>{const Z=(0,o.of)(N),{messages:ne,setMessages:q,setStopGeneration:te,reply:re,value:de,error:ie,streamStatus:ge}=I(K,Q),[ve,ye]=(0,n.useState)([]),[pe,le]=(0,n.useState)(!0),Me=ve.length>0,De=ge===T.GENERATING&&!Me,Re=ae||de&&!de.enabled&&!ie,me=Qe=>(0,L.XX)(ee,Qe),he=Qe=>{ge===T.GENERATING?te(!0):Me?le&&le(!0):(_?.(Qe),q(typeof j=="function"?j():j));const ke=ie?L.KR.erroredRetryButton:De?L.KR.stopGenerationButton:Me?L.KR.improveButton:L.KR.autoGenerateButton;me(ke)},Te=(0,n.useCallback)(Qe=>{ve.indexOf(Qe)===-1&&ye([Qe,...ve])},[ve]);if((0,n.useEffect)(()=>{De&&re&&k((0,P.Kb)(re))},[ge,re,k,De]),(0,n.useEffect)(()=>{ge===T.COMPLETED&&Te((0,P.Kb)(re))},[ve,ge,re,Te]),!de?.enabled)return null;const Be=Qe=>{me(L.KR.applySuggestion),k(Qe),le(!1)},we=()=>{if(!De)return ie||de&&!de?.enabled?"exclamation-circle":"ai"},Ne=()=>{let Qe=V;return ie&&(Qe="Retry"),De&&(Qe=H),Me&&(Qe="Improve"),Qe},Ze=n.createElement(s.$n,{icon:we(),onClick:he,fill:"text",size:"sm",disabled:Re,variant:ie?"destructive":"primary"},Ne()),st=()=>{if(Me){const Qe=n.createElement(r.E,{element:"p"},G);return n.createElement(g.G,{title:Qe,content:n.createElement(R,{history:ve,messages:ne,onApplySuggestion:Be,updateHistory:Te,eventTrackingSrc:ee}),placement:"bottom-start",fitContent:!0,show:pe?void 0:!1},Ze)}return Ze};return n.createElement("div",{className:Z.wrapper},De&&n.createElement(u.y,{size:"sm",className:Z.spinner}),!Me&&n.createElement(d.m,{show:ie?void 0:!1,interactive:!0,content:"Failed to generate content using OpenAI. Please try again or if the problem persist, contact your organization admin."},Ze),Me&&st())},N=V=>({wrapper:(0,t.css)({display:"flex"}),spinner:(0,t.css)({color:V.colors.text.link})})},81394:(Y,A,e)=>{"use strict";e.d(A,{V:()=>u});var t=e(96540),n=e(10740),o=e(57725),s=e(3363);const g=`You are an expert in creating Grafana Dashboards.
Your goal is to write a descriptive and concise dashboard description.
You will be given the title and description of the dashboard's panels.
The dashboard description is meant to explain the purpose of the dashboard and what its panels show.
If the dashboard has no panels, the description should be "Empty dashboard"
There should be no numbers in the description except where they are important.
The dashboard description should not have the dashboard title or any quotation marks in it.
The description should be, at most, 300 characters.
Respond with only the description of the dashboard.`,u=({onGenerate:i,dashboard:l})=>{const f=t.useMemo(()=>d(l),[l]);return t.createElement(n.n,{messages:f,onGenerate:i,eventTrackingSrc:o.ec.dashboardDescription,toggleTipTitle:"Improve your dashboard description"})};function d(i){const l=(0,s.BB)(i);return[{content:g,role:s.Xh.system},{content:`The title of the dashboard is "${i.title}"
${l}`,role:s.Xh.system}]}},27966:(Y,A,e)=>{"use strict";e.d(A,{Z:()=>u});var t=e(96540),n=e(10740),o=e(57725),s=e(3363);const g=`You are an expert in creating Grafana Dashboards.
Your goal is to write a concise dashboard title.
You will be given the title and description of the dashboard's panels.
The dashboard title is meant to say what it shows on one line for users to navigate to it.
If the dashboard has no panels, the title should be "Empty dashboard"
There should be no numbers in the title.
The dashboard title should not have quotation marks in it.
The title should be, at most, 50 characters.
Respond with only the title of the dashboard.`,u=({onGenerate:i,dashboard:l})=>{const f=t.useMemo(()=>d(l),[l]);return t.createElement(n.n,{messages:f,onGenerate:i,eventTrackingSrc:o.ec.dashboardTitle,toggleTipTitle:"Improve your dashboard title"})};function d(i){return[{content:g,role:s.Xh.system},{content:`The panels in the dashboard are: ${(0,s.BB)(i)}`,role:s.Xh.system}]}},57725:(Y,A,e)=>{"use strict";e.d(A,{KR:()=>s,XX:()=>r,ec:()=>o});var t=e(14110);const n="dashboards_autogenerate_clicked";var o=(g=>(g.panelDescription="panel-description",g.panelTitle="panel-title",g.dashboardChanges="dashboard-changes",g.dashboardTitle="dashboard-title",g.dashboardDescription="dashboard-description",g.unknown="unknown",g))(o||{}),s=(g=>(g.autoGenerateButton="auto-generate-button",g.erroredRetryButton="errored-retry-button",g.stopGenerationButton="stop-generating-button",g.improveButton="improve-button",g.backHistoryItem="back-history-item",g.forwardHistoryItem="forward-history-item",g.quickFeedback="quick-feedback",g.linkToDocs="link-to-docs",g.customFeedback="custom-feedback",g.applySuggestion="apply-suggestion",g))(s||{});function r(g,u,d){(0,t.rR)(n,{src:g,item:u,...d})}},3363:(Y,A,e)=>{"use strict";e.d(A,{C4:()=>m,HG:()=>p,Xh:()=>h,Yy:()=>v,BB:()=>b,To:()=>D,hn:()=>P,QX:()=>E,Kb:()=>a});var t=e(65418),n=e(90254),o=e(34214);function s(y,T){return y===T?T:Array.isArray(y)&&Array.isArray(T)?u(y,T):r(y)&&r(T)?g(y,T):T}function r(y){return typeof y=="object"&&!Array.isArray(y)&&y!==null}function g(y,T){const M=Object.keys(y),I={};for(const x of M)T.hasOwnProperty(x)&&(Array.isArray(y[x])&&Array.isArray(T[x])||typeof y[x]=="object"&&typeof T[x]=="object"?I[x]=s(y[x],T[x]):I[x]=T[x]);return I}function u(y,T){const M=new Array(y.length).fill(void 0),I=new Set([...Array(y.length).keys()]),x=new Set([...Array(T.length).keys()]);for(let S=0;S<y.length&&x.size!==0;S++){let O=y[S];for(let C=0;C<T.length;C++){if(!x.has(C))continue;let L=T[C];L=s(O,L),JSON.stringify(O)===JSON.stringify(L)&&(I.delete(S),x.delete(C),M[S]=L)}}return d(y,T,M,I,x),M.filter(S=>S!==void 0)}function d(y,T,M,I,x){let S={};x.forEach(C=>{let L=T[C];if(typeof L!="object"||Array.isArray(L)){M.push(L),x.delete(C);return}I.forEach(U=>{let R=y[U];if(typeof R!="object"||Array.isArray(R)){I.delete(U);return}let B=0;for(const H in R){let W=R[H];if(!L.hasOwnProperty(H))continue;let N=L[H];typeof W!="string"&&typeof W!="number"||typeof W!=typeof N||W===N&&(H==="id"&&(B+=1e3),B++)}B!==0&&(S[B]===void 0&&(S[B]=[]),S[B].push([U,C]))})});const O=Object.keys(S).map(Number);O.sort((C,L)=>L-C);for(const C of O){let L=S[C];for(const U of L){const[R,B]=U;I.has(R)&&x.has(B)&&(M[R]=T[B],I.delete(R),x.delete(B))}}for(const C of x)M.push(T[C])}function i(y){const T=y.split(`
`);let M=y[0].startsWith("Index")?4:3,I=T.slice(0,M);const x=/("title"|Title|\{|\}|\[|\])/i;for(let S=M;S<T.length;S++){let O=T[S];(x.test(O)||O.startsWith("+")||O.startsWith("-"))&&I.push(O)}return I.join(`
`)+`
`}function l(y){if(y===null||y==="")return null;if(Array.isArray(y)){const M=y.map(I=>l(I)).filter(I=>I!==null);return M.length>0?M:null}if(typeof y!="object")return y;const T={};for(const M in y){const I=l(y[M]);if(I!==null){if(Array.isArray(I)&&I.length===0||typeof I=="object"&&Object.keys(I).length===0)continue;T[M]=I}}return Object.keys(T).length>0?T:null}function f(y){return JSON.parse(JSON.stringify(y,null,2))}function c(y){let T=f(y.getOriginalDashboard()),M=f(new o.G(T).getSaveModelClone()),I=f(y.getSaveModelClone());M=l(s(T,M)),I=l(s(M,I)),T=l(T);let x=(0,n.ss)("Before migration changes","After migration changes",JSON.stringify(T,null,2),JSON.stringify(M,null,2),"","",{context:20}),S=(0,n.ss)("Before user changes","After user changes",JSON.stringify(M,null,2),JSON.stringify(I,null,2),"","",{context:20});return x=i(x),S=i(S),{migrationDiff:x,userDiff:S}}var h=(y=>(y.system="system",y.user="user",y))(h||{}),p=(y=>(y.Shorter="Even shorter",y.MoreDescriptive="More descriptive",y.Regenerate="Regenerate",y))(p||{});const m="gpt-4",a=y=>y.replace(/^"|"$/g,"");function v(y){const{migrationDiff:T,userDiff:M}=c(y);return{userChanges:M,migrationChanges:T}}async function E(){return t.vK().then(y=>y.ok)}const D=(y,T)=>[{role:"system",content:`Your previous response was: ${y}. The user has provided the following feedback: ${T}. Re-generate your response according to the provided feedback.`}];function b(y){const T=(x,S)=>`- Panel ${S}
- Title: ${x.title}${x.description?`
- Description: ${x.description}`:""}`,M=y.panels.map(T);let I;if(M.length<=10)I=`The panels in the dashboard are:
${M.join(`
`)}`;else{const x=y.panels.filter(C=>C.description),S=y.panels.filter(C=>!C.description);let O;x.length>=10?O=x.slice(10).map(T).join(`
`):(O=x.map(T).join(`
`),O+=`
`,O+=S.slice(10-x.length).map(T).join("n")),I=`There are ${M.length} panels.
Due to space constraints, only the information for ten of them is presented.
These ten are not necessarily the first ten, but prioritized to those with descriptions.
The panels in the dashboard are:
${O}`}return I}function P(y){const T=y.getSaveModel(),M=new Set(["id","datasource","title","description","targets","thresholds","type","xaxis","yaxes"]),I=Object.keys(T).reduce((x,S)=>(M.has(S)&&(x[S]=T[S]),x),{});return JSON.stringify(I,null,2)}},18803:(Y,A,e)=>{"use strict";e.d(A,{B6:()=>f,E_:()=>h,jD:()=>c});var t=e(2543),n=e.n(t),o=e(72985),s=e(89667),r=e(52622),g=e(72724),u=e(39070),d=e(32264),i=e(41524),l=e(68706);function f(E){const D=[];if(E?.series)for(const b of E.series)D.push((0,s.Nw)(b));if(E?.annotations)for(const b of E.annotations){const P=(0,s.Nw)(b);P.schema?.meta||(P.schema.meta={}),P.schema.meta.dataTopic=r.QR.Annotations,D.push(P)}return D}function c(E,D){const b=E.getSaveModel(),P={panelType:b.type,datasource:"??"},y=`${d.$.buildInfo.version} (${d.$.buildInfo.commit})`;let T=`| Key | Value |
|--|--|
| Panel | ${P.panelType} @ ${b.pluginVersion??y} |
| Grafana | ${y} // ${d.$.buildInfo.edition} |
`;return D&&(T+="<details><summary>Panel debug snapshot dashboard</summary>\n\n```json\n"+D+"\n```\n</details>"),T}async function h(E,D,b){const P=E.getSaveModel(),y=(0,t.cloneDeep)(v),T={panelType:P.type,datasource:"??"},M=await(0,o._)(E.getQueryRunner().getData({withFieldConfig:!1,withTransforms:!1})),I=E.datasource,x=(0,i.W)(f(M),D),S=`${d.$.buildInfo.version} (${d.$.buildInfo.commit})`,O=P?.targets??[],C=`<table width="100%">
    <tr>
      <th width="2%">Panel</th>
      <td >${T.panelType} @ ${P.pluginVersion??S}</td>
    </tr>
    <tr>
      <th>Queries</th>
      <td>${O.map(L=>{const U=L.datasource??I;return`${L.refId}[${U?.type}]`}).join(", ")}</td>
    </tr>
    ${p(P)}
    ${m(M,x)}
    ${a(M)}
    <tr>
      <th>Grafana</th>
      <td>${S} // ${d.$.buildInfo.edition}</td>
    </tr>
  </table>`.trim();if(y.panels[0]={...P,...y.panels[0],targets:[{refId:"A",datasource:{type:"grafana",uid:"grafana"},queryType:l.nj.Snapshot,snapshot:x}]},P.transformations?.length){const L=y.panels[y.panels.length-1];L.title=L.title+" (after transformations)";const U=(0,t.cloneDeep)(L);U.id=100,U.title="Data (before transformations)",U.gridPos.w=24,U.targets[0].withTransforms=!1,y.panels.push(U)}return M.annotations?.length&&y.panels.push({id:7,gridPos:{h:6,w:24,x:0,y:20},type:"table",title:"Annotations",datasource:{type:"datasource",uid:"-- Dashboard --"},options:{showTypeIcons:!0},targets:[{datasource:{type:"datasource",uid:"-- Dashboard --"},panelId:2,withTransforms:!0,topic:r.QR.Annotations,refId:"A"}]}),y.panels[1].options.content=C,y.panels[2].options.content=JSON.stringify(P,null,2),y.title=`Debug: ${P.title} // ${(0,g.LE)(new Date)}`,y.tags=["debug",`debug-${T.panelType}`],y.time={from:b.from.toISOString(),to:b.to.toISOString()},y}function p(E){return E.transformations?`<tr>
      <th>Transform</th>
      <td>${E.transformations.map(D=>D.id).join(", ")}</td>
  </tr>`:""}function m(E,D){let b=E.series.length??0,P=0,y=0;for(const T of E.series)P+=T.fields.length,y+=T.length;return`<tr><th>Data</th><td>${E.state!==u.Gu.Done?E.state:""} ${b} frames, ${P} fields, ${y} rows </td></tr>`}function a(E){return E.annotations?.length?`<tr>
  <th>Annotations</th>
  <td>${E.annotations.map((D,b)=>`<span>${D.length}</span>`)}</td>
</tr>`:""}const v={panels:[{id:2,title:"Reproduced with embedded data",datasource:{type:"grafana",uid:"grafana"},gridPos:{h:13,w:15,x:0,y:0}},{gridPos:{h:7,w:9,x:15,y:0},id:5,options:{content:"...",mode:"html"},title:"Debug info",type:"text"},{id:6,title:"Original Panel JSON",type:"text",gridPos:{h:13,w:9,x:15,y:7},options:{content:"...",mode:"code",code:{language:"json",showLineNumbers:!0,showMiniMap:!0}}},{id:3,title:"Data from panel above",type:"table",datasource:{type:"datasource",uid:"-- Dashboard --"},gridPos:{h:7,w:15,x:0,y:13},options:{showTypeIcons:!0},targets:[{datasource:{type:"datasource",uid:"-- Dashboard --"},panelId:2,withTransforms:!0,refId:"A"}]}],schemaVersion:37}},65123:(Y,A,e)=>{"use strict";e.d(A,{BN:()=>d,kx:()=>i,sd:()=>u});var t=e(96540),n=e(24705),o=e(19347),s=e(44836),r=e(16560),g=e(54612);const u=l=>(0,n.A)(async()=>d(l),[l]).value;async function d(l){const f=l?.request?.targets||[];if(l&&l.series&&f.length){for(const c of l.series)if(c.meta&&c.meta.custom){const h=await(0,o.l)().get(f[0].datasource);if(h&&h.components?.MetadataInspector)return h}}}const i=(l,f,c,h,p)=>(0,t.useMemo)(()=>{const m=[];return(0,g.$)(c)&&(m.push({label:(0,s.t)("dashboard.inspect.data-tab","Data"),value:r.q.Data}),m.push({label:(0,s.t)("dashboard.inspect.stats-tab","Stats"),value:r.q.Stats})),p&&m.push({label:(0,s.t)("dashboard.inspect.meta-tab","Meta data"),value:r.q.Meta}),m.push({label:(0,s.t)("dashboard.inspect.json-tab","JSON"),value:r.q.JSON}),h&&m.push({label:(0,s.t)("dashboard.inspect.error-tab","Error"),value:r.q.Error}),f.meta.canEdit&&(0,g.$)(c)&&m.push({label:(0,s.t)("dashboard.inspect.query-tab","Query"),value:r.q.Query}),m},[c,p,f,h])},57755:(Y,A,e)=>{"use strict";e.d(A,{D:()=>f});var t=e(32196),n=e(96540),o=e(78685),s=e(13544),r=e(53402),g=e(40845),u=e(55852),d=e(83277),i=e(53466);const l="showCategory",f=n.memo(({id:p,title:m,children:a,forceOpen:v,isOpenDefault:E=!0,renderTitle:D,className:b,itemsCount:P,isNested:y=!1,sandboxId:T})=>{const[M,I]=(0,o.A)(h(p),{isExpanded:E}),[x,S]=(0,n.useState)(M?.isExpanded??E),O=(0,n.useRef)(0),C=(0,n.useRef)(null),[L,U]=(0,d.s)(),R=L[l]===p;(0,n.useEffect)(()=>{O.current&&Date.now()-O.current<200||(R||v)&&(x||S(!0),R&&C.current?.scrollIntoView())},[v,x,R]);const B=(0,n.useCallback)(()=>{O.current=Date.now(),U({[l]:x?void 0:p},!0),I({isExpanded:!x}),S(!x)},[I,S,U,x,p]);D||(D=function(_){return _||P===void 0||P===0?m:n.createElement("span",null,m," ",n.createElement(r.p,{value:P}))});const H=(0,g.of)(c),W=(0,t.cx)({[H.box]:!0,[H.boxNestedExpanded]:y&&x},b),N=(0,t.cx)(H.header,{[H.headerExpanded]:x,[H.headerNested]:y}),V=(0,t.cx)(H.body,{[H.bodyNested]:y});return n.createElement("div",{className:W,"data-testid":"options-category","data-plugin-sandbox":T,"aria-label":s.Tp.components.OptionsGroup.group(p),ref:C},n.createElement("div",{className:N,onClick:B},n.createElement(u.$n,{"aria-label":s.Tp.components.OptionsGroup.toggle(p),type:"button",fill:"text",size:"sm",variant:"secondary","aria-expanded":x,className:H.toggleButton,icon:x?"angle-down":"angle-right",onClick:B}),n.createElement("h6",{id:`button-${p}`,className:H.title},D(x))),x&&n.createElement("div",{className:V,id:p,"aria-labelledby":`button-${p}`},a))});f.displayName="OptionsPaneCategory";const c=p=>({box:(0,t.css)({borderTop:`1px solid ${p.colors.border.weak}`}),boxNestedExpanded:(0,t.css)({marginBottom:p.spacing(2)}),title:(0,t.css)({flexGrow:1,overflow:"hidden",lineHeight:1.5,fontSize:"1rem",paddingLeft:"6px",fontWeight:p.typography.fontWeightMedium,margin:0}),header:(0,t.css)({display:"flex",cursor:"pointer",alignItems:"center",padding:p.spacing(.5),color:p.colors.text.primary,fontWeight:p.typography.fontWeightMedium,"&:hover":{background:p.colors.emphasize(p.colors.background.primary,.03)}}),toggleButton:(0,t.css)({alignSelf:"baseline"}),headerExpanded:(0,t.css)({color:p.colors.text.primary}),headerNested:(0,t.css)({padding:p.spacing(.5,0,.5,0)}),body:(0,t.css)({padding:p.spacing(1,2,1,4)}),bodyNested:(0,t.css)({position:"relative",paddingRight:0,"&:before":{content:"''",position:"absolute",top:0,left:"8px",width:"1px",height:"100%",background:p.colors.border.weak}})}),h=p=>`${i.wi}.optionGroup[${p}]`},48192:(Y,A,e)=>{"use strict";e.d(A,{C:()=>o});var t=e(96540),n=e(57755);class o{constructor(r){this.props=r,this.items=[],this.categories=[]}addItem(r){return r.parent=this,this.items.push(r),this}addCategory(r){return r.props.isNested=!0,r.parent=this,this.categories.push(r),this}getCategory(r){let g=this.categories.find(u=>u.props.id===r);return g||(g=new o({title:r,id:r}),this.addCategory(g)),g}render(r){return this.props.customRender?this.props.customRender():t.createElement(n.D,{key:this.props.title,...this.props},this.items.map(g=>g.render(r)),this.categories.map(g=>g.render(r)))}}},74097:(Y,A,e)=>{"use strict";e.d(A,{v:()=>c});var t=e(32196),n=e(96540),o=e(23257),s=e.n(o),r=e(13544),g=e(60029),u=e(88575),d=e(40845),i=e(56034);function l({overrides:m}){const a=(0,d.of)(f);return n.createElement("div",{className:a.wrapper},m.map((v,E)=>n.createElement(i.m,{content:v.tooltip,key:E.toString(),placement:"top"},n.createElement("div",{"aria-label":v.description,className:a[v.type]}))))}const f=m=>{const a={width:8,height:8,borderRadius:m.shape.radius.circle,marginLeft:m.spacing(1),top:"-1px"};return{wrapper:(0,t.css)({display:"flex"}),rule:(0,t.css)({...a,position:"relative",backgroundColor:m.colors.primary.main}),data:(0,t.css)({...a,position:"relative",backgroundColor:m.colors.warning.main})}};class c{constructor(a){this.props=a}getLabel(a){const{title:v,description:E,overrides:D,addon:b}=this.props;if(!a)return this.parent.props.title===v&&!D?.length?null:n.createElement(h,{title:v,description:E,overrides:D,addon:b});const P=[];return this.parent.parent&&P.push(this.highlightWord(this.parent.parent.props.title,a)),this.parent.props.title!==v&&P.push(this.highlightWord(this.parent.props.title,a)),n.createElement(g.J,{description:E&&this.highlightWord(E,a),category:P},this.highlightWord(v,a),D&&D.length>0&&n.createElement(l,{overrides:D}))}highlightWord(a,v){return n.createElement(s(),{textToHighlight:a,searchWords:[v],highlightClassName:"search-fragment-highlight"})}renderOverrides(){const{overrides:a}=this.props;!a||a.length}render(a){const{title:v,description:E,render:D,showIf:b,skipField:P}=this.props,y=`${this.parent.props.id} ${v}`;return b&&!b()?null:P?D():n.createElement(u.D,{label:this.getLabel(a),description:E,key:y,"aria-label":r.Tp.components.PanelEditor.OptionsPane.fieldLabel(y)},D())}}function h({title:m,description:a,overrides:v,addon:E}){const D=(0,d.of)(p);return n.createElement("div",{className:D.container},n.createElement(g.J,{description:a},m,v&&v.length>0&&n.createElement(l,{overrides:v})),E)}function p(m){return{container:(0,t.css)`
      display: flex;
      justify-content: space-between;
    `}}},14183:(Y,A,e)=>{"use strict";e.d(A,{gs:()=>V,Ff:()=>W,Po:()=>G});var t=e(32196),n=e(96540),o=e(32264),s=e(40845),r=e(67647),g=e(94354),u=e(40276),d=e(74106),i=e(82792),l=e(69733),f=e(7376),c=e(79971),h=e(40334),p=e(33390);function m(K,j){p.A.set(`panel-edit-section-${K}`,j?"true":"false")}function a(K,j){return p.A.getBool(`panel-edit-section-${K}`,j)}const v=(K,j)=>({angularPanelComponent:(0,h.U)(K,j.panel)?.angularComponent}),E={changePanelPlugin:c.gW},D=(0,l.connect)(v,E);class b extends n.PureComponent{constructor(j){super(j)}componentDidMount(){this.loadAngularOptions()}componentDidUpdate(j){(this.props.plugin!==j.plugin||this.props.angularPanelComponent!==j.angularPanelComponent)&&this.cleanUpAngularOptions(),this.loadAngularOptions()}componentWillUnmount(){this.cleanUpAngularOptions()}cleanUpAngularOptions(){this.angularOptions&&(this.angularOptions.destroy(),this.angularOptions=null)}loadAngularOptions(){const{panel:j,angularPanelComponent:k,changePanelPlugin:Q}=this.props;if(!this.element||!k||this.angularOptions)return;const ee=k.getScope();if(!ee.$$childHead){setTimeout(()=>{this.forceUpdate()});return}const ae=ee.$$childHead.ctrl;ae.initEditMode(),ae.onPluginTypeChange=te=>{Q({panel:j,pluginId:te.id})};let Z="";for(let te=0;te<ae.editorTabs.length;te++){const re=ae.editorTabs[te];re.isOpen=a(re.title,te===0),Z+=`
      <div class="panel-options-group" ng-cloak>
        <div class="panel-options-group__header" ng-click="toggleOptionGroup(${te})" aria-label="${re.title} section">
          <div class="panel-options-group__icon">
            <icon name="ctrl.editorTabs[${te}].isOpen ? 'angle-down' : 'angle-right'"></icon>
          </div>
          <div class="panel-options-group__title">${re.title}</div>
        </div>
        <div class="panel-options-group__body" ng-if="ctrl.editorTabs[${te}].isOpen">
          <panel-editor-tab editor-tab="ctrl.editorTabs[${te}]" ctrl="ctrl"></panel-editor-tab>
        </div>
      </div>
      `}const ne=(0,f.E)(),q={ctrl:ae,toggleOptionGroup:te=>{const re=ae.editorTabs[te];re.isOpen=!re.isOpen,m(re.title,!!re.isOpen)}};this.angularOptions=ne.load(this.element,q,Z),this.angularOptions.digest()}render(){return n.createElement("div",{ref:j=>this.element=j})}}const P=(0,l.connect)(v,E)(b);var y=e(57755),T=e(22290),M=e(10354);const I=({panel:K,formatDate:j})=>{const k=(0,s.of)(x),Q=K.libraryPanel?.meta;return Q?n.createElement("div",{className:k.info},n.createElement("div",{className:k.libraryPanelInfo},`Used on ${Q.connectedDashboards} `,Q.connectedDashboards===1?"dashboard":"dashboards"),n.createElement("div",{className:k.libraryPanelInfo},"Last edited on ",j?.(Q.updated,"L")??Q.updated," by",Q.updatedBy.avatarUrl&&n.createElement("img",{width:"22",height:"22",className:k.userAvatar,src:Q.updatedBy.avatarUrl,alt:`Avatar for ${Q.updatedBy.name}`}),Q.updatedBy.name)):null},x=K=>({info:(0,t.css)`
      line-height: 1;
    `,libraryPanelInfo:(0,t.css)`
      color: ${K.colors.text.secondary};
      font-size: ${K.typography.bodySmall.fontSize};
    `,userAvatar:(0,t.css)`
      border-radius: ${K.shape.radius.circle};
      box-sizing: content-box;
      width: 22px;
      height: 22px;
      padding-left: ${K.spacing(1)};
      padding-right: ${K.spacing(1)};
    `});var S=e(48192),O=e(74097);function C(K){const{panel:j,onPanelConfigChange:k,dashboard:Q}=K,ee=new S.C({title:"Library panel options",id:"Library panel options",isOpenDefault:!0});return(0,i.X)(j)&&ee.addItem(new O.v({title:"Name",value:j.libraryPanel.name,popularRank:1,render:function(){return n.createElement(M.p,{id:"LibraryPanelFrameName",defaultValue:j.libraryPanel.name,onBlur:Z=>k("libraryPanel",{...j.libraryPanel,name:Z.currentTarget.value})})}})).addItem(new O.v({title:"Information",render:function(){return n.createElement(I,{panel:j,formatDate:Q.formatDate})}})),ee}var L=e(50632),U=e(7600);class R{constructor(j,k){this.categories=j,this.overrides=k}search(j){const k=new RegExp(j,"i"),ee=this.collectHits(this.categories,k,[]).sort(B).map(ne=>ne.item),Z=this.collectHits(this.overrides,k,[]).sort(B).map(ne=>ne.item);return{optionHits:ee,overrideHits:this.buildOverrideHitCategories(Z),totalCount:this.getAllOptionsCount(this.categories)}}collectHits(j,k,Q){for(const ee of j){const ae=k.test(ee.props.title);for(const Z of ee.items){if(k.test(Z.props.title)){Q.push({item:Z,rank:1});continue}if(Z.props.description&&k.test(Z.props.description)){Q.push({item:Z,rank:2});continue}ae&&Q.push({item:Z,rank:3})}ee.categories.length>0&&this.collectHits(ee.categories,k,Q)}return Q}getAllOptionsCount(j){let k=0;for(const Q of j)k+=Q.items.length,Q.categories.length>0&&(k+=this.getAllOptionsCount(Q.categories));return k}buildOverrideHitCategories(j){const k={};for(const Q of j){let ee=k[Q.parent.props.title];ee||(ee=k[Q.parent.props.title]=new S.C(Q.parent.props),ee.addItem(Q.parent.items[0])),ee.items[0].props.title!==Q.props.title&&ee.addItem(Q)}return Object.values(k)}}function B(K,j){return K.rank-j.rank}function H(K){const j=[];for(const k of K)for(const Q of k.items)Q.props.title==="Unit"&&(Q.props.popularRank=2),Q.props.title==="Min"&&(Q.props.popularRank=3),Q.props.title==="Max"&&(Q.props.popularRank=4),Q.props.title==="Display name"&&(Q.props.popularRank=5),Q.props.popularRank&&j.push(Q);return j.sort((k,Q)=>k.props.popularRank-Q.props.popularRank)}const W=K=>{const{plugin:j,dashboard:k,panel:Q}=K,[ee,ae]=(0,n.useState)(""),[Z,ne]=(0,n.useState)("All"),q=(0,s.of)(_),[te,re,de]=(0,n.useMemo)(()=>[(0,L.q)(K),(0,U.Zm)(K),C(K)],[Q.configRev,K.data,K.instanceState,ee]),ie=(0,n.useMemo)(()=>(0,T.v)(K.panel.fieldConfig,K.plugin.fieldConfigRegistry,K.data?.series??[],ee,K.onFieldConfigsChange),[Q.configRev,K.data,K.instanceState,ee]),ge=[],ve=ee.length>0,ye=(0,n.useMemo)(N,[]),pe=(0,i.X)(Q)?[de,te,...re]:[te,...re];if(ve)ge.push(G(pe,ie,ee)),K.plugin.angularPanelCtrl&&ge.push(n.createElement("div",{className:q.searchNotice,key:"Search notice"},"This is an old visualization type that does not support searching all options."));else switch(Z){case"All":(0,i.X)(Q)&&ge.push(de.render()),ge.push(te.render()),K.plugin.angularPanelCtrl&&ge.push(n.createElement(P,{plugin:j,dashboard:k,panel:Q,key:"AngularOptions"}));for(const Me of re)ge.push(Me.render());for(const Me of ie)ge.push(Me.render());break;case"Overrides":for(const Me of ie)ge.push(Me.render());break;case"Recent":ge.push(n.createElement(y.D,{id:"Recent options",title:"Recent options",key:"Recent options",forceOpen:1},H(pe).map(Me=>Me.render())));break}const le=!ve&&!j.fieldConfigRegistry.isEmpty();return n.createElement("div",{className:q.wrapper},n.createElement("div",{className:q.formBox},Q.isAngularPlugin()&&!j.meta.angular?.hideDeprecation&&n.createElement(d.c,{className:q.angularDeprecationWrapper,showPluginDetailsLink:!0,pluginId:j.meta.id,pluginType:j.meta.type,angularSupportEnabled:o.$?.angularSupportEnabled,interactionElementId:"panel-options"}),n.createElement("div",{className:q.formRow},n.createElement(r.Z,{width:0,value:ee,onChange:ae,placeholder:"Search options"})),le&&n.createElement("div",{className:q.formRow},n.createElement(g.z,{options:ye,value:Z,fullWidth:!0,onChange:ne}))),n.createElement("div",{className:q.scrollWrapper},n.createElement(u.E,{autoHeightMin:"100%"},n.createElement("div",{className:q.mainBox},ge))))};function N(){return[{label:"All",value:"All"},{label:"Overrides",value:"Overrides"}]}var V=(K=>(K.All="All",K.Overrides="Overrides",K.Recent="Recent",K))(V||{});function G(K,j,k){const Q=new R(K,j),{optionHits:ee,totalCount:ae,overrideHits:Z}=Q.search(k);return n.createElement("div",{key:"search results"},n.createElement(y.D,{id:"Found options",title:`Matched ${ee.length}/${ae} options`,key:"Normal options",forceOpen:1},ee.map(ne=>ne.render(k))),Z.map(ne=>ne.render(k)))}const _=K=>({wrapper:(0,t.css)`
    height: 100%;
    display: flex;
    flex-direction: column;
    flex: 1 1 0;

    .search-fragment-highlight {
      color: ${K.colors.warning.text};
      background: transparent;
    }
  `,searchBox:(0,t.css)`
    display: flex;
    flex-direction: column;
    min-height: 0;
  `,formRow:(0,t.css)`
    margin-bottom: ${K.spacing(1)};
  `,formBox:(0,t.css)`
    padding: ${K.spacing(1)};
    background: ${K.colors.background.primary};
    border: 1px solid ${K.components.panel.borderColor};
    border-top-left-radius: ${K.shape.borderRadius(1.5)};
    border-bottom: none;
  `,closeButton:(0,t.css)`
    margin-left: ${K.spacing(1)};
  `,searchHits:(0,t.css)`
    padding: ${K.spacing(1,1,0,1)};
  `,scrollWrapper:(0,t.css)`
    flex-grow: 1;
    min-height: 0;
  `,searchNotice:(0,t.css)`
    font-size: ${K.typography.size.sm};
    color: ${K.colors.text.secondary};
    padding: ${K.spacing(1)};
    text-align: center;
  `,mainBox:(0,t.css)`
    background: ${K.colors.background.primary};
    border: 1px solid ${K.components.panel.borderColor};
    border-top: none;
    flex-grow: 1;
  `,angularDeprecationWrapper:(0,t.css)`
    padding: ${K.spacing(1)};
  `})},16930:(Y,A,e)=>{"use strict";e.d(A,{c:()=>g});var t=e(96540),n=e(12131),o=e(66864),s=e(55852),r=e(32696);function g({message:u}){const d=(0,t.useCallback)(()=>{n.Ny.partial({tab:r.M8.Query})},[]);return t.createElement(o.PE,{justify:"center",style:{marginTop:"100px"}},t.createElement(o.gW,{spacing:"md"},t.createElement("h2",null,u),t.createElement("div",null,t.createElement(s.$n,{size:"md",variant:"secondary",icon:"arrow-left",onClick:d},"Go back to Queries"))))}},22290:(Y,A,e)=>{"use strict";e.d(A,{v:()=>I});var t=e(32196),n=e(2543),o=e(96540),s=e(85200),r=e(37055),g=e(84349),u=e(51986),d=e(40845),i=e(6923),l=e(23257),f=e.n(l),c=e(66864),h=e(60029),p=e(53402),m=e(29158),a=e(88575),v=e(57755);const E=({property:C,context:L,registry:U,onChange:R,onRemove:B,isSystemOverride:H,searchQuery:W})=>{const N=(0,d.of)(D),V=U?.getIfExists(C.id),G=(0,o.useId)();if(!V)return null;const _=Array.isArray(C.value)||C.id===r.uo.Thresholds||C.id===r.uo.Links||C.id===r.uo.Mappings,K=V.category?.filter(Q=>Q!==V.name);let j;const k=(Q=!0,ee=!1)=>(ae=!1)=>o.createElement(c.Gy,{justify:"space-between"},o.createElement(h.J,{category:K,description:Q?V.description:void 0,htmlFor:G},o.createElement(f(),{textToHighlight:V.name,searchWords:[W],highlightClassName:"search-fragment-highlight"}),!ae&&ee&&V.getItemsCount&&o.createElement(p.p,{value:V.getItemsCount(C.value)})),!H&&o.createElement("div",null,o.createElement(m.K,{name:"times",onClick:B,tooltip:"Remove label"})));return _?j=o.createElement(v.D,{id:V.name,renderTitle:k(!1,!0),className:(0,t.css)`
          padding-left: 0;
          padding-right: 0;
        `,isNested:!0,isOpenDefault:C.value!==void 0},o.createElement(V.override,{value:C.value,onChange:Q=>{R(Q)},item:V,context:L})):j=o.createElement("div",null,o.createElement(a.D,{label:k()(),description:V.description},o.createElement(V.override,{value:C.value,onChange:Q=>{R(Q)},item:V,context:L,id:G}))),o.createElement("div",{className:(0,t.cx)(_&&N.collapsibleOverrideEditor,!_&&"dynamicConfigValueEditor--nonCollapsible")},j)},D=C=>({collapsibleOverrideEditor:(0,t.css)`
      label: collapsibleOverrideEditor;
      & + .dynamicConfigValueEditor--nonCollapsible {
        margin-top: ${C.spacing(1)};
      }
    `});var b=e(48192),P=e(74097),y=e(14578);const T=({isExpanded:C,registry:L,matcherUi:U,overrideName:R,override:B,onOverrideRemove:H})=>{const W=(0,d.of)(M),V=B.properties.map(_=>L.getIfExists(_.id)).filter(_=>!!_).map(_=>_?.name).join(", "),G=U.optionsToLabel(B.matcher.options);return o.createElement("div",null,o.createElement(c.Gy,{justify:"space-between"},o.createElement("div",null,R),o.createElement(m.K,{name:"trash-alt",onClick:H,tooltip:"Remove override"})),!C&&o.createElement("div",{className:W.overrideDetails},o.createElement("div",{className:W.options,title:G},G," ",o.createElement(y.I,{name:"angle-right"})," ",V)))};T.displayName="OverrideTitle";const M=C=>({matcherUi:(0,t.css)`
      padding: ${C.spacing(1)};
    `,propertyPickerWrapper:(0,t.css)`
      margin-top: ${C.spacing(2)};
    `,overrideDetails:(0,t.css)`
      font-size: ${C.typography.bodySmall.fontSize};
      color: ${C.colors.text.secondary};
      font-weight: ${C.typography.fontWeightRegular};
    `,options:(0,t.css)`
      overflow: hidden;
      padding-right: ${C.spacing(4)};
    `,unknownLabel:(0,t.css)`
      margin-bottom: 0;
    `});function I(C,L,U,R,B){const H=[],W=C;if(!L||L.isEmpty())return[];const N=(K,j)=>{let k=(0,n.cloneDeep)(W.overrides);k[K]=j,B({...W,overrides:k})},V=K=>{let j=(0,n.cloneDeep)(W.overrides);j.splice(K,1),B({...W,overrides:j})},G=K=>{const j=s.sJ.get(K.value);j&&B({...W,overrides:[...W.overrides,{matcher:{id:j.id,options:j.defaultOptions},properties:[]}]})},_={data:U,getSuggestions:K=>(0,i.Hf)(U,K),isOverride:!0};for(let K=0;K<W.overrides.length;K++){const j=W.overrides[K],k=`Override ${K+1}`,Q=g.g.get(j.matcher.id),ee=x(L),ae=(0,r.Ow)(j),Z=j.properties.length===0?1:0,ne=new b.C({title:k,id:k,forceOpen:Z,renderTitle:function(de){return o.createElement(T,{override:j,isExpanded:de,registry:L,overrideName:k,matcherUi:Q,onOverrideRemove:()=>V(K)})}}),q=re=>{j.matcher.options=re,N(K,j)},te=(re,de)=>{const ie=L.get(de.value),ge={id:ie.id,value:ie.defaultValue};j.properties?re.properties.push(ge):re.properties=[ge],N(K,re)};ne.addItem(new P.v({title:Q.name,render:function(){return o.createElement(Q.component,{id:`${Q.matcher.id}-${K}`,matcher:Q.matcher,data:U??[],options:j.matcher.options,onChange:q})}}));for(let re=0;re<j.properties.length;re++){const de=j.properties[re],ie=L.getIfExists(de.id);if(!ie)continue;const ge=ye=>{j.properties[re].value=ye,N(K,j)},ve=()=>{j.properties.splice(re,1),N(K,j)};ne.addItem(new P.v({title:ie.name,skipField:!0,render:function(){return o.createElement(E,{key:`${de.id}/${re}`,isSystemOverride:ae,onChange:ge,onRemove:ve,property:de,registry:L,context:_,searchQuery:R})}}))}!ae&&j.matcher.options&&ne.addItem(new P.v({title:"----------",skipField:!0,render:function(){return o.createElement(u.i,{key:"Add override property",label:"Add override property",variant:"secondary",isFullWidth:!0,icon:"plus",menuPlacement:"auto",options:ee,onChange:de=>te(j,de)})}})),H.push(ne)}return H.push(new b.C({title:"add button",id:"add button",customRender:function(){return o.createElement(S,{key:"Add override"},o.createElement(u.i,{icon:"plus",label:"Add field override",variant:"secondary",menuPlacement:"auto",isFullWidth:!0,size:"md",options:g.g.list().filter(j=>!j.excludeFromPicker).map(j=>({label:j.name,value:j.id,description:j.description})),onChange:j=>G(j)}))}})),H}function x(C){return C.list().filter(L=>!L.hideFromOverrides).map(L=>{let U=L.name;return L.category&&(U=[...L.category,L.name].join(" > ")),{label:U,value:L.id,description:L.description}})}function S({children:C}){const L=(0,d.of)(O);return o.createElement("div",{className:L},C)}function O(C){return(0,t.css)({borderTop:`1px solid ${C.colors.border.weak}`,padding:`${C.spacing(2)}`,display:"flex"})}},50632:(Y,A,e)=>{"use strict";e.d(A,{q:()=>x,I:()=>S});var t=e(96540),n=e(32264),o=e(10354),s=e(21744),r=e(15292),g=e(64919),u=e(94354),d=e(88323),i=e(32023),l=e(6923),f=e(14792),c=e(10740),h=e(57725),p=e(3363);const a=`You are an expert in creating Grafana Panels.
You will be given the title and description of the dashboard the panel is in as well as the JSON for the panel.
Your goal is to write a descriptive and concise panel description.
The panel description is meant to explain the purpose of the panel, not just its attributes.
Do not refer to the panel; simply describe its purpose.
There should be no numbers in the description except for thresholds.
The description should be, at most, 200 characters.`,v=({onGenerate:C,panel:L})=>{const U=t.useMemo(()=>E(L),[L]);return t.createElement(c.n,{messages:U,onGenerate:C,eventTrackingSrc:h.ec.panelDescription,toggleTipTitle:"Improve your panel description"})};function E(C){const L=(0,f.UA)().getCurrent(),U=(0,p.hn)(C);return[{content:a,role:p.Xh.system},{content:`The panel is part of a dashboard with the title: ${L.title}`,role:p.Xh.system},{content:`The panel is part of a dashboard with the description: ${L.description}`,role:p.Xh.system},{content:`This is the JSON which defines the panel: ${U}`,role:p.Xh.user}]}const b="You are an expert in creating Grafana Panels.Your goal is to write short, descriptive, and concise panel title.The title should be shorter than 50 characters.",P=({onGenerate:C,panel:L})=>{const U=t.useMemo(()=>y(L),[L]);return t.createElement(c.n,{messages:U,onGenerate:C,eventTrackingSrc:h.ec.panelTitle,toggleTipTitle:"Improve your panel title"})};function y(C){const L=(0,f.UA)().getCurrent(),U=(0,p.hn)(C);return[{content:b,role:p.Xh.system},{content:`The panel is part of a dashboard with the title: ${L.title}`,role:p.Xh.system},{content:`The panel is part of a dashboard with the description: ${L.description}`,role:p.Xh.system},{content:`Use this JSON object which defines the panel: ${U}`,role:p.Xh.system}]}var T=e(92378),M=e(48192),I=e(74097);function x(C){const{panel:L,onPanelConfigChange:U}=C,R=new M.C({title:"Panel options",id:"Panel options",isOpenDefault:!0}),B=W=>{const N=document.getElementById("PanelFrameTitle");N instanceof HTMLInputElement&&(N.value=W,U("title",W))},H=W=>{const N=document.getElementById("description-text-area");N instanceof HTMLTextAreaElement&&(N.value=W,U("description",W))};return R.addItem(new I.v({title:"Title",value:L.title,popularRank:1,render:function(){return t.createElement(o.p,{id:"PanelFrameTitle",defaultValue:L.title,onBlur:N=>U("title",N.currentTarget.value)})},addon:n.$.featureToggles.dashgpt&&t.createElement(P,{onGenerate:B,panel:L})})).addItem(new I.v({title:"Description",description:L.description,value:L.description,render:function(){return t.createElement(s.f,{id:"description-text-area",defaultValue:L.description,onBlur:N=>U("description",N.currentTarget.value)})},addon:n.$.featureToggles.dashgpt&&t.createElement(v,{onGenerate:H,panel:L})})).addItem(new I.v({title:"Transparent background",render:function(){return t.createElement(r.d,{value:L.transparent,id:"transparent-background",onChange:N=>U("transparent",N.currentTarget.checked)})}})).addCategory(new M.C({title:"Panel links",id:"Panel links",isOpenDefault:!1,itemsCount:L.links?.length}).addItem(new I.v({title:"Panel links",render:function(){return t.createElement(g.e,{links:L.links,onChange:N=>U("links",N),getSuggestions:l.Fq,data:[]})}}))).addCategory(new M.C({title:"Repeat options",id:"Repeat options",isOpenDefault:!1}).addItem(new I.v({title:"Repeat by variable",description:"Repeat this panel for each value in the selected variable. This is not visible while in edit mode. You need to go back to dashboard and then update the variable or reload the dashboard.",render:function(){return t.createElement(T.G,{id:"repeat-by-variable-select",repeat:L.repeat,onChange:N=>{U("repeat",N)}})}})).addItem(new I.v({title:"Repeat direction",showIf:()=>!!L.repeat,render:function(){const N=[{label:"Horizontal",value:"h"},{label:"Vertical",value:"v"}];return t.createElement(u.z,{options:N,value:L.repeatDirection||"h",onChange:V=>U("repeatDirection",V)})}})).addItem(new I.v({title:"Max per row",showIf:()=>!!(L.repeat&&L.repeatDirection==="h"),render:function(){const N=[2,3,4,6,8,12].map(V=>({label:V.toString(),value:V}));return t.createElement(d.l6,{options:N,value:L.maxPerRow,onChange:V=>U("maxPerRow",V.value)})}})))}function S(C){const L=new M.C({title:"Panel options",id:"Panel options",isOpenDefault:!0}),U=i.b.getPanelLinks(C),R=U.state.rawLinks;return L.addItem(new I.v({title:"Title",value:C.state.title,popularRank:1,render:function(){return t.createElement(o.p,{id:"PanelFrameTitle",defaultValue:C.state.title,onBlur:H=>C.setState({title:H.currentTarget.value})})}})).addItem(new I.v({title:"Description",description:C.state.description,value:C.state.description,render:function(){return t.createElement(s.f,{id:"description-text-area",defaultValue:C.state.description,onBlur:H=>C.setState({description:H.currentTarget.value})})}})).addItem(new I.v({title:"Transparent background",render:function(){return t.createElement(r.d,{value:C.state.displayMode==="transparent",id:"transparent-background",onChange:()=>{C.setState({displayMode:C.state.displayMode==="transparent"?"default":"transparent"})}})}})).addCategory(new M.C({title:"Panel links",id:"Panel links",isOpenDefault:!1,itemsCount:R?.length}).addItem(new I.v({title:"Panel links",render:()=>t.createElement(O,{panelLinks:U})})))}function O({panelLinks:C}){const{rawLinks:L}=C.useState();return t.createElement(g.e,{links:L,onChange:U=>C.setState({rawLinks:U}),getSuggestions:l.Fq,data:[]})}},7600:(Y,A,e)=>{"use strict";e.d(A,{g5:()=>p,Zm:()=>c,Z4:()=>h});var t=e(2543),n=e(96540),o=e(60264),s=e(6923),r=e(48192),g=e(74097);const u="Some data fields have this option pre-configured. Add a field override rule to override the pre-configured value.",d="An override rule exists for this property";function i(m,a,v){const E=[];if(v){for(const b of v)for(const P of b.fields)if((0,t.get)(P.config,m.path)!=null){E.push({type:"data",description:u,tooltip:u});break}}return a.overrides.some(b=>b.properties.some(P=>P.id===m.id))&&E.push({type:"rule",description:d,tooltip:d}),E}var l=e(54612);function f({data:m,replaceVariables:a,options:v,eventBus:E,instanceState:D}){const b=m?.series??[];return{data:b,replaceVariables:a,options:v,eventBus:E,getSuggestions:y=>(0,s.Hf)(b,y),instanceState:D}}function c(m){const{plugin:a,panel:v,onPanelOptionsChanged:E,onFieldConfigsChange:D,data:b,dashboard:P,instanceState:y}=m,T=v.getOptions(),M=v.fieldConfig,I={},x=f({data:b,replaceVariables:v.replaceVariables,options:T,eventBus:P.events,instanceState:y}),S=C=>{const L=(C&&C[0])??`${a.meta.name}`,U=I[L];return U||(I[L]=new r.C({title:L,id:L,sandboxId:a.meta.id}))},O={getValue:C=>(0,t.get)(T,C),onChange:(C,L)=>{const U=(0,l.Sf)(T,C,L);E(U)}};p(a.getPanelOptionsSupplier(),O,S,x);for(const C of a.fieldConfigRegistry.list()){if(C.isCustom){if(C.showIf&&!C.showIf(M.defaults.custom,b?.series))continue}else if(C.showIf&&!C.showIf(M.defaults,b?.series))continue;if(C.hideFromDefaults)continue;const L=S(C.category),U=C.editor,R=M.defaults,B=C.isCustom?R.custom?(0,t.get)(R.custom,C.path):void 0:(0,t.get)(R,C.path);C.getItemsCount&&(L.props.itemsCount=C.getItemsCount(B)),L.addItem(new g.v({title:C.name,description:C.description,overrides:i(C,M,b?.series),render:function(){const W=N=>{D((0,l.EQ)(M,C.path,N,C.isCustom))};return n.createElement(U,{value:B,onChange:W,item:C,context:x,id:C.id})}}))}return Object.values(I)}function h(m){const{plugin:a,panel:v,data:E,eventBus:D,instanceState:b}=m,P={},y=S=>{const O=S?.[0]??a.meta.name,C=P[O];return C||(P[O]=new r.C({title:O,id:O,sandboxId:a.meta.id}))},T=v.state.options,M={getValue:S=>(0,t.get)(T,S),onChange:(S,O)=>{const C=(0,l.Sf)(T,S,O);v.onOptionsChange(C)}},I=f({data:E,replaceVariables:v.interpolate,options:T,eventBus:D,instanceState:b});p(a.getPanelOptionsSupplier(),M,y,I);const x=v.state.fieldConfig;for(const S of a.fieldConfigRegistry.list()){const O=S.showIf&&(S.isCustom?!S.showIf(x.defaults.custom,E?.series):!S.showIf(x.defaults,E?.series));if(S.hideFromDefaults||O)continue;const C=y(S.category),L=S.editor,U=x.defaults,R=S.isCustom?U.custom?(0,t.get)(U.custom,S.path):void 0:(0,t.get)(U,S.path);S.getItemsCount&&(C.props.itemsCount=S.getItemsCount(R)),C.addItem(new g.v({title:S.name,description:S.description,overrides:i(S,x,E?.series),render:function(){const H=W=>{v.onFieldConfigChange((0,l.EQ)(x,S.path,W,S.isCustom),!0)};return n.createElement(L,{value:R,onChange:H,item:S,context:I,id:S.id})}}))}return Object.values(P)}function p(m,a,v,E,D){const b=new o.pv;m(b,E);for(const P of b.getItems()){if(P.showIf&&!P.showIf(E.options,E.data))continue;let y=D;if(y?P.category?.[0]?.length&&(y=y.getCategory(P.category[0])):y=v(P.category),(0,o.iF)(P)){const M=P.getNestedValueAccess(a),I=M.getContext?M.getContext(E):{...E,options:a.getValue(P.path)};p(P.getBuilder(),M,v,I,y);continue}const T=P.editor;y.addItem(new g.v({title:P.name,description:P.description,render:function(){return n.createElement(T,{value:a.getValue(P.path),onChange:I=>{a.onChange(P.path,I)},item:P,context:E,id:P.id})}}))}}},53466:(Y,A,e)=>{"use strict";e.d(A,{Ay:()=>D,GU:()=>f,MJ:()=>h,Ox:()=>p,eK:()=>a,fR:()=>m,kw:()=>v,wi:()=>u});var t=e(30038),n=e(39070),o=e(43127),s=e(33390),r=e(84423),g=e(32696);const u="grafana.dashboard.editor.ui",d={isPanelOptionsVisible:!0,rightPaneSize:400,topPaneSize:.45,mode:g.q5.Fill},i=()=>{const b=s.A.getObject(u,d);let P={...b};return typeof b.topPaneSize=="string"&&(P={...b,topPaneSize:parseFloat(b.topPaneSize)/100}),{getPanel:()=>new r.a9({}),getSourcePanel:()=>new r.a9({}),getData:()=>({state:n.Gu.NotStarted,series:[],timeRange:(0,o.E2)()}),initDone:!1,shouldDiscardChanges:!1,isOpen:!1,isVizPickerOpen:!1,tableViewEnabled:!1,ui:{...d,...P}}},l=(0,t.Z0)({name:"panelEditor",initialState:i(),reducers:{updateEditorInitState:(b,P)=>{b.getPanel=()=>P.payload.panel,b.getSourcePanel=()=>P.payload.sourcePanel,b.initDone=!0,b.isOpen=!0,b.shouldDiscardChanges=!1},setEditorPanelData:(b,P)=>{b.getData=()=>P.payload},setDiscardChanges:(b,P)=>{b.shouldDiscardChanges=P.payload},setPanelEditorUIState:(b,P)=>{b.ui={...b.ui,...P.payload},!b.ui.isPanelOptionsVisible&&b.isVizPickerOpen&&(b.isVizPickerOpen=!1)},toggleVizPicker:(b,P)=>{b.isVizPickerOpen=P.payload,b.isVizPickerOpen&&(b.ui.isPanelOptionsVisible=!0)},toggleTableView(b){b.tableViewEnabled=!b.tableViewEnabled},closeEditor:b=>{b.getPanel=()=>new r.a9({}),b.getSourcePanel=()=>new r.a9({}),b.isOpen=!1,b.initDone=!1,b.isVizPickerOpen=!1,b.tableViewEnabled=!1}}}),{updateEditorInitState:f,setEditorPanelData:c,setDiscardChanges:h,closeEditor:p,setPanelEditorUIState:m,toggleVizPicker:a,toggleTableView:v}=l.actions,D={panelEditor:l.reducer}},95689:(Y,A,e)=>{"use strict";e.d(A,{a:()=>u,e:()=>d});var t=e(41811),n=e(2913),o=e(16233),s=e(75471),r=e(57220),g=e(32696);const u=(0,t.A)((i,l)=>{const f=[];if(!l)return f;let c=g.M8.Visualize;if(l.meta.skipDataQuery)return[];l.meta.skipDataQuery||(c=g.M8.Query,f.push({id:g.M8.Query,text:"Query",icon:"database",active:!1}),f.push({id:g.M8.Transform,text:"Transform data",icon:"process",active:!1})),d(l)&&f.push({id:g.M8.Alert,text:"Alert",icon:"bell",active:!1});const h=f.find(p=>p.id===(i||c))??f[0];return h.active=!0,f});function d(i){const{alertingEnabled:l,unifiedAlertingEnabled:f}=(0,n.zj)(),c=o.TP.hasPermission((0,s.Wd)(r.hY).read),h=l||f&&c,p=i.meta.id==="graph",m=i.meta.id==="timeseries";return h&&p||m}},32696:(Y,A,e)=>{"use strict";e.d(A,{M8:()=>t,Nt:()=>s,__:()=>g,q5:()=>n});var t=(u=>(u.Query="query",u.Transform="transform",u.Visualize="visualize",u.Alert="alert",u))(t||{}),n=(u=>(u[u.Fill=0]="Fill",u[u.Fit=1]="Fit",u[u.Exact=2]="Exact",u))(n||{}),o=(u=>(u[u.Off=0]="Off",u[u.Table=1]="Table",u))(o||{});const s=[{value:0,label:"Fill",description:"Use all available space"},{value:2,label:"Actual",description:"Make same size as on the dashboard"}],r=[{value:0,label:"Visualization",description:"Show using selected visualization"},{value:1,label:"Table",description:"Show raw data in table form"}];var g=(u=>(u[u.Visualizations=0]="Visualizations",u[u.LibraryPanels=1]="LibraryPanels",u[u.Suggestions=2]="Suggestions",u[u.Widgets=3]="Widgets",u))(g||{})},54612:(Y,A,e)=>{"use strict";e.d(A,{$:()=>g,A:()=>r,EQ:()=>u,Sf:()=>d});var t=e(2543),n=e.n(t),o=e(15054),s=e(32696);function r(i,l,f,c){if(i===s.q5.Fill)return{width:l,height:f};const h=8*6,p=60,a=(window.innerWidth-p-o.dU*4)/o.cV*c.gridPos.w,v=o.sD*c.gridPos.h+h,E=Math.min(l/a,f/v);return a<=l&&v<=f?{width:a,height:v}:{width:a*E,height:v*E}}function g(i){return i?.meta.skipDataQuery===!1}const u=(i,l,f,c)=>{let h={...i.defaults};const p=f==null||f==="";return c?h.custom?p?h.custom=(0,t.omit)(h.custom,l):h.custom=d(h.custom,l,f):p||(h.custom=d(h.custom,l,f)):p?h=(0,t.omit)(h,l):h=d(h,l,f),{...i,defaults:h}};function d(i,l,f){const c=Array.isArray(l)?l:l.split("."),h=c.shift();if(h.endsWith("]")){const m=h.lastIndexOf("["),a=+h.substring(m+1,h.length-1),v=h.substring(0,m);let E=i[v];const D=Array.isArray(E)?[...E]:[];return c.length&&(E=D[a],(E==null||typeof E!="object")&&(E={}),f=d(E,c,f)),D[a]=f,{...i,[v]:D}}if(!c.length)return{...i,[h]:f};let p=i[h];return(p==null||typeof p!="object")&&(p={}),{...i,[h]:d(p,c,f)}}},92378:(Y,A,e)=>{"use strict";e.d(A,{G:()=>r});var t=e(96540),n=e(88323),o=e(80348),s=e(87421);const r=({repeat:g,onChange:u,id:d})=>{const i=(0,o.useSelector)(c=>(0,s.SS)((0,s.y7)(c),c)),l=(0,t.useMemo)(()=>{const c=i.map(h=>({label:h.name,value:h.name}));return c.length===0&&c.unshift({label:"No template variables found",value:null}),c.unshift({label:"Disable repeating",value:null}),c},[i]),f=(0,t.useCallback)(c=>u(c.value),[u]);return t.createElement(n.l6,{inputId:d,value:g,onChange:f,options:l})}},78050:(Y,A,e)=>{"use strict";e.d(A,{C:()=>u,m:()=>d});var t=e(96540),n=e(13544),o=e(14110),s=e(71678),r=e(55852),g=e(70497);const u=({dashboard:i,onSaveSuccess:l,size:f})=>t.createElement(s.$s,null,({showModal:c,hideModal:h})=>t.createElement(r.$n,{size:f,onClick:()=>{c(g.$,{dashboard:i,onSaveSuccess:l,onDismiss:h})},"aria-label":n.Tp.pages.Dashboard.Settings.General.saveDashBoard},"Save dashboard")),d=({dashboard:i,onClick:l,onSaveSuccess:f,variant:c,size:h})=>t.createElement(s.$s,null,({showModal:p,hideModal:m})=>t.createElement(r.$n,{size:h,onClick:()=>{(0,o.rR)("grafana_dashboard_save_as_clicked"),l?.(),p(g.$,{dashboard:i,onSaveSuccess:f,onDismiss:m,isCopy:!0})},variant:c,"aria-label":n.Tp.pages.Dashboard.Settings.General.saveAsDashBoard},"Save as"))},54943:(Y,A,e)=>{"use strict";e.d(A,{l:()=>d});var t=e(96540),n=e(16817),o=e(62930),s=e(67061),r=e(90613),g=e(19626),u=e(22764);const d=({diff:i,oldValue:l,newValue:f})=>{const c=(0,n.A)(async()=>{const p=JSON.stringify(l??{},null,2),m=JSON.stringify(f??{},null,2);let a;const v=[];let E=0;if(i)for(const[D,b]of Object.entries(i)){const P=t.createElement(g.D,{diffs:b,key:D,title:D});D==="schemaVersion"?a=P:v.push(P),E+=b.length}return{schemaChange:a,diffs:v,count:E,showDiffs:E<15,jsonView:t.createElement(u.M,{oldValue:p,newValue:m})}},[i,l,f]),{value:h}=c;return!h||!l?t.createElement(o.y,null):h.count<1?t.createElement("div",null,"No changes in this dashboard"):t.createElement(s.B,{direction:"column",gap:1},h.schemaChange&&h.schemaChange,h.showDiffs&&h.diffs,t.createElement(r.a,{paddingTop:2},t.createElement("h4",null,"Full JSON diff"),h.jsonView))}},70497:(Y,A,e)=>{"use strict";e.d(A,{$:()=>st});var t=e(96540),n=e(17172),o=e(32264),s=e(87978),r=e(63021),g=e(40675),u=e(56596),d=e(32196),i=e(16817),l=e(40845),f=e(42418),c=e(27677);function h({dashboard:Qe}){const ke=(0,l.of)(p),{loading:je,value:He,error:Ge}=(0,i.A)(async()=>{const Ke=Qe.getSaveModelCloneOld();return c.IB.validateDashboard(Ke).catch(J=>{if(J.status>=500)throw J;return J.data})},[Qe]);let Oe;if(je)Oe=t.createElement(f.F,{severity:"info",title:"Checking dashboard validity"});else if(He)He.isValid||(Oe=t.createElement(f.F,{severity:"warning",title:"Dashboard failed schema validation"},t.createElement("p",null,"Validation is provided for development purposes and should be safe to ignore. If you are a Grafana developer, consider checking and updating the dashboard schema"),t.createElement("div",{className:ke.error},He.message)));else{const Ke=Ge?.message??"Unknown error";Oe=t.createElement(f.F,{severity:"info",title:"Error checking dashboard validity"},t.createElement("p",{className:ke.error},Ke))}return Oe?t.createElement("div",{className:ke.root},Oe):null}const p=Qe=>({root:(0,d.css)({marginTop:Qe.spacing(1)}),error:(0,d.css)({fontFamily:Qe.typography.fontFamilyMonospace,whiteSpace:"pre-wrap",overflowX:"auto",maxWidth:"100%"})}),m=h;var a=e(54943),v=e(96374),E=e(37390),D=e(55852),b=e(78050),P=e(41053),y=e(71733),T=e(14110),M=e(12131),I=e(28138),x=e(3169),S=e(91219),O=e(55314),C=e(80348),L=e(28444),U=e(36974);const R=async(Qe,ke,je,He)=>{const Ge=await He({dashboard:Qe,folderUid:ke.folderUid??je.meta.folderUid??Qe.meta?.folderUid,message:ke.message,overwrite:ke.overwrite});if("error"in Ge)throw Ge.error;return Ge.data},B=(Qe=!1)=>{const ke=(0,C.useDispatch)(),je=(0,x._2)(),[He]=(0,O.e8)(),[Ge,Oe]=(0,P.A)(async(Ke,Ee,J)=>{try{const oe=await R(Ke,Ee,J,He);J.version=oe.version,Ke.version=oe.version,J.clearUnsavedChanges(Ke,Ee),I.A.publish(new L.Eu),je.success("Dashboard saved"),(0,U.ko)(oe.uid),Qe?(0,T.rR)("grafana_dashboard_copied",{name:J.title,url:oe.url}):(0,T.rR)(`grafana_dashboard_${J.id?"saved":"created"}`,{name:J.title,url:oe.url});const ue=M.Ny.getLocation().pathname,be=y.I.stripBaseFromUrl(oe.url);return be!==ue&&setTimeout(()=>M.Ny.replace(be)),J.meta.isStarred&&ke((0,S.TU)({id:J.uid,title:J.title,url:be})),oe}catch(oe){throw oe instanceof Error&&je.error(oe.message??"Error saving dashboard"),oe}},[ke,je]);return{state:Ge,onDashboardSave:Oe}},H=({dashboard:Qe,dashboardSaveModel:ke,error:je,onDismiss:He,setErrorIsHandled:Ge})=>{const{onDashboardSave:Oe}=B();return t.createElement(t.Fragment,null,je.data&&je.data.status==="version-mismatch"&&t.createElement(v.u,{isOpen:!0,title:"Conflict",body:t.createElement("div",null,"Someone else has updated this dashboard ",t.createElement("br",null)," ",t.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await Oe(ke,{overwrite:!0},Qe),He()},onDismiss:He}),je.data&&je.data.status==="name-exists"&&t.createElement(v.u,{isOpen:!0,title:"Conflict",body:t.createElement("div",null,"A dashboard with the same name in selected folder already exists. ",t.createElement("br",null),t.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await Oe(ke,{overwrite:!0},Qe),He()},onDismiss:He}),je.data&&je.data.status==="plugin-dashboard"&&t.createElement(W,{dashboard:Qe,onDismiss:()=>{Ge(!0),He()}}))},W=({onDismiss:Qe,dashboard:ke})=>{const{onDashboardSave:je}=B(),He=(0,l.of)(V);return t.createElement(E.a,{className:He.modal,title:"Plugin dashboard",icon:"copy",isOpen:!0,onDismiss:Qe},t.createElement("div",{className:He.modalText},"Your changes will be lost when you update the plugin.",t.createElement("br",null),t.createElement("small",null,"Use ",t.createElement("strong",null,"Save As")," to create custom version.")),t.createElement(E.a.ButtonRow,null,t.createElement(D.$n,{variant:"secondary",onClick:Qe,fill:"outline"},"Cancel"),t.createElement(b.m,{onClick:Qe,dashboard:ke,onSaveSuccess:Qe}),t.createElement(D.$n,{variant:"destructive",onClick:async()=>{await je(ke.getSaveModelClone(),{overwrite:!0},ke),Qe()}},"Overwrite")))},N=Qe=>{switch(Qe){case"version-mismatch":case"name-exists":case"plugin-dashboard":return!0;default:return!1}},V=Qe=>({modal:(0,d.css)`
    width: 500px;
  `,modalText:(0,d.css)`
    font-size: ${Qe.typography.h4.fontSize};
    color: ${Qe.colors.text.primary};
    margin-bottom: ${Qe.spacing(4)}
    padding-top: ${Qe.spacing(2)};
  `,modalButtonRow:(0,d.css)`
    margin-bottom: 14px;
    a,
    button {
      margin-right: ${Qe.spacing(2)};
    }
  `});var G=e(51253),_=e(16504),K=e(88575),j=e(66864),k=e(60029),Q=e(10354),ee=e(21744),ae=e(15292),Z=e(70096),ne=e(71500),q=e(81394),te=e(27966);const re=Qe=>{const ke=Qe.getSaveModelClone();return ke.id=null,ke.uid="",ke.title+=" Copy",ke.editable=!0,Qe.id>0&&ke.panels&&ke.panels.forEach(je=>{je.type==="graph"&&je.alert&&delete je.thresholds,delete je.alert}),ke},de=({dashboard:Qe,isLoading:ke,isNew:je,onSubmit:He,onCancel:Ge,onSuccess:Oe})=>{const Ke={title:je?Qe.title:`${Qe.title} Copy`,description:Qe.description,$folder:{uid:Qe.meta.folderUid,title:Qe.meta.folderTitle},copyTags:!1},Ee=J=>async oe=>{if(oe&&oe===J().$folder.title?.trim())return"Dashboard name cannot be the same as folder name";try{return await ne.P.validateNewDashboardName(J().$folder.uid??"general",oe),!0}catch(ue){return ue instanceof Error?ue.message:"Dashboard name is invalid"}};return t.createElement(G.l,{defaultValues:Ke,onSubmit:async J=>{if(!He)return;const oe=re(Qe);oe.title=J.title,oe.description=J.description,!je&&!J.copyTags&&(oe.tags=[]),(await He(oe,{folderUid:J.$folder.uid},Qe)).status==="success"&&Oe()}},({register:J,control:oe,errors:ue,getValues:be})=>t.createElement(t.Fragment,null,t.createElement(_.e,{render:({field:{ref:Le,..._e}})=>t.createElement(K.D,{label:t.createElement(j.Gy,{justify:"space-between"},t.createElement(k.J,{htmlFor:"title"},"Title"),o.$.featureToggles.dashgpt&&je&&t.createElement(te.Z,{onGenerate:Ve=>_e.onChange(Ve),dashboard:Qe})),invalid:!!ue.title,error:ue.title?.message},t.createElement(Q.p,{..._e,onChange:Ve=>_e.onChange(Ve.target.value),"aria-label":"Save dashboard title field",autoFocus:!0})),control:oe,name:"title",rules:{validate:Ee(be)}}),t.createElement(_.e,{render:({field:{ref:Le,..._e}})=>t.createElement(K.D,{label:t.createElement(j.Gy,{justify:"space-between"},t.createElement(k.J,{htmlFor:"description"},"Description"),o.$.featureToggles.dashgpt&&je&&t.createElement(q.V,{onGenerate:Ve=>_e.onChange(Ve),dashboard:Qe})),invalid:!!ue.description,error:ue.description?.message},t.createElement(ee.f,{..._e,onChange:Ve=>_e.onChange(Ve.target.value),"aria-label":"Save dashboard description field",autoFocus:!0})),control:oe,name:"description"}),t.createElement(K.D,{label:"Folder"},t.createElement(_.e,{render:({field:{ref:Le,..._e}})=>t.createElement(Z.d,{..._e,onChange:(Ve,We)=>_e.onChange({uid:Ve,title:We}),value:_e.value?.uid,initialTitle:Qe.meta.folderTitle,dashboardId:Qe.id,enableCreateNew:!0}),control:oe,name:"$folder"})),!je&&t.createElement(K.D,{label:"Copy tags"},t.createElement(ae.d,{...J("copyTags")})),t.createElement(j.Gy,null,t.createElement(D.$n,{type:"button",variant:"secondary",onClick:Ge,fill:"outline"},"Cancel"),t.createElement(D.$n,{disabled:ke,type:"submit","aria-label":"Save dashboard button"},ke?"Saving...":"Save"))))};var ie=e(13544),ge=e(67061),ve=e(10880),ye=e(10740),pe=e(57725),le=e(3363);const Me=["You are an expert in Grafana Dashboards","Your goal is to write a description of the changes for a dashboard to display to the user","You will be given human-readable diffs with most irrelevant lines filtered out"].join(`.
`),De=["Respond only with the diff description, which is meant to be loaded directly into the application for the user.",'If there are no substantial user or migration changes, the correct description is "Minor changes only"',`If there are too many changes of either kind, and those changes have a message saying 'too long', the correct response for that section is "Too many changes to auto-summarize"`,"In a diff, lines beginning with - are removed, and lines beginning with + are added.","Lines with neither + nor - are included for context. Be careful not to mark them as added or removed if they do not start with + or -.","If a line is changed, it will show a previous version removed and a new version added","When referring to panel changes, use the panel title","When using panel title, wrap it with double quotes","When the panel changes position, just mention that the panel has changed position","When an entire panel is added or removed, use the panel title and only say it was added or removed and disregard the rest of the changes for that panel","Group together similar changes into one line when multiple panels are affected","Refer to templating elements as variables","Try to make the response as short as possible"].join(`.
`),Re=({dashboard:Qe,onGenerate:ke,disabled:je})=>{const He=(0,t.useCallback)(()=>me(Qe),[Qe]);return t.createElement(ye.n,{messages:He,onGenerate:ke,temperature:0,model:"gpt-3.5-turbo-16k",eventTrackingSrc:pe.ec.dashboardChanges,toggleTipTitle:"Improve your dashboard changes summary",disabled:je})};function me(Qe){let{userChanges:ke,migrationChanges:je}=(0,le.Yy)(Qe);return ke.length>8e3&&(ke="User changes were too long, fill in the user changes section with 'User changes too long to auto-summarize'"),je.split(`
`).length<10?je="No significant migration changes":je.length>8e3&&(je="Migration changes were too long, fill in the migration changes section with 'Migration changes too long to auto-summarize'"),[{content:Me,role:le.Xh.system},{content:`Summarize the following user changes diff under "User changes":
${ke}`,role:le.Xh.system},{content:`Be sure to only include substantial user changes, such as adding or removing entire panels, changing panel titles or descriptions, etc.
Do not include "User Changes" section if there are no substantial user changes to report.`,role:le.Xh.system},{content:`Summarize the following migration changes diff under "Migration changes":
${je}`,role:le.Xh.system},{content:`Be sure to only include substantial migration changes, such as adding or removing entire panels, changing panel titles or descriptions, etc.
Ignore any threshold step changes or templating list changes.
Ignore other changes and do not include them in the summary. Do not include "Migration Changes" section if there are no substantial migration changes to report.
If there are substantial migration changes, add "Some autogenerated changes are included to update the dashboard to the latest valid schema version" at the end.`,role:le.Xh.system},{content:De,role:le.Xh.system}]}const he=({dashboard:Qe,isLoading:ke,saveModel:je,options:He,onSubmit:Ge,onCancel:Oe,onSuccess:Ke,onOptionsChange:Ee})=>{const J=(0,t.useMemo)(()=>Qe.hasTimeChanged(),[Qe]),oe=(0,t.useMemo)(()=>Qe.hasVariablesChanged(),[Qe]),[ue,be]=(0,t.useState)(!1),[Le,_e]=(0,t.useState)(He.message),Ve=(0,l.of)(Te);return t.createElement(G.l,{onSubmit:async We=>{if(!Ge)return;be(!0),He={...He,message:Le},(await Ge(je.clone,He,Qe)).status==="success"?Ke():be(!1)}},({register:We,errors:$e})=>t.createElement(ge.B,{gap:2,direction:"column",alignItems:"flex-start"},J&&t.createElement(ve.S,{checked:!!He.saveTimerange,onChange:()=>Ee({...He,saveTimerange:!He.saveTimerange}),label:"Save current time range as dashboard default","aria-label":ie.Tp.pages.SaveDashboardModal.saveTimerange}),oe&&t.createElement(ve.S,{checked:!!He.saveVariables,onChange:()=>Ee({...He,saveVariables:!He.saveVariables}),label:"Save current variable values as dashboard default","aria-label":ie.Tp.pages.SaveDashboardModal.saveVariables}),t.createElement("div",{className:Ve.message},o.$.featureToggles.dashgpt&&t.createElement(Re,{dashboard:Qe,onGenerate:it=>{Ee({...He,message:it}),_e(it)},disabled:!je.hasChanges}),t.createElement(ee.f,{"aria-label":"message",value:Le,onChange:it=>{Ee({...He,message:it.currentTarget.value}),_e(it.currentTarget.value)},placeholder:"Add a note to describe your changes.",autoFocus:!0,rows:5})),t.createElement(ge.B,{alignItems:"center"},t.createElement(D.$n,{variant:"secondary",onClick:Oe,fill:"outline"},"Cancel"),t.createElement(D.$n,{type:"submit",disabled:!je.hasChanges||ke,icon:ue?"spinner":void 0,"aria-label":ie.Tp.pages.SaveDashboardModal.save},ke?"Saving...":"Save"),!je.hasChanges&&t.createElement("div",null,"No changes to save"))))};function Te(Qe){return{message:(0,d.css)`
      display: flex;
      align-items: end;
      flex-direction: column;
      width: 100%;
    `}}var Be=e(4213),we=e(10534);const Ne=({dashboard:Qe,onCancel:ke})=>{const[je,He]=(0,t.useState)(()=>{const Oe=Qe.getSaveModelClone();return delete Oe.id,JSON.stringify(Oe,null,2)}),Ge=(0,t.useCallback)(()=>{const Oe=new Blob([je],{type:"application/json;charset=utf-8"});(0,Be.saveAs)(Oe,Qe.title+"-"+new Date().getTime()+".json")},[Qe.title,je]);return t.createElement(t.Fragment,null,t.createElement(ge.B,{direction:"column",gap:2},t.createElement("div",null,"This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source.",t.createElement("br",null),t.createElement("i",null,"See"," ",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),t.createElement("br",null)," ",t.createElement("br",null),t.createElement("strong",null,"File path: ")," ",Qe.meta.provisionedExternalId),t.createElement(ee.f,{spellCheck:!1,value:je,onChange:Oe=>{He(Oe.currentTarget.value)},className:Ze.json}),t.createElement(j.Gy,null,t.createElement(D.$n,{variant:"secondary",onClick:ke,fill:"outline"},"Cancel"),t.createElement(we.b,{icon:"copy",getText:()=>je},"Copy JSON to clipboard"),t.createElement(D.$n,{type:"submit",onClick:Ge},"Save JSON to file"))))},Ze={json:(0,d.css)`
    height: 400px;
    width: 100%;
    overflow: auto;
    resize: none;
    font-family: monospace;
  `},st=({dashboard:Qe,onDismiss:ke,onSaveSuccess:je,isCopy:He})=>{const[Ge,Oe]=(0,t.useState)({}),Ke=Qe.getOriginalDashboard(),Ee=Qe.meta.provisioned,J=Qe.version===0,[oe,ue]=(0,t.useState)(!1),be=(0,t.useMemo)(()=>{const ht=Qe.getSaveModelClone({saveTimerange:!!Ge.saveTimerange,saveVariables:!!Ge.saveVariables});if(!Ke)return{clone:ht,diff:{},diffCount:0,hasChanges:!1};const ft=(0,u.G4)(Ke,ht);let gt=0;for(const Dt of Object.values(ft))gt+=Dt.length;return{clone:ht,diff:ft,diffCount:gt,hasChanges:gt>0&&!J}},[Qe,Ke,Ge,J]),[Le,_e]=(0,t.useState)(!1),{state:Ve,onDashboardSave:We}=B(He),$e=je?()=>{ke(),je()}:ke,it=()=>Le?t.createElement(a.l,{diff:be.diff,oldValue:Ke,newValue:be.clone}):J||He?t.createElement(de,{dashboard:Qe,isLoading:Ve.loading,onCancel:ke,onSuccess:$e,onSubmit:We,isNew:J}):Ee?t.createElement(Ne,{dashboard:Qe,onCancel:ke,onSuccess:$e}):t.createElement(he,{dashboard:Qe,isLoading:Ve.loading,saveModel:be,onCancel:ke,onSuccess:$e,onSubmit:We,options:Ge,onOptionsChange:Oe});if(Ve.error&&!oe&&(0,n.NF)(Ve.error)&&N(Ve.error.data.status))return t.createElement(H,{error:Ve.error,dashboard:Qe,dashboardSaveModel:be.clone,onDismiss:ke,setErrorIsHandled:ue});let at="Save dashboard";return He?at="Save dashboard copy":Ee&&(at="Provisioned dashboard"),t.createElement(s._,{title:at,onClose:ke,subtitle:Qe.title,tabs:t.createElement(r.U,null,t.createElement(g.o,{label:"Details",active:!Le,onChangeTab:()=>_e(!1)}),be.hasChanges&&t.createElement(g.o,{label:"Changes",active:Le,onChangeTab:()=>_e(!0),counter:be.diffCount}))},it(),o.$.featureToggles.showDashboardValidationWarnings&&t.createElement(m,{dashboard:Qe}))}},35280:(Y,A,e)=>{"use strict";e.d(A,{D:()=>h});var t=e(96540),n=e(94701),o=e(14110),s=e(88575),r=e(15292),g=e(21744),u=e(37390),d=e(10534),i=e(44836),l=e(7758),f=e(87895),c=e(22699);function h({panel:p,dashboard:m,range:a,buildIframe:v=c.CF}){const[E,D]=(0,t.useState)(!0),[b,P]=(0,t.useState)("current"),[y,T]=(0,t.useState)("");(0,n.A)(()=>{(0,o.rR)("grafana_dashboards_embed_share_viewed")}),(0,t.useEffect)(()=>{const C=v(E,m.uid,b,p,a);T(C)},[b,E,m,p,a,v]);const M=C=>{T(C.currentTarget.value)},I=()=>{D(C=>!C)},x=C=>{P(C)},O=m.time.to==="now"?(0,i.t)("share-modal.embed.time-range-description","Transforms the current relative time range to an absolute time range"):"";return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(i.x6,{i18nKey:"share-modal.embed.info"},"Generate HTML for embedding an iframe with this panel.")),t.createElement(s.D,{label:(0,i.t)("share-modal.embed.time-range","Current time range"),description:O},t.createElement(r.d,{id:"share-current-time-range",value:E,onChange:I})),t.createElement(f.w,{selectedTheme:b,onChange:x}),t.createElement(s.D,{label:(0,i.t)("share-modal.embed.html","Embed HTML"),description:(0,i.t)("share-modal.embed.html-description","The HTML code below can be pasted and included in another web page. Unless anonymous access is enabled, the user viewing that page need to be signed into Grafana for the graph to load.")},t.createElement(g.f,{"data-testid":"share-embed-html",id:"share-panel-embed-embed-html-textarea",rows:5,value:y,onChange:M})),t.createElement(u.a.ButtonRow,null,t.createElement(d.b,{icon:"copy",variant:"primary",getText:()=>y,onClipboardCopy:()=>{l.c.embedSnippetCopy({currentTimeRange:E,theme:b})}},t.createElement(i.x6,{i18nKey:"share-modal.embed.copy"},"Copy to clipboard"))))}},86394:(Y,A,e)=>{"use strict";e.d(A,{j:()=>r});var t=e(96540),n=e(14110),o=e(44836),s=e(96227);const r=({panel:g,initialFolderUid:u,onDismiss:d})=>((0,t.useEffect)(()=>{(0,n.rR)("grafana_dashboards_library_panel_share_viewed")},[]),g?t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.x6,{i18nKey:"share-modal.library.info"},"Create library panel.")),t.createElement(s.b,{panel:g,initialFolderUid:u,onDismiss:d})):null)},7686:(Y,A,e)=>{"use strict";e.d(A,{Zy:()=>te});var t=e(96540),n=e(25897),o=e(37390),s=e(40980),r=e(40845),g=e(2913),u=e(10096),d=e(44836),i=e(4785),l=e(72254),f=e(7758),c=e(82792),h=e(35280),p=e(4213),m=e(88575),a=e(15292),v=e(55852),E=e(15858),D=e(28444),b=e(70713),P=e(32372),y=e(10534);function T({json:re,onDismiss:de}){const ie=(0,t.useCallback)(()=>re,[re]);return t.createElement(o.a,{title:"JSON",onDismiss:de,onClickBackdrop:de,isOpen:!0},t.createElement(b.Ay,{disableHeight:!0},({width:ge})=>t.createElement(P.B,{value:re,language:"json",showMiniMap:!1,height:"500px",width:ge})),t.createElement(o.a.ButtonRow,null,t.createElement(y.b,{icon:"copy",getText:ie,onClipboardCopy:()=>{f.c.exportCopyJsonClicked()}},t.createElement(d.x6,{i18nKey:"share-modal.view-json.copy-button"},"Copy to Clipboard"))))}class M extends t.PureComponent{constructor(de){super(de),this.onShareExternallyChange=()=>{this.setState({shareExternally:!this.state.shareExternally})},this.onSaveAsFile=()=>{const{dashboard:ie}=this.props,{shareExternally:ge}=this.state;f.c.exportSaveJsonClicked({externally:ge}),ge?this.exporter.makeExportable(ie).then(ve=>{this.openSaveAsDialog(ve)}):this.openSaveAsDialog(ie.getSaveModelClone())},this.onViewJson=()=>{const{dashboard:ie}=this.props,{shareExternally:ge}=this.state;f.c.exportViewJsonClicked({externally:ge}),ge?this.exporter.makeExportable(ie).then(ve=>{this.openJsonModal(ve)}):this.openJsonModal(ie.getSaveModelClone())},this.openSaveAsDialog=ie=>{const ge=JSON.stringify(ie,null,2),ve=new Blob([ge],{type:"application/json;charset=utf-8"}),ye=new Date().getTime();(0,p.saveAs)(ve,`${ie.title}-${ye}.json`)},this.openJsonModal=ie=>{u.lE.publish(new D.S8({props:{json:JSON.stringify(ie,null,2)},component:T})),this.props.onDismiss?.()},this.state={shareExternally:!1},this.exporter=new E.M}render(){const{onDismiss:de}=this.props,{shareExternally:ie}=this.state,ge=(0,d.t)("share-modal.export.share-externally-label","Export for sharing externally");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(d.x6,{i18nKey:"share-modal.export.info-text"},"Export this dashboard.")),t.createElement(m.D,{label:ge},t.createElement(a.d,{id:"share-externally-toggle",value:ie,onChange:this.onShareExternallyChange})),t.createElement(o.a.ButtonRow,null,t.createElement(v.$n,{variant:"secondary",onClick:de,fill:"outline"},t.createElement(d.x6,{i18nKey:"share-modal.export.cancel-button"},"Cancel")),t.createElement(v.$n,{variant:"secondary",onClick:this.onViewJson},t.createElement(d.x6,{i18nKey:"share-modal.export.view-button"},"View JSON")),t.createElement(v.$n,{variant:"primary",onClick:this.onSaveAsFile},t.createElement(d.x6,{i18nKey:"share-modal.export.save-button"},"Save to file"))))}}var I=e(86394),x=e(13544),S=e(84167),O=e(10354),C=e(72109),L=e(42418),U=e(87895),R=e(22699);class B extends t.PureComponent{constructor(de){super(de),this.buildUrl=async()=>{const{panel:ie,dashboard:ge}=this.props,{useCurrentTimeRange:ve,useShortUrl:ye,selectedTheme:pe}=this.state,le=await(0,R.Xe)(ve,pe,ie,ye),Me=(0,R.Lb)(ve,ge.uid,pe,ie);this.setState({shareUrl:le,imageUrl:Me})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange})},this.onUrlShorten=()=>{this.setState({useShortUrl:!this.state.useShortUrl})},this.onThemeChange=ie=>{this.setState({selectedTheme:ie})},this.getShareUrl=()=>this.state.shareUrl,this.state={useCurrentTimeRange:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""},this.onCopy=this.onCopy.bind(this)}componentDidMount(){this.buildUrl()}componentDidUpdate(de,ie){const{useCurrentTimeRange:ge,useShortUrl:ve,selectedTheme:ye}=this.state;(ie.useCurrentTimeRange!==ge||ie.selectedTheme!==ye||ie.useShortUrl!==ve)&&this.buildUrl()}onCopy(){f.c.shareLinkCopied({currentTimeRange:this.state.useCurrentTimeRange,theme:this.state.selectedTheme,shortenURL:this.state.useShortUrl})}render(){const{panel:de,dashboard:ie}=this.props,ge=ie?ie.time.to==="now":!1,{useCurrentTimeRange:ve,useShortUrl:ye,selectedTheme:pe,shareUrl:le,imageUrl:Me}=this.state,De=x.Tp.pages.SharePanelModal,Re=!!ie.id,me=(0,d.t)("share-modal.link.time-range-label","Lock time range"),he=(0,d.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),Te=(0,d.t)("share-modal.link.shorten-url","Shorten URL"),Be=(0,d.t)("share-modal.link.link-url","Link URL");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(d.x6,{i18nKey:"share-modal.link.info-text"},"Create a direct link to this dashboard or panel, customized with the options below.")),t.createElement(S.n,null,t.createElement(m.D,{label:me,description:ge?he:""},t.createElement(a.d,{id:"share-current-time-range",value:ve,onChange:this.onUseCurrentTimeRangeChange})),t.createElement(U.w,{selectedTheme:pe,onChange:this.onThemeChange}),t.createElement(m.D,{label:Te},t.createElement(a.d,{id:"share-shorten-url",value:ye,onChange:this.onUrlShorten})),t.createElement(m.D,{label:Be},t.createElement(O.p,{id:"link-url-input",value:le,readOnly:!0,addonAfter:t.createElement(y.b,{icon:"copy",variant:"primary",getText:this.getShareUrl,onClipboardCopy:this.onCopy},t.createElement(d.x6,{i18nKey:"share-modal.link.copy-link-button"},"Copy"))}))),de&&g.Ay.rendererAvailable&&t.createElement(t.Fragment,null,Re&&t.createElement(C.Y,{href:Me,external:!0,icon:"camera","aria-label":De.linkToRenderedImage},(0,d.t)("share-modal.link.rendered-image","Direct link rendered image")),!Re&&t.createElement(L.F,{severity:"info",title:(0,d.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0},t.createElement(d.x6,{i18nKey:"share-modal.link.save-dashboard"},"To render a panel image, you must save the dashboard first."))),de&&!g.Ay.rendererAvailable&&t.createElement(L.F,{severity:"info",title:(0,d.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0},t.createElement(d.x6,{i18nKey:"share-modal.link.render-instructions"},"To render a panel image, you must install the",t.createElement(C.Y,{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",external:!0},"Grafana image renderer plugin"),". Please contact your Grafana administrator to install the plugin.")))}}var H=e(92041),W=e(17172),N=e(88323),V=e(62930),G=e(74856),_=e(80484),K=e(69064);class j extends t.PureComponent{constructor(de){super(de),this.createSnapshot=ie=>()=>{const{timeoutSeconds:ge}=this.state;this.dashboard.snapshot={timestamp:new Date},this.setState({isLoading:!0}),this.dashboard.startRefresh(),setTimeout(()=>{this.saveSnapshot(this.dashboard,ie)},ge*1e3)},this.saveSnapshot=async(ie,ge)=>{const{snapshotExpires:ve,timeoutSeconds:ye}=this.state,pe=this.dashboard.getSaveModelCloneOld();this.scrubDashboard(pe);const le={dashboard:pe,name:pe.title,expires:ve,external:ge};try{const Me=await(0,K.s)().create(le);this.setState({deleteUrl:Me.deleteUrl,snapshotUrl:Me.url,step:2})}finally{ge?f.c.publishSnapshotClicked({expires:ve,timeout:ye}):f.c.publishSnapshotLocalClicked({expires:ve,timeout:ye}),this.setState({isLoading:!1})}},this.scrubDashboard=ie=>{const{panel:ge}=this.props,{snapshotName:ve}=this.state;ie.title=ve,ie.time=(0,G.jG)().timeRange(),ie.links=[],ie.panels.forEach(pe=>{pe.targets=[],pe.links=[],pe.datasource=null});const ye=ie.annotations.list.filter(pe=>pe.enable);if(ie.annotations.list=ye.map(pe=>({name:pe.name,enable:pe.enable,iconColor:pe.iconColor,snapshotData:pe.snapshotData,type:pe.type,builtIn:pe.builtIn,hide:pe.hide})),ie.getVariables().forEach(pe=>{"query"in pe&&(pe.query=""),"options"in pe&&(pe.options=pe.current&&!(0,H.R)(pe.current)?[pe.current]:[]),"refresh"in pe&&(pe.refresh=_.CO.never)}),ge){const pe=ge.getSaveModel();pe.gridPos.w=24,pe.gridPos.x=0,pe.gridPos.y=0,pe.gridPos.h=20,ie.panels=[pe]}delete this.dashboard.snapshot,this.dashboard.forEachPanel(pe=>{delete pe.snapshotData}),this.dashboard.annotations.list.forEach(pe=>{delete pe.snapshotData})},this.deleteSnapshot=async()=>{const{deleteUrl:ie}=this.state;await(0,W.AI)().get(ie),this.setState({step:3})},this.getSnapshotUrl=()=>this.state.snapshotUrl,this.onSnapshotNameChange=ie=>{this.setState({snapshotName:ie.target.value})},this.onTimeoutChange=ie=>{this.setState({timeoutSeconds:Number(ie.target.value)})},this.onExpireChange=ie=>{this.setState({selectedExpireOption:ie,snapshotExpires:ie.value})},this.dashboard=de.dashboard,this.expireOptions=[{label:(0,d.t)("share-modal.snapshot.expire-never","Never"),value:0},{label:(0,d.t)("share-modal.snapshot.expire-hour","1 Hour"),value:60*60},{label:(0,d.t)("share-modal.snapshot.expire-day","1 Day"),value:60*60*24},{label:(0,d.t)("share-modal.snapshot.expire-week","7 Days"),value:60*60*24*7}],this.state={isLoading:!1,step:1,selectedExpireOption:this.expireOptions[0],snapshotExpires:this.expireOptions[0].value,snapshotName:de.dashboard.title,timeoutSeconds:4,snapshotUrl:"",deleteUrl:"",externalEnabled:!1,sharingButtonText:""}}componentDidMount(){this.getSnaphotShareOptions()}async getSnaphotShareOptions(){const de=await(0,K.s)().getSharingOptions();this.setState({sharingButtonText:de.externalSnapshotName,externalEnabled:de.externalEnabled})}renderStep1(){const{onDismiss:de}=this.props,{snapshotName:ie,selectedExpireOption:ge,timeoutSeconds:ve,isLoading:ye,sharingButtonText:pe,externalEnabled:le}=this.state,Me=(0,d.t)("share-modal.snapshot.name","Snapshot name"),De=(0,d.t)("share-modal.snapshot.expire","Expire"),Re=(0,d.t)("share-modal.snapshot.timeout","Timeout (seconds)"),me=(0,d.t)("share-modal.snapshot.timeout-description","You might need to configure the timeout value if it takes a long time to collect your dashboard metrics.");return t.createElement(t.Fragment,null,t.createElement("div",null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(d.x6,{i18nKey:"share-modal.snapshot.info-text-1"},"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard.")),t.createElement("p",{className:"share-modal-info-text"},t.createElement(d.x6,{i18nKey:"share-modal.snapshot.info-text-2"},"Keep in mind, your snapshot ",t.createElement("em",null,"can be viewed by anyone")," that has the link and can access the URL. Share wisely."))),t.createElement(m.D,{label:Me},t.createElement(O.p,{id:"snapshot-name-input",width:30,value:ie,onChange:this.onSnapshotNameChange})),t.createElement(m.D,{label:De},t.createElement(N.l6,{inputId:"expire-select-input",width:30,options:this.expireOptions,value:ge,onChange:this.onExpireChange})),t.createElement(m.D,{label:Re,description:me},t.createElement(O.p,{id:"timeout-input",type:"number",width:21,value:ve,onChange:this.onTimeoutChange})),t.createElement(o.a.ButtonRow,null,t.createElement(v.$n,{variant:"secondary",onClick:de,fill:"outline"},t.createElement(d.x6,{i18nKey:"share-modal.snapshot.cancel-button"},"Cancel")),le&&t.createElement(v.$n,{variant:"secondary",disabled:ye,onClick:this.createSnapshot(!0)},pe),t.createElement(v.$n,{variant:"primary",disabled:ye,onClick:this.createSnapshot()},t.createElement(d.x6,{i18nKey:"share-modal.snapshot.local-button"},"Local Snapshot"))))}renderStep2(){const{snapshotUrl:de}=this.state;return t.createElement(t.Fragment,null,t.createElement(m.D,{label:(0,d.t)("share-modal.snapshot.url-label","Snapshot URL")},t.createElement(O.p,{id:"snapshot-url-input",value:de,readOnly:!0,addonAfter:t.createElement(y.b,{icon:"copy",variant:"primary",getText:this.getSnapshotUrl},t.createElement(d.x6,{i18nKey:"share-modal.snapshot.copy-link-button"},"Copy"))})),t.createElement("div",{className:"pull-right",style:{padding:"5px"}},t.createElement(d.x6,{i18nKey:"share-modal.snapshot.mistake-message"},"Did you make a mistake? "),"\xA0",t.createElement(v.z9,{fill:"text",target:"_blank",onClick:this.deleteSnapshot},t.createElement(d.x6,{i18nKey:"share-modal.snapshot.delete-button"},"Delete snapshot."))))}renderStep3(){return t.createElement("div",{className:"share-modal-header"},t.createElement("p",{className:"share-modal-info-text"},t.createElement(d.x6,{i18nKey:"share-modal.snapshot.deleted-message"},"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches.")))}render(){const{isLoading:de,step:ie}=this.state;return t.createElement(t.Fragment,null,ie===1&&this.renderStep1(),ie===2&&this.renderStep2(),ie===3&&this.renderStep3(),de&&t.createElement(V.y,{inline:!0}))}}const k=[],Q=[];function ee(re){k.push(re)}function ae(re){Q.push(re)}function Z(re,de){const ge=[{label:(0,d.t)("share-modal.tab-title.link","Link"),value:R.wr.link,component:B}];if(u.TP.isSignedIn&&g.$W.snapshotEnabled){const ye=(0,d.t)("share-modal.tab-title.snapshot","Snapshot");ge.push({label:ye,value:R.wr.snapshot,component:j})}if(re){const ye=(0,d.t)("share-modal.tab-title.embed","Embed");if(ge.push({label:ye,value:R.wr.embed,component:h.D}),!(0,c.X)(re)){const pe=(0,d.t)("share-modal.tab-title.library-panel","Library panel");ge.push({label:pe,value:R.wr.libraryPanel,component:I.j})}ge.push(...Q)}else{const ye=(0,d.t)("share-modal.tab-title.export","Export");ge.push({label:ye,value:R.wr.export,component:M}),ge.push(...k)}(0,l.iR)()&&ge.push({label:(0,d.t)("share-modal.tab-title.public-dashboard-title","Public dashboard"),value:R.wr.publicDashboard,component:i.b});const ve=ge.find(ye=>ye.value===de);return{tabs:ge,activeTab:ve?.value??ge[0].value}}function ne(re){const{tabs:de,activeTab:ie}=Z(re.panel,re.activeTab);return{tabs:de,activeTab:ie}}class q extends t.Component{constructor(de){super(de),this.onSelectTab=ie=>{this.setState(ge=>({...ge,activeTab:ie.value})),f.c.sharingTabChanged({item:ie.value})},this.state=ne(de)}getActiveTab(){const{tabs:de,activeTab:ie}=this.state;return de.find(ge=>ge.value===ie)}renderTitle(){const{panel:de}=this.props,{activeTab:ie}=this.state,ge=de?(0,d.t)("share-modal.panel.title","Share Panel"):(0,d.t)("share-modal.dashboard.title","Share"),ve=Z(this.props.panel,this.state.activeTab).tabs;return t.createElement(n.J,{title:ge,icon:"share-alt",tabs:ve,activeTab:ie,onChangeTab:this.onSelectTab})}render(){const{dashboard:de,panel:ie}=this.props,ve=this.getActiveTab().component;return t.createElement(o.a,{isOpen:!0,title:this.renderTitle(),onDismiss:this.props.onDismiss},t.createElement(s.J,null,t.createElement(ve,{dashboard:de,panel:ie,onDismiss:this.props.onDismiss})))}}const te=(0,r.cV)(q)},59037:(Y,A,e)=>{"use strict";e.d(A,{K:()=>pe,b:()=>ye});var t=e(32196),n=e(96540),o=e(49785),s=e(13544),r=e(32264),g=e(33378),u=e(40845),d=e(88575),i=e(10354),l=e(10534),f=e(15292),c=e(60029),h=e(66864),p=e(55852),m=e(71678),a=e(44836),v=e(72686),E=e(21380),D=e(7758),b=e(90591),P=e(16233),y=e(80348),T=e(52908);const M=()=>{const{width:Me}=(0,T.A)();return Me>1024};var I=e(7686),x=e(22699),S=e(29304),O=e(42418);const C=()=>n.createElement(O.F,{title:(0,a.t)("public-dashboard.modal-alerts.save-dashboard-changes-alert-title","Please save your dashboard changes before updating the public configuration"),severity:"warning",bottomSpacing:0});var L=e(12257),U=e(10872),R=e(72254),B=e(84167),H=e(54230);const W=s.Tp.pages.ShareDashboardModal.PublicDashboard,N=({disabled:Me,onChange:De,register:Re,timeRange:me})=>n.createElement(n.Fragment,null,n.createElement(B.n,{disabled:Me},n.createElement(h.gW,{spacing:"md"},n.createElement(h.PE,{orientation:1,spacing:"xs",justify:"space-between"},n.createElement(c.J,{description:(0,a.t)("public-dashboard.settings-configuration.default-time-range-label-desc","The public dashboard uses the default time range settings of the dashboard")},n.createElement(a.x6,{i18nKey:"public-dashboard.settings-configuration.default-time-range-label"},"Default time range")),n.createElement(H.b,{value:me,disabled:!0,onChange:()=>{}})),n.createElement(h.PE,{orientation:0,spacing:"sm"},n.createElement(f.d,{...Re("isTimeSelectionEnabled"),"data-testid":W.EnableTimeRangeSwitch,onChange:he=>{De("isTimeSelectionEnabled",he.currentTarget.checked),D.c.publicDashboardTimeSelectionChanged({enabled:he.currentTarget.checked})}}),n.createElement(c.J,{description:(0,a.t)("public-dashboard.settings-configuration.time-range-picker-label-desc","Allow viewers to change time range")},n.createElement(a.x6,{i18nKey:"public-dashboard.settings-configuration.time-range-picker-label"},"Time range picker enabled"))),n.createElement(h.PE,{orientation:0,spacing:"sm"},n.createElement(f.d,{...Re("isAnnotationsEnabled"),onChange:he=>{De("isAnnotationsEnabled",he.currentTarget.checked),D.c.publicDashboardAnnotationsSelectionChanged({enabled:he.currentTarget.checked})},"data-testid":W.EnableAnnotationsSwitch}),n.createElement(c.J,{description:(0,a.t)("public-dashboard.settings-configuration.show-annotations-label-desc","Show annotations on public dashboard")},n.createElement(a.x6,{i18nKey:"public-dashboard.settings-configuration.show-annotations-label"},"Show annotations"))))));var V=e(19727),G=e(16504),_=e(94354),K=e(62930);const j=s.Tp.pages.ShareDashboardModal.PublicDashboard.EmailSharingConfiguration,k=({recipients:Me,dashboardUid:De,publicDashboardUid:Re})=>{const me=(0,u.of)(ee),[he,{isLoading:Te}]=(0,v.$L)(),[Be,{isLoading:we}]=(0,v.NA)(),Ne=Te||we,Ze=(Qe,ke)=>{D.c.revokePublicDashboardEmailClicked(),he({recipientUid:Qe,recipientEmail:ke,dashboardUid:De,uid:Re})},st=Qe=>{D.c.resendPublicDashboardEmailClicked(),Be({recipientUid:Qe,uid:Re})};return n.createElement("table",{className:me.table,"data-testid":j.EmailSharingList},n.createElement("tbody",null,Me.map((Qe,ke)=>n.createElement("tr",{key:Qe.uid},n.createElement("td",null,Qe.recipient),n.createElement("td",null,n.createElement(V.e,{className:me.tableButtonsContainer},n.createElement(p.$n,{type:"button",variant:"destructive",fill:"text",title:(0,a.t)("public-dashboard.email-sharing.revoke-button-title","Revoke"),size:"sm",disabled:Ne,onClick:()=>Ze(Qe.uid,Qe.recipient),"data-testid":`${j.DeleteEmail}-${ke}`},n.createElement(a.x6,{i18nKey:"public-dashboard.email-sharing.revoke-button"},"Revoke")),n.createElement(p.$n,{type:"button",variant:"primary",fill:"text",title:(0,a.t)("public-dashboard.email-sharing.resend-button-title","Resend"),size:"sm",disabled:Ne,onClick:()=>st(Qe.uid),"data-testid":`${j.ReshareLink}-${ke}`},n.createElement(a.x6,{i18nKey:"public-dashboard.email-sharing.resend-button"},"Resend"))))))))},Q=()=>{const{width:Me}=(0,T.A)(),De=(0,u.of)(ee),me=(0,y.useSelector)(Ee=>Ee.dashboard).getModel(),{data:he}=(0,v.Bs)(me.uid),[Te]=(0,v.T2)(),[Be,{isLoading:we}]=(0,v.NY)(),Ne=P.TP.hasPermission(y.AccessControlAction.DashboardsPublicWrite),{register:Ze,setValue:st,control:Qe,watch:ke,handleSubmit:je,formState:{errors:He},reset:Ge}=(0,o.mN)({defaultValues:{shareType:he?.share||R.Xo.PUBLIC,email:""},mode:"onSubmit"}),Oe=Ee=>{const J={dashboard:me,payload:{...he,share:Ee}};Te(J)},Ke=async Ee=>{D.c.publicDashboardEmailInviteClicked(),await Be({recipient:Ee.email,uid:he.uid,dashboardUid:me.uid}).unwrap(),Ge({email:"",shareType:R.Xo.EMAIL})};return n.createElement("form",{onSubmit:je(Ke)},n.createElement(B.n,{disabled:!Ne,"data-testid":j.Container,className:De.container},n.createElement(d.D,{label:(0,a.t)("public-dashboard.config.can-view-dashboard-radio-button-label","Can view dashboard"),className:De.field},n.createElement(G.e,{name:"shareType",control:Qe,render:({field:Ee})=>{const{ref:J,...oe}=Ee,ue=[{label:(0,a.t)("public-dashboard.config.public-share-type-option-label","Anyone with a link"),value:R.Xo.PUBLIC},{label:(0,a.t)("public-dashboard.config.email-share-type-option-label","Only specified people"),value:R.Xo.EMAIL}];return n.createElement(_.z,{...oe,size:Me<480?"sm":"md",options:ue,onChange:be=>{D.c.publicDashboardShareTypeChange({shareType:be===R.Xo.EMAIL?"email":"public"}),st("shareType",be),Oe(be)}})}})),ke("shareType")===R.Xo.EMAIL&&n.createElement(n.Fragment,null,n.createElement(d.D,{label:(0,a.t)("public-dashboard.email-sharing.invite-field-label","Invite"),description:(0,a.t)("public-dashboard.email-sharing.invite-field-desc","Invite people by email"),error:He.email?.message,invalid:!!He.email?.message||void 0,className:De.field},n.createElement("div",{className:De.emailContainer},n.createElement(i.p,{className:De.emailInput,placeholder:"email",autoCapitalize:"none",...Ze("email",{required:(0,a.t)("public-dashboard.email-sharing.input-required-email-text","Email is required"),pattern:{value:R._l,message:(0,a.t)("public-dashboard.email-sharing.input-invalid-email-text","Invalid email")}}),"data-testid":j.EmailSharingInput}),n.createElement(p.$n,{type:"submit",variant:"primary",disabled:we,"data-testid":j.EmailSharingInviteButton},n.createElement(a.x6,{i18nKey:"public-dashboard.email-sharing.invite-button"},"Invite"),we&&n.createElement(K.y,null)))),!!he?.recipients?.length&&n.createElement(k,{recipients:he.recipients,dashboardUid:me.uid,publicDashboardUid:he.uid}))))},ee=Me=>({container:(0,t.css)`
    label: emailConfigContainer;
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    gap: ${Me.spacing(3)};
  `,field:(0,t.css)`
    label: field-noMargin;
    margin-bottom: 0;
  `,emailContainer:(0,t.css)`
    label: emailContainer;
    display: flex;
    gap: ${Me.spacing(1)};
  `,emailInput:(0,t.css)`
    label: emailInput;
    flex-grow: 1;
  `,table:(0,t.css)`
    label: table;
    display: flex;
    max-height: 220px;
    overflow-y: scroll;

    & tbody {
      display: flex;
      flex-direction: column;
      flex-grow: 1;
    }

    & tr {
      min-height: 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: ${Me.spacing(.5,1)};

      :nth-child(odd) {
        background: ${Me.colors.background.secondary};
      }
    }
  `,tableButtonsContainer:(0,t.css)`
    display: flex;
    justify-content: end;
  `});var ae=e(67892),Z=e(29158);function ne({headerElement:Me,isContentVisible:De=!1,onRowToggle:Re,title:me,...he}){const Te=(0,u.of)(q),Be=Me&&ae.renderOrCallToRender(Me,{className:Te.summaryWrapper});return n.createElement("div",{className:Te.wrapper},n.createElement("div",{className:Te.header},n.createElement(Z.K,{name:De?"angle-down":"angle-right",tooltip:De?(0,a.t)("public-dashboard.settings-bar-header.collapse-settings-tooltip","Collapse settings"):(0,a.t)("public-dashboard.settings-bar-header.expand-settings-tooltip","Expand settings"),className:Te.collapseIcon,onClick:Re,"aria-expanded":De,...he}),me&&n.createElement("div",{className:Te.titleWrapper,onClick:Re},n.createElement("span",{className:Te.title},me)),Be))}ne.displayName="SettingsBarHeader";function q(Me){return{wrapper:(0,t.css)({label:"header",padding:Me.spacing(.5,.5),borderRadius:Me.shape.radius.default,background:Me.colors.background.secondary,minHeight:Me.spacing(4),"&:focus":{outline:"none"}}),header:(0,t.css)({label:"column",display:"flex",alignItems:"center",whiteSpace:"nowrap"}),collapseIcon:(0,t.css)({marginLeft:Me.spacing(.5),color:Me.colors.text.disabled}),titleWrapper:(0,t.css)({display:"flex",alignItems:"center",cursor:"pointer",overflow:"hidden",marginRight:`${Me.spacing(.5)}`,[Me.breakpoints.down("sm")]:{flex:"1 1"}}),title:(0,t.css)({fontWeight:Me.typography.fontWeightBold,marginLeft:Me.spacing(.5),overflow:"hidden",textOverflow:"ellipsis"}),summaryWrapper:(0,t.css)({display:"flex",flexWrap:"wrap",[Me.breakpoints.down("sm")]:{flex:"2 2"}})}}function te({children:Me,title:De,headerElement:Re,...me}){const he=(0,u.of)(re),[Te,Be]=(0,n.useState)(!1);function we(){Be(Ne=>!Ne)}return n.createElement(n.Fragment,null,n.createElement(ne,{onRowToggle:we,isContentVisible:Te,title:De,headerElement:Re,...me}),Te&&n.createElement("div",{className:he.content},Me))}te.displayName="SettingsBar";const re=Me=>({content:(0,t.css)({marginTop:Me.spacing(1),marginLeft:Me.spacing(4)})});var de=e(3799);function ie({className:Me,isDataLoading:De=!1,timeRange:Re,timeSelectionEnabled:me,annotationsEnabled:he}){const Te=(0,u.of)(ge),Be=(0,a.t)("public-dashboard.settings-summary.time-range-picker-enabled-text","Time range picker = enabled"),we=(0,a.t)("public-dashboard.settings-summary.time-range-picker-disabled-text","Time range picker = disabled"),Ne=(0,a.t)("public-dashboard.settings-summary.annotations-show-text","Annotations = show"),Ze=(0,a.t)("public-dashboard.settings-summary.annotations-hide-text","Annotations = hide");return De?n.createElement("div",{className:(0,t.cx)(Te.summaryWrapper,Me)},n.createElement(K.y,{className:Te.summary,inline:!0,size:"sm"})):n.createElement("div",{className:(0,t.cx)(Te.summaryWrapper,Me)},n.createElement("span",{className:Te.summary},n.createElement(a.x6,{i18nKey:"public-dashboard.settings-summary.time-range-text"},"Time range = "),n.createElement(de.f,{className:Te.timeRange,value:Re})),n.createElement("span",{className:Te.summary},me?Be:we),n.createElement("span",{className:Te.summary},he?Ne:Ze))}ie.displayName="SettingsSummary";const ge=Me=>({summaryWrapper:(0,t.css)({display:"flex"}),summary:(0,t.css)`
      label: collapsedText;
      margin-left: ${Me.spacing.gridSize*2}px;
      font-size: ${Me.typography.bodySmall.fontSize};
      color: ${Me.colors.text.secondary};
    `,timeRange:(0,t.css)({display:"inline-block"})}),ve=s.Tp.pages.ShareDashboardModal.PublicDashboard;function ye({onRevoke:Me,timeRange:De,hasTemplateVariables:Re=!1,showSaveChangesAlert:me=!1,unsupportedDatasources:he=[],publicDashboard:Te,dashboard:Be}){const we=(0,u.of)(le),Ne=M(),[Ze,{isLoading:st}]=(0,v.T2)(),Qe=P.TP.hasPermission(y.AccessControlAction.DashboardsPublicWrite),ke=!Qe||st,je=!!r.$.featureToggles.publicDashboardsEmailSharing&&(0,g.a)("publicDashboardsEmailSharing"),{handleSubmit:He,setValue:Ge,register:Oe}=(0,o.mN)({defaultValues:{isAnnotationsEnabled:Te?.annotationsEnabled,isTimeSelectionEnabled:Te?.timeSelectionEnabled,isPaused:!Te?.isEnabled}}),Ke=async oe=>{const{isAnnotationsEnabled:ue,isTimeSelectionEnabled:be,isPaused:Le}=oe;Ze({dashboard:Be,payload:{...Te,annotationsEnabled:ue,timeSelectionEnabled:be,isEnabled:!Le}})},Ee=async(oe,ue)=>{Ge(oe,ue),await He(be=>Ke(be))()};function J(){D.c.publicDashboardUrlCopied()}return n.createElement("div",{className:we.configContainer},me&&n.createElement(C,null),!Qe&&n.createElement(S.t,{mode:"edit"}),Re&&n.createElement(U.D,null),he.length>0&&n.createElement(L.s,{unsupportedDataSources:he.join(", ")}),je&&n.createElement(Q,null),n.createElement(d.D,{label:(0,a.t)("public-dashboard.config.dashboard-url-field-label","Dashboard URL"),className:we.fieldSpace},n.createElement(i.p,{value:(0,R.mL)(Te.accessToken),readOnly:!0,disabled:!Te?.isEnabled,"data-testid":ve.CopyUrlInput,addonAfter:n.createElement(l.b,{"data-testid":ve.CopyUrlButton,variant:"primary",disabled:!Te?.isEnabled,getText:()=>(0,R.mL)(Te.accessToken),onClipboardCopy:J},n.createElement(a.x6,{i18nKey:"public-dashboard.config.copy-button"},"Copy"))})),n.createElement(d.D,{className:we.fieldSpace},n.createElement(h.PE,null,n.createElement(f.d,{...Oe("isPaused"),disabled:ke,onChange:oe=>{D.c.publicDashboardPauseSharingClicked({paused:oe.currentTarget.checked}),Ee("isPaused",oe.currentTarget.checked)},"data-testid":ve.PauseSwitch}),n.createElement(c.J,{className:(0,t.css)`
              margin-bottom: 0;
            `},n.createElement(a.x6,{i18nKey:"public-dashboard.config.pause-sharing-dashboard-label"},"Pause sharing dashboard")))),n.createElement(d.D,{className:we.fieldSpace},n.createElement(te,{title:(0,a.t)("public-dashboard.config.settings-title","Settings"),headerElement:({className:oe})=>n.createElement(ie,{className:oe,isDataLoading:st,timeRange:De,timeSelectionEnabled:Te?.timeSelectionEnabled,annotationsEnabled:Te?.annotationsEnabled}),"data-testid":ve.SettingsDropdown},n.createElement(N,{disabled:ke,onChange:Ee,register:Oe,timeRange:De}))),n.createElement(h.PE,{orientation:Ne?0:1,justify:Ne?"flex-end":"flex-start",align:Ne?"center":"normal"},n.createElement(h.Gy,{justify:"flex-end"},n.createElement(p.$n,{title:(0,a.t)("public-dashboard.config.revoke-public-URL-button-title","Revoke public URL"),onClick:Me,type:"button",disabled:ke,"data-testid":ve.DeleteButton,variant:"destructive",fill:"outline"},n.createElement(a.x6,{i18nKey:"public-dashboard.config.revoke-public-URL-button"},"Revoke public URL")))))}function pe({publicDashboard:Me,unsupportedDatasources:De}){const me=(0,y.useSelector)(Ze=>Ze.dashboard).getModel(),he=(0,E.z)(me.getDefaultTime(),me),Te=P.TP.hasPermission(y.AccessControlAction.DashboardsPublicWrite),Be=(0,R.kD)(me.getVariables()),[we]=(0,v.bN)(),Ne=Ze=>{we({dashboard:me,uid:Me.uid,dashboardUid:me.uid}),Ze()};return n.createElement(m.$s,null,({showModal:Ze,hideModal:st})=>n.createElement(ye,{publicDashboard:Me,dashboard:me,unsupportedDatasources:De,timeRange:he,showSaveChangesAlert:Te&&me.hasUnsavedChanges(),hasTemplateVariables:Be,onRevoke:()=>{D.c.revokePublicDashboardClicked(),Ze(b.m,{dashboardTitle:me.title,onConfirm:()=>Ne(st),onDismiss:()=>{Ze(I.Zy,{dashboard:me,onDismiss:st,activeTab:x.wr.publicDashboard})}})}}))}const le=Me=>({configContainer:(0,t.css)`
    label: config container;
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    gap: ${Me.spacing(3)};
  `,fieldSpace:(0,t.css)`
    label: field space;
    width: 100%;
    margin-bottom: 0;
  `,timeRange:(0,t.css)({display:"inline-block"})})},22234:(Y,A,e)=>{"use strict";e.d(A,{M:()=>x,D:()=>I});var t=e(32196),n=e(96540),o=e(13544),s=e(40845),r=e(51253),g=e(55852),u=e(62930),d=e(44836),i=e(72686),l=e(7758),f=e(16233),c=e(80348),h=e(29304),p=e(12257),m=e(10872),a=e(72254),v=e(71415),E=e(84167),D=e(66864),b=e(10880);const P=o.Tp.pages.ShareDashboardModal.PublicDashboard,y=({disabled:O,register:C})=>{const L=(0,s.of)(T),U=[{type:"publicAcknowledgment",description:(0,d.t)("public-dashboard.acknowledgment-checkboxes.public-ack-desc","Your entire dashboard will be public*"),testId:P.WillBePublicCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",tooltip:(0,d.t)("public-dashboard.acknowledgment-checkboxes.public-ack-tooltip","Learn more about public dashboards")}},{type:"dataSourcesAcknowledgment",description:(0,d.t)("public-dashboard.acknowledgment-checkboxes.data-src-ack-desc","Publishing currently only works with a subset of data sources*"),testId:P.LimitedDSCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/datasources/",tooltip:(0,d.t)("public-dashboard.acknowledgment-checkboxes.data-src-ack-tooltip","Learn more about public datasources")}},{type:"usageAcknowledgment",description:(0,d.t)("public-dashboard.acknowledgment-checkboxes.usage-ack-desc","Making a dashboard public will cause queries to run each time it is viewed, which may increase costs*"),testId:P.CostIncreaseCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",tooltip:(0,d.t)("public-dashboard.acknowledgment-checkboxes.usage-ack-desc-tooltip","Learn more about query caching")}}];return n.createElement(n.Fragment,null,n.createElement("p",{className:L.title},n.createElement(d.x6,{i18nKey:"public-dashboard.acknowledgment-checkboxes.ack-title"},"Before you make the dashboard public, acknowledge the following:")),n.createElement(E.n,{disabled:O},n.createElement(D.gW,{spacing:"md"},U.map(R=>n.createElement(D.Gy,{key:R.type,spacing:"none",align:"center"},n.createElement(b.S,{...C(R.type,{required:!0}),label:R.description,"data-testid":R.testId}),n.createElement(g.z9,{variant:"primary",href:R.info.href,target:"_blank",fill:"text",icon:"info-circle",rel:"noopener noreferrer",tooltip:R.info.tooltip}))))))},T=O=>({title:(0,t.css)`
    font-weight: ${O.typography.fontWeightBold};
  `}),M=o.Tp.pages.ShareDashboardModal.PublicDashboard,I=({unsupportedDatasources:O=[],unsupportedTemplateVariables:C=!1,dashboard:L,hasError:U=!1})=>{const R=(0,s.of)(S),B=f.TP.hasPermission(c.AccessControlAction.DashboardsPublicWrite),[H,{isLoading:W,isError:N}]=(0,i.U9)(),V=()=>{H({dashboard:L,payload:{isEnabled:!0}}),l.c.generatePublicDashboardUrlClicked({})},G=!B||W||N||U;return n.createElement("div",{className:R.container},n.createElement("div",null,n.createElement("p",{className:R.title},n.createElement(d.x6,{i18nKey:"public-dashboard.create-page.welcome-title"},"Welcome to public dashboards!")),n.createElement("p",{className:R.description},n.createElement(d.x6,{i18nKey:"public-dashboard.create-page.unsupported-features-desc"},"Currently, we don\u2019t support template variables or frontend data sources"))),!B&&n.createElement(h.t,{mode:"create"}),C&&n.createElement(m.D,null),O.length>0&&n.createElement(p.s,{unsupportedDataSources:O.join(", ")}),n.createElement(r.l,{onSubmit:V,validateOn:"onChange",maxWidth:"none"},({register:_,formState:{isValid:K}})=>n.createElement(n.Fragment,null,n.createElement("div",{className:R.checkboxes},n.createElement(y,{disabled:G,register:_})),n.createElement("div",{className:R.buttonContainer},n.createElement(g.$n,{type:"submit",disabled:G||!K,"data-testid":M.CreateButton},n.createElement(d.x6,{i18nKey:"public-dashboard.create-page.generate-public-url-button"},"Generate public URL"),W&&n.createElement(u.y,{className:R.loadingSpinner}))))))};function x({hasError:O}){const L=(0,c.useSelector)(B=>B.dashboard).getModel(),{unsupportedDataSources:U}=(0,v.Z)(L),R=(0,a.kD)(L.getVariables());return n.createElement(I,{dashboard:L,unsupportedDatasources:U,unsupportedTemplateVariables:R,hasError:O})}const S=O=>({container:(0,t.css)`
    display: flex;
    flex-direction: column;
    gap: ${O.spacing(4)};
  `,title:(0,t.css)`
    font-size: ${O.typography.h4.fontSize};
    margin: ${O.spacing(0,0,2)};
  `,description:(0,t.css)`
    color: ${O.colors.text.secondary};
    margin-bottom: ${O.spacing(0)};
  `,checkboxes:(0,t.css)`
    margin: ${O.spacing(0,0,4)};
  `,buttonContainer:(0,t.css)`
    display: flex;
    justify-content: end;
  `,loadingSpinner:(0,t.css)`
    margin-left: ${O.spacing(1)};
  `})},29304:(Y,A,e)=>{"use strict";e.d(A,{t:()=>g});var t=e(96540),n=e(13544),o=e(42418),s=e(44836);const r=n.Tp.pages.ShareDashboardModal.PublicDashboard,g=({mode:u})=>t.createElement(o.F,{severity:"info",title:(0,s.t)("public-dashboard.modal-alerts.no-upsert-perm-alert-title","You don\u2019t have permission to {{ mode }} a public dashboard",{mode:u}),"data-testid":r.NoUpsertPermissionsWarningAlert,bottomSpacing:0},t.createElement(s.x6,{i18nKey:"public-dashboard.modal-alerts.no-upsert-perm-alert-desc"},"Contact your admin to get permission to ",{mode:u}," public dashboards"))},12257:(Y,A,e)=>{"use strict";e.d(A,{s:()=>l});var t=e(32196),n=e(46942),o=e.n(n),s=e(96540),r=e(13544),g=e(40845),u=e(42418),d=e(44836);const i=r.Tp.pages.ShareDashboardModal.PublicDashboard,l=({unsupportedDataSources:c})=>{const h=(0,g.of)(f);return s.createElement(u.F,{severity:"warning",title:(0,d.t)("public-dashboard.modal-alerts.unsupported-data-source-alert-title","Unsupported data sources"),"data-testid":i.UnsupportedDataSourcesWarningAlert,bottomSpacing:0},s.createElement("p",{className:h.unsupportedDataSourceDescription},s.createElement(d.x6,{i18nKey:"public-dashboard.modal-alerts.unsupported-data-source-alert-desc"},"There are data sources in this dashboard that are unsupported for public dashboards. Panels that use these data sources may not function properly: ",{unsupportedDataSources:c},".")),s.createElement("a",{href:"https://grafana.com/docs/grafana/next/dashboards/dashboard-public/",className:o()("text-link",h.unsupportedDataSourceDescription)},s.createElement(d.x6,{i18nKey:"public-dashboard.modal-alerts.unsupport-data-source-alert-readmore-link"},"Read more about supported data sources")))},f=c=>({unsupportedDataSourceDescription:(0,t.css)`
    color: ${c.colors.text.secondary};
    margin-bottom: ${c.spacing(1)};
  `})},10872:(Y,A,e)=>{"use strict";e.d(A,{D:()=>g});var t=e(96540),n=e(13544),o=e(42418),s=e(44836);const r=n.Tp.pages.ShareDashboardModal.PublicDashboard,g=()=>t.createElement(o.F,{severity:"warning",title:(0,s.t)("public-dashboard.modal-alerts.unsupported-template-variable-alert-title","Template variables are not supported"),"data-testid":r.TemplateVariablesWarningAlert,bottomSpacing:0},t.createElement(s.x6,{i18nKey:"public-dashboard.modal-alerts.unsupported-template-variable-alert-desc"},"This public dashboard may not work since it uses template variables"))},4785:(Y,A,e)=>{"use strict";e.d(A,{a:()=>c,b:()=>h});var t=e(32196),n=e(96540),o=e(40845),s=e(62930),r=e(72686),g=e(72254),u=e(80348),d=e(42930),i=e(59037),l=e(22234),f=e(71415);const c=()=>{const m=(0,o.of)(p);return n.createElement(d.G,{className:m.loadingContainer},n.createElement(n.Fragment,null,"Loading configuration",n.createElement(s.y,{size:"lg",className:m.spinner})))},h=m=>{const{data:a,isLoading:v,isError:E}=(0,r.Bs)(m.dashboard.uid),b=(0,u.useSelector)(y=>y.dashboard).getModel(),{unsupportedDataSources:P}=(0,f.Z)(b);return n.createElement(n.Fragment,null,v?n.createElement(c,null):(0,g.lI)(a)?n.createElement(i.K,{publicDashboard:a,unsupportedDatasources:P}):n.createElement(l.M,{hasError:E}))},p=m=>({loadingContainer:(0,t.css)({height:"280px",alignItems:"center",justifyContent:"center",gap:m.spacing(1)}),spinner:(0,t.css)({marginBottom:m.spacing(0)})})},72254:(Y,A,e)=>{"use strict";e.d(A,{Xo:()=>u,_A:()=>l,_l:()=>h,gN:()=>c,iR:()=>p,kD:()=>d,lI:()=>i,mL:()=>f});var t=e(26657),n=e(32264),o=e(2913),s=e(31193),r=e(22699),g=e(31204),u=(m=>(m.PUBLIC="public",m.EMAIL="email",m))(u||{});const d=m=>m.length>0,i=m=>m?.uid!==""&&m?.uid!==void 0,l=async m=>{let a=new Set;for(const v of m)for(const E of v.targets){const D=E?.datasource?.type;D&&(g.z.has(D)&&await(0,s.tR)().get(E.datasource)instanceof t.iy||a.add(D))}return Array.from(a).sort()},f=m=>`${(0,o.zj)().appUrl}public-dashboards/${m}`,c=(m,a)=>`/d/${m}/${a}?shareView=${r.wr.publicDashboard}`,h=/^[A-Z\d._%+-]+@[A-Z\d.-]+\.[A-Z]{2,}$/i,p=()=>!!n.$.featureToggles.publicDashboards&&n.$.publicDashboardsEnabled},31204:(Y,A,e)=>{"use strict";e.d(A,{z:()=>t});const t=new Set(["__expr__","aggregations-io-datasource","apache-iotdb-datasource","aquaqanalytics-kdbbackend-datasource","axiomhq-axiom-datasource","cloudwatch","cnos-cnosdb-datasource","datasource","dlopes7-appdynamics-datasource","dvelop-odata-datasource","elasticsearch","frser-sqlite-datasource","grafadruid-druid-datasource","grafana-athena-datasource","grafana-azure-data-explorer-datasource","grafana-azure-monitor-datasource","grafana-bigquery-datasource","grafana-clickhouse-datasource","grafana-databricks-datasource","grafana-datadog-datasource","grafana-dynatrace-datasource","grafana-es-open-distro-datasource","grafana-falconlogscale-datasource","grafana-github-datasource","grafana-gitlab-datasource","grafana-honeycomb-datasource","grafana-iot-sitewise-datasource","grafana-jira-datasource","grafana-looker-datasource","grafana-mock-datasource","grafana-mongodb-datasource","grafana-newrelic-datasource","grafana-odbc-datasource","grafana-opcua-datasource","grafana-opensearch-datasource","grafana-oracle-datasource","grafana-orbit-datasource","grafana-redshift-datasource","grafana-salesforce-datasource","grafana-saphana-datasource","grafana-sentry-datasource","grafana-servicenow-datasource","grafana-snowflake-datasource","grafana-splunk-datasource","grafana-splunk-monitoring-datasource","grafana-sumologic-datasource","grafana-testdata-datasource","grafana-timestream-datasource","grafana-wavefront-datasource","grafana-x-ray-datasource","graphite","hadesarchitect-cassandra-datasource","influxdata-flightsql-datasource","influxdb","innius-grpc-datasource","kniepdennis-neo4j-datasource","loki","manassehzhou-maxcompute-datasource","marcusolsson-csv-datasource","mssql","mysql","nagasudhirpulla-api-datasource","needleinajaystack-haystack-datasource","opentsdb","postgres","prometheus","quickwit-quickwit-datasource","redis-datasource","sentinelone-dataset-datasource","sneller-sneller-datasource","spiceai-spicexyz-datasource","stackdriver","tdengine-datasource","trino-datasource","vertamedia-clickhouse-datasource","vertica-grafana-datasource","ydbtech-ydb-datasource","yesoreyeram-infinity-datasource"])},71415:(Y,A,e)=>{"use strict";e.d(A,{Z:()=>o});var t=e(96540),n=e(72254);const o=s=>{const[r,g]=(0,t.useState)([]);return(0,t.useEffect)(()=>{(async()=>await(0,n._A)(s.panels))().then(d=>{g(d)})},[s.panels]),{unsupportedDataSources:r}}},87895:(Y,A,e)=>{"use strict";e.d(A,{w:()=>r});var t=e(96540),n=e(88575),o=e(94354),s=e(44836);const r=({selectedTheme:g="current",onChange:u})=>{const d=[{label:(0,s.t)("share-modal.theme-picker.current","Current"),value:"current"},{label:(0,s.t)("share-modal.theme-picker.dark","Dark"),value:"dark"},{label:(0,s.t)("share-modal.theme-picker.light","Light"),value:"light"}];return t.createElement(n.D,{label:(0,s.t)("share-modal.theme-picker.field-name","Theme")},t.createElement(o.z,{options:d,value:g,onChange:u}))}},1702:(Y,A,e)=>{"use strict";e.d(A,{ShareModal:()=>t.Zy});var t=e(7686)},22699:(Y,A,e)=>{"use strict";e.d(A,{CF:()=>h,Lb:()=>c,P_:()=>i,XV:()=>d,Xe:()=>l,wr:()=>m});var t=e(65879),n=e(76885),o=e(71733),s=e(47232),r=e(32264),g=e(7030),u=e(74856);function d({useCurrentTimeRange:a,selectedTheme:v,panel:E,search:D=window.location.search,range:b=(0,u.jG)().timeRange(),orgId:P=r.$.bootData.user.orgId}){const y=new URLSearchParams(D),T=E?.timeFrom;if(T){const{from:M,to:I}=t.describeTextRange(T);y.set("from",M),y.set("to",I)}else y.set("from",String(b.from.valueOf())),y.set("to",String(b.to.valueOf()));return y.set("orgId",String(P)),a||(y.delete("from"),y.delete("to")),v!=="current"&&y.set("theme",v),E&&!y.has("editPanel")&&y.set("viewPanel",String(E.id)),y.delete("auth_token"),y.delete("shareView"),y}function i(){let a=window.location.href;const v=a.indexOf("?");return v!==-1&&(a=a.substring(0,v)),a}async function l(a,v,E,D){const b=i(),P=d({useCurrentTimeRange:a,selectedTheme:v,panel:E}),y=n.kM.appendQueryToUrl(b,P.toString());return D?await(0,g.f)(y):y}function f(a,v,E,D,b){const P=i(),y=d({useCurrentTimeRange:a,selectedTheme:E,panel:D,range:b});let T=P.replace(r.$.appSubUrl+"/dashboard/",r.$.appSubUrl+"/dashboard-solo/");T=T.replace(r.$.appSubUrl+"/d/",r.$.appSubUrl+"/d-solo/"),o.I.stripBaseFromUrl(P)==="/"&&(T=`${r.$.appUrl}d-solo/${v}`);const I=y.get("editPanel")??y.get("viewPanel")??"";return y.set("panelId",I),y.delete("editPanel"),y.delete("viewPanel"),n.kM.appendQueryToUrl(T,y.toString())}function c(a,v,E,D){let P=f(a,v,E,D).replace(r.$.appSubUrl+"/dashboard-solo/",r.$.appSubUrl+"/render/dashboard-solo/");return P=P.replace(r.$.appSubUrl+"/d-solo/",r.$.appSubUrl+"/render/d-solo/"),P+="&width=1000&height=500"+p(),P}function h(a,v,E,D,b){return`<iframe src="${f(a,v,E,D,b)}" width="450" height="200" frameborder="0"></iframe>`}function p(){const a="&tz=UTC"+encodeURIComponent((0,s.KQ)().format("Z"));if(!window.Intl)return a;const v=window.Intl.DateTimeFormat();if(!v.resolvedOptions)return a;const E=v.resolvedOptions();return E.timeZone?"&tz="+encodeURIComponent(E.timeZone):a}const m={link:"link",snapshot:"snapshot",export:"export",embed:"embed",libraryPanel:"library_panel",pdf:"pdf",report:"report",publicDashboard:"public_dashboard"}},52424:(Y,A,e)=>{"use strict";e.d(A,{Zx:()=>b,aK:()=>m});var t=e(32196),n=e(96540),o=e(16817),s=e(80997),r=e(13544),g=e(40845),u=e(38138),d=e(40276),i=e(83122),l=e(14578),f=e(55852),c=e(27677),h=e(6923);function p({dashboardUID:P,link:y}){const T=(0,g.of)(D),M=a({dashboardUID:P,link:y});return!M||E.length===0?null:n.createElement(u.W,null,n.createElement("div",{className:T.dropdown},n.createElement(d.E,null,M.map((I,x)=>n.createElement(u.W.Item,{url:I.url,target:y.targetBlank?"_blank":void 0,key:`dashlinks-dropdown-item-${I.uid}-${x}`,label:I.title,testId:r.Tp.components.DashboardLinks.link,"aria-label":`${I.title} dashboard`})))))}const m=P=>{const{link:y,linkInfo:T,dashboardUID:M}=P,I=a(P),x=(0,g.of)(D);return y.asDropdown?n.createElement(i.m,{overlay:n.createElement(p,{link:y,dashboardUID:M})},n.createElement(b,{"data-placement":"bottom","data-toggle":"dropdown","aria-controls":"dropdown-list","aria-haspopup":"menu",fill:"outline",variant:"secondary","data-testid":r.Tp.components.DashboardLinks.dropDown},n.createElement(l.I,{"aria-hidden":!0,name:"bars",className:x.iconMargin}),n.createElement("span",null,T.title))):n.createElement(n.Fragment,null,I.length>0&&I.map((S,O)=>n.createElement(b,{key:`dashlinks-list-item-${S.uid}-${O}`,icon:"apps",variant:"secondary",fill:"outline",href:S.url,target:y.targetBlank?"_blank":void 0,rel:"noreferrer","data-testid":r.Tp.components.DashboardLinks.link},S.title)))},a=({link:P,dashboardUID:y})=>{const{tags:T}=P,M=(0,o.A)(()=>v(T),[T]);return M.value?E(y,P,M.value):[]};async function v(P,y={getBackendSrv:c.AI}){return await y.getBackendSrv().search({tag:P,limit:100})}function E(P,y,T,M={getLinkSrv:h.mQ,sanitize:s.aj,sanitizeUrl:s.Jf}){return T.filter(I=>I.uid!==P).map(I=>{const x=I.uid,S=M.sanitize(I.title),O=M.getLinkSrv().getLinkUrl({...y,url:I.url}),C=M.sanitizeUrl(O);return{uid:x,title:S,url:C}})}function D(P){return{iconMargin:(0,t.css)({marginRight:P.spacing(.5)}),dropdown:(0,t.css)({maxWidth:"max(30vw, 300px)",maxHeight:"70vh",overflowY:"auto"}),button:(0,t.css)({color:P.colors.text.primary}),dashButton:(0,t.css)({fontSize:P.typography.bodySmall.fontSize,paddingLeft:P.spacing(1),paddingRight:P.spacing(1)})}}const b=n.forwardRef(({className:P,...y},T)=>{const M=(0,g.of)(D),I=y.href?f.z9:f.$n;return n.createElement(I,{...y,variant:"secondary",fill:"outline",className:(0,t.cx)(P,M.dashButton),ref:T})});b.displayName="DashboardLinkButton"},57650:(Y,A,e)=>{"use strict";e.d(A,{A:()=>B});var t=e(96540),n=e(97497),o=e(42941),s=e(1173),r=e(52622),g=e(13544),u=e(14110),d=e(96374),i=e(10343),l=e(7788),f=e(2913),c=e(10803),h=e(32196),p=e(69862),m=e(85200),a=e(2514),v=e(72574),E=e(40845),D=e(87978),b=e(24022),P=e(14578);const y=({debugMode:H,index:W,data:N,uiConfig:V,configs:G,onChange:_,toggleShowDebug:K})=>{const j=(0,E.of)(T),[k,Q]=(0,t.useState)([]),[ee,ae]=(0,t.useState)([]),Z=(0,t.useMemo)(()=>G[W],[G,W]);(0,t.useEffect)(()=>{const q=G[W].transformation,te=q.filter?.options?(0,m.Dq)(q.filter):void 0,re=G.slice(0,W).map(ye=>ye.transformation),de=G.slice(W,W+1).map(ye=>ye.transformation),ie={interpolate:ye=>(0,v.w)().replace(ye)},ge=(0,a.m)(re,N,ie).subscribe(ye=>{te&&(ye=N.filter(pe=>te(pe))),Q(ye)}),ve=(0,a.m)(re,N,ie).pipe((0,p.Z)(ye=>(0,a.m)(de,ye,ie))).subscribe(ae);return function(){ge.unsubscribe(),ve.unsubscribe()}},[W,N,G]);const ne=(0,t.useMemo)(()=>t.createElement(V.editor,{options:{...V.transformation.defaultOptions,...Z.transformation.options},input:k,onChange:q=>{_(W,{...Z.transformation,options:q})}}),[V.editor,V.transformation.defaultOptions,Z.transformation,k,_,W]);return t.createElement("div",{className:j.editor,"data-testid":g.Tp.components.TransformTab.transformationEditor(V.name)},ne,H&&t.createElement(D._,{title:"Debug transformation",subtitle:V.name,onClose:K},t.createElement("div",{className:j.debugWrapper,"data-testid":g.Tp.components.TransformTab.transformationEditorDebugger(V.name)},t.createElement("div",{className:j.debug},t.createElement("div",{className:j.debugTitle},"Input data"),t.createElement("div",{className:j.debugJson},t.createElement(b.B,{json:k}))),t.createElement("div",{className:j.debugSeparator},t.createElement(P.I,{name:"arrow-right"})),t.createElement("div",{className:j.debug},t.createElement("div",{className:j.debugTitle},"Output data"),t.createElement("div",{className:j.debugJson},ee&&t.createElement(b.B,{json:ee}))))))},T=H=>({title:(0,h.css)`
      display: flex;
      padding: 4px 8px 4px 8px;
      position: relative;
      height: 35px;
      border-radius: 4px 4px 0 0;
      flex-wrap: nowrap;
      justify-content: space-between;
      align-items: center;
    `,name:(0,h.css)`
      font-weight: ${H.typography.fontWeightMedium};
      color: ${H.colors.primary.text};
    `,iconRow:(0,h.css)`
      display: flex;
    `,icon:(0,h.css)`
      background: transparent;
      border: none;
      box-shadow: none;
      cursor: pointer;
      color: ${H.colors.text.secondary};
      margin-left: ${H.spacing(1)};
      &:hover {
        color: ${H.colors.text};
      }
    `,editor:(0,h.css)``,debugWrapper:(0,h.css)`
      display: flex;
      flex-direction: row;
    `,debugSeparator:(0,h.css)`
      width: 48px;
      min-height: 300px;
      display: flex;
      align-items: center;
      align-self: stretch;
      justify-content: center;
      margin: 0 ${H.spacing(.5)};
      color: ${H.colors.primary.text};
    `,debugTitle:(0,h.css)`
      padding: ${H.spacing(1)} ${H.spacing(.25)};
      font-family: ${H.typography.fontFamilyMonospace};
      font-size: ${H.typography.bodySmall.fontSize};
      color: ${H.colors.text};
      border-bottom: 1px solid ${H.colors.border.weak};
      flex-grow: 0;
      flex-shrink: 1;
    `,debug:(0,h.css)`
      margin-top: ${H.spacing(1)};
      padding: 0 ${H.spacing(1,1,1)};
      border: 1px solid ${H.colors.border.weak};
      background: ${H.isLight?H.v1.palette.white:H.v1.palette.gray05};
      border-radius: ${H.shape.radius.default};
      width: 100%;
      min-height: 300px;
      display: flex;
      flex-direction: column;
      align-self: stretch;
    `,debugJson:(0,h.css)`
      flex-grow: 1;
      height: 100%;
      overflow: hidden;
      padding: ${H.spacing(.5)};
    `});var M=e(22214),I=e(91847);const x=({isOpen:H,onCloseClick:W,transformer:N})=>{const{transformation:{name:V},help:G}=N,_=G||(0,I.$n)(),K=t.createElement(D._,{title:V,subtitle:"Transformation help",onClose:()=>W(!1)},t.createElement(M.j,{markdown:_,styleOverrides:{borderTop:"2px solid"}}));return H?K:null};var S=e(88575),O=e(88323),C=e(19743);const L=({index:H,data:W,config:N,onChange:V})=>{const G=(0,E.of)(U),_=(0,t.useMemo)(()=>({context:{data:W.series},showTopic:!0,showFilter:N.topic!==r.QR.Annotations,source:[{value:r.QR.Series,label:"Query results"},{value:r.QR.Annotations,label:"Annotation data"}]}),[W,N.topic]);return t.createElement("div",{className:G.wrapper},t.createElement(S.D,{label:"Apply transformation to"},t.createElement(t.Fragment,null,_.showTopic&&t.createElement(O.l6,{isClearable:!0,options:_.source,value:_.source.find(K=>K.value===N.topic),placeholder:_.source[0].label,className:G.padded,onChange:K=>{V(H,{...N,topic:K?.value})}}),_.showFilter&&t.createElement(C.x,{value:N.filter,context:_.context,item:{},onChange:K=>V(H,{...N,filter:K})}))))},U=H=>{const W=H.shape.radius.default;return{wrapper:(0,h.css)({padding:H.spacing(2),border:`2px solid ${H.colors.background.secondary}`,borderTop:"none",borderRadius:`0 0 ${W} ${W}`,position:"relative",top:"-4px"}),padded:(0,h.css)({marginBottom:H.spacing(1)})}},R=({onRemove:H,index:W,id:N,data:V,configs:G,uiConfig:_,onChange:K})=>{const[j,k]=(0,o.A)(!1),[Q,ee]=(0,o.A)(!1),[ae,Z]=(0,o.A)(!1),ne=!!G[W].transformation.disabled,q=G[W].transformation.topic,te=G[W].transformation.filter!=null||q!=null,re=te||V.series.length>1||(V.annotations?.length??0)>0,de=(0,t.useCallback)(ye=>{const pe=G[ye].transformation;K(ye,{...pe,disabled:pe.disabled?void 0:!0})},[K,G]),ie=(0,t.useCallback)(()=>{let ye={...G[W].transformation};ye.filter?delete ye.filter:ye.filter={id:s.jR.byRefId,options:""},K(W,ye)},[K,W,G]),ge=(0,t.useCallback)((ye,pe,le)=>Me=>{let De="panel_editor_tabs_transformations_toggle";f.Ay.featureToggles.transformationsRedesign&&(De="transformations_redesign_"+De),(0,u.rR)(De,{action:le?"off":"on",toggleId:pe,transformationId:G[W].transformation.id}),ye(Me)},[G,W]),ve=()=>t.createElement(t.Fragment,null,_.state&&t.createElement(c.p,{state:_.state}),t.createElement(i.A,{title:"Show transform help",icon:"info-circle",onClick:ge(Z,"help",ae),active:ae}),re&&t.createElement(i.A,{title:"Filter",icon:"filter",onClick:ge(ie,"filter",te),active:te}),t.createElement(i.A,{title:"Debug",icon:"bug",onClick:ge(ee,"debug",Q),active:Q}),t.createElement(i.A,{title:"Disable transformation",icon:ne?"eye-slash":"eye",onClick:ge(()=>de(W),"disabled",ne),active:ne,dataTestId:g.Tp.components.Transforms.disableTransformationButton}),t.createElement(i.q,{title:"Remove",icon:"trash-alt",onClick:()=>f.Ay.featureToggles.transformationsRedesign?k(!0):H(W)}),f.Ay.featureToggles.transformationsRedesign&&t.createElement(d.u,{isOpen:j,title:`Delete ${_.name}?`,body:"Note that removing one transformation may break others. If there is only a single transformation, you will go back to the main selection screen.",confirmText:"Delete",onConfirm:()=>{k(!1),H(W)},onDismiss:()=>k(!1)}));return t.createElement(t.Fragment,null,t.createElement(l.u,{id:N,index:W,title:`${W+1} - ${_.name}`,draggable:!0,actions:ve,disabled:ne,expanderMessages:{close:"Collapse transformation row",open:"Expand transformation row"}},te&&t.createElement(L,{index:W,config:G[W].transformation,data:V,onChange:K}),t.createElement(y,{debugMode:Q,index:W,data:q===r.QR.Annotations?V.annotations??[]:V.series,configs:G,uiConfig:_,onChange:K,toggleShowDebug:ee})),t.createElement(x,{transformer:_,isOpen:ae,onCloseClick:Z}))},B=({data:H,onChange:W,onRemove:N,configs:V})=>t.createElement(t.Fragment,null,V.map((G,_)=>{const K=n.h.getIfExists(G.transformation.id);return K?t.createElement(R,{index:_,id:`${G.id}`,key:`${G.id}`,data:H,configs:V,uiConfig:K,onRemove:N,onChange:W}):null}))},21427:(Y,A,e)=>{"use strict";e.d(A,{R:()=>b});var t=e(32196),n=e(96540),o=e(81010),s=e(18282),r=e(97497),g=e(13544),u=e(40845),d=e(87978),i=e(10354),l=e(15292),f=e(92174),c=e(10860),h=e(29158),p=e(2913),m=e(10803),a=e(94397);const D=[["viewAll","View all"],...Object.entries(a.eJ)];function b(S){const O=(0,u.of)(P),{suffix:C,xforms:L,search:U,onSearchChange:R,onSearchKeyDown:B,showIllustrations:H,onTransformationAdd:W,selectedFilter:N,data:V,onClose:G,onShowIllustrationsChange:_,onSelectedFilterChange:K}=S,j=(0,n.useCallback)(k=>{k?.click()},[]);return n.createElement(d._,{size:"md",onClose:()=>{G&&G()},title:"Add another transformation"},n.createElement("div",{className:O.searchWrapper},n.createElement(i.p,{"data-testid":g.Tp.components.Transforms.searchInput,className:O.searchInput,value:U??"",placeholder:"Search for transformation",onChange:R,onKeyDown:B,suffix:C,ref:j}),n.createElement("div",{className:O.showImages},n.createElement("span",{className:O.illustationSwitchLabel},"Show images")," ",n.createElement(l.d,{value:H,onChange:()=>_&&_(!H)}))),n.createElement("div",{className:O.filterWrapper},D.map(([k,Q])=>n.createElement(f.m,{key:k,onClick:()=>K&&K(k),label:Q,selected:N===k}))),n.createElement(y,{showIllustrations:H,transformations:L,data:V,onClick:k=>{W({value:k})}}))}function P(S){return{showImages:(0,t.css)({flexBasis:"0",display:"flex",gap:"8px",alignItems:"center"}),pickerInformationLine:(0,t.css)({fontSize:"16px",marginBottom:`${S.spacing(2)}`}),pickerInformationLineHighlight:(0,t.css)({verticalAlign:"middle"}),searchWrapper:(0,t.css)({display:"flex",flexWrap:"wrap",columnGap:"27px",rowGap:"16px",width:"100%"}),searchInput:(0,t.css)({flexGrow:"1",width:"initial"}),illustationSwitchLabel:(0,t.css)({whiteSpace:"nowrap"}),filterWrapper:(0,t.css)({padding:`${S.spacing(1)} 0`,display:"flex",flexWrap:"wrap",rowGap:`${S.spacing(1)}`,columnGap:`${S.spacing(.5)}`})}}function y({showIllustrations:S,transformations:O,onClick:C,data:L}){const U=(0,u.of)(T);return n.createElement("div",{className:U.grid},O.map(R=>{let B=o.M.Applicable;R.transformation.isApplicable!==void 0&&(B=R.transformation.isApplicable(L));const H=B>0;let W=null;R.transformation.isApplicableDescription!==void 0&&(typeof R.transformation.isApplicableDescription=="function"?W=R.transformation.isApplicableDescription(L):W=R.transformation.isApplicableDescription);let N=U.newCard;return H||(N=(0,t.cx)(U.newCard,U.cardDisabled)),n.createElement(c.Z,{className:N,"data-testid":g.Tp.components.TransformTab.newTransform(R.name),onClick:()=>C(R.id),key:R.id},n.createElement(c.Z.Heading,{className:U.heading},n.createElement("span",null,R.name),n.createElement("span",{className:U.pluginStateInfoWrapper},n.createElement(m.p,{state:R.state}))),n.createElement(c.Z.Description,{className:U.description},n.createElement("span",null,x(R.id)),S&&n.createElement("span",null,n.createElement("img",{className:U.image,src:M(R.id,!H),alt:R.name})),!H&&W!==null&&n.createElement(h.K,{className:U.cardApplicableInfo,name:"info-circle",tooltip:W})))}))}function T(S){return{heading:(0,t.css)`
            font-weight: 400,
            > button: {
                width: '100%',
                display: 'flex',
                justify-content: 'space-between',
                align-items: 'center',
                flex-wrap: 'no-wrap',
        },`,description:(0,t.css)({fontSize:"12px",display:"flex",flexDirection:"column",justifyContent:"space-between"}),image:(0,t.css)({display:"block",maxEidth:"100%`",marginTop:`${S.spacing(2)}`}),grid:(0,t.css)({display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gridAutoRows:"1fr",gap:`${S.spacing(2)} ${S.spacing(1)}`,width:"100%"}),cardDisabled:(0,t.css)({backgroundColor:"rgb(204, 204, 220, 0.045)",color:`${S.colors.text.disabled} !important`}),cardApplicableInfo:(0,t.css)({position:"absolute",bottom:`${S.spacing(1)}`,right:`${S.spacing(1)}`}),newCard:(0,t.css)({gridTemplateRows:"min-content 0 1fr 0"}),pluginStateInfoWrapper:(0,t.css)({marginLeft:"5px"})}}const M=(S,O)=>{let C=null;return O?C="disabled":C=p.Ay.theme2.isDark?"dark":"light",`public/img/transformations/${C}/${S}.svg`},I={[s.F.concatenate]:"Combine all fields into a single frame.",[s.F.configFromData]:"Set unit, min, max and more.",[s.F.fieldLookup]:"Use a field value to lookup countries, states, or airports.",[s.F.filterFieldsByName]:"Remove parts of the query results using a regex pattern.",[s.F.filterByRefId]:"Remove rows from the data based on origin query",[s.F.filterByValue]:"Remove rows from the query results using user-defined filters.",[s.F.groupBy]:"Group data by a field value and create aggregate data.",[s.F.groupingToMatrix]:"Summarize and reorganize data based on three fields.",[s.F.joinByField]:"Combine rows from 2+ tables, based on a related field.",[s.F.labelsToFields]:"Group series by time and return labels or tags as fields.",[s.F.merge]:"Merge multiple series. Values will be combined into one row.",[s.F.organize]:"Re-order, hide, or rename fields.",[s.F.partitionByValues]:"Split a one-frame dataset into multiple series.",[s.F.prepareTimeSeries]:"Stretch data frames from the wide format into the long format.",[s.F.reduce]:"Reduce all rows or data points to a single value (ex. max, mean).",[s.F.renameByRegex]:"Rename parts of the query results using a regular expression and replacement pattern.",[s.F.seriesToRows]:"Merge multiple series. Return time, metric and values as a row."},x=S=>I[S]||r.h.getIfExists(S)?.description||""},57120:(Y,A,e)=>{"use strict";e.d(A,{o:()=>B,e:()=>U});var t=e(96540),n=e(75494),o=e(97497),s=e(13544),r=e(14110),g=e(29158),u=e(55852),d=e(96374),i=e(19727),l=e(40276),f=e(66864),c=e(40845),h=e(2913),p=e(79280),m=e(16930),a=e(57650),v=e(32196),E=e(87885),D=e(42418),b=e(10354),P=e(10860),y=e(61680);const T={[E.f.Transformations]:"https://grafana.com/docs/grafana/latest/panels/transformations",[E.f.FieldConfig]:"https://grafana.com/docs/grafana/latest/panels/field-configuration-options/",[E.f.FieldConfigOverrides]:"https://grafana.com/docs/grafana/latest/panels/field-configuration-options/#override-a-field"},M=H=>T[H];var I=e(10803);const x="dashboard.components.TransformationEditor.featureInfoBox.isDismissed";function S(H){const{noTransforms:W,search:N,xforms:V,onSearchChange:G,onSearchKeyDown:_,onTransformationAdd:K,suffix:j}=H;return t.createElement(f.gW,null,W&&t.createElement(f.mc,{grow:1},t.createElement(y.b,{storageKey:x,defaultValue:!1},(k,Q)=>k?null:t.createElement(D.F,{title:"Transformations",severity:"info",onRemove:()=>{Q(!0)}},t.createElement("p",null,"Transformations allow you to join, calculate, re-order, hide, and rename your query results before they are visualized. ",t.createElement("br",null),"Many transforms are not suitable if you're using the Graph visualization, as it currently only supports time series data. ",t.createElement("br",null),"It can help to switch to the Table visualization to understand what a transformation is doing."," "),t.createElement("a",{href:M(E.f.Transformations),className:"external-link",target:"_blank",rel:"noreferrer"},"Read more")))),t.createElement(b.p,{"data-testid":s.Tp.components.Transforms.searchInput,value:N??"",autoFocus:!W,placeholder:"Search for transformation",onChange:G,onKeyDown:_,suffix:j}),V.map(k=>t.createElement(O,{key:k.name,transform:k,onClick:()=>{K({value:k.id})}})))}function O({transform:H,onClick:W}){const N=(0,c.of)(C);return t.createElement(P.Z,{className:N.card,"data-testid":s.Tp.components.TransformTab.newTransform(H.name),onClick:W},t.createElement(P.Z.Heading,null,H.name),t.createElement(P.Z.Description,null,H.description),H.state&&t.createElement(P.Z.Tags,null,t.createElement(I.p,{state:H.state})))}function C(H){return{card:(0,v.css)({margin:"0",padding:`${H.spacing(1)}`})}}var L=e(21427);const U="viewAll";class R extends t.PureComponent{constructor(W){super(W),this.onSearchChange=G=>{this.setState({search:G.target.value})},this.onSearchKeyDown=G=>{if(G.key==="Enter"){const{search:_}=this.state;if(_){const K=_.toLowerCase(),j=o.h.list().filter(k=>(k.name+k.description).toLowerCase().indexOf(K)>=0);j.length>0&&this.onTransformationAdd({value:j[0].id})}}else G.keyCode===27&&(this.setState({search:"",showPicker:!1}),G.stopPropagation())},this.getTransformationNextId=G=>{const{transformations:_}=this.state;let K=0;const j=_.filter(k=>k.id.startsWith(G)).map(k=>k.id);return j.length!==0&&(K=Math.max(...j.map(k=>parseInt(k.match(/\d+/)[0],10)))+1),`${G}-${K}`},this.onTransformationAdd=G=>{let _="panel_editor_tabs_transformations_management";h.Ay.featureToggles.transformationsRedesign&&(_="transformations_redesign_"+_),(0,r.rR)(_,{action:"add",transformationId:G.value});const{transformations:K}=this.state,j=this.getTransformationNextId(G.value);this.setState({search:"",showPicker:!1}),this.onChange([...K,{id:j,transformation:{id:G.value,options:{}}}])},this.onTransformationChange=(G,_)=>{const{transformations:K}=this.state,j=Array.from(K);let k="panel_editor_tabs_transformations_management";h.Ay.featureToggles.transformationsRedesign&&(k="transformations_redesign_"+k),(0,r.rR)(k,{action:"change",transformationId:j[G].transformation.id}),j[G].transformation=_,this.onChange(j)},this.onTransformationRemove=G=>{const{transformations:_}=this.state,K=Array.from(_);let j="panel_editor_tabs_transformations_management";h.Ay.featureToggles.transformationsRedesign&&(j="transformations_redesign_"+j),(0,r.rR)(j,{action:"remove",transformationId:K[G].transformation.id}),K.splice(G,1),this.onChange(K)},this.onTransformationRemoveAll=()=>{this.onChange([]),this.setState({showRemoveAllModal:!1})},this.onDragEnd=G=>{const{transformations:_}=this.state;if(!G||!G.destination)return;const K=G.source.index,j=G.destination.index;if(K===j)return;const k=Array.from(_),[Q]=k.splice(K,1);k.splice(j,0,Q),this.onChange(k)},this.renderEmptyMessage=()=>t.createElement(p.p,{onShowPicker:()=>{this.setState({showPicker:!0})}}),this.renderTransformationEditors=()=>{const{data:G,transformations:_}=this.state;return t.createElement(n.JY,{onDragEnd:this.onDragEnd},t.createElement(n.gL,{droppableId:"transformations-list",direction:"vertical"},K=>t.createElement("div",{ref:K.innerRef,...K.droppableProps},t.createElement(a.A,{configs:_,data:G,onRemove:this.onTransformationRemove,onChange:this.onTransformationChange}),K.placeholder)))};const N=W.panel.transformations||[],V=this.buildTransformationIds(N);this.state={transformations:N.map((G,_)=>({transformation:G,id:V[_]})),data:{series:[]},search:"",selectedFilter:U,showIllustrations:!0}}buildTransformationIds(W){const N={},V=[];for(let G=0;G<W.length;G++){const _=W[G];N[_.id]===void 0?N[_.id]=0:N[_.id]+=1,V.push(`${W[G].id}-${N[W[G].id]}`)}return V}componentDidMount(){this.subscription=this.props.panel.getQueryRunner().getData({withTransforms:!1,withFieldConfig:!1}).subscribe({next:W=>this.setState({data:W})})}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(W,N){if(h.Ay.featureToggles.transformationsRedesign){const G=!(N.transformations.length>0)||N.showPicker,K=!(this.state.transformations.length>0)||this.state.showPicker;if(G!==K){const j=Math.random()/2;this.setState({scrollTop:K?j:Number.MAX_SAFE_INTEGER})}}}onChange(W){this.setState({transformations:W}),this.props.panel.setTransformations(W.map(N=>N.transformation))}renderTransformsPicker(){let{showPicker:W}=this.state;const{transformations:N,search:V}=this.state,{transformationsRedesign:G}=h.Ay.featureToggles,_=!N?.length,K=N.length>0;let j=null,k=o.h.list().sort((Z,ne)=>Z.name>ne.name?1:ne.name>Z.name?-1:0);if(!G&&_&&(W=!0),this.state.selectedFilter!==U&&(k=k.filter(Z=>Z.categories&&this.state.selectedFilter&&Z.categories.has(this.state.selectedFilter))),V){const Z=V.toLowerCase(),ne=k.filter(q=>(q.name+q.description).toLowerCase().indexOf(Z)>=0);j=t.createElement(t.Fragment,null,ne.length," / ",k.length," \xA0\xA0",t.createElement(g.K,{name:"times",onClick:()=>{this.setState({search:""})},tooltip:"Clear search"})),k=ne}!j&&W&&!_&&(j=t.createElement(g.K,{name:"times",onClick:()=>{this.setState({showPicker:!1})},tooltip:"Close picker"}));let Q=null,ee=null;G?(Q=t.createElement(L.R,{noTransforms:_,search:V,suffix:j,xforms:k,onClose:()=>this.setState({showPicker:!1}),onSelectedFilterChange:Z=>this.setState({selectedFilter:Z}),onShowIllustrationsChange:Z=>this.setState({showIllustrations:Z}),onSearchChange:this.onSearchChange,onSearchKeyDown:this.onSearchKeyDown,onTransformationAdd:this.onTransformationAdd,data:this.state.data.series,selectedFilter:this.state.selectedFilter,showIllustrations:this.state.showIllustrations}),ee=t.createElement(t.Fragment,null,t.createElement(u.$n,{icon:"times",variant:"secondary",onClick:()=>this.setState({showRemoveAllModal:!0}),style:{marginLeft:this.props.theme.spacing.md}},"Delete all transformations"),t.createElement(d.u,{isOpen:!!this.state.showRemoveAllModal,title:"Delete all transformations?",body:"By deleting all transformations, you will go back to the main selection screen.",confirmText:"Delete all",onConfirm:()=>this.onTransformationRemoveAll(),onDismiss:()=>this.setState({showRemoveAllModal:!1})}))):Q=t.createElement(S,{noTransforms:_,search:V,suffix:j,xforms:k,onSearchChange:this.onSearchChange,onSearchKeyDown:this.onSearchKeyDown,onTransformationAdd:this.onTransformationAdd});const ae=t.createElement(i.e,null,t.createElement(u.$n,{icon:"plus",variant:"secondary",onClick:()=>{this.setState({showPicker:!0})},"data-testid":s.Tp.components.Transforms.addTransformationButton},"Add another transformation"),ee);return t.createElement(t.Fragment,null,W&&Q,G&&K&&ae||!G&&!W&&K&&ae)}render(){const{panel:{alert:W}}=this.props,{transformations:N}=this.state,V=N.length>0;if(W){const G=V?"Transformations can't be used on a panel with alerts":"Transformations can't be used on a panel with existing alerts";return t.createElement(m.c,{message:G})}return t.createElement(l.E,{scrollTop:this.state.scrollTop,autoHeightMin:"100%"},t.createElement(f.mc,{padding:"lg"},t.createElement("div",{"data-testid":s.Tp.components.TransformTab.content},!V&&h.Ay.featureToggles.transformationsRedesign&&this.renderEmptyMessage(),V&&this.renderTransformationEditors(),this.renderTransformsPicker())))}}const B=(0,c.SL)(R)},68064:(Y,A,e)=>{"use strict";e.d(A,{A:()=>D});var t=e(32196),n=e(96540),o=e(13544),s=e(12131),r=e(32264),g=e(40845),u=e(67061),d=e(90613),i=e(94753),l=e(55852),f=e(44836),c=e(36974),h=e(36043),p=e(7758),m=e(74730),a=e(80348),v=e(28601);const D=({dashboard:P,canCreate:y})=>{const T=(0,g.of)(b),M=(0,a.useDispatch)(),I=(0,a.useSelector)(O=>O.dashboard.initialDatasource),x=P instanceof h.H$,S=()=>{let O;x?O=(0,m.OK)(P):(O=(0,c.OK)(P,I),M((0,v.Ub)(void 0))),s.Ny.partial({editPanel:O,firstPanel:!0}),p.c.emptyDashboardButtonClicked({item:"add_visualization"})};return n.createElement(u.B,{alignItems:"center",justifyContent:"center"},n.createElement("div",{className:T.wrapper},n.createElement(u.B,{alignItems:"stretch",justifyContent:"center",gap:4,direction:"column"},n.createElement(d.a,{borderColor:"strong",borderStyle:"dashed",padding:4},n.createElement(u.B,{direction:"column",alignItems:"center",gap:2},n.createElement(i.E,{element:"h1",textAlignment:"center",weight:"medium"},n.createElement(f.x6,{i18nKey:"dashboard.empty.add-visualization-header"},"Start your new dashboard by adding a visualization")),n.createElement(d.a,{marginBottom:2,paddingX:4},n.createElement(i.E,{element:"p",textAlignment:"center",color:"secondary"},n.createElement(f.x6,{i18nKey:"dashboard.empty.add-visualization-body"},"Select a data source and then query and visualize your data with charts, stats and tables or create lists, markdowns and other widgets."))),n.createElement(l.$n,{size:"lg",icon:"plus","data-testid":o.Tp.pages.AddDashboard.itemButton("Create new panel button"),onClick:S,disabled:!y},n.createElement(f.x6,{i18nKey:"dashboard.empty.add-visualization-button"},"Add visualization")))),n.createElement(u.B,{direction:{xs:"column",md:"row"},wrap:"wrap",gap:4},r.$.featureToggles.vizAndWidgetSplit&&n.createElement(d.a,{borderColor:"strong",borderStyle:"dashed",padding:3,flex:1},n.createElement(u.B,{direction:"column",alignItems:"center",gap:1},n.createElement(i.E,{element:"h3",textAlignment:"center",weight:"medium"},n.createElement(f.x6,{i18nKey:"dashboard.empty.add-widget-header"},"Add a widget")),n.createElement(d.a,{marginBottom:2},n.createElement(i.E,{element:"p",textAlignment:"center",color:"secondary"},n.createElement(f.x6,{i18nKey:"dashboard.empty.add-widget-body"},"Create lists, markdowns and other widgets"))),n.createElement(l.$n,{icon:"plus",fill:"outline","data-testid":o.Tp.pages.AddDashboard.itemButton("Create new widget button"),onClick:()=>{p.c.emptyDashboardButtonClicked({item:"add_widget"}),s.Ny.partial({addWidget:!0})},disabled:!y},n.createElement(f.x6,{i18nKey:"dashboard.empty.add-widget-button"},"Add widget")))),n.createElement(d.a,{borderColor:"strong",borderStyle:"dashed",padding:3,flex:1},n.createElement(u.B,{direction:"column",alignItems:"center",gap:1},n.createElement(i.E,{element:"h3",textAlignment:"center",weight:"medium"},n.createElement(f.x6,{i18nKey:"dashboard.empty.add-library-panel-header"},"Import panel")),n.createElement(d.a,{marginBottom:2},n.createElement(i.E,{element:"p",textAlignment:"center",color:"secondary"},n.createElement(f.x6,{i18nKey:"dashboard.empty.add-library-panel-body"},"Add visualizations that are shared with other dashboards."))),n.createElement(l.$n,{icon:"plus",fill:"outline","data-testid":o.Tp.pages.AddDashboard.itemButton("Add a panel from the panel library button"),onClick:()=>{p.c.emptyDashboardButtonClicked({item:"import_from_library"}),x||(0,c.s3)(P)},disabled:!y},n.createElement(f.x6,{i18nKey:"dashboard.empty.add-library-panel-button"},"Add library panel")))),n.createElement(d.a,{borderColor:"strong",borderStyle:"dashed",padding:3,flex:1},n.createElement(u.B,{direction:"column",alignItems:"center",gap:1},n.createElement(i.E,{element:"h3",textAlignment:"center",weight:"medium"},n.createElement(f.x6,{i18nKey:"dashboard.empty.import-a-dashboard-header"},"Import a dashboard")),n.createElement(d.a,{marginBottom:2},n.createElement(i.E,{element:"p",textAlignment:"center",color:"secondary"},n.createElement(f.x6,{i18nKey:"dashboard.empty.import-a-dashboard-body"},"Import dashboards from files or",n.createElement("a",{href:"https://grafana.com/grafana/dashboards/"},"grafana.com"),"."))),n.createElement(l.$n,{icon:"upload",fill:"outline","data-testid":o.Tp.pages.AddDashboard.itemButton("Import dashboard button"),onClick:()=>{p.c.emptyDashboardButtonClicked({item:"import_dashboard"}),(0,c.VF)()},disabled:!y},n.createElement(f.x6,{i18nKey:"dashboard.empty.import-dashboard-button"},"Import dashboard"))))))))};function b(P){return{wrapper:(0,t.css)({label:"dashboard-empty-wrapper",flexDirection:"column",maxWidth:"890px",gap:P.spacing.gridSize*4,paddingTop:P.spacing(2),[P.breakpoints.up("sm")]:{paddingTop:P.spacing(12)}})}}},2038:(Y,A,e)=>{"use strict";e.d(A,{Z:()=>f});var t=e(96540),n=e(12131),o=e(32196),s=e(40845),r=e(27746),g=e(14578),u=e(56034),d=e(16797);const i=({notice:c,onClick:h})=>{const p=(0,s.of)(l),m=c.severity==="error"||c.severity==="warning"?"exclamation-triangle":"file-landscape-alt";return c.inspect&&h?t.createElement(r.I,{className:p.notice,icon:m,iconSize:"md",key:c.severity,tooltip:c.text,onClick:a=>h(a,c.inspect)}):c.link?t.createElement("a",{className:p.notice,"aria-label":c.text,href:c.link,target:"_blank",rel:"noreferrer"},t.createElement(g.I,{name:m,style:{marginRight:"8px"},size:"md"})):t.createElement(u.m,{key:c.severity,content:c.text},t.createElement("span",{className:p.iconTooltip},t.createElement(g.I,{name:m,size:"md"})))},l=c=>({notice:(0,o.css)({background:"inherit",border:"none",borderRadius:c.shape.radius.default}),iconTooltip:(0,o.css)({color:`${c.colors.text.secondary}`,backgroundColor:"inherit",cursor:"auto",border:"none",borderRadius:`${c.shape.radius.default}`,padding:`${c.spacing(0,1)}`,height:` ${c.spacing(c.components.height.md)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,d.getFocusStyles)(c),zIndex:1},"&: focus:not(:focus-visible)":(0,d.getMouseFocusStyles)(c),"&:hover ":{boxShadow:`${c.shadows.z1}`,color:`${c.colors.text.primary}`,background:`${c.colors.background.secondary}`}})}),f=({frames:c,panelId:h})=>{const p=(0,t.useCallback)((a,v)=>{a.stopPropagation(),n.Ny.partial({inspect:h,inspectTab:v})},[h]),m={};for(const a of c)if(!(!a.meta||!a.meta.notices))for(const v of a.meta.notices)m[v.severity]=v;return t.createElement(t.Fragment,null,Object.values(m).map(a=>t.createElement(i,{notice:a,onClick:p,key:a.severity})))}},91126:(Y,A,e)=>{"use strict";e.d(A,{M:()=>l});var t=e(37055),n=e(58972),o=e(1173),s=e(11261),r=e(28240),g=e(85200),u=e(88895);const d="hideSeriesFrom",i=(0,t.ZW)(d);function l(v,E,D,b){const{overrides:P}=D,y=v,T=P.findIndex(i);if(T<0){if(E===u.B.ToggleSelection){const C=f([y,...a(P,b)]);return{...D,overrides:[...D.overrides,C]}}const S=m(b,y),O=f(S);return{...D,overrides:[...D.overrides,O]}}const M=Array.from(P),[I]=M.splice(T,1);if(E===u.B.ToggleSelection){let S=h(I);const O=a(M,b);if(O.length>0&&(S=S.filter(L=>O.indexOf(L)<0)),S[0]===y&&S.length===1)return{...D,overrides:M};const C=f([y,...O]);return{...D,overrides:[...M,C]}}const x=c(I,y);return p(x,b)?{...D,overrides:M}:{...D,overrides:[...M,x]}}function f(v,E=n.PP.exclude,D){return D=D??{id:"custom.hideFrom",value:{viz:!0,legend:!1,tooltip:!1}},{__systemRef:d,matcher:{id:o.Ct.byNames,options:{mode:E,names:v,prefix:E===n.PP.exclude?"All except:":void 0,readOnly:!0}},properties:[{...D,value:{viz:!0,legend:!1,tooltip:!1}}]}}const c=(v,E,D=n.PP.exclude)=>{const b=v.properties.find(T=>T.id==="custom.hideFrom"),P=h(v),y=P.findIndex(T=>T===E);return y<0?P.push(E):P.splice(y,1),f(P,D,b)},h=v=>{const E=v.matcher.options?.names;return Array.isArray(E)?[...E]:[]},p=(v,E)=>h(v).length===m(E).length,m=(v,E)=>{const D=new Set;for(const b of v)for(const P of b.fields){if(P.type!==s.PU.number)continue;const y=(0,r.Ct)(P,b,v);y!==E&&D.add(y)}return Array.from(D)},a=(v,E)=>{let D=[];for(const b of v){const P=b.properties.find(y=>y.id==="custom.hideFrom");if(P!==void 0&&P.value?.legend===!0){const T=g.sJ.get(b.matcher.id).get(b.matcher.options);for(const M of E)for(const I of M.fields){if(I.type!==s.PU.number)continue;const x=(0,r.Ct)(I,M,E);T(I,M,E)&&D.push(x)}}}return D}},61582:(Y,A,e)=>{"use strict";e.d(A,{a:()=>d});var t=e(49426),n=e(47232),o=e(85858);const s=100;class r{constructor(){this.listeners=[],this.budget=1,this.threshold=1.5,this.ok=new t.t(!0),this.lastUpdate=Date.now(),this.isLive=!1,this.liveTimeOffset=0,this.measure=()=>{const l=Date.now();this.budget=(l-this.lastUpdate)/s;const f=this.ok.getValue(),c=this.budget<=this.threshold;if(f!==c&&this.ok.next(c),this.lastUpdate=l,this.isLive&&this.ok.getValue()&&this.timeRange){let h;for(const p of this.listeners){if(!p.panel.props.isInView)continue;if(l-p.last>=p.intervalMs){if(!h){const{raw:a}=this.timeRange;h={raw:a,from:(0,n.KQ)(l-this.liveTimeOffset),to:(0,n.KQ)(l)}}p.panel.liveTimeChanged(h),p.last=l}}}}}setLiveTimeRange(l){if(this.timeRange=l,this.isLive=l?.raw?.to==="now",this.isLive){const f=o.parse(l.raw.from,!1)?.valueOf(),c=o.parse(l.raw.to,!0)?.valueOf();this.liveTimeOffset=c-f;for(const h of this.listeners)h.intervalMs=u(this.liveTimeOffset,h.panel.props.width)}}listen(l){this.listeners.push({last:this.lastUpdate,panel:l,intervalMs:u(6e4,l.props.width)})}remove(l){this.listeners=this.listeners.filter(f=>f.panel!==l)}updateInterval(l){if(!(!this.timeRange||!this.isLive)){for(const f of this.listeners)if(f.panel===l){f.intervalMs=u(this.liveTimeOffset,f.panel.props.width);return}}}}const g=5*60*1e3;function u(i,l){const f=Math.ceil(i/l/100)*100;return f>g?g:f}const d=new r;setInterval(d.measure,s)},17493:(Y,A,e)=>{"use strict";e.d(A,{Fu:()=>D,np:()=>b});var t=e(34796),n=e.n(t),o=e(2543),s=e.n(o),r=e(95093),g=e.n(r),u=e(26272),d=e(85858),i=e(17172),l=e(12131),f=e(27677),c=e(62301),h=e(68576),p=e(72255),m=e(31193),a=e(10096),v=e(14792),E=e(69064);class D{constructor(){}_dashboardLoadFailed(T,M){return M=M||!1,{meta:{canStar:!1,isSnapshot:M,canDelete:!1,canSave:!1,canEdit:!1,canShare:!1,dashboardNotFound:!0},dashboard:{title:T,uid:T,schemaVersion:0}}}loadDashboard(T,M,I){const x=(0,p.sP)();let S;if(T==="script"&&M)S=this._loadScriptedDashboard(M);else if(T==="snapshot"&&M)S=(0,E.s)().getSnapshot(M).catch(()=>this._dashboardLoadFailed("Snapshot not found",!0));else if(T==="ds"&&M)S=this._loadFromDatasource(M);else if(T==="public"&&I)S=f.IB.getPublicDashboardByUid(I).then(O=>O).catch(O=>{const C=O.data.statusCode===403&&O.data.messageId==="publicdashboards.notEnabled",L=O.data.statusCode===404&&O.data.messageId==="publicdashboards.notFound",U=O.data.statusCode===404&&O.data.messageId==="publicdashboards.dashboardNotFound",R=this._dashboardLoadFailed(C?"Public Dashboard paused":"Public Dashboard Not found",!0);return{...R,meta:{...R.meta,publicDashboardEnabled:L?void 0:!C,dashboardNotFound:L||U}}});else if(I){const O=x.getFromCache(I);if(O)return Promise.resolve(O);S=f.IB.getDashboardByUid(I).then(C=>{if(C.meta.isFolder)throw a.lE.emit(u.r1.alertError,["Dashboard not found"]),new Error("Dashboard not found");return C}).catch(()=>this._dashboardLoadFailed("Not found",!0))}else throw new Error("Dashboard uid or slug required");return S.then(O=>(O.meta.dashboardNotFound!==!0&&c.A.addDashboardImpression(O.dashboard.uid),O)),S}_loadScriptedDashboard(T){const M="public/dashboards/"+T.replace(/\.(?!js)/,"/")+"?"+new Date().getTime();return(0,i.AI)().get(M).then(this._executeScript.bind(this)).then(I=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:I.data}),I=>(console.error("Script dashboard error "+I),a.lE.emit(u.r1.alertError,["Script Error","Please make sure it exists and returns a valid dashboard"]),this._dashboardLoadFailed("Scripted dashboard")))}async _loadFromDatasource(T){const M=await(0,m.tR)().get(T);if(!M)return Promise.reject("can not find datasource: "+T);const I=new URLSearchParams(window.location.search),x=I.get("path");if(!x)return Promise.reject("expecting path parameter");const S={};return I.forEach((O,C)=>{S[C]=O}),(0,i.AI)().get(`/api/datasources/uid/${M.uid}/resources/${x}`,S).then(O=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:O}))}_executeScript(T){const M={dashboardSrv:(0,v.UA)(),datasourceSrv:(0,m.tR)()},x=new Function("ARGS","kbn","dateMath","_","moment","window","document","$","jQuery","services",T)(l.Ny.getSearchObject(),h.A,d,s(),g(),window,document,n(),n(),M);return(0,o.isFunction)(x)?new Promise(S=>{x(O=>{S({data:O})})}):{data:x}}}let b=new D;const P=y=>{throw new Error("dashboardLoaderSrv can be only overriden in test environment")}},14792:(Y,A,e)=>{"use strict";e.d(A,{UA:()=>h});var t=e(75505),n=e(26272),o=e(28138),s=e(44836),r=e(27677),g=e(11230),u=e(28444),d=e(98365),i=e(19752);class l{constructor(){this.onRemovePanel=m=>{const a=this.getCurrent();a&&(0,i.FC)(a,a.getPanelById(m),!0)},o.l.subscribe(u.Vz,m=>this.onRemovePanel(m.payload))}create(m,a){return new d.G(m,a)}setCurrent(m){this.dashboard=m}getCurrent(){return this.dashboard}saveJSONDashboard(m){const a=JSON.parse(m);return(0,g.kV)({dashboard:a,folderUid:this.dashboard?.meta.folderUid||a.folderUid})}saveDashboard(m,a){return(0,t.s)((0,r.AI)().fetch({url:"/api/dashboards/db/",method:"POST",data:{...m,dashboard:m.dashboard.getSaveModelClone()},...a}))}starDashboard(m,a){const v=(0,r.AI)(),E={showSuccessAlert:!1,url:"/api/user/stars/dashboard/uid/"+m,method:a?"DELETE":"POST"};return v.request(E).then(()=>{const D=!a;this.dashboard?.uid===m&&(this.dashboard.meta.isStarred=D);const b=D?(0,s.t)("notifications.starred-dashboard","Dashboard starred"):(0,s.t)("notifications.unstarred-dashboard","Dashboard unstarred");return o.l.emit(n.r1.alertSuccess,[b]),D})}}let f;function c(p){f=p}function h(){return f||(f=new l),f}},69064:(Y,A,e)=>{"use strict";e.d(A,{s:()=>d});var t=e(75505),n=e(81160),o=e(17172),s=e(32264),r=e(10096);const g={create:i=>(0,o.AI)().post("/api/snapshots",i),getSnapshots:()=>(0,o.AI)().get("/api/dashboard/snapshots"),getSharingOptions:()=>(0,o.AI)().get("/api/snapshot/shared-options"),deleteSnapshot:i=>(0,o.AI)().delete("/api/snapshots/"+i),getSnapshot:async i=>{const l=await(0,o.AI)().get("/api/snapshots/"+i);return l.meta.canShare=!1,l}};class u{constructor(){this.apiVersion="dashboardsnapshot.grafana.app/v0alpha1",this.url=`/apis/${this.apiVersion}/namespaces/${s.$.namespace}/dashboardsnapshots`}async create(l){return(0,o.AI)().post(this.url+"/create",l)}async getSnapshots(){return(await(0,o.AI)().get(this.url)).items.map(f=>({key:f.metadata.name,name:f.spec.title,external:f.spec.externalUrl!=null,externalUrl:f.spec.externalUrl}))}deleteSnapshot(l){return(0,o.AI)().delete(this.url+"/"+l)}async getSharingOptions(){return(0,o.AI)().get("/api/snapshot/shared-options")}async getSnapshot(l){const f={};if(!r.TP.isSignedIn){alert("TODO... need a barer token for anonymous use case");const c=`??? TODO, get anon token for snapshots (${r.TP.user?.name}) ???`;f.Authorization=`Bearer ${c}`}return(0,t.s)((0,o.AI)().fetch({url:this.url+"/"+l+"/body",method:"GET",headers:f}).pipe((0,n.T)(c=>({dashboard:c.data.dashboard,meta:{isSnapshot:!0,canSave:!1,canEdit:!1,canAdmin:!1,canStar:!1,canShare:!1,canDelete:!1,isFolder:!1,provisioned:!1}}))))}}function d(){return s.$.featureToggles.kubernetesSnapshots?new u:g}},74856:(Y,A,e)=>{"use strict";e.d(A,{jG:()=>P});var t=e(2543),n=e(47232),o=e(43127),s=e(65879),r=e(26272),g=e(85858),u=e(12131),d=e(79065),i=e(76412),l=e(28138),f=e(2913),c=e(16233),h=e(80582),p=e(21380),m=e(28444),a=e(11134);function v({urlRefresh:y,currentRefresh:T,isAllowedIntervalFn:M,minRefreshInterval:I,refreshIntervals:x=a.cb}){if(!y)return T;const S=M(y),O=x.find(C=>C===y);if(!S||!O){const C=I?x.find(U=>U===I):void 0,L=x?.length?x[0]:void 0;return C??L??T}return y||T}class E{constructor(T){this.contextSrv=T,this.timeRangeForUrl=()=>{const M=this.timeRange().raw;return(0,n.Ar)(M.from)&&(M.from=M.from.valueOf().toString()),(0,n.Ar)(M.to)&&(M.to=M.to.valueOf().toString()),M},this.time=(0,o.E2)().raw,this.timeAtLoad=(0,o.E2)().raw,this.refreshTimeModel=this.refreshTimeModel.bind(this),l.A.subscribe(m.U0,M=>{this.zoomOut(M.payload.scale,M.payload.updateUrl)}),l.A.subscribe(m.Io,M=>{this.shiftTime(M.payload.direction,M.payload.updateUrl)}),l.A.subscribe(m.Rh,M=>{this.makeAbsoluteTime(M.payload.updateUrl)}),l.A.subscribe(m.Bt,()=>{this.copyTimeRangeToClipboard()}),l.A.subscribe(m.VZ,M=>{this.pasteTimeRangeFromClipboard(M.payload.updateUrl)}),document.addEventListener("visibilitychange",()=>{this.autoRefreshBlocked&&document.visibilityState==="visible"&&(this.autoRefreshBlocked=!1,this.refreshTimeModel())})}init(T){this.timeModel=T,this.time=T.time,this.refresh=T.refresh,this.initTimeFromUrl(),this.parseTime(),this.timeAtLoad=(0,t.cloneDeep)(this.time),this.refresh&&this.setAutoRefresh(this.refresh)}getValidIntervals(T){return this.contextSrv.getValidIntervals(T)}parseTime(){(0,t.isString)(this.time.from)&&this.time.from.indexOf("Z")>=0&&(this.time.from=(0,n.KQ)(this.time.from).utc()),(0,t.isString)(this.time.to)&&this.time.to.indexOf("Z")>=0&&(this.time.to=(0,n.KQ)(this.time.to).utc())}parseUrlParam(T){if(T.indexOf("now")!==-1)return T;if(T.length===8){const M=(0,n.yT)(T,"YYYYMMDD");if(M.isValid())return M}else if(T.length===15){const M=(0,n.yT)(T,"YYYYMMDDTHHmmss");if(M.isValid())return M}if(!isNaN(Number(T))){const M=parseInt(T,10);return(0,n.yT)(M)}return null}getTimeWindow(T,M){const I=parseInt(T,10);let x;return M.match(/^\d+$/)&&parseInt(M,10)?x=parseInt(M,10):x=s.intervalToMs(M),{from:(0,n.yT)(I-x/2),to:(0,n.yT)(I+x/2)}}initTimeFromUrl(){if(f.$W.publicDashboardAccessToken&&this.timeModel?.timepicker?.hidden)return;const T=u.Ny.getSearch();T.get("time")&&T.get("time.window")&&(this.time=this.getTimeWindow(T.get("time"),T.get("time.window"))),T.get("from")&&(this.time.from=this.parseUrlParam(T.get("from"))||this.time.from),T.get("to")&&(this.time.to=this.parseUrlParam(T.get("to"))||this.time.to),T.get("to")&&T.get("to").indexOf("now")===-1&&(this.refresh=!1,this.timeModel&&(this.timeModel.refresh=void 0)),this.refresh=v({urlRefresh:T.get("refresh"),currentRefresh:this.refresh,refreshIntervals:Array.isArray(this.timeModel?.timepicker?.refresh_intervals)?this.timeModel?.timepicker?.refresh_intervals:void 0,isAllowedIntervalFn:this.contextSrv.isAllowedInterval,minRefreshInterval:f.$W.minRefreshInterval})}updateTimeRangeFromUrl(){const T=u.Ny.getSearch();if(T.get("left"))return;const M=this.timeRangeForUrl(),I=T.get("from"),x=T.get("to");I&&x?(I!==M.from||x!==M.to)&&(this.initTimeFromUrl(),this.setTime(this.time,!1)):this.timeHasChangedSinceLoad()&&this.setTime(this.timeAtLoad,!0)}timeHasChangedSinceLoad(){return this.timeAtLoad&&(this.timeAtLoad.from!==this.time.from||this.timeAtLoad.to!==this.time.to)}setAutoRefresh(T){this.timeModel&&(this.timeModel.refresh=T),this.stopAutoRefresh();const M=u.Ny.getSearchObject();if(!T){M.refresh&&u.Ny.partial({refresh:null},!0);return}let I=T,x=60*1e3;T===c.SM?x=this.getAutoRefreshInteval().intervalMs:(I=this.contextSrv.getValidInterval(T),x=s.intervalToMs(I)),this.refreshMS=x,this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(x),this.refreshTimeModel()},x),M.refresh!==I&&u.Ny.partial({refresh:I},!0)}getAutoRefreshInteval(){const T=window?.innerWidth??2e3;return s.calculateInterval(this.timeRange(),T,f.$W.minRefreshInterval)}refreshTimeModel(){this.timeModel?.timeRangeUpdated(this.timeRange())}startNextRefreshTimer(T){this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(T),this.contextSrv.isGrafanaVisible()?this.refreshTimeModel():this.autoRefreshBlocked=!0},T)}stopAutoRefresh(){clearTimeout(this.refreshTimer),this.refreshTimer=void 0,this.refreshMS=void 0}resumeAutoRefresh(){this.timeModel?.refresh&&this.setAutoRefresh(this.timeModel.refresh)}setTime(T,M=!0){if((0,t.extend)(this.time,T),(0,n.Ar)(T.to)?(this.oldRefresh=this.timeModel?.refresh||this.oldRefresh,this.setAutoRefresh("")):this.oldRefresh&&this.oldRefresh!==this.timeModel?.refresh&&(this.setAutoRefresh(this.oldRefresh),this.oldRefresh=void 0),M===!0){const I=this.timeRangeForUrl(),x=u.Ny.getSearchObject();if(x.from===I.from.toString()&&x.to===I.to.toString())return;x.from=I.from.toString(),x.to=I.to.toString(),u.Ny.partial(x)}this.timeModel?.refresh===c.SM&&this.getAutoRefreshInteval().intervalMs!==this.refreshMS&&this.setAutoRefresh(c.SM),this.refreshTimeModel()}timeRange(){return window.__grafanaSceneContext&&window.__grafanaSceneContext.isActive?d.jh.getTimeRange(window.__grafanaSceneContext).state.value:(0,p.z)(this.time,this.timeModel)}zoomOut(T,M=!0){const I=this.timeRange(),{from:x,to:S}=(0,h.Zk)(I,T);this.setTime({from:(0,n.yT)(x),to:(0,n.yT)(S)},M)}shiftTime(T,M=!0){const I=this.timeRange(),{from:x,to:S}=(0,h.Wb)(T,I);this.setTime({from:(0,n.yT)(x),to:(0,n.yT)(S)},M)}makeAbsoluteTime(T){const{from:M,to:I}=this.timeRange();this.setTime({from:M,to:I},T)}copyTimeRangeToClipboard(){const{raw:T}=this.timeRange();navigator.clipboard.writeText(JSON.stringify({from:T.from,to:T.to})),l.A.emit(r.r1.alertSuccess,[(0,i.t)("time-picker.copy-paste.copy-success-message","Time range copied to clipboard")])}async pasteTimeRangeFromClipboard(T=!0){const{range:M,isError:I}=await(0,h.zG)();if(I===!0){l.A.emit(r.r1.alertError,[(0,i.t)("time-picker.copy-paste.default-error-title","Invalid time range"),(0,i.t)("time-picker.copy-paste.default-error-message","{{error}} is not a valid time range",{error:M})]);return}const{from:x,to:S}=M;this.setTime({from:x,to:S},T)}isRefreshOutsideThreshold(T,M=.05){const I=this.timeRange();if(g.isMathString(I.raw.from)){const x=I.to.diff(I.from),S=Date.now()-T,O=x*M;return S>=O}return!1}}let D;function b(y){D=y}function P(){return D||(D=new E(c.TP)),D}},79056:(Y,A,e)=>{"use strict";e.d(A,{O2:()=>H,SW:()=>W,og:()=>j});var t=e(2543),n=e(69550),o=e(92041),s=e(22391),r=e(76885),g=e(6709),u=e(25019),d=e(47737),i=e(1173),l=e(11261),f=e(6829),c=e(58140),h=e(19347),p=e(52622),m=e(77659),a=e(33919),v=e(2913),E=e(15054);function D(te){return Array.from(new Array(te+1),(re,de)=>de).filter(re=>te%re===0)}var b=e(68576),P=e(31193),y=e(24240),T=e(86886),M=e(14678),I=e(14738),x=e(36373),S=e(77789),O=e(25640);function C(te,re){const de=[];if(te?.statistics&&te?.statistics.length){te.statistic=te.statistics[0];for(const ie of te.statistics.splice(1))de.push({...te,statistic:ie})}for(const ie of de)ie.refId=(0,S.M)(re),delete ie.statistics,re.push(ie);return delete te.statistics,de}function L(te){const re=[];if(te&&"statistics"in te&&te?.statistics?.length){for(const de of te.statistics.splice(1)){const{statistics:ie,name:ge,...ve}=te;re.push({...ve,statistic:de,name:`${ge} - ${de}`})}te.statistic=te.statistics[0],re.length!==0&&(te.name=`${te.name} - ${te.statistic}`),delete te.statistics}return re}function U(te){te.hasOwnProperty("metricQueryType")||(te.metricQueryType=O.d$.Search),te.hasOwnProperty("metricEditorMode")||(te.metricQueryType===O.d$.Query?te.metricEditorMode=O.Rx.Code:te.metricEditorMode=te.expression?O.Rx.Code:O.Rx.Builder)}var R=e(80484),B=e(84423);n.D.setInit(a.H),n.G.setInit(a.u);const H=39;class W{constructor(re){this.dashboard=re,(0,h.l)()||(0,h.h)(new P.xq)}updateSchema(re){let de,ie,ge,ve;const ye=this.dashboard.schemaVersion,pe=[];if(this.dashboard.schemaVersion=H,ye!==this.dashboard.schemaVersion){if(ye<2&&(re.services&&re.services.filter&&(this.dashboard.time=re.services.filter.time,this.dashboard.templating.list=re.services.filter.list||[]),pe.push(le=>(le.type==="graphite"&&(le.type="graph"),le.type!=="graph"||((0,t.isBoolean)(le.legend)&&(le.legend={show:le.legend}),le.grid&&(le.grid.min&&(le.grid.leftMin=le.grid.min,delete le.grid.min),le.grid.max&&(le.grid.leftMax=le.grid.max,delete le.grid.max)),le.y_format&&(le.y_formats||(le.y_formats=[]),le.y_formats[0]=le.y_format,delete le.y_format),le.y2_format&&(le.y_formats||(le.y_formats=[]),le.y_formats[1]=le.y2_format,delete le.y2_format)),le))),ye<3){let le=this.dashboard.getNextPanelId();pe.push(Me=>(Me.id||(Me.id=le,le+=1),Me))}if(ye<4&&pe.push(le=>(le.type!=="graph"||((0,t.each)(le.aliasYAxis,(Me,De)=>{le.seriesOverrides=[{alias:De,yaxis:Me}]}),delete le.aliasYAxis),le)),ye<6){const le=(0,t.find)(re.pulldowns,{type:"annotations"});for(le&&(this.dashboard.annotations={list:le.annotations||[]}),de=0;de<this.dashboard.templating.list.length;de++){const Me=this.dashboard.templating.list[de];Me.datasource===void 0&&(Me.datasource=null),Me.type==="filter"&&(Me.type="query"),Me.type===void 0&&(Me.type="query"),Me.allFormat===void 0&&delete Me.allFormat}}if(ye<7&&(re.nav&&re.nav.length&&(this.dashboard.timepicker=re.nav[0]),pe.push(le=>((0,t.each)(le.targets,Me=>{Me.refId||(Me.refId=le.getNextQueryLetter&&le.getNextQueryLetter())}),le))),ye<8&&pe.push(le=>((0,t.each)(le.targets,Me=>{Me.fields&&Me.tags&&Me.groupBy&&(Me.rawQuery?(delete Me.fields,delete Me.fill):(Me.select=(0,t.map)(Me.fields,De=>{const Re=[];return Re.push({type:"field",params:[De.name]}),Re.push({type:De.func,params:[]}),De.mathExpr&&Re.push({type:"math",params:[De.mathExpr]}),De.asExpr&&Re.push({type:"alias",params:[De.asExpr]}),Re}),delete Me.fields,(0,t.each)(Me.groupBy,De=>{De.type==="time"&&De.interval&&(De.params=[De.interval],delete De.interval),De.type==="tag"&&De.key&&(De.params=[De.key],delete De.key)}),Me.fill&&(Me.groupBy.push({type:"fill",params:[Me.fill]}),delete Me.fill)))}),le)),ye<9&&pe.push(le=>{if(le.type!=="singlestat"&&le.thresholds!=="")return le;if(le.thresholds){const Me=le.thresholds.split(",");Me.length>=3&&(Me.shift(),le.thresholds=Me.join(","))}return le}),ye<10&&pe.push(le=>(le.type!=="table"||(0,t.each)(le.styles,Me=>{if(Me.thresholds&&Me.thresholds.length>=3){const De=Me.thresholds;De.shift(),Me.thresholds=De}}),le)),ye<12&&(0,t.each)(this.dashboard.getVariables(),le=>{"refresh"in le&&(le.refresh&&(le.refresh=1),le.refresh||(le.refresh=0)),"hideVariable"in le&&le.hideVariable?le.hide=2:"hideLabel"in le&&le.hideLabel&&(le.hide=1)}),ye<12&&pe.push(le=>(le.type!=="graph"||!le.grid||le.yaxes||(le.yaxes=[{show:le["y-axis"],min:le.grid.leftMin,max:le.grid.leftMax,logBase:le.grid.leftLogBase,format:le.y_formats[0],label:le.leftYAxisLabel},{show:le["y-axis"],min:le.grid.rightMin,max:le.grid.rightMax,logBase:le.grid.rightLogBase,format:le.y_formats[1],label:le.rightYAxisLabel}],le.xaxis={show:le["x-axis"]},delete le.grid.leftMin,delete le.grid.leftMax,delete le.grid.leftLogBase,delete le.grid.rightMin,delete le.grid.rightMax,delete le.grid.rightLogBase,delete le.y_formats,delete le.leftYAxisLabel,delete le.rightYAxisLabel,delete le["y-axis"],delete le["x-axis"]),le)),ye<13&&pe.push(le=>{if(le.type!=="graph"||!le.grid)return le;le.thresholds||(le.thresholds=[]);const Me={},De={};return le.grid.threshold1!==null&&(Me.value=le.grid.threshold1,le.grid.thresholdLine?(Me.line=!0,Me.lineColor=le.grid.threshold1Color,Me.colorMode="custom"):(Me.fill=!0,Me.fillColor=le.grid.threshold1Color,Me.colorMode="custom")),le.grid.threshold2!==null&&(De.value=le.grid.threshold2,le.grid.thresholdLine?(De.line=!0,De.lineColor=le.grid.threshold2Color,De.colorMode="custom"):(De.fill=!0,De.fillColor=le.grid.threshold2Color,De.colorMode="custom")),(0,t.isNumber)(Me.value)&&((0,t.isNumber)(De.value)?Me.value>De.value?(Me.op=De.op="lt",le.thresholds.push(Me),le.thresholds.push(De)):(Me.op=De.op="gt",le.thresholds.push(Me),le.thresholds.push(De)):(Me.op="gt",le.thresholds.push(Me))),delete le.grid.threshold1,delete le.grid.threshold1Color,delete le.grid.threshold2,delete le.grid.threshold2Color,delete le.grid.thresholdLine,le}),ye<14&&(this.dashboard.graphTooltip=re.sharedCrosshair?1:0),ye<16&&this.upgradeToGridLayout(re),ye<17&&pe.push(le=>{if(le.minSpan){const Me=E.cV/le.minSpan,De=D(E.cV);le.maxPerRow=De[(0,t.findIndex)(De,Re=>Re>Me)-1]}return delete le.minSpan,le}),ye<18&&pe.push(le=>(le["options-gauge"]&&(le.options=le["options-gauge"],le.options.valueOptions={unit:le.options.unit,stat:le.options.stat,decimals:le.options.decimals,prefix:le.options.prefix,suffix:le.options.suffix},le.options.thresholds&&le.options.thresholds.reverse(),delete le.options.options,delete le.options.unit,delete le.options.stat,delete le.options.decimals,delete le.options.prefix,delete le.options.suffix,delete le["options-gauge"]),le)),ye<19&&pe.push(le=>(le.links&&(0,t.isArray)(le.links)&&(le.links=le.links.map(G)),le)),ye<20){const le=Me=>({...Me,url:_(Me.url)});pe.push(Me=>(Me.options&&Me.options.dataLinks&&(0,t.isArray)(Me.options.dataLinks)&&(Me.options.dataLinks=Me.options.dataLinks.map(le)),Me.options&&Me.options.fieldOptions&&Me.options.fieldOptions.defaults&&(Me.options.fieldOptions.defaults.links&&(0,t.isArray)(Me.options.fieldOptions.defaults.links)&&(Me.options.fieldOptions.defaults.links=Me.options.fieldOptions.defaults.links.map(le)),Me.options.fieldOptions.defaults.title&&(Me.options.fieldOptions.defaults.title=_(Me.options.fieldOptions.defaults.title))),Me))}if(ye<21){const le=Me=>({...Me,url:Me.url.replace(/__series.labels/g,"__field.labels")});pe.push(Me=>(Me.options&&Me.options.dataLinks&&(0,t.isArray)(Me.options.dataLinks)&&(Me.options.dataLinks=Me.options.dataLinks.map(le)),Me.options&&Me.options.fieldOptions&&Me.options.fieldOptions.defaults&&Me.options.fieldOptions.defaults.links&&(0,t.isArray)(Me.options.fieldOptions.defaults.links)&&(Me.options.fieldOptions.defaults.links=Me.options.fieldOptions.defaults.links.map(le)),Me))}if(ye<22&&pe.push(le=>(le.type!=="table"||(0,t.each)(le.styles,Me=>{Me.align="auto"}),le)),ye<23)for(const le of this.dashboard.templating.list){if(!(0,y.iv)(le))continue;const{multi:Me,current:De}=le;(0,o.R)(De)||(le.current=(0,T.C)(De,Me))}if(ye<24&&pe.push(le=>{const Me=le.type==="table";if(Me&&!le.styles)return le;const De=le.table==="table2";return!Me||De||(le.type=Me?"table-old":"table"),le}),ye<25,ye<26&&pe.push(le=>(le.type==="text2"&&(le.type="text",delete le.options.angular),le)),ye<27&&(this.removeRepeatedPanels(),this.dashboard.templating.list=this.dashboard.templating.list.map(le=>{if(!(0,y.VO)(le))return le;const Me={...le};return Me.current={selected:!0,text:Me.query??"",value:Me.query??""},Me.options=[Me.current],Me.hide===R.zL.dontHide||Me.hide===R.zL.hideLabel?{...Me,type:"textbox"}:Me})),ye<28){pe.push(le=>le.type==="singlestat"?K(le):le);for(const le of this.dashboard.templating.list)le.tags&&delete le.tags,le.tagsQuery&&delete le.tagsQuery,le.tagValuesQuery&&delete le.tagValuesQuery,le.useTags&&delete le.useTags}if(ye<29)for(const le of this.dashboard.templating.list)le.type==="query"&&(le.refresh!==1&&le.refresh!==2&&(le.refresh=1),le.options?.length&&(le.options=[]));if(ye<30&&(pe.push(Q),pe.push(ne)),ye<31&&pe.push(le=>{if(le.transformations){for(const Me of le.transformations)if(Me.id===f.V.id)return k(le,f.V.id,{id:c.o.id,options:{}})}return le}),ye<32,ye<33&&pe.push(le=>{if(le.datasource=j(le.datasource,{returnDefaultAsNull:!0}),!le.targets)return le;for(const Me of le.targets){const De=j(Me.datasource,{returnDefaultAsNull:!0});De!=null&&(Me.datasource=De)}return le}),ye<34&&(pe.push(le=>(this.migrateCloudWatchQueries(le),le)),this.migrateCloudWatchAnnotationQuery()),ye<35&&pe.push(q),ye<36){for(const Me of this.dashboard.annotations.list)Me.datasource=j(Me.datasource,{returnDefaultAsNull:!1});const le=(0,h.l)().getInstanceSettings(null);if(le){for(const Me of this.dashboard.templating.list)Me.type==="query"&&Me.datasource===null&&(Me.datasource=(0,s.p$)(le));pe.push(Me=>{if(Me.targets){let De=!1;Me.datasource==null&&Me.targets.length>0&&(Me.datasource=(0,s.p$)(le),De=!0);for(const Re of Me.targets)(Re.datasource==null||Re.datasource.uid==null)&&(Me.datasource?.uid!==M.uv?Re.datasource={...Me.datasource}:Re.datasource=j(Re.datasource,{returnDefaultAsNull:!1})),De&&Re.datasource?.uid!=="__expr__"&&(Me.datasource=Re.datasource)}return Me})}}if(ye<37&&pe.push(le=>(le.options?.legend&&(le.options.legend.displayMode==="hidden"||le.options.legend.showLegend===!1)?(le.options.legend.displayMode="list",le.options.legend.showLegend=!1):le.options?.legend&&(le.options.legend={...le.options?.legend,showLegend:!0}),le)),ye<38&&pe.push(le=>{if(le.type==="table"&&le.fieldConfig!==void 0){const Me=le.fieldConfig.defaults?.custom?.displayMode;if(Me!==void 0&&(le.fieldConfig.defaults.custom.cellOptions=(0,m.o7)(Me),delete le.fieldConfig.defaults.custom.displayMode),le.fieldConfig?.overrides)for(const De of le.fieldConfig.overrides)for(let Re=0;Re<De.properties?.length;Re++){let me=De.properties[Re].value;De.properties[Re].id==="custom.displayMode"&&(De.properties[Re].id="custom.cellOptions",De.properties[Re].value=(0,m.o7)(me))}}return le}),ye<39&&pe.push(le=>(le.transformations?.forEach(Me=>{if(Me.id==="timeSeriesTable"&&Me.options!==void 0&&Me.options.refIdToStat!==void 0){let De={};for(const[Re,me]of Object.entries(Me.options.refIdToStat)){let he={};he.stat=me,De[Re]=he}Me.options=De}}),le)),pe.length!==0)for(ie=0;ie<this.dashboard.panels.length;ie++)for(ge=0;ge<pe.length;ge++){this.dashboard.panels[ie]=pe[ge].call(this,this.dashboard.panels[ie]);const le=this.dashboard.panels[ie].panels;if(le)for(ve=0;ve<le.length;ve++)le[ve]=pe[ge].call(this,le[ve])}}}removeRepeatedPanels(){const re=[];for(const de of this.dashboard.panels)de.repeatPanelId||de.repeatByRow||(de.type==="row"&&Array.isArray(de.panels)&&(de.panels=de.panels.filter(ie=>!ie.repeatPanelId)),re.push(de));this.dashboard.panels=re}migrateCloudWatchQueries(re){for(const de of re.targets||[])if(ee(de)&&(U(de),de.hasOwnProperty("statistics"))){const ie=C(de,[...re.targets]);for(const ge of ie)re.targets.push(ge)}}migrateCloudWatchAnnotationQuery(){for(const re of this.dashboard.annotations.list)if(ae(re)){const de=L(re);for(const ie of de)this.dashboard.annotations.list.push(ie)}}upgradeToGridLayout(re){let de=0;const ie=E.cV/12;let ve=(0,t.max)((0,t.flattenDeep)((0,t.map)(re.rows,pe=>(0,t.map)(pe.panels,"id"))))+1;if(!re.rows)return;const ye=(0,t.some)(re.rows,pe=>pe.collapse||pe.showTitle||pe.repeat);for(const pe of re.rows){if(pe.repeatIteration)continue;const le=pe.height||E.bJ,Me=N(le),De={};let Re;ye&&(De.id=ve,De.type="row",De.title=pe.title,De.collapsed=pe.collapse,De.repeat=pe.repeat,De.panels=[],De.gridPos={x:0,y:de,w:E.cV,h:Me},Re=new B.a9(De),ve++,de++);const me=new V(Me,E.cV,de);for(const he of pe.panels){he.span=he.span||E.o9,he.minSpan&&(he.minSpan=Math.min(E.cV,E.cV/12*he.minSpan));const Te=Math.floor(he.span)*ie,Be=he.height?N(he.height):Me,we=me.getPanelPosition(Be,Te);de=me.yPos,he.gridPos={x:we.x,y:de+we.y,w:Te,h:Be},me.addPanel(he.gridPos),delete he.span,Re&&De.collapsed?Re.panels?.push(he):this.dashboard.panels.push(new B.a9(he))}Re&&this.dashboard.panels.push(Re),Re&&De.collapsed||(de+=Me)}}}function N(te){return(0,t.isString)(te)&&(te=parseInt(te.replace("px",""),10)),te<E.cx&&(te=E.cx),Math.ceil(te/(E.sD+E.dU))}class V{constructor(re,de=E.cV,ie=0){this.area=new Array(de).fill(0),this.yPos=ie,this.height=re}reset(){this.area.fill(0)}addPanel(re){for(let de=re.x;de<re.x+re.w;de++)(!this.area[de]||re.y+re.h-this.yPos>this.area[de])&&(this.area[de]=re.y+re.h-this.yPos);return this.area}getPanelPosition(re,de,ie=!1){let ge,ve,ye;for(let pe=this.area.length-1;pe>=0&&this.height-this.area[pe]>0;pe--)if(ve===void 0)ve=pe;else if(pe<this.area.length-1&&this.area[pe]<=this.area[pe+1])ge=pe;else break;if(ge!==void 0&&ve!==void 0&&ve-ge>=de-1){const pe=(0,t.max)(this.area.slice(ge));ye={x:ge,y:pe}}else return ie?null:(this.yPos+=this.height,this.reset(),this.getPanelPosition(re,de,!0));return ye}}function G(te){let re=te.url;return!re&&te.dashboard&&(re=`dashboard/db/${b.A.slugifyForUrl(te.dashboard)}`),!re&&te.dashUri&&(re=`dashboard/${te.dashUri}`),re||(re="/"),te.keepTime&&(re=r.kM.appendQueryToUrl(re,`$${g.c.keepTime}`)),te.includeVars&&(re=r.kM.appendQueryToUrl(re,`$${g.c.includeVars}`)),te.params&&(re=r.kM.appendQueryToUrl(re,te.params)),{url:re,title:te.title,targetBlank:te.targetBlank}}function _(te){const re=/(__series_name)|(\$__series_name)|(__value_time)|(__field_name)|(\$__field_name)/g;return te.replace(re,(de,ie,ge,ve,ye,pe)=>ie?"__series.name":ge?"${__series.name}":ve?"__value.time":ye?"__field.name":pe?"${__field.name}":de)}function K(te){if(v.$W.panels["grafana-singlestat-panel"])return te.type="grafana-singlestat-panel",te;let re=!1;return te.changePlugin||(re=!0,te=new B.a9(te)),te.plugin={angularPanelCtrl:{}},te.gauge?.show?(I.plugin.meta=v.$W.panels.gauge,te.changePlugin(I.plugin)):(x.plugin.meta=v.$W.panels.stat,te.changePlugin(x.plugin)),re?te.getSaveModel():te}function j(te,re){if(re.returnDefaultAsNull&&(te==null||te==="default"))return null;if((0,s.fN)(te))return te;const de=(0,h.l)().getInstanceSettings(te);return de?(0,s.p$)(de):{uid:te||void 0}}function k(te,re,de){if(te.transformations){const ie=[];for(const ge of te.transformations)ie.push(ge),ge.id===re&&ie.push({...de});te.transformations=ie}return te}function Q(te){const re=te.fieldConfig;if(!re)return te;if(re.defaults&&re.defaults.mappings&&(re.defaults.mappings=Z(re.defaults.mappings,re.defaults.thresholds)),Array.isArray(re.overrides))for(const de of re.overrides)for(const ie of de.properties)ie.id==="mappings"&&(ie.value=Z(ie.value));return te}function ee(te){return te.hasOwnProperty("dimensions")&&te.hasOwnProperty("namespace")&&te.hasOwnProperty("region")&&te.hasOwnProperty("metricName")}function ae(te){return te.hasOwnProperty("dimensions")&&te.hasOwnProperty("namespace")&&te.hasOwnProperty("region")&&te.hasOwnProperty("prefixMatching")&&te.hasOwnProperty("statistics")}function Z(te,re){if(!te)return;const de={type:u.d.ValueToText,options:{}},ie=[];for(const ge of te){if(ge.type&&ge.options){ge.type===u.d.ValueToText?de.options={...de.options,...ge.options}:ie.push(ge);continue}let ve;const ye=parseFloat(ge.text);if(re&&!isNaN(ye)){const pe=(0,d.yQ)(ye,re.steps);pe&&pe.color&&(ve=pe.color)}switch(ge.type){case 1:ge.value!=null&&(ge.value==="null"?ie.push({type:u.d.SpecialValue,options:{match:u.W.Null,result:{text:ge.text,color:ve}}}):de.options[String(ge.value)]={text:ge.text,color:ve});break;case 2:ie.push({type:u.d.RangeToText,options:{from:+ge.from,to:+ge.to,result:{text:ge.text,color:ve}}});break}}return Object.keys(de.options).length>0&&ie.unshift(de),ie}function ne(te){return(te.type==="timeseries"||te.type==="xychart")&&te.options.tooltipOptions&&(te.options={...te.options,tooltip:te.options.tooltipOptions},delete te.options.tooltipOptions),te}function q(te){return te.type==="timeseries"&&te.fieldConfig?.defaults.custom?.axisPlacement===p.vM.Hidden&&(te.fieldConfig={...te.fieldConfig,overrides:[...te.fieldConfig.overrides,{matcher:{id:i.Ct.byType,options:l.PU.time},properties:[{id:"custom.axisPlacement",value:p.vM.Auto}]}]}),te}},98365:(Y,A,e)=>{"use strict";e.d(A,{G:()=>B});var t=e(2543),n=e(64423),o=e(18226),s=e(72724),r=e(47232),g=e(32264),u=e(3591),d=e(24284),i=e(15054),l=e(16233),f=e(28874),c=e(8480),h=e(20601),p=e(72401),m=e(87421),a=e(80348),v=e(28444),E=e(10096),D=e(99140),b=e(80484),P=e(75096),y=e(74856),T=e(34214);const M=new Set(["gridPos","title","description","transparent"]);function I(N,V){const G=[],_={changed:!1,actions:{add:[],remove:[],replace:[],update:[],noop:[]},panels:G};let K=0;const j=new Map;for(let k of V){let{id:Q}=k;Q||(K||(K=S([N,V])),Q=K++,k={...k,id:Q}),j.set(Q,k)}for(const k of N){const Q=j.get(k.id);if(!Q){_.changed=!0,_.actions.remove.push(k.id),k.destroy();continue}if(j.delete(k.id),Q===k){G.push(k),_.actions.noop.push(k.id);continue}if(k.type===Q.type){const ae=k.getSaveModel();let Z=!0,ne=!1;for(const[q,te]of Object.entries(Q))if(!(0,t.isEqualWith)(te,ae[q],x))if(_.changed=!0,Z=!1,M.has(q))k[q]=te,ne=!0;else{ne=!1;break}if(Z){G.push(k),_.actions.noop.push(k.id);continue}if(ne){G.push(k),_.actions.update.push(k.id);continue}}k.destroy();const ee=new T.a(Q);ee.key=`${ee.id}-update-${Date.now()}`,G.push(ee),_.changed=!0,_.actions.replace.push(k.id)}for(const k of j.values())G.push(new T.a(k)),_.changed=!0,_.actions.add.push(k.id);return _}function x(N,V){if(N==null&&(V===1/0||V===-1/0||V==null)||V==null&&(N===1/0||N===-1/0||N==null))return!0}function S(N){let V=0;for(const G of N)for(const _ of G)_.id>V&&(V=_.id);return V+1}var O=e(79056),C=e(84423);function L(N,V){return N.repeatDirection===i.HG?!1:V.gridPos.x>=N.gridPos.x+N.gridPos.w&&V.gridPos.y===N.gridPos.y}function U(N){for(const V of N)if(delete V.scopedVars,V.panels?.length)for(const G of V.panels)delete G.scopedVars}const R=class{constructor(N,V,G){this.timeRangeUpdatedDuringEdit=!1,this.originalDashboard=null,this.getVariablesFromState=G?.getVariablesFromState??m.SS,this.events=new o.o,this.id=N.id||null,this.uid=N.uid||null,this.revision=N.revision??void 0,this.title=N.title??"No Title",this.description=N.description,this.tags=N.tags??[],this.timezone=N.timezone??"",this.weekStart=N.weekStart??"",this.editable=N.editable!==!1,this.graphTooltip=N.graphTooltip||0,this.time=N.time??{from:"now-6h",to:"now"},this.timepicker=N.timepicker??{},this.liveNow=N.liveNow,this.templating=this.ensureListExist(N.templating),this.annotations=this.ensureListExist(N.annotations),this.refresh=N.refresh,this.snapshot=N.snapshot,this.schemaVersion=N.schemaVersion??0,this.fiscalYearStartMonth=N.fiscalYearStartMonth??0,this.version=N.version??0,this.links=N.links??[],this.gnetId=N.gnetId||null,this.panels=(0,t.map)(N.panels??[],j=>new C.a9(j)),this.originalDashboard=(0,t.cloneDeep)(N),this.originalTemplating=(0,t.cloneDeep)(this.templating),this.originalTime=(0,t.cloneDeep)(this.time),this.ensurePanelsHaveUniqueIds(),this.formatDate=this.formatDate.bind(this),this.initMeta(V),this.updateSchema(N);const _=G?.autoMigrateOldPanels||!g.$.angularSupportEnabled||g.$.featureToggles.autoMigrateOldPanels,K=g.$.featureToggles.autoMigrateGraphPanel||g.$.featureToggles.autoMigrateTablePanel||g.$.featureToggles.autoMigratePiechartPanel||g.$.featureToggles.autoMigrateWorldmapPanel||g.$.featureToggles.autoMigrateStatPanel;if(_||K)for(const j of this.panelIterator())!j.autoMigrateFrom&&j.type==="graph"&&(g.$.featureToggles.autoMigrateGraphPanel||_)?(j.autoMigrateFrom=j.type,j.type="timeseries"):!j.autoMigrateFrom&&j.type==="table-old"&&(g.$.featureToggles.autoMigrateTablePanel||_)?(j.autoMigrateFrom=j.type,j.type="table"):!j.autoMigrateFrom&&j.type==="grafana-piechart-panel"&&(g.$.featureToggles.autoMigratePiechartPanel||_)?(j.autoMigrateFrom=j.type,j.type="piechart"):!j.autoMigrateFrom&&j.type==="grafana-worldmap-panel"&&(g.$.featureToggles.autoMigrateWorldmapPanel||_)?(j.autoMigrateFrom=j.type,j.type="geomap"):!j.autoMigrateFrom&&(j.type==="singlestat"||j.type==="grafana-singlestat-panel")&&(g.$.featureToggles.autoMigrateStatPanel||_)&&(j.autoMigrateFrom=j.type,j.type="stat");this.addBuiltInAnnotationQuery(),this.sortPanelsByGridPos(),this.panelsAffectedByVariableChange=null,this.appEventsSubscription=new n.yU,this.lastRefresh=Date.now(),this.appEventsSubscription.add(E.lE.subscribe(b.og,this.variablesChangedHandler.bind(this))),this.appEventsSubscription.add(E.lE.subscribe(b.BS,this.variablesTimeRangeProcessDoneHandler.bind(this))),this.appEventsSubscription.add(E.lE.subscribe(b.eF,this.variablesChangedInUrlHandler.bind(this)))}addBuiltInAnnotationQuery(){this.annotations.list.some(V=>V.builtIn===1)||this.annotations.list.unshift({datasource:{uid:"-- Grafana --",type:"grafana"},name:"Annotations & Alerts",type:"dashboard",iconColor:d.Mk,enable:!0,hide:!0,builtIn:1})}initMeta(N){N=N||{},N.canShare=N.canShare!==!1,N.canSave=N.canSave!==!1,N.canStar=N.canStar!==!1,N.canEdit=N.canEdit!==!1,N.canDelete=N.canDelete!==!1,N.showSettings=N.canEdit,N.canMakeEditable=N.canSave&&!this.editable,N.hasUnsavedFolderChange=!1,this.editable||(N.canEdit=!1,N.canDelete=!1,N.canSave=!1),this.meta=N}getSaveModelCloneOld(N){const V=(0,t.defaults)(N||{},{saveVariables:!0,saveTimerange:!0});let G={};for(const _ in this)R.nonPersistedProperties[_]||!this.hasOwnProperty(_)||(G[_]=(0,t.cloneDeep)(this[_]));return G.templating=this.getTemplatingSaveModel(V),V.saveTimerange||(G.time=this.originalTime),G.panels=this.getPanelSaveModels(),G=(0,f.v)(G),G.getVariables=()=>G.templating.list,G}getSaveModelClone(N){const V=this.getSaveModelCloneOld(N),G=JSON.stringify(V);return JSON.parse(G)}updatePanels(N){const V=I(this.panels,N??[]);return V.changed&&(this.panels=V.panels??[],this.sortPanelsByGridPos(),this.events.publish(new v.Q$)),V}getPanelSaveModels(){return this.panels.filter(N=>this.isSnapshotTruthy()||!(N.repeatPanelId||N.repeatedByRow)).map(N=>{if(N.libraryPanel){const{id:V,title:G,libraryPanel:_,gridPos:K}=N;return{id:V,title:G,gridPos:K,libraryPanel:{uid:_.uid,name:_.name}}}return this.panelInEdit&&this.panelInEdit.id===N.id?this.panelInEdit.getSaveModel():N.getSaveModel()}).map(N=>(this.isSnapshotTruthy()||(delete N.scopedVars,N.type==="row"&&N.panels&&N.panels.length>0&&(N.panels=N.panels.filter(V=>!V.repeatPanelId).map(V=>(delete V.scopedVars,V)))),N))}getTemplatingSaveModel(N){const V=this.originalTemplating?.list??[],_=this.getVariablesFromState(this.uid).map(j=>{const k=h.B.get(j.type).getSaveModel(j,N.saveVariables);if(!N.saveVariables){const Q=V.find(({name:ee,type:ae})=>ee===j.name&&ae===j.type);if(!Q)return k;j.type==="adhoc"?k.filters=Q.filters:(k.current=Q.current,k.options=Q.options)}return k});return{list:(0,f.v)(_)}}timeRangeUpdated(N){this.events.publish(new u.sR(N)),(0,D.JD)((0,p.RK)(this.uid,N)),this.panelInEdit&&(this.timeRangeUpdatedDuringEdit=!0)}startRefresh(N={refreshAll:!0,panelIds:[]}){if(this.events.publish(new u._),this.lastRefresh=Date.now(),this.panelInEdit&&(N.refreshAll||N.panelIds.includes(this.panelInEdit.id))){this.panelInEdit.refresh();return}for(const V of this.panels)!this.otherPanelInFullscreen(V)&&(N.refreshAll||N.panelIds.includes(V.id))&&V.refresh()}render(){this.events.publish(new v.XM);for(const N of this.panels)N.render()}panelInitialized(N){const V=N.getQueryRunner().getLastResult();!this.otherPanelInFullscreen(N)&&!V&&N.refresh()}otherPanelInFullscreen(N){return(this.panelInEdit||this.panelInView)&&!(N.isViewing||N.isEditing)}initEditPanel(N){return(0,y.jG)().stopAutoRefresh(),this.panelInEdit=N.getEditClone(),this.timeRangeUpdatedDuringEdit=!1,this.panelInEdit}exitPanelEditor(){this.panelInEdit.destroy(),this.panelInEdit=void 0,(0,y.jG)().resumeAutoRefresh(),(this.panelsAffectedByVariableChange||this.timeRangeUpdatedDuringEdit)&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange??[],refreshAll:this.timeRangeUpdatedDuringEdit}),this.panelsAffectedByVariableChange=null,this.timeRangeUpdatedDuringEdit=!1)}initViewPanel(N){this.panelInView=N,N.setIsViewing(!0)}exitViewPanel(N){this.panelInView=void 0,N.setIsViewing(!1),this.refreshIfPanelsAffectedByVariableChange()}refreshIfPanelsAffectedByVariableChange(){this.panelsAffectedByVariableChange&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange,refreshAll:!1}),this.panelsAffectedByVariableChange=null)}ensurePanelsHaveUniqueIds(){const N=new Set;let V=this.getNextPanelId();for(const G of this.panelIterator())(!G.id||N.has(G.id))&&(G.id=V++),N.add(G.id)}ensureListExist(N={}){return N.list??=[],N}getNextPanelId(){let N=0;for(const V of this.panelIterator())V.id>N&&(N=V.id);return N+1}*panelIterator(){for(const N of this.panels){yield N;const V=N.panels??[];for(const G of V)yield G}}forEachPanel(N){for(let V=0;V<this.panels.length;V++)N(this.panels[V],V)}getPanelById(N,V=!1){if(this.panelInEdit&&this.panelInEdit.id===N)return this.panelInEdit;if(V){for(const G of this.panelIterator())if(G.id===N)return G;return null}else return this.panels.find(G=>G.id===N)??null}canEditPanel(N){return!!(this.meta.canEdit&&N&&!N.repeatPanelId&&N.type!=="row")}canEditPanelById(N){return this.canEditPanel(this.getPanelById(N))}addPanel(N){N.id=this.getNextPanelId(),this.panels.unshift(new C.a9(N)),this.sortPanelsByGridPos(),this.events.publish(new v.Q$)}updateMeta(N){this.meta={...this.meta,...N},this.events.publish(new v.Cf)}makeEditable(){this.editable=!0,this.updateMeta({canMakeEditable:!1,canEdit:!0,canSave:!0})}sortPanelsByGridPos(){this.panels.sort((N,V)=>N.gridPos.y===V.gridPos.y?N.gridPos.x-V.gridPos.x:N.gridPos.y-V.gridPos.y)}clearUnsavedChanges(N,V){for(const G of this.panels)G.configRev=0;this.panelInEdit&&(this.panelInEdit.hasSavedPanelEditChange=this.panelInEdit.configRev>0,this.panelInEdit.configRev=0),this.originalDashboard=N,this.originalTemplating=N.templating,V.saveTimerange&&(this.originalTime=N.time)}hasUnsavedChanges(){return!!this.panels.find(V=>V.hasChanged)}cleanUpRepeats(){if(this.isSnapshotTruthy()||!this.hasVariables())return;U(this.panels);const N=this.panels.filter(V=>(!V.repeat||V.repeatedByRow)&&V.repeatPanelId);(0,t.pull)(this.panels,...N),N.map(V=>V.destroy()),this.sortPanelsByGridPos()}processRepeats(){if(!(this.isSnapshotTruthy()||!this.hasVariables()||this.panelInView)){this.cleanUpRepeats();for(let N=0;N<this.panels.length;N++){const V=this.panels[N];V.repeat&&this.repeatPanel(V,N)}this.sortPanelsByGridPos(),this.events.publish(new v.Q$)}}cleanUpRowRepeats(N){const V=N.map(_=>_.id),G=N.filter(_=>!_.repeat&&_.repeatPanelId&&V.includes(_.repeatPanelId));(0,t.pull)(N,...G),(0,t.pull)(this.panels,...G)}processRowRepeats(N){if(this.isSnapshotTruthy()||!this.hasVariables())return;let V=N.panels??[];if(!N.collapsed){const G=this.panels.findIndex(_=>_.id===N.id);V=this.getRowPanels(G)}this.cleanUpRowRepeats(V);for(const G of V)if(G.repeat){const _=this.panels.findIndex(K=>K.id===G.id);this.repeatPanel(G,_)}}getPanelRepeatClone(N,V,G){if(V===0)return N;const _=N.getSaveModel();_.id=this.getNextPanelId();const K=new C.a9(_);return this.panels.splice(G+V,0,K),K.repeatPanelId=N.id,K.repeat=void 0,this.panelInView?.id===K.id&&(K.setIsViewing(!0),this.panelInView=K),K}getRowRepeatClone(N,V,G){if(V===0){if(!N.collapsed){const k=this.getRowPanels(G);N.panels=k}return N}const _=new C.a9(N.getSaveModel());let K,j;return N.collapsed?(K=(0,t.cloneDeep)(N.panels)??[],_.panels=K,j=G+V):(K=this.getRowPanels(G),_.panels=K.map(k=>k.getSaveModel()),j=G+(K.length+1)*V),this.panels.splice(j,0,_),this.updateRepeatedPanelIds(_),_}repeatPanel(N,V){const G=this.getPanelRepeatVariable(N);if(!G)return;if(N.type==="row"){this.repeatRow(N,V,G);return}const _=this.getSelectedVariableOptions(G),K=N.maxPerRow||4;let j=0,k=N.gridPos.y;for(let ee=0;ee<_.length;ee++){const ae=_[ee];let Z;Z=this.getPanelRepeatClone(N,ee,V),Z.scopedVars??={},Z.scopedVars[G.name]=ae,N.repeatDirection===i.Pz?(ee>0&&(k+=Z.gridPos.h),Z.gridPos.y=k):(Z.gridPos.w=Math.max(i.cV/_.length,i.cV/K),Z.gridPos.x=j,Z.gridPos.y=k,j+=Z.gridPos.w,j+Z.gridPos.w>i.cV&&(j=0,k+=Z.gridPos.h))}const Q=k-N.gridPos.y;if(Q>0){const ee=V+_.length;for(const ae of this.panels.slice(ee))L(N,ae)||(ae.gridPos.y+=Q)}}repeatRow(N,V,G){const _=this.getSelectedVariableOptions(G);for(let K=0;K<_.length;K++){const j=_[K],k=this.getRowRepeatClone(N,K,V);W(k,G,j);const Q=this.getRowHeight(k),ee=k.panels||[];let ae;if(N.collapsed){for(const Z of ee)W(Z,G,j),K>0&&this.updateRepeatedPanelIds(Z,!0);k.gridPos.y+=K,ae=V+K+1}else{const Z=V+(ee.length+1)*K+1;ee.forEach((ne,q)=>{if(W(ne,G,j),K>0){const te=new C.a9(ne);this.updateRepeatedPanelIds(te,!0),te.gridPos.y+=Q*K,this.panels.splice(Z+q,0,te)}}),k.panels=[],k.gridPos.y+=Q*K,ae=Z+ee.length}if(_.length>1)for(const Z of this.panels.slice(ae))Z.gridPos.y+=Q}}updateRepeatedPanelIds(N,V){return N.repeatPanelId=N.id,N.id=this.getNextPanelId(),V?N.repeatedByRow=!0:N.repeat=void 0,N}getSelectedVariableOptions(N){let V;return(0,P.ML)(N)?V=N.options.slice(1,N.options.length):V=(0,t.filter)(N.options,{selected:!0}),V}getRowHeight(N){if(!N.panels||N.panels.length===0)return 0;if(N.collapsed)return 1;const V=(0,t.maxBy)(N.panels,({gridPos:G})=>G.y+G.h).gridPos;return V.y+V.h-N.gridPos.y}removePanel(N){this.panels=this.panels.filter(V=>V!==N),N.destroy(),this.events.publish(new v.Q$)}removeRow(N,V){(!V&&N.collapsed||V&&!N.collapsed)&&this.toggleRow(N),this.removePanel(N)}expandRows(){const N=this.panels.filter(V=>V.type==="row"&&V.collapsed);for(const V of N)this.toggleRow(V)}collapseRows(){const N=this.panels.filter(V=>V.type==="row"&&!V.collapsed);for(const V of N)this.toggleRow(V)}isSubMenuVisible(){return this.links.length>0||this.getVariables().some(N=>N.hide!==2)||this.annotations.list.some(N=>!N.hide)}getPanelInfoById(N){const V=this.panels.findIndex(G=>G.id===N);return V>=0?{panel:this.panels[V],index:V}:null}duplicatePanel(N){const V=N.getSaveModel();return V.id=this.getNextPanelId(),delete V.repeat,delete V.repeatIteration,delete V.repeatPanelId,delete V.scopedVars,V.alert&&delete V.thresholds,delete V.alert,N.gridPos.x+N.gridPos.w*2<=i.cV?V.gridPos.x+=N.gridPos.w:V.gridPos.y+=N.gridPos.h,this.addPanel(V),V}formatDate(N,V){return(0,s.LE)(N,{format:V,timeZone:this.getTimezone()})}destroy(){this.appEventsSubscription.unsubscribe(),this.events.removeAllListeners();for(const N of this.panels)N.destroy()}toggleRow(N){const V=(0,t.indexOf)(this.panels,N);if(!N.collapsed){const j=this.getRowPanels(V);(0,t.pull)(this.panels,...j),N.panels=j.map(k=>k.getSaveModel()),N.collapsed=!0,j.some(k=>k.hasChanged)&&N.configRev++,this.events.publish(new v.Q$);return}N.collapsed=!1;const G=N.panels??[],_=G.some(j=>j.repeat),K=N.repeat;if(G.length>0){const k=(G[0].gridPos.y??N.gridPos.y)-(N.gridPos.y+N.gridPos.h);let Q=V+1,ee=N.gridPos.y;for(const Z of G){if(K){const ne=this.getPanelRepeatVariable(N);if(Z.scopedVars??={},ne){const q=this.getSelectedVariableOptions(ne);Z.scopedVars={...Z.scopedVars,[ne.name]:q[0]}}}Z.gridPos.y??(Z.gridPos.y=N.gridPos.y),Z.gridPos.y-=k,this.panels.splice(Q,0,new C.a9(Z)),Q+=1,ee=Math.max(ee,Z.gridPos.y+Z.gridPos.h)}const ae=ee-N.gridPos.y-1;for(const Z of this.panels.slice(Q))Z.gridPos.y+=ae;N.panels=[],_&&this.processRowRepeats(N)}this.sortPanelsByGridPos(),this.events.publish(new v.Q$)}getRowPanels(N){const V=this.panels.slice(N+1),G=V.findIndex(K=>K.type==="row");return V.slice(0,G>=0?G:this.panels.length)}on(N,V){console.log("DashboardModel.on is deprecated use events.subscribe"),this.events.on(N,V)}off(N,V){console.log("DashboardModel.off is deprecated"),this.events.off(N,V)}cycleGraphTooltip(){this.graphTooltip=(this.graphTooltip+1)%3}sharedTooltipModeEnabled(){return this.graphTooltip>0}sharedCrosshairModeOnly(){return this.graphTooltip===1}getRelativeTime(N){return(0,s.fq)(N,{timeZone:this.getTimezone()})}isSnapshot(){return this.snapshot!==void 0}getTimezone(){return this.timezone?this.timezone:l.TP?.user?.timezone}updateSchema(N){new O.SW(this).updateSchema(N)}hasTimeChanged(){const{time:N,originalTime:V}=this;return!((0,t.isEqual)(N,V)||(0,t.isEqual)((0,r.KQ)(N?.from),(0,r.KQ)(V?.from))&&(0,t.isEqual)((0,r.KQ)(N?.to),(0,r.KQ)(V?.to)))}autoFitPanels(N,V){const G=Math.max(...this.panels.map(ee=>ee.gridPos.h+ee.gridPos.y)),_=55,K=20;let j=N-_-K;V&&V!==a.KioskMode.TV&&(j+=_);const k=Math.floor(j/(i.sD+i.dU)),Q=G/k;for(const ee of this.panels)ee.gridPos.y=Math.round(ee.gridPos.y/Q)||1,ee.gridPos.h=Math.round(ee.gridPos.h/Q)||1}templateVariableValueUpdated(){this.processRepeats(),this.events.emit(a.CoreEvents.bG)}getPanelByUrlId(N){const V=parseInt(N??"0",10),G=this.panels.filter(_=>_.collapsed);for(const _ of G)_.panels?.some(j=>j.id===V)&&this.toggleRow(_);return this.getPanelById(V)}toggleLegendsForAll(){const N=this.panels.filter(H),V=N.filter(K=>K.legend.show).length,G=N.length-V,_=V>=G;for(const K of N)K.legend.show=!_,K.render()}toggleExemplarsForAll(){for(const N of this.panels)for(const V of N.targets){if(!(V.datasource&&V.datasource.type==="prometheus"))continue;const G=V;G.exemplar=!G.exemplar}this.startRefresh()}getVariables(){return this.getVariablesFromState(this.uid)}canEditAnnotations(N){let V=!0;return N?V=!!this.meta.annotationsPermissions?.dashboard.canEdit:V=!!this.meta.annotationsPermissions?.organization.canEdit,(g.$.featureToggles.annotationPermissionUpdate||this.canEditDashboard())&&V}canDeleteAnnotations(N){let V=!0;return N?V=!!this.meta.annotationsPermissions?.dashboard.canDelete:V=!!this.meta.annotationsPermissions?.organization.canDelete,g.$.featureToggles.annotationPermissionUpdate?V:V&&this.canEditDashboard()}canAddAnnotations(){return this.annotations.list.find(V=>V.builtIn===1)?.enable===!1?!1:g.$.featureToggles.annotationPermissionUpdate?!!this.meta.annotationsPermissions?.dashboard.canAdd:!!this.meta.annotationsPermissions?.dashboard.canAdd&&this.canEditDashboard()}canEditDashboard(){return!!(this.meta.canEdit||this.meta.canMakeEditable)}shouldUpdateDashboardPanelFromJSON(N,V){!(0,t.isEqual)(N?.gridPos,V?.gridPos)&&this.events.publish(new v.Q$)}getDefaultTime(){return this.originalTime}getPanelRepeatVariable(N){return this.getVariablesFromState(this.uid).find(V=>V.name===N.repeat)}isSnapshotTruthy(){return this.snapshot}hasVariables(){return this.getVariablesFromState(this.uid).length>0}hasVariablesChanged(){const N=this.originalTemplating?.list??[],V=this.getTemplatingSaveModel({saveVariables:!0}).list;return N.length!==V.length?!1:!(0,t.isEqual)(V,N)}variablesTimeRangeProcessDoneHandler(N){const V=N.payload.variableIds.length>0;this.variablesChangedHandler(new b.og({panelIds:[],refreshAll:!0}),V)}variablesChangedHandler(N,V=!0){if(V&&this.processRepeats(),N.payload.refreshAll||(0,y.jG)().isRefreshOutsideThreshold(this.lastRefresh)){this.startRefresh({refreshAll:!0,panelIds:[]});return}(this.panelInEdit||this.panelInView)&&(this.panelsAffectedByVariableChange=N.payload.panelIds.filter(G=>G!==(this.panelInEdit?.id??this.panelInView?.id))),this.startRefresh(N.payload)}variablesChangedInUrlHandler(N){this.templateVariableValueUpdated(),this.startRefresh(N.payload)}getOriginalDashboard(){return this.originalDashboard}hasAngularPlugins(){return this.panels.some(N=>{const V=N.isAngularPlugin()&&!N.plugin?.meta.angular?.hideDeprecation;let G=!1;return N.datasource?.uid&&(G=(0,c.H)(N.datasource?.uid)),V||G})}};let B=R;B.nonPersistedProperties={events:!0,meta:!0,panels:!0,templating:!0,originalTime:!0,originalTemplating:!0,originalLibraryPanels:!0,panelInEdit:!0,panelInView:!0,getVariablesFromState:!0,formatDate:!0,appEventsSubscription:!0,panelsAffectedByVariableChange:!0,lastRefresh:!0,timeRangeUpdatedDuringEdit:!0,originalDashboard:!0};function H(N){return!!N.legend}function W(N,V,G){N.scopedVars??={},N.scopedVars[V.name]=G}},84423:(Y,A,e)=>{"use strict";e.d(A,{Ar:()=>P,NB:()=>E,a9:()=>b,tw:()=>y});var t=e(2543),n=e.n(t),o=e(62938),s=e(18226),r=e(41987),g=e(581),u=e(3591),d=e(72574),i=e(2913),l=e(87490),f=e(21969),c=e(28444),h=e(80924);const p={events:!0,isViewing:!0,isEditing:!0,isInView:!0,hasRefreshed:!0,cachedPluginOptions:!0,plugin:!0,queryRunner:!0,replaceVariables:!0,configRev:!0,hasSavedPanelEditChange:!0,getDisplayTitle:!0,dataSupport:!0,key:!0,isNew:!0,refreshWhenInView:!0},m={id:!0,gridPos:!0,type:!0,title:!0,scopedVars:!0,repeat:!0,repeatPanelId:!0,repeatDirection:!0,repeatedByRow:!0,minSpan:!0,collapsed:!0,panels:!0,targets:!0,datasource:!0,timeFrom:!0,timeShift:!0,hideTimeOverride:!0,description:!0,links:!0,fullscreen:!0,isEditing:!0,hasRefreshed:!0,events:!0,cacheTimeout:!0,queryCachingTTL:!0,cachedPluginOptions:!0,transparent:!0,pluginVersion:!0,queryRunner:!0,transformations:!0,fieldConfig:!0,maxDataPoints:!0,interval:!0,replaceVariables:!0,libraryPanel:!0,getDisplayTitle:!0,configRev:!0,key:!0},a={gridPos:{x:0,y:0,h:3,w:6},targets:[{refId:"A"}],cachedPluginOptions:{},transparent:!1,options:{},links:[],transformations:[],fieldConfig:{defaults:{},overrides:[]},title:""},v=null,E={graph:"timeseries","table-old":"table",singlestat:"stat","grafana-singlestat-panel":"stat","grafana-piechart-panel":"piechart","grafana-worldmap-panel":"geomap"},D={"heatmap-new":"heatmap"};class b{constructor(M){this.datasource=null,this.isViewing=!1,this.isEditing=!1,this.isInView=!1,this.configRev=0,this.refreshWhenInView=!1,this.cachedPluginOptions={},this.events=new s.o,this.restoreModel(M),this.replaceVariables=this.replaceVariables.bind(this),this.key=(0,o.A)()}restoreModel(M){for(const x in this)p[x]||!this.hasOwnProperty(x)||M[x]||typeof this[x]!="function"&&typeof this[x]!="symbol"&&delete this[x];for(const x in M)this[x]=M[x];const I=D[this.type];I&&(this.autoMigrateFrom=this.type,this.type=I),(0,t.defaultsDeep)(this,(0,t.cloneDeep)(a)),this.ensureQueryIds()}generateNewKey(){this.key=(0,o.A)()}ensureQueryIds(){if(this.targets&&(0,t.isArray)(this.targets))for(const M of this.targets)M.refId||(M.refId=(0,f.W3)(this.targets))}getOptions(){return this.options}get hasChanged(){return this.configRev>0}updateOptions(M){this.options=M,this.configRev++,this.events.publish(new c.PR),this.render()}updateFieldConfig(M){this.fieldConfig=M,this.configRev++,this.events.publish(new c.PR),this.resendLastResult(),this.render()}getSaveModel(){const M={};for(const I in this)p[I]||!this.hasOwnProperty(I)||(0,t.isEqual)(this[I],a[I])||(M[I]=(0,t.cloneDeep)(this[I]));return this.type==="row"&&this.panels&&this.panels.length>0&&(M.panels=this.panels.map(I=>{if(I.libraryPanel){const{id:x,title:S,libraryPanel:O,gridPos:C}=I;return{id:x,title:S,gridPos:C,libraryPanel:{uid:O.uid,name:O.name}}}return I})),M}setIsViewing(M){this.isViewing=M}updateGridPos(M,I=!0){M.x===this.gridPos.x&&M.y===this.gridPos.y&&M.h===this.gridPos.h&&M.w===this.gridPos.w||(this.gridPos.x=M.x,this.gridPos.y=M.y,this.gridPos.w=M.w,this.gridPos.h=M.h,I&&this.configRev++,this.render())}runAllPanelQueries({dashboardUID:M,dashboardTimezone:I,timeData:x,width:S}){this.getQueryRunner().run({datasource:this.datasource,queries:this.targets,panelId:this.id,panelPluginType:this.type,dashboardUID:M,timezone:I,timeRange:x.timeRange,timeInfo:x.timeInfo,maxDataPoints:this.maxDataPoints||Math.floor(S),minInterval:this.interval,scopedVars:this.scopedVars,cacheTimeout:this.cacheTimeout,queryCachingTTL:this.queryCachingTTL,transformations:this.transformations,app:this.isEditing?r.Jk.PanelEditor:this.isViewing?r.Jk.PanelViewer:r.Jk.Dashboard})}refresh(){this.hasRefreshed=!0,this.events.publish(new u._)}render(){this.hasRefreshed?this.events.publish(new c.XM):this.refresh()}getOptionsToRemember(){return Object.keys(this).reduce((M,I)=>p[I]||m[I]?M:{...M,[I]:this[I]},{})}restorePanelOptions(M){const I=this.cachedPluginOptions[M];I&&(Object.keys(I.properties).map(x=>{this[x]=I.properties[x]}),this.fieldConfig=(0,g.H9)(this.fieldConfig,I.fieldConfig))}applyPluginOptionDefaults(M,I){const x=(0,g.F)({plugin:M,currentOptions:this.options,currentFieldConfig:this.fieldConfig,isAfterPluginChange:I});this.fieldConfig=x.fieldConfig,this.options=x.options}async pluginLoaded(M){this.plugin=M;const I=P(M);if(this.autoMigrateFrom){const x=E[this.autoMigrateFrom]!=null,S=this.getOptionsToRemember(),O=this.autoMigrateFrom,C=this.type;this.clearPropertiesBeforePluginChange(),this.type=C,this.plugin=M,this.callPanelTypeChangeHandler(M,O,S,x)}if(M.onPanelMigration&&I!==this.pluginVersion){const x=M.onPanelMigration(this);this.options=await x,this.pluginVersion=I}this.applyPluginOptionDefaults(M,!1),this.resendLastResult()}clearPropertiesBeforePluginChange(){for(const M in this)m[M]||delete this[M];this.options={},this.fieldConfig={defaults:{...this.fieldConfig.defaults,custom:{}},overrides:(0,g.aW)(this.fieldConfig.overrides,g.nx)}}callPanelTypeChangeHandler(M,I,x,S){if(M.onPanelTypeChanged){const O=S?{angular:x}:x.options;Object.assign(this.options,M.onPanelTypeChanged(this,I,O,this.fieldConfig))}}changePlugin(M){const I=M.meta.id,x=this.getOptionsToRemember(),S=this.fieldConfig,O=this.type,C=this.isAngularPlugin()||!!E[O];this.cachedPluginOptions[O]={properties:x,fieldConfig:S},this.clearPropertiesBeforePluginChange(),this.restorePanelOptions(I),this.callPanelTypeChangeHandler(M,O,x,C),this.type=I,this.plugin=M,this.configRev++,this.applyPluginOptionDefaults(M,!0),M.onPanelMigration&&(this.pluginVersion=P(M))}updateQueries(M){const{dataSource:I}=M;this.datasource={uid:I.uid,type:I.type},this.cacheTimeout=M.cacheTimeout,this.queryCachingTTL=M.queryCachingTTL,this.timeFrom=M.timeRange?.from,this.timeShift=M.timeRange?.shift,this.hideTimeOverride=M.timeRange?.hide,this.interval=M.minInterval,this.maxDataPoints=M.maxDataPoints,this.targets=M.queries,this.configRev++,this.events.publish(new c.zq)}addQuery(M){M=M||{refId:"A"},M.refId=(0,f.W3)(this.targets),this.targets.push(M),this.configRev++}changeQuery(M,I){M.refId=this.targets[I].refId,this.configRev++,this.targets=this.targets.map((x,S)=>S===I?M:x)}getEditClone(){const M=this.getSaveModel(),I=new b(M);I.isEditing=!0,I.plugin=this.plugin;const x=this.getQueryRunner();return I.getQueryRunner().useLastResultFrom(x),I}getTransformations(){return this.transformations}getFieldOverrideOptions(){if(this.plugin)return{fieldConfig:this.fieldConfig,replaceVariables:this.replaceVariables,fieldConfigRegistry:this.plugin.fieldConfigRegistry,theme:i.Ay.theme2}}getDataSupport(){return this.plugin?.dataSupport??{annotations:!1,alertStates:!1}}getQueryRunner(){return this.queryRunner||(this.queryRunner=new h.Z(this)),this.queryRunner}hasTitle(){return this.title&&this.title.length>0}isAngularPlugin(){return(this.plugin&&this.plugin.angularPanelCtrl)!==void 0||(this.plugin?.meta?.angular?.detected??!1)}destroy(){this.events.removeAllListeners(),this.queryRunner&&this.queryRunner.destroy()}setTransformations(M){this.transformations=M,this.resendLastResult(),this.configRev++,this.events.publish(new c.JI)}setProperty(M,I){this[M]=I,this.configRev++,M==="repeat"&&(this.repeat&&!this.repeatDirection?this.repeatDirection="h":this.repeat||(delete this.repeatDirection,delete this.maxPerRow))}replaceVariables(M,I,x){const S=this.getQueryRunner().getLastRequest(),O=Object.assign({},this.scopedVars,S?.scopedVars,I);return(0,d.w)().replace(M,O,x)}resendLastResult(){this.plugin&&this.getQueryRunner().resendLastResult()}getDisplayTitle(){return this.replaceVariables(this.title,void 0,"text")}initLibraryPanel(M){for(const[I,x]of Object.entries(M.model)){switch(I){case"id":case"gridPos":case"libraryPanel":continue}this[I]=x}this.libraryPanel=M}unlinkLibraryPanel(){delete this.libraryPanel,this.configRev++,this.render()}}function P(T){return T&&T.meta.info.version?T.meta.info.version:i.Ay.buildInfo.version}function y(T){const M={};return Object.entries(T).filter(([I,x])=>!p[I]&&T.hasOwnProperty(I)&&!(0,t.isEqual)(x,a[I])).forEach(([I,x])=>{M[I]=x}),(0,l.MA)(M)}},3673:(Y,A,e)=>{"use strict";e.d(A,{Bz:()=>p,Q9:()=>c,Ss:()=>a,TA:()=>h,lC:()=>m});var t=e(17172),n=e(82467),o=e(3169),s=e(6473),r=e(80095),g=e(81862),u=e(20701),d=e(72401),i=e(14792),l=e(74856),f=e(28601);function c(v,E){return async D=>{await(0,t.AI)().post("/api/dashboards/import",v),D((0,n.dx)((0,o.tZ)("Dashboard Imported",E))),D((0,u.h9)())}}function h(v){return async E=>{await(0,t.AI)().delete(`/api/dashboards/uid/${v}`),E((0,u.h9)())}}const p=()=>(v,E)=>{const b=E().dashboard.getModel();b&&(b.destroy(),v((0,d.Y7)(b.uid))),(0,l.jG)().stopAutoRefresh(),v((0,f.p0)()),v((0,r.rG)()),s.t.leave(),(0,i.UA)().setCurrent(void 0)},m=v=>E=>{E((0,g.Cj)(v)),(0,l.jG)().refreshTimeModel()},a=v=>E=>{E((0,g.xu)(v)),(0,l.jG)().refreshTimeModel()}},34214:(Y,A,e)=>{"use strict";e.d(A,{G:()=>t.G,a:()=>n.a9});var t=e(98365),n=e(84423)},79999:(Y,A,e)=>{"use strict";e.d(A,{vR:()=>W,yZ:()=>G,OI:()=>V});var t=e(71733),n=e(47232),o=e(69129),s=e(12131),r=e(17172),g=e(32264),u=e(82467),d=e(28138),i=e(3169),l=e(27677),f=e(33390),c=e(17493),h=e(14792),p=e(74856),m=e(72255),a=e(71176),v=e(71101),E=e(54650);function D(_){return async K=>{const j=await l.IB.getFolderByUid(_);return K((0,E.jl)(j)),K((0,u.Vz)((0,v.R4)(j))),j}}var b=e(6473),P=e(2609),y=e(75096),T=e(80348),M=e(37168),I=e(72401),x=e(87421),S=e(16833),O=e(98365),C=e(61298),L=e(14110);function U(_){const K={dashboardId:_.id,dashboardName:_.title,dashboardUid:_.uid,folderName:_.meta.folderTitle,eventName:C.n_.DashboardView};(0,L.G$)(K)}var R=e(28601);async function B(_,K,j){const k=f.A.getObject(N);if(k)return G(),k;try{switch(_.routeName){case T.DashboardRoutes.Home:{const ee=(0,m.sP)().getFromCache(m.m6);if(ee)return ee;const ae=await l.IB.get("/api/dashboards/home");if(ae.redirectUri){const Z=t.I.stripBaseFromUrl(ae.redirectUri);return s.Ny.replace(Z),null}return ae.meta.canSave=!1,ae.meta.canShare=!1,ae.meta.canStar=!1,ae}case T.DashboardRoutes.Public:return await c.np.loadDashboard("public",_.urlSlug,_.accessToken);case T.DashboardRoutes.Normal:{const Q=await c.np.loadDashboard(_.urlType,_.urlSlug,_.urlUid);if(Q.meta.folderUid)try{await K(D(Q.meta.folderUid))}catch(ee){console.warn("Error fetching parent folder",Q.meta.folderUid,"for dashboard",ee)}if(_.fixUrl&&Q.meta.url&&!P._o.isPlaying){const ee=t.I.stripBaseFromUrl(Q.meta.url),ae=s.Ny.getLocation().pathname;ee!==ae&&(s.Ny.replace({...s.Ny.getLocation(),pathname:ee}),console.log("not correct url correcting",ee,ae))}return Q}case T.DashboardRoutes.New:return _.urlFolderUid&&await K(D(_.urlFolderUid)),(0,a.X)(_.urlFolderUid);case T.DashboardRoutes.Path:{const Q=_.urlSlug??"";return await c.np.loadDashboard(T.DashboardRoutes.Path,Q,Q)}default:throw{message:"Unknown route "+_.routeName}}}catch(Q){return(0,r.NF)(Q)&&Q.cancelled||(K((0,R.ig)({message:"Failed to fetch dashboard",error:Q})),console.error(Q)),null}}const H=(_,K={})=>(_.forEach(j=>{j.panels?H(j.panels,K):j.targets&&j.targets.forEach(k=>{k.datasource?.type&&(K[k.datasource.type]?K[k.datasource.type].push(k):K[k.datasource.type]=[k])})}),K);function W(_){return async(K,j)=>{const k=performance.now();K((0,R.xS)());const Q=await B(_,K,j),ee=Q?.dashboard?.version;if(!Q)return;K((0,R.X1)());let ae;try{ae=new O.G(Q.dashboard,Q.meta)}catch(ge){K((0,R.ig)({message:"Failed create dashboard model",error:ge})),console.error(ge);return}const Z=j(),ne=s.Ny.getSearchObject();ne.orgId||s.Ny.partial({orgId:Z.user.orgId},!0);const q=(0,p.jG)();(0,h.UA)().setCurrent(ae),q.init(ae);const re=(0,y.q4)(_.urlUid??ae.uid);if(await K((0,I._q)(re,ae)),(0,M.nm)({dashboard:ae,timeSrv:q}).run({dashboard:ae,range:q.timeRange()}),(0,x.Tk)(j())!==re||j().dashboard.initPhase!==T.DashboardInitPhase.Services)return;try{ae.processRepeats(),ne.autofitpanels&&ae.autoFitPanels(window.innerHeight,ne.kiosk),_.keybindingSrv.setupDashboardBindings(ae)}catch(ge){ge instanceof Error&&K((0,u.dx)((0,i.gi)("Dashboard init failed",ge))),console.error(ge)}_.routeName!==T.DashboardRoutes.New?(U(ae),b.t.watch(ae.uid)):b.t.leave(),ae.weekStart!==""?(0,n.$D)(ae.weekStart):(0,n.$D)(g.$.bootData.user.weekStart),d.A.publish(new o.gc({dashboardId:ae.uid,orgId:Z.user.orgId,userId:Z.user.user?.id,grafanaVersion:g.$.buildInfo.version,queries:H(ae.panels)}));const ie=performance.now()-k;(0,S.d)(ae,ie,ee),K((0,R.O9)(ae))}}const N="DASHBOARD_FROM_LS_KEY";function V(_){f.A.setObject(N,_)}function G(){f.A.delete(N)}},28601:(Y,A,e)=>{"use strict";e.d(A,{Ay:()=>m,O9:()=>i,Ub:()=>h,X1:()=>l,ig:()=>d,p0:()=>f,xS:()=>u});var t=e(30038),n=e(79422),o=e(80348),s=e(98365);const r={initPhase:o.DashboardInitPhase.NotStarted,getModel:()=>null,initError:null,initialDatasource:void 0},g=(0,t.Z0)({name:"dashboard",initialState:r,reducers:{dashboardInitFetching:a=>{a.initPhase=o.DashboardInitPhase.Fetching},dashboardInitServices:a=>{a.initPhase=o.DashboardInitPhase.Services},dashboardInitCompleted:(a,v)=>{a.getModel=()=>v.payload,a.initPhase=o.DashboardInitPhase.Completed},dashboardInitFailed:(a,v)=>{a.initPhase=o.DashboardInitPhase.Failed,a.initError=v.payload,a.getModel=()=>new s.G({...n.Ye,title:"Dashboard init failed"},{canSave:!1,canEdit:!1})},cleanUpDashboard:a=>{a.initPhase=o.DashboardInitPhase.NotStarted,a.initError=null,a.getModel=()=>null},addPanel:(a,v)=>{},setInitialDatasource:(a,v)=>{a.initialDatasource=v.payload}}}),{dashboardInitFetching:u,dashboardInitFailed:d,dashboardInitCompleted:i,dashboardInitServices:l,cleanUpDashboard:f,addPanel:c,setInitialDatasource:h}=g.actions,m={dashboard:g.reducer}},36974:(Y,A,e)=>{"use strict";e.d(A,{B1:()=>E,CW:()=>a,OK:()=>d,SD:()=>l,VF:()=>f,_u:()=>p,dH:()=>D,ko:()=>v,no:()=>h,ob:()=>i,s3:()=>c});var t=e(2543),n=e.n(t),o=e(12131),s=e(2913),r=e(15054),g=e(33390),u=e(19752);function d(P,y){const T={type:"timeseries",title:"Panel Title",gridPos:(0,u.Ft)(P),datasource:y?{uid:y}:null,isNew:!0};return P.addPanel(T),T.id}function i(P,y){const T={type:y,title:"Widget title",gridPos:(0,u.Ft)(P),datasource:null,isNew:!0};return P.addPanel(T),T.id}function l(P){const y={type:"row",title:"Row title",gridPos:{x:0,y:0}};P.addPanel(y)}function f(){o.Ny.push("/dashboard/import")}function c(P){const y={type:"add-library-panel",gridPos:(0,u.Ft)(P)};P.addPanel(y)}function h(P,y){if(!y)return;const T=(0,u.Ft)(P),M={type:y.id,title:"Panel Title",gridPos:{x:T.x,y:T.y,w:y.defaults.gridPos.w,h:y.defaults.gridPos.h}};y.defaults&&((0,t.defaults)(M,y.defaults),M.title=y.defaults.title,g.A.delete(r.tH)),P.addPanel(M)}function p(){const P=(0,t.chain)(s.Ay.panels).filter({hideFromList:!1}).map(T=>T).value(),y=g.A.get(r.tH);if(y){const T=JSON.parse(y),M=(0,t.find)(P,{id:T.type});if(M){const I=(0,t.cloneDeep)(M);return I.name=T.title,I.sort=-1,{...I,defaults:{...T}}}}}const m="grafana.dashboards.panelEdit.lastUsedDatasource";function a(P){if(g.A.exists(m)){const y=g.A.getObject(m);if(y?.dashboardUid===P)return y}}function v(P){if(!g.A.exists(m))return;const T=g.A.getObject(m)?.datasourceUid??"";b(P,T)}function E(P){g.A.setObject(m,{dashboardUid:P,datasourceUid:""})}function D(P,y){const T=a(P);if(!T)b(P,y);else{const M=T?.dashboardUid??"";b(M,y)}}function b(P,y){g.A.setObject(m,{dashboardUid:P,datasourceUid:y})}},19752:(Y,A,e)=>{"use strict";e.d(A,{ET:()=>x,FC:()=>D,Ft:()=>L,KJ:()=>P,Mc:()=>y,ZY:()=>M,d7:()=>T,iU:()=>b,nk:()=>S});var t=e(2543),n=e.n(t),o=e(26272),s=e(65879),r=e(47232),g=e(85858),u=e(72574),d=e(28138),i=e(2913),l=e(15054),f=e(33390),c=e(1702),h=e(84423),p=e(96227),m=e(58807),a=e(79971),v=e(99140),E=e(28444);const D=(U,R,B)=>{if(B!==!1){const H=R.alert&&!i.Ay.unifiedAlertingEnabled?"Panel includes an alert rule. removing the panel will also remove the alert rule":void 0,W=R.alert?"YES":void 0;d.A.publish(new E.bY({title:"Remove panel",text:"Are you sure you want to remove this panel?",text2:H,icon:"trash-alt",confirmText:W,yesText:"Remove",onConfirm:()=>D(U,R,!1)}));return}U.removePanel(R),(0,v.JD)((0,a.O6)(R.key))},b=(U,R)=>{U.duplicatePanel(R)},P=U=>{let R=U;U instanceof h.a9&&(R=U.getSaveModel()),f.A.set(l.tH,JSON.stringify(R)),d.A.emit(o.r1.alertSuccess,["Panel copied. Click **Add panel** icon to paste."])},y=(U,R)=>{d.A.publish(new E.S8({component:c.ShareModal,props:{dashboard:U,panel:R}}))},T=(U,R)=>{d.A.publish(new E.S8({component:p.o,props:{panel:R,initialFolderUid:U.meta.folderUid,isOpen:!0}}))},M=U=>{d.A.publish(new E.S8({component:m.l,props:{onConfirm:()=>U.unlinkLibraryPanel(),isOpen:!0}}))},I=U=>{U.refresh()},x=U=>{const R={...U.options};R.legend.showLegend===!0?R.legend.showLegend=!1:R.legend.showLegend=!0,U.updateOptions(R)};function S(U,R){const B={timeInfo:"",timeRange:R};if(U.timeFrom){const H=(0,u.w)().replace(U.timeFrom,U.scopedVars),W=s.describeTextRange(H);if(W.invalid)return B.timeInfo="invalid time override",B;if((0,t.isString)(R.raw.from)){const N=(0,r.AN)(R.from).tz(),V=(0,r.AN)(R.to).tz(),G=g.parse(W.from,void 0,N);B.timeInfo=W.display,B.timeRange={from:G,to:g.parse(W.to,void 0,V),raw:{from:W.from,to:W.to}}}}if(U.timeShift){const H=(0,u.w)().replace(U.timeShift,U.scopedVars);if(s.describeTextRange(H).invalid)return B.timeInfo="invalid timeshift",B;const N="-"+H;B.timeInfo+=" timeshift "+N;const V=g.parseDateMath(N,B.timeRange.from,!1),G=g.parseDateMath(N,B.timeRange.to,!0);B.timeRange={from:V,to:G,raw:{from:V,to:G}}}return U.hideTimeOverride&&(B.timeInfo=""),B}function O(U){const B=document.getElementsByTagName("html")[0].getBoundingClientRect().width;return U.maxDataPoints?U.maxDataPoints:Math.ceil(B*(U.gridPos.w/24))}function C(U,R){const B=U.plugin&&U.plugin.noPadding?0:config.theme.panelPadding*2,H=U.hasTitle()?config.theme.panelHeaderHeight:0;return R-H-B-PANEL_BORDER}function L(U){for(const B of U.panelIterator())B.gridPos.y+=8;return{x:0,y:0,w:12,h:8}}},21380:(Y,A,e)=>{"use strict";e.d(A,{z:()=>o});var t=e(47232),n=e(85858);const o=(s,r)=>{const g={from:(0,t.Ar)(s.from)?(0,t.KQ)(s.from):s.from,to:(0,t.Ar)(s.to)?(0,t.KQ)(s.to):s.to},u=r?r.getTimezone():void 0;return{from:n.parse(g.from,!1,u,r?.fiscalYearStartMonth),to:n.parse(g.to,!0,u,r?.fiscalYearStartMonth),raw:g}}},16833:(Y,A,e)=>{"use strict";e.d(A,{d:()=>n});var t=e(7758);function n(r,g,u){const d=r.templating.list.map(l=>l.type).reduce((l,f)=>(l[o(f)]=1+l[o(f)]||1,l),{}),i=r.panels.map(l=>l.type).reduce((l,f)=>(l[s(f)]=1+l[s(f)]||1,l),{});t.c.dashboardInitialized({uid:r.uid,title:r.title,theme:r.style,schemaVersion:r.schemaVersion,version_before_migration:u,panels_count:r.panels.length,...i,...d,settings_nowdelay:r.timepicker.nowDelay,settings_livenow:!!r.liveNow,duration:g})}const o=r=>`variable_type_${r}_count`,s=r=>`panel_type_${r}_count`},40489:(Y,A,e)=>{"use strict";e.d(A,{ZF:()=>g,vI:()=>r,o2:()=>u});var t=e(88483),n=e(14236);function o(d){const i=new Set;return Object.keys(d).forEach(l=>{d[l].forEach(f=>{i.add(f)})}),i}function s(d){const i=Array.from(o(d));return i.length===1?i[0]:`${i.slice(0,-1).join(", ")} or ${i.slice(-1)}`}function r(d){return new t.c(i=>{let l=0;Promise.all([e.e(2136),e.e(3686)]).then(e.bind(e,22136)).then(f=>{d.forEach(c=>{const h=new FileReader;h.readAsArrayBuffer(c),h.onload=()=>{const p=h.result;if(p&&p instanceof ArrayBuffer){if(c.type==="application/json"){const m=new TextDecoder("utf-8"),a=JSON.parse(m.decode(p));i.next({dataFrames:[(0,n.Vc)(a)],file:c})}else i.next({dataFrames:f.readSpreadsheet(p),file:c});++l>=d.length&&i.complete()}}})}).catch(()=>{throw"Failed to load sheets module"})})}const g={"text/plain":[".csv",".txt"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/vnd.ms-excel":[".xls"],"application/vnd.apple.numbers":[".numbers"],"application/vnd.oasis.opendocument.spreadsheet":[".ods"],"application/json":[".json"]},u=5e5},32738:(Y,A,e)=>{"use strict";e.d(A,{r:()=>u});var t=e(96540),n=e(55852),o=e(10096),s=e(44836),r=e(6320),g=e(80348);function u({variant:d,onClick:i}){const l=o.TP.hasPermission(g.AccessControlAction.DataSourcesCreate),f=r.b.DataSourcesNew;return t.createElement(n.z9,{variant:d||"primary",href:f,disabled:!l,tooltip:l?void 0:"You do not have permission to configure new data sources",onClick:i,target:"_blank"},t.createElement(s.x6,{i18nKey:"data-source-picker.add-new-data-source"},"Configure a new data source"))}},2221:(Y,A,e)=>{"use strict";e.d(A,{A:()=>g});var t=e(32196),n=e(96540),o=e(40845),s=e(10860),r=e(64149);function g({ds:d,onClick:i,selected:l,description:f,...c}){const h=(0,o.$j)(),p=u(h,d.meta.builtIn);return n.createElement(s.Z,{key:d.uid,onClick:i,className:(0,t.cx)(p.card,l?p.selected:void 0),...c},n.createElement(s.Z.Heading,{className:p.heading},n.createElement("div",{className:p.headingContent},n.createElement("span",{className:p.name},d.name," ",d.isDefault?n.createElement(r.L,{tags:["default"]}):null),n.createElement("small",{className:p.type},f||d.meta.name))),n.createElement(s.Z.Figure,{className:p.logo},n.createElement("img",{src:d.meta.info.logos.small,alt:`${d.meta.name} Logo`})))}function u(d,i=!1){return{card:(0,t.css)`
      cursor: pointer;
      background-color: ${d.colors.background.primary};
      border-bottom: 1px solid ${d.colors.border.weak};
      // Move to list component
      margin-bottom: 0;
      border-radius: 0;
      padding: ${d.spacing(1)};
    `,heading:(0,t.css)`
      width: 100%;
      overflow: hidden;
      // This is needed to enable ellipsis when text overlfows
      > button {
        width: 100%;
      }
    `,headingContent:(0,t.css)`
      color: ${d.colors.text.secondary};
      width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      display: flex;
      justify-content: space-between;
    `,logo:(0,t.css)`
      width: 32px;
      height: 32px;
      padding: ${d.spacing(0,1)};
      display: flex;
      align-items: center;

      > img {
        max-height: 100%;
        min-width: 24px;
        filter: invert(${i&&d.isLight?1:0});
      }
    `,name:(0,t.css)`
      color: ${d.colors.text.primary};
      display: flex;
      gap: ${d.spacing(2)};
    `,type:(0,t.css)`
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      display: flex;
      align-items: center;
    `,separator:(0,t.css)`
      margin: 0 ${d.spacing(1)};
      color: ${d.colors.border.weak};
    `,selected:(0,t.css)`
      background-color: ${d.colors.background.secondary};
    `,meta:(0,t.css)`
      display: block;
      overflow-wrap: unset;
      white-space: nowrap;
      width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
    `}}},11219:(Y,A,e)=>{"use strict";e.d(A,{S:()=>f});var t=e(32196),n=e(96540),o=e(13544),s=e(72574),r=e(40845),g=e(44836),u=e(87282),d=e(32738),i=e(2221),l=e(47311);function f(a){const v=(0,n.useRef)(null),[E,D]=(0,u.dR)({keyboardEvents:a.keyboardEvents,containerRef:v}),b=(0,r.$j)(),P=m(b,D),{className:y,current:T,onChange:M,enableKeyboardNavigation:I,onClickEmptyStateCTA:x}=a,S=(0,u.Kr)({alerting:a.alerting,annotations:a.annotations,dashboard:a.dashboard,logs:a.logs,metrics:a.metrics,mixed:a.mixed,pluginId:a.pluginId,tracing:a.tracing,type:a.type,variables:a.variables}),[O,C]=(0,u.TX)(),L=a.filter?S.filter(a.filter):S;return n.createElement("div",{ref:v,className:(0,t.cx)(y,P.container),"data-testid":o.Tp.components.DataSourcePicker.dataSourceList},L.length===0&&n.createElement(c,{className:P.emptyState,onClickCTA:x}),L.sort((0,l.Tj)(T,O,p())).map(U=>n.createElement(i.A,{"data-testid":"data-source-card",key:U.uid,ds:U,onClick:()=>{C(U),M(U)},selected:(0,l.Df)(U,T),...I?E:{}})))}function c({className:a,onClickCTA:v}){const E=(0,r.of)(h);return n.createElement("div",{className:(0,t.cx)(a,E.container)},n.createElement("p",{className:E.message},n.createElement(g.x6,{i18nKey:"data-source-picker.list.no-data-source-message"},"No data sources found")),n.createElement(d.r,{onClick:v}))}function h(a){return{container:(0,t.css)`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    `,message:(0,t.css)`
      margin-bottom: ${a.spacing(3)};
    `}}function p(){return(0,s.w)().getVariables().filter(v=>v.type==="datasource").map(v=>`\${${v.id}}`)}function m(a,v){return{container:(0,t.css)`
      display: flex;
      flex-direction: column;
      ${v} {
        background-color: ${a.colors.background.secondary};
      }
    `,emptyState:(0,t.css)`
      height: 100%;
      flex: 1;
    `}}},50481:(Y,A,e)=>{"use strict";e.d(A,{p:()=>I});var t=e(32196),n=e(2543),o=e(96540),s=e(14110),r=e(32264),g=e(40845),u=e(37390),d=e(10354),i=e(14578),l=e(40276),f=e(37270),c=e(44836),h=e(40489),p=e(90478),m=e(87282),a=e(32738),v=e(13544),E=e(2221),D=e(47311);const b={grafana:(0,c.t)("data-source-picker.built-in-list.description-grafana","Discover visualizations using mock data"),"-- Mixed --":(0,c.t)("data-source-picker.built-in-list.description-mixed","Use multiple data sources"),"-- Dashboard --":(0,c.t)("data-source-picker.built-in-list.description-dashboard","Reuse query results from other visualizations")};function P({className:S,current:O,onChange:C,tracing:L,dashboard:U,mixed:R,metrics:B,type:H,annotations:W,variables:N,alerting:V,pluginId:G,logs:_,filter:K}){const k=(0,m.Kr)({tracing:L,dashboard:U,mixed:R,metrics:B,type:H,annotations:W,variables:N,alerting:V,pluginId:G,logs:_}).filter(Q=>(K?K?.(Q):!0)&&!!Q.meta.builtIn);return o.createElement("div",{className:S,"data-testid":v.Tp.components.DataSourcePicker.advancedModal.builtInDataSourceList},k.map(Q=>o.createElement(E.A,{key:Q.uid,ds:Q,description:b[Q.uid],selected:(0,D.Df)(Q,O),onClick:()=>C(Q)})))}var y=e(11219);const T="dashboards_dspickermodal_clicked",M={SELECT_DS:"select_ds",UPLOAD_FILE:"upload_file",CONFIG_NEW_DS:"config_new_ds",CONFIG_NEW_DS_EMPTY_STATE:"config_new_ds_empty_state",SEARCH:"search",DISMISS:"dismiss"};function I({tracing:S,dashboard:O,mixed:C,metrics:L,type:U,annotations:R,variables:B,alerting:H,pluginId:W,logs:N,uploadFile:V,filter:G,onChange:_,current:K,onDismiss:j,reportedInteractionFrom:k}){const Q=(0,g.of)(x),[ee,ae]=(0,o.useState)(""),Z=k||"modal",ne=()=>{j(),(0,s.rR)(T,{item:M.DISMISS,src:Z})},q=ge=>{_(ge),(0,s.rR)(T,{item:M.SELECT_DS,ds_type:ge.type,src:Z})},te=o.useMemo(()=>(0,n.once)(()=>{(0,s.rR)(T,{item:"search",src:Z})}),[Z]),re=(0,m.ps)("-- Grafana --"),de=(0,p.j)((ge,ve)=>{re&&(_(re,[ge]),(0,s.rR)(T,{item:M.UPLOAD_FILE,src:Z}),ve.length<1&&j())}),ie=({className:ge})=>o.createElement(P,{className:ge,onChange:q,current:K,filter:G,variables:B,tracing:S,metrics:L,type:U,annotations:R,alerting:H,pluginId:W,logs:N,dashboard:O,mixed:C});return o.createElement(u.a,{title:(0,c.t)("data-source-picker.modal.title","Select data source"),closeOnEscape:!0,closeOnBackdropClick:!0,isOpen:!0,className:Q.modal,contentClassName:Q.modalContent,onClickBackdrop:ne,onDismiss:ne},o.createElement("div",{className:Q.leftColumn},o.createElement(d.p,{type:"search",autoFocus:!0,className:Q.searchInput,value:ee,prefix:o.createElement(i.I,{name:"search"}),placeholder:(0,c.t)("data-source-picker.modal.input-placeholder","Select data source"),onChange:ge=>{ae(ge.currentTarget.value),te()}}),o.createElement(l.E,null,o.createElement(y.S,{onChange:q,current:K,onClickEmptyStateCTA:()=>(0,s.rR)(T,{item:M.CONFIG_NEW_DS_EMPTY_STATE,src:Z}),filter:ge=>(G?G?.(ge):!0)&&(0,D.Zn)(ge,ee)&&!ge.meta.builtIn,variables:B,tracing:S,metrics:L,type:U,annotations:R,alerting:H,pluginId:W,logs:N,dashboard:O,mixed:C}),o.createElement(ie,{className:Q.appendBuiltInDataSourcesList}))),o.createElement("div",{className:Q.rightColumn},o.createElement("div",{className:Q.builtInDataSources},o.createElement(l.E,{className:Q.builtInDataSourcesList},o.createElement(ie,null)),V&&r.$.featureToggles.editPanelCSVDragAndDrop&&o.createElement(f.gH,{readAs:"readAsArrayBuffer",fileListRenderer:()=>{},options:{maxSize:h.o2,multiple:!1,accept:h.ZF,onDrop:de}},o.createElement(f.wI,null))),o.createElement("div",{className:Q.newDSSection},o.createElement("span",{className:Q.newDSDescription},o.createElement(c.x6,{i18nKey:"data-source-picker.modal.configure-new-data-source"},"Open a new tab and configure a data source")),o.createElement(a.r,{variant:"secondary",onClick:()=>{(0,s.rR)(T,{item:M.CONFIG_NEW_DS,src:Z}),j()}}))))}function x(S){return{modal:(0,t.css)`
      width: 80%;
      height: 80%;
      max-width: 1200px;
      max-height: 900px;

      ${S.breakpoints.down("md")} {
        width: 100%;
      }
    `,modalContent:(0,t.css)`
      display: flex;
      flex-direction: row;
      height: 100%;

      ${S.breakpoints.down("md")} {
        flex-direction: column;
      }
    `,leftColumn:(0,t.css)`
      display: flex;
      flex-direction: column;
      width: 50%;
      height: 100%;
      padding-right: ${S.spacing(4)};
      border-right: 1px solid ${S.colors.border.weak};

      ${S.breakpoints.down("md")} {
        width: 100%;
        border-right: 0;
        padding-right: 0;
        flex: 1;
        overflow-y: auto;
      }
    `,rightColumn:(0,t.css)`
      display: flex;
      flex-direction: column;
      width: 50%;
      height: 100%;
      justify-items: space-evenly;
      align-items: stretch;
      padding-left: ${S.spacing(4)};

      ${S.breakpoints.down("md")} {
        width: 100%;
        padding-left: 0;
        flex: 0;
      }
    `,builtInDataSources:(0,t.css)`
      flex: 1 1;
      margin-bottom: ${S.spacing(4)};

      ${S.breakpoints.down("md")} {
        flex: 0;
      }
    `,builtInDataSourcesList:(0,t.css)`
      ${S.breakpoints.down("md")} {
        display: none;
        margin-bottom: 0;
      }

      margin-bottom: ${S.spacing(4)};
    `,appendBuiltInDataSourcesList:(0,t.css)`
      ${S.breakpoints.up("md")} {
        display: none;
      }
    `,newDSSection:(0,t.css)`
      display: flex;
      flex-direction: row;
      width: 100%;
      justify-content: space-between;
      align-items: center;
    `,newDSDescription:(0,t.css)`
      flex: 1 0;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      color: ${S.colors.text.secondary};
    `,searchInput:(0,t.css)`
      width: 100%;
      min-height: 32px;
      margin-bottom: ${S.spacing(1)};
    `}}},51612:(Y,A,e)=>{"use strict";e.d(A,{s:()=>U});var t=e(32196),n=e(95361),o=e(18491),s=e(36376),r=e(80279),g=e(7887),u=e(82148),d=e(96540),i=e(13544),l=e(14110),f=e(40845),c=e(10354),h=e(14578),p=e(17464),m=e(40276),a=e(71678),v=e(55852),E=e(2913),D=e(44836),b=e(97427),P=e(68706),y=e(87282),T=e(11219);function M(V){const{dataSource:G}=V,_=(0,f.$j)(),K=x(_,G?.meta.builtIn);return G?d.createElement("img",{className:K.pickerDSLogo,alt:`${G.meta.name} logo`,src:G.meta.info.logos.small}):I()}function I(){const V=(0,f.of)(x);return d.createElement("div",{className:V.pickerDSLogo})}function x(V,G=!1){return{pickerDSLogo:(0,t.css)`
      height: 20px;
      width: 20px;
      filter: invert(${G&&V.isLight?1:0});
    `}}var S=e(50481),O=e(47311);const C="dashboards_dspicker_clicked",L={OPEN_DROPDOWN:"open_dspicker",SELECT_DS:"select_ds",ADD_FILE:"add_file",OPEN_ADVANCED_DS_PICKER:"open_advanced_ds_picker",CONFIG_NEW_DS_EMPTY_STATE:"config_new_ds_empty_state"};function U(V){const{current:G,onChange:_,hideTextValue:K=!1,width:j,inputId:k,noDefault:Q=!1,disabled:ee=!1,placeholder:ae="Select data source",...Z}=V,ne=(0,f.of)(R,V),[q,te]=(0,d.useState)(!1),[re,de]=(0,d.useState)(!1),[ie,ge]=(0,d.useState)(""),{onKeyDown:ve,keyboardEvents:ye}=(0,b.d)(),pe=(0,d.useRef)(null),[le,Me]=(0,d.useState)(),[De,Re]=(0,d.useState)(),me=(0,y.ps)(G),he=(0,y.ps)("-- Grafana --"),Te=!G&&Q?void 0:me,Be=ie&&q?d.createElement(I,null):d.createElement(M,{dataSource:Te}),we=[(0,n.cY)(4),(0,o.Ej)({apply({availableHeight:J,elements:oe}){oe.floating.style.maxHeight=`${Math.max(200,J-20)}px`,oe.floating.style.minHeight="200px"}}),(0,o.UU)({fallbackStrategy:"initialPlacement",crossAxis:!1,boundary:document.body}),(0,o.BN)()],{refs:Ne,floatingStyles:Ze}=(0,s.we)({open:q,placement:"bottom-start",onOpenChange:te,middleware:we,whileElementsMounted:o.ll,strategy:"fixed"}),st=(0,d.useCallback)(J=>{Ne.setReference(J),Me(J)},[Ne]),Qe=(0,d.useCallback)(()=>{ge(""),te(!1),le?.focus()},[te,le]),{overlayProps:ke,underlayProps:je}=(0,u.e)({onClose:Qe,isDismissable:!0,isOpen:q,shouldCloseOnInteractOutside:J=>le?!le.isSameNode(J):!1},pe),{dialogProps:He}=(0,r.s)({"aria-label":"Opened data source picker list"},pe);function Ge(){(0,l.rR)(C,{item:L.OPEN_DROPDOWN}),te(!0),le?.focus()}function Oe(){he&&_(he,[P.dx])}function Ke(J){J.key==="Tab"&&!J.shiftKey&&q&&(J.preventDefault(),De?.focus()),J.key==="Tab"&&J.shiftKey&&q&&Qe(),ve(J)}function Ee(J){J.shiftKey?(J.preventDefault(),le?.focus()):Qe()}return(0,d.useEffect)(()=>{const J=ye.subscribe({next:oe=>{switch(oe?.code){case"ArrowDown":Ge(),oe.preventDefault();break;case"ArrowUp":Ge(),oe.preventDefault();break;case"Escape":Qe(),oe.preventDefault();break}}});return()=>J.unsubscribe()}),d.createElement("div",{className:ne.container,"data-testid":i.Tp.components.DataSourcePicker.container},d.createElement("div",{className:ne.trigger,onClick:Ge},d.createElement(c.p,{id:k||"data-source-picker",className:re?void 0:ne.input,"data-testid":i.Tp.components.DataSourcePicker.inputV2,"aria-label":"Select a data source",autoComplete:"off",prefix:Te?Be:void 0,suffix:d.createElement(h.I,{name:q?"search":"angle-down"}),placeholder:K?"":(0,O.q7)(Te)||ae,onFocus:()=>{de(!0)},onBlur:()=>{de(!1)},onKeyDown:Ke,value:ie,onChange:J=>{Ge(),ge(J.currentTarget.value)},ref:st,disabled:ee})),q?d.createElement(p.ZL,null,d.createElement("div",{...je}),d.createElement("div",{ref:pe,...ke,...He},d.createElement(B,{...Z,style:Ze,ref:Ne.setFloating,footerRef:Re,current:Te,filterTerm:ie,keyboardEvents:ye,onChange:(J,oe)=>{Qe(),J.uid!==Te?.uid&&(_(J,oe),(0,l.rR)(C,{item:L.SELECT_DS,ds_type:J.type}))},onClose:Qe,onClickAddCSV:Oe,onDismiss:Qe,onNavigateOutsiteFooter:Ee}))):null)}function R(V,G){return{container:(0,t.css)({position:"relative",cursor:G.disabled?"not-allowed":"pointer",width:V.spacing(G.width||"auto")}),trigger:(0,t.css)({cursor:"pointer",pointerEvents:G.disabled?"none":"auto"}),input:(0,t.css)({"input::placeholder":{color:G.disabled?V.colors.action.disabledText:V.colors.text.primary}})}}const B=d.forwardRef((V,G)=>{const{filterTerm:_,onChange:K,onClose:j,onClickAddCSV:k,current:Q,filter:ee}=V,ae=(0,d.useCallback)(q=>{K(q)},[K]),Z=(0,d.useCallback)(()=>{k?.(),j(),(0,l.rR)(C,{item:L.ADD_FILE})},[k,j]),ne=(0,f.of)(H);return d.createElement("div",{style:V.style,ref:G,className:ne.container},d.createElement(m.E,null,d.createElement(T.S,{...V,enableKeyboardNavigation:!0,className:ne.dataSourceList,current:Q,onChange:ae,filter:q=>(ee?ee?.(q):!0)&&(0,O.Zn)(q,_),onClickEmptyStateCTA:()=>(0,l.rR)(C,{item:L.CONFIG_NEW_DS_EMPTY_STATE})})),d.createElement(g.n1,null,d.createElement(W,{...V,onClickAddCSV:Z,onChange:ae,onNavigateOutsiteFooter:V.onNavigateOutsiteFooter})))});B.displayName="PickerContent";function H(V){return{container:(0,t.css)({display:"flex",flexDirection:"column",background:V.colors.background.primary,boxShadow:V.shadows.z3}),picker:(0,t.css)({background:V.colors.background.secondary}),dataSourceList:(0,t.css)({flex:1}),footer:(0,t.css)({flex:0,display:"flex",flexDirection:"row-reverse",justifyContent:"space-between",padding:V.spacing(1.5),borderTop:`1px solid ${V.colors.border.weak}`,backgroundColor:V.colors.background.secondary})}}function W({onClose:V,onChange:G,onClickAddCSV:_,...K}){const j=(0,f.of)(N),k=K.uploadFile&&E.Ay.featureToggles.editPanelCSVDragAndDrop,Q=ae=>{ae.key==="Tab"&&K.onNavigateOutsiteFooter(ae)},ee=ae=>{ae.key==="Tab"&&ae.shiftKey&&K.onNavigateOutsiteFooter(ae)};return d.createElement("div",{className:j.footer},d.createElement(a.$s,null,({showModal:ae,hideModal:Z})=>d.createElement(v.$n,{size:"sm",variant:"secondary",fill:"text",onClick:()=>{V(),ae(S.p,{reportedInteractionFrom:"ds_picker",tracing:K.tracing,dashboard:K.dashboard,mixed:K.mixed,metrics:K.metrics,type:K.type,annotations:K.annotations,variables:K.variables,alerting:K.alerting,pluginId:K.pluginId,logs:K.logs,filter:K.filter,uploadFile:K.uploadFile,current:K.current,onDismiss:Z,onChange:(ne,q)=>{G(ne,q),Z()}}),(0,l.rR)(C,{item:L.OPEN_ADVANCED_DS_PICKER})},ref:K.footerRef,onKeyDown:k?ee:Q},d.createElement(D.x6,{i18nKey:"data-source-picker.open-advanced-button"},"Open advanced data source picker"),d.createElement(h.I,{name:"arrow-right"}))),k&&d.createElement(v.$n,{variant:"secondary",size:"sm",onClick:_,onKeyDown:Q},"Add csv or spreadsheet"))}function N(V){return{footer:(0,t.css)({flex:0,display:"flex",flexDirection:"row-reverse",justifyContent:"space-between",padding:V.spacing(1.5),borderTop:`1px solid ${V.colors.border.weak}`,backgroundColor:V.colors.background.secondary})}}},47311:(Y,A,e)=>{"use strict";e.d(A,{Df:()=>s,Tj:()=>g,Zn:()=>u,q7:()=>r,tw:()=>d});var t=e(14792),n=e(36974),o=e(14678);function s(i,l){return!i||!l?!1:typeof l=="string"?i.uid===l:i.uid===l.uid}function r(i){if(i){if(typeof i=="string")return`${i} - not found`;if("name"in i)return i.name;if(i.uid)return`${i.uid} - not found`}}function g(i,l,f){return(h,p)=>{const m=h.name.toUpperCase(),a=p.name.toUpperCase();if(i&&s(h,i))return-1;if(i&&s(p,i))return 1;const v=l.indexOf(h.uid),E=l.indexOf(p.uid);if(v>-1&&v>E)return-1;if(E>-1&&E>v)return 1;const D=f.includes(h.uid),b=f.includes(p.uid);return D&&!b?-1:b&&!D||h.meta.builtIn&&!p.meta.builtIn?1:p.meta.builtIn&&!h.meta.builtIn||m<a?-1:1}}function u(i,l=""){return i.name.toLowerCase().includes(l.toLowerCase())}function d(i){if(!i.uid)return;const l=(0,t.UA)().getCurrent()?.uid??"";if(i.uid===o.uv)return(0,n.B1)(l);(0,n.dH)(l,i.uid)}},83883:(Y,A,e)=>{"use strict";e.d(A,{I:()=>t});const t={List:"/datasources",Edit:"/datasources/edit/:uid",Dashboards:"/datasources/edit/:uid/dashboards",New:"/datasources/new"}},87282:(Y,A,e)=>{"use strict";e.d(A,{Kr:()=>g,TX:()=>r,dR:()=>d,ps:()=>u});var t=e(96540),n=e(78685),o=e(19347);const s="grafana.features.datasources.components.picker.DataSourceDropDown.history";function r(){const[i=[],l]=(0,n.A)(s,[]),f=(0,t.useCallback)(c=>{c.meta.builtIn||(i.includes(c.uid)?(i.splice(i.findIndex(h=>c.uid===h),1),l([...i,c.uid])):l([...i,c.uid].slice(1,6)))},[i,l]);return[i,f]}function g(i){return(0,o.l)().getList(i)}function u(i){const l=(0,o.l)();return l.getInstanceSettings(i)}function d(i){const{keyboardEvents:l,containerRef:f}=i,c=(0,t.useRef)(0),h="data-role",p="keyboardSelectableItem",m={[h]:p},a=`[${h}="${p}"`,v="data-selectedItem",E=`[${v}="true"]`,D=(0,t.useCallback)(P=>{const y=f?.current?.querySelectorAll(a),T=y?.item(P%y?.length);y?.forEach(M=>M.setAttribute(v,"false")),T&&(T.scrollIntoView({block:"center"}),T.setAttribute(v,"true"))},[f,a]),b=(0,t.useCallback)(()=>{f?.current?.querySelector(E)?.querySelector("button")?.click()},[f,E]);return(0,t.useEffect)(()=>{if(!l)return;const P=l.subscribe({next:y=>{switch(y?.code){case"ArrowDown":{D(++c.current),y.preventDefault();break}case"ArrowUp":c.current=c.current>0?c.current-1:c.current,D(c.current),y.preventDefault();break;case"Enter":b();break}}});return()=>P.unsubscribe()},[l,D,b]),(0,t.useEffect)(()=>{const P=new MutationObserver(y=>{y.some(M=>M.addedNodes&&M.addedNodes.length>0||M.removedNodes&&M.removedNodes.length>0)&&D(0)});return f.current&&P.observe(f.current,{childList:!0}),()=>{P.disconnect()}},[f,a,D]),[m,E]}},34258:(Y,A,e)=>{"use strict";e.d(A,{du:()=>ee,Qq:()=>ne,PK:()=>_,G2:()=>ae,bn:()=>j,Ge:()=>K,jB:()=>Z});var t=e(69129),n=e(71733),o=e(26657),s=e(17172),r=e(32264),g=e(12131),u=e(82467),d=e(10096),i=e(27677),l=e(6320),f=e(31193),c=e(27716),h=e(91629),p=e(80348),m=e(75505),a=e(80714);const v=async()=>await(0,i.AI)().get("/api/datasources"),E=async q=>{const te=await(0,m.s)((0,i.AI)().fetch({method:"GET",url:`/api/datasources/${q}`,params:(0,a.F)(),showErrorAlert:!1}));if(te.ok)return te.data;throw Error(`Could not find data source by ID: "${q}"`)},D=async q=>{const te=await(0,m.s)((0,i.AI)().fetch({method:"GET",url:`/api/datasources/uid/${q}`,params:(0,a.F)(),showErrorAlert:!1}));if(te.ok)return te.data;throw Error(`Could not find data source by UID: "${q}"`)},b=async q=>{try{return await D(q)}catch{console.log(`Failed to lookup data source using UID "${q}"`)}try{return await E(q)}catch{console.log(`Failed to lookup data source using ID "${q}"`)}throw Error("Could not find data source")},P=q=>(0,i.AI)().post("/api/datasources",q),y=()=>(0,i.AI)().get("/api/plugins",{enabled:1,type:"datasource"}),T=q=>(0,i.AI)().put(`/api/datasources/uid/${q.uid}`,q,{showErrorAlert:!1,showSuccessAlert:!1}),M=q=>(0,i.AI)().delete(`/api/datasources/uid/${q}`);var I=e(83883),x=e(4589),S=e(43429),O=e(33378);function C(q){const te=[{id:"tsdb",title:"Time series databases",plugins:[]},{id:"logging",title:"Logging & document databases",plugins:[]},{id:"tracing",title:"Distributed tracing",plugins:[]},{id:"profiling",title:"Profiling",plugins:[]},{id:"sql",title:"SQL",plugins:[]},{id:"cloud",title:"Cloud",plugins:[]},{id:"enterprise",title:"Enterprise plugins",plugins:[]},{id:"iot",title:"Industrial & IoT",plugins:[]},{id:"other",title:"Others",plugins:[]}].filter(ge=>ge),re={},de={},ie=U();for(const ge of te)re[ge.id]=ge;for(const ge of q){const ve=ie.find(pe=>pe.id===ge.id);if((ge.enterprise||ve)&&(ge.category="enterprise",ge.unlicensed=!(0,O.a)("enterprise.plugins"),ge.info.links=ve?.info?.links||ge.info.links),ge.info.links)for(const pe of ge.info.links)pe.name="Learn more";(te.find(pe=>pe.id===ge.category)||re.other).plugins.push(ge),de[ge.id]=ge}for(const ge of te){if(ge.id==="cloud"&&ge.plugins.push(R()),ge.id==="enterprise")for(const ve of ie)de[ve.id]||ge.plugins.push(ve);L(ge.plugins)}return te.filter(ge=>ge.plugins.length>0)}function L(q){const te={prometheus:100,graphite:95,loki:90,mysql:80,jaeger:100,postgres:79,gcloud:-1};q.sort((re,de)=>{const ie=te[re.id]||0,ge=te[de.id]||0;return ie>ge?-1:ie<ge||re.name>de.name?1:-1})}function U(){return[B({id:"grafana-splunk-datasource",name:"Splunk",description:"Visualize and explore Splunk logs",imgUrl:"public/img/plugins/splunk_logo_128.png"}),B({id:"grafana-oracle-datasource",name:"Oracle",description:"Visualize and explore Oracle SQL",imgUrl:"public/img/plugins/oracle.png"}),B({id:"grafana-dynatrace-datasource",name:"Dynatrace",description:"Visualize and explore Dynatrace data",imgUrl:"public/img/plugins/dynatrace.png"}),B({id:"grafana-servicenow-datasource",description:"ServiceNow integration and data source",name:"ServiceNow",imgUrl:"public/img/plugins/servicenow.svg"}),B({id:"grafana-datadog-datasource",description:"DataDog integration and data source",name:"DataDog",imgUrl:"public/img/plugins/datadog.png"}),B({id:"grafana-newrelic-datasource",description:"New Relic integration and data source",name:"New Relic",imgUrl:"public/img/plugins/newrelic.svg"}),B({id:"grafana-mongodb-datasource",description:"MongoDB integration and data source",name:"MongoDB",imgUrl:"public/img/plugins/mongodb.svg"}),B({id:"grafana-snowflake-datasource",description:"Snowflake integration and data source",name:"Snowflake",imgUrl:"public/img/plugins/snowflake.svg"}),B({id:"grafana-wavefront-datasource",description:"Wavefront integration and data source",name:"Wavefront",imgUrl:"public/img/plugins/wavefront.svg"}),B({id:"dlopes7-appdynamics-datasource",description:"AppDynamics integration and data source",name:"AppDynamics",imgUrl:"public/img/plugins/appdynamics.svg"}),B({id:"grafana-saphana-datasource",description:"SAP HANA\xAE integration and data source",name:"SAP HANA\xAE",imgUrl:"public/img/plugins/sap_hana.png"}),B({id:"grafana-honeycomb-datasource",description:"Honeycomb integration and datasource",name:"Honeycomb",imgUrl:"public/img/plugins/honeycomb.png"}),B({id:"grafana-salesforce-datasource",description:"Salesforce integration and datasource",name:"Salesforce",imgUrl:"public/img/plugins/salesforce.svg"}),B({id:"grafana-jira-datasource",description:"Jira integration and datasource",name:"Jira",imgUrl:"public/img/plugins/jira_logo.png"}),B({id:"grafana-gitlab-datasource",description:"GitLab integration and datasource",name:"GitLab",imgUrl:"public/img/plugins/gitlab.svg"}),B({id:"grafana-splunk-monitoring-datasource",description:"SignalFx integration and datasource",name:"Splunk Infrastructure Monitoring",imgUrl:"public/img/plugins/signalfx-logo.svg"}),B({id:"grafana-azuredevops-datasource",description:"Azure Devops datasource",name:"Azure Devops",imgUrl:"public/img/plugins/azure-devops.png"}),B({id:"grafana-sumologic-datasource",description:"SumoLogic integration and datasource",name:"SumoLogic",imgUrl:"public/img/plugins/sumo.svg"}),B({id:"grafana-pagerduty-datasource",description:"PagerDuty datasource",name:"PagerDuty",imgUrl:"public/img/plugins/pagerduty.svg"})]}function R(){return{id:"gcloud",name:"Grafana Cloud",type:S.QE.datasource,module:"phantom",baseUrl:"",info:{description:"Hosted Graphite, Prometheus, and Loki",logos:{small:"public/img/grafana_icon.svg",large:"asd"},author:{name:"Grafana Labs"},links:[{url:"https://grafana.com/products/cloud/",name:"Learn more"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}function B(q){return{id:q.id,name:q.name,type:S.QE.datasource,module:"phantom",baseUrl:"",info:{description:q.description,logos:{small:q.imgUrl,large:q.imgUrl},author:{name:"Grafana Labs"},links:[{url:"/plugins/"+q.id,name:"Install now",target:"_self"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}var H=e(74984),W=e(36227),N=e(54226);const V=q=>{let te,re;return q.error&&q.error instanceof o.b1?(te=q.error.message,re=q.error.details):(0,s.NF)(q)?te=q.data.message??`HTTP error ${q.statusText}`:q instanceof Error&&(te=q.message),{message:te,details:re}},G=q=>{const{details:te,message:re,status:de}=q;return{status:de,message:re,details:te}},_=(q,te={loadDataSource:k,loadDataSourceMeta:Q,getDataSource:N.U4,getDataSourceMeta:N.Fj,importDataSourcePlugin:h.cS})=>async(re,de)=>{if(!q){re((0,W.qR)(new Error("Invalid UID")));return}try{const ie=await re(te.loadDataSource(q));await re(te.loadDataSourceMeta(ie));const ge=te.getDataSource(de().dataSources,q),ve=te.getDataSourceMeta(de().dataSources,ge.type),ye=await te.importDataSourcePlugin(ve);re((0,W.Ks)(ye))}catch(ie){ie instanceof Error&&re((0,W.qR)(ie))}},K=(q,te=I.I.Edit,re={getDatasourceSrv:f.tR,getBackendSrv:i.AI})=>async(de,ie)=>{const ge=await re.getDatasourceSrv().get(q),ve=te.replace(/:uid/gi,q);ge.testDatasource&&(de((0,W.QZ)()),re.getBackendSrv().withNoBackendCache(async()=>{try{const ye=await ge.testDatasource(),pe=G({...ye,details:{...ye.details}});de((0,W.lg)(pe)),(0,x.Mh)({grafana_version:r.$.buildInfo.version,plugin_id:ge.type,datasource_uid:ge.uid,success:!0,path:ve}),d.lE.publish(new t.NI)}catch(ye){const pe=V(ye);de((0,W.UP)({...pe})),(0,x.Mh)({grafana_version:r.$.buildInfo.version,plugin_id:ge.type,datasource_uid:ge.uid,success:!1,path:ve}),d.lE.publish(new t.LL)}}))};function j(){return async q=>{if(!d.TP.hasPermission(p.AccessControlAction.DataSourcesRead))return;q((0,W.TN)());const te=await v();q((0,W.E1)(te))}}function k(q){return async te=>{let re=await b(q);return q!==re.uid&&(window.location.href=n.I.assureBaseUrl(`/datasources/edit/${re.uid}`),re={}),te((0,W.jz)(re)),re}}function Q(q){return async te=>{const re=await(0,c.x)(q.type),de=await(0,h.cS)(re),ie=de.DataSourceClass.prototype instanceof o.iy,ge={...re,isBackend:re.backend||ie};te((0,W.gZ)(ge)),de.meta=ge,te((0,u.Vz)((0,H.R4)(q,de)))}}function ee(q,te=I.I.Edit){return async()=>{const re={type:q.id,access:"proxy"},de=await P(re),ie=te.replace(/:uid/gi,de.datasource.uid);await(0,f.tR)().reload(),await d.TP.fetchUserPermissions(),(0,x.V9)({grafana_version:r.$.buildInfo.version,plugin_id:q.id,datasource_uid:de.datasource.uid,plugin_version:de.meta?.info?.version,path:ie}),g.Ny.push(ie)}}function ae(){return async q=>{q((0,W.Gc)());const te=await y(),re=C(te);q((0,W.f$)({plugins:te,categories:re}))}}function Z(q){return async te=>{try{await T(q)}catch(re){const de=V(re);return te((0,W.UP)(de)),Promise.reject(q)}return await(0,f.tR)().reload(),te(k(q.uid))}}function ne(){return async(q,te)=>{const{uid:re}=te().dataSources.dataSource;try{await M(re),await(0,f.tR)().reload();const de=l.b.DataSources;g.Ny.push(de)}catch(de){const ie=V(de);q((0,W.UP)(ie))}}}},458:(Y,A,e)=>{"use strict";e.d(A,{C:()=>o});var t=e(96540),n=e(83883);const o=(0,t.createContext)(n.I)},11084:(Y,A,e)=>{"use strict";e.d(A,{$k:()=>D,BY:()=>h,S4:()=>y,Tn:()=>P,US:()=>p,Um:()=>v,_e:()=>T,aM:()=>I,hx:()=>a,k9:()=>E,oU:()=>c,u1:()=>M,xw:()=>b});var t=e(96540),n=e(97007),o=e(28138),s=e(10096),r=e(80348),g=e(28444),u=e(11959),d=e(34258),i=e(458),l=e(36227),f=e(54226);const c=x=>{const S=(0,r.useDispatch)();(0,t.useEffect)(()=>(S((0,d.PK)(x)),function(){S((0,n.N)({cleanupAction:C=>C.dataSourceSettings=l.IJ}))}),[x,S])},h=x=>{const S=(0,r.useDispatch)(),O=I();return()=>S((0,d.Ge)(x,O.Edit))},p=()=>{const x=(0,r.useDispatch)(),S=(0,r.useSelector)(C=>C.dataSources.isLoadingDataSources),O=(0,r.useSelector)(C=>C.dataSources.dataSources);return(0,t.useEffect)(()=>{x((0,d.bn)())},[x]),{isLoading:S,dataSources:O}},m=x=>{const S=useDispatch();useEffect(()=>{S(loadDataSource(x))},[S,x])},a=()=>{const x=(0,r.useDispatch)();(0,t.useEffect)(()=>{x((0,d.G2)())},[x])},v=()=>{const x=(0,r.useDispatch)(),S=I();return O=>{x((0,d.du)(O,S.Edit))}},E=()=>{const x=(0,r.useDispatch)();return async S=>x((0,d.jB)(S))},D=()=>{const x=(0,r.useDispatch)(),{name:S}=(0,r.useSelector)(O=>O.dataSources.dataSource);return()=>{o.A.publish(new g.bY({title:"Delete",text:`Are you sure you want to delete the "${S}" data source?`,yesText:"Delete",icon:"trash-alt",onConfirm:()=>x((0,d.Qq)())}))}},b=x=>(0,r.useSelector)(S=>(0,f.U4)(S.dataSources,x)),P=x=>{const S=b(x);return(0,u.h)(S)},y=x=>(0,r.useSelector)(S=>(0,f.Fj)(S.dataSources,x)),T=()=>(0,r.useSelector)(x=>x.dataSourceSettings),M=x=>{const S=b(x),O=S.readOnly===!0,C=s.TP.hasPermissionInMetadata(r.AccessControlAction.DataSourcesWrite,S),L=s.TP.hasPermissionInMetadata(r.AccessControlAction.DataSourcesDelete,S);return{readOnly:O,hasWriteRights:C,hasDeleteRights:L}},I=()=>(0,t.useContext)(i.C)},85464:(Y,A,e)=>{"use strict";e.d(A,{$k:()=>o.$k,BY:()=>o.BY,Bs:()=>r.Bs,CR:()=>n.C,C_:()=>r.C_,S4:()=>o.S4,Tk:()=>r.Tk,Tn:()=>o.Tn,US:()=>o.US,Um:()=>o.Um,_e:()=>o._e,aM:()=>o.aM,du:()=>t.du,eB:()=>r.eB,hp:()=>g.hp,hx:()=>o.hx,jz:()=>r.jz,k9:()=>o.k9,lv:()=>g.lv,oU:()=>o.oU,rb:()=>r.rb,u1:()=>o.u1,wC:()=>g.wC,xs:()=>g.xs,xw:()=>o.xw,zC:()=>g.zC});var t=e(34258),n=e(458),o=e(11084),s=e(74984),r=e(36227),g=e(54226)},74984:(Y,A,e)=>{"use strict";e.d(A,{$m:()=>f,R4:()=>i,Vh:()=>l});var t=e(43429),n=e(33378),o=e(76323),s=e(2913),r=e(10096),g=e(35538),u=e(80348);const d="Loading";function i(h,p){const m=p.meta,a=s.Ay.featureToggles.featureHighlights,v={img:m.info.logos.large,id:"datasource-"+h.uid,url:"",text:h.name,children:[{active:!1,icon:"sliders-v-alt",id:`datasource-settings-${h.uid}`,text:"Settings",url:`datasources/edit/${h.uid}/`}]};if(p.configPages)for(const T of p.configPages)v.children.push({active:!1,text:T.title,icon:T.icon,url:`datasources/edit/${h.uid}/?page=${T.id}`,id:`datasource-page-${T.id}`});m.includes&&c(m.includes)&&r.TP.hasRole("Admin")&&v.children.push({active:!1,icon:"apps",id:`datasource-dashboards-${h.uid}`,text:"Dashboards",url:`datasources/edit/${h.uid}/dashboards`});const E=h.type===d,D="feature-highlights-data-source-permissions-badge",b={active:!1,icon:"lock",id:`datasource-permissions-${h.uid}`,text:"Permissions",url:`datasources/edit/${h.uid}/permissions`};if((0,g.z5)()&&!E&&(b.tabSuffix=()=>(0,o.J)({experimentId:D,eventVariant:"trial"})),(0,n.a)("dspermissions.enforcement")?r.TP.hasPermissionInMetadata(u.AccessControlAction.DataSourcesPermissionsRead,h)&&v.children.push(b):a&&!E&&v.children.push({...b,url:b.url+"/upgrade",tabSuffix:()=>(0,o.J)({experimentId:D})}),s.Ay.analytics?.enabled){const T="feature-highlights-data-source-insights-badge",M={active:!1,icon:"info-circle",id:`datasource-insights-${h.uid}`,text:"Insights",url:`datasources/edit/${h.uid}/insights`};(0,g.z5)()&&!E&&(M.tabSuffix=()=>(0,o.J)({experimentId:T,eventVariant:"trial"})),(0,n.a)("analytics")?r.TP.hasPermission(u.AccessControlAction.DataSourcesInsightsRead)&&v.children.push(M):a&&!E&&v.children.push({...M,url:M.url+"/upgrade",tabSuffix:()=>(0,o.J)({experimentId:T})})}const P="feature-highlights-query-caching-badge",y={active:!1,icon:"database",id:`datasource-cache-${h.uid}`,text:"Cache",url:`datasources/edit/${h.uid}/cache`,hideFromTabs:!m.isBackend||!s.Ay.caching.enabled};return(0,g.z5)()&&!E&&(y.tabSuffix=()=>(0,o.J)({experimentId:P,eventVariant:"trial"})),(0,n.a)("caching")?r.TP.hasPermissionInMetadata(u.AccessControlAction.DataSourcesCachingRead,h)&&v.children.push(y):a&&!E&&v.children.push({...y,url:y.url+"/upgrade",tabSuffix:()=>(0,o.J)({experimentId:P})}),v}function l(h,p){let m={text:""};for(const a of h.children)if(a.id.indexOf(p)>0){a.active=!0,m=a;break}return{main:h,node:m}}function f(h){const p=i({access:"",basicAuth:!1,basicAuthUser:"",withCredentials:!1,database:"",id:1,uid:"x",isDefault:!1,jsonData:{authType:"credentials",defaultRegion:"eu-west-2"},name:"Loading",orgId:1,readOnly:!1,type:d,typeName:d,typeLogoUrl:"public/img/icn-datasource.svg",url:"",user:"",secureJsonFields:{}},{meta:{id:"1",type:t.QE.datasource,name:"",info:{author:{name:"",url:""},description:"",links:[{name:"",url:""}],logos:{large:"",small:""},screenshots:[],updated:"",version:""},includes:[],module:"",baseUrl:""}});return l(p,h)}function c(h){return h.find(p=>p.type==="dashboard")!==void 0}},36227:(Y,A,e)=>{"use strict";e.d(A,{Ay:()=>M,Bs:()=>l,C_:()=>p,E1:()=>g,Gc:()=>d,IJ:()=>v,Ks:()=>E,QZ:()=>b,TN:()=>r,Tk:()=>m,UP:()=>y,eB:()=>c,f$:()=>i,gZ:()=>u,jz:()=>s,lg:()=>P,qR:()=>D,rb:()=>h});var t=e(30038),n=e(19484);const o={dataSources:[],plugins:[],categories:[],dataSource:{},layoutMode:n.R.List,searchQuery:"",dataSourcesCount:0,dataSourceTypeSearchQuery:"",isLoadingDataSources:!1,isLoadingDataSourcePlugins:!1,dataSourceMeta:{},isSortAscending:!0},s=(0,t.VP)("dataSources/dataSourceLoaded"),r=(0,t.VP)("dataSources/dataSourcesLoad"),g=(0,t.VP)("dataSources/dataSourcesLoaded"),u=(0,t.VP)("dataSources/dataSourceMetaLoaded"),d=(0,t.VP)("dataSources/dataSourcePluginsLoad"),i=(0,t.VP)("dataSources/dataSourcePluginsLoaded"),l=(0,t.VP)("dataSources/setDataSourcesSearchQuery"),f=(0,t.VP)("dataSources/setDataSourcesLayoutMode"),c=(0,t.VP)("dataSources/setDataSourceTypeSearchQuery"),h=(0,t.VP)("dataSources/setDataSourceName"),p=(0,t.VP)("dataSources/setIsDefault"),m=(0,t.VP)("dataSources/setIsSortAscending"),a=(I=o,x)=>r.match(x)?{...I,isLoadingDataSources:!0}:g.match(x)?{...I,isLoadingDataSources:!1,dataSources:x.payload,dataSourcesCount:x.payload.length}:s.match(x)?{...I,dataSource:x.payload}:l.match(x)?{...I,searchQuery:x.payload}:f.match(x)?{...I,layoutMode:x.payload}:d.match(x)?{...I,plugins:[],isLoadingDataSourcePlugins:!0}:i.match(x)?{...I,plugins:x.payload.plugins,categories:x.payload.categories,isLoadingDataSourcePlugins:!1}:c.match(x)?{...I,dataSourceTypeSearchQuery:x.payload}:u.match(x)?{...I,dataSourceMeta:x.payload}:h.match(x)?{...I,dataSource:{...I.dataSource,name:x.payload}}:p.match(x)?{...I,dataSource:{...I.dataSource,isDefault:x.payload}}:m.match(x)?{...I,isSortAscending:x.payload}:I,v={testingStatus:{},loadError:null,loading:!0,plugin:null},E=(0,t.VP)("dataSourceSettings/initDataSourceSettingsSucceeded"),D=(0,t.VP)("dataSourceSettings/initDataSourceSettingsFailed"),b=(0,t.VP)("dataSourceSettings/testDataSourceStarting"),P=(0,t.VP)("dataSourceSettings/testDataSourceSucceeded"),y=(0,t.VP)("dataSourceSettings/testDataSourceFailed"),M={dataSources:a,dataSourceSettings:(I=v,x)=>E.match(x)?{...I,plugin:x.payload,loadError:null,loading:!1}:D.match(x)?{...I,plugin:null,loadError:x.payload.message,loading:!1}:b.match(x)?{...I,testingStatus:{message:"Testing... this could take up to a couple of minutes",status:"info"}}:P.match(x)?{...I,testingStatus:{status:x.payload?.status,message:x.payload?.message,details:x.payload?.details}}:y.match(x)?{...I,testingStatus:{status:"error",message:x.payload?.message,details:x.payload?.details}}:I}},54226:(Y,A,e)=>{"use strict";e.d(A,{Fj:()=>r,U4:()=>s,hp:()=>o,lv:()=>i,wC:()=>d,xs:()=>g,zC:()=>n});var t=e(41811);const n=(0,t.A)(l=>{const f=new RegExp(l.searchQuery,"i");return l.dataSources.filter(h=>f.test(h.name)||f.test(h.database)||f.test(h.type)).sort((h,p)=>l.isSortAscending?h.name.localeCompare(p.name):p.name.localeCompare(h.name))}),o=(0,t.A)(l=>{const f=new RegExp(l.dataSourceTypeSearchQuery,"i");return l.plugins.filter(c=>f.test(c.name))}),s=(l,f)=>l.dataSource.uid===f?l.dataSource:{},r=(l,f)=>l.dataSourceMeta.id===f?l.dataSourceMeta:{},g=l=>l.searchQuery,u=l=>l.layoutMode,d=l=>l.dataSourcesCount,i=l=>l.isSortAscending},4589:(Y,A,e)=>{"use strict";e.d(A,{M1:()=>s,Mh:()=>o,TR:()=>r,V9:()=>n,_i:()=>u,kg:()=>g,m3:()=>d});var t=e(14110);const n=i=>{(0,t.rR)("grafana_ds_add_datasource_clicked",i)},o=i=>{(0,t.rR)("grafana_ds_test_datasource_clicked",i)},s=i=>{(0,t.rR)("grafana_ds_explore_datasource_clicked",i)},r=i=>{(0,t.rR)("grafana_ds_create_dashboard_clicked",i)},g=i=>{(0,t.rR)("grafana_ds_datasources_list_viewed",i)},u=i=>{(0,t.rR)("connections_datasources_settings_clicked",{item:i})},d=i=>{(0,t.rR)("connections_datasources_ds_configured",i)}},11959:(Y,A,e)=>{"use strict";e.d(A,{h:()=>o});var t=e(76885),n=e(71733);const o=s=>{const r=JSON.stringify({datasource:s.name,context:"explore"});return t.kM.renderUrl(n.I.assureBaseUrl("/explore"),{left:r})}},38074:()=>{"use strict"},21934:(Y,A,e)=>{"use strict";e.d(A,{N:()=>d});var t=e(32196),n=e(96540),o=e(40845),s=e(88323),r=e(83598),g=e(64278);const u={label:"Fixed color",value:"_____fixed_____"},d=l=>{const{value:f,context:c,onChange:h,item:p}=l,m="dark-green",a=(0,o.of)(i),v=f?.field,E=f&&!v&&f?.fixed,D=(0,g.sE)(c.data),b=(0,g.m3)(D,v,u,void 0,p.settings?.baseNameMode),P=(0,n.useCallback)(M=>{if(!M){h(void 0);return}const I=M.value;if(I&&I!==u.value)h({...f,field:I});else{const x=f?.fixed??m;h({...f,field:void 0,fixed:x})}},[h,f]),y=(0,n.useCallback)(M=>{h({field:void 0,fixed:M??m})},[h]),T=E?u:b.find(M=>M.value===v);return n.createElement(n.Fragment,null,n.createElement("div",{className:a.container},n.createElement(s.l6,{value:T,options:b,onChange:P,noOptionsMessage:"No fields found",isClearable:p.settings?.isClearable,placeholder:p.settings?.placeholder}),E&&n.createElement("div",{className:a.picker},n.createElement(r.sk,{color:f?.fixed,onChange:y,enableNamedColors:!0}))))},i=l=>({container:(0,t.css)`
    display: flex;
    flex-wrap: nowrap;
    justify-content: flex-end;
    align-items: center;
  `,picker:(0,t.css)`
    padding-left: 8px;
  `})},25148:(Y,A,e)=>{"use strict";e.d(A,{n:()=>m});var t=e(32196),n=e(96540),o=e(40845),s=e(55852),r=e(39268),g=e(14186),u=e(10354),d=e(95868),i=e(13840),l=e(40321),f=e(47694),c=e(21813),h=e(80744),p=e(19448);const m=E=>{const{value:D,src:b,name:P,placeholder:y,onChange:T,onClear:M,mediaType:I,folderName:x,size:S,color:O,maxFiles:C}=E,L=(0,o.of)(v),U=(0,o.$j)(),R=(0,n.createRef)(),B=n.createElement(p.i,{onChange:T,value:D,mediaType:I,folderName:x,maxFiles:C});let H=b;!H&&D&&(H=(0,c.D)(D));const W=O&&{fill:U.visualization.getColorByName(O)},N=()=>D&&H?n.createElement(f.y,{src:H,className:L.icon,style:{...W}}):n.createElement(s.z9,{variant:"primary",fill:"text",size:"sm"},"Set icon"),V=()=>n.createElement(r.C,null,n.createElement(g.I,{label:null,grow:!0},n.createElement(u.p,{value:a(b,P),placeholder:y,readOnly:!0,prefix:H&&n.createElement(f.y,{src:H,className:L.icon,style:{...W}}),suffix:n.createElement(s.$n,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:M})})));return n.createElement(d.I,{content:B},(G,_,K)=>n.createElement(n.Fragment,null,R.current&&n.createElement(i.A,{...K,referenceElement:R.current,onMouseEnter:G,onKeyDown:j=>{(0,l.Q)(j,_)}}),n.createElement("div",{ref:R,className:L.pointer,onClick:G,onKeyDown:j=>{j.key==="Enter"&&G()},role:"button",tabIndex:0},S===h.Iy.SMALL&&N(),S===h.Iy.NORMAL&&V())))};function a(E,D){if(E?.startsWith("public/img/icons")){const b=D?.lastIndexOf(".svg")??0;if(b>0)return D.substring(0,b)}return D}const v=E=>({pointer:(0,t.css)`
    cursor: pointer;
    input[readonly] {
      cursor: pointer;
    }
  `,icon:(0,t.css)`
    vertical-align: middle;
    display: inline-block;
    fill: currentColor;
    width: 25px;
  `})},19448:(Y,A,e)=>{"use strict";e.d(A,{i:()=>H});var t=e(32196),n=e(80279),o=e(7887),s=e(82148),r=e(96540),g=e(17172),u=e(40845),d=e(55852),i=e(2913),l=e(80744),f=e(88575),c=e(37270),h=e(47694);function p({secondaryText:N="Drag and drop here or browse"}){const V=(0,u.of)(a);return r.createElement("div",{className:V.iconWrapper},r.createElement("small",{className:V.small},N),r.createElement(d.$n,{type:"button",icon:"upload"},"Upload"))}const m=({mediaType:N,setFormData:V,setUpload:G,error:_})=>{const K=(0,u.of)(a),[j,k]=(0,r.useState)(!1),[Q,ee]=(0,r.useState)(""),ae=()=>r.createElement(f.D,{label:"Preview"},r.createElement("div",{className:K.iconPreview},N===l.zu.Icon&&r.createElement(h.y,{src:Q,className:K.img}),N===l.zu.Image&&r.createElement("img",{src:Q,alt:"Preview of the uploaded file",className:K.img}))),Z=q=>{fetch(`/api/storage/delete/upload/${q.file.name}`,{method:"DELETE"}).catch(te=>console.error("cannot delete file",te))},ne=N==="icon"?{"image/*":[".svg",".xml"]}:{"image/*":[".jpeg",".png",".gif",".webp"]};return r.createElement(c.gH,{readAs:"readAsBinaryString",onFileRemove:Z,options:{accept:ne,multiple:!1,onDrop:q=>{let te=new FormData;te.append("file",q[0]),ee(URL.createObjectURL(q[0])),k(!0),V(te),G(!0)}}},_.message!==""&&j?r.createElement("p",null,_.message):j?r.createElement(ae,null):r.createElement(p,null))};function a(N,V){return{container:(0,t.css)`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:(0,t.css)`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${N.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${N.colors.border.medium};
      background-color: ${V?N.colors.background.secondary:N.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:(0,t.css)`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptMargin:(0,t.css)`
      margin: ${N.spacing(2,0,1)};
    `,small:(0,t.css)`
      color: ${N.colors.text.secondary};
      margin-bottom: ${N.spacing(2)};
    `,iconContainer:(0,t.css)`
      display: flex;
      flex-direction: column;
      width: 80%;
      align-items: center;
      align-self: center;
    `,iconPreview:(0,t.css)`
      width: 238px;
      height: 198px;
      border: 1px solid ${N.colors.border.medium};
      display: flex;
      align-items: center;
      justify-content: center;
    `,img:(0,t.css)`
      width: 147px;
      height: 147px;
      fill: ${N.colors.text.primary};
    `}}var v=e(88323),E=e(67647),D=e(31193),b=e(70713),P=e(91793);const y=(0,r.memo)(function(V){const{columnIndex:G,rowIndex:_,style:K,data:j}=V,{cards:k,columnCount:Q,onChange:ee,selected:ae}=j,Z=G+_*Q,ne=k[Z],q=(0,u.of)(M);return r.createElement("div",{style:K},ne&&r.createElement("div",{key:ne.value,className:ae===ne.value?(0,t.cx)(q.card,q.selected):q.card,onClick:()=>ee(ne.value),onKeyDown:te=>{te.key==="Enter"&&ee(ne.value)},role:"button",tabIndex:0},ne.imgUrl.endsWith(".svg")?r.createElement(h.y,{src:ne.imgUrl,className:q.img}):r.createElement("img",{src:ne.imgUrl,alt:"",className:q.img}),r.createElement("h6",{className:q.text},ne.label.slice(0,-4))))},P.t7),T=N=>{const{onChange:V,cards:G,value:_}=N,K=(0,u.of)(M);return r.createElement(b.Ay,{defaultWidth:680},({width:j,height:k})=>{const ae=Math.floor(j/90),Z=Math.ceil(G.length/ae);return r.createElement(P.yi,{width:j,height:k,columnCount:ae,columnWidth:90,rowCount:Z,rowHeight:90,itemData:{cards:G,columnCount:ae,onChange:V,selected:_},className:K.grid},y)})},M=N=>({card:(0,t.css)`
    display: inline-block;
    width: 90px;
    height: 90px;
    margin: 0.75rem;
    margin-left: 15px;
    text-align: center;
    cursor: pointer;
    position: relative;
    background-color: transparent;
    border: 1px solid transparent;
    border-radius: 8px;
    padding-top: 6px;
    :hover {
      border-color: ${N.colors.action.hover};
      box-shadow: ${N.shadows.z2};
    }
  `,selected:(0,t.css)`
    border: 2px solid ${N.colors.primary.main};
    :hover {
      border-color: ${N.colors.primary.main};
    }
  `,img:(0,t.css)`
    width: 40px;
    height: 40px;
    object-fit: cover;
    vertical-align: middle;
    fill: ${N.colors.text.primary};
  `,text:(0,t.css)`
    color: ${N.colors.text.primary};
    white-space: nowrap;
    font-size: 12px;
    text-overflow: ellipsis;
    display: block;
    overflow: hidden;
  `,grid:(0,t.css)`
    border: 1px solid ${N.colors.border.medium};
  `}),I=N=>N===l.zu.Icon?[l.Iu.Icon,l.Iu.IOT,l.Iu.Marker]:[l.Iu.BG],x=(N,V)=>N.find(G=>V.startsWith(G.value))??N[0],S=N=>{const{value:V,mediaType:G,folderName:_,newValue:K,setNewValue:j,maxFiles:k}=N,Q=(0,u.of)(O),ee=I(G).map(ve=>({label:ve,value:ve})),[ae,Z]=(0,r.useState)(),[ne,q]=(0,r.useState)(x(ee,V?.length?V:_)),[te,re]=(0,r.useState)([]),[de,ie]=(0,r.useState)([]),ge=ve=>{ve?(ve=ve.toLowerCase(),ie(te.filter(ye=>ye.search.includes(ve)))):ie(te)};return(0,r.useEffect)(()=>{const ve=ne?.value;if(ve){const ye=G===l.zu.Icon?pe=>pe.name.endsWith(".svg"):pe=>pe.name.endsWith(".png")||pe.name.endsWith(".gif");(0,D.tR)().get("-- Grafana --").then(pe=>{pe.listFiles(ve,k).subscribe({next:le=>{const Me=[];le.forEach(De=>{if(ye(De)){const Re=De.name.lastIndexOf(".");Me.push({value:`${ve}/${De.name}`,label:De.name,search:(Re?De.name.substring(0,Re):De.name).toLowerCase(),imgUrl:`public/${ve}/${De.name}`})}}),re(Me),ie(Me)}})})}},[G,ne,k]),r.createElement(r.Fragment,null,r.createElement(f.D,null,r.createElement(v.l6,{options:ee,onChange:q,value:ne,menuShouldPortal:!1})),r.createElement(f.D,null,r.createElement(E.Z,{value:ae??"",placeholder:"Search",onChange:ve=>{ge(ve),Z(ve)}})),de&&r.createElement("div",{className:Q.cardsWrapper},r.createElement(T,{cards:de,onChange:ve=>j(ve),value:K})))},O=N=>({cardsWrapper:(0,t.css)`
    height: 30vh;
    min-height: 50px;
    margin-top: 5px;
    max-width: 680px;
  `});var C=e(10354),L=e(60029),U=e(21813);const R=N=>{const{newValue:V,setNewValue:G,mediaType:_}=N,K=(0,u.of)(B),j=(0,U.D)(V);let k=V?.substring(V.lastIndexOf("/")+1,V.lastIndexOf("."));return k.length>20&&(k=k.substring(0,20)+"..."),r.createElement(r.Fragment,null,r.createElement(f.D,null,r.createElement(C.p,{onChange:Q=>G(Q.currentTarget.value),value:V})),r.createElement("div",{className:K.iconContainer},r.createElement(f.D,{label:"Preview"},r.createElement("div",{className:K.iconPreview},_===l.zu.Icon&&r.createElement(h.y,{src:j,className:K.img}),_===l.zu.Image&&V&&r.createElement("img",{src:j,alt:"Preview of the selected URL",className:K.img}))),r.createElement(L.J,null,k)))},B=N=>({iconContainer:(0,t.css)`
    display: flex;
    flex-direction: column;
    width: 80%;
    align-items: center;
    align-self: center;
  `,iconPreview:(0,t.css)`
    width: 238px;
    height: 198px;
    border: 1px solid ${N.colors.border.medium};
    display: flex;
    align-items: center;
    justify-content: center;
  `,img:(0,t.css)`
    width: 147px;
    height: 147px;
    fill: ${N.colors.text.primary};
  `}),H=N=>{const{value:V,onChange:G,mediaType:_,folderName:K,maxFiles:j}=N,k=(0,u.of)(W),Q=()=>{G(V)},ee=(0,r.createRef)(),{dialogProps:ae}=(0,n.s)({},ee),{overlayProps:Z}=(0,s.e)({onClose:Q,isDismissable:!0,isOpen:!0},ee),ne=V&&V.includes("://"),[q,te]=(0,r.useState)(V??""),[re,de]=(0,r.useState)(ne?l.QC.URL:l.QC.Folder),[ie,ge]=(0,r.useState)(new FormData),[ve,ye]=(0,r.useState)(!1),[pe,le]=(0,r.useState)({message:""}),Me=Te=>`${k.resourcePickerPopoverTab} ${re===Te&&k.resourcePickerPopoverActiveTab}`,De=()=>r.createElement(S,{value:V,mediaType:_,folderName:K,newValue:q,setNewValue:te,maxFiles:j}),Re=()=>r.createElement(R,{newValue:q,setNewValue:te,mediaType:_}),me=()=>r.createElement(m,{mediaType:_,setFormData:ge,setUpload:ye,newValue:q,error:pe}),he=()=>{switch(re){case l.QC.Folder:return De();case l.QC.URL:return Re();case l.QC.Upload:return me();default:return De()}};return r.createElement(o.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},r.createElement("section",{ref:ee,...Z,...ae},r.createElement("div",{className:k.resourcePickerPopover},r.createElement("div",{className:k.resourcePickerPopoverTabs},r.createElement("button",{className:Me(l.QC.Folder),onClick:()=>de(l.QC.Folder)},"Folder"),r.createElement("button",{className:Me(l.QC.URL),onClick:()=>de(l.QC.URL)},"URL")),r.createElement("div",{className:k.resourcePickerPopoverContent},he(),r.createElement("div",{className:k.buttonRow},r.createElement(d.$n,{variant:"secondary",onClick:()=>Q(),fill:"outline"},"Cancel"),r.createElement(d.$n,{variant:q&&q!==V?"primary":"secondary",onClick:()=>{ve?fetch("/api/storage/upload",{method:"POST",body:ie}).then(Te=>{if(Te.status>=400){Te.json().then(Be=>le(Be));return}else return Te.json()}).then(Te=>{(0,g.AI)().get(`api/storage/read/${Te.path}`).then(()=>te(`${i.$W.appUrl}api/storage/read/${Te.path}`)).then(()=>G(`${i.$W.appUrl}api/storage/read/${Te.path}`))}).catch(Te=>console.error(Te)):G(q)}},"Select"))))))},W=N=>({resourcePickerPopover:(0,t.css)`
    border-radius: ${N.shape.radius.default};
    box-shadow: ${N.shadows.z3};
    background: ${N.colors.background.primary};
    border: 1px solid ${N.colors.border.weak};
  `,resourcePickerPopoverTab:(0,t.css)`
    width: 50%;
    text-align: center;
    padding: ${N.spacing(1,0)};
    background: ${N.colors.background.secondary};
    color: ${N.colors.text.secondary};
    font-size: ${N.typography.bodySmall.fontSize};
    cursor: pointer;
    border: none;

    &:focus:not(:focus-visible) {
      outline: none;
      box-shadow: none;
    }

    :focus-visible {
      position: relative;
    }
  `,resourcePickerPopoverActiveTab:(0,t.css)`
    color: ${N.colors.text.primary};
    font-weight: ${N.typography.fontWeightMedium};
    background: ${N.colors.background.primary};
  `,resourcePickerPopoverContent:(0,t.css)`
    width: 315px;
    font-size: ${N.typography.bodySmall.fontSize};
    min-height: 184px;
    padding: ${N.spacing(1)};
    display: flex;
    flex-direction: column;
  `,resourcePickerPopoverTabs:(0,t.css)`
    display: flex;
    width: 100%;
    border-radius: ${N.shape.radius.default} ${N.shape.radius.default} 0 0;
  `,buttonRow:(0,t.css)({display:"flex",justifyContent:"center",gap:N.spacing(2),padding:N.spacing(1)})})},86640:(Y,A,e)=>{"use strict";e.d(A,{h:()=>c});var t=e(96540),n=e(52622),o=e(39268),s=e(14186),r=e(94354),g=e(55852),u=e(76218),d=e(29286);const i=[{label:"Fixed",value:n.RU.Fixed,description:"Fixed value"},{label:"Field",value:n.RU.Field,description:"Display field value"}],l={settings:{}},f={settings:{}},c=({value:h,context:p,onChange:m})=>{const v=(0,t.useCallback)(y=>{m({...h,mode:y})},[m,h]),E=(0,t.useCallback)(y=>{m({...h,field:y})},[m,h]),D=(0,t.useCallback)((y="")=>{m({...h,fixed:y})},[m,h]),b=()=>{D("")},P=h?.mode??n.RU.Fixed;return t.createElement(t.Fragment,null,t.createElement(o.C,null,t.createElement(s.I,{label:"Source",labelWidth:9,grow:!0},t.createElement(r.z,{value:P,options:i,onChange:v,fullWidth:!0}))),P!==n.RU.Fixed&&t.createElement(o.C,null,t.createElement(s.I,{label:"Field",labelWidth:9,grow:!0},t.createElement(u.O,{context:p,value:h.field??"",onChange:E,item:l}))),P===n.RU.Fixed&&t.createElement(o.C,{key:h?.fixed},t.createElement(s.I,{label:"Value",labelWidth:9,grow:!0},t.createElement(d.g,{context:p,value:h?.fixed,onChange:D,item:f,suffix:h?.fixed&&t.createElement(g.$n,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:b})}))),P===n.RU.Template&&t.createElement(o.C,null,t.createElement(s.I,{label:"Template",labelWidth:9,grow:!0},t.createElement(d.g,{context:p,value:h?.fixed,onChange:D,item:f}))))}},78437:(Y,A,e)=>{"use strict";e.d(A,{NO:()=>t.N,mj:()=>m,AW:()=>C,gm:()=>M,hj:()=>U.h});var t=e(21934),n=e(96540);const o=({value:R,onChange:B})=>{const[H,W]=useState(R?[{value:R,label:R}]:[]),[N,V]=useState(),G=window.__grafana_public_path__+"img/icons/unicons/",_=K=>{B(K),V(K)};return useEffect(()=>{getBackendSrv().get(`${G}/index.json`).then(K=>{W(K.files.map(j=>({value:j,label:j})))})},[G]),React.createElement(Select,{options:H,value:N,onChange:K=>{_(K.value)}})},s=null;var r=e(52622),g=e(39268),u=e(14186),d=e(94354),i=e(76218),l=e(63577),f=e(80744),c=e(25148);const h=[{label:"Fixed",value:r.q_.Fixed,description:"Fixed value"},{label:"Field",value:r.q_.Field,description:"Use a string field result"}],p={settings:{}},m=R=>{const{value:B,context:H,onChange:W,item:N}=R,V=9,G=(0,n.useCallback)(q=>{W({...B,mode:q})},[W,B]),_=(0,n.useCallback)((q="")=>{W({...B,field:q})},[W,B]),K=(0,n.useCallback)(q=>{W({...B,fixed:q??""})},[W,B]),j=q=>{q.stopPropagation(),W({mode:r.q_.Fixed,fixed:"",field:""})},k=B?.mode??r.q_.Fixed,Q=N.settings?.showSourceRadio??!0,ee=N.settings?.resourceType??f.zu.Icon,ae=N.settings?.folderName??l.ResourceFolderName.Icon,Z=N.settings?.maxFiles;let ne="";return ee===f.zu.Icon&&(B?.fixed?ne=(0,l.getPublicOrAbsoluteUrl)(B.fixed):N.settings?.placeholderValue&&(ne=(0,l.getPublicOrAbsoluteUrl)(N.settings.placeholderValue))),n.createElement(n.Fragment,null,Q&&n.createElement(g.C,null,n.createElement(u.I,{label:"Source",labelWidth:V,grow:!0},n.createElement(d.z,{value:k,options:h,onChange:G,fullWidth:!0}))),k!==r.q_.Fixed&&n.createElement(g.C,null,n.createElement(u.I,{label:"Field",labelWidth:V,grow:!0},n.createElement(i.O,{context:H,value:B.field??"",onChange:_,item:p}))),k===r.q_.Fixed&&n.createElement(c.n,{onChange:K,onClear:j,value:B?.fixed,src:ne,placeholder:N.settings?.placeholderText??"Select a value",name:a(B?.fixed)??"",mediaType:ee,folderName:ae,size:f.Iy.NORMAL,maxFiles:Z}),k===r.q_.Mapping&&n.createElement(g.C,null,n.createElement(u.I,{label:"Mappings",labelWidth:V,grow:!0},n.createElement("div",null,"TODO mappings editor!"))))};function a(R){if(!R)return;const B=R.lastIndexOf("/");return B>0?R.substring(B+1):R}var v=e(32196),E=e(40845),D=e(88323),b=e(64278),P=e(60188),y=e(18379);const T={label:"Fixed value",value:"_____fixed_____"},M=R=>{const{value:B,context:H,onChange:W,item:N}=R,{settings:V}=N,G=(0,E.of)(I),_=B?.field,K=!_,j=(0,b.sE)(H.data),k=(0,b.m3)(j,_,T),Q=(0,n.useMemo)(()=>(0,y.Nn)(V),[V]),ee=(0,n.useCallback)(de=>{W((0,y.Ru)(de,Q))},[W,Q]),ae=(0,n.useCallback)(de=>{const ie=de.value;ie&&ie!==T.value?ee({...B,field:ie}):ee({...B,field:void 0})},[ee,B]),Z=(0,n.useCallback)(de=>{de!==void 0&&ee({...B,min:de})},[ee,B]),ne=(0,n.useCallback)(de=>{de!==void 0&&ee({...B,max:de})},[ee,B]),q=(0,n.useCallback)(de=>{de!==void 0&&ee({...B,fixed:de})},[ee,B]),te=B??{},re=K?T:k.find(de=>de.value===_);return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(D.l6,{value:re,options:k,onChange:ae,noOptionsMessage:"No fields found"})),n.createElement("div",{className:G.range},K&&n.createElement(g.C,null,n.createElement(u.I,{label:"Value",labelWidth:8,grow:!0},n.createElement(P.Q,{value:te.fixed,...Q,onChange:q}))),!K&&!Q.hideRange&&n.createElement(n.Fragment,null,n.createElement(g.C,null,n.createElement(u.I,{label:"Min",labelWidth:8,grow:!0},n.createElement(P.Q,{value:te.min,...Q,onChange:Z}))),n.createElement(g.C,null,n.createElement(u.I,{label:"Max",labelWidth:8,grow:!0},n.createElement(P.Q,{value:te.max,...Q,onChange:ne}))))))},I=R=>({range:(0,v.css)`
    padding-top: 8px;
  `});var x=e(11261);const S={label:"Fixed value",value:"_____fixed_____"},O=[{label:"Mod",value:r.WQ.Mod,description:"Use field values, mod from max"},{label:"Clamped",value:r.WQ.Clamped,description:"Use field values, clamped to max and min"}],C=({value:R,context:B,onChange:H,item:W})=>{const{settings:N}=W,V=0,G=R?.field,_=!G,K=(0,b.sE)(B.data),j=(0,b.m3)(K,G,S,x.PU.number),k=(0,E.of)(L),Q=(0,n.useCallback)(te=>{const re=te.value;if(re&&re!==S.value)H({...R,field:re});else{const de=R.fixed??V;H({...R,field:void 0,fixed:de})}},[H,R]),ee=(0,n.useCallback)(te=>{H({...R,mode:te})},[H,R]),ae=(0,n.useCallback)(te=>{H({...R,field:void 0,fixed:te??V})},[H,R]),Z=R??{},ne=R?.mode??r.WQ.Mod,q=_?S:j.find(te=>te.value===G);return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(g.C,null,n.createElement(u.I,{label:"Limit",labelWidth:8,grow:!0},n.createElement(d.z,{value:ne,options:O,onChange:ee,fullWidth:!0}))),n.createElement(D.l6,{value:q,options:j,onChange:Q,noOptionsMessage:"No fields found"})),n.createElement("div",{className:k.range},_&&n.createElement(g.C,null,n.createElement(u.I,{label:"Value",labelWidth:8,grow:!0},n.createElement(P.Q,{value:Z?.fixed??V,onChange:ae,max:N?.max,min:N?.min})))))},L=R=>({range:(0,v.css)`
    padding-top: 8px;
  `});var U=e(86640)},63577:(Y,A,e)=>{"use strict";e.d(A,{MediaType:()=>t.zu,ResourceFolderName:()=>t.Iu,findField:()=>r.UI,findFieldIndex:()=>r.gG,getColorDimension:()=>g,getPublicOrAbsoluteUrl:()=>p.D,getResourceDimension:()=>p.$,getScalarDimension:()=>a.H,getScaledDimension:()=>d.hX,getScaledDimensionForField:()=>d.qx,getTextDimension:()=>c});var t=e(80744),n=e(8066),o=e(58563),s=e(57875),r=e(33924);function g(v,E,D){return u((0,r.UI)(v,E.field),E,D)}function u(v,E,D){if(!v){const y=D.visualization.getColorByName(E.fixed??"grey");return{isAssumed:!!E.field?.length||!E.fixed,fixed:y,value:()=>y,get:T=>y}}const b=(0,n.Qi)(v);if(b.isByValue||v.config.mappings?.length){const y=(0,o.xg)(v,!0);y!==v.config&&(v={...v,config:y},v.state=void 0);const T=(0,s.J)({field:v,theme:D}),M=I=>T(I).color??"#ccc";return{field:v,get:I=>M(v.values[I]),value:()=>M((0,r.sB)(v))}}const P=b.getCalculator(v,D)(0,0);return{fixed:P,value:()=>P,get:y=>P,field:v}}var d=e(18379),i=e(11261),l=e(83195),f=e(52622);function c(v,E){const D=E.field?(0,r.UI)(v,E.field):v?.fields.find(b=>b.type===i.PU.string);return h(D,E)}function h(v,E){let D=E.fixed;const b=E.mode??f.RU.Fixed;if(b===f.RU.Fixed)return{isAssumed:!D,fixed:D,value:()=>D,get:y=>D};if(b===f.RU.Template){const y=T=>`TEMPLATE[${E.fixed} // ${T}]`;return v?{field:v,get:T=>y(v.values[T]),value:()=>y((0,r.sB)(v))}:(D=y(""),{isAssumed:!0,fixed:D,value:()=>D,get:T=>D})}if(!v)return{isAssumed:!0,fixed:D,value:()=>D,get:y=>D};let P=y=>(0,l.cN)(v.display(y));return{field:v,get:y=>P(v.values[y]),value:()=>P((0,r.sB)(v))}}var p=e(21813),m=e(38074),a=e(26781)},21813:(Y,A,e)=>{"use strict";e.d(A,{$:()=>s,D:()=>o});var t=e(52622),n=e(33924);function o(r){return r?r.indexOf(":/")>0?r:window.__grafana_public_path__+r:""}function s(r,g){const u=g.mode??t.q_.Fixed;if(u===t.q_.Fixed){const l=o(g.fixed);return{isAssumed:!l,fixed:l,value:()=>l,get:f=>l}}const d=(0,n.UI)(r,g.field);if(!d){const l="";return{isAssumed:!0,fixed:l,value:()=>l,get:f=>l}}if(u===t.q_.Mapping){const l=f=>o(`${f}`);return{field:d,get:f=>l(d.values[f]),value:()=>l((0,n.sB)(d))}}const i=l=>{if(d&&d.display){const f=d.display(l).icon;return o(f??"")}return""};return{field:d,get:l=>i(d.values[l]),value:()=>i((0,n.sB)(d))}}},26781:(Y,A,e)=>{"use strict";e.d(A,{H:()=>o});var t=e(52622),n=e(33924);function o(r,g){return s((0,n.UI)(r,g?.field),g)}function s(r,g){if(!r){const i=g.fixed??0;return{isAssumed:!!g.field?.length||!g.fixed,fixed:i,value:()=>i,get:()=>i}}let u=i=>i%g.max;return g.mode===t.WQ.Clamped&&(u=i=>i<g.min?g.min:i>g.max?g.max:i),{field:r,get:i=>{const l=r.values[i];return l===null||typeof l!="number"?0:u(l)},value:()=>(0,n.sB)(r)}}},18379:(Y,A,e)=>{"use strict";e.d(A,{Nn:()=>g,Ru:()=>u,hX:()=>s,qx:()=>r});var t=e(58563),n=e(52622),o=e(33924);function s(d,i){return r((0,o.UI)(d,i?.field),i)}function r(d,i,l){if(!d){const a=i.fixed??0;return{isAssumed:!!i.field?.length||!i.fixed,fixed:a,value:()=>a,get:()=>a}}const f=(0,t.AP)(d),c=i.max-i.min;if(d.values.length<1||c<=0||f.delta<=0)return{fixed:i.min,value:()=>i.min,get:()=>i.min};let p=a=>i.min+a*c;if(l===n.QH.Quad){const a=Math.PI*(i.max/2)**2,v=Math.PI*(i.min/2)**2,E=a-v;p=D=>{let b=v+E*D;return Math.sqrt(b/Math.PI)*2}}const m=a=>{const v=d.values[a];let E=0;return v!==-1/0&&(E=(v-f.min)/f.delta),E>1?E=1:E<0&&(E=0),p(E)};return{get:m,value:()=>m((0,o.sB)(d)),field:d}}function g(d){return d||(d={min:0,max:1}),d.min==null&&(d.min=0),d.max==null&&(d.max=1),d}function u(d,i){let{min:l,max:f}=g(i);if(d||(d={}),d.max==null&&(d.max=f),d.min==null&&(d.min=l),d.min>d.max){const c=d.max;d.max=d.min,d.min=c}return d.min<l&&(d.min=l),d.max>f&&(d.max=f),d.fixed==null&&(d.fixed=d.min+(d.max-d.min)/2),d.field||(d.fixed>f?d.fixed=f:d.fixed<l&&(d.fixed=l)),d}},80744:(Y,A,e)=>{"use strict";e.d(A,{Iu:()=>o,Iy:()=>g,QC:()=>r,nG:()=>n,zu:()=>s});var t=e(52622);const n=Object.freeze({fixed:"",mode:t.RU.Field,field:""});var o=(u=>(u.Icon="img/icons/unicons",u.IOT="img/icons/iot",u.Marker="img/icons/marker",u.BG="img/bg",u))(o||{}),s=(u=>(u.Icon="icon",u.Image="image",u))(s||{}),r=(u=>(u.Folder="folder",u.URL="url",u.Upload="upload",u))(r||{}),g=(u=>(u.SMALL="small",u.NORMAL="normal",u))(g||{})},33924:(Y,A,e)=>{"use strict";e.d(A,{B_:()=>i,UI:()=>f,Wb:()=>g,XV:()=>u,b5:()=>d,gG:()=>c,sB:()=>h,wv:()=>l});var t=e(28240),n=e(75059),o=e(32264),s=e(63577),r=e(26781);function g(p,m){if(p?.series&&m.field)for(const a of p.series){const v=(0,s.getColorDimension)(a,m,o.$.theme2);if(!v.isAssumed||p.series.length===1)return v}return(0,s.getColorDimension)(void 0,m,o.$.theme2)}function u(p,m){if(p?.series&&m.field)for(const a of p.series){const v=(0,s.getScaledDimension)(a,m);if(!v.isAssumed||p.series.length===1)return v}return(0,s.getScaledDimension)(void 0,m)}function d(p,m){if(p?.series&&m.field)for(const a of p.series){const v=(0,r.H)(a,m);if(!v.isAssumed||p.series.length===1)return v}return(0,r.H)(void 0,m)}function i(p,m){if(p?.series&&m.field)for(const a of p.series){const v=(0,s.getResourceDimension)(a,m);if(!v.isAssumed||p.series.length===1)return v}return(0,s.getResourceDimension)(void 0,m)}function l(p,m){if(p?.series&&m.field)for(const a of p.series){const v=(0,s.getTextDimension)(a,m);if(!v.isAssumed||p.series.length===1)return v}return(0,s.getTextDimension)(void 0,m)}function f(p,m){const a=c(m,p);return a==null?void 0:p.fields[a]}function c(p,m,a){if(!(!m||!p?.length))for(let v=0;v<m.fields.length;v++){const E=m.fields[v];if(p===E.name)return v;const D=(0,t.Ct)(E,m,a);if(p===D)return v}}function h(p){const m=p.state?.calcs;if(m){const E=m[n.gy.lastNotNull];if(E!=null)return E}const a=p.values;let v=a.length-1;for(;v>=0;){const E=a[v--];if(E!=null)return E}}},9791:(Y,A,e)=>{"use strict";e.d(A,{k:()=>M});var t=e(2543),n=e(96540),o=e(84596),s=e(39070),r=e(47232),g=e(28528),u=e(24293),d=e(90708),i=e(28240),l=e(94624),f=e(24308),c=e(52622),h=e(40845),p=e(79041),m=e(41706),a=e(91126),v=e(33368),E=e(1932);function D(I,x,S){return(0,E.jM)(I,O=>{O.defaults.custom===void 0&&(O.defaults.custom={}),O.defaults.max=S;const{custom:C}=O.defaults;switch(C.stacking===void 0&&(C.stacking={group:"A"}),x){case"lines":C.drawStyle=c.GR.Line,C.stacking.mode=c.gs.None,C.fillOpacity=0;break;case"bars":C.drawStyle=c.GR.Bars,C.stacking.mode=c.gs.None,C.fillOpacity=100;break;case"points":C.drawStyle=c.GR.Points,C.stacking.mode=c.gs.None,C.fillOpacity=0;break;case"stacked_lines":C.drawStyle=c.GR.Line,C.stacking.mode=c.gs.Normal,C.fillOpacity=100,C.axisSoftMin=0;break;case"stacked_bars":C.drawStyle=c.GR.Bars,C.stacking.mode=c.gs.Normal,C.fillOpacity=100,C.axisSoftMin=0;break;default:{const L=x;throw new Error(`Invalid graph-style: ${L}`)}}})}function b(I,x,S){return(0,E.jM)(I,O=>{O.defaults.thresholds=S,O.defaults.custom=O.defaults.custom??{},O.defaults.custom.thresholdsStyle=x})}var P=e(56737),y=e(21423);function T(I){const[x,{inc:S}]=(0,P.A)(1),O=(0,o.A)(I);return(0,n.useMemo)(()=>{O&&!(0,y.J3)(I,O,y.bW)&&S()},[I,O,S]),x}function M({data:I,height:x,width:S,timeZone:O,absoluteRange:C,onChangeTime:L,loadingState:U,annotations:R,onHiddenSeriesChanged:B,splitOpenFn:H,graphStyle:W,tooltipDisplayMode:N=c.$N.Single,anchorToZero:V=!1,yAxisMaximum:G,thresholdsConfig:_,thresholdsStyle:K,eventBus:j,vizLegendOverrides:k}){const Q=(0,h.$j)(),ee=(0,o.A)(C),ae=U===s.Gu.Loading&&ee?ee:C,Z=(0,n.useMemo)(()=>({from:(0,r.KQ)(ae.from),to:(0,r.KQ)(ae.to),raw:{from:(0,r.KQ)(ae.from),to:(0,r.KQ)(ae.to)}}),[ae.from,ae.to]),ne=(0,n.useMemo)(()=>(0,g.O)((0,m.V)(m.S),"Explore"),[]),[q,te]=(0,n.useState)({defaults:{min:V?0:void 0,max:G||void 0,unit:"short",color:{mode:u.Y.PaletteClassic},custom:{drawStyle:c.GR.Line,fillOpacity:0,pointSize:5}},overrides:[]}),re=(0,n.useMemo)(()=>{const le=D(q,W,G);return b(le,K,_)},[q,W,G,_,K]),de=(0,v.h)(H,Z),ie=(0,n.useMemo)(()=>(0,d.we)({fieldConfig:re,data:I,timeZone:O,replaceVariables:le=>le,theme:Q,fieldConfigRegistry:ne,dataLinkPostProcessor:de}),[ne,I,O,Q,re,de]),ge=(0,n.useMemo)(()=>(0,d.we)({fieldConfig:{defaults:{},overrides:[]},data:R,timeZone:O,replaceVariables:le=>le,theme:Q,dataLinkPostProcessor:de}),[R,O,Q,de]),ve=T(ie);(0,n.useEffect)(()=>{if(B){const le=[];ie.forEach(Me=>{Me.fields.map(Re=>Re.config?.custom?.hideFrom?.viz).every(t.identity)&&le.push((0,i.Ri)(Me))}),B(le)}},[ie,B]);const ye={eventsScope:"explore",eventBus:j,sync:()=>l.y.Off,onToggleSeriesVisibility(le,Me){te((0,a.M)(le,Me,q,I))},dataLinkPostProcessor:de},pe=(0,n.useMemo)(()=>({tooltip:{mode:N,sort:c.xB.None},legend:{displayMode:c.lm.List,showLegend:!0,placement:"bottom",calcs:[],...k}}),[N,k]);return n.createElement(p.XF,{value:ye},n.createElement(f.m,{data:{series:ie,timeRange:Z,state:U,annotations:ge,structureRev:ve},pluginId:"timeseries",title:"",width:S,height:x,onChangeTimeRange:L,timeZone:O,options:pe}))}},72519:(Y,A,e)=>{"use strict";e.d(A,{y:()=>T});var t=e(32196),n=e(96540),o=e(42941),s=e(40845),r=e(91052),g=e(14578),u=e(56034),d=e(55852),i=e(44836),l=e(34028),f=e(9791),c=e(94354),h=e(80348);const p=h.EXPLORE_GRAPH_STYLES.map(I=>({value:I,label:I[0].toUpperCase()+I.slice(1).replace(/_/," ")}));function m(I){const{graphStyle:x,onChangeGraphStyle:S}=I;return n.createElement(c.z,{size:"sm",options:p,value:x,onChange:S})}var a=e(33390);const v="grafana.explore.style.graph",E=I=>{store.set(v,I)},D=()=>P(a.A.get(v)),b="lines",P=I=>h.EXPLORE_GRAPH_STYLES.find(S=>S===I)??b,y=20,T=({data:I,eventBus:x,height:S,width:O,absoluteRange:C,timeZone:L,annotations:U,onChangeTime:R,splitOpenFn:B,thresholdsConfig:H,thresholdsStyle:W,loadingState:N,statusMessage:V})=>{const[G,_]=(0,o.A)(!1),[K,j]=(0,n.useState)(D),k=(0,s.of)(M),Q=(0,n.useCallback)(ae=>{(0,l.ng)(ae),j(ae)},[]),ee=(0,n.useMemo)(()=>G?I:I.slice(0,y),[I,G]);return n.createElement(r.NR,{title:(0,i.t)("graph.container.title","Graph"),titleItems:[!G&&y<I.length&&n.createElement("div",{key:"disclaimer",className:k.timeSeriesDisclaimer},n.createElement("span",{className:k.warningMessage},n.createElement(g.I,{name:"exclamation-triangle","aria-hidden":"true"}),n.createElement(i.x6,{i18nKey:"graph.container.show-only-series"},"Showing only ",{MAX_NUMBER_OF_TIME_SERIES:y}," series")),n.createElement(u.m,{content:(0,i.t)("graph.container.content","Rendering too many series in a single panel may impact performance and make data harder to read. Consider refining your queries.")},n.createElement(d.$n,{variant:"secondary",size:"sm",onClick:_},n.createElement(i.x6,{i18nKey:"graph.container.show-all-series"},"Show all ",{length:I.length}))))].filter(Boolean),width:O,height:S,loadingState:N,statusMessage:V,actions:n.createElement(m,{graphStyle:K,onChangeGraphStyle:Q})},(ae,Z)=>n.createElement(f.k,{graphStyle:K,data:ee,height:Z,width:ae,absoluteRange:C,onChangeTime:R,timeZone:L,annotations:U,splitOpenFn:B,loadingState:N,thresholdsConfig:H,thresholdsStyle:W,eventBus:x}))},M=I=>({timeSeriesDisclaimer:(0,t.css)({label:"time-series-disclaimer",display:"flex",alignItems:"center",gap:I.spacing(1)}),warningMessage:(0,t.css)({display:"flex",alignItems:"center",gap:I.spacing(.5),color:I.colors.warning.main,fontSize:I.typography.bodySmall.fontSize})})},97186:(Y,A,e)=>{"use strict";e.d(A,{$:()=>t,r:()=>n});const t={showLabels:"grafana.explore.logs.showLabels",showTime:"grafana.explore.logs.showTime",wrapLogMessage:"grafana.explore.logs.wrapLogMessage",prettifyLogMessage:"grafana.explore.logs.prettifyLogMessage",logsSortOrder:"grafana.explore.logs.sortOrder",logContextWrapLogMessage:"grafana.explore.logs.logContext.wrapLogMessage"},n="grafana.explore.logs.visualisationType"},9651:(Y,A,e)=>{"use strict";e.d(A,{a:()=>u,d:()=>d});var t=e(32196),n=e(96540),o=e(40845),s=e(87066),r=e(9663);const g=(i,l)=>({valueNavigation:(0,t.css)`
      width: ${r.QH};
      font-weight: bold;
    `,valueNavigationWrapper:(0,t.css)`
      display: flex;
      justify-content: flex-end;
    `,itemLabelsWrap:(0,t.css)`
      ${l?"":`border-bottom: 1px solid ${i.colors.border.medium}`};
    `}),u=i=>i.includes(s.gs)?i.replace(s.gs,""):i,d=({valueLabels:i,expanded:l})=>{const f=(0,o.of)(g,l);return n.createElement("div",{className:f.itemLabelsWrap},n.createElement("div",{className:f.valueNavigationWrapper},i.map((c,h)=>n.createElement("span",{className:f.valueNavigation,key:c.name},u(c.name)))))}},9663:(Y,A,e)=>{"use strict";e.d(A,{Ay:()=>b,QH:()=>m,Jd:()=>a});var t=e(32196),n=e(96540),o=e(73287),s=e(14110),r=e(40845),g=e(29158),u=e(9651),d=e(57408);const i=(P,y)=>({rowWrapper:(0,t.css)`
    position: relative;
    min-width: ${m};
    padding-right: 5px;
  `,rowValue:(0,t.css)`
    white-space: nowrap;
    overflow-x: auto;
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
    display: block;
    padding-right: 10px;

    &::-webkit-scrollbar {
      display: none; /* Chrome, Safari and Opera */
    }

    &:before {
      pointer-events: none;
      content: '';
      width: 100%;
      height: 100%;
      position: absolute;
      left: 0;
      top: 0;
      background: linear-gradient(to right, transparent calc(100% - 25px), ${P.colors.background.primary});
    }
  `,rowValuesWrap:(0,t.css)`
    padding-left: ${a};
    width: calc(${y} * ${m});
    display: flex;
  `}),l=({totalNumberOfValues:P,values:y,hideFieldsWithoutValues:T})=>{const M=(0,r.of)(i,P);return n.createElement("div",{role:"cell",className:M.rowValuesWrap},y?.map(I=>T&&(I.value===void 0||I.value===d.M)?null:n.createElement("span",{key:I.key,className:M.rowWrapper},n.createElement("span",{className:M.rowValue},I.value))))},f=P=>{const y=P.isDark?"#ce9178":"#a31515",T=P.isDark?"#73bf69":"#56a64b";return{metricName:(0,t.css)`
      color: ${T};
    `,metricValue:(0,t.css)`
      color: ${y};
    `,expanded:(0,t.css)`
      display: block;
      text-indent: 1em;
    `}},h=({value:P,index:y,length:T,isExpandedView:M})=>{const I=(0,r.of)(f),x=P.key,S=P.value;return n.createElement("span",{className:M?I.expanded:"",key:y},n.createElement("span",{className:I.metricName},x),n.createElement("span",null,"="),n.createElement("span",null,'"'),n.createElement("span",{className:I.metricValue},S),n.createElement("span",null,'"'),y<T-1&&n.createElement("span",null,", "))},p="20px",m="80px",a="25px",v=(P,y,T)=>({rowWrapper:(0,t.css)`
    border-bottom: 1px solid ${P.colors.border.medium};
    display: flex;
    position: relative;
    padding-left: 22px;
    ${T?"":"align-items: center;"}
    ${T?"":"height: 100%;"}
  `,copyToClipboardWrapper:(0,t.css)`
    position: absolute;
    left: 0;
    ${T?"":"bottom: 0;"}
    ${T?"top: 4px;":"top: 0;"}
    margin: auto;
    z-index: 1;
    height: 16px;
    width: 16px;
  `,rowLabelWrapWrap:(0,t.css)`
    position: relative;
    width: calc(100% - (${y} * ${m}) - ${a});
  `,rowLabelWrap:(0,t.css)`
    white-space: nowrap;
    overflow-x: auto;
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
    padding-right: ${p};

    &::-webkit-scrollbar {
      display: none; /* Chrome, Safari and Opera */
    }

    &:after {
      pointer-events: none;
      content: '';
      width: 100%;
      height: 100%;
      position: absolute;
      left: 0;
      top: 0;
      background: linear-gradient(
        to right,
        transparent calc(100% - ${p}),
        ${P.colors.background.primary}
      );
    }
  `});function E(P){let y=[],T=[];for(const M in P)M in P&&P[M]&&!M.includes("Value")?y.push({key:M,value:P[M]}):M in P&&P[M]&&M.includes("Value")&&T.push({key:M,value:P[M]});return{values:T,attributeValues:y}}const b=({listItemData:P,listKey:y,totalNumberOfValues:T,valueLabels:M,isExpandedView:I})=>{const{__name__:x,...S}=P,[O,C]=(0,o.A)(),L=M?.length??T,U=(0,r.of)(v,L,I),{values:R,attributeValues:B}=E(S),H=V=>V==="\u221E"||V==="Infinity"?"+Inf":V,W=`${x}{${B.map(V=>`${V.key}="${H(V.value)}"`)}}`,N=!!(M&&M?.length);return n.createElement(n.Fragment,null,M!==void 0&&I&&n.createElement(u.d,{valueLabels:M,expanded:I}),n.createElement("div",{key:y,className:U.rowWrapper},n.createElement("span",{className:U.copyToClipboardWrapper},n.createElement(g.K,{tooltip:"Copy to clipboard",onClick:()=>{(0,s.rR)("grafana_explore_prometheus_instant_query_ui_raw_toggle_expand"),C(W)},name:"copy"})),n.createElement("span",{role:"cell",className:U.rowLabelWrapWrap},n.createElement("div",{className:U.rowLabelWrap},n.createElement("span",null,x),n.createElement("span",null,"{"),n.createElement("span",null,B.map((V,G)=>n.createElement(h,{isExpandedView:I,value:V,key:G,index:G,length:B.length}))),n.createElement("span",null,"}"))),n.createElement(l,{hideFieldsWithoutValues:N,totalNumberOfValues:L,values:R})))}},57408:(Y,A,e)=>{"use strict";e.d(A,{E:()=>o,M:()=>n});var t=e(83195);const n=" ",o=s=>{const r={},g=[],u=s.fields.filter(l=>!["Time"].includes(l.name));let d=u.find(l=>l.name==="__name__")?.values??[];!d.length&&u.length&&u[0].values.length&&(d=Array(u[0].values.length).fill(""));const i=s.fields.filter(l=>!["__name__"].includes(l.name));return d.forEach(function(l,f){r[l]={};const c=r[l][f]??{};for(const h of i){const p=h.name;if(p!=="Time")if(typeof h?.display=="function"){const m=h?.display(h.values[f]);if(!isNaN(m.numeric))c[p]=m.numeric.toString(10);else{const a=(0,t.cN)(m);a?c[p]=a:p.includes("Value #")&&(c[p]=n)}}else console.warn("Field display method is missing!")}g.push({...c,__name__:l})}),g}},97814:(Y,A,e)=>{"use strict";e.d(A,{g:()=>o});var t=e(96540),n=e(47232);const o=({timeInMs:r,className:g,humanize:u})=>t.createElement("span",{className:g},s(r,u)),s=(r,g=!1)=>{const u=r/1e3;if(!g)return`${u.toFixed(1)}s`;const d=(0,n.Ah)(u,"seconds"),i=d.hours(),l=d.minutes(),f=d.seconds();return i?`${i}h ${l}m ${f}s`:l?`${l}m ${f}s`:`${f}s`}},46923:(Y,A,e)=>{"use strict";e.d(A,{V:()=>ke});var t=e(32196),n=e(96540),o=e(42941),s=e(41987),r=e(6709),g=e(43549),u=e(72574),d=e(40845),i=e(31193),l=e(32901),f=e(80348),c=e(62256),h=e(50248),p=e(41811);const a=(He,Ge,Oe)=>{let Ke;return Oe?Ke=Ge?.childSpanIds.find(Ee=>He.has(Ee)&&He.get(Ee).startTime+He.get(Ee).duration<Oe):Ke=Ge.childSpanIds[0],Ke?He.get(Ke):void 0},E=He=>{const Ge=[],Oe=[];He.forEach(J=>{if(J.references[0]?.refType==="FOLLOWS_FROM"){Ge.push(J.spanID);const oe=He.get(J.references[0].spanID);oe.childSpanIds=oe.childSpanIds.filter(ue=>ue!==J.spanID),He.set(oe.spanID,{...oe})}});const Ke=J=>{J.forEach(oe=>{const ue=He.get(oe);ue.hasChildren&&(Oe.push(...ue.childSpanIds),Ke(ue.childSpanIds))})};return Ke(Ge),[...Ge,...Oe].forEach(J=>He.delete(J)),He},b=He=>{let Ge=[...He.keys()];return Ge.forEach(Oe=>{const Ke=He.get(Oe);if(!(Ke&&Ke.references.length&&Ke.depth))return;const Ee=He.get(Ke.references[0].spanID);if(!Ee){He.delete(Ke.spanID);return}const J=Ke.startTime+Ke.duration,oe=Ee.startTime+Ee.duration;if(Ke.startTime>=Ee.startTime){if(Ke.startTime>=oe){He.delete(Ke.spanID),Ee.childSpanIds=Ee.childSpanIds.filter(ue=>ue!==Ke.spanID);return}if(J>oe){He.set(Ke.spanID,{...Ke,duration:oe-Ke.startTime});return}return}J<=Ee.startTime?(He.delete(Ke.spanID),Ee.childSpanIds=Ee.childSpanIds.filter(ue=>ue!==Ke.spanID)):J<=oe?He.set(Ke.spanID,{...Ke,startTime:Ee.startTime,duration:J-Ee.startTime}):He.set(Ke.spanID,{...Ke,startTime:Ee.startTime,duration:oe-Ee.startTime})}),Ge=[...He.keys()],Ge.forEach(Oe=>{const Ke=He.get(Oe);if(Ke.references.length){const Ee=He.get(Ke.references[0].spanID);Ke.references[0].span=Ee,He.set(Oe,{...Ke})}}),He},P=(He,Ge,Oe,Ke)=>{const Ee=He.get(Ge);if(!Ee)return Oe;const J=a(He,Ee,Ke);let oe;if(J)oe={spanId:Ee.spanID,section_start:J.startTime+J.duration,section_end:Ke||Ee.startTime+Ee.duration},oe.section_start!==oe.section_end&&Oe.push(oe),P(He,J.spanID,Oe);else if(oe={spanId:Ee.spanID,section_start:Ee.startTime,section_end:Ke||Ee.startTime+Ee.duration},oe.section_start!==oe.section_end&&Oe.push(oe),Ee.references.length){const ue=Ee.references.filter(be=>be.refType==="CHILD_OF")[0].spanID;P(He,ue,Oe,Ee.startTime)}return Oe};function y(He){let Ge=[];const Oe=He?.spans[0].spanID;if(Oe){const Ke=He.spans.reduce((Ee,J)=>(Ee.set(J.spanID,J),Ee),new Map);try{const Ee=E(Ke),J=b(Ee);Ge=P(J,Oe,Ge)}catch(Ee){console.log("error while computing critical path for a trace",Ee)}}return Ge}const M=(0,p.A)(y);var I=e(3911),x=e(71656),S=e(30700);const O=.8,C=2,L=200,U=10,R=60,B=6;function H(He,Ge,Oe,Ke,Ee){const J=new Map,oe=Ge.length<R?R:Math.min(Ge.length,L),ue=window.innerWidth*2;He.width=ue,He.height=oe;const be=Math.min(B,Math.max(C,oe/Ge.length)),Le=oe/Ge.length,_e=He.getContext("2d",{alpha:!1});if(_e){_e.fillStyle=Ee,_e.fillRect(0,0,ue,oe);for(let Ve=0;Ve<Ge.length;Ve++){const{valueWidth:We,valueOffset:$e,serviceName:it}=Ge[Ve],at=$e/Oe*ue;let ht=We/Oe*ue;ht<U&&(ht=U);let ft=J.get(it);ft||(ft=`rgba(${Ke(it).concat(O).join()})`,J.set(it,ft)),_e.fillStyle=ft,_e.fillRect(at,Ve*Le,ht,be)}}}const W=(0,I.N)(He=>({CanvasSpanGraph:(0,t.css)`
      label: CanvasSpanGraph;
      background: ${(0,x.R)(He,"#fafafa")};
      height: 60px;
      position: absolute;
      width: 100%;
    `}));class N extends n.PureComponent{constructor(Ge){super(Ge),this.getColor=Oe=>(0,S.rY)(Oe,this.props.theme),this._setCanvasRef=Oe=>{this._canvasElm=Oe},this._canvasElm=void 0}componentDidMount(){this._draw()}componentDidUpdate(){this._draw()}_draw(){if(this._canvasElm){const{valueWidth:Ge,items:Oe}=this.props;H(this._canvasElm,Oe,Ge,this.getColor,(0,x.R)(this.props.theme,"#fff"))}}render(){return n.createElement("canvas",{className:W(this.props.theme).CanvasSpanGraph,ref:this._setCanvasRef,"data-testid":"CanvasSpanGraph"})}}const V=(0,d.cV)(N);var G=e(6389);const _=()=>({TickLabels:(0,t.css)`
      label: TickLabels;
      height: 1rem;
      position: relative;
    `,TickLabelsLabel:(0,t.css)`
      label: TickLabelsLabel;
      color: #717171;
      font-size: 0.7rem;
      position: absolute;
      user-select: none;
    `});function K(He){const{numTicks:Ge,duration:Oe}=He,Ke=(0,d.of)(_),Ee=[];for(let J=0;J<Ge+1;J++){const oe=J/Ge,ue=oe===1?{right:"0%"}:{left:`${oe*100}%`};Ee.push(n.createElement("div",{key:oe,className:Ke.TickLabelsLabel,style:ue,"data-testid":"tick"},(0,G.a3)(Oe*oe)))}return n.createElement("div",{className:Ke.TickLabels,"data-testid":"TickLabels"},Ee)}var j=e(46942),k=e.n(j),Q=e(55852),ee=e(92151);const ae=()=>({GraphTick:(0,t.css)`
      label: GraphTick;
      stroke: #aaa;
      stroke-width: 1px;
    `});function Z(He){const{numTicks:Ge}=He,Oe=(0,d.of)(ae),Ke=[];for(let Ee=1;Ee<Ge;Ee++){const J=`${Ee/Ge*100}%`;Ke.push(n.createElement("line",{className:Oe.GraphTick,x1:J,y1:"0%",x2:J,y2:"100%",key:Ee/Ge}))}return n.createElement("g",{"data-testid":"ticks","aria-hidden":"true"},Ke)}const ne=()=>({ScrubberHandleExpansion:k()((0,t.css)`
        label: ScrubberHandleExpansion;
        cursor: col-resize;
        fill-opacity: 0;
        fill: #44f;
      `,"scrubber-handle-expansion"),ScrubberHandle:k()((0,t.css)`
        label: ScrubberHandle;
        cursor: col-resize;
        fill: #555;
      `,"scrubber-handle"),ScrubberLine:k()((0,t.css)`
        label: ScrubberLine;
        pointer-events: none;
        stroke: #555;
      `,"scrubber-line"),ScrubberDragging:(0,t.css)`
      label: ScrubberDragging;
      & .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      & .scrubber-handle {
        fill: #44f;
      }
      & > .scrubber-line {
        stroke: #44f;
      }
    `,ScrubberHandles:(0,t.css)`
      label: ScrubberHandles;
      &:hover > .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      &:hover > .scrubber-handle {
        fill: #44f;
      }
      &:hover + .scrubber.line {
        stroke: #44f;
      }
    `});function q({isDragging:He,onMouseDown:Ge,onMouseEnter:Oe,onMouseLeave:Ke,position:Ee}){const J=`${Ee*100}%`,oe=(0,d.of)(ne),ue=k()({[oe.ScrubberDragging]:He});return n.createElement("g",{className:ue,"data-testid":"scrubber-component"},n.createElement("g",{"data-testid":"scrubber-component-g",className:oe.ScrubberHandles,onMouseDown:Ge,onMouseEnter:Oe,onMouseLeave:Ke},n.createElement("rect",{"data-testid":"scrubber-component-rect-1",x:J,className:oe.ScrubberHandleExpansion,style:{transform:"translate(-4.5px)"},width:"9",height:"20"}),n.createElement("rect",{"data-testid":"scrubber-component-rect-2",x:J,className:oe.ScrubberHandle,style:{transform:"translate(-1.5px)"},width:"3",height:"20"})),n.createElement("line",{className:oe.ScrubberLine,y2:"100%",x1:J,x2:J,"data-testid":"scrubber-component-line"}))}const te=(0,I.N)(He=>{const Ge="JaegerUiComponents__ViewingLayerResetZoomHoverClassName",Oe=(0,t.css)`
    label: ViewingLayerResetZoom;
    display: none;
    position: absolute;
    right: 1%;
    top: 10%;
    z-index: 1;
  `;return{ViewingLayer:(0,t.css)`
      label: ViewingLayer;
      cursor: vertical-text;
      position: relative;
      z-index: 1;
      &:hover > .${Ge} {
        display: unset;
      }
    `,ViewingLayerGraph:(0,t.css)`
      label: ViewingLayerGraph;
      border: 1px solid ${(0,x.R)(He,"#999")};
      /* need !important here to overcome something from semantic UI */
      overflow: visible !important;
      position: relative;
      transform-origin: 0 0;
      width: 100%;
    `,ViewingLayerInactive:(0,t.css)`
      label: ViewingLayerInactive;
      fill: ${(0,x.R)(He,"rgba(214, 214, 214, 0.5)")};
    `,ViewingLayerCursorGuide:(0,t.css)`
      label: ViewingLayerCursorGuide;
      stroke: ${(0,x.R)(He,"#f44")};
      stroke-width: 1;
    `,ViewingLayerDraggedShift:(0,t.css)`
      label: ViewingLayerDraggedShift;
      fill-opacity: 0.2;
    `,ViewingLayerDrag:(0,t.css)`
      label: ViewingLayerDrag;
      fill: ${(0,x.R)(He,"#44f")};
    `,ViewingLayerFullOverlay:(0,t.css)`
      label: ViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `,ViewingLayerResetZoom:Oe,ViewingLayerResetZoomHoverClassName:Ge}}),re={SHIFT_END:"SHIFT_END",SHIFT_START:"SHIFT_START",REFRAME:"REFRAME"};function de(He,Ge){const[Oe,Ke]=He<Ge?[He,Ge]:[Ge,He];return{x:`${Oe*100}%`,width:`${(Ke-Oe)*100}%`,leadingX:`${Ge*100}%`}}class ie extends n.PureComponent{constructor(Ge){super(Ge),this._setRoot=Oe=>{this._root=Oe},this._getDraggingBounds=Oe=>{if(!this._root)throw new Error("invalid state");const{left:Ke,width:Ee}=this._root.getBoundingClientRect(),[J,oe]=this.props.viewRange.time.current;let ue=1,be=0;return Oe===re.SHIFT_START?ue=oe:Oe===re.SHIFT_END&&(be=J),{clientXLeft:Ke,maxValue:ue,minValue:be,width:Ee}},this._handleReframeMouseMove=({value:Oe})=>{this.props.updateNextViewRangeTime({cursor:Oe})},this._handleReframeMouseLeave=()=>{this._draggerReframe.resetBounds(),this.props.updateNextViewRangeTime({cursor:null})},this._handleReframeDragUpdate=({value:Oe})=>{const Ke=Oe,{time:Ee}=this.props.viewRange,oe={reframe:{anchor:Ee.reframe?Ee.reframe.anchor:Ke,shift:Ke}};this.props.updateNextViewRangeTime(oe)},this._handleReframeDragEnd=({manager:Oe,value:Ke})=>{const{time:Ee}=this.props.viewRange,J=Ee.reframe?Ee.reframe.anchor:Ke,[oe,ue]=Ke<J?[Ke,J]:[J,Ke];Oe.resetBounds(),this.props.updateViewRangeTime(oe,ue,"minimap")},this._handleScrubberEnterLeave=({type:Oe})=>{const Ke=Oe===ee.EUpdateTypes.MouseEnter;this.setState({preventCursorLine:Ke})},this._handleScrubberDragUpdate=({event:Oe,tag:Ke,type:Ee,value:J})=>{Ee===ee.EUpdateTypes.DragStart&&Oe.stopPropagation(),Ke===re.SHIFT_START?this.props.updateNextViewRangeTime({shiftStart:J}):Ke===re.SHIFT_END&&this.props.updateNextViewRangeTime({shiftEnd:J})},this._handleScrubberDragEnd=({manager:Oe,tag:Ke,value:Ee})=>{const[J,oe]=this.props.viewRange.time.current;let ue;if(Ke===re.SHIFT_START)ue=[Ee,oe];else if(Ke===re.SHIFT_END)ue=[J,Ee];else throw new Error("bad state");Oe.resetBounds(),this.setState({preventCursorLine:!1}),this.props.updateViewRangeTime(ue[0],ue[1],"minimap")},this._resetTimeZoomClickHandler=()=>{this.props.updateViewRangeTime(0,1)},this._draggerReframe=new ee.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseMove:this._handleReframeMouseMove,onMouseLeave:this._handleReframeMouseLeave,tag:re.REFRAME}),this._draggerStart=new ee.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:re.SHIFT_START}),this._draggerEnd=new ee.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:re.SHIFT_END}),this._root=void 0,this.state={preventCursorLine:!1}}componentWillUnmount(){this._draggerReframe.dispose(),this._draggerEnd.dispose(),this._draggerStart.dispose()}_getMarkers(Ge,Oe){const Ke=te(this.props.theme),Ee=de(Ge,Oe);return[n.createElement("rect",{key:"fill",className:k()(Ke.ViewingLayerDraggedShift,Ke.ViewingLayerDrag),x:Ee.x,y:"0",width:Ee.width,height:this.props.height-2}),n.createElement("rect",{key:"edge",className:k()(Ke.ViewingLayerDrag),x:Ee.leadingX,y:"0",width:"1",height:this.props.height-2})]}render(){const{height:Ge,viewRange:Oe,numTicks:Ke,theme:Ee}=this.props,{preventCursorLine:J}=this.state,{current:oe,cursor:ue,shiftStart:be,shiftEnd:Le,reframe:_e}=Oe.time,Ve=be!=null||Le!=null||_e!=null,[We,$e]=oe;let it=0;We&&(it=We*100);let at=100;$e&&(at=100-$e*100);let ht;!Ve&&ue!=null&&!J&&(ht=`${ue*100}%`);const ft=te(Ee);return n.createElement("div",{"aria-hidden":!0,className:ft.ViewingLayer,style:{height:Ge}},(We!==0||$e!==1)&&n.createElement(Q.$n,{onClick:this._resetTimeZoomClickHandler,className:k()(ft.ViewingLayerResetZoom,ft.ViewingLayerResetZoomHoverClassName),type:"button",variant:"secondary"},"Reset Selection"),n.createElement("svg",{height:Ge,className:ft.ViewingLayerGraph,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove},it>0&&n.createElement("rect",{x:0,y:0,height:"100%",width:`${it}%`,className:ft.ViewingLayerInactive,"data-testid":"left-ViewingLayerInactive"}),at>0&&n.createElement("rect",{x:`${100-at}%`,y:0,height:"100%",width:`${at}%`,className:ft.ViewingLayerInactive,"data-testid":"right-ViewingLayerInactive"}),n.createElement(Z,{numTicks:Ke}),ht&&n.createElement("line",{className:ft.ViewingLayerCursorGuide,x1:ht,y1:"0",x2:ht,y2:Ge-2,strokeWidth:"1","data-testid":"ViewingLayerCursorGuide"}),be!=null&&this._getMarkers(We,be),Le!=null&&this._getMarkers($e,Le),n.createElement(q,{isDragging:be!=null,onMouseDown:this._draggerStart.handleMouseDown,onMouseEnter:this._draggerStart.handleMouseEnter,onMouseLeave:this._draggerStart.handleMouseLeave,position:We||0}),n.createElement(q,{isDragging:Le!=null,position:$e||1,onMouseDown:this._draggerEnd.handleMouseDown,onMouseEnter:this._draggerEnd.handleMouseEnter,onMouseLeave:this._draggerEnd.handleMouseLeave}),_e!=null&&this._getMarkers(_e.anchor,_e.shift)),Ve&&n.createElement("div",{className:ft.ViewingLayerFullOverlay}))}}const ge=(0,d.cV)(ie),ve=()=>({container:(0,t.css)({padding:"0 0.5rem 0.5rem 0.5rem"}),canvasContainer:(0,t.css)({position:"relative"})}),ye=60,pe=4;function le(He){return{valueOffset:He.relativeStartTime,valueWidth:He.duration,serviceName:He.process.serviceName}}function Me(He){return He.spans.map(le)}const De=(0,p.A)(Me);class Re extends n.PureComponent{render(){const{height:Ge,trace:Oe,viewRange:Ke,updateNextViewRangeTime:Ee,updateViewRangeTime:J}=this.props,oe=ve();if(!Oe)return n.createElement("div",null);const ue=De(Oe);return n.createElement("div",{className:oe.container},n.createElement(K,{numTicks:pe,duration:Oe.duration}),n.createElement("div",{className:oe.canvasContainer},n.createElement(V,{valueWidth:Oe.duration,items:ue}),n.createElement(ge,{viewRange:Ke,numTicks:pe,height:Ge||ye,updateViewRangeTime:J,updateNextViewRangeTime:Ee})))}}Re.defaultProps={height:ye};var me=e(28114);function he(){const[He,Ge]=(0,n.useState)(new Set),Oe=(0,n.useCallback)(function(be){if(He.size===0)return;let Le=-1,_e=!0;const Ve=be.reduce((We,$e)=>($e.depth<=Le&&(_e=!0),_e&&We.has($e.spanID)&&(We.delete($e.spanID),_e=!1,Le=$e.depth),We),new Set(He));Ge(Ve)},[He]),Ke=(0,n.useCallback)(function(be){if(Te(be,He))return;let Le;const _e=be.reduce((Ve,We)=>(Le&&We.depth<=Le.depth?(Ve.add(Le.spanID),We.hasChildren&&(Le=We)):We.hasChildren&&!Ve.has(We.spanID)&&(Le=We),Ve),new Set(He));Le&&_e.add(Le.spanID),Ge(_e)},[He]),Ee=(0,n.useCallback)(function(){Ge(new Set)},[]),J=(0,n.useCallback)(function(be){if(Te(be,He))return;const Le=be.reduce((_e,Ve)=>(Ve.hasChildren&&_e.add(Ve.spanID),_e),new Set);Ge(Le)},[He]),oe=(0,n.useCallback)(function(be){const Le=new Set(He);He.has(be)?Le.delete(be):Le.add(be),Ge(Le)},[He]);return{childrenHiddenIDs:He,expandOne:Oe,collapseOne:Ke,expandAll:Ee,collapseAll:J,childrenToggle:oe}}function Te(He,Ge){return He.filter(Ke=>Ke.hasChildren).length===Ge.size}function Be(He){const[Ge,Oe]=(0,n.useState)(new Map);(0,n.useEffect)(()=>{Oe(new Map)},[He,Oe]);const Ke=(0,n.useCallback)(function(ue){const be=new Map(Ge);be.has(ue)?be.delete(ue):be.set(ue,new h.DetailState),Oe(be)},[Ge]),Ee=(0,n.useCallback)(function(ue,be){const Le=Ge.get(ue);if(!Le)return;const _e=Le.toggleLogItem(be),Ve=new Map(Ge);return Ve.set(ue,_e),Oe(Ve)},[Ge]),J=(0,n.useCallback)(function(ue,be){const Le=Ge.get(ue);if(!Le)return;const _e=Le.toggleReferenceItem(be),Ve=new Map(Ge);return Ve.set(ue,_e),Oe(Ve)},[Ge]);return{detailStates:Ge,toggleDetail:Ke,detailLogItemToggle:Ee,detailLogsToggle:(0,n.useCallback)(oe=>we("logs",Ge,Oe)(oe),[Ge]),detailWarningsToggle:(0,n.useCallback)(oe=>we("warnings",Ge,Oe)(oe),[Ge]),detailStackTracesToggle:(0,n.useCallback)(oe=>we("stackTraces",Ge,Oe)(oe),[Ge]),detailReferenceItemToggle:J,detailReferencesToggle:(0,n.useCallback)(oe=>we("references",Ge,Oe)(oe),[Ge]),detailProcessToggle:(0,n.useCallback)(oe=>we("process",Ge,Oe)(oe),[Ge]),detailTagsToggle:(0,n.useCallback)(oe=>we("tags",Ge,Oe)(oe),[Ge])}}function we(He,Ge,Oe){return Ke=>{const Ee=Ge.get(Ke);if(!Ee)return;let J;He==="tags"?J=Ee.toggleTags():He==="process"?J=Ee.toggleProcess():He==="warnings"?J=Ee.toggleWarnings():He==="references"?J=Ee.toggleReferences():He==="stackTraces"?J=Ee.toggleStackTraces():J=Ee.toggleLogs();const oe=new Map(Ge);oe.set(Ke,J),Oe(oe)}}function Ne(){const[He,Ge]=(0,n.useState)(new Set),Oe=(0,n.useCallback)(function(J){Ge(oe=>{const ue=new Set(oe);return ue.add(J),ue})},[]),Ke=(0,n.useCallback)(function(J){Ge(oe=>{const ue=new Set(oe);return ue.delete(J),ue})},[]);return{hoverIndentGuideIds:He,addHoverIndentGuideId:Oe,removeHoverIndentGuideId:Ke}}var Ze=e(15583);function st(){const[He,Ge]=(0,n.useState)({time:{current:[0,1]}}),Oe=(0,n.useCallback)(function(J){Ge(oe=>{const ue={...oe.time,...J};return{...oe,time:ue}})},[]),Ke=(0,n.useCallback)(function(J,oe){const be={current:[J,oe]};Ge(Le=>({...Le,time:be}))},[]);return{viewRange:He,updateViewRangeTime:Ke,updateNextViewRangeTime:Oe}}const Qe=He=>({noDataMsg:(0,t.css)`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${He.typography.h4.fontSize};
    color: ${He.colors.text.secondary};
  `});function ke(He){const{traceProp:Ge,datasource:Oe,topOfViewRef:Ke,exploreId:Ee,createSpanLink:J}=He,{detailStates:oe,toggleDetail:ue,detailLogItemToggle:be,detailLogsToggle:Le,detailProcessToggle:_e,detailReferencesToggle:Ve,detailReferenceItemToggle:We,detailTagsToggle:$e,detailWarningsToggle:it,detailStackTracesToggle:at}=Be(He.dataFrames[0]),{removeHoverIndentGuideId:ht,addHoverIndentGuideId:ft,hoverIndentGuideIds:gt}=Ne(),{viewRange:Dt,updateViewRangeTime:It,updateNextViewRangeTime:jt}=st(),{expandOne:Vt,collapseOne:_t,childrenToggle:rt,collapseAll:St,childrenHiddenIDs:pn,expandAll:ct}=he(),{search:Ct,setSearch:Yt,spanFilterMatches:cn}=(0,Ze.SQ)(Ge?.spans),[vn,rn]=(0,n.useState)(""),[en,mn]=(0,o.A)(!1),[Un,fn]=(0,n.useState)(!1),[ca,Lt]=(0,n.useState)(!1),[qt,hn]=(0,n.useState)(100),[Cn,gn]=(0,n.useState)({}),[xn,Tn]=(0,n.useState)({}),Wn=(0,d.of)(Qe),[Sn,An]=(0,n.useState)(.4),[ta,fa]=je({refId:He.dataFrames[0]?.refId,exploreId:He.exploreId,datasource:Oe,splitOpenFn:He.splitOpenFn}),la=(0,n.useMemo)(()=>({childrenHiddenIDs:pn,detailStates:oe,hoverIndentGuideIds:gt,spanNameColumnWidth:Sn,traceID:He.traceProp?.traceID}),[pn,oe,gt,Sn,He.traceProp?.traceID]),Xn=(0,i.tR)().getInstanceSettings(Oe?.name),Ea=(0,g.sn)(Xn?.jsonData),Sa=Xn?.jsonData?.tracesToMetrics,Yn=Xn?.jsonData?.tracesToProfiles,za=Xn?.jsonData,ns=(0,n.useMemo)(()=>J??(0,me.lU)({splitOpenFn:He.splitOpenFn,traceToLogsOptions:Ea,traceToMetricsOptions:Sa,traceToProfilesOptions:Yn,dataFrame:He.dataFrames[0],createFocusSpanLink:fa,trace:Ge}),[He.splitOpenFn,Ea,Sa,Yn,He.dataFrames,fa,Ge,J]),ps=(0,f.useSelector)(hs=>(0,l.O)(hs.user)),Cs=Oe?Oe?.type:"unknown",Fs=He.scrollElement?He.scrollElement:document.getElementsByClassName(He.scrollElementClass??"")[0],cs=M(Ge);return n.createElement(n.Fragment,null,He.dataFrames?.length&&Ge?n.createElement(n.Fragment,null,n.createElement(h.TracePageHeader,{trace:Ge,data:He.dataFrames[0],timeZone:ps,search:Ct,setSearch:Yt,showSpanFilters:en,setShowSpanFilters:mn,showSpanFilterMatchesOnly:Un,setShowSpanFilterMatchesOnly:fn,showCriticalPathSpansOnly:ca,setShowCriticalPathSpansOnly:Lt,setFocusedSpanIdForSearch:rn,spanFilterMatches:cn,datasourceType:Cs,setHeaderHeight:hn,app:Ee?s.Jk.Explore:s.Jk.Unknown}),n.createElement(Re,{trace:Ge,viewRange:Dt,updateNextViewRangeTime:jt,updateViewRangeTime:It}),n.createElement(h.TraceTimelineViewer,{findMatchesIDs:cn,trace:Ge,traceToProfilesOptions:Yn,datasourceType:Cs,spanBarOptions:za?.spanBar,traceTimeline:la,updateNextViewRangeTime:jt,updateViewRangeTime:It,viewRange:Dt,timeZone:ps,setSpanNameColumnWidth:An,collapseAll:St,collapseOne:_t,expandAll:ct,expandOne:Vt,childrenToggle:rt,detailLogItemToggle:be,detailLogsToggle:Le,detailWarningsToggle:it,detailStackTracesToggle:at,detailReferencesToggle:Ve,detailReferenceItemToggle:We,detailProcessToggle:_e,detailTagsToggle:$e,detailToggle:ue,addHoverIndentGuideId:ft,removeHoverIndentGuideId:ht,linksGetter:()=>[],createSpanLink:ns,scrollElement:Fs,focusedSpanId:ta,focusedSpanIdForSearch:vn,showSpanFilterMatchesOnly:Un,showCriticalPathSpansOnly:ca,createFocusSpanLink:fa,topOfViewRef:Ke,headerHeight:qt,criticalPath:cs,traceFlameGraphs:Cn,setTraceFlameGraphs:gn,redrawListView:xn,setRedrawListView:Tn})):n.createElement("div",{className:Wn.noDataMsg},"No data"))}function je(He){const Ge=(0,f.useSelector)(ue=>ue.explore.panes[He.exploreId]?.panelsState.trace),Oe=Ge?.spanId,Ke=(0,f.useDispatch)(),Ee=ue=>Ke((0,c.EA)(He.exploreId,"trace",{...Ge,spanId:ue})),J=(0,f.useSelector)(ue=>ue.explore.panes[He.exploreId]?.queries.find(be=>be.refId===He.refId));return[Oe,(ue,be)=>{const Le={title:"Deep link to this span",url:"",internal:{datasourceUid:He.datasource?.uid,datasourceName:He.datasource?.name,query:{...J,query:ue},panelsState:{trace:{spanId:be}}}},_e=J?.queryType==="traceql"&&J.query===ue;return(0,r.u)({link:Le,internalLink:Le.internal,scopedVars:{},field:{},onClickFn:_e?()=>Ee(Oe===be?void 0:be):He.splitOpenFn?()=>He.splitOpenFn({datasourceUid:He.datasource?.uid,queries:[{...J,query:ue}],panelsState:{trace:{spanId:be}}}):void 0,replaceVariables:(0,u.w)().replace.bind((0,u.w)())})}]}},71656:(Y,A,e)=>{"use strict";e.d(A,{R:()=>n});var t=e(84140);function n(o,s,r){if(o.isLight)return s;{if(r){const d=(0,t.A)(s);return t.A.mostReadable(r,[d.clone().lighten(25),d.clone().lighten(10),d,d.clone().darken(10),d.clone().darken(25)],{includeFallbackColors:!1}).toHex8String()}const g=(0,t.A)(s).toHsl();g.l=1-g.l;const u=(0,t.A)(g);return u.isLight()?u.darken(5).toHex8String():u.lighten(5).toHex8String()}}},50248:(Y,A,e)=>{"use strict";e.d(A,{DetailState:()=>Pr,TracePageHeader:()=>sl,TraceTimelineViewer:()=>Go,filterSpans:()=>vl,transformTraceData:()=>No});var t=e(32196),n=e(96540),o=e(14110),s=e(32264),r=e(3911),g=e(40845),u=e(71656),d=e(75888),i=e.n(d);const f={scrollPageDown:{binding:"s",label:"Scroll down"},scrollPageUp:{binding:"w",label:"Scroll up"},scrollToNextVisibleSpan:{binding:"f",label:"Scroll to the next visible span"},scrollToPrevVisibleSpan:{binding:"b",label:"Scroll to the previous visible span"},panLeft:{binding:["a","left"],label:"Pan left"},panLeftFast:{binding:["shift+a","shift+left"],label:"Pan left \u2014 Large"},panRight:{binding:["d","right"],label:"Pan right"},panRightFast:{binding:["shift+d","shift+right"],label:"Pan right \u2014 Large"},zoomIn:{binding:"up",label:"Zoom in"},zoomInFast:{binding:"shift+up",label:"Zoom in \u2014 Large"},zoomOut:{binding:"down",label:"Zoom out"},zoomOutFast:{binding:"shift+down",label:"Zoom out \u2014 Large"},collapseAll:{binding:"]",label:"Collapse All"},expandAll:{binding:"[",label:"Expand All"},collapseOne:{binding:"p",label:"Collapse One Level"},expandOne:{binding:"o",label:"Expand One Level"},searchSpans:{binding:"ctrl+b",label:"Search Spans"},clearSearch:{binding:"escape",label:"Clear Search"}};let c;function h(){if(c)return c;const qe=new(i())(document.body);return c=qe,qe}function p(qe){const tt=h();Object.keys(qe).forEach(nt=>{const ut=qe[nt];ut&&tt.bind(f[nt].binding,ut)})}function m(){h().reset()}var a=e(46942),v=e.n(a),E=e(6389);function D(qe){const{min:tt,max:nt,viewStart:ut,viewEnd:Ot}=qe,Wt=nt-tt,Kt=tt+ut*Wt,un=nt-(1-Ot)*Wt-Kt;return(yn,$n)=>({start:(yn-Kt)/un,end:($n-Kt)/un})}function b(qe,tt,nt){return!Array.isArray(nt.tags)||!nt.tags.length?!1:nt.tags.some(ut=>ut.key===qe&&ut.value===tt)}const P=qe=>qe.kind==="client",y=b.bind(null,"span.kind","client"),T=qe=>P(qe)||y(qe),M=qe=>qe.kind==="server",I=b.bind(null,"span.kind","server"),x=qe=>M(qe)||I(qe),S=qe=>qe.statusCode===2,O=b.bind(null,"error",!0),C=b.bind(null,"error","true"),L=qe=>S(qe)||O(qe)||C(qe);function U(qe,tt){const{depth:nt}=qe[tt];let ut=tt+1;for(;ut<qe.length&&qe[ut].depth>nt;ut++)if(L(qe[ut]))return!0;return!1}function R(qe){if(qe.length<=1||!T(qe[0]))return!1;const nt=qe[0].depth+1;let ut=1;for(;ut<qe.length&&qe[ut].depth===nt;){if(x(qe[ut]))return qe[ut];ut++}return null}const B=qe=>qe.kind?qe.kind==="client":qe.tags.some(({key:tt,value:nt})=>tt==="span.kind"&&nt==="client"),H=qe=>({Ticks:(0,t.css)`
      label: Ticks;
      pointer-events: none;
    `,TicksTick:(0,t.css)`
      label: TicksTick;
      position: absolute;
      height: 100%;
      width: 1px;
      background: ${(0,u.R)(qe,"#d8d8d8")};
      &:last-child {
        width: 0;
      }
    `,TicksTickLabel:(0,t.css)`
      label: TicksTickLabel;
      left: 0.25rem;
      position: absolute;
    `,TicksTickLabelEndAnchor:(0,t.css)`
      label: TicksTickLabelEndAnchor;
      left: initial;
      right: 0.25rem;
    `});function W(qe){const{endTime:tt,numTicks:nt,showLabels:ut,startTime:Ot}=qe;let Wt;if(ut){Wt=[];const un=(tt||0)-(Ot||0);for(let yn=0;yn<nt;yn++){const $n=(Ot||0)+yn/(nt-1)*un;Wt.push((0,E.a3)($n))}}const Kt=(0,g.of)(H),tn=[];for(let un=0;un<nt;un++){const yn=un/(nt-1);tn.push(n.createElement("div",{"data-testid":"TicksID",key:yn,className:Kt.TicksTick,style:{left:`${yn*100}%`}},Wt&&n.createElement("span",{className:v()(Kt.TicksTickLabel,{[Kt.TicksTickLabelEndAnchor]:yn>=1})},Wt[un])))}return n.createElement("div",{className:Kt.Ticks},tn)}W.defaultProps={endTime:null,showLabels:null,startTime:null};const N=()=>({row:(0,t.css)({display:"flex",flex:"0 1 auto",flexDirection:"row"}),rowCell:(0,t.css)({position:"relative"})});function V(qe){const{children:tt,className:nt="",...ut}=qe,Ot=(0,g.of)(N);return n.createElement("div",{className:v()(Ot.row,nt),...ut},tt)}V.defaultProps={className:""};function G(qe){const{children:tt,className:nt="",width:ut,style:Ot,...Wt}=qe,Kt=`${ut*100}%`,tn={...Ot,flexBasis:Kt,maxWidth:Kt},un=(0,g.of)(N);return n.createElement("div",{className:v()(un.rowCell,nt),style:tn,"data-testid":"TimelineRowCell",...Wt},tt)}G.defaultProps={className:"",style:{}},V.Cell=G;var _=e(29158);const K=()=>({TimelineCollapser:(0,t.css)`
      align-items: center;
      display: flex;
      flex: none;
      justify-content: center;
      margin-right: 0.5rem;
    `});function j(qe){const{onExpandAll:tt,onExpandOne:nt,onCollapseAll:ut,onCollapseOne:Ot}=qe,Wt=(0,g.of)(K);return n.createElement("div",{className:Wt.TimelineCollapser,"data-testid":"TimelineCollapser"},n.createElement(_.K,{tooltip:"Expand +1",size:"xl",tooltipPlacement:"top",name:"angle-down",onClick:nt}),n.createElement(_.K,{tooltip:"Collapse +1",size:"xl",tooltipPlacement:"top",name:"angle-right",onClick:Ot}),n.createElement(_.K,{tooltip:"Expand All",size:"xl",tooltipPlacement:"top",name:"angle-double-down",onClick:tt}),n.createElement(_.K,{tooltip:"Collapse All",size:"xl",tooltipPlacement:"top",name:"angle-double-right",onClick:ut}))}var k=e(92151);const Q=()=>({TimelineColumnResizer:(0,t.css)`
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,wrapper:(0,t.css)`
      bottom: 0;
      position: absolute;
      top: 0;
    `,dragger:(0,t.css)`
      border-left: 2px solid transparent;
      cursor: col-resize;
      height: 5000px;
      margin-left: -1px;
      position: absolute;
      top: 0;
      width: 1px;
      z-index: 10;
      &:hover {
        border-left: 2px solid rgba(0, 0, 0, 0.3);
      }
      &::before {
        position: absolute;
        top: 0;
        bottom: 0;
        left: -8px;
        right: 0;
        content: ' ';
      }
    `,draggerDragging:(0,t.css)`
      background: rgba(136, 0, 136, 0.05);
      width: unset;
      &::before {
        left: -2000px;
        right: -2000px;
      }
    `,draggerDraggingLeft:(0,t.css)`
      border-left: 2px solid #808;
      border-right: 1px solid #999;
    `,draggerDraggingRight:(0,t.css)`
      border-left: 1px solid #999;
      border-right: 2px solid #808;
    `,gripIcon:(0,t.css)`
      position: absolute;
      top: 0;
      bottom: 0;
      &::before,
      &::after {
        border-right: 1px solid #ccc;
        content: ' ';
        height: 9px;
        position: absolute;
        right: 9px;
        top: 25px;
      }
      &::after {
        right: 5px;
      }
    `,gripIconDragging:(0,t.css)`
      &::before,
      &::after {
        border-right: 1px solid rgba(136, 0, 136, 0.5);
      }
    `});class ee extends n.PureComponent{constructor(tt){super(tt),this._setRootElm=nt=>{this._rootElm=nt},this._getDraggingBounds=()=>{if(!this._rootElm)throw new Error("invalid state");const{left:nt,width:ut}=this._rootElm.getBoundingClientRect(),{min:Ot,max:Wt}=this.props;return{clientXLeft:nt,width:ut,maxValue:Wt,minValue:Ot}},this._handleDragUpdate=({value:nt})=>{this.setState({dragPosition:nt})},this._handleDragEnd=({manager:nt,value:ut})=>{nt.resetBounds(),this.setState({dragPosition:null}),this.props.onChange(ut)},this._dragManager=new k.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleDragEnd,onDragMove:this._handleDragUpdate,onDragStart:this._handleDragUpdate}),this._rootElm=void 0,this.state={dragPosition:null}}componentWillUnmount(){this._dragManager.dispose()}render(){let tt,nt;const{position:ut,columnResizeHandleHeight:Ot}=this.props,{dragPosition:Wt}=this.state;tt=`${ut*100}%`;const Kt={left:tt};let tn=!1,un=!1;const yn=Q();if(this._dragManager.isDragging()&&this._rootElm&&Wt!=null){tn=Wt<ut,un=Wt>ut;const na=`${Math.min(ut,Wt)*100}%`,Qn=`calc(${(1-Math.max(ut,Wt))*100}% - 1px)`;nt={left:na,right:Qn}}else nt=Kt;nt.height=Ot;const $n=tn||un;return n.createElement("div",{className:yn.TimelineColumnResizer,ref:this._setRootElm,"data-testid":"TimelineColumnResizer"},n.createElement("div",{className:v()(yn.gripIcon,$n&&yn.gripIconDragging),style:Kt,"data-testid":"TimelineColumnResizer--gripIcon"}),n.createElement("div",{"aria-hidden":!0,className:v()(yn.dragger,$n&&yn.draggerDragging,un&&yn.draggerDraggingRight,tn&&yn.draggerDraggingLeft),onMouseDown:this._dragManager.handleMouseDown,style:nt,"data-testid":"TimelineColumnResizer--dragger"}))}}const ae=(0,r.N)(()=>({TimelineViewingLayer:(0,t.css)`
      label: TimelineViewingLayer;
      bottom: 0;
      cursor: vertical-text;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,TimelineViewingLayerCursorGuide:(0,t.css)`
      label: TimelineViewingLayerCursorGuide;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      width: 1px;
      background-color: red;
    `,TimelineViewingLayerDragged:(0,t.css)`
      label: TimelineViewingLayerDragged;
      position: absolute;
      top: 0;
      bottom: 0;
    `,TimelineViewingLayerDraggedDraggingLeft:(0,t.css)`
      label: TimelineViewingLayerDraggedDraggingLeft;
      border-left: 1px solid;
    `,TimelineViewingLayerDraggedDraggingRight:(0,t.css)`
      label: TimelineViewingLayerDraggedDraggingRight;
      border-right: 1px solid;
    `,TimelineViewingLayerDraggedShiftDrag:(0,t.css)`
      label: TimelineViewingLayerDraggedShiftDrag;
      background-color: rgba(68, 68, 255, 0.2);
      border-color: #44f;
    `,TimelineViewingLayerDraggedReframeDrag:(0,t.css)`
      label: TimelineViewingLayerDraggedReframeDrag;
      background-color: rgba(255, 68, 68, 0.2);
      border-color: #f44;
    `,TimelineViewingLayerFullOverlay:(0,t.css)`
      label: TimelineViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `}));function Z(qe){return Reflect.has(qe,"isOutOfView")}function ne(qe,tt,nt){return qe+nt*(tt-qe)}function q(qe,tt,nt){return(nt-qe)/(tt-qe)}function te(qe,tt){let[nt,ut]=qe<tt?[qe,tt]:[tt,qe];return nt>=1||ut<=0?{isOutOfView:!0}:(nt<0&&(nt=0),ut>1&&(ut=1),{isDraggingLeft:qe>tt,left:`${nt*100}%`,width:`${(ut-nt)*100}%`})}function re(qe,tt,nt,ut,Ot){const Wt=q(qe,tt,nt),Kt=q(qe,tt,ut),tn=te(Wt,Kt);if(Z(tn))return null;const{isDraggingLeft:un,left:yn,width:$n}=tn,na=ae(),Qn=(0,t.cx)({[na.TimelineViewingLayerDraggedDraggingRight]:!un,[na.TimelineViewingLayerDraggedReframeDrag]:!Ot,[na.TimelineViewingLayerDraggedShiftDrag]:Ot});return n.createElement("div",{className:(0,t.cx)(na.TimelineViewingLayerDragged,na.TimelineViewingLayerDraggedDraggingLeft,Qn),style:{left:yn,width:$n},"data-testid":"Dragged"})}class de extends n.PureComponent{constructor(tt){super(tt),this._setRoot=nt=>{this._root=nt},this._getDraggingBounds=()=>{if(!this._root)throw new Error("invalid state");const{left:nt,width:ut}=this._root.getBoundingClientRect();return{clientXLeft:nt,width:ut}},this._handleReframeMouseMove=({value:nt})=>{const[ut,Ot]=this.props.viewRangeTime.current,Wt=ne(ut,Ot,nt);this.props.updateNextViewRangeTime({cursor:Wt})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:void 0})},this._handleReframeDragUpdate=({value:nt})=>{const{current:ut,reframe:Ot}=this.props.viewRangeTime,[Wt,Kt]=ut,tn=ne(Wt,Kt,nt),yn={reframe:{anchor:Ot?Ot.anchor:tn,shift:tn}};this.props.updateNextViewRangeTime(yn)},this._handleReframeDragEnd=({manager:nt,value:ut})=>{const{current:Ot,reframe:Wt}=this.props.viewRangeTime,[Kt,tn]=Ot,un=ne(Kt,tn,ut),yn=Wt?Wt.anchor:un,[$n,na]=un<yn?[un,yn]:[yn,un];nt.resetBounds(),this.props.updateViewRangeTime($n,na,"timeline-header")},this._draggerReframe=new k.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseLeave:this._handleReframeMouseLeave,onMouseMove:this._handleReframeMouseMove}),this._root=void 0}UNSAFE_componentWillReceiveProps(tt){const{boundsInvalidator:nt}=this.props;nt!==tt.boundsInvalidator&&this._draggerReframe.resetBounds()}componentWillUnmount(){this._draggerReframe.dispose()}render(){const{viewRangeTime:tt}=this.props,{current:nt,cursor:ut,reframe:Ot,shiftEnd:Wt,shiftStart:Kt}=tt,[tn,un]=nt,yn=Ot!=null||Wt!=null||Kt!=null;let $n;!yn&&ut!=null&&ut>=tn&&ut<=un&&($n=`${q(tn,un,ut)*100}%`);const na=ae();return n.createElement("div",{"aria-hidden":!0,className:na.TimelineViewingLayer,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove,"data-testid":"TimelineViewingLayer"},$n!=null&&n.createElement("div",{className:na.TimelineViewingLayerCursorGuide,style:{left:$n},"data-testid":"TimelineViewingLayer--cursorGuide"}),Ot!=null&&re(tn,un,Ot.anchor,Ot.shift,!1),Wt!=null&&re(tn,un,un,Wt,!0),Kt!=null&&re(tn,un,tn,Kt,!0))}}const ie=qe=>({TimelineHeaderRow:(0,t.css)`
      label: TimelineHeaderRow;
      background: ${(0,u.R)(qe,"#ececec")};
      border-bottom: 1px solid ${(0,u.R)(qe,"#ccc")};
      height: 38px;
      line-height: 38px;
      width: 100%;
      z-index: 4;
      position: relative;
    `,TimelineHeaderRowTitle:(0,t.css)`
      label: TimelineHeaderRowTitle;
      flex: 1;
      overflow: hidden;
      margin: 0;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,TimelineHeaderWrapper:(0,t.css)`
      label: TimelineHeaderWrapper;
      align-items: center;
      display: flex;
      padding-left: ${qe.spacing(1)};
      padding-right: ${qe.spacing(1)};
    `});function ge(qe){const{duration:tt,nameColumnWidth:nt,numTicks:ut,onCollapseAll:Ot,onCollapseOne:Wt,onColummWidthChange:Kt,onExpandAll:tn,onExpandOne:un,updateViewRangeTime:yn,updateNextViewRangeTime:$n,viewRangeTime:na,columnResizeHandleHeight:Qn}=qe,[Jn,ba]=na.current,ha=(0,g.of)(ie);return n.createElement(V,{className:ha.TimelineHeaderRow,"data-testid":"TimelineHeaderRow"},n.createElement(V.Cell,{className:ha.TimelineHeaderWrapper,width:nt},n.createElement("h4",{className:ha.TimelineHeaderRowTitle},"Service & Operation"),n.createElement(j,{onCollapseAll:Ot,onExpandAll:tn,onCollapseOne:Wt,onExpandOne:un})),n.createElement(V.Cell,{width:1-nt},n.createElement(de,{boundsInvalidator:nt,updateNextViewRangeTime:$n,updateViewRangeTime:yn,viewRangeTime:na}),n.createElement(W,{numTicks:ut,startTime:Jn*tt,endTime:ba*tt,showLabels:!0})),n.createElement(ee,{columnResizeHandleHeight:Qn,position:nt,onChange:Kt,min:.2,max:.85}))}var ve=e(2543),ye=e(41811),pe=e(27746);const le="peer.service";var Me=e(30700);class De{constructor(tt){this.ys=[],this.heights=[],this.bufferLen=tt,this.dataLen=-1,this.lastI=-1}profileData(tt){tt!==this.dataLen&&(this.dataLen=tt,this.ys.length=tt,this.heights.length=tt,this.lastI>=tt&&(this.lastI=tt-1))}calcHeights(tt,nt,ut){ut!=null&&(this.lastI=ut);let Ot=tt+this.bufferLen;if(Ot<=this.lastI)return;Ot>=this.heights.length&&(Ot=this.heights.length-1);let Wt=this.lastI;for(this.lastI===-1&&(Wt=0,this.ys[0]=0);Wt<=Ot;){const Kt=this.heights[Wt]=nt(Wt);this.ys[Wt+1]=this.ys[Wt]+Kt,Wt++}this.lastI=Ot}calcYs(tt,nt){for(;(this.ys[this.lastI]==null||tt>this.ys[this.lastI])&&this.lastI<this.dataLen-1;)this.calcHeights(this.lastI,nt)}confirmHeight(tt,nt){let ut=tt;if(ut>this.lastI){this.calcHeights(ut,nt);return}const Ot=nt(ut);if(Ot===this.heights[ut])return;const Wt=Ot-this.heights[ut];for(this.heights[ut]=Ot;++ut<=this.lastI;)this.ys[ut]+=Wt;this.ys[this.lastI+1]!=null&&(this.ys[this.lastI+1]+=Wt)}findFloorIndex(tt,nt){this.calcYs(tt,nt);let ut=0,Ot=this.lastI;if(this.ys.length<2||tt<this.ys[1])return 0;if(tt>this.ys[Ot])return Ot;let Wt;for(;ut<Ot;)if(Wt=ut+.5*(Ot-ut)|0,tt>this.ys[Wt]){if(tt<=this.ys[Wt+1])return Wt;ut=Wt}else if(tt<this.ys[Wt]){if(tt>=this.ys[Wt-1])return Wt-1;Ot=Wt}else return Wt;throw new Error(`unable to find floor index for y=${tt}`)}getRowPosition(tt,nt){return this.confirmHeight(tt,nt),{height:this.heights[tt],y:this.ys[tt]}}getEstimatedHeight(){const tt=this.ys[this.lastI]+this.heights[this.lastI];return this.lastI>=this.dataLen-1?tt|0:tt/(this.lastI+1)*this.heights.length|0}}const Re=100;class me extends n.Component{constructor(tt){super(tt),this.getViewHeight=()=>this._viewHeight,this.getBottomVisibleIndex=()=>{const nt=this._scrollTop+this._viewHeight;return this._yPositions.findFloorIndex(nt,this._getHeight)},this.getTopVisibleIndex=()=>this._yPositions.findFloorIndex(this._scrollTop,this._getHeight),this.getRowPosition=nt=>this._yPositions.getRowPosition(nt,this._getHeight),this.scrollToIndex=(nt,ut)=>{const{scrollElement:Ot}=this.props,Wt=Ot?.getBoundingClientRect().top||0,tn=(Ot?.scrollTop||0)+(this._itemHolderElm?.getBoundingClientRect().top||0)-Wt,un=this.getRowPosition(nt).y;this.props.scrollElement?.scrollTo({top:un+tn-ut-80})},this._onScroll=()=>{this._isScrolledOrResized||(this._isScrolledOrResized=!0,window.requestAnimationFrame(this._positionList))},this._positionList=()=>{if(this._isScrolledOrResized=!1,!this._wrapperElm)return;this._calcViewIndexes();const nt=this.props.viewBufferMin>this._startIndex?0:this._startIndex-this.props.viewBufferMin,ut=this.props.viewBufferMin<this.props.dataLength-this._endIndex?this._endIndex+this.props.viewBufferMin:this.props.dataLength-1;(nt<this._startIndexDrawn||ut>this._endIndexDrawn)&&this.forceUpdate()},this._initWrapper=nt=>{this.props.windowScroller&&(this._wrapperElm=nt,nt&&(this._viewHeight=nt.clientHeight))},this._initItemHolder=nt=>{this._itemHolderElm=nt,this._scanItemHeights()},this._scanItemHeights=()=>{const nt=this.props.getIndexFromKey;if(!this._itemHolderElm)return;let ut=null,Ot=null,Wt=!1;const Kt=this._itemHolderElm.childNodes,tn=Kt.length;for(let un=0;un<tn;un++){const yn=Kt[un];if(yn instanceof HTMLElement){const $n=yn.getAttribute("data-item-key");if(!$n){console.warn("itemKey not found");continue}const Qn=(yn.firstElementChild||yn).clientHeight,Jn=this._knownHeights.get($n);Qn!==Jn&&(this._knownHeights.set($n,Qn),Wt?Ot=$n:(Wt=!0,ut=Ot=$n))}}if(ut!=null&&Ot!=null){const un=nt(ut),yn=Ot===ut?un:nt(Ot);this._yPositions.calcHeights(yn,this._getHeight,un),this.forceUpdate()}},this._getHeight=nt=>{const ut=this.props.getKeyFromIndex(nt),Ot=this._knownHeights.get(ut);return Ot!=null&&Ot===Ot?Ot:this.props.itemHeightGetter(nt,ut)},this._yPositions=new De(200),this._knownHeights=new Map,this._startIndexDrawn=2**20,this._endIndexDrawn=-(2**20),this._startIndex=0,this._endIndex=0,this._viewHeight=-1,this._scrollTop=-1,this._isScrolledOrResized=!1,this._htmlTopOffset=-1,this._windowScrollListenerAdded=!1,this._htmlElm=document.documentElement,this._wrapperElm=void 0,this._itemHolderElm=void 0}componentDidMount(){if(this.props.windowScroller){if(this._wrapperElm){const{top:tt}=this._wrapperElm.getBoundingClientRect();this._htmlTopOffset=tt+this._htmlElm.scrollTop}window.addEventListener("scroll",this._onScroll),this._windowScrollListenerAdded=!0}else this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll)}componentDidUpdate(tt){this._itemHolderElm&&this._scanItemHeights(),!this.props.windowScroller&&tt.scrollElement!==this.props.scrollElement&&(tt.scrollElement?.removeEventListener("scroll",this._onScroll),this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll))}componentWillUnmount(){this._windowScrollListenerAdded?window.removeEventListener("scroll",this._onScroll):this._wrapperElm?.removeEventListener("scroll",this._onScroll)}_isViewChanged(){if(!this._wrapperElm)return!1;const tt=this.props.windowScroller,nt=tt?this._htmlElm.clientHeight:this._wrapperElm.clientHeight,ut=tt?this._htmlElm.scrollTop:this._wrapperElm.scrollTop;return nt!==this._viewHeight||ut!==this._scrollTop}_calcViewIndexes(){if(this.props.windowScroller)this._viewHeight=window.innerHeight-this._htmlTopOffset,this._scrollTop=window.scrollY;else{if(!this._wrapperElm){this._viewHeight=-1,this._startIndex=0,this._endIndex=0;return}this._viewHeight=this._wrapperElm.clientHeight,this._scrollTop=this._wrapperElm.scrollTop}const nt=this._scrollTop,ut=this._scrollTop+this._viewHeight;this._startIndex=this._yPositions.findFloorIndex(nt,this._getHeight),this._endIndex=this._yPositions.findFloorIndex(ut,this._getHeight)}render(){const{dataLength:tt,getKeyFromIndex:nt,initialDraw:ut=Re,itemRenderer:Ot,viewBuffer:Wt,viewBufferMin:Kt}=this.props,tn=this._getHeight,un=[];let yn,$n;if(this._yPositions.profileData(tt),!this._wrapperElm)yn=0,$n=(ut<tt?ut:tt)-1;else{this._isViewChanged()&&this._calcViewIndexes();const Jn=Kt>this._startIndex?0:this._startIndex-Kt,ba=Kt<tt-this._endIndex?this._endIndex+Kt:tt-1;Jn<this._startIndexDrawn||ba>this._endIndexDrawn?(yn=Wt>this._startIndex?0:this._startIndex-Wt,$n=this._endIndex+Wt,$n>=tt&&($n=tt-1)):(yn=this._startIndexDrawn>tt-1?0:this._startIndexDrawn,$n=this._endIndexDrawn>tt-1?tt-1:this._endIndexDrawn)}this._yPositions.calcHeights($n,tn,yn||-1),this._startIndexDrawn=yn,this._endIndexDrawn=$n,un.length=$n-yn+1;for(let Jn=yn;Jn<=$n;Jn++){const{y:ba,height:ha}=this._yPositions.getRowPosition(Jn,tn),Aa={height:ha,top:ba,position:"absolute"},ma=nt(Jn),Ua={"data-item-key":ma};un.push(Ot(ma,Aa,Jn,Ua))}const na={style:{position:"relative"},ref:this._initWrapper};this.props.windowScroller||(na.onScroll=this._onScroll,na.style.height="100%",na.style.overflowY="auto");const Qn={position:"relative",height:this._yPositions.getEstimatedHeight()};return n.createElement("div",{...na,"data-testid":"ListView"},n.createElement("div",{style:Qn},n.createElement("div",{style:{position:"absolute",top:0,margin:0,padding:0},className:this.props.itemsWrapperClassName,ref:this._initItemHolder},un)))}}me.defaultProps={initialDraw:Re,itemsWrapperClassName:"",windowScroller:!1};var he=e(61653),Te=e(14578),Be=e(13544),we=e(56034),Ne=e(95868),Ze=e(13840);function st({children:qe,content:tt,overlayClassName:nt}){const ut=(0,n.useRef)(null);return n.createElement(Ne.I,{content:tt,hideAfter:300},(Ot,Wt,Kt)=>n.createElement(n.Fragment,null,ut.current&&n.createElement(Ze.A,{...Kt,referenceElement:ut.current,wrapperClassName:nt,onMouseLeave:Wt,onMouseEnter:Ot}),n.cloneElement(qe,{ref:ut,onMouseEnter:Ot,onMouseLeave:Wt})))}const Qe="label";var ke=e(55852);const je=()=>({CopyIcon:(0,t.css)`
      background-color: transparent;
      border: none;
      color: inherit;
      height: 100%;
      overflow: hidden;
      &:focus {
        background-color: rgba(255, 255, 255, 0.25);
        color: inherit;
      }
    `});function He(qe){const tt=(0,g.of)(je),[nt,ut]=(0,n.useState)(!1),Ot=()=>{navigator.clipboard.writeText(qe.copyText),ut(!0)};return n.createElement(we.m,{content:nt?"Copied":qe.tooltipTitle},n.createElement(ke.$n,{className:v()(tt.CopyIcon),type:"button",icon:qe.icon,onClick:Ot}))}He.defaultProps={icon:"copy",className:void 0};var Ge=e(72834),Oe=e.n(Ge);const Ke="copyIcon",Ee=qe=>({KeyValueTable:(0,t.css)`
      label: KeyValueTable;
      background: ${(0,u.R)(qe,"#fff")};
      border: 1px solid ${(0,u.R)(qe,"#ddd")};
      margin-bottom: 0.5rem;
      max-height: 450px;
      overflow: auto;
    `,table:(0,t.css)({width:"100%"}),body:(0,t.css)`
      label: body;
      vertical-align: baseline;
    `,row:(0,t.css)`
      label: row;
      & > td {
        padding: 0rem 0.5rem;
        height: 30px;
      }
      &:nth-child(2n) > td {
        background: ${(0,u.R)(qe,"#f5f5f5")};
      }
      &:not(:hover) .${Ke} {
        visibility: hidden;
      }
    `,keyColumn:(0,t.css)`
      label: keyColumn;
      color: ${(0,u.R)(qe,"#888")};
      white-space: pre;
      width: 125px;
    `,copyColumn:(0,t.css)`
      label: copyColumn;
      text-align: right;
    `,linkIcon:(0,t.css)`
      label: linkIcon;
      vertical-align: middle;
      font-weight: bold;
    `,jsonTable:(0,t.css)({display:"inline-block"})}),J=/^(\[|\{)/;function oe(qe){if(typeof qe=="string"&&J.test(qe))try{return JSON.parse(qe)}catch{}return qe}const ue=qe=>n.createElement("a",{href:qe.href,title:qe.title,target:"_blank",rel:"noopener noreferrer"},qe.children," ",n.createElement(Te.I,{name:"external-link-alt"}));ue.defaultProps={title:""};function be(qe){const{data:tt,linksGetter:nt}=qe,ut=(0,g.of)(Ee);return n.createElement("div",{className:v()(ut.KeyValueTable),"data-testid":"KeyValueTable"},n.createElement("table",{className:ut.table},n.createElement("tbody",{className:ut.body},tt.map((Ot,Wt)=>{const Kt={__html:Oe()(oe(Ot.value))},tn=n.createElement("div",{className:ut.jsonTable,dangerouslySetInnerHTML:Kt}),un=nt?nt(tt,Wt):null;let yn;return un&&un.length?yn=n.createElement("div",null,n.createElement(ue,{href:un[0].url,title:un[0].text},tn)):yn=tn,n.createElement("tr",{className:ut.row,key:`${Ot.key}-${Wt}`},n.createElement("td",{className:ut.keyColumn,"data-testid":"KeyValueTable--keyColumn"},Ot.key),n.createElement("td",null,yn),n.createElement("td",{className:ut.copyColumn},n.createElement(He,{className:Ke,copyText:JSON.stringify(Ot,null,2),tooltipTitle:"Copy JSON"})))}))))}var Le=e(11908),_e=e(72724),Ve=e(12131),We=e(14689),$e=e(25994),it=e(21744),at=e(98216),ht=e(28114);const ft=qe=>tt=>({LabeledList:(0,t.css)`
      label: LabeledList;
      list-style: none;
      margin: 0;
      padding: 0;
      ${qe&&`
        margin-right: -8px;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-end;
      `}
    `,LabeledListItem:(0,t.css)`
      label: LabeledListItem;
      display: inline-block;
      ${qe&&`
        border-right: 1px solid ${(0,u.R)(tt,"#ddd")};
        padding: 0 8px;
      `}
    `,LabeledListLabel:(0,t.css)`
      label: LabeledListLabel;
      color: ${tt.isLight?"#999":"#666"};
      margin-right: 0.25rem;
    `,LabeledListValue:(0,t.css)`
      label: LabeledListValue;
      ${!qe&&"margin-right: 0.55rem;"}
    `});function gt(qe){const{className:tt,divider:nt=!1,items:ut}=qe,Ot=(0,g.of)(ft(nt));return n.createElement("ul",{className:v()(Ot.LabeledList,tt)},ut.map(({key:Wt,label:Kt,value:tn})=>n.createElement("li",{className:Ot.LabeledListItem,key:`${Wt}`},n.createElement("span",{className:Ot.LabeledListLabel},Kt),n.createElement("strong",{className:Ot.LabeledListValue},tn))))}const Dt="kind",It="status",jt="status.message",Vt="library.name",_t="library.version",rt="trace.state",St="id";var pn=e(92102);function ct(qe){const{reference:tt,children:nt,createFocusSpanLink:ut}=qe,Ot=ut(tt.traceID,tt.spanID);return n.createElement("a",{href:Ot.href,target:Ot.target,rel:"noopener noreferrer",onClick:Ot.onClick?Wt=>{Wt.preventDefault(),Ot.onClick(Wt)}:void 0},nt)}const Ct=qe=>({AccordianReferenceItem:(0,t.css)`
      border-bottom: 1px solid ${(0,u.R)(qe,"#d8d8d8")};
    `,AccordianKeyValues:(0,t.css)`
      margin-left: 10px;
    `,AccordianReferences:(0,t.css)`
      label: AccordianReferences;
      border: 1px solid ${(0,u.R)(qe,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianReferencesHeader:(0,t.css)`
      label: AccordianReferencesHeader;
      background: ${(0,u.R)(qe,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,u.R)(qe,"#dadada")};
      }
    `,AccordianReferencesContent:(0,t.css)`
      label: AccordianReferencesContent;
      background: ${(0,u.R)(qe,"#f0f0f0")};
      border-top: 1px solid ${(0,u.R)(qe,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianReferencesFooter:(0,t.css)`
      label: AccordianReferencesFooter;
      color: ${(0,u.R)(qe,"#999")};
    `,AccordianKeyValuesItem:(0,t.css)({marginBottom:qe.spacing(.5)}),ReferencesList:(0,t.css)`
      background: #fff;
      border: 1px solid #ddd;
      margin-bottom: 0.7em;
      max-height: 450px;
      overflow: auto;
    `,list:(0,t.css)`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
      background: #fff;
    `,itemContent:(0,t.css)`
      padding: 0.25rem 0.5rem;
      display: flex;
      width: 100%;
      justify-content: space-between;
    `,item:(0,t.css)`
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `,debugInfo:(0,t.css)`
      letter-spacing: 0.25px;
      margin: 0.5em 0 0;
      flex-wrap: wrap;
      display: flex;
      justify-content: flex-end;
    `,debugLabel:(0,t.css)`
      margin: 0 5px 0 5px;
      &::before {
        color: #bbb;
        content: attr(data-label);
      }
    `,serviceName:(0,t.css)`
      margin-right: 8px;
    `,title:(0,t.css)`
      display: flex;
      align-items: center;
      gap: 4px;
    `});function Yt(qe){const{data:tt,createFocusSpanLink:nt,openedItems:ut,onItemToggle:Ot,interactive:Wt}=qe,Kt=(0,g.of)(Ct);return n.createElement("div",{className:Kt.AccordianReferencesContent},tt.map((tn,un)=>n.createElement("div",{className:un<tt.length-1?Kt.AccordianReferenceItem:void 0,key:un},n.createElement("div",{className:Kt.item,key:`${tn.spanID}`},n.createElement(ct,{reference:tn,createFocusSpanLink:nt},n.createElement("span",{className:Kt.itemContent},tn.span?n.createElement("span",null,n.createElement("span",{className:(0,t.cx)("span-svc-name",Kt.serviceName)},tn.span.process.serviceName),n.createElement("small",{className:"endpoint-name"},tn.span.operationName)):n.createElement("span",{className:(0,t.cx)("span-svc-name",Kt.title)},"View Linked Span ",n.createElement(Te.I,{name:"external-link-alt"})),n.createElement("small",{className:Kt.debugInfo},n.createElement("span",{className:Kt.debugLabel,"data-label":"TraceID:"},tn.traceID),n.createElement("span",{className:Kt.debugLabel,"data-label":"SpanID:"},tn.spanID))))),!!tn.tags?.length&&n.createElement("div",{className:Kt.AccordianKeyValues},n.createElement(Ca,{className:un<tt.length-1?Kt.AccordianKeyValuesItem:null,data:tn.tags||[],highContrast:!0,interactive:Wt,isOpen:ut?ut.has(tn):!1,label:"attributes",linksGetter:null,onToggle:Wt&&Ot?()=>Ot(tn):null})))))}const cn=({data:qe,interactive:tt=!0,isOpen:nt,onToggle:ut,onItemToggle:Ot,openedItems:Wt,createFocusSpanLink:Kt})=>{const tn=!Array.isArray(qe)||!qe.length;let un=null,yn="span",$n=null;tt&&(un=nt?n.createElement(Te.I,{name:"angle-down",className:ta}):n.createElement(Te.I,{name:"angle-right",className:ta}),yn="a",$n={"aria-checked":nt,onClick:tn?null:ut,role:"switch"});const na=(0,g.of)(Ct);return n.createElement("div",{className:na.AccordianReferences},n.createElement(yn,{className:na.AccordianReferencesHeader,...$n},un,n.createElement("strong",null,n.createElement("span",null,"References"))," ","(",qe.length,")"),nt&&n.createElement(Yt,{data:qe,openedItems:Wt,createFocusSpanLink:Kt,onItemToggle:Ot,interactive:tt}))},vn=n.memo(cn),rn=()=>({TextList:(0,t.css)`
      max-height: 450px;
      overflow: auto;
    `,List:(0,t.css)`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
    `,item:(0,t.css)`
      padding: 0.25rem 0.5rem;
      vertical-align: top;
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `});function en(qe){const{data:tt}=qe,nt=(0,g.of)(rn);return n.createElement("div",{className:v()(nt.TextList),"data-testid":"TextList"},n.createElement("ul",{className:nt.List},tt.map((ut,Ot)=>n.createElement("li",{className:nt.item,key:`${Ot}`},ut))))}const mn=qe=>({header:(0,t.css)`
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,u.R)(qe,"#e8e8e8")};
      }
    `});function Un({data:qe}){return n.createElement(en,{data:qe})}function fn(qe){const{className:tt,data:nt,headerClassName:ut,interactive:Ot,isOpen:Wt,label:Kt,onToggle:tn,TextComponent:un=Un}=qe,yn=!Array.isArray(nt)||!nt.length,$n=(0,g.of)(Xn),na=v()(ta,{[$n.emptyIcon]:yn});let Qn=null,Jn=null;Ot&&(Qn=Wt?n.createElement(Te.I,{name:"angle-down",className:na}):n.createElement(Te.I,{name:"angle-right",className:na}),Jn={"aria-checked":Wt,onClick:yn?null:tn,role:"switch"});const ba=(0,g.of)(mn);return n.createElement("div",{className:tt||""},n.createElement("div",{className:v()(ba.header,ut),...Jn,"data-testid":"AccordianText--header"},Qn,n.createElement("strong",null,Kt)," (",nt.length,")"),Wt&&n.createElement(un,{data:nt}))}fn.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};var ca=e(49185),Lt=e(75505),qt=e(47232),hn=e(41987),Cn=e(85194),gn=e(26657),xn=e(72574),Tn=e(31193);function Wn(qe){const{span:tt,traceToProfilesOptions:nt,timeZone:ut,traceFlameGraphs:Ot,setTraceFlameGraphs:Wt,setRedrawListView:Kt,traceDuration:tn,traceName:un}=qe,[yn,{height:$n}]=(0,ca.A)(),na=(0,g.of)(Sn),Qn=tt.tags.filter(ma=>ma.key===ht.QW),Jn=Qn.length>0?Qn[0].value:void 0,ba=(0,n.useCallback)(()=>{const ma=Math.floor(tt.startTime/1e3)-3e4,Ua=(tt.startTime+tt.duration)/1e3+3e4,Ja=(0,qt.KQ)(Ua),da=(0,qt.KQ)(ma);return{from:da,to:Ja,raw:{from:da,to:Ja}}},[tt.duration,tt.startTime]),ha=async(ma,Ua)=>{const Ja=await(0,Tn.tR)().get(Ua);if(Ja instanceof gn.iy){const Za=(await(0,Lt.s)(Ja.query(ma))).data.find(es=>es.name==="response");if(Za&&Za.length>1)return Za}},Aa=(0,n.useCallback)(async(ma,Ua,Ja)=>{let da="{}";if(Ua.customQuery&&Ua.query){const Os={...(0,ht.gt)(tn,un,Ja.traceID),...(0,ht.hv)(Ja),...(0,ht.Cr)(Ja,Ua)};da=(0,xn.w)().replace(Ua.query,Os)}else{const Os=Ua.tags&&Ua.tags.length>0?Ua.tags:ht.i0;da=`{${(0,ht._o)(Ja,Os)}}`}const Za={requestId:"span-flamegraph-requestId",interval:"2s",intervalMs:2e3,range:ba(),scopedVars:{},app:hn.Jk.Unknown,timezone:ut,startTime:Ja.startTime,targets:[{labelSelector:da,groupBy:[],profileTypeId:Ua.profileTypeId??"",queryType:"profile",spanSelector:[Jn],refId:"span-flamegraph-refId",datasource:{type:ma.type,uid:ma.uid}}]},es=await ha(Za,ma.uid);es&&es.length>0&&Wt({...Ot,[Jn]:es})},[ba,Jn,Wt,ut,tn,Ot,un]);return(0,n.useEffect)(()=>{if(!Object.keys(Ot).includes(Jn)){let ma;nt&&nt?.datasourceUid&&(ma=(0,Tn.tR)().getInstanceSettings(nt.datasourceUid)),nt&&ma&&Aa(ma,nt,tt)}},[Wt,tt,Ot,nt,ba,ut,Aa,Jn]),(0,n.useEffect)(()=>{Kt({})},[$n,Kt]),Ot[Jn]?n.createElement("div",{className:na.flameGraph,ref:yn},n.createElement("div",{className:na.flameGraphTitle},"Flame graph"),n.createElement(Cn.A,{data:Ot[Jn],getTheme:()=>s.$.theme2,showFlameGraphOnly:!0,disableCollapsing:!0})):n.createElement(n.Fragment,null)}const Sn=()=>({flameGraph:(0,t.css)({label:"flameGraphInSpan",margin:"5px"}),flameGraphTitle:(0,t.css)({label:"flameGraphTitleInSpan",marginBottom:"5px",fontWeight:"bold"})}),An=qe=>({header:(0,t.css)`
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0 1rem;
      margin-bottom: 0.25rem;
    `,listWrapper:(0,t.css)`
      overflow: hidden;
    `,list:(0,t.css)({textAlign:"right"}),operationName:(0,t.css)({margin:0}),debugInfo:(0,t.css)`
      label: debugInfo;
      display: block;
      letter-spacing: 0.25px;
      margin: 0.5em 0 -0.75em;
      text-align: right;
    `,debugLabel:(0,t.css)`
      label: debugLabel;
      &::before {
        color: ${(0,u.R)(qe,"#bbb")};
        content: attr(data-label);
      }
    `,debugValue:(0,t.css)`
      label: debugValue;
      background-color: inherit;
      border: none;
      color: ${(0,u.R)(qe,"#888")};
      cursor: pointer;
      &:hover {
        color: ${(0,u.R)(qe,"#333")};
      }
    `,AccordianWarnings:(0,t.css)`
      label: AccordianWarnings;
      background: ${(0,u.R)(qe,"#fafafa")};
      border: 1px solid ${(0,u.R)(qe,"#e4e4e4")};
      margin-bottom: 0.25rem;
    `,AccordianWarningsHeader:(0,t.css)`
      label: AccordianWarningsHeader;
      background: ${(0,u.R)(qe,"#fff7e6")};
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,u.R)(qe,"#ffe7ba")};
      }
    `,AccordianWarningsHeaderOpen:(0,t.css)`
      label: AccordianWarningsHeaderOpen;
      border-bottom: 1px solid ${(0,u.R)(qe,"#e8e8e8")};
    `,AccordianWarningsLabel:(0,t.css)`
      label: AccordianWarningsLabel;
      color: ${(0,u.R)(qe,"#d36c08")};
    `,AccordianKeyValuesItem:(0,t.css)({marginBottom:qe.spacing(.5)}),Textarea:(0,t.css)`
      word-break: break-all;
      white-space: pre;
    `,LinkIcon:(0,t.css)`
      font-size: 1.5em;
    `}),ta=(0,t.css)({margin:"-0.2rem 0.25rem 0 0"});function fa(qe){const{detailState:tt,linksGetter:nt,logItemToggle:ut,logsToggle:Ot,processToggle:Wt,span:Kt,tagsToggle:tn,traceStartTime:un,traceDuration:yn,traceName:$n,warningsToggle:na,stackTracesToggle:Qn,referencesToggle:Jn,referenceItemToggle:ba,createSpanLink:ha,createFocusSpanLink:Aa,datasourceType:ma,traceFlameGraphs:Ua,setTraceFlameGraphs:Ja,traceToProfilesOptions:da,setRedrawListView:Za}=qe,{isTagsOpen:es,isProcessOpen:Os,logs:Rs,isWarningsOpen:Xs,references:Ds,isStackTracesOpen:Br}=tt,{operationName:mr,process:Zs,duration:sr,relativeStartTime:Ur,startTime:Cr,traceID:Gr,spanID:as,logs:qn,tags:pa,warnings:Wa,references:os,stackTraces:Nr}=Kt,{timeZone:js}=qe;let vr=[{key:"svc",label:"Service:",value:Zs.serviceName},{key:"duration",label:"Duration:",value:(0,E.a3)(sr)},{key:"start",label:"Start Time:",value:(0,E.a3)(Ur)+la(Cr,js)},...Kt.childSpanCount>0?[{key:"child_count",label:"Child Count:",value:Kt.childSpanCount}]:[]];const ls=(0,g.of)(An);Kt.kind&&vr.push({key:Dt,label:"Kind:",value:Kt.kind}),Kt.statusCode!==void 0&&vr.push({key:It,label:"Status:",value:Le.s[Kt.statusCode].toLowerCase()}),Kt.statusMessage&&vr.push({key:jt,label:"Status Message:",value:Kt.statusMessage}),Kt.instrumentationLibraryName&&vr.push({key:Vt,label:"Library Name:",value:Kt.instrumentationLibraryName}),Kt.instrumentationLibraryVersion&&vr.push({key:_t,label:"Library Version:",value:Kt.instrumentationLibraryVersion}),Kt.traceState&&vr.push({key:rt,label:"Trace State:",value:Kt.traceState});const ho=(gs,br,To,Mo)=>n.createElement(We.R,{link:{...gs,title:To,target:"_blank",origin:gs.field,onClick:ri=>{(0,o.rR)("grafana_traces_trace_view_span_link_clicked",{datasourceType:ma,grafana_version:s.$.buildInfo.version,type:br,location:"spanDetails"}),gs.onClick?gs.onClick?.(ri):Ve.Ny.push(gs.href)}},buttonProps:{icon:Mo}});let $s=null,zi=null;if(ha){const gs=ha(Kt),br=gs?.filter(Mo=>Mo.type===pn.N.Logs);gs&&br&&br.length>0&&($s=ho(br[0],pn.N.Logs,"Logs for this span","gf-logs"));const To=gs?.filter(Mo=>Mo.type===pn.N.Profiles&&Mo.title===at.cd);gs&&To&&To.length>0&&(zi=ho(To[0],pn.N.Profiles,"Profiles for this span","link"))}const wo=Aa(Gr,as);return n.createElement("div",{"data-testid":"span-detail-component"},n.createElement("div",{className:ls.header},n.createElement("h2",{className:ls.operationName},mr),n.createElement("div",{className:ls.listWrapper},n.createElement(gt,{className:ls.list,divider:!0,items:vr}))),n.createElement("span",{style:{marginRight:"10px"}},$s),zi,n.createElement($e.c,{spacing:1}),n.createElement("div",null,n.createElement("div",null,n.createElement(Ca,{data:pa,label:"Span Attributes",linksGetter:nt,isOpen:es,onToggle:()=>tn(as)}),Zs.tags&&n.createElement(Ca,{className:ls.AccordianKeyValuesItem,data:Zs.tags,label:"Resource Attributes",linksGetter:nt,isOpen:Os,onToggle:()=>Wt(as)})),qn&&qn.length>0&&n.createElement(aa,{linksGetter:nt,logs:qn,isOpen:Rs.isOpen,openedItems:Rs.openedItems,onToggle:()=>Ot(as),onItemToggle:gs=>ut(as,gs),timestamp:un}),Wa&&Wa.length>0&&n.createElement(fn,{className:ls.AccordianWarnings,headerClassName:ls.AccordianWarningsHeader,label:n.createElement("span",{className:ls.AccordianWarningsLabel},"Warnings"),data:Wa,isOpen:Xs,onToggle:()=>na(as)}),Nr?.length?n.createElement(fn,{label:"Stack trace",data:Nr,isOpen:Br,TextComponent:gs=>{let br;return gs.data?.length>1?br=gs.data.map((To,Mo)=>`StackTrace ${Mo+1}:
${To}`).join(`
`):br=gs.data?.[0],n.createElement(it.f,{className:ls.Textarea,style:{cursor:"unset"},readOnly:!0,cols:10,rows:10,value:br})},onToggle:()=>Qn(as)}):null,os&&os.length>0&&(os.length>1||os[0].refType!=="CHILD_OF")&&n.createElement(vn,{data:os,isOpen:Ds.isOpen,openedItems:Ds.openedItems,onToggle:()=>Jn(as),onItemToggle:gs=>ba(as,gs),createFocusSpanLink:Aa}),Kt.tags.some(gs=>gs.key===ht.QW)&&n.createElement(Wn,{span:Kt,timeZone:js,traceFlameGraphs:Ua,setTraceFlameGraphs:Ja,traceToProfilesOptions:da,setRedrawListView:Za,traceDuration:yn,traceName:$n}),n.createElement("small",{className:ls.debugInfo},n.createElement("a",{...wo,onClick:gs=>{wo.onClick&&gs.button===0&&(!gs.currentTarget.target||gs.currentTarget.target==="_self")&&!(gs.metaKey||gs.altKey||gs.ctrlKey||gs.shiftKey)&&(gs.preventDefault(),wo.onClick(gs))}},n.createElement(Te.I,{name:"link",className:v()(ta,ls.LinkIcon)})),n.createElement("span",{className:ls.debugLabel,"data-label":"SpanID:"})," ",as)))}const la=(qe,tt)=>{const nt=(0,_e.LE)(qe/1e3,{timeZone:tt,defaultWithMS:!0}),ut=nt.split(" ");return` (${ut[1]?ut[1]:nt})`},Xn=qe=>({container:(0,t.css)({textOverflow:"ellipsis"}),header:(0,t.css)`
      label: header;
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,u.R)(qe,"#e8e8e8")};
      }
    `,headerEmpty:(0,t.css)`
      label: headerEmpty;
      background: none;
      cursor: initial;
    `,headerHighContrast:(0,t.css)`
      label: headerHighContrast;
      &:hover {
        background: ${(0,u.R)(qe,"#ddd")};
      }
    `,emptyIcon:(0,t.css)`
      label: emptyIcon;
      color: ${(0,u.R)(qe,"#aaa")};
    `,summary:(0,t.css)`
      label: summary;
      display: inline;
      list-style: none;
      padding: 0;
    `,summaryItem:(0,t.css)`
      label: summaryItem;
      display: inline;
      margin-left: 0.7em;
      padding-right: 0.5rem;
      border-right: 1px solid ${(0,u.R)(qe,"#ddd")};
      &:last-child {
        padding-right: 0;
        border-right: none;
      }
    `,summaryLabel:(0,t.css)`
      label: summaryLabel;
      color: ${(0,u.R)(qe,"#777")};
    `,summaryDelim:(0,t.css)`
      label: summaryDelim;
      color: ${(0,u.R)(qe,"#bbb")};
      padding: 0 0.2em;
    `});function Ea(qe){const{data:tt}=qe,nt=(0,g.of)(Xn);return!Array.isArray(tt)||!tt.length?null:n.createElement("ul",{className:nt.summary},tt.map((ut,Ot)=>n.createElement("li",{className:nt.summaryItem,key:`${ut.key}-${Ot}`},n.createElement("span",{className:nt.summaryLabel},ut.key),n.createElement("span",{className:nt.summaryDelim},"="),String(ut.value))))}Ea.defaultProps={data:null};function Ca(qe){const{className:tt,data:nt,highContrast:ut,interactive:Ot,isOpen:Wt,label:Kt,linksGetter:tn,onToggle:un}=qe,yn=!Array.isArray(nt)||!nt.length,$n=(0,g.of)(Xn),na=v()(ta,{[$n.emptyIcon]:yn});let Qn=null,Jn=null;return Ot&&(Qn=Wt?n.createElement(Te.I,{name:"angle-down",className:na}):n.createElement(Te.I,{name:"angle-right",className:na}),Jn={"aria-checked":Wt,onClick:yn?null:un,role:"switch"}),n.createElement("div",{className:v()(tt,$n.container)},n.createElement("div",{className:v()($n.header,{[$n.headerEmpty]:yn,[$n.headerHighContrast]:ut&&!yn}),...Jn,"data-testid":"AccordianKeyValues--header"},Qn,n.createElement("strong",{"data-test":Qe},Kt,Wt||":"),!Wt&&n.createElement(Ea,{data:nt})),Wt&&n.createElement(be,{data:nt,linksGetter:tn}))}Ca.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const Sa=qe=>({AccordianLogs:(0,t.css)`
      label: AccordianLogs;
      border: 1px solid ${(0,u.R)(qe,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianLogsHeader:(0,t.css)`
      label: AccordianLogsHeader;
      background: ${(0,u.R)(qe,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,u.R)(qe,"#dadada")};
      }
    `,AccordianLogsContent:(0,t.css)`
      label: AccordianLogsContent;
      background: ${(0,u.R)(qe,"#f0f0f0")};
      border-top: 1px solid ${(0,u.R)(qe,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianLogsFooter:(0,t.css)`
      label: AccordianLogsFooter;
      color: ${(0,u.R)(qe,"#999")};
    `,AccordianKeyValuesItem:(0,t.css)({marginBottom:qe.spacing(.5)})});function aa(qe){const{interactive:tt,isOpen:nt,linksGetter:ut,logs:Ot,openedItems:Wt,onItemToggle:Kt,onToggle:tn,timestamp:un}=qe;let yn=null,$n="span",na=null;tt&&(yn=nt?n.createElement(Te.I,{name:"angle-down",className:ta}):n.createElement(Te.I,{name:"angle-right",className:"u-align-icon"}),$n="a",na={"aria-checked":nt,onClick:tn,role:"switch"});const Qn=(0,g.of)(Sa);return n.createElement("div",{className:Qn.AccordianLogs},n.createElement($n,{className:Qn.AccordianLogsHeader,...na},yn," ",n.createElement("strong",null,"Events")," (",Ot.length,")"),nt&&n.createElement("div",{className:Qn.AccordianLogsContent},(0,ve.sortBy)(Ot,"timestamp").map((Jn,ba)=>n.createElement(Ca,{key:`${Jn.timestamp}-${ba}`,className:ba<Ot.length-1?Qn.AccordianKeyValuesItem:null,data:Jn.fields||[],highContrast:!0,interactive:tt,isOpen:Wt?Wt.has(Jn):!1,label:`${(0,E.a3)(Jn.timestamp-un)}`,linksGetter:ut,onToggle:tt&&Kt?()=>Kt(Jn):null})),n.createElement("small",{className:Qn.AccordianLogsFooter},"Log timestamps are relative to the start time of the full trace.")))}aa.defaultProps={interactive:!0,linksGetter:void 0,onItemToggle:void 0,onToggle:void 0,openedItems:void 0};const Yn=qe=>({wrapper:(0,t.css)({label:"wrapper",bottom:0,left:0,position:"absolute",right:0,top:0,overflow:"hidden",zIndex:0}),bar:(0,t.css)({label:"bar",borderRadius:qe.shape.radius.default,minWidth:"2px",position:"absolute",height:"36%",top:"32%"}),rpc:(0,t.css)({label:"rpc",position:"absolute",top:"35%",bottom:"35%",zIndex:1}),label:(0,t.css)({label:"label",color:"#aaa",fontSize:"12px",fontFamily:"'Helvetica Neue', Helvetica, Arial, sans - serif",lineHeight:"1em",whiteSpace:"nowrap",padding:"0 0.5em",position:"absolute"}),logMarker:(0,t.css)({label:"logMarker",backgroundColor:(0,u.R)(qe,"#2c3235"),cursor:"pointer",height:"60%",minWidth:"1px",position:"absolute",top:"20%","&:hover":{backgroundColor:(0,u.R)(qe,"#464c54")},"&::before, &::after":{content:"''",position:"absolute",top:0,bottom:0,right:0,border:"1px solid transparent"},"&::after":{left:0}}),criticalPath:(0,t.css)({position:"absolute",top:"45%",height:"11%",zIndex:2,overflow:"hidden",background:(0,u.R)(qe,"#f1f1f1"),borderLeft:`1px solid ${(0,u.R)(qe,"#2c3235")}`,borderRight:`1px solid ${(0,u.R)(qe,"#2c3235")}`})});function za(qe){return`${(qe*100).toFixed(1)}%`}function ns(qe){return`${qe*100}%`}function ps({criticalPath:qe,viewEnd:tt,viewStart:nt,getViewedBounds:ut,color:Ot,shortLabel:Wt,longLabel:Kt,onClick:tn,rpc:un,traceStartTime:yn,span:$n,className:na,labelClassName:Qn}){const[Jn,ba]=(0,n.useState)(Wt),ha=()=>ba(Wt),Aa=()=>ba(Kt),ma=(0,ve.groupBy)($n.logs,Ja=>{const da=ut(Ja.timestamp,Ja.timestamp).start;return za(Math.round(da*500)/500)}),Ua=(0,g.of)(Yn);return n.createElement("div",{className:v()(Ua.wrapper,na),onBlur:ha,onClick:tn,onFocus:Aa,onMouseOut:ha,onMouseOver:Aa,"aria-hidden":!0,"data-testid":Be.Tp.components.TraceViewer.spanBar},n.createElement("div",{"aria-label":Jn,className:v()(Ua.bar),style:{background:Ot,left:za(nt),width:za(tt-nt)}},n.createElement("div",{className:v()(Ua.label,Qn),"data-testid":"SpanBar--label"},Jn)),n.createElement("div",null,Object.keys(ma).map(Ja=>n.createElement(st,{key:Ja,content:n.createElement(aa,{interactive:!1,isOpen:!0,logs:ma[Ja],timestamp:yn})},n.createElement("div",{"data-testid":"SpanBar--logMarker",className:v()(Ua.logMarker),style:{left:Ja}})))),un&&n.createElement("div",{className:v()(Ua.rpc),style:{background:un.color,left:za(un.viewStart),width:za(un.viewEnd-un.viewStart)}}),qe?.map((Ja,da)=>{const Za=ut(Ja.section_start,Ja.section_end),es=Za.start,Os=Za.end,Rs=`${Ja.spanId}-${da}`;return n.createElement(we.m,{key:Rs,placement:"top",content:n.createElement("div",null,"A segment on the ",n.createElement("em",null,"critical path")," of the overall trace / request / workflow.")},n.createElement("div",{"data-testid":"SpanBar--criticalPath",className:Ua.criticalPath,style:{left:ns(es),width:ns(Os-es)}}))}))}const Cs=n.memo(ps);var Fs=e(64539),cs=e(28122);const hs=(qe,tt,nt,ut)=>(qe.sort(function(Ot,Wt){return(Ot.title||"link").toLowerCase().localeCompare((Wt.title||"link").toLowerCase())}),qe.map((Ot,Wt)=>n.createElement(Fs.D,{key:Wt,label:Ot.title||"Link",onClick:Ot.onClick?Kt=>{(0,o.rR)("grafana_traces_trace_view_span_link_clicked",{datasourceType:ut,grafana_version:s.$.buildInfo.version,type:Ot.type,location:"menu"}),Kt?.preventDefault(),Ot.onClick(Kt),nt()}:void 0,url:Ot.href,className:tt.menuItem}))),rr=({links:qe,datasourceType:tt,color:nt})=>{const ut=(0,g.of)(()=>ss(nt)),[Ot,Wt]=(0,n.useState)(!1),[Kt,tn]=(0,n.useState)({x:0,y:0}),un=()=>Wt(!1);return n.createElement("div",{"data-testid":"SpanLinksMenu",className:ut.wrapper},n.createElement("button",{onClick:yn=>{Wt(!0),tn({x:yn.pageX,y:yn.pageY})},className:ut.button},n.createElement(Te.I,{name:"link",className:ut.icon})),Ot?n.createElement(cs.t,{onClose:()=>Wt(!1),renderMenuItems:()=>hs(qe,ut,un,tt),focusOnOpen:!1,x:Kt.x,y:Kt.y}):null)},ss=qe=>({wrapper:(0,t.css)`
      border: none;
      background: ${qe}10;
      border-bottom: 1px solid ${qe}CF;
      padding-right: 4px;
    `,button:(0,t.css)`
      background: transparent;
      border: none;
      padding: 0;
    `,icon:(0,t.css)`
      background: transparent;
      border: none;
      padding: 0;
    `,menuItem:(0,t.css)`
      max-width: 60ch;
      overflow: hidden;
    `});function bs(qe){return(0,ve.get)((0,ve.find)(qe.references,({span:tt,refType:nt})=>tt&&tt.spanID&&(nt==="CHILD_OF"||nt==="FOLLOWS_FROM")),"span")}function tr(qe){const tt=[];if(!qe)return tt;let nt=bs(qe);for(;nt;)tt.push(nt.spanID),nt=bs(nt);return tt}const or=(0,r.N)(qe=>({SpanTreeOffset:(0,t.css)`
      label: SpanTreeOffset;
      color: ${(0,u.R)(qe,"#000")};
      position: relative;
    `,SpanTreeOffsetParent:(0,t.css)`
      label: SpanTreeOffsetParent;
      &:hover {
        cursor: pointer;
      }
    `,indentGuide:(0,t.css)`
      label: indentGuide;
      /* The size of the indentGuide is based off of the iconWrapper */
      padding-right: 1rem;
      height: 100%;
      display: inline-flex;
      transition: padding 300ms ease-out;
      &::before {
        content: '';
        padding-left: 1px;
        background-color: ${(0,u.R)(qe,"lightgrey")};
      }
    `,indentGuideActive:(0,t.css)`
      label: indentGuideActive;
      &::before {
        background-color: ${(0,u.R)(qe,"#777")};
      }
    `,indentGuideThin:(0,t.css)`
      padding-right: 0.3rem;
    `,iconWrapper:(0,t.css)`
      label: iconWrapper;
      position: absolute;
      right: 0;
    `}));class vs extends n.PureComponent{constructor(tt){super(tt),this.handleMouseLeave=(nt,ut)=>{(!(nt.relatedTarget instanceof HTMLSpanElement)||(0,ve.get)(nt,"relatedTarget.dataset.ancestorId")!==ut)&&this.props.removeHoverIndentGuideId(ut)},this.handleMouseEnter=(nt,ut)=>{(!(nt.relatedTarget instanceof HTMLSpanElement)||(0,ve.get)(nt,"relatedTarget.dataset.ancestorId")!==ut)&&this.props.addHoverIndentGuideId(ut)},this.ancestorIds=tr(tt.span),this.ancestorIds.push("root"),this.ancestorIds.reverse()}render(){const{childrenVisible:tt,onClick:nt,showChildrenIcon:ut,span:Ot,theme:Wt,visibleSpanIds:Kt}=this.props,{hasChildren:tn,spanID:un}=Ot,yn=tn?{onClick:nt,role:"switch","aria-checked":tt}:null,$n=ut&&tn&&(tt?n.createElement(Te.I,{name:"angle-down","data-testid":"icon-arrow-down",size:"sm"}):n.createElement(Te.I,{name:"angle-right","data-testid":"icon-arrow-right",size:"sm"})),na=or(Wt);return n.createElement("span",{className:v()(na.SpanTreeOffset,{[na.SpanTreeOffsetParent]:tn}),...yn},this.ancestorIds.map((Qn,Jn)=>n.createElement("span",{key:Qn,className:v()(na.indentGuide,{[na.indentGuideActive]:this.props.hoverIndentGuideIds.has(Qn),[na.indentGuideThin]:Jn!==this.ancestorIds.length-1&&Qn!=="root"&&!Kt.includes(Qn)}),"data-ancestor-id":Qn,"data-testid":"SpanTreeOffset--indentGuide",onMouseEnter:ba=>this.handleMouseEnter(ba,Qn),onMouseLeave:ba=>this.handleMouseLeave(ba,Qn)})),$n&&n.createElement("span",{className:na.iconWrapper,onMouseEnter:Qn=>this.handleMouseEnter(Qn,un),onMouseLeave:Qn=>this.handleMouseLeave(Qn,un),"data-testid":"icon-wrapper"},$n))}}vs.displayName="UnthemedSpanTreeOffset",vs.defaultProps={childrenVisible:!1,showChildrenIcon:!0};const hr=(0,g.cV)(vs),_s="spanBar",Ya="spanBarLabel",Ws="nameWrapper",Bs="nameWrapperMatchingFilter",Ks="jaegerView",Vr="nameColumn",Js=(0,r.N)((qe,tt)=>{const nt={label:"flash",flash:(0,t.keyframes)`
    from {
      background-color: ${(0,u.R)(qe,"#68b9ff")};
    }
    to {
      background-color: 'default';
    }
  `},ut=tt?"":(0,u.R)(qe,"#fffce4");return{nameWrapper:(0,t.css)`
      label: nameWrapper;
      line-height: 27px;
      overflow: hidden;
      display: flex;
    `,nameWrapperMatchingFilter:(0,t.css)`
      label: nameWrapperMatchingFilter;
      background-color: ${ut};
    `,nameColumn:(0,t.css)`
      label: nameColumn;
      position: relative;
      white-space: nowrap;
      z-index: 1;
      &:hover {
        z-index: 1;
      }
    `,endpointName:(0,t.css)`
      label: endpointName;
      color: ${(0,u.R)(qe,"#484848")};
      font-size: 0.9em;
    `,view:(0,t.css)`
      label: view;
      position: relative;
    `,viewExpanded:(0,t.css)`
      label: viewExpanded;
      background: ${(0,u.R)(qe,"#f8f8f8")};
      outline: 1px solid ${(0,u.R)(qe,"#ddd")};
    `,viewExpandedAndMatchingFilter:(0,t.css)`
      label: viewExpandedAndMatchingFilter;
      background: ${(0,u.R)(qe,"#fff3d7")};
      outline: 1px solid ${(0,u.R)(qe,"#ddd")};
    `,row:(0,t.css)`
      label: row;
      font-size: 0.9em;
      &:hover .${_s} {
        opacity: 1;
      }
      &:hover .${Ya} {
        color: ${(0,u.R)(qe,"#000")};
      }
      &:hover .${Ws} {
        background: #f8f8f8;
        background: linear-gradient(
          90deg,
          ${(0,u.R)(qe,"#fafafa")},
          ${(0,u.R)(qe,"#f8f8f8")} 75%,
          ${(0,u.R)(qe,"#eee")}
        );
      }
      &:hover .${Ks} {
        background-color: ${(0,u.R)(qe,"#f5f5f5")};
        outline: 1px solid ${(0,u.R)(qe,"#ddd")};
      }
    `,rowClippingLeft:(0,t.css)`
      label: rowClippingLeft;
      & .${Vr}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to right,
          ${(0,u.R)(qe,"rgba(25, 25, 25, 0.25)")},
          ${(0,u.R)(qe,"rgba(32, 32, 32, 0)")}
        );
        left: 100%;
        z-index: -1;
      }
    `,rowClippingRight:(0,t.css)`
      label: rowClippingRight;
      & .${Ks}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to left,
          ${(0,u.R)(qe,"rgba(25, 25, 25, 0.25)")},
          ${(0,u.R)(qe,"rgba(25, 25, 25, 0.25)")}
        );
        right: 0%;
        z-index: 1;
      }
    `,rowExpanded:(0,t.css)`
      label: rowExpanded;
      & .${_s} {
        opacity: 1;
      }
      & .${Ya} {
        color: ${(0,u.R)(qe,"#000")};
      }
      & .${Ws}, &:hover .${Ws} {
        background: ${(0,u.R)(qe,"#f0f0f0")};
        box-shadow: 0 1px 0 ${(0,u.R)(qe,"#ddd")};
      }
      & .${Bs} {
        background: ${(0,u.R)(qe,"#fff3d7")};
      }
      &:hover .${Ks} {
        background: ${(0,u.R)(qe,"#eee")};
      }
    `,rowMatchingFilter:(0,t.css)`
      label: rowMatchingFilter;
      // background-color: ${(0,u.R)(qe,"#fffbde")};
      &:hover .${Ws} {
        background: linear-gradient(
          90deg,
          ${(0,u.R)(qe,"#fffbde")},
          ${(0,u.R)(qe,"#fffbde")} 75%,
          ${(0,u.R)(qe,"#f7f1c6")}
        );
      }
      &:hover .${Ks} {
        background-color: ${(0,u.R)(qe,"#f7f1c6")};
        outline: 1px solid ${(0,u.R)(qe,"#ddd")};
      }
    `,rowFocused:(0,t.css)`
      label: rowFocused;
      background-color: ${(0,u.R)(qe,"#cbe7ff")};
      animation: ${nt.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      & .${Ws}, .${Ks}, .${Bs} {
        background-color: ${(0,u.R)(qe,"#cbe7ff")};
        animation: ${nt.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      }
      & .${_s} {
        opacity: 1;
      }
      & .${Ya} {
        color: ${(0,u.R)(qe,"#000")};
      }
      &:hover .${Ws}, :hover .${Ks} {
        background: ${(0,u.R)(qe,"#d5ebff")};
        box-shadow: 0 1px 0 ${(0,u.R)(qe,"#ddd")};
      }
    `,rowExpandedAndMatchingFilter:(0,t.css)`
      label: rowExpandedAndMatchingFilter;
      &:hover .${Ks} {
        background: ${(0,u.R)(qe,"#ffeccf")};
      }
    `,name:(0,t.css)`
      label: name;
      color: ${(0,u.R)(qe,"#000")};
      cursor: pointer;
      flex: 1 1 auto;
      outline: none;
      overflow-y: hidden;
      overflow-x: auto;
      padding-left: 4px;
      padding-right: 0.25em;
      position: relative;
      -ms-overflow-style: none;
      scrollbar-width: none;
      &::-webkit-scrollbar {
        display: none;
      }
      &:focus {
        text-decoration: none;
      }
      &:hover > span {
        color: ${(0,u.R)(qe,"#000")};
      }
      text-align: left;
      background: transparent;
      border: none;
      border-bottom-width: 1px;
      border-bottom-style: solid;
    `,nameDetailExpanded:(0,t.css)`
      label: nameDetailExpanded;
      &::before {
        bottom: 0;
      }
    `,svcName:(0,t.css)`
      label: svcName;
      font-size: 0.9em;
      font-weight: bold;
      margin-right: 0.25rem;
    `,svcNameChildrenCollapsed:(0,t.css)`
      label: svcNameChildrenCollapsed;
      font-weight: bold;
      font-style: italic;
    `,errorIcon:(0,t.css)`
      label: errorIcon;
      border-radius: 6.5px;
      color: ${(0,u.R)(qe,"#fff")};
      font-size: 0.85em;
      margin-right: 0.25rem;
      padding: 1px;
    `,rpcColorMarker:(0,t.css)`
      label: rpcColorMarker;
      border-radius: 6.5px;
      display: inline-block;
      font-size: 0.85em;
      height: 1em;
      margin-right: 0.25rem;
      padding: 1px;
      width: 1em;
      vertical-align: middle;
    `,labelRight:(0,t.css)`
      label: labelRight;
      left: 100%;
    `,labelLeft:(0,t.css)`
      label: labelLeft;
      right: 100%;
    `}});class Er extends n.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._childrenToggle=()=>{this.props.onChildrenToggled(this.props.span.spanID)},this.getSpanBarLabel=(tt,nt,ut)=>{const Ot=nt?.type??"";if(Ot===he.x3)return"";if(Ot===""||Ot===he.ft)return`(${ut})`;if(Ot===he.Dk){const Wt=nt?.tag?.trim()??"";if(Wt!==""&&tt.tags){const Kt=tt.tags?.find(un=>un.key===Wt);if(Kt)return`(${Kt.value})`;const tn=tt.process?.tags?.find(un=>un.key===Wt);if(tn)return`(${tn.value})`}}return""}}render(){const{className:tt,color:nt,spanBarOptions:ut,columnDivision:Ot,isChildrenExpanded:Wt,isDetailExpanded:Kt,isMatchingFilter:tn,showSpanFilterMatchesOnly:un,isFocused:yn,numTicks:$n,rpc:na,noInstrumentedServer:Qn,showErrorIcon:Jn,getViewedBounds:ba,traceStartTime:ha,span:Aa,hoverIndentGuideIds:ma,addHoverIndentGuideId:Ua,removeHoverIndentGuideId:Ja,clippingLeft:da,clippingRight:Za,theme:es,createSpanLink:Os,datasourceType:Rs,showServiceName:Xs,visibleSpanIds:Ds,criticalPath:Br}=this.props,{duration:mr,hasChildren:Zs,operationName:sr,process:{serviceName:Ur}}=Aa,Cr=(0,E.a3)(mr),Gr=ba(Aa.startTime,Aa.startTime+Aa.duration),as=Gr.start,qn=Gr.end,pa=Js(es,un),Wa=`${Ur}::${sr}`;let os,Nr;return as>1-qn?(os=`${Wa} | ${Cr}`,Nr=pa.labelLeft):(os=`${Cr} | ${Wa}`,Nr=pa.labelRight),n.createElement(V,{className:v()(pa.row,{[pa.rowExpanded]:Kt,[pa.rowMatchingFilter]:tn,[pa.rowExpandedAndMatchingFilter]:tn&&Kt,[pa.rowFocused]:yn,[pa.rowClippingLeft]:da,[pa.rowClippingRight]:Za},tt)},n.createElement(V.Cell,{className:v()(pa.nameColumn,Vr),width:Ot},n.createElement("div",{className:v()(pa.nameWrapper,Ws,{[pa.nameWrapperMatchingFilter]:tn,nameWrapperMatchingFilter:tn})},n.createElement(hr,{onClick:Zs?this._childrenToggle:void 0,childrenVisible:Wt,span:Aa,hoverIndentGuideIds:ma,addHoverIndentGuideId:Ua,removeHoverIndentGuideId:Ja,visibleSpanIds:Ds}),n.createElement("button",{type:"button",className:v()(pa.name,{[pa.nameDetailExpanded]:Kt}),"aria-checked":Kt,title:Wa,onClick:this._detailToggle,role:"switch",style:{background:`${nt}10`,borderBottomColor:`${nt}CF`},tabIndex:0},Jn&&n.createElement(Te.I,{name:"exclamation-circle",style:{backgroundColor:Aa.errorIconColor?(0,u.R)(es,Aa.errorIconColor):(0,u.R)(es,"#db2828")},className:pa.errorIcon}),Xs&&n.createElement("span",{className:v()(pa.svcName,{[pa.svcNameChildrenCollapsed]:Zs&&!Wt})},`${Ur} `),na&&n.createElement("span",null,n.createElement(Te.I,{name:"arrow-right"})," ",n.createElement("i",{className:pa.rpcColorMarker,style:{background:na.color}}),na.serviceName),Qn&&n.createElement("span",null,n.createElement(Te.I,{name:"arrow-right"})," ",n.createElement("i",{className:pa.rpcColorMarker,style:{background:Qn.color}}),Qn.serviceName),n.createElement("span",{className:pa.endpointName},na?na.operationName:sr),n.createElement("span",{className:pa.endpointName}," ",this.getSpanBarLabel(Aa,ut,Cr))),Os&&(()=>{const js=Os(Aa),vr=js?.length||0;return js&&vr===1?js[0]?n.createElement("a",{href:js[0].href,target:"_blank",style:{background:`${nt}10`,borderBottom:`1px solid ${nt}CF`,paddingRight:"4px"},rel:"noopener noreferrer",onClick:js[0].onClick?ls=>{!(ls.ctrlKey||ls.metaKey||ls.shiftKey)&&js[0].onClick&&(ls.preventDefault(),js[0].onClick(ls))}:void 0},js[0].content):null:js&&vr>1?n.createElement(rr,{links:js,datasourceType:Rs,color:nt}):null})())),n.createElement(V.Cell,{className:v()(pa.view,Ks,{[pa.viewExpanded]:Kt,[pa.viewExpandedAndMatchingFilter]:tn&&Kt}),"data-testid":"span-view",style:{cursor:"pointer"},width:1-Ot,onClick:this._detailToggle},n.createElement(W,{numTicks:$n}),n.createElement(Cs,{criticalPath:Br,rpc:na,viewStart:as,viewEnd:qn,getViewedBounds:ba,color:nt,shortLabel:Cr,longLabel:os,traceStartTime:ha,span:Aa,labelClassName:`${Ya} ${Nr}`,className:_s})))}}Er.displayName="UnthemedSpanBarRow",Er.defaultProps={className:"",rpc:null};const yr=(0,g.cV)(Er),zo=(0,r.N)(qe=>({expandedAccent:(0,t.css)`
      cursor: pointer;
      height: 100%;
      overflow: hidden;
      position: absolute;
      width: 100%;
      &::before {
        border-left: 1px solid;
        pointer-events: none;
        width: 1000px;
      }
      &::after {
        border-right: 1000px solid;
        border-color: inherit;
        cursor: pointer;
        opacity: 0.2;
      }

      /* border-color inherit must come AFTER other border declarations for accent */
      &::before,
      &::after {
        border-color: inherit;
        content: ' ';
        position: absolute;
        height: 100%;
      }

      &:hover::after {
        opacity: 0.35;
      }
    `,infoWrapper:(0,t.css)`
      label: infoWrapper;
      border: 1px solid ${(0,u.R)(qe,"#d3d3d3")};
      border-top: 3px solid;
      padding: 0.75rem;
    `}));class Dr extends n.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._linksGetter=(tt,nt)=>{const{linksGetter:ut,span:Ot}=this.props;return ut(Ot,tt,nt)}}render(){const{color:tt,columnDivision:nt,detailState:ut,logItemToggle:Ot,logsToggle:Wt,processToggle:Kt,referenceItemToggle:tn,referencesToggle:un,warningsToggle:yn,stackTracesToggle:$n,span:na,traceToProfilesOptions:Qn,timeZone:Jn,tagsToggle:ba,traceStartTime:ha,traceDuration:Aa,traceName:ma,hoverIndentGuideIds:Ua,addHoverIndentGuideId:Ja,removeHoverIndentGuideId:da,theme:Za,createSpanLink:es,focusedSpanId:Os,createFocusSpanLink:Rs,datasourceType:Xs,visibleSpanIds:Ds,traceFlameGraphs:Br,setTraceFlameGraphs:mr,setRedrawListView:Zs}=this.props,sr=zo(Za);return n.createElement(V,null,n.createElement(V.Cell,{width:nt,style:{overflow:"hidden"}},n.createElement(hr,{span:na,showChildrenIcon:!1,hoverIndentGuideIds:Ua,addHoverIndentGuideId:Ja,removeHoverIndentGuideId:da,visibleSpanIds:Ds}),n.createElement(ke.$n,{fill:"text",onClick:this._detailToggle,className:v()(sr.expandedAccent,(0,ke.my)(Za)),style:{borderColor:tt},"data-testid":"detail-row-expanded-accent"})),n.createElement(V.Cell,{width:1-nt},n.createElement("div",{className:sr.infoWrapper,style:{borderTopColor:tt}},n.createElement(fa,{detailState:ut,linksGetter:this._linksGetter,logItemToggle:Ot,logsToggle:Wt,processToggle:Kt,referenceItemToggle:tn,referencesToggle:un,warningsToggle:yn,stackTracesToggle:$n,span:na,traceToProfilesOptions:Qn,timeZone:Jn,tagsToggle:ba,traceStartTime:ha,traceDuration:Aa,traceName:ma,createSpanLink:es,focusedSpanId:Os,createFocusSpanLink:Rs,datasourceType:Xs,traceFlameGraphs:Br,setTraceFlameGraphs:mr,setRedrawListView:Zs}))))}}const qr=(0,g.cV)(Dr),us=(0,r.N)(()=>({rowsWrapper:(0,t.css)`
      width: 100%;
    `,row:(0,t.css)`
      width: 100%;
    `,scrollToTopButton:(0,t.css)`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 40px;
      height: 40px;
      position: absolute;
      bottom: 30px;
      right: 30px;
      z-index: 1;
    `})),eo={bar:28,detail:161,detailWithLogs:197},Fr=5,nr=33;function ko(qe,tt,nt,ut,Ot,Wt,Kt){if(!qe)return[];Ot&&ut&&(qe=qe.filter(yn=>ut.has(yn.spanID))),Wt&&Kt&&(qe=qe.filter(yn=>Kt.find($n=>$n.spanId===yn.spanID)));let tn=null;const un=[];for(let yn=0;yn<qe.length;yn++){const $n=qe[yn],{spanID:na,depth:Qn}=$n;let Jn=!1;tn!=null&&(Qn>=tn?Jn=!0:tn=null),!Jn&&(tt.has(na)&&(tn=Qn+1),un.push({span:$n,isDetail:!1,spanIndex:yn}),nt.has(na)&&un.push({span:$n,isDetail:!0,spanIndex:yn}))}return un}function zs(qe){const[tt,nt]=qe;return{left:tt>0,right:nt<1}}function Es(qe,tt,nt,ut,Ot,Wt,Kt){return qe?ko(qe.spans,tt,nt,ut,Ot,Wt,Kt):[]}function to(qe){const tt=new Map;return qe&&qe.spans.forEach(nt=>{nt.childSpanIds.length&&tt.set(nt.spanID,nt.childSpanIds)}),tt}const ts=(0,ye.A)(Es),Ts=(0,ye.A)(D,ve.isEqual),Zn=(0,ye.A)(zs,ve.isEqual),xt=(0,ye.A)(to);class Ir extends n.Component{constructor(){super(...arguments),this.hasScrolledToSpan=!1,this.getViewRange=()=>this.props.currentViewRangeTime,this.getSearchedSpanIDs=()=>this.props.findMatchesIDs,this.getCollapsedChildren=()=>this.props.childrenHiddenIDs,this.mapRowIndexToSpanIndex=tt=>this.getRowStates()[tt].spanIndex,this.mapSpanIndexToRowIndex=tt=>{const nt=this.getRowStates().length;for(let ut=0;ut<nt;ut++){const{spanIndex:Ot}=this.getRowStates()[ut];if(Ot===tt)return ut}throw new Error(`unable to find row for span index: ${tt}`)},this.setListView=tt=>{this.listView=tt},this.getKeyFromIndex=tt=>{const{isDetail:nt,span:ut}=this.getRowStates()[tt];return`${ut.traceID}--${ut.spanID}--${nt?"detail":"bar"}`},this.getIndexFromKey=tt=>{const nt=tt.split("--"),ut=nt[0],Ot=nt[1],Wt=nt[2]==="detail",Kt=this.getRowStates().length;for(let tn=0;tn<Kt;tn++){const{span:un,isDetail:yn}=this.getRowStates()[tn];if(un.spanID===Ot&&un.traceID===ut&&yn===Wt)return tn}return-1},this.getRowHeight=tt=>{const{span:nt,isDetail:ut}=this.getRowStates()[tt];return ut?Array.isArray(nt.logs)&&nt.logs.length?eo.detailWithLogs:eo.detail:eo.bar},this.renderRow=(tt,nt,ut,Ot)=>{const{isDetail:Wt,span:Kt,spanIndex:tn}=this.getRowStates()[ut],un=Math.max((this.listView?.getTopVisibleIndex()||0)-nr,0),yn=(this.listView?.getBottomVisibleIndex()||0)+nr,$n=this.getVisibleSpanIds(un,yn);return Wt?this.renderSpanDetailRow(Kt,tt,nt,Ot,$n):this.renderSpanBarRow(Kt,tn,tt,nt,Ot,$n)},this.scrollToSpan=(tt,nt)=>{if(nt==null)return;const ut=this.getRowStates().findIndex(Ot=>Ot.span.spanID===nt);ut>=0&&this.listView?.scrollToIndex(ut,tt)},this.scrollToTop=()=>{const{topOfViewRef:tt,datasourceType:nt,trace:ut}=this.props;tt?.current?.scrollIntoView({behavior:"smooth"}),(0,o.rR)("grafana_traces_trace_view_scroll_to_top_clicked",{datasourceType:nt,grafana_version:s.$.buildInfo.version,numServices:ut.services.length,numSpans:ut.spans.length})},this.getVisibleSpanIds=(0,ye.A)((tt,nt)=>{const ut=[];for(let Ot=tt;Ot<nt;Ot++){const Wt=this.getRowStates()[Ot];Wt?.span&&ut.push(Wt.span.spanID)}return ut})}componentDidMount(){this.scrollToSpan(this.props.headerHeight,this.props.focusedSpanId)}shouldComponentUpdate(tt){let nt;for(nt in tt)if(tt[nt]!==this.props[nt])return!0;return!1}componentDidUpdate(tt){const{headerHeight:nt,focusedSpanId:ut,focusedSpanIdForSearch:Ot}=this.props;this.hasScrolledToSpan||(this.scrollToSpan(nt,ut),this.hasScrolledToSpan=!0),ut!==tt.focusedSpanId&&this.scrollToSpan(nt,ut),Ot!==tt.focusedSpanIdForSearch&&this.scrollToSpan(nt,Ot)}getRowStates(){const{childrenHiddenIDs:tt,detailStates:nt,trace:ut,findMatchesIDs:Ot,showSpanFilterMatchesOnly:Wt,showCriticalPathSpansOnly:Kt,criticalPath:tn}=this.props;return ts(ut,tt,nt,Ot,Wt,Kt,tn)}getClipping(){const{currentViewRangeTime:tt}=this.props;return Zn(tt)}getViewedBounds(){const{currentViewRangeTime:tt,trace:nt}=this.props,[ut,Ot]=tt;return Ts({min:nt.startTime,max:nt.endTime,viewStart:ut,viewEnd:Ot})}getChildSpansMap(){return xt(this.props.trace)}getAccessors(){const tt=this.listView;if(!tt)throw new Error("ListView unavailable");return{getViewRange:this.getViewRange,getSearchedSpanIDs:this.getSearchedSpanIDs,getCollapsedChildren:this.getCollapsedChildren,getViewHeight:tt.getViewHeight,getBottomRowIndexVisible:tt.getBottomVisibleIndex,getTopRowIndexVisible:tt.getTopVisibleIndex,getRowPosition:tt.getRowPosition,mapRowIndexToSpanIndex:this.mapRowIndexToSpanIndex,mapSpanIndexToRowIndex:this.mapSpanIndexToRowIndex}}renderSpanBarRow(tt,nt,ut,Ot,Wt,Kt){const{spanID:tn,childSpanIds:un}=tt,{serviceName:yn}=tt.process,{childrenHiddenIDs:$n,childrenToggle:na,detailStates:Qn,detailToggle:Jn,findMatchesIDs:ba,spanNameColumnWidth:ha,trace:Aa,spanBarOptions:ma,hoverIndentGuideIds:Ua,addHoverIndentGuideId:Ja,removeHoverIndentGuideId:da,createSpanLink:Za,focusedSpanId:es,focusedSpanIdForSearch:Os,showSpanFilterMatchesOnly:Rs,theme:Xs,datasourceType:Ds,criticalPath:Br}=this.props;if(!Aa)return null;const mr=(0,Me.Kv)(yn,Xs),Zs=$n.has(tn),sr=Qn.has(tn),Ur=ba?ba.has(tn):!1,Cr=tn===es||tn===Os,Gr=L(tt)||Zs&&U(Aa.spans,nt);let as=null;if(Zs){const ls=R(Aa.spans.slice(nt));if(ls){const ho=this.getViewedBounds()(ls.startTime,ls.startTime+ls.duration);as={color:(0,Me.Kv)(ls.process.serviceName,Xs),operationName:ls.operationName,serviceName:ls.process.serviceName,viewEnd:ho.end,viewStart:ho.start}}}const qn=tt.tags.find(ls=>ls.key===le);let pa=null;!tt.hasChildren&&qn&&B(tt)&&(pa={serviceName:qn.value,color:(0,Me.Kv)(qn.value,Xs)});const Wa=nt>0?Aa.spans[nt-1]:null,os=[tn,...un],Nr=ls=>{ls.forEach(ho=>{const $s=this.getChildSpansMap().get(ho);$s?.length&&(os.push(...$s),Nr($s))})};Nr(un);const js=Br?.filter(ls=>Zs?os.includes(ls.spanId):ls.spanId===tn),vr=us();return n.createElement("div",{className:vr.row,key:ut,style:Ot,...Wt},n.createElement(yr,{clippingLeft:this.getClipping().left,clippingRight:this.getClipping().right,color:mr,spanBarOptions:ma,columnDivision:ha,isChildrenExpanded:!Zs,isDetailExpanded:sr,isMatchingFilter:Ur,isFocused:Cr,showSpanFilterMatchesOnly:Rs,numTicks:Fr,onDetailToggled:Jn,onChildrenToggled:na,rpc:as,noInstrumentedServer:pa,showErrorIcon:Gr,getViewedBounds:this.getViewedBounds(),traceStartTime:Aa.startTime,span:tt,hoverIndentGuideIds:Ua,addHoverIndentGuideId:Ja,removeHoverIndentGuideId:da,createSpanLink:Za,datasourceType:Ds,showServiceName:Wa===null||Wa.process.serviceName!==tt.process.serviceName,visibleSpanIds:Kt,criticalPath:js}))}renderSpanDetailRow(tt,nt,ut,Ot,Wt){const{spanID:Kt}=tt,{serviceName:tn}=tt.process,{detailLogItemToggle:un,detailLogsToggle:yn,detailProcessToggle:$n,detailReferencesToggle:na,detailReferenceItemToggle:Qn,detailWarningsToggle:Jn,detailStackTracesToggle:ba,detailStates:ha,detailTagsToggle:Aa,detailToggle:ma,spanNameColumnWidth:Ua,trace:Ja,traceToProfilesOptions:da,timeZone:Za,hoverIndentGuideIds:es,addHoverIndentGuideId:Os,removeHoverIndentGuideId:Rs,linksGetter:Xs,createSpanLink:Ds,focusedSpanId:Br,createFocusSpanLink:mr,theme:Zs,datasourceType:sr,traceFlameGraphs:Ur,setTraceFlameGraphs:Cr,setRedrawListView:Gr}=this.props,as=ha.get(Kt);if(!Ja||!as)return null;const qn=(0,Me.Kv)(tn,Zs),pa=us();return n.createElement("div",{className:pa.row,key:nt,style:{...ut,zIndex:1},...Ot},n.createElement(qr,{color:qn,columnDivision:Ua,onDetailToggled:ma,detailState:as,linksGetter:Xs,logItemToggle:un,logsToggle:yn,processToggle:$n,referenceItemToggle:Qn,referencesToggle:na,warningsToggle:Jn,stackTracesToggle:ba,span:tt,traceToProfilesOptions:da,timeZone:Za,tagsToggle:Aa,traceStartTime:Ja.startTime,traceDuration:Ja.duration,traceName:Ja.traceName,hoverIndentGuideIds:es,addHoverIndentGuideId:Os,removeHoverIndentGuideId:Rs,createSpanLink:Ds,focusedSpanId:Br,createFocusSpanLink:mr,datasourceType:sr,visibleSpanIds:Wt,traceFlameGraphs:Ur,setTraceFlameGraphs:Cr,setRedrawListView:Gr}))}render(){const tt=us(),{scrollElement:nt,redrawListView:ut}=this.props;return n.createElement(n.Fragment,null,n.createElement(me,{ref:this.setListView,dataLength:this.getRowStates().length,itemHeightGetter:this.getRowHeight,itemRenderer:this.renderRow,viewBuffer:nr,viewBufferMin:nr,itemsWrapperClassName:tt.rowsWrapper,getKeyFromIndex:this.getKeyFromIndex,getIndexFromKey:this.getIndexFromKey,windowScroller:!1,scrollElement:nt,redraw:ut}),this.props.topOfViewRef&&n.createElement(pe.I,{className:tt.scrollToTopButton,onClick:this.scrollToTop,title:"Scroll to top",icon:"arrow-up"}))}}const Ho=(0,g.cV)(Ir),Ar=(0,r.N)(qe=>({TraceTimelineViewer:(0,t.css)`
      label: TraceTimelineViewer;
      border-bottom: 1px solid ${(0,u.R)(qe,"#bbb")};

      & .json-markup {
        line-height: 17px;
        font-size: 13px;
        font-family: monospace;
        white-space: pre-wrap;
      }

      & .json-markup-key {
        font-weight: bold;
      }

      & .json-markup-bool {
        color: ${(0,u.R)(qe,"firebrick")};
      }

      & .json-markup-string {
        color: ${(0,u.R)(qe,"teal")};
      }

      & .json-markup-null {
        color: ${(0,u.R)(qe,"teal")};
      }

      & .json-markup-number {
        color: ${(0,u.R)(qe,"blue","black")};
      }
    `})),_r=5;class ir extends n.PureComponent{constructor(tt){super(tt),this.collapseAll=()=>{this.props.collapseAll(this.props.trace.spans),(0,o.rR)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.$.buildInfo.version,type:"collapseAll"})},this.collapseOne=()=>{this.props.collapseOne(this.props.trace.spans),(0,o.rR)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.$.buildInfo.version,type:"collapseOne"})},this.expandAll=()=>{this.props.expandAll(),(0,o.rR)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.$.buildInfo.version,type:"expandAll"})},this.expandOne=()=>{this.props.expandOne(this.props.trace.spans),(0,o.rR)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.$.buildInfo.version,type:"expandOne"})},this.state={height:0}}componentDidMount(){p({collapseAll:this.collapseAll,expandAll:this.expandAll,collapseOne:this.collapseOne,expandOne:this.expandOne})}render(){const{setSpanNameColumnWidth:tt,updateNextViewRangeTime:nt,updateViewRangeTime:ut,viewRange:Ot,traceTimeline:Wt,theme:Kt,topOfViewRef:tn,focusedSpanIdForSearch:un,...yn}=this.props,{trace:$n}=yn,na=Ar(Kt);return n.createElement("div",{className:na.TraceTimelineViewer,ref:Qn=>Qn&&this.setState({height:Qn.getBoundingClientRect().height})},n.createElement(ge,{duration:$n.duration,nameColumnWidth:Wt.spanNameColumnWidth,numTicks:_r,onCollapseAll:this.collapseAll,onCollapseOne:this.collapseOne,onColummWidthChange:tt,onExpandAll:this.expandAll,onExpandOne:this.expandOne,viewRangeTime:Ot.time,updateNextViewRangeTime:nt,updateViewRangeTime:ut,columnResizeHandleHeight:this.state.height}),n.createElement(Ho,{...yn,...Wt,setSpanNameColumnWidth:tt,currentViewRangeTime:Ot.time.current,topOfViewRef:tn,focusedSpanIdForSearch:un,datasourceType:this.props.datasourceType}))}}const Go=(0,g.cV)(ir);var yo=e(39938);const fo=()=>({NewWindowIconLarge:(0,t.css)`
      label: NewWindowIconLarge;
      font-size: 1.5em;
    `});function Mt(qe){const{isLarge:tt,className:nt,...ut}=qe,Ot=(0,g.of)(fo),Wt=v()({[Ot.NewWindowIconLarge]:tt},nt);return n.createElement(Te.I,{className:Wt,name:"anchor",...ut})}Mt.defaultProps={isLarge:!1};const Ft=qe=>n.createElement("a",{href:qe.href,title:qe.title,target:"_blank",rel:"noopener noreferrer",className:qe.className},qe.children," ",n.createElement(Mt,null));function ln(qe){const{links:tt}=qe;return n.createElement(Ft,{href:tt[0].url,title:tt[0].text,className:qe.className})}const Zt=100,En="<trace-without-root-span>",Fn=()=>({BreakableText:(0,t.css)`
      label: BreakableText;
      display: inline-block;
      white-space: pre;
    `}),Vn=/\W*\w+\W*/g;function sa(qe){const{className:tt,text:nt,wordRegexp:ut=Vn}=qe,Ot=(0,g.of)(Fn);if(!nt)return null;const Wt=[];ut.exec("");let Kt=ut.exec(nt)||[nt];for(;Kt;)Wt.push(n.createElement("span",{key:`${nt}-${Wt.length}`,className:tt||Ot.BreakableText},Kt[0])),Kt=ut.exec(nt);return n.createElement(n.Fragment,null,Wt)}sa.defaultProps={wordRegexp:Vn};const ga=qe=>({TraceName:(0,t.css)`
      label: TraceName;
      font-size: ${qe.typography.size.lg};
    `});function Ga(qe){const{className:tt,traceName:nt}=qe,ut=(0,g.of)(ga),Ot=String(nt||En),Wt=n.createElement(sa,{text:Ot});return n.createElement("span",{className:v()(ut.TraceName,tt)},Wt)}var qa=e(40784);const xa=Object.defineProperty({archiveEnabled:!1,dependencies:{dagMaxNumServices:Zt,menuEnabled:!0},linkPatterns:[],search:{maxLookback:{label:"2 Days",value:"2d"},maxLimit:1500},tracking:{gaID:null,trackErrors:!0}},"__mergeFields",{value:["dependencies","search","tracking"]});function Qa(){return xa}function ar(qe){return(0,ve.get)(Qa(),qe)}const ys=/#\{([^{}]*)\}/g;function ks(qe){const tt=new Set;return qe.replace(ys,(nt,ut)=>(tt.add(ut),nt)),Array.from(tt)}function Ss(qe,tt,nt){return qe.replace(ys,(ut,Ot)=>{const Wt=nt[Ot];return Wt==null?"":tt(Wt)})}function xs(qe,tt){if(typeof qe!="string")throw new Error("Invalid template");return{parameters:ks(qe),template:Ss.bind(null,qe,tt)}}function Us(qe){if(typeof qe=="string")return tt=>tt===qe;if(Array.isArray(qe))return tt=>qe.indexOf(tt)>-1;if(qe==null)return()=>!0;throw new Error(`Invalid value: ${qe}`)}const lr=qe=>qe;function Hs(qe){try{const tt=xs(qe.url,encodeURIComponent),nt=xs(qe.text,lr);return{object:qe,type:Us(qe.type),key:Us(qe.key),value:Us(qe.value),url:tt,text:nt,parameters:(0,ve.uniq)(tt.parameters.concat(nt.parameters))}}catch(tt){return console.error(`Ignoring invalid link pattern: ${tt}`,qe),null}}function Oa(qe,tt){return qe.template(tt)}function As(qe,tt){const nt=[],ut=Object.keys(tt).filter(Ot=>typeof tt[Ot]=="string"||tt[Ot]==="number");return qe?.filter(Ot=>Ot?.type("traces")).forEach(Ot=>{const Wt={};Ot?.parameters.every(tn=>{const un=tn;return ut.includes(un)?(Wt[tn]=tt[un],!0):!1})&&nt.push({url:Oa(Ot.url,Wt),text:Oa(Ot.text,Wt)})}),nt}const zr=(ar("linkPatterns")||[]).map(Hs).filter(qe=>!!qe),Ha=(0,qa.A)(10)(qe=>{const tt=[];return qe?As(zr,qe):tt});function cr(qe){let tt;const nt=new Set(qe.map(({spanID:ut})=>ut));for(let ut=0;ut<qe.length;ut++){if(qe[ut].references&&qe[ut].references.some(({traceID:tn,spanID:un})=>tn===qe[ut].traceID&&nt.has(un)))continue;if(!tt){tt=qe[ut];continue}const Wt=qe[ut].references&&qe[ut].references.length||0,Kt=tt.references&&tt.references.length||0;(Wt<Kt||Wt===Kt&&qe[ut].startTime<tt.startTime)&&(tt=qe[ut])}return tt?`${tt.process.serviceName}: ${tt.operationName}`:""}const no=(0,ve.memoize)(cr,qe=>qe.length?qe[0].traceID:0);function Do(qe){for(let tt=0;tt<qe.length;tt++){const nt=qe[tt].tags.filter(Wt=>Wt.key==="http.method"),ut=qe[tt].tags.filter(Wt=>Wt.key==="http.status_code"),Ot=qe[tt].tags.filter(Wt=>Wt.key==="http.url"||Wt.key==="http.target"||Wt.key==="http.path");if(nt.length>0||ut.length>0||Ot.length>0)return{method:nt,status:ut,url:Ot}}return{}}const jo=(0,ve.memoize)(Do,qe=>qe.length?qe[0].traceID:0);var Ao=e(2913),Ui=e(80287);const Ro=qe=>({ActionButton:(0,t.css)`
      label: ActionButton;
      overflow: hidden;
      position: relative;
      &:after {
        content: '';
        background: ${qe.colors.primary.main};
        display: block;
        position: absolute;
        right: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: all 0.8s;
      }
      &:active:after {
        margin: 0;
        opacity: 0.3;
        transition: 0s;
      }
    `});function Zo(qe){const{onClick:tt,ariaLabel:nt,label:ut,icon:Ot}=qe,Wt=(0,g.of)(Ro);return n.createElement(ke.$n,{className:Wt.ActionButton,size:"sm",variant:"secondary",fill:"outline",type:"button",icon:Ot,"aria-label":nt,onClick:tt},ut)}const qo=qe=>({TracePageActions:(0,t.css)`
      label: TracePageActions;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
    `,feedback:(0,t.css)`
      margin: 6px;
      color: ${qe.colors.text.secondary};
      font-size: ${qe.typography.bodySmall.fontSize};
      &:hover {
        color: ${qe.colors.text.link};
      }
    `});function el(qe){const{traceId:tt,data:nt,app:ut}=qe,Ot=(0,g.$j)(),Wt=qo(Ot),[Kt,tn]=(0,n.useState)(!1),un=()=>{navigator.clipboard.writeText(tt),tn(!0),setTimeout(()=>{tn(!1)},5e3)},yn=()=>{const $n=(0,Ui.ek)(nt,"Trace-"+tt.substring(tt.length-6));(0,o.rR)("grafana_traces_download_traces_clicked",{app:ut,grafana_version:Ao.$W.buildInfo.version,trace_format:$n,location:"trace-view"})};return n.createElement("div",{className:Wt.TracePageActions},n.createElement("a",{href:"https://forms.gle/RZDEx8ScyZNguDoC8",className:Wt.feedback,title:"Share your thoughts about tracing in Grafana.",target:"_blank",rel:"noreferrer noopener"},n.createElement(Te.I,{name:"comment-alt-message"})," Give feedback"),n.createElement(Zo,{onClick:un,ariaLabel:"Copy Trace ID",label:Kt?"Copied!":"Trace ID",icon:"copy"}),n.createElement(Zo,{onClick:yn,ariaLabel:"Export Trace",label:"Export",icon:"save"}))}var ur=e(50877),tl=e(3721),nl=e(20323),al=e(82762),ei=e(39268),Wr=e(14186),ti=e(66864),ao=e(88323),Po=e(15583),Co=e(10354);class kr extends n.PureComponent{constructor(){super(...arguments),this.clearUiFind=()=>{this.props.onChange("")}}render(){const{value:tt}=this.props,nt=n.createElement(n.Fragment,null,tt&&tt.length&&n.createElement(_.K,{name:"times",onClick:this.clearUiFind,tooltip:"Clear input"}));return n.createElement("div",{style:{width:"200px"}},n.createElement(Co.p,{placeholder:"Find...",onChange:ut=>this.props.onChange(ut.currentTarget.value),suffix:nt,value:tt}))}}kr.defaultProps={value:void 0};const Ni=(0,n.memo)(function(tt){const{trace:nt,spanFilterMatches:ut,setFocusedSpanIdForSearch:Ot,focusedSpanIndexForSearch:Wt,setFocusedSpanIndexForSearch:Kt,datasourceType:tn,showSpanFilters:un}=tt,yn=hl((0,g.$j)(),un);(0,n.useEffect)(()=>{if(ut&&Wt!==-1){const da=Array.from(ut);Ot(da[Wt])}},[Wt,Ot,ut]);const $n=(da,Za)=>{if(da.preventDefault(),da.stopPropagation(),Za){if((0,o.rR)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:tn,grafana_version:s.$.buildInfo.version,direction:"next"}),Wt===-1||ut&&Wt===ut.size-1){Kt(0);return}Kt(Wt+1)}},na=(da,Za)=>{if(da.preventDefault(),da.stopPropagation(),Za){if((0,o.rR)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:tn,grafana_version:s.$.buildInfo.version,direction:"prev"}),ut&&(Wt===-1||Wt===0)){Kt(ut.size-1);return}Kt(Wt-1)}},Qn=(da,Za)=>{da.key==="Enter"&&$n(da,Za)},Jn=(da,Za)=>{da.key==="Enter"&&na(da,Za)},ba=(ut&&ut?.size>0)??!1,ha=ba?yn.button:(0,t.cx)(yn.button,yn.buttonDisabled),Aa=(0,n.useCallback)(da=>n.createElement(we.m,{content:da,placement:"top"},n.createElement("span",{className:yn.tooltip},n.createElement(Te.I,{name:"info-circle",size:"md"}))),[yn.tooltip]),ma=(0,n.useCallback)((da,Za)=>{let es=n.createElement(n.Fragment,null,n.createElement("span",null,`${nt.spans.length} spans`),Aa(n.createElement(n.Fragment,null,n.createElement("div",null,"Services: ",Za),n.createElement("div",null,"Depth: ",da))));if(ut)if(ut.size===0)es=n.createElement(n.Fragment,null,n.createElement("span",null,"0 matches"),Aa("There are 0 span matches for the filters selected. Please try removing some of the selected filters."));else{const Os=ut.size===1?"match":"matches",Rs=Wt!==-1?`${Wt+1}/${ut.size} ${Os}`:`${ut.size} ${Os}`,Xs=[];ut.forEach(Ds=>{nt.processes[Ds]&&Xs.push(nt.processes[Ds].serviceName)}),es=n.createElement(n.Fragment,null,n.createElement("span",null,Rs),Aa(n.createElement(n.Fragment,null,n.createElement("div",null,"Services: ",new Set(Xs).size,"/",Za),n.createElement("div",null,"Depth: ",da))))}return es},[Wt,Aa,ut,nt.processes,nt.spans]),Ua=new Set((0,ve.values)(nt.processes).map(da=>da.serviceName)).size,Ja=(0,ve.get)((0,ve.maxBy)(nt.spans,"depth"),"depth",0)+1;return n.createElement(n.Fragment,null,n.createElement("span",{className:yn.matches},ma(Ja,Ua)),n.createElement("div",{className:ba?yn.buttons:(0,t.cx)(yn.buttons,yn.buttonsDisabled)},n.createElement("div",{"aria-label":"Prev result button",className:ha,onClick:da=>na(da,ba),onKeyDown:da=>Jn(da,ba),role:"button",tabIndex:ba?0:-1},"Prev"),n.createElement("div",{"aria-label":"Next result button",className:ha,onClick:da=>$n(da,ba),onKeyDown:da=>Qn(da,ba),role:"button",tabIndex:ba?0:-1},"Next")))}),hl=(qe,tt)=>{const nt=(0,ke.hs)({theme:qe,variant:"secondary",size:tt?"md":"sm",iconOnly:!1,fill:"outline"});return{buttons:(0,t.css)`
      display: inline-flex;
      gap: 4px;
    `,buttonsDisabled:(0,t.css)`
      cursor: not-allowed;
    `,button:(0,t.css)`
      ${nt.button};
    `,buttonDisabled:(0,t.css)`
      ${nt.disabled};
      pointer-events: none;
    `,matches:(0,t.css)`
      margin-right: ${qe.spacing(2)};
      text-wrap: nowrap;
    `,tooltip:(0,t.css)`
      color: #aaa;
      margin: 0 0 0 5px;
    `}};var mi=e(15292);function vl(qe,tt){if(!tt)return;let nt=!1;qe.serviceName&&(tt=yl(tt,qe),nt=!0),qe.spanName&&(tt=is(tt,qe),nt=!0),(qe.from||qe.to)&&(tt=ai(tt,qe),nt=!0);const ut=Lo(tt,qe.tags);if(ut&&(tt=ut,nt=!0),qe.query){const Ot=El(qe.query,tt);Ot&&(tt=Ot,nt=!0)}return nt?new Set(tt.map(Ot=>Ot.spanID)):void 0}function El(qe,tt){if(!tt)return;const nt=[];qe.split(/\s+/).filter(Boolean).forEach(Kt=>{nt.push(Kt.toLowerCase())});const ut=(Kt,tn)=>Kt.some(un=>tn.toLowerCase().includes(un)),Ot=Kt=>Kt?Kt.some(tn=>ut(nt,tn.key)||ut(nt,tn.value.toString())):!1,Wt=Kt=>ut(nt,Kt.operationName)||ut(nt,Kt.process.serviceName)||Ot(Kt.tags)||Kt.kind&&ut(nt,Kt.kind)||Kt.statusCode!==void 0&&ut(nt,Le.s[Kt.statusCode])||Kt.statusMessage&&ut(nt,Kt.statusMessage)||Kt.instrumentationLibraryName&&ut(nt,Kt.instrumentationLibraryName)||Kt.instrumentationLibraryVersion&&ut(nt,Kt.instrumentationLibraryVersion)||Kt.traceState&&ut(nt,Kt.traceState)||Kt.logs!==null&&Kt.logs.some(tn=>Ot(tn.fields))||Ot(Kt.process.tags)||nt.some(tn=>tn===Kt.spanID);return tt.filter(Wt)}const Lo=(qe,tt)=>{if(tt=tt.filter(nt=>nt.key&&nt.key!==""||nt.value),tt.length>0)return qe.filter(nt=>tt.every(ut=>{if(ut.key&&ut.value){if(nt.tags.some(Ot=>Rr(ut,Ot))||nt.process.tags.some(Ot=>Rr(ut,Ot))||nt.logs&&nt.logs.some(Ot=>Ot.fields.some(Wt=>Rr(ut,Wt)))||nt.kind&&ut.key===Dt&&ut.value===nt.kind||nt.statusCode!==void 0&&ut.key===It&&ut.value===Le.s[nt.statusCode].toLowerCase()||nt.statusMessage&&ut.key===jt&&ut.value===nt.statusMessage||nt.instrumentationLibraryName&&ut.key===Vt&&ut.value===nt.instrumentationLibraryName||nt.instrumentationLibraryVersion&&ut.key===_t&&ut.value===nt.instrumentationLibraryVersion||nt.traceState&&ut.key===rt&&ut.value===nt.traceState||ut.key===St&&ut.value===nt.spanID)return ni(ut.operator,!0)}else if(ut.key&&(nt.tags.some(Ot=>bo(ut.key,Ot.key))||nt.process.tags.some(Ot=>bo(ut.key,Ot.key))||nt.logs&&nt.logs.some(Ot=>Ot.fields.some(Wt=>bo(ut.key,Wt.key)))||nt.kind&&ut.key===Dt||nt.statusCode!==void 0&&ut.key===It||nt.statusMessage&&ut.key===jt||nt.instrumentationLibraryName&&ut.key===Vt||nt.instrumentationLibraryVersion&&ut.key===_t||nt.traceState&&ut.key===rt||ut.key===St))return ni(ut.operator,!0);return ni(ut.operator,!1)}))},bo=(qe,tt)=>qe===tt.toString(),Rr=(qe,tt)=>qe.key===tt.key.toString()&&qe.value===tt.value.toString(),ni=(qe,tt)=>qe==="="?tt:!tt,yl=(qe,tt)=>qe.filter(nt=>tt.serviceNameOperator==="="?nt.process.serviceName===tt.serviceName:nt.process.serviceName!==tt.serviceName),is=(qe,tt)=>qe.filter(nt=>tt.spanNameOperator==="="?nt.operationName===tt.spanName:nt.operationName!==tt.spanName),ai=(qe,tt)=>{const nt=go(tt?.from||""),ut=go(tt?.to||"");let Ot=[];if(nt&&(Ot=qe.filter(Wt=>tt.fromOperator===">"?Wt.duration>nt:Wt.duration>=nt)),ut){const Wt=Kt=>tt.toOperator==="<"?Kt.duration<ut:Kt.duration<=ut;Ot=Ot.length>0?Ot.filter(Kt=>Wt(Kt)):qe.filter(Kt=>Wt(Kt))}return Ot},go=qe=>{if(qe.includes("ns"))return parseFloat(qe.split("ns")[0])/1e3;if(qe.includes("us"))return parseFloat(qe.split("us")[0]);if(qe.includes("\xB5s"))return parseFloat(qe.split("\xB5s")[0]);if(qe.includes("ms"))return parseFloat(qe.split("ms")[0])*1e3;if(qe.includes("s"))return parseFloat(qe.split("s")[0])*1e3*1e3;if(qe.includes("m"))return parseFloat(qe.split("m")[0])*1e3*1e3*60;if(qe.includes("h"))return parseFloat(qe.split("h")[0])*1e3*1e3*60*60},fi=(0,n.memo)(function(tt){const{trace:nt,search:ut,spanFilterMatches:Ot,showSpanFilterMatchesOnly:Wt,setShowSpanFilterMatchesOnly:Kt,showCriticalPathSpansOnly:tn,setShowCriticalPathSpansOnly:un,focusedSpanIndexForSearch:yn,setFocusedSpanIndexForSearch:$n,setFocusedSpanIdForSearch:na,datasourceType:Qn,clear:Jn,showSpanFilters:ba}=tt,ha=(0,g.of)(wi),Aa=(0,n.useMemo)(()=>ut.serviceName&&ut.serviceName!==""||ut.spanName&&ut.spanName!==""||go(ut.from||"")||go(ut.to||"")||ut.tags.length>1||ut.tags.some(ma=>ma.key)||ut.query&&ut.query!==""||Wt,[ut.serviceName,ut.spanName,ut.from,ut.to,ut.tags,ut.query,Wt]);return n.createElement("div",{className:ha.container},n.createElement("div",{className:ha.controls},n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(ke.$n,{variant:"destructive",disabled:!Aa,type:"button",fill:"outline","aria-label":"Clear filters button",onClick:Jn},"Clear"),n.createElement("div",{className:ha.matchesOnly},n.createElement(mi.d,{value:Wt,onChange:ma=>Kt(ma.currentTarget.checked??!1),label:"Show matches only switch",disabled:!Ot?.size}),n.createElement(ke.$n,{onClick:()=>Kt(!Wt),className:ha.clearMatchesButton,variant:"secondary",fill:"text",disabled:!Ot?.size},"Show matches only")),n.createElement("div",{className:ha.matchesOnly},n.createElement(mi.d,{value:tn,onChange:ma=>un(ma.currentTarget.checked??!1),label:"Show critical path only switch"}),n.createElement(ke.$n,{onClick:()=>un(!tn),className:ha.clearMatchesButton,variant:"secondary",fill:"text"},"Show critical path only"))),n.createElement("div",{className:ha.nextPrevResult},n.createElement(Ni,{trace:nt,spanFilterMatches:Ot,setFocusedSpanIdForSearch:na,focusedSpanIndexForSearch:yn,setFocusedSpanIndexForSearch:$n,datasourceType:Qn,showSpanFilters:ba})))))}),wi=qe=>{const tt=(0,ke.hs)({theme:qe,variant:"secondary",size:"md",iconOnly:!1,fill:"outline"});return{button:(0,t.css)(tt.button),buttonDisabled:(0,t.css)(tt.disabled,{pointerEvents:"none",cursor:"not-allowed"}),container:(0,t.css)`
      display: inline;
    `,controls:(0,t.css)`
      display: flex;
      justify-content: flex-end;
      margin: 5px 0 0 0;
    `,matchesOnly:(0,t.css)`
      display: inline-flex;
      margin: 0 0 0 25px;
      vertical-align: middle;
      align-items: center;
    `,clearMatchesButton:(0,t.css)`
      color: ${qe.colors.text.primary};

      &:hover {
        background: inherit;
      }
    `,nextPrevResult:(0,t.css)`
      margin-left: auto;
      display: flex;
      align-items: center;
    `}},gi=(0,n.memo)(qe=>{const{trace:tt,search:nt,setSearch:ut,showSpanFilters:Ot,setShowSpanFilters:Wt,showSpanFilterMatchesOnly:Kt,setShowSpanFilterMatchesOnly:tn,showCriticalPathSpansOnly:un,setShowCriticalPathSpansOnly:yn,setFocusedSpanIdForSearch:$n,spanFilterMatches:na,datasourceType:Qn}=qe,Jn={...(0,g.of)(Fi)},[ba,ha]=(0,n.useState)(),[Aa,ma]=(0,n.useState)(),[Ua,Ja]=(0,n.useState)(),[da,Za]=(0,n.useState)({}),[es,Os]=(0,n.useState)(-1),Rs=/^\d+(?:\.\d)?\d*(?:ns|us|µs|ms|s|m|h)$/,Xs=(0,n.useCallback)(()=>{ha(void 0),ma(void 0),Ja(void 0),Za({}),ut(Po.Ji),tn(!1)},[ut,tn]);if((0,n.useEffect)(()=>{Xs()},[Xs,tt]),!tt)return null;const Ds=qn=>{Os(-1),$n(""),ut(qn)},Br=()=>{if(!ba){const qn=tt.spans.map(pa=>pa.process.serviceName);ha((0,ve.uniq)(qn).sort().map(ur.z))}},mr=()=>{if(!Aa){const qn=tt.spans.map(pa=>pa.operationName);ma((0,ve.uniq)(qn).sort().map(ur.z))}},Zs=()=>{if(!Ua){let qn=[],pa=[];tt.spans.forEach(Wa=>{Wa.tags.forEach(os=>{qn.push(os.key)}),Wa.process.tags.forEach(os=>{qn.push(os.key)}),Wa.logs!==null&&Wa.logs.forEach(os=>{os.fields.forEach(Nr=>{pa.push(Nr.key)})}),Wa.kind&&qn.push(Dt),Wa.statusCode!==void 0&&qn.push(It),Wa.statusMessage&&qn.push(jt),Wa.instrumentationLibraryName&&qn.push(Vt),Wa.instrumentationLibraryVersion&&qn.push(_t),Wa.traceState&&qn.push(rt),qn.push(St)}),qn=(0,ve.uniq)(qn).sort(),pa=(0,ve.uniq)(pa).sort(),Ja([...qn,...pa].map(ur.z))}},sr=async qn=>{const pa=[];return tt.spans.forEach(Wa=>{const os=Wa.tags.find(js=>js.key===qn)?.value;os&&pa.push(os.toString());const Nr=Wa.process.tags.find(js=>js.key===qn)?.value;switch(Nr&&pa.push(Nr.toString()),Wa.logs!==null&&Wa.logs.forEach(js=>{const vr=js.fields.find(ls=>ls.key===qn)?.value;vr&&pa.push(vr.toString())}),qn){case Dt:Wa.kind&&pa.push(Wa.kind);break;case It:Wa.statusCode!==void 0&&pa.push(Le.s[Wa.statusCode].toLowerCase());break;case jt:Wa.statusMessage&&pa.push(Wa.statusMessage);break;case Vt:Wa.instrumentationLibraryName&&pa.push(Wa.instrumentationLibraryName);break;case _t:Wa.instrumentationLibraryVersion&&pa.push(Wa.instrumentationLibraryVersion);break;case rt:Wa.traceState&&pa.push(Wa.traceState);break;case St:pa.push(Wa.spanID);break;default:break}}),(0,ve.uniq)(pa).sort().map(ur.z)},Ur=(qn,pa)=>{ut({...nt,tags:nt.tags?.map(os=>os.id===qn.id?{...os,key:pa?.value||"",value:void 0}:os)}),(async()=>{if(pa?.value)Za({...da,[qn.id]:await sr(pa.value)});else{const os={...da};os[qn.id]&&delete os[qn.id],Za(os)}})()},Cr=()=>{const qn={id:(0,Po.zE)(),operator:"="};ut({...nt,tags:[...nt.tags,qn]})},Gr=qn=>{let pa=nt.tags.filter(Wa=>Wa.id!==qn);pa.length===0&&(pa=[{id:(0,Po.zE)(),operator:"="}]),ut({...nt,tags:pa})},as=n.createElement(n.Fragment,null,n.createElement(we.m,{content:"Filter your spans below. You can continue to apply filters until you have narrowed down your resulting spans to the select few you are most interested in.",placement:"right"},n.createElement("span",{className:Jn.collapseLabel},"Span Filters",n.createElement(Te.I,{size:"md",name:"info-circle"}))),!Ot&&n.createElement("div",{className:Jn.nextPrevResult},n.createElement(Ni,{trace:tt,spanFilterMatches:na,setFocusedSpanIdForSearch:$n,focusedSpanIndexForSearch:es,setFocusedSpanIndexForSearch:Os,datasourceType:Qn,showSpanFilters:Ot})));return n.createElement("div",{className:Jn.container},n.createElement(al.S,{label:as,collapsible:!0,isOpen:Ot,onToggle:Wt},n.createElement(ei.C,{className:Jn.flexContainer},n.createElement(Wr.I,{label:"Service Name",labelWidth:16},n.createElement(ti.Gy,{spacing:"xs"},n.createElement(ao.l6,{"aria-label":"Select service name operator",onChange:qn=>Ds({...nt,serviceNameOperator:qn.value}),options:[(0,ur.z)("="),(0,ur.z)("!=")],value:nt.serviceNameOperator}),n.createElement(ao.l6,{"aria-label":"Select service name",isClearable:!0,onChange:qn=>Ds({...nt,serviceName:qn?.value||""}),onOpenMenu:Br,options:ba,placeholder:"All service names",value:nt.serviceName||null}))),n.createElement(kr,{onChange:qn=>{Ds({...nt,query:qn}),qn===""&&tn(!1)},value:nt.query||""})),n.createElement(ei.C,null,n.createElement(Wr.I,{label:"Span Name",labelWidth:16},n.createElement(ti.Gy,{spacing:"xs"},n.createElement(ao.l6,{"aria-label":"Select span name operator",onChange:qn=>Ds({...nt,spanNameOperator:qn.value}),options:[(0,ur.z)("="),(0,ur.z)("!=")],value:nt.spanNameOperator}),n.createElement(ao.l6,{"aria-label":"Select span name",isClearable:!0,onChange:qn=>Ds({...nt,spanName:qn?.value||""}),onOpenMenu:mr,options:Aa,placeholder:"All span names",value:nt.spanName||null})))),n.createElement(ei.C,null,n.createElement(Wr.I,{label:"Duration",labelWidth:16,tooltip:"Filter by duration. Accepted units are ns, us, ms, s, m, h"},n.createElement(ti.Gy,{spacing:"xs",align:"flex-start"},n.createElement(ao.l6,{"aria-label":"Select min span operator",onChange:qn=>Ds({...nt,fromOperator:qn.value}),options:[(0,ur.z)(">"),(0,ur.z)(">=")],value:nt.fromOperator}),n.createElement("div",{className:Jn.intervalInput},n.createElement(nl.e,{ariaLabel:"Select min span duration",onChange:qn=>Ds({...nt,from:qn}),isInvalidError:"Invalid duration",placeholder:"e.g. 100ms, 1.2s",width:18,value:nt.from||"",validationRegex:Rs})),n.createElement(ao.l6,{"aria-label":"Select max span operator",onChange:qn=>Ds({...nt,toOperator:qn.value}),options:[(0,ur.z)("<"),(0,ur.z)("<=")],value:nt.toOperator}),n.createElement(nl.e,{ariaLabel:"Select max span duration",onChange:qn=>Ds({...nt,to:qn}),isInvalidError:"Invalid duration",placeholder:"e.g. 100ms, 1.2s",width:18,value:nt.to||"",validationRegex:Rs})))),n.createElement(ei.C,{className:Jn.tagsRow},n.createElement(Wr.I,{label:"Tags",labelWidth:16,tooltip:"Filter by tags, process tags or log fields in your spans."},n.createElement("div",null,nt.tags.map((qn,pa)=>n.createElement("div",{key:pa},n.createElement(ti.Gy,{spacing:"xs",width:"auto"},n.createElement(ao.l6,{"aria-label":"Select tag key",isClearable:!0,key:qn.key,onChange:Wa=>Ur(qn,Wa),onOpenMenu:Zs,options:Ua,placeholder:"Select tag",value:qn.key||null}),n.createElement(ao.l6,{"aria-label":"Select tag operator",onChange:Wa=>{Ds({...nt,tags:nt.tags?.map(os=>os.id===qn.id?{...os,operator:Wa.value}:os)})},options:[(0,ur.z)("="),(0,ur.z)("!=")],value:qn.operator}),n.createElement("span",{className:Jn.tagValues},n.createElement(ao.l6,{"aria-label":"Select tag value",isClearable:!0,key:qn.value,onChange:Wa=>{Ds({...nt,tags:nt.tags?.map(os=>os.id===qn.id?{...os,value:Wa?.value||""}:os)})},options:da[qn.id]?da[qn.id]:[],placeholder:"Select value",value:qn.value})),(qn.key||qn.value||nt.tags.length>1)&&n.createElement(tl.Z,{"aria-label":"Remove tag",variant:"secondary",icon:"times",onClick:()=>Gr(qn.id),tooltip:"Remove tag"}),(qn.key||qn.value)&&pa===nt.tags.length-1&&n.createElement("span",{className:Jn.addTag},n.createElement(tl.Z,{"aria-label":"Add tag",variant:"secondary",icon:"plus",onClick:Cr,tooltip:"Add tag"})))))))),n.createElement(fi,{trace:tt,search:nt,spanFilterMatches:na,showSpanFilterMatchesOnly:Kt,setShowSpanFilterMatchesOnly:tn,showCriticalPathSpansOnly:un,setShowCriticalPathSpansOnly:yn,setFocusedSpanIdForSearch:$n,focusedSpanIndexForSearch:es,setFocusedSpanIndexForSearch:Os,datasourceType:Qn,clear:Xs,showSpanFilters:Ot})))});gi.displayName="SpanFilters";const Fi=qe=>({container:(0,t.css)`
      label: SpanFilters;
      margin: 0.5em 0 -${qe.spacing(1)} 0;
      z-index: 5;

      & > div {
        border-left: none;
        border-right: none;
      }
    `,collapseLabel:(0,t.css)`
      svg {
        color: #aaa;
        margin: -2px 0 0 10px;
      }
    `,flexContainer:(0,t.css)({display:"flex",justifyContent:"space-between"}),addTag:(0,t.css)({marginLeft:qe.spacing(1)}),intervalInput:(0,t.css)`
      margin: 0 -4px 0 0;
    `,tagsRow:(0,t.css)`
      margin: -4px 0 0 0;
    `,tagValues:(0,t.css)`
      max-width: 200px;
    `,nextPrevResult:(0,t.css)`
      flex: 1;
      align-items: center;
      display: flex;
      justify-content: flex-end;
      margin-right: ${qe.spacing(1)};
    `}),sl=(0,n.memo)(qe=>{const{trace:tt,data:nt,app:ut,timeZone:Ot,search:Wt,setSearch:Kt,showSpanFilters:tn,setShowSpanFilters:un,showSpanFilterMatchesOnly:yn,setShowSpanFilterMatchesOnly:$n,showCriticalPathSpansOnly:na,setShowCriticalPathSpansOnly:Qn,setFocusedSpanIdForSearch:Jn,spanFilterMatches:ba,datasourceType:ha,setHeaderHeight:Aa}=qe,ma=(0,g.of)(co);(0,n.useEffect)(()=>{Aa(document.querySelector("."+ma.header)?.scrollHeight??0)},[Aa,tn,ma.header]);const Ua=(0,n.useMemo)(()=>tt?Ha(tt):[],[tt]);if(!tt)return null;const Ja=(Xs,Ds)=>{const Br=(0,_e.LE)(Xs.startTime/1e3,{timeZone:Ds,defaultWithMS:!0}),mr=Br.match(/^(.+)(:\d\d\.\d+)$/);return mr?n.createElement("span",{className:ma.TracePageHeaderOverviewItemValue},mr[1],n.createElement("span",{className:ma.TracePageHeaderOverviewItemValueDetail},mr[2])):Br},da=n.createElement("h1",{className:v()(ma.title)},n.createElement(Ga,{traceName:no(tt.spans)}),n.createElement("small",{className:ma.duration},(0,E.a3)(tt.duration))),{method:Za,status:es,url:Os}=jo(tt.spans);let Rs="green";return es&&es.length>0&&(es[0].value.toString().charAt(0)==="4"?Rs="orange":es[0].value.toString().charAt(0)==="5"&&(Rs="red")),n.createElement("header",{className:ma.header},n.createElement("div",{className:ma.titleRow},Ua&&Ua.length>0&&n.createElement(ln,{links:Ua,className:ma.TracePageHeaderBack}),da,n.createElement(el,{traceId:tt.traceID,data:nt,app:ut})),n.createElement("div",{className:ma.subtitle},n.createElement("span",{className:ma.timestamp},Ja(tt,Ot)),n.createElement("span",{className:ma.tagMeta},Za&&Za.length>0&&n.createElement(we.m,{content:"http.method",interactive:!0},n.createElement("span",{className:ma.tag},n.createElement(yo.E,{text:Za[0].value,color:"blue"}))),es&&es.length>0&&n.createElement(we.m,{content:"http.status_code",interactive:!0},n.createElement("span",{className:ma.tag},n.createElement(yo.E,{text:es[0].value,color:Rs}))),Os&&Os.length>0&&n.createElement(we.m,{content:"http.url or http.target or http.path",interactive:!0},n.createElement("span",{className:ma.url},Os[0].value)))),n.createElement(gi,{trace:tt,showSpanFilters:tn,setShowSpanFilters:un,showSpanFilterMatchesOnly:yn,setShowSpanFilterMatchesOnly:$n,showCriticalPathSpansOnly:na,setShowCriticalPathSpansOnly:Qn,search:Wt,setSearch:Kt,spanFilterMatches:ba,setFocusedSpanIdForSearch:Jn,datasourceType:ha}))});sl.displayName="TracePageHeader";const co=qe=>({TracePageHeaderBack:(0,t.css)`
      label: TracePageHeaderBack;
      align-items: center;
      align-self: stretch;
      background-color: #fafafa;
      border-bottom: 1px solid #ddd;
      border-right: 1px solid #ddd;
      color: inherit;
      display: flex;
      font-size: 1.4rem;
      padding: 0 1rem;
      margin-bottom: -1px;
      &:hover {
        background-color: #f0f0f0;
        border-color: #ccc;
      }
    `,TracePageHeaderOverviewItemValueDetail:v()((0,t.css)`
        label: TracePageHeaderOverviewItemValueDetail;
        color: #aaa;
      `,"trace-item-value-detail"),TracePageHeaderOverviewItemValue:(0,t.css)`
      label: TracePageHeaderOverviewItemValue;
      &:hover > .trace-item-value-detail {
        color: unset;
      }
    `,header:(0,t.css)`
      label: TracePageHeader;
      background-color: ${qe.colors.background.primary};
      padding: 0.5em 0 0 0;
      position: sticky;
      top: 0;
      z-index: 5;
    `,titleRow:(0,t.css)`
      align-items: flex-start;
      display: flex;
      padding: 0 8px;
    `,title:(0,t.css)`
      color: inherit;
      flex: 1;
      font-size: 1.7em;
      line-height: 1em;
    `,subtitle:(0,t.css)`
      flex: 1;
      line-height: 1em;
      margin: -0.5em 0.5em 0.75em 0.5em;
    `,tag:(0,t.css)`
      margin: 0 0.5em 0 0;
    `,duration:(0,t.css)`
      color: #aaa;
      margin: 0 0.75em;
    `,timestamp:(0,t.css)`
      vertical-align: middle;
    `,tagMeta:(0,t.css)`
      margin: 0 0.75em;
      vertical-align: text-top;
    `,url:(0,t.css)`
      margin: -2.5px 0.3em;
      height: 15px;
      overflow: hidden;
      word-break: break-all;
      line-height: 20px;
    `,TracePageHeaderTraceId:(0,t.css)`
      label: TracePageHeaderTraceId;
      white-space: nowrap;
      text-overflow: ellipsis;
      max-width: 30%;
      display: inline-block;
    `}),Wi="None",Ki="Duration",so="Tag";function $i({options:qe,onOptionsChange:tt}){const nt=useStyles2(Bo),ut=[Wi,Ki,so].map(toOption);return React.createElement("div",{className:css({width:"100%"})},React.createElement(InlineFieldRow,{className:nt.row},React.createElement(InlineField,{label:"Label",labelWidth:26,tooltip:"Default: duration",grow:!0},React.createElement(Select,{inputId:"label",options:ut,value:qe.jsonData.spanBar?.type||"",onChange:Ot=>{updateDatasourcePluginJsonDataOption({onOptionsChange:tt,options:qe},"spanBar",{...qe.jsonData.spanBar,type:Ot?.value??""})},placeholder:"Duration",isClearable:!0,"aria-label":"select-label-name",width:40}))),qe.jsonData.spanBar?.type===so&&React.createElement(InlineFieldRow,{className:nt.row},React.createElement(InlineField,{label:"Tag key",labelWidth:26,tooltip:"Tag key which will be used to get the tag value. A span's attributes and resources will be searched for the tag key"},React.createElement(Input,{type:"text",placeholder:"Enter tag key",onChange:Ot=>updateDatasourcePluginJsonDataOption({onOptionsChange:tt,options:qe},"spanBar",{...qe.jsonData.spanBar,tag:Ot.currentTarget.value}),value:qe.jsonData.spanBar?.tag||"",width:40}))))}const Lr=({options:qe,onOptionsChange:tt})=>{let nt=qe.type;return nt+=qe.type==="tempo"?"/configure-tempo-data-source/#span-bar":"/#span-bar",React.createElement(ConfigSubSection,{title:"Span bar",description:React.createElement(ConfigDescriptionLink,{description:"Add additional info next to the service and operation on a span bar row in the trace view.",suffix:nt,feature:"the span bar"})},React.createElement($i,{options:qe,onOptionsChange:tt}))},Bo=qe=>({infoText:css`
    label: infoText;
    padding-bottom: ${qe.spacing(2)};
    color: ${qe.colors.text.secondary};
  `,row:css`
    label: row;
    align-items: baseline;
  `});class Pr{constructor(tt){const{isTagsOpen:nt,isProcessOpen:ut,isReferencesOpen:Ot,isWarningsOpen:Wt,isStackTracesOpen:Kt,logs:tn,references:un}=tt||{};this.isTagsOpen=!!nt,this.isProcessOpen=!!ut,this.isReferencesOpen=!!Ot,this.isWarningsOpen=!!Wt,this.isStackTracesOpen=!!Kt,this.logs={isOpen:!!(tn&&tn.isOpen),openedItems:tn&&tn.openedItems?new Set(tn.openedItems):new Set},this.references={isOpen:!!(un&&un.isOpen),openedItems:un&&un.openedItems?new Set(un.openedItems):new Set}}toggleTags(){const tt=new Pr(this);return tt.isTagsOpen=!this.isTagsOpen,tt}toggleProcess(){const tt=new Pr(this);return tt.isProcessOpen=!this.isProcessOpen,tt}toggleReferences(){const tt=new Pr(this);return tt.references.isOpen=!this.references.isOpen,tt}toggleReferenceItem(tt){const nt=new Pr(this);return nt.references.openedItems.has(tt)?nt.references.openedItems.delete(tt):nt.references.openedItems.add(tt),nt}toggleWarnings(){const tt=new Pr(this);return tt.isWarningsOpen=!this.isWarningsOpen,tt}toggleStackTraces(){const tt=new Pr(this);return tt.isStackTracesOpen=!this.isStackTracesOpen,tt}toggleLogs(){const tt=new Pr(this);return tt.logs.isOpen=!this.logs.isOpen,tt}toggleLogItem(tt){const nt=new Pr(this);return nt.logs.openedItems.has(tt)?nt.logs.openedItems.delete(tt):nt.logs.openedItems.add(tt),nt}}var Uo=e(1081);class Hr{static iterFunction(tt,nt=0){return ut=>tt(ut.value,ut,nt)}static searchFunction(tt){return typeof tt=="function"?tt:(nt,ut)=>tt instanceof Hr?ut===tt:nt===tt}constructor(tt,nt=[]){this.value=tt,this.children=nt}get depth(){return this.children.reduce((tt,nt)=>Math.max(nt.depth+1,tt),1)}get size(){let tt=0;return this.walk(()=>tt++),tt}addChild(tt){return this.children.push(tt instanceof Hr?tt:new Hr(tt)),this}find(tt){if(Hr.iterFunction(Hr.searchFunction(tt))(this))return this;for(let ut=0;ut<this.children.length;ut++){const Ot=this.children[ut].find(tt);if(Ot)return Ot}return null}getPath(tt){const nt=Hr.iterFunction(Hr.searchFunction(tt)),ut=(Ot,Wt)=>{const Kt=Wt.concat([Ot]);if(nt(Ot))return Kt;for(let tn=0;tn<Ot.children.length;tn++){const un=Ot.children[tn],yn=ut(un,Kt);if(yn)return yn}return null};return ut(this,[])}walk(tt,nt=0){const ut=[];let Ot=nt;for(ut.push({node:this,depth:Ot});ut.length;){const Wt=ut[ut.length-1];ut.pop();const{node:Kt,depth:tn}=Wt;tt(Kt.value,Kt,tn),Ot=tn+1;let un=Kt.children.length-1;for(;un>=0;)ut.push({node:Kt.children[un],depth:Ot}),un--}}paths(tt){const nt=[];nt.push({node:this,childIndex:0});const ut=[];for(;nt.length;){const{node:Ot,childIndex:Wt}=nt[nt.length-1];if(Ot.children.length>=Wt+1)nt[nt.length-1].childIndex++,nt.push({node:Ot.children[Wt],childIndex:0});else{if(Ot.children.length===0){const Kt=nt.map(tn=>tn.node.value);tt(Kt)}nt.pop()}}return ut}}const Vi=qe=>qe.spanID,Dl=qe=>qe.references||[],Pl=(0,Uo.Mz)((0,Uo.Mz)(({span:qe})=>qe,Dl),({type:qe})=>qe,(qe,tt)=>qe.find(nt=>nt.refType===tt)),pi=(0,Uo.Mz)(qe=>Pl({span:qe,type:"CHILD_OF"}),qe=>qe?qe.spanID:null),po=qe=>qe.spans,Cl=(0,Uo.Mz)(po,qe=>qe.reduce((tt,nt)=>tt.set(Vi(nt),nt),new Map)),_i="__root__";function hi(qe,tt=null){const nt=new Map(qe.spans.map(Kt=>[Kt.spanID,new Hr(Kt.spanID)])),ut=tt??new Map(qe.spans.map(Kt=>[Kt.spanID,Kt])),Ot=new Hr(_i);qe.spans.forEach(Kt=>{const tn=nt.get(Kt.spanID);if(Array.isArray(Kt.references)&&Kt.references.length){const{refType:un,spanID:yn}=Kt.references[0];if(un==="CHILD_OF"||un==="FOLLOWS_FROM")(nt.get(yn)||Ot).children?.push(tn);else throw new Error(`Unrecognized ref type: ${un}`)}else Ot.children.push(tn)});const Wt=(Kt,tn)=>{const un=Kt?.value?ut.get(Kt.value.toString()):void 0,yn=tn?.value?ut.get(tn.value.toString()):void 0;return+(un?.startTime>yn?.startTime)||+(un?.startTime===yn?.startTime)-1};return qe.spans.forEach(Kt=>{const tn=nt.get(Kt.spanID);tn.children.length>1&&tn?.children.sort(Wt)}),Ot.children.sort(Wt),Ot}function si(qe){const tt=new Map,nt=qe.reduce((Ot,Wt)=>(Ot.some(Kt=>Kt.key===Wt.key&&Kt.value===Wt.value)?tt.set(`${Wt.key}:${Wt.value}`,`Duplicate tag "${Wt.key}:${Wt.value}"`):Ot.push(Wt),Ot),[]),ut=Array.from(tt.values());return{dedupedTags:nt,warnings:ut}}function vi(qe,tt){const nt=qe?.slice()??[],ut=(tt||[]).map(Ot=>Ot.toLowerCase());return nt.sort((Ot,Wt)=>{const Kt=Ot.key.toLowerCase(),tn=Wt.key.toLowerCase();for(let un=0;un<ut.length;un++){const yn=ut[un];if(Kt.startsWith(yn)&&!tn.startsWith(yn))return-1;if(!Kt.startsWith(yn)&&tn.startsWith(yn))return 1}return Kt>tn?1:Kt<tn?-1:0}),nt}function No(qe){if(!qe?.traceID)return null;const tt=qe.traceID.toLowerCase();let nt=0,ut=Number.MAX_SAFE_INTEGER;const Ot=new Map,Wt=new Map;qe.spans=qe.spans.filter(Qn=>!!Qn.startTime),qe.processes=Object.entries(qe.processes).reduce((Qn,[Jn,ba])=>(Qn[Jn]={...ba,tags:vi(ba.tags)},Qn),{});const Kt=qe.spans.length;for(let Qn=0;Qn<Kt;Qn++){const Jn=qe.spans[Qn],{startTime:ba,duration:ha,processID:Aa}=Jn;let ma=Jn.spanID;ba<ut&&(ut=ba),ba+ha>nt&&(nt=ba+ha);const Ua=Ot.get(ma);Ua!=null?(console.warn(`Dupe spanID, ${Ua+1} x ${ma}`,Jn,Wt.get(ma)),(0,ve.isEqual)(Jn,Wt.get(ma))&&console.warn("	 two spans with same ID have `isEqual(...) === true`"),Ot.set(ma,Ua+1),ma=`${ma}_${Ua}`,Jn.spanID=ma):Ot.set(ma,1),Jn.process=qe.processes[Aa],Wt.set(ma,Jn)}const tn=hi(qe,Wt),un=[],yn={};tn.walk((Qn,Jn,ba=0)=>{if(Qn==="__root__"||typeof Qn!="string")return;const ha=Wt.get(Qn);if(!ha)return;const{serviceName:Aa}=ha.process;yn[Aa]=(yn[Aa]||0)+1,ha.relativeStartTime=ha.startTime-ut,ha.depth=ba-1,ha.hasChildren=Jn.children.length>0,ha.childSpanCount=Jn.children.length,ha.warnings=ha.warnings||[],ha.tags=ha.tags||[],ha.references=ha.references||[],ha.childSpanIds=Jn.children.slice().sort((Ua,Ja)=>{const da=Wt.get(Ua.value),Za=Wt.get(Ja.value);return Za.startTime+Za.duration-(da.startTime+da.duration)}).map(Ua=>Ua.value);const ma=si(ha.tags);ha.tags=vi(ma.dedupedTags,ar("topTagPrefixes")),ha.warnings=ha.warnings.concat(ma.warnings),ha.references.forEach((Ua,Ja)=>{const da=Wt.get(Ua.spanID);da&&(Ua.span=da,Ja>0&&(da.subsidiarilyReferencedBy=da.subsidiarilyReferencedBy||[],da.subsidiarilyReferencedBy.push({spanID:Qn,traceID:tt,span:ha,refType:Ua.refType})))}),un.push(ha)});const $n=no(un);return{services:Object.keys(yn).map(Qn=>({name:Qn,numberOfSpans:yn[Qn]})),spans:un,traceID:tt,traceName:$n,processes:qe.processes,duration:nt-ut,startTime:ut,endTime:nt}}},92102:(Y,A,e)=>{"use strict";e.d(A,{N:()=>t});var t=(n=>(n.Logs="log",n.Traces="trace",n.Metrics="metric",n.Profiles="profile",n.Unknown="unknown",n))(t||{})},92151:(Y,A,e)=>{"use strict";e.d(A,{EUpdateTypes:()=>n,default:()=>r});var t=(g=>(g.DragEnd="DragEnd",g.DragMove="DragMove",g.DragStart="DragStart",g.MouseEnter="MouseEnter",g.MouseLeave="MouseLeave",g.MouseMove="MouseMove",g))(t||{});const n=t;var o=e(2543);const s=0;class r{constructor({getBounds:u,tag:d,resetBoundsOnResize:i=!0,...l}){this.resetBounds=()=>{this._bounds=void 0},this._handleMinorMouseEvent=f=>{const{button:c,clientX:h,type:p}=f;if(this._isDragging||c!==s)return;let m=null,a;if(p==="mouseenter")m=n.MouseEnter,a=this._onMouseEnter;else if(p==="mouseleave")m=n.MouseLeave,a=this._onMouseLeave;else if(p==="mousemove")m=n.MouseMove,a=this._onMouseMove;else throw new Error(`invalid event type: ${p}`);if(!a)return;const{value:v,x:E}=this._getPosition(h);a({event:f,type:m,value:v,x:E,manager:this,tag:this.tag})},this._handleDragEvent=f=>{const{button:c,clientX:h,type:p}=f;let m=null,a;if(p==="mousedown"){if(this._isDragging||c!==s)return;window.addEventListener("mousemove",this._handleDragEvent),window.addEventListener("mouseup",this._handleDragEvent);const D=(0,o.get)(document,"body.style");D&&(D.userSelect="none"),this._isDragging=!0,m=n.DragStart,a=this._onDragStart}else if(p==="mousemove"){if(!this._isDragging)return;m=n.DragMove,a=this._onDragMove}else if(p==="mouseup"){if(!this._isDragging)return;this._stopDragging(),m=n.DragEnd,a=this._onDragEnd}else throw new Error(`invalid event type: ${p}`);if(!a)return;const{value:v,x:E}=this._getPosition(h);a({event:f,type:m,value:v,x:E,manager:this,tag:this.tag})},this.handleMouseDown=this._handleDragEvent,this.handleMouseEnter=this._handleMinorMouseEvent,this.handleMouseMove=this._handleMinorMouseEvent,this.handleMouseLeave=this._handleMinorMouseEvent,this.getBounds=u,this.tag=d,this._isDragging=!1,this._bounds=void 0,this._resetBoundsOnResize=!!i,this._resetBoundsOnResize&&window.addEventListener("resize",this.resetBounds),this._onMouseEnter=l.onMouseEnter,this._onMouseLeave=l.onMouseLeave,this._onMouseMove=l.onMouseMove,this._onDragStart=l.onDragStart,this._onDragMove=l.onDragMove,this._onDragEnd=l.onDragEnd}_getBounds(){return this._bounds||(this._bounds=this.getBounds(this.tag)),this._bounds}_getPosition(u){const{clientXLeft:d,maxValue:i,minValue:l,width:f}=this._getBounds();let c=u-d,h=c/f;return l!=null&&h<l?(h=l,c=l*f):i!=null&&h>i&&(h=i,c=i*f),{value:h,x:c}}_stopDragging(){window.removeEventListener("mousemove",this._handleDragEvent),window.removeEventListener("mouseup",this._handleDragEvent);const u=(0,o.get)(document,"body.style");u&&(u.userSelect="auto"),this._isDragging=!1}isDragging(){return this._isDragging}dispose(){this._isDragging&&this._stopDragging(),this._resetBoundsOnResize&&window.removeEventListener("resize",this.resetBounds),this._bounds=void 0,this._onMouseEnter=void 0,this._onMouseLeave=void 0,this._onMouseMove=void 0,this._onDragStart=void 0,this._onDragMove=void 0,this._onDragEnd=void 0}}},30700:(Y,A,e)=>{"use strict";e.d(A,{Kv:()=>d,rY:()=>i});var t=e(41811),n=e(84140),o=e(24284);function s(f){if(f.length!==7)return[0,0,0];const c=f.slice(1,3),h=f.slice(3,5),p=f.slice(5);return[parseInt(c,16),parseInt(h,16),parseInt(p,16)]}class r{constructor(c,h){const p=l(c,h);this.colorsHex=p,this.colorsRgb=p.map(s),this.cache=new Map,this.prevColorIndex=void 0}_getColorIndex(c){let h=this.cache.get(c);if(h==null){const p=this.hashCode(c?c.toLowerCase():"");if(h=Math.abs(p%this.colorsHex.length),this.prevColorIndex!==void 0){this.prevColorIndex===h&&(h=this.getNextIndex(h));const m=this.colorsHex[this.prevColorIndex];if(n.A.readability(m,this.colorsHex[h])<1.5){let a=h;for(let v=0;v<this.colorsHex.length;v++)if(a=this.getNextIndex(a),n.A.readability(m,this.colorsHex[a])>1.5){h=a;break}}}this.cache.set(c,h),this.prevColorIndex=h}return h}getNextIndex(c){return c+1<this.colorsHex.length?c+1:0}hashCode(c){let h=0,p,m;for(p=0;p<c.length;p++)m=c.charCodeAt(p),h=(h<<5)-h+m;return h}getColorByKey(c){const h=this._getColorIndex(c);return this.colorsHex[h]}getRgbColorByKey(c){const h=this._getColorIndex(c);return this.colorsRgb[h]}clear(){this.cache.clear()}}const g=(0,t.A)((f,c)=>new r(f,c));function u(f){g([],f)}function d(f,c){return g(o.Tj,c).getColorByKey(f)}function i(f,c){return g(o.Tj,c).getRgbColorByKey(f)}function l(f,c){const h=[...f],p=h.indexOf("#E24D42");p>-1&&h.splice(p,1);const m=f.indexOf("#BF1B00");m>-1&&h.splice(m,1);let a=[];for(const v of h)n.A.readability(c.colors.background.primary,v)>=3&&a.push(v);return a}},6389:(Y,A,e)=>{"use strict";e.d(A,{a3:()=>D});var t=e(2543),n=e.n(t),o=e(84743),s=e.n(o);const r="YYYY-MM-DD",g="HH:mm",u=1e3,d=1e3*u,i=60*d,l=60*i,f=24*l,c=Math.log10(u),h=[{unit:"d",microseconds:f,ofPrevious:24},{unit:"h",microseconds:l,ofPrevious:60},{unit:"m",microseconds:i,ofPrevious:60},{unit:"s",microseconds:d,ofPrevious:1e3},{unit:"ms",microseconds:u,ofPrevious:1e3},{unit:"\u03BCs",microseconds:1,ofPrevious:1e3}],p=(b,P,y)=>toFloatPrecision(b/y,P)*y;function m(b){return moment(b/u).format(r)}function a(b){return moment(b/u).format(g)}function v(b){const P=p(b,c,u);return`${moment.duration(P/u).asMilliseconds()}ms`}function E(b){const P=p(b,c,d);return`${moment.duration(P/u).asSeconds()}s`}function D(b){const[P,y]=(0,t.dropWhile)(h,({microseconds:S},O)=>O<h.length-1&&S>b);if(P.ofPrevious===1e3)return`${(0,t.round)(b/P.microseconds,2)}${P.unit}`;const M=`${Math.floor(b/P.microseconds)}${P.unit}`,I=Math.round(b/y.microseconds%P.ofPrevious),x=`${I}${y.unit}`;return I===0?M:`${M} ${x}`}},28114:(Y,A,e)=>{"use strict";e.d(A,{Cr:()=>I,QW:()=>p,_o:()=>P,gt:()=>T,hv:()=>M,i0:()=>h,lU:()=>l});var t=e(96540),n=e(6709),o=e(65879),s=e(47232),r=e(72574),g=e(14578),u=e(31193),d=e(96192),i=e(92102);function l({splitOpenFn:x,traceToLogsOptions:S,traceToMetricsOptions:O,traceToProfilesOptions:C,dataFrame:L,createFocusSpanLink:U,trace:R}){if(!L)return;let B=T(R.duration,R.traceName,R.traceID);const H=L.fields.some(N=>!!N.config.links?.length),W=m(x,L.fields[0],S,O,U,B);return function(V){let G=W(V);if(H){B={...B,...M(V),...I(V,C)};const _=L.fields.filter(K=>!!K.config.links?.length);try{let K;C?.datasourceUid&&(K=(0,u.tR)().getInstanceSettings(C.datasourceUid));const j=K?.type==="grafana-pyroscope-datasource",k=V.tags.some(Z=>Z.key===p),Q=j&&k;let ee=[];_.forEach(Z=>{const ne=(0,d.QL)({field:Z,rowIndex:V.dataFrameRowIndex,splitOpenFn:x,range:y(V,void 0,void 0,Q),dataFrame:L,vars:B});ee=ee.concat(ne)});const ae=ee.map(Z=>({title:Z.title,href:Z.href,onClick:Z.onClick,content:t.createElement(g.I,{name:"link",title:Z.title||"Link"}),field:Z.origin,type:Q?i.N.Profiles:i.N.Unknown}));G.push.apply(G,ae)}catch(K){return console.error(K),G}}return G}}const f=x=>x.map(S=>({key:S,value:S.includes(".")?S.replace(".","_"):void 0})),c=f(["cluster","hostname","namespace","pod","service.name","service.namespace"]),h=f(["service.name","service.namespace"]),p="pyroscope.profile.id";function m(x,S,O,C,L,U){let R;O?.datasourceUid&&(R=(0,u.tR)().getInstanceSettings(O.datasourceUid));const B=R?.type==="grafana-splunk-datasource";let H;return C?.datasourceUid&&(H=(0,u.tR)().getInstanceSettings(C.datasourceUid)),function(N){U={...U,...M(N)};const V=[];let G,_="";if(R&&O){const K=O.customQuery?O.query:void 0,j=O.tags&&O.tags.length>0?O.tags:c;switch(R?.type){case"loki":_=P(N,j),G=a(N,O,_,K);break;case"grafana-splunk-datasource":_=P(N,j,{joinBy:" "}),G=E(N,O,_,K);break;case"elasticsearch":case"grafana-opensearch-datasource":_=P(N,j,{labelValueSign:":",joinBy:" AND "}),G=v(N,O,_,K);break;case"grafana-falconlogscale-datasource":_=P(N,j,{joinBy:" OR "}),G=b(N,O,_,K);break;case"googlecloud-logging-datasource":_=P(N,j,{joinBy:" AND "}),G=D(N,O,_,K)}if(G){const k={title:R.name,url:"",internal:{datasourceUid:R.uid,datasourceName:R.name,query:G}};if(U={...U,__tags:{text:"Tags",value:_}},(0,d.O1)(k.internal.query,U).allVariablesDefined){const Q=(0,n.u)({link:k,internalLink:k.internal,scopedVars:U,range:y(N,{startMs:O.spanStartTimeShift?o.intervalToMs(O.spanStartTimeShift):0,endMs:O.spanEndTimeShift?o.intervalToMs(O.spanEndTimeShift):0},B),field:{},onClickFn:x,replaceVariables:(0,r.w)().replace.bind((0,r.w)())});V.push({href:Q.href,title:"Related logs",onClick:Q.onClick,content:t.createElement(g.I,{name:"gf-logs",title:"Explore the logs for this in split view"}),field:S,type:i.N.Logs})}}}if(H&&C?.queries)for(const K of C.queries){const j=K.query||`histogram_quantile(0.5, sum(rate(traces_spanmetrics_latency_bucket{service="${N.process.serviceName}"}[5m])) by (le))`,k={title:H.name,url:"",internal:{datasourceUid:H.uid,datasourceName:H.name,query:{expr:j,refId:"A"}}},Q=C.tags&&C.tags.length>0?C.tags:c;U={...U,__tags:{text:"Tags",value:P(N,Q)}};const ee=(0,n.u)({link:k,internalLink:k.internal,scopedVars:U,range:y(N,{startMs:C.spanStartTimeShift?o.intervalToMs(C.spanStartTimeShift):-12e4,endMs:C.spanEndTimeShift?o.intervalToMs(C.spanEndTimeShift):12e4}),field:{},onClickFn:x,replaceVariables:(0,r.w)().replace.bind((0,r.w)())});V.push({title:K?.name,href:ee.href,onClick:ee.onClick,content:t.createElement(g.I,{name:"chart-line",title:"Explore metrics for this span"}),field:S,type:i.N.Metrics})}if(N.references&&L)for(const K of N.references){if(K.refType==="CHILD_OF")continue;const j=L(K.traceID,K.spanID);V.push({href:j.href,title:K.span?K.span.operationName:"View linked span",content:t.createElement(g.I,{name:"link",title:"View linked span"}),onClick:j.onClick,field:j.origin,type:i.N.Traces})}if(N.subsidiarilyReferencedBy&&L)for(const K of N.subsidiarilyReferencedBy){const j=L(K.traceID,K.spanID);V.push({href:j.href,title:K.span?K.span.operationName:"View linked span",content:t.createElement(g.I,{name:"link",title:"View linked span"}),onClick:j.onClick,field:j.origin,type:i.N.Traces})}return V}}function a(x,S,O,C){const{filterByTraceID:L,filterBySpanID:U}=S;if(C)return{expr:C,refId:""};if(!O)return;let R="{${__tags}}";return L&&x.traceID&&(R+=' |="${__span.traceId}"'),U&&x.spanID&&(R+=' |="${__span.spanId}"'),{expr:R,refId:""}}function v(x,S,O,C){const{filterByTraceID:L,filterBySpanID:U}=S;if(C)return{query:C,refId:"",metrics:[{id:"1",type:"logs"}]};let R=[];return U&&x.spanID&&R.push('"${__span.spanId}"'),L&&x.traceID&&R.push('"${__span.traceId}"'),O&&R.push("${__tags}"),{query:R.join(" AND "),refId:"",metrics:[{id:"1",type:"logs"}]}}function E(x,S,O,C){const{filterByTraceID:L,filterBySpanID:U}=S;if(C)return{query:C,refId:""};let R="";return O&&(R+="${__tags}"),L&&x.traceID&&(R+=' "${__span.traceId}"'),U&&x.spanID&&(R+=' "${__span.spanId}"'),{query:R,refId:""}}function D(x,S,O,C){const{filterByTraceID:L,filterBySpanID:U}=S;if(C)return{query:C,refId:""};let R=[];return U&&x.spanID&&R.push('"${__span.spanId}"'),L&&x.traceID&&R.push('"${__span.traceId}"'),O&&R.push("${__tags}"),{query:R.join(" AND "),refId:""}}function b(x,S,O,C){const{filterByTraceID:L,filterBySpanID:U}=S;if(C)return{lsql:C,refId:""};if(!O)return;let R="${__tags}";return L&&x.traceID&&(R+=' or "${__span.traceId}"'),U&&x.spanID&&(R+=' or "${__span.spanId}"'),{lsql:R,refId:""}}function P(x,S,{labelValueSign:O="=",joinBy:C=", "}={}){return[...x.process.tags,...x.tags,{key:"spanId",value:x.spanID},{key:"traceId",value:x.traceID},{key:"name",value:x.operationName},{key:"duration",value:x.duration}].map(L=>{const U=S.find(R=>R.key===L.key);if(U)return`${U.value?U.value:U.key}${O}"${L.value}"`}).filter(L=>!!L).join(C)}function y(x,S={startMs:0,endMs:0},O=!1,C=!1){let L=Math.floor(x.startTime/1e3+S.startMs);const U=(x.startTime+x.duration)/1e3;let R=Math.floor(U+S.endMs);O&&R-L<1e3?R=L+1e3:C?(L=L-6e4,R=R+6e4):L===R&&R++;const B=(0,s.KQ)(R),H=(0,s.KQ)(L);return{from:H,to:B,raw:{from:H,to:B}}}function T(x,S,O){return{__trace:{text:"Trace",value:{duration:x,name:S,traceId:O}}}}function M(x){const S={};for(const O of x.process.tags)S[O.key]=O.value;for(const O of x.tags)S[O.key]=O.value;return{__span:{text:"Span",value:{spanId:x.spanID,traceId:x.traceID,duration:x.duration,name:x.operationName,tags:S}}}}function I(x,S){let O={};if(S){const C=S.tags&&S.tags.length>0?S.tags:h;O={__tags:{text:"Tags",value:P(x,C)}}}return O}},15583:(Y,A,e)=>{"use strict";e.d(A,{Ji:()=>g,SQ:()=>u,zE:()=>s});var t=e(96540),n=e(62938),o=e(50248);const s=()=>(0,n.A)().slice(0,12),g={spanNameOperator:"=",serviceNameOperator:"=",fromOperator:">",toOperator:"<",tags:[{id:s(),operator:"="}]};function u(d){const[i,l]=(0,t.useState)(g),f=(0,t.useMemo)(()=>d&&(0,o.filterSpans)(i,d),[i,d]);return{search:i,setSearch:l,spanFilterMatches:f}}},35090:(Y,A,e)=>{"use strict";e.d(A,{L:()=>o});var t=e(78368),n=e(50248);function o(r){if(!r)return null;let g=r.fields.length===1?r.fields[0].values[0]:s(r);return g?(0,n.transformTraceData)(g):null}function s(r){const g=new t.R(r),u={};for(let d=0;d<g.length;d++){const i=g.get(d);if(!i.spanID)return null;u[i.spanID]||(u[i.spanID]={serviceName:i.serviceName,tags:i.serviceTags})}return{traceID:g.get(0).traceID,processes:u,spans:g.toArray().map((d,i)=>{const l=[];return d.parentSpanID&&l.push({refType:"CHILD_OF",spanID:d.parentSpanID,traceID:d.traceID}),d.references&&l.push(...d.references.map(f=>({refType:"FOLLOWS_FROM",...f}))),{...d,duration:d.duration*1e3,startTime:d.startTime*1e3,processID:d.spanID,flags:0,references:l,logs:d.logs?.map(f=>({...f,timestamp:f.timestamp*1e3}))||[],dataFrameRowIndex:i}})}}},11140:(Y,A,e)=>{"use strict";e.d(A,{v:()=>U});var t=e(2543),n=e(96540),o=e(49785),s=e(71733),r=e(14110),g=e(12131),u=e(32264),d=e(16504),i=e(88575),l=e(94354),f=e(42418),c=e(37390),h=e(55852),p=e(59429),m=e(16233),a=e(79999),v=e(80348),E=e(9955),D=e(27677),b=e(71176),P=(R=>(R.FETCH_DASHBOARD="fetch-dashboard",R.SET_DASHBOARD_LS="set-dashboard-ls-error",R))(P||{});function y(R,B){let H=[];return R==="table"&&B.panelState?.logs?.columns&&(B.panelState.logs?.labelFieldName&&H.push({id:"extractFields",options:{source:B.panelState.logs.labelFieldName}}),H.push({id:"organize",options:{indexByName:Object.values(B.panelState.logs.columns).reduce((W,N,V)=>({...W,[N]:V}),{}),includeByName:Object.values(B.panelState.logs.columns).reduce((W,N)=>({...W,[N]:!0}),{})}})),H}async function T(R){const B=x(R.queries,R.queryResponse,R?.panelState),H={targets:R.queries,type:B,title:"New Panel",gridPos:{x:0,y:0,w:12,h:8},datasource:R.datasource,transformations:y(B,R)};let W;if(R.dashboardUid)try{W=await D.IB.getDashboardByUid(R.dashboardUid)}catch{throw"fetch-dashboard"}else W=(0,b.X)();W.dashboard.panels=[H,...W.dashboard.panels??[]],W.dashboard.time=R.time;try{(0,a.OI)(W)}catch{throw"set-dashboard-ls-error"}}const M=R=>!R.hide,I=R=>B=>B.refId===R;function x(R,B,H){for(const{refId:W}of R.filter(M)){const N=I(W);if(B.flameGraphFrames.some(N))return"flamegraph";if(B.graphFrames.some(N))return"timeseries";if(B.logsFrames.some(N))return H?.logs?.visualisationType?H.logs.visualisationType:"logs";if(B.nodeGraphFrames.some(N))return"nodeGraph";if(B.traceFrames.some(N))return"traces";if(B.customFrames.some(N))return B.customFrames.find(N)?.meta?.preferredVisualisationPluginId??"table"}return"table"}var S=(R=>(R.NewDashboard="new-dashboard",R.ExistingDashboard="existing-dashboard",R))(S||{});function O(R){}function C(R){return R?`d/${R}`:"dashboard/new"}var L=(R=>(R.UNKNOWN="unknown-error",R.NAVIGATION="navigation-error",R))(L||{});function U(R){const{exploreId:B,onClose:H}=R,W=(0,v.useSelector)((0,E.qq)(B)),[N,V]=(0,n.useState)(),{handleSubmit:G,control:_,formState:{errors:K},watch:j}=(0,o.mN)({defaultValues:{saveTarget:"new-dashboard"}}),k=m.TP.hasPermission(v.AccessControlAction.DashboardsCreate),Q=m.TP.hasPermission(v.AccessControlAction.DashboardsWrite),ee=[];k&&ee.push({label:"New dashboard",value:"new-dashboard"}),Q&&ee.push({label:"Existing dashboard",value:"existing-dashboard"});const ae=ee.length>1?j("saveTarget"):ee[0].value,Z=async(ne,q)=>{V(void 0);const te=q.saveTarget==="existing-dashboard"?q.dashboardUid:void 0;(0,r.rR)("e_2_d_submit",{newTab:ne,saveTarget:q.saveTarget,queries:W.queries.length});const{from:re,to:de}=W.range.raw;try{await T({dashboardUid:te,datasource:W.datasourceInstance?.getRef(),queries:W.queries,queryResponse:W.queryResponse,panelState:W?.panelsState,time:{from:typeof re=="string"?re:re.toISOString(),to:typeof de=="string"?de:de.toISOString()}})}catch(ve){switch(ve){case P.FETCH_DASHBOARD:V({error:ve,message:"Could not fetch dashboard information. Please try again."});break;case P.SET_DASHBOARD_LS:V({error:ve,message:"Could not add panel to dashboard. Please try again."});break;default:V({error:"unknown-error",message:"Something went wrong. Please try again."})}return}const ie=C(te);if(!ne){H(),g.Ny.push(s.I.stripBaseFromUrl(ie));return}if(!!!e.g.open(u.$.appUrl+ie,"_blank")){V({error:"navigation-error",message:"Could not navigate to the selected dashboard. Please try again."}),(0,a.yZ)();return}H()};return(0,n.useEffect)(()=>{(0,r.rR)("e_2_d_open")},[]),n.createElement("form",null,ee.length>1&&n.createElement(d.e,{control:_,render:({field:{ref:ne,...q}})=>n.createElement(i.D,{label:"Target dashboard",description:"Choose where to add the panel."},n.createElement(l.z,{options:ee,...q,id:"e2d-save-target"})),name:"saveTarget"}),ae==="existing-dashboard"&&(()=>n.createElement(d.e,{render:({field:{ref:ne,value:q,onChange:te,...re}})=>n.createElement(i.D,{label:"Dashboard",description:"Select in which dashboard the panel will be created.",error:K.dashboardUid?.message,invalid:!!K.dashboardUid},n.createElement(p.b,{...re,inputId:"e2d-dashboard-picker",defaultOptions:!0,onChange:de=>te(de?.uid)})),control:_,name:"dashboardUid",shouldUnregister:!0,rules:{required:{value:!0,message:"This field is required."}}}))(),N&&n.createElement(f.F,{severity:"error",title:"Error adding the panel"},N.message),n.createElement(c.a.ButtonRow,null,n.createElement(h.$n,{type:"reset",onClick:H,fill:"outline",variant:"secondary"},"Cancel"),n.createElement(h.$n,{type:"submit",variant:"secondary",onClick:G((0,t.partial)(Z,!0)),icon:"external-link-alt"},"Open in new tab"),n.createElement(h.$n,{type:"submit",variant:"primary",onClick:G((0,t.partial)(Z,!1)),icon:"apps"},"Open dashboard")))}},12881:(Y,A,e)=>{"use strict";e.d(A,{t:()=>o});var t=e(16233),n=e(80348);function o(){const s=t.TP.hasPermission(n.AccessControlAction.DashboardsCreate),r=t.TP.hasPermission(n.AccessControlAction.DashboardsWrite);return s&&!r?"Add panel to new dashboard":r&&!s?"Add panel to existing dashboard":"Add panel to dashboard"}},24401:(Y,A,e)=>{"use strict";e.d(A,{s:()=>u});var t=e(96540),n=e(71733),o=e(12131),s=e(37390),r=e(66864),g=e(55852);function u(d){const{onDismiss:i,path:l,title:f}=d,c=()=>{e.g.open(n.I.assureBaseUrl(l),"_blank"),i()},h=()=>o.Ny.push(l);return t.createElement(s.a,{title:f,isOpen:!0,onDismiss:i},t.createElement(r.gW,{spacing:"sm"},t.createElement("p",null,"Do you want to proceed in the current tab or open a new tab?")),t.createElement(s.a.ButtonRow,null,t.createElement(g.$n,{onClick:i,fill:"outline",variant:"secondary"},"Cancel"),t.createElement(g.$n,{type:"submit",variant:"secondary",onClick:c,icon:"external-link-alt"},"Open in new tab"),t.createElement(g.$n,{type:"submit",variant:"primary",onClick:h,icon:"apps"},"Open")))}},30973:(Y,A,e)=>{"use strict";e.d(A,{w:()=>s});var t=e(96540),n=e(38138),o=e(75462);function s({extensions:u,onSelect:d}){const{categorised:i,uncategorised:l}=g(u),f=l.length>0&&Object.keys(i).length>0;return t.createElement(n.W,null,t.createElement(t.Fragment,null,Object.keys(i).map(c=>t.createElement(n.W.Group,{key:c,label:(0,o.pL)(c,25)},r(i[c],d))),f&&t.createElement(n.W.Divider,{key:"divider"}),r(l,d)))}function r(u,d){return u.map(i=>t.createElement(n.W.Item,{ariaLabel:i.title,icon:i?.icon||"plug",key:i.id,label:(0,o.pL)(i.title,25),onClick:l=>{if(i.path)return d(i);i.onClick?.(l)}}))}function g(u){return(0,t.useMemo)(()=>{const d=[],i={};for(const l of u){if(!l.category){d.push(l);continue}Array.isArray(i[l.category])||(i[l.category]=[]),i[l.category].push(l)}return{uncategorised:d,categorised:i}},[u])}},33368:(Y,A,e)=>{"use strict";e.d(A,{h:()=>o});var t=e(96540),n=e(96192);const o=(s,r)=>(0,t.useMemo)(()=>(0,n.YV)(s,r),[s,r])},80252:(Y,A,e)=>{"use strict";e.d(A,{m:()=>j,s:()=>H});var t=e(2543),n=e(96540),o=e(18226),s=e(41987),r=e(39070),g=e(76885),u=e(76888),d=e(3169),i=e(87490),l=e(31193),f=e(14678),c=e(80348),h=e(62860),p=e(62256),m=e(29436),a=e(23994),v=e(9955),E=e(89224),D=e(34028),b=e(27649),P=e(15961);const y={parse:Q=>{if(!Q.left&&!Q.right)return{to:{left:{datasource:null,queries:[],range:{from:D.kn.from,to:D.kn.to}},schemaVersion:0},error:!1};let ee,ae,Z,ne;return typeof Q.left=="string"&&([ee,Z]=x(Q.left)),typeof Q.right=="string"?[ae,ne]=x(Q.right):Q.right&&(ae=I,ne=!0),ee||(ee=I),{to:{schemaVersion:0,left:ee,...ae&&{right:ae}},error:!!Z||!!ne}}},T=(Q,...ee)=>ee.some(ae=>Q.hasOwnProperty(ae));var M=(Q=>(Q[Q.RangeFrom=0]="RangeFrom",Q[Q.RangeTo=1]="RangeTo",Q[Q.Datasource=2]="Datasource",Q[Q.SegmentsStart=3]="SegmentsStart",Q))(M||{});const I={datasource:null,queries:[],range:D.kn};function x(Q){let ee;try{ee=JSON.parse(Q)}catch{return[I,!0]}if(!Array.isArray(ee))return[{queries:[],range:D.kn,...ee},!1];if(ee.length<=3)return[I,!0];const ae={from:ee[0],to:ee[1]},Z=ee[2],ne=ee.slice(3),q=ne.filter(re=>!T(re,"ui","mode","__panelsState")),te=ne.find(re=>T(re,"__panelsState"))?.__panelsState;return[{datasource:Z,queries:q,range:ae,panelsState:te},!1]}const S={parse:Q=>{if(!Q||!Q.panes||typeof Q.panes!="string")return{to:{schemaVersion:1,panes:{[(0,i.o$)()]:O}},error:!1};let ee;try{ee=JSON.parse(Q.panes)}catch{}if(ee==null||typeof ee!="object")return{to:{schemaVersion:1,panes:{[(0,i.o$)()]:O}},error:!0};const ae=Object.entries(ee).map(([Z,ne])=>[Z,C(ne)]).reduce((Z,[ne,q])=>{let te=ne;return(te.length!==3||/^\d+$/.test(te)||te.split("").some(re=>i.WP.indexOf(re)===-1))&&(te=(0,i.o$)()),{...Z,[te]:q}},{});return Object.keys(ae).length||(ae[(0,i.o$)()]=O),{to:{schemaVersion:1,panes:ae},error:!1}},migrate:Q=>({schemaVersion:1,panes:{[(0,i.o$)()]:Q.left,...Q.right&&{[(0,i.o$)()]:Q.right}}})},O={datasource:null,queries:[],range:D.kn};function C(Q){return!Q||typeof Q!="object"?O:{...O,...(0,P.C)("queries",Q)&&Array.isArray(Q.queries)&&{queries:Q.queries},...(0,P.C)("datasource",Q)&&typeof Q.datasource=="string"&&{datasource:Q.datasource},...(0,P.C)("panelsState",Q)&&!!Q.panelsState&&typeof Q.panelsState=="object"&&{panelsState:Q.panelsState},...(0,P.C)("range",Q)&&!!Q.range&&typeof Q.range=="object"&&(0,P.C)("from",Q.range)&&(0,P.C)("to",Q.range)&&typeof Q.range.from=="string"&&typeof Q.range.to=="string"&&{range:{from:Q.range.from,to:Q.range.to}}}}const L=Q=>R(Q),U=[y,S],R=Q=>{const ee=B(Q),[ae,...Z]=U.slice(ee),{error:ne,to:q}=ae.parse(Q);return[Z.reduce((re,de)=>de.migrate?de.migrate(re):re,q),ne]};function B(Q){return!Q||!("schemaVersion"in Q)||!Q.schemaVersion?0:typeof Q.schemaVersion=="number"?Q.schemaVersion:typeof Q.schemaVersion=="string"?Number.parseInt(Q.schemaVersion,10):0}function H(Q){const{location:ee}=(0,u.Il)(),ae=(0,c.useDispatch)(),Z=(0,c.useSelector)(v.Qb),ne=(0,c.useSelector)(ie=>ie.user.orgId),q=(0,n.useRef)(Q),te=(0,n.useRef)("notstarted"),re=(0,n.useRef)(!1),{warning:de}=(0,d._2)();(0,n.useEffect)(()=>{Q.panes||(te.current="notstarted",q.current=Q)},[Q]),(0,n.useEffect)(()=>{const ie=ae((0,c.addListener)({predicate:ge=>(re.current=h.wh.pending.type===ge.type,[m.J8.type,m.ve.fulfilled.type,a.Od.pending.type,E.eM.type,p.fx.type,h.wh.fulfilled.type].includes(ge.type)&&!re.current),effect:async(ge,{cancelActiveListeners:ve,delay:ye,getState:pe})=>{ve(),await ye(200);const le=Object.entries(pe().explore.panes).reduce((Me,[De,Re])=>Re?{...Me,[De]:j(Re)}:Me,{});if(!(0,t.isEqual)(q.current.panes,JSON.stringify(le))){const Me=!!q.current.panes&&Object.values(q.current.panes).filter(Boolean).length===0||te.current==="pending";q.current={panes:JSON.stringify(le)},ee.partial({panes:q.current.panes},Me)}}}));return()=>ie()},[ae,ee]),(0,n.useEffect)(()=>{const ie=q.current?.panes!==Q.panes,[ge,ve]=L(Q);ve&&de("Could not parse Explore URL","The requested URL contains invalid parameters, a default Explore state has been loaded.");async function ye(){const pe=Object.values(ge.panes);if(pe.length>1){const le=pe.some(({range:Me},De,[{range:Re}])=>!(0,t.isEqual)(Me,Re));ae((0,m.qz)({syncedTimes:!le}))}Object.entries(ge.panes).forEach(async([le,Me],De)=>{const{datasource:Re,queries:me,range:he,panelsState:Te}=Me,Be=Z[le];if(Be!==void 0){const we=K(Me,j(Be));Promise.resolve().then(async()=>{we.datasource&&Re&&await ae((0,h.wh)({exploreId:le,datasource:Re}))}).then(async()=>{we.range&&ae((0,E.JA)({exploreId:le,rawRange:(0,D.Z9)(he)})),we.queries&&ae((0,a.h9)({exploreId:le,queries:(0,b.v)(me)})),(we.queries||we.range)&&(await ae((0,a.hS)(le)),ae((0,a.Od)({exploreId:le}))),we.panelsState&&Te&&ae((0,p.fx)({exploreId:le,panelsState:Te}))})}else ae((0,p.Gd)({exploreId:le,datasource:Re||"",queries:(0,b.v)(me),range:(0,D.Z9)(he),panelsState:Te,position:De,eventBridge:new o.o}))}),Object.keys(Z).filter(le=>!Object.keys(ge.panes).includes(le)).forEach(le=>ae((0,m.J8)(le)))}!ie&&te.current==="notstarted"&&(te.current="pending",ae((0,m.Ve)()),Promise.all(Object.entries(ge.panes).map(([pe,{datasource:le,queries:Me,range:De,panelsState:Re}])=>_(le,Me,ne).then(me=>Promise.resolve(me?Me.length?(0,b.v)(Me).filter(V(me)).map(N(me)?t.identity:he=>({...he,datasource:me.getRef()})):(0,l.tR)().get(N(me)?void 0:me.getRef()).then(he=>[W(he)]):[]).then(async he=>{let Te=await G(he);return!Te.length&&me&&(Te=[W(N(me)?await(0,l.tR)().get():me)]),{exploreId:pe,range:De,panelsState:Re,queries:Te,datasource:me}})))).then(async pe=>{const le=await Promise.all(pe.map(({exploreId:he,range:Te,panelsState:Be,queries:we,datasource:Ne})=>ae((0,p.Gd)({exploreId:he,datasource:Ne,queries:we,range:(0,D.Z9)(Te),panelsState:Be,eventBridge:new o.o})).unwrap()));if(le.length>1){const he=le.some(({state:Te},Be,[{state:we}])=>!(0,t.isEqual)(Te.range.raw,we.range.raw));ae((0,m.qz)({syncedTimes:!he}))}const Me=le.reduce((he,{exploreId:Te,state:Be})=>({...he,[Te]:j(Be)}),{}),De=ee.getSearchObject();let Re={};for(const[he,Te]of Object.entries(De).filter(([Be])=>!["schemaVersion","panes","orgId","left","right"].includes(Be)))Re[he]=Te;const me=new URLSearchParams({schemaVersion:`${ge.schemaVersion}`,panes:JSON.stringify(Me),orgId:`${ne}`,...Re});ee.replace({pathname:ee.getLocation().pathname,search:me.toString()}),te.current="done"})),q.current=Q,ie&&te.current==="done"&&ye()},[ae,Z,ne,ee,Q,de])}function W(Q){return{...Q.getDefaultQuery?.(s.Jk.Explore),refId:"A",datasource:Q.getRef()}}function N(Q){return Q.name===f.uv}function V(Q){return Q&&N(Q)?ee=>!!ee.datasource:ee=>ee.datasource?typeof ee.datasource=="string"?ee.datasource===Q?.uid:ee.datasource.uid===Q?.uid:!0}async function G(Q){return(await Promise.allSettled(Q.map(ae=>(0,l.tR)().get(ae.datasource).then(Z=>({query:ae,ds:Z}))))).filter(P.s).map(({value:ae})=>ae.query)}async function _(Q,ee,ae){if(Q)try{return await(0,l.tR)().get(Q)}catch{}const Z=[...new Set(ee.map(ne=>ne.datasource).filter(r.zz).map(ne=>typeof ne=="string"?ne:ne.uid))];try{if(Z.length>=1){const ne=(await Promise.allSettled(Z.map(q=>(0,l.tR)().get(q)))).filter(P.s);if(ne.length>1)return await(0,l.tR)().get(f.uv);if(ne.length===1)return await(0,l.tR)().get(Z[0])}}catch{}return(0,l.tR)().get((0,i.HQ)(ae)).catch(()=>(0,l.tR)().get()).catch(()=>{})}const K=(Q,ee)=>{const ae=!(0,t.isEqual)(ee?.datasource,Q?.datasource),Z=!(0,t.isEqual)(ee?.queries,Q?.queries),ne=!(0,t.isEqual)(ee?.range||D.kn,Q?.range||D.kn),q=!(0,t.isEqual)(ee?.panelsState,Q?.panelsState);return{datasource:ae,queries:Z,range:ne,panelsState:q}};function j(Q){return{datasource:Q.datasourceInstance?.uid||"",queries:Q.queries.map(i.w4),range:(0,g.sQ)(Q.range.raw),panelsState:k(Q.panelsState)}}function k(Q){let ee=(0,t.mapValues)(Q,ae=>(0,t.isObject)(ae)?k(ae):ae);if(ee=(0,t.omitBy)(ee,t.isEmpty),!(0,t.isEmpty)(ee))return ee}},15961:(Y,A,e)=>{"use strict";e.d(A,{C:()=>n,s:()=>t});const t=o=>o.status==="fulfilled";function n(o,s){return o in s}},324:(Y,A,e)=>{"use strict";e.d(A,{M:()=>f,v:()=>h});var t=e(88483),n=e(19347),o=e(14110),s=e(82467),r=e(3169),g=e(18380),u=e(99140),d=e(62256),i=e(29436),l=e(23994);const f=p=>new t.c(m=>{const a=u.M_.getState().explore.panes[p]?.correlations;if(a)m.next(a),m.complete();else{const v=u.M_.subscribe(()=>{const E=u.M_.getState().explore.panes[p]?.correlations;E&&(v(),m.next(E),m.complete())})}});function c(p){return async(m,a)=>{const v=a().explore.panes[p];if(v.datasourceInstance?.uid!==void 0){let E=v.datasourceInstance.meta.mixed?v.queries.map(b=>b.datasource?.uid).filter(b=>b!==null):[v.datasourceInstance.uid];const D=await(0,g.J6)(E);m((0,d.Fb)({exploreId:p,correlations:D.correlations||[]}))}}}function h(p,m,a){return async(v,E)=>{const D=Object.keys(E().explore?.panes),b=E().explore?.panes[D[0]],P=E().explore?.panes[D[1]];if(!b||!P)return;const y=b.datasourceInstance?.meta.mixed?b.queries[0].datasource:b.datasourceInstance?.getRef(),T=P.datasourceInstance?.meta.mixed?P.queries[0].datasource:P.datasourceInstance?.getRef(),[M,I]=await Promise.all([(0,n.l)().get(y),(0,n.l)().get(T)]);if(M?.uid&&I?.uid&&P.correlationEditorHelperData?.resultField){const x={sourceUID:M.uid,targetUID:I.uid,label:p||await(0,g.tZ)(b,P),description:m,config:{field:P.correlationEditorHelperData.resultField,target:P.queries[0],type:"query",transformations:a}};await(0,g.$q)(M.uid,x).then(async()=>{v((0,i.J8)(D[1])),await v(c(D[0])),await v((0,l.Od)({exploreId:D[0]})),(0,o.rR)("grafana_explore_correlation_editor_saved",{sourceDatasourceType:M.type,targetDataSourceType:I.type})}).catch(S=>{v((0,s.dx)((0,r.gi)("Error creating correlation",S))),console.error(S)})}}}},62860:(Y,A,e)=>{"use strict";e.d(A,{YR:()=>p,wh:()=>h});var t=e(30038),n=e(14110),o=e(11134),s=e(87490),r=e(18380),g=e(80348),u=e(57288),d=e(62256),i=e(23994),l=e(89224),f=e(34028);const c=(0,t.VP)("explore/updateDatasourceInstance"),h=(0,g.createAsyncThunk)("explore/changeDatasource",async({datasource:m,exploreId:a,options:v},{getState:E,dispatch:D})=>{const b=E().user.orgId,{history:P,instance:y}=await(0,f.BE)(b,m),T=E().explore.panes[a].datasourceInstance;(0,n.rR)("explore_change_ds",{from:(T?.meta?.mixed?"mixed":T?.type)||"unknown",to:y.meta.mixed?"mixed":y.type,exploreId:a}),D(c({exploreId:a,datasourceInstance:y,history:P}));const M=E().explore.panes[a].queries,I=(0,f.dq)(y.uid,M),x=await(0,r.J6)(I);D((0,d.Fb)({exploreId:a,correlations:x.correlations||[]})),v?.importQueries&&await D((0,i.y2)(a,M,T,y)),E().explore.panes[a].isLive&&D((0,l.hO)({exploreId:a,refreshInterval:o.cC.offOption.value})),v?.importQueries&&D((0,i.Od)({exploreId:a}))}),p=(m,a)=>{if(c.match(a)){const{datasourceInstance:v,history:E}=a.payload;return(0,s._u)(m.querySubscription),{...m,datasourceInstance:v,graphResult:null,tableResult:null,logsResult:null,supplementaryQueries:(0,u.Ez)(),queryResponse:(0,f.RA)(),queryKeys:[],history:E}}return m}},62256:(Y,A,e)=>{"use strict";e.d(A,{EA:()=>p,Fb:()=>E,Gd:()=>b,LJ:()=>P,QZ:()=>D,fx:()=>h,nE:()=>m});var t=e(30038),n=e(87490),o=e(18380),s=e(32901),r=e(80348),g=e(62860),u=e(72433),d=e(29436),i=e(23994),l=e(89224),f=e(34028);const c=(0,t.VP)("explore/changeSize"),h=(0,t.VP)("explore/changePanels");function p(y,T,M){return async(I,x)=>{const S=x().explore.panes[y];if(S===void 0)return;const{panelsState:O}=S;I(h({exploreId:y,panelsState:{...O,[T]:M}}))}}const m=(0,t.VP)("explore/changeCorrelationHelperData"),a=(0,t.VP)("explore/initializeExploreAction"),v=(0,t.VP)("explore/setUrlReplaced"),E=(0,t.VP)("explore/saveCorrelationsAction");function D(y,{width:T}){return c({exploreId:y,width:T})}const b=(0,r.createAsyncThunk)("explore/initializeExplore",async({exploreId:y,datasource:T,queries:M,range:I,panelsState:x,correlationHelperData:S,eventBridge:O},{dispatch:C,getState:L,fulfillWithValue:U})=>{let R,B=[];if(T){const H=L().user.orgId,W=await(0,f.BE)(H,T);R=W.instance,B=W.history}if(C(a({exploreId:y,queries:M,range:(0,f.eO)(I,(0,s.O)(L().user)),datasourceInstance:R,history:B,eventBridge:O})),x!==void 0&&C(h({exploreId:y,panelsState:x})),C((0,l.JA)({exploreId:y})),R){const H=(0,f.dq)(R.uid,M),W=await(0,o.J6)(H);C(E({exploreId:y,correlations:W.correlations||[]})),C((0,i.Od)({exploreId:y}))}return S!==void 0&&L().explore.correlationEditorDetails?.editorMode&&C(m({exploreId:y,correlationEditorHelperData:S})),U({exploreId:y,state:L().explore.panes[y]})}),P=(y=(0,f.HZ)(),T)=>{if(y=(0,i.JQ)(y,T),y=(0,g.YR)(y,T),y=(0,l.QP)(y,T),y=(0,u.t0)(y,T),d.U2.match(T)){const{richHistory:M,total:I}=T.payload.richHistoryResults;return{...y,richHistory:M,richHistoryTotal:I}}if(d.Ju.match(T)){const M=T.payload.filters;return{...y,richHistorySearchFilters:M}}if(c.match(T)){const M=T.payload.width;return{...y,containerWidth:M}}if(h.match(T)){const{panelsState:M}=T.payload;return{...y,panelsState:M}}if(m.match(T)){const{correlationEditorHelperData:M}=T.payload;return{...y,correlationEditorHelperData:M}}if(E.match(T))return{...y,correlations:T.payload.correlations};if(a.match(T)){const{queries:M,range:I,datasourceInstance:x,history:S,eventBridge:O}=T.payload;return{...y,range:I,queries:M,initialized:!0,eventBridge:O,queryKeys:(0,n.dY)(M),datasourceInstance:x,history:S,queryResponse:(0,f.RA)(),cache:[],correlations:[]}}return y}},72433:(Y,A,e)=>{"use strict";e.d(A,{Bj:()=>D,H9:()=>f,PA:()=>v,Uu:()=>m,VM:()=>c,fP:()=>E,jX:()=>p,mG:()=>g,ri:()=>i,s1:()=>h,sh:()=>l,t0:()=>b,wk:()=>a});var t=e(30038),n=e(81523),o=e(11401),s=e(29436),r=e(9955);const g=(0,t.VP)("explore/historyUpdated"),u=({updatedQuery:P,deletedId:y})=>async(T,M)=>{d(M().explore,(I,x)=>{const S=I.richHistory.map(C=>C.id===P?.id?P:C).filter(C=>C.id!==y),O=I.richHistory.length-S.length;T((0,s.U2)({richHistoryResults:{richHistory:S,total:I.richHistoryTotal-O},exploreId:x}))})},d=(P,y)=>{Object.entries(P.panes).forEach(([T,M])=>{M&&y(M,T)})},i=(P,y,T)=>async(M,I)=>{const{richHistoryStorageFull:x,limitExceeded:S}=await(0,n.l0)(P,y,T,!1,"",!I().explore.richHistoryStorageFull,!I().explore.richHistoryLimitExceededWarningShown);x&&M((0,s.fj)()),S&&M((0,s.D)())},l=(P,y)=>async(T,M)=>{const I=await(0,n.oU)(P,y);T(u({updatedQuery:I}))},f=(P,y)=>async T=>{const M=await(0,n.cX)(P,y);T(u({updatedQuery:M}))},c=P=>async y=>{const T=await(0,n.NC)(P);y(u({deletedId:T}))},h=()=>async(P,y)=>{await(0,n.X1)(),(0,r.K6)(y()).forEach(([T])=>{P((0,s.U2)({richHistoryResults:{richHistory:[],total:0},exploreId:T})),P((0,s.U2)({richHistoryResults:{richHistory:[],total:0},exploreId:T}))})},p=P=>async(y,T)=>{const M=T().explore.panes[P].richHistorySearchFilters;if(M){const I=await(0,n.DI)(M);y((0,s.U2)({richHistoryResults:I,exploreId:P}))}},m=P=>async(y,T)=>{const M=T().explore.panes[P]?.richHistorySearchFilters,I=T().explore.panes[P]?.richHistory;if(M&&I){const x={...M,page:(M?.page||1)+1},S=await(0,n.DI)(x),O=[...I,...S.richHistory];y((0,s.Ju)({filters:x,exploreId:P})),y((0,s.U2)({richHistoryResults:{richHistory:O,total:S.total},exploreId:P}))}},a=P=>async y=>{y((0,s.Ju)({filters:void 0,exploreId:P})),y((0,s.U2)({richHistoryResults:{richHistory:[],total:0},exploreId:P}))},v=()=>async(P,y)=>{let T=y().explore.richHistorySettings;T||(T=await(0,n.Gx)(),P((0,s.bZ)(T)))},E=P=>async y=>{y((0,s.bZ)(P)),await(0,n.rs)(P)},D=(P,y)=>async(T,M)=>{await T((0,s.Ju)({exploreId:P,filters:{...y}}));const I=M().explore.richHistorySettings;(0,o.g)().lastUsedDataSourcesAvailable&&await T(E({...I,lastUsedDatasourceFilters:y.datasourceFilters}))},b=(P,y)=>g.match(y)?{...P,history:y.payload.history}:P},29436:(Y,A,e)=>{"use strict";e.d(A,{Ay:()=>U,D:()=>m,J8:()=>P,JA:()=>b,Ju:()=>v,U2:()=>h,Ve:()=>T,am:()=>x,bZ:()=>a,fj:()=>p,nD:()=>E,ow:()=>S,qz:()=>c,tP:()=>D,ve:()=>M});var t=e(30038),n=e(2543),o=e.n(n),s=e(18226),r=e(12131),g=e(87490),u=e(87986),d=e(80348),i=e(27649),l=e(62256),f=e(34028);const c=(0,t.VP)("explore/syncTimes"),h=(0,t.VP)("explore/richHistoryUpdated"),p=(0,t.VP)("explore/richHistoryStorageFullAction"),m=(0,t.VP)("explore/richHistoryLimitExceededAction"),a=(0,t.VP)("explore/richHistorySettingsUpdated"),v=(0,t.VP)("explore/richHistorySearchFiltersUpdatedAction"),E=(0,t.VP)("explore/splitSizeUpdateAction"),D=(0,t.VP)("explore/maximizePaneAction"),b=(0,t.VP)("explore/evenPaneResizeAction"),P=(0,t.VP)("explore/splitClose"),y=(0,t.VP)("explore/setPaneState"),T=(0,t.VP)("explore/clearPanes"),M=(0,d.createAsyncThunk)("explore/splitOpen",async(R,{getState:B,dispatch:H})=>{const W=Object.values(B().explore.panes)[0],N=R?.queries??(R?.query?[R?.query]:W?.queries||[]);Object.keys(B().explore.panes).forEach((_,K)=>{K>=1&&H(P(_))});const V=R?.range||W?.range.raw||f.kn;let G=(0,g.o$)();for(;B().explore.panes[G];)G=(0,g.o$)();await H(I({exploreId:G,datasource:R?.datasourceUid||W?.datasourceInstance?.getRef(),queries:(0,i.v)(N),range:V,panelsState:R?.panelsState||W?.panelsState,correlationHelperData:R?.correlationHelperData,eventBridge:new s.o})),W?.range&&await H(c({syncedTimes:(0,n.isEqual)(W.range.raw,V)}))}),I=(0,d.createAsyncThunk)("explore/createNewSplitOpen",async(R,{dispatch:B})=>{await B((0,l.Gd)(R))}),x=(0,t.VP)("explore/changeCorrelationEditorDetails"),S=(R,B)=>async H=>{const{timeRange:W,getExploreUrl:N,openInNewWindow:V}=B,G=await N({queries:R.targets,dsRef:R.datasource,scopedVars:R.scopedVars,timeRange:W,adhocFilters:(0,u.w)().getAdhocFilters(R.datasource?.uid??"",!0)});if(V&&G){V(G);return}r.Ny.push(G)},O=(0,f.HZ)(),C={syncedTimes:!1,panes:{},correlationEditorDetails:{editorMode:!1,correlationDirty:!1,queryEditorDirty:!1,isExiting:!1},richHistoryStorageFull:!1,richHistoryLimitExceededWarningShown:!1,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0},U={explore:(R=C,B)=>{if(P.match(B)){const{[B.payload]:W,...N}={...R.panes};return{...R,panes:N,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0,syncedTimes:!1}}if(E.match(B)){const{largerExploreId:W}=B.payload;return{...R,largerExploreId:W,maxedExploreId:void 0,evenSplitPanes:W===void 0}}if(D.match(B)){const{exploreId:W}=B.payload;return{...R,largerExploreId:W,maxedExploreId:W,evenSplitPanes:!1}}if(b.match(B))return{...R,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0};if(c.match(B))return{...R,syncedTimes:B.payload.syncedTimes};if(p.match(B))return{...R,richHistoryStorageFull:!0};if(m.match(B))return{...R,richHistoryLimitExceededWarningShown:!0};if(a.match(B)){const W=B.payload;return{...R,richHistorySettings:W}}if(I.pending.match(B))return{...R,panes:{...R.panes,[B.meta.arg.exploreId]:O}};if(l.Gd.pending.match(B)){const W=Object.entries(R.panes),N=W.slice(0,B.meta.arg.position),V=W.slice(N.length),G=[...N,[B.meta.arg.exploreId,O],...V].reduce((_,[K,j])=>({..._,[K]:j}),{});return{...R,panes:G}}if(T.match(B))return{...R,panes:{}};if(x.match(B)){const{editorMode:W,label:N,description:V,canSave:G,correlationDirty:_,queryEditorDirty:K,isExiting:j,postConfirmAction:k,transformations:Q}=B.payload;return{...R,correlationEditorDetails:{editorMode:!!(W??R.correlationEditorDetails?.editorMode),canSave:!!(G??R.correlationEditorDetails?.canSave),label:N??R.correlationEditorDetails?.label,description:V??R.correlationEditorDetails?.description,transformations:Q??R.correlationEditorDetails?.transformations,correlationDirty:!!(_??R.correlationEditorDetails?.correlationDirty),queryEditorDirty:!!(K??R.correlationEditorDetails?.queryEditorDirty),isExiting:!!(j??R.correlationEditorDetails?.isExiting),postConfirmAction:k}}}const H=B.payload?.exploreId;return typeof H=="string"?{...R,panes:Object.entries(R.panes).reduce((W,[N,V])=>({...W,[N]:N===H?(0,l.LJ)(V,B):V}),{})}:R}}},23994:(Y,A,e)=>{"use strict";e.d(A,{_0:()=>oe,He:()=>jt,hS:()=>ue,bO:()=>_e,IL:()=>Vt,rR:()=>Ge,y2:()=>Ve,Az:()=>_t,PD:()=>We,JQ:()=>St,S6:()=>at,Od:()=>it,GI:()=>It,q9:()=>Ke,h1:()=>le,qk:()=>He,Rk:()=>Dt,h9:()=>ke,TO:()=>rt});var t=e(30038),n=e(32017),o=e.n(n),s=e(2543),r=e(49510),g=e(62467),u=e(58307),d=e(69862),i=e(99165),l=e(39070),f=e(73372),c=e(47232),h=e(9557),p=e(40187),m=e(26272),a=e(14236),v=e(80822),E=e(19347),D=e(14110),b=e(32264),P=e(33390),y=e(87490),T=e(80582),M=e(18380),I=e(69147),x=e(32901),S=e(43269),O=e(14678),C=e(80348),L=e(82467),U=e(3169),R=e(39374),B=e(97186),H=e(81160),W=e(57875),N=e(91890),V=e(57934),G=e(11261),_=e(91002),K=e(15162);const j=ct=>{const Ct=[],Yt=[],cn=[],vn=[],rn=[],en=[],mn=[],Un=[];for(const fn of ct.series){if(te(fn)){Un.push(fn);continue}switch(fn.meta?.preferredVisualisationType){case"logs":vn.push(fn);break;case"graph":Ct.push(fn);break;case"trace":rn.push(fn);break;case"table":Yt.push(fn);break;case"rawPrometheus":cn.push(fn);break;case"nodeGraph":en.push(fn);break;case"flamegraph":mn.push(fn);break;default:q(fn)&&Ct.push(fn),Yt.push(fn)}}return{...ct,graphFrames:Ct,tableFrames:Yt,logsFrames:vn,traceFrames:rn,nodeGraphFrames:en,customFrames:Un,flameGraphFrames:mn,rawPrometheusFrames:cn,graphResult:null,tableResult:null,logsResult:null,rawPrometheusResult:null}},k=({showCorrelationEditorLinks:ct,queries:Ct,correlations:Yt,defaultTargetDatasource:cn})=>vn=>{if(ct&&cn)for(const rn of vn.series)for(const en of rn.fields){en.config.links=[],en.display=en.display||(0,W.H)();const mn={};rn.fields.map(Un=>{mn[`${Un.name}`]=`\${__data.fields.['${Un.name}']}`}),en.config.links.push({url:"",origin:N.x0.ExploreCorrelationsEditor,title:`Correlate with ${en.name}`,internal:{datasourceUid:cn.uid,datasourceName:cn.name,query:{datasource:{uid:cn.uid}},meta:{correlationData:{resultField:en.name,vars:mn,origVars:mn}}}})}else if(Ct?.length&&Yt?.length){const rn=(0,s.mapValues)((0,s.groupBy)(Ct,"refId"),"0.datasource.uid");(0,M.cA)(vn.series,Yt,rn)}return vn},Q=ct=>ct.graphFrames.length?{...ct,graphResult:ct.graphFrames}:{...ct,graphResult:null},ee=ct=>{if(ct.tableFrames.length===0)return(0,g.of)({...ct,tableResult:null});ct.tableFrames.sort((vn,rn)=>{const en=vn.refId,mn=rn.refId;return en>mn?1:en<mn?-1:0});const Ct=ct.tableFrames.every(vn=>q(vn)),Yt={interpolate:vn=>vn};return(Ct?(0,g.of)(ct.tableFrames).pipe(V.c.joinByFieldTransformer.operator({},Yt)):(0,g.of)(ct.tableFrames).pipe(V.c.mergeTransformer.operator({},Yt))).pipe((0,H.T)(vn=>{for(const rn of vn)for(const en of rn.fields)en.display=en.display??(0,W.J)({field:en,theme:b.$.theme2,timeZone:ct.request?.timezone??"browser"});return{...ct,tableResult:vn}}))},ae=ct=>{const Ct=ct.rawPrometheusFrames;if(!Ct||Ct.length===0)return(0,g.of)({...ct,tableResult:null});Ct.sort((rn,en)=>{const mn=rn.refId,Un=en.refId;return mn>Un?1:mn<Un?-1:0});const Yt=Ct.every(rn=>q(rn)),cn={interpolate:rn=>rn};return(Yt?(0,g.of)(Ct).pipe(V.c.joinByFieldTransformer.operator({},cn)):(0,g.of)(Ct).pipe(V.c.mergeTransformer.operator({},cn))).pipe((0,H.T)(rn=>{const en=rn[0];for(const mn of en.fields)mn.display=mn.display??(0,W.J)({field:mn,theme:b.$.theme2,timeZone:ct.request?.timezone??"browser"});return{...ct,rawPrometheusResult:en}}))},Z=(ct={})=>Ct=>{if(Ct.logsFrames.length===0)return{...Ct,logsResult:null};const Yt=Ct.request?.intervalMs,cn=(0,I.HT)(Ct.logsFrames,Yt,ct.absoluteRange,ct.queries),vn=(0,y.uE)(ct.refreshInterval),rn=(0,_.zy)(cn,vn),en=rn.rows,mn=rn.series,Un={...rn,rows:en,series:mn};return{...Ct,logsResult:Un}};function ne(ct,Ct,Yt,cn,vn,rn,en,mn){return(0,g.of)(ct).pipe((0,H.T)(Un=>(0,a.N$)(Un,Ct)),(0,H.T)(k({defaultTargetDatasource:mn,showCorrelationEditorLinks:en,queries:vn,correlations:rn})),(0,H.T)(j),(0,H.T)(Q),(0,H.T)(Z({absoluteRange:Yt,refreshInterval:cn,queries:vn})),(0,d.Z)(ae),(0,d.Z)(ee))}function q(ct){const Ct=(0,s.groupBy)(ct.fields,Yt=>Yt.type);return!!(Object.keys(Ct).length===2&&Ct[G.PU.time]?.length===1&&Ct[G.PU.number])}function te(ct){return ct.meta?.preferredVisualisationPluginId?(0,K.oZ)(ct.meta?.preferredVisualisationPluginId):!1}var re=e(57288),de=e(324),ie=e(62256),ge=e(72433),ve=e(29436),ye=e(89224),pe=e(34028);const le=ct=>Ct=>{const Yt=Ct.explore.panes[ct];return Yt&&Yt.queryResponse?Yt.queryResponse.state===l.Gu.Loading||Yt.queryResponse.state===l.Gu.Streaming:!1},Me=(0,t.VP)("explore/addQueryRow"),De=(0,t.VP)("explore/changeQueries"),Re=(0,t.VP)("explore/cancelQueries"),me=(0,t.VP)("explore/queriesImported"),he=(0,t.VP)("explore/queryStoreSubscription"),Te=(0,t.VP)("explore/setSupplementaryQueryEnabledAction"),Be=(0,t.VP)("explore/storeSupplementaryQueryDataProviderAction"),we=(0,t.VP)("explore/cleanSupplementaryQueryDataProviderAction"),Ne=(0,t.VP)("explore/cleanSupplementaryQueryAction"),Ze=(0,t.VP)("explore/storeSupplementaryQueryDataSubscriptionAction"),st=(0,t.VP)("explore/updateSupplementaryQueryDataAction"),Qe=(0,t.VP)("explore/queryStreamUpdated"),ke=(0,t.VP)("explore/setQueries"),je=(0,t.VP)("changeLoadingState"),He=(0,t.VP)("explore/setPausedState"),Ge=(0,t.VP)("explore/clearLogs"),Oe=(0,t.VP)("explore/scanStart"),Ke=(0,t.VP)("explore/scanStop"),Ee=(0,t.VP)("explore/addResultsToCache"),J=(0,t.VP)("explore/clearCache");function oe(ct,Ct){return async(Yt,cn)=>{const vn=cn().explore.panes[ct];let rn;vn.datasourceInstance?.meta.mixed?rn=(0,s.findLast)(vn.queries,mn=>!!mn.datasource)?.datasource||void 0:rn=vn.datasourceInstance?.getRef();const en=await(0,y.Ll)(vn.queries,Ct,rn);Yt(Me({exploreId:ct,index:Ct,query:en}))}}function ue(ct){return(Ct,Yt)=>{Ct(Ke({exploreId:ct})),Ct(Re({exploreId:ct}));const cn=Yt().explore.panes[ct].supplementaryQueries;for(const vn of re.VW)Ct(we({exploreId:ct,type:vn})),cn[vn]?.data?.state!==l.Gu.Done&&Ct(Ne({exploreId:ct,type:vn}))}}const be=(ct,Ct)=>{const Yt=ct.getRef();return Ct.map(cn=>({...cn,datasource:Yt}))},Le=async(ct,Ct,Yt)=>{let cn=[];if(Ct.meta?.id===ct.meta?.id)cn=Yt;else if((0,f.Ee)(Ct)&&(0,f.FL)(ct)){const vn=await Ct.exportToAbstractQueries(Yt);cn=await ct.importFromAbstractQueries(vn)}else ct.importQueries&&(cn=await ct.importQueries(Yt,Ct));return be(ct,cn)},_e=(0,C.createAsyncThunk)("explore/changeQueries",async({queries:ct,exploreId:Ct},{getState:Yt,dispatch:cn})=>{let vn=!1;const rn=Yt().explore.panes[Ct].queries,en=Yt().explore.panes[Ct].datasourceInstance?.uid,mn=Yt().explore.correlationEditorDetails,Un=mn?.editorMode||!1;!(Object.keys(Yt().explore.panes)[0]===Ct)&&Un&&!mn?.queryEditorDirty&&cn((0,ve.am)({queryEditorDirty:!0}));for(const ca of ct)for(const Lt of rn){if(ca.refId===Lt.refId&&ca.datasource?.type!==Lt.datasource?.type){const qt=await(0,E.l)().get(Lt.datasource),hn=await(0,E.l)().get({uid:ca.datasource?.uid});await cn(Ve(Ct,rn,qt,hn,ca.refId)),vn=!0}if(en===O.uv&&ca.refId===Lt.refId&&ca.datasource?.uid!==Lt.datasource?.uid){const qt=(0,pe.dq)(O.uv,ct),hn=await(0,M.J6)(qt);cn((0,ie.Fb)({exploreId:Ct,correlations:hn.correlations||[]}))}}vn||cn(De({queries:ct,exploreId:Ct})),ct.length<rn.length&&cn(it({exploreId:Ct}))}),Ve=(ct,Ct,Yt,cn,vn)=>async rn=>{if(!Yt){rn(me({exploreId:ct,queries:Ct}));return}let en=Ct;if(cn.uid===O.uv)en=Ct.map(Un=>({...Un,datasource:Yt.getRef()}));else if(Yt.uid===O.uv){const Un=(0,s.groupBy)(Ct,ca=>ca.datasource?.uid),fn=await Promise.all(Object.keys(Un).map(async ca=>{const Lt=await(0,E.l)().get({uid:ca});return await Le(cn,Lt,Un[ca])}));en=(0,s.flatten)(fn.filter(ca=>ca.length>0))}else{let Un=Ct;if(vn!==void 0){const fn=Ct.find(ca=>ca.refId===vn);fn&&(Un=[fn])}en=await Le(cn,Yt,Un)}let mn=await(0,y.di)(en,cn.getRef());if(vn!==void 0){en.length===0&&(en=[await(0,y.Ll)([],void 0,cn.getRef())]);const Un=Ct.findIndex(ca=>ca.refId===vn),fn={...mn[0],refId:Ct[Un].refId};mn=[...Ct],mn[Un]=fn}return rn(me({exploreId:ct,queries:mn})),mn};function We(ct,Ct,Yt){return async(cn,vn)=>{const rn=vn().explore.panes[ct],{queries:en}=rn,Un=(await Promise.all(en.map(fn=>Yt({...fn},Ct)))).map((fn,ca)=>(0,y.eF)(fn,en,ca));cn(ke({exploreId:ct,queries:Un})),Ct.preventSubmit||cn(it({exploreId:ct}))}}async function $e(ct,Ct,Yt,cn,vn,rn){const en=cn.meta.id,mn=(0,y.Al)(Yt,en,vn);ct((0,ge.mG)({exploreId:rn,history:mn})),ct((0,ge.ri)(cn.uid,cn.name,vn));for(const Un in Ct.panes)await ct((0,ge.jX)(Un))}const it=(0,C.createAsyncThunk)("explore/runQueries",async({exploreId:ct,preserveCache:Ct},{dispatch:Yt,getState:cn})=>{Yt(ue(ct));const{defaultCorrelationEditorDatasource:vn,scopedVars:rn,showCorrelationEditorLinks:en}=await(0,pe.aj)(cn(),ct),mn=(0,de.M)(ct);Yt((0,ye.JA)({exploreId:ct})),Ct!==!0&&Yt(Vt(ct));const fn=cn().explore.panes[ct],{datasourceInstance:ca,containerWidth:Lt,isLive:qt,range:hn,scanning:Cn,queryResponse:gn,querySubscription:xn,refreshInterval:Tn,absoluteRange:Wn,cache:Sn,supplementaryQueries:An}=fn;let ta,fa;const la=fn.queries.map(Ea=>({...Ea,datasource:Ea.datasource||ca?.getRef()}));ca!=null&&$e(Yt,cn().explore,fn.history,ca,la,ct);const Xn=(0,pe.rk)(Sn,Wn);if(Xn)ta=(0,r.z)([(0,g.of)(Xn),mn]).pipe((0,d.Z)(([Ea,Ca])=>ne(Ea,gn,Wn,Tn,la,Ca,en,vn))),fa=ta.subscribe(Ea=>{Yt(Qe({exploreId:ct,response:Ea}))});else{if(!(0,y.zT)(la)||!ca)return;const Ea=ca?.interval;(0,y._u)(xn);const Ca={minInterval:Ea,maxDataPoints:Lt,liveStreaming:qt},Sa=(0,x.O)(cn().user),aa=(0,y.bI)(ct,la,Ca,hn,Cn,Sa,rn);if(Yt(je({exploreId:ct,loadingState:l.Gu.Loading})),ta=(0,r.z)([(0,R.BN)(ca,aa.request).pipe(qt?(0,i.c)(500):u.D),mn]).pipe((0,d.Z)(([Yn,za])=>ne(Yn,gn,Wn,Tn,la,za,en,vn))),fa=ta.subscribe({next(Yn){const za=cn().explore.panes[ct];if(Yn.logsResult!==null&&Yn.state===l.Gu.Done&&(0,D.rR)("grafana_explore_logs_result_displayed",{datasourceType:ca.type,visualisationType:za?.panelsState?.logs?.visualisationType??P.A.get(B.r)??"N/A",length:Yn.logsResult.rows.length}),Yt(Qe({exploreId:ct,response:Yn})),za.scanning)if(Yn.state===l.Gu.Done&&Yn.series.length===0){const ns=(0,T.Wb)(-1,za.range);Yt((0,ye.JA)({exploreId:ct,absoluteRange:ns})),Yt(it({exploreId:ct}))}else Yt(Ke({exploreId:ct}))},error(Yn){Yt((0,L.dx)((0,U.gi)("Query processing error",Yn))),Yt(je({exploreId:ct,loadingState:l.Gu.Error})),console.error(Yn)},complete(){cn().explore.panes[ct].queryResponse.state===l.Gu.Loading&&Yt(je({exploreId:ct,loadingState:l.Gu.Done}))}}),qt)for(const Yn of re.VW)Yt(we({exploreId:ct,type:Yn})),Yt(Ne({exploreId:ct,type:Yn}));else Yt(ft({exploreId:ct,datasourceInstance:ca,transaction:aa,newQuerySource:ta,supplementaryQueries:An,queries:la,absoluteRange:Wn}))}Yt(he({exploreId:ct,querySubscription:fa}))}),at=(0,C.createAsyncThunk)("explore/runLoadMoreQueries",async({exploreId:ct,absoluteRange:Ct},{dispatch:Yt,getState:cn})=>{Yt(ue(ct));const{datasourceInstance:vn,containerWidth:rn,queryResponse:en}=cn().explore.panes[ct],{defaultCorrelationEditorDatasource:mn,scopedVars:Un,showCorrelationEditorLinks:fn}=await(0,pe.aj)(cn(),ct),ca=(0,de.M)(ct);let Lt;const qt=en.logsResult?.queries||[],hn=en.logsFrames.map(Sn=>Sn.refId),Cn=qt.filter(Sn=>hn.includes(Sn.refId)).map(Sn=>({...Sn,datasource:Sn.datasource||vn?.getRef(),refId:`${I.O6}${Sn.refId}`,supportingQueryType:S.Q$.InfiniteScroll}));if(!(0,y.zT)(Cn)||!vn)return;const gn={minInterval:vn?.interval,maxDataPoints:rn},xn=(0,x.O)(cn().user),Tn=(0,y.zq)(xn,{from:(0,c.oZ)(xn,Ct.from),to:(0,c.oZ)(xn,Ct.to)},(0,x.q)(cn().user)),Wn=(0,y.bI)(ct,Cn,gn,Tn,!1,xn,Un);Yt(je({exploreId:ct,loadingState:l.Gu.Loading})),Lt=(0,r.z)([(0,R.BN)(vn,Wn.request),ca]).pipe((0,d.Z)(([Sn,An])=>Sn.state!==l.Gu.Done?(0,g.of)({...en,state:l.Gu.Loading}):ne((0,v._k)(en,Sn),en,Ct,void 0,Cn,An,fn,mn))),Lt.subscribe({next(Sn){Yt(Qe({exploreId:ct,response:Sn}))},error(Sn){Yt((0,L.dx)((0,U.gi)("Query processing error",Sn))),Yt(je({exploreId:ct,loadingState:l.Gu.Error})),console.error(Sn)},complete(){Yt(je({exploreId:ct,loadingState:l.Gu.Done}))}})}),ht=async(ct,Ct)=>{const Yt=ct.filter(vn=>vn.datasource?.uid!==O.uv),cn=(0,s.groupBy)(Yt,"datasource.uid");return await Promise.all(Object.values(cn).map(async vn=>({datasource:await(0,E.l)().get(vn[0].datasource,Ct),targets:vn})))},ft=(0,C.createAsyncThunk)("explore/handleSupplementaryQueries",async({datasourceInstance:ct,exploreId:Ct,transaction:Yt,newQuerySource:cn,supplementaryQueries:vn,queries:rn,absoluteRange:en},{dispatch:mn})=>{let Un;ct.meta.mixed?Un=await ht(Yt.request.targets,Yt.request.scopedVars):Un=[{datasource:ct,targets:Yt.request.targets}];for(const fn of re.VW){const ca=(0,re.Pm)(Un,fn,{...Yt.request,requestId:`${Yt.request.requestId}_${(0,s.snakeCase)(fn)}`},cn);ca?(mn(Be({exploreId:Ct,type:fn,dataProvider:ca})),gt(vn[fn].data,rn,en)||(mn(Ne({exploreId:Ct,type:fn})),vn[fn].enabled&&mn(_t(Ct,fn)))):mn(we({exploreId:Ct,type:fn}))}});function gt(ct,Ct,Yt){if(!ct)return!1;const cn=(0,s.zipObject)((0,s.map)(Ct,"refId"),Ct),vn=(0,s.mapValues)((0,s.groupBy)(ct.data.map(Un=>Un.meta?.custom?.sourceQuery),"refId"),s.head),rn=ct.data.every(Un=>Un.meta?.custom?.logsVolumeType===h.Aj.FullRange),en=o()(cn,vn),mn=ct.data.every(Un=>{const fn=Un.meta?.custom?.absoluteRange;return fn?fn&&fn.from<=Yt.from&&Yt.to<=fn.to:!0});return rn&&en&&mn}function Dt(ct,Ct){return(Yt,cn)=>{const vn=cn().explore.panes[ct].queries,rn=Ct.map((en,mn)=>(0,y.eF)(en,vn,mn));Yt(ke({exploreId:ct,queries:rn})),Yt(it({exploreId:ct}))}}function It(ct){return(Ct,Yt)=>{Ct(Oe({exploreId:ct}));const cn=(0,T.Wb)(-1,Yt().explore.panes[ct].range);Ct((0,ye.JA)({exploreId:ct,absoluteRange:cn})),Ct(it({exploreId:ct}))}}function jt(ct){return(Ct,Yt)=>{const cn=Yt().explore.panes[ct].queryResponse,vn=Yt().explore.panes[ct].absoluteRange,rn=(0,pe.O2)(vn);cn.state===l.Gu.Done&&Ct(Ee({exploreId:ct,cacheKey:rn,queryResponse:cn}))}}function Vt(ct){return(Ct,Yt)=>{Ct(J({exploreId:ct}))}}function _t(ct,Ct){return(Yt,cn)=>{const{supplementaryQueries:vn}=cn().explore.panes[ct],rn=vn[Ct].dataProvider;if(rn){const en=rn.subscribe({next:mn=>{Yt(st({exploreId:ct,type:Ct,data:mn}))}});Yt(Ze({exploreId:ct,type:Ct,dataSubscription:en}))}}}function rt(ct,Ct,Yt){return(cn,vn)=>{cn(Te({exploreId:ct,enabled:Ct,type:Yt})),(0,re.Oi)(Ct,Yt),Ct&&cn(_t(ct,Yt))}}const St=(ct,Ct)=>{if(Me.match(Ct)){const{queries:Yt}=ct,{index:cn,query:vn}=Ct.payload,rn=[...Yt.slice(0,cn+1),{...vn},...Yt.slice(cn+1)];return{...ct,queries:rn,queryKeys:(0,y.dY)(rn)}}if(De.match(Ct)){const{queries:Yt}=Ct.payload;return{...ct,queries:Yt}}if(Re.match(Ct))return(0,y._u)(ct.querySubscription),{...ct,...ct.queryResponse?{queryResponse:{...ct.queryResponse,state:l.Gu.Done}}:{}};if(ke.match(Ct)){const{queries:Yt}=Ct.payload;return{...ct,queries:Yt.slice(),queryKeys:(0,y.dY)(Yt)}}if(he.match(Ct)){const{querySubscription:Yt}=Ct.payload;return{...ct,querySubscription:Yt}}if(Te.match(Ct)){const{enabled:Yt,type:cn}=Ct.payload,{supplementaryQueries:vn}=ct,rn=vn[cn].dataSubscription;!Yt&&rn&&rn.unsubscribe();const en={...vn,[cn]:{...vn[cn],enabled:Yt,data:void 0}};return{...ct,supplementaryQueries:en}}if(Be.match(Ct)){const{dataProvider:Yt,type:cn}=Ct.payload,{supplementaryQueries:vn}=ct,rn=vn[cn];rn?.dataSubscription&&rn.dataSubscription.unsubscribe();const en={...vn,[cn]:{...rn,dataProvider:Yt,dataSubscription:void 0}};return{...ct,supplementaryQueries:en}}if(we.match(Ct)){const{type:Yt}=Ct.payload,{supplementaryQueries:cn}=ct,vn=cn[Yt];vn?.dataSubscription&&vn.dataSubscription.unsubscribe();const rn={...cn,[Yt]:{...vn,dataProvider:void 0,dataSubscription:void 0}};return{...ct,supplementaryQueries:rn}}if(Ne.match(Ct)){const{type:Yt}=Ct.payload,{supplementaryQueries:cn}=ct,vn={...cn,[Yt]:{...cn[Yt],data:void 0}};return{...ct,supplementaryQueries:vn}}if(Ze.match(Ct)){const{dataSubscription:Yt,type:cn}=Ct.payload,{supplementaryQueries:vn}=ct,rn={...vn,[cn]:{...vn[cn],dataSubscription:Yt}};return{...ct,supplementaryQueries:rn}}if(st.match(Ct)){let{data:Yt,type:cn}=Ct.payload;const{supplementaryQueries:vn}=ct,rn={...vn,[cn]:{...vn[cn],data:Yt}};return{...ct,supplementaryQueries:rn}}if(Qe.match(Ct))return pn(ct,Ct);if(me.match(Ct)){const{queries:Yt}=Ct.payload;return{...ct,queries:Yt,queryKeys:(0,y.dY)(Yt)}}if(je.match(Ct)){const{loadingState:Yt}=Ct.payload;return{...ct,queryResponse:{...ct.queryResponse,state:Yt}}}if(He.match(Ct)){const{isPaused:Yt}=Ct.payload;return{...ct,isPaused:Yt}}if(Oe.match(Ct))return{...ct,scanning:!0};if(Ke.match(Ct))return{...ct,scanning:!1,scanRange:void 0};if(Ee.match(Ct)){const{cache:cn}=ct,{queryResponse:vn,cacheKey:rn}=Ct.payload;let en=[...cn];return en.some(Un=>Un.key===rn)||(en=[{key:rn,value:vn},...en].slice(0,5)),{...ct,cache:en}}if(J.match(Ct))return{...ct,cache:[]};if(Ge.match(Ct)){if(!ct.logsResult)return{...ct,clearedAtIndex:null};if(ct.queryResponse.state===l.Gu.Loading)return{...ct,clearedAtIndex:null,logsResult:{...ct.logsResult,rows:[]}};const Yt=ct.clearedAtIndex?ct.clearedAtIndex+ct.logsResult.rows.length:ct.logsResult.rows.length-1;return{...ct,clearedAtIndex:Yt,logsResult:{...ct.logsResult,rows:[]}}}return ct},pn=(ct,Ct)=>{const{response:Yt}=Ct.payload,{request:cn,series:vn,error:rn,graphResult:en,logsResult:mn,tableResult:Un,rawPrometheusResult:fn,traceFrames:ca,nodeGraphFrames:Lt,flameGraphFrames:qt,rawPrometheusFrames:hn,customFrames:Cn}=Yt;if(rn){if(rn.type===p.v2.Timeout||rn.type===p.v2.Cancelled)return{...ct};b.$.angularSupportEnabled&&ct.datasourceInstance?.components?.QueryCtrl&&ct.eventBridge.emit(m.ee.dataError,rn)}if(!cn)return{...ct};if(b.$.angularSupportEnabled&&ct.datasourceInstance?.components?.QueryCtrl){const gn=vn.map(xn=>(0,a.w3)(xn));ct.eventBridge.emit(m.ee.dataReceived,gn)}return{...ct,queryResponse:Yt,graphResult:en,tableResult:Un,rawPrometheusResult:fn,logsResult:ct.isLive&&mn?{...mn,rows:(0,pe.pg)(ct.clearedAtIndex,mn.rows)}:mn,showLogs:!!mn,showMetrics:!!en,showTable:!!Un?.length,showTrace:!!ca.length,showNodeGraph:!!Lt.length,showRawPrometheus:!!hn.length,showFlameGraph:!!qt.length,showCustom:!!Cn?.length,clearedAtIndex:ct.isLive?ct.clearedAtIndex:null}}},9955:(Y,A,e)=>{"use strict";e.d(A,{Jr:()=>u,K6:()=>s,Qb:()=>n,pF:()=>r,qq:()=>d,st:()=>g,vC:()=>i});var t=e(1081);const n=l=>l.explore.panes,o=l=>l.explore,s=(0,t.Mz)(n,Object.entries),r=(0,t.Mz)(s,l=>l.length>1),g=(0,t.Mz)(s,l=>l.some(f=>f[1].correlationEditorHelperData!==void 0)),u=l=>(0,t.Mz)(n,f=>Object.keys(f)[0]===l),d=l=>(0,t.Mz)(n,f=>f[l]),i=(0,t.Mz)(o,l=>l.correlationEditorDetails)},89224:(Y,A,e)=>{"use strict";e.d(A,{$_:()=>T,GA:()=>S,GH:()=>E,Iy:()=>M,JA:()=>b,QP:()=>O,Xk:()=>x,eM:()=>a,hO:()=>v,iO:()=>P,ke:()=>I,zY:()=>D});var t=e(30038),n=e(47232),o=e(26272),s=e(39070),r=e(72574),g=e(11134),u=e(76412),d=e(28138),i=e(87490),l=e(80582),f=e(74856),c=e(91002),h=e(32901),p=e(29436),m=e(23994);const a=(0,t.VP)("explore/changeRange"),v=(0,t.VP)("explore/changeRefreshInterval"),E=C=>(L,U)=>{const{syncedTimes:R}=U().explore;R?Object.keys(U().explore.panes).forEach(B=>{L(b({...C,exploreId:B})),L((0,m.Od)({exploreId:B,preserveCache:!0}))}):(L(b({...C})),L((0,m.Od)({exploreId:C.exploreId,preserveCache:!0})))},D=C=>L=>{L((0,m.S6)({...C}))},b=C=>(L,U)=>{const{exploreId:R,absoluteRange:B,rawRange:H}=C,W=U().explore.panes[R],N=(0,h.O)(U().user),V=(0,h.q)(U().user),{range:G}=W;let _=G.raw;B&&(_={from:(0,n.oZ)(N,B.from),to:(0,n.oZ)(N,B.to)}),H&&(_=H);const K=(0,i.zq)(N,_,V),j={from:K.from.valueOf(),to:K.to.valueOf()};(0,f.jG)().init({timepicker:{},getTimezone:()=>N,timeRangeUpdated(k){},time:K.raw}),(0,r.w)().updateTimeRange(K),L(a({exploreId:R,range:K,absoluteRange:j}))};function P(C){return(L,U)=>{const R=U().explore.panes[C].range.raw;Object.keys(U().explore.panes).filter(H=>H!==C).forEach(H=>{L(E({exploreId:H,rawRange:R}))});const B=U().explore.syncedTimes;L((0,p.qz)({syncedTimes:!B}))}}function y(C){return(L,U)=>{const R=(0,h.O)(U().user),B=(0,h.q)(U().user);Object.entries(U().explore.panes).forEach(([H,W])=>{const N=(0,i.zq)(R,W.range.raw,B);C(H,W,N,L)})}}function T(){return y((C,L,U,R)=>{const B={from:U.from.valueOf(),to:U.to.valueOf()};R(E({exploreId:C,absoluteRange:B}))})}function M(C){return y((L,U,R,B)=>{const H=(0,l.Wb)(C,R);B(E({exploreId:L,absoluteRange:H}))})}function I(C){return y((L,U,R,B)=>{const H=(0,l.Zk)(R,C);B(E({exploreId:L,absoluteRange:H}))})}function x(){return(C,L)=>{const U=L().explore.panes[Object.keys(L().explore.panes)[0]].range.raw;navigator.clipboard.writeText(JSON.stringify(U)),d.A.emit(o.r1.alertSuccess,[(0,u.t)("time-picker.copy-paste.copy-success-message","Time range copied to clipboard")])}}function S(){return async(C,L)=>{const{range:U,isError:R}=await(0,l.zG)();if(R===!0){d.A.emit(o.r1.alertError,[(0,u.t)("time-picker.copy-paste.default-error-title","Invalid time range"),(0,u.t)("time-picker.copy-paste.default-error-message","{{error}} is not a valid time range",{error:U})]);return}if(L().explore.syncedTimes){C(E({exploreId:Object.keys(L().explore.panes)[0],rawRange:U})),C(E({exploreId:Object.keys(L().explore.panes)[1],rawRange:U}));return}C(E({exploreId:Object.keys(L().explore.panes)[0],rawRange:U}))}}const O=(C,L)=>{if(v.match(L)){const{refreshInterval:U}=L.payload,R=g.cC.isLive(U),B=(0,i.uE)(U),H=(0,c.zy)(C.logsResult,B);return g.cC.isLive(C.refreshInterval)&&!R&&(0,i._u)(C.querySubscription),{...C,refreshInterval:U,queryResponse:{...C.queryResponse,state:R?s.Gu.Streaming:s.Gu.Done},isLive:R,isPaused:R?!1:C.isPaused,logsResult:H}}if(a.match(L)){const{range:U,absoluteRange:R}=L.payload;return{...C,range:U,absoluteRange:R}}return C}},34028:(Y,A,e)=>{"use strict";e.d(A,{BE:()=>E,HZ:()=>a,O2:()=>D,RA:()=>v,Z9:()=>y,aj:()=>x,dq:()=>I,eO:()=>P,kn:()=>h,ng:()=>m,pg:()=>M,rk:()=>b});var t=e(2543),n=e.n(t),o=e(39070),s=e(43127),r=e(85858),g=e(47232),u=e(19347),d=e(14678),i=e(33390),l=e(87490),f=e(31193),c=e(57288);const h={from:"now-1h",to:"now"},p="grafana.explore.style.graph",m=S=>{i.A.set(p,S)},a=S=>({containerWidth:0,datasourceInstance:null,history:[],queries:[],initialized:!1,range:{from:null,to:null,raw:h},absoluteRange:{from:null,to:null},scanning:!1,queryKeys:[],isLive:!1,isPaused:!1,queryResponse:v(),tableResult:null,graphResult:null,logsResult:null,clearedAtIndex:null,rawPrometheusResult:null,eventBridge:null,cache:[],richHistory:[],supplementaryQueries:(0,c.Ez)(),panelsState:{},correlations:void 0,...S}),v=()=>({state:o.Gu.NotStarted,series:[],timeRange:(0,s.E2)(),graphFrames:[],logsFrames:[],traceFrames:[],nodeGraphFrames:[],flameGraphFrames:[],customFrames:[],tableFrames:[],rawPrometheusFrames:[],rawPrometheusResult:null,graphResult:null,logsResult:null,tableResult:null});async function E(S,O){let C;try{C=await(0,f.tR)().get(O)}catch{C=await(0,f.tR)().get()}if(C.init)try{C.init()}catch(R){console.error(R)}const L=`grafana.explore.history.${C.meta?.id}`,U=i.A.getObject(L,[]);return(0,l.dr)(S,C.uid),{history:U,instance:C}}function D(S){const O={from:S.from,to:S.to};return Object.entries(O).map(([L,U])=>`${encodeURIComponent(L)}=${encodeURIComponent(U.toString())}`).join("&")}function b(S,O){const C=D(O),L=S.findIndex(R=>R.key===C);return L>=0?S[L].value:void 0}function P(S,O){return{from:r.parse(S.from,!1,O),to:r.parse(S.to,!0,O),raw:S}}function y(S){let O=h,C={from:T(S.from),to:T(S.to)};return C.from!==null&&C.to!==null&&(O={from:C.from,to:C.to}),O}function T(S){if(S===null)return null;if((0,g.Ar)(S))return S;if(typeof S!="string")return null;const O=S;if(O.indexOf("now")!==-1)return O;if(O.length===8)return(0,g.yT)(O,"YYYYMMDD");if(O.length===15)return(0,g.yT)(O,"YYYYMMDDTHHmmss");if(O.length===19)return(0,g.yT)(O,"YYYY-MM-DD HH:mm:ss");if(O.match(/^\d+$/)){const L=parseInt(O,10);return(0,g.yT)(L)}const C=(0,g.yT)(O);return C.isValid()?C:null}const M=(S,O)=>O?S?O.slice(S+1):O:[],I=(S,O)=>S===d.uv?(0,t.uniq)(O.map(C=>C.datasource?.uid).filter(C=>!!C)):[S];async function x(S,O){const C=S.explore.panes[O].correlationEditorHelperData,L=S.explore.correlationEditorDetails?.editorMode||!1,U=Object.keys(S.explore.panes)[0]===O,R=L&&U,B=R?await(0,u.l)().get():void 0,H=L&&!U&&C!==void 0;let W={};return H&&C!==void 0&&Object.entries(C?.vars).forEach(N=>{W[N[0]]={value:N[1]}}),{defaultCorrelationEditorDatasource:B,scopedVars:W,showCorrelationEditorLinks:R}}},96192:(Y,A,e)=>{"use strict";e.d(A,{JQ:()=>P,O1:()=>T,QL:()=>D,YV:()=>E,_O:()=>x,eT:()=>b});var t=e(2543),n=e.n(t),o=e(96540),s=e(92461),r=e(91890),g=e(41987),u=e(6709),d=e(76885),i=e(72574),l=e(14110),f=e(16233),c=e(67023),h=e(6923),p=e(80252);const a=[S=>!S.internal||f.TP.hasAccessToExplore()],v="grafana_data_link_clicked",E=(S,O)=>L=>{const{field:U,dataLinkScopedVars:R,frame:B,link:H,linkModel:W}=L,{valueRowIndex:N}=L.config;if(!H.internal||N===void 0)return W;const V=D({field:U,rowIndex:N,splitOpenFn:S,range:O,vars:R,dataFrame:B,linksToProcess:[H]});return V.length?(0,t.first)(V):void 0},D=S=>{const{field:O,vars:C,splitOpenFn:L,range:U,rowIndex:R,dataFrame:B}=S,H={...C||{}};H.__value={value:{raw:O.values[R]},text:"Raw value"};let W;B&&(W=(0,s.F)({frame:B,rowIndex:R}),H.__data={value:{name:B.name,refId:B.refId,fields:W},text:"Data"},B.fields.forEach(V=>{W&&W[V.name]&&(H[V.name]={value:W[V.name]})}),H.__targetField={value:W[O.name]});const N=S.linksToProcess||O.config.links;return N?N.filter(_=>a.every(K=>K(_,H))).map(_=>{if(_.internal){let K={};_.internal?.transformations&&_.internal?.transformations.forEach(ae=>{let Z;ae.field?Z=B?.fields.find(q=>q.name===ae.field)?.values[R]:Z=O.values[R],K={...K,...(0,c.k)(ae,Z,O.name)}});const j={...H,...K},k=T(_,j);let Q=[];if(k.variables.length===0){const ae=O.name.toString();Q.push({variableName:ae,value:"",match:""})}else Q=k.variables;const ee=ae=>{(0,l.rR)(v,{origin:_.origin||r.x0.Datasource,app:g.Jk.Explore,internal:!0}),L?.(ae)};return k.allVariablesDefined?{...(0,u.u)({link:_,internalLink:_.internal,scopedVars:j,range:U,field:O,onClickFn:S.splitOpenFn?Z=>ee(Z):void 0,replaceVariables:(0,i.w)().replace.bind((0,i.w)())}),variables:Q}:void 0}else{const K=(k,Q)=>(0,i.w)().replace(k,{...Q,...H}),j=(0,h.mQ)().getDataLinkUIModel(_,K,O);return j.title||(j.title=b(j.href)),j}}).filter(_=>!!_):[]};function b(S){S.indexOf("://")<0&&(S=`http://${S}`);let O;try{O=new URL(S).hostname}catch{O=S}return O}function P(S,O){return(0,o.useCallback)((C,L)=>C.fields.flatMap(U=>U.config?.links&&U.config?.links.length?D({field:U,rowIndex:L,range:S,dataFrame:C,splitOpenFn:O}):[]),[S,O])}const y=["__from","__to","__interval","__interval_ms","__org","__user","__range","__rate_interval","__timeFilter","timeFilter"];function T(S,O){let C=[];return(0,i.w)().replace.bind((0,i.w)())(M(S),O,void 0,C),C=(0,t.uniqBy)(C,"variableName"),{variables:C,allVariablesDefined:C.filter(U=>!y.includes(U.variableName)).every(U=>U.found)}}function M(S){let O="",C;for(C in S)typeof S[C]=="string"?O+=" "+S[C]:typeof S[C]=="object"&&(O+=" "+M(S[C]));return O}const I=S=>S[1]!==void 0,x=S=>{const O=Object.entries(S).filter(I).map(([C,L])=>{const U=(0,p.m)(L);return U.range={to:L.range.to.valueOf().toString(),from:L.range.from.valueOf().toString()},[C,U]}).reduce((C,[L,U])=>({...C,[L]:U}),{});return d.kM.renderUrl("/explore",{schemaVersion:1,panes:JSON.stringify(O)})}},27649:(Y,A,e)=>{"use strict";e.d(A,{v:()=>n});var t=e(21969);function n(o){const s=new Set(o.map(r=>r.refId).filter(Boolean));return s.size===o.length?o:(s.clear(),o.map(r=>{if(r.refId&&!s.has(r.refId))return s.add(r.refId),r;const g=(0,t.W3)(o);return s.add(g),{...r,refId:g}}))}},57288:(Y,A,e)=>{"use strict";e.d(A,{Ez:()=>p,Oi:()=>h,Pm:()=>v,VW:()=>f});var t=e(2543),n=e.n(t),o=e(88483),s=e(44240),r=e(6276),g=e(29405),u=e(9557),d=e(39070),i=e(33390),l=e(69147);const f=[u.cF.LogsVolume,u.cF.LogsSample],c=E=>`grafana.explore.logs.enable${E}`,h=(E,D)=>{i.A.set(c(D),E?"true":"false")},p=()=>{let E={[u.cF.LogsVolume]:{enabled:!0},[u.cF.LogsSample]:{enabled:!1}};for(const D of f){if(D===u.cF.LogsSample)continue;i.A.get(c(D))==="false"&&(E[D]={enabled:!1})}return E},m=(E,D,b)=>new o.c(P=>E.subscribe(y=>{if(y.logsResult&&y.logsResult.rows&&y.logsResult.visibleRange&&y.logsResult.bucketSize!==void 0&&y.state===d.Gu.Done){const T=y.logsResult.bucketSize,M=D.map(S=>S.refId),I=(0,t.groupBy)(y.logsResult.rows,"dataFrame.refId");let x=[];M.forEach(S=>{if(I[S]?.length){const O=(0,l.J9)(I[S],T);x=[...x,...O];const C={logsVolumeType:u.Aj.Limited,absoluteRange:y.logsResult?.visibleRange,datasourceName:b,sourceQuery:D.find(L=>L.refId===S)};P.next({data:x.map(L=>{const U=L.meta?.custom||{};return{...L,meta:{custom:{...U,...C}}}}),state:y.state})}}),P.complete()}})),a=(E,D,b,P)=>{if(E===u.cF.LogsVolume)return m(D,b,P)},v=(E,D,b,P)=>{const T=E.map(({datasource:M,targets:I},x)=>{const S=(0,t.cloneDeep)(b);if(S.requestId=`${S.requestId||""}_${x}`,S.targets=I,(0,u.Nc)(M,D)){if(M.getDataProvider)return M.getDataProvider(D,S);if(M.getSupplementaryRequest){const O=M.getSupplementaryRequest(D,S);return O?D===u.cF.LogsVolume?(0,l.sg)(M,O,{targets:S.targets}):(0,l.Wr)(M,O):void 0}else return}else return a(D,P,I,M.name)}).filter(d.zz);if(T.length!==0)return T.length===1?T[0]:(0,s.h)(...T).pipe((0,g.S)((M,I)=>M.errors&&M.errors.length||I.state===d.Gu.NotStarted?M:I.state===d.Gu.Loading&&M.state===d.Gu.NotStarted?{...M,state:d.Gu.Loading}:I.state&&I.state!==d.Gu.Done?M:{...M,data:[...M.data,...I.data],state:d.Gu.Done},{data:[],state:d.Gu.NotStarted}),(0,r.d)())}},53478:(Y,A,e)=>{"use strict";e.d(A,{Ex:()=>y,$i:()=>P});var t=e(65474),n=e(69862),o=e(43429),s=e(26657),r=e(72574),g=e(19347),u=e(96540),d=e(14186),i=e(88323),l=e(98808),f=e(71680),c=e(1712),h=e(34263),p=e(76658),m=e(66718),a=e(76942);const v=15;function E(){const T=(0,u.useRef)({}),M=(0,u.useCallback)(x=>{switch(x){case m.Tz.math:case m.Tz.reduce:case m.Tz.resample:case m.Tz.threshold:return T.current[x];case m.Tz.classic:return}},[]),I=(0,u.useCallback)((x,S)=>{switch(x){case m.Tz.math:T.current.math=S;break;case m.Tz.reduce:case m.Tz.resample:case m.Tz.resample:T.current.reduce=S,T.current.resample=S,T.current.threshold=S;break}},[]);return{getCachedExpression:M,setCachedExpression:I}}function D(T){const{query:M,queries:I,onRunQuery:x,onChange:S}=T,{getCachedExpression:O,setCachedExpression:C}=E();(0,u.useEffect)(()=>{C(M.type,M.expression)},[M.expression,M.type,C]);const L=(0,u.useCallback)(B=>{const H=O(B.value),W=(0,a.r)({...M,type:B.value});S({...W,expression:H??W.expression})},[M,S,O]),U=()=>{const B=I.filter(H=>M.refId!==H.refId).map(H=>({value:H.refId,label:H.refId}));switch(M.type){case m.Tz.math:return u.createElement(f.z,{onChange:S,query:M,labelWidth:v,onRunQuery:x});case m.Tz.reduce:return u.createElement(c.Z,{refIds:B,onChange:S,labelWidth:v,query:M});case m.Tz.resample:return u.createElement(h.C,{query:M,labelWidth:v,onChange:S,refIds:B});case m.Tz.classic:return u.createElement(l.z,{onChange:S,query:M,refIds:B});case m.Tz.threshold:return u.createElement(p.O,{onChange:S,query:M,labelWidth:v,refIds:B})}},R=m.uQ.find(B=>B.value===M.type);return u.createElement("div",null,u.createElement(d.I,{label:"Operation",labelWidth:v},u.createElement(i.l6,{options:m.uQ,value:R,onChange:L,width:25})),U())}class b extends s.iy{constructor(M){super(M),this.instanceSettings=M}applyTemplateVariables(M,I){const x=(0,r.w)();return{...M,expression:x.replace(M.expression,I),window:x.replace(M.window,I)}}getCollapsedText(M){return`Expression: ${M.type}`}query(M){let I=M.targets.map(async S=>{const O=await(0,g.l)().get(S.datasource);return O.interpolateVariablesInQueries?O?.interpolateVariablesInQueries([S],M.scopedVars,M.filters)[0]:S});return(0,t.H)(Promise.all(I)).pipe((0,n.Z)(S=>super.query({...M,targets:S})))}newQuery(M){return{refId:"--",datasource:s.dR,type:M?.type??m.Tz.math,...M}}}const P={id:-100,uid:m.Uj,name:s.dR.name,type:s.dR.type,access:"proxy",meta:{baseUrl:"",module:"",type:o.QE.datasource,name:s.dR.type,id:s.dR.type,info:{author:{name:"Grafana Labs"},logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"},description:"Adds expression support to Grafana",screenshots:[],links:[],updated:"",version:""}},jsonData:{},readOnly:!0},y=new b(P);y.meta={id:s.dR.type,info:{logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"}}},y.components={QueryEditor:D}},98808:(Y,A,e)=>{"use strict";e.d(A,{z:()=>D});var t=e(96540),n=e(39268),o=e(14186),s=e(55852),r=e(14578),g=e(76942),u=e(32196),d=e(40845),i=e(67061),l=e(9261),f=e(88323),c=e(10354),h=e(55907);const p=h.A.reducerTypes.map(b=>({label:b.text,value:b.value})),m=h.A.evalOperators.map(b=>({label:b.text,value:b.value})),a=h.A.evalFunctions.map(b=>({label:b.text,value:b.value})),v=({condition:b,index:P,onChange:y,onRemoveCondition:T,refIds:M})=>{const I=(0,d.of)(E),x=B=>{y({...b,operator:{type:B.value}})},S=B=>{y({...b,reducer:{type:B.value,params:[]}})},O=B=>{y({...b,query:{params:[B.value]}})},C=B=>{y({...b,evaluator:{params:b.evaluator.params,type:B.value}})},L=(B,H)=>{const W=parseFloat(B.currentTarget.value),N=[...b.evaluator.params];N[H]=W,y({...b,evaluator:{...b.evaluator,params:N}})},U=(0,u.css)`
    width: 60px;
  `,R=b.evaluator.type===h.p.IsWithinRange||b.evaluator.type===h.p.IsOutsideRange;return t.createElement(i.B,null,t.createElement("div",{style:{flex:1}},t.createElement(n.C,null,P===0?t.createElement("div",{className:(0,u.cx)(I.button,U)},"WHEN"):t.createElement(l.f,{className:(0,u.cx)(I.buttonSelectText,U),options:m,onChange:x,value:m.find(B=>B.value===b.operator.type)}),t.createElement(f.l6,{options:p,onChange:S,width:20,value:p.find(B=>B.value===b.reducer.type)}),t.createElement("div",{className:I.button},"OF"),t.createElement(f.l6,{onChange:O,options:M,width:"auto",value:M.find(B=>B.value===b.query.params[0])})),t.createElement(n.C,null,t.createElement(l.f,{className:I.buttonSelectText,options:a,onChange:C,value:a.find(B=>B.value===b.evaluator.type)}),R?t.createElement(t.Fragment,null,t.createElement(c.p,{type:"number",width:10,onChange:B=>L(B,0),value:b.evaluator.params[0]}),t.createElement("div",{className:I.button},"TO"),t.createElement(c.p,{type:"number",width:10,onChange:B=>L(B,1),value:b.evaluator.params[1]})):b.evaluator.type!==h.p.HasNoValue?t.createElement(c.p,{type:"number",width:10,onChange:B=>L(B,0),value:b.evaluator.params[0]}):null)),t.createElement(s.$n,{variant:"secondary",type:"button",onClick:()=>T(P)},t.createElement(r.I,{name:"trash-alt"})))},E=b=>{const P=(0,u.css)`
    color: ${b.colors.primary.text};
    font-size: ${b.typography.bodySmall.fontSize};
  `;return{buttonSelectText:P,button:(0,u.cx)((0,u.css)`
        display: flex;
        align-items: center;
        border-radius: ${b.shape.radius.default};
        font-weight: ${b.typography.fontWeightMedium};
        border: 1px solid ${b.colors.border.weak};
        white-space: nowrap;
        padding: 0 ${b.spacing(1)};
        background-color: ${b.colors.background.canvas};
      `,P)}},D=({onChange:b,query:P,refIds:y})=>{const T=(x,S)=>{P.conditions&&b({...P,conditions:[...P.conditions.slice(0,S),x,...P.conditions.slice(S+1)]})},M=()=>{if(P.conditions){const x=P.conditions.at(-1)?.query?.params??[],S={...g.P,query:{params:x}};b({...P,conditions:P.conditions.length>0?[...P.conditions,S]:[S]})}},I=x=>{if(P.conditions){const S=P.conditions[x],O=P.conditions.filter(C=>C!==S).map((C,L)=>L===0?{...C,operator:{type:"when"}}:C);b({...P,conditions:O})}};return t.createElement("div",null,t.createElement(n.C,null,t.createElement(o.I,{label:"Conditions",labelWidth:14},t.createElement("div",null,P.conditions?.map((x,S)=>{if(x)return t.createElement(v,{key:S,index:S,condition:x,onChange:O=>T(O,S),onRemoveCondition:I,refIds:y})})))),t.createElement(s.$n,{variant:"secondary",type:"button",onClick:M},t.createElement(r.I,{name:"plus-circle"})))}},71680:(Y,A,e)=>{"use strict";e.d(A,{z:()=>f});var t=e(32196),n=e(96540),o=e(40845),s=e(67061),r=e(14186),g=e(76892),u=e(60782),d=e(14578),i=e(21744);const l="Math operations on one or more queries. You reference the query by ${refId} ie. $A, $B, $C etc\nThe sum of two scalar values: $A + $B > 10",f=({labelWidth:m,onChange:a,query:v,onRunQuery:E})=>{const D=y=>{a({...v,expression:y.target.value})},b=(0,o.of)(h),P=()=>{v.expression&&E()};return n.createElement(s.B,null,n.createElement(r.I,{label:n.createElement(g.c,{width:"auto"},n.createElement(u.G,{fitContent:!0,content:n.createElement("div",{className:b.documentationContainer},n.createElement("div",null,"Run math operations on one or more queries. You reference the query by ","${refId}"," ie. $A, $B, $C etc.",n.createElement("br",null),"Example: ",n.createElement("code",null,"$A + $B")),n.createElement("header",{className:b.documentationHeader},"Available Math functions"),n.createElement("div",{className:b.documentationFunctions},n.createElement(c,{name:"abs",description:"returns the absolute value of its argument which can be a number or a series"}),n.createElement(c,{name:"is_inf",description:"returns 1 for Inf values (negative or positive) and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(c,{name:"is_nan",description:"returns 1 for NaN values and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(c,{name:"is_null",description:"returns 1 for null values and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(c,{name:"is_number",description:"returns 1 for all real number values and 0 for non-number. It's able to operate on series or scalar values."}),n.createElement(c,{name:"log",description:"returns the natural logarithm of its argument, which can be a number or a series"}),n.createElement(c,{name:"inf, infn, nan, and null",description:"The inf for infinity positive, infn for infinity negative, nan, and null functions all return a single scalar value that matches its name."}),n.createElement(c,{name:"round",description:"returns a rounded integer value. It's able to operate on series or escalar values."}),n.createElement(c,{name:"ceil",description:"rounds the number up to the nearest integer value. It's able to operate on series or escalar values."}),n.createElement(c,{name:"floor",description:"rounds the number down to the nearest integer value. It's able to operate on series or escalar values."}))),title:n.createElement(s.B,{gap:1,direction:"row"},n.createElement(d.I,{name:"book-open"})," Math operator"),footer:n.createElement("div",null,"See our additional documentation on"," ",n.createElement("a",{className:b.documentationLink,target:"_blank",href:"https://grafana.com/docs/grafana/latest/panels/query-a-data-source/use-expressions-to-manipulate-data/about-expressions/#math",rel:"noreferrer"},n.createElement(d.I,{size:"xs",name:"external-link-alt"})," Math expressions"),"."),closeButton:!0,placement:"bottom-start"},n.createElement("div",{className:b.info},"Expression ",n.createElement(d.I,{name:"info-circle"})))),labelWidth:m,grow:!0,shrink:!0},n.createElement(i.f,{value:v.expression,onChange:D,rows:1,placeholder:l,onBlur:P,style:{minWidth:250,lineHeight:"26px",minHeight:32}})))},c=({name:m,description:a})=>{const v=(0,o.of)(p);return n.createElement(n.Fragment,null,n.createElement("span",{className:v.name},m),n.createElement("span",{className:v.description},a))},h=m=>({documentationHeader:(0,t.css)`
    font-size: ${m.typography.h5.fontSize};
    font-weight: ${m.typography.h5.fontWeight};
  `,documentationLink:(0,t.css)`
    color: ${m.colors.text.link};
  `,documentationContainer:(0,t.css)`
    display: flex;
    flex: 1;
    flex-direction: column;
    gap: ${m.spacing(2)};

    padding: ${m.spacing(1)} ${m.spacing(2)};
  `,documentationFunctions:(0,t.css)`
    display: grid;
    grid-template-columns: max-content auto;
    column-gap: ${m.spacing(2)};
  `,info:(0,t.css)`
    display: flex;
    flex-direction: row;
    align-items: center;
    cursor: pointer;
    gap: ${m.spacing(1)};
  `}),p=m=>({name:(0,t.css)`
    font-weight: ${m.typography.fontWeightBold};
  `,description:(0,t.css)`
    font-size: ${m.typography.bodySmall.fontSize};
    color: ${m.colors.text.disabled};
  `})},1712:(Y,A,e)=>{"use strict";e.d(A,{Z:()=>u});var t=e(96540),n=e(14186),o=e(10354),s=e(39268),r=e(88323),g=e(66718);const u=({labelWidth:d="auto",onChange:i,refIds:l,query:f})=>{const c=g.Cu.find(b=>b.value===f.reducer),h=b=>{i({...f,expression:b.value})},p=b=>{i({...f,reducer:b.value})},m=b=>{i({...f,settings:b})},a=b=>{let P;switch(b.value){case g.Mt.ReplaceNonNumbers:let y=0;f.settings?.mode===g.Mt.ReplaceNonNumbers&&(y=f.settings?.replaceWithValue??0),P={mode:g.Mt.ReplaceNonNumbers,replaceWithValue:y};break;default:P={mode:b.value}}m(P)},v=b=>{const P=b.currentTarget.valueAsNumber;m({mode:g.Mt.ReplaceNonNumbers,replaceWithValue:P??0})},E=f.settings?.mode??g.Mt.Strict,D=()=>{if(E===g.Mt.ReplaceNonNumbers)return t.createElement(n.I,{label:"Replace With",labelWidth:d},t.createElement(o.p,{type:"number",width:10,onChange:v,value:f.settings?.replaceWithValue??0}))};return t.createElement(t.Fragment,null,t.createElement(s.C,null,t.createElement(n.I,{label:"Input",labelWidth:d},t.createElement(r.l6,{onChange:h,options:l,value:f.expression,width:"auto"}))),t.createElement(s.C,null,t.createElement(n.I,{label:"Function",labelWidth:d},t.createElement(r.l6,{options:g.Cu,value:c,onChange:p,width:20})),t.createElement(n.I,{label:"Mode",labelWidth:d},t.createElement(r.l6,{onChange:a,options:g.HZ,value:E,width:25})),D()))}},34263:(Y,A,e)=>{"use strict";e.d(A,{C:()=>u});var t=e(96540),n=e(39268),o=e(14186),s=e(88323),r=e(10354),g=e(66718);const u=({labelWidth:d="auto",onChange:i,refIds:l,query:f})=>{const c=g.PN.find(E=>E.value===f.downsampler),h=g.iX.find(E=>E.value===f.upsampler),p=E=>{i({...f,window:E.target.value})},m=E=>{i({...f,expression:E.value})},a=E=>{i({...f,downsampler:E.value})},v=E=>{i({...f,upsampler:E.value})};return t.createElement(t.Fragment,null,t.createElement(n.C,null,t.createElement(o.I,{label:"Input",labelWidth:d},t.createElement(s.l6,{onChange:m,options:l,value:f.expression,width:20}))),t.createElement(n.C,null,t.createElement(o.I,{label:"Resample to",labelWidth:d,tooltip:"10s, 1m, 30m, 1h"},t.createElement(r.p,{onChange:p,value:f.window,width:15})),t.createElement(o.I,{label:"Downsample"},t.createElement(s.l6,{options:g.PN,value:c,onChange:a,width:25})),t.createElement(o.I,{label:"Upsample"},t.createElement(s.l6,{options:g.iX,value:h,onChange:v,width:25}))))}},76658:(Y,A,e)=>{"use strict";e.d(A,{O:()=>I});var t=e(32196),n=e(96540),o=e(46819),s=e(40845),r=e(39268),g=e(14186),u=e(88323),d=e(9261),i=e(10354),l=e(15292),f=e(2913),c=e(55907),h=e(66718),p=e(30038);const m=(0,p.VP)("thresold/updateRefId"),a=(0,p.VP)("thresold/updateThresholdType"),v=(0,p.VP)("thresold/updateThresholdParams"),E=(0,p.VP)("thresold/updateHysteresis"),D=(0,p.VP)("thresold/updateUnloadParams"),b=(0,p.vy)({type:h.Tz.threshold,refId:"",conditions:[]},O=>{O.addCase(m,(C,L)=>{C.expression=L.payload}),O.addCase(a,(C,L)=>{const U=L.payload.evalFunction,R=L.payload.onError;if(C.conditions[0].evaluator.type=U,!!C.conditions[0].unloadEvaluator){const H=P(C.conditions[0].evaluator.type);R&&R(void 0),C.conditions[0].evaluator.type=U;const W={type:H,params:C.conditions[0].evaluator?.params??[0,0]};C.conditions[0].unloadEvaluator=W}}),O.addCase(v,(C,L)=>{const{param:U,index:R}=L.payload;C.conditions[0].evaluator.params[R]=U}),O.addCase(E,(C,L)=>{const{hysteresisChecked:U,onError:R}=L.payload;U?C.conditions[0].unloadEvaluator={type:P(C.conditions[0].evaluator.type),params:C.conditions[0].evaluator?.params??[0,0]}:(C.conditions[0].unloadEvaluator=void 0,R&&R(void 0))}),O.addCase(D,(C,L)=>{const{param:U,index:R,onError:B}=L.payload;C.conditions[0].unloadEvaluator?C.conditions[0].unloadEvaluator.params[R]=U:C.conditions[0].unloadEvaluator={type:P(C.conditions[0].evaluator.type),params:C.conditions[0].evaluator?.params??[0,0]};const H=y(C.conditions[0]),{errorMsg:W,errorMsgFrom:N,errorMsgTo:V}=H??{};B&&B(W||N||V)})});function P(O){return O===c.p.IsAbove?c.p.IsBelow:O===c.p.IsBelow?c.p.IsAbove:O===c.p.IsWithinRange?c.p.IsOutsideRange:O===c.p.IsOutsideRange?c.p.IsWithinRange:c.p.IsBelow}function y(O){const{unloadEvaluator:C,evaluator:L}=O;if(!L)return;if(C?.params[0]===void 0||Number.isNaN(C?.params[0]))return{errorMsg:"This value cannot be empty"};const{type:U,params:R}=L,{params:B}=C;if(U===c.p.IsWithinRange||U===c.p.IsOutsideRange){if(B[0]===void 0||Number.isNaN(B[0]))return{errorMsgFrom:"This value cannot be empty"};if(B[1]===void 0||Number.isNaN(B[1]))return{errorMsgTo:"This value cannot be empty"}}const[H,W]=C.params,[N,V]=R;switch(U){case c.p.IsAbove:if(H>N)return{errorMsg:`Enter a number less than or equal to ${N}`};break;case c.p.IsBelow:if(H<N)return{errorMsg:`Enter a number more than or equal to ${N}`};break;case c.p.IsOutsideRange:if(H<N)return{errorMsgFrom:`Enter a number more than or equal to ${N}`};if(W>V)return{errorMsgTo:`Enter a number less than or equal to ${V}`};break;case c.p.IsWithinRange:if(H>N)return{errorMsgFrom:`Enter a number less than or equal to ${N}`};if(W<V)return{errorMsgTo:`Enter a number be more than or equal to ${V}`};break;default:throw new Error(`evaluator function type ${U} not supported.`)}}const T=c.p.IsAbove,M={type:"query",evaluator:{type:T,params:[0,0]},query:{params:[]},reducer:{params:[],type:"last"}},I=({labelWidth:O,onChange:C,refIds:L,query:U,onError:R,useHysteresis:B=!1})=>{const H=(0,s.of)(S),W={...U,conditions:U.conditions?.length?U.conditions:[M]},[N,V]=(0,n.useReducer)(b,W),G=N.conditions[0],_=h.zd.find(Z=>Z.value===N.conditions[0].evaluator?.type),K=Z=>{V(m(Z.value))};(0,n.useEffect)(()=>{N&&C(N)},[N]);const j=Z=>{V(a({evalFunction:Z.value??T,onError:R}))},k=(Z,ne)=>{V(v({param:parseFloat(Z.currentTarget.value),index:ne}))},Q=G.evaluator.type===c.p.IsWithinRange||G.evaluator.type===c.p.IsOutsideRange,ee=!!f.$W.featureToggles?.recoveryThreshold&&B;return n.createElement(n.Fragment,null,n.createElement(r.C,null,n.createElement(g.I,{label:"Input",labelWidth:O},n.createElement(u.l6,{onChange:K,options:L,value:U.expression,width:20}))),n.createElement(r.C,null,n.createElement(d.f,{className:H.buttonSelectText,options:h.zd,onChange:j,value:_}),Q?n.createElement(n.Fragment,null,n.createElement(i.p,{type:"number",width:10,onChange:Z=>k(Z,0),defaultValue:G.evaluator.params[0]}),n.createElement("div",{className:H.button},"TO"),n.createElement(i.p,{type:"number",width:10,onChange:Z=>k(Z,1),defaultValue:G.evaluator.params[1]})):n.createElement(i.p,{type:"number",width:10,onChange:Z=>k(Z,0),defaultValue:G.evaluator.params[0]||0})),ee&&n.createElement(ae,{isRange:Q,onError:R}));function ae({isRange:Z,onError:ne}){const q=!!G.unloadEvaluator,te=ie=>{V(E({hysteresisChecked:ie.currentTarget.checked,onError:ne})),re.current=!0},re=n.useRef(!0),de=()=>{re.current=!1};return n.createElement("div",{className:H.hysteresis},n.createElement("div",{onMouseDown:de},n.createElement(l.K,{showLabel:!0,label:"Custom recovery threshold",value:q,onChange:te,className:H.switch})),q&&n.createElement(x,{isRange:Z,condition:G,onError:ne,dispatch:V,allowOnblur:re}))}};function x({isRange:O,condition:C,onError:L,dispatch:U,allowOnblur:R}){const B=(0,s.of)(S),H=(j,k)=>{const Q=parseFloat(j.currentTarget.value);U(D({param:Q,index:k,onError:L}))},W=y(C),{errorMsg:N,errorMsgFrom:V,errorMsgTo:G}=W??{};if(O)return n.createElement(_,{allowOnblur:R});return n.createElement(K,{allowOnblur:R});function _({allowOnblur:j}){return C.evaluator.type===c.p.IsWithinRange?n.createElement(r.C,{className:B.hysteresis},n.createElement(g.I,{label:"Stop alerting when outside range",labelWidth:"auto"},n.createElement(o.B,{direction:"row",gap:0},n.createElement("div",{className:B.range},n.createElement(g.I,{invalid:!!V,error:V,className:B.noMargin},n.createElement(i.p,{type:"number",width:10,onBlur:k=>j.current&&H(k,0),defaultValue:C.unloadEvaluator?.params[0]}))),n.createElement("div",{className:B.button},"TO"),n.createElement("div",{className:B.range},n.createElement(g.I,{invalid:!!G,error:G},n.createElement(i.p,{type:"number",width:10,onBlur:k=>j.current&&H(k,1),defaultValue:C.unloadEvaluator?.params[1]})))))):n.createElement(r.C,{className:B.hysteresis},n.createElement(g.I,{label:"Stop alerting when inside range",labelWidth:"auto"},n.createElement(o.B,{direction:"row",gap:0},n.createElement("div",{className:B.range},n.createElement(g.I,{invalid:!!V,error:V},n.createElement(i.p,{type:"number",width:10,onBlur:k=>j.current&&H(k,0),defaultValue:C.unloadEvaluator?.params[0]}))),n.createElement("div",{className:B.button},"TO"),n.createElement("div",{className:B.range},n.createElement(g.I,{invalid:!!G,error:G},n.createElement(i.p,{type:"number",width:10,onBlur:k=>j.current&&H(k,1),defaultValue:C.unloadEvaluator?.params[1]}))))))}function K({allowOnblur:j}){return C.evaluator.type===c.p.IsAbove?n.createElement(r.C,{className:B.hysteresis},n.createElement(g.I,{label:"Stop alerting when below",labelWidth:"auto",invalid:!!N,error:N},n.createElement(i.p,{type:"number",width:10,onBlur:k=>{j.current&&H(k,0)},defaultValue:C.unloadEvaluator?.params[0]}))):n.createElement(r.C,{className:B.hysteresis},n.createElement(g.I,{label:"Stop alerting when above",labelWidth:"auto",invalid:!!N,error:N},n.createElement(i.p,{type:"number",width:10,onBlur:k=>{j.current&&H(k,0)},defaultValue:C.unloadEvaluator?.params[0]})))}}const S=O=>({buttonSelectText:(0,t.css)({color:O.colors.primary.text,fontSize:O.typography.bodySmall.fontSize,textTransform:"uppercase",padding:`0 ${O.spacing(1)}`}),button:(0,t.css)({height:"32px",color:O.colors.primary.text,fontSize:O.typography.bodySmall.fontSize,textTransform:"uppercase",display:"flex",alignItems:"center",borderRadius:O.shape.radius.default,fontWeight:O.typography.fontWeightBold,border:`1px solid ${O.colors.border.medium}`,whiteSpace:"nowrap",padding:`0 ${O.spacing(1)}`,backgroundColor:O.colors.background.primary}),range:(0,t.css)({width:"min-content"}),hysteresis:(0,t.css)({marginTop:O.spacing(2)}),switch:(0,t.css)({paddingLeft:O.spacing(1)}),noMargin:(0,t.css)({margin:0})})},69437:(Y,A,e)=>{"use strict";e.d(A,{f:()=>o});var t=e(26657),n=e(66718);const o=s=>{if(!s)return!1;if((0,t.s9)(s.datasource))return!0;const r=s;return typeof r.type!="string"?!1:Object.values(n.Tz).includes(r.type)}},66718:(Y,A,e)=>{"use strict";e.d(A,{Cu:()=>u,HZ:()=>i,Mt:()=>d,NI:()=>r,PN:()=>l,Tz:()=>s,Uj:()=>o,iX:()=>f,uQ:()=>g,zd:()=>c});var t=e(75059),n=e(55907);const o="__expr__";var s=(h=>(h.math="math",h.reduce="reduce",h.resample="resample",h.classic="classic_conditions",h.threshold="threshold",h))(s||{});const r=h=>{switch(h){case"math":return"Math";case"reduce":return"Reduce";case"resample":return"Resample";case"classic_conditions":return"Classic condition";case"threshold":return"Threshold"}},g=[{value:"math",label:"Math",description:"Free-form math formulas on time series or number data."},{value:"reduce",label:"Reduce",description:"Takes one or more time series returned from a query or an expression and turns each series into a single number."},{value:"resample",label:"Resample",description:"Changes the time stamps in each time series to have a consistent time interval."},{value:"classic_conditions",label:"Classic condition",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the condition. Disables multi-dimensional alerts for this rule."},{value:"threshold",label:"Threshold",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the threshold condition."}],u=[{value:t.gy.min,label:"Min",description:"Get the minimum value"},{value:t.gy.max,label:"Max",description:"Get the maximum value"},{value:t.gy.mean,label:"Mean",description:"Get the average value"},{value:t.gy.sum,label:"Sum",description:"Get the sum of all values"},{value:t.gy.count,label:"Count",description:"Get the number of values"},{value:t.gy.last,label:"Last",description:"Get the last value"}];var d=(h=>(h.Strict="",h.ReplaceNonNumbers="replaceNN",h.DropNonNumbers="dropNN",h))(d||{});const i=[{value:"",label:"Strict",description:"Result can be NaN if series contains non-numeric data"},{value:"dropNN",label:"Drop Non-numeric Values",description:"Drop NaN, +/-Inf and null from input series before reducing"},{value:"replaceNN",label:"Replace Non-numeric Values",description:"Replace NaN, +/-Inf and null with a constant value before reducing"}],l=[{value:t.gy.last,label:"Last",description:"Fill with the last value"},{value:t.gy.min,label:"Min",description:"Fill with the minimum value"},{value:t.gy.max,label:"Max",description:"Fill with the maximum value"},{value:t.gy.mean,label:"Mean",description:"Fill with the average value"},{value:t.gy.sum,label:"Sum",description:"Fill with the sum of all values"}],f=[{value:"pad",label:"pad",description:"fill with the last known value"},{value:"backfilling",label:"backfilling",description:"fill with the next known value"},{value:"fillna",label:"fillna",description:"Fill with NaNs"}],c=[{value:n.p.IsAbove,label:"Is above"},{value:n.p.IsBelow,label:"Is below"},{value:n.p.IsWithinRange,label:"Is within range"},{value:n.p.IsOutsideRange,label:"Is outside range"}]},76942:(Y,A,e)=>{"use strict";e.d(A,{P:()=>r,r:()=>s});var t=e(75059),n=e(55907),o=e(66718);const s=g=>{switch(g.type){case o.Tz.reduce:g.reducer||(g.reducer=t.gy.mean);break;case o.Tz.resample:g.downsampler||(g.downsampler=t.gy.mean),g.upsampler||(g.upsampler="fillna"),g.reducer=void 0;break;case o.Tz.math:g.expression=void 0;break;case o.Tz.classic:g.conditions||(g.conditions=[r]);break;default:g.reducer=void 0}return g},r={type:"query",reducer:{params:[],type:"avg"},operator:{type:"and"},query:{params:[]},evaluator:{params:[0,0],type:n.p.IsAbove}}},71101:(Y,A,e)=>{"use strict";e.d(A,{Cg:()=>u,Fk:()=>i,R4:()=>c,Rj:()=>g,pq:()=>d});var t=e(32264),n=e(44836),o=e(16233),s=e(36689),r=e(80348);const g="manage-folder",u=p=>`folder-dashboards-${p}`,d=p=>`folder-library-panels-${p}`,i=p=>`folder-alerting-${p}`,l=p=>`folder-permissions-${p}`,f=p=>`folder-settings-${p}`;function c(p,m=p.parents){const a={icon:"folder",id:g,subTitle:(0,s.o)("manage-folder"),url:p.url,text:p.title,children:[{active:!1,icon:"apps",id:u(p.uid),text:(0,n.t)("browse-dashboards.manage-folder-nav.dashboards","Dashboards"),url:p.url}]};if(m&&m.length>0){const v=m[m.length-1],E=m.slice(0,m.length-1);a.parentItem=c(v,E)}return a.children.push({active:!1,icon:"library-panel",id:d(p.uid),text:(0,n.t)("browse-dashboards.manage-folder-nav.panels","Panels"),url:`${p.url}/library-panels`}),o.TP.hasPermission(r.AccessControlAction.AlertingRuleRead)&&(t.$.unifiedAlertingEnabled||t.$.featureToggles.alertingPreviewUpgrade)&&a.children.push({active:!1,icon:"bell",id:i(p.uid),text:(0,n.t)("browse-dashboards.manage-folder-nav.alert-rules","Alert rules"),url:`${p.url}/alerting`}),a}function h(p){const m=c({created:"",createdBy:"",hasAcl:!1,updated:"",updatedBy:"",id:1,uid:"loading",title:"Loading",url:"url",canSave:!0,canEdit:!0,canAdmin:!0,canDelete:!0,version:0});return m.children[p].active=!0,{main:m,node:m.children[p]}}},54650:(Y,A,e)=>{"use strict";e.d(A,{Ay:()=>i,jl:()=>g});var t=e(30038),n=e(55314);const o={id:0,uid:"loading",title:"loading",url:"",canSave:!1,canDelete:!1,hasChanged:!1,version:1},s=(l,f)=>({...l,...f.payload,hasChanged:!1}),r=(0,t.Z0)({name:"folder",initialState:o,reducers:{loadFolder:s,setFolderTitle:(l,f)=>({...l,title:f.payload,hasChanged:f.payload.trim().length>0})},extraReducers:l=>{l.addMatcher(n.vZ.getFolder.matchFulfilled,s)}}),{loadFolder:g,setFolderTitle:u}=r.actions,i={folder:r.reducer}},84350:(Y,A,e)=>{"use strict";e.d(A,{G:()=>d});var t=e(32196),n=e(96540),o=e(40845),s=e(88323),r=e(42418),g=e(67140);const u=[{label:"Countries",description:"Lookup countries by name, two letter code, or three letter code",value:g.fx},{label:"USA States",description:"Lookup states by name or 2 ",value:"public/gazetteer/usa-states.json"},{label:"Airports",description:"Lookup airports by id or code",value:"public/gazetteer/airports.geojson"}],d=({value:l,onChange:f,context:c,item:h})=>{const p=(0,o.of)(i),[m,a]=(0,n.useState)(),v=h.settings;(0,n.useEffect)(()=>{async function b(){const P=await(0,g.q3)(l);a(P)}b()},[l,a]);const{current:E,options:D}=(0,n.useMemo)(()=>{let b=v?.options?[...v.options]:[...u],P=b?.find(y=>y.value===m?.path);return!P&&m&&(P={label:m.path,value:m.path},b.push(P)),{options:b,current:P}},[m,v?.options]);return n.createElement(n.Fragment,null,n.createElement(s.l6,{value:E,options:D,onChange:b=>f(b.value),allowCustomValue:!0,formatCreateLabel:b=>`Load from URL: ${b}`}),m&&n.createElement(n.Fragment,null,m.error&&n.createElement(r.F,{title:m.error,severity:"warning"}),m.count&&n.createElement("div",{className:p.keys},n.createElement("b",null,"(",m.count,")"),m.examples(10).map(b=>n.createElement("span",{key:b},b,",")),m.count>10&&" ...")))},i=()=>({keys:(0,t.css)`
    margin-top: 4px;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;

    > span {
      margin-left: 4px;
    }
  `})},61983:(Y,A,e)=>{"use strict";e.d(A,{G:()=>v});var t=e(11261),n=e(52622),o=e(84350),s=e(32196),r=e(96540),g=e(13544),u=e(40845),d=e(42418),i=e(14578),l=e(88323),f=e(66864),c=e(31484);const h=[{value:n.aG.Auto,label:"Auto",ariaLabel:g.Tp.components.Transforms.SpatialOperations.location.autoOption,description:"Automatically identify location data based on default field names"},{value:n.aG.Coords,label:"Coords",ariaLabel:g.Tp.components.Transforms.SpatialOperations.location.coords.option,description:"Specify latitude and longitude fields"},{value:n.aG.Geohash,label:"Geohash",ariaLabel:g.Tp.components.Transforms.SpatialOperations.location.geohash.option,description:"Specify geohash field"},{value:n.aG.Lookup,label:"Lookup",ariaLabel:g.Tp.components.Transforms.SpatialOperations.location.lookup.option,description:"Specify Gazetteer and lookup field"}],p="https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/geomap/#location",m=({value:E,onChange:D,context:b,item:P})=>{const[y,T]=(0,r.useState)();(0,r.useEffect)(()=>{P.settings?.source&&P.settings?.data?.length&&P.settings.data[0]&&(0,c.nE)(P.settings.source).then(x=>{P.settings&&P.settings.data&&T((0,c.FM)(P.settings.data[0],x))})},[P.settings]);const M=(0,u.of)(a),I=()=>{if(y){if(y.warning)return r.createElement(d.F,{title:y.warning,severity:"warning",buttonContent:r.createElement(i.I,{name:"question-circle",size:"xl"}),className:M.alert,onRemove:()=>{const x=window.open(p,"_blank","noopener,noreferrer");x&&(x.opener=null)}});if(E===n.aG.Auto&&y.description)return r.createElement("span",null,y.description)}return null};return r.createElement(r.Fragment,null,r.createElement(l.l6,{options:h,value:E,onChange:x=>{D(x.value)}}),r.createElement(f.Gy,{className:M.hGroup},I()))},a=E=>({alert:(0,s.css)`
      & div {
        padding: 4px;
      }
      margin-bottom: 0px;
      margin-top: 5px;
      padding: 2px;
    `,hGroup:(0,s.css)`
      & div {
        width: 100%;
      }
    `});function v(E,D,b,P,y){switch(b.addCustomEditor({id:"modeEditor",path:`${D}mode`,name:"Location Mode",editor:m,settings:{data:y,source:P}}),P?.mode){case n.aG.Coords:b.addFieldNamePicker({path:`${D}latitude`,name:"Latitude field",settings:{filter:T=>T.type===t.PU.number,noFieldsMessage:"No numeric fields found"}}).addFieldNamePicker({path:`${D}longitude`,name:"Longitude field",settings:{filter:T=>T.type===t.PU.number,noFieldsMessage:"No numeric fields found"}});break;case n.aG.Geohash:b.addFieldNamePicker({path:`${D}geohash`,name:"Geohash field",settings:{filter:T=>T.type===t.PU.string,noFieldsMessage:"No strings fields found"}});break;case n.aG.Lookup:b.addFieldNamePicker({path:`${D}lookup`,name:"Lookup field",settings:{filter:T=>T.type===t.PU.string,noFieldsMessage:"No strings fields found"}}).addCustomEditor({id:"gazetteer",path:`${D}gazetteer`,name:"Gazetteer",editor:o.G})}}},96606:(Y,A,e)=>{"use strict";e.d(A,{RA:()=>c,XR:()=>h,Dc:()=>f,qy:()=>i,Pz:()=>l});var t=e(44294),n=e(34338),o=e(11217),s=e(22796),r=e(11261),g=e(78134);function u(m){if(!m?.length)return;const a=[16,8,4,2,1],v="0123456789bcdefghjkmnpqrstuvwxyz";let E=!0;const D=[],b=[];D[0]=-90,D[1]=90,b[0]=-180,b[1]=180;let P;m.split("").forEach(M=>{P=v.indexOf(M),a.forEach(I=>{d(E?b:D,P,I),E=!E})});const y=(D[0]+D[1])/2;return[(b[0]+b[1])/2,y]}function d(m,a,v){a&v?m[0]=(m[0]+m[1])/2:m[1]=(m[0]+m[1])/2}function i(m){return{name:m.name??"Point",type:r.PU.geo,values:m.values.map(a=>{const v=u(a);if(v)return new t.A((0,s.Rb)(v))}),config:p}}function l(m,a){const v=new Array(m.values.length);for(let E=0;E<m.values.length;E++){const D=m.values[E],b=a.values[E];D===null||b===null||(v[E]=new t.A((0,s.Rb)([D,b])))}return{name:"Point",type:r.PU.geo,values:v,config:p}}function f(m,a){const v=a.values.length,E=new Array(v);for(let D=0;D<v;D++)E[D]=m.find(a.values[D])?.geometry();return{name:"Geometry",type:r.PU.geo,values:E,config:p}}function c(m,a){const v=m.values,E=a.values;if(!v||!E)throw"missing src/dest";if(v.length!==E.length)throw"Source and destination field lengths do not match";const D=m.values.length,b=new Array(D);for(let P=0;P<D;P++){const y=v[P],T=E[P];y&&T?b[P]=new n.A([y,T]):y?b[P]=y:T&&(b[P]=T)}return{name:"Geometry",type:r.PU.geo,values:b,config:p}}function h(m,a){const v=m.values,E=a.values;if(!v||!E)throw"missing src/dest";if(v.length!==E.length)throw"Source and destination field lengths do not match";const D=m.values.length,b=new Array(D);for(let P=0;P<D;P++){const y=v[P],T=E[P];y&&T&&(b[P]=new o.A([(0,g.EX)(y),(0,g.EX)(T)]))}return{name:"Geometry",type:r.PU.geo,values:b,config:p}}const p=Object.freeze({custom:{hideFrom:{tooltip:!0}}})},67140:(Y,A,e)=>{"use strict";e.d(A,{fx:()=>m,q3:()=>a});var t=e(70915),n=e(44294),o=e(14236),s=e(11261),r=e(17172),g=e(11365);function u(v){const E=new g.A().readFeatures(v,{featureProjection:"EPSG:3857"}),D=E.length,b=new Array(D).fill(null),P=[],y=new Map,T=S=>{let O=y.get(S);return O||(O={types:new Set,values:new Array(D).fill(null),count:0},P.push(S),y.set(S,O)),O},M=(...S)=>{for(const O of S)if(!y.has(O))return O;return"___"+S[0]},I={types:new Set,values:new Array(D).fill(null),count:0};for(let S=0;S<D;S++){const O=E[S];b[S]=O.getGeometry();const C=O.getId();C!=null&&(I.values[S]=C,I.types.add((0,o.oE)(C)),I.count++);for(const L of O.getKeys()){const U=O.get(L);if(U===b[S]||U==null)continue;const R=T(L);R.values[S]=U,R.types.add((0,o.oE)(U)),R.count++}}const x=[];if(I.count>0){const S=d(I);x.push({name:M("id","_id","__id"),type:S,values:I.values,config:{}})}x.push({name:M("geo","geometry"),type:s.PU.geo,values:b,config:{}});for(const S of P){const O=y.get(S);if(!O)continue;const C=d(O);x.push({name:S,type:C,values:O.values,config:{}})}return{fields:x,length:D}}function d(v){return v.count<1?s.PU.other:v.types.size>1?(v.values=v.values.map(E=>E!=null?`${E}`:E),s.PU.string):v.types.values().next().value}var i=e(96606),l=e(22796);function f(v,E){let D=0;const b=new Map;for(const P of E){const y=new n.A((0,l.Rb)([P.longitude,P.latitude])),T={point:()=>y,geometry:()=>y};if(P.name&&(b.set(P.name,T),b.set(P.name.toUpperCase(),T)),P.key&&(b.set(P.key,T),b.set(P.key.toUpperCase(),T)),P.keys)for(const M of P.keys)b.set(M,T),b.set(M.toUpperCase(),T);D++}return{path:v,find:P=>{let y=b.get(P);return!y&&typeof P=="string"&&(y=b.get(P.toUpperCase())),y},count:D,examples:P=>{const y=[];if(b.size<1)y.push("no values found");else for(const T of b.keys())if(y.push(T),y.length>=P)break;return y}}}function c(v,E){let D;if(Array.isArray(E)){const b=E[0];if(b.latitude&&b.longitude&&(b.key||b.keys))return f(v,E)}else Array.isArray(E?.features)&&E?.type==="FeatureCollection"&&(D=u(E));if(!D)try{D=(0,o.Vc)(E)}catch(b){return{path:v,error:`${b}`,find:P=>{},examples:P=>[]}}return h(D,{path:v})}function h(v,E){const D=[];let b,P,y,T,M;for(const S of v.fields)if(S.type===s.PU.geo&&(b=S),!M&&S.type===s.PU.string&&(M=S),S.name){E.keys&&E.keys.includes(S.name)&&D.push(S);const O=S.name.toUpperCase();switch(O){case"LAT":case"LATITUTE":P=S;break;case"LON":case"LNG":case"LONG":case"LONGITUE":y=S;break;case"GEOHASH":T=S;break;case"ID":case"UID":case"KEY":case"CODE":E.keys||D.push(S);break;default:E.keys||(O.endsWith("_ID")||O.endsWith("_CODE"))&&D.push(S)}}!D.length&&M&&D.push(M);let I=!1;b?I=b.values[0]?.getType()==="Point":T?(b=(0,i.qy)(T),I=!0):P&&y&&(b=(0,i.Pz)(y,P),I=!0);const x=new Map;return D.forEach(S=>{S.values.forEach((O,C)=>{const L=`${O}`;x.set(L.toUpperCase(),C),x.set(L,C)})}),{path:E.path,find:S=>{const O=x.get(S);if(O!=null){const C=b?.values[O];return{frame:v,index:O,point:()=>!C||I?C:new n.A((0,t.q1)(C.getExtent())),geometry:()=>C}}},examples:S=>{const O=[];for(let C of x.keys())if(O.push(C),O.length>S)break;return O},frame:()=>v,count:v.length}}const p={},m="public/gazetteer/countries.json";async function a(v){v||(v=m);let E=p[v];if(!E){try{const D=await(0,r.AI)().get(v);E=c(v,D)}catch(D){console.warn("Error loading placename lookup",v,D),E={path:v,error:"Error loading URL",find:b=>{},examples:b=>[]}}p[v]=E}return E}},31484:(Y,A,e)=>{"use strict";e.d(A,{FM:()=>h,nE:()=>f});var t=e(28240),n=e(11261),o=e(85200),s=e(1173),r=e(52622),g=e(96606),u=e(67140);function d(p){return m=>{for(const a of m.fields)if(p(a,m,[]))return a}}function i(p){return m=>{for(const a of m.fields){if(p.has(a.name.toLowerCase()))return a;const v=(0,t.Ct)(a,m);if(p.has(v))return a}}}const l={mode:r.aG.Auto,geohash:i(new Set(["geohash"])),latitude:i(new Set(["latitude","lat"])),longitude:i(new Set(["longitude","lon","lng"])),h3:i(new Set(["h3"])),wkt:i(new Set(["wkt"])),lookup:i(new Set(["lookup"])),geo:p=>p.fields.find(m=>m.type===n.PU.geo)};async function f(p){const m={...l,mode:p?.mode??r.aG.Auto};switch(m.gazetteer=await(0,u.q3)(p?.gazetteer),m.mode){case r.aG.Geohash:p?.geohash?m.geohash=d((0,o.NS)({id:s.Ct.byName,options:p.geohash})):m.geohash=()=>{};break;case r.aG.Lookup:const a=p?.lookup?.length?(0,o.NS)({id:s.Ct.byName,options:p.lookup}):(0,o.NS)({id:s.Ct.byType,options:n.PU.string});m.lookup=d(a);break;case r.aG.Coords:p?.latitude?m.latitude=d((0,o.NS)({id:s.Ct.byName,options:p.latitude})):m.latitude=()=>{},p?.longitude?m.longitude=d((0,o.NS)({id:s.Ct.byName,options:p.longitude})):m.longitude=()=>{};break}return m}function c(p,m){const a={mode:m.mode??r.aG.Auto};if(a.mode===r.aG.Auto){if(a.geo=m.geo(p),a.geo)return a;if(a.latitude=m.latitude(p),a.longitude=m.longitude(p),a.latitude&&a.longitude)return a.mode=r.aG.Coords,a;if(a.geohash=m.geohash(p),a.geohash)return a.mode=r.aG.Geohash,a;if(a.lookup=m.lookup(p),a.lookup)return a.mode=r.aG.Lookup,a}switch(a.mode){case r.aG.Coords:a.latitude=m.latitude(p),a.longitude=m.longitude(p);break;case r.aG.Geohash:a.geohash=m.geohash(p);break;case r.aG.Lookup:a.lookup=m.lookup(p);break}return a}function h(p,m){const a=c(p,m);switch(a.mode){case r.aG.Auto:return a.geo?{field:a.geo}:{warning:"Unable to find location fields"};case r.aG.Coords:return a.latitude&&a.longitude?{field:(0,g.Pz)(a.longitude,a.latitude),derived:!0,description:`${a.mode}: ${a.latitude.name}, ${a.longitude.name}`}:{warning:"Select latitude/longitude fields"};case r.aG.Geohash:return a.geohash?{field:(0,g.qy)(a.geohash),derived:!0,description:`${a.mode}`}:{warning:"Select geohash field"};case r.aG.Lookup:return a.lookup?m.gazetteer?{field:(0,g.Dc)(m.gazetteer,a.lookup),derived:!0,description:`${a.mode}: ${m.gazetteer.path}`}:{warning:"Gazetteer not found"}:{warning:"Select lookup field"}}return{warning:"unable to find geometry"}}},61453:(Y,A,e)=>{"use strict";e.d(A,{q:()=>C});var t=e(2543),n=e(96540),o=e(70713),s=e(18282),r=e(2514),g=e(90708),u=e(13544),d=e(14110),i=e(72574),l=e(55852),f=e(62930),c=e(77093),h=e(2913),p=e(44836),m=e(69147),a=e(28240),v=e(40845),E=e(66864),D=e(88575),b=e(88323),P=e(15292),y=e(7788),T=e(32196);const M=U=>(0,T.css)`
  padding: ${U.spacing(0,2)};
  font-size: ${U.typography.bodySmall.fontSize};
  color: ${U.colors.text.secondary};
  overflow: hidden;
  text-overflow: ellipsis;
`,I=({children:U})=>{const R=(0,v.of)(M);return n.createElement("div",{className:R},U)};var x=e(26323);const S=({options:U,actions:R,formattedDataDescription:B,onOptionsChange:H,hasTransformations:W,data:N,dataFrames:V,transformationOptions:G,selectedDataFrame:_,onDataFrameChange:K,downloadForExcel:j,toggleDownloadForExcel:k})=>{const Q=(0,v.of)(x.A);let ee=V;_===s.F.joinByField&&(ee=N);const ae=ee.map((q,te)=>({value:te,label:`${(0,a.Ri)(q)} (${te})`})),Z=[...G,...ae];function ne(){let q="";if(!N)return q;const te=[];return _===s.F.joinByField?te.push((0,p.t)("dashboard.inspect-data.series-to-columns","Series joined by time")):N.length>1&&te.push((0,a.Ri)(N[_])),(U.withTransforms||U.withFieldConfig)&&(U.withTransforms&&te.push((0,p.t)("dashboard.inspect-data.panel-transforms","Panel transforms")),U.withTransforms&&U.withFieldConfig,U.withFieldConfig&&te.push((0,p.t)("dashboard.inspect-data.formatted","Formatted data"))),j&&te.push((0,p.t)("dashboard.inspect-data.excel-header","Excel header")),te.join(", ")}return n.createElement("div",{className:Q.dataDisplayOptions},n.createElement(y.u,{id:"Data options",index:0,title:(0,p.t)("dashboard.inspect-data.data-options","Data options"),headerElement:n.createElement(I,null,ne()),isOpen:!1,actions:R},n.createElement("div",{className:Q.options,"data-testid":"dataOptions"},n.createElement(E.gW,{spacing:"none"},N.length>1&&n.createElement(D.D,{label:(0,p.t)("dashboard.inspect-data.dataframe-label","Show data frame")},n.createElement(b.l6,{options:Z,value:_,onChange:K,width:30,"aria-label":(0,p.t)("dashboard.inspect-data.dataframe-aria-label","Select dataframe")})),n.createElement(E.Gy,null,W&&H&&n.createElement(D.D,{label:(0,p.t)("dashboard.inspect-data.transformations-label","Apply panel transformations"),description:(0,p.t)("dashboard.inspect-data.transformations-description","Table data is displayed with transformations defined in the panel Transform tab.")},n.createElement(P.d,{value:!!U.withTransforms,onChange:()=>H({...U,withTransforms:!U.withTransforms})})),H&&n.createElement(D.D,{label:(0,p.t)("dashboard.inspect-data.formatted-data-label","Formatted data"),description:B||(0,p.t)("dashboard.inspect-data.formatted-data-description","Table data is formatted with options defined in the Field and Override tabs.")},n.createElement(P.d,{id:"formatted-data-toggle",value:!!U.withFieldConfig,onChange:()=>H({...U,withFieldConfig:!U.withFieldConfig})})),n.createElement(D.D,{label:(0,p.t)("dashboard.inspect-data.download-excel-label","Download for Excel"),description:(0,p.t)("dashboard.inspect-data.download-excel-description","Adds header to CSV for use with Excel")},n.createElement(P.d,{id:"excel-toggle",value:j,onChange:k})))))))};var O=e(80287);class C extends n.PureComponent{constructor(R){super(R),this.onExportLogsAsTxt=()=>{const{data:B,dataName:H,app:W}=this.props;(0,d.rR)("grafana_logs_download_logs_clicked",{app:W,format:"logs",area:"inspector"});const N=(0,m.HT)(B||[]);(0,O.Zy)(N,H)},this.onExportTracesAsJson=()=>{const{data:B,dataName:H,app:W}=this.props;if(B)for(const N of B){if(N.meta?.preferredVisualisationType!=="trace")continue;const V=(0,O.ek)(N,H+"-traces");(0,d.rR)("grafana_traces_download_traces_clicked",{app:W,grafana_version:h.$W.buildInfo.version,trace_format:V,location:"inspector"})}},this.onExportServiceGraph=()=>{const{data:B,dataName:H,app:W}=this.props;(0,d.rR)("grafana_traces_download_service_graph_clicked",{app:W,grafana_version:h.$W.buildInfo.version,location:"inspector"}),B&&(0,O.ny)(B,H)},this.onDataFrameChange=B=>{this.setState({transformId:B.value===s.F.joinByField?s.F.joinByField:s.F.noop,dataFrameIndex:typeof B.value=="number"?B.value:0,selectedDataFrame:B.value})},this.onToggleDownloadForExcel=()=>{this.setState(B=>({downloadForExcel:!B.downloadForExcel}))},this.state={selectedDataFrame:0,dataFrameIndex:0,transformId:s.F.noop,transformationOptions:L(),transformedData:R.data??[],downloadForExcel:!1}}componentDidUpdate(R,B){if(!this.props.data){this.setState({transformedData:[]});return}if(this.props.options.withTransforms){this.setState({transformedData:this.props.data});return}if(R.data!==this.props.data||B.transformId!==this.state.transformId){const H=this.state.transformationOptions.find(W=>W.value===this.state.transformId);if(H&&H.transformer.id!==s.F.noop){const W=this.state.selectedDataFrame,N=this.state.dataFrameIndex,V=(0,r.m)([H.transformer],this.props.data).subscribe(G=>{this.setState({transformedData:G,selectedDataFrame:W,dataFrameIndex:N},()=>V.unsubscribe())});return}this.setState({transformedData:this.props.data});return}}exportCsv(R,B){const{dataName:H}=this.props,{transformId:W}=this.state,N=R[this.state.dataFrameIndex];B&&(0,d.rR)("grafana_logs_download_clicked",{app:this.props.app,format:"csv"}),(0,O.EM)(N,H,{useExcelHeader:this.state.downloadForExcel},W)}getProcessedData(){const{options:R,panelPluginId:B,fieldConfig:H,timeZone:W}=this.props,N=this.state.transformedData;if(!R.withFieldConfig)return(0,g.K3)(N);let V=H??{defaults:{},overrides:[]};return B==="table"&&H&&(V=this.cleanTableConfigFromFieldConfig(H)),(0,g.we)({data:N,theme:h.$W.theme2,fieldConfig:V,timeZone:W,replaceVariables:(G,_,K)=>(0,i.w)().replace(G,_,K)})}cleanTableConfigFromFieldConfig(R){R=(0,t.cloneDeep)(R),R.defaults.custom={};for(const B of R.overrides)for(const H of B.properties)if(H.id.startsWith("custom.")){const W=B.properties.indexOf(H);B.properties.slice(W,1)}return R}renderActions(R,B,H,W){return n.createElement(n.Fragment,null,n.createElement(l.$n,{variant:"primary",onClick:()=>this.exportCsv(R,B),size:"sm"},n.createElement(p.x6,{i18nKey:"dashboard.inspect-data.download-csv"},"Download CSV")),B&&n.createElement(l.$n,{variant:"primary",onClick:this.onExportLogsAsTxt,size:"sm"},n.createElement(p.x6,{i18nKey:"dashboard.inspect-data.download-logs"},"Download logs")),H&&n.createElement(l.$n,{variant:"primary",onClick:this.onExportTracesAsJson,size:"sm"},n.createElement(p.x6,{i18nKey:"dashboard.inspect-data.download-traces"},"Download traces")),W&&n.createElement(l.$n,{variant:"primary",onClick:this.onExportServiceGraph,size:"sm"},n.createElement(p.x6,{i18nKey:"dashboard.inspect-data.download-service"},"Download service graph")))}render(){const{isLoading:R,options:B,data:H,formattedDataDescription:W,onOptionsChange:N,hasTransformations:V}=this.props,{dataFrameIndex:G,transformationOptions:_,selectedDataFrame:K,downloadForExcel:j}=this.state,k=(0,x.c)();if(R)return n.createElement("div",null,n.createElement(f.y,{inline:!0})," Loading");const Q=this.getProcessedData();if(!Q||!Q.length)return n.createElement("div",null,"No Data");const ee=Q[G]?G:0,ae=Q[ee],Z=Q.some(te=>te?.meta?.preferredVisualisationType==="logs"),ne=Q.some(te=>te?.meta?.preferredVisualisationType==="trace"),q=Q.some(te=>te?.meta?.preferredVisualisationType==="nodeGraph");return n.createElement("div",{className:k.wrap,"aria-label":u.Tp.components.PanelInspector.Data.content},n.createElement("div",{className:k.toolbar},n.createElement(S,{data:H,hasTransformations:V,options:B,dataFrames:Q,transformationOptions:_,selectedDataFrame:K,downloadForExcel:j,formattedDataDescription:W,onOptionsChange:N,onDataFrameChange:this.onDataFrameChange,toggleDownloadForExcel:this.onToggleDownloadForExcel,actions:this.renderActions(Q,Z,ne,q)})),n.createElement("div",{className:k.content},n.createElement(o.Ay,null,({width:te,height:re})=>te===0?null:n.createElement(c.X,{width:te,height:re,data:ae,showTypeIcons:!0}))))}}function L(){return[{value:s.F.joinByField,label:(0,p.t)("dashboard.inspect-data.transformation","Series joined by time"),transformer:{id:s.F.joinByField,options:{byField:void 0}}}]}},32067:(Y,A,e)=>{"use strict";e.d(A,{N:()=>p});var t=e(32196),n=e(96540),o=e(13544),s=e(44836),r=e(57875),g=e(11261),u=e(83195),d=e(40845);const i=({timeZone:a,name:v,stats:E})=>{const D=(0,d.$j)(),b=(0,d.of)(f);return!E||!E.length?null:n.createElement("div",{className:b.wrapper},n.createElement("div",{className:"section-heading"},v),n.createElement("table",{className:"filter-table width-30"},n.createElement("tbody",null,E.map((P,y)=>n.createElement("tr",{key:`${P.displayName}-${y}`},n.createElement("td",null,P.displayName),n.createElement("td",{className:b.cell},l(P,a,D)))))))};function l(a,v,E){const D=(0,r.J)({field:{type:g.PU.number,config:a},theme:E,timeZone:v});return(0,u.cN)(D(a.value))}const f=a=>({wrapper:(0,t.css)`
    padding-bottom: ${a.spacing(2)};
  `,cell:(0,t.css)`
    text-align: right;
  `}),c=({name:a,traceIds:v})=>{const E=(0,d.of)(h);return v.length===0?null:n.createElement("div",{className:E.wrapper},n.createElement("div",{className:"section-heading"},a),n.createElement("table",{className:"filter-table width-30"},n.createElement("tbody",null,v.map((D,b)=>n.createElement("tr",{key:`${D}-${b}`},n.createElement("td",null,D))))))},h=a=>({wrapper:(0,t.css)`
    padding-bottom: ${a.spacing(2)};
  `,cell:(0,t.css)`
    text-align: right;
  `}),p=({data:a,timeZone:v})=>{if(!a.request)return null;let E=[];const D=a.request.endTime?a.request.endTime-a.request.startTime:-1,b=a.timings?.dataProcessingTime||-1;let P=0;for(const x of a.series)P+=x.length;D>0&&E.push({displayName:(0,s.t)("dashboard.inspect-stats.request-time","Total request time"),value:D,unit:"ms"}),b>0&&E.push({displayName:(0,s.t)("dashboard.inspect-stats.processing-time","Data processing time"),value:b,unit:"ms"}),E.push({displayName:(0,s.t)("dashboard.inspect-stats.queries","Number of queries"),value:a.request.targets?.length??0}),E.push({displayName:(0,s.t)("dashboard.inspect-stats.rows","Total number rows"),value:P});let y=[];for(const x of a.series)x.meta&&x.meta.stats&&(y=y.concat(x.meta.stats));const T=(0,s.t)("dashboard.inspect-stats.table-title","Stats"),M=(0,s.t)("dashboard.inspect-stats.data-title","Data source stats"),I=(0,s.t)("dashboard.inspect-stats.data-traceids","Trace IDs");return n.createElement("div",{"aria-label":o.Tp.components.PanelInspector.Stats.content,className:m},n.createElement(i,{timeZone:v,name:T,stats:E}),n.createElement(i,{timeZone:v,name:M,stats:y}),n.createElement(c,{name:I,traceIds:a.traceIds??[]}))},m=(0,t.css)`
  height: 100%;
  overflow-y: scroll;
`},90820:(Y,A,e)=>{"use strict";e.d(A,{e:()=>m});var t=e(32196),n=e(96540),o=e(64423),s=e(39070),r=e(13544),g=e(32264),u=e(67061),d=e(55852),i=e(10534),l=e(39558),f=e(24022),c=e(44836),h=e(27677),p=e(26323);class m extends n.PureComponent{constructor(v){super(v),this.subs=new o.yU,this.setFormattedJson=E=>{this.formattedJson=E},this.getTextForClipboard=()=>JSON.stringify(this.formattedJson,null,2),this.onToggleExpand=()=>{this.setState(E=>({...E,allNodesExpanded:!this.state.allNodesExpanded}))},this.onToggleMocking=()=>{this.setState(E=>({...E,isMocking:!this.state.isMocking}))},this.getNrOfOpenNodes=()=>this.state.allNodesExpanded===null?3:this.state.allNodesExpanded?20:1,this.state={executedQueries:[],allNodesExpanded:null,isMocking:!1,mockedResponse:"",response:{}}}componentDidMount(){this.subs.add(h.IB.getInspectorStream().subscribe({next:v=>{let E=!0;if(this.props.instanceId&&v?.requestId&&(E=v.requestId.startsWith(this.props.instanceId)),E)return this.onDataSourceResponse(v.response)}}))}componentDidUpdate(v){this.props.data!==v.data&&this.updateQueryList()}updateQueryList(){const{data:v}=this.props,E=v.series,D=[];if(E?.length){let b;E.forEach((P,y)=>{const T=P.meta?.executedQueryString;if(T){const M=P.refId||"?";b?.refId===M?(b.frames++,b.rows+=P.length):(b={refId:M,frames:0,rows:P.length,query:T},D.push(b))}})}this.setState({executedQueries:D})}componentWillUnmount(){this.subs.unsubscribe()}onDataSourceResponse(v){v.config?.hideFromInspector||(v={...v},v.headers&&delete v.headers,v.config&&(v.request=v.config,delete v.config,delete v.request.transformRequest,delete v.request.transformResponse,delete v.request.paramSerializer,delete v.request.jsonpCallbackParam,delete v.request.headers,delete v.request.requestId,delete v.request.inspect,delete v.request.retry,delete v.request.timeout),v.data&&(v.response=v.data,delete v.config,delete v.data,delete v.status,delete v.statusText,delete v.ok,delete v.url,delete v.redirected,delete v.type,delete v.$$config),this.setState({response:v}))}renderExecutedQueries(v){if(!v.length)return null;const E={refId:(0,t.css)`
        font-weight: ${g.$.theme.typography.weight.semibold};
        color: ${g.$.theme.colors.textBlue};
        margin-right: 8px;
      `};return n.createElement("div",null,v.map(D=>n.createElement(u.B,{key:D.refId,gap:1,direction:"column"},n.createElement("div",null,n.createElement("span",{className:E.refId},D.refId,":"),D.frames>1&&n.createElement("span",null,D.frames," frames, "),n.createElement("span",null,D.rows," rows")),n.createElement("pre",null,D.query))))}render(){const{allNodesExpanded:v,executedQueries:E,response:D}=this.state,{onRefreshQuery:b,data:P}=this.props,y=this.getNrOfOpenNodes(),T=(0,p.A)(g.$.theme2),M=Object.keys(D).length>0,I=P.state===s.Gu.Loading;return n.createElement("div",{className:T.wrap},n.createElement("div",{"aria-label":r.Tp.components.PanelInspector.Query.content},n.createElement("h3",{className:"section-heading"},"Query inspector"),n.createElement("p",{className:"small muted"},n.createElement(c.x6,{i18nKey:"inspector.query.description"},"Query inspector allows you to view raw request and response. To collect this data Grafana needs to issue a new query. Click refresh button below to trigger a new query."))),this.renderExecutedQueries(E),n.createElement("div",{className:T.toolbar},n.createElement(d.$n,{icon:"sync",onClick:b,"aria-label":r.Tp.components.PanelInspector.Query.refreshButton},n.createElement(c.x6,{i18nKey:"inspector.query.refresh"},"Refresh")),M&&v&&n.createElement(d.$n,{icon:"minus",variant:"secondary",className:T.toolbarItem,onClick:this.onToggleExpand},n.createElement(c.x6,{i18nKey:"inspector.query.collapse-all"},"Collapse all")),M&&!v&&n.createElement(d.$n,{icon:"plus",variant:"secondary",className:T.toolbarItem,onClick:this.onToggleExpand},n.createElement(c.x6,{i18nKey:"inspector.query.expand-all"},"Expand all")),M&&n.createElement(i.b,{getText:this.getTextForClipboard,className:T.toolbarItem,icon:"copy",variant:"secondary"},n.createElement(c.x6,{i18nKey:"inspector.query.copy-to-clipboard"},"Copy to clipboard")),n.createElement("div",{className:"flex-grow-1"})),n.createElement("div",{className:T.content},I&&n.createElement(l._,{text:"Loading query inspector..."}),!I&&M&&n.createElement(f.B,{json:D,open:y,onDidRender:this.setFormattedJson}),!I&&!M&&n.createElement("p",{className:"muted"},n.createElement(c.x6,{i18nKey:"inspector.query.no-data"},"No request and response collected yet. Hit refresh button"))))}}},26323:(Y,A,e)=>{"use strict";e.d(A,{A:()=>r,c:()=>s});var t=e(32196),n=e(3911),o=e(2913);const s=(0,n.N)(()=>r(o.$W.theme2)),r=g=>({wrap:(0,t.css)`
      display: flex;
      flex-direction: column;
      height: 100%;
      width: 100%;
      flex: 1 1 0;
      min-height: 0;
    `,toolbar:(0,t.css)`
      display: flex;
      width: 100%;
      flex-grow: 0;
      align-items: center;
      justify-content: flex-end;
      margin-bottom: ${g.v1.spacing.sm};
    `,toolbarItem:(0,t.css)`
      margin-left: ${g.v1.spacing.md};
    `,content:(0,t.css)`
      flex-grow: 1;
      height: 100%;
    `,editor:(0,t.css)`
      font-family: monospace;
      height: 100%;
      flex-grow: 1;
    `,viewer:(0,t.css)`
      overflow: scroll;
    `,dataFrameSelect:(0,t.css)`
      flex-grow: 2;
    `,leftActions:(0,t.css)`
      display: flex;
      flex-grow: 1;

      max-width: 85%;
      @media (max-width: 1345px) {
        max-width: 75%;
      }
    `,options:(0,t.css)`
      padding-top: ${g.v1.spacing.sm};
    `,dataDisplayOptions:(0,t.css)`
      flex-grow: 1;
      min-width: 300px;
      margin-right: ${g.v1.spacing.sm};
    `,selects:(0,t.css)`
      display: flex;
      > * {
        margin-right: ${g.v1.spacing.sm};
      }
    `})},16560:(Y,A,e)=>{"use strict";e.d(A,{q:()=>t});var t=(n=>(n.Data="data",n.Meta="meta",n.Error="error",n.Stats="stats",n.JSON="json",n.Query="query",n.Help="help",n))(t||{})},80287:(Y,A,e)=>{"use strict";e.d(A,{EM:()=>f,Zy:()=>l,ek:()=>h,ny:()=>c});var t=e(4213),n=e.n(t),o=e(72724),s=e(18282),r=e(72436),g=e(37471),u=e(98216),d=e(7810),i=e(54807);function l(p,m){let a="";p.meta?.forEach(D=>{const b=`${D.label}: ${JSON.stringify(D.value)}
`;a=a+b}),a=a+`

`,p.rows.forEach(D=>{const b=(0,o.LE)(D.timeEpochMs,{defaultWithMS:!0})+"	"+D.entry+`
`;a=a+b});const v=new Blob([a],{type:"text/plain;charset=utf-8"}),E=`${m}-logs-${(0,o.LE)(new Date)}.txt`;n()(v,E)}function f(p,m,a,v=s.F.noop){const E=(0,r._O)([p],a),D=new Blob([String.fromCharCode(65279),E],{type:"text/csv;charset=utf-8"}),b=v!==s.F.noop?"-as-"+v.toLocaleLowerCase():"",P=`${m}-data${b}-${(0,o.LE)(new Date)}.csv`;n()(D,P)}function c(p,m){const a=new Blob([JSON.stringify(p)],{type:"application/json"}),v=`${m}-${(0,o.LE)(new Date)}.json`;n()(a,v)}function h(p,m){let a="otlp";switch(p.meta?.custom?.traceFormat){case"jaeger":{let v=(0,d.K_)(new g.k(p));c(v,m),a="jaeger";break}case"zipkin":{let v=(0,i.T)(new g.k(p));c(v,m),a="zipkin";break}case"otlp":default:{let v=(0,u.xw)(new g.k(p));c(v,m);break}}return a}},77938:(Y,A,e)=>{"use strict";e.d(A,{p:()=>o});var t=e(26272),n=e(28138);function o(r){let g="";try{g=JSON.stringify(r,s(),2)}catch(u){u instanceof Error&&(u.toString().includes("RangeError")||u.toString().includes("allocation size overflow"))?n.A.emit(t.r1.alertError,[u.toString(),"Cannot display JSON, the object is too big."]):n.A.emit(t.r1.alertError,[u instanceof Error?u.toString():u])}return g}function s(){const r=new WeakSet;return(g,u)=>{if(g==="__dataContext"||g==="__sceneObject")return"Filtered out in JSON serialization";if(typeof u=="object"&&u!==null){if(r.has(u))return;r.add(u)}return u}}},47259:(Y,A,e)=>{"use strict";e.d(A,{G7:()=>s,KU:()=>r,eb:()=>g});var t=e(17172),n=e(10096),o=e(80348);const s=(0,o.createAsyncThunk)("users/fetchInvitees",async()=>n.TP.hasPermission(o.AccessControlAction.OrgUsersAdd)?await(0,t.AI)().get("/api/org/invites"):[]),r=(0,o.createAsyncThunk)("users/addInvitee",async(u,{dispatch:d})=>{await(0,t.AI)().post("/api/org/invites",u),await d(s())}),g=(0,o.createAsyncThunk)("users/revokeInvite",async u=>(await(0,t.AI)().patch(`/api/org/invites/${u}/revoke`,{}),u))},40823:(Y,A,e)=>{"use strict";e.d(A,{Ay:()=>d,Tp:()=>s});var t=e(30038),n=e(47259);const o=(0,t.pU)({selectId:i=>i.code}),s=o.getSelectors(),r=o.getInitialState({status:"idle"}),d={invites:(0,t.Z0)({name:"invites",initialState:r,reducers:{},extraReducers:i=>{i.addCase(n.G7.pending,l=>{l.status="loading"}).addCase(n.G7.fulfilled,(l,{payload:f})=>{o.setAll(l,f),l.status="succeeded"}).addCase(n.G7.rejected,l=>{l.status="failed"}).addCase(n.eb.fulfilled,(l,{payload:f})=>{o.removeOne(l,f),l.status="succeeded"})}}).reducer}},96227:(Y,A,e)=>{"use strict";e.d(A,{b:()=>h,o:()=>p});var t=e(96540),n=e(40996),o=e(16817),s=e(17172),r=e(88575),g=e(10354),u=e(37390),d=e(55852),i=e(85242),l=e(44836),f=e(57767),c=e(88861);const h=({panel:m,initialFolderUid:a,onDismiss:v})=>{const[E,D]=(0,t.useState)(a),[b,P]=(0,t.useState)(m.title),[y,T]=(0,t.useState)(m.title),[M,I]=(0,t.useState)(!1);console.log("folderUid",E),(0,t.useEffect)(()=>I(!0),[b]),(0,n.A)(()=>T(b),350,[b]);const{saveLibraryPanel:x}=(0,c.b)(),S=(0,t.useCallback)(()=>{m.libraryPanel={uid:"",name:b},x(m,E).then(L=>{(0,s.NF)(L)?m.libraryPanel=void 0:v?.()})},[m,b,E,v,x]),O=(0,o.A)(async()=>{try{return!(await(0,f.e9)(b)).some(L=>L.folderUid===E)}catch(L){return(0,s.NF)(L)&&(L.isHandled=!0),!0}finally{I(!1)}},[y,E]);console.log("isValidName:",O);const C=!O?.value&&O.value!==void 0&&b===y&&!M;return t.createElement(t.Fragment,null,t.createElement(r.D,{label:(0,l.t)("library-panel.add-modal.name","Library panel name"),invalid:C,error:C?(0,l.t)("library-panel.add-modal.error","Library panel with this name already exists"):""},t.createElement(g.p,{id:"share-panel-library-panel-name-input",name:"name",value:b,onChange:L=>P(L.currentTarget.value)})),t.createElement(r.D,{label:(0,l.t)("library-panel.add-modal.folder","Save in folder"),description:(0,l.t)("library-panel.add-modal.folder-description","Library panel permissions are derived from the folder permissions")},t.createElement(i.sR,{onChange:({uid:L})=>D(L),initialFolderUid:a,inputId:"share-panel-library-panel-folder-picker"})),t.createElement(u.a.ButtonRow,null,t.createElement(d.$n,{variant:"secondary",onClick:v,fill:"outline"},t.createElement(l.x6,{i18nKey:"library-panel.add-modal.cancel"},"Cancel")),t.createElement(d.$n,{onClick:S,disabled:C},t.createElement(l.x6,{i18nKey:"library-panel.add-modal.create"},"Create library panel"))))},p=({isOpen:m=!1,panel:a,initialFolderUid:v,...E})=>t.createElement(u.a,{title:"Create library panel",isOpen:m,onDismiss:E.onDismiss},t.createElement(h,{panel:a,initialFolderUid:v,onDismiss:E.onDismiss}))},58807:(Y,A,e)=>{"use strict";e.d(A,{l:()=>o});var t=e(96540),n=e(96374);const o=({isOpen:s,onConfirm:r,onDismiss:g})=>t.createElement(n.u,{title:"Do you really want to unlink this panel?",icon:"question-circle",body:`If you unlink this panel, you will be able to edit it without affecting any other dashboards.
            However, once you make a change you will not be able to revert to its original reusable panel.`,confirmText:"Yes, unlink",onConfirm:()=>{r(),g()},onDismiss:g,isOpen:s})},82792:(Y,A,e)=>{"use strict";e.d(A,{X:()=>t});function t(n){return!!n.libraryPanel?.uid}},57767:(Y,A,e)=>{"use strict";e.d(A,{GN:()=>c,Yr:()=>u,d7:()=>i,dq:()=>g,e9:()=>d,h4:()=>f,jc:()=>l,xV:()=>h});var t=e(75505),n=e(79422),o=e(34214),s=e(27677),r=e(98796);async function g({searchString:p="",perPage:m=100,page:a=1,excludeUid:v="",sortDirection:E="",typeFilter:D=[],folderFilterUIDs:b=[]}={}){const P=new URLSearchParams;P.append("searchString",p),P.append("sortDirection",E),P.append("typeFilter",D.join(",")),P.append("folderFilterUIDs",b.join(",")),P.append("excludeUid",v),P.append("perPage",m.toString(10)),P.append("page",a.toString(10)),P.append("kind",r.i.Panel.toString(10));const{result:y}=await(0,s.AI)().get(`/api/library-elements?${P.toString()}`);return y}async function u(p,m=!1){const a=await(0,t.s)((0,s.AI)().fetch({method:"GET",url:`/api/library-elements/${p}`,showSuccessAlert:!m,showErrorAlert:!m})),{result:v}=a.data,E=new o.G({...n.Ye,schemaVersion:35,panels:[v.model]}),{scopedVars:D,...b}=E.panels[0].getSaveModel();return E.destroy(),{...v,model:b}}async function d(p){const{result:m}=await(0,s.AI)().get(`/api/library-elements/name/${p}`);return m}async function i(p,m){const{result:a}=await(0,s.AI)().post("/api/library-elements",{folderUid:m,name:p.libraryPanel.name,model:p,kind:r.i.Panel});return a}async function l(p){const{libraryPanel:m,...a}=p,{uid:v,name:E,version:D,folderUid:b}=m,P=r.i.Panel,{result:y}=await(0,s.AI)().patch(`/api/library-elements/${v}`,{folderUid:b,name:E,model:a,version:D,kind:P});return y}function f(p){return(0,s.AI)().delete(`/api/library-elements/${p}`)}async function c(p){const{result:m}=await(0,s.AI)().get(`/api/library-elements/${p}/connections`);return m}async function h(p){const m=await c(p);return m.length===0?[]:await(0,s.AI)().search({dashboardUIDs:m.map(v=>v.connectionUid)})}},98796:(Y,A,e)=>{"use strict";e.d(A,{i:()=>t});var t=(o=>(o[o.Panel=1]="Panel",o))(t||{}),n=(o=>(o[o.Dashboard=1]="Dashboard",o))(n||{})},88861:(Y,A,e)=>{"use strict";e.d(A,{b:()=>l});var t=e(5805),n=e(17172),o=e(3169),s=e(44836),r=e(57767);async function g(f,c){const h=u(f),p=await i(h,c);return d(f,p),p}function u(f){let{scopedVars:c,...h}=f.getSaveModel();return h={libraryPanel:{name:f.title,uid:void 0},...h},h}function d(f,c){f.restoreModel({...c.model,configRev:0,libraryPanel:c,title:f.title}),f.hasSavedPanelEditChange=!0,f.refresh()}function i(f,c){return f.libraryPanel?f.libraryPanel&&f.libraryPanel.uid===""?(0,r.d7)(f,c):(0,r.jc)(f):Promise.reject()}const l=()=>{const f=(0,o._2)(),[c,h]=(0,t.default)(async(p,m)=>{try{const a=await g(p,m);return f.success((0,s.t)("library-panels.save.success","Library panel saved")),a}catch(a){throw(0,n.NF)(a)&&(a.isHandled=!0,f.error((0,s.t)("library-panels.save.error",'Error saving library panel: "{{errorMsg}}"',{errorMsg:a.message??a.data.message}))),a}},[]);return{state:c,saveLibraryPanel:h}}},6473:(Y,A,e)=>{"use strict";e.d(A,{t:()=>D});var t=e(62938),n=e(55004),o=e(26272),s=e(78731),r=e(12131),g=e(10096),u=e(28444),d=e(14792),i=e(32196),l=e(96540),f=e(40845),c=e(37390),h=e(55852),p=(b=>(b.Saved="saved",b.EditingStarted="editing-started",b.EditingCanceled="editing-cancelled",b.Deleted="deleted",b))(p||{});function m({onDismiss:b,event:P}){const y=(0,f.of)(a),T=()=>{if(P?.action===p.Deleted){r.Ny.push("/");return}D.reloadPage(),b()};return l.createElement(c.a,{isOpen:!0,title:"Dashboard changed",icon:"copy",onDismiss:b,onClickBackdrop:()=>{},className:y.modal},l.createElement("div",{className:y.description},"The dashboad has been updated by another session. Do you want to continue editing or discard your local changes?"),l.createElement(c.a.ButtonRow,null,l.createElement(h.$n,{onClick:b,variant:"secondary",fill:"outline"},"Continue editing"),l.createElement(h.$n,{onClick:T,variant:"destructive"},"Discard local changes")))}const a=b=>({modal:(0,i.css)({width:"600px"}),description:(0,i.css)({color:b.colors.text.secondary,paddingBottom:b.spacing(1)})}),v=(0,t.A)();class E{constructor(){this.editing=!1,this.observer={next:P=>{if((0,n.ew)(P)&&this.editing&&P.state===n.ZF.Connected&&this.sendEditingState(),(0,n.Z7)(P)){if(P.message.sessionId===v)return;const{action:y}=P.message;switch(y){case p.EditingStarted:case p.Saved:{if(this.ignoreSave){this.ignoreSave=!1;return}const T=(0,d.UA)().getCurrent();if(T?.uid!==P.message.uid){console.log("dashboard event for different dashboard?",P,T);return}const M=this.editing||T.hasUnsavedChanges();if(y===p.Saved)M?g.lE.publish(new u.S8({component:m,props:{event:P}})):(g.lE.emit(o.r1.alertSuccess,["Dashboard updated"]),this.reloadPage());else if(M&&y===p.EditingStarted&&!this.hasSeenNotice){const I=P.message,x=this.getRecentEditingEvent();(!x||x.message!==I.message)&&(this.hasSeenNotice=!0,g.lE.emit(o.r1.alertWarning,["Another session is editing this dashboard",I.message])),this.lastEditing=I}return}}}}}}setEditingState(P){const y=this.editing=P;this.editing=P,this.hasSeenNotice=!1,y&&g.TP.isEditor&&this.sendEditingState()}sendEditingState(){const{channel:P,uid:y}=this;P&&y&&(0,s.oF)().publish(P,{sessionId:v,uid:y,action:this.editing?p.EditingStarted:p.EditingCanceled,timestamp:Date.now()})}watch(P){const y=(0,s.oF)();y&&P!==this.uid&&(this.channel={scope:n.qD.Grafana,namespace:"dashboard",path:`uid/${P}`},this.leave(),P&&(this.subscription=y.getStream(this.channel).subscribe(this.observer)),this.uid=P)}leave(){this.subscription&&this.subscription.unsubscribe(),this.subscription=void 0,this.uid=void 0}ignoreNextSave(){this.ignoreSave=!0}getRecentEditingEvent(){return this.lastEditing&&this.lastEditing.timestamp&&Date.now()-this.lastEditing.timestamp>5e3&&(this.lastEditing=void 0),this.lastEditing}reloadPage(){r.Ny.reload()}}const D=new E},47118:(Y,A,e)=>{"use strict";e.d(A,{_w:()=>n,o$:()=>g,ot:()=>o});var t=e(14236),n=(u=>(u.NewValuesSameSchema="NewValuesSameSchema",u.FullFrame="FullFrame",u))(n||{});const o=(u,d)=>"type"in u&&u.type===d,s=Object.values(n),r=u=>"type"in u&&s.includes(u.type),g=u=>(0,t.ci)(u)&&"packetInfo"in u},81073:(Y,A,e)=>{"use strict";e.d(A,{I:()=>s});var t=e(32196),n=e(96540),o=e(62930);const s=({adjective:g="newer"})=>{const u=`Loading ${g} logs...`;return n.createElement("div",{className:r},n.createElement("div",null,u," ",n.createElement(o.y,{inline:!0})))},r=(0,t.css)`
  display: flex;
  justify-content: center;
`},93463:(Y,A,e)=>{"use strict";e.d(A,{A:()=>r});var t=e(32196),n=e(96540),o=e(40845);const s=["level","lvl","filename"],r=({labels:u})=>{const d=(0,o.of)(g),i=Object.keys(u).filter(l=>!l.startsWith("_")&&!s.includes(l));return i.length===0?n.createElement("span",{className:(0,t.cx)([d.logsLabels])},n.createElement("span",{className:(0,t.cx)([d.logsLabel])},"(no unique labels)")):n.createElement("span",{className:(0,t.cx)([d.logsLabels])},i.sort().map(l=>{const f=u[l];if(!f)return;const c=`${l}: ${f}`;return n.createElement("span",{key:l,className:(0,t.cx)([d.logsLabel])},n.createElement("span",{className:(0,t.cx)([d.logsLabelValue]),title:c},f))}))},g=u=>({logsLabels:(0,t.css)`
      display: flex;
      flex-wrap: wrap;
      font-size: ${u.typography.size.xs};
    `,logsLabel:(0,t.css)`
      label: logs-label;
      display: flex;
      padding: ${u.spacing(0,.25)};
      background-color: ${u.colors.background.secondary};
      border-radius: ${u.shape.radius.default};
      margin: ${u.spacing(.125,.5,0,0)};
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:(0,t.css)`
      label: logs-label__value;
      display: inline-block;
      max-width: ${u.spacing(25)};
      text-overflow: ellipsis;
      overflow: hidden;
    `})},85492:(Y,A,e)=>{"use strict";e.d(A,{$:()=>i});var t=e(88838),n=e(96540),o=e(23257),s=e.n(o),r=e(21),g=e(40845);function u(l,f){return f.split(/;\s*/).reduce((c,h)=>{if(h==="color:rgba(0,0,0,0.5)")return{color:l.colors.text.secondary};const p=h.match(/([^:\s]+)\s*:\s*(.+)/);if(p&&p[1]&&p[2]){const m=p[1].replace(/-([a-z])/g,(a,v)=>v.toUpperCase());c[m]=p[2]}return c},{})}class d extends n.PureComponent{constructor(){super(...arguments),this.state={chunks:[],prevValue:""}}static getDerivedStateFromProps(f,c){return f.value===c.prevValue?null:{chunks:t.Ay.parse(f.value).spans.map(p=>p.css?{style:u(f.theme,p.css),text:p.text}:{text:p.text}),prevValue:f.value}}render(){const{chunks:f}=this.state;return f.map((c,h)=>{const p=this.props.highlight?.searchWords?n.createElement(s(),{key:h,textToHighlight:c.text,searchWords:this.props.highlight.searchWords,findChunks:r.Oq,highlightClassName:this.props.highlight.highlightClassName}):c.text;return c.style?n.createElement("span",{key:h,style:c.style,"data-testid":"ansiLogLine"},p):p})}}const i=(0,g.cV)(d);i.displayName="LogMessageAnsi"},42785:(Y,A,e)=>{"use strict";e.d(A,{Q:()=>d});var t=e(96540),n=e(76885),o=e(71733),s=e(43127),r=e(29158),g=e(10534),u=e(2913);const d=t.memo(({logText:i,onOpenContext:l,onPermalinkClick:f,onPinLine:c,onUnpinLine:h,pinned:p,row:m,showContextToggle:a,styles:v,mouseIsOver:E,onBlur:D,getRowContextQuery:b})=>{const P=a?a(m):!1,y=(0,t.useCallback)(x=>{x.stopPropagation()},[]),T=(0,t.useCallback)(async x=>{if(x.stopPropagation(),b&&(x.nativeEvent.ctrlKey||x.nativeEvent.metaKey||x.nativeEvent.shiftKey)){const S=window.open("about:blank"),O=await b(m,void 0,!1);if(O&&S){const C=n.kM.renderUrl(o.I.assureBaseUrl(`${(0,u.zj)().appSubUrl}explore`),{left:JSON.stringify({datasource:O.datasource,queries:[O],range:(0,s.E2)()})});S.location=C;return}S?.close()}l(m)},[l,b,m]),M=(0,t.useCallback)(x=>{!x.currentTarget.contains(x.relatedTarget)&&D&&D()},[D]),I=(0,t.useCallback)(()=>i,[i]);return t.createElement("span",{className:`log-row-menu ${v.rowMenu}`,onClick:y,onBlur:M},p&&!E&&t.createElement(r.K,{className:v.unPinButton,size:"md",name:"gf-pin",onClick:()=>h&&h(m),tooltip:"Unpin line",tooltipPlacement:"top","aria-label":"Unpin line",tabIndex:0}),E&&t.createElement(t.Fragment,null,P&&t.createElement(r.K,{size:"md",name:"gf-show-context",onClick:T,tooltip:"Show context",tooltipPlacement:"top","aria-label":"Show context",tabIndex:0}),t.createElement(g.b,{className:v.copyLogButton,icon:"copy",variant:"secondary",fill:"text",size:"md",getText:I,tooltip:"Copy to clipboard",tooltipPlacement:"top",tabIndex:0}),p&&h&&t.createElement(r.K,{className:v.unPinButton,size:"md",name:"gf-pin",onClick:()=>h&&h(m),tooltip:"Unpin line",tooltipPlacement:"top","aria-label":"Unpin line",tabIndex:0}),!p&&c&&t.createElement(r.K,{className:v.unPinButton,size:"md",name:"gf-pin",onClick:()=>c&&c(m),tooltip:"Pin line",tooltipPlacement:"top","aria-label":"Pin line",tabIndex:0}),f&&m.rowId!==void 0&&m.uid&&t.createElement(r.K,{tooltip:"Copy shortlink","aria-label":"Copy shortlink",tooltipPlacement:"top",size:"md",name:"share-alt",onClick:()=>f(m),tabIndex:0})))});d.displayName="LogRowMenuCell"},40455:(Y,A,e)=>{"use strict";e.d(A,{S:()=>u,a:()=>l});var t=e(96540),n=e(23257),o=e.n(n),s=e(21),r=e(85492),g=e(42785);const u=1e5,d=({hasAnsi:f,entry:c,highlights:h,styles:p})=>{const m=h&&h.length>0&&h[0]&&h[0].length>0&&c.length<u,a=h??[];if(f){const v=m?{searchWords:a,highlightClassName:p.logsRowMatchHighLight}:void 0;return t.createElement(r.$,{value:c,highlight:v})}else if(m)return t.createElement(o(),{textToHighlight:c,searchWords:a,findChunks:s.Oq,highlightClassName:p.logsRowMatchHighLight});return t.createElement(t.Fragment,null,c)},i=(f,c)=>{if(c)try{return JSON.stringify(JSON.parse(f),void 0,2)}catch{return f}return f},l=t.memo(f=>{const{row:c,wrapLogMessage:h,prettifyLogMessage:p,showContextToggle:m,styles:a,onOpenContext:v,onPermalinkClick:E,onUnpinLine:D,onPinLine:b,pinned:P,mouseIsOver:y,onBlur:T,getRowContextQuery:M}=f,{hasAnsi:I,raw:x}=c,S=(0,t.useMemo)(()=>i(x,p),[x,p]),O=(0,t.useMemo)(()=>y||P,[y,P]);return t.createElement(t.Fragment,null,t.createElement("td",{className:a.logsRowMessage},t.createElement("div",{className:h?a.positionRelative:a.horizontalScroll},t.createElement("button",{className:`${a.logLine} ${a.positionRelative}`},t.createElement(d,{hasAnsi:I,entry:S,highlights:c.searchWords,styles:a})))),t.createElement("td",{className:`log-row-menu-cell ${a.logRowMenuCell}`},O&&t.createElement(g.Q,{logText:S,row:c,showContextToggle:m,getRowContextQuery:M,onOpenContext:v,onPermalinkClick:E,onPinLine:b,onUnpinLine:D,pinned:P,styles:a,mouseIsOver:y,onBlur:T})))});l.displayName="LogRowMessage"},14647:(Y,A,e)=>{"use strict";e.d(A,{k:()=>q});var t=e(32196),n=e(41811),o=e(96540),s=e(41987),r=e(52622),g=e(32264),u=e(40845),d=e(14110),i=e(38138),l=e(91002);const f=({x:te,y:re,onClickFilterValue:de,onClickFilterOutValue:ie,selection:ge,row:ve,close:ye})=>{const pe=(0,o.useRef)(null),le=(0,u.of)(h);return(0,o.useEffect)(()=>{function De(Re){Re.key==="Escape"&&ye()}return document.addEventListener("keyup",De),()=>{document.removeEventListener("keyup",De)}},[ye]),de||ie?o.createElement("div",{className:le.menu,style:{top:re,left:te}},o.createElement(i.W,{ref:pe},o.createElement(i.W.Item,{label:"Copy selection",onClick:()=>{(0,l.Dk)(ge,pe),ye(),c("copy",ge.length,ve.datasourceType)}}),de&&o.createElement(i.W.Item,{label:"Add as line contains filter",onClick:()=>{de(ge,ve.dataFrame.refId),ye(),c("line_contains",ge.length,ve.datasourceType)}}),ie&&o.createElement(i.W.Item,{label:"Add as line does not contain filter",onClick:()=>{ie(ge,ve.dataFrame.refId),ye(),c("line_does_not_contain",ge.length,ve.datasourceType)}}))):null};function c(te,re,de){(0,d.rR)("grafana_explore_logs_popover_menu",{action:te,selectionLength:re,datasourceType:de||"unknown"})}const h=te=>({menu:(0,t.css)({position:"absolute",zIndex:te.zIndex.modal})});class p{constructor(){this.seen=new Set,this.count=0}getKey(re){this.count+=1;const de=`k_${re}`;return this.seen.has(de)?`i_${this.count}`:(this.seen.add(de),de)}}var m=e(2543),a=e(72724),v=e(56034),E=e(14578),D=e(41260),b=e(10534),P=e(29158),y=e(14689),T=e(69147),M=e(3911);const I=te=>({logsStatsRow:(0,t.css)`
    label: logs-stats-row;
    margin: ${parseInt(te.spacing(2),10)/1.75}px 0;
  `,logsStatsRowActive:(0,t.css)`
    label: logs-stats-row--active;
    color: ${te.colors.primary.text};
    position: relative;
  `,logsStatsRowLabel:(0,t.css)`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:(0,t.css)`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:(0,t.css)`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: ${te.spacing(.75)};
  `,logsStatsRowPercent:(0,t.css)`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: ${te.spacing(.75)};
    width: ${te.spacing(4.5)};
  `,logsStatsRowBar:(0,t.css)`
    label: logs-stats-row__bar;
    height: ${te.spacing(.5)};
    overflow: hidden;
    background: ${te.colors.text.disabled};
  `,logsStatsRowInnerBar:(0,t.css)`
    label: logs-stats-row__innerbar;
    height: ${te.spacing(.5)};
    overflow: hidden;
    background: ${te.colors.primary.main};
  `}),x=({active:te,count:re,proportion:de,value:ie})=>{const ge=(0,u.of)(I),ve=`${Math.round(de*100)}%`,ye={width:ve},pe=te?(0,t.cx)([ge.logsStatsRow,ge.logsStatsRowActive]):(0,t.cx)([ge.logsStatsRow]);return o.createElement("div",{className:pe},o.createElement("div",{className:(0,t.cx)([ge.logsStatsRowLabel])},o.createElement("div",{className:(0,t.cx)([ge.logsStatsRowValue]),title:ie},ie),o.createElement("div",{className:(0,t.cx)([ge.logsStatsRowCount])},re),o.createElement("div",{className:(0,t.cx)([ge.logsStatsRowPercent])},ve)),o.createElement("div",{className:(0,t.cx)([ge.logsStatsRowBar])},o.createElement("div",{className:(0,t.cx)([ge.logsStatsRowInnerBar]),style:ye})))};x.displayName="LogLabelStatsRow";const S=5,O=(0,M.N)(te=>({logsStats:(0,t.css)`
      label: logs-stats;
      background: inherit;
      color: ${te.colors.text.primary};
      word-break: break-all;
      width: fit-content;
      max-width: 100%;
    `,logsStatsHeader:(0,t.css)`
      label: logs-stats__header;
      border-bottom: 1px solid ${te.colors.border.medium};
      display: flex;
    `,logsStatsTitle:(0,t.css)`
      label: logs-stats__title;
      font-weight: ${te.typography.fontWeightMedium};
      padding-right: ${te.spacing(2)};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:(0,t.css)`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:(0,t.css)`
      label: logs-stats__body;
      padding: 5px 0px;
    `}));class C extends o.PureComponent{render(){const{label:re,rowCount:de,stats:ie,value:ge,theme:ve,isLabel:ye}=this.props,pe=O(ve),le=ie.slice(0,S);let Me=le.find(we=>we.value===ge),De=ie.slice(S);const Re=!Me;Re&&(Me=De.find(we=>we.value===ge),De=De.filter(we=>we.value!==ge));const me=De.reduce((we,Ne)=>we+Ne.count,0),Te=le.reduce((we,Ne)=>we+Ne.count,0)+me,Be=me/Te;return o.createElement("div",{className:pe.logsStats,"data-testid":"logLabelStats"},o.createElement("div",{className:pe.logsStatsHeader},o.createElement("div",{className:pe.logsStatsTitle},re,": ",Te," of ",de," rows have that ",ye?"label":"field")),o.createElement("div",{className:pe.logsStatsBody},le.map(we=>o.createElement(x,{key:we.value,...we,active:we.value===ge})),Re&&Me&&o.createElement(x,{key:Me.value,...Me,active:!0}),me>0&&o.createElement(x,{key:"__OTHERS__",count:me,value:"Other",proportion:Be})))}}const L=(0,u.cV)(C);L.displayName="LogLabelStats";var U=e(77020);const R=(0,n.A)(te=>({wordBreakAll:(0,t.css)`
      label: wordBreakAll;
      word-break: break-all;
    `,copyButton:(0,t.css)`
      & > button {
        color: ${te.colors.text.secondary};
        padding: 0;
        justify-content: center;
        border-radius: ${te.shape.radius.circle};
        height: ${te.spacing(te.components.height.sm)};
        width: ${te.spacing(te.components.height.sm)};
        svg {
          margin: 0;
        }

        span > div {
          top: -5px;
          & button {
            color: ${te.colors.success.main};
          }
        }
      }
    `,adjoiningLinkButton:(0,t.css)`
      margin-left: ${te.spacing(1)};
    `,wrapLine:(0,t.css)`
      label: wrapLine;
      white-space: pre-wrap;
    `,logDetailsStats:(0,t.css)`
      padding: 0 ${te.spacing(1)};
    `,logDetailsValue:(0,t.css)`
      display: flex;
      align-items: center;
      line-height: 22px;

      .log-details-value-copy {
        visibility: hidden;
      }
      &:hover {
        .log-details-value-copy {
          visibility: visible;
        }
      }
    `,buttonRow:(0,t.css)`
      display: flex;
      flex-direction: row;
      gap: ${te.spacing(.5)};
      margin-left: ${te.spacing(.5)};
    `}));class B extends o.PureComponent{constructor(){super(...arguments),this.state={showFieldsStats:!1,fieldCount:0,fieldStats:null},this.showField=()=>{const{onClickShowField:re,parsedKeys:de,row:ie}=this.props;re&&re(de[0]),(0,d.rR)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:ie.datasourceType,logRowUid:ie.uid,type:"enable"})},this.hideField=()=>{const{onClickHideField:re,parsedKeys:de,row:ie}=this.props;re&&re(de[0]),(0,d.rR)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:ie.datasourceType,logRowUid:ie.uid,type:"disable"})},this.isFilterLabelActive=async()=>{const{isFilterLabelActive:re,parsedKeys:de,parsedValues:ie,row:ge}=this.props;return re?await re(de[0],ie[0],ge.dataFrame?.refId):!1},this.filterLabel=()=>{const{onClickFilterLabel:re,parsedKeys:de,parsedValues:ie,row:ge}=this.props;re&&re(de[0],ie[0],(0,T.f8)(ge)||void 0),(0,d.rR)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:ge.datasourceType,filterType:"include",logRowUid:ge.uid})},this.filterOutLabel=()=>{const{onClickFilterOutLabel:re,parsedKeys:de,parsedValues:ie,row:ge}=this.props;re&&re(de[0],ie[0],(0,T.f8)(ge)||void 0),(0,d.rR)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:ge.datasourceType,filterType:"exclude",logRowUid:ge.uid})},this.updateStats=()=>{const{getStats:re}=this.props,de=re(),ie=de?de.reduce((ge,ve)=>ge+ve.count,0):0;(!(0,m.isEqual)(this.state.fieldStats,de)||ie!==this.state.fieldCount)&&this.setState({fieldStats:de,fieldCount:ie})},this.showStats=()=>{const{isLabel:re,row:de,app:ie}=this.props,{showFieldsStats:ge}=this.state;ge||this.updateStats(),this.toggleFieldsStats(),(0,d.rR)("grafana_explore_logs_log_details_stats_clicked",{dataSourceType:de.datasourceType,fieldType:re?"label":"detectedField",type:ge?"close":"open",logRowUid:de.uid,app:ie})}}componentDidUpdate(){this.state.showFieldsStats&&this.updateStats()}toggleFieldsStats(){this.setState(re=>({showFieldsStats:!re.showFieldsStats}))}generateClipboardButton(re){const{theme:de}=this.props,ie=R(de);return o.createElement("div",{className:`log-details-value-copy ${ie.copyButton}`},o.createElement(b.b,{getText:()=>re,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"md"}))}generateMultiVal(re,de){return o.createElement("table",null,o.createElement("tbody",null,re?.map((ie,ge)=>o.createElement("tr",{key:`${ie}-${ge}`},o.createElement("td",null,ie,de&&ie!==""&&this.generateClipboardButton(ie))))))}render(){const{theme:re,parsedKeys:de,parsedValues:ie,isLabel:ge,links:ve,displayedFields:ye,wrapLogMessage:pe,onClickFilterLabel:le,onClickFilterOutLabel:Me,disableActions:De,row:Re}=this.props,{showFieldsStats:me,fieldStats:he,fieldCount:Te}=this.state,Be=R(re),we=(0,U.D)(re),Ne=de==null?!1:de.length===1,Ze=ie==null?!1:ie.length===1,st=!De&&le&&Me,Qe=Re.dataFrame?.refId?` in query ${Re.dataFrame?.refId}`:"",ke=!Ze&&ie!=null&&!ie.every(He=>He===""),je=ye&&de!=null&&ye.includes(de[0])?o.createElement(P.K,{variant:"primary",tooltip:"Hide this field",name:"eye",onClick:this.hideField}):o.createElement(P.K,{tooltip:"Show this field instead of the message",name:"eye",onClick:this.showField});return o.createElement(o.Fragment,null,o.createElement("tr",{className:we.logDetailsValue},o.createElement("td",{className:we.logsDetailsIcon},o.createElement("div",{className:Be.buttonRow},st&&o.createElement(o.Fragment,null,o.createElement(H,{name:"search-plus",onClick:this.filterLabel,isActive:this.isFilterLabelActive,tooltipSuffix:Qe}),o.createElement(P.K,{name:"search-minus",tooltip:`Filter out value${Qe}`,onClick:this.filterOutLabel})),!De&&ye&&je,!De&&o.createElement(P.K,{variant:me?"primary":"secondary",name:"signal",tooltip:"Ad-hoc statistics",className:"stats-button",disabled:!Ne,onClick:this.showStats}))),o.createElement("td",{className:we.logDetailsLabel},Ne?de[0]:this.generateMultiVal(de)),o.createElement("td",{className:(0,t.cx)(Be.wordBreakAll,pe&&Be.wrapLine)},o.createElement("div",{className:Be.logDetailsValue},Ze?ie[0]:this.generateMultiVal(ie,!0),Ze&&this.generateClipboardButton(ie[0]),o.createElement("div",{className:(0,t.cx)((Ze||ke)&&Be.adjoiningLinkButton)},ve?.map((He,Ge)=>o.createElement("span",{key:`${He.title}-${Ge}`},o.createElement(y.R,{link:He}))))))),me&&Ne&&Ze&&o.createElement("tr",null,o.createElement("td",null,o.createElement(P.K,{variant:me?"primary":"secondary",name:"signal",tooltip:"Hide ad-hoc statistics",onClick:this.showStats})),o.createElement("td",{colSpan:2},o.createElement("div",{className:Be.logDetailsStats},o.createElement(L,{stats:he,label:de[0],value:ie[0],rowCount:Te,isLabel:ge})))))}}const H=({isActive:te,tooltipSuffix:re,...de})=>{const[ie,ge]=(0,o.useState)(!1),ve=ie?"Remove filter":"Filter for value";return te().then(ge),o.createElement(P.K,{...de,variant:ie?"primary":void 0,tooltip:ve+re})},W=(0,u.cV)(B);W.displayName="LogDetailsRow";var N=e(70377);class V extends o.PureComponent{render(){const{app:re,row:de,theme:ie,hasError:ge,onClickFilterOutLabel:ve,onClickFilterLabel:ye,getRows:pe,showDuplicates:le,className:Me,onClickShowField:De,onClickHideField:Re,displayedFields:me,getFieldLinks:he,wrapLogMessage:Te,styles:Be}=this.props,we=(0,U.L)(ie,de.logLevel),Ne=de.labels?de.labels:{},Ze=Object.keys(Ne).length>0,st=(0,N.jE)(de,he);let Qe=st.filter(J=>J.links?.length);const ke=Qe.filter(J=>J.fieldIndex!==de.entryFieldIndex).sort(),je=Qe.filter(J=>J.fieldIndex===de.entryFieldIndex).sort(),He=(0,N.qE)(je),Ge=ke&&ke.length>0||He&&He.length>0,Oe=de.dataFrame.meta?.type===D.m.LogLines?[]:st.filter(J=>J.links?.length===0&&J.fieldIndex!==de.entryFieldIndex).sort(),Ke=Oe&&Oe.length>0,Ee=ge?"":`${we.logsRowLevelColor} ${Be.logsRowLevel} ${Be.logsRowLevelDetails}`;return o.createElement("tr",{className:(0,t.cx)(Me,Be.logDetails)},le&&o.createElement("td",null),o.createElement("td",{className:Ee,"aria-label":"Log level"}),o.createElement("td",{colSpan:4},o.createElement("div",{className:Be.logDetailsContainer},o.createElement("table",{className:Be.logDetailsTable},o.createElement("tbody",null,(Ze||Ke)&&o.createElement("tr",null,o.createElement("td",{colSpan:100,className:Be.logDetailsHeading,"aria-label":"Fields"},"Fields")),Object.keys(Ne).sort().map((J,oe)=>{const ue=Ne[J];return o.createElement(W,{key:`${J}=${ue}-${oe}`,parsedKeys:[J],parsedValues:[ue],isLabel:!0,getStats:()=>(0,l.Tj)(pe(),J),onClickFilterOutLabel:ve,onClickFilterLabel:ye,onClickShowField:De,onClickHideField:Re,row:de,app:re,wrapLogMessage:Te,displayedFields:me,disableActions:!1,isFilterLabelActive:this.props.isFilterLabelActive})}),Oe.map((J,oe)=>{const{keys:ue,values:be,fieldIndex:Le}=J;return o.createElement(W,{key:`${ue[0]}=${be[0]}-${oe}`,parsedKeys:ue,parsedValues:be,onClickShowField:De,onClickHideField:Re,onClickFilterOutLabel:ve,onClickFilterLabel:ye,getStats:()=>(0,l.s2)(de.dataFrame.fields[Le].values),displayedFields:me,wrapLogMessage:Te,row:de,app:re,disableActions:!1,isFilterLabelActive:this.props.isFilterLabelActive})}),Ge&&o.createElement("tr",null,o.createElement("td",{colSpan:100,className:Be.logDetailsHeading,"aria-label":"Data Links"},"Links")),ke.map((J,oe)=>{const{keys:ue,values:be,links:Le,fieldIndex:_e}=J;return o.createElement(W,{key:`${ue[0]}=${be[0]}-${oe}`,parsedKeys:ue,parsedValues:be,links:Le,onClickShowField:De,onClickHideField:Re,getStats:()=>(0,l.s2)(de.dataFrame.fields[_e].values),displayedFields:me,wrapLogMessage:Te,row:de,app:re,disableActions:!1})}),He?.map((J,oe)=>{const{keys:ue,values:be,links:Le,fieldIndex:_e}=J;return o.createElement(W,{key:`${ue[0]}=${be[0]}-${oe}`,parsedKeys:ue,parsedValues:be,links:Le,onClickShowField:De,onClickHideField:Re,getStats:()=>(0,l.s2)(de.dataFrame.fields[_e].values),displayedFields:me,wrapLogMessage:Te,row:de,app:re,disableActions:!0})}),!Ke&&!Ze&&!Ge&&o.createElement("tr",null,o.createElement("td",{colSpan:100,"aria-label":"No details"},"No details available")))))))}}const G=(0,u.cV)(V);G.displayName="LogDetails";var _=e(93463),K=e(40455),j=e(42785);const k=o.memo(te=>{const{row:re,detectedFields:de,getFieldLinks:ie,wrapLogMessage:ge,styles:ve,mouseIsOver:ye,pinned:pe,...le}=te,Me=(0,N.jE)(re,ie),De=ge?"":Q.noWrap,Re=(0,o.useMemo)(()=>de.map(he=>{const Te=Me.find(Be=>{const{keys:we}=Be;return we[0]===he});return Te!=null?`${he}=${Te.values}`:re.labels[he]!==void 0&&re.labels[he]!==null?`${he}=${re.labels[he]}`:null}).filter(he=>he!==null).join(" "),[de,Me,re.labels]),me=(0,o.useMemo)(()=>ye||pe,[ye,pe]);return o.createElement(o.Fragment,null,o.createElement("td",{className:ve.logsRowMessage},o.createElement("div",{className:De},Re)),o.createElement("td",{className:`log-row-menu-cell ${ve.logRowMenuCell}`},me&&o.createElement(j.Q,{logText:Re,row:re,styles:ve,pinned:pe,mouseIsOver:ye,...le})))}),Q={noWrap:(0,t.css)`
    white-space: nowrap;
  `};k.displayName="LogRowMessageDisplayedFields";class ee extends o.PureComponent{constructor(re){super(re),this.state={permalinked:!1,showingContext:!1,showDetails:!1,mouseIsOver:!1},this.debouncedContextClose=(0,m.debounce)(()=>{this.setState({showingContext:!1})},3e3),this.onOpenContext=de=>{this.setState({showingContext:!0}),this.props.onOpenContext(de,this.debouncedContextClose)},this.onRowClick=de=>{this.props.handleTextSelection?.(de,this.props.row)||this.props.enableLogDetails&&((0,d.rR)("grafana_explore_logs_log_details_clicked",{datasourceType:this.props.row.datasourceType,type:this.state.showDetails?"close":"open",logRowUid:this.props.row.uid,app:this.props.app}),this.setState(ie=>({showDetails:!ie.showDetails})))},this.onMouseEnter=()=>{this.setState({mouseIsOver:!0}),this.props.onLogRowHover&&this.props.onLogRowHover(this.props.row)},this.onMouseMove=de=>{this.props.handleTextSelection&&document.getSelection()?.toString()&&de.buttons>0&&this.setState({mouseIsOver:!1})},this.onMouseLeave=()=>{this.setState({mouseIsOver:!1}),this.props.onLogRowHover&&this.props.onLogRowHover(void 0)},this.scrollToLogRow=(de,ie=!1)=>{const{row:ge,permalinkedRowId:ve,scrollIntoView:ye,containerRendered:pe}=this.props;if(ve!==ge.uid){(de.permalinked||ie)&&this.setState({permalinked:!1});return}!this.state.permalinked&&pe&&this.logLineRef.current&&ye&&(ye(this.logLineRef.current),(0,d.rR)("grafana_explore_logs_permalink_opened",{datasourceType:ge.datasourceType??"unknown",logRowUid:ge.uid}),this.setState({permalinked:!0}))},this.escapeRow=(0,n.A)((de,ie)=>de.hasUnescapedContent&&ie?{...de,entry:(0,l.Hw)(de.entry),raw:(0,l.Hw)(de.raw)}:de),this.logLineRef=o.createRef()}renderTimeStamp(re){return(0,a.LE)(re,{timeZone:this.props.timeZone,defaultWithMS:!0})}componentDidMount(){this.scrollToLogRow(this.state,!0)}componentDidUpdate(re,de){this.scrollToLogRow(de)}render(){const{getRows:re,onClickFilterLabel:de,onClickFilterOutLabel:ie,onClickShowField:ge,onClickHideField:ve,enableLogDetails:ye,row:pe,showDuplicates:le,showContextToggle:Me,showLabels:De,showTime:Re,displayedFields:me,wrapLogMessage:he,prettifyLogMessage:Te,theme:Be,getFieldLinks:we,forceEscape:Ne,app:Ze,styles:st,getRowContextQuery:Qe}=this.props,{showDetails:ke,showingContext:je,permalinked:He}=this.state,Ge=(0,U.L)(Be,pe.logLevel),{errorMessage:Oe,hasError:Ke}=(0,l.Ei)(pe),Ee=(0,t.cx)(st.logsRow,{[st.errorLogRow]:Ke,[st.highlightBackground]:je||He}),J=(0,t.cx)(st.logsRow,{[st.errorLogRow]:Ke,[st.highlightBackground]:He&&!this.state.showDetails}),oe=this.escapeRow(pe,Ne);return o.createElement(o.Fragment,null,o.createElement("tr",{ref:this.logLineRef,className:Ee,onClick:this.onRowClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseMove:this.onMouseMove,onFocus:this.onMouseEnter},le&&o.createElement("td",{className:st.logsRowDuplicates},oe.duplicates&&oe.duplicates>0?`${oe.duplicates+1}x`:null),o.createElement("td",{className:Ke?"":`${Ge.logsRowLevelColor} ${st.logsRowLevel}`},Ke&&o.createElement(v.m,{content:`Error: ${Oe}`,placement:"right",theme:"error"},o.createElement(E.I,{className:st.logIconError,name:"exclamation-triangle",size:"xs"}))),ye&&o.createElement("td",{title:ke?"Hide log details":"See log details",className:st.logsRowToggleDetails},o.createElement(E.I,{className:st.topVerticalAlign,name:ke?"angle-down":"angle-right"})),Re&&o.createElement("td",{className:st.logsRowLocalTime},this.renderTimeStamp(pe.timeEpochMs)),De&&oe.uniqueLabels&&o.createElement("td",{className:st.logsRowLabels},o.createElement(_.A,{labels:oe.uniqueLabels})),me&&me.length>0?o.createElement(k,{row:oe,showContextToggle:Me,detectedFields:me,getFieldLinks:we,wrapLogMessage:he,onOpenContext:this.onOpenContext,onPermalinkClick:this.props.onPermalinkClick,styles:st,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinned,mouseIsOver:this.state.mouseIsOver,onBlur:this.onMouseLeave}):o.createElement(K.a,{row:oe,showContextToggle:Me,getRowContextQuery:Qe,wrapLogMessage:he,prettifyLogMessage:Te,onOpenContext:this.onOpenContext,onPermalinkClick:this.props.onPermalinkClick,app:Ze,styles:st,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinned,mouseIsOver:this.state.mouseIsOver,onBlur:this.onMouseLeave})),this.state.showDetails&&o.createElement(G,{className:J,showDuplicates:le,getFieldLinks:we,onClickFilterLabel:de,onClickFilterOutLabel:ie,onClickShowField:ge,onClickHideField:ve,getRows:re,row:oe,wrapLogMessage:he,hasError:Ke,displayedFields:me,app:Ze,styles:st,isFilterLabelActive:this.props.isFilterLabelActive}))}}const ae=(0,u.cV)(ee);ae.displayName="LogRow";const Z=100;class ne extends o.PureComponent{constructor(){super(...arguments),this.renderAllTimer=null,this.logRowsRef=(0,o.createRef)(),this.state={renderAll:!1,selection:"",selectedRow:null,popoverMenuCoordinates:{x:0,y:0}},this.openContext=(re,de)=>{this.props.onOpenContext&&this.props.onOpenContext(re,de)},this.handleSelection=(re,de)=>{if(this.popoverMenuSupported()===!1)return!1;const ie=document.getSelection()?.toString();if(!ie||!this.logRowsRef.current)return!1;const ge=this.logRowsRef.current?.getBoundingClientRect();return this.setState({selection:ie,popoverMenuCoordinates:{x:re.clientX-ge.left,y:re.clientY-ge.top},selectedRow:de}),document.addEventListener("click",this.handleDeselection),document.addEventListener("contextmenu",this.handleDeselection),!0},this.handleDeselection=re=>{if((0,l.a8)(re.target)&&!this.logRowsRef.current?.contains(re.target)){this.closePopoverMenu();return}document.getSelection()?.toString()||this.closePopoverMenu()},this.closePopoverMenu=()=>{document.removeEventListener("click",this.handleDeselection),document.removeEventListener("contextmenu",this.handleDeselection),this.setState({selection:"",popoverMenuCoordinates:{x:0,y:0},selectedRow:null})},this.makeGetRows=(0,n.A)(re=>()=>re),this.sortLogs=(0,n.A)((re,de)=>(0,l.oR)(re,de))}popoverMenuSupported(){return!g.$.featureToggles.logRowsPopoverMenu||this.props.app!==s.Jk.Explore?!1:!!(this.props.onClickFilterOutValue||this.props.onClickFilterValue)}componentDidMount(){const{logRows:re,previewLimit:de}=this.props,ge=(re?re.length:0)<=de*2;ge?this.setState({renderAll:ge}):this.renderAllTimer=window.setTimeout(()=>this.setState({renderAll:!0}),2e3)}componentWillUnmount(){document.removeEventListener("click",this.handleDeselection),document.removeEventListener("contextmenu",this.handleDeselection),this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{deduplicatedRows:re,logRows:de,dedupStrategy:ie,theme:ge,logsSortOrder:ve,previewLimit:ye,...pe}=this.props,{renderAll:le}=this.state,Me=(0,U.D)(ge),De=re||de,Re=de&&de.length>0,me=De?De.reduce((Qe,ke)=>ke.duplicates?Qe+ke.duplicates:Qe,0):0,he=ie!==r.fY.none&&me>0,Te=De||[],Be=ve?this.sortLogs(Te,ve):Te,we=Be.slice(0,ye),Ne=Be.slice(ye,Be.length),Ze=this.makeGetRows(Be),st=new p;return o.createElement("div",{className:Me.logRows,ref:this.logRowsRef},this.state.selection&&this.state.selectedRow&&o.createElement(f,{close:this.closePopoverMenu,row:this.state.selectedRow,selection:this.state.selection,...this.state.popoverMenuCoordinates,onClickFilterValue:pe.onClickFilterValue,onClickFilterOutValue:pe.onClickFilterOutValue}),o.createElement("table",{className:(0,t.cx)(Me.logsRowsTable,this.props.overflowingContent?"":Me.logsRowsTableContain)},o.createElement("tbody",null,Re&&we.map(Qe=>o.createElement(ae,{key:st.getKey(Qe.uid),getRows:Ze,row:Qe,showDuplicates:he,logsSortOrder:ve,onOpenContext:this.openContext,styles:Me,onPermalinkClick:this.props.onPermalinkClick,scrollIntoView:this.props.scrollIntoView,permalinkedRowId:this.props.permalinkedRowId,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinnedRowId===Qe.uid,isFilterLabelActive:this.props.isFilterLabelActive,handleTextSelection:this.popoverMenuSupported()?this.handleSelection:void 0,...pe})),Re&&le&&Ne.map(Qe=>o.createElement(ae,{key:st.getKey(Qe.uid),getRows:Ze,row:Qe,showDuplicates:he,logsSortOrder:ve,onOpenContext:this.openContext,styles:Me,onPermalinkClick:this.props.onPermalinkClick,scrollIntoView:this.props.scrollIntoView,permalinkedRowId:this.props.permalinkedRowId,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinnedRowId===Qe.uid,isFilterLabelActive:this.props.isFilterLabelActive,handleTextSelection:this.popoverMenuSupported()?this.handleSelection:void 0,...pe})),Re&&!le&&o.createElement("tr",null,o.createElement("td",{colSpan:5},"Rendering ",Be.length-ye," rows...")))))}}ne.defaultProps={previewLimit:Z};const q=(0,u.cV)(ne);q.displayName="LogsRows"},77020:(Y,A,e)=>{"use strict";e.d(A,{D:()=>d,L:()=>u});var t=e(32196),n=e(41811),o=e(84140),s=e(9557),r=e(23596),g=e(16797);const u=(i,l)=>{let f=i.isLight?i.v1.palette.gray5:i.v1.palette.gray2;switch(l){case s.$b.crit:case s.$b.critical:f="#705da0";break;case s.$b.error:case s.$b.err:f="#e24d42";break;case s.$b.warning:case s.$b.warn:f=i.colors.warning.main;break;case s.$b.info:f="#7eb26d";break;case s.$b.debug:f="#1f78c1";break;case s.$b.trace:f="#6ed0e0";break}return{logsRowLevelColor:(0,t.css)`
      &::after {
        background-color: ${f};
      }
    `}},d=(0,n.A)(i=>{const l=g.hoverColor(i.colors.background.secondary,i),f=(0,o.A)(i.components.dashboard.background).setAlpha(.7).toRgbString();return{logsRowLevel:(0,t.css)`
      label: logs-row__level;
      max-width: ${i.spacing(1.25)};
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: ${i.spacing(.5)};
      }
    `,logsRowMatchHighLight:(0,t.css)`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${i.components.textHighlight.text}
      background-color: ${i.components.textHighlight};
    `,logRows:(0,t.css)({position:"relative"}),logsRowsTable:(0,t.css)`
      label: logs-rows;
      font-family: ${i.typography.fontFamilyMonospace};
      font-size: ${i.typography.bodySmall.fontSize};
      width: 100%;
      position: relative;
    `,logsRowsTableContain:(0,t.css)`
      contain: strict;
    `,highlightBackground:(0,t.css)`
      background-color: ${(0,o.A)(i.colors.info.transparent).setAlpha(.25).toString()};
    `,logsRow:(0,t.css)`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-menu {
          z-index: 1;
        }

        background: ${l};
      }

      td:not(.log-row-menu-cell):last-child {
        width: 100%;
      }

      > td:not(.log-row-menu-cell) {
        position: relative;
        padding-right: ${i.spacing(1)};
        border-top: 1px solid transparent;
        border-bottom: 1px solid transparent;
        height: 100%;
      }
    `,logsRowDuplicates:(0,t.css)`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logIconError:(0,t.css)`
      color: ${i.colors.warning.main};
    `,logsRowToggleDetails:(0,t.css)`
      label: logs-row-toggle-details__level;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:(0,t.css)`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:(0,t.css)`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;

      /* This is to make the labels vertical align */
      > span {
        margin-top: 0.75px;
      }
    `,logsRowMessage:(0,t.css)`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
      overflow-wrap: anywhere;
      width: 100%;
      text-align: left;
    `,copyLogButton:(0,t.css)`
      padding: 0 0 0 ${i.spacing(.5)};
      height: ${i.spacing(3)};
      width: ${i.spacing(3.25)};
      line-height: ${i.spacing(2.5)};
      overflow: hidden;
      &:hover {
          background-color: ${r.alpha(i.colors.text.primary,.12)};
        }
      }
    `,logDetailsContainer:(0,t.css)`
      label: logs-row-details-table;
      border: 1px solid ${i.colors.border.medium};
      padding: 0 ${i.spacing(1)} ${i.spacing(1)};
      border-radius: ${i.shape.radius.default};
      margin: ${i.spacing(2.5)} ${i.spacing(1)} ${i.spacing(2.5)} ${i.spacing(2)};
      cursor: default;
    `,logDetailsTable:(0,t.css)`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:(0,t.css)`
      label: logs-row-details__icon;
      position: relative;
      color: ${i.v1.palette.gray3};
      padding-top: 1px;
      padding-bottom: 1px;
      padding-right: ${i.spacing(.75)};
    `,logDetailsLabel:(0,t.css)`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${i.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:(0,t.css)`
      label: logs-row-details__heading;
      font-weight: ${i.typography.fontWeightBold};
      padding: ${i.spacing(1)} 0 ${i.spacing(.5)};
    `,logDetailsValue:(0,t.css)`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${l};
      }
    `,topVerticalAlign:(0,t.css)`
      label: topVerticalAlign;
      margin-top: -${i.spacing(.9)};
      margin-left: -${i.spacing(.25)};
    `,detailsOpen:(0,t.css)`
      &:hover {
        background-color: ${g.hoverColor(i.colors.background.primary,i)};
      }
    `,errorLogRow:(0,t.css)`
      label: erroredLogRow;
      color: ${i.colors.text.secondary};
    `,positionRelative:(0,t.css)`
      label: positionRelative;
      position: relative;
    `,rowWithContext:(0,t.css)`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${f};
      display: inherit;
    `,horizontalScroll:(0,t.css)`
      label: horizontalScroll;
      white-space: pre;
    `,contextNewline:(0,t.css)`
      display: block;
      margin-left: 0px;
    `,rowMenu:(0,t.css)`
      label: rowMenu;
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      align-content: flex-end;
      justify-content: space-evenly;
      align-items: center;
      position: absolute;
      top: 0;
      bottom: auto;
      background: ${i.colors.background.primary};
      box-shadow: ${i.shadows.z3};
      padding: ${i.spacing(.5,1,.5,1)};
      z-index: 100;
      gap: ${i.spacing(.5)};

      & > button {
        margin: 0;
      }
    `,logRowMenuCell:(0,t.css)`
      position: sticky;
      z-index: ${i.zIndex.dropdown};
      margin-top: -${i.spacing(.125)};
      right: 0px;

      & > span {
        transform: translateX(-100%);
      }
    `,logLine:(0,t.css)`
      background-color: transparent;
      border: none;
      diplay: inline;
      font-family: ${i.typography.fontFamilyMonospace};
      font-size: ${i.typography.bodySmall.fontSize};
      letter-spacing: ${i.typography.bodySmall.letterSpacing};
      text-align: left;
      padding: 0;
      user-select: text;
    `,logsRowLevelDetails:(0,t.css)`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:(0,t.css)`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${i.colors.background.primary};
      }
    `,visibleRowMenu:(0,t.css)`
      label: visibleRowMenu;
      aspect-ratio: 1/1;
      z-index: 90;
    `,linkButton:(0,t.css)`
      label: linkButton;
      > button {
        padding-top: ${i.spacing(.5)};
      }
    `,hidden:(0,t.css)`
      label: hidden;
      visibility: hidden;
    `,unPinButton:(0,t.css)`
      height: ${i.spacing(3)};
      line-height: ${i.spacing(2.5)};
    `}})},81166:(Y,A,e)=>{"use strict";e.d(A,{V:()=>U});var t=e(32196),n=e(2543),o=e(96540),s=e(16817),r=e(39070),g=e(52622),u=e(9557),d=e(47232),i=e(14110),l=e(32264),f=e(40845),c=e(37390),h=e(55852),p=e(33390),m=e(97186),a=e(29436),v=e(80348),E=e(69147),D=e(91002),b=e(81073),P=e(14647),y=e(15292);function T(R){return{buttons:(0,t.css)({display:"flex",gap:R.spacing(1)})}}const M=R=>{const B=(0,f.of)(T),{wrapLines:H,onChangeWrapLines:W,onScrollCenterClick:N}=R,V=(0,o.useCallback)(G=>{const _=G.currentTarget.checked;(0,i.rR)("grafana_explore_logs_log_context_toggle_lines_clicked",{state:_}),W(_)},[W]);return o.createElement("div",{className:B.buttons},o.createElement(y.K,{showLabel:!0,value:H,onChange:V,label:"Wrap lines"}),o.createElement(h.$n,{variant:"secondary",onClick:N},"Center matched line"))},I=R=>({modal:(0,t.css)`
      width: 85vw;
      ${R.breakpoints.down("md")} {
        width: 100%;
      }
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    `,sticky:(0,t.css)`
      position: sticky;
      z-index: 1;
      top: -1px;
      bottom: -1px;
    `,entry:(0,t.css)`
      & > td {
        padding: ${R.spacing(1)} 0 ${R.spacing(1)} 0;
      }
      background: ${R.colors.emphasize(R.colors.background.secondary)};

      & > table {
        margin-bottom: 0;
      }

      & .log-row-menu {
        margin-top: -6px;
      }
    `,datasourceUi:(0,t.css)`
      padding-bottom: ${R.spacing(1.25)};
      display: flex;
      align-items: center;
    `,logRowGroups:(0,t.css)`
      overflow: auto;
      max-height: 75%;
      align-self: stretch;
      display: inline-block;
      border: 1px solid ${R.colors.border.weak};
      border-radius: ${R.shape.radius.default};
      & > table {
        min-width: 100%;
      }
    `,flexColumn:(0,t.css)`
      display: flex;
      flex-direction: column;
      padding: 0 ${R.spacing(3)} ${R.spacing(3)} ${R.spacing(3)};
    `,flexRow:(0,t.css)`
      display: flex;
      flex-direction: row;
      align-items: center;
      & > div:last-child {
        margin-left: auto;
      }
    `,noMarginBottom:(0,t.css)`
      & > table {
        margin-bottom: 0;
      }
    `,hidden:(0,t.css)`
      display: none;
    `,paddingTop:(0,t.css)`
      padding-top: ${R.spacing(1)};
    `,paddingBottom:(0,t.css)`
      padding-bottom: ${R.spacing(1)};
    `,link:(0,t.css)`
      color: ${R.colors.text.secondary};
      font-size: ${R.typography.bodySmall.fontSize};
      :hover {
        color: ${R.colors.text.link};
      }
    `,loadingCell:(0,t.css)`
      position: sticky;
      left: 50%;
      display: inline-block;
      transform: translateX(-50%);
    `}),x=()=>({above:{loadingState:r.Gu.NotStarted,rows:[]},below:{loadingState:r.Gu.NotStarted,rows:[]}}),S=(R,B)=>R==="above"&&B===g.uH.Descending||R==="below"&&B===g.uH.Ascending?u.ZF.Forward:u.ZF.Backward,O=(R,B)=>({...R,dataFrame:{...R.dataFrame,refId:`context_${B.above}_${B.below}`}}),C=(R,B)=>R.some(H=>H.entry===B.entry&&H.timeEpochNs===B.timeEpochNs),L=100,U=({row:R,open:B,logsSortOrder:H,timeZone:W,getLogRowContextUi:N,getRowContextQuery:V,onClose:G,getRowContext:_})=>{const K=(0,o.useRef)(null),j=(0,o.useRef)(null),k=(0,o.useRef)(null),Q=(0,o.useRef)(null),ee=(0,o.useRef)(null),ae=(0,o.useRef)(null),Z=(0,o.useRef)(null),ne=(0,o.useRef)({above:0,below:0}),q=(0,v.useDispatch)(),te=(0,f.$j)(),re=I(te),[de,ie]=(0,o.useState)(!0),[ge,ve]=(0,o.useState)(x()),ye=(Oe,Ke)=>{ve(Ee=>{const J={...Ee};return J[Oe]=Ke(Ee[Oe]),J})},pe=(0,o.useRef)(1),[le,Me]=(0,o.useState)(null),[De,Re]=(0,o.useState)(p.A.getBool(m.$.logContextWrapLogMessage,p.A.getBool(m.$.wrapLogMessage,!0))),me=(0,o.useCallback)(()=>{const{below:Oe,above:Ke}=ge,Ee=(0,D.oR)([...Oe.rows,R,...Ke.rows],g.uH.Ascending),J=Ee[0].timeEpochMs;let oe=Ee[Ee.length-1].timeEpochMs;J===oe&&(oe+=1);const ue=(0,d.KQ)(J),be=(0,d.KQ)(oe);return{from:ue,to:be,raw:{from:ue,to:be}}},[ge,R]),he=(0,o.useCallback)(async()=>{const Oe=V?await V(R):null;Me(Oe)},[R,V]),Te=async()=>{await he(),ve(x()),ne.current={above:0,below:0},pe.current+=1},Be=async(Oe,Ke)=>{ne.current[Oe]+=1;const Ee=Ke.at(Oe==="above"?0:-1);if(Ee==null)throw new Error("should never happen. the array always contains at least 1 item (the middle row)");(0,i.rR)("grafana_explore_logs_log_context_load_more_called",{datasourceType:Ee.datasourceType,above:ne.current.above,below:ne.current.below});const J=S(Oe,H),oe=await _(O(Ee,ne.current),{limit:L,direction:J}),ue=(0,E.HT)(oe.data).rows;return H===g.uH.Ascending&&ue.reverse(),ue.filter(Le=>!C(Ke,Le))};(0,o.useEffect)(()=>{B&&he()},[he,B]);const[we,Ne]=(0,o.useState)([]),Ze=Oe=>{we.indexOf(Oe)===-1&&Ne([...we,Oe])},st=Oe=>{const Ke=we.indexOf(Oe);Ke>-1&&(we.splice(Ke,1),Ne([...we]))},Qe=async Oe=>{const{below:Ke,above:Ee}=ge;if(ge[Oe].loadingState===r.Gu.Loading)return;ye(Oe,ue=>({...ue,loadingState:r.Gu.Loading}));const oe=pe.current;try{const ue=[...Ee.rows,R,...Ke.rows],be=(await Be(Oe,ue)).map($e=>!$e.searchWords||!$e.searchWords?.length?{...$e,searchWords:R.searchWords}:$e),[Le,_e]=(0,n.partition)(be,$e=>$e.timeEpochNs>R.timeEpochNs),Ve=H===g.uH.Ascending?_e:Le,We=H===g.uH.Ascending?Le:_e;oe===pe.current&&ve($e=>{const it=Ve.length>0?(0,D.oR)([...Ve,...$e.above.rows],H):$e.above.rows,at=We.length>0?(0,D.oR)([...$e.below.rows,...We],H):$e.below.rows;return{above:{rows:it,loadingState:Oe==="above"?be.length===0?r.Gu.Done:r.Gu.NotStarted:$e.above.loadingState},below:{rows:at,loadingState:Oe==="below"?be.length===0?r.Gu.Done:r.Gu.NotStarted:$e.below.loadingState}}})}catch{ye(Oe,ue=>({rows:ue.rows,loadingState:r.Gu.Error}))}},ke=async(Oe,Ke)=>{for(const Ee of Oe){if(!Ee.isIntersecting)continue;const J=Ee.target;J===ae.current?Qe("above"):J===Z.current&&Qe("below")}};(0,o.useEffect)(()=>{const Oe=K.current,Ke=ae.current,Ee=Z.current;if(Oe==null)return;const J=new IntersectionObserver(ke,{root:Oe});return Ke!=null&&J.observe(Ke),Ee!=null&&J.observe(Ee),()=>{J.disconnect()}});const je=(0,o.useCallback)(()=>{k.current?.scrollIntoView({block:"center"}),j.current?.scrollIntoView({block:"center"})},[k,j]);(0,o.useLayoutEffect)(()=>{const Oe=K.current;if(Oe==null)return;const Ke=ee.current,Ee=Oe.clientHeight;if(ee.current=Ee,Ke!==Ee){je();return}if(ne.current.above<=1&&ne.current.below<=1){je();return}const J=Q.current,oe=Oe.scrollHeight;if(Q.current=oe,J!=null){const ue=Oe.scrollTop+(oe-J);Oe.scrollTop=ue}},[ge.above.rows,je]),(0,s.A)(he,[V,R]);const He=ge.above.loadingState,Ge=ge.below.loadingState;return o.createElement(c.a,{isOpen:B,title:"Log context",contentClassName:re.flexColumn,className:re.modal,onDismiss:G},l.$.featureToggles.logsContextDatasourceUi&&N&&o.createElement("div",{className:re.datasourceUi},N(R,Te)),o.createElement("div",{className:(0,t.cx)(re.flexRow,re.paddingBottom)},o.createElement("div",null,o.createElement(M,{wrapLines:De,onChangeWrapLines:Re,onScrollCenterClick:je}))),o.createElement("div",{ref:K,className:re.logRowGroups},o.createElement("table",null,o.createElement("tbody",null,o.createElement("tr",null,o.createElement("td",{className:re.loadingCell},He!==r.Gu.Done&&He!==r.Gu.Error&&o.createElement("div",{ref:ae},o.createElement(b.I,{adjective:"newer"})),He===r.Gu.Error&&o.createElement("div",null,"Error loading log more logs."),He===r.Gu.Done&&o.createElement("div",null,"No more logs available."))),o.createElement("tr",null,o.createElement("td",{className:re.noMarginBottom},o.createElement(P.k,{logRows:ge.above.rows,dedupStrategy:g.fY.none,showLabels:p.A.getBool(m.$.showLabels,!1),showTime:p.A.getBool(m.$.showTime,!0),wrapLogMessage:De,prettifyLogMessage:p.A.getBool(m.$.prettifyLogMessage,!1),enableLogDetails:!0,timeZone:W,displayedFields:we,onClickShowField:Ze,onClickHideField:st}))),o.createElement("tr",{ref:k}),o.createElement("tr",{ref:j,className:(0,t.cx)(re.entry,de?re.sticky:null),"data-testid":"entry-row"},o.createElement("td",{className:re.noMarginBottom},o.createElement(P.k,{logRows:[R],dedupStrategy:g.fY.none,showLabels:p.A.getBool(m.$.showLabels,!1),showTime:p.A.getBool(m.$.showTime,!0),wrapLogMessage:De,prettifyLogMessage:p.A.getBool(m.$.prettifyLogMessage,!1),enableLogDetails:!0,timeZone:W,displayedFields:we,onClickShowField:Ze,onClickHideField:st,onUnpinLine:()=>ie(!1),onPinLine:()=>ie(!0),pinnedRowId:de?R.uid:void 0,overflowingContent:!0}))),o.createElement("tr",null,o.createElement("td",null,o.createElement(o.Fragment,null,o.createElement(P.k,{logRows:ge.below.rows,dedupStrategy:g.fY.none,showLabels:p.A.getBool(m.$.showLabels,!1),showTime:p.A.getBool(m.$.showTime,!0),wrapLogMessage:De,prettifyLogMessage:p.A.getBool(m.$.prettifyLogMessage,!1),enableLogDetails:!0,timeZone:W,displayedFields:we,onClickShowField:Ze,onClickHideField:st})))),o.createElement("tr",null,o.createElement("td",{className:re.loadingCell},Ge!==r.Gu.Done&&Ge!==r.Gu.Error&&o.createElement("div",{ref:Z},o.createElement(b.I,{adjective:"older"})),Ge===r.Gu.Error&&o.createElement("div",null,"Error loading log more logs."),Ge===r.Gu.Done&&o.createElement("div",null,"No more logs available.")))))),o.createElement(c.a.ButtonRow,null,le?.datasource?.uid&&o.createElement(h.$n,{variant:"secondary",onClick:async()=>{let Oe=R.uid;R.dataFrame.refId&&(Oe=R.uid.replace(R.dataFrame.refId,le.refId)),q((0,a.ve)({queries:[le],range:me(),datasourceUid:le.datasource.uid,panelsState:{logs:{id:Oe}}})),G(),(0,i.rR)("grafana_explore_logs_log_context_open_split_view_clicked",{datasourceType:R.datasourceType,logRowUid:R.uid})}},"Open in split view")))}},70377:(Y,A,e)=>{"use strict";e.d(A,{FE:()=>d,jE:()=>g,qE:()=>u});var t=e(2543),n=e.n(t),o=e(41811),s=e(87490),r=e(98101);const g=(0,o.A)((f,c)=>{const h=d(f,c);return Object.values(h)}),u=(0,o.A)(f=>{let c=[];return f.forEach(h=>{h.links?.forEach(p=>{if(p.variables){const m=p.variables.map(v=>{const E=v.variableName,D=v.fieldPath?`.${v.fieldPath}`:"";return`${E}${D}`}),a=p.variables.map(v=>v.found?v.value:"");c.push({keys:m,values:a,links:[p],fieldIndex:h.fieldIndex})}})}),c}),d=(0,o.A)((f,c)=>l(f.dataFrame).visible.filter(m=>m.values[f.rowIndex]!=null).map(m=>{const a=c?c(m,f.rowIndex,f.dataFrame):[],v=m.values[f.rowIndex],E=typeof v=="string"||typeof v=="number"?v.toString():(0,s.MA)(v);return{keys:[m.name],values:[E],links:a,fieldIndex:m.index}}));function i(f,c){const h=(0,r.O)(f);if(h===null)return new Set;const p=new Set(h.extraFields.map(m=>m.index));return h.severityField!==null&&p.add(h.severityField.index),c.keepBody&&p.add(h.bodyField.index),c.keepTimestamp&&p.add(h.timeField.index),p}function l(f,c){const h=f.fields.map((v,E)=>({...v,index:E})),p=i(f,c??{}),[m,a]=(0,t.partition)(h,v=>v.config.custom?.hidden?!1:(v.config.links??[]).length>0?!0:p.has(v.index));return{visible:m,hidden:a}}},98101:(Y,A,e)=>{"use strict";e.d(A,{n:()=>h,O:()=>m});var t=e(85404),n=e(11261),o=e(41260);function s(a,v){const E=a.labels;if(E!==void 0){const D=new Array(v);return D.fill(E),D}else return null}function r(a,v,E){const D=a.getFieldByName("labels");if(D!==void 0&&D.type===n.PU.other){const b=D.values.map(h);return[D,()=>b]}else return[null,()=>s(v,E.length)]}function g(a){const v=new t.L(a),E=v.getFirstFieldOfType(n.PU.time),D=v.getFirstFieldOfType(n.PU.string);if(E===void 0||D===void 0)return null;const b=v.getFieldByName("tsNs")??null,P=v.getFieldByName("level")??null,y=v.getFieldByName("id")??null,[T,M]=r(v,D,a),I=v.fields.filter((x,S)=>S!==E.index&&S!==D.index&&S!==b?.index&&S!==P?.index&&S!==y?.index&&S!==T?.index);return{timeField:E,bodyField:D,timeNanosecondField:b,severityField:P,idField:y,getLogFrameLabels:M,getLogFrameLabelsAsLabels:M,getLabelFieldName:()=>T?.name??null,extraFields:I}}function u(a,v,E){const D=a.getFieldByName(v);if(D!==void 0)return D.type===E?D:void 0}const d="timestamp",i="body",l="severity",f="id",c="labels";function h(a){const v={};return Object.entries(a).forEach(([E,D])=>{v[E]=typeof D=="string"?D:JSON.stringify(D)}),v}function p(a){const v=new t.L(a),E=u(v,d,n.PU.time),D=u(v,i,n.PU.string);if(E===void 0||D===void 0)return null;const b=u(v,l,n.PU.string)??null,P=u(v,f,n.PU.string)??null,y=u(v,c,n.PU.other)??null,T=y===null?null:y.values,M=v.fields.filter((I,x)=>x!==E.index&&x!==D.index&&x!==b?.index&&x!==P?.index&&x!==y?.index);return{timeField:E,bodyField:D,severityField:b,idField:P,getLogFrameLabels:()=>T,timeNanosecondField:null,getLogFrameLabelsAsLabels:()=>T!==null?T.map(h):null,getLabelFieldName:()=>y!==null?y.name:null,extraFields:M}}function m(a){return a.meta?.type===o.m.LogLines?p(a):g(a)}},69147:(Y,A,e)=>{"use strict";e.d(A,{yR:()=>x,HT:()=>K,M0:()=>W,ct:()=>N,O6:()=>_,f8:()=>ge,J9:()=>V,Wr:()=>de,sg:()=>re});var t=e(2543),n=e(88483),o=e(50832),s=e(65474),r=e(9557),g=e(52622),u=e(14236),d=e(85404),i=e(11261),l=e(24293),f=e(47232),c=e(8249),h=e(40672),p=e(72724),m=e(65879),a=e(39070),v=e(26517),E=e(32264),D=e(24284),b=e(88838),P=e(2913);function y(ve,ye){return P.Ay.bootData?.user?.lightTheme?ye:ve}var T=e(98101),M=e(91002);const I="Line limit",x="Common labels",S={[r.$b.critical]:D.Tj[7],[r.$b.warning]:D.Tj[1],[r.$b.error]:D.Tj[4],[r.$b.info]:D.Tj[0],[r.$b.debug]:D.Tj[5],[r.$b.trace]:D.Tj[2],[r.$b.unknown]:y("#8e8e8e","#bdc4cd")},O=1,C=1e3*O,L=60*C,U=60*L,R=24*U,B=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-6]\d[,\.]\d+([+-][0-2]\d:[0-5]\d|Z)/g;function H(ve,ye,pe){switch(pe){case g.fY.exact:return ve.entry.replace(B,"")===ye.entry.replace(B,"");case g.fY.numbers:return ve.entry.replace(/\d/g,"")===ye.entry.replace(/\d/g,"");case g.fY.signature:return ve.entry.replace(/\w/g,"")===ye.entry.replace(/\w/g,"");default:return!1}}function W(ve,ye){return ye===g.fY.none?ve:ve.reduce((pe,le,Me)=>{const De={...le},Re=pe[pe.length-1];return Me>0&&H(le,Re,ye)?Re.duplicates++:(De.duplicates=0,pe.push(De)),pe},[])}function N(ve,ye){return ye.size===0?ve:ve.filter(pe=>!ye.has(pe.logLevel))}function V(ve,ye){const pe={},le=[];for(const Me of ve){let De=pe[Me.logLevel];De||(pe[Me.logLevel]=De={lastTs:null,datapoints:[],target:Me.logLevel,color:S[Me.logLevel]},le.push(De));const Re=Math.floor(Me.timeEpochMs/ye)*ye;Re===De.lastTs?De.datapoints[De.datapoints.length-1][0]++:(De.datapoints.push([1,Re]),De.lastTs=Re);for(const me of le)me!==De&&me.lastTs!==Re&&(me.datapoints.push([0,Re]),me.lastTs=Re)}return le.map((Me,De)=>{Me.datapoints.sort((Te,Be)=>Te[1]-Be[1]);const Re=(0,u.Vc)(Me),he=new d.L(Re).getFirstFieldOfType(i.PU.number);return Re.fields[he.index].config.min=0,Re.fields[he.index].config.decimals=0,Re.fields[he.index].config.color={mode:l.Y.Fixed,fixedColor:Me.color},Re.fields[he.index].config.custom={drawStyle:g.GR.Bars,barAlignment:g.Nj.Center,barWidthFactor:.9,barMaxWidth:5,lineColor:Me.color,pointColor:Me.color,fillColor:Me.color,lineWidth:0,fillOpacity:100,stacking:{mode:g.gs.Normal,group:"A"}},Re})}function G(ve){return ve.fields.some(ye=>ye.type===i.PU.time)&&ve.fields.some(ye=>ye.type===i.PU.string)}const _="infinite-scroll-";function K(ve,ye,pe,le){let Me=!1;le=le?.map(me=>me.refId.includes(_)?(Me=!0,{...me,refId:me.refId.replace(_,"")}):me),Me&&(ve=ve.map(me=>({...me,refId:me.refId?.replace(_,"")})));const{logSeries:De}=k(ve),Re=ee(De,le,Me);if(Re){if(ye&&Re.rows.length>0){const me=Re.rows.sort(M.M1),{visibleRange:he,bucketSize:Te,visibleRangeMs:Be,requestedRangeMs:we}=j(me,ye,pe);Re.visibleRange=he,Re.bucketSize=Te,Re.series=V(me,Te),Re.meta&&(Re.meta=ae(Re,Be,we))}else Re.series=[];return Re.queries=le,Re}return{hasUniqueLabels:!1,rows:[],meta:[],series:[],queries:le}}function j(ve,ye,pe,le=20,Me=1e3){let De=pe,Re=ye,me=Math.max(Re*le,Me),he,Te;if(pe){const Be=ve[0].timeEpochMs;if(Te=pe.to-pe.from,he=pe.to-Be,he>0){const we=he/Te;Re*=we,me=Math.max(Math.ceil(Re*le),Me),De={from:Math.floor(Be/me)*me,to:pe.to}}else he=1}return{bucketSize:me,visibleRange:De,visibleRangeMs:he,requestedRangeMs:Te}}function k(ve){const ye=[],pe=[];for(const le of ve){if(G(le)||!le.fields.length){pe.push(le);continue}le.length>0&&ye.push(le)}return{logSeries:pe,metricSeries:ye}}function Q(ve,ye,pe){const le=ve.values[pe],De=(0,f.yT)(le).valueOf();if(ye)return{ts:le,timeEpochMs:De,timeEpochNs:ye.values[pe]};if(ve.nanos!==void 0){const Re=ve.nanos[pe].toString().padStart(6,"0"),me=`${De}${Re}`;return{ts:le,timeEpochMs:De,timeEpochNs:me}}return{ts:le,timeEpochMs:De,timeEpochNs:De+"000000"}}function ee(ve,ye=[],pe=!1){if(ve.length===0)return;const le=[];let Me=[];const De=ve.filter(He=>He.fields.length);De.length&&De.forEach(He=>{const Ge=(0,T.O)(He);if(Ge!=null){const Oe=Ge.getLogFrameLabelsAsLabels()??void 0,Ke={rawFrame:He,logsFrame:Ge,frameLabels:Oe};Me.push(Ke),Oe&&Oe.length>0&&le.push(Oe)}});const Re=le.flat(),me=Re.length>0?(0,c.yO)(Re):{};let he=[],Te=!1;const Be=(0,M.kA)();for(const He of Me){const{logsFrame:Ge,rawFrame:Oe,frameLabels:Ke}=He,{timeField:Ee,timeNanosecondField:J,bodyField:oe,severityField:ue,idField:be}=Ge;for(let Le=0;Le<Oe.length;Le++){const{ts:_e,timeEpochMs:Ve,timeEpochNs:We}=Q(Ee,J??void 0,Le),$e=oe.values[Le]??"",it=typeof $e=="string"?$e:JSON.stringify($e),at=h.sQ.hasAnsiCodes(it),ht=!!it.match(/\\n|\\t|\\r/),ft=Oe.meta?.custom?.searchWords??Oe.meta?.searchWords??[],gt=at?b.DB.strip(it):it,Dt=Ke?.[Le],It=(0,c.s6)(Dt,me);Object.keys(It).length>0&&(Te=!0);let jt=r.$b.unknown;const Vt=ue&&ue.values[Le]||Dt&&Dt.level;Vt?jt=(0,M.EK)(Vt):jt=(0,M.XM)(gt);const _t=ye.find(St=>St.refId===Oe.refId)?.datasource?.type,rt={entryFieldIndex:oe.index,rowIndex:Le,dataFrame:Oe,logLevel:jt,timeFromNow:(0,p.fq)(_e),timeEpochMs:Ve,timeEpochNs:We,timeLocal:(0,p.LE)(_e,{timeZone:"browser"}),timeUtc:(0,p.LE)(_e,{timeZone:"utc"}),uniqueLabels:It,hasAnsi:at,hasUnescapedContent:ht,searchWords:ft,entry:gt,raw:it,labels:Dt||{},uid:`${Oe.refId}_${be?be.values[Le]:Le.toString()}`,datasourceType:_t};be!==null&&(rt.rowId=be.values[Le]),!(pe&&Be(rt))&&he.push(rt)}}const we=[];(0,t.size)(me)>0&&we.push({label:x,value:me,kind:r.tG.LabelsMap});const Ze=ve.filter(He=>He?.meta?.custom?.limit??He?.meta?.limit).reduce((He,Ge)=>(He[Ge.refId??""]=Ge.meta?.custom?.limit??Ge.meta?.limit??0,He),{}),st=Object.values(Ze).reduce((He,Ge)=>He+=Ge,0);st>0&&we.push({label:I,value:st,kind:r.tG.Number});let Qe=0;const ke={};let je=!1;for(const He of ve){const Ge=He.meta?.custom?.lokiQueryStatKey,{refId:Oe}=He;if(!je&&He.meta?.custom?.error&&(we.push({label:"",value:He.meta?.custom.error,kind:r.tG.Error}),je=!0),Oe&&!ke[Oe]){if(Ge&&He.meta?.stats){const Ke=He.meta.stats.find(Ee=>Ee.displayName===Ge);Ke&&(Qe+=Ke.value)}ke[Oe]=!0}}if(Qe>0){const{text:He,suffix:Ge}=(0,v.rT)("B")(Qe);we.push({label:"Total bytes processed",value:`${He} ${Ge}`,kind:r.tG.String})}return{hasUniqueLabels:Te,meta:we,rows:he}}function ae(ve,ye,pe){if(!ve.meta)return[];let le=[...ve.meta];const Me=le.findIndex(Re=>Re.label===I),De=Me>=0&&le[Me]?.value;if(De&&typeof De=="number"&&De>0){let Re;if(De===ve.rows.length&&ye&&pe){const me=(ye/pe*100).toFixed(2);Re=`${De} reached, received logs cover ${me}% (${m.msRangeToTimeString(ye)}) of your selected time range (${m.msRangeToTimeString(pe)})`}else{const me=E.$.featureToggles.logsInfiniteScrolling?"displayed":"returned";Re=`${De} (${ve.rows.length} ${me})`}le[Me]={label:I,value:Re,kind:r.tG.String}}return le}function Z(ve,ye){const pe=ye&&ve===r.$b.unknown?"logs":ve,le=S[ve];return{displayNameFromDS:pe,color:{mode:l.Y.Fixed,fixedColor:le},custom:{drawStyle:g.GR.Bars,barAlignment:g.Nj.Center,lineColor:le,pointColor:le,fillColor:le,lineWidth:1,fillOpacity:100,stacking:{mode:g.gs.Normal,group:"A"}}}}const ne=(ve,ye,pe)=>(ve.fields=ve.fields.map(le=>(le.type===i.PU.number&&(le.config={...le.config,...Z(ye(ve),pe)}),le)),ve);function q(ve){let ye;try{ye=new d.L(ve).getFirstFieldOfType(i.PU.number)}catch{}return ye?.labels?te(ye.labels):r.$b.unknown}function te(ve){const ye=ve.level??ve.lvl??ve.loglevel??"";return ye?(0,M.EK)(ye):r.$b.unknown}function re(ve,ye,pe){const le=ye.range,Me=pe.targets,De=q,Re=le.to.valueOf()-le.from.valueOf(),me=ie(ye.scopedVars,Re);return ye.interval=me.interval,ye.scopedVars.__interval={value:me.interval,text:me.interval},me.intervalMs!==void 0&&(ye.intervalMs=me.intervalMs,ye.scopedVars.__interval_ms={value:me.intervalMs,text:me.intervalMs}),ye.hideFromInspector=!0,new n.c(he=>{let Te=[];he.next({state:a.Gu.Loading,error:void 0,data:[]});const Be=ve.query(ye),Ne=((0,o.A)(Be)?Be:(0,s.H)(Be)).subscribe({complete:()=>{he.complete()},next:Ze=>{const{error:st}=Ze;if(st!==void 0)he.next({state:a.Gu.Error,error:st,data:[]}),he.error(st);else{const Qe=(0,t.groupBy)(Ze.data,"refId");Te=Ze.data.map(ke=>{if(ke.meta?.dataTopic===g.QR.Annotations)return ke;let je=ke.refId||"";je.startsWith("log-volume-")&&(je=je.substr(11));const He={logsVolumeType:r.Aj.FullRange,absoluteRange:{from:le.from.valueOf(),to:le.to.valueOf()},datasourceName:ve.name,sourceQuery:Me.find(Ge=>Ge.refId===je)};return ke.meta={...ke.meta,custom:{...ke.meta?.custom,...He}},ne(ke,De,Qe[ke.refId].length===1)}),he.next({state:Ze.state,error:void 0,data:Te})}},error:Ze=>{he.next({state:a.Gu.Error,error:Ze,data:[]}),he.error(Ze)}});return()=>{Ne?.unsubscribe()}})}function de(ve,ye){return ye.hideFromInspector=!0,new n.c(pe=>{let le=[];pe.next({state:a.Gu.Loading,error:void 0,data:[]});const Me=ve.query(ye),Re=((0,o.A)(Me)?Me:(0,s.H)(Me)).subscribe({complete:()=>{pe.next({state:a.Gu.Done,error:void 0,data:le}),pe.complete()},next:me=>{const{error:he}=me;he!==void 0?(pe.next({state:a.Gu.Error,error:he,data:[]}),pe.error(he)):le=me.data.map(Te=>{const Be=(0,u.Vc)(Te),{timeIndex:we}=(0,u.KR)(Be);return(0,u.ES)(Be,we)})},error:me=>{pe.next({state:a.Gu.Error,error:me,data:[]}),pe.error(me)}});return()=>{Re?.unsubscribe()}})}function ie(ve,ye){if(ve.__interval_ms){let pe=ve.__interval_ms.value,le="";return ye<C*5?(pe=O,le="1ms"):pe>U?(pe=R,le="1d"):pe>L?(pe=U,le="1h"):pe>C?(pe=L,le="1m"):(pe=C,le="1s"),{interval:le,intervalMs:pe}}else return{interval:"$__interval"}}function ge(ve){const ye=ve.dataFrame;return ye.length===0||ye.length<=ve.rowIndex?null:(0,u.EI)({fields:ye.fields.map(le=>({...le,values:[le.values[ve.rowIndex]]})),refId:ye.refId})}},91002:(Y,A,e)=>{"use strict";e.d(A,{Dg:()=>b,Dk:()=>I,Dm:()=>T,Dx:()=>P,EK:()=>l,Ei:()=>E,Hw:()=>D,M1:()=>p,Tj:()=>f,XM:()=>i,a8:()=>x,e3:()=>M,kA:()=>S,oR:()=>v,oT:()=>y,s2:()=>c,zy:()=>a});var t=e(2543),n=e.n(t),o=e(9557),s=e(52622),r=e(85404),g=e(11261),u=e(37471),d=e(70377);function i(O){if(!O)return o.$b.unknown;let C=o.$b.unknown,L;for(const[U,R]of Object.entries(o.$b)){const H=new RegExp(`\\b${U}\\b`,"i").exec(O);H&&(L===void 0||H.index<L)&&(C=R,L=H.index)}return C}function l(O){const C=o.$b[O.toString().toLowerCase()];return C||o.$b.unknown}function f(O,C){const L=O.filter(B=>B.labels[C]!==void 0),U=L.length,R=(0,t.countBy)(L,B=>B.labels[C]);return h(R,U)}function c(O){const C=O.filter(U=>U!=null),L=(0,t.countBy)(C);return h(L,C.length)}const h=(O,C)=>(0,t.chain)(O).map((L,U)=>({count:L,value:U,proportion:L/C})).sortBy("count").reverse().value(),p=(O,C)=>O.timeEpochMs<C.timeEpochMs?-1:O.timeEpochMs>C.timeEpochMs?1:O.timeEpochNs<C.timeEpochNs?-1:O.timeEpochNs>C.timeEpochNs?1:0,m=(O,C)=>O.timeEpochMs>C.timeEpochMs?-1:O.timeEpochMs<C.timeEpochMs?1:O.timeEpochNs>C.timeEpochNs?-1:O.timeEpochNs<C.timeEpochNs?1:0,a=(O,C)=>{const L=O?v(O.rows,C):[];return O?{...O,rows:L}:{hasUniqueLabels:!1,rows:L}},v=(O,C)=>C===s.uH.Ascending?O.sort(p):O.sort(m),E=O=>O.labels.__error__?{hasError:!0,errorMessage:O.labels.__error__}:{hasError:!1},D=O=>O.replace(/\\r\\n|\\n|\\t|\\r/g,C=>C.slice(1)==="t"?"	":`
`);function b(O){return O.map(C=>{const L=(0,d.FE)(C).reduce((U,R)=>{const B=R.keys[0];return U[B]=R.values[0],U},{});return{line:C.entry,timestamp:C.timeEpochNs,fields:{...L,...C.labels}}})}const P=O=>{let C={from:1/0,to:-1/0};return O.forEach(L=>{const U=L.meta?.custom||{};U.absoluteRange?.from&&U.absoluteRange?.to&&(C={from:Math.min(C.from,U.absoluteRange.from),to:Math.max(C.to,U.absoluteRange.to)})}),C},y=O=>{if(O.length===0)throw new Error("Cannot aggregate data frames: there must be at least one data frame to aggregate");const C={},L={};let U=-1/0;const R={};let B=[];return O.forEach(H=>{const W=new r.L(H),N=W.getFirstFieldOfType(g.PU.time),V=W.getFirstFieldOfType(g.PU.number);if(!N)throw new Error("Missing time field");if(!V)throw new Error("Missing value field");const G=V.config.displayNameFromDS||H.name||"logs",_=V.values.length;R[G]={meta:H.meta,valueFieldConfig:V.config,timeFieldConfig:N.config};for(let K=0;K<_;K++){const j=N.values[K],k=V.values[K];C[G]??={},C[G][j]=(C[G][j]||0)+k,L[j]=(L[j]||0)+k,U=Math.max(L[j],U)}}),Object.keys(C).forEach(H=>{const W=new u.k,{meta:N,timeFieldConfig:V,valueFieldConfig:G}=R[H];W.name=H,W.meta=N,W.addField({name:"Time",type:g.PU.time,config:V}),W.addField({name:"Value",type:g.PU.number,config:G}),Object.entries(C[H]).sort((_,K)=>Number(_[0])-Number(K[0])).forEach(([_,K])=>{W.add({Time:Number(_),Value:K})}),B.push(W)}),{dataFrames:B,maximum:U}},T=O=>{const C=O[0]?.meta?.custom;return C&&C.datasourceName?{name:C.datasourceName}:null},M=O=>O[0]?.meta?.custom?.logsVolumeType===o.Aj.Limited,I=async(O,C)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(O);{const L=document.createElement("textarea");C.current?.appendChild(L),L.value=O,L.focus(),L.select(),document.execCommand("copy"),L.remove()}};function x(O){return O instanceof Element}function S(){const O=new Set;return function(C){let L=`${C.dataFrame.refId}_${C.rowId?C.rowId:`${C.timeEpochNs}_${C.entry}`}`;return O.has(L)?!0:(O.add(L),!1)}}},90591:(Y,A,e)=>{"use strict";e.d(A,{m:()=>u});var t=e(32196),n=e(96540),o=e(40845),s=e(96374),r=e(44836);const g=({title:i})=>{const l=(0,o.of)(d);return n.createElement("p",{className:l.description},i?(0,r.t)("public-dashboard.delete-modal.revoke-nonorphaned-body-text","Are you sure you want to revoke this URL? The dashboard will no longer be public."):(0,r.t)("public-dashboard.delete-modal.revoke-orphaned-body-text","Orphaned public dashboard will no longer be public."))},u=({dashboardTitle:i,onConfirm:l,onDismiss:f})=>{const c=(0,r.t)("public-dashboard.delete-modal.revoke-title","Revoke public URL");return n.createElement(s.u,{isOpen:!0,body:n.createElement(g,{title:i}),onConfirm:l,onDismiss:f,title:c,icon:"trash-alt",confirmText:c})},d=i=>({title:(0,t.css)`
    margin-bottom: ${i.spacing(1)};
  `,description:(0,t.css)`
    font-size: ${i.typography.body.fontSize};
  `})},71500:(Y,A,e)=>{"use strict";e.d(A,{P:()=>s});var t=e(24439);class n extends Error{constructor(g,u){super(u),this.type=g}}class o{constructor(){this.rootName="general"}validateNewDashboardName(g,u){return this.validate(g,u,"A dashboard or a folder with the same name already exists")}validateNewFolderName(g){return this.validate(this.rootName,g,"A folder or dashboard in the general folder with the same name already exists")}async validate(g,u,d){u=(u||"").trim();const i=u.toLowerCase();if(u.length===0)throw new n("REQUIRED","Name is required");if(i===this.rootName)throw new n("EXISTING","This is a reserved name and cannot be used for a folder.");const f=await(0,t.getGrafanaSearcher)().search({kind:["dashboard"],query:u,location:g||"general"});for(const c of f.view)if(i===c.name.toLowerCase())throw new n("EXISTING",d)}}const s=new o},11230:(Y,A,e)=>{"use strict";e.d(A,{A_:()=>W,FG:()=>b,Q9:()=>P,Ql:()=>B,c0:()=>R,dz:()=>H,iP:()=>c,kV:()=>S,rw:()=>f,vV:()=>C});var t=e(17172),n=e(19347),o=e(82467),s=e(3169),r=e(55314),g=e(6473),u=e(80348),d=e(57767),i=e(98796),l=e(88264);function f(V){return async G=>{try{G((0,l.f7)());const _=await(0,t.AI)().get(`/api/gnet/dashboards/${V}`);await G(E(_.json)),await G(m(_)),G(v())}catch(_){G((0,l.oQ)()),(0,t.NF)(_)&&G((0,o.dx)((0,s.gi)(_.data.message||_)))}}}function c(V){return async G=>{await G(E(V)),await G(a(V)),G(v())}}const h=(V,G)=>V?.usage?.libraryPanels?.filter(_=>G.inputs.libraryPanels.some(K=>K.state!==l.J7.Exists&&K.model.uid===_.uid));function p(V,G){let _=V.__inputs;if(G.inputs.libraryPanels?.length){const K=[];V.__inputs?.forEach(j=>{if(!j?.usage?.libraryPanels){K.push(j);return}const k=h(j,G);j.usage={libraryPanels:k},!!k?.length&&K.push(j)}),_=K}return{...V,__inputs:_}}function m(V){return(G,_)=>{const K=_().importDashboard,j=p(V.json,K);G((0,l.Rp)({...V,json:j}))}}function a(V){return(G,_)=>{const K=_().importDashboard,j=p(V,K);G((0,l.dd)(j))}}function v(){return(V,G)=>{const _=G().importDashboard.dashboard;if(_&&_.__inputs){const K=[];_.__inputs.forEach(j=>{const k={name:j.name,label:j.label,info:j.description,value:j.value,type:j.type,pluginId:j.pluginId,options:[]};k.description=T(j),j.type===l.NZ.DataSource?y(j,k):k.info||(k.info="Specify a string constant"),K.push(k)}),V((0,l.y3)(K))}}}function E(V){return async function(G){const _=await D(V);G((0,l.dW)(_))}}async function D(V){if(!V||!V.__elements)return[];const G=[];for(const _ of Object.values(V.__elements)){if(_.kind!==i.i.Panel)continue;const K=_.model,{type:j,description:k}=K,{uid:Q,name:ee}=_,ae={model:{model:K,uid:Q,name:ee,version:0,type:j,kind:i.i.Panel,description:k},state:l.J7.New};try{const Z=await(0,d.Yr)(Q,!0);ae.state=l.J7.Exists,ae.model=Z}catch(Z){if(Z.status!==404)throw Z}G.push(ae)}return G}function b(){return V=>{V((0,l.SN)())}}function P(V){return async(G,_)=>{const K=_().importDashboard.dashboard,j=_().importDashboard.inputs,k=[];V.dataSources?.forEach((Q,ee)=>{const ae=j.dataSources[ee];k.push({name:ae.name,type:ae.type,pluginId:ae.pluginId,value:Q.uid})}),V.constants?.forEach((Q,ee)=>{const ae=j.constants[ee];k.push({value:Q,name:ae.name,type:ae.type})}),G(r.cU.endpoints.importDashboard.initiate({dashboard:{...K,title:V.title,uid:V.uid||K.uid},overwrite:!0,inputs:k,folderUid:V.folder.uid}))}}const y=(V,G)=>{(0,n.l)().getList({pluginId:V.pluginId}).length===0?G.info="No data sources of type "+V.pluginName+" found":G.info||(G.info="Select a "+V.pluginName+" data source")},T=V=>{if(V.usage&&V.usage.libraryPanels)return`List of affected library panels: ${V.usage.libraryPanels.reduce((_,K,j)=>j===0?K.name:`${_}, ${K.name}`,"")}`};async function M(V,G){const _={totalCount:V.length,successCount:0};for(const K of V)try{await L(K,G)!==null&&(_.successCount+=1)}catch(j){console.error("Failed to move a folder",j)}return _}function I(V,G,..._){return async K=>{try{const j=await V(..._);return Array.prototype.concat(K,[j])}catch(j){if(G)return K;throw j}}}function x(V,G){const _=[];for(const K of V)_.push(I(O,!0,K,!0));for(const K of G)_.push(I(W,!0,K,!0));return N(_)}function S(V){return g.t.ignoreNextSave(),(0,t.AI)().post("/api/dashboards/db/",{dashboard:V.dashboard,message:V.message??"",overwrite:V.overwrite??!1,folderUid:V.folderUid})}function O(V,G){return getBackendSrv().delete(`/api/folders/${V}?forceDeleteRules=false`,void 0,{showSuccessAlert:G})}function C(V){return(0,t.AI)().post("/api/folders",V)}function L(V,G){const _={parentUid:G.uid};return getBackendSrv().post(`/api/folders/${V}/move`,_,{showErrorAlert:!1})}const U=1e3;function R(V,G,_=u.SearchQueryType.Folder){return(0,t.AI)().get("/api/search",{query:V,type:_,permission:G,limit:U})}function B(V){return(0,t.AI)().get(`/api/folders/${V}`)}function H(V){return(0,t.AI)().get(`/api/folders/id/${V}`)}function W(V,G){return(0,t.AI)().delete(`/api/dashboards/uid/${V}`,{showSuccessAlert:G})}function N(V){return V.reduce((G,_)=>Promise.resolve(G).then(_),[])}},88264:(Y,A,e)=>{"use strict";e.d(A,{Ay:()=>a,J7:()=>r,NZ:()=>s,Rp:()=>l,SN:()=>d,V9:()=>g,dW:()=>c,dd:()=>f,f7:()=>p,oQ:()=>h,qx:()=>o,y3:()=>i});var t=e(30038),n=e(39070),o=(v=>(v[v.Gcom=0]="Gcom",v[v.Json=1]="Json",v))(o||{}),s=(v=>(v.DataSource="datasource",v.Constant="constant",v.LibraryPanel="libraryPanel",v))(s||{}),r=(v=>(v.New="new",v.Exists="exists",v.Different="different",v))(r||{});const g={meta:{updatedAt:"",orgName:""},dashboard:{},source:1,inputs:{},state:n.Gu.NotStarted},u=(0,t.Z0)({name:"manageDashboards",initialState:g,reducers:{setGcomDashboard:(v,E)=>{v.dashboard={...E.payload.json,id:null},v.meta={updatedAt:E.payload.updatedAt,orgName:E.payload.orgName},v.source=0,v.state=n.Gu.Done},setJsonDashboard:(v,E)=>{v.dashboard={...E.payload,id:null},v.meta=g.meta,v.source=1,v.state=n.Gu.Done},clearDashboard:v=>{v.dashboard={},v.state=n.Gu.NotStarted},setInputs:(v,E)=>{v.inputs={dataSources:E.payload.filter(D=>D.type==="datasource"),constants:E.payload.filter(D=>D.type==="constant"),libraryPanels:v.inputs.libraryPanels||[]}},setLibraryPanelInputs:(v,E)=>{v.inputs.libraryPanels=E.payload},fetchFailed:v=>{v.dashboard={},v.state=n.Gu.Error},fetchDashboard:v=>{v.state=n.Gu.Loading}}}),{clearDashboard:d,setInputs:i,setGcomDashboard:l,setJsonDashboard:f,setLibraryPanelInputs:c,fetchFailed:h,fetchDashboard:p}=u.actions,a={importDashboard:u.reducer}},32931:(Y,A,e)=>{"use strict";e.d(A,{EC:()=>u,L_:()=>r,YS:()=>s,bA:()=>g,wV:()=>d});var t=e(17172),n=e(82467),o=e(10943);function s(i={getBackendSrv:t.AI}){return async l=>{const f=await i.getBackendSrv().get("/api/org");return l((0,o.bK)(f)),f}}function r(i={getBackendSrv:t.AI}){return async(l,f)=>{const c=f().organization.organization;await i.getBackendSrv().put("/api/org",{name:c.name}),l((0,n.YA)(c.name)),l(s(i))}}function g(i,l={getBackendSrv:t.AI}){return async f=>{const c=await l.getBackendSrv().post("/api/user/using/"+i);f((0,n.YA)(c.name))}}function u(i,l={getBackendSrv:t.AI}){return async f=>{const c=await l.getBackendSrv().post("/api/orgs/",i);f(g(c.orgId))}}function d(i={getBackendSrv:t.AI}){return async l=>{const f=await i.getBackendSrv().get("/api/user/orgs");return l((0,o.Bz)(f)),f}}},10943:(Y,A,e)=>{"use strict";e.d(A,{Ay:()=>d,Bz:()=>g,bK:()=>r,n:()=>s});var t=e(30038);const n={organization:{},userOrgs:[]},o=(0,t.Z0)({name:"organization",initialState:n,reducers:{organizationLoaded:(i,l)=>({...i,organization:l.payload}),setOrganizationName:(i,l)=>({...i,organization:{...i.organization,name:l.payload}}),userOrganizationsLoaded:(i,l)=>({...i,userOrgs:l.payload})}}),{setOrganizationName:s,organizationLoaded:r,userOrganizationsLoaded:g}=o.actions,d={organization:o.reducer}},17888:(Y,A,e)=>{"use strict";e.d(A,{a:()=>D});var t=e(32196),n=e(96540),o=e(47070),s=e(41987),r=e(13544),g=e(12131),u=e(40845),d=e(79041),i=e(14578);const l=n.forwardRef(({icon:y,children:T,onClick:M,...I},x)=>{const S=(0,u.of)(f);return n.createElement("button",{...I,className:S.action,onClick:M},n.createElement(i.I,{name:y,size:"xl"}),T)});l.displayName="CardButton";const f=y=>({action:(0,t.css)({display:"flex",flexDirection:"column",height:"100%",justifySelf:"center",cursor:"pointer",background:y.colors.background.secondary,borderRadius:y.shape.radius.default,color:y.colors.text.primary,border:"unset",width:"100%",justifyContent:"center",alignItems:"center",textAlign:"center","&:hover":{background:y.colors.emphasize(y.colors.background.secondary)}})});var c=e(15054),h=e(33390),p=e(53466),m=e(32696),a=e(14792),v=e(80348),E=e(79971);function D(y){const T=(0,u.of)(P),M=(0,d.d2)(),I=new o.v2(y.data),{dataSummary:x}=I,S=b(y,x),O=(0,v.useDispatch)(),C=(0,a.UA)().getCurrent()?.getPanelById(y.panelId),L=()=>{h.A.setObject(c.wV,m.__.Suggestions),O((0,p.eK)(!0))},U=()=>{C&&O((0,E.gW)({panel:C,pluginId:"table"}))},R=B=>{C&&(O((0,E.gW)({...B,panel:C})),B.transformations&&setTimeout(()=>{g.Ny.partial({tab:"transform"})},100))};return n.createElement("div",{className:T.wrapper},n.createElement("div",{className:T.message,"data-testid":r.Tp.components.Panels.Panel.PanelDataErrorMessage},S),M.app===s.Jk.PanelEditor&&x.hasData&&C&&n.createElement("div",{className:T.actions},y.suggestions&&n.createElement(n.Fragment,null,y.suggestions.map(B=>n.createElement(l,{key:B.name,icon:"process",onClick:()=>R(B)},B.name))),n.createElement(l,{icon:"table",onClick:U},"Switch to table"),n.createElement(l,{icon:"chart-line",onClick:L},"Open visualization suggestions")))}function b({data:y,fieldConfig:T,message:M,needsNumberField:I,needsTimeField:x,needsStringField:S},O){return M||(!y.series||y.series.length===0||y.series.every(C=>C.length===0)?T?.defaults.noValue??"No data":S&&!O.hasStringField?"Data is missing a string field":I&&!O.hasNumberField?"Data is missing a number field":x&&!O.hasTimeField?"Data is missing a time field":"Cannot visualize data")}const P=y=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"}),message:(0,t.css)({textAlign:"center",color:y.colors.text.secondary,fontSize:y.typography.size.lg,width:"100%"}),actions:(0,t.css)({marginTop:y.spacing(2),display:"flex",height:"50%",maxHeight:"150px",columnGap:y.spacing(1),rowGap:y.spacing(1),width:"100%",maxWidth:"600px"})})},41394:(Y,A,e)=>{"use strict";e.d(A,{$:()=>d,W:()=>u});var t=e(96540),n=e(65158),o=e(43429),s=e(42418),r=e(80348);class g extends t.PureComponent{constructor(l){super(l)}render(){const l={display:"flex",alignItems:"center",justifyContent:"center",height:"100%"};return t.createElement("div",{style:l},t.createElement(s.F,{severity:r.AppNotificationSeverity.Error,...this.props}))}}function u(i,l){const f=class extends t.PureComponent{render(){const p=t.createElement(t.Fragment,null,"Check the server startup logs for more information. ",t.createElement("br",null),"If this plugin was loaded from Git, then make sure it was compiled.");return t.createElement(g,{title:`Error loading: ${i.id}`,text:p})}},c=new n.m(f);return c.meta=i,c.loadError=!0,c}function d(i,l){const f=class extends t.PureComponent{render(){return t.createElement(g,{title:`Panel plugin not found: ${i}`})}},c=new n.m(l?()=>null:f);return c.meta={id:i,name:i,sort:100,type:o.QE.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:"public/img/grafana_icon.svg"},screenshots:[],updated:"",version:""}},c}},20726:(Y,A,e)=>{"use strict";e.d(A,{m:()=>h});var t=e(96540),n=e(1933),o=e(90708),s=e(13834),r=e(581),g=e(72574),u=e(40845),d=e(79041),i=e(66602),l=e(10096),f=e(15162);const c={defaults:{},overrides:[]};function h(m){const{pluginId:a,data:v,timeZone:E=(0,n.O)(),options:D={},width:b,height:P,title:y,onOptionsChange:T=()=>{},onChangeTimeRange:M=()=>{},onFieldConfigChange:I=()=>{},fieldConfig:x=c}=m,S=(0,u.$j)(),O=(0,g.w)(),C=(0,t.useMemo)(()=>O.replace.bind(O),[O]),[L,U]=(0,t.useState)((0,f.PY)(a)),[R,B]=(0,t.useState)(),H=p(L,D,x),{dataLinkPostProcessor:W}=(0,d.d2)(),N=(0,o.rJ)(L,H?.fieldConfig,v,E,S,C,W);if((0,t.useEffect)(()=>{L&&L.hasPluginId(a)||(0,f.TV)(a).then(G=>U(G)).catch(G=>{B(G.message)})},[a,L]),R)return t.createElement("div",null,"Failed to load plugin: ",R);if(!L||!L.hasPluginId(a))return t.createElement("div",null,"Loading plugin panel...");if(!L.panel)return t.createElement("div",null,"Seems like the plugin you are trying to load does not have a panel component.");if(!N)return t.createElement("div",null,"No panel data");const V=L.panel;return t.createElement(i.Xw,{dependencies:[L,v]},t.createElement(s.a,{meta:L.meta},t.createElement(V,{id:1,data:N,title:y,timeRange:N.timeRange,timeZone:E,options:H.options,fieldConfig:x,transparent:!1,width:b,height:P,renderCounter:0,replaceVariables:G=>G,onOptionsChange:T,onFieldConfigChange:I,onChangeTimeRange:M,eventBus:l.lE})))}function p(m,a,v){return(0,t.useMemo)(()=>{if(m)return(0,r.F)({plugin:m,currentOptions:a,currentFieldConfig:v,isAfterPluginChange:!1})},[m,v,a])}},25701:(Y,A,e)=>{"use strict";e.d(A,{b:()=>m});var t=e(32196),n=e(96540),o=e(70255),s=e(43429),r=e(51527),g=e(13544),u=e(40845),d=e(29158),i=e(98624),l=e(72129),f=e(10803);const c=38,h=({isCurrent:D,title:b,plugin:P,onClick:y,onDelete:T,disabled:M,showBadge:I,description:x,children:S})=>{const O=(0,u.of)(v),C=M||P.state===s.pn.deprecated,L=(0,t.cx)({[O.item]:!0,[O.itemDisabled]:C,[O.current]:D});return n.createElement("div",{className:L,"aria-label":g.Tp.components.PluginVisualization.item(P.name),"data-testid":g.Tp.components.PluginVisualization.item(P.name),onClick:C?void 0:y,title:D?"Click again to close this section":P.name},n.createElement("img",{className:(0,t.cx)(O.img,{[O.disabled]:C}),src:P.info.logos.small,alt:""}),n.createElement("div",{className:(0,t.cx)(O.itemContent,{[O.disabled]:C})},n.createElement("div",{className:O.name},b),x?n.createElement("span",{className:O.description},x):null,S),I&&n.createElement("div",{className:(0,t.cx)(O.badge,{[O.disabled]:C})},n.createElement(E,{plugin:P})),T&&n.createElement(d.K,{name:"trash-alt",onClick:U=>{U.stopPropagation(),T()},className:O.deleteButton,"aria-label":"Delete button on panel type card",tooltip:"Delete"}))};h.displayName="PanelTypeCard";const p=({children:D,hasDescription:b,hasDelete:P,rootProps:y})=>{const T=(0,u.of)(v),M=(0,u.of)(a);return n.createElement("div",{className:T.item,...y},n.createElement(o.A,{className:(0,t.cx)(T.img,M.image),width:c,height:c}),n.createElement("div",{className:T.itemContent},n.createElement("div",{className:T.name},n.createElement(o.A,{width:160})),b?n.createElement(o.A,{containerClassName:T.description,width:80}):null,D),P&&n.createElement(o.A,{containerClassName:(0,t.cx)(T.deleteButton,M.deleteButton),width:16,height:16}))},m=(0,l.j)(h,p),a=()=>({deleteButton:(0,t.css)({lineHeight:1}),image:(0,t.css)({lineHeight:1})}),v=D=>({item:(0,t.css)({position:"relative",display:"flex",flexShrink:0,cursor:"pointer",background:D.colors.background.secondary,borderRadius:D.shape.radius.default,boxShadow:D.shadows.z1,border:`1px solid ${D.colors.background.secondary}`,alignItems:"center",padding:D.spacing(1),width:"100%",overflow:"hidden",transition:D.transitions.create(["background"],{duration:D.transitions.duration.short}),"&:hover":{background:D.colors.emphasize(D.colors.background.secondary,.03)}}),itemContent:(0,t.css)({overflow:"hidden",position:"relative",padding:D.spacing(0,1)}),itemDisabled:(0,t.css)({cursor:"default","&, &:hover":{background:D.colors.action.disabledBackground}}),current:(0,t.css)({label:"currentVisualizationItem",border:`1px solid ${D.colors.primary.border}`,background:D.colors.action.selected}),disabled:(0,t.css)({opacity:.6,filter:"grayscale(1)",cursor:"default",pointerEvents:"none"}),name:(0,t.css)({textOverflow:"ellipsis",overflow:"hidden",fontSize:D.typography.size.sm,fontWeight:D.typography.fontWeightMedium,width:"100%"}),description:(0,t.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",color:D.colors.text.secondary,fontSize:D.typography.bodySmall.fontSize,fontWeight:D.typography.fontWeightLight,width:"100%",maxHeight:"4.5em"}),img:(0,t.css)({maxHeight:c,width:c,display:"flex",alignItems:"center"}),badge:(0,t.css)({background:D.colors.background.primary}),deleteButton:(0,t.css)({cursor:"pointer",marginLeft:"auto"})}),E=({plugin:D})=>(0,r.x)(D.signature)?n.createElement(i.B,{status:D.signature}):n.createElement(f.p,{state:D.state});E.displayName="PanelPluginBadge"},56707:(Y,A,e)=>{"use strict";e.d(A,{a:()=>E});var t=e(32196),n=e(96540),o=e(16817),s=e(70713),r=e(40845),g=e(47070),u=e(32264),d=e(15162);const i=["timeseries","barchart","gauge","stat","piechart","bargauge","table","state-timeline","status-history","logs","candlestick","flamegraph"];async function l(P,y){const T=new g.v2(P,y);for(const I of i){const S=(await(0,d.TV)(I)).getSuggestionsSupplier();S&&S.getSuggestionsForData(T)}const M=T.getList();if(!u.$.featureToggles.vizAndWidgetSplit&&T.dataSummary.fieldCount===0)for(const I of Object.values(u.$.panels))!I.skipDataQuery||I.hideFromList||M.push({name:I.name,pluginId:I.id,description:I.info.description,cardOptions:{imgSrc:I.info.logos.small}});return M.sort((I,x)=>{if(T.dataSummary.preferredVisualisationType){if(I.pluginId===T.dataSummary.preferredVisualisationType)return-1;if(x.pluginId===T.dataSummary.preferredVisualisationType)return 1}return(x.score??g.nQ.OK)-(I.score??g.nQ.OK)})}var f=e(2543),c=e(13544),h=e(56034),p=e(20726);function m({data:P,suggestion:y,onChange:T,width:M}){const I=(0,r.of)(a),{innerStyles:x,outerStyles:S,renderWidth:O,renderHeight:C}=v(M),L=y.cardOptions??{},U={"aria-label":y.name,className:I.vizBox,"data-testid":c.Tp.components.VisualizationPreview.card(y.name),style:S,onClick:()=>{T({pluginId:y.pluginId,options:y.options,fieldConfig:y.fieldConfig})}};if(L.imgSrc)return n.createElement(h.m,{content:y.description??y.name},n.createElement("button",{...U,className:(0,t.cx)(I.vizBox,I.imgBox)},n.createElement("div",{className:I.name},y.name),n.createElement("img",{className:I.img,src:L.imgSrc,alt:y.name})));let R=y;return y.cardOptions?.previewModifier&&(R=(0,f.cloneDeep)(y),y.cardOptions.previewModifier(R)),n.createElement("button",{...U},n.createElement(h.m,{content:y.name},n.createElement("div",{style:x,className:I.renderContainer},n.createElement(p.m,{title:"",data:P,pluginId:y.pluginId,width:O,height:C,options:R.options,fieldConfig:R.fieldConfig}),n.createElement("div",{className:I.hoverPane}))))}const a=P=>({hoverPane:(0,t.css)({position:"absolute",top:0,right:0,left:0,borderRadius:P.spacing(2),bottom:0}),vizBox:(0,t.css)`
      position: relative;
      background: none;
      border-radius: ${P.shape.radius.default};
      cursor: pointer;
      border: 1px solid ${P.colors.border.medium};

      transition: ${P.transitions.create(["background"],{duration:P.transitions.duration.short})};

      &:hover {
        background: ${P.colors.background.secondary};
      }
    `,imgBox:(0,t.css)`
      display: flex;
      flex-direction: column;
      height: 100%;

      justify-self: center;
      color: ${P.colors.text.primary};
      width: 100%;
      display: flex;

      justify-content: center;
      align-items: center;
      text-align: center;
    `,name:(0,t.css)`
      padding-bottom: ${P.spacing(.5)};
      margin-top: ${P.spacing(-1)};
      font-size: ${P.typography.bodySmall.fontSize};
      white-space: nowrap;
      overflow: hidden;
      color: ${P.colors.text.secondary};
      font-weight: ${P.typography.fontWeightMedium};
      text-overflow: ellipsis;
    `,img:(0,t.css)`
      max-width: ${P.spacing(8)};
      max-height: ${P.spacing(8)};
    `,renderContainer:(0,t.css)`
      position: absolute;
      transform-origin: left top;
      top: 6px;
      left: 6px;
    `});function v(P){const T=P,M=P*(1/1.6),I=350,x=I*(1/1.6),S=6,O=(T-S*2)/I,C=(M-S*2)/x;return{renderHeight:x,renderWidth:I,outerStyles:{width:T,height:M},innerStyles:{width:I,height:x,transform:`scale(${O}, ${C})`}}}function E({searchQuery:P,onChange:y,data:T,panel:M}){const I=(0,r.of)(b),{value:x}=(0,o.A)(()=>l(T,M),[T,M]),S=D(P,x);return n.createElement("div",null,n.createElement(s.Ay,{disableHeight:!0,style:{width:"100%",height:"100%"}},({width:O})=>{if(!O)return null;O=O-1;const C=Math.floor(O/200),L=8*(C-1),U=Math.floor((O-L)/C);return n.createElement("div",null,n.createElement("div",{className:I.filterRow},n.createElement("div",{className:I.infoText},"Based on current data")),n.createElement("div",{className:I.grid,style:{gridTemplateColumns:`repeat(auto-fill, ${U}px)`}},S.map((R,B)=>n.createElement(m,{key:B,data:T,suggestion:R,onChange:y,width:U-1})),P&&S.length===0&&n.createElement("div",{className:I.infoText},"No results matched your query")))}))}function D(P,y){if(!P||!y)return y||[];const T=new RegExp(P,"i");return y.filter(M=>T.test(M.name)||T.test(M.pluginId))}const b=P=>({heading:(0,t.css)({...P.typography.h5,margin:P.spacing(0,.5,1)}),filterRow:(0,t.css)({display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center",paddingBottom:"8px"}),infoText:(0,t.css)({fontSize:P.typography.bodySmall.fontSize,color:P.colors.text.secondary,fontStyle:"italic"}),grid:(0,t.css)({display:"grid",gridGap:P.spacing(1),gridTemplateColumns:"repeat(auto-fill, 144px)",marginBottom:P.spacing(1),justifyContent:"space-evenly"})})},86292:(Y,A,e)=>{"use strict";e.d(A,{G:()=>d});var t=e(32196),n=e(96540),o=e(32264),s=e(40845),r=e(41670),g=e(17706),u=e(48889);function d({pluginId:l,searchQuery:f,onChange:c,isWidget:h=!1}){const p=(0,s.of)(i),m=(0,n.useMemo)(()=>o.$.featureToggles.vizAndWidgetSplit?h?(0,g.nr)():(0,g.if)():(0,g.A4)(),[h]),a=(0,n.useMemo)(()=>(0,g.CO)(m,f,l),[m,f,l]);return a.length===0?n.createElement(r.Z,null,"Could not find anything matching your query"):n.createElement("div",{className:p.grid},a.map(v=>n.createElement(u.f,{disabled:!1,key:v.id,isCurrent:v.id===l,plugin:v,onClick:E=>c({pluginId:v.id,withModKey:E.metaKey||E.ctrlKey||E.altKey})})))}const i=l=>({grid:(0,t.css)({maxWidth:"100%",display:"grid",gridGap:l.spacing(.5)}),heading:(0,t.css)({...l.typography.h5,margin:l.spacing(0,.5,1)})})},48889:(Y,A,e)=>{"use strict";e.d(A,{f:()=>o});var t=e(96540),n=e(25701);const o=({isCurrent:s,plugin:r,onClick:g,disabled:u})=>t.createElement(n.b,{title:r.name,plugin:r,description:r.info.description,onClick:g,isCurrent:s,disabled:u,showBadge:!0});o.displayName="VizTypePickerPlugin"},32349:(Y,A,e)=>{"use strict";e.d(A,{CH:()=>d,E7:()=>u,EO:()=>g});var t=e(14236),n=e(83195),o=e(92461),s=e(32023),r=e(6923);const g=i=>{const l=i.field.links;if(!(!l||l.length===0))return{getLinks:f=>{const c={};if(i.view){const{dataFrame:p}=i.view;c.__series={value:{name:p.name,refId:p.refId},text:"Series"};const m=i.colIndex!==void 0?p.fields[i.colIndex]:void 0;if(m){if(c.__field={value:{name:m.name,labels:m.labels},text:"Field"},i.rowIndex!==void 0&&i.rowIndex>=0){const{timeField:a}=(0,t.KR)(p);c.__value={value:{raw:m.values[i.rowIndex],numeric:i.display.numeric,text:(0,n.cN)(i.display),time:a?a.values[i.rowIndex]:void 0},text:"Value"}}i.view&&(c.__data={value:{name:p.name,refId:p.refId,fields:(0,o.F)({frame:p,rowIndex:i.rowIndex})},text:"Data"})}else c.__value={value:{raw:i.display.numeric,numeric:i.display.numeric,text:(0,n.cN)(i.display),calc:i.name},text:"Value"}}else console.log("VALUE",i);const h=(p,m,a)=>{const v={...c,...m};return f(p,v,a)};return l.map(p=>(0,r.mQ)().getDataLinkUIModel(p,h,i))}}},u=(i,l)=>{const f=i.links;if(!(!f||f.length===0))return{getLinks:()=>f.map(c=>(0,r.mQ)().getDataLinkUIModel(c,l||i.replaceVariables,i))}},d=(i,l)=>{const f=s.b.getPanelLinks(i).state.rawLinks;if(!(!f||f.length===0))return{getLinks:()=>f.map(c=>(0,r.mQ)().getDataLinkUIModel(c,l,i))}}},6923:(Y,A,e)=>{"use strict";e.d(A,{Fq:()=>E,Hf:()=>P,mQ:()=>x});var t=e(2543),n=e.n(t),o=e(6709),s=e(91890),r=e(28240),g=e(11261),u=e(71733),d=e(40672),i=e(76885),l=e(95344),f=e(72574),c=e(52622),h=e(2913);const p=[{value:`${o.c.keepTime}`,label:"Time range",documentation:"Adds current time range",origin:s.$0.BuiltIn},{value:`${o.c.timeRangeFrom}`,label:"Time range: from",documentation:"Adds current time range's from value",origin:s.$0.BuiltIn},{value:`${o.c.timeRangeTo}`,label:"Time range: to",documentation:"Adds current time range's to value",origin:s.$0.BuiltIn}],m=[{value:`${o.c.seriesName}`,label:"Name",documentation:"Name of the series",origin:s.$0.Series}],a=[{value:`${o.c.valueNumeric}`,label:"Numeric",documentation:"Numeric representation of selected value",origin:s.$0.Value},{value:`${o.c.valueText}`,label:"Text",documentation:"Text representation of selected value",origin:s.$0.Value},{value:`${o.c.valueRaw}`,label:"Raw",documentation:"Raw value",origin:s.$0.Value}],v=S=>S.includes(".")||S.trim().includes(" ")?`["${S}"]`:`.${S}`,E=()=>[...(0,f.w)().getVariables().map(S=>({value:S.name,label:S.name,origin:s.$0.Template})),{value:`${o.c.includeVars}`,label:"All variables",documentation:"Adds current variables",origin:s.$0.Template},...p],D=S=>{const O=[];for(const L of S)for(const U of L.fields)if(U.labels)for(const R of Object.keys(U.labels))O.push(R);const C=(0,t.chain)(O).flatten().uniq().value();return[{value:`${o.c.fieldName}`,label:"Name",documentation:"Field name of the clicked datapoint (in ms epoch)",origin:s.$0.Field},...C.map(L=>({value:`__field.labels${v(L)}`,label:`labels.${L}`,documentation:`${L} label value`,origin:s.$0.Field}))]},b=S=>{let O,C;const L=[],U={};if(S.length!==1)return[];const R=S[0];for(const B of R.fields){const H=(0,r.Ct)(B,R,S);U[H]||(L.push({value:`__data.fields${v(H)}`,label:`${H}`,documentation:`Formatted value for ${H} on the same row`,origin:s.$0.Fields}),U[H]=!0,!O&&B.type===g.PU.number&&(O={...B,name:H}),!C&&B.config.displayName&&B.config.displayName!==B.name&&(C={...B,name:H}))}return L.length&&L.push({value:"__data.fields[0]",label:"Select by index",documentation:"Enter the field order",origin:s.$0.Fields}),O&&(L.push({value:`__data.fields${v(O.name)}.numeric`,label:"Show numeric value",documentation:"the numeric field value",origin:s.$0.Fields}),L.push({value:`__data.fields${v(O.name)}.text`,label:"Show text value",documentation:"the text value",origin:s.$0.Fields})),C&&L.push({value:`__data.fields${v(C.name)}`,label:"Select by title",documentation:"Use the title to pick the field",origin:s.$0.Fields}),L},P=(S,O)=>{const C={value:`${o.c.valueTime}`,label:"Time",documentation:"Time value of the clicked datapoint (in ms epoch)",origin:s.$0.Value};return O===s.uP.Values?[...m,...D(S),...a,C,...b(S),...E()]:[...m,...D(S),...b(S),...E()]},y=S=>{const O=D(S),C={value:`${DataLinkBuiltInVars.valueCalc}`,label:"Calculation name",documentation:"Name of the calculation the value is a result of",origin:VariableOrigin.Value};return[...m,...O,...a,C,...E()]};class T{constructor(){this.getDataLinkUIModel=(O,C,L)=>{let U=O.url;O.onBuildUrl&&(U=O.onBuildUrl({origin:L,replaceVariables:C}));const R={href:u.I.assureBaseUrl(U.replace(/\n/g,"")),title:O.title??"",target:O.targetBlank?"_blank":void 0,origin:L};return C&&(R.href=C(R.href,void 0,c.$m.UriEncode),R.title=C(O.title)),O.onClick&&(R.onClick=B=>{O.onClick({origin:L,replaceVariables:C,e:B})}),R.href=(0,h.zj)().disableSanitizeHtml?R.href:d.sQ.sanitizeUrl(R.href),R}}getLinkUrl(O){let C={};O.keepTime&&(C[`$${o.c.keepTime}`]=!0),O.includeVars&&(C[`$${o.c.includeVars}`]=!0);let L=u.I.assureBaseUrl(i.kM.appendQueryToUrl(O.url||"",i.kM.toUrlParams(C)));return L=(0,f.w)().replace(L),(0,h.zj)().disableSanitizeHtml?L:d.sQ.sanitizeUrl(L)}getAnchorInfo(O){const C=(0,f.w)();return{href:this.getLinkUrl(O),title:C.replace(O.title||""),tooltip:C.replace(O.tooltip||"")}}getPanelLinkAnchorInfo(O,C){(0,l.l)("link_srv.ts","getPanelLinkAnchorInfo","getDataLinkUIModel");const L=(U,R,B)=>(0,f.w)().replace(U,{...C,...R},B);return this.getDataLinkUIModel(O,L,{})}}let M;function I(S){M=S}function x(){return M||(M=new T),M}},79971:(Y,A,e)=>{"use strict";e.d(A,{Ap:()=>u,O6:()=>d,Xk:()=>l,gW:()=>i});var t=e(581),n=e(57767),o=e(41394),s=e(20701),r=e(28444),g=e(80095);function u(c){return async(h,p)=>{if(c.libraryPanel?.uid&&!("model"in c.libraryPanel)){h(f(c));return}let m=c.type,a=p().plugins.panels[m];if(!a)try{a=await h((0,s.y7)(m))}catch{a=(0,o.$)(m,m==="row")}c.plugin||await c.pluginLoaded(a),h((0,g.XM)({key:c.key,plugin:a}))}}function d(c){return h=>{h((0,g.FC)({key:c}))}}function i({panel:c,pluginId:h,options:p,fieldConfig:m,transformations:a}){return async(v,E)=>{if(c.type===h&&!p&&!m&&!a)return;let b=E().plugins.panels[h];if(b||(b=await v((0,s.y7)(h))),c.type!==h&&c.changePlugin(b),p||m||a){const P=(0,t.F)({plugin:b,currentOptions:p||c.options,currentFieldConfig:m||c.fieldConfig,isAfterPluginChange:!1});c.options=P.options,c.fieldConfig=P.fieldConfig,c.transformations=a||c.transformations,c.configRev++}c.generateNewKey(),v((0,g.XM)({key:c.key,plugin:b}))}}function l(c,h){return async(p,m)=>{const a=h.model.type,v=c.type;if(c.restoreModel({...h.model,gridPos:c.gridPos,id:c.id,libraryPanel:h}),c.getQueryRunner().clearLastResult(),v!==a){let D=m().plugins.panels[a];D||(D=await p((0,s.y7)(a))),await c.pluginLoaded(D),c.generateNewKey(),await p((0,g.XM)({key:c.key,plugin:D}))}else{const E=c.key;c.generateNewKey(),p((0,g.io)({oldKey:E,newKey:c.key}))}c.configRev=0,c.hasSavedPanelEditChange=!0,c.refresh(),c.events.publish(r.zq),c.events.publish(r.PR)}}function f(c){return async(h,p)=>{const m=c.libraryPanel.uid;try{const a=await(0,n.Yr)(m,!0);c.initLibraryPanel(a);const v=p().dashboard.getModel();if(c.repeat&&v){const E=v.panels.findIndex(D=>D.id===c.id);v.repeatPanel(c,E),v.sortPanelsByGridPos(),v.events.publish(new r.Q$)}await h(u(c))}catch(a){console.log("ERROR: ",a),h((0,g.XM)({key:c.key,plugin:(0,o.$)("Unable to load library panel: "+m,!1)}))}}}},80095:(Y,A,e)=>{"use strict";e.d(A,{Ay:()=>f,FC:()=>d,S3:()=>r,XM:()=>s,io:()=>u,nF:()=>g,rG:()=>i});var t=e(30038);const n={},o=(0,t.Z0)({name:"panels",initialState:n,reducers:{panelModelAndPluginReady:(c,h)=>{c[h.payload.key]={plugin:h.payload.plugin}},changePanelKey:(c,h)=>{c[h.payload.newKey]=c[h.payload.oldKey],delete c[h.payload.oldKey]},removePanel:(c,h)=>{delete c[h.payload.key]},removeAllPanels:c=>{Object.keys(c).forEach(h=>delete c[h])},setPanelInstanceState:(c,h)=>{c[h.payload.key].instanceState=h.payload.value},setPanelAngularComponent:(c,h)=>{const p=c[h.payload.key];p.angularComponent=h.payload.angularComponent}}}),{panelModelAndPluginReady:s,setPanelAngularComponent:r,setPanelInstanceState:g,changePanelKey:u,removePanel:d,removeAllPanels:i}=o.actions,f={panels:o.reducer}},40334:(Y,A,e)=>{"use strict";e.d(A,{U:()=>t});function t(n,o){return n.panels[o.key]}},17706:(Y,A,e)=>{"use strict";e.d(A,{A4:()=>s,CO:()=>u,if:()=>g,nr:()=>r});var t=e(43429),n=e(54479),o=e(2913);function s(){const d=o.$W.panels;return Object.keys(d).filter(i=>d[i].hideFromList===!1).map(i=>d[i]).sort((i,l)=>i.sort-l.sort)}function r(){return s().filter(d=>!!d.skipDataQuery)}function g(){return s().filter(d=>!d.skipDataQuery)}function u(d,i,l){if(!i.length)return d.filter(m=>m.state===t.pn.deprecated?l===m.id:!0);const f=(0,n.xb)(i).toLowerCase(),c=[],h=[],p="graph".startsWith(f);for(const m of d){if(m.state===t.pn.deprecated&&l!==m.id)continue;const v=m.name.toLowerCase().indexOf(f);v===0?c.push(m):v>0?h.push(m):p&&m.id==="timeseries"&&c.push(m)}return c.concat(h)}},2609:(Y,A,e)=>{"use strict";e.d(A,{_o:()=>l});var t=e(2543),n=e.n(t),o=e(71733),s=e(76885),r=e(65879),g=e(12131),u=e(86022);const d={kiosk:!0,autofitpanels:!0,orgId:!0};class i{constructor(){this.urls=[],this.index=0,this.numberOfLoops=0,this.isPlaying=!1,this.locationUpdated=this.locationUpdated.bind(this),this.api=(0,u.NF)()}next(){if(clearTimeout(this.nextTimeoutId),this.index>this.urls.length-1){if(this.numberOfLoops++,this.numberOfLoops>=3){window.location.href=this.startUrl;return}this.index=0}const h=this.urls[this.index],p=g.Ny.getSearchObject(),m=(0,t.pickBy)(p,(v,E)=>d[E]),a=o.I.stripBaseFromUrl(h);this.index++,this.validPlaylistUrl=a,this.nextTimeoutId=setTimeout(()=>this.next(),this.interval),g.Ny.push(a+"?"+s.kM.toUrlParams(m))}prev(){this.index=Math.max(this.index-2,0),this.next()}locationUpdated(c){c.pathname!==this.validPlaylistUrl&&this.stop()}async start(c){this.stop(),this.startUrl=window.location.href,this.index=0,this.isPlaying=!0,this.locationListenerUnsub=g.Ny.getHistory().listen(this.locationUpdated);const h=[];let p=await this.api.getPlaylist(c);if(!p.items?.length)return;this.interval=r.intervalToMs(p.interval);const m=await(0,u.qY)(p.items);for(const a of m)if(a.dashboards)for(const v of a.dashboards)h.push(v.url);h.length&&(this.urls=h,this.isPlaying=!0,this.next())}stop(){this.isPlaying&&(this.index=0,this.isPlaying=!1,this.locationListenerUnsub&&this.locationListenerUnsub(),this.nextTimeoutId&&clearTimeout(this.nextTimeoutId),g.Ny.getSearchObject().kiosk&&g.Ny.partial({kiosk:null}))}}const l=new i},86022:(Y,A,e)=>{"use strict";e.d(A,{GM:()=>E,NF:()=>D,aV:()=>v,qY:()=>a});var t=e(75505),n=e(78368),o=e(17172),s=e(32264),r=e(82467),g=e(3169),u=e(90183),d=e(68706),i=e(99140),l=e(24439);class f{async getAllPlaylist(){return(0,o.AI)().get("/api/playlists/")}async getPlaylist(P){const y=await(0,o.AI)().get(`/api/playlists/${P}`);return await p(y),y}async createPlaylist(P){await m(()=>(0,o.AI)().post("/api/playlists",P))}async updatePlaylist(P){await m(()=>(0,o.AI)().put(`/api/playlists/${P.uid}`,P))}async deletePlaylist(P){await m(()=>(0,o.AI)().delete(`/api/playlists/${P}`),"Playlist deleted")}}class c{constructor(){this.apiVersion="playlist.grafana.app/v0alpha1",this.playlistAsK8sResource=P=>({apiVersion:this.apiVersion,kind:"Playlist",metadata:{name:P.uid},spec:{title:P.name,interval:P.interval,items:P.items??[]}}),this.url=`/apis/${this.apiVersion}/namespaces/${s.$.namespace}/playlists`}async getAllPlaylist(){return(await(0,o.AI)().get(this.url)).items.map(h)}async getPlaylist(P){const y=await(0,o.AI)().get(this.url+"/"+P),T=h(y);return await p(T),T}async createPlaylist(P){const y=this.playlistAsK8sResource(P);await m(()=>(0,o.AI)().post(this.url,y))}async updatePlaylist(P){const y=this.playlistAsK8sResource(P);await m(()=>(0,o.AI)().put(`${this.url}/${P.uid}`,y))}async deletePlaylist(P){await m(()=>(0,o.AI)().delete(`${this.url}/${P}`),"Playlist deleted")}}function h(b){const{spec:P,metadata:y}=b;return{uid:y.name,name:P.title,interval:P.interval,items:P.items}}async function p(b){if(b?.items){for(const P of b.items)if(P.type==="dashboard_by_id"){P.type="dashboard_by_uid";const y=await(0,o.AI)().get(`/api/dashboards/ids/${P.value}`);y?.length&&(P.value=y[0])}}}async function m(b,P="Playlist saved"){try{await b(),(0,i.JD)((0,r.dx)((0,g.tZ)(P)))}catch(y){y instanceof Error&&(0,i.JD)((0,r.dx)((0,g.gi)("Unable to save playlist",y)))}}async function a(b){let P=0;if(!b?.length)return[];const y=[];for(const I of b){const x={query:"*",kind:["dashboard"],limit:1e3};switch(I.type){case"dashboard_by_id":throw new Error("invalid item (with id)");case"dashboard_by_uid":x.uid=[I.value];break;case"dashboard_by_tag":x.tags=[I.value];break}y.push({refId:`${P++}`,queryType:d.nj.Search,search:x})}if(!s.$.featureToggles.panelTitleSearch){const I=(0,l.getGrafanaSearcher)(),x=[];for(let S=0;S<y.length;S++){const O=(await I.search(y[S].search)).view;x.push({...b[S],dashboards:O.map(C=>({...C}))})}return x}const T=await(0,u.o)(),M=await(0,t.s)(T.query({targets:y}));if(M.data.length!==b.length)throw new Error("unexpected result size");return b.map((I,x)=>{const S=new n.R(M.data[x]);return{...I,dashboards:S.map(O=>({...O}))}})}function v(){return{items:[],interval:"5m",name:"",uid:""}}function E(b,P){return P?.length?(P=P.toLowerCase(),b.filter(y=>y.name.toLowerCase().includes(P))):b}function D(){return s.$.featureToggles.kubernetesPlaylists?new c:new f}},84684:(Y,A,e)=>{"use strict";e.d(A,{Ap:()=>h,Bj:()=>d,CB:()=>g,Gd:()=>c,T_:()=>u,cu:()=>m,ij:()=>a,xZ:()=>p});var t=e(36663),n=e(17172),o=e(80714),s=e(6745),r=e(5129);async function g(E){const D=await i(E),b=!!D,[P,y,T]=await Promise.all([c(),l(E,b),f(E)]),M=P.find(x=>x.id===E),I=M?.dependencies||D?.json?.dependencies;return{grafanaDependency:I?.grafanaDependency??I?.grafanaVersion??"",pluginDependencies:I?.plugins||[],links:M?.info.links||D?.json?.info.links||[],readme:T||D?.readme,versions:y,statusContext:D?.statusContext??"",iam:D?.json?.iam}}async function u(){try{const{items:E}=await(0,n.AI)().get(`${s.P5}/plugins`,{includeDeprecated:!0});return E.filter(r.hY)}catch(E){if((0,n.NF)(E))return E.isHandled=!0,console.error("Failed to fetch plugins from catalog (default https://grafana.com/api/plugins)"),[];throw E}}async function d(){try{return await(0,n.AI)().get(`${s.Sw}/errors`)}catch{return[]}}async function i(E){try{return await(0,n.AI)().get(`${s.P5}/plugins/${E}`,{})}catch(D){(0,n.NF)(D)&&(D.isHandled=!0);return}}async function l(E,D){try{return D?((await(0,n.AI)().get(`${s.P5}/plugins/${E}/versions`)).items||[]).map(P=>({version:P.version,createdAt:P.createdAt,isCompatible:P.isCompatible,grafanaDependency:P.grafanaDependency})):[]}catch(b){return(0,n.NF)(b)&&(b.isHandled=!0),[]}}async function f(E){try{const D=await(0,n.AI)().get(`${s.Sw}/${E}/markdown/README`);return D?(0,t.G)(D):""}catch(D){return(0,n.NF)(D)&&(D.isHandled=!0),""}}async function c(){return(await(0,n.AI)().get(`${s.Sw}`,(0,o.F)({embedded:0}))).filter(r.Sq)}async function h(){const{items:E}=await(0,n.AI)().get(`${s.Mi}/plugins`);return E}async function p(E){return await(0,n.AI)().post(`${s.Sw}/${E}/install`,void 0,{showErrorAlert:!1})}async function m(E){return await(0,n.AI)().post(`${s.Sw}/${E}/uninstall`)}async function a(E,D){return(await(0,n.AI)().datasourceRequest({url:`/api/plugins/${E}/settings`,method:"POST",data:D}))?.data}const v={getRemotePlugins:u,getInstalledPlugins:c,installPlugin:p,uninstallPlugin:m}},42930:(Y,A,e)=>{"use strict";e.d(A,{G:()=>s});var t=e(32196),n=e(96540),o=e(40845);const s=({children:g,wrap:u,className:d})=>{const i=(0,o.$j)(),l=r(i,u);return n.createElement("div",{className:(0,t.cx)(l.container,d)},g)},r=(g,u)=>({container:(0,t.css)`
    display: flex;
    flex-direction: row;
    flex-wrap: ${u?"wrap":"no-wrap"};
    & > * {
      margin-bottom: ${g.spacing()};
      margin-right: ${g.spacing()};
    }
    & > *:last-child {
      margin-right: 0;
    }
  `})},6745:(Y,A,e)=>{"use strict";e.d(A,{Mi:()=>n,P5:()=>o,Sw:()=>t,fu:()=>s});const t="/api/plugins",n="/api/instance",o="/api/gnet",s="plugins"},5129:(Y,A,e)=>{"use strict";e.d(A,{Gl:()=>y,H2:()=>a,N6:()=>M,Sq:()=>I,TD:()=>R,Xc:()=>E,by:()=>v,hY:()=>x,j_:()=>T,kH:()=>p,td:()=>f,tr:()=>P});var t=e(53076),n=e(43429),o=e(53531),s=e(32264),r=e(33378),g=e(2913),u=e(10096),d=e(27677),i=e(80348),l=e(66253);function f({local:B=[],remote:H=[],instance:W=[],pluginErrors:N}){const V=[],G=D(N),_=W.reduce((K,j)=>(K.add(j.pluginSlug),K),new Set);return B.forEach(K=>{const j=H.find(Q=>Q.slug===K.id),k=G[K.id];j||V.push(c(K,void 0,k))}),H.forEach(K=>{const j=B.find(ee=>ee.id===K.slug),k=G[K.slug];if(!(K.status===l.Uy.Deprecated&&!j)){const ee=c(j,K,k);g.Ay.featureToggles.managedPluginsInstall&&s.$.pluginAdminExternalManageEnabled&&(ee.isFullyInstalled=ee.isCore?!0:_.has(K.slug)&&ee.isInstalled,ee.isInstalled=_.has(K.slug)||ee.isInstalled),V.push(ee)}}),V}function c(B,H,W){return!B&&H?h(H,W):B&&!H?p(B,W):m(B,H,W)}function h(B,H){const{name:W,slug:N,description:V,version:G,orgName:_,popularity:K,downloads:j,typeCode:k,updatedAt:Q,createdAt:ee,status:ae,angularDetected:Z,keywords:ne}=B,q=!!H||O(k);return{description:V,downloads:j,id:N,info:{logos:{small:`https://grafana.com/api/plugins/${N}/versions/${G}/logos/small`,large:`https://grafana.com/api/plugins/${N}/versions/${G}/logos/large`},keywords:ne},name:W,orgName:_,popularity:K,publishedAt:ee,signature:b({remote:B,error:H}),updatedAt:Q,hasUpdate:!1,isPublished:!0,isInstalled:q,isDisabled:q,isDeprecated:ae===l.Uy.Deprecated,isCore:B.internal,isDev:!1,isEnterprise:ae===l.Uy.Enterprise,type:k,error:H?.errorCode,angularDetected:Z,isFullyInstalled:q}}function p(B,H){const{name:W,info:{description:N,version:V,logos:G,updated:_,author:K,keywords:j},id:k,dev:Q,type:ee,signature:ae,signatureOrg:Z,signatureType:ne,hasUpdate:q,accessControl:te,angularDetected:re}=B,de=!!H||O(ee);return{description:N,downloads:0,id:k,info:{logos:G,keywords:j},name:W,orgName:K.name,popularity:0,publishedAt:"",signature:b({local:B,error:H}),signatureOrg:Z,signatureType:ne,updatedAt:_,installedVersion:V,hasUpdate:q,isInstalled:!0,isDisabled:de,isCore:ae==="internal",isPublished:!1,isDeprecated:!1,isDev:!!Q,isEnterprise:!1,type:ee,error:H?.errorCode,accessControl:te,angularDetected:re,isFullyInstalled:!0,iam:B.iam}}function m(B,H,W){const N=B?.info.version,V=H?.slug||B?.id||"",G=B?.type||H?.typeCode,_=!!W||O(G),K=H?.keywords||B?.info.keywords||[];let j={small:`/public/img/icn-${G}.svg`,large:`/public/img/icn-${G}.svg`};return H?j={small:`https://grafana.com/api/plugins/${V}/versions/${H.version}/logos/small`,large:`https://grafana.com/api/plugins/${V}/versions/${H.version}/logos/large`}:B&&B.info.logos&&(j=B.info.logos),{description:B?.info.description||H?.description||"",downloads:H?.downloads||0,hasUpdate:B?.hasUpdate||!1,id:V,info:{logos:j,keywords:K},isCore:!!(H?.internal||B?.signature===n.Ac.internal),isDev:!!B?.dev,isEnterprise:H?.status===l.Uy.Enterprise,isInstalled:!!B||_,isDisabled:_,isDeprecated:H?.status===l.Uy.Deprecated,isPublished:!0,name:H?.name||B?.name||"",orgName:H?.orgName||B?.info.author.name||"",popularity:H?.popularity||0,publishedAt:H?.createdAt||"",type:G,signature:b({local:B,remote:H,error:W}),signatureOrg:B?.signatureOrg||H?.versionSignedByOrgName,signatureType:B?.signatureType||H?.versionSignatureType||H?.signatureType||void 0,updatedAt:H?.updatedAt||B?.info.updated||"",installedVersion:N,error:W?.errorCode,accessControl:B?.accessControl,angularDetected:B?.angularDetected||H?.angularDetected,isFullyInstalled:!!B||_,iam:B?.iam}}const a=B=>`${s.$.pluginCatalogURL}${B}`;var v=(B=>(B.nameAsc="nameAsc",B.nameDesc="nameDesc",B.updated="updated",B.published="published",B.downloads="downloads",B))(v||{});const E=(B,H)=>{const W={nameAsc:(N,V)=>N.name.localeCompare(V.name),nameDesc:(N,V)=>V.name.localeCompare(N.name),updated:(N,V)=>(0,o.b)(V.updatedAt).valueOf()-(0,o.b)(N.updatedAt).valueOf(),published:(N,V)=>(0,o.b)(V.publishedAt).valueOf()-(0,o.b)(N.publishedAt).valueOf(),downloads:(N,V)=>V.downloads-N.downloads};return W[H]?B.sort(W[H]):B};function D(B=[]){return B.reduce((H,W)=>(H[W.pluginId]=W,H),{})}function b(B){const{error:H,local:W,remote:N}=B;if(H)switch(H.errorCode){case n.ZK.invalidSignature:return n.Ac.invalid;case n.ZK.missingSignature:return n.Ac.missing;case n.ZK.modifiedSignature:return n.Ac.modified}return W?.signature?W.signature:N?.signatureType&&N?.versionSignatureType?n.Ac.valid:n.Ac.missing}const P=()=>(0,d.AI)().get("/api/frontend/settings").then(B=>{s.$.panels=B.panels});function y(B){if(!B)return;const[H]=B.filter(W=>!!W.isCompatible);return H}const T=()=>s.$.pluginAdminEnabled,M=(B,H,W)=>{const N=s.$.pluginAdminExternalManageEnabled,V=u.TP.hasPermission(i.AccessControlAction.PluginsInstall),G=!!W;return B.type===n.QE.renderer||B.type===n.QE.secretsmanager||B.isEnterprise&&!(0,r.a)("enterprise.plugins")||B.isDev||!V&&!N||!B.isPublished||!G||!H},I=B=>S(B.id),x=B=>S(B.slug);function S(B){const{pluginCatalogHiddenPlugins:H}=s.$;return!H.includes(B)}function O(B){return B===n.QE.secretsmanager&&!s.$.secretsManagerPluginEnabled}function C(B){return B?.signature==="internal"}function L(B){return B.split(" - ")[0]}function U(B){return B.reduce((H,{id:W,name:N,type:V,orgName:G,info:_})=>{const K=_.keywords?.join(" ").toLowerCase(),j=`${W} - ${N} - ${V} - ${G} - ${K}`;return H.push(j),H},[])}function R(B,H){const W=U(B);let V=new t.A({}).filter(W,H);return V===null?null:V.map(G=>L(W[G]))}},20701:(Y,A,e)=>{"use strict";e.d(A,{JC:()=>x,JJ:()=>E,LR:()=>v,NJ:()=>O,aU:()=>b,ai:()=>M,h9:()=>S,mj:()=>a,nT:()=>I,t5:()=>D,y7:()=>C});var t=e(30038),n=e(65474),o=e(62467),s=e(66847),r=e(45650),g=e(90593),u=e(75505),d=e(32264),i=e(17172),l=e(2913),f=e(15162),c=e(81900),h=e(84684),p=e(6745),m=e(5129);const a=(0,t.zD)(`${p.fu}/fetchAll`,async(L,U)=>{try{U.dispatch({type:`${p.fu}/fetchLocal/pending`}),U.dispatch({type:`${p.fu}/fetchRemote/pending`});const R=d.$.pluginAdminExternalManageEnabled&&l.Ay.featureToggles.managedPluginsInstall?(0,n.H)((0,h.Ap)()):(0,o.of)(void 0),B=500,H=(0,n.H)((0,h.Bj)()),W=(0,n.H)((0,h.Gd)()),N=(0,n.H)((0,h.T_)()).pipe((0,s.W)(V=>(U.dispatch({type:`${p.fu}/fetchRemote/rejected`}),console.error(V),(0,o.of)([]))));return(0,r.p)({local:W,remote:N,instance:R,pluginErrors:H}).pipe((0,g.w)({each:B,with:()=>(N.subscribe(async V=>{if(U.dispatch({type:`${p.fu}/fetchRemote/fulfilled`}),V.length>0){const G=await(0,u.s)(W),_=await(0,u.s)(R),K=await(0,u.s)(H);U.dispatch(b((0,m.td)({local:G,remote:V,instance:_,pluginErrors:K})))}}),(0,r.p)({local:W,instance:R,pluginErrors:H}))})).subscribe(({local:V,remote:G,instance:_,pluginErrors:K})=>{V&&G?(U.dispatch({type:`${p.fu}/fetchLocal/fulfilled`}),U.dispatch({type:`${p.fu}/fetchRemote/fulfilled`}),U.dispatch(b((0,m.td)({local:V,remote:G,instance:_,pluginErrors:K})))):V&&(U.dispatch({type:`${p.fu}/fetchLocal/fulfilled`}),U.dispatch(b((0,m.td)({local:V,pluginErrors:K}))))},V=>(console.log(V),U.dispatch({type:`${p.fu}/fetchLocal/rejected`}),U.dispatch({type:`${p.fu}/fetchRemote/rejected`}),U.rejectWithValue("Unknown error."))),null}catch{return U.rejectWithValue("Unknown error.")}}),v=(0,t.zD)(`${p.fu}/fetchAllLocal`,async(L,U)=>{try{return(await(0,h.Gd)()).map(B=>(0,m.kH)(B))}catch{return U.rejectWithValue("Unknown error.")}}),E=(0,t.zD)(`${p.fu}/fetchRemotePlugins`,async(L,U)=>{try{return await(0,h.T_)()}catch(R){return(0,i.NF)(R)&&(R.isHandled=!0),U.rejectWithValue([])}}),D=(0,t.zD)(`${p.fu}/fetchDetails`,async(L,U)=>{try{const R=await(0,h.CB)(L);return{id:L,changes:{details:R}}}catch{return U.rejectWithValue("Unknown error.")}}),b=(0,t.VP)(`${p.fu}/addPlugins`),P=(0,t.VP)(`${p.fu}/addLocalPlugins`),y=(0,t.VP)(`${p.fu}/addLocalPlugins`),T=(0,t.VP)(`${p.fu}/addLocalPlugins`),M=(0,t.zD)(`${p.fu}/install`,async({id:L,version:U,isUpdating:R=!1},B)=>{const H=R?{isInstalled:!0,installedVersion:U,hasUpdate:!1}:{isInstalled:!0,installedVersion:U};try{return await(0,h.xZ)(L),await(0,m.tr)(),R&&(0,c.sk)(L),{id:L,changes:H}}catch(W){return console.error(W),(0,i.NF)(W)?B.rejectWithValue(W.data):B.rejectWithValue("Unknown error.")}}),I=(0,t.zD)(`${p.fu}/install`,async()=>({})),x=(0,t.zD)(`${p.fu}/uninstall`,async(L,U)=>{try{return await(0,h.cu)(L),await(0,m.tr)(),(0,c.sk)(L),{id:L,changes:{isInstalled:!1,installedVersion:void 0}}}catch(R){return console.error(R),U.rejectWithValue("Unknown error.")}}),S=(0,t.zD)(`${p.fu}/loadPluginDashboards`,async(L,U)=>{const H=`api/plugins/${U.getState().dataSources.dataSource.type}/dashboards`;return(0,i.AI)().get(H)}),O=(0,t.VP)(`${p.fu}/panelPluginLoaded`),C=L=>async(U,R)=>{let B=R().plugins.panels[L];return B||(B=await(0,f.TV)(L),R().plugins.panels[L]||U(O(B))),B}},31326:(Y,A,e)=>{"use strict";e.d(A,{AI:()=>r,Ff:()=>h,qo:()=>c});var t=e(30038),n=e(6745),o=e(66253),s=e(20701);const r=(0,t.pU)(),g=p=>new RegExp(`${n.fu}/(.*)/pending`).test(p.type),u=p=>new RegExp(`${n.fu}/(.*)/fulfilled`).test(p.type),d=p=>new RegExp(`${n.fu}/(.*)/rejected`).test(p.type),i=p=>{const m=p.lastIndexOf("/");return p.substring(0,m)},l={items:r.getInitialState(),requests:{},settings:{displayMode:o.fy.Grid},plugins:[],errors:[],searchQuery:"",hasFetched:!1,dashboards:[],isLoadingPluginDashboards:!1,panels:{}},f=(0,t.Z0)({name:"plugins",initialState:l,reducers:{setDisplayMode(p,m){p.settings.displayMode=m.payload}},extraReducers:p=>p.addCase(s.aU,(m,a)=>{r.upsertMany(m.items,a.payload)}).addCase(s.LR.fulfilled,(m,a)=>{r.upsertMany(m.items,a.payload)}).addCase(s.t5.fulfilled,(m,a)=>{r.updateOne(m.items,a.payload)}).addCase(s.ai.fulfilled,(m,a)=>{r.updateOne(m.items,a.payload)}).addCase(s.JC.fulfilled,(m,a)=>{r.updateOne(m.items,a.payload)}).addCase(s.NJ,(m,a)=>{m.panels[a.payload.meta.id]=a.payload}).addCase(s.h9.pending,(m,a)=>{m.isLoadingPluginDashboards=!0,m.dashboards=[]}).addCase(s.h9.fulfilled,(m,a)=>{m.isLoadingPluginDashboards=!1,m.dashboards=a.payload}).addMatcher(g,(m,a)=>{m.requests[i(a.type)]={status:o.IZ.Pending}}).addMatcher(u,(m,a)=>{m.requests[i(a.type)]={status:o.IZ.Fulfilled}}).addMatcher(d,(m,a)=>{m.requests[i(a.type)]={status:o.IZ.Rejected,error:a.payload}})}),{setDisplayMode:c}=f.actions,h=f.reducer},66253:(Y,A,e)=>{"use strict";e.d(A,{IZ:()=>d,Ip:()=>o,LZ:()=>u,Uy:()=>s,fy:()=>t,og:()=>g,u8:()=>r,vk:()=>n});var t=(i=>(i.Grid="grid",i.List="list",i))(t||{}),n=(i=>(i.Home="plugins-home",i.Browse="plugins-browse",i.Details="plugins-details",i))(n||{}),o=(i=>(i.app="apps",i.datasource="database",i.panel="credit-card",i.renderer="capture",i.secretsmanager="key-skeleton-alt",i))(o||{}),s=(i=>(i.Deleted="deleted",i.Active="active",i.Pending="pending",i.Deprecated="deprecated",i.Enterprise="enterprise",i))(s||{}),r=(i=>(i.INSTALL="INSTALL",i.UNINSTALL="UNINSTALL",i.UPDATE="UPDATE",i.REINSTALL="REINSTALL",i))(r||{}),g=(i=>(i.OVERVIEW="Overview",i.VERSIONS="Version history",i.CONFIG="Config",i.DASHBOARDS="Dashboards",i.USAGE="Usage",i.IAM="IAM",i))(g||{}),u=(i=>(i.OVERVIEW="overview",i.VERSIONS="version-history",i.CONFIG="config",i.DASHBOARDS="dashboards",i.USAGE="usage",i.IAM="iam",i))(u||{}),d=(i=>(i.Pending="Pending",i.Fulfilled="Fulfilled",i.Rejected="Rejected",i))(d||{})},74106:(Y,A,e)=>{"use strict";e.d(A,{c:()=>g});var t=e(96540),n=e(43429),o=e(14110),s=e(42418);function r(u,d){let i;switch(u){case n.QE.app:i="app plugin";break;case n.QE.panel:i="panel plugin";break;case n.QE.datasource:i="data source plugin";break;default:i="plugin"}let l=`This ${i} uses a deprecated, legacy platform based on AngularJS and `;return d===void 0?l+" may be incompatible depending on your Grafana configuration.":d?l+" will stop working in future releases of Grafana.":l+" is incompatible with your current Grafana configuration."}function g(u){const{className:d,angularSupportEnabled:i,pluginId:l,pluginType:f,showPluginDetailsLink:c,interactionElementId:h}=u,[p,m]=(0,t.useState)(!1),a={};return l&&(a.pluginId=l),h&&(a.elementId=h),p?null:t.createElement(s.F,{severity:"warning",title:"Angular plugin",className:d,onRemove:()=>m(!0)},t.createElement("p",null,r(f,i)),t.createElement("div",{className:"markdown-html"},t.createElement("ul",null,t.createElement("li",null,t.createElement("a",{href:"https://grafana.com/docs/grafana/latest/developers/angular_deprecation/",className:"external-link",target:"_blank",rel:"noreferrer",onClick:()=>{(0,o.rR)("angular_deprecation_docs_clicked",a)}},"Read our deprecation notice and migration advice.")),c&&l?t.createElement("li",null,t.createElement("a",{href:`plugins/${encodeURIComponent(l)}`,className:"external-link",target:"_blank",rel:"noreferrer"},"View plugin details")):null)))}},8480:(Y,A,e)=>{"use strict";e.d(A,{H:()=>s});var t=e(32264);function n(r){return Object.values(t.$.datasources).find(g=>g.uid===r)??null}function o(r){return n(r)?.meta.angular?.detected??!1}function s(r){const g=n(r);return(g?.meta.angular?.detected&&!g?.meta.angular.hideDeprecation)??!1}},72798:(Y,A,e)=>{"use strict";e.d(A,{A:()=>n,S:()=>s});var t=e(96540);const n=t.createContext(o());n.displayName="PluginPageContext";function o(){return{sectionNav:{main:{text:"Plugin page"},node:{text:"Plugin page"}}}}function s(r){return{sectionNav:r??o().sectionNav}}},10803:(Y,A,e)=>{"use strict";e.d(A,{p:()=>s});var t=e(96540),n=e(43429),o=e(39938);const s=g=>{const u=r(g.state);return u?t.createElement(o.E,{className:g.className,color:u.color,title:u.tooltip,text:u.text,icon:u.icon}):null};function r(g){switch(g){case n.pn.deprecated:return{text:"Deprecated",color:"red",tooltip:"This feature is deprecated and will be removed in a future release"};case n.pn.alpha:return{text:"Alpha",color:"blue",tooltip:"This feature is experimental and future updates might not be backward compatible"};case n.pn.beta:return{text:"Beta",color:"blue",tooltip:"This feature is close to complete but not fully tested"};default:return null}}},31193:(Y,A,e)=>{"use strict";e.d(A,{tR:()=>v,xq:()=>p});var t=e(40187),n=e(26272),o=e(80147),s=e(72574),r=e(81634),g=e(17172),u=e(19347),d=e(26657),i=e(28138),l=e(2913),f=e(53478),c=e(66718),h=e(91629);class p{constructor(D=(0,s.w)()){this.templateSrv=D,this.datasources={},this.settingsMapByName={},this.settingsMapByUid={},this.settingsMapById={},this.defaultName=""}init(D,b){this.datasources={},this.settingsMapByUid={},this.settingsMapByName=D,this.defaultName=b;for(const P of Object.values(D))P.uid||(P.uid=P.name),this.settingsMapByUid[P.uid]=P,this.settingsMapById[P.id]=P;this.datasources[d.dR.type]=f.Ex,this.datasources[c.Uj]=f.Ex,this.settingsMapByUid[d.dR.uid]=f.$i,this.settingsMapByUid[c.Uj]=f.$i}getDataSourceSettingsByUid(D){return this.settingsMapByUid[D]}getInstanceSettings(D,b){let P=m(D);if((0,d.s9)(P))return f.$i;if(P==="default"||P==null)return this.settingsMapByUid[this.defaultName]??this.settingsMapByName[this.defaultName];if(P[0]==="$"){const y=this.templateSrv.replace(P,b,a);let T;return y==="default"?T=this.settingsMapByName[this.defaultName]:T=this.settingsMapByUid[y]??this.settingsMapByName[y],T?{...T,isDefault:!1,name:P,uid:P,rawRef:{type:T.type,uid:T.uid}}:void 0}return this.settingsMapByUid[P]??this.settingsMapByName[P]??this.settingsMapById[P]}get(D,b){let P=m(D);if(!P)return this.get(this.defaultName);if((0,d.s9)(D))return Promise.resolve(this.datasources[c.Uj]);const y=this.settingsMapByName[P];return y&&(P=y.uid),this.datasources[P]?Promise.resolve(this.datasources[P]):(P=this.templateSrv.replace(P,b,a),P==="default"&&this.defaultName!=="default"?this.get(this.defaultName):this.datasources[P]?Promise.resolve(this.datasources[P]):this.loadDatasource(P))}async loadDatasource(D){if(this.datasources[D])return Promise.resolve(this.datasources[D]);const b=this.getInstanceSettings(D);if(!b)return Promise.reject({message:`Datasource ${D} was not found`});try{const P=await(0,h.cS)(b.meta);if(this.datasources[D])return this.datasources[D];const y=P.DataSourceClass.length!==1;let T;if(y?T=(0,r.C)().instantiate(P.DataSourceClass,{instanceSettings:b}):T=new P.DataSourceClass(b),T.components=P.components,!(T instanceof t.mA)){const M=T;M.name=b.name,M.id=b.id,M.type=b.type,M.meta=b.meta,M.uid=b.uid,T.getRef=t.mA.prototype.getRef}return this.datasources[D]=T,this.datasources[T.uid]=T,T}catch(P){return P instanceof Error&&i.A.emit(n.r1.alertError,[b.name+" plugin failed",P.toString()]),Promise.reject({message:`Datasource: ${D} was not found`})}}getAll(){return Object.values(this.settingsMapByName)}getList(D={}){const b=Object.values(this.settingsMapByName).filter(y=>!(y.meta.id==="grafana"||y.meta.id==="mixed"||y.meta.id==="dashboard"||D.metrics&&!y.meta.metrics||D.tracing&&!y.meta.tracing||D.logs&&y.meta.category!=="logging"&&!y.meta.logs||D.annotations&&!y.meta.annotations||D.alerting&&!y.meta.alerting||D.pluginId&&!(0,o._)(D.pluginId,y.meta)||D.filter&&!D.filter(y)||D.type&&(Array.isArray(D.type)?!D.type.includes(y.type):D.type!==y.type)||!D.all&&y.meta.metrics!==!0&&y.meta.annotations!==!0&&y.meta.tracing!==!0&&y.meta.logs!==!0&&y.meta.alerting!==!0));if(D.variables)for(const y of this.templateSrv.getVariables()){if(y.type!=="datasource")continue;let T=y.current.value==="default"?this.defaultName:y.current.value;Array.isArray(T)&&T.length===1&&(T=T[0]);const M=!Array.isArray(T)&&(this.settingsMapByName[T]||this.settingsMapByUid[T]);if(M){const I=`\${${y.name}}`;b.push({...M,isDefault:!1,name:I,uid:I})}}const P=b.sort((y,T)=>y.name.toLowerCase()>T.name.toLowerCase()?1:y.name.toLowerCase()<T.name.toLowerCase()?-1:0);if(!D.pluginId&&!D.alerting){if(D.mixed){const y=this.getInstanceSettings("-- Mixed --");y&&b.push(y)}if(D.dashboard){const y=this.getInstanceSettings("-- Dashboard --");y&&b.push(y)}if(!D.tracing){const y=this.getInstanceSettings("-- Grafana --");y&&b.push(y)}}return P}getExternal(){return this.getList()}getAnnotationSources(){return this.getList({annotations:!0,variables:!0}).map(D=>({name:D.name,value:D.name,meta:D.meta}))}getMetricSources(D){return this.getList({metrics:!0,variables:!D?.skipVariables}).map(b=>({name:b.name,value:b.name,meta:b.meta}))}async reload(){const D=await(0,g.AI)().get("/api/frontend/settings");l.Ay.datasources=D.datasources,l.Ay.defaultDatasource=D.defaultDatasource,this.init(D.datasources,D.defaultDatasource)}}function m(E){return(0,d.s9)(E)?d.dR.uid:typeof E=="string"?E:E?.uid}function a(E){return Array.isArray(E)?E[0]:E}const v=()=>(0,u.l)()},75462:(Y,A,e)=>{"use strict";e.d(A,{$Y:()=>T,FF:()=>h,N9:()=>C,io:()=>x,nv:()=>E,ol:()=>b,pL:()=>O,yS:()=>m,yb:()=>v,yt:()=>P,z1:()=>p});var t=e(32196),n=e(2543),o=e.n(n),s=e(96540),r=e(16817),g=e(74135),u=e(13834),d=e(47232),i=e(37390),l=e(28138),f=e(27716),c=e(28444);function h(L){console.warn(`[Plugin Extensions] ${L}`)}function p(L){return typeof L=="object"&&"type"in L&&L.type===g.u.link}function m(L){return typeof L=="object"&&"type"in L&&L.type===g.u.component}function a(L,U=""){return(...R)=>{try{return L(...R)}catch(B){B instanceof Error&&console.warn(`${U}${B.message}`)}}}function v(L,U){return{openModal:async B=>{const{title:H,body:W,width:N,height:V}=B;l.A.publish(new c.S8({component:E(L,D({title:H,body:W,width:N,height:V}))}))},context:U}}const E=(L,U)=>B=>{const{error:H,loading:W,value:N}=(0,r.A)(()=>(0,f.x)(L,{showErrorAlert:!1}));return W?null:H?(h(`Could not fetch plugin meta information for "${L}", aborting. (${H.message})`),null):N?s.createElement(u.a,{meta:N},s.createElement(U,{...B})):(h(`Fetched plugin meta information is empty for "${L}", aborting.`),null)},D=({title:L,body:U,width:R,height:B})=>{const H=(0,t.css)({width:R,height:B});return({onDismiss:N})=>s.createElement(i.a,{title:L,className:H,isOpen:!0,onDismiss:N,onClickBackdrop:N},s.createElement(U,{onDismiss:N}))};function b(L,U=new Map){if(!L||typeof L!="object"||Object.isFrozen(L))return L;const R=Array.isArray(L)?[...L]:{...L};if(U.has(L))return U.get(L);U.set(L,R);const B=Reflect.ownKeys(R);for(const H of B){const W=Array.isArray(R)?R[Number(H)]:R[H];W&&(typeof W=="object"||typeof W=="function")&&(Array.isArray(R)?R[Number(H)]=b(W,U):R[H]=b(W,U))}return Object.freeze(R)}function P(L,U){const R=`${L}${U.extensionPointId}${U.title}`;return Array.from(R).reduce((B,H)=>Math.imul(31,B)+H.charCodeAt(0)|0,0).toString()}const y=Symbol("isReadOnlyProxy");function T(L){if(!L||typeof L!="object"||I(L))return L;const U=new WeakMap;return new Proxy(L,{defineProperty:()=>!1,deleteProperty:()=>!1,isExtensible:()=>!1,set:()=>!1,get(R,B,H){if(B===y)return!0;const W=Reflect.get(R,B,H);return(0,d.Ar)(W)?(0,d.KQ)(W):(0,n.isObject)(W)||(0,n.isArray)(W)?(U.has(W)||U.set(W,T(W)),U.get(W)):W}})}function M(L){return typeof L=="object"&&L!==null}function I(L){return M(L)&&L[y]===!0}function x(L){const U={type:g.u.link,...L};return S(U),U}function S(L){if(L.type!==g.u.link)throw Error("config is not a extension link")}function O(L,U){return L.length<U?L:`${L.slice(0,U-3).trimEnd()}...`}function C(L){const U={},R=[];for(const H of L){const W=H.category;if(!W){R.push({text:O(H.title,25),href:H.path,onClick:H.onClick});continue}Array.isArray(U[W])||(U[W]=[]),U[W].push({text:O(H.title,25),href:H.path,onClick:H.onClick})}const B=Object.keys(U).reduce((H,W)=>(H.push({text:O(W,25),type:"group",subMenu:U[W]}),H),[]);return R.length>0&&(B.length>0&&B.push({text:"divider",type:"divider"}),Array.prototype.push.apply(B,R)),B}},15162:(Y,A,e)=>{"use strict";e.d(A,{Kk:()=>l,PY:()=>f,TV:()=>u,d4:()=>i,f7:()=>p,oZ:()=>d});var t=e(65158),n=e(2913),o=e(41394),s=e(91629);const r={},g={};function u(m){const a=r[m];if(a)return a;const v=i(m);if(!v)throw new Error(`Plugin ${m} not found`);return r[m]=c(v),m!==v.type&&(r[v.type]=r[m]),r[m]}function d(m){return!!i(m)}function i(m){const a=n.Ay.panels[m];if(!a){for(const v of Object.values(n.Ay.panels))if(v.aliasIDs?.includes(m))return v}return a}function l(m){return c(m)}function f(m){return g[m]}function c(m){return(0,s.j4)({path:m.module,version:m.info?.version,isAngular:m.angular?.detected,pluginId:m.id}).then(a=>{if(a.plugin)return a.plugin;if(a.PanelCtrl){const v=new t.m(null);return v.angularPanelCtrl=a.PanelCtrl,v}throw new Error("missing export: plugin or PanelCtrl")}).then(a=>(a.meta=m,g[m.id]=a,!a.panel&&a.angularPanelCtrl&&(a.panel=h(a)),a)).catch(a=>(console.warn("Error loading panel plugin: "+m.id,a),(0,o.W)(m,a)))}let h=m=>null;function p(m){h=m}},81900:(Y,A,e)=>{"use strict";e.d(A,{GD:()=>s,ni:()=>g,sk:()=>r});var t=e(27716);const n={},o=Date.now();function s({path:d,version:i}){const l=u(d);l&&!n[l]&&(n[l]=encodeURI(i))}function r(d){const i=`plugins/${d}/module`;n[i]&&delete n[i],(0,t.o)(d)}function g(d,i=o){const l=u(d);if(!l)return`${d}?_cache=${i}`;const c=n[l]||i;return`${d}?_cache=${c}`}function u(d){const i=/\/.+\/(plugins\/.+\/module)\.js/i.exec(d);if(!i)return;const[l,f]=i;if(f)return f}},45179:(Y,A,e)=>{"use strict";e.d(A,{$b:()=>n,Bu:()=>o,Cf:()=>s,XV:()=>t});const t="package",n=/^plugins.+\.css$/i,o=/^(text|application)\/(x-)?javascript(;|$)/,s=/(?:^\uFEFF?|[^$_a-zA-Z\xA0-\uFFFF.])define\s*\(\s*("[^"]+"\s*,\s*|'[^']+'\s*,\s*)?\s*(\[(\s*(("[^"]+"|'[^']+')\s*,|\/\/.*\r?\n))*(\s*("[^"]+"|'[^']+')\s*,?)?(\s*(\/\/.*\r?\n|\/\*\/))*\s*\]|function\s*|{|[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*\))/},94429:(Y,A,e)=>{"use strict";e.d(A,{kB:()=>f,OD:()=>c,Av:()=>h});var t=e(32264),n=e(89191),o=e(66161),s=e(45179),r=e(34867);const g=new WeakMap,u={};function d(p,m,a){const v={get(E,D){if(document.currentScript===null&&typeof D!="symbol"&&D.toString()!=="__useDefault"){const P=`${m}.${String(D)}`,y=`${P}`;u[y]||(u[y]=!0,(0,r.fH)(`Plugin using ${P}`,{key:String(D),parent:m,packageName:a}))}let b=Reflect.get(E,D);return b!==null&&typeof b=="object"&&!(b instanceof RegExp)?(g.has(b)||g.set(b,d(b,`${m}.${String(D)}`,a)),g.get(b)):(typeof b=="function"&&(b=b.bind(E)),b)}};return typeof p=="object"&&p!==null?new Proxy(p,v):p}const i=/^(@grafana|app\/)/;function l(p,m){return i.test(m)?d(p,m,m):p}function f(p){return Object.keys(p).reduce((m,a)=>{const v=`${s.XV}:${a}`,E=t.$.featureToggles.pluginsAPIMetrics?l(p[a],a):p[a];return n.zO.set(v,E),o.s.set(a,p[a]),m[a]=v,m},{})}function c(p){return!!t.$.pluginsCDNBaseURL&&p.startsWith(t.$.pluginsCDNBaseURL)}function h(p){return p.startsWith("http")||p.startsWith("/")?p:`${t.$.appSubUrl??""}/${p}`}},27716:(Y,A,e)=>{"use strict";e.d(A,{o:()=>s,x:()=>o});var t=e(17172);const n={};function o(r,g){const u=n[r];return u?Promise.resolve(u):(0,t.AI)().get(`/api/plugins/${r}/settings`,void 0,void 0,g).then(d=>(n[r]=d,d)).catch(d=>typeof d=="object"&&d!==null&&"status"in d&&d.status===403?(d.isHandled=!0,Promise.reject(d)):Promise.reject(new Error("Unknown Plugin")))}const s=r=>r?delete n[r]:Object.keys(n).forEach(g=>delete n[g])},91629:(Y,A,e)=>{"use strict";e.d(A,{ui:()=>lm,cS:()=>pc,j4:()=>hd});var t={};e.r(t),e.d(t,{plugin:()=>le});var n={};e.r(n),e.d(n,{plugin:()=>or});var o={};e.r(o),e.d(o,{plugin:()=>ko});var s={};e.r(s),e.d(s,{plugin:()=>go});var r={};e.r(r),e.d(r,{plugin:()=>Ki});var g={};e.r(g),e.d(g,{plugin:()=>Sc});var u={};e.r(u),e.d(u,{plugin:()=>Jt});var d={};e.r(d),e.d(d,{plugin:()=>Om});var i={};e.r(i),e.d(i,{plugin:()=>Fm});var l={};e.r(l),e.d(l,{plugin:()=>Ac});var f={};e.r(f),e.d(f,{plugin:()=>Gm});var c={};e.r(c),e.d(c,{plugin:()=>Qm});var h={};e.r(h),e.d(h,{plugin:()=>Xl});var p={};e.r(p),e.d(p,{plugin:()=>cf});var m={};e.r(m),e.d(m,{plugin:()=>mf});var a={};e.r(a),e.d(a,{plugin:()=>Tf});var v={};e.r(v),e.d(v,{plugin:()=>Of});var E={};e.r(E),e.d(E,{plugin:()=>Af});var D={};e.r(D),e.d(D,{plugin:()=>$f});var b={};e.r(b),e.d(b,{plugin:()=>Jf});var P={};e.r(P),e.d(P,{plugin:()=>Lu});var y={};e.r(y),e.d(y,{plugin:()=>ug});var T={};e.r(T),e.d(T,{plugin:()=>mg});var M={};e.r(M),e.d(M,{plugin:()=>pg});var I={};e.r(I),e.d(I,{plugin:()=>wg});var x=e(40187),S=e(41987),O=e(89191),C=e(96540),L=e(65158),U=e(57220),R=e(32264),B=e(40276),H=e(61410),W=e(23770),N=e(98164),V=e(55740),G=e(88467),_=e(80348),K=e(32196),j=e(70416),k=e(40845),Q=e(55852),ee=e(69087),ae=e(64047),Z=e(27962),ne=e(38858),q=e(56361),te=e(60021);const re=({alertManagerSourceName:F,group:se,expandAll:fe})=>{const[Pe,xe]=(0,C.useState)(fe),Ue=(0,k.of)(de),ze=(0,k.of)(ne.q);return(0,C.useEffect)(()=>xe(fe),[fe]),C.createElement("div",{className:Ue.group,"data-testid":"alert-group"},Object.keys(se.labels).length>0?C.createElement(ee.m,{labels:se.labels,size:"sm"}):C.createElement("div",{className:Ue.noGroupingText},"No grouping"),C.createElement("div",{className:Ue.row},C.createElement(ae.e,{isCollapsed:!Pe,onToggle:()=>xe(!Pe)})," ",C.createElement(Z.f,{group:se})),Pe&&C.createElement("div",{className:Ue.alerts},se.alerts.map((Xe,ot)=>{const lt=Xe.status.state.toUpperCase(),pt=(0,j.dU)({start:new Date(Xe.startsAt),end:Date.now()});return C.createElement("div",{"data-testid":"alert-group-alert",className:Ue.alert,key:`${Xe.fingerprint}-${ot}`},C.createElement("div",null,C.createElement("span",{className:ze[Xe.status.state]},lt," "),"for ",pt),C.createElement("div",null,C.createElement(ee.m,{labels:Xe.labels,size:"sm"})),C.createElement("div",{className:Ue.actionsRow},Xe.status.state===te.Or.Suppressed&&C.createElement(Q.z9,{href:`${(0,q.nL)("/alerting/silences",F)}&silenceIds=${Xe.status.silencedBy.join(",")}`,className:Ue.button,icon:"bell",size:"sm"},"Manage silences"),Xe.status.state===te.Or.Active&&C.createElement(Q.z9,{href:(0,q.BK)(F,Xe.labels),className:Ue.button,icon:"bell-slash",size:"sm"},"Silence"),Xe.generatorURL&&C.createElement(Q.z9,{className:Ue.button,href:Xe.generatorURL,icon:"chart-line",size:"sm"},"See source")))})))},de=F=>({noGroupingText:(0,K.css)`
    height: ${F.spacing(4)};
  `,group:(0,K.css)`
    background-color: ${F.colors.background.secondary};
    margin: ${F.spacing(.5,1,.5,1)};
    padding: ${F.spacing(1)};
  `,row:(0,K.css)`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${F.spacing(1)};
  `,alerts:(0,K.css)`
    margin: ${F.spacing(0,2,0,4)};
  `,alert:(0,K.css)`
    padding: ${F.spacing(1,0)};
    & + & {
      border-top: 1px solid ${F.colors.border.medium};
    }
  `,button:(0,K.css)`
    & + & {
      margin-left: ${F.spacing(1)};
    }
  `,actionsRow:(0,K.css)`
    padding: ${F.spacing(1,0)};
  `}),ie=(F,se)=>(0,C.useMemo)(()=>F.filter(fe=>(0,N.Av)(fe.labels,se)||fe.alerts.some(Pe=>(0,N.Av)(Pe.labels,se))),[F,se]),ge=F=>{const se=(0,_.useDispatch)(),fe=R.$.unifiedAlertingEnabled,Pe=F.options.expandAll,xe=F.options.alertmanager,ze=((0,H.$)(pt=>pt.amAlertGroups)||G.jA)[xe||""]?.result||[],Xe=F.options.labels?(0,N.J$)(F.options.labels):[],ot=ie(ze,Xe);(0,C.useEffect)(()=>{function pt(){xe&&se((0,W.D3)(xe))}pt();const Et=setInterval(pt,V.U3);return()=>{clearInterval(Et)}},[se,xe]);const lt=ot.length>0;return C.createElement(B.E,{autoHeightMax:"100%",autoHeightMin:"100%"},fe&&C.createElement("div",null,lt&&ot.map(pt=>C.createElement(re,{alertManagerSourceName:xe,key:JSON.stringify(pt.labels),group:pt,expandAll:Pe})),!lt&&"No alerts"))};var ve=e(88323);function ye(F){return F.name===U.hY?"Grafana":F.name.slice(0,37)}const pe=({onChange:F,current:se,dataSources:fe})=>{const Pe=(0,C.useMemo)(()=>fe.map(xe=>({label:ye(xe),value:xe.name,imgUrl:xe.imgUrl,meta:xe.meta})),[fe]);return C.createElement(ve.l6,{"aria-label":"Choose Alertmanager",width:29,backspaceRemovesValue:!1,onChange:xe=>xe.value&&F(xe.value),options:Pe,maxMenuHeight:500,noOptionsMessage:"No datasources found",value:se,getOptionLabel:xe=>xe.label})},le=new L.m(ge).setPanelOptions(F=>F.addCustomEditor({name:"Alertmanager",path:"alertmanager",id:"alertmanager",defaultValue:U.hY,category:["Options"],editor:function(fe){const Pe=(0,C.useMemo)(U.r8,[]);return C.createElement(pe,{current:fe.value,onChange:xe=>fe.onChange(xe),dataSources:Pe})}}).addBooleanSwitch({name:"Expand all by default",path:"expandAll",defaultValue:!1,category:["Options"]}).addTextInput({description:"Filter results by matching labels, ex: env=production,severity=~critical|warning",name:"Labels",path:"labels",category:["Filter"]}));var Me=e(79924),De=e(67061),Re=e(85242),me=e(76459),he=e.n(me),Te=e(13544),Be=e(53477),we=e(11230);async function Ne({query:F,permissionLevel:se}){return(await(0,we.c0)(F,se)).map(xe=>({id:xe.id,title:xe.title,url:xe.url}))}async function Ze({query:F,permissionLevel:se,extraFolders:fe}){const Pe=await Ne({query:F,permissionLevel:se}),xe=fe??[],Ue=F?xe.filter(ze=>ze.title?.toLowerCase().includes(F.toLowerCase())):xe;return Pe?Ue.concat(Pe):Ue}async function st({query:F,permissionLevel:se=_.PermissionLevelString.View,extraFolders:fe=[]}){return(await Ze({query:F,permissionLevel:se,extraFolders:fe})).map(xe=>({value:xe,label:xe.title}))}function Qe(F,se){return F?.find(fe=>fe.value?.id===se)}async function ke(F){if(F!=null)try{const{id:se,title:fe}=await(0,we.dz)(F);return{value:{id:se,title:fe},label:fe}}catch{console.error(`Could not find folder with id:${F}`)}}const je={id:void 0,title:"All"},He={id:Be.s1,title:Be.JC};function Ge({onChange:F,extraFolders:se=[],initialFolderId:fe,permissionLevel:Pe=_.PermissionLevelString.View}){const[xe,Ue]=(0,C.useState)(!1),[ze,Xe]=(0,C.useState)(void 0),[ot,lt]=(0,C.useState)(void 0),pt=(0,C.useCallback)(async Nt=>{let Gt=Qe(Nt,fe);Gt||(Gt=await ke(fe)??Nt[0],F(Gt.value)),Ue(!0),lt(Nt),Xe(Gt)},[fe,F]),Et=(0,C.useCallback)(async Nt=>{const Gt=await st({query:Nt,permissionLevel:Pe,extraFolders:se});return xe||await pt(Gt),Gt},[Pe,se,xe,pt]),Tt=he()(Et,300,{leading:!0}),yt=(0,C.useCallback)(({value:Nt})=>{const Gt=Qe(ot,Nt?.id);Xe(Gt),F(Nt)},[ot,F]);return C.createElement("div",{"data-testid":Te.Tp.components.ReadonlyFolderPicker.container},C.createElement(ve.DW,{loadingMessage:"Loading folders...",defaultOptions:!0,defaultValue:ze,value:ze,loadOptions:Tt,onChange:yt}))}var Oe=e(51612),Ke=e(2543),Ee=e.n(Ke),J=e(16817),oe=e(47232),ue=e(85858),be=e(17172),Le=e(10860),_e=e(14578),Ve=e(55907),We=e(14792),$e=e(64861);function it(F){const[se,fe]=(0,C.useState)(""),Pe=(0,J.A)(async()=>{if(F.options.showOptions!==$e.zX.Current)return;const ze={state:ht(F.options.stateFilter)};F.options.alertName&&(ze.query=F.replaceVariables(F.options.alertName)),F.options.folderId>=0&&(ze.folderId=F.options.folderId),F.options.dashboardTitle&&(ze.dashboardQuery=F.options.dashboardTitle),F.options.dashboardAlerts&&(ze.dashboardId=(0,We.UA)().getCurrent()?.id),F.options.tags&&(ze.dashboardTag=F.options.tags);const Xe=await(0,be.AI)().get("/api/alerts",ze,`alert-list-get-current-alert-state-${F.id}`);let ot=at(F.options.sortOrder,Xe.map(lt=>({...lt,stateModel:Ve.A.getStateDisplayModel(lt.state),newStateDateAgo:(0,oe.KQ)(lt.newStateDate).locale("en").fromNow(!0)})));return ot.length>F.options.maxItems&&(ot=ot.slice(0,F.options.maxItems)),fe(ot.length===0?"No alerts":""),ot},[F.options.showOptions,F.options.stateFilter.alerting,F.options.stateFilter.execution_error,F.options.stateFilter.no_data,F.options.stateFilter.ok,F.options.stateFilter.paused,F.options.stateFilter.pending,F.options.maxItems,F.options.tags,F.options.dashboardAlerts,F.options.dashboardTitle,F.options.folderId,F.options.alertName,F.options.sortOrder,F.timeRange]),xe=(0,J.A)(async()=>{if(F.options.showOptions!==$e.zX.RecentChanges)return;const ze={limit:F.options.maxItems,type:"alert",newState:ht(F.options.stateFilter)},Xe=(0,We.UA)().getCurrent();F.options.dashboardAlerts&&(ze.dashboardId=Xe?.id),ze.from=ue.parse(Xe?.time.from).unix()*1e3,ze.to=ue.parse(Xe?.time.to).unix()*1e3;const ot=await(0,be.AI)().get("/api/annotations",ze,`alert-list-get-state-changes-${F.id}`),lt=at(F.options.sortOrder,ot.map(pt=>({...pt,time:Xe?.formatDate(pt.time,"MMM D, YYYY HH:mm:ss"),stateModel:Ve.A.getStateDisplayModel(pt.newState),info:Ve.A.getAlertAnnotationInfo(pt)})));return fe(lt.length===0?"No alerts in current time range":""),lt},[F.options.showOptions,F.options.maxItems,F.options.stateFilter.alerting,F.options.stateFilter.execution_error,F.options.stateFilter.no_data,F.options.stateFilter.ok,F.options.stateFilter.paused,F.options.stateFilter.pending,F.options.dashboardAlerts,F.options.sortOrder]),Ue=(0,k.of)(ft);return C.createElement(B.E,{autoHeightMin:"100%",autoHeightMax:"100%"},C.createElement("div",{className:Ue.container},se&&C.createElement("div",{className:Ue.noAlertsMessage},se),C.createElement("section",null,C.createElement("ol",{className:Ue.alertRuleList},F.options.showOptions===$e.zX.Current?!Pe.loading&&Pe.value&&Pe.value.map(ze=>C.createElement("li",{className:Ue.alertRuleItem,key:`alert-${ze.id}`},C.createElement(Le.Z,{href:`${ze.url}?viewPanel=${ze.panelId}`,className:Ue.cardContainer},C.createElement(Le.Z.Heading,null,ze.name),C.createElement(Le.Z.Figure,{className:(0,K.cx)(Ue.alertRuleItemIcon,ze.stateModel.stateClass)},C.createElement(_e.I,{name:ze.stateModel.iconClass,size:"xl",className:Ue.alertIcon})),C.createElement(Le.Z.Meta,null,C.createElement("div",{className:Ue.alertRuleItemText},C.createElement("span",{className:ze.stateModel.stateClass},ze.stateModel.text),C.createElement("span",{className:Ue.alertRuleItemTime}," for ",ze.newStateDateAgo)))))):!xe.loading&&xe.value&&xe.value.map(ze=>C.createElement("li",{className:Ue.alertRuleItem,key:`alert-${ze.id}`},C.createElement(Le.Z,{className:Ue.cardContainer},C.createElement(Le.Z.Heading,null,ze.alertName),C.createElement(Le.Z.Figure,{className:(0,K.cx)(Ue.alertRuleItemIcon,ze.stateModel.stateClass)},C.createElement(_e.I,{name:ze.stateModel.iconClass,size:"xl"})),C.createElement(Le.Z.Meta,null,C.createElement("span",{className:(0,K.cx)(Ue.alertRuleItemText,ze.stateModel.stateClass)},ze.stateModel.text),C.createElement("span",null,ze.time),ze.info&&C.createElement("span",{className:Ue.alertRuleItemInfo},ze.info)))))))))}function at(F,se){if(F===$e.xB.Importance)return(0,Ke.sortBy)(se,Pe=>Ve.A.alertStateSortScore[Pe.state||Pe.newState]);if(F===$e.xB.TimeAsc)return(0,Ke.sortBy)(se,Pe=>new Date(Pe.newStateDate||Pe.time));if(F===$e.xB.TimeDesc)return(0,Ke.sortBy)(se,Pe=>new Date(Pe.newStateDate||Pe.time)).reverse();const fe=(0,Ke.sortBy)(se,Pe=>(Pe.name||Pe.alertName).toLowerCase());return F===$e.xB.AlphaDesc&&fe.reverse(),fe}function ht(F){return Object.entries(F).filter(([se,fe])=>fe).map(([se,fe])=>se)}const ft=F=>({cardContainer:(0,K.css)`
    padding: ${F.spacing(.5)} 0 ${F.spacing(.25)} 0;
    line-height: ${F.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:(0,K.css)`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:(0,K.css)`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:(0,K.css)`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${F.colors.background.secondary};
    padding: ${F.spacing(.5)} ${F.spacing(1)};
    border-radius: ${F.shape.radius.default};
    margin-bottom: ${F.spacing(.5)};
  `,alertRuleItemIcon:(0,K.css)`
    display: flex;
    justify-content: center;
    align-items: center;
    width: ${F.spacing(4)};
    padding: 0 ${F.spacing(.5)} 0 ${F.spacing(.25)};
    margin-right: 0px;
  `,alertRuleItemText:(0,K.css)`
    font-weight: ${F.typography.fontWeightBold};
    font-size: ${F.typography.size.sm};
    margin: 0;
  `,alertRuleItemTime:(0,K.css)`
    color: ${F.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:(0,K.css)`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:(0,K.css)`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:(0,K.css)`
    margin-right: ${F.spacing(.5)};
  `}),gt=F=>{const se={showOptions:F.options.showOptions??F.show??$e.zX.Current,maxItems:F.options.maxItems??F.limit??10,sortOrder:F.options.sortOrder??F.sortOrder??$e.xB.AlphaAsc,dashboardAlerts:F.options.dashboardAlerts??F.onlyAlertsOnDashboard??!1,alertName:F.options.alertName??F.nameFilter??"",dashboardTitle:F.options.dashboardTitle??F.dashboardFilter??"",folderId:F.options.folderId??F.folderId,tags:F.options.tags??F.dashboardTags??[],stateFilter:F.options.stateFilter??F.stateFilter?.reduce((Pe,xe)=>({...Pe,[xe]:!0}),{})??{}};return parseFloat(F.pluginVersion||"7.4")<7.5&&["show","limit","sortOrder","onlyAlertsOnDashboard","nameFilter","dashboardFilter","folderId","dashboardTags","stateFilter"].forEach(xe=>delete F[xe]),se};var Dt=e(94822),It=e(54317);function jt(F,se){const fe=(0,N.J$)(F);return(0,N.Av)(se,fe)}function Vt(F,se){const{stateFilter:fe,alertInstanceLabelFilter:Pe}=F;return(0,Ke.isEmpty)(fe)?se:se.filter(xe=>(fe.firing&&((0,It.S)(xe,Dt.Gi.Alerting)||(0,It.S)(xe,Dt.cF.Firing))||fe.pending&&((0,It.S)(xe,Dt.Gi.Pending)||(0,It.S)(xe,Dt.cF.Pending))||fe.noData&&(0,It.S)(xe,Dt.Gi.NoData)||fe.normal&&(0,It.S)(xe,Dt.Gi.Normal)||fe.error&&(0,It.S)(xe,Dt.Gi.Error)||fe.inactive&&(0,It.S)(xe,Dt.cF.Inactive))&&(Pe?jt(F.alertInstanceLabelFilter,xe.labels):!0))}function _t(F){return!(F.startsWith("__")&&F.endsWith("__"))}const rt=F=>{const{onChange:se,id:fe,defaultValue:Pe,dataSource:xe}=F,Ue=(0,_.useDispatch)();(0,C.useEffect)(()=>{xe?xe&&Ue((0,W.mB)({rulesSourceName:xe})):Ue((0,W.nV)())},[Ue,xe]);const ze=(0,H.$)(pt=>pt.promRules),Xe=(0,G.p0)(ze),ot=(0,G.Vf)(ze),lt=(0,C.useMemo)(()=>{if((0,Ke.isEmpty)(ze))return[];if(!Xe)return[];const pt=Object.keys(ze).flatMap(Et=>ze[Et].result??[]).flatMap(Et=>Et.groups).flatMap(Et=>Et.rules.filter(Tt=>Tt.type===Dt.JS.Alerting)).flatMap(Et=>Et.alerts??[]).map(Et=>Object.keys(Et.labels??{})).flatMap(Et=>Et.filter(_t));return(0,Ke.uniq)(pt)},[Xe,ze]);return C.createElement(ve.KF,{id:fe,isLoading:ot,defaultValue:Pe,"aria-label":"group by label keys",placeholder:"Group by",prefix:C.createElement(_e.I,{name:"tag-alt"}),onChange:pt=>{se(pt.map(Et=>Et.value??""))},options:lt.map(pt=>({label:pt,value:pt}))})};var St=e(42941),pn=e(94701),ct=e(3591),Ct=e(42418),Yt=e(37494),cn=e(39558),vn=e(2913),rn=e(16233),en=e(79938),mn=e(11536),Un=e(9518),fn=e(23662),ca=e(15458),Lt=e(55127),qt=e.n(Lt),hn=e(2426),Cn=e(15054);const gn=({rule:F,alerts:se,options:fe,grafanaTotalInstances:Pe,handleInstancesLimit:xe,limitInstances:Ue,grafanaFilteredInstancesTotal:ze})=>{const Xe=fe.groupMode===$e.r6.Custom?!0:fe.showInstances,[ot,lt]=(0,C.useState)(Xe),pt=(0,k.of)(xn),Et=(0,k.of)(Q.my),Tt=(0,C.useCallback)(()=>{lt(ea=>!ea)},[]),yt=(0,C.useMemo)(()=>Vt(fe,(0,q.Cp)(fe.sortOrder,se))??[],[se,fe]),Nt=Pe!==void 0,Gt=Pe&&ze?Pe-ze:0,Bt=se.length-yt.length,wt=Nt?Gt:Bt,Qt=yt.length>0,sn=Qt?Tt:Ke.noop;(0,C.useEffect)(()=>{yt.length===0&&lt(!1)},[yt]);const Xt=async()=>{xe&&(xe(!1),lt(!0))},In=async()=>{xe&&(xe(!0),lt(!0))},on=Ue?ze:yt.length,bn=yt.length,Bn=Nt?on:bn,wn=Ue?`Showing ${mn.Ys} of ${Pe} instances`:`Showing all ${Pe} instances`,Mn=Ue?"View all instances":`Limit the result to ${mn.Ys} instances`,dn=Pe&&mn.Ys===yt.length&&Pe>yt.length,Rn=Pe&&mn.Ys<yt.length&&!Ue,Dn=dn||Rn?C.createElement("div",{className:pt.footerRow},C.createElement("div",null,wn),C.createElement(Q.$n,{size:"sm",variant:"secondary",onClick:Ue?Xt:In},Mn)):void 0;return C.createElement("div",null,fe.groupMode===$e.r6.Default&&C.createElement("button",{className:(0,K.cx)(Et,Qt?pt.clickable:""),onClick:()=>sn()},Qt&&C.createElement(_e.I,{name:ot?"angle-down":"angle-right",size:"md"}),C.createElement("span",null,`${Bn} ${qt()("instance",Bn)}`),wt>0&&C.createElement("span",null,", ",`${wt} hidden by filters`)),ot&&C.createElement(hn.D,{rule:F,instances:yt,pagination:{itemsPerPage:2*Cn.FG},footerRow:Dn}))},xn=F=>({clickable:(0,K.css)`
    cursor: pointer;
  `,footerRow:(0,K.css)`
    display: flex;
    flex-direction: column;
    gap: ${F.spacing(1)};
    justify-content: space-between;
    align-items: center;
    width: 100%;
  `}),Tn="__ungrouped__",Wn=({rules:F,options:se})=>{const fe=(0,k.of)(hs),Pe=se.groupBy,xe=(0,C.useMemo)(()=>{const Ue=new Map,ze=lt=>Pe?ta(lt,Pe):!0;F.forEach(lt=>{const pt=(0,fn.TU)(lt),Et=ze(lt);(pt?.alerts??[]).forEach(Tt=>{const yt=Et?Sn(Pe,Tt.labels):Tn,Nt=Ue.get(yt)?.alerts??[];Ue.set(yt,{rule:lt,alerts:[...Nt,Tt]})})});const Xe=Ue.get(Tn)?.alerts??[];return Ue.delete(Tn),Ue.set(Tn,{alerts:Xe}),Array.from(Ue.entries()).reduce((lt,[pt,{rule:Et,alerts:Tt}])=>{const yt=Vt(se,Tt);return yt.length>0&&lt.set(pt,{rule:Et,alerts:yt}),lt},new Map)},[Pe,F,se]);return C.createElement(C.Fragment,null,Array.from(xe).map(([Ue,{rule:ze,alerts:Xe}])=>C.createElement("li",{className:fe.alertRuleItem,key:Ue,"data-testid":Ue},C.createElement("div",null,C.createElement("div",{className:fe.customGroupDetails},C.createElement("div",{className:fe.alertLabels},Ue!==Tn&&An(Ue).map(([ot,lt])=>C.createElement(ca.R,{key:ot,labelKey:ot,value:lt})),Ue===Tn&&"No grouping")),C.createElement(gn,{rule:ze,alerts:Xe,options:se})))))};function Sn(F,se){return new URLSearchParams(F.map(fe=>[fe,se[fe]])).toString()}function An(F){return[...new URLSearchParams(F)]}function ta(F,se){const fe=(0,fn.TU)(F);return se.every(Pe=>(fe?.alerts??[]).some(xe=>xe.labels[Pe]))}const fa=Wn;var la=e(87586),Xn=e(26058),Ea=e(18461),Ca=e(3704);function Sa(F){return Object.values(F).filter(se=>se!==void 0).reduce((se,fe)=>se+fe,0)}const aa=({rules:F,options:se,handleInstancesLimit:fe,limitInstances:Pe,hideViewRuleLinkText:xe})=>{const Ue=(0,k.of)(hs),ze=(0,k.of)(Yn),{href:Xe}=(0,la.A)(),ot=F.length<=se.maxItems?F:F.slice(0,se.maxItems);return C.createElement(C.Fragment,null,C.createElement("ol",{className:Ue.alertRuleList},ot.map((lt,pt)=>{const{namespaceName:Et,groupName:Tt,dataSourceName:yt}=lt,Nt=(0,fn.Z8)(lt.promRule)?lt.promRule:void 0,Gt=(0,fn.Om)(Nt),Bt=(0,Ea.UP)(lt.dataSourceName,lt),wt=(0,Ea.$9)(Bt),Qt=lt.dataSourceName===U.hY?Sa(lt.instanceTotals):void 0,sn=lt.dataSourceName===U.hY?Sa(lt.filteredInstanceTotals):void 0,Xt=(0,Ca.c)(`/alerting/${encodeURIComponent(yt)}/${encodeURIComponent(wt)}/view`,{returnTo:Xe??""});return Nt?C.createElement("li",{className:Ue.alertRuleItem,key:`alert-${Et}-${Tt}-${lt.name}-${pt}`},C.createElement("div",{className:ze.icon},C.createElement(_e.I,{name:Ve.A.getStateDisplayModel(Nt.state).iconClass,className:ze[(0,fn.Wy)(Nt.state)],size:"lg"})),C.createElement("div",{className:Ue.alertNameWrapper},C.createElement("div",{className:Ue.instanceDetails},C.createElement(De.B,{direction:"row",gap:1},C.createElement("div",{className:Ue.alertName,title:lt.name},lt.name),C.createElement(Xn.h,null),Xt&&C.createElement("a",{href:Xt,target:"__blank",className:Ue.link,rel:"noopener","aria-label":"View alert rule"},C.createElement("span",{className:(0,K.cx)({[Ue.hidden]:xe})},"View alert rule"),C.createElement(_e.I,{name:"external-link-alt",size:"sm"}))),C.createElement("div",{className:Ue.alertDuration},C.createElement("span",{className:ze[(0,fn.Wy)(Nt.state)]},(0,fn.XI)(Nt.state))," ",Gt&&Nt.state!==Dt.cF.Inactive&&C.createElement(C.Fragment,null,"for"," ",C.createElement("span",null,(0,j.dU)({start:Gt,end:Date.now()}))))),C.createElement(gn,{rule:lt,alerts:Nt.alerts??[],options:se,grafanaTotalInstances:Qt,grafanaFilteredInstancesTotal:sn,handleInstancesLimit:fe,limitInstances:Pe}))):null})))},Yn=F=>({common:(0,K.css)`
    width: 70px;
    text-align: center;
    align-self: stretch;

    display: inline-block;
    color: white;
    border-radius: ${F.shape.radius.default};
    font-size: ${F.typography.bodySmall.fontSize};
    text-transform: capitalize;
    line-height: 1.2;
    flex-shrink: 0;

    display: flex;
    flex-direction: column;
    justify-content: center;
  `,icon:(0,K.css)`
    margin-top: ${F.spacing(2.5)};
    align-self: flex-start;
  `,good:(0,K.css)`
    color: ${F.colors.success.main};
  `,bad:(0,K.css)`
    color: ${F.colors.error.main};
  `,warning:(0,K.css)`
    color: ${F.colors.warning.main};
  `,neutral:(0,K.css)`
    color: ${F.colors.secondary.main};
  `,info:(0,K.css)`
    color: ${F.colors.primary.main};
  `}),za=aa;function ns(F){const se=(fe,[Pe,xe])=>xe?[...fe,Pe]:fe;return Object.entries(F).reduce(se,[])}const ps=({dispatch:F,limitInstances:se,matcherList:fe,dataSourceName:Pe,stateList:xe})=>{F(Pe?(0,W.Lc)({rulesSourceName:Pe,limitAlerts:se?mn.Ys:void 0,matcher:fe,state:xe}):(0,W.yo)(!1,{limitAlerts:se?mn.Ys:void 0,matcher:fe,state:xe}))};function Cs(F){const se=(0,_.useDispatch)(),[fe,Pe]=(0,St.A)(!0),{usePrometheusRulesByNamespaceQuery:xe}=en.hK,Ue=(0,H.$)(_a=>_a.promRules),ze=(0,H.$)(_a=>_a.rulerRules),Xe=(0,G.t4)(Ue),ot=F.width<320;(0,C.useEffect)(()=>{F.options.stateFilter.inactive===!0&&(F.options.stateFilter.normal=!0),F.options.stateFilter.inactive=void 0},[F.options.stateFilter]);let lt;(0,pn.A)(()=>{lt=(0,We.UA)().getCurrent()});const pt=(0,C.useMemo)(()=>ns(F.options.stateFilter),[F.options.stateFilter]),{options:Et,replaceVariables:Tt}=F,yt=Et.datasource===U.vv?U.hY:Et.datasource,Nt={...F.options,alertName:Tt(Et.alertName),alertInstanceLabelFilter:Tt(Et.alertInstanceLabelFilter)},Gt=(0,C.useMemo)(()=>(0,N.J$)(Nt.alertInstanceLabelFilter),[Nt.alertInstanceLabelFilter]),Bt=!yt||yt===U.hY,{currentData:wt=[],isLoading:Qt,refetch:sn}=xe({limitAlerts:fe?mn.Ys:void 0,matcher:Gt,state:pt},{skip:!Bt});(0,C.useEffect)(()=>{Ue.loading||ps({dispatch:se,limitInstances:fe,matcherList:Gt,dataSourceName:yt,stateList:pt});const _a=lt?.events.subscribe(ct.sR,()=>{Bt&&sn(),(!yt||yt!==U.hY)&&ps({dispatch:se,limitInstances:fe,matcherList:Gt,dataSourceName:yt,stateList:pt})});return()=>{_a?.unsubscribe()}},[se,lt,Gt,pt,fe,yt,sn,Bt,Ue.loading]);const Xt=_a=>{_a?(ps({dispatch:se,limitInstances:fe,matcherList:Gt,dataSourceName:yt,stateList:pt}),Pe(!0)):(ps({dispatch:se,limitInstances:!1,matcherList:Gt,dataSourceName:yt,stateList:pt}),Pe(!1))},In=(0,Un.dy)(void 0,wt),on=(0,G.t4)(ze),bn=(0,G.BU)(Ue),Bn=Xe||on,wn=(0,G.Vf)(Ue),Mn=(0,k.of)(hs),dn=(0,fn.dS)(In),Rn=F.options.sortOrder,Dn=(0,C.useMemo)(()=>cs(F,Fs(Rn,dn)),[dn,Rn,F]),ea=Dn.length===0?"No alerts matching filters":void 0,Gn=Qt||Bn&&wn&&!bn,ia=Object.values(Ue).some(_a=>_a.result);return!rn.TP.hasPermission(_.AccessControlAction.AlertingRuleRead)&&!rn.TP.hasPermission(_.AccessControlAction.AlertingRuleExternalRead)?C.createElement(Ct.F,{title:"Permission required"},"Sorry, you do not have the required permissions to read alert rules"):C.createElement(B.E,{autoHeightMin:"100%",autoHeightMax:"100%"},C.createElement("div",{className:Mn.container},ia&&ea&&C.createElement("div",{className:Mn.noAlertsMessage},ea),ia&&C.createElement("section",null,F.options.viewMode===$e.nE.Stat&&C.createElement(Yt.yV,{width:F.width,height:F.height,graphMode:Yt.$p.None,textMode:Yt.SV.Auto,justifyMode:Yt.F8.Auto,theme:vn.$W.theme2,value:{text:`${Dn.length}`,numeric:Dn.length}}),F.options.viewMode===$e.nE.List&&F.options.groupMode===$e.r6.Custom&&C.createElement(fa,{rules:Dn,options:Nt}),F.options.viewMode===$e.nE.List&&F.options.groupMode===$e.r6.Default&&C.createElement(za,{rules:Dn,options:Nt,handleInstancesLimit:Xt,limitInstances:fe,hideViewRuleLinkText:ot})),Gn&&C.createElement(cn._,{text:"Loading..."})))}function Fs(F,se){if(F===$e.xB.Importance)return(0,Ke.sortBy)(se,Pe=>Ve.A.alertStateSortScore[Pe.state]);if(F===$e.xB.TimeAsc)return(0,Ke.sortBy)(se,Pe=>{const xe=(0,fn.TU)(Pe)??void 0;return(0,fn.Om)(xe)||new Date});if(F===$e.xB.TimeDesc)return(0,Ke.sortBy)(se,Pe=>{const xe=(0,fn.TU)(Pe)??void 0;return(0,fn.Om)(xe)||new Date}).reverse();const fe=(0,Ke.sortBy)(se,Pe=>Pe.name.toLowerCase());return F===$e.xB.AlphaDesc&&fe.reverse(),fe}function cs(F,se){const{options:fe,replaceVariables:Pe}=F;let xe=[...se];if(fe.dashboardAlerts){const Ue=(0,We.UA)().getCurrent()?.uid;xe=xe.filter(({annotations:ze={}})=>Object.entries(ze).some(([Xe,ot])=>Xe===V.YH.dashboardUID&&ot===Ue))}if(fe.alertName){const Ue=Pe(fe.alertName);xe=xe.filter(({name:ze})=>ze.toLocaleLowerCase().includes(Ue.toLocaleLowerCase()))}if(xe=xe.filter(Ue=>{const ze=(0,fn.TU)(Ue);return ze?fe.stateFilter.firing&&ze.state===Dt.cF.Firing||fe.stateFilter.pending&&ze.state===Dt.cF.Pending||fe.stateFilter.normal&&ze.state===Dt.cF.Inactive:!1}),fe.folder&&(xe=xe.filter(Ue=>Ue.namespaceName===fe.folder.title)),fe.datasource){const Ue=fe.datasource===U.vv;xe=xe.filter(Ue?({dataSourceName:ze})=>ze===U.hY:({dataSourceName:ze})=>ze===fe.datasource)}return xe=xe.reduce((Ue,ze)=>{const Xe=(0,fn.TU)(ze);return(Xe?Vt({stateFilter:fe.stateFilter,alertInstanceLabelFilter:Pe(fe.alertInstanceLabelFilter)},Xe.alerts??[]):[]).length&&Ue.push(ze),Ue},[]),xe}const hs=F=>({cardContainer:(0,K.css)`
    padding: ${F.spacing(.5)} 0 ${F.spacing(.25)} 0;
    line-height: ${F.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:(0,K.css)`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:(0,K.css)`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:(0,K.css)`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${F.colors.background.secondary};
    padding: ${F.spacing(.5)} ${F.spacing(1)};
    border-radius: ${F.shape.radius.default};
    margin-bottom: ${F.spacing(.5)};

    gap: ${F.spacing(2)};
  `,alertName:(0,K.css)`
    font-size: ${F.typography.h6.fontSize};
    font-weight: ${F.typography.fontWeightBold};

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,alertNameWrapper:(0,K.css)`
    display: flex;
    flex: 1;
    flex-wrap: nowrap;
    flex-direction: column;

    min-width: 100px;
  `,alertLabels:(0,K.css)`
    > * {
      margin-right: ${F.spacing(.5)};
    }
  `,alertDuration:(0,K.css)`
    font-size: ${F.typography.bodySmall.fontSize};
  `,alertRuleItemText:(0,K.css)`
    font-weight: ${F.typography.fontWeightBold};
    font-size: ${F.typography.bodySmall.fontSize};
    margin: 0;
  `,alertRuleItemTime:(0,K.css)`
    color: ${F.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:(0,K.css)`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:(0,K.css)`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:(0,K.css)`
    margin-right: ${F.spacing(.5)};
  `,instanceDetails:(0,K.css)`
    min-width: 1px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,customGroupDetails:(0,K.css)`
    margin-bottom: ${F.spacing(.5)};
  `,link:(0,K.css)`
    word-break: break-all;
    color: ${F.colors.primary.text};
    display: flex;
    align-items: center;
    gap: ${F.spacing(1)};
  `,hidden:(0,K.css)`
    display: none;
  `});class rr{getSuggestionsForData(se){const{dataSummary:fe}=se;if(fe.hasData)return;se.getListAppender({name:"Dashboard list",pluginId:"dashlist",options:{}}).append({})}}function ss(F){return F.showOptions===$e.zX.Current}const bs=new L.m(it).setPanelOptions(F=>{F.addSelect({name:"Show",path:"showOptions",settings:{options:[{label:"Current state",value:$e.zX.Current},{label:"Recent state changes",value:$e.zX.RecentChanges}]},defaultValue:$e.zX.Current,category:["Options"]}).addNumberInput({name:"Max items",path:"maxItems",defaultValue:10,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",settings:{options:[{label:"Alphabetical (asc)",value:$e.xB.AlphaAsc},{label:"Alphabetical (desc)",value:$e.xB.AlphaDesc},{label:"Importance",value:$e.xB.Importance},{label:"Time (asc)",value:$e.xB.TimeAsc},{label:"Time (desc)",value:$e.xB.TimeDesc}]},defaultValue:$e.xB.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",defaultValue:"",category:["Filter"],showIf:ss}).addTextInput({path:"dashboardTitle",name:"Dashboard title",defaultValue:"",category:["Filter"],showIf:ss}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:null,editor:function({value:fe,onChange:Pe}){return C.createElement(Ge,{initialFolderId:fe,onChange:xe=>Pe(xe?.id),extraFolders:[je,He]})},category:["Filter"],showIf:ss}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:[],editor(se){return C.createElement(Me.u,{tags:se.value,onChange:se.onChange})},category:["Filter"],showIf:ss}).addBooleanSwitch({path:"stateFilter.ok",name:"Ok",defaultValue:!1,category:["State filter"],showIf:ss}).addBooleanSwitch({path:"stateFilter.paused",name:"Paused",defaultValue:!1,category:["State filter"],showIf:ss}).addBooleanSwitch({path:"stateFilter.no_data",name:"No data",defaultValue:!1,category:["State filter"],showIf:ss}).addBooleanSwitch({path:"stateFilter.execution_error",name:"Execution error",defaultValue:!1,category:["State filter"],showIf:ss}).addBooleanSwitch({path:"stateFilter.alerting",name:"Alerting",defaultValue:!1,category:["State filter"],showIf:ss}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!1,category:["State filter"],showIf:ss})}).setMigrationHandler(gt).setSuggestionsSupplier(new rr),tr=new L.m(Cs).setPanelOptions(F=>{F.addRadio({path:"viewMode",name:"View mode",description:"Toggle between list view and stat view",defaultValue:$e.nE.List,settings:{options:[{label:"List",value:$e.nE.List},{label:"Stat",value:$e.nE.Stat}]},category:["Options"]}).addRadio({path:"groupMode",name:"Group mode",description:"How alert instances should be grouped",defaultValue:$e.r6.Default,settings:{options:[{value:$e.r6.Default,label:"Default grouping"},{value:$e.r6.Custom,label:"Custom grouping"}]},category:["Options"]}).addCustomEditor({path:"groupBy",name:"Group by",description:"Filter alerts using label querying",id:"groupBy",defaultValue:[],showIf:se=>se.groupMode===$e.r6.Custom,category:["Options"],editor:se=>C.createElement(rt,{id:se.id??"groupBy",defaultValue:se.value.map(fe=>({label:fe,value:fe})),onChange:se.onChange,dataSource:se.context.options.datasource})}).addNumberInput({name:"Max items",path:"maxItems",description:"Maximum alerts to display",defaultValue:20,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",description:"Sort order of alerts and alert instances",settings:{options:[{label:"Alphabetical (asc)",value:$e.xB.AlphaAsc},{label:"Alphabetical (desc)",value:$e.xB.AlphaDesc},{label:"Importance",value:$e.xB.Importance},{label:"Time (asc)",value:$e.xB.TimeAsc},{label:"Time (desc)",value:$e.xB.TimeDesc}]},defaultValue:$e.xB.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts linked to this dashboard",description:"Only show alerts linked to this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",description:"Filter for alerts containing this text",defaultValue:"",category:["Filter"]}).addTextInput({path:"alertInstanceLabelFilter",name:"Alert instance label",description:'Filter alert instances using label querying, ex: {severity="critical", instance=~"cluster-us-.+"}',defaultValue:"",category:["Filter"]}).addCustomEditor({path:"datasource",name:"Datasource",description:"Filter from alert source",id:"datasource",defaultValue:null,editor:function(fe){return C.createElement(De.B,{gap:1},C.createElement(Oe.s,{...fe,type:["prometheus","loki","grafana"],noDefault:!0,current:fe.value,onChange:Pe=>fe.onChange(Pe.name)}),C.createElement(Q.$n,{variant:"secondary",onClick:()=>fe.onChange(null)},"Clear"))},category:["Filter"]}).addCustomEditor({showIf:se=>se.datasource===U.vv||!se.datasource,path:"folder",name:"Folder",description:"Filter for alerts in the selected folder (only for Grafana alerts)",id:"folder",defaultValue:null,editor:function(fe){return C.createElement(Re.sR,{enableReset:!0,showRoot:!1,allowEmpty:!0,initialTitle:fe.value?.title,initialFolderUid:fe.value?.uid,permissionLevel:_.PermissionLevelString.View,onClear:()=>fe.onChange(""),...fe})},category:["Filter"]}).addBooleanSwitch({path:"stateFilter.firing",name:"Alerting / Firing",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.noData",name:"No Data",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.normal",name:"Normal",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.error",name:"Error",defaultValue:!0,category:["Alert state filter"]})}),or=R.$.unifiedAlertingEnabled?tr:bs;var vs=e(64423),hr=e(71733),_s=e(26272),Ya=e(69129),Ws=e(12131),Bs=e(64149),Ks=e(3911),Vr=e(85918),Js=e(28138),Er=e(44522),yr=e(56034);const zo=({options:F,annotation:se,formatDate:fe,onClick:Pe,onAvatarClick:xe,onTagClick:Ue})=>{const ze=(0,k.of)(us),{showUser:Xe,showTags:ot,showTime:lt}=F,{text:pt="",login:Et,email:Tt,avatarUrl:yt,tags:Nt,time:Gt,timeEnd:Bt}=se,wt=()=>{Pe(se)},Qt=()=>{xe(se)},sn=Et&&Xe,Xt=Gt&&lt,In=Bt&&Bt!==Gt&&lt;return C.createElement(Le.Z,{className:ze.card,onClick:wt},C.createElement(Le.Z.Heading,null,C.createElement(Er.I,{className:ze.heading,onClick:on=>{on.stopPropagation()},content:pt})),Xt&&C.createElement(Le.Z.Description,{className:ze.timestamp},C.createElement(qr,{formatDate:fe,time:Gt}),In&&C.createElement(C.Fragment,null,C.createElement("span",{className:ze.time},"-"),C.createElement(qr,{formatDate:fe,time:Bt})," ")),sn&&C.createElement(Le.Z.Meta,{className:ze.meta},C.createElement(Dr,{email:Tt,login:Et,avatarUrl:yt,onClick:Qt})),ot&&Nt&&C.createElement(Le.Z.Tags,null,C.createElement(Bs.L,{tags:Nt,onClick:on=>Ue(on,!1)})))},Dr=({onClick:F,avatarUrl:se,login:fe,email:Pe})=>{const xe=(0,k.of)(us),Ue=Xe=>{Xe.stopPropagation(),F()},ze=C.createElement("span",null,"Created by:",C.createElement("br",null)," ",Pe);return C.createElement(yr.m,{content:ze,theme:"info",placement:"top"},C.createElement("button",{onClick:Ue,className:xe.avatar},C.createElement("img",{src:se,alt:"avatar icon"})))},qr=({time:F,formatDate:se})=>{const fe=(0,k.of)(us);return C.createElement("span",{className:fe.time},C.createElement("span",null,se(F)))};function us(F){return{card:(0,K.css)({gridTemplateAreas:'"Heading Description Meta Tags"',gridTemplateColumns:"auto 1fr auto auto",padding:F.spacing(1),margin:F.spacing(.5),width:"inherit"}),heading:(0,K.css)({a:{zIndex:1,position:"relative",color:F.colors.text.link,"&:hover":{textDecoration:"underline"}}}),meta:(0,K.css)({margin:0,position:"relative",justifyContent:"end"}),timestamp:(0,K.css)({margin:0,alignSelf:"center"}),time:(0,K.css)({marginLeft:F.spacing(1),marginRight:F.spacing(1),fontSize:F.typography.bodySmall.fontSize,color:F.colors.text.secondary}),avatar:(0,K.css)({border:"none",background:"inherit",margin:0,padding:F.spacing(.5),img:{borderRadius:F.shape.radius.circle,width:F.spacing(2),height:F.spacing(2)}})}}class eo extends C.PureComponent{constructor(se){super(se),this.style=Fr(R.$.theme2),this.subs=new vs.yU,this.tagListRef=C.createRef(),this.onAnnoClick=async fe=>{if(!fe.time)return;const{options:Pe}=this.props,Ue=(0,We.UA)().getCurrent(),ze={from:this._timeOffset(fe.time,Pe.navigateBefore,!0),to:this._timeOffset(fe.timeEnd??fe.time,Pe.navigateAfter,!1),viewPanel:Pe.navigateToPanel?fe.panelId:void 0};if(Ue?.uid===fe.dashboardUID){Ws.Ny.partial(ze);return}const Xe=await(0,be.AI)().get("/api/search",{dashboardUIDs:fe.dashboardUID});if(Xe&&Xe.length&&Xe[0].uid===fe.dashboardUID){const ot=Xe[0],lt=new URL(ot.url,window.location.origin);lt.searchParams.set("from",String(ze.from)),lt.searchParams.set("to",String(ze.to)),Ws.Ny.push(hr.I.stripBaseFromUrl(lt.toString()));return}Js.A.emit(_s.r1.alertWarning,["Unknown Dashboard: "+fe.dashboardUID])},this.onTagClick=(fe,Pe)=>{if(!Pe&&this.state.queryTags.includes(fe))return;const xe=Pe?this.state.queryTags.filter(ze=>ze!==fe):[...this.state.queryTags,fe];let Ue;if(Pe){const ze=document.activeElement,Xe=ze?.getAttribute("data-tag-id");if(this.tagListRef.current?.contains(ze)&&Xe){const ot=Number.parseInt(Xe,10),lt=this.tagListRef.current.querySelector(`[data-tag-id="${ot+1}"]`)??this.tagListRef.current.querySelector(`[data-tag-id="${ot-1}"]`);lt instanceof HTMLElement&&(Ue=lt)}}this.setState({queryTags:xe},()=>Ue?.focus())},this.onUserClick=fe=>{this.setState({queryUser:{id:fe.userId,login:fe.login,email:fe.email}})},this.onClearUser=()=>{this.setState({queryUser:void 0})},this.renderItem=(fe,Pe)=>{const{options:xe}=this.props,Ue=(0,We.UA)().getCurrent();return Ue?C.createElement(zo,{annotation:fe,formatDate:Ue.formatDate,onClick:this.onAnnoClick,onAvatarClick:this.onUserClick,onTagClick:this.onTagClick,options:xe}):C.createElement(C.Fragment,null)},this.state={annotations:[],timeInfo:"",loaded:!1,queryTags:[]}}componentDidMount(){this.doSearch(),this.subs.add(this.props.eventBus.getStream(Ya.We).subscribe({next:()=>{this.doSearch()}}))}componentWillUnmount(){this.subs.unsubscribe()}componentDidUpdate(se,fe){const{options:Pe,timeRange:xe}=this.props;(Pe!==se.options||this.state.queryTags!==fe.queryTags||this.state.queryUser!==fe.queryUser||se.renderCounter!==this.props.renderCounter||Pe.onlyInTimeRange&&xe!==se.timeRange)&&this.doSearch()}async doSearch(){const{options:se}=this.props,{queryUser:fe,queryTags:Pe}=this.state,xe={tags:se.tags,limit:se.limit,type:"annotation"};se.onlyFromThisDashboard&&(xe.dashboardUID=(0,We.UA)().getCurrent()?.uid);let Ue="";if(se.onlyInTimeRange){const{timeRange:Xe}=this.props;xe.from=Xe.from.valueOf(),xe.to=Xe.to.valueOf()}else Ue="All Time";fe&&(xe.userId=fe.id),se.tags&&se.tags.length&&(xe.tags=se.tags.map(Xe=>this.props.replaceVariables(Xe))),Pe.length&&(xe.tags=xe.tags?[...xe.tags,...Pe]:Pe);const ze=await(0,be.AI)().get("/api/annotations",xe,`anno-list-panel-${this.props.id}`);this.setState({annotations:ze,timeInfo:Ue,loaded:!0})}_timeOffset(se,fe,Pe=!1){let xe=5,Ue="m";const ze=/^(\d+)(\w)/.exec(fe);ze&&ze.length===3&&(xe=parseInt(ze[1],10),Ue=ze[2]);const Xe=(0,oe.KQ)(se);return Pe&&(xe*=-1),Xe.add(xe,Ue).valueOf()}render(){const{loaded:se,annotations:fe,queryUser:Pe,queryTags:xe}=this.state;if(!se)return C.createElement("div",null,"loading...");const Ue=Pe||xe.length>0;return C.createElement(B.E,{autoHeightMin:"100%"},Ue&&C.createElement("div",{className:this.style.filter},C.createElement("b",null,"Filter:"),Pe&&C.createElement(Q.$n,{size:"sm",variant:"secondary",fill:"text",onClick:this.onClearUser,"aria-label":`Remove filter: ${Pe.email}`},Pe.email),xe.length>0&&C.createElement(Bs.L,{icon:"times",tags:xe,onClick:ze=>this.onTagClick(ze,!0),getAriaLabel:ze=>`Remove ${ze} tag`,className:this.style.tagList,ref:this.tagListRef})),fe.length<1&&C.createElement("div",{className:this.style.noneFound},"No Annotations Found"),C.createElement(Vr.p,{items:fe,renderItem:this.renderItem,getItemKey:ze=>`${ze.id}`}))}}const Fr=(0,Ks.N)(F=>({noneFound:(0,K.css)`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: calc(100% - 30px);
  `,filter:(0,K.css)({alignItems:"center",display:"flex",flexWrap:"wrap",gap:F.spacing(.5),padding:F.spacing(.5)}),tagList:(0,K.css)({justifyContent:"flex-start","li > button":{paddingLeft:"3px"}})})),nr={limit:10,navigateAfter:"10m",navigateBefore:"10m",navigateToPanel:!0,onlyFromThisDashboard:!1,onlyInTimeRange:!1,showTags:!0,showTime:!0,showUser:!0,tags:[]},ko=new L.m(eo).setPanelOptions(F=>{F.addRadio({category:["Annotation query"],path:"onlyFromThisDashboard",name:"Query filter",defaultValue:nr.onlyFromThisDashboard,settings:{options:[{value:!1,label:"All dashboards"},{value:!0,label:"This dashboard"}]}}).addRadio({category:["Annotation query"],path:"onlyInTimeRange",name:"Time range",defaultValue:nr.onlyInTimeRange,settings:{options:[{value:!1,label:"None"},{value:!0,label:"This dashboard"}]}}).addCustomEditor({category:["Annotation query"],id:"tags",path:"tags",name:"Tags",description:"Match annotation tags",editor(se){return C.createElement(Me.u,{tags:se.value,onChange:se.onChange})}}).addNumberInput({category:["Annotation query"],path:"limit",name:"Limit",defaultValue:nr.limit}).addBooleanSwitch({category:["Display"],path:"showUser",name:"Show user",defaultValue:nr.showUser}).addBooleanSwitch({category:["Display"],path:"showTime",name:"Show time",defaultValue:nr.showTime}).addBooleanSwitch({category:["Display"],path:"showTags",name:"Show tags",defaultValue:nr.showTags}).addRadio({category:["Link behavior"],path:"navigateToPanel",name:"Link target",defaultValue:nr.navigateToPanel,settings:{options:[{value:!0,label:"Panel"},{value:!1,label:"Dashboard"}]}}).addTextInput({category:["Link behavior"],path:"navigateBefore",name:"Time before",defaultValue:nr.navigateBefore,description:""}).addTextInput({category:["Link behavior"],path:"navigateAfter",name:"Time after",defaultValue:nr.navigateAfter,description:""})}).setPanelChangeHandler((F,se,fe)=>se==="ryantxu-annolist-panel"?fe:F.options);var zs=e(37055),Es=e(24293),to=e(27310),ts=e(28240),Ts=e(47070),Zn=e(11261),xt=e(52622),Ir=e(52198),Ho=e(38248),Ar=e(11404),_r=e(89654),ir=e(22680),Go=e(71242),yo=e(24882),fo=e(21423),Mt=e(97152),Ft=e(79041),ln=e(29413),Zt=e(30501),En=e(67266),Fn=e(55726),Vn=e(24182),sa=e(17464),ga=e(69503),Ga=e(94624),qa=e(16615);const xa=({config:F,onUPlotClick:se,setFocusedSeriesIdx:fe,setFocusedPointIdx:Pe,setCoords:xe,setHover:Ue,isToolTipOpen:ze,isActive:Xe,setIsActive:ot,sync:lt})=>{ze.current=!1;const pt=()=>{ot&&ot(!0)},Et=()=>{ze.current||(xe(null),ot&&ot(!1))};let Tt=null,yt=null;F.addHook("init",wt=>{Tt=wt.root.parentElement,yt=wt.over,Tt?.addEventListener("click",se),yt.addEventListener("mouseleave",Et),yt.addEventListener("mouseenter",pt),lt&&lt()===Ga.y.Crosshair&&wt.root.classList.add("shared-crosshair")});const Nt=()=>{ze.current&&(xe(null),se())};F.addHook("drawClear",Nt),F.addHook("destroy",()=>{Tt?.removeEventListener("click",se),yt?.removeEventListener("mouseleave",Et),yt?.removeEventListener("mouseenter",pt),Nt()});let Gt;F.addHook("syncRect",(wt,Qt)=>{Gt=Qt});const Bt=F.getTooltipInterpolator();return Bt&&F.addHook("setCursor",wt=>{ze.current||Bt(fe,Pe,Qt=>{if(Qt){xe(null);return}if(!Gt)return;const{x:sn,y:Xt}=(0,qa.n)(wt,Gt);sn!==void 0&&Xt!==void 0&&xe({canvas:{x:wt.cursor.left,y:wt.cursor.top},viewport:{x:sn,y:Xt}})},wt)}),F.addHook("setLegend",wt=>{if(!ze.current&&!Bt&&Pe(wt.legend.idx),wt.cursor.idxs!=null)for(let Qt=0;Qt<wt.cursor.idxs.length;Qt++){const sn=wt.cursor.idxs[Qt];if(sn!=null){const Xt={xIndex:sn,yIndex:0,pageX:Gt.left+wt.cursor.left,pageY:Gt.top+wt.cursor.top};(!ze.current||!Xt)&&Ue(Xt);return}}}),F.addHook("setSeries",(wt,Qt)=>{ze.current||fe(Qt)}),F};var Qa=e(25469),ar=e(30249),ys=e(28895),ks=e(1819),Ss=e(36613),xs=e(83195),Us=e(8066),lr=e(73060),Hs=e(57875),Oa=e(51336),As=e(52811),zr=e(16895),Ha=e(63577),cr=e(23596),no=e(39758),Do=e(4134);const jo=no.ur,Ao=no.ur,Ui=8,Ro=30,Zo=.65,qo=.1,el=.15,ur=5,tl=10,nl=.1;function al(F,se,fe,Pe,xe){const Ue=(0,ln.kD)(F,14),ze=se/(Ue.width+2)*14,Xe=fe/Pe,ot=Math.min(Xe,ze);return{fontSize:Math.min(ot,xe??ot),textMetrics:Ue}}function ei(F,se){const{xOri:fe,xDir:Pe,rawValue:xe,getColor:Ue,formatValue:ze,formatShortValue:Xe,fillOpacity:ot=1,showValue:lt,xSpacing:pt=0}=F,Et=fe===xt.Lt.Horizontal,Tt=!F.text?.valueSize,yt=F.stacking!==xt.gs.None,Nt=F.stacking===xt.gs.Percent;let{groupWidth:Gt,barWidth:Bt,barRadius:wt=0}=F;yt&&([Gt,Bt]=[Bt,Gt]);let Qt,sn;const Xt=On=>Array.from(On.data[0].map((_n,jn)=>jn)),In=pt===0?void 0:(On,_n)=>{const jn=On.bbox.width,$a=Pe*(Et?1:-1);let Ba=_n.length,rs=Ba-1,Xa=0,Ms=jn/Ss.A.pxRatio,Qs=Math.abs(Math.floor(Ms/pt));Xa=Ba<Qs?0:Math.ceil(Ba/Qs);let io=_n.map((Vs,Xr)=>Xa!==0&&(pt>0?Xr:rs-Xr)%Xa>0?null:Vs);return $a===1?io:io.reverse()},on=(On,_n,jn,$a,Ba)=>{if(F.xTimeAuto){let rs=On.scales.x,Xa=rs.min,Ms=rs.max;rs.min=On.data[0][0],rs.max=On.data[0][On.data[0].length-1];let Qs=(0,Zt.fU)(On,_n,jn,$a,Ba);return rs.min=Xa,rs.max=Ms,Qs}return _n.map(rs=>Et?Xe(0,rs):ze(0,rs))},bn=(On,_n,jn)=>{_n=0,jn=Math.max(1,On.data[0].length-1);let $a=0;(0,no.mn)(On.data[0].length,Gt,jo,0,(rs,Xa,Ms)=>{$a=Xa+Ms/2});let Ba=jn-_n;if($a===.5)_n-=Ba;else{let Xa=(1/(1-$a*2)*Ba-Ba)/2;_n-=Xa,jn+=Xa}return[_n,jn]};let Bn=(On,_n)=>{let jn=Array.from({length:_n},()=>({offs:Array(On).fill(0),size:Array(On).fill(0)}));return(0,no.mn)(On,Gt,jo,null,($a,Ba,rs)=>{(0,no.mn)(_n,Bt,Ao,null,(Xa,Ms,Qs)=>{jn[Xa].offs[$a]=Ba+rs*Ms,jn[Xa].size[$a]=rs*Qs})}),jn},wn=(On,_n)=>{let jn=Array.from({length:_n},()=>({offs:Array(On).fill(0),size:Array(On).fill(0)}));return(0,no.mn)(On,Gt,jo,null,($a,Ba,rs)=>{(0,no.mn)(_n,Bt,Ao,null,(Xa,Ms,Qs)=>{jn[Xa].offs[$a]=Ba,jn[Xa].size[$a]=rs})}),jn};const Mn=Et?qo:el,dn=Et?ur:tl;let Rn=[],Dn=[],ea=1,Gn,ia=F.text?.valueSize??Ro,_a=dn,Ra=1/0,ms=1/0,va=Ue!=null,ka=va?{fill:{unit:3,values:(On,_n)=>Dn[_n].fill},stroke:{unit:3,values:(On,_n)=>Dn[_n].stroke}}:{},oa=Ss.A.paths.bars({radius:Nt?0:yt?(On,_n)=>_n===On.data.length-1?[wt,0]:[0,0]:wt,disp:{x0:{unit:2,values:(On,_n)=>Rn[_n].offs},size:{unit:2,values:(On,_n)=>Rn[_n].size},...ka},each:(On,_n,jn,$a,Ba,rs,Xa)=>{$a-=On.bbox.left,Ba-=On.bbox.top;let Ms=On.data[_n][jn];Et?(Ra=Math.min(Ra,Ms<0?On.bbox.height-(Ba+Xa):Ba),ms=rs):(Ra=Xa,ms=Math.min(ms,Ms<0?$a:On.bbox.width-($a+rs)));let Qs={x:$a,y:Ba,w:rs,h:Xa,sidx:_n,didx:jn};if(F.fullHighlight&&(F.xOri===xt.Lt.Horizontal?(Qs.y=0,Qs.h=On.bbox.height):(Qs.x=0,Qs.w=On.bbox.width)),Qt.add(Qs),lt!==xt.yL.Never){const io=xe(_n,jn);let Vs=1;Nt&&Pa[_n][jn]&&(Vs=Pa[_n][jn]);const Xr=Vs===0?0:io/Vs,Li=ze(_n,Xr);if(_a=Math.min(_a,Math.round(Mn*(Et?rs:Xa))),Gn[jn]===void 0&&(Gn[jn]={}),Gn[jn][_n]={text:Li,value:xe(_n,jn),hidden:!1},Tt){const{fontSize:Io,textMetrics:fs}=al(Gn[jn][_n].text,ms*(Et?Zo:1)-(Et?0:_a),Ra*(Et?1:Zo)-(Et?_a:0),1);Gn[jn][_n].textMetrics=fs;let er=Math.round(Math.min(ia,Ro,Io));ea=er/ia*(er/14),ia=er}else Gn[jn][_n].textMetrics=(0,ln.kD)(Gn[jn][_n].text,ia);let Wl=Et?0:-Math.round(nl*ia),mo=xe(_n,jn);if(F.negY?.[_n]&&mo!=null&&(mo*=-1),mo!=null){const Io=On.bbox.left+(Et?$a+rs/2:mo<0?$a-_a:$a+rs+_a),fs=On.bbox.top+(Et?mo<0?Ba+Xa+_a:Ba-_a:Ba+Xa/2-Wl),{textMetrics:er={width:1,actualBoundingBoxAscent:1,actualBoundingBoxDescent:1}}=Gn[jn][_n];let Bi=0,Vo=0;Et?(Bi=er.width*ea/2,Vo=mo>0?(er.actualBoundingBoxAscent+er.actualBoundingBoxDescent)*ea:0):(Vo=(er.actualBoundingBoxAscent+er.actualBoundingBoxDescent)*ea/2,Bi=mo<0?er.width*ea:0),Gn[jn][_n].x=Io,Gn[jn][_n].y=fs,Gn[jn][_n].bbox={x:Io-Bi,y:fs-Vo,w:er.width*ea,h:(er.actualBoundingBoxAscent+er.actualBoundingBoxDescent)*ea}}}}});const zn=On=>{let _n=On.over;_n.style.overflow="hidden",On.root.querySelectorAll(".u-cursor-pt").forEach(jn=>{jn.style.borderRadius="0",F.fullHighlight&&(jn.style.zIndex="-1")})},Kn={x:!1,y:!1,drag:{x:!1,y:!1},dataIdx:(On,_n)=>{if(_n===1){sn=null;let jn=On.cursor.left*Ss.A.pxRatio,$a=On.cursor.top*Ss.A.pxRatio;Qt.get(jn,$a,1,1,Ba=>{(0,Do.ur)(jn,$a,Ba.x,Ba.y,Ba.x+Ba.w,Ba.y+Ba.h)&&(sn=Ba)})}return sn&&_n===sn.sidx?sn.didx:null},points:{fill:"rgba(255,255,255,0.4)",bbox:(On,_n)=>{let jn=sn&&_n===sn.sidx;return{left:jn?sn.x/Ss.A.pxRatio:-10,top:jn?sn.y/Ss.A.pxRatio:-10,width:jn?sn.w/Ss.A.pxRatio:0,height:jn?sn.h/Ss.A.pxRatio:0}}}},kn=On=>{if(Qt=Qt||new Do.C$(0,0,On.bbox.width,On.bbox.height),Qt.clear(),On.series.forEach(_n=>{_n._paths=null}),yt?Rn=[null,...wn(On.data[0].length,On.data.length-1)]:Rn=[null,...Bn(On.data[0].length,On.data.length-1)],va){Dn=[null];for(let _n=1;_n<On.data.length;_n++){let jn=On.data[_n].map(($a,Ba)=>$a!=null?Ue(_n,Ba,$a):null);Dn.push({fill:ot<1?jn.map($a=>$a!=null?(0,cr.alpha)($a,ot):null):jn,stroke:jn})}}Gn={},ia=F.text?.valueSize??Ro,_a=dn,Ra=ms=1/0},ua=On=>{if(lt===xt.yL.Never||ia<Ui)return;On.ctx.save(),On.ctx.fillStyle=se.colors.text.primary,On.ctx.font=`${ia}px ${se.typography.fontFamily}`;let _n,jn;for(const $a in Gn){let Ba=!0;for(const rs in Gn[$a]){const Xa=Gn[$a][rs],{text:Ms,x:Qs=0,y:io=0}=Xa;let{value:Vs}=Xa;F.negY?.[rs]&&Vs!=null&&(Vs*=-1);let Xr=Et?"center":Vs!==null&&Vs<0?"right":"left",Li=Et?Vs!==null&&Vs<0?"top":"alphabetic":"middle";if(Xr!==_n&&(On.ctx.textAlign=_n=Xr),Li!==jn&&(On.ctx.textBaseline=jn=Li),lt===xt.yL.Always)On.ctx.fillText(Ms,Qs,io);else if(lt===xt.yL.Auto){let{bbox:Wl}=Xa,mo=!1;if(Wl==null)mo=!0,Xa.hidden=!0;else if(!Ba)for(const Io in Gn[$a]){if(Io===rs)continue;const fs=Gn[$a][Io],{bbox:er,hidden:Bi}=fs;if(!Bi&&er&&(0,Do.HY)(Wl,er)){mo=!0,Xa.hidden=!0;break}}Ba=!1,!mo&&On.ctx.fillText(Ms,Qs,io)}}}On.ctx.restore()},Ia=(On,_n,jn,$a)=>{sn?(On(sn.sidx),_n(sn.didx),jn()):jn(!0)};let Pa=null;function La(On,_n){return Pa=null,(0,zr.bq)(On[0],_n,({totals:jn})=>{Pa=jn})}return{cursor:Kn,xRange:bn,xValues:on,xSplits:Xt,hFilter:In,barsBuilder:oa,init:zn,drawClear:kn,draw:ua,interpolateTooltip:Ia,prepData:La}}const Wr={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:xt.wV.Auto,showValue:xt.yL.Auto,stacking:xt.gs.None,xTickLabelRotation:0,xTickLabelSpacing:0},ti={fillOpacity:80,gradientMode:xt.on.None,lineWidth:1};function ao(F){return F===Ts.wV.Vertical?{xOri:xt.Lt.Horizontal,xDir:xt.ON.Right,yOri:xt.Lt.Vertical,yDir:xt.ON.Up}:{xOri:xt.Lt.Vertical,xDir:xt.ON.Down,yOri:xt.Lt.Horizontal,yDir:xt.ON.Right}}const Po=({frame:F,theme:se,orientation:fe,showValue:Pe,groupWidth:xe,barWidth:Ue,barRadius:ze=0,stacking:Xe,text:ot,rawValue:lt,getColor:pt,fillOpacity:Et,allFrames:Tt,xTickLabelRotation:yt,xTickLabelMaxLength:Nt,xTickLabelSpacing:Gt=0,legend:Bt,timeZone:wt,fullHighlight:Qt})=>{const sn=new Oa.e,Xt=(ea,Gn)=>(0,xs.cN)(F.fields[ea].display(Gn)),In=(ea,Gn)=>Co(Xt(ea,Gn),Nt),on=ao(fe);F.fields.length===2&&(xe=Ue,Ue=1);const bn={xOri:on.xOri,xDir:on.xDir,groupWidth:xe,barWidth:Ue,barRadius:ze,stacking:Xe,rawValue:lt,getColor:pt,fillOpacity:Et,formatValue:Xt,formatShortValue:In,timeZone:wt,text:ot,showValue:Pe,legend:Bt,xSpacing:Gt,xTimeAuto:F.fields[0]?.type===Zn.PU.time&&!F.fields[0].config.unit?.startsWith("time:"),negY:F.fields.map(ea=>ea.config.custom?.transform===xt.NU.NegativeY),fullHighlight:Qt},Bn=ei(bn,se);if(sn.setCursor(Bn.cursor),sn.addHook("init",Bn.init),sn.addHook("drawClear",Bn.drawClear),sn.addHook("draw",Bn.draw),sn.setTooltipInterpolator(Bn.interpolateTooltip),yt!==0){let ea=50,Gn=on.xOri===xt.Lt.Horizontal?14:5;sn.setPadding(kr(F,yt,Nt,ea,Gn))}sn.setPrepData(Bn.prepData),sn.addScale({scaleKey:"x",isTime:!1,range:Bn.xRange,distribution:xt.L4.Ordinal,orientation:on.xOri,direction:on.xDir});const wn=F.fields[0].config.custom?.axisPlacement!==xt.vM.Hidden?on.xOri===xt.Lt.Horizontal?xt.vM.Bottom:xt.vM.Left:xt.vM.Hidden,Mn=F.fields[0].config.custom?.axisPlacement!==xt.vM.Hidden;sn.addAxis({scaleKey:"x",isTime:!1,placement:wn,label:F.fields[0].config.custom?.axisLabel,splits:Bn.xSplits,filter:on.xOri===0?Bn.hFilter:void 0,values:Bn.xValues,timeZone:wt,grid:{show:!1},ticks:{show:!1},gap:15,tickLabelRotation:on.xOri===0?yt*-1:0,theme:se,show:Mn});let dn=0;const Rn=hl(Bt);for(let ea=1;ea<F.fields.length;ea++){const Gn=F.fields[ea];dn++;const ia={...ti,...Gn.config.custom},_a=Gn.config.unit||As.s,Ra=(0,Us.Qi)(Gn),va=(0,Us.lz)(Gn,se).color;let ka=ia.axisSoftMin,oa=ia.axisSoftMax;if(ka==null&&Gn.config.min==null&&(ka=0),oa==null&&Gn.config.max==null&&(oa=0),ia.thresholdsStyle&&Gn.config.thresholds&&(ia.thresholdsStyle.mode??xt.Ly.Off)!==xt.Ly.Off&&sn.addThresholds({config:ia.thresholdsStyle,thresholds:Gn.config.thresholds,scaleKey:_a,theme:se,hardMin:Gn.config.min,hardMax:Gn.config.max,softMin:ia.axisSoftMin,softMax:ia.axisSoftMax}),sn.addSeries({scaleKey:_a,pxAlign:!0,lineWidth:ia.lineWidth,lineColor:va,fillOpacity:ia.fillOpacity,theme:se,colorMode:Ra,pathBuilder:Bn.barsBuilder,show:!ia.hideFrom?.viz,gradientMode:ia.gradientMode,thresholds:Gn.config.thresholds,hardMin:Gn.config.min,hardMax:Gn.config.max,softMin:ia.axisSoftMin,softMax:ia.axisSoftMax,dataFrameFieldIndex:{fieldIndex:Rn?ea:Tt[0].fields.findIndex(zn=>zn.type===Zn.PU.number&&zn.state?.seriesIndex===dn-1),frameIndex:0}}),sn.addScale({scaleKey:_a,min:Gn.config.min,max:Gn.config.max,softMin:ka,softMax:oa,centeredZero:ia.axisCenteredZero,orientation:on.yOri,direction:on.yDir,distribution:ia.scaleDistribution?.type,log:ia.scaleDistribution?.log}),ia.axisPlacement!==xt.vM.Hidden){let zn=ia.axisPlacement;(!zn||zn===xt.vM.Auto)&&(zn=xt.vM.Left),on.xOri===1&&(zn===xt.vM.Left&&(zn=xt.vM.Bottom),zn===xt.vM.Right&&(zn=xt.vM.Top));let Kn={scaleKey:_a,label:ia.axisLabel,size:ia.axisWidth,placement:zn,formatValue:(kn,ua)=>(0,xs.cN)(Gn.display(kn,ua)),filter:on.yOri===0?Bn.hFilter:void 0,tickLabelRotation:on.xOri===1?yt*-1:0,theme:se,grid:{show:ia.axisGridShow}};ia.axisBorderShow&&(Kn.border={show:!0}),ia.axisColorMode===xt.Y$.Series&&(Kn.color=va),sn.addAxis(Kn)}}let Dn=(0,zr.ro)(F);return sn.setStackingGroups(Dn),sn};function Co(F,se){return F.length>se?F.substring(0,se).concat("..."):F}function kr(F,se,fe,Pe=0,xe=0){const Ue=F.fields[0].values,ze=Zt.pi,Xe=F.fields[0].display,ot=yt=>Xe?Xe(Ue[yt]):Ue[yt];let lt=0;for(let yt=0;yt<Ue.length;yt++){let Nt=(0,ln.kD)(Co((0,xs.cN)(ot(yt)),fe),ze);lt=Nt.width>lt?Nt.width:lt}const pt=se>0?Math.cos(se*Math.PI/180)*(0,ln.kD)(Co((0,xs.cN)(ot(Ue.length-1)),fe),ze).width:0,Et=se<0?Math.cos(se*-1*Math.PI/180)*(0,ln.kD)(Co((0,xs.cN)(ot(0)),fe),ze).width:0,Tt=Math.sin((se>=0?se:se*-1)*Math.PI/180)*lt-xe;return[Math.round(Zt.pi*Ss.A.pxRatio),pt,Tt,Math.max(0,Et-Pe)]}function Ni(F,se,fe){if(!F.length||F.every(Et=>Et.length===0))return{warn:"No data in response"};(0,ts.Fm)(F);const Pe=F.length===1?(0,lr.Yj)(F[0],F[0].fields.findIndex(Et=>Et.type===Zn.PU.time)):(0,lr.Fd)({frames:F});if(!Pe)return{warn:"Unable to join data"};let xe;if(fe.colorByField&&(xe=(0,Ha.findField)(Pe,fe.colorByField),!xe))return{warn:"Color field not found"};let Ue;if(fe.xField&&(Ue=(0,Ha.findField)(Pe,fe.xField),!Ue))return{warn:"Configured x field not found"};let ze,Xe,ot=[];for(const Et of Pe.fields)if(Et!==Ue)switch(Et.type){case Zn.PU.string:ze||(ze=Et);break;case Zn.PU.time:Xe||(Xe=Et);break;case Zn.PU.number:{const Tt={...Et,state:{...Et.state,seriesIndex:ot.length},config:{...Et.config,custom:{...Et.config.custom,stacking:{group:"_",mode:fe.stacking}}},values:Et.values.map(yt=>Number.isFinite(yt)||yt==null?yt:null)};fe.stacking===xt.gs.Percent&&(Tt.config.unit="percentunit",Tt.display=(0,Hs.J)({field:Tt,theme:se})),ot.push(Tt)}}let lt=Ue;if(lt||(lt=ze||Xe),!lt)return{warn:"Bar charts requires a string or time field"};if(!ot.length)return{warn:"No numeric fields found"};if(xe&&ot.length>1){const Et=ot.find(Tt=>Tt!==xe);Et&&(ot=[Et])}let pt=(0,Ke.cloneDeep)(ot);return fe.stacking===xt.gs.Percent&&pt.map(Et=>{const Tt=Pe.fields.find(yt=>(0,ts.Ct)(yt,Pe)===(0,ts.Ct)(yt,Pe));Et.config.unit=Tt?.config?.unit??void 0,Et.display=(0,Hs.J)({field:Et,theme:se})}),ot.unshift(lt),pt.unshift(lt),{aligned:Pe,colorByField:xe,viz:[{fields:ot,length:lt.values.length}],legend:{fields:pt,length:lt.values.length}}}const hl=F=>!!(F?.sortBy&&F.sortDesc!==null),mi=10,vl=["orientation","barWidth","barRadius","xTickLabelRotation","xTickLabelMaxLength","xTickLabelSpacing","groupWidth","stacking","showValue","xField","colorField","legend",(F,se)=>se.text?.valueSize===F.text?.valueSize],El=({data:F,options:se,fieldConfig:fe,width:Pe,height:xe,timeZone:Ue,id:ze})=>{const Xe=(0,k.$j)(),{eventBus:ot}=(0,Ft.d2)(),lt=(0,C.useRef)(void 0),pt=(0,C.useRef)(!1),[Et,Tt]=(0,C.useState)(void 0),[yt,Nt]=(0,C.useState)(null),[Gt,Bt]=(0,C.useState)(null),[wt,Qt]=(0,C.useState)(null),[sn,Xt]=(0,C.useState)(!1),[In,on]=(0,C.useState)(!1),bn=()=>{pt.current=!1,Nt(null),on(!1)},Bn=()=>{pt.current=!pt.current,on(pt.current)},wn=(0,C.useRef)(),Mn=(0,C.useRef)(),dn=(0,C.useMemo)(()=>Ni(F.series,Xe,se),[F.series,Xe,se]),Rn="viz"in dn?dn:null;Mn.current=Rn?.colorByField;const Dn=(0,C.useRef)(1e4);(0,C.useMemo)(()=>{Dn.current++},[se]);const ea=(0,C.useMemo)(()=>{const zn=Rn?.viz[0],Kn=wn.current;return zn&&Kn&&(0,fo.bW)(zn,Kn,!0)||Dn.current++,wn.current=zn,(F.structureRev??0)+Dn.current},[Rn,F.structureRev]),Gn=(0,C.useMemo)(()=>!se.orientation||se.orientation===Ts.wV.Auto?Pe<xe?Ts.wV.Horizontal:Ts.wV.Vertical:se.orientation,[Pe,xe,se.orientation]),ia=(0,C.useMemo)(()=>{if(se.xTickLabelMaxLength)return se.xTickLabelMaxLength;{const zn=se.xTickLabelRotation,Kn=(0,ln.kD)("M",Zt.pi).width;return xe/2/(Math.sin((zn>=0?zn:zn*-1)*Math.PI/180)*Kn)-3}},[xe,se.xTickLabelRotation,se.xTickLabelMaxLength]);if("warn"in dn)return C.createElement(Mt.a,{panelId:ze,fieldConfig:fe,data:F,message:dn.warn,needsNumberField:!0});const _a=(zn,Kn,kn)=>{const ua=Kn==null?null:zn.fields[Kn];if(ua){const La=(0,ts.Ct)(ua,zn);Kn=dn.aligned.fields.findIndex(On=>La===(0,ts.Ct)(On,dn.aligned))}const Ia=se.fullHighlight&&se.stacking!==xt.gs.None?xt.$N.Multi:se.tooltip.mode,Pa=se.tooltip.mode===xt.$N.Multi?se.tooltip.sort:xt.xB.None;return C.createElement(C.Fragment,null,In&&C.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},C.createElement(Qa.J,{onClick:bn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),C.createElement(ks.e,{data:dn.aligned,rowIndex:kn,columnIndex:Kn,sortOrder:Pa,mode:Ia}))},Ra=zn=>{const{legend:Kn}=se;if(!zn||Kn.showLegend===!1)return null;if(dn.colorByField){const kn=(0,ys.jY)([dn.colorByField],Xe);if(kn?.length)return C.createElement(En.KU.Legend,{placement:Kn.placement},C.createElement(Fn.t,{placement:Kn.placement,items:kn,displayMode:Kn.displayMode}))}return C.createElement(Vn.$,{data:[dn.legend],config:zn,maxHeight:"35%",maxWidth:"60%",...se.legend})},ms=(zn,Kn)=>wn.current.fields[zn].values[Kn];let va,ka=1;if(dn.colorByField){const zn=dn.colorByField,Kn=zn.display;ka=(zn.config.custom.fillOpacity??100)/100,va=(kn,ua)=>Kn(Mn.current?.values[ua]).color}else wn.current.fields.some(Kn=>Kn.config.custom?.gradientMode===xt.on.Scheme&&Kn.config.color?.mode===Es.Y.Thresholds||Kn.config.mappings?.some(ua=>ua.type==="value"?Object.values(ua.options).some(Ia=>Ia.color!=null):ua.options.result.color!=null))&&(ka=(wn.current.fields.find(kn=>kn.type===Zn.PU.number).config.custom.fillOpacity??100)/100,va=(kn,ua)=>{let Ia=wn.current.fields[kn];return Ia.display(Ia.values[ua]).color});const oa=(zn,Kn,kn)=>{const{barWidth:ua,barRadius:Ia=0,showValue:Pa,groupWidth:La,stacking:On,legend:_n,tooltip:jn,text:$a,xTickLabelRotation:Ba,xTickLabelSpacing:rs,fullHighlight:Xa}=se;return Po({frame:zn,getTimeRange:kn,timeZone:Ue,theme:Xe,timeZones:[Ue],eventBus:ot,orientation:Gn,barWidth:ua,barRadius:Ia,showValue:Pa,groupWidth:La,xTickLabelRotation:Ba,xTickLabelMaxLength:ia,xTickLabelSpacing:rs,stacking:On,legend:_n,tooltip:jn,text:$a,rawValue:ms,getColor:va,fillOpacity:ka,allFrames:dn.viz,fullHighlight:Xa})};return C.createElement(ar.o,{theme:Xe,frames:dn.viz,prepConfig:oa,propsToDiff:vl,preparePlotFrame:zn=>zn[0],renderLegend:Ra,legend:se.legend,timeZone:Ue,timeRange:{from:1,to:1},structureRev:ea,width:Pe,height:xe},zn=>(lt.current!==zn&&(lt.current=xa({config:zn,onUPlotClick:Bn,setFocusedSeriesIdx:Bt,setFocusedPointIdx:Qt,setCoords:Nt,setHover:Tt,isToolTipOpen:pt,isActive:sn,setIsActive:Xt})),se.tooltip.mode===xt.$N.None?null:C.createElement(sa.ZL,null,Et&&yt&&Gt&&C.createElement(ga.o,{position:{x:yt.viewport.x,y:yt.viewport.y},offset:{x:mi,y:mi},allowPointerEvents:pt.current},_a(dn.viz[0],Gt,wt)))))};var Lo=e(66864),bo=e(94354),Rr=e(10880);const ni=[{label:"None",value:0,description:"Show all tick marks"},{label:"Small",value:100,description:"Require 100px spacing"},{label:"Medium",value:200,description:"Require 200px spacing"},{label:"Large",value:300,description:"Require 300px spacing"}],yl=F=>{let se=F.value??0;const fe=se<0;fe&&(se*=-1);let Pe=ni[0];for(const ze of ni)if(Pe=ze,se<=Pe.value)break;const xe=ze=>{F.onChange(ze*(fe?-1:1))},Ue=()=>{F.onChange(F.value*-1)};return C.createElement(Lo.Gy,null,C.createElement(bo.z,{value:Pe.value,options:ni,onChange:xe}),se!==0&&C.createElement(yr.m,{content:"Require space from the right side",placement:"top"},C.createElement("div",null,C.createElement(Rr.S,{value:fe,onChange:Ue,label:"RTL"}))))};var is=e(38824);class ai{getListWithDefaults(se){return se.getListAppender({name:is.m.BarChart,pluginId:"barchart",options:{showValue:xt.yL.Never,legend:{calcs:[],displayMode:xt.lm.List,showLegend:!0,placement:"right"}},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:fe=>{fe.options.barWidth=.8}}})}getSuggestionsForData(se){const fe=this.getListWithDefaults(se),{dataSummary:Pe}=se;Pe.frameCount===1&&(!Pe.hasNumberField||!Pe.hasStringField||Pe.rowCountTotal>50||(fe.append({name:is.m.BarChart}),Pe.numberFieldCount>1&&(fe.append({name:is.m.BarChartStacked,options:{stacking:xt.gs.Normal}}),fe.append({name:is.m.BarChartStackedPercent,options:{stacking:xt.gs.Percent}})),fe.append({name:is.m.BarChartHorizontal,options:{orientation:Ts.wV.Horizontal}}),Pe.numberFieldCount>1&&(fe.append({name:is.m.BarChartHorizontalStacked,options:{stacking:xt.gs.Normal,orientation:Ts.wV.Horizontal}}),fe.append({name:is.m.BarChartHorizontalStackedPercent,options:{orientation:Ts.wV.Horizontal,stacking:xt.gs.Percent}}))))}}const go=new L.m(El).useFieldConfig({standardOptions:{[zs.uo.Color]:{settings:{byValueSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Es.Y.PaletteClassic}}},useCustomConfig:F=>{const se=ti;F.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:se.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:se.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:Ir.t.fillGradient[0].value,settings:{options:Ir.t.fillGradient}}),F.addSelect({category:["Graph styles"],name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:xt.NU.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:xt.NU.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),F.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:xt.Ly.Off},settings:{options:Ir.t.thresholdsDisplayModes},editor:yo.D,override:yo.D,process:to.hS,shouldApply:()=>!0}),Ho.r(F,se,!1),Ar.e(F)}}).setPanelOptions((F,se)=>{const fe=Ni(se.data,R.$.theme2,se.options??{});let Pe="First string or time field";const xe="viz"in fe?fe.viz[0]:void 0;if(xe?.fields?.length){const Ue=xe.fields[0];Pe+=` (${(0,ts.Ct)(Ue,xe)})`}F.addFieldNamePicker({path:"xField",name:"X Axis",settings:{placeholderText:Pe}}).addRadio({path:"orientation",name:"Orientation",settings:{options:[{value:Ts.wV.Auto,label:"Auto"},{value:Ts.wV.Horizontal,label:"Horizontal"},{value:Ts.wV.Vertical,label:"Vertical"}]},defaultValue:Wr.orientation}).addSliderInput({path:"xTickLabelRotation",name:"Rotate x-axis tick labels",defaultValue:Wr.xTickLabelRotation,settings:{min:-90,max:90,step:15,marks:{"-90":"-90\xB0","-45":"-45\xB0",0:"0\xB0",45:"45\xB0",90:"90\xB0"},included:!1}}).addNumberInput({path:"xTickLabelMaxLength",name:"X-axis tick label max length",description:"X-axis labels will be truncated to the length provided",settings:{placeholder:"None",min:0},showIf:Ue=>Ue.xTickLabelRotation!==0}).addCustomEditor({id:"xTickLabelSpacing",path:"xTickLabelSpacing",name:"X-axis labels minimum spacing",defaultValue:Wr.xTickLabelSpacing,editor:yl}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:xt.yL.Auto,label:"Auto"},{value:xt.yL.Always,label:"Always"},{value:xt.yL.Never,label:"Never"}]},defaultValue:Wr.showValue}).addRadio({path:"stacking",name:"Stacking",settings:{options:Ir.t.stacking},defaultValue:Wr.stacking}).addSliderInput({path:"groupWidth",name:"Group width",defaultValue:Wr.groupWidth,settings:{min:0,max:1,step:.01},showIf:(Ue,ze)=>Ue.stacking&&Ue.stacking!==xt.gs.None?!1:fi(ze)!==1}).addSliderInput({path:"barWidth",name:"Bar width",defaultValue:Wr.barWidth,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"barRadius",name:"Bar radius",defaultValue:Wr.barRadius,settings:{min:0,max:.5,step:.05}}).addBooleanSwitch({path:"fullHighlight",name:"Highlight full area on hover",defaultValue:Wr.fullHighlight}),F.addFieldNamePicker({path:"colorByField",name:"Color by field",description:"Use the color value for a sibling field to color each bar value."}),(!se.options?.fullHighlight||se.options?.stacking===xt.gs.None)&&_r.D(F),ir.H(F),Go.I(F,!1)}).setSuggestionsSupplier(new ai);function fi(F){let se=0;if(F)for(const fe of F)for(const Pe of fe.fields)Pe.type===Zn.PU.number&&se++;return se}var wi=e(63250),gi=e(23799);const Fi=F=>(0,wi._$)(F);var sl=e(58384),co=e(17516);class Wi{getSuggestionsForData(se){const{dataSummary:fe}=se;if(!fe.hasData||!fe.hasNumberField)return;const Pe=se.getListAppender({name:"",pluginId:"bargauge",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}});fe.numberFieldCount>50||(fe.hasStringField&&fe.frameCount===1&&fe.rowCountTotal<30?(Pe.append({name:is.m.BarGaugeBasic,options:{reduceOptions:{values:!0,calcs:[]},displayMode:xt.eX.Basic,orientation:Ts.wV.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),Pe.append({name:is.m.BarGaugeLCD,options:{reduceOptions:{values:!0,calcs:[]},displayMode:xt.eX.Lcd,orientation:Ts.wV.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})):(Pe.append({name:is.m.BarGaugeBasic,options:{displayMode:xt.eX.Basic,orientation:Ts.wV.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),Pe.append({name:is.m.BarGaugeLCD,options:{displayMode:xt.eX.Lcd,orientation:Ts.wV.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})))}}const Ki=new L.m(sl.d).useFieldConfig().setPanelOptions(F=>{(0,gi.L)(F),(0,gi.h)(F),Go.I(F),F.addRadio({path:"displayMode",name:"Display mode",settings:{options:[{value:xt.eX.Gradient,label:"Gradient"},{value:xt.eX.Lcd,label:"Retro LCD"},{value:xt.eX.Basic,label:"Basic"}]},defaultValue:co.K.displayMode}).addRadio({path:"valueMode",name:"Value display",settings:{options:[{value:xt.$l.Color,label:"Value color"},{value:xt.$l.Text,label:"Text color"},{value:xt.$l.Hidden,label:"Hidden"}]},defaultValue:co.K.valueMode}).addRadio({path:"namePlacement",name:"Name placement",settings:{options:[{value:xt.TZ.Auto,label:"Auto"},{value:xt.TZ.Top,label:"Top"},{value:xt.TZ.Left,label:"Left"}]},defaultValue:co.K.namePlacement,showIf:se=>se.orientation!==Ts.wV.Vertical}).addBooleanSwitch({path:"showUnfilled",name:"Show unfilled area",description:"When enabled renders the unfilled region as gray",defaultValue:co.K.showUnfilled,showIf:se=>se.displayMode!=="lcd"}).addRadio({path:"sizing",name:"Bar size",settings:{options:[{value:xt.T6.Auto,label:"Auto"},{value:xt.T6.Manual,label:"Manual"}]},defaultValue:co.K.sizing}).addSliderInput({path:"minVizWidth",name:"Min width",description:"Minimum column width (vertical orientation)",defaultValue:co.K.minVizWidth,settings:{min:0,max:300,step:1},showIf:se=>se.sizing===xt.T6.Manual&&(se.orientation===Ts.wV.Auto||se.orientation===Ts.wV.Vertical)}).addSliderInput({path:"minVizHeight",name:"Min height",description:"Minimum row height (horizontal orientation)",defaultValue:co.K.minVizHeight,settings:{min:0,max:300,step:1},showIf:se=>se.sizing===xt.T6.Manual&&(se.orientation===Ts.wV.Auto||se.orientation===Ts.wV.Horizontal)}).addSliderInput({path:"maxVizHeight",name:"Max height",description:"Maximum row height (horizontal orientation)",defaultValue:co.K.maxVizHeight,settings:{min:0,max:300,step:1},showIf:se=>se.sizing===xt.T6.Manual&&(se.orientation===Ts.wV.Auto||se.orientation===Ts.wV.Horizontal)})}).setPanelChangeHandler(wi.gl).setMigrationHandler(Fi).setSuggestionsSupplier(new Wi);var so=e(41706),$i=e(90708),Lr=e(77455),Bo=e(10175),Pr=e(74863),Uo=e(55129);const Hr=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),Vi=Array(53);for(let F=0;F<Vi.length;F++)Vi[F]=2**F;const Dl=(F,se=1)=>F==null?"-":F.toFixed(se),Pl={drawStyle:xt.GR.Line,showPoints:xt.yL.Auto,axisPlacement:xt.vM.Auto},pi=({frame:F,theme:se,timeZones:fe,getTimeRange:Pe,eventBus:xe,sync:Ue,allFrames:ze,renderers:Xe,tweakScale:ot=Tt=>Tt,tweakAxis:lt=Tt=>Tt,eventsScope:pt="__global_",hoverProximity:Et})=>{const Tt=new Oa.e(fe[0]);let yt;Tt.setPrepData(Mn=>(yt=Mn[0],(0,zr.bq)(Mn[0],Tt.getStackingGroups())));const Nt=F.fields[0];if(!Nt)return Tt;const Gt="x";let Bt="_x",wt="";const Qt=Nt.config.custom?.axisPlacement!==xt.vM.Hidden?xt.vM.Bottom:xt.vM.Hidden,sn=Nt.config.custom?.axisPlacement!==xt.vM.Hidden;if(Nt.type===Zn.PU.time){Bt="time",Tt.addScale({scaleKey:Gt,orientation:xt.Lt.Horizontal,direction:xt.ON.Right,isTime:!0,range:()=>{const dn=Pe();return[dn.from.valueOf(),dn.to.valueOf()]}});const Mn=fe.length>1?(dn,Rn)=>Rn.map((Dn,ea)=>ea<2?null:Dn):void 0;for(let dn=0;dn<fe.length;dn++){const Rn=fe[dn];Tt.addAxis({scaleKey:Gt,isTime:!0,placement:Qt,show:sn,label:Nt.config.custom?.axisLabel,timeZone:Rn,theme:se,grid:{show:dn===0&&Nt.config.custom?.axisGridShow},filter:Mn})}fe.length>1&&Tt.addHook("drawAxes",dn=>{dn.ctx.save(),dn.ctx.fillStyle=se.colors.text.primary,dn.ctx.textAlign="left",dn.ctx.textBaseline="bottom";let Rn=0;dn.axes.forEach(Dn=>{if(Dn.side===2){let ea=Dn._pos+Dn._size;dn.ctx.fillText(fe[Rn],dn.bbox.left,ea*Ss.A.pxRatio),Rn++}}),dn.ctx.restore()})}else Nt.config.unit&&(Bt=Nt.config.unit),Tt.addScale({scaleKey:Gt,orientation:xt.Lt.Horizontal,direction:xt.ON.Right,range:(Mn,dn,Rn)=>[Nt.config.min??dn,Nt.config.max??Rn]}),Tt.addAxis({scaleKey:Gt,placement:Qt,show:sn,label:Nt.config.custom?.axisLabel,theme:se,grid:{show:Nt.config.custom?.axisGridShow},formatValue:(Mn,dn)=>(0,xs.cN)(Nt.display(Mn,dn))});let Xt=Xe?.flatMap(Mn=>Object.values(Mn.fieldMap).filter(dn=>Mn.indicesOnly.indexOf(dn)===-1))??[],In;for(let Mn=1;Mn<F.fields.length;Mn++){const dn=F.fields[Mn],Rn={...dn.config,custom:{...Pl,...dn.config.custom}},Dn=Rn.custom;if(dn===Nt||dn.type!==Zn.PU.number&&dn.type!==Zn.PU.enum)continue;let ea=dn.display??Dl;dn.config.custom?.stacking?.mode===xt.gs.Percent&&(ea=(0,Hs.J)({field:{...dn,config:{...dn.config,unit:"percentunit"}},theme:se}));const Gn=(0,Uo.M)(Rn,dn.type),ia=(0,Us.Qi)(dn),Ra=(0,Us.lz)(dn,se).color;if(Tt.addScale(ot({scaleKey:Gn,orientation:xt.Lt.Vertical,direction:xt.ON.Up,distribution:Dn.scaleDistribution?.type,log:Dn.scaleDistribution?.log,linearThreshold:Dn.scaleDistribution?.linearThreshold,min:dn.config.min,max:dn.config.max,softMin:Dn.axisSoftMin,softMax:Dn.axisSoftMax,centeredZero:Dn.axisCenteredZero,range:Dn.stacking?.mode===xt.gs.Percent?(kn,ua,Ia)=>(ua=ua<0?-1:0,Ia=Ia>0?1:0,[ua,Ia]):dn.type===Zn.PU.enum?(kn,ua,Ia)=>[-1,dn.config.type.enum.text.length]:void 0,decimals:dn.config.decimals},dn)),wt||(wt=Gn),Dn.axisPlacement!==xt.vM.Hidden){let kn;Dn.axisColorMode===xt.Y$.Series&&(ia.isByValue&&dn.config.custom?.gradientMode===xt.on.Scheme&&ia.id===Es.Y.Thresholds?kn=(0,Pr.pl)(1,se,ia,dn.config.thresholds):kn=Ra);const ua={border:{show:Dn.axisBorderShow||!1,width:1/devicePixelRatio,stroke:kn||se.colors.text.primary},ticks:{show:Dn.axisBorderShow||!1,stroke:kn||se.colors.text.primary},color:kn||se.colors.text.primary};let Ia,Pa,La;if(Hr.has(Rn.unit))Ia=Vi;else if(dn.type===Zn.PU.enum){let On=dn.config.type.enum.text;La=On.map((_n,jn)=>jn),Pa=On}Tt.addAxis(lt({scaleKey:Gn,label:Dn.axisLabel,size:Dn.axisWidth,placement:Dn.axisPlacement??xt.vM.Auto,formatValue:(On,_n)=>(0,xs.cN)(ea(On,_n)),theme:se,grid:{show:Dn.axisGridShow},decimals:dn.config.decimals,distr:Dn.scaleDistribution?.type,splits:La,values:Pa,incrs:Ia,...ua},dn))}const ms=Dn.drawStyle===xt.GR.Points?xt.yL.Always:Dn.showPoints;let va=()=>null;Dn.spanNulls!==!0&&(va=(kn,ua,Ia,Pa)=>{let La=[],On=kn.series[ua];if(!Ia&&Pa&&Pa.length){const[_n,jn]=On.idxs,$a=kn.data[0],Ba=kn.data[ua],rs=Math.round(kn.valToPos($a[_n],"x",!0)),Xa=Math.round(kn.valToPos($a[jn],"x",!0));Pa[0][0]===rs&&La.push(_n);for(let Ms=0;Ms<Pa.length;Ms++){let Qs=Pa[Ms],io=Pa[Ms+1];if(io&&Qs[1]===io[0]){let Vs=kn.posToIdx(Qs[1],!0);if(Ba[Vs]==null)for(let Xr=1;Xr<100;Xr++){if(Ba[Vs+Xr]!=null){Vs+=Xr;break}if(Ba[Vs-Xr]!=null){Vs-=Xr;break}}La.push(Vs)}}Pa[Pa.length-1][1]===Xa&&La.push(jn)}return La.length?La:null});let{fillOpacity:ka}=Dn,oa=null,zn=null;if(dn.state?.origin){In||(In=po(F,ze));const kn=ze[dn.state.origin.frameIndex],ua=kn?.fields[dn.state.origin.fieldIndex],Ia=(0,ts.Ct)(ua??dn,kn,ze);if(Xt.indexOf(Ia)>=0)oa=()=>null,zn=()=>{};else if(Dn.transform===xt.NU.Constant){const Pa=Ss.A.paths.linear();oa=(La,On)=>{const _n=La._data,jn=Pe();let $a=[jn.from.valueOf(),jn.to.valueOf()],Ba=_n[On].find(Ms=>Ms!=null),rs=[Ba,Ba],Xa=_n.slice();return Xa[0]=$a,Xa[On]=rs,Pa({...La,_data:Xa},On,0,1)}}if(Dn.fillBelowTo){const Pa=F.fields.find(jn=>Dn.fillBelowTo===jn.name||Dn.fillBelowTo===jn.config?.displayNameFromDS||Dn.fillBelowTo===(0,ts.Ct)(jn,F,ze)),La=Pa?(0,ts.Ct)(Pa,F,ze):Dn.fillBelowTo,On=In.get(Ia),_n=In.get(La);(0,Ke.isNumber)(_n)&&(0,Ke.isNumber)(On)?(Tt.addBand({series:[On,_n],fill:void 0}),ka||(ka=35)):ka=0}}let Kn;ia.id===Es.Y.Thresholds&&(Kn=kn=>(0,Us.lz)(yt.fields[kn],se).color),Tt.addSeries({pathBuilder:oa,pointsBuilder:zn,scaleKey:Gn,showPoints:ms,pointsFilter:va,colorMode:ia,fillOpacity:ka,theme:se,dynamicSeriesColor:Kn,drawStyle:Dn.drawStyle,lineColor:Dn.lineColor??Ra,lineWidth:Dn.lineWidth,lineInterpolation:Dn.lineInterpolation,lineStyle:Dn.lineStyle,barAlignment:Dn.barAlignment,barWidthFactor:Dn.barWidthFactor,barMaxWidth:Dn.barMaxWidth,pointSize:Dn.pointSize,spanNulls:Dn.spanNulls||!1,show:!Dn.hideFrom?.viz,gradientMode:Dn.gradientMode,thresholds:Rn.thresholds,hardMin:dn.config.min,hardMax:dn.config.max,softMin:Dn.axisSoftMin,softMax:Dn.axisSoftMax,dataFrameFieldIndex:dn.state?.origin}),Dn.thresholdsStyle&&Rn.thresholds&&(Dn.thresholdsStyle.mode??xt.Ly.Off)!==xt.Ly.Off&&Tt.addThresholds({config:Dn.thresholdsStyle,thresholds:Rn.thresholds,scaleKey:Gn,theme:se,hardMin:dn.config.min,hardMax:dn.config.max,softMin:Dn.axisSoftMin,softMax:Dn.axisSoftMax})}let on=(0,zr.ro)(F);Tt.setStackingGroups(on),Xe?.forEach(Mn=>{In||(In=po(F,ze));let dn={};for(let Rn in Mn.fieldMap){let Dn=Mn.fieldMap[Rn];dn[Rn]=In.get(Dn)}Mn.init(Tt,dn)}),Tt.scaleKeys=[Gt,wt];const bn=15;let wn={hover:{prox:(Mn,dn,Rn)=>Et??(Mn.data[dn][Rn]===null?bn:null),skip:[null]},focus:{prox:Et??30}};if(Ue&&Ue()!==Ga.y.Off&&Nt.type===Zn.PU.time){const Mn={point:{[Gt]:null,[wt]:null},data:F},dn=new Ya.b_(Mn).setTags(["uplot"]),Rn=new Ya.ql().setTags(["uplot"]);wn.sync={key:pt,filters:{pub:(Dn,ea,Gn,ia,_a,Ra,ms)=>Ue&&Ue()===Ga.y.Off?!1:(Mn.rowIndex=ms,Gn<0&&ia<0?xe.publish(Rn):(Mn.point[Bt]=ea.posToVal(Gn,Gt),Mn.point[wt]=ea.posToVal(ia,wt),Mn.point.panelRelY=ia>0?ia/Ra:1,xe.publish(dn),dn.payload.down=void 0),!0)},scales:[Gt,null]}}return Tt.setSync(),Tt.setCursor(wn),Tt};function po(F,se){const fe=new Map;return F.fields.forEach((Pe,xe)=>{const Ue=Pe.state?.origin;if(Ue){const ze=se[Ue.frameIndex]?.fields[Ue.fieldIndex];ze&&fe.set((0,ts.Ct)(ze,se[Ue.frameIndex],se),xe)}}),fe}const Cl=["legend","options","theme"];class _i extends C.Component{constructor(){super(...arguments),this.prepConfig=(se,fe,Pe)=>{const{eventBus:xe,eventsScope:Ue,sync:ze}=this.context,{theme:Xe,timeZone:ot,options:lt,renderers:pt,tweakAxis:Et,tweakScale:Tt}=this.props;return pi({frame:se,theme:Xe,timeZones:Array.isArray(ot)?ot:[ot],getTimeRange:Pe,eventBus:xe,sync:ze,allFrames:fe,renderers:pt,tweakScale:Tt,tweakAxis:Et,eventsScope:Ue,hoverProximity:lt?.tooltip?.hoverProximity})},this.renderLegend=se=>{const{legend:fe,frames:Pe}=this.props;return!se||fe&&!fe.showLegend||!(0,Vn.t)(se,Pe)?null:C.createElement(Vn.$,{data:Pe,config:se,...fe})}}render(){return C.createElement(ar.o,{...this.props,prepConfig:this.prepConfig,propsToDiff:Cl,renderLegend:this.renderLegend})}}_i.contextType=Ft.e4;const hi=(0,k.cV)(_i);hi.displayName="TimeSeries";var si=e(22731),vi=e(1604),No=e(18491),qe=e(36376),tt=e(24284);const nt=F=>se=>{const fe=F.visualization.getColorByName(se?.color||tt.Mk);return{markerTriangle:(0,K.css)`
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-bottom: 4px solid ${fe};
      `,markerBar:(0,K.css)`
        display: block;
        width: calc(100%);
        height: 5px;
        background: ${fe};
      `}};var ut=e(5805),Ot=e(37151),Wt=e(51253),Kt=e(88575),tn=e(21744),un=e(16504),yn=e(99818),$n=e(10154);const na=C.forwardRef(({annotation:F,onSave:se,onDismiss:fe,timeFormatter:Pe,className:xe,...Ue},ze)=>{const Xe=(0,k.of)(Qn),ot=(0,Ft.d2)(),lt=(0,C.useRef)(null);(0,Ot.A)(lt,()=>{fe()});const[pt,Et]=(0,ut.default)(async In=>{const on=await ot.onAnnotationCreate(In);return se&&se(),on}),[Tt,yt]=(0,ut.default)(async In=>{const on=await ot.onAnnotationUpdate(In);return se&&se(),on}),Nt=F.id!==void 0,Gt=F.time!==F.timeEnd,Bt=Nt?yt:Et,wt=Nt?Tt:pt,Qt=Gt?`${Pe(F.time)} - ${Pe(F.timeEnd)}`:Pe(F.time),sn=({tags:In,description:on})=>{Bt({id:F.id,tags:In,description:on,from:Math.round(F.time),to:Math.round(F.timeEnd)})},Xt=C.createElement("div",{ref:ze,className:(0,K.cx)(Xe.editor,xe),...Ue},C.createElement("div",{className:Xe.header},C.createElement(Lo.Gy,{justify:"space-between",align:"center"},C.createElement("div",{className:Xe.title},"Add annotation"),C.createElement("div",{className:Xe.ts},Qt))),C.createElement("div",{className:Xe.editorForm},C.createElement(Wt.l,{onSubmit:sn,defaultValues:{description:F?.text,tags:F?.tags||[]}},({register:In,errors:on,control:bn})=>C.createElement(C.Fragment,null,C.createElement(Kt.D,{label:"Description",invalid:!!on.description,error:on?.description?.message},C.createElement(tn.f,{...In("description",{required:"Annotation description is required"})})),C.createElement(Kt.D,{label:"Tags"},C.createElement(un.e,{control:bn,name:"tags",render:({field:{ref:Bn,onChange:wn,...Mn}})=>C.createElement(yn.$,{allowCustomValue:!0,placeholder:"Add tags",onChange:wn,tagOptions:$n.vy,tags:Mn.value})})),C.createElement(Lo.Gy,{justify:"flex-end"},C.createElement(Q.$n,{size:"sm",variant:"secondary",onClick:fe,fill:"outline"},"Cancel"),C.createElement(Q.$n,{size:"sm",type:"submit",disabled:wt?.loading},wt?.loading?"Saving":"Save"))))));return C.createElement(C.Fragment,null,C.createElement("div",{className:Xe.backdrop}),C.createElement("div",{ref:lt},Xt))});na.displayName="AnnotationEditorForm";const Qn=F=>({backdrop:(0,K.css)`
      label: backdrop;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: ${F.zIndex.navbarFixed};
    `,editorContainer:(0,K.css)`
      position: absolute;
      top: calc(100% + 10px);
      transform: translate3d(-50%, 0, 0);
    `,editor:(0,K.css)`
      background: ${F.colors.background.primary};
      box-shadow: ${F.shadows.z3};
      z-index: ${F.zIndex.dropdown};
      border: 1px solid ${F.colors.border.weak};
      border-radius: ${F.shape.radius.default};
      width: 460px;
    `,editorForm:(0,K.css)`
      padding: ${F.spacing(1)};
    `,header:(0,K.css)`
      border-bottom: 1px solid ${F.colors.border.weak};
      padding: ${F.spacing(1.5,1)};
    `,title:(0,K.css)`
      font-weight: ${F.typography.fontWeightMedium};
    `,ts:(0,K.css)`
      font-size: ${F.typography.bodySmall.fontSize};
      color: ${F.colors.text.secondary};
    `}),Jn=({onDismiss:F,onSave:se,timeZone:fe,data:Pe,selection:xe,annotation:Ue,style:ze})=>{const Xe=(0,k.$j)(),ot=(0,k.of)(ba),lt=(0,k.of)(nt),pt=[(0,No.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,No.BN)()],{context:Et,refs:Tt,floatingStyles:yt}=(0,qe.we)({open:!0,placement:"bottom",onOpenChange:Xt=>{Xt||F()},middleware:pt,whileElementsMounted:No.ll,strategy:"fixed"}),Nt=(0,qe.s9)(Et),{getReferenceProps:Gt,getFloatingProps:Bt}=(0,qe.bv)([Nt]);let wt=Pe.fields[0];if(!wt)return null;const Qt=wt.display||(0,Hs.J)({field:wt,timeZone:fe,theme:Xe}),sn=xe.min!==xe.max;return C.createElement(sa.ZL,null,C.createElement(C.Fragment,null,C.createElement("div",{style:ze},C.createElement("div",{className:(0,K.cx)((0,K.css)({position:"absolute",top:xe.bbox.top,left:xe.bbox.left,width:xe.bbox.width,height:xe.bbox.height}),sn?ot.overlayRange(Ue):ot.overlay(Ue))},C.createElement("div",{ref:Tt.setReference,className:sn?(0,K.cx)(lt(Ue).markerBar,ot.markerBar):(0,K.cx)(lt(Ue).markerTriangle,ot.markerTriangle),...Gt()}))),C.createElement(na,{annotation:Ue||{time:xe.min,timeEnd:xe.max},timeFormatter:Xt=>Qt(Xt).text,onSave:se,onDismiss:F,ref:Tt.setFloating,style:yt,...Bt()})))},ba=F=>({overlay:se=>{const fe=F.visualization.getColorByName(se?.color||tt.Mk);return(0,K.css)({borderLeft:`1px dashed ${fe}`})},overlayRange:se=>{const fe=F.visualization.getColorByName(se?.color||tt.Mk);return(0,K.css)({background:cr.alpha(fe,.1),borderLeft:`1px dashed ${fe}`,borderRight:`1px dashed ${fe}`})},markerTriangle:(0,K.css)({top:"calc(100% + 2px)",left:"-4px",position:"absolute"}),markerBar:(0,K.css)({top:"100%",left:0,position:"absolute"})}),ha=({data:F,timeZone:se,config:fe,children:Pe})=>{const xe=(0,C.useRef)(),[Ue,ze]=(0,C.useState)(),[Xe,ot]=(0,C.useState)(!1),[lt,pt]=(0,C.useState)(null),Et=(0,vi.A)(),Tt=(0,C.useCallback)(()=>{pt(null),xe.current&&xe.current.setSelect({top:0,left:0,width:0,height:0}),ot(!1)},[ot,pt]);(0,C.useLayoutEffect)(()=>{let Nt=!1;fe.addHook("init",Bt=>{xe.current=Bt;const wt=Bt.hooks.setSelect;if(wt)for(let Qt=0;Qt<wt.length;Qt++){const sn=wt[Qt];sn!==Gt&&(wt[Qt]=(...Xt)=>{!Nt&&sn(...Xt)})}}),fe.addHook("syncRect",(Bt,wt)=>{Et()&&ze(wt)});const Gt=Bt=>{Nt&&(ot(!0),pt({min:Bt.posToVal(Bt.select.left,"x"),max:Bt.posToVal(Bt.select.left+Bt.select.width,"x"),bbox:{left:Bt.select.left,top:0,height:Bt.select.height,width:Bt.select.width}}),Nt=!1)};fe.addHook("setSelect",Gt),fe.setCursor({bind:{mousedown:(Bt,wt,Qt)=>sn=>(Nt=sn.button===0&&(sn.metaKey||sn.ctrlKey),Qt(sn),null),mouseup:(Bt,wt,Qt)=>sn=>(Nt&&Bt.select.width===0&&(Bt.select.left=Bt.cursor.left,Bt.select.height=Bt.bbox.height/window.devicePixelRatio),Qt(sn),null)}})},[fe,ze,Et]);const yt=(0,C.useCallback)(({coords:Nt})=>{if(!xe.current||!Ue||!Nt)return;const Gt=xe.current.posToVal(Nt.plotCanvas.x,"x");Gt&&(pt({min:Gt,max:Gt,bbox:{left:Nt.plotCanvas.x,top:0,height:Ue.height,width:0}}),ot(!0))},[Ue]);return C.createElement(C.Fragment,null,Xe&&lt&&Ue&&C.createElement(Jn,{selection:lt,onDismiss:Tt,onSave:Tt,data:F,timeZone:se,style:{position:"absolute",top:`${Ue.top}px`,left:`${Ue.left}px`,width:`${Ue.width}px`,height:`${Ue.height}px`}}),Pe?Pe({startAnnotating:yt}):null)};var Aa=e(78368),ma=e(78226),Ua=e(72724),Ja=e(42994),da=e(16797),Za=e(40672),es=e(29158),Os=e(78369);const Rs=({annotation:F,timeFormatter:se,canEdit:fe,canDelete:Pe,onEdit:xe,onDelete:Ue})=>{const ze=(0,k.of)(Xs),Xe=se(F.time),ot=se(F.timeEnd);let lt=F.text;const pt=F.tags;let Et="",Tt,yt,Nt=null;const Gt=C.createElement("span",{className:ze.time},F.isRegion?`${Xe} - ${ot}`:Xe);if(F.login&&F.avatarUrl&&(Tt=C.createElement("img",{className:ze.avatar,alt:"Annotation avatar",src:F.avatarUrl})),F.alertId!==void 0&&F.newState){const Bt=Ve.A.getStateDisplayModel(F.newState);Nt=C.createElement("div",{className:ze.alertState},C.createElement("i",{className:Bt.stateClass},Bt.text)),Et=Ve.A.getAlertAnnotationInfo(F)}else F.title&&(lt=F.title+"<br />"+(typeof lt=="string"?lt:""));return(fe||Pe)&&(yt=C.createElement("div",{className:ze.editControls},fe&&C.createElement(es.K,{name:"pen",size:"sm",onClick:xe,tooltip:"Edit"}),Pe&&C.createElement(es.K,{name:"trash-alt",size:"sm",onClick:Ue,tooltip:"Delete"}))),C.createElement("div",{className:ze.wrapper},C.createElement("div",{className:ze.header},C.createElement(Lo.Gy,{justify:"space-between",align:"center",spacing:"md"},C.createElement("div",{className:ze.meta},C.createElement("span",null,Tt,Nt),Gt),yt)),C.createElement("div",{className:ze.body},lt&&C.createElement("div",{dangerouslySetInnerHTML:{__html:Za.sQ.sanitize(lt)}}),Et,C.createElement(C.Fragment,null,C.createElement(Lo.Gy,{spacing:"xs",wrap:!0},pt?.map((Bt,wt)=>C.createElement(Os.v,{name:Bt,key:`${Bt}-${wt}`}))))))};Rs.displayName="AnnotationTooltip";const Xs=F=>({wrapper:(0,K.css)`
      max-width: 400px;
    `,commentWrapper:(0,K.css)`
      margin-top: 10px;
      border-top: 2px solid #2d2b34;
      height: 30vh;
      overflow-y: scroll;
      padding: 0 3px;
    `,header:(0,K.css)`
      padding: ${F.spacing(.5,1)};
      border-bottom: 1px solid ${F.colors.border.weak};
      font-size: ${F.typography.bodySmall.fontSize};
      display: flex;
    `,meta:(0,K.css)`
      display: flex;
      justify-content: space-between;
    `,editControls:(0,K.css)`
      display: flex;
      align-items: center;
      > :last-child {
        margin-right: 0;
      }
    `,avatar:(0,K.css)`
      border-radius: ${F.shape.radius.circle};
      width: 16px;
      height: 16px;
      margin-right: ${F.spacing(1)};
    `,alertState:(0,K.css)`
      padding-right: ${F.spacing(1)};
      font-weight: ${F.typography.fontWeightMedium};
    `,time:(0,K.css)`
      color: ${F.colors.text.secondary};
      font-weight: normal;
      display: inline-block;
      position: relative;
      top: 1px;
    `,body:(0,K.css)`
      padding: ${F.spacing(1)};

      a {
        color: ${F.colors.text.link};
        &:hover {
          text-decoration: underline;
        }
      }
    `}),Ds=6;function Br({annotation:F,timeZone:se,width:fe}){const{canEditAnnotations:Pe,canDeleteAnnotations:xe,...Ue}=(0,Ft.d2)(),ze=(0,k.of)(nt),Xe=(0,k.of)(mr),[ot,lt]=(0,C.useState)(!1),[pt,Et]=(0,C.useState)(!1),Tt=[(0,No.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,No.BN)()],{context:yt,refs:Nt,floatingStyles:Gt}=(0,qe.we)({open:ot,placement:"bottom",onOpenChange:lt,middleware:Tt,whileElementsMounted:No.ll,strategy:"fixed"}),Bt=(0,qe.Mk)(yt,{handleClose:(0,qe.iB)()}),wt=(0,qe.s9)(yt),{getReferenceProps:Qt,getFloatingProps:sn}=(0,qe.bv)([wt,Bt]),Xt=(0,C.useCallback)(()=>{Et(!0),lt(!1)},[Et,lt]),In=(0,C.useCallback)(()=>{Ue.onAnnotationDelete&&Ue.onAnnotationDelete(F.id)},[F,Ue]),on=(0,C.useCallback)(dn=>(0,Ua.LE)(dn,{format:Ja.WC.fullDate,timeZone:se}),[se]),bn=(0,C.useCallback)(()=>C.createElement(Rs,{annotation:F,timeFormatter:on,onEdit:Xt,onDelete:In,canEdit:Pe?Pe(F.dashboardUID):!1,canDelete:xe?xe(F.dashboardUID):!1}),[Pe,xe,In,Xt,on,F]),Bn=!!F.isRegion&&fe>Ds;let wn=`${fe/2}px`,Mn=C.createElement("div",{className:ze(F).markerTriangle,style:{left:wn,position:"relative",transform:"translate3d(-100%,-50%, 0)"}});return Bn&&(Mn=C.createElement("div",{className:ze(F).markerBar,style:{width:`${fe}px`,transform:"translate3d(0,-50%, 0)"}})),C.createElement(C.Fragment,null,C.createElement("div",{ref:Nt.setReference,className:Bn?void 0:Xe.markerWrapper,"data-testid":Te.Tp.pages.Dashboard.Annotations.marker,...Qt()},Mn),ot&&C.createElement(sa.ZL,null,C.createElement("div",{className:Xe.tooltip,ref:Nt.setFloating,style:Gt,...sn()},bn())),pt&&C.createElement(sa.ZL,null,C.createElement(na,{onDismiss:()=>Et(!1),onSave:()=>Et(!1),timeFormatter:on,annotation:F,ref:Nt.setFloating,style:Gt,...sn()})))}const mr=F=>({markerWrapper:(0,K.css)({label:"markerWrapper",padding:F.spacing(0,.5,.5,.5)}),tooltip:(0,K.css)({...(0,da.getTooltipContainerStyles)(F),padding:0})}),Zs=({annotations:F,timeZone:se,config:fe,disableCanvasRendering:Pe=!1})=>{const xe=(0,k.$j)(),Ue=(0,C.useRef)(),ze=(0,C.useRef)();(0,C.useEffect)(()=>{const lt=[];for(const pt of F)lt.push(new Aa.R(pt));return ze.current=lt,()=>{ze.current=[]}},[F]),(0,C.useLayoutEffect)(()=>{fe.addHook("init",lt=>{Ue.current=lt}),fe.addHook("draw",lt=>{if(!ze.current)return null;const pt=lt.ctx;if(!pt)return;pt.save(),pt.beginPath(),pt.rect(lt.bbox.left,lt.bbox.top,lt.bbox.width,lt.bbox.height),pt.clip();const Et=(Tt,yt)=>{pt.beginPath(),pt.lineWidth=2,pt.strokeStyle=yt,pt.setLineDash([5,5]),pt.moveTo(Tt,lt.bbox.top),pt.lineTo(Tt,lt.bbox.top+lt.bbox.height),pt.stroke(),pt.closePath()};if(!Pe)for(let Tt=0;Tt<ze.current.length;Tt++){const yt=ze.current[Tt];for(let Nt=0;Nt<yt.length;Nt++){const Gt=yt.get(Nt);if(!Gt.time)continue;let Bt=lt.valToPos(Gt.time,"x",!0);const wt=xe.visualization.getColorByName(Gt.color);if(Et(Bt,wt),Gt.isRegion&&Gt.timeEnd){let Qt=lt.valToPos(Gt.timeEnd,"x",!0);Et(Qt,wt),pt.fillStyle=cr.alpha(wt,.1),pt.rect(Bt,lt.bbox.top,Qt-Bt,lt.bbox.height),pt.fill()}}}pt.restore()})},[fe,xe,Pe]);const Xe=(0,C.useCallback)((lt,pt)=>{const Tt=new Aa.R(lt).get(pt.fieldIndex);if(!Tt.time||!Ue.current)return;let yt=Ue.current.valToPos(Tt.time,"x");return yt<0&&(yt=0),{x:yt,y:Ue.current.bbox.height/window.devicePixelRatio+4}},[]),ot=(0,C.useCallback)((lt,pt)=>{let Et=0;const yt=new Aa.R(lt).get(pt.fieldIndex);if(!!yt.isRegion&&Ue.current){let Gt=Ue.current.valToPos(yt.time,"x"),Bt=Ue.current.valToPos(yt.timeEnd,"x");Gt<0&&(Gt=0),Bt>Ue.current.bbox.width/window.devicePixelRatio&&(Bt=Ue.current.bbox.width/window.devicePixelRatio),Et=Bt-Gt}return C.createElement(Br,{annotation:yt,timeZone:se,width:Et})},[se]);return C.createElement(ma.a,{id:"annotations",config:fe,events:F,renderEventMarker:ot,mapEventToXYCoords:Xe})};var sr=e(62567),Ur=e(29647),Cr=e(33083),Gr=e(59093),as=e(64539),qn=e(28122);const pa=({data:F,config:se,onClose:fe,timeZone:Pe,replaceVariables:xe,...Ue})=>{const[ze,Xe]=(0,C.useState)(null),[ot,lt]=(0,C.useState)(null),[pt,Et]=(0,C.useState)(!1);(0,C.useLayoutEffect)(()=>{let yt=null;se.addHook("init",Nt=>{Nt.over.addEventListener("click",Gt=>{yt!=null&&!Gt.metaKey&&!Gt.ctrlKey&&!Gt.shiftKey&&(Xe({viewport:{x:Gt.clientX,y:Gt.clientY},plotCanvas:{x:Gt.clientX-Nt.rect.left,y:Gt.clientY-Nt.rect.top}}),lt({seriesIdx:yt,dataIdx:Nt.cursor.idxs[yt]}),Et(!0))})}),se.addHook("setSeries",(Nt,Gt)=>{yt=Gt})},[se]);const Tt=(0,C.useMemo)(()=>Ue.defaultItems?Ue.defaultItems.map(yt=>({...yt,items:yt.items.map(Nt=>({...Nt,onClick:Gt=>{ze&&Nt.onClick?.(Gt,{coords:ze})}}))})):[],[ze,Ue.defaultItems]);return C.createElement(C.Fragment,null,pt&&ze&&C.createElement(Wa,{data:F,frames:Ue.frames,defaultItems:Tt,timeZone:Pe,selection:{point:ot,coords:ze},replaceVariables:xe,onClose:()=>{lt(null),Et(!1),fe&&fe()}}))},Wa=({selection:F,timeZone:se,defaultItems:fe,replaceVariables:Pe,data:xe,...Ue})=>{const ze=(0,C.useRef)(null),Xe=()=>{Ue.onClose&&Ue.onClose()};(0,Ur.A)(ze,()=>{Xe()});const ot=xe.fields[0];if(!ot)return null;const lt=fe?[...fe]:[];let pt=()=>null;if(F.point){const{seriesIdx:Tt,dataIdx:yt}=F.point,Nt=ot.display;if(Tt&&yt!==null){const Gt=xe.fields[Tt],Bt=Gt.display(Gt.values[yt]);Gt.config.links&&Gt.config.links.length>0&&Gt.getLinks&&lt.push({items:Gt.getLinks({valueRowIndex:yt}).map(Qt=>({label:Qt.title,ariaLabel:Qt.title,url:Qt.href,target:Qt.target,icon:Qt.target==="_self"?"link":"external-link-alt",onClick:Qt.onClick}))}),pt=()=>C.createElement(Cr.i,{timestamp:Nt(ot.values[yt]).text,displayValue:Bt,seriesColor:Bt.color,displayName:(0,ts.Ct)(Gt,xe,Ue.frames)})}}const Et=()=>lt?.map((Tt,yt)=>C.createElement(Gr.r,{key:`${Tt.label}${yt}`,label:Tt.label},(Tt.items||[]).map(Nt=>C.createElement(as.D,{key:Nt.url,url:Nt.url,label:Nt.label,target:Nt.target,icon:Nt.icon,active:Nt.active,onClick:Nt.onClick}))));return C.createElement(qn.t,{renderMenuItems:Et,renderHeader:pt,x:F.coords.viewport.x,y:F.coords.viewport.y,onClose:Xe})};var os=e(39522),Nr=e(79961),js=e(74007),vr=e(86106);const ls=({timeZone:F,dataFrame:se,dataFrameFieldIndex:fe,config:Pe,exemplarColor:xe,clickedExemplarFieldIndex:Ue,setClickedExemplarFieldIndex:ze})=>{const Xe=(0,k.of)(ho),[ot,lt]=(0,C.useState)(!1),[pt,Et]=(0,C.useState)(!1),[Tt,yt]=C.useState(null),[Nt,Gt]=C.useState(null),{styles:Bt,attributes:wt}=(0,os.E)(Tt,Nt,{modifiers:[{name:"preventOverflow",options:{altAxis:!0}},{name:"flip",options:{fallbackPlacements:["top","left-start"]}}]}),Qt=(0,C.useRef)();(0,C.useEffect)(()=>{Ue?.fieldIndex===fe.fieldIndex&&Ue?.frameIndex===fe.frameIndex||Et(!1)},[Ue,fe]);const sn=()=>{const Mn=[C.createElement("rect",{fill:xe,key:"diamond",x:"3.38672",width:"4.78985",height:"4.78985",transform:"rotate(45 3.38672 0)"}),C.createElement("path",{fill:xe,key:"x",d:"M1.94444 3.49988L0 5.44432L1.55552 6.99984L3.49996 5.05539L5.4444 6.99983L6.99992 5.44431L5.05548 3.49988L6.99983 1.55552L5.44431 0L3.49996 1.94436L1.5556 0L8.42584e-05 1.55552L1.94444 3.49988Z"}),C.createElement("path",{fill:xe,key:"triangle",d:"M4 0L7.4641 6H0.535898L4 0Z"}),C.createElement("rect",{fill:xe,key:"rectangle",width:"5",height:"5"}),C.createElement("path",{fill:xe,key:"pentagon",d:"M3 0.5L5.85317 2.57295L4.76336 5.92705H1.23664L0.146831 2.57295L3 0.5Z"}),C.createElement("path",{fill:xe,key:"plus",d:"m2.35672,4.2425l0,2.357l1.88558,0l0,-2.357l2.3572,0l0,-1.88558l-2.3572,0l0,-2.35692l-1.88558,0l0,2.35692l-2.35672,0l0,1.88558l2.35672,0z"})];return Mn[fe.frameIndex%Mn.length]},Xt=(0,C.useCallback)(()=>{Ue===void 0&&(Qt.current&&clearTimeout(Qt.current),lt(!0))},[lt,Ue]),In=()=>{Et(!0)},on=(0,C.useCallback)(()=>{Qt.current=setTimeout(()=>{lt(!1)},150)},[lt]),bn=(0,C.useCallback)(()=>{const Mn=se.fields.filter(Ra=>Ra.config.links?.length&&Ra.config.links?.length>0)||[],dn=[...Mn,...se.fields.filter(Ra=>!Mn.includes(Ra))],Rn=Ra=>(0,Ua.LE)(Ra,{format:Ja.WC.fullDate,timeZone:F}),Dn=()=>{Et(!1),lt(!1),ze(void 0)};let ea=[],Gn=[];dn.map((Ra,ms)=>{const va=Ra.values[fe.fieldIndex];Ra.config.links?.length&&Gn?.push(...Ra.getLinks?.({valueRowIndex:fe.fieldIndex})||[]);const ka=Ra.display?Ra.display(va):{text:`${va}`,numeric:+va};ea.push({name:Ra.name,value:va,valueString:(0,xs.cN)(ka),highlight:!1})});const ia={position:"relative",top:"35px",right:"5px",marginRight:0},_a=()=>R.$.featureToggles.newVizTooltips?C.createElement(C.Fragment,null,pt&&C.createElement(vr.d,{onClick:Dn,style:ia}),C.createElement(js.i,{displayValues:ea,links:Gn})):C.createElement("div",{className:Xe.wrapper},pt&&C.createElement(vr.d,{onClick:Dn}),C.createElement("div",{className:Xe.body},C.createElement("div",{className:Xe.header},C.createElement("span",{className:Xe.title},"Exemplars")),C.createElement("div",null,C.createElement("table",{className:Xe.exemplarsTable},C.createElement("tbody",null,dn.map((Ra,ms)=>{const va=Ra.values[fe.fieldIndex],ka=Ra.config.links?.length?Ra.getLinks?.({valueRowIndex:fe.fieldIndex}):void 0;return C.createElement("tr",{key:ms},C.createElement("td",{valign:"top"},Ra.name),C.createElement("td",null,C.createElement("div",{className:Xe.valueWrapper},C.createElement("span",null,Ra.type===Zn.PU.time?Rn(va):va),ka&&C.createElement(Nr.n,{links:ka}))))}))))));return C.createElement("div",{onMouseEnter:Xt,onMouseLeave:on,className:Xe.tooltip,ref:Gt,style:Bt.popper,...wt.popper},_a())},[wt.popper,se.fields,fe,Xt,on,Bt.popper,Xe,F,pt,ze]),Bn=Pe.getSeries().find(Mn=>Mn.props.dataFrameFieldIndex?.frameIndex===fe.frameIndex)?.props.lineColor,wn=()=>{ze(fe),In()};return C.createElement(C.Fragment,null,C.createElement("div",{ref:yt,onClick:wn,onKeyDown:Mn=>{Mn.key==="Enter"&&wn()},onMouseEnter:Xt,onMouseLeave:on,className:Xe.markerWrapper,"data-testid":Te.Tp.components.DataSource.Prometheus.exemplarMarker,role:"button",tabIndex:0},C.createElement("svg",{viewBox:"0 0 7 7",width:"7",height:"7",style:{fill:Bn},className:(0,K.cx)(Xe.marble,(ot||pt)&&Xe.activeMarble)},sn())),(ot||pt)&&C.createElement(sa.ZL,null,bn()))},ho=F=>{const se=F.isDark?F.v1.palette.dark2:F.v1.palette.white,fe=F.isDark?F.v1.palette.dark9:F.v1.palette.gray5,Pe=F.isDark?F.v1.palette.black:F.v1.palette.white,xe=F.isDark?F.v1.palette.dark3:F.v1.palette.gray6;return{markerWrapper:(0,K.css)({padding:"0 4px 4px 4px",width:"8px",height:"8px",boxSizing:"content-box",transform:"translate3d(-50%, 0, 0)","&:hover":{"> svg":{transform:"scale(1.3)",opacity:1,filter:"drop-shadow(0 0 8px rgba(0, 0, 0, 0.5))"}}}),marker:(0,K.css)({width:0,height:0,borderLeft:"4px solid transparent",borderRight:"4px solid transparent",borderBottom:`4px solid ${F.v1.palette.red}`,pointerEvents:"none"}),wrapper:(0,K.css)({background:se,border:`1px solid ${fe}`,borderRadius:F.shape.borderRadius(2),boxShadow:`0 0 20px ${Pe}`,padding:F.spacing(1)}),exemplarsTable:(0,K.css)({width:"100%","tr td":{padding:"5px 10px",whiteSpace:"nowrap",borderBottom:`4px solid ${F.components.panel.background}`},tr:{backgroundColor:F.colors.background.primary,"&:nth-child(even)":{backgroundColor:xe}}}),valueWrapper:(0,K.css)({display:"flex",flexDirection:"row",flexWrap:"wrap",columnGap:F.spacing(1),"> span":{flexGrow:0},"> *":{flex:"1 1",alignSelf:"center"}}),tooltip:(0,K.css)({background:"none",padding:0,overflowY:"auto",maxHeight:"95vh"}),header:(0,K.css)({background:fe,padding:"6px 10px",display:"flex"}),title:(0,K.css)({fontWeight:F.typography.fontWeightMedium,paddingRight:F.spacing(2),overflow:"hidden",display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",flexGrow:1}),body:(0,K.css)({fontWeight:F.typography.fontWeightMedium,borderRadius:F.shape.borderRadius(2),overflow:"hidden"}),marble:(0,K.css)({display:"block",opacity:.5,transition:"transform 0.15s ease-out"}),activeMarble:(0,K.css)({transform:"scale(1.3)",opacity:1,filter:"drop-shadow(0 0 8px rgba(0, 0, 0, 0.5))"})}},$s=({exemplars:F,timeZone:se,config:fe,visibleSeries:Pe})=>{const xe=(0,C.useRef)(),[Ue,ze]=(0,C.useState)();(0,C.useLayoutEffect)(()=>{fe.addHook("init",lt=>{xe.current=lt})},[fe]);const Xe=(0,C.useCallback)((lt,pt)=>{const Et=lt.fields.find(wt=>wt.name===Zn.LE),Tt=lt.fields.find(wt=>wt.name===Zn.Bc);if(!Et||!Tt||!xe.current)return;const yt=Object.keys(xe.current.scales).find(wt=>!["x","y"].some(Qt=>Qt===wt))??As.s,Nt=xe.current.scales[yt].min,Gt=xe.current.scales[yt].max;let Bt=Tt.values[pt.fieldIndex];return Nt!=null&&Bt<Nt&&(Bt=Nt),Gt!=null&&Bt>Gt&&(Bt=Gt),{x:xe.current.valToPos(Et.values[pt.fieldIndex],"x"),y:xe.current.valToPos(Bt,yt)}},[]),ot=(0,C.useCallback)((lt,pt)=>{const Et=Pe!==void 0?gs(Pe,lt,pt):!0,Tt=Pe!==void 0?wo(lt,pt,Pe):void 0;return Et?C.createElement(ls,{setClickedExemplarFieldIndex:ze,clickedExemplarFieldIndex:Ue,timeZone:se,dataFrame:lt,dataFrameFieldIndex:pt,config:fe,exemplarColor:Tt}):C.createElement(C.Fragment,null)},[fe,se,Pe,ze,Ue]);return C.createElement(ma.a,{config:fe,id:"exemplars",events:F,renderEventMarker:ot,mapEventToXYCoords:Xe})},zi=(F,se)=>{const fe=F.series.filter(xe=>xe.props.show),Pe=[];return se?.length&&fe.forEach(xe=>{const Ue=xe.props?.dataFrameFieldIndex?.frameIndex,ze=xe.props?.dataFrameFieldIndex?.fieldIndex;if(Ue!==void 0&&ze!==void 0){const Xe=se[Ue]?.fields[ze];Xe?.labels&&Pe.push({labels:Xe.labels,color:xe.props?.lineColor??""})}}),{labels:Pe,totalSeriesCount:F.series.length}},wo=(F,se,fe)=>{let Pe;return fe.labels.some(xe=>{const Ue=Object.keys(xe.labels),ze=F.fields.filter(Xe=>Ue.find(ot=>ot===Xe.name));return ze.length&&ze.every((ot,lt,pt)=>{const Et=ot.values[se.fieldIndex];return xe.labels[ot.name]===Et})?(Pe=xe.color,!0):!1}),Pe},gs=(F,se,fe)=>{let Pe=!1;return F.labels.length===F.totalSeriesCount?Pe=!0:F.labels.some(xe=>{const Ue=Object.keys(xe.labels);if(Object.keys(xe.labels).length===0)Pe=!0;else{const ze=se.fields.filter(Xe=>Ue.find(ot=>ot===Xe.name));ze.length&&(Pe=F.labels.some(Xe=>Object.keys(Xe.labels).every(ot=>{const lt=Xe.labels[ot];return ze.find(pt=>pt.values[fe.fieldIndex]===lt)})))}return Pe}),Pe},br=({config:F,onChangeTimeRange:se})=>{const fe=(0,C.useRef)(),[Pe,xe]=(0,C.useState)([]),[Ue,ze]=(0,C.useState)();if((0,C.useLayoutEffect)(()=>{F.addHook("init",yt=>{fe.current=yt}),F.addHook("setScale",yt=>{xe(yt.data?.[0]??[]),ze(yt.scales.x??void 0)})},[F]),Pe.length<2||!se||!Ue||!Ue.time||!Ue.min||!Ue.max)return null;let Xe=0,ot=Pe.length-1;for(;Xe<=ot&&Pe[Xe]==null;)Xe++;for(;ot>=0&&Pe[ot]==null;)ot--;const lt=Pe[Xe],pt=Pe[ot],Et=Ue.min,Tt=Ue.max;return lt==null||pt==null||lt<=Tt&&pt>=Et?null:C.createElement("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",width:"100%",textAlign:"center"}},C.createElement("div",null,C.createElement("div",null,"Data outside time range"),C.createElement(Q.$n,{onClick:yt=>se({from:lt,to:pt}),variant:"secondary","data-testid":"time-series-zoom-to-data"},"Zoom to data")))};br.displayName="OutsideRangePlugin";var To=e(55794),Mo=e.n(To);const ri=({step:F,y:se,dragBounds:fe,mapPositionToValue:Pe,formatValue:xe,onChange:Ue})=>{const ze=(0,k.$j)();let Xe=se,ot="none";se<(fe.top??0)&&(ot="top"),se>(fe.bottom??0)+22&&(ot="bottom"),ot==="bottom"&&(Xe=fe.bottom??se),ot==="top"&&(Xe=fe.top??se);const lt=typeof Ue!="function",pt=(0,k.of)(vc,F,ot,lt),[Et,Tt]=(0,C.useState)(F.value),yt=(0,C.useMemo)(()=>ze.colors.getContrastText(ze.visualization.getColorByName(F.color)),[F.color,ze]);return C.createElement(Mo(),{axis:"y",grid:[1,1],disabled:lt,onStop:lt?Ke.noop:(Nt,Gt)=>(Ue(Pe(Gt.lastY)),!1),onDrag:(Nt,Gt)=>Tt(Pe(Gt.lastY)),position:{x:0,y:Xe},bounds:fe},C.createElement("div",{className:pt.handle,style:{color:yt}},C.createElement("span",{className:pt.handleText},xe(Et))))};ri.displayName="ThresholdDragHandle";const vc=(F,se,fe,Pe)=>{const xe=F.visualization.getColorByName(se.color),Ue=Ec(fe),ze=fe!=="none";return{handle:(0,K.css)`
      display: flex;
      align-items: center;
      position: absolute;
      left: 0;
      width: calc(100% - 9px);
      height: 18px;
      margin-top: -9px;
      border-color: ${xe};
      cursor: ${Pe?"initial":"grab"};
      border-top-right-radius: ${F.shape.radius.default};
      border-bottom-right-radius: ${F.shape.radius.default};
      ${ze&&(0,K.css)`
        margin-top: 0;
        border-radius: ${F.shape.radius.default};
      `}
      background: ${xe};
      font-size: ${F.typography.bodySmall.fontSize};
      &:before {
        ${Ue};
      }
    `,handleText:(0,K.css)`
      text-align: center;
      width: 100%;
      display: block;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `}};function Ec(F){const se=F==="none",fe=Pe=>(0,K.css)`
    content: '';
    position: absolute;

    bottom: 0;
    top: 0;
    width: 0;
    height: 0;
    left: 0;

    border-right-style: solid;
    border-right-width: ${Pe}px;
    border-right-color: inherit;
    border-top: ${Pe}px solid transparent;
    border-bottom: ${Pe}px solid transparent;
  `;return se?(0,K.css)`
      ${fe(9)};
      left: -9px;
    `:F==="top"?(0,K.css)`
      ${fe(5)};
      left: calc(50% - 2.5px);
      top: -7px;
      transform: rotate(90deg);
    `:F==="bottom"?(0,K.css)`
      ${fe(5)};
      left: calc(50% - 2.5px);
      top: calc(100% - 2.5px);
      transform: rotate(-90deg);
    `:""}const $l=60,Ei=({config:F,fieldConfig:se,onThresholdsChange:fe})=>{const Pe=(0,C.useRef)(),[xe,Ue]=(0,C.useState)(0);(0,C.useLayoutEffect)(()=>{F.setPadding([0,$l,0,0]),F.addHook("init",Xe=>{Pe.current=Xe}),F.addHook("draw",()=>{Ue(Xe=>Xe+1)})},[F]);const ze=(0,C.useMemo)(()=>{const Xe=Pe.current;if(!Xe)return null;const ot=se.defaults.thresholds;if(!ot)return null;const lt=(0,Uo.M)(se.defaults,Zn.PU.number),pt=se.defaults.decimals,Et=[];for(let Tt=0;Tt<ot.steps.length;Tt++){const yt=ot.steps[Tt],Nt=Xe.valToPos(yt.value,lt);if(Number.isNaN(Nt)||!Number.isFinite(Nt))continue;const Gt=Xe.bbox.height/window.devicePixelRatio,wt=typeof fe=="function"?sn=>{const Xt=[...ot.steps.slice(0,Tt),...ot.steps.slice(Tt+1),{...ot.steps[Tt],value:sn}].sort((In,on)=>In.value-on.value);fe({...ot,steps:Xt})}:void 0,Qt=C.createElement(ri,{key:`${yt.value}-${Tt}`,step:yt,y:Nt,dragBounds:{top:0,bottom:Gt},mapPositionToValue:sn=>Xe.posToVal(sn,lt),formatValue:sn=>(0,xs.j_)(lt)(sn,pt).text,onChange:wt});Et.push(Qt)}return Et},[xe,se,fe]);return Pe.current?C.createElement("div",{style:{position:"absolute",overflow:"visible",left:`${(Pe.current.bbox.left+Pe.current.bbox.width)/window.devicePixelRatio}px`,top:`${Pe.current.bbox.top/window.devicePixelRatio}px`,width:`${$l}px`,height:`${Pe.current.bbox.height/window.devicePixelRatio}px`}},ze):null};Ei.displayName="ThresholdControlsPlugin";var yi=e(43548),Vl=e(50311),_l=e(46294),zl=e(39624);function yc(F){let se=new Map;return F.map(Pe=>({...Pe,fields:Pe.fields.map(xe=>{if(xe.type===Zn.PU.enum){let Ue=(0,Uo.M)(xe.config,xe.type),ze=se.get(Ue);ze||(ze=[],se.set(Ue,ze));let Xe=xe.values.toArray().slice(),ot=xe.config.type.enum.text;if(ze.length>0)for(let lt=0;lt<Xe.length;lt++)Xe[lt]+=ze.length;return ze.push(...ot),xe.config.type.enum.text=ze,{...xe,values:Xe}}return xe})}))}function bl(F,se,fe,Pe){if(!F?.length)return null;let xe=Pe!=null;Pe!=null&&Pe>0&&(F=[{...F[0],fields:[F[0].fields[Pe],...F[0].fields.filter((ot,lt)=>lt!==Pe)]}]);for(let ot of F)for(let lt of ot.fields)lt.type===Zn.PU.time&&typeof lt.values[0]!="number"&&(lt.values=(0,Vl.s7)(lt,{destinationType:Zn.PU.time}).values);let Ue=0;e:for(let ot of F)for(let lt of ot.fields)if(lt.type===Zn.PU.enum&&++Ue>1){F=yc(F);break e}let ze;const Xe=[];for(let ot of F){const lt=[];let pt=!1,Et=!1,Tt=xe?ot:(0,_l.M)({frame:ot,refFieldPseudoMin:fe?.from.valueOf(),refFieldPseudoMax:fe?.to.valueOf()});const yt=(0,zl.C)(Tt).fields;for(let Nt=0;Nt<yt?.length;Nt++){const Gt=yt[Nt];switch(Gt.type){case Zn.PU.time:pt=!0,lt.push(Gt);break;case Zn.PU.number:Et=xe?Nt>0:!0,ze={...Gt,values:Gt.values.map(Qt=>Number.isFinite(Qt)||Qt==null?Qt:null)},lt.push(ze);break;case Zn.PU.enum:Et=!0;case Zn.PU.string:ze={...Gt,values:Gt.values},lt.push(ze);break;case Zn.PU.boolean:Et=!0;const Bt=Gt.config?.custom??{},wt={...Gt.config,max:1,min:0,custom:Bt};Bt.lineInterpolation!==xt.dx.StepBefore&&(Bt.lineInterpolation=xt.dx.StepAfter),ze={...Gt,config:wt,type:Zn.PU.number,values:Gt.values.map(Qt=>Qt==null?Qt:Qt?1:0)},(0,xs.j9)(wt.unit)||(wt.unit="bool",ze.display=(0,Hs.J)({field:ze,theme:se})),lt.push(ze);break}}(xe||pt)&&Et&&Xe.push({...ot,length:Tt.length,fields:lt})}return Xe.length?(Pc(Xe,se,0),Dc(Xe,se),Xe):null}const Dc=(F,se)=>{const{palette:fe}=se.visualization;for(const Pe of F)for(const xe of Pe.fields)if(xe.type===Zn.PU.enum){const Ue=fe[xe.state?.seriesIndex%fe.length],ze=se.visualization.getColorByName(Ue),Xe=xe.config.type.enum;Xe.color=Array(Xe.text.length).fill(ze),xe.display=(0,Hs.J)({field:xe,theme:se})}},Pc=(F,se,fe)=>{let Pe=0;F.forEach(xe=>{xe.fields.forEach((Ue,ze)=>{ze!==fe&&(Ue.type===Zn.PU.number||Ue.type===Zn.PU.boolean||Ue.type===Zn.PU.enum)&&(Ue.state={...Ue.state,seriesIndex:Pe++},Ue.display=(0,Hs.J)({field:Ue,theme:se}))})})};function Tl(F,se){return!F||!F.length?[se]:F.map(fe=>fe?.length?fe:se)}function dr(F,se,fe,Pe,xe){return F.fields.forEach(Ue=>{if(Ue.state?.origin?.frameIndex===void 0||se[Ue.state?.origin?.frameIndex]===void 0)return;const ze=[];for(const ot of se[Ue.state?.origin?.frameIndex].fields)if(ot.type===Zn.PU.string)if(Ue.values instanceof yi.F){const lt={...ot};lt.values=new yi.F(ot.values,Ue.values.getOrderArray()),ze.push(lt)}else ze.push(ot);const Xe={fields:[...F.fields,...ze],length:F.fields.length+ze.length};Ue.getLinks=(0,$i._M)(Xe,Ue,Ue.state.scopedVars,fe,Pe,xe)}),F}const ro=F=>F.mode===xt.$N.Multi&&F.maxHeight!=null;var ds=(F=>(F.Candles="candles",F.CandlesVolume="candles+volume",F.Volume="volume",F))(ds||{}),ki=(F=>(F.Candles="candles",F.OHLCBars="ohlcbars",F))(ki||{}),Ys=(F=>(F.CloseClose="close-close",F.OpenClose="open-close",F))(Ys||{});const rl={down:"red",flat:"gray",up:"green"},oi={...{candleStyle:"candles",colorStrategy:"open-close",colors:{down:"red",up:"green",flat:"gray"},fields:{},includeAllFields:!1,mode:"candles+volume"},legend:{displayMode:xt.lm.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:xt.$N.Multi,sort:xt.xB.None}},Yo={open:{key:"open",name:"Open",defaults:["open","o"],description:"Value at the start of the period"},high:{key:"high",name:"High",defaults:["high","h","max"],description:"Maximum value within the period"},low:{key:"low",name:"Low",defaults:["low","l","min"],description:"Minimum value within the period"},close:{key:"close",name:"Close",defaults:["close","c"],description:"Value at the end of the period"},volume:{key:"volume",name:"Volume",defaults:["volume","v"],description:"Sample count within the period"}};function Tr(F,se,fe){const Pe=(0,Ha.findField)(F,fe[se.key]);if(!Pe)for(const xe of F.fields){const Ue=(0,ts.Ct)(xe,F).toLowerCase();if(se.defaults.includes(Ue)||se.defaults.includes(xe.name))return xe}return Pe}function Di(F,se,fe,Pe){if(!F?.length)return null;const xe=se.fields??{},Ue=F.length===1?(0,lr.Yj)(F[0],F[0].fields.findIndex(yt=>yt.type===Zn.PU.time)):(0,lr.Fd)({frames:F});if(!Ue?.length)return null;const ze={aligned:Ue,frame:Ue,names:{}},Xe=bl([Ue],fe,Pe);if(!Xe)return null;const ot=ze.frame=Xe[0],lt=ot.fields.findIndex(yt=>yt.type===Zn.PU.time);if(lt<0)return null;const pt=new Set;for(const yt of Object.values(Yo)){const Nt=Tr(ot,yt,xe);Nt&&(ze[yt.key]=Nt,pt.add(Nt))}if(!ze.open&&!ze.close&&(ze.open=ot.fields.find(yt=>yt.type===Zn.PU.number),ze.open&&pt.add(ze.open)),ze.open&&!ze.close&&!xe.close){const yt=ze.open.values.slice(1);yt.push(yt[yt.length-1]),ze.close={...ze.open,values:yt,name:"Next open",state:void 0},pt.add(ze.close),ot.fields.push(ze.close),ze.autoOpenClose=!0}if(ze.close&&!ze.open&&!xe.open){const yt=ze.close.values.slice();yt.unshift(yt[0]),yt.length=ot.length,ze.open={...ze.close,values:yt,name:"Previous close",state:void 0},pt.add(ze.open),ot.fields.push(ze.open),ze.autoOpenClose=!0}!ze.high&&!xe.high&&(ze.high=ze.open),!ze.low&&!xe.low&&(ze.low=ze.open),se.mode===ds.Volume?(ze.high&&(ze.high!==ze.open&&pt.delete(ze.high),ze.high=void 0),ze.low&&(ze.low!==ze.open&&pt.delete(ze.low),ze.low=void 0)):se.mode===ds.Candles&&ze.volume&&(pt.delete(ze.volume),ze.volume=void 0);for(const yt of Object.values(Yo)){const Nt=ze[yt.key];Nt&&(ze.names[yt.key]=(0,ts.Ct)(Nt,ze.frame))}const Et=ot.fields[lt],Tt=[Et];se.includeAllFields?Tt.push(...ot.fields.filter(yt=>yt!==Et)):Tt.push(...pt),ze.frame={...ze.frame,fields:Tt};for(let yt=0;yt<ze.frame.fields.length;yt++){const Nt=ze.frame.fields[yt];Nt.state={...Nt.state,seriesIndex:yt-1,origin:{fieldIndex:yt,frameIndex:0}}}return ze}const{alpha:Ka}=cr;function Cc(F){let{mode:se,candleStyle:fe,fields:Pe,colorStrategy:xe,upColor:Ue,downColor:ze,flatColor:Xe,volumeAlpha:ot,flatAsUp:lt=!0}=F;const pt=se!==ds.Volume&&Pe.high!=null&&Pe.low!=null,Et=pt&&fe===ki.Candles,Tt=se!==ds.Candles&&Pe.volume!=null;function yt(Xt,In,on,bn,Bn){return Xt>0?on:Xt<0?bn:Bn?on:In}let Nt=0,Gt=Pe.open,Bt=Pe.high,wt=Pe.low,Qt=Pe.close,sn=Pe.volume;return Xt=>{let In,on,bn,Bn,wn,Mn;pt&&(bn=new Path2D,on=new Path2D,In=new Path2D),Tt&&(Bn=new Path2D,wn=new Path2D,Mn=new Path2D);let dn=new Path2D,Rn=Xt.ctx,Dn=Xt.data[Nt],ea=Xt.data[Gt],Gn=Xt.data[Qt],ia=pt?Xt.data[Bt]:null,_a=pt?Xt.data[wt]:null,Ra=Tt?Xt.data[sn]:null,ms=sn!=null?Math.round(Xt.valToPos(0,Xt.series[sn].scale,!0)):null,[va,ka]=Xt.series[0].idxs,oa=Xt.data[0],zn=ea,Kn=Xt.bbox.width;if(oa.length>1){let La=null;for(let On=0,_n=1/0;On<oa.length;On++)if(zn[On]!==void 0){if(La!=null){let jn=Math.abs(oa[On]-oa[La]);jn<_n&&(_n=jn,Kn=Math.abs(Xt.valToPos(oa[On],"x",!0)-Xt.valToPos(oa[La],"x",!0)))}La=On}}let kn=Math.round(.6*Kn),ua=2,Ia=2;kn<=12&&(ua=Ia=1);let Pa=Math.floor(kn/2);for(let La=va;La<=ka;La++){let On=Math.round(Xt.valToPos(Dn[La],"x",!0)),_n=La===va?0:Math.sign(Gn[La]-Gn[La-1]),jn=Math.sign(Gn[La]-ea[La]);if(Tt&&Mn&&wn&&Bn){let $a=yt(xe===Ys.CloseClose?_n:jn,Mn,wn,Bn,La===va&&Ys.CloseClose?!1:lt),Ba=Math.round(Xt.valToPos(Ra[La],Xt.series[sn].scale,!0));$a.rect(On-Pa,Ba,kn,ms-Ba)}if(pt&&bn&&on&&In){let $a=yt(xe===Ys.CloseClose?_n:jn,bn,on,In,La===va&&Ys.CloseClose?!1:lt),Ba=Math.round(Xt.valToPos(ia[La],Xt.series[Bt].scale,!0)),rs=Math.round(Xt.valToPos(_a[La],Xt.series[wt].scale,!0));$a.rect(On-Math.floor(ua/2),Ba,ua,rs-Ba);let Xa=Math.round(Xt.valToPos(ea[La],Xt.series[Gt].scale,!0)),Ms=Math.round(Xt.valToPos(Gn[La],Xt.series[Qt].scale,!0));if(Et){let Qs=Math.min(Xa,Ms),io=Math.max(Xa,Ms),Vs=Math.max(1,io-Qs);$a.rect(On-Pa,Qs,kn,Vs),xe===Ys.CloseClose&&jn>=0&&Vs>Ia*2&&dn.rect(On-Pa+Ia,Qs+Ia,kn-Ia*2,Vs-Ia*2)}else $a.rect(On-Pa,Xa,Pa,ua),$a.rect(On,Ms,Pa,ua)}}Rn.save(),Rn.rect(Xt.bbox.left,Xt.bbox.top,Xt.bbox.width,Xt.bbox.height),Rn.clip(),Tt&&Mn&&wn&&Bn&&(Rn.fillStyle=Ka(Ue,ot),Rn.fill(wn),Rn.fillStyle=Ka(ze,ot),Rn.fill(Bn),Rn.fillStyle=Ka(Xe,ot),Rn.fill(Mn)),pt&&bn&&on&&In&&(Rn.fillStyle=Ue,Rn.fill(on),Rn.fillStyle=ze,Rn.fill(In),Rn.fillStyle=Xe,Rn.fill(bn),Rn.globalCompositeOperation="destination-out",Rn.fill(dn)),Rn.restore()}}const Sl=({data:F,id:se,timeRange:fe,timeZone:Pe,width:xe,height:Ue,options:ze,fieldConfig:Xe,onChangeTimeRange:ot,replaceVariables:lt})=>{const{sync:pt,canAddAnnotations:Et,onThresholdsChange:Tt,canEditThresholds:yt,showThresholds:Nt}=(0,Ft.d2)(),Gt=(0,k.$j)(),Bt=(0,C.useMemo)(()=>Di(F.series,ze,Gt,fe),[F.series,ze,Gt,fe]),[wt,Qt]=(0,C.useState)(null),{renderers:sn,tweakScale:Xt,tweakAxis:In,shouldRenderPrice:on}=(0,C.useMemo)(()=>{let wn=(Pa,La)=>Pa,Mn=(Pa,La)=>Pa,dn={renderers:[],tweakScale:wn,tweakAxis:Mn,shouldRenderPrice:!1};if(!Bt)return dn;const Rn=Bt.names;if(!Object.keys(Rn).length)return dn;const{mode:Dn,candleStyle:ea,colorStrategy:Gn}=ze,ia={...rl,...ze.colors};let{open:_a,high:Ra,low:ms,close:va,volume:ka}=Rn;if(_a==null||va==null)return dn;let oa=.5,zn=-1,Kn=!1;if(ka!=null&&Dn!==ds.Candles){let Pa=Bt.volume;if(Pa!=null){Kn=!0;let{fillOpacity:La}=Pa.config.custom;La&&(oa=La/100),Dn!==ds.Volume&&(Pa.config={...Pa.config},Pa.config.unit="short",Pa.display=(0,Hs.J)({field:Pa,theme:vn.$W.theme2}),Mn=(On,_n)=>{if(_n.name===Bt.volume?.name){let jn=($a,Ba)=>{let rs=[],Xa=$a.series[zn].max;for(let Ms=0;Ms<Ba.length&&(rs.push(Ba[Ms]),!(Xa&&Ba[Ms]>Xa));Ms++);return rs};On.space=20,On.filter=jn,On.ticks={...On.ticks,filter:jn}}return On},wn=(On,_n)=>(_n.name===Bt.volume?.name&&(On.range=(jn,$a,Ba)=>[0,Ba*7]),On))}}let kn=Dn!==ds.Volume&&Ra!=null&&ms!=null;if(!kn&&!Kn)return dn;let ua={},Ia=[];return kn?ua={open:_a,high:Ra,low:ms,close:va}:Ia.push(_a,va),Kn&&(ua.volume=ka,ua.open=_a,ua.close=va),{shouldRenderPrice:kn,renderers:[{fieldMap:ua,indicesOnly:Ia,init:(Pa,La)=>{zn=La.volume,Pa.addHook("drawAxes",Cc({mode:Dn,fields:La,upColor:vn.$W.theme2.visualization.getColorByName(ia.up),downColor:vn.$W.theme2.visualization.getColorByName(ia.down),flatColor:vn.$W.theme2.visualization.getColorByName(ia.flat),volumeAlpha:oa,colorStrategy:Gn,candleStyle:ea,flatAsUp:!0}))}}],tweakScale:wn,tweakAxis:Mn}},[ze,F.structureRev,F.series.length]);if(!Bt)return C.createElement(Mt.a,{panelId:se,fieldConfig:Xe,data:F,needsTimeField:!0,needsNumberField:!0});if(on)for(let wn in sn[0].fieldMap){let Mn=Bt[wn];Mn.config={...Mn.config,custom:{...Mn.config.custom,hideFrom:{legend:!0,tooltip:!1,viz:!1}}}}const bn=!!(Et&&Et()),Bn=vn.$W.featureToggles.newVizTooltips&&(pt==null||pt()!==Ga.y.Tooltip);return C.createElement(hi,{frames:[Bt.frame],structureRev:F.structureRev,timeRange:fe,timeZone:Pe,width:xe,height:Ue,legend:ze.legend,renderers:sn,tweakAxis:In,tweakScale:Xt,options:ze},(wn,Mn)=>(Mn.fields.forEach(dn=>{dn.getLinks=(0,$i._M)(Mn,dn,dn.state.scopedVars,lt,Pe)}),C.createElement(C.Fragment,null,Bn?C.createElement(Lr.xl,{config:wn,hoverMode:ze.tooltip.mode===xt.$N.Single?Lr.b3.xOne:Lr.b3.xAll,queryZoom:ot,clientZoom:!0,render:(dn,Rn,Dn,ea=!1,Gn,ia,_a)=>{if(_a)return null;if(bn&&ia!=null){Qt(ia),Gn();return}const Ra=()=>{let ms=dn.posToVal(dn.cursor.left,"x");Qt({from:ms,to:ms}),Gn()};return C.createElement(si.k,{frames:[Bt.frame],seriesFrame:Mn,dataIdxs:Rn,seriesIdx:Dn,mode:ze.tooltip.mode,sortOrder:ze.tooltip.sort,isPinned:ea,annotate:bn?Ra:void 0,scrollable:ro(ze.tooltip)})},maxWidth:ze.tooltip.maxWidth,maxHeight:ze.tooltip.maxHeight}):C.createElement(C.Fragment,null,C.createElement(Bo.j,{config:wn,onZoom:ot,withZoomY:!0}),C.createElement(qa.T,{data:Mn,config:wn,mode:xt.$N.Multi,sync:pt,timeZone:Pe})),Bn?C.createElement(sr.W,{annotations:F.annotations??[],config:wn,timeZone:Pe,newRange:wt,setNewRange:Qt}):F.annotations&&C.createElement(Zs,{annotations:F.annotations,config:wn,timeZone:Pe}),Bn?void 0:bn?C.createElement(ha,{data:Mn,timeZone:Pe,config:wn},({startAnnotating:dn})=>C.createElement(pa,{data:Mn,config:wn,timeZone:Pe,replaceVariables:lt,defaultItems:bn?[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(Rn,Dn)=>{Dn&&dn({coords:Dn.coords})}}]}]:[]})):C.createElement(pa,{data:Mn,config:wn,timeZone:Pe,replaceVariables:lt,defaultItems:[]}),F.annotations&&C.createElement($s,{config:wn,exemplars:F.annotations,timeZone:Pe}),(yt&&Tt||Nt)&&C.createElement(Ei,{config:wn,fieldConfig:Xe,onThresholdsChange:yt?Tt:void 0}),C.createElement(br,{config:wn,onChangeTimeRange:ot}))))};class bc{getSuggestionsForData(se){const{dataSummary:fe}=se;if(!se.data?.series||!fe.hasData||fe.timeFieldCount<1||fe.numberFieldCount<2||fe.numberFieldCount>10)return;const Pe=Di(se.data.series,oi,R.$.theme2);if(!Pe||Pe.open===Pe.high&&Pe.open===Pe.low)return;se.getListAppender({name:"",pluginId:"candlestick",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:is.m.Candlestick,options:oi,fieldConfig:{defaults:{},overrides:[]},score:Pe.autoOpenClose?Ts.nQ.Good:Ts.nQ.Best})}}const xl=[{label:"Candles",value:ds.Candles},{label:"Volume",value:ds.Volume},{label:"Both",value:ds.CandlesVolume}],Tc=[{label:"Candles",value:ki.Candles},{label:"OHLC Bars",value:ki.OHLCBars}],Mc=[{label:"Since Open",value:Ys.OpenClose},{label:"Since Prior Close",value:Ys.CloseClose}],kl=F=>F.type===Zn.PU.number;function Pi(F,se,fe){let Pe="Auto ";if(fe){const xe=fe[se.key];xe?.config?(Pe+="= "+(0,ts.Ct)(xe),xe===fe?.open&&se.key!=="open"&&(Pe+=` (${se.defaults.join(",")})`)):Pe+=`(${se.defaults.join(",")})`}F.addFieldNamePicker({path:`fields.${se.key}`,name:se.name,description:se.description,settings:{filter:kl,placeholderText:Pe}})}const Sc=new L.m(Sl).useFieldConfig((0,so.V)(so.S)).setPanelOptions((F,se)=>{const fe=se.options??oi,Pe=Di(se.data,fe,R.$.theme2);F.addRadio({path:"mode",name:"Mode",description:"",defaultValue:oi.mode,settings:{options:xl}}).addRadio({path:"candleStyle",name:"Candle style",description:"",defaultValue:oi.candleStyle,settings:{options:Tc},showIf:xe=>xe.mode!==ds.Volume}).addRadio({path:"colorStrategy",name:"Color strategy",description:"",defaultValue:oi.colorStrategy,settings:{options:Mc}}).addColorPicker({path:"colors.up",name:"Up color",defaultValue:rl.up}).addColorPicker({path:"colors.down",name:"Down color",defaultValue:rl.down}),Pi(F,Yo.open,Pe),fe.mode!==ds.Volume&&(Pi(F,Yo.high,Pe),Pi(F,Yo.low,Pe)),Pi(F,Yo.close,Pe),fe.mode!==ds.Candles&&Pi(F,Yo.volume,Pe),F.addRadio({path:"includeAllFields",name:"Additional fields",description:"Use standard timeseries options to configure any fields not mapped above",defaultValue:oi.includeAllFields,settings:{options:[{label:"Ignore",value:!1},{label:"Include",value:!0}]}}),R.$.featureToggles.newVizTooltips&&_r.D(F,!1,!0,fe),ir.H(F)}).setDataSupport({annotations:!0,alertStates:!0}).setSuggestionsSupplier(new bc);var Hl=e(70096),Ol=e(76885),Fo=e(6709),Ci=e(10096),wr=e(16021),Gl=e(91219),vo=e(27677),Hi=e(62301),xc=e(80484);const Se=F=>({dashlistSectionHeader:(0,K.css)`
    padding: ${F.spacing(.25,1)};
    margin-right: ${F.spacing(1)};
  `,dashlistSection:(0,K.css)`
    margin-bottom: ${F.spacing(2)};
    padding-top: 3px;
  `,dashlistLink:(0,K.css)`
    display: flex;
    cursor: pointer;
    border-bottom: 1px solid ${F.colors.border.weak};
    margin-right: ${F.spacing(1)};
    padding: ${F.spacing(1)};
    align-items: center;

    &:hover {
      a {
        color: ${F.colors.text.link};
        text-decoration: underline;
      }
    }
  `,dashlistFolder:(0,K.css)`
    color: ${F.colors.text.secondary};
    font-size: ${F.typography.bodySmall.fontSize};
    line-height: ${F.typography.body.lineHeight};
  `,dashlistTitle:(0,K.css)`
    &::after {
      position: absolute;
      content: '';
      left: 0;
      top: 0;
      bottom: 0;
      right: 0;
    }
  `,dashlistLinkBody:(0,K.css)`
    flex-grow: 1;
    overflow: hidden;
    text-overflow: ellipsis;
  `,dashlistItem:(0,K.css)`
    position: relative;
    list-style: none;
  `});async function Ae(F,se){let fe=Promise.resolve([]);if(F.showStarred){const pt={limit:F.maxItems,starred:"true"};fe=(0,vo.AI)().search(pt)}let Pe=Promise.resolve([]),xe=[];if(F.showRecentlyViewed){let pt=await Hi.A.getDashboardOpened();xe=(0,Ke.take)(pt,F.maxItems),Pe=(0,vo.AI)().search({dashboardUIDs:xe,limit:F.maxItems})}let Ue=Promise.resolve([]);if(F.showSearch){const pt=F.folderUID===""?"general":F.folderUID,Et={limit:F.maxItems,query:se(F.query,{},"text"),folderUIDs:pt,tag:F.tags.map(Tt=>se(Tt,{},"text")),type:"dash-db"};Ue=(0,vo.AI)().search(Et)}const[ze,Xe,ot]=await Promise.all([fe,Ue,Pe]);let lt=new Map;for(const pt of xe){const Et=ot.find(Tt=>Tt.uid===pt);Et&&lt.set(pt,{...Et,isRecent:!0})}return Xe.forEach(pt=>{pt.uid&&(lt.has(pt.uid)?lt.get(pt.uid).isSearchResult=!0:lt.set(pt.uid,{...pt,isSearchResult:!0}))}),ze.forEach(pt=>{pt.uid&&(lt.has(pt.uid)?lt.get(pt.uid).isStarred=!0:lt.set(pt.uid,{...pt,isStarred:!0}))}),lt}function Ye(F){const[se,fe]=(0,C.useState)(new Map),Pe=(0,_.useDispatch)();(0,C.useEffect)(()=>{Ae(F.options,F.replaceVariables).then(Bt=>{fe(Bt)})},[F.options,F.replaceVariables,F.renderCounter]);const xe=async(Bt,wt)=>{const{uid:Qt,title:sn,url:Xt}=wt;Bt.preventDefault(),Bt.stopPropagation();const In=await(0,We.UA)().starDashboard(wt.uid,wt.isStarred),on=new Map(se);on.set(wt?.uid??"",{...wt,isStarred:In}),fe(on),Pe((0,Gl.ci)({id:Qt??"",title:sn,url:Xt,isStarred:In}))},[Ue,ze,Xe]=(0,C.useMemo)(()=>{const Bt=[...se.values()];return[Bt.filter(wt=>wt.isStarred).sort((wt,Qt)=>wt.title.localeCompare(Qt.title)),Bt.filter(wt=>wt.isRecent),Bt.filter(wt=>wt.isSearchResult).sort((wt,Qt)=>wt.title.localeCompare(Qt.title))]},[se]),{showStarred:ot,showRecentlyViewed:lt,showHeadings:pt,showSearch:Et}=F.options,Tt=[{header:"Starred dashboards",dashboards:Ue,show:ot},{header:"Recently viewed dashboards",dashboards:ze,show:lt},{header:"Search",dashboards:Xe,show:Et}],yt=(0,k.of)(Se),Nt=dt(F),Gt=Bt=>C.createElement("ul",null,Bt.map(wt=>{let Qt=wt.url;return Qt=Ol.kM.appendQueryToUrl(Qt,Nt),Qt=(0,vn.zj)().disableSanitizeHtml?Qt:Za.sQ.sanitizeUrl(Qt),C.createElement("li",{className:yt.dashlistItem,key:`dash-${wt.uid}`},C.createElement("div",{className:yt.dashlistLink},C.createElement("div",{className:yt.dashlistLinkBody},C.createElement("a",{className:yt.dashlistTitle,href:Qt},wt.title),wt.folderTitle&&C.createElement("div",{className:yt.dashlistFolder},wt.folderTitle)),C.createElement(es.K,{tooltip:wt.isStarred?`Unmark "${wt.title}" as favorite`:`Mark "${wt.title}" as favorite`,name:wt.isStarred?"favorite":"star",iconType:wt.isStarred?"mono":"default",onClick:sn=>xe(sn,wt)})))}));return C.createElement(B.E,{autoHeightMin:"100%",autoHeightMax:"100%"},Tt.map(({show:Bt,header:wt,dashboards:Qt},sn)=>Bt&&C.createElement("div",{className:yt.dashlistSection,key:`dash-group-${sn}`},pt&&C.createElement("h6",{className:yt.dashlistSectionHeader},wt),Gt(Qt))))}function dt(F){(0,wr.u)(Ci.lE,xc.og);let se={};return F.options.keepTime&&(se[`$${Fo.c.keepTime}`]=!0),F.options.includeVars&&(se[`$${Fo.c.includeVars}`]=!0),F.replaceVariables(Ol.kM.toUrlParams(se))}async function bt(F){return F===0?"":(await(0,be.AI)().get(`/api/folders/id/${F}`,void 0,void 0,{showErrorAlert:!1})).uid}async function Rt(F){const se={...F.options,showStarred:F.options.showStarred??F.starred,showRecentlyViewed:F.options.showRecentlyViewed??F.recent,showSearch:F.options.showSearch??F.search,showHeadings:F.options.showHeadings??F.headings,maxItems:F.options.maxItems??F.limit,query:F.options.query??F.query,folderId:F.options.folderId??F.folderId,tags:F.options.tags??F.tags};if(parseFloat(F.pluginVersion||"6.1")<6.3&&["starred","recent","search","headings","limit","query","folderId"].forEach(xe=>delete F[xe]),se.folderId!==void 0){const Pe=se.folderId;try{const xe=await bt(Pe);se.folderUID=xe,delete se.folderId}catch(xe){console.warn("Dashlist: Error migrating folder ID to UID",xe)}}return se}const kt={includeVars:!1,keepTime:!1,maxItems:10,query:"",showHeadings:!0,showRecentlyViewed:!1,showSearch:!1,showStarred:!0,tags:[]},Jt=new L.m(Ye).setPanelOptions(F=>{F.addBooleanSwitch({path:"keepTime",name:"Include current time range",defaultValue:kt.keepTime}).addBooleanSwitch({path:"includeVars",name:"Include current template variable values",defaultValue:kt.includeVars}).addBooleanSwitch({path:"showStarred",name:"Starred",defaultValue:kt.showStarred}).addBooleanSwitch({path:"showRecentlyViewed",name:"Recently viewed",defaultValue:kt.showRecentlyViewed}).addBooleanSwitch({path:"showSearch",name:"Search",defaultValue:kt.showSearch}).addBooleanSwitch({path:"showHeadings",name:"Show headings",defaultValue:kt.showHeadings}).addNumberInput({path:"maxItems",name:"Max items",defaultValue:kt.maxItems}).addTextInput({path:"query",name:"Query",defaultValue:kt.query}).addCustomEditor({path:"folderUID",name:"Folder",id:"folderUID",defaultValue:void 0,editor:function({value:fe,onChange:Pe}){return C.createElement(Hl.d,{clearable:!0,value:fe,onChange:xe=>Pe(xe)})}}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:kt.tags,editor(se){return C.createElement(Me.u,{tags:se.value,onChange:se.onChange})}})}).setMigrationHandler(Rt);var $t=e(47187),an=e(14110),Ln=e(11503);const ra=({onBlur:F,placeholder:se})=>{const fe=(0,C.useRef)(null);(0,C.useEffect)(()=>{fe.current&&fe.current.focus()});const Pe=xe=>{xe.key==="Enter"&&xe.currentTarget.blur()};return C.createElement("input",{type:"text",placeholder:se,onBlur:F,ref:fe,onKeyDown:Pe,"data-testid":"column-input"})},ya=({divStyle:F,onColumnInputBlur:se})=>{const[fe,Pe]=(0,C.useState)(!1),xe=()=>{Pe(!0)},Ue=ze=>{const Xe=ze.target.value;Xe&&se(Xe),Pe(!1)};return C.createElement("div",{className:F},fe?C.createElement(ra,{placeholder:"Column Name",onBlur:Ue}):C.createElement("button",{onClick:xe},"+"))};var Hn=e(27183),Da=e(69321);const ja=()=>R.$.featureToggles.enableDatagridEditing,Ls="600 13px Inter",jr="400 13px Inter",qs=document.createElement("canvas"),So=20,Na=300,Ns=65,Gs="both",ol="number",gm={isContextMenuOpen:!1},pm={isInputOpen:!1},fr="datagrid_panel",gr={EDIT_CELL:"edit_cell",GRID_SELECTED:"grid_selected",APPEND_ROW:"append_row",APPEND_COLUMN:"append_column",DELETE_BTN_PRESSED:"delete_btn_pressed",COLUMN_RESIZE:"column_resize",COLUMN_REORDER:"column_reorder",ROW_REORDER:"row_reorder",CONTEXT_MENU_ACTION:"context_menu_action",HEADER_MENU_ACTION:"header_menu_action"},hm={name:"A",fields:[],length:0},vm={kind:Da.dd.Text,data:"",allowOverlay:!0,readonly:!1,displayData:""},Oc={columns:Da.I1.empty(),rows:Da.I1.empty()},Em={sticky:!1,tint:!0},ym={fill:!0,sticky:!1};async function Qo(F,se){if(se&&ja()){for(let fe=0;fe<F.fields.length;fe++)delete F.fields[fe].config.displayName,delete F.fields[fe].config.displayNameFromDS;return await se([F])}return!1}const bd=(F,se=!1)=>{const fe=qs.getContext("2d");return fe.font=se?Ls:jr,fe.measureText(F).width},jl=F=>Math.max(bd(F.name,!0)+Ns,Math.min(Na,F.values.toArray().reduce((se,fe)=>{const Pe=bd(fe?.toString()??"");return Pe>se?Pe:se},0)+So)),Il=(F,se,fe=!1)=>{const Pe={...F,fields:F.fields.map(xe=>({...xe,values:xe.values.slice()}))};for(const xe of Pe.fields){const Ue=xe.values.toArray();for(let ze=se.length-1;ze>=0;ze--)fe?Ue.splice(se[ze],1):Ue.splice(se[ze],1,null);xe.values=[...Ue]}return{...Pe,length:Pe.fields[0]?.values.length??0}},Dm=(F,se)=>{const fe=se.x,Pe=se.y,xe=se.x+se.width-1,Ue={...F,fields:F.fields.map(ze=>({...ze,values:ze.values.slice()}))};for(let ze=fe;ze<=xe;ze++){const Xe=Ue.fields[ze],ot=Xe.values.toArray();ot.splice(Pe,se.height,...new Array(se.height).fill(null)),Xe.values=[...ot]}return{...Ue,length:Ue.fields[0]?.values.length??0}},Al=F=>{const se=F.values.toArray();F.values=se.map(fe=>fe==="undefined"||fe==="null"?null:fe)};function Pm(F){return{accentColor:F.colors.primary.main,accentFg:F.colors.secondary.main,textDark:F.colors.text.primary,textMedium:F.colors.text.secondary,textLight:F.colors.text.secondary,textBubble:F.colors.text.primary,textHeader:F.colors.text.primary,bgCell:F.colors.background.primary,bgCellMedium:F.colors.background.primary,bgHeader:F.colors.background.primary,bgHeaderHasFocus:F.colors.background.secondary,bgHeaderHovered:F.colors.background.secondary,linkColor:F.colors.text.link,fontFamily:F.typography.fontFamily,headerFontStyle:`${F.typography.fontWeightMedium} ${F.typography.fontSize}px`,fgIconHeader:F.colors.secondary.contrastText,bgIconHeader:F.colors.secondary.main}}const Cm=(F,se,fe=!1)=>{const Pe=F.values.get(se);switch(F.type){case Zn.PU.boolean:return{kind:Da.dd.Boolean,data:Pe||!1,allowOverlay:!1,readonly:!1};case Zn.PU.number:return{kind:Da.dd.Number,data:Pe||0,allowOverlay:ja()&&!fe,readonly:!1,displayData:Pe!=null?Pe.toString():""};case Zn.PU.string:return{kind:Da.dd.Text,data:Pe||"",allowOverlay:ja()&&!fe,readonly:!1,displayData:Pe!=null?Pe.toString():""};default:return{kind:Da.dd.Text,data:Pe||"",allowOverlay:ja()&&!fe,readonly:!1,displayData:Pe!=null?Pe.toString():""}}},bm=(F,se)=>({dataEditor:(0,K.css)`
      .dvn-scroll-inner > div:nth-child(2) {
        pointer-events: none !important;
      }
      scrollbar-color: ${F.colors.background.secondary} ${F.colors.background.primary};
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }
      ::-webkit-scrollbar-track {
        background: ${F.colors.background.primary};
      }
      ::-webkit-scrollbar-thumb {
        border-radius: 10px;
      }
      ::-webkit-scrollbar-corner {
        display: none;
      }
    `,addColumnDiv:(0,K.css)`
      width: 120px;
      display: flex;
      flex-direction: column;
      background-color: ${F.colors.background.primary};
      button {
        pointer-events: ${se?"none":"auto"};
        border: none;
        outline: none;
        height: 37px;
        font-size: 20px;
        background-color: ${F.colors.background.primary};
        color: ${F.colors.text.primary};
        border-right: 1px solid ${F.components.panel.borderColor};
        border-bottom: 1px solid ${F.components.panel.borderColor};
        transition: background-color 200ms;
        cursor: pointer;
        :hover {
          background-color: ${F.colors.background.secondary};
        }
      }
      input {
        height: 37px;
        border: 1px solid ${F.colors.primary.main};
        :focus {
          outline: none;
        }
      }
    `,renameColumnInput:(0,K.css)`
      height: 37px;
      border: 1px solid ${F.colors.primary.main};
      :focus {
        outline: none;
      }
    `}),Mr=F=>F.rows.length||F.columns.length?!0:F.current===void 0?!1:F.current.range&&!(F.current.range.height===1&&F.current.range.width===1);var Sr=(F=>(F.columnResizeStart="columnResizeStart",F.columnResizeEnd="columnResizeEnd",F.columnMove="columnMove",F.updateColumns="updateColumns",F.showColumnRenameInput="showColumnRenameInput",F.hideColumnRenameInput="hideColumnRenameInput",F.openCellContextMenu="openCellContextMenu",F.openHeaderContextMenu="openHeaderContextMenu",F.openHeaderDropdownMenu="openHeaderDropdownMenu",F.closeContextMenu="closeContextMenu",F.multipleCellsSelected="multipleCellsSelected",F.gridSelectionCleared="gridSelectionCleared",F.columnFreezeReset="columnFreezeReset",F.columnFreezeChanged="columnFreezeChanged",F.openSearch="openSearch",F.closeSearch="closeSearch",F))(Sr||{});const Tm={columns:[],contextMenuData:gm,renameColumnInputData:pm,gridSelection:Oc,columnFreezeIndex:0,toggleSearch:!1,isResizeInProgress:!1},Mm=new Map([[Zn.PU.number,Da.Gf.HeaderNumber],[Zn.PU.string,Da.Gf.HeaderTextTemplate],[Zn.PU.boolean,Da.Gf.HeaderBoolean],[Zn.PU.time,Da.Gf.HeaderDate],[Zn.PU.other,Da.Gf.HeaderReference]]),uh=(F,se)=>{let fe=[];switch(se.type){case"columnResizeStart":fe=[...F.columns];const Pe=se.payload;return fe[Pe.columnIndex]={...F.columns[Pe.columnIndex],width:Pe.width},{...F,columns:fe,isResizeInProgress:!0};case"columnMove":fe=[...F.columns];const xe=se.payload,Ue=F.columns[xe.from].width;let ze=fe.splice(xe.from,1)[0];return ze={...ze,width:Ue},fe.splice(xe.to,0,ze),{...F,columns:fe};case"columnResizeEnd":return{...F,isResizeInProgress:!1};case"updateColumns":const Xe=se.payload;return fe=[...Xe.frame.fields.map((wt,Qt)=>{const sn=F.columns.find(In=>In.title===wt.name)?.width;return{title:(0,ts.Ct)(wt,Xe.frame),width:sn??jl(wt),icon:Mm.get(wt.type),hasMenu:ja(),trailingRowOptions:{targetColumn:--Qt}}})],{...F,columns:fe};case"showColumnRenameInput":return{...F,renameColumnInputData:{...F.renameColumnInputData,isInputOpen:!0}};case"hideColumnRenameInput":return{...F,renameColumnInputData:{...F.renameColumnInputData,isInputOpen:!1}};case"openCellContextMenu":const ot=se.payload,lt=ot.event,pt=ot.cell;return{...F,contextMenuData:{x:lt.bounds.x+lt.localEventX,y:lt.bounds.y+lt.localEventY,column:pt[0]===-1?void 0:pt[0],row:pt[1],isContextMenuOpen:!0,isHeaderMenu:!1}};case"openHeaderContextMenu":const Et=se.payload,Tt=Et.event;return{...F,contextMenuData:{x:Tt.bounds.x+Tt.localEventX,y:Tt.bounds.y+Tt.localEventY,column:Et.columnIndex,row:void 0,isContextMenuOpen:!0,isHeaderMenu:!1}};case"openHeaderDropdownMenu":const yt=se.payload,Nt=yt.screenPosition;return{...F,contextMenuData:{x:Nt.x+Nt.width,y:Nt.y+Nt.height,column:yt.columnIndex,row:void 0,isContextMenuOpen:!0,isHeaderMenu:!0},renameColumnInputData:{x:Nt.x,y:Nt.y,width:Nt.width,height:Nt.height,columnIdx:yt.columnIndex,isInputOpen:!1,inputValue:yt.value}};case"closeContextMenu":return{...F,contextMenuData:{isContextMenuOpen:!1}};case"closeSearch":return{...F,toggleSearch:!1};case"openSearch":return{...F,toggleSearch:!0};case"multipleCellsSelected":const Gt=se.payload;return{...F,gridSelection:Gt.selection};case"gridSelectionCleared":return{...F,gridSelection:Oc};case"columnFreezeReset":return{...F,columnFreezeIndex:0};case"columnFreezeChanged":const Bt=se.payload;return{...F,columnFreezeIndex:Bt.columnIndex};default:return F}},Sm=({menuData:F,data:se,saveData:fe,closeContextMenu:Pe,dispatch:xe,gridSelection:Ue,columnFreezeIndex:ze,renameColumnClicked:Xe})=>{let ot=[],lt=[];const{row:pt,column:Et,x:Tt,y:yt,isHeaderMenu:Nt}=F;Ue.rows&&(ot=Ue.rows.toArray()),Ue.columns&&(lt=Ue.columns.toArray());let Gt="Delete row";ot.length&&ot.length>1&&(Gt=`Delete ${ot.length} rows`);let Bt="Delete column";lt.length&&lt.length>1&&(Bt=`Delete ${lt.length} columns`);const wt=pt!==void 0&&pt>=0||ot.length,Qt=Et!==void 0&&Et>=0&&pt!==void 0||lt.length,sn=pt!==void 0&&pt>=0&&!ot.length,Xt=Et!==void 0&&Et>=0&&pt!==void 0&&!lt.length,In=()=>C.createElement(C.Fragment,null,wt?C.createElement(as.D,{label:Gt,onClick:()=>{if(ot.length){fe(Il(se,ot,!0)),xe({type:Sr.gridSelectionCleared});return}pt!==void 0&&pt>=0&&((0,an.rR)(fr,{item:gr.CONTEXT_MENU_ACTION,menu_action:"row_delete"}),fe(Il(se,[pt],!0)))}}):null,Qt?C.createElement(as.D,{label:Bt,onClick:()=>{if(lt.length){fe({...se,fields:se.fields.filter((bn,Bn)=>!lt.includes(Bn))}),xe({type:Sr.gridSelectionCleared});return}Et!==void 0&&Et>=0&&((0,an.rR)(fr,{item:gr.CONTEXT_MENU_ACTION,menu_action:"column_delete"}),fe({...se,fields:se.fields.filter((bn,Bn)=>Bn!==Et)}))}}):null,Qt||wt?C.createElement(Hn.N,null):null,sn?C.createElement(as.D,{label:"Clear row",onClick:()=>{(0,an.rR)(fr,{item:gr.CONTEXT_MENU_ACTION,menu_action:"row_clear"}),fe(Il(se,[pt]))}}):null,Xt?C.createElement(as.D,{label:"Clear column",onClick:()=>{const bn=se.fields[Et];bn.values=bn.values.map(()=>null),(0,an.rR)(fr,{item:gr.CONTEXT_MENU_ACTION,menu_action:"column_clear"}),fe({...se})}}):null,sn||Xt?C.createElement(Hn.N,null):null,C.createElement(as.D,{label:"Remove all data",onClick:()=>{(0,an.rR)(fr,{item:gr.CONTEXT_MENU_ACTION,menu_action:"remove_all"}),fe(hm)}}),C.createElement(as.D,{label:"Search...",onClick:()=>{(0,an.rR)(fr,{item:gr.CONTEXT_MENU_ACTION,menu_action:"open_search"}),xe({type:Sr.openSearch})}})),on=()=>{if(Et==null)return null;const bn=se.fields[Et].type,Bn=[],wn=Rn=>{Bn.push({label:(0,Ke.capitalize)(Rn),options:{targetField:se.fields[Et].name,destinationType:Rn}})};bn===Zn.PU.string?(wn(Zn.PU.number),wn(Zn.PU.boolean)):bn===Zn.PU.number?(wn(Zn.PU.string),wn(Zn.PU.boolean)):bn===Zn.PU.boolean?(wn(Zn.PU.number),wn(Zn.PU.string)):(wn(Zn.PU.string),wn(Zn.PU.number),wn(Zn.PU.boolean));let Mn="Set column freeze position";const dn=Et+1;return ze===dn&&(Mn="Unset column freeze"),C.createElement(C.Fragment,null,Bn.length?C.createElement(Gr.r,{label:"Set field type"},Bn.map((Rn,Dn)=>C.createElement(as.D,{key:Dn,label:Rn.label,onClick:()=>{const ea=(0,Vl.s7)(se.fields[Et],Rn.options);Rn.options.destinationType===Zn.PU.string&&Al(ea);const Gn={name:se.name,fields:[...se.fields],length:se.length};Gn.fields[Et]=ea,(0,an.rR)(fr,{item:gr.HEADER_MENU_ACTION,menu_action:"convert_field"}),fe(Gn)}}))):null,C.createElement(Hn.N,null),C.createElement(as.D,{label:Mn,onClick:()=>{(0,an.rR)(fr,{item:gr.HEADER_MENU_ACTION,menu_action:"column_freeze"}),xe(ze===dn?{type:Sr.columnFreezeReset}:{type:Sr.columnFreezeChanged,payload:{columnIndex:dn}})}}),C.createElement(as.D,{label:"Rename column",onClick:Xe}),C.createElement(Hn.N,null),C.createElement(as.D,{label:"Delete column",onClick:()=>{(0,an.rR)(fr,{item:gr.HEADER_MENU_ACTION,menu_action:"delete_column"}),fe({...se,fields:se.fields.filter((Rn,Dn)=>Dn!==Et)}),xe({type:Sr.gridSelectionCleared})}}),C.createElement(as.D,{label:"Clear column",onClick:()=>{const Rn=se.fields[Et];Rn.values=Rn.values.map(()=>null),(0,an.rR)(fr,{item:gr.HEADER_MENU_ACTION,menu_action:"clear_column"}),fe({...se})}}))};return C.createElement(qn.t,{renderMenuItems:Nt?on:In,x:Tt,y:yt,onClose:Pe})},xm=({renameColumnData:F,onColumnInputBlur:se,classStyle:fe})=>{const{x:Pe,y:xe,width:Ue,height:ze,inputValue:Xe,columnIdx:ot}=F,[lt,pt]=(0,C.useState)({}),[Et,Tt]=(0,C.useState)(Xe),yt=(0,C.useRef)(null);(0,C.useLayoutEffect)(()=>{yt.current?.focus();const wt=yt.current?.getBoundingClientRect();if(wt){const Qt={right:window.innerWidth<Pe+wt.width,bottom:window.innerHeight<xe+wt.height};pt({position:"fixed",left:Qt.right?Pe-wt.width:Pe,top:Qt.bottom?xe-wt.height:xe,width:Ue,height:ze})}},[ze,Ue,Pe,xe]);const Nt=wt=>{const Qt=wt.target.value;Qt&&se(Qt,ot)},Gt=wt=>{Tt(wt.target.value)},Bt=wt=>{wt.key==="Enter"&&wt.currentTarget.blur()};return C.createElement(sa.ZL,null,C.createElement("input",{type:"text",className:fe,value:Et,onBlur:Nt,ref:yt,style:lt,onChange:Gt,onKeyDown:Bt}))};function il({options:F,data:se,id:fe,fieldConfig:Pe,width:xe,height:Ue}){const[ze,Xe]=(0,C.useReducer)(uh,Tm),{onUpdateData:ot}=(0,Ft.d2)(),{columns:lt,contextMenuData:pt,renameColumnInputData:Et,gridSelection:Tt,columnFreezeIndex:yt,toggleSearch:Nt,isResizeInProgress:Gt}=ze,Bt=se.series[F.selectedSeries??0],wt=(0,k.$j)(),Qt=Pm(wt);(0,C.useEffect)(()=>{Bt&&Xe({type:Sr.updateColumns,payload:{frame:Bt}})},[Bt]);const sn=([oa,zn])=>{const Kn=Bt.fields[oa];return!Kn||zn>Bt.length?vm:Cm(Kn,zn,Mr(Tt))},Xt=(oa,zn)=>{if(Mr(Tt))return;const[Kn,kn]=oa,ua={...Bt,fields:Bt.fields.map(La=>({...La,values:[...La.values]}))},Ia=ua.fields[Kn];if(!Ia)return;const Pa=Ia.values.toArray();Pa[kn]=zn.data,Ia.values=[...Pa],(0,an.rR)(fr,{item:gr.EDIT_CELL}),Qo(ua,ot)},In=oa=>{const zn=Bt.length??0;(0,an.rR)(fr,{item:gr.APPEND_COLUMN}),Qo({...Bt,fields:[...Bt.fields,{name:oa,type:Zn.PU.string,config:{},values:new Array(zn).fill("")}]},ot)},on=()=>{const oa=Bt.fields.map(zn=>{const Kn=zn.values.slice();return Kn.push(null),{...zn,values:Kn}});(0,an.rR)(fr,{item:gr.APPEND_ROW}),Qo({...Bt,fields:oa,length:Bt.length+1},ot)},bn=(oa,zn,Kn,kn)=>{(0,an.rR)(fr,{item:gr.COLUMN_RESIZE}),Xe({type:Sr.columnResizeStart,payload:{columnIndex:Kn,width:zn}})},Bn=(oa,zn,Kn,kn)=>{Xe({type:Sr.columnResizeEnd})},wn=()=>{Xe({type:Sr.closeContextMenu})},Mn=oa=>{if(oa.current&&oa.current.range)return(0,an.rR)(fr,{item:gr.DELETE_BTN_PRESSED,selection:"grid-cell"}),Qo(Dm(Bt,oa.current.range),ot),!0;const zn=oa.rows.toArray(),Kn=oa.columns.toArray();if(zn.length)return(0,an.rR)(fr,{item:gr.DELETE_BTN_PRESSED,selection:"rows"}),Qo(Il(Bt,zn),ot),!0;if(Kn.length){const kn={...Bt,fields:Bt.fields.map((ua,Ia)=>Kn.includes(Ia)?{...ua,values:new Array(Bt.length).fill(null)}:ua)};return(0,an.rR)(fr,{item:gr.DELETE_BTN_PRESSED,selection:"columns"}),Qo(kn,ot),!0}return!1},dn=(oa,zn)=>{zn.preventDefault(),Xe({type:Sr.openCellContextMenu,payload:{event:zn,cell:oa}})},Rn=(oa,zn)=>{zn.preventDefault(),Xe({type:Sr.openHeaderContextMenu,payload:{event:zn,columnIndex:oa}})},Dn=(oa,zn)=>{Xe({type:Sr.openHeaderDropdownMenu,payload:{screenPosition:zn,columnIndex:oa,value:ze.columns[oa].title}})},ea=async(oa,zn)=>{const Kn=Bt.fields.map(Ia=>Ia),kn=Kn[oa];Kn.splice(oa,1),Kn.splice(zn,0,kn),await Qo({...Bt,fields:Kn},ot)&&((0,an.rR)(fr,{item:gr.COLUMN_REORDER}),Xe({type:Sr.columnMove,payload:{from:oa,to:zn}}))},Gn=(oa,zn)=>{const Kn=Bt.fields.map(kn=>({...kn,values:kn.values.slice()}));for(const kn of Kn){const ua=kn.values[oa];kn.values.splice(oa,1),kn.values.splice(zn,0,ua)}(0,an.rR)(fr,{item:gr.ROW_REORDER}),Qo({...Bt,fields:Kn},ot)},ia=()=>{(0,an.rR)(fr,{item:gr.HEADER_MENU_ACTION,menu_action:"rename_column"}),Xe({type:Sr.showColumnRenameInput})},_a=(oa,zn)=>{const Kn=Bt.fields.map(kn=>kn);Kn[zn].name=oa,Xe({type:Sr.hideColumnRenameInput}),Qo({...Bt,fields:Kn},ot)},Ra=()=>{Xe({type:Sr.closeSearch})},ms=oa=>{(0,an.rR)(fr,{item:gr.GRID_SELECTED}),Xe({type:Sr.multipleCellsSelected,payload:{selection:oa}})},va=oa=>{Qo(oa,ot)};if(!Bt)return C.createElement(Mt.a,{panelId:fe,fieldConfig:Pe,data:se});if(!ja())return C.createElement(Mt.a,{panelId:fe,message:"Datagrid is not enabled",fieldConfig:Pe,data:se});if(!document.getElementById("portal")){const oa=document.createElement("div");oa.id="portal",document.body.appendChild(oa)}const ka=bm(wt,Gt);return C.createElement(C.Fragment,null,C.createElement($t.D,{className:ka.dataEditor,getCellContent:sn,columns:lt,rows:Bt.length,width:xe,height:Ue,initialSize:[xe,Ue],theme:Qt,smoothScrollX:!0,smoothScrollY:!0,overscrollY:50,onCellEdited:ja()?Xt:void 0,getCellsForSelection:ja()?!0:void 0,showSearch:ja()?Nt:!1,onSearchClose:Ra,gridSelection:Tt,onGridSelectionChange:ja()?ms:void 0,onRowAppended:ja()?on:void 0,onDelete:ja()?Mn:void 0,rowMarkers:ja()?Gs:ol,onColumnResize:bn,onColumnResizeEnd:Bn,onCellContextMenu:ja()?dn:void 0,onHeaderContextMenu:ja()?Rn:void 0,onHeaderMenuClick:ja()?Dn:void 0,trailingRowOptions:Em,rightElement:ja()?C.createElement(ya,{onColumnInputBlur:In,divStyle:ka.addColumnDiv}):null,rightElementProps:ym,freezeColumns:yt,onRowMoved:ja()?Gn:void 0,onColumnMoved:ja()?ea:void 0}),pt.isContextMenuOpen&&C.createElement(Sm,{menuData:pt,data:Bt,saveData:va,closeContextMenu:wn,dispatch:Xe,gridSelection:Tt,columnFreezeIndex:yt,renameColumnClicked:ia}),Et.isInputOpen?C.createElement(xm,{onColumnInputBlur:_a,renameColumnData:Et,classStyle:ka.renameColumnInput}):null)}const Gi={selectedSeries:0},Om=new L.m(il).setPanelOptions((F,se)=>{const fe=se.data.map((Pe,xe)=>({value:xe,label:Pe.refId}));return se.options&&!fe.map(Pe=>Pe.value).includes(se.options.selectedSeries??0)&&(se.options.selectedSeries=Gi.selectedSeries),F.addSelect({path:"selectedSeries",name:"Select series",defaultValue:Gi.selectedSeries,settings:{options:fe}})});class Im extends C.Component{constructor(){super(...arguments),this.subscription=new vs.yU,this.state={}}componentDidMount(){const{eventBus:se}=this.props;this.subscription.add(se.subscribe(Ya.b_,fe=>{this.setState({event:fe})})),this.subscription.add(se.subscribe(Ya.ql,fe=>{this.setState({event:fe})})),this.subscription.add(se.subscribe(_s.kb,fe=>{this.setState({event:fe})})),this.subscription.add(se.subscribe(_s.Tq,fe=>{this.setState({event:fe})}))}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{event:se}=this.state;if(!se)return C.createElement("div",null,"no events yet");const{type:fe,payload:Pe,origin:xe}=se;return C.createElement(B.E,{autoHeightMin:"100%",autoHeightMax:"100%"},C.createElement("h3",null,"Origin: ",xe?.path),C.createElement("span",null,"Type: ",fe),!!Pe&&C.createElement(C.Fragment,null,C.createElement("pre",null,JSON.stringify(Pe.point,null,"  ")),Pe.data&&C.createElement(ks.e,{data:Pe.data,rowIndex:Pe.rowIndex,columnIndex:Pe.columnIndex})))}}var Am=e(36120);let Ic=100;class Rm extends C.PureComponent{constructor(se){super(se),this.history=new Am.$({capacity:40,append:"head"}),this.eventObserver={next:Pe=>{const xe=Pe.origin;this.history.add({key:Ic++,type:Pe.type,path:xe?.path,payload:Pe.payload}),this.setState({counter:Ic})}},this.state={counter:Ic};const fe=[];fe.push(se.eventBus.getStream(Ya.b_).subscribe(this.eventObserver)),fe.push(se.eventBus.getStream(Ya.ql).subscribe(this.eventObserver)),fe.push(se.eventBus.getStream(Ya.LO).subscribe(this.eventObserver)),this.subs=fe}componentWillUnmount(){for(const se of this.subs)se.unsubscribe()}render(){return C.createElement(B.E,{autoHeightMin:"100%",autoHeightMax:"100%"},this.history.map((se,fe)=>C.createElement("div",{key:se.key},JSON.stringify(se.path)," ",se.type," / X:",JSON.stringify(se.payload.x)," / Y:",JSON.stringify(se.payload.y))))}}var uo=e(75059);class Lm extends C.Component{constructor(){super(...arguments),this.lastRender=Date.now(),this.counters={render:0,dataChanged:0,schemaChanged:0},this.resetCounters=()=>{this.counters={render:0,dataChanged:0,schemaChanged:0},this.forceUpdate()}}shouldComponentUpdate(se){const{data:fe,options:Pe}=this.props;if(se.data!==fe&&(this.counters.dataChanged++,Pe.counters?.schemaChanged)){const xe=se.data?.series,Ue=fe.series;Ue&&xe&&((0,fo.J3)(Ue,xe,fo.bW)||this.counters.schemaChanged++)}return!0}render(){const{data:se,options:fe}=this.props,Pe=fe.counters??{render:!1,dataChanged:!1,schemaChanged:!1};this.counters.render++;const xe=Date.now(),Ue=xe-this.lastRender;this.lastRender=xe;const ze=uo.AS.get(uo.gy.lastNotNull);return C.createElement("div",null,C.createElement("div",null,C.createElement(es.K,{name:"step-backward",title:"reset counters",onClick:this.resetCounters,tooltip:"Step back"}),C.createElement("span",null,Pe.render&&C.createElement("span",null,"Render: ",this.counters.render,"\xA0"),Pe.dataChanged&&C.createElement("span",null,"Data: ",this.counters.dataChanged,"\xA0"),Pe.schemaChanged&&C.createElement("span",null,"Schema: ",this.counters.schemaChanged,"\xA0"),C.createElement("span",null,"TIME: ",Ue,"ms"))),se.series&&se.series.map((Xe,ot)=>C.createElement("div",{key:`${ot}/${Xe.refId}`},C.createElement("h4",null,(0,ts.Ri)(Xe,ot)," (",Xe.length,")"),C.createElement("table",{className:"filter-table"},C.createElement("thead",null,C.createElement("tr",null,C.createElement("td",null,"Field"),C.createElement("td",null,"Type"),C.createElement("td",null,"Last"))),C.createElement("tbody",null,Xe.fields.map((lt,pt)=>{const Et=ze.reduce(lt,!1,!1)[ze.id];return C.createElement("tr",{key:`${pt}/${lt.name}`},C.createElement("td",null,(0,ts.Ct)(lt,Xe,se.series)),C.createElement("td",null,lt.type),C.createElement("td",null,`${Et}`))}))))))}}var Bm=e(10354);function Um(F){const se=(0,Ft.d2)(),fe=Pe=>{se.onInstanceStateChange({name:Pe.currentTarget.value})};return C.createElement(C.Fragment,null,C.createElement(Kt.D,{label:"State name"},C.createElement(Bm.p,{value:se.instanceState?.name??"",onChange:fe})))}function Nm({value:F,context:se,onChange:fe,item:Pe}){return C.createElement("div",null,"Current value: ",se.instanceState?.name," ")}var Yr=(F=>(F.Cursor="cursor",F.Events="events",F.Render="render",F.State="State",F.ThrowError="ThrowError",F))(Yr||{});class wm extends C.Component{render(){const{options:se}=this.props;switch(se.mode){case Yr.Events:return C.createElement(Rm,{eventBus:this.props.eventBus});case Yr.Cursor:return C.createElement(Im,{eventBus:this.props.eventBus});case Yr.State:return C.createElement(Um,{...this.props});case Yr.ThrowError:throw new Error("I failed you and for that i am deeply sorry");default:return C.createElement(Lm,{...this.props})}}}const Fm=new L.m(wm).useFieldConfig().setPanelOptions(F=>{F.addSelect({path:"mode",name:"Mode",defaultValue:Yr.Render,settings:{options:[{label:"Render",value:Yr.Render},{label:"Events",value:Yr.Events},{label:"Cursor",value:Yr.Cursor},{label:"Cursor",value:Yr.Cursor},{label:"Share state",value:Yr.State},{label:"Throw error",value:Yr.ThrowError}]}}).addCustomEditor({id:"stateView",path:"stateView",name:"State view",defaultValue:"",showIf:({mode:se})=>se===Yr.State,editor:Nm}).addBooleanSwitch({path:"counters.render",name:"Render Count",defaultValue:!0,showIf:({mode:se})=>se===Yr.Render}).addBooleanSwitch({path:"counters.dataChanged",name:"Data Changed Count",defaultValue:!0,showIf:({mode:se})=>se===Yr.Render}).addBooleanSwitch({path:"counters.schemaChanged",name:"Schema Changed Count",defaultValue:!0,showIf:({mode:se})=>se===Yr.Render}).addDashboardPicker({path:"dashboardUID",name:"Dashboard",settings:{placeholder:"Select dashboard",isClearable:!0}})});var Td=e(76365),Wm=e(85194);function Nn(F,se={}){(0,an.rR)(`grafana_flamegraph_${F}`,{app:S.Jk.Unknown,grafana_version:R.$.buildInfo.version,...se})}const xr=F=>{const se=(0,Td.oA)(F.data.series[0]);return se?C.createElement(Mt.a,{panelId:F.id,data:F.data,message:(0,Td.Ik)(se)}):C.createElement(Wm.A,{data:F.data.series[0],stickyHeader:!1,getTheme:()=>R.$.theme2,showFlameGraphOnly:F.options?.showFlameGraphOnly??!1,onTableSymbolClick:()=>Nn("table_item_selected"),onViewSelected:fe=>Nn("view_selected",{view:fe}),onTextAlignSelected:fe=>Nn("text_align_selected",{align:fe}),onTableSort:fe=>Nn("table_sort_selected",{sort:fe}),disableCollapsing:!R.$.featureToggles.flameGraphItemCollapsing})};class Md{getListWithDefaults(se){return se.getListAppender({name:is.m.FlameGraph,pluginId:"flamegraph"})}getSuggestionsForData(se){if(!se.data)return;const fe=se.data.series[0];!fe||(0,Td.oA)(fe)||this.getListWithDefaults(se).append({name:is.m.FlameGraph})}}const Ac=new L.m(xr).setSuggestionsSupplier(new Md);var Rc=e(14738),Km=e(62930);const ji=(F,se)=>{const fe="linear-gradient(to right, #5182CC 0%, #245BAF 100%)",Pe=se?fe:"linear-gradient(to right, #f05a28 0%, #fbca0a 100%)",xe=se?fe:"linear-gradient(to right, #FBCA0A 0%, #F05A28 100%)",Ue=F.isDark?Pe:xe;return`
      background-color: ${F.colors.background.secondary};
      margin-right: ${F.spacing(4)};
      border: 1px solid ${F.colors.border.weak};
      border-bottom-left-radius: ${F.shape.borderRadius(2)};
      border-bottom-right-radius: ${F.shape.borderRadius(2)};
      position: relative;
      max-height: 230px;

      ${F.breakpoints.down("xxl")} {
        margin-right: ${F.spacing(2)};
      }
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 2px;
        top: 0;
        background-image: ${Ue};
      }
`},Sd=(0,K.css)`
  padding: 16px;
`,$m=({card:F})=>{const se=(0,k.of)(Vm,F.done);return C.createElement("div",{className:se.card},C.createElement("div",{className:Sd},C.createElement("a",{href:`${F.href}?utm_source=grafana_gettingstarted`,className:se.url,onClick:()=>(0,an.rR)("grafana_getting_started_docs",{title:F.title,link:F.href})},C.createElement("div",{className:se.heading},F.done?"complete":F.heading),C.createElement("h4",{className:se.title},F.title))),C.createElement("a",{href:`${F.learnHref}?utm_source=grafana_gettingstarted`,className:se.learnUrl,target:"_blank",rel:"noreferrer",onClick:()=>(0,an.rR)("grafana_getting_started_docs",{title:F.title,link:F.learnHref})},"Learn how in the docs ",C.createElement(_e.I,{name:"external-link-alt"})))},Vm=(F,se)=>({card:(0,K.css)`
      ${ji(F,se)}

      min-width: 230px;

      ${F.breakpoints.down("md")} {
        min-width: 192px;
      }
    `,heading:(0,K.css)`
      text-transform: uppercase;
      color: ${se?F.v1.palette.blue95:"#FFB357"};
      margin-bottom: ${F.spacing(2)};
    `,title:(0,K.css)`
      margin-bottom: ${F.spacing(2)};
    `,url:(0,K.css)`
      display: inline-block;
    `,learnUrl:(0,K.css)`
      border-top: 1px solid ${F.colors.border.weak};
      position: absolute;
      bottom: 0;
      padding: 8px 16px;
      width: 100%;
    `});var Yi=e(33390);const Lc=({card:F})=>{const se=(0,k.of)(Bc,F.done);return C.createElement("a",{className:se.card,target:"_blank",rel:"noreferrer",href:`${F.href}?utm_source=grafana_gettingstarted`,onClick:fe=>_m(fe,F)},C.createElement("div",{className:Sd},C.createElement("div",{className:se.type},F.type),C.createElement("div",{className:se.heading},F.done?"complete":F.heading),C.createElement("h4",{className:se.cardTitle},F.title),C.createElement("div",{className:se.info},F.info)))},_m=(F,se)=>{F.preventDefault(),Yi.A.get(se.key)||Yi.A.set(se.key,!0),(0,an.rR)("grafana_getting_started_tutorial",{title:se.title})},Bc=(F,se)=>({card:(0,K.css)`
      ${ji(F,se)}
      width: 460px;
      min-width: 460px;

      ${F.breakpoints.down("xl")} {
        min-width: 368px;
      }

      ${F.breakpoints.down("lg")} {
        min-width: 272px;
      }
    `,type:(0,K.css)`
      color: ${F.colors.primary.text};
      text-transform: uppercase;
    `,heading:(0,K.css)`
      text-transform: uppercase;
      color: ${F.colors.primary.text};
      margin-bottom: ${F.spacing(1)};
    `,cardTitle:(0,K.css)`
      margin-bottom: ${F.spacing(2)};
    `,info:(0,K.css)`
      margin-bottom: ${F.spacing(2)};
    `,status:(0,K.css)`
      display: flex;
      justify-content: flex-end;
    `}),zm=({step:F})=>{const se=(0,k.of)(km);return C.createElement("div",{className:se.setup},C.createElement("div",{className:se.info},C.createElement("h2",{className:se.title},F.title),C.createElement("p",null,F.info)),C.createElement("div",{className:se.cards},F.cards.map((fe,Pe)=>{const xe=`${fe.title}-${Pe}`;return fe.type==="tutorial"?C.createElement(Lc,{key:xe,card:fe}):C.createElement($m,{key:xe,card:fe})})))},km=F=>({setup:(0,K.css)`
      display: flex;
      width: 95%;
    `,info:(0,K.css)`
      width: 172px;
      margin-right: 5%;

      ${F.breakpoints.down("xxl")} {
        margin-right: ${F.spacing(4)};
      }
      ${F.breakpoints.down("sm")} {
        display: none;
      }
    `,title:(0,K.css)`
      color: ${F.v1.palette.blue95};
    `,cards:(0,K.css)`
      overflow-x: scroll;
      overflow-y: hidden;
      width: 100%;
      display: flex;
      justify-content: flex-start;
    `});var bi=e(31193);const xd="Grafana fundamentals",Uc="Create users and teams",Qi="getting.started.",Od=`${Qi}${xd.replace(" ","-").trim().toLowerCase()}`,Wo=`${Qi}${Uc.replace(" ","-").trim().toLowerCase()}`,mh=()=>[{heading:"Welcome to vDSP Provisioning",subheading:"The steps below will guide you to quickly finish setting up your Grafana installation.",title:"Basic",info:"The steps below will guide you to quickly finish setting up your Grafana installation.",done:!1,cards:[{type:"tutorial",heading:"Data source and dashboards",title:xd,info:"Set up and understand Grafana if you have no prior experience. This tutorial guides you through the entire process and covers the \u201CData source\u201D and \u201CDashboards\u201D steps to the right.",href:"https://grafana.com/tutorials/grafana-fundamentals",icon:"grafana",check:()=>Promise.resolve(Yi.A.get(Od)),key:Od,done:!1},{type:"docs",title:"Add your first data source",heading:"data sources",icon:"database",learnHref:"https://grafana.com/docs/grafana/latest/features/datasources/add-a-data-source",href:"datasources/new",check:()=>new Promise(F=>{F((0,bi.tR)().getMetricSources().filter(se=>se.meta.builtIn!==!0).length>0)}),done:!1},{type:"docs",heading:"dashboards",title:"Create your first dashboard",icon:"apps",href:"dashboard/new",learnHref:"https://grafana.com/docs/grafana/latest/guides/getting_started/#create-a-dashboard",check:async()=>(await(0,vo.AI)().search({limit:1})).length>0,done:!1}]},{heading:"Setup complete!",subheading:"All necessary steps to use Grafana are done. Now tackle advanced steps or make the best use of this home dashboard \u2013 it is, after all, a fully customizable dashboard \u2013 and remove this panel.",title:"Advanced",info:" Manage your users and teams and add plugins. These steps are optional",done:!1,cards:[{type:"tutorial",heading:"Users",title:"Create users and teams",info:"Learn to organize your users in teams and manage resource access and roles.",href:"https://grafana.com/tutorials/create-users-and-teams",icon:"users-alt",key:Wo,check:()=>Promise.resolve(Yi.A.get(Wo)),done:!1},{type:"docs",heading:"plugins",title:"Find and install plugins",learnHref:"https://grafana.com/docs/grafana/latest/plugins/installation",href:"plugins",icon:"plug",check:async()=>{const F=await(0,vo.AI)().get("/api/plugins",{embedded:0,core:0});return Promise.resolve(F.length>0)},done:!1}]}];class Hm extends C.PureComponent{constructor(){super(...arguments),this.state={checksDone:!1,currentStep:0,steps:mh()},this.onForwardClick=()=>{(0,an.rR)("grafana_getting_started_button_to_advanced_tutorials"),this.setState(se=>({currentStep:se.currentStep+1}))},this.onPreviousClick=()=>{(0,an.rR)("grafana_getting_started_button_to_basic_tutorials"),this.setState(se=>({currentStep:se.currentStep-1}))},this.dismiss=()=>{const{id:se}=this.props,fe=(0,We.UA)().getCurrent(),Pe=fe?.getPanelById(se);(0,an.rR)("grafana_getting_started_remove_panel"),fe?.removePanel(Pe),vo.IB.put("/api/user/helpflags/1",void 0,{showSuccessAlert:!1}).then(xe=>{Ci.TP.user.helpFlags1=xe.helpFlags1})}}async componentDidMount(){const{steps:se}=this.state,fe=se.map(async xe=>{const Ue=xe.cards.map(async Xe=>Xe.check().then(ot=>({...Xe,done:ot}))),ze=await Promise.all(Ue);return{...xe,done:ze.every(Xe=>Xe.done),cards:ze}}),Pe=await Promise.all(fe);this.setState({currentStep:Pe[0].done?1:0,steps:Pe,checksDone:!0})}render(){const{checksDone:se,currentStep:fe,steps:Pe}=this.state,xe=Yl(),Ue=Pe[fe];return C.createElement("div",{className:xe.container},se?C.createElement(C.Fragment,null,C.createElement(Q.$n,{variant:"secondary",fill:"text",className:xe.dismiss,onClick:this.dismiss},"Remove this panel"),fe===Pe.length-1&&C.createElement(Q.$n,{className:(0,K.cx)(xe.backForwardButtons,xe.previous),onClick:this.onPreviousClick,"aria-label":"To basic tutorials",icon:"angle-left",variant:"secondary"}),C.createElement("div",{className:xe.content},C.createElement(zm,{step:Ue})),fe<Pe.length-1&&C.createElement(Q.$n,{className:(0,K.cx)(xe.backForwardButtons,xe.forward),onClick:this.onForwardClick,"aria-label":"To advanced tutorials",icon:"angle-right",variant:"secondary"})):C.createElement("div",{className:xe.loading},C.createElement("div",{className:xe.loadingText},"Checking completed setup steps"),C.createElement(Km.y,{size:"xl",inline:!0})))}}const Yl=(0,Ks.N)(()=>{const F=R.$.theme2;return{container:(0,K.css)({display:"flex",flexDirection:"column",height:"100%",backgroundSize:"cover",padding:`${F.spacing(4)} ${F.spacing(2)} 0`}),content:(0,K.css)({label:"content",display:"flex",justifyContent:"center",[F.breakpoints.down("xxl")]:{marginLeft:F.spacing(3),justifyContent:"flex-start"}}),header:(0,K.css)({label:"header",marginBottom:F.spacing(3),display:"flex",flexDirection:"column",[F.breakpoints.down("lg")]:{flexDirection:"row"}}),headerLogo:(0,K.css)({height:"58px",paddingRight:F.spacing(2),display:"none",[F.breakpoints.up("md")]:{display:"block"}}),heading:(0,K.css)({label:"heading",marginRight:F.spacing(3),marginBottom:F.spacing(3),flexGrow:1,display:"flex",[F.breakpoints.up("md")]:{marginBottom:0}}),backForwardButtons:(0,K.css)({position:"absolute",top:"50%",transform:"translateY(-50%)"}),previous:(0,K.css)({left:"10px",[F.breakpoints.down("md")]:{left:0}}),forward:(0,K.css)({right:"10px",[F.breakpoints.down("md")]:{right:0}}),dismiss:(0,K.css)({alignSelf:"flex-end",textDecoration:"underline",marginBottom:F.spacing(1)}),loading:(0,K.css)({display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}),loadingText:(0,K.css)({marginRight:F.spacing(1)})}}),Gm=new L.m(Hm).setNoPadding();var Kr=e(77678),Nc=e(81297);const Rl={bucketCount:30,bucketOffset:0},Ql={fillOpacity:80,gradientMode:xt.on.None,lineWidth:1};function wc(F,se){return Math.floor(F/se)*se}function Id(F,se){return Math.ceil(F/se)*se}function ll(F){return F.fields[0].type===Zn.PU.string?1:F.fields[1].values[0]-F.fields[0].values[0]}function jm(F){return F.fields[0].type===Zn.PU.string?1:F.fields[1].values[1]-F.fields[0].values[1]}const Ad=(F,se)=>{let{min:fe,max:Pe}=F.fields[2].config,xe=new Oa.e,Ue=F.fields[0].type===Zn.PU.string,ze=ll(F),Xe=jm(F),ot=Xe/ze,lt=Xe!==ze,pt=(wt,Qt,sn,Xt,In,on)=>{let bn=wt.axes[Qt]._space,Bn=wt.valToPos(wt.data[0][0]+ze,"x")-wt.valToPos(wt.data[0][0],"x"),wn=wc(fe??wt.data[0][0],ze),Mn=Id(Pe??wt.data[0][wt.data[0].length-1]+ze,ze),dn=[],Rn=Math.ceil(bn/Bn);for(let Dn=0,ea=wn;ea<=Mn;Dn++,ea+=ze)!(Dn%Rn)&&dn.push(ea);return dn};xe.addScale({scaleKey:"x",isTime:!1,distribution:Ue?xt.L4.Ordinal:lt?xt.L4.Log:xt.L4.Linear,log:2,orientation:xt.Lt.Horizontal,direction:xt.ON.Right,range:lt?(wt,Qt,sn)=>Ss.A.rangeLog(Qt,sn*ot,2,!0):(wt,Qt,sn)=>{fe!=null&&(Qt=fe),Pe!=null&&(sn=Pe);let Xt=wt.data[0][wt.data[0].length-1];return Qt=Id(Qt,ze),sn=!Ue&&sn===Xt?sn+ze:wc(sn,ze),[Qt,sn]}}),xe.addScale({scaleKey:"y",isTime:!1,distribution:xt.L4.Linear,orientation:xt.Lt.Vertical,direction:xt.ON.Up,softMin:0});const Et=F.fields[0].display,Tt=wt=>(0,xs.cN)(Et(wt));xe.addAxis({scaleKey:"x",isTime:!1,placement:xt.vM.Bottom,incrs:Ue?[1]:lt?void 0:Kr.rW,splits:lt||Ue?void 0:pt,values:Ue?(wt,Qt)=>Qt:(wt,Qt)=>{const sn=Qt.map(Tt),Xt=sn.reduce((Bn,wn)=>Math.max((0,ln.kD)(wn,Zt.pi).width,Bn),0),In=10,on=wt.bbox.width/((Xt+In)*devicePixelRatio),bn=Math.ceil(sn.length/on);return sn.map((Bn,wn)=>wn%bn===0?Bn:null)},theme:se});let Nt=F.fields[2].display;xe.addAxis({scaleKey:"y",isTime:!1,placement:xt.vM.Left,formatValue:(wt,Qt)=>(0,xs.cN)(Nt(wt,Qt)),theme:se}),xe.setCursor({points:{show:!1},drag:{x:!0,y:!1,setScale:!0}});let Gt=Ss.A.paths.bars({align:1,size:[1,1/0]}),Bt=0;for(let wt=2;wt<F.fields.length;wt++){const Qt=F.fields[wt];Qt.state=Qt.state??{},Qt.state.seriesIndex=Bt++;const sn={...Ql,...Qt.config.custom},Xt="y",In=(0,Us.Qi)(Qt),bn=(0,Us.lz)(Qt,se).color;xe.addSeries({scaleKey:Xt,lineWidth:sn.lineWidth,lineColor:bn,fillOpacity:sn.fillOpacity,theme:se,colorMode:In,pathBuilder:Gt,show:!sn.hideFrom?.viz,gradientMode:sn.gradientMode,thresholds:Qt.config.thresholds,hardMin:Qt.config.min,hardMax:Qt.config.max,softMin:sn.axisSoftMin,softMax:sn.axisSoftMax,dataFrameFieldIndex:Qt.state.origin})}return xe},Rd=F=>{let se=[];for(const fe of F.fields)fe.name!==Kr.dA&&se.push(fe.values);for(let fe=1;fe<se.length;fe++){let Pe=se[fe];for(let xe=0;xe<Pe.length;xe++)Pe[xe]===0&&(Pe[xe]=null)}return se};class Is extends C.Component{constructor(se){super(se),this.state=this.prepState(se)}prepState(se,fe=!0){let Pe={alignedData:[]};const{alignedFrame:xe}=se;return xe&&(Pe={alignedData:Rd(xe)},fe&&(Pe.config=Ad(xe,this.props.theme))),Pe}renderLegend(se){const{legend:fe}=this.props;return!se||fe.showLegend===!1?null:C.createElement(Vn.$,{data:this.props.rawSeries,config:se,maxHeight:"35%",maxWidth:"60%",...fe})}componentDidUpdate(se){const{structureRev:fe,alignedFrame:Pe,bucketSize:xe,bucketCount:Ue}=this.props;if(Pe!==se.alignedFrame){let ze=this.prepState(this.props,!1);ze&&(Ue!==se.bucketCount||xe!==se.bucketSize||this.props.options!==se.options||this.state.config===void 0||fe!==se.structureRev||!fe)&&(ze.config=Ad(Pe,this.props.theme)),ze&&this.setState(ze)}}render(){const{width:se,height:fe,children:Pe,alignedFrame:xe}=this.props,{config:Ue}=this.state;return Ue?C.createElement(En.KU,{width:se,height:fe,legend:this.renderLegend(Ue)},(ze,Xe)=>C.createElement(Nc.Z,{config:this.state.config,data:this.state.alignedData,width:ze,height:Xe},Pe?Pe(Ue,xe):null)):null}}const Ym=({data:F,options:se,width:fe,height:Pe})=>{const xe=(0,k.$j)(),Ue=(0,C.useMemo)(()=>{if(!F.series.length)return;if(F.series.forEach((ot,lt)=>{ot.fields.forEach((pt,Et)=>{pt.state={...pt.state,origin:{frameIndex:lt,fieldIndex:Et}}})}),F.series.length===1){const ot=(0,Kr.ix)(F.series[0]);if(ot)return(0,Kr.cg)(ot)}const Xe=(0,Kr.p3)(F.series,se);if(Xe)return(0,Kr.cg)(Xe,xe)},[F.series,se,xe]);if(!Ue||!Ue.fields.length)return C.createElement("div",{className:"panel-empty"},C.createElement("p",null,"No histogram found in response"));const ze=ll(Ue);return C.createElement(Is,{options:se,theme:xe,legend:se.legend,rawSeries:F.series,structureRev:F.structureRev,width:fe,height:Pe,alignedFrame:Ue,bucketSize:ze,bucketCount:se.bucketCount},(Xe,ot)=>null)};function cl(F){if(F?.length!==1)return!1;const se=F[0];if(se.fields.length<3||!(0,Kr.NX)(se.fields[0].name)||!(0,Kr.H1)(se.fields[1].name))return!1;for(const fe of se.fields)if(fe.type!==Zn.PU.number)return!1;return!0}const Qm=new L.m(Ym).setPanelOptions(F=>{F.addCustomEditor({id:"__calc__",path:"__calc__",name:"Values",description:"Showing frequencies that are calculated in the query",editor:()=>null,showIf:(se,fe)=>cl(fe)}).addNumberInput({path:"bucketCount",name:Kr.Rt.bucketCount.name,description:Kr.Rt.bucketCount.description,settings:{placeholder:`Default: ${Rl.bucketCount}`,min:0},showIf:(se,fe)=>!cl(fe)}).addNumberInput({path:"bucketSize",name:Kr.Rt.bucketSize.name,description:Kr.Rt.bucketSize.description,settings:{placeholder:"Auto",min:0},defaultValue:Rl.bucketSize,showIf:(se,fe)=>!cl(fe)}).addNumberInput({path:"bucketOffset",name:Kr.Rt.bucketOffset.name,description:Kr.Rt.bucketOffset.description,settings:{placeholder:`Default: ${Rl.bucketOffset}`,min:0},showIf:(se,fe)=>!cl(fe)}).addBooleanSwitch({path:"combine",name:Kr.Rt.combine.name,description:Kr.Rt.combine.description,defaultValue:Rl.combine,showIf:(se,fe)=>!cl(fe)}),ir.H(F)}).useFieldConfig({standardOptions:{[zs.uo.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Es.Y.PaletteClassic}}},useCustomConfig:F=>{const se=Ql;F.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:se.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:se.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:Ir.t.fillGradient[0].value,settings:{options:Ir.t.fillGradient}}),Ar.e(F)}});var Eo=e(55004),Fc=e(60029);const Ld=[{label:"Grafana",value:Eo.qD.Grafana,description:"Core grafana live features"},{label:"Data Sources",value:Eo.qD.DataSource,description:"Data sources with live support"},{label:"Plugins",value:Eo.qD.Plugin,description:"Plugins with live support"}];class Jm extends C.PureComponent{constructor(){super(...arguments),this.state={namespaces:[],paths:[]},this.onScopeChanged=se=>{se.value&&this.props.onChange({scope:se.value,namespace:void 0,path:void 0})},this.onNamespaceChanged=se=>{this.props.onChange({scope:this.props.value?.scope,namespace:se.value,path:void 0})},this.onPathChanged=se=>{const{value:fe,onChange:Pe}=this.props;Pe({scope:fe.scope,namespace:fe.namespace,path:se.value})}}async componentDidMount(){this.updateSelectOptions()}async componentDidUpdate(se){this.props.value!==se.value&&this.updateSelectOptions()}async updateSelectOptions(){this.setState({namespaces:[],paths:[]})}render(){const{namespaces:se,paths:fe}=this.state,{scope:Pe,namespace:xe,path:Ue}=this.props.value,ze=Ti(vn.$W.theme2);return C.createElement(C.Fragment,null,C.createElement(Ct.F,{title:"Grafana Live",severity:"info"},"This supports real-time event streams in grafana core. This feature is under heavy development. Expect the intefaces and structures to change as this becomes more production ready."),C.createElement("div",null,C.createElement("div",{className:ze.dropWrap},C.createElement(Fc.J,null,"Scope"),C.createElement(ve.l6,{options:Ld,value:Ld.find(Xe=>Xe.value===Pe),onChange:this.onScopeChanged})),Pe&&C.createElement("div",{className:ze.dropWrap},C.createElement(Fc.J,null,"Namespace"),C.createElement(ve.l6,{options:se,value:se.find(Xe=>Xe.value===xe)??(xe?{label:xe,value:xe}:void 0),onChange:this.onNamespaceChanged,allowCustomValue:!0,backspaceRemovesValue:!0})),Pe&&xe&&C.createElement("div",{className:ze.dropWrap},C.createElement(Fc.J,null,"Path"),C.createElement(ve.l6,{options:fe,value:Bd(fe,Ue),onChange:this.onPathChanged,allowCustomValue:!0,backspaceRemovesValue:!0}))))}}function Bd(F,se){const fe=F.find(Pe=>Pe.value===se);if(fe)return fe;if(se)return{label:se,value:se}}const Ti=(0,Ks.N)(F=>({dropWrap:(0,K.css)`
    margin-bottom: ${F.spacing(1)};
  `}));var Ud=e(9631),Nd=e(39070),Jo=e(78731),Xm=e(24022),Wc=e(32372),Mi=e(1173),Zm=e(77093),Jl=e(65885);function dl(F){const{data:se,height:fe,width:Pe,options:xe,fieldConfig:Ue,id:ze,timeRange:Xe}=F,ot=(0,k.$j)(),lt=(0,Ft.d2)(),pt=(0,Jl.gy)(se.series)?(0,Jl.S5)(se.series):se.series,Et=pt?.length,Tt=pt[0]?.fields.length,yt=Si(pt,xe),Nt=pt[yt];let Gt=fe;if(!Et||!Tt)return C.createElement(Mt.a,{panelId:ze,fieldConfig:Ue,data:se});if(Et>1){const sn=ot.spacing.gridSize*ot.components.height.md,Xt=ot.spacing.gridSize;Gt=fe-sn-Xt}const Bt=lt.sync&&lt.sync()!==Ga.y.Off,wt=C.createElement(Zm.X,{height:Gt,width:Pe,data:Nt,noHeader:!xe.showHeader,showTypeIcons:xe.showTypeIcons,resizable:!0,initialSortBy:xe.sortBy,onSortByChange:sn=>Fd(sn,F),onColumnResize:(sn,Xt)=>wd(sn,Xt,F),onCellFilterAdded:lt.onAddAdHocFilter,footerOptions:xe.footer,enablePagination:xe.footer?.enablePagination,cellHeight:xe.cellHeight,timeRange:Xe,enableSharedCrosshair:R.$.featureToggles.tableSharedCrosshair&&Bt});if(Et===1)return wt;const Qt=pt.map((sn,Xt)=>({label:(0,ts.Ri)(sn),value:Xt}));return C.createElement("div",{className:Wd.wrapper},wt,C.createElement("div",{className:Wd.selectWrapper},C.createElement(ve.l6,{options:Qt,value:Qt[yt],onChange:sn=>Kc(sn,F)})))}function Si(F,se){return se.frameIndex>0&&se.frameIndex<F.length?se.frameIndex:0}function wd(F,se,fe){const{fieldConfig:Pe}=fe,{overrides:xe}=Pe,Ue=Mi.Ct.byName,ze="custom.width",Xe=xe.find(ot=>ot.matcher.id===Ue&&ot.matcher.options===F);if(Xe){const ot=Xe.properties.find(lt=>lt.id===ze);ot?ot.value=se:Xe.properties.push({id:ze,value:se})}else xe.push({matcher:{id:Ue,options:F},properties:[{id:ze,value:se}]});fe.onFieldConfigChange({...Pe,overrides:xe})}function Fd(F,se){se.onOptionsChange({...se.options,sortBy:F})}function Kc(F,se){se.onOptionsChange({...se.options,frameIndex:F.value||0})}const Wd={wrapper:(0,K.css)`
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
  `,selectWrapper:(0,K.css)`
    padding: 8px 8px 0px 8px;
  `};var Ko=(F=>(F.Raw="raw",F.JSON="json",F.Auto="auto",F.None="none",F))(Ko||{});class Kd extends C.PureComponent{constructor(se){super(se),this.styles=qm(R.$.theme2),this.streamObserver={next:fe=>{(0,Eo.ew)(fe)?this.setState({status:fe,changed:Date.now()}):(0,Eo.Z7)(fe)?this.setState({message:fe.message,changed:Date.now()}):console.log("ignore",fe)}},this.unsubscribe=()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)},this.onSaveJSON=fe=>{const{options:Pe,onOptionsChange:xe}=this.props;try{const Ue=JSON.parse(fe);xe({...Pe,json:Ue})}catch(Ue){console.log("Error reading JSON",Ue)}},this.onPublishClicked=async()=>{const{addr:fe}=this.state;if(!fe){console.log("invalid address");return}const Pe=this.props.options?.json;if(!Pe){console.log("nothing to publish");return}const xe=await(0,Jo.oF)().publish(fe,Pe);console.log("onPublishClicked (response from publish)",xe)},this.isValid=!!(0,Jo.oF)(),this.state={changed:0}}async componentDidMount(){this.loadChannel()}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(se){this.props.options?.channel!==se.options?.channel&&this.loadChannel()}async loadChannel(){const se=this.props.options?.channel;if(!(0,Eo.aj)(se)){console.log("INVALID",se),this.unsubscribe(),this.setState({addr:void 0});return}if((0,Ke.isEqual)(se,this.state.addr)){console.log("Same channel",this.state.addr);return}const fe=(0,Jo.oF)();if(!fe){console.log("INVALID",se),this.unsubscribe(),this.setState({addr:void 0});return}this.unsubscribe(),console.log("LOAD",se);try{this.subscription=fe.getStream(se).subscribe(this.streamObserver),this.setState({addr:se,error:void 0})}catch(Pe){this.setState({addr:void 0,error:Pe})}}renderNotEnabled(){const se=`[feature_toggles]
    enable = live`;return C.createElement(Ct.F,{title:"Grafana Live",severity:"info"},C.createElement("p",null,"Grafana live requires a feature flag to run"),C.createElement("b",null,"custom.ini:"),C.createElement("pre",null,se))}renderMessage(se){const{options:fe}=this.props,{message:Pe}=this.state;if(!Pe)return C.createElement("div",null,C.createElement("h4",null,"Waiting for data:"),fe.channel?.scope,"/",fe.channel?.namespace,"/",fe.channel?.path);if(fe.message===Ko.JSON)return C.createElement(Xm.B,{json:Pe,open:5});if(fe.message===Ko.Auto&&Pe instanceof Ud.k9){const xe={series:(0,$i.we)({data:[Pe],theme:R.$.theme2,replaceVariables:ze=>ze,fieldConfig:{defaults:{},overrides:[]}}),state:Nd.Gu.Streaming},Ue={...this.props,options:{frameIndex:0,showHeader:!0}};return C.createElement(dl,{...Ue,data:xe,height:se})}return C.createElement("pre",null,JSON.stringify(Pe))}renderPublish(se){const{options:fe}=this.props;return C.createElement(C.Fragment,null,C.createElement(Wc.B,{height:se-32,language:"json",value:fe.json?JSON.stringify(fe.json,null,2):"{ }",onBlur:this.onSaveJSON,onSave:this.onSaveJSON,showMiniMap:!1,showLineNumbers:!0}),C.createElement("div",{style:{height:32}},C.createElement(Q.$n,{onClick:this.onPublishClicked},"Publish")))}renderStatus(){const{status:se}=this.state;if(se?.state===Eo.ZF.Connected)return;let fe="";return se&&(fe=this.styles.status[se.state]),C.createElement("div",{className:(0,K.cx)(fe,this.styles.statusWrap)},se?.state)}renderBody(){const{status:se}=this.state,{options:fe,height:Pe}=this.props;if(fe.publish){if(fe.message===Ko.None)return C.createElement("div",null,this.renderPublish(Pe));const xe=Pe/2;return C.createElement("div",null,C.createElement("div",{style:{height:xe,overflow:"hidden"}},C.createElement(B.E,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(xe))),C.createElement("div",null,this.renderPublish(xe)))}return fe.message===Ko.None?C.createElement("pre",null,JSON.stringify(se)):C.createElement("div",{style:{overflow:"hidden",height:Pe}},C.createElement(B.E,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(Pe)))}render(){if(!this.isValid)return this.renderNotEnabled();const{addr:se,error:fe}=this.state;return se?fe?C.createElement("div",null,C.createElement("h2",null,"ERROR"),C.createElement("div",null,JSON.stringify(fe))):C.createElement(C.Fragment,null,this.renderStatus(),this.renderBody()):C.createElement(Ct.F,{title:"Grafana Live",severity:"info"},"Use the panel editor to pick a channel")}}const qm=(0,Ks.N)(F=>({statusWrap:(0,K.css)`
    margin: auto;
    position: absolute;
    top: 0;
    right: 0;
    background: ${F.components.panel.background};
    padding: 10px;
    z-index: ${F.zIndex.modal};
  `,status:{[Eo.ZF.Pending]:(0,K.css)`
      border: 1px solid ${F.v1.palette.orange};
    `,[Eo.ZF.Connected]:(0,K.css)`
      border: 1px solid ${F.colors.success.main};
    `,[Eo.ZF.Connecting]:(0,K.css)`
      border: 1px solid ${F.v1.palette.brandWarning};
    `,[Eo.ZF.Disconnected]:(0,K.css)`
      border: 1px solid ${F.colors.warning.main};
    `,[Eo.ZF.Shutdown]:(0,K.css)`
      border: 1px solid ${F.colors.error.main};
    `,[Eo.ZF.Invalid]:(0,K.css)`
      border: 1px solid red;
    `}})),Xl=new L.m(Kd).setPanelOptions(F=>{F.addCustomEditor({category:["Channel"],id:"channel",path:"channel",name:"Channel",editor:Jm,defaultValue:{}}),F.addRadio({path:"message",name:"Show Message",description:"Display the last message received on this channel",settings:{options:[{value:Ko.Raw,label:"Raw Text"},{value:Ko.JSON,label:"JSON"},{value:Ko.Auto,label:"Auto"},{value:Ko.None,label:"None"}]},defaultValue:Ko.JSON}).addBooleanSwitch({path:"publish",name:"Show Publish",description:"Display a form to publish values",defaultValue:!1})});var ul=e(9557),Zl=e(96192),ef=e(81166),tf=e(17888),nf=e(7030),af=e(93463),$d=e(14647),$c=e(69147),Vd=e(19347);const sf=F=>{const[se,fe]=(0,C.useState)(new Map);return(0,J.A)(async()=>{if(!F){fe(new Map);return}const Pe=await Promise.all(F.filter(xe=>!!xe.datasource?.uid).map(xe=>(0,Vd.l)().get(xe.datasource?.uid).then(Ue=>({key:xe.refId,ds:Ue}))));fe(new Map(Pe.map(({key:xe,ds:Ue})=>[xe,Ue])))},[F]),se},Vc=({data:F,timeZone:se,fieldConfig:fe,options:{showLabels:Pe,showTime:xe,wrapLogMessage:Ue,showCommonLabels:ze,prettifyLogMessage:Xe,sortOrder:ot,dedupStrategy:lt,enableLogDetails:pt,showLogContextToggle:Et},id:Tt})=>{const yt=ot===xt.uH.Ascending,Nt=(0,k.of)(rf),[Gt,Bt]=(0,C.useState)(0),wt=(0,C.useRef)(null),[Qt,sn]=(0,C.useState)(null),[Xt,In]=(0,C.useState)(null),on=F.timeRange,bn=sf(F.request?.targets),[Bn,wn]=(0,C.useState)(null),{eventBus:Mn}=(0,Ft.d2)(),dn=(0,C.useCallback)(Kn=>{Kn?Mn.publish(new Ya.b_({point:{time:Kn.timeEpochMs}})):Mn.publish(new Ya.ql)},[Mn]),Rn=(0,C.useCallback)(()=>{sn(null),Xt&&Xt()},[Xt]),Dn=(0,C.useCallback)((Kn,kn)=>{sn(Kn),In(kn)},[]),ea=(0,C.useCallback)(async Kn=>await lf(Kn,on),[on]),Gn=(0,C.useCallback)(Kn=>{if(!Kn.dataFrame.refId||!bn||!Et&&F.request?.app!==S.Jk.Dashboard&&F.request?.app!==S.Jk.PanelEditor&&F.request?.app!==S.Jk.PanelViewer)return!1;const kn=bn.get(Kn.dataFrame.refId);return(0,ul.Ol)(kn)},[bn,Et,F.request?.app]),ia=(0,C.useCallback)(()=>!(F.request?.app!==S.Jk.Dashboard&&F.request?.app!==S.Jk.PanelEditor&&F.request?.app!==S.Jk.PanelViewer),[F.request?.app]),_a=(0,C.useCallback)(async(Kn,kn,ua)=>{if(!kn.dataFrame.refId||!bn)return Promise.resolve({data:[]});const Ia=F.request?.targets[0];if(!Ia)return Promise.resolve({data:[]});const Pa=bn.get(kn.dataFrame.refId);return(0,ul.Ol)(Pa)?Pa.getLogRowContext(Kn,ua,Ia):Promise.resolve({data:[]})},[F.request?.targets,bn]),[Ra,ms,va]=(0,C.useMemo)(()=>{const Kn=F?(0,$c.HT)(F.series,F.request?.intervalMs,void 0,F.request?.targets):null,kn=Kn?.rows||[],ua=Kn?.meta?.find(Pa=>Pa.label===$c.yR),Ia=(0,$c.M0)(kn,lt);return[kn,Ia,ua]},[F,lt]);(0,C.useLayoutEffect)(()=>{yt&&wt.current?Bt(wt.current.offsetHeight):Bt(0)},[yt,Ra]);const ka=(0,C.useCallback)((Kn,kn)=>(0,Zl.QL)({field:Kn,rowIndex:kn,range:F.timeRange}),[F]),oa=(0,C.useCallback)(Kn=>{Bn?.scrollTo({top:Kn.offsetTop,behavior:"smooth"})},[Bn]);if(!F||Ra.length===0)return C.createElement(tf.a,{fieldConfig:fe,panelId:Tt,data:F,needsStringField:!0});const zn=()=>C.createElement("div",{className:(0,K.cx)(Nt.labelContainer,yt&&Nt.labelContainerAscending)},C.createElement("span",{className:Nt.label},"Common labels:"),C.createElement(af.A,{labels:va?va.value:{labels:"(no common labels)"}}));return C.createElement(C.Fragment,null,Qt&&C.createElement(ef.V,{open:Qt!==null,row:Qt,onClose:Rn,getRowContext:(Kn,kn)=>_a(Kn,Qt,kn),logsSortOrder:ot,timeZone:se}),C.createElement(B.E,{autoHide:!0,scrollTop:Gt,scrollRefCallback:Kn=>wn(Kn)},C.createElement("div",{className:Nt.container,ref:wt},ze&&!yt&&zn(),C.createElement($d.k,{containerRendered:wt.current!==null,scrollIntoView:oa,permalinkedRowId:of()?.logs?.id??void 0,onPermalinkClick:ia()?ea:void 0,logRows:Ra,showContextToggle:Gn,deduplicatedRows:ms,dedupStrategy:lt,showLabels:Pe,showTime:xe,wrapLogMessage:Ue,prettifyLogMessage:Xe,timeZone:se,getFieldLinks:ka,logsSortOrder:ot,enableLogDetails:pt,previewLimit:yt?Ra.length:void 0,onLogRowHover:dn,app:S.Jk.Dashboard,onOpenContext:Dn}),ze&&yt&&zn())))},rf=F=>({container:(0,K.css)({marginBottom:F.spacing(1.5)}),labelContainer:(0,K.css)({margin:F.spacing(0,0,.5,.5),display:"flex",alignItems:"center"}),labelContainerAscending:(0,K.css)({margin:F.spacing(.5,0,.5,0)}),label:(0,K.css)({marginRight:F.spacing(.5),fontSize:F.typography.bodySmall.fontSize,fontWeight:F.typography.fontWeightMedium})});function of(){const se=Ol.kM.getUrlSearchParams()?.panelState;if(se&&Array.isArray(se)&&se?.length>0&&typeof se[0]=="string")try{return JSON.parse(se[0])}catch(fe){console.error("error parsing logsPanelState",fe)}}async function lf(F,se){if(F.rowId===void 0||!F.dataFrame.refId)return;const fe={logs:{id:F.uid}},Pe=new URL(window.location.href);return Pe.searchParams.set("panelState",JSON.stringify(fe)),Pe.searchParams.set("from",(0,oe.yT)(se.from).valueOf().toString(10)),Pe.searchParams.set("to",(0,oe.yT)(se.to).valueOf().toString(10)),await(0,nf.V)(Pe.toString()),Promise.resolve()}class _d{getSuggestionsForData(se){const fe=se.getListAppender({name:"",pluginId:"logs",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}),{dataSummary:Pe}=se;!Pe.hasData||!Pe.hasTimeField||!Pe.hasStringField||(Pe.preferredVisualisationType==="logs"?fe.append({name:is.m.Logs,score:Ts.nQ.Best}):fe.append({name:is.m.Logs}))}}const cf=new L.m(Vc).setPanelOptions(F=>{F.addBooleanSwitch({path:"showTime",name:"Time",description:"",defaultValue:!1}).addBooleanSwitch({path:"showLabels",name:"Unique labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"showCommonLabels",name:"Common labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"wrapLogMessage",name:"Wrap lines",description:"",defaultValue:!1}).addBooleanSwitch({path:"prettifyLogMessage",name:"Prettify JSON",description:"",defaultValue:!1}).addBooleanSwitch({path:"enableLogDetails",name:"Enable log details",description:"",defaultValue:!0}).addRadio({path:"dedupStrategy",name:"Deduplication",description:"",settings:{options:[{value:xt.fY.none,label:"None",description:ul._C[xt.fY.none]},{value:xt.fY.exact,label:"Exact",description:ul._C[xt.fY.exact]},{value:xt.fY.numbers,label:"Numbers",description:ul._C[xt.fY.numbers]},{value:xt.fY.signature,label:"Signature",description:ul._C[xt.fY.signature]}]},defaultValue:xt.fY.none}).addRadio({path:"sortOrder",name:"Order",description:"",settings:{options:[{value:xt.uH.Descending,label:"Newest first"},{value:xt.uH.Ascending,label:"Oldest first"}]},defaultValue:xt.uH.Descending})}).setSuggestionsSupplier(new _d);var df=e(69386),zd=e(62372),uf=e(4172);function Qr(F){const{width:se,options:{feedUrl:fe=zd.$,showImage:Pe}}=F,{state:xe,getNews:Ue}=(0,uf.n)(fe);return(0,C.useEffect)(()=>{const ze=F.eventBus.subscribe(ct._,Ue);return()=>{ze.unsubscribe()}},[Ue,F.eventBus]),(0,C.useEffect)(()=>{Ue()},[Ue]),xe.error?C.createElement(Ct.F,{title:"Error loading RSS feed"},"Make sure that the feed URL is correct and that CORS is configured correctly on the server. See"," ",C.createElement("a",{style:{textDecoration:"underline"},href:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/news/"},"News panel documentation. ",C.createElement(_e.I,{name:"external-link-alt"}))):xe.loading?C.createElement("div",null,"Loading..."):xe.value?C.createElement(B.E,{autoHeightMin:"100%",autoHeightMax:"100%"},xe.value.map((ze,Xe)=>C.createElement(df.K,{key:Xe,index:Xe,width:se,showImage:Pe,data:xe.value}))):null}const pr={showImage:!0},mf=new L.m(Qr).setPanelOptions(F=>{F.addTextInput({path:"feedUrl",name:"URL",description:"Supports RSS and Atom feeds",settings:{placeholder:zd.$},defaultValue:pr.feedUrl}).addBooleanSwitch({path:"showImage",name:"Show image",description:"Controls if the news item social (og:image) image is shown above text content",defaultValue:pr.showImage})});var kd=e(56323),Hd=e(29995),_c=e(89227),fh=e(98361),zc=e(33434),ql=e(44916),Gd=e(4118),jd=e(35472),kc=e(84140),ec=e(59796),Ji=e(3139);let ff=0;const Yd=()=>ff++;function Qd(F){const se=(0,C.useRef)(null);return se.current===null&&(se.current=F+Yd()),se.current.toString()}var ii=(F=>(F.Donut="donut",F.Pie="pie",F))(ii||{}),xo=(F=>(F.Name="name",F.Percent="percent",F.Value="value",F))(xo||{}),xi=(F=>(F.Percent="percent",F.Value="value",F))(xi||{});const gf={values:[]},Jd={displayLabels:[]};function Xd(F){return!F.field.custom?.hideFrom?.viz&&!isNaN(F.display.numeric)}function Zd(F,se){return se.display.numeric+F}const pf=({fieldDisplayValues:F,pieType:se,width:fe,height:Pe,highlightedTitle:xe,displayLabels:Ue=[],tooltipOptions:ze})=>{const Xe=(0,k.$j)(),ot=Qd("PieChart"),lt=(0,k.of)(Hc),pt=(0,Gd.A)(),{containerRef:Et,TooltipInPortal:Tt}=(0,jd.A)({detectBounds:!0,scroll:!0}),yt=F.filter(Xd),Nt=on=>on.display.numeric,Gt=on=>`${ot}-${(0,kc.A)(on).toHex()}`,Bt=on=>`url(#${Gt(on)})`,wt=Ue.length>0,Qt=ze.mode!=="none"&&pt.tooltipOpen,sn=yt.reduce(Zd,0),Xt=yf(fe,Pe,se),In=[...new Set(yt.map(on=>on.display.color??Es.F))];return C.createElement("div",{className:lt.container},C.createElement("svg",{width:Xt.size,height:Xt.size,ref:Et,style:{overflow:"visible"}},C.createElement(zc.A,{top:Xt.position,left:Xt.position},In.map(on=>C.createElement(fh.A,{key:on,id:Gt(on),from:tu(on,Xe),to:Ef(on,Xe),fromOffset:Xt.gradientFromOffset,toOffset:"1",gradientUnits:"userSpaceOnUse",cx:0,cy:0,radius:Xt.outerRadius})),C.createElement(ql.A,{data:yt,pieValue:Nt,outerRadius:Xt.outerRadius,innerRadius:Xt.innerRadius,cornerRadius:3,padAngle:.005},on=>C.createElement(C.Fragment,null,on.arcs.map(bn=>{const Bn=bn.data.display.color??Es.F,wn=nu(xe,bn);return bn.data.hasLinks&&bn.data.getLinks?C.createElement(ec.e,{key:bn.index,links:bn.data.getLinks},Mn=>C.createElement(qd,{tooltip:pt,highlightState:wn,arc:bn,pie:on,fill:Bt(Bn),openMenu:Mn.openMenu,tooltipOptions:ze})):C.createElement(qd,{key:bn.index,highlightState:wn,tooltip:pt,arc:bn,pie:on,fill:Bt(Bn),tooltipOptions:ze})}),wt&&on.arcs.map(bn=>{const Bn=nu(xe,bn);return C.createElement(hf,{arc:bn,key:bn.index,highlightState:Bn,outerRadius:Xt.outerRadius,innerRadius:Xt.innerRadius,displayLabels:Ue,total:sn,color:Xe.colors.text.primary})}))))),Qt?C.createElement(Tt,{key:Math.random(),top:pt.tooltipTop,className:lt.tooltipPortal,left:pt.tooltipLeft,unstyled:!0,applyPositionStyle:!0},C.createElement(Ji.o,{series:pt.tooltipData})):null)};function qd({arc:F,pie:se,highlightState:fe,openMenu:Pe,fill:xe,tooltip:Ue,tooltipOptions:ze}){const Xe=(0,k.$j)(),ot=(0,k.of)(Hc),{eventBus:lt}=(0,Ft.d2)(),pt=(0,C.useCallback)(yt=>{lt?.publish({type:Ya.ql.type,payload:{raw:yt,x:0,y:0,dataId:F.data.display.title}}),Ue.hideTooltip()},[lt,F,Ue]),Et=(0,C.useCallback)(yt=>{lt?.publish({type:Ya.b_.type,payload:{raw:yt,x:0,y:0,dataId:F.data.display.title}});const Nt=yt.currentTarget.ownerSVGElement;if(Nt){const Gt=(0,_c.A)(Nt,yt);Ue.showTooltip({tooltipLeft:Gt.x,tooltipTop:Gt.y,tooltipData:vf(se,F,ze)})}},[lt,F,Ue,se,ze]),Tt=au(fe,ot);return C.createElement("g",{key:F.data.display.title,className:Tt,onMouseMove:ze.mode!=="none"?Et:void 0,onMouseOut:pt,onClick:Pe,"data-testid":Te.Tp.components.Panels.Visualization.PieChart.svgSlice},C.createElement("path",{d:se.path({...F}),fill:xe,stroke:Xe.colors.background.primary,strokeWidth:1}))}function hf({arc:F,outerRadius:se,innerRadius:fe,displayLabels:Pe,total:xe,color:Ue,highlightState:ze}){const Xe=(0,k.of)(Hc),ot=fe===0?se/6:fe,[lt,pt]=eu(F,se,ot);if(!(F.endAngle-F.startAngle>=.3))return null;let Tt=Pe.includes(xo.Name)?Math.min(Math.max(se/150*14,12),30):Math.min(Math.max(se/100*14,12),36);return C.createElement("g",{className:au(ze,Xe)},C.createElement("text",{fill:Ue,x:lt,y:pt,dy:".33em",fontSize:Tt,fontWeight:500,textAnchor:"middle",pointerEvents:"none"},Pe.includes(xo.Name)&&C.createElement("tspan",{x:lt,dy:"1.2em"},F.data.display.title),Pe.includes(xo.Value)&&C.createElement("tspan",{x:lt,dy:"1.2em"},(0,xs.cN)(F.data.display)),Pe.includes(xo.Percent)&&C.createElement("tspan",{x:lt,dy:"1.2em"},(F.data.display.numeric/xe*100).toFixed(F.data.field.decimals??0)+"%")))}function vf(F,se,fe){return fe.mode==="multi"?F.arcs.filter(Pe=>{const xe=Pe.data.field;return xe&&!xe.custom?.hideFrom?.tooltip&&!xe.custom?.hideFrom?.viz}).map(Pe=>({color:Pe.data.display.color??Es.F,label:Pe.data.display.title,value:(0,xs.cN)(Pe.data.display),isActive:Pe.index===se.index})):[{color:se.data.display.color??Es.F,label:se.data.display.title,value:(0,xs.cN)(se.data.display)}]}function eu(F,se,fe){const Pe=(se+fe)/2,xe=(+F.startAngle+ +F.endAngle)/2-Math.PI/2;return[Math.cos(xe)*Pe,Math.sin(xe)*Pe]}function tu(F,se){return(0,kc.A)(F).darken(20*(se.isDark?1:-.7)).spin(4).toRgbString()}function Ef(F,se){return(0,kc.A)(F).darken(10*(se.isDark?1:-.7)).spin(-4).toRgbString()}function yf(F,se,fe,Pe=16){const xe=Math.min(se,F),Ue=(xe-Pe*2)/2,ze=fe===ii.Pie?Ue:Math.max(Ue/3,20),Xe=Ue-ze,ot=(xe-Pe*2)/2,lt=1-(Ue-Xe)/Ue;return{position:ot+Pe,size:xe,outerRadius:Ue,innerRadius:Xe,gradientFromOffset:lt}}var Df=(F=>(F[F.Highlighted=0]="Highlighted",F[F.Deemphasized=1]="Deemphasized",F[F.Normal=2]="Normal",F))(Df||{});function nu(F,se){return F?F===se.data.display.title?0:1:2}function au(F,se){switch(F){case 0:return se.svgArg.highlighted;case 1:return se.svgArg.deemphasized;case 2:default:return se.svgArg.normal}}const Hc=F=>({container:(0,K.css)`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `,svgArg:{normal:(0,K.css)`
        transition: all 200ms ease-in-out;
      `,highlighted:(0,K.css)`
        transition: all 200ms ease-in-out;
        transform: scale3d(1.03, 1.03, 1);
      `,deemphasized:(0,K.css)`
        transition: all 200ms ease-in-out;
        fill-opacity: 0.5;
      `},tooltipPortal:(0,K.css)`
      ${(0,da.getTooltipContainerStyles)(F)}
    `}),Pf={displayMode:xt.lm.List,showLegend:!0,placement:"right",calcs:[],values:[xi.Percent]};function su(F){const{data:se,timeZone:fe,fieldConfig:Pe,replaceVariables:xe,width:Ue,height:ze,options:Xe,id:ot}=F,lt=(0,k.$j)(),pt=ru(),Et=(0,kd.PI)({fieldConfig:Pe,reduceOptions:Xe.reduceOptions,data:se.series,theme:lt,replaceVariables:xe,timeZone:fe});return tc(Et)?C.createElement(En.KU,{width:Ue,height:ze,legend:Cf(F,Et)},(Tt,yt)=>C.createElement(pf,{width:Tt,height:yt,highlightedTitle:pt,fieldDisplayValues:Et,tooltipOptions:Xe.tooltip,pieType:Xe.pieType,displayLabels:Xe.displayLabels})):C.createElement(Mt.a,{panelId:ot,fieldConfig:Pe,data:se})}function Cf(F,se){const fe=F.options.legend??Pf;if(fe.showLegend===!1)return;const Pe=se.filter(Xd).reduce(Zd,0),xe=se.sort((Ue,ze)=>isNaN(Ue.display.numeric)?1:isNaN(ze.display.numeric)?-1:ze.display.numeric-Ue.display.numeric).map((Ue,ze)=>{const Xe=Ue.field.custom?.hideFrom??{};if(Xe.legend)return;const ot=!!Xe.viz,lt=Ue.display;return{label:lt.title??"",color:lt.color??Es.F,yAxis:1,disabled:ot,getItemKey:()=>(lt.title??"")+ze,getDisplayValues:()=>{const pt=fe.values??[];let Et=[];if(pt.includes(xi.Value)&&Et.push({numeric:lt.numeric,text:(0,xs.cN)(lt),title:"Value"}),pt.includes(xi.Percent)){const Tt=ot?0:lt.numeric/Pe,yt=Tt*100;Et.push({numeric:Tt,percent:yt,text:ot||isNaN(Tt)?F.fieldConfig.defaults.noValue??"-":yt.toFixed(Ue.field.decimals??0)+"%",title:pt.length>1?"Percent":""})}return Et}}}).filter(Ue=>!!Ue);return C.createElement(En.KU.Legend,{placement:fe.placement,width:fe.width},C.createElement(Fn.t,{items:xe,seriesVisibilityChangeBehavior:Hd.K.Hide,placement:fe.placement,displayMode:fe.displayMode}))}function tc(F){return F.some(se=>se.view?.dataFrame.length)}function ru(){const[F,se]=(0,C.useState)(),{eventBus:fe}=(0,Ft.d2)();return(0,C.useEffect)(()=>{const Pe=ze=>{se(ze.payload.dataId)},xe=ze=>{se(void 0)},Ue=new vs.yU;return Ue.add(fe.getStream(Ya.b_).subscribe({next:Pe})),Ue.add(fe.getStream(Ya.ql).subscribe({next:xe})),()=>{Ue.unsubscribe()}},[se,fe]),F}const bf=(F,se,fe)=>{if(se==="grafana-piechart-panel"&&fe.angular){const Pe=fe.angular,xe=[];let Ue=F.options;if(Pe.aliasColors)for(const ze of Object.keys(Pe.aliasColors)){const Xe=Pe.aliasColors[ze];Xe&&xe.push({matcher:{id:Mi.Ct.byName,options:ze},properties:[{id:zs.uo.Color,value:{mode:Es.Y.Fixed,fixedColor:Xe}}]})}if(F.fieldConfig={overrides:xe,defaults:{unit:Pe.format,decimals:Pe.decimals?Pe.decimals:0}},Ue.legend={placement:"right",values:[],displayMode:xt.lm.Table,showLegend:!0,calcs:[]},Pe.valueName)switch(Ue.reduceOptions={calcs:[]},Pe.valueName){case"current":Ue.reduceOptions.calcs=["lastNotNull"];break;case"min":Ue.reduceOptions.calcs=["min"];break;case"max":Ue.reduceOptions.calcs=["max"];break;case"avg":Ue.reduceOptions.calcs=["mean"];break;case"total":Ue.reduceOptions.calcs=["sum"];break}switch(Pe.legendType){case"Under graph":Ue.legend.placement="bottom";break;case"Right side":Ue.legend.placement="right";break}switch(Pe.pieType){case"pie":Ue.pieType=ii.Pie;break;case"donut":Ue.pieType=ii.Donut;break}return Pe.legend&&(Pe.legend.show||(Ue.legend.showLegend=!1),Pe.legend.values&&Ue.legend.values.push(xi.Value),Pe.legend.percentage&&Ue.legend.values.push(xi.Percent)),Pe.legendType==="On graph"&&(Ue.legend.showLegend=!1,Ue.displayLabels=[xo.Name],Pe.legend.values&&Ue.displayLabels.push(xo.Value),Pe.legend.percentage&&Ue.displayLabels.push(xo.Percent)),Ue}return{}};class ou{getSuggestionsForData(se){const fe=se.getListAppender({name:is.m.PieChart,pluginId:"piechart",options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},displayLabels:[xo.Percent],legend:{calcs:[],displayMode:xt.lm.Hidden,placement:"right",values:[],showLegend:!1}}}),{dataSummary:Pe}=se;if(Pe.hasNumberField){if(Pe.hasStringField&&Pe.frameCount===1){if(Pe.rowCountTotal>30||Pe.rowCountTotal<2)return;fe.append({name:is.m.PieChart,options:{reduceOptions:{values:!0,calcs:[]}}}),fe.append({name:is.m.PieChartDonut,options:{reduceOptions:{values:!0,calcs:[]},pieType:ii.Donut}});return}Pe.numberFieldCount>30||Pe.numberFieldCount<2||(fe.append({name:is.m.PieChart}),fe.append({name:is.m.PieChartDonut,options:{pieType:ii.Donut}}))}}}const Tf=new L.m(su).setPanelChangeHandler(bf).useFieldConfig({disableStandardOptions:[zs.uo.Thresholds],standardOptions:{[zs.uo.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Es.Y.PaletteClassic}}},useCustomConfig:F=>{Ar.e(F)}}).setPanelOptions(F=>{(0,gi.L)(F),F.addRadio({name:"Piechart type",description:"How the piechart should be rendered",path:"pieType",settings:{options:[{value:ii.Pie,label:"Pie"},{value:ii.Donut,label:"Donut"}]},defaultValue:ii.Pie}).addMultiSelect({name:"Labels",path:"displayLabels",description:"Select the labels to be displayed in the pie chart",settings:{options:[{value:xo.Percent,label:"Percent"},{value:xo.Name,label:"Name"},{value:xo.Value,label:"Value"}]}}),_r.D(F),ir.H(F,!1),F.addMultiSelect({name:"Legend values",path:"legend.values",category:["Legend"],settings:{options:[{value:xi.Percent,label:"Percent"},{value:xi.Value,label:"Value"}]},showIf:se=>se.legend.showLegend!==!1})}).setSuggestionsSupplier(new ou);var iu=e(36373),nc=e(11082),lu=e(34163),Ll=e(82389);const Oi=({data:F,alignedData:se,seriesIdx:fe,datapointIdx:Pe,timeZone:xe,onAnnotationAdd:Ue})=>{const ze=(0,k.$j)();if(!F||Pe==null)return null;const Xe=se.fields[fe],ot=[],lt=new Set;if(Xe.getLinks){const on=Xe.values[Pe],bn=Xe.display?Xe.display(on):{text:`${on}`,numeric:+on};Xe.getLinks({calculatedValue:bn,valueRowIndex:Pe}).forEach(Bn=>{const wn=`${Bn.title}/${Bn.href}`;lt.has(wn)||(ot.push(Bn),lt.add(wn))})}const pt=se.fields[0],Et=pt.display||(0,Hs.J)({field:pt,timeZone:xe,theme:ze}),Tt=Xe.state?.origin,yt=Xe.display||(0,Hs.J)({field:Xe,timeZone:xe,theme:ze}),Nt=Xe.values[Pe],Gt=yt(Nt),Bt=Tt?(0,ts.Ct)(F[Tt.frameIndex].fields[Tt.fieldIndex],F[Tt.frameIndex],F):null,wt=(0,ys.GY)(Xe,Pe);let Qt;wt&&(Qt=pt.values[wt]);const sn=pt.values[Pe];let Xt=null,In=null;if(Qt){const on=Qt&&(0,ys.c5)(Qt-sn);In=C.createElement(C.Fragment,null,C.createElement("br",null),C.createElement("strong",null,"Duration:")," ",on),Xt=C.createElement(C.Fragment,null," to"," ",C.createElement("strong",null,Et(pt.values[wt]).text))}return C.createElement("div",null,C.createElement("div",{style:{fontSize:ze.typography.bodySmall.fontSize}},Bt,C.createElement("br",null),C.createElement(Ji.g,{label:Gt.text,color:Gt.color||Es.F,isActive:!0}),"From ",C.createElement("strong",null,Et(pt.values[Pe]).text),Xt,In),C.createElement("div",{style:{margin:ze.spacing(1,-1,-1,-1),borderTop:`1px solid ${ze.colors.border.weak}`}},Ue&&C.createElement(as.D,{label:"Add annotation",icon:"comment-alt",onClick:Ue}),ot.length>0&&ot.map((on,bn)=>C.createElement(as.D,{key:bn,icon:"external-link-alt",target:on.target,label:on.title,url:on.href,onClick:on.onClick}))))};Oi.displayName="StateTimelineTooltip";var ac=e(11389),cu=e(58749),du=e(92663),Mf=e(10875),Sf=e(21164);const uu=({frames:F,seriesFrame:se,dataIdxs:fe,seriesIdx:Pe,mode:xe=xt.$N.Single,sortOrder:Ue=xt.xB.None,scrollable:ze=!1,isPinned:Xe,annotate:ot,timeRange:lt,withDuration:pt})=>{const Et=(0,k.of)(si.$),Tt=se.fields[0],yt=Pe!=null?fe[Pe]:fe.find(Qt=>Qt!=null),Nt=Tt.display(Tt.values[yt]).text;xe=Xe?xt.$N.Single:xe;const Gt=(0,Mf.cp)(se.fields,Tt,fe,Pe,xe,Ue);if(pt&&xe===xt.$N.Single){const Qt=se.fields[Pe],sn=(0,ys.GY)(Qt,yt);let Xt;sn&&(Xt=Tt.values[sn]);const In=Tt.values[yt];let on;if(Xt)on=Xt&&(0,ys.c5)(Xt-In);else{const bn=lt.to.valueOf();on=(0,ys.c5)(bn-In)}Gt.push({label:"Duration",value:on})}let Bt=[];if(Pe!=null){const Qt=se.fields[Pe],sn=fe[Pe];Bt=(0,Sf.u)(Qt,sn)}const wt={label:Tt.type===Zn.PU.time?"":(0,ts.Ct)(Tt,se,F),value:Nt};return C.createElement("div",null,C.createElement("div",{className:Et.wrapper},C.createElement(du.A,{headerLabel:wt,isPinned:Xe}),C.createElement(ac.o,{contentLabelValue:Gt,isPinned:Xe,scrollable:ze}),Xe&&C.createElement(cu.S,{dataLinks:Bt,annotate:ot})))},sc=10,Ii=({data:F,timeRange:se,timeZone:fe,options:Pe,width:xe,height:Ue,replaceVariables:ze,onChangeTimeRange:Xe})=>{const ot=(0,k.$j)(),lt=(0,C.useRef)(void 0),pt=(0,C.useRef)(!1),[Et,Tt]=(0,C.useState)(void 0),[yt,Nt]=(0,C.useState)(null),[Gt,Bt]=(0,C.useState)(null),[wt,Qt]=(0,C.useState)(null),[sn,Xt]=(0,C.useState)(!1),[In,on]=(0,C.useState)(!1),[bn,Bn]=(0,C.useState)(null),{sync:wn,canAddAnnotations:Mn}=(0,Ft.d2)(),dn=()=>{pt.current=!1,Nt(null),on(!1)},Rn=()=>{pt.current=!pt.current,on(pt.current)},{frames:Dn,warn:ea}=(0,C.useMemo)(()=>(0,ys.Qe)(F.series,Pe.mergeValues??!0,se,ot),[F.series,Pe.mergeValues,se,ot]),Gn=(0,C.useMemo)(()=>(0,ys.Or)(Dn,Pe.legend,ot),[Dn,Pe.legend,ot]),ia=(0,C.useMemo)(()=>Tl(Pe.timezone,fe),[Pe.timezone,fe]),_a=(0,C.useCallback)((va,ka,oa,zn)=>{const Kn=Dn??[],kn=Kn.reduce((ua,Ia)=>ua+Ia.fields.filter(Pa=>Pa.type!==Zn.PU.time).length,0);return ka===null||oa===null||va.fields.length-1!==kn||!va.fields[ka]?null:C.createElement(C.Fragment,null,In&&C.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},C.createElement(Qa.J,{onClick:dn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),C.createElement(Oi,{data:Kn,alignedData:va,seriesIdx:ka,datapointIdx:oa,timeZone:fe,onAnnotationAdd:zn}))},[fe,Dn,In]);if(!Dn||ea)return C.createElement("div",{className:"panel-empty"},C.createElement("p",null,ea??"No data found in response"));if(Dn.length===1){const va=(0,Ud.wC)(Dn[0])}const Ra=!!(Mn&&Mn()),ms=R.$.featureToggles.newVizTooltips&&(wn==null||wn()!==Ga.y.Tooltip);return C.createElement(Ll.I,{theme:ot,frames:Dn,structureRev:F.structureRev,timeRange:se,timeZone:ia,width:xe,height:Ue,legendItems:Gn,...Pe,mode:ys.pm.Changes},(va,ka)=>(lt.current!==va&&!ms&&(lt.current=xa({config:va,onUPlotClick:Rn,setFocusedSeriesIdx:Bt,setFocusedPointIdx:Qt,setCoords:Nt,setHover:Tt,isToolTipOpen:pt,isActive:sn,setIsActive:Xt,sync:wn})),C.createElement(C.Fragment,null,ms?C.createElement(C.Fragment,null,Pe.tooltip.mode!==xt.$N.None&&C.createElement(Lr.xl,{config:va,hoverMode:Lr.b3.xOne,queryZoom:Xe,render:(oa,zn,Kn,kn,ua,Ia,Pa)=>{if(Pa)return null;if(Ra&&Ia!=null){Bn(Ia),ua();return}const La=()=>{let On=oa.posToVal(oa.cursor.left,"x");Bn({from:On,to:On}),ua()};return C.createElement(uu,{frames:Dn??[],seriesFrame:ka,dataIdxs:zn,seriesIdx:Kn,mode:Pe.tooltip.mode,sortOrder:Pe.tooltip.sort,isPinned:kn,timeRange:se,annotate:Ra?La:void 0,withDuration:!0})},maxWidth:Pe.tooltip.maxWidth,maxHeight:Pe.tooltip.maxHeight}),C.createElement(sr.W,{annotations:F.annotations??[],config:va,timeZone:fe,newRange:bn,setNewRange:Bn,canvasRegionRendering:!1})):C.createElement(C.Fragment,null,C.createElement(Bo.j,{config:va,onZoom:Xe}),C.createElement(br,{config:va,onChangeTimeRange:Xe}),F.annotations&&C.createElement(Zs,{annotations:F.annotations,config:va,timeZone:fe}),Ra?C.createElement(ha,{data:ka,timeZone:fe,config:va},({startAnnotating:oa})=>Pe.tooltip.mode===xt.$N.None||wt===null||!sn&&wn&&wn()===Ga.y.Crosshair?null:C.createElement(sa.ZL,null,Et&&yt&&Gt&&C.createElement(ga.o,{position:{x:yt.viewport.x,y:yt.viewport.y},offset:{x:sc,y:sc},allowPointerEvents:pt.current},_a(ka,Gt,wt,()=>{oa({coords:{plotCanvas:yt.canvas,viewport:yt.viewport}}),dn()})))):C.createElement(sa.ZL,null,Pe.tooltip.mode!==xt.$N.None&&Et&&yt&&C.createElement(ga.o,{position:{x:yt.viewport.x,y:yt.viewport.y},offset:{x:sc,y:sc},allowPointerEvents:pt.current},_a(ka,Gt,wt)))))))};var Gc=e(25019);const mu=(F,se,fe)=>{let Pe=F.options??{};if(se==="natel-discrete-panel"&&fe.angular){const xe=fe.angular,Ue=F.fieldConfig??{defaults:{},overrides:[]};xe.units&&(Ue.defaults.unit=xe.units);const ze={fillOpacity:100,lineWidth:0};Ue.defaults.custom=ze,Pe.mergeValues=!0;const Xe={type:Gc.d.ValueToText,options:{}};if(Ue.defaults.mappings=[Xe],(0,Ke.isArray)(xe.colorMaps))for(const ot of xe.colorMaps){const lt=ot.color;lt&&(Xe.options[ot.text]={color:lt})}if((0,Ke.isArray)(xe.valueMaps))for(const ot of xe.valueMaps){const lt=ot.text,pt=ot.value;if(lt&&pt){let Et=Xe.options[pt];Et?Et.text=lt:Xe.options[pt]={text:lt}}}if((0,Ke.isArray)(xe.rangeMaps))for(const ot of xe.rangeMaps){let lt=+ot.from,pt=+ot.to;const Et=ot.text;Et&&Ue.defaults.mappings.push({type:Gc.d.RangeToText,options:{from:lt,to:pt,result:{text:Et}}})}F.fieldConfig=Ue}return Pe},rc={alignValue:"left",mergeValues:!0,rowHeight:.9,showValue:xt.yL.Auto},fu={fillOpacity:70,lineWidth:0};class xf{getSuggestionsForData(se){const{dataSummary:fe}=se;if(!fe.hasData||!fe.hasTimeField||!fe.hasStringField&&!fe.hasNumberField||fe.numberFieldCount>=30||fe.preferredVisualisationType==="logs")return;se.getListAppender({name:"",pluginId:"state-timeline",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:is.m.StateTimeline})}}const Of=new L.m(Ii).setPanelChangeHandler(mu).useFieldConfig({standardOptions:{[zs.uo.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Es.Y.ContinuousGrYlRd}}},useCustomConfig:F=>{F.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:fu.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:fu.fillOpacity,settings:{min:0,max:100,step:1}}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",defaultValue:!1,editor:lu.e,override:lu.e,shouldApply:se=>se.type!==Zn.PU.time,process:to.hS,settings:{isTime:!0}}).addCustomEditor({id:"insertNulls",path:"insertNulls",name:"Disconnect values",defaultValue:!1,editor:nc.Z,override:nc.Z,shouldApply:se=>se.type!==Zn.PU.time,process:to.hS,settings:{isTime:!0}}),Ar.e(F)}}).setPanelOptions(F=>{F.addBooleanSwitch({path:"mergeValues",name:"Merge equal consecutive values",defaultValue:rc.mergeValues}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:xt.yL.Auto,label:"Auto"},{value:xt.yL.Always,label:"Always"},{value:xt.yL.Never,label:"Never"}]},defaultValue:rc.showValue}).addRadio({path:"alignValue",name:"Align values",settings:{options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]},defaultValue:rc.alignValue}).addSliderInput({path:"rowHeight",name:"Row height",settings:{min:0,max:1,step:.01},defaultValue:rc.rowHeight}),ir.H(F,!1),_r.D(F,!R.$.featureToggles.newVizTooltips)}).setSuggestionsSupplier(new xf).setDataSupport({annotations:!0}),gu=({data:F,alignedData:se,seriesIdx:fe,datapointIdx:Pe,timeZone:xe})=>{const Ue=(0,k.$j)();if(!F||Pe==null)return null;const ze=se.fields[fe],Xe=[],ot=new Set;if(ze.getLinks){const Bt=ze.values[Pe],wt=ze.display?ze.display(Bt):{text:`${Bt}`,numeric:+Bt};ze.getLinks({calculatedValue:wt,valueRowIndex:Pe}).forEach(Qt=>{const sn=`${Qt.title}/${Qt.href}`;ot.has(sn)||(Xe.push(Qt),ot.add(sn))})}const lt=se.fields[0],pt=lt.display||(0,Hs.J)({field:lt,timeZone:xe,theme:Ue}),Et=ze.state?.origin,Tt=ze.display||(0,Hs.J)({field:ze,timeZone:xe,theme:Ue}),yt=ze.values[Pe],Nt=Tt(yt),Gt=Et?(0,ts.Ct)(F[Et.frameIndex].fields[Et.fieldIndex],F[Et.frameIndex],F):null;return C.createElement("div",null,C.createElement("div",{style:{fontSize:Ue.typography.bodySmall.fontSize}},C.createElement("strong",null,pt(lt.values[Pe]).text),C.createElement("br",null),C.createElement(Ji.g,{label:Nt.text,color:Nt.color||Es.F,isActive:!0}),Gt),Xe.length>0&&C.createElement("div",{style:{margin:Ue.spacing(1,-1,-1,-1),borderTop:`1px solid ${Ue.colors.border.weak}`}},Xe.map((Bt,wt)=>C.createElement(as.D,{key:wt,icon:"external-link-alt",target:Bt.target,label:Bt.title,url:Bt.href,onClick:Bt.onClick}))))};gu.displayName="StatusHistoryTooltip";const pu=10,If=({data:F,timeRange:se,timeZone:fe,options:Pe,width:xe,height:Ue,onChangeTimeRange:ze})=>{const Xe=(0,k.$j)(),ot=(0,C.useRef)(void 0),lt=(0,C.useRef)(!1),[pt,Et]=(0,C.useState)(void 0),[Tt,yt]=(0,C.useState)(null),[Nt,Gt]=(0,C.useState)(null),[Bt,wt]=(0,C.useState)(null),[Qt,sn]=(0,C.useState)(!1),[Xt,In]=(0,C.useState)(!1),[on,bn]=(0,C.useState)(null),{sync:Bn,canAddAnnotations:wn}=(0,Ft.d2)(),Mn=!!(wn&&wn()),dn=()=>{lt.current=!1,yt(null),In(!1)},Rn=()=>{lt.current=!lt.current,In(lt.current)},{frames:Dn,warn:ea}=(0,C.useMemo)(()=>(0,ys.Qe)(F.series,!1,se,Xe),[F.series,se,Xe]),Gn=(0,C.useMemo)(()=>(0,ys.Or)(Dn,Pe.legend,Xe),[Dn,Pe.legend,Xe]),ia=(0,C.useCallback)((va,ka,oa)=>{const zn=Dn??[],Kn=zn.reduce((kn,ua)=>kn+ua.fields.filter(Ia=>Ia.type!==Zn.PU.time).length,0);return ka===null||oa===null||va.fields.length-1!==Kn||!va.fields[ka]?null:C.createElement(C.Fragment,null,Xt&&C.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},C.createElement(Qa.J,{onClick:dn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),C.createElement(gu,{data:zn,alignedData:va,seriesIdx:ka,datapointIdx:oa,timeZone:fe}))},[fe,Dn,Xt]),_a=va=>Pe.tooltip.mode===xt.$N.None||Bt===null||!Qt&&Bn&&Bn()===Ga.y.Crosshair?null:C.createElement(sa.ZL,null,pt&&Tt&&Nt&&C.createElement(ga.o,{position:{x:Tt.viewport.x,y:Tt.viewport.y},offset:{x:pu,y:pu},allowPointerEvents:lt.current},ia(va,Nt,Bt))),Ra=(0,C.useMemo)(()=>Tl(Pe.timezone,fe),[Pe.timezone,fe]);if(!Dn||ea)return C.createElement("div",{className:"panel-empty"},C.createElement("p",null,ea??"No data found in response"));if(Dn[0].length>xe/2)return C.createElement("div",{className:"panel-empty"},C.createElement("p",null,"Too many points to visualize properly. ",C.createElement("br",null),"Update the query to return fewer points. ",C.createElement("br",null),"(",Dn[0].length," points received)"));const ms=R.$.featureToggles.newVizTooltips&&(Bn==null||Bn()!==Ga.y.Tooltip);return C.createElement(Ll.I,{theme:Xe,frames:Dn,structureRev:F.structureRev,timeRange:se,timeZone:Ra,width:xe,height:Ue,legendItems:Gn,...Pe,mode:ys.pm.Samples},(va,ka)=>(ot.current!==va&&!ms&&(ot.current=xa({config:va,onUPlotClick:Rn,setFocusedSeriesIdx:Gt,setFocusedPointIdx:wt,setCoords:yt,setHover:Et,isToolTipOpen:lt,isActive:Qt,setIsActive:sn})),C.createElement(C.Fragment,null,ms?C.createElement(C.Fragment,null,Pe.tooltip.mode!==xt.$N.None&&C.createElement(Lr.xl,{config:va,hoverMode:Lr.b3.xyOne,queryZoom:ze,render:(oa,zn,Kn,kn,ua,Ia,Pa)=>{if(Pa)return null;if(Mn&&Ia!=null){bn(Ia),ua();return}const La=()=>{let On=oa.posToVal(oa.cursor.left,"x");bn({from:On,to:On}),ua()};return C.createElement(uu,{frames:Dn??[],seriesFrame:ka,dataIdxs:zn,seriesIdx:Kn,mode:Pe.tooltip.mode,sortOrder:Pe.tooltip.sort,isPinned:kn,timeRange:se,annotate:Mn?La:void 0,withDuration:!1})},maxWidth:Pe.tooltip.maxWidth,maxHeight:Pe.tooltip.maxHeight}),C.createElement(sr.W,{annotations:F.annotations??[],config:va,timeZone:fe,newRange:on,setNewRange:bn,canvasRegionRendering:!1})):C.createElement(C.Fragment,null,C.createElement(Bo.j,{config:va,onZoom:ze}),_a(ka),C.createElement(br,{config:va,onChangeTimeRange:ze}),F.annotations&&C.createElement(Zs,{annotations:F.annotations,config:va,timeZone:fe,disableCanvasRendering:!0})))))},gh={colWidth:.9,rowHeight:.9,showValue:xt.yL.Auto},oc={fillOpacity:70,lineWidth:1};class jc{getSuggestionsForData(se){const{dataSummary:fe}=se;if(!fe.hasData||!fe.hasTimeField||!fe.hasStringField&&!fe.hasNumberField||fe.numberFieldCount>=30||fe.rowCountMax>100||fe.preferredVisualisationType==="logs")return;se.getListAppender({name:"",pluginId:"status-history",options:{},fieldConfig:{defaults:{color:{mode:Es.Y.ContinuousGrYlRd},custom:{}},overrides:[]},cardOptions:{previewModifier:xe=>{xe.options.colWidth=.7}}}).append({name:is.m.StatusHistory})}}const Af=new L.m(If).useFieldConfig({standardOptions:{[zs.uo.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Es.Y.Thresholds}}},useCustomConfig:F=>{F.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:oc.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:oc.fillOpacity,settings:{min:0,max:100,step:1}}),Ar.e(F)}}).setPanelOptions(F=>{F.addRadio({path:"showValue",name:"Show values",settings:{options:[{value:xt.yL.Auto,label:"Auto"},{value:xt.yL.Always,label:"Always"},{value:xt.yL.Never,label:"Never"}]},defaultValue:xt.yL.Auto}).addSliderInput({path:"rowHeight",name:"Row height",defaultValue:.9,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"colWidth",name:"Column width",defaultValue:.9,settings:{min:0,max:1,step:.01}}),ir.H(F,!1),_r.D(F,!R.$.featureToggles.newVizTooltips)}).setSuggestionsSupplier(new jc).setDataSupport({annotations:!0});var Yc=e(69550),Bl=e(39651),hu=e(15292);function Rf({onChange:F,value:se,context:fe}){const Pe=xe=>{xe?.currentTarget.checked&&(fe.options.footer.show=!1),F(xe?.currentTarget.checked)};return C.createElement(hu.d,{value:!!se,onChange:Pe})}function vu({cellOptions:F,onChange:se}){const fe=xe=>{F.mode=xe,se(F)},Pe=xe=>{F.valueDisplayMode=xe,se(F)};return C.createElement(De.B,{direction:"column",gap:0},C.createElement(Kt.D,{label:"Gauge display mode"},C.createElement(bo.z,{value:F?.mode??xt.eX.Gradient,onChange:fe,options:Lf})),C.createElement(Kt.D,{label:"Value display"},C.createElement(bo.z,{value:F?.valueDisplayMode??xt.$l.Text,onChange:Pe,options:Qc})))}const Lf=[{value:xt.eX.Basic,label:"Basic"},{value:xt.eX.Gradient,label:"Gradient"},{value:xt.eX.Lcd,label:"Retro LCD"}],Qc=[{value:xt.$l.Color,label:"Value color"},{value:xt.$l.Text,label:"Text color"},{value:xt.$l.Hidden,label:"Hidden"}],Jc=[{value:xt.Wq.Basic,label:"Basic"},{value:xt.Wq.Gradient,label:"Gradient"}],Bf=({cellOptions:F,onChange:se})=>{const fe=Pe=>{F.mode=Pe,se(F)};return C.createElement(Kt.D,{label:"Background display mode"},C.createElement(bo.z,{value:F?.mode??xt.Wq.Gradient,onChange:fe,options:Jc}))};var Uf=e(28528),Eu=e(30355);const Nf=["hideValue","drawStyle","lineInterpolation","barAlignment","lineWidth","fillOpacity","gradientMode","lineStyle","spanNulls","showPoints","pointSize"];function ml(F){const se=(0,so.V)(F);return{...se,useCustomConfig:fe=>{se.useCustomConfig?.(fe),fe.addBooleanSwitch({path:"hideValue",name:"Hide value"})}}}const wf=F=>{const{cellOptions:se,onChange:fe}=F,Pe=(0,C.useMemo)(()=>{const ze=ml(Eu.t);return(0,Uf.O)(ze,"ChartCell")},[]),xe=(0,k.of)(Wf),Ue={...Eu.t,...se};return C.createElement(Lo.gW,null,Pe.list(Nf.map(ze=>`custom.${ze}`)).map(ze=>{if(ze.showIf&&!ze.showIf(Ue))return null;const Xe=ze.editor,ot=ze.path;return C.createElement(Kt.D,{label:ze.name,key:ze.id,className:xe.field},C.createElement(Xe,{onChange:lt=>fe({...se,[ot]:lt}),value:(Ff(ot,Ue)?Ue[ot]:void 0)??ze.defaultValue,item:ze,context:{data:[]}}))}))};function Ff(F,se){return F in se}const Wf=()=>({field:(0,K.css)`
    width: 100%;

    // @TODO don't show "scheme" option for custom gradient mode.
    // it needs thresholds to work, which are not supported
    // for area chart cell right now
    [title='Use color scheme to define gradient'] {
      display: none;
    }
  `}),yu=({value:F,onChange:se})=>{const fe=F.type,Pe=(0,k.of)(Pu),xe=Du.find(lt=>lt.value.type===fe);let[Ue,ze]=(0,C.useState)({});const Xe=lt=>{lt.value!==void 0&&(F=lt.value,Ue[F.type]!==void 0&&Object.keys(Ue[F.type]).length>1&&(F=(0,Ke.merge)(F,Ue[F.type])),se(F))},ot=lt=>{Ue[F.type]=(0,Ke.merge)(F,lt),ze(Ue),se(Ue[F.type])};return C.createElement("div",{className:Pe.fixBottomMargin},C.createElement(Kt.D,null,C.createElement(ve.l6,{options:Du,value:xe,onChange:Xe})),fe===xt.ob.Gauge&&C.createElement(vu,{cellOptions:F,onChange:ot}),fe===xt.ob.ColorBackground&&C.createElement(Bf,{cellOptions:F,onChange:ot}),fe===xt.ob.Sparkline&&C.createElement(wf,{cellOptions:F,onChange:ot}))},Du=[{value:{type:xt.ob.Auto},label:"Auto"},{value:{type:xt.ob.Sparkline},label:"Sparkline"},{value:{type:xt.ob.ColorText},label:"Colored text"},{value:{type:xt.ob.ColorBackground},label:"Colored background"},{value:{type:xt.ob.Gauge},label:"Gauge"},{value:{type:xt.ob.DataLinks},label:"Data links"},{value:{type:xt.ob.JSONView},label:"JSON View"},{value:{type:xt.ob.Image},label:"Image"}],Pu=F=>({fixBottomMargin:(0,K.css)({marginBottom:F.spacing(-2)})}),ic={cellHeight:xt.qM.Sm,footer:{show:!1,countRows:!1,reducer:[]},frameIndex:0,showHeader:!0,showTypeIcons:!1,sortBy:[]};class Kf{getSuggestionsForData(se){const fe=se.getListAppender({name:is.m.Table,pluginId:"table",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:Pe=>{Pe.fieldConfig.defaults.custom.minWidth=50}}});se.dataSummary.fieldCount===0?fe.append({cardOptions:{imgSrc:"public/app/plugins/panel/table/img/icn-table-panel.svg"}}):fe.append({})}}const lc="Table footer",Cu=["Cell options"],$f=new L.m(dl).setPanelChangeHandler(Jl.l1).setMigrationHandler(Jl.fq).useFieldConfig({useCustomConfig:F=>{F.addNumberInput({path:"minWidth",name:"Minimum column width",description:"The minimum width for column auto resizing",settings:{placeholder:"150",min:50,max:500},shouldApply:()=>!0,defaultValue:Bl.gB.minWidth}).addNumberInput({path:"width",name:"Column width",settings:{placeholder:"auto",min:20,max:300},shouldApply:()=>!0,defaultValue:Bl.gB.width}).addRadio({path:"align",name:"Column alignment",settings:{options:[{label:"Auto",value:"auto"},{label:"Left",value:"left"},{label:"Center",value:"center"},{label:"Right",value:"right"}]},defaultValue:Bl.gB.align}).addCustomEditor({id:"cellOptions",path:"cellOptions",name:"Cell type",editor:yu,override:yu,defaultValue:Bl.gB.cellOptions,process:to.hS,category:Cu,shouldApply:()=>!0}).addBooleanSwitch({path:"inspect",name:"Cell value inspect",description:"Enable cell value inspection in a modal window",defaultValue:!1,category:Cu,showIf:se=>se.cellOptions.type===xt.ob.Auto||se.cellOptions.type===xt.ob.JSONView||se.cellOptions.type===xt.ob.ColorText||se.cellOptions.type===xt.ob.ColorBackground}).addBooleanSwitch({path:"filterable",name:"Column filter",description:"Enables/disables field filters in table",defaultValue:Bl.gB.filterable}).addBooleanSwitch({path:"hidden",name:"Hide in table",defaultValue:void 0,hideFromDefaults:!0})}}).setPanelOptions(F=>{F.addBooleanSwitch({path:"showHeader",name:"Show table header",defaultValue:ic.showHeader}).addRadio({path:"cellHeight",name:"Cell height",defaultValue:ic.cellHeight,settings:{options:[{value:xt.qM.Sm,label:"Small"},{value:xt.qM.Md,label:"Medium"},{value:xt.qM.Lg,label:"Large"}]}}).addBooleanSwitch({path:"footer.show",category:[lc],name:"Show table footer",defaultValue:ic.footer?.show}).addCustomEditor({id:"footer.reducer",category:[lc],path:"footer.reducer",name:"Calculation",description:"Choose a reducer function / calculation",editor:Yc.D.get("stats-picker").editor,defaultValue:[uo.gy.sum],showIf:se=>se.footer?.show}).addBooleanSwitch({path:"footer.countRows",category:[lc],name:"Count rows",description:"Display a single count for all data rows",defaultValue:ic.footer?.countRows,showIf:se=>se.footer?.reducer?.length===1&&se.footer?.reducer[0]===uo.gy.count}).addMultiSelect({path:"footer.fields",category:[lc],name:"Fields",description:"Select the fields that should be calculated",settings:{allowCustomValue:!1,options:[],placeholder:"All Numeric Fields",getOptions:async se=>{const fe=[];if(se&&se.data&&se.data.length>0){const Pe=se.data[0];for(const xe of Pe.fields)if(xe.type===Zn.PU.number){const Ue=(0,ts.Ct)(xe,Pe,se.data),ze=xe.name;fe.push({value:ze,label:Ue})}}return fe}},defaultValue:"",showIf:se=>se.footer?.show&&!se.footer?.countRows||se.footer?.reducer?.length===1&&se.footer?.reducer[0]!==uo.gy.count}).addCustomEditor({id:"footer.enablePagination",path:"footer.enablePagination",name:"Enable pagination",editor:Rf})}).setSuggestionsSupplier(new Kf);var Xc=e(49880),bu=e.n(Xc),Vf=e(40996),_f=e(36663),Jr=(F=>(F.Code="code",F.HTML="html",F.Markdown="markdown",F))(Jr||{}),Tu=(F=>(F.Go="go",F.Html="html",F.Json="json",F.Markdown="markdown",F.Plaintext="plaintext",F.Sql="sql",F.Typescript="typescript",F.Xml="xml",F.Yaml="yaml",F))(Tu||{});const zf="plaintext",fl={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},Mu={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"};function kf(F){const se=(0,k.of)(Hf),[fe,Pe]=(0,C.useState)({mode:F.options.mode,content:Su(F.options,F.replaceVariables,vn.Ay.disableSanitizeHtml)});if((0,Vf.A)(()=>{const{options:xe,replaceVariables:Ue}=F,ze=Su(xe,Ue,vn.Ay.disableSanitizeHtml);(ze!==fe.content||xe.mode!==fe.mode)&&Pe({mode:xe.mode,content:ze})},100,[F]),fe.mode===Jr.Code){const xe=F.options.code??fl;return C.createElement(Wc.B,{key:`${xe.showLineNumbers}/${xe.showMiniMap}`,value:fe.content,language:xe.language??fl.language,width:F.width,height:F.height,containerStyles:se.codeEditorContainer,showMiniMap:xe.showMiniMap,showLineNumbers:xe.showLineNumbers,readOnly:!0})}return C.createElement(B.E,{autoHeightMin:"100%",className:se.containStrict},C.createElement(bu(),{allowRerender:!0,html:fe.content,className:se.markdown,"data-testid":"TextPanel-converted-content"}))}function Su(F,se,fe){let{mode:Pe,content:xe}=F;if(!xe)return" ";switch(xe=se(xe,{},F.code?.language==="json"?"json":"html"),Pe){case Jr.Code:break;case Jr.HTML:fe||(xe=Za.sQ.sanitizeTextPanelContent(xe));break;case Jr.Markdown:default:xe=(0,_f.P)(xe,{noSanitize:fe})}return xe}const Hf=F=>({codeEditorContainer:(0,K.css)`
    .monaco-editor .margin,
    .monaco-editor-background {
      background-color: ${F.colors.background.primary};
    }
  `,markdown:(0,K.cx)("markdown-html",(0,K.css)`
      height: 100%;
    `),containStrict:(0,K.css)({contain:"strict"})});var Gf=e(70713),jf=e(99544);const Zc=({value:F,onChange:se,context:fe})=>{const Pe=(0,C.useMemo)(()=>fe.options?.mode??Jr.Markdown,[fe]),xe=(0,k.of)(Yf),Ue=()=>fe.getSuggestions?fe.getSuggestions().map(ze=>(0,jf.O)(ze)):[];return C.createElement("div",{className:(0,K.cx)(xe.editorBox)},C.createElement(Gf.Ay,{disableHeight:!0},({width:ze})=>ze===0?null:C.createElement(Wc.B,{value:F,onBlur:se,onSave:se,language:Pe,width:ze,showMiniMap:!1,showLineNumbers:!1,height:"500px",getSuggestions:Ue})))},Yf=F=>({editorBox:(0,K.css)`
    label: editorBox;
    border: 1px solid ${F.colors.border.medium};
    border-radius: ${F.shape.radius.default};
    margin: ${F.spacing(.5)} 0;
    width: 100%;
  `}),Qf=F=>{const se=parseFloat(F.pluginVersion||"6.1");let fe=F.options;if(F.hasOwnProperty("content")&&F.hasOwnProperty("mode")){const xe=F,Ue=xe.content,ze=xe.mode;delete xe.content,delete xe.mode,se<7.1&&(fe={content:Ue,mode:ze})}return[Jr.Code,Jr.HTML,Jr.Markdown].find(xe=>xe===fe.mode)||(fe={...fe,mode:Jr.Markdown}),fe},Jf=new L.m(kf).setPanelOptions(F=>{F.addRadio({path:"mode",name:"Mode",settings:{options:[{value:Jr.Markdown,label:"Markdown"},{value:Jr.HTML,label:"HTML"},{value:Jr.Code,label:"Code"}]},defaultValue:Mu.mode}).addSelect({path:"code.language",name:"Language",settings:{options:Object.values(Tu).map(se=>({value:se,label:se}))},defaultValue:fl.language,showIf:se=>se.mode===Jr.Code}).addBooleanSwitch({path:"code.showLineNumbers",name:"Show line numbers",defaultValue:fl.showLineNumbers,showIf:se=>se.mode===Jr.Code}).addBooleanSwitch({path:"code.showMiniMap",name:"Show mini map",defaultValue:fl.showMiniMap,showIf:se=>se.mode===Jr.Code}).addCustomEditor({id:"content",path:"content",name:"Content",editor:Zc,defaultValue:Mu.content})}).setMigrationHandler(Qf);var Xf=e(41260),xu=e(23117),cc=e(18282);class Ou{getSuggestionsForData(se){const{dataSummary:fe}=se;if(!fe.hasTimeField||!fe.hasNumberField||fe.rowCountTotal<2)return;const Pe=se.getListAppender({name:is.m.LineChart,pluginId:"timeseries",options:{legend:{calcs:[],displayMode:xt.lm.Hidden,placement:"right",showLegend:!1}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:Ue=>{Ue.fieldConfig?.defaults.custom?.drawStyle!==xt.GR.Bars&&(Ue.fieldConfig.defaults.custom.lineWidth=Math.max(Ue.fieldConfig.defaults.custom.lineWidth??1,2))}}}),xe=100;if(Pe.append({name:is.m.LineChart}),fe.rowCountMax<200&&Pe.append({name:is.m.LineChartSmooth,fieldConfig:{defaults:{custom:{lineInterpolation:xt.dx.Smooth}},overrides:[]}}),fe.numberFieldCount===1){Pe.append({name:is.m.AreaChart,fieldConfig:{defaults:{custom:{fillOpacity:25}},overrides:[]}}),Pe.append({name:is.m.LineChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:Es.Y.ContinuousGrYlRd},custom:{gradientMode:xt.on.Scheme,lineInterpolation:xt.dx.Smooth,lineWidth:3,fillOpacity:20}},overrides:[]}}),fe.rowCountMax<xe&&(Pe.append({name:is.m.BarChart,fieldConfig:{defaults:{custom:{drawStyle:xt.GR.Bars,fillOpacity:100,lineWidth:1,gradientMode:xt.on.Hue}},overrides:[]}}),Pe.append({name:is.m.BarChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:Es.Y.ContinuousGrYlRd},custom:{drawStyle:xt.GR.Bars,fillOpacity:90,lineWidth:1,gradientMode:xt.on.Scheme}},overrides:[]}}));return}Pe.append({name:is.m.AreaChartStacked,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:xt.gs.Normal,group:"A"}}},overrides:[]}}),Pe.append({name:is.m.AreaChartStackedPercent,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:xt.gs.Percent,group:"A"}}},overrides:[]}}),fe.rowCountTotal/fe.numberFieldCount<xe&&(Pe.append({name:is.m.BarChartStacked,fieldConfig:{defaults:{custom:{drawStyle:xt.GR.Bars,fillOpacity:100,lineWidth:1,gradientMode:xt.on.Hue,stacking:{mode:xt.gs.Normal,group:"A"}}},overrides:[]}}),Pe.append({name:is.m.BarChartStackedPercent,fieldConfig:{defaults:{custom:{drawStyle:xt.GR.Bars,fillOpacity:100,lineWidth:1,gradientMode:xt.on.Hue,stacking:{mode:xt.gs.Percent,group:"A"}}},overrides:[]}}))}}function qc(F){const se=(0,We.UA)().getCurrent()?.getPanelById(F);if(se){const fe=se.transformations?[...se.transformations]:[];return fe.push({id:cc.F.prepareTimeSeries,options:{format:"wide"}}),{name:"Transform to wide time series format",pluginId:"timeseries",transformations:fe}}}const Zf=({data:F,timeRange:se,timeZone:fe,width:Pe,height:xe,options:Ue,fieldConfig:ze,onChangeTimeRange:Xe,replaceVariables:ot,id:lt})=>{const{sync:pt,canAddAnnotations:Et,onThresholdsChange:Tt,canEditThresholds:yt,showThresholds:Nt,dataLinkPostProcessor:Gt}=(0,Ft.d2)(),Bt=(0,C.useMemo)(()=>bl(F.series,vn.$W.theme2,se),[F.series,se]),wt=(0,C.useMemo)(()=>Tl(Ue.timezone,fe),[Ue.timezone,fe]),Qt=(0,C.useMemo)(()=>{if(Bt?.length&&Bt.every(bn=>bn.meta?.type===Xf.m.TimeSeriesLong)){const bn=qc(lt);return{message:"Long data must be converted to wide",suggestions:bn?[bn]:void 0}}},[Bt,lt]),sn=!!(Et&&Et()),Xt=vn.$W.featureToggles.newVizTooltips&&(pt==null||pt()!==Ga.y.Tooltip),[In,on]=(0,C.useState)(null);return!Bt||Qt?C.createElement(Mt.a,{panelId:lt,message:Qt?.message,fieldConfig:ze,data:F,needsTimeField:!0,needsNumberField:!0,suggestions:Qt?.suggestions}):C.createElement(hi,{frames:Bt,structureRev:F.structureRev,timeRange:se,timeZone:wt,width:Pe,height:xe,legend:Ue.legend,options:Ue},(bn,Bn)=>(Bn.fields.some(wn=>!!wn.config.links?.length)&&(Bn=dr(Bn,Bt,ot,fe,Gt)),C.createElement(C.Fragment,null,!Xt&&C.createElement(xu.Z,{config:bn}),Ue.tooltip.mode===xt.$N.None||C.createElement(C.Fragment,null,Xt?C.createElement(Lr.xl,{config:bn,hoverMode:Ue.tooltip.mode===xt.$N.Single?Lr.b3.xOne:Lr.b3.xAll,queryZoom:Xe,clientZoom:!0,render:(wn,Mn,dn,Rn=!1,Dn,ea,Gn)=>{if(Gn)return null;if(sn&&ea!=null){on(ea),Dn();return}const ia=()=>{let _a=wn.posToVal(wn.cursor.left,"x");on({from:_a,to:_a}),Dn()};return C.createElement(si.k,{frames:Bt,seriesFrame:Bn,dataIdxs:Mn,seriesIdx:dn,mode:Ue.tooltip.mode,sortOrder:Ue.tooltip.sort,isPinned:Rn,annotate:sn?ia:void 0,scrollable:ro(Ue.tooltip)})},maxWidth:Ue.tooltip.maxWidth,maxHeight:Ue.tooltip.maxHeight}):C.createElement(C.Fragment,null,C.createElement(Bo.j,{config:bn,onZoom:Xe,withZoomY:!0}),C.createElement(qa.T,{frames:Bt,data:Bn,config:bn,mode:Ue.tooltip.mode,sortOrder:Ue.tooltip.sort,sync:pt,timeZone:fe}))),Xt?C.createElement(sr.W,{annotations:F.annotations??[],config:bn,timeZone:fe,newRange:In,setNewRange:on}):F.annotations&&C.createElement(Zs,{annotations:F.annotations,config:bn,timeZone:fe}),Xt?void 0:sn?C.createElement(ha,{data:Bn,timeZone:fe,config:bn},({startAnnotating:wn})=>C.createElement(pa,{data:Bn,config:bn,timeZone:fe,replaceVariables:ot,defaultItems:[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(Mn,dn)=>{dn&&wn({coords:dn.coords})}}]}]})):C.createElement(pa,{data:Bn,frames:Bt,config:bn,timeZone:fe,replaceVariables:ot,defaultItems:[]}),F.annotations&&C.createElement($s,{visibleSeries:zi(bn,Bt),config:bn,exemplars:F.annotations,timeZone:fe}),(yt&&Tt||Nt)&&C.createElement(Ei,{config:bn,fieldConfig:ze,onThresholdsChange:yt?Tt:void 0}),C.createElement(br,{config:bn,onChangeTimeRange:Xe}))))};var ed=e(91410),qf=e(20333);const eg=({value:F,onChange:se})=>{const fe=(0,k.of)(tg);(!F||F.length<1)&&(F=[""]);const Pe=()=>{se([...F,ed.g$.default])},xe=ze=>{const Xe=F.slice();Xe.splice(ze,1),se(Xe)},Ue=(ze,Xe)=>{const ot=F.slice();ot[ze]=Xe??ed.g$.default,ot.length===0||ot.length===1&&ot[0]===""?se(void 0):se(ot)};return C.createElement("div",null,F.map((ze,Xe)=>C.createElement("div",{className:fe.wrapper,key:`${Xe}.${ze}`},C.createElement("span",{className:fe.first},C.createElement(qf.U,{onChange:ot=>Ue(Xe,ot),includeInternal:!0,value:ze??ed.g$.default})),Xe===F.length-1?C.createElement(es.K,{name:"plus",onClick:Pe,tooltip:"Add timezone"}):C.createElement(es.K,{name:"times",onClick:()=>xe(Xe),tooltip:"Remove timezone"}))))},tg=F=>({wrapper:(0,K.css)`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:(0,K.css)`
    margin-right: 8px;
    flex-grow: 2;
  `});var ng=e(50082),ag=e(74856),Iu=e(68706);let td=null;const sg=(F,se,fe,Pe)=>{if(se==="graph"&&fe.angular){const{fieldConfig:xe,options:Ue,annotations:ze}=rg({...fe.angular,fieldConfig:Pe,panel:F}),Xe=(0,We.UA)().getCurrent();return Xe&&ze?.length>0&&(Xe.annotations.list=[...Xe.annotations.list,...ze],td==null&&(td=setTimeout(()=>{td=null,(0,ag.jG)().refreshTimeModel()}))),F.fieldConfig=xe,F.alert=fe.angular.alert,Ue}return lg(F),{}};function rg(F){let se=[];const fe=F.fieldConfig?.overrides??[],Pe=F.yaxes??[];let xe=Au(Pe[0]);F.fieldConfig?.defaults&&(xe={...F.fieldConfig?.defaults,...xe});const Ue={fill:F.dashes?"dash":"solid",dash:[F.dashLength??10,F.spaceLength??10]};if(F.aliasColors)for(const Et of Object.keys(F.aliasColors)){const Tt=F.aliasColors[Et];Tt&&fe.push({matcher:{id:Mi.Ct.byName,options:Et},properties:[{id:zs.uo.Color,value:{mode:Es.Y.Fixed,fixedColor:Tt}}]})}let ze=!1;if(F.seriesOverrides?.length)for(const Et of F.seriesOverrides){if(!Et.alias)continue;const yt={matcher:{id:/^([/~@;%#'])(.*?)\1([gimsuy]*)$/.test(Et.alias)?Mi.Ct.byRegexp:Mi.Ct.byName,options:Et.alias},properties:[]};let Nt;for(const Gt of Object.keys(Et)){const Bt=Et[Gt];switch(Gt){case"alias":case"$$hashKey":break;case"yaxis":if(Bt===2){const wt=Au(Pe[1]);og(xe,wt,yt.properties)}break;case"fill":yt.properties.push({id:"custom.fillOpacity",value:Bt*10});break;case"fillBelowTo":ze=!0,yt.properties.push({id:"custom.fillBelowTo",value:Bt});break;case"fillGradient":Bt&&(yt.properties.push({id:"custom.fillGradient",value:"opacity"}),yt.properties.push({id:"custom.fillOpacity",value:Bt*10}));break;case"points":yt.properties.push({id:"custom.showPoints",value:Bt?xt.yL.Always:xt.yL.Never});break;case"bars":Bt?(yt.properties.push({id:"custom.drawStyle",value:xt.GR.Bars}),yt.properties.push({id:"custom.fillOpacity",value:100})):yt.properties.push({id:"custom.drawStyle",value:xt.GR.Line});break;case"lines":Bt?yt.properties.push({id:"custom.drawStyle",value:"line"}):yt.properties.push({id:"custom.lineWidth",value:0});break;case"linewidth":yt.properties.push({id:"custom.lineWidth",value:Bt});break;case"pointradius":yt.properties.push({id:"custom.pointSize",value:2+Bt*2});break;case"dashLength":case"spaceLength":case"dashes":switch(Nt||(Nt={fill:Ue.fill,dash:[...Ue.dash]}),Gt){case"dashLength":Nt.dash[0]=Bt;break;case"spaceLength":Nt.dash[1]=Bt;break;case"dashes":Nt.fill=Bt?"dash":"solid";break}break;case"stack":yt.properties.push({id:"custom.stacking",value:cg(Bt)});break;case"color":yt.properties.push({id:"color",value:{fixedColor:Bt,mode:Es.Y.Fixed}});break;case"transform":yt.properties.push({id:"custom.transform",value:Bt==="negative-Y"?xt.NU.NegativeY:xt.NU.Constant});break;default:console.log("Ignore override migration:",Et.alias,Gt,Bt)}}Nt&&yt.properties.push({id:"custom.lineStyle",value:Nt}),yt.properties.length&&fe.push(yt)}const Xe=xe.custom??{};Xe.drawStyle=F.bars?xt.GR.Bars:F.lines?xt.GR.Line:xt.GR.Points,F.points?(Xe.showPoints=xt.yL.Always,(0,Ke.isNumber)(F.pointradius)&&(Xe.pointSize=2+F.pointradius*2)):Xe.drawStyle!==xt.GR.Points&&(Xe.showPoints=xt.yL.Never),Xe.lineWidth=F.linewidth,Ue.fill!=="solid"&&(Xe.lineStyle=Ue),ze?Xe.fillOpacity=35:(0,Ke.isNumber)(F.fill)&&(Xe.fillOpacity=F.fill*10),(0,Ke.isNumber)(F.fillGradient)&&F.fillGradient>0&&(Xe.gradientMode=xt.on.Opacity,Xe.fillOpacity=F.fillGradient*10),Xe.spanNulls=F.nullPointMode===Nd.UW.Ignore,F.steppedLine&&(Xe.lineInterpolation=xt.dx.StepAfter),Xe.drawStyle===xt.GR.Bars&&(Xe.fillOpacity=100),F.stack&&(Xe.stacking={mode:xt.gs.Normal,group:so.S.stacking.group}),xe.custom=(0,Ke.omitBy)(Xe,Ke.isNil),xe.nullValueMode=F.nullPointMode;const ot={legend:{displayMode:xt.lm.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:xt.$N.Single,sort:xt.xB.None}},lt=F.legend;if(lt){if(lt.show?ot.legend.displayMode=lt.alignAsTable?xt.lm.Table:xt.lm.List:ot.legend.showLegend=!1,lt.rightSide&&(ot.legend.placement="right"),F.legend.values){const Et=(0,Ke.pickBy)(F.legend);ot.legend.calcs=ig(Et)}F.legend.sideWidth&&(ot.legend.width=F.legend.sideWidth),lt.hideZero&&fe.push(Ru(uo.gy.allIsZero)),lt.hideEmpty&&fe.push(Ru(uo.gy.allIsNull))}F.timeRegions?.length&&F.timeRegions.map((Tt,yt)=>({name:`T${yt+1}`,color:Tt.colorMode!=="custom"?Tt.colorMode:Tt.fillColor,line:Tt.line,fill:Tt.fill,fromDayOfWeek:Tt.fromDayOfWeek,toDayOfWeek:Tt.toDayOfWeek,from:Tt.from,to:Tt.to})).forEach((Tt,yt)=>{const Nt={datasource:{type:"datasource",uid:"grafana"},enable:!0,hide:!0,filter:{exclude:!1,ids:[F.panel.id]},iconColor:Tt.fillColor??Tt.color,name:`T${yt+1}`,target:{queryType:Iu.nj.TimeRegions,refId:"Anno",timeRegion:{fromDayOfWeek:Tt.fromDayOfWeek,toDayOfWeek:Tt.toDayOfWeek,from:Tt.from,to:Tt.to,timezone:"utc"}}};Tt.fill?se.push(Nt):Tt.line&&(Nt.iconColor=Tt.lineColor??"white",se.push(Nt))});const pt=F.tooltip;if(pt&&(pt.shared!==void 0&&(ot.tooltip.mode=pt.shared?xt.$N.Multi:xt.$N.Single),pt.sort!==void 0&&pt.shared))switch(pt.sort){case 1:ot.tooltip.sort=xt.xB.Ascending;break;case 2:ot.tooltip.sort=xt.xB.Descending;break;default:ot.tooltip.sort=xt.xB.None}if(F.thresholds&&F.thresholds.length>0){let Et=[],Tt=!1,yt=!1;const Nt=F.thresholds.sort((Bt,wt)=>Bt.value>wt.value?1:-1);for(let Bt=0;Bt<Nt.length;Bt++){const wt=Nt[Bt],Qt=Nt.length>Bt+1?Nt[Bt+1]:null;wt.fill&&(Tt=!0),wt.line&&(yt=!0),wt.op==="gt"&&Et.push({value:wt.value,color:nd(wt)}),wt.op==="lt"&&(Et.length===0&&Et.push({value:-1/0,color:nd(wt)}),Qt&&Qt.op==="gt"&&Qt.value>wt.value?Et.push({value:wt.value,color:"transparent"}):Qt&&Qt.op==="lt"?Et.push({value:wt.value,color:nd(Qt)}):Et.push({value:wt.value,color:"transparent"}))}Et.length>0&&Et[0].value!==-1/0&&Et.unshift({color:"transparent",value:-1/0});let Gt=Tt?xt.Ly.Area:xt.Ly.Line;yt&&Tt&&(Gt=xt.Ly.LineAndArea),xe.custom.thresholdsStyle={mode:Gt},xe.thresholds={mode:ng.O.Absolute,steps:Et}}return F.xaxis&&F.xaxis.show===!1&&F.xaxis.mode==="time"&&fe.push({matcher:{id:Mi.Ct.byType,options:Zn.PU.time},properties:[{id:"custom.axisPlacement",value:xt.vM.Hidden}]}),{fieldConfig:{defaults:(0,Ke.omitBy)(xe,Ke.isNil),overrides:fe},options:ot,annotations:se}}function nd(F){return F.colorMode==="critical"?"red":F.colorMode==="warning"?"orange":F.colorMode==="custom"?F.fillColor||F.lineColor:"red"}function Au(F){if(!F)return{};const se={axisPlacement:F.show?xt.vM.Auto:xt.vM.Hidden};if(F.label&&(se.axisLabel=F.label),F.logBase){const fe=F.logBase;(fe===2||fe===10)&&(se.scaleDistribution={type:xt.L4.Log,log:fe})}return(0,Ke.omitBy)({unit:F.format,decimals:ad(F.decimals),min:ad(F.min),max:ad(F.max),custom:se},Ke.isNil)}function og(F,se,fe){for(const[Ue,ze]of Object.entries(se))Ue!=="custom"&&ze!==F[Ue]&&fe.push({id:Ue,value:ze});const Pe=F.custom??{},xe=se.custom??{};for(const[Ue,ze]of Object.entries(xe))ze!==Pe[Ue]&&fe.push({id:`custom.${Ue}`,value:ze})}function ad(F){if((0,Ke.isNumber)(F))return F;if((0,Ke.isString)(F)){const se=Number(F);if(!isNaN(se))return se}}function ig(F){const se=[];for(const fe of Object.keys(F)){const Pe=uo.AS.getIfExists(fe);Pe&&se.push(Pe.id)}return se}function lg(F){F.fieldConfig?.defaults?.custom?.hideFrom?.graph!==void 0&&(F.fieldConfig.defaults.custom.hideFrom.viz=F.fieldConfig.defaults.custom.hideFrom.graph,delete F.fieldConfig.defaults.custom.hideFrom.graph),F.fieldConfig?.overrides&&(F.fieldConfig.overrides=F.fieldConfig.overrides.map(se=>(se.properties=se.properties.map(fe=>(fe.id==="custom.hideFrom"&&fe.value.graph&&(fe.value.viz=fe.value.graph,delete fe.value.graph),fe)),se)))}function Ru(F){return{matcher:{id:Mi.Ct.byValue,options:{reducer:F,op:xt.zT.GTE,value:0}},properties:[{id:"custom.hideFrom",value:{tooltip:!0,viz:!1,legend:!0}}]}}function cg(F){const se=so.S.stacking?.group;return{mode:F?xt.gs.Normal:xt.gs.None,group:(0,Ke.isString)(F)?F:se}}const Lu=new L.m(Zf).setPanelChangeHandler(sg).useFieldConfig((0,so.V)(so.S)).setPanelOptions(F=>{_r.D(F,!1,!0),ir.H(F),F.addCustomEditor({id:"timezone",name:"Time zone",path:"timezone",category:["Axis"],editor:eg,defaultValue:void 0})}).setSuggestionsSupplier(new Ou).setDataSupport({annotations:!0,alertStates:!0});var Bu=e(46923),sd=e(35090);const dc={wrapper:(0,K.css)`
    height: 100%;
    overflow: scroll;
  `},dg=({data:F,options:se})=>{const fe=(0,C.createRef)(),Pe=(0,C.useMemo)(()=>(0,sd.L)(F.series[0]),[F.series]),xe=(0,J.A)(async()=>await(0,Vd.l)().get(F.request?.targets[0].datasource?.uid));return!F||!F.series.length||!Pe?C.createElement("div",{className:"panel-empty"},C.createElement("p",null,"No data found in response")):C.createElement("div",{className:dc.wrapper},C.createElement("div",{ref:fe}),C.createElement(Bu.V,{dataFrames:F.series,scrollElementClass:dc.wrapper,traceProp:Pe,datasource:xe.value,topOfViewRef:fe,createSpanLink:se.createSpanLink}))},ug=new L.m(dg);var Uu=e(85200),Nu=e(40458);const ph=({data:F,timeRange:se,timeZone:fe,width:Pe,height:xe,options:Ue,fieldConfig:ze,replaceVariables:Xe,id:ot})=>{const lt=!!R.$.featureToggles.newVizTooltips,{dataLinkPostProcessor:pt}=(0,Ft.d2)(),Et=Ue.xField??F.series[0].fields.find(Nt=>Nt.type===Zn.PU.number)?.name,Tt=(Nt,Gt,Bt)=>(Gt={...Gt,x:Uu.sJ.get(Mi.Ct.byName).get(Et)},(0,Nu.m)(Nt,Gt)),yt=(0,C.useMemo)(()=>{if(F.series.length>1)return{warning:"Only one frame is supported, consider adding a join transformation",frames:F.series};let Nt=F.series,Gt;if(Ue.xField){if(Gt=(0,Ha.findFieldIndex)(Ue.xField,Nt[0]),Gt==null)return{warning:"Unable to find field: "+Ue.xField,frames:F.series}}else if(Gt=Nt[0].fields.findIndex(Bt=>Bt.type===Zn.PU.number),Gt===-1)return{warning:"No numeric fields found for X axis",frames:Nt};if(Gt!=null){const Bt=Nt[0].fields[Gt];if(Bt.type===Zn.PU.number&&!(0,lr.g2)(Bt.values))return{warning:"Values must be in ascending order",frames:Nt}}return{frames:bl(Nt,R.$.theme2,void 0,Gt)}},[F.series,Ue.xField]);return yt.warning||!yt.frames?C.createElement(Mt.a,{panelId:ot,fieldConfig:ze,data:F,message:yt.warning,needsNumberField:!0}):C.createElement(hi,{frames:yt.frames,structureRev:F.structureRev,timeRange:se,timeZone:fe,width:Pe,height:xe,legend:Ue.legend,options:Ue,preparePlotFrame:Tt},(Nt,Gt)=>(Gt.fields.some(Bt=>!!Bt.config.links?.length)&&(Gt=dr(Gt,yt.frames,Xe,fe,pt)),C.createElement(C.Fragment,null,C.createElement(xu.Z,{config:Nt}),Ue.tooltip.mode!==xt.$N.None&&C.createElement(C.Fragment,null,lt?C.createElement(Lr.xl,{config:Nt,hoverMode:Ue.tooltip.mode===xt.$N.Single?Lr.b3.xOne:Lr.b3.xAll,render:(Bt,wt,Qt,sn=!1)=>C.createElement(si.k,{frames:yt.frames,seriesFrame:Gt,dataIdxs:wt,seriesIdx:Qt,mode:Ue.tooltip.mode,sortOrder:Ue.tooltip.sort,isPinned:sn,scrollable:ro(Ue.tooltip)}),maxWidth:Ue.tooltip.maxWidth,maxHeight:Ue.tooltip.maxHeight}):C.createElement(qa.T,{frames:yt.frames,data:Gt,config:Nt,mode:Ue.tooltip.mode,sortOrder:Ue.tooltip.sort,timeZone:fe})))))};class hh{getSuggestionsForData(se){const{dataSummary:fe}=se;return fe.numberFieldCount<2||fe.rowCountTotal<2||fe.rowCountTotal<2?void 0:se.getListAppender({name:is.m.LineChart,pluginId:"trend",options:{legend:{calcs:[],displayMode:xt.lm.Hidden,placement:"right",showLegend:!1}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:xe=>{xe.fieldConfig?.defaults.custom?.drawStyle!==xt.GR.Bars&&(xe.fieldConfig.defaults.custom.lineWidth=Math.max(xe.fieldConfig.defaults.custom.lineWidth??1,2))}}})}}const mg=new L.m(ph).useFieldConfig((0,so.V)(so.S,!1)).setPanelOptions(F=>{const se=["X Axis"];F.addFieldNamePicker({path:"xField",name:"X Field",description:"An increasing numeric value",category:se,defaultValue:void 0,settings:{isClearable:!0,placeholderText:"First numeric value",filter:fe=>fe.type===Zn.PU.number}}),_r.D(F,!1,!0),ir.H(F)}).setSuggestionsSupplier(new hh),wu=[{value:0,label:"Documentation",href:"https://grafana.com/docs/grafana/latest"},{value:1,label:"Tutorials",href:"https://grafana.com/tutorials"},{value:2,label:"Community",href:"https://community.grafana.com"},{value:3,label:"Public Slack",href:"http://slack.grafana.com"}],fg=()=>{const F=(0,k.of)(gg);return C.createElement("div",{className:F.container},C.createElement("h1",{className:F.title},"Welcome to vDSP Provisioning"))},gg=F=>({container:(0,K.css)`
      display: flex;
      /// background: url(public/img/g8_home_v2.svg) no-repeat;
      background-size: cover;
      height: 100%;
      align-items: center;
      padding: 0 16px;
      justify-content: space-between;
      padding: 0 ${F.spacing(3)};

      ${F.breakpoints.down("lg")} {
        background-position: 0px;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
      }

      ${F.breakpoints.down("sm")} {
        padding: 0 ${F.spacing(1)};
      }
    `,title:(0,K.css)`
      margin-bottom: 0;

      ${F.breakpoints.down("lg")} {
        margin-bottom: ${F.spacing(1)};
      }

      ${F.breakpoints.down("md")} {
        font-size: ${F.typography.h2.fontSize};
      }
      ${F.breakpoints.down("sm")} {
        font-size: ${F.typography.h3.fontSize};
      }
    `,help:(0,K.css)`
      display: flex;
      align-items: baseline;
    `,helpText:(0,K.css)`
      margin-right: ${F.spacing(2)};
      margin-bottom: 0;

      ${F.breakpoints.down("md")} {
        font-size: ${F.typography.h4.fontSize};
      }

      ${F.breakpoints.down("sm")} {
        display: none;
      }
    `,helpLinks:(0,K.css)`
      display: flex;
      flex-wrap: wrap;
    `,helpLink:(0,K.css)`
      margin-right: ${F.spacing(2)};
      text-decoration: underline;
      text-wrap: no-wrap;

      ${F.breakpoints.down("sm")} {
        margin-right: 8px;
      }
    `}),pg=new L.m(fg).setNoPadding();var hg=(F=>(F[F.NoData=0]="NoData",F[F.BadFrameSelection=1]="BadFrameSelection",F[F.XNotFound=2]="XNotFound",F))(hg||{});function uc(F){return F.type===Zn.PU.number}function vg(F,se){if(!se||!se.length)return{error:0};F||(F={frame:0});let fe=se[F.frame??0];if(!fe)return{error:1};let Pe=-1;for(let Xe=0;Xe<fe.fields.length;Xe++){const ot=fe.fields[Xe];if(F.x&&F.x===(0,ts.Ct)(ot,fe,se)){Pe=Xe;break}if(uc(ot)&&!F.x){Pe=Xe;break}}let xe=!1;const Ue=fe.fields[Pe],ze=[Ue];for(const Xe of fe.fields)if(Xe.type===Zn.PU.time&&(xe=!0),!(Xe===Ue||!uc(Xe))){if(F.exclude){const ot=(0,ts.Ct)(Xe,fe,se);if(F.exclude.includes(ot))continue}ze.push(Xe)}return{x:Ue,fields:{x:Fu(Ue),y:Eg(Ue)},frame:{...fe,fields:ze},hasData:fe.fields.length>0,hasTime:xe}}function Fu(F){return F?se=>F===se||!!(F.state&&F.state===se.state):()=>!1}function Eg(F){if(!F)return()=>!1;const se=Fu(F);return fe=>!se(fe,{fields:[],length:0},[])}const yg=({value:F,onChange:se,context:fe})=>{const Pe=(0,C.useMemo)(()=>fe?.data?.length?fe.data.map((Xe,ot)=>({value:ot,label:`${(0,ts.Ri)(Xe,ot)} (index: ${ot}, rows: ${Xe.length})`})):[{value:0,label:"First result"}],[fe.data]),xe=(0,C.useMemo)(()=>vg(F,fe.data),[fe.data,F]),Ue=(0,C.useMemo)(()=>{const Xe={numberFields:[],yFields:[],xAxis:F?.x?{label:`${F.x} (Not found)`,value:F.x}:void 0},ot=fe.data?fe.data[F?.frame??0]:void 0;if(ot){const lt="x"in xe?(0,ts.Ct)(xe.x,xe.frame,fe.data):void 0;for(let pt of ot.fields)if(uc(pt)){const Et=(0,ts.Ct)(pt,ot,fe.data),Tt={label:Et,value:Et};Xe.numberFields.push(Tt),F?.x&&Et===F.x&&(Xe.xAxis=Tt),lt!==Et&&Xe.yFields.push({label:Et,value:F?.exclude?.includes(Et)})}Xe.xAxis||(Xe.xAxis={label:lt,value:lt})}return Xe},[xe,fe.data,F]),ze=(0,k.of)(Dg);return fe.data?.length?C.createElement("div",null,C.createElement(Kt.D,{label:"Data"},C.createElement(ve.l6,{isClearable:!0,options:Pe,placeholder:"Change filter",value:Pe.find(Xe=>Xe.value===F?.frame),onChange:Xe=>{se({...F,frame:Xe?.value,x:void 0})}})),C.createElement(Kt.D,{label:"X Field"},C.createElement(ve.l6,{isClearable:!0,options:Ue.numberFields,value:Ue.xAxis,placeholder:`${Ue.numberFields?.[0].label} (First numeric)`,onChange:Xe=>{se({...F,x:Xe?.value})}})),C.createElement(Kt.D,{label:"Y Fields"},C.createElement("div",null,Ue.yFields.map(Xe=>C.createElement("div",{key:Xe.label,className:ze.row},C.createElement(es.K,{name:Xe.value?"eye-slash":"eye",onClick:()=>{const ot=F?.exclude?[...F.exclude]:[];let lt=ot.indexOf(Xe.label);lt<0?ot.push(Xe.label):ot.splice(lt,1),se({...F,exclude:ot})},tooltip:Xe.value?"Disable":"Enable"}),Xe.label))))):C.createElement("div",null,"No data...")},Dg=F=>({sorter:(0,K.css)`
    margin-top: 10px;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    cursor: pointer;
  `,row:(0,K.css)`
    padding: ${F.spacing(.5,1)};
    border-radius: ${F.shape.radius.default};
    background: ${F.colors.background.secondary};
    min-height: ${F.spacing(4)};
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    margin-bottom: 3px;
    border: 1px solid ${F.components.input.borderColor};
  `});var Pg=e(54391),Wu=e(76218),Ku=e(78437);const Cg=({value:F,onChange:se,context:fe,baseNameMode:Pe,frameFilter:xe=-1})=>{const Ue=(Xe,ot)=>{se({...F,[ot]:Xe})},ze=fe.data&&xe>-1?fe.data[xe]:void 0;return C.createElement("div",null,C.createElement(Kt.D,{label:"X Field"},C.createElement(Wu.O,{value:F.x??"",context:fe,onChange:Xe=>Ue(Xe,"x"),item:{id:"x",name:"x",settings:{filter:Xe=>ze?.fields.some(ot=>ot.state?.displayName===Xe.state?.displayName)??!0,baseNameMode:Pe,placeholderText:"select X field"}}})),C.createElement(Kt.D,{label:"Y Field"},C.createElement(Wu.O,{value:F.y??"",context:fe,onChange:Xe=>Ue(Xe,"y"),item:{id:"y",name:"y",settings:{filter:Xe=>ze?.fields.some(ot=>ot.state?.displayName===Xe.state?.displayName)??!0,baseNameMode:Pe,placeholderText:"select Y field"}}})),C.createElement(Kt.D,{label:"Point color"},C.createElement(Ku.NO,{value:F.pointColor,context:fe,onChange:Xe=>Ue(Xe,"pointColor"),item:{id:"x",name:"x",settings:{baseNameMode:Pe,isClearable:!0,placeholder:"Use standard color scheme"}}})),C.createElement(Kt.D,{label:"Point size"},C.createElement(Ku.gm,{value:F.pointSize,context:fe,onChange:Xe=>Ue(Xe,"pointSize"),item:{id:"x",name:"x",settings:{min:1,max:100}}})))};var rd=(F=>(F.Auto="auto",F.Manual="manual",F))(rd||{}),li=(F=>(F.Lines="lines",F.Points="points",F.PointsAndLines="points+lines",F))(li||{});const vh={exclude:[]},od={label:xt.yL.Auto,show:"points"},Eh={series:[]},bg=({value:F,onChange:se,context:fe})=>{const Pe=(0,C.useMemo)(()=>fe?.data?.length?fe.data.map((Et,Tt)=>({value:Tt,label:`${(0,ts.Ri)(Et,Tt)} (index: ${Tt}, rows: ${Et.length})`})):[{value:0,label:"First result"}],[fe.data]),[xe,Ue]=(0,C.useState)(0),ze=(0,k.of)(Tg),Xe=(Et,Tt,yt)=>{se(F.map((Nt,Gt)=>Gt===Tt?{...Nt,[yt]:Et}:Nt))},ot=()=>{se([...F,{pointColor:void 0,pointSize:od.pointSize}]),Ue(F.length)};(0,C.useEffect)(()=>{F?.length||ot()},[]);const lt=Et=>{se(F.filter((Tt,yt)=>yt!==Et))},pt=Et=>Et===xe?`${ze.row} ${ze.sel}`:ze.row;return C.createElement(C.Fragment,null,C.createElement(Q.$n,{icon:"plus",size:"sm",variant:"secondary",onClick:ot,className:ze.marginBot},"Add series"),C.createElement("div",{className:ze.marginBot},F.map((Et,Tt)=>C.createElement("div",{key:`series/${Tt}`,className:pt(Tt),onClick:()=>Ue(Tt),role:"button","aria-label":`Select series ${Tt+1}`,tabIndex:0,onKeyPress:yt=>{yt.key==="Enter"&&Ue(Tt)}},C.createElement(Pg.R,{name:Et.name??`Series ${Tt+1}`,onChange:yt=>Xe(yt,Tt,"name")}),C.createElement(es.K,{name:"trash-alt",title:"remove",className:(0,K.cx)(ze.actionIcon),onClick:()=>lt(Tt),tooltip:"Delete series"})))),xe>=0&&F[xe]&&C.createElement(C.Fragment,null,Pe.length>1&&C.createElement(Kt.D,{label:"Data"},C.createElement(ve.l6,{isClearable:!1,options:Pe,placeholder:"Change filter",value:Pe.find(Et=>Et.value===F[xe].frame)??0,onChange:Et=>{se(F.map((Tt,yt)=>yt===xe?Et===null?{...F[yt],frame:void 0}:{...F[yt],frame:Et?.value,x:void 0,y:void 0}:Tt))}})),C.createElement(Cg,{key:`series/${xe}`,baseNameMode:to.X4.ExcludeBaseNames,item:{},context:fe,value:F[xe],onChange:Et=>{se(F.map((Tt,yt)=>yt===xe?Et:Tt))},frameFilter:F[xe].frame??void 0})))},Tg=F=>({marginBot:(0,K.css)({marginBottom:"20px"}),row:(0,K.css)({padding:`${F.spacing(.5,1)}`,borderRadius:`${F.shape.radius.default}`,background:`${F.colors.background.secondary}`,minHeight:`${F.spacing(4)}`,display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"3px",cursor:"pointer",border:`1px solid ${F.components.input.borderColor}`,"&:hover":{border:`1px solid ${F.components.input.borderHover}`}}),sel:(0,K.css)({border:`1px solid ${F.colors.primary.border}`,"&:hover":{border:`1px solid ${F.colors.primary.border}`}}),actionIcon:(0,K.css)({color:`${F.colors.text.secondary}`,"&:hover":{color:`${F.colors.text}`}})});var $u=e(84596);const Mg=({allSeries:F,data:se,manualSeriesConfigs:fe,seriesMapping:Pe,rowIndex:xe,hoveredPointIndex:Ue,options:ze})=>{const Xe=(0,k.of)(Sg);if(!F||xe==null)return null;const ot=F[Ue],lt=ot.frame(se),pt=ot.x(lt),Et=ot.y(lt);let Tt;if(Et.getLinks){const Bt=Et.values[xe],wt=Et.display?Et.display(Bt):{text:`${Bt}`,numeric:+Bt};Tt=Et.getLinks({calculatedValue:wt,valueRowIndex:xe}).map(Qt=>(Qt.title||(Qt.title=(0,Zl.eT)(Qt.href)),Qt))}let yt=lt.fields.filter(Bt=>Bt!==pt&&Bt!==Et),Nt=null,Gt=null;if(Pe===rd.Manual&&fe){const Bt=fe[Ue]?.pointColor?.field??"",wt=fe[Ue]?.pointSize?.field??"",Qt=Bt?(0,Ha.findField)(lt,Bt):void 0,sn=wt?(0,Ha.findField)(lt,wt):void 0;Gt={colorFacetFieldName:Bt,sizeFacetFieldName:wt,colorFacetValue:Qt?.values[xe],sizeFacetValue:sn?.values[xe]},yt=yt.filter(Xt=>Xt!==Qt&&Xt!==sn)}return Nt={name:(0,ts.Ct)(Et,lt),val:Et.values[xe],field:Et,color:ot.pointColor(lt)},C.createElement(C.Fragment,null,C.createElement("table",{className:Xe.infoWrap},C.createElement("tr",null,C.createElement("th",{colSpan:2,style:{backgroundColor:Nt.color}})),C.createElement("tbody",null,C.createElement("tr",null,C.createElement("th",null,(0,ts.Ct)(pt,lt)),C.createElement("td",null,id(pt,pt.values[xe]))),C.createElement("tr",null,C.createElement("th",null,Nt.name,":"),C.createElement("td",null,id(Nt.field,Nt.val))),Gt!==null&&Gt.colorFacetFieldName&&C.createElement("tr",null,C.createElement("th",null,Gt.colorFacetFieldName,":"),C.createElement("td",null,Gt.colorFacetValue)),Gt!==null&&Gt.sizeFacetFieldName&&C.createElement("tr",null,C.createElement("th",null,Gt.sizeFacetFieldName,":"),C.createElement("td",null,Gt.sizeFacetValue)),yt.map((Bt,wt)=>C.createElement("tr",{key:wt},C.createElement("th",null,(0,ts.Ct)(Bt,lt),":"),C.createElement("td",null,id(Bt,Bt.values[xe])))),Tt&&Tt.length>0&&C.createElement("tr",null,C.createElement("td",{colSpan:2},C.createElement(Lo.gW,null,Tt.map((Bt,wt)=>C.createElement(Q.z9,{key:wt,icon:"external-link-alt",target:Bt.target,href:Bt.href,onClick:Bt.onClick,fill:"text",style:{width:"100%"}},Bt.title))))))))};function id(F,se){return F.display?(0,xs.cN)(F.display(se)):`${se}`}const Sg=F=>({infoWrap:(0,K.css)({padding:"8px",width:"100%",th:{fontWeight:F.typography.fontWeightMedium,padding:F.spacing(.25,2)}}),highlight:(0,K.css)({background:F.colors.action.hover}),xVal:(0,K.css)({fontWeight:F.typography.fontWeightBold}),icon:(0,K.css)({marginRight:F.spacing(1),verticalAlign:"middle"})});var xg=e(79871);function ld(F,se){return F.display?(0,xs.cN)(F.display(se)):`${se}`}const Og=({dataIdxs:F,seriesIdx:se,data:fe,allSeries:Pe,dismiss:xe,options:Ue,isPinned:ze})=>{const Xe=(0,k.of)(si.$),ot=F.find(Xt=>Xt!==null),lt=se-1;if(!Pe||ot==null)return null;const pt=Pe[lt],Et=pt.frame(fe),Tt=pt.x(Et),yt=pt.y(Et);let Nt=pt.name;Ue.seriesMapping==="manual"&&(Nt=Ue.series?.[lt]?.name??`Series ${lt+1}`);let Gt=pt.pointColor(Et);Array.isArray(Gt)&&(Gt=Gt[ot]);const Bt={label:Nt,value:"",color:(0,cr.alpha)(Gt,.5),colorIndicator:xg.fX.marker_md},wt=[{label:(0,ts.Ct)(Tt,Et),value:ld(Tt,Tt.values[ot])},{label:(0,ts.Ct)(yt,Et),value:ld(yt,yt.values[ot])}],Qt=Et.fields.filter(Xt=>Xt!==Tt&&Xt!==yt);Qt&&Qt.forEach(Xt=>{wt.push({label:Xt.name,value:ld(Xt,Xt.values[ot])})});const sn=()=>{let Xt=[];if(yt.getLinks){const In=yt.values[ot],on=yt.display?yt.display(In):{text:`${In}`,numeric:+In};Xt=yt.getLinks({calculatedValue:on,valueRowIndex:ot}).map(bn=>(bn.title||(bn.title=(0,Zl.eT)(bn.href)),bn))}return Xt};return C.createElement("div",{className:Xe.wrapper},C.createElement(du.A,{headerLabel:Bt,isPinned:ze}),C.createElement(ac.o,{contentLabelValue:wt,isPinned:ze}),ze&&C.createElement(cu.S,{dataLinks:sn()}))};var Vu=e(43228);const _u=5;function Ig(F){return{standardOptions:{[zs.uo.Min]:{hideFromDefaults:!0},[zs.uo.Max]:{hideFromDefaults:!0},[zs.uo.Unit]:{hideFromDefaults:!0},[zs.uo.Decimals]:{hideFromDefaults:!0},[zs.uo.NoValue]:{hideFromDefaults:!0},[zs.uo.DisplayName]:{hideFromDefaults:!0},[zs.uo.Thresholds]:{hideFromDefaults:!0},[zs.uo.Mappings]:{hideFromDefaults:!0},[zs.uo.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Es.Y.PaletteClassic}}},useCustomConfig:se=>{se.addRadio({path:"show",name:"Show",defaultValue:F.show,settings:{options:[{label:"Points",value:li.Points},{label:"Lines",value:li.Lines},{label:"Both",value:li.PointsAndLines}]}}).addSliderInput({path:"pointSize.fixed",name:"Point size",defaultValue:F.pointSize?.fixed??_u,settings:{min:1,max:100,step:1},showIf:fe=>fe.show!==li.Lines}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",showIf:fe=>fe.show!==li.Points,editor:Vu.F,override:Vu.F,process:to.hS,shouldApply:fe=>fe.type===Zn.PU.number}).addSliderInput({path:"lineWidth",name:"Line width",defaultValue:F.lineWidth,settings:{min:0,max:10,step:1},showIf:fe=>fe.show!==li.Points}),Ho.r(se,F),Ar.e(se)}}}function Ag(F,se,fe,Pe,xe,Ue){let ze,Xe;try{ze=Rg(F,se()),Xe=Lg(se,ze,fe,Pe,xe,Ue)}catch(ot){let lt="Unknown error in prepScatter";return typeof ot=="string"?lt=ot:ot instanceof Error&&(lt=ot.message),{error:lt,series:[]}}return{series:ze,builder:Xe}}function zu(F,se,fe,Pe,xe,Ue){const ze=se[fe],Xe=ze.fields[xe];let ot=Xe.state??{};ot.seriesIndex=F,Xe.state=ot;let lt=Ue.pointColorFixed?R.$.theme2.visualization.getColorByName(Ue.pointColorFixed):(0,Us.lz)(Xe,R.$.theme2).color,pt=()=>lt;const Et={...od,...Xe.config.custom};let Tt=Us.uf.get(Es.Y.PaletteClassic);if(Ue.pointColorIndex){const wt=se[fe].fields[Ue.pointColorIndex];if(wt)if(Tt=(0,Us.Qi)(Xe),Tt.isByValue){const Qt=Ue.pointColorIndex;pt=sn=>{const Xt=sn.fields[Qt];return Xt.state?.range&&(Xt.state.range=void 0),Xt.display=(0,Hs.J)({field:Xt,theme:R.$.theme2}),Xt.values.map(In=>Xt.display(In).color)}}else lt=Tt.getCalculator(wt,R.$.theme2)(wt.values[0],1),pt=()=>lt}let yt=Ue.pointSizeConfig,Nt=Ue.pointSizeConfig?.fixed??Xe.config.custom?.pointSize?.fixed??_u,Gt=()=>Nt;Ue.pointSizeIndex?Gt=wt=>{const Qt=(0,Ha.getScaledDimensionForField)(wt.fields[Ue.pointSizeIndex],Ue.pointSizeConfig,xt.QH.Quad),sn=Array(wt.length);for(let Xt=0;Xt<wt.length;Xt++)sn[Xt]=Qt.get(Xt);return sn}:yt={fixed:Nt,min:Nt,max:Nt};const Bt=(0,ts.Ct)(Xe,ze,se);return{name:Bt,frame:wt=>wt[fe],x:wt=>wt.fields[Pe],y:wt=>wt.fields[xe],legend:()=>[{label:Bt,color:lt,getItemKey:()=>Bt,yAxis:xe}],showLine:Et.show!==li.Points,lineWidth:Et.lineWidth??2,lineStyle:Et.lineStyle,lineColor:()=>lt,showPoints:Et.show!==li.Lines?xt.yL.Always:xt.yL.Never,pointSize:Gt,pointColor:pt,pointSymbol:(wt,Qt)=>"circle",label:xt.yL.Never,labelValue:()=>"",show:!ze.fields[xe].config.custom.hideFrom?.viz,hints:{pointSize:yt,pointColor:{mode:Tt}}}}function Rg(F,se){let fe=0;if(!se.length)throw"Missing data";if(F.seriesMapping==="manual"){if(!F.series?.length)throw"Missing series config";const ot=[];for(const lt of F.series){if(!lt?.x)throw"Select X dimension";if(!lt?.y)throw"Select Y dimension";for(let pt=0;pt<se.length;pt++){if(lt.frame!==void 0&&lt.frame!==pt)continue;const Et=se[pt],Tt=(0,Ha.findFieldIndex)(lt.x,Et,se);if(Tt!=null){const yt=(0,Ha.findFieldIndex)(lt.y,Et,se);if(yt==null)throw"Y must be in the same frame as X";const Nt={pointColorFixed:lt.pointColor?.fixed,pointColorIndex:(0,Ha.findFieldIndex)(lt.pointColor?.field,Et,se),pointSizeConfig:lt.pointSize,pointSizeIndex:(0,Ha.findFieldIndex)(lt.pointSize?.field,Et,se)};ot.push(zu(fe++,se,pt,Tt,yt,Nt))}}}return ot}const Pe=F.dims??{},xe=Pe.frame??0,Ue=se[xe],ze=[];let Xe=(0,Ha.findFieldIndex)(Pe.x,Ue,se);for(let ot=0;ot<Ue.fields.length;ot++)if(uc(Ue.fields[ot])){if(Xe==null||ot===Xe){Xe=ot;continue}if(Pe.exclude&&Pe.exclude.includes((0,ts.Ct)(Ue.fields[ot],Ue,se)))continue;ze.push(ot)}if(Xe==null)throw"Missing X dimension";if(!ze.length)throw"No Y values";return ze.map(ot=>zu(fe++,se,xe,Xe,ot,{}))}const Lg=(F,se,fe,Pe,xe,Ue)=>{let ze,Xe;function ot(Xt){return(on,bn,Bn,wn)=>(Ss.A.orient(on,bn,(Mn,dn,Rn,Dn,ea,Gn,ia,_a,Ra,ms,va,ka,oa,zn,Kn)=>{const kn=Ss.A.pxRatio,ua=se[bn-1];let Ia=on.data[bn],Pa=ua.showLine,La=ua.showPoints===xt.yL.Always;!La&&ua.showPoints===xt.yL.Auto&&(La=Ia[0].length<1e3),!La&&!Pa&&(Pa=!0);let On=1;on.ctx.save(),on.ctx.rect(on.bbox.left,on.bbox.top,on.bbox.width,on.bbox.height),on.ctx.clip(),on.ctx.fillStyle=Mn.fill(),on.ctx.strokeStyle=Mn.stroke(),on.ctx.lineWidth=On;let _n=2*Math.PI,jn=Dn.key,$a=ea.key,Ba=ua.hints.pointSize;const rs=ua.hints.pointColor.mode.isByValue;let Xa=(Ba.max??Ba.fixed)*kn,Ms=on.posToVal(-Xa/2,jn),Qs=on.posToVal(on.bbox.width/kn+Xa/2,jn),io=on.posToVal(on.bbox.height/kn+Xa/2,$a),Vs=on.posToVal(-Xa/2,$a),Xr=Xt.disp.size.values(on,bn),Li=Xt.disp.color.values(on,bn),Wl=Xt.disp.color.alpha,mo=Pa?new Path2D:null,Io=null;for(let fs=0;fs<Ia[0].length;fs++){let er=Ia[0][fs],Bi=Ia[1][fs],Vo=Xr[fs]*kn;if(er>=Ms&&er<=Qs&&Bi>=io&&Bi<=Vs){let Kl=Gn(er,Dn,ms,_a),hc=ia(Bi,ea,va,Ra);Pa&&mo.lineTo(Kl,hc),La&&(on.ctx.moveTo(Kl+Vo/2,hc),on.ctx.beginPath(),on.ctx.arc(Kl,hc,Vo/2,0,_n),rs&&Li[fs]!==Io&&(Io=Li[fs],on.ctx.fillStyle=(0,cr.alpha)(Io,Wl),on.ctx.strokeStyle=Io),on.ctx.fill(),on.ctx.stroke(),Xt.each(on,bn,fs,Kl-Vo/2-On/2,hc-Vo/2-On/2,Vo+On,Vo+On))}}if(Pa){let fs=ua.frame(F());on.ctx.strokeStyle=ua.lineColor(fs),on.ctx.lineWidth=ua.lineWidth*kn;const{lineStyle:er}=ua;er&&er.fill!=="solid"&&(er.fill==="dot"&&(on.ctx.lineCap="round"),on.ctx.setLineDash(er.dash??[10,10])),on.ctx.stroke(mo)}on.ctx.restore()}),null)}let lt=ot({disp:{size:{values:(Xt,In)=>Xt.data[In][2]},color:{values:(Xt,In)=>Xt.data[In][3],alpha:.5}},each:(Xt,In,on,bn,Bn,wn,Mn)=>{bn-=Xt.bbox.left,Bn-=Xt.bbox.top,ze.add({x:bn,y:Bn,w:wn,h:Mn,sidx:In,didx:on})}});const pt=new Oa.e;pt.setCursor({drag:{setScale:!0},dataIdx:(Xt,In)=>{if(In===1){const on=Ss.A.pxRatio;Xe=null;let bn=1/0,Bn=Xt.cursor.left*on,wn=Xt.cursor.top*on;ze.get(Bn,wn,1,1,Mn=>{if((0,Do.ur)(Bn,wn,Mn.x,Mn.y,Mn.x+Mn.w,Mn.y+Mn.h)){let dn=Mn.x+Mn.w/2,Rn=Mn.y+Mn.h/2,Dn=dn-Bn,ea=Rn-wn,Gn=Math.sqrt(Dn**2+ea**2);Gn<=Mn.w/2&&Gn<=bn&&(bn=Gn,Xe=Mn)}})}return Xe&&In===Xe.sidx?Xe.didx:null},points:{size:(Xt,In)=>Xe&&In===Xe.sidx?Xe.w/Ss.A.pxRatio:0,fill:(Xt,In)=>"rgba(255,255,255,0.4)"}});const Et=()=>{Ue?.current&&(Pe&&Pe(void 0),xe&&xe())};let Tt=null;pt.addHook("init",(Xt,In)=>{!!R.$.featureToggles.newVizTooltips||(Xt.over.style.overflow="hidden"),Tt=Xt.root.parentElement,xe&&Tt?.addEventListener("click",xe)}),pt.addHook("destroy",Xt=>{xe&&(Tt?.removeEventListener("click",xe),Et())});let yt;pt.addHook("syncRect",(Xt,In)=>{yt=In}),Pe&&pt.addHook("setLegend",Xt=>{if(Xt.cursor.idxs!=null)for(let In=0;In<Xt.cursor.idxs.length;In++){const on=Xt.cursor.idxs[In];if(on!=null&&!Ue?.current){Pe({scatterIndex:In-1,xIndex:on,pageX:yt.left+Xt.cursor.left,pageY:yt.top+Xt.cursor.top});return}}Ue?.current||Pe(void 0)}),pt.addHook("drawClear",Xt=>{Et(),ze=ze||new Do.C$(0,0,Xt.bbox.width,Xt.bbox.height),ze.clear(),Xt.series.forEach((In,on)=>{on>0&&(In._paths=null)})}),pt.setMode(2);const Nt=F();let Gt=se[0].x(se[0].frame(Nt)),Bt=Gt.config,wt=Bt.custom,Qt=wt?.scaleDistribution;pt.addScale({scaleKey:"x",isTime:!1,orientation:xt.Lt.Horizontal,direction:xt.ON.Right,distribution:Qt?.type,log:Qt?.log,linearThreshold:Qt?.linearThreshold,min:Bt.min,max:Bt.max,softMin:wt?.axisSoftMin,softMax:wt?.axisSoftMax,centeredZero:wt?.axisCenteredZero,decimals:Bt.decimals});let sn=wt.axisLabel;return pt.addAxis({scaleKey:"x",placement:wt?.axisPlacement!==xt.vM.Hidden?xt.vM.Bottom:xt.vM.Hidden,show:wt?.axisPlacement!==xt.vM.Hidden,grid:{show:wt?.axisGridShow},border:{show:wt?.axisBorderShow},theme:fe,label:sn==null||sn===""?(0,ts.Ct)(Gt,se[0].frame(Nt),Nt):sn,formatValue:(Xt,In)=>(0,xs.cN)(Gt.display(Xt,In))}),se.forEach((Xt,In)=>{let on=Xt.frame(Nt),bn=Xt.y(on);const Bn=Xt.lineColor(on),wn=Ug(on,Xt.pointColor);let Mn=bn.config.unit??"y",dn=bn.config,Rn=dn.custom,Dn=Rn?.scaleDistribution;pt.addScale({scaleKey:Mn,orientation:xt.Lt.Vertical,direction:xt.ON.Up,distribution:Dn?.type,log:Dn?.log,linearThreshold:Dn?.linearThreshold,min:dn.min,max:dn.max,softMin:Rn?.axisSoftMin,softMax:Rn?.axisSoftMax,centeredZero:Rn?.axisCenteredZero,decimals:dn.decimals});let ea=Rn?.axisLabel;pt.addAxis({scaleKey:Mn,theme:fe,placement:Rn?.axisPlacement===xt.vM.Auto?xt.vM.Left:Rn?.axisPlacement,show:Rn?.axisPlacement!==xt.vM.Hidden,grid:{show:Rn?.axisGridShow},border:{show:Rn?.axisBorderShow},size:Rn?.axisWidth,label:ea==null||ea===""?(0,ts.Ct)(bn,se[In].frame(Nt),Nt):ea,formatValue:(Gn,ia)=>(0,xs.cN)(bn.display(Gn,ia))}),pt.addSeries({facets:[{scale:"x",auto:!0},{scale:Mn,auto:!0}],pathBuilder:lt,theme:fe,scaleKey:"",lineColor:(0,cr.alpha)(""+Bn,1),fillColor:(0,cr.alpha)(wn,.5),show:!Rn.hideFrom?.viz})}),pt};function ku(F,se,fe){return F.error||!se.length?[null]:[null,...F.series.map((Pe,xe)=>{const Ue=Pe.frame(se);let ze;const Xe=Pe.pointColor(Ue);return Array.isArray(Xe)?ze=Xe:ze=Array(Ue.length).fill(Xe),[Pe.x(Ue).values,Pe.y(Ue).values,Bg(Ue,Pe.pointSize),ze]})]}function Bg(F,se){const fe=se(F);return Array.isArray(fe)?fe:Array(F.length).fill(fe)}function Ug(F,se){const fe=se(F);return Array.isArray(fe)?fe[0]:fe}const Hu=10,Ng=F=>{const[se,fe]=(0,C.useState)(),[Pe,xe]=(0,C.useState)([]),[Ue,ze]=(0,C.useState)(),[Xe,ot]=(0,C.useState)(),[lt,pt]=(0,C.useState)(),[Et,Tt]=(0,C.useState)(!1),yt=!!R.$.featureToggles.newVizTooltips,Nt=(0,C.useRef)(!1),Gt=(0,$u.A)(F.options),Bt=(0,$u.A)(F.data),wt=()=>{Nt.current=!1,Tt(!1),sn(void 0)},Qt=()=>{Nt.current=!Nt.current,Tt(Nt.current)},sn=bn=>{pt(bn)},Xt=(0,C.useCallback)(()=>{const bn=()=>F.data.series,Bn=Ag(F.options,bn,R.$.theme2,yt?null:sn,yt?null:Qt,yt?null:Nt);Bn.error?fe(Bn.error):Bn.series.length&&F.data.series&&(ze(Bn.builder),xe(Bn.series),ot(()=>ku(Bn,F.data.series)),fe(void 0))},[F.data.series,F.options,yt]),In=(0,C.useCallback)(()=>{ot(()=>ku({error:se,series:Pe},F.data.series))},[F.data.series,se,Pe]);(0,C.useEffect)(()=>{Gt!==F.options||Bt?.structureRev!==F.data.structureRev?Xt():Bt?.series!==F.data.series&&In()},[F]);const on=()=>{const bn=[],Bn=dn=>dn==null?"-":dn.toFixed(1),wn=R.$.theme2;for(let dn=0;dn<Pe.length;dn++){const Rn=Pe[dn],Dn=Rn.frame(F.data.series);if(Dn)for(const ea of Rn.legend())ea.getDisplayValues=()=>{const Gn=F.options.legend.calcs;if(!Gn?.length)return[];const ia=Rn.y(Dn),_a=ia.display??Bn;let Ra=null;const ms=(0,uo.Nw)({field:ia,reducers:Gn});return Gn.map(va=>{const ka=uo.AS.get(va);let oa=_a;return ka.id===uo.gy.diffperc&&(oa=(0,Hs.J)({field:{...ia,config:{...ia.config,unit:"percent"}},theme:wn})),(ka.id===uo.gy.count||ka.id===uo.gy.changeCount||ka.id===uo.gy.distinctCount)&&(Ra||(Ra=(0,Hs.J)({field:{...ia,config:{...ia.config,unit:"none"}},theme:wn})),oa=Ra),{...oa(ms[va]),title:ka.name,description:ka.description}})},ea.disabled=!(Rn.show??!0),F.options.seriesMapping===rd.Manual&&(ea.label=F.options.series?.[dn]?.name??`Series ${dn+1}`),ea.color=(0,cr.alpha)(Rn.lineColor(Dn),1),bn.push(ea)}if(!F.options.legend.showLegend)return null;const Mn={flexStart:(0,K.css)({div:{justifyContent:"flex-start"}})};return C.createElement(En.KU.Legend,{placement:F.options.legend.placement,width:F.options.legend.width},C.createElement(Fn.t,{className:Mn.flexStart,placement:F.options.legend.placement,items:bn,displayMode:F.options.legend.displayMode}))};return se||!Ue||!Xe?C.createElement("div",{className:"panel-empty"},C.createElement("p",null,se)):C.createElement(C.Fragment,null,C.createElement(En.KU,{width:F.width,height:F.height,legend:on()},(bn,Bn)=>C.createElement(Nc.Z,{config:Ue,data:Xe,width:bn,height:Bn},yt&&F.options.tooltip.mode!==xt.$N.None&&C.createElement(Lr.xl,{config:Ue,hoverMode:Lr.b3.xyOne,render:(wn,Mn,dn,Rn,Dn)=>C.createElement(Og,{data:F.data.series,dataIdxs:Mn,allSeries:Pe,dismiss:Dn,isPinned:Rn,options:F.options,seriesIdx:dn}),maxWidth:F.options.tooltip.maxWidth,maxHeight:F.options.tooltip.maxHeight}))),!yt&&C.createElement(sa.ZL,null,lt&&F.options.tooltip.mode!==xt.$N.None&&C.createElement(ga.o,{position:{x:lt.pageX,y:lt.pageY},offset:{x:Hu,y:Hu},allowPointerEvents:Nt.current},Et&&C.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},C.createElement(Qa.J,{onClick:wt,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),C.createElement(Mg,{options:F.options.tooltip,allSeries:Pe,manualSeriesConfigs:F.options.series,seriesMapping:F.options.seriesMapping,rowIndex:lt.xIndex,hoveredPointIndex:lt.scatterIndex,data:F.data.series}))))},wg=new L.m(Ng).useFieldConfig(Ig(od)).setPanelOptions(F=>{F.addRadio({path:"seriesMapping",name:"Series mapping",defaultValue:"auto",settings:{options:[{value:"auto",label:"Table",description:"Plot values within a single table result"},{value:"manual",label:"Manual",description:"Construct values from any result"}]}}).addCustomEditor({id:"xyPlotConfig",path:"dims",name:"",editor:yg,showIf:se=>se.seriesMapping==="auto"}).addCustomEditor({id:"series",path:"series",name:"",defaultValue:[],editor:bg,showIf:se=>se.seriesMapping==="manual"}),_r.D(F,!0),ir.H(F)}),Fg={"core:plugin/graphite":async()=>await e.e(6134).then(e.bind(e,8652)),"core:plugin/cloudwatch":async()=>await Promise.all([e.e(2571),e.e(3766)]).then(e.bind(e,52571)),"core:plugin/dashboard":async()=>await e.e(2058).then(e.bind(e,92058)),"core:plugin/elasticsearch":async()=>await Promise.all([e.e(2261),e.e(1717)]).then(e.bind(e,82261)),"core:plugin/opentsdb":async()=>await e.e(747).then(e.bind(e,24989)),"core:plugin/grafana":async()=>await e.e(3648).then(e.bind(e,62391)),"core:plugin/influxdb":async()=>await Promise.all([e.e(7166),e.e(9404)]).then(e.bind(e,23912)),"core:plugin/loki":async()=>await Promise.all([e.e(1216),e.e(6587),e.e(6499),e.e(1477)]).then(e.bind(e,16499)),"core:plugin/jaeger":async()=>await e.e(2032).then(e.bind(e,2255)),"core:plugin/zipkin":async()=>await e.e(2963).then(e.bind(e,95616)),"core:plugin/mixed":async()=>await e.e(2513).then(e.bind(e,12870)),"core:plugin/mysql":async()=>await Promise.all([e.e(7166),e.e(6918)]).then(e.bind(e,18715)),"core:plugin/grafana-postgresql-datasource":async()=>await Promise.all([e.e(7166),e.e(8651)]).then(e.bind(e,38254)),"core:plugin/mssql":async()=>await Promise.all([e.e(7166),e.e(9040)]).then(e.bind(e,47371)),"core:plugin/prometheus":async()=>await Promise.all([e.e(1216),e.e(4254),e.e(9546)]).then(e.bind(e,94254)),"core:plugin/grafana-testdata-datasource":async()=>await e.e(9513).then(e.bind(e,35990)),"core:plugin/cloud-monitoring":async()=>await Promise.all([e.e(8054),e.e(1347),e.e(9681)]).then(e.bind(e,11347)),"core:plugin/azuremonitor":async()=>await Promise.all([e.e(6934),e.e(8115)]).then(e.bind(e,76934)),"core:plugin/tempo":async()=>await Promise.all([e.e(3543),e.e(1841)]).then(e.bind(e,63543)),"core:plugin/alertmanager":async()=>await e.e(4737).then(e.bind(e,27013)),"core:plugin/grafana-pyroscope-datasource":async()=>await e.e(6312).then(e.bind(e,68929)),"core:plugin/parca":async()=>await e.e(6329).then(e.bind(e,51971)),"core:plugin/text":b,"core:plugin/timeseries":P,"core:plugin/trend":T,"core:plugin/state-timeline":v,"core:plugin/status-history":E,"core:plugin/candlestick":g,"core:plugin/graph":async()=>await Promise.all([e.e(7982),e.e(8068)]).then(e.bind(e,94656)),"core:plugin/xychart":I,"core:plugin/geomap":async()=>await Promise.all([e.e(1698),e.e(9320),e.e(190)]).then(e.bind(e,63928)),"core:plugin/canvas":async()=>await e.e(7523).then(e.bind(e,68432)),"core:plugin/dashlist":u,"core:plugin/alertlist":n,"core:plugin/annolist":o,"core:plugin/heatmap":async()=>await e.e(5857).then(e.bind(e,46761)),"core:plugin/table":D,"core:plugin/table-old":async()=>await e.e(8777).then(e.bind(e,78491)),"core:plugin/news":m,"core:plugin/live":h,"core:plugin/stat":iu,"core:plugin/datagrid":d,"core:plugin/debug":i,"core:plugin/flamegraph":l,"core:plugin/gettingstarted":f,"core:plugin/gauge":Rc,"core:plugin/piechart":a,"core:plugin/bargauge":r,"core:plugin/barchart":s,"core:plugin/logs":p,"core:plugin/traces":y,"core:plugin/welcome":M,"core:plugin/nodeGraph":async()=>await Promise.all([e.e(1698),e.e(5511),e.e(7317)]).then(e.bind(e,86703)),"core:plugin/histogram":c,"core:plugin/alertGroups":t};var cd=e(81900),Wg=e(52762),Kg=e(44115),$g=e(72635),Vg=e(34796),_g=e.n(Vg),zg=e(95093),kg=e.n(zg),Hg=e(28848),Gu=e.n(Hg),Gg=e(40961),jg=e(8867),Yg=e(69733),Qg=e(54625),Jg=e(24160),Xg=e(82960),Zg=e(75091),qg=e(32975),ep=e(82611),tp=e(75226),ju=e(29317),Yh=e(54087),Qh=e(80851),Jh=e(32176),Xh=e(31221),Zh=e(91520),qh=e(92275),e0=e(82013),t0=e(2341),n0=e(19538),np=e(39954),ap=e(13303),sp=e(8984),rp=e(91950),Yu=e(31140),op=e(78827),ip=e(68576),lp=e(92247);const Ul=sp;Ul.PanelPlugin=L.m,Ul.DataSourcePlugin=x.tD,Ul.AppPlugin=S.hX,Ul.DataSourceApi=x.mA;const cp=["jquery.flot.crosshair","jquery.flot.events","jquery.flot.fillbelow","jquery.flot.gauge","jquery.flot.pie","jquery.flot.selection","jquery.flot.stack","jquery.flot.stackpercent","jquery.flot.time","jquery.flot"].reduce((F,se)=>({...F,[se]:{fakeDep:1}}),{}),dp={"@emotion/css":K,"@emotion/react":Wg,"@grafana/data":np,"@grafana/runtime":ap,"@grafana/slate-react":ju.Ay,"@grafana/ui":Ul,"app/core/app_events":{default:Ci.lE,__useDefault:!0},"app/core/config":{default:vn.Ay,__useDefault:!0},"app/core/core":{appEvents:Ci.lE,contextSrv:Ci.TP},"app/core/services/backend_srv":{BackendSrv:vo.Mf,getBackendSrv:vo.AI},"app/core/table_model":{default:rp.A,__useDefault:!0},"app/core/time_series":{default:Yu.A,__useDefault:!0},"app/core/time_series2":{default:Yu.A,__useDefault:!0},"app/core/utils/datemath":ue,"app/core/utils/flatten":op,"app/core/utils/kbn":{default:ip.A,__useDefault:!0},"app/core/utils/ticks":lp,"app/features/dashboard/impression_store":{impressions:Hi.A},d3:Kg,emotion:K,i18next:$g,jquery:{default:_g(),__useDefault:!0},...cp,lodash:{default:Ee(),__useDefault:!0},moment:{default:kg(),__useDefault:!0},prismjs:Gu(),react:C,"react-dom":Gg,"react-inlinesvg":jg,"react-redux":Yg,"react-router-dom":Qg,"react-router":Jg,redux:Xg,rxjs:Zg,"rxjs/operators":qg,slate:ep.Ay,"slate-plain-serializer":tp.A,"slate-react":ju.Ay};function Nl({url:F,source:se,transformSourceMapURL:fe=!1,transformAssets:Pe=!0}){const xe=F.split("/public/plugins/"),Ue=xe[0],ze=xe[1].split("/")[0];let Xe=se;return Pe&&(Xe=Xe.replace(/(\/?)(public\/plugins)/g,`${Ue}/$2`),Xe=Xe.replace(/(["|'])(plugins\/.+?.css)(["|'])/g,`$1${Ue}/public/$2$3`)),fe&&(Xe=Xe.replace(/(\/\/#\ssourceMappingURL=)(.+)\.map/g,`$1${Ue}/public/plugins/${ze}/$2.map`)),Xe}var mc=e(45179),Xi=e(94429);async function up(F,se,fe){const Pe=await F(se,fe),xe=Pe.headers.get("content-type")||"";if(mc.Bu.test(xe)){const Ue=await Pe.text();let ze=Ue;if(mc.Cf.test(ze)&&(ze=pp(Ue)),(0,Xi.OD)(Pe.url)){const Xe=Nl({url:Pe.url,source:ze});return new Response(new Blob([Xe],{type:"text/javascript"}))}return new Response(new Blob([ze],{type:"text/javascript"}))}return Pe}function mp(F,se,fe){const Pe=se.endsWith("module.js")&&!(0,Xi.OD)(se);try{const xe=F.apply(this,[se,fe]),Ue=gp(xe);return Pe?(0,cd.ni)(Ue):Ue}catch{return mc.$b.test(se)?`${R.$.appSubUrl??""}/public/${se}`:(console.log(`SystemJS: failed to resolve '${se}'`),se)}}function fp(F,se){if(se.endsWith(".css")&&!F){const Pe=O.zO.get(se)?.default;Pe&&(document.adoptedStyleSheets=[...document.adoptedStyleSheets,Pe])}}function gp(F){return F.startsWith(`${mc.XV}:`)?F:(F.endsWith("!")&&(F=F.slice(0,-1)),["css","js","json","wasm"].some(Pe=>F.endsWith(Pe))?F:F+".js")}function pp(F){return`(function(define) {
  ${F}
})(window.__grafana_amd_define);`}var hp=e(22055),vp=e(6262),Qu=e(27716),Ju=e(35853);function Ep(F){const se=new URL(window.location.href),fe=new URL(F);return se.host===fe.host}async function yp(F,se,fe){let Pe="";if(Ep(F)?(Pe=await(await fetch(F)).text(),Pe=Nl({url:F,source:Pe,transformSourceMapURL:!0,transformAssets:!1})):(0,Xi.OD)(F)&&(Pe=await(await fetch(F)).text(),Pe=Nl({url:F,source:Pe,transformSourceMapURL:!0,transformAssets:!0})),Pe.length===0)throw new Error("Only same domain scripts are allowed in sandboxed plugins");Pe=Xu(Pe),fe.evaluate(Pe)}async function Dp(F){if((0,Xi.OD)(F.module)){const se=F.module;let Pe=await(await fetch(se)).text();return Pe=Nl({url:se,source:Pe,transformSourceMapURL:!0,transformAssets:!0}),Pe}else{let se=(0,Xi.Av)(F.module);const fe=(0,cd.ni)(se);let xe=await(await fetch(fe)).text();return xe=Nl({url:fe,source:xe,transformSourceMapURL:!0,transformAssets:!1}),xe=Xu(xe),xe}}function Xu(F){return F.replace(/window\.location/gi,"window.locationSandbox")}function Pp(F){F.evaluate(`${Ju.V.toString()};${Ju.V.name}()`)}const Ai=["iframe"];var Zu=e(7077),fc=e(43429),Cp=e(34867);const bp=!!R.$.featureToggles.frontendSandboxMonitorOnly;function Tp(F){return!!F&&typeof F=="object"&&F?.hasOwnProperty("plugin")}function a0(F){throw new Error(`Unexpected object: ${F}. This should never happen.`)}const dd=(0,Cp.DW)("sandbox",{monitorOnly:String(bp)});function Mp(F){return F instanceof C.Component}function $o(F,se){dd.logWarning(F,se)}function wl(F,se){dd.logError(F,se)}function qu(F,se){dd.logInfo(F,se)}async function Sp({isAngular:F,pluginId:se}){if(!R.$.featureToggles.pluginsFrontendSandbox||F||location.search.includes("nosandbox")&&R.$.buildInfo.env==="development"||R.$.disableFrontendSandboxForPlugins.includes(se))return!1;const xe=await(0,Qu.x)(se);return!(xe.type===fc.QE.app&&xe.signatureType===fc.kv.grafana)}function xp(F){return F?.constructor?.name==="RegExp"}function ud(F){return F&&(xp(F)&&(0,Zu.U)(F)?new RegExp(F):Array.isArray(F)?F.map(ud):typeof F=="object"?Object.keys(F).reduce((se,fe)=>(Reflect.set(se,fe,ud(Reflect.get(F,fe))),se),{}):F)}const Ri=Symbol.for("@@SANDBOX_LIVE_VALUE"),em=!!R.$.featureToggles.frontendSandboxMonitorOnly;function Op(F,se){const fe=Reflect.get(F,"nodeName");if(fe==="body"||F===document.body)return document.body;if(fe==="head"||F===document.head||F===document.documentElement)return F;if(Ai.includes(fe)&&($o("<"+fe+"> is not allowed in sandboxed plugins",{pluginId:se,param:fe}),!em))throw new Error("<"+fe+"> is not allowed in sandboxed plugins");if(Bp(F,se)||F.parentNode===document.body||F.closest("#reactRoot")===null||em)return F;{const Pe=document.createElement(fe);return Pe.dataset.grafanaPluginSandboxElement="true",Pe}}function Ip(F){if(typeof F=="object"&&F instanceof Element)try{return F.nodeName!==void 0}catch{return!1}return!1}function Ap(F){const se=Reflect.get(F,"style");Object.hasOwn(se,Ri)||Reflect.defineProperty(se,Ri,{})}function md(F){F&&(Array.isArray(F)?(F.forEach(md),tm(F)):typeof F=="object"&&(Object.values(F).forEach(md),tm(F)))}function tm(F){if(F)return Object.hasOwn(F,Ri)||Reflect.defineProperty(F,Ri,{}),F}function Rp(F){F&&(Object.hasOwn(F,Ri)||((0,Zu.U)(F)&&!(F instanceof Function)&&(Mp(F)||F instanceof x.mA)?Reflect.defineProperty(F,Ri,{}):F===Gu().languages&&Object.defineProperty(F,Ri,{})))}function Lp(F){return Object.hasOwn(F,Ri)}function Bp(F,se){return!document.contains(F)||F.closest(`[data-plugin-sandbox=${se}]`)!==null}let Oo;function s0(){return Oo||(Oo=document.createElement("div"),Oo.setAttribute("id","grafana-plugin-sandbox-body"),Oo.setAttribute("data-plugin-sandbox","true"),Oo.dataset.pluginSandbox="sandboxed-plugin",Oo.style.width="100%",Oo.style.height="0%",Oo.style.overflow="hidden",Oo.style.top="0",Oo.style.left="0",document.body.appendChild(Oo)),Oo}let nm=!1;function Up(){nm||(nm=!0,Np())}function Np(){const F=window.history.replaceState;Object.defineProperty(window.history,"replaceState",{value:function(...se){let fe=se;try{fe=(0,Ke.cloneDeep)(se)}catch(Pe){$o("Error cloning args in window.history.replaceState",{error:String(Pe)})}return Reflect.apply(F,this,fe)},writable:!0,configurable:!0,enumerable:!1})}const oo=new Map,Xo=!!R.$.featureToggles.frontendSandboxMonitorOnly,am=Symbol.for("@SANDBOX_LIVE_API_PATCHED");function wp(){return oo.size===0&&(Fp(oo),Wp(oo),Kp(oo),zp(oo),_p(oo),$p(oo),Vp(oo),kp(oo),Hp(oo),sm(oo),rm(oo),Gp(oo)),oo}function gc(F,se){return $o(`Plugin ${se.id} tried to set a sandboxed property`,{pluginId:se.id,attrOrMethod:String(F),entity:"window"}),Xo?F:()=>{throw new Error("Plugins are not allowed to set sandboxed properties")}}function Fp(F){const se=["contentDocument","contentWindow","src","srcdoc","srcObject","srcset"];for(const Pe of se){const xe=Object.getOwnPropertyDescriptor(HTMLIFrameElement.prototype,Pe);if(xe){let Ue=function(ze,Xe){const ot=Xe.id;return $o(`Plugin ${ot} tried to access iframe.${Pe}`,{pluginId:ot,attrOrMethod:Pe,entity:"iframe"}),Xo?ze:()=>{throw new Error("iframe."+Pe+" is not allowed in sandboxed plugins")}};var fe=Ue;xe.value&&F.set(xe.value,Ue),xe.set&&F.set(xe.set,Ue),xe.get&&F.set(xe.get,Ue)}}}function Wp(F){const se=Object.getOwnPropertyDescriptor(window,"console");if(se?.value){let Pe=function(xe,Ue){const ze=Ue.id;if(Xo)return xe;function Xe(...ot){console.log(`[plugin ${ze}]`,...ot)}return{log:Xe,warn:Xe,error:Xe,info:Xe,debug:Xe,table:Xe}};var fe=Pe;F.set(se.value,Pe)}se?.set&&F.set(se.set,gc)}function Kp(F){function se(Pe,xe){const Ue=xe.id;return $o(`Plugin ${Ue} accessed window.alert`,{pluginId:Ue,attrOrMethod:"alert",entity:"window"}),Xo?Pe:function(...ze){console.log(`[plugin ${Ue}]`,...ze)}}const fe=Object.getOwnPropertyDescriptor(window,"alert");fe?.value&&F.set(fe.value,se),fe?.set&&F.set(fe.set,gc)}function $p(F){function se(Pe,xe){const Ue=xe.id;return function(...Xe){for(const ot of Xe){const lt=ot?.toLowerCase()||"";for(const pt of Ai)if(lt.includes("<"+pt)){if($o(`Plugin ${Ue} tried to set ${pt} in innerHTML`,{pluginId:Ue,attrOrMethod:"innerHTML",param:pt,entity:"HTMLElement"}),Xo)continue;throw new Error("<"+pt+"> is not allowed in sandboxed plugins")}}(0,Ke.isFunction)(Pe)&&Pe.apply(this,Xe)}}const fe=[Object.getOwnPropertyDescriptor(Element.prototype,"innerHTML"),Object.getOwnPropertyDescriptor(Element.prototype,"outerHTML"),Object.getOwnPropertyDescriptor(Element.prototype,"insertAdjacentHTML"),Object.getOwnPropertyDescriptor(DOMParser.prototype,"parseFromString")];for(const Pe of fe)Pe?.set&&F.set(Pe.set,se),Pe?.value&&F.set(Pe.value,se)}function Vp(F){function se(Pe,xe){const Ue=xe.id;return function(Xe,ot){if(Xe&&Ai.includes(Xe)&&($o(`Plugin ${Ue} tried to create ${Xe}`,{pluginId:Ue,attrOrMethod:"createElement",param:Xe,entity:"document"}),!Xo))return document.createDocumentFragment();if((0,Ke.isFunction)(Pe))return Pe.apply(this,[Xe,ot])}}const fe=Object.getOwnPropertyDescriptor(Document.prototype,"createElement");fe?.value&&F.set(fe.value,se)}function _p(F){function se(Ue,ze){const Xe=ze.id;return function(lt,pt){const Et=lt?.nodeName?.toLowerCase()||"";if(lt&&Ai.includes(Et)&&($o(`Plugin ${Xe} tried to insert ${Et}`,{pluginId:Xe,attrOrMethod:"insertChild",param:Et,entity:"HTMLElement"}),!Xo))return document.createDocumentFragment();if((0,Ke.isFunction)(Ue))return Ue.call(this,lt,pt)}}function fe(Ue,ze){const Xe=ze.id;return function(lt,pt){const Et=pt?.nodeName?.toLowerCase()||"";if(pt&&Ai.includes(Et)&&($o(`Plugin ${Xe} tried to insert ${Et}`,{pluginId:Xe,attrOrMethod:"insertAdjacentElement",param:Et,entity:"HTMLElement"}),!Xo))return document.createDocumentFragment();if((0,Ke.isFunction)(Ue))return Ue.call(this,lt,pt)}}const Pe=[Object.getOwnPropertyDescriptor(Node.prototype,"insertBefore"),Object.getOwnPropertyDescriptor(Node.prototype,"replaceChild")];for(const Ue of Pe)Ue?.value&&F.set(Ue.set,se);const xe=Object.getOwnPropertyDescriptor(Element.prototype,"insertAdjacentElement");xe?.value&&F.set(xe.set,fe)}function zp(F){function se(Ue,ze){const Xe=ze.id;return function(...lt){let pt=lt;const Et=lt?.filter(Tt=>!Ai.includes(Tt.nodeName.toLowerCase()));Xo||(pt=Et),pt.length!==Et.length&&$o(`Plugin ${Xe} tried to append fobiddenElements`,{pluginId:Xe,attrOrMethod:"append",param:lt?.filter(Tt=>Ai.includes(Tt.nodeName.toLowerCase()))?.join(",")||"",entity:"HTMLElement"}),(0,Ke.isFunction)(Ue)&&Ue.apply(this,pt)}}function fe(Ue,ze,Xe){const ot=ze.id;return function(pt){const Et=pt?.nodeName?.toLowerCase()||"";if(pt&&Ai.includes(Et)&&($o(`Plugin ${ot} tried to append ${Et}`,{pluginId:ot,attrOrMethod:"appendChild",param:Et,entity:"HTMLElement"}),!Xo))return document.createDocumentFragment();if(Xe&&pt&&Et==="script"&&pt instanceof HTMLScriptElement){yp(pt.src,ze,Xe).then(()=>{pt.onload?.call(pt,new Event("load"))}).catch(Tt=>{pt.onerror?.call(pt,new ErrorEvent("error",{error:Tt}))});return}if((0,Ke.isFunction)(Ue))return Ue.call(this,pt)}}const Pe=[Object.getOwnPropertyDescriptor(Element.prototype,"append"),Object.getOwnPropertyDescriptor(Element.prototype,"prepend"),Object.getOwnPropertyDescriptor(Element.prototype,"after"),Object.getOwnPropertyDescriptor(Element.prototype,"before"),Object.getOwnPropertyDescriptor(Document.prototype,"append"),Object.getOwnPropertyDescriptor(Document.prototype,"prepend")];for(const Ue of Pe)Ue?.value&&F.set(Ue.value,se);const xe=Object.getOwnPropertyDescriptor(Node.prototype,"appendChild");xe?.value&&F.set(xe.value,fe)}function kp(F){const se=Object.getOwnPropertyDescriptor(Worker.prototype,"postMessage");function fe(Pe){return function(...Ue){try{const ze=(0,Ke.cloneDeep)(Ue);(0,Ke.isFunction)(Pe)&&Pe.apply(this,ze)}catch{throw new Error("postMessage arguments are invalid objects")}}}se?.value&&F.set(se.value,fe)}function Hp(F){const se=Object.getOwnPropertyDescriptor(Document.prototype,"defaultView");se?.get&&F.set(se.get,()=>()=>window);const fe=["write"];for(const Pe of fe){const xe=Object.getOwnPropertyDescriptor(Document.prototype,Pe);xe?.set&&F.set(xe.set,gc),xe?.value&&F.set(xe.value,gc)}}async function sm(F){const se=Reflect.get(window,"monaco");if(!se||Object.hasOwn(se,am))return;const fe=se.languages.setMonarchTokensProvider;function Pe(){return function(...xe){return xe.length!==2?fe.apply(se,xe):fe.call(se,xe[0],ud(xe[1]))}}F.set(se.languages.setMonarchTokensProvider,Pe),Reflect.set(se,am,{})}async function rm(F){const se=Object.getOwnPropertyDescriptor(window,"postMessage");function fe(Pe){return function(...Ue){try{const ze=(0,Ke.cloneDeep)(Ue);(0,Ke.isFunction)(Pe)&&Pe.apply(this,ze)}catch{throw new Error("postMessage arguments are invalid objects")}}}se?.value&&F.set(se.value,fe)}function nn(F){sm(oo)}function Gp(F){function se(fe){return(0,Ke.isFunction)(fe)?function(...Pe){const xe=fe.apply(this,Pe);return md(xe),xe}:fe}F.set(Ke.cloneDeep,se)}var jp=e(66161);async function fd(F,se){if(!Tp(F))return F;const fe=await Promise.resolve(F.plugin);if(Reflect.has(fe,"panel")&&Reflect.set(fe,"panel",Fl(Reflect.get(fe,"panel"),se)),Reflect.has(fe,"components")){const Pe=Reflect.get(fe,"components");Object.entries(Pe).forEach(([xe,Ue])=>{Reflect.set(Pe,xe,Fl(Ue,se))}),Reflect.set(fe,"components",Pe)}if(Reflect.has(fe,"root")&&Reflect.set(fe,"root",Fl(Reflect.get(fe,"root"),se)),Reflect.has(fe,"extensionConfigs")){const Pe=Reflect.get(fe,"extensionConfigs");for(const xe of Pe)Reflect.has(xe,"component")&&Reflect.set(xe,"component",Fl(Reflect.get(xe,"component"),se));Reflect.set(fe,"extensionConfigs",Pe)}if(Reflect.has(fe,"configPages")){const Pe=Reflect.get(fe,"configPages")??[];for(const[xe,Ue]of Object.entries(Pe))!Ue.body||!(0,Ke.isFunction)(Ue.body)||Reflect.set(Pe,xe,{...Ue,body:Fl(Ue.body,se)});Reflect.set(fe,"configPages",Pe)}return F}const Fl=(F,se)=>{const fe=C.memo(Pe=>C.createElement("div",{"data-plugin-sandbox":se.id,style:{height:se.type===fc.QE.app||se.type===fc.QE.panel?"100%":"auto"}},C.createElement(F,{...Pe})));return fe.displayName=`GrafanaSandbox(${F.displayName||F.name||"Component"})`,fe},gd=new Map,om={};async function Yp({pluginId:F}){Up();try{const se=await(0,Qu.x)(F);return gd.has(F)||gd.set(F,Qp(se)),gd.get(F)}catch(se){const fe=new Error(`Could not import plugin ${F} inside sandbox: `+se);throw wl(fe,{pluginId:F,error:String(se)}),fe}}async function Qp(F){return qu("Loading with sandbox",{pluginId:F.id}),new Promise(async(se,fe)=>{const Pe=wp();let xe;function Ue(Xe){if(Ip(Xe)){const pt=Op(Xe,F.id);return Ap(pt),pt}else Rp(Xe);const ot=Pe.get(Xe);if(ot)return ot(Xe,F,xe);const lt=nn(Xe);return lt||Xe}xe=(0,hp.A)(window,{distortionCallback:Ue,defaultPolicy:vp.G,liveTargetCallback:Lp,endowments:Object.getOwnPropertyDescriptors({locationSandbox:window.location,setImmediate:function(Xe,...ot){return setTimeout(Xe,0,...ot)},get monaco(){return Reflect.get(window,"monaco")},get Prism(){return Reflect.get(window,"Prism")},get jQuery(){return Reflect.get(window,"jQuery")},get $(){return Reflect.get(window,"jQuery")},get grafanaBootData(){if(om[F.id+"-grafanaBootData"]||(om[F.id+"-grafanaBootData"]=!0,qu("Plugin using window.grafanaBootData",{sandbox:"true",pluginId:F.id,guessedPluginName:F.id,parent:"window",packageName:"window",key:"grafanaBootData"})),R.$.buildInfo.env==="development")throw new Error(`Error in ${F.id}: Plugins should not use window.grafanaBootData. Use "config" from "@grafana/runtime" instead.`);return console.error(`${F.id.toUpperCase()}: Plugins should not use window.grafanaBootData. Use "config" from "@grafana/runtime" instead.`),R.$.bootData},async define(Xe,ot,lt){let pt,Et;Array.isArray(Xe)?(pt=Xe,Et=ot):(pt=ot,Et=lt);try{const Tt=im(pt,F.id),yt=Et.apply(null,Tt),Nt=await fd(yt,F);se(Nt)}catch(Tt){const yt=new Error(`Could not execute plugin's define ${F.id}: `+Tt);wl(yt,{pluginId:F.id,error:String(Tt)}),fe(yt)}}})}),Pp(xe);let ze="";try{ze=await Dp(F)}catch(Xe){const ot=new Error(`Could not load plugin code ${F.id}: `+Xe);wl(ot,{pluginId:F.id,error:String(Xe)}),fe(ot)}try{xe.evaluate(ze)}catch(Xe){const ot=new Error(`Could not run plugin ${F.id} inside sandbox: `+Xe);wl(ot,{pluginId:F.id,error:String(Xe)}),fe(ot)}})}function im(F,se){const fe=[];for(const Pe of F){let xe=jp.s.get(Pe);if(xe?.__useDefault&&(xe=xe.default),!xe){const Ue=new Error(`[sandbox] Could not resolve dependency ${Pe}`);throw wl(Ue,{pluginId:se,dependency:Pe,error:String(Ue)}),Ue}fe.push(xe)}return fe}const Jp=(0,Xi.kB)(dp);O.zO.addImportMap({imports:Jp});const Zi=O.zO.constructor.prototype;Zi.shouldFetch=()=>!0;const pd=Zi.fetch;Zi.fetch=function(F,se){return up(pd,F,se)};const Xp=Zi.resolve;Zi.resolve=mp.bind(Zi,Xp),Zi.onload=fp;async function hd({path:F,version:se,isAngular:fe,pluginId:Pe}){se&&(0,cd.GD)({path:F,version:se});const xe=Fg[F];if(xe)return typeof xe=="function"?await xe():xe;let Ue=(0,Xi.Av)(F);return await Sp({isAngular:fe,pluginId:Pe})?Yp({pluginId:Pe}):O.zO.import(Ue)}function pc(F){return hd({path:F.module,version:F.info?.version,isAngular:F.angular?.detected,pluginId:F.id}).then(se=>{if(se.plugin){const fe=se.plugin;return fe.meta=F,fe}if(se.Datasource){const fe=new x.tD(se.Datasource);return fe.setComponentsFromLegacyExports(se),fe.meta=F,fe}throw new Error("Plugin module is missing DataSourcePlugin or Datasource constructor export")})}function lm(F){return hd({path:F.module,version:F.info?.version,isAngular:F.angular?.detected,pluginId:F.id}).then(se=>{const fe=se.plugin?se.plugin:new S.hX;return fe.init(F),fe.meta=F,fe.setComponentsFromLegacyExports(se),fe})}},66161:(Y,A,e)=>{"use strict";e.d(A,{s:()=>t});const t=new Map([])},60677:(Y,A,e)=>{"use strict";e.d(A,{W3:()=>g,Wy:()=>u,z4:()=>d});var t=e(43429),n=e(34867),o=e(15162),s=e(27716),r=e(91629);async function g(i){const l=await(0,s.x)(i);let f;if(l.type===t.QE.app&&(f=await(0,r.ui)(l)),l.type===t.QE.datasource&&(f=await(0,r.cS)(l)),l.type===t.QE.panel&&(f=await(0,o.Kk)(l)),l.type===t.QE.renderer&&(f={meta:l}),!f)throw new Error("Unknown Plugin type: "+l.type);return f}function u(i,l,f){let h={...i},p;function m(v,E){return!E.startsWith(v.url??"")||p&&(p.url?.length??0)>(v.url?.length??0)?v:(p&&(p.active=!1),p={...v,active:!0},p)}function a(v,E=0){if(E>10)return v;if(v.children){const D=v.children.map(b=>a(b,E+1));return{...m(v,f),children:D}}return m(v,f)}return h.children=(h?.children??[]).map(a),{main:h,node:p??h}}const d=(0,n.DW)("features.plugins")},81862:(Y,A,e)=>{"use strict";e.d(A,{Ay:()=>x,Cj:()=>f,HO:()=>E,Mj:()=>p,Nm:()=>h,Q9:()=>v,RS:()=>P,c1:()=>l,g$:()=>D,ny:()=>m,ri:()=>a,uh:()=>b,xu:()=>c});var t=e(30038),n=e(2543),o=e.n(n),s=e(72724),r=e(47232),g=e(2913),u=e(10096);const d={orgId:g.Ay.bootData.user.orgId,timeZone:g.Ay.bootData.user.timezone,weekStart:g.Ay.bootData.user.weekStart,fiscalYearStartMonth:0,orgsAreLoading:!1,sessionsAreLoading:!1,teamsAreLoading:!1,isUpdating:!1,orgs:[],sessions:[],teams:[],user:null},i=(0,t.Z0)({name:"user/profile",initialState:d,reducers:{updateTimeZone:(S,O)=>{S.timeZone=O.payload.timeZone},updateWeekStart:(S,O)=>{S.weekStart=O.payload.weekStart},updateFiscalYearStartMonth:(S,O)=>{S.fiscalYearStartMonth=O.payload.fiscalYearStartMonth},setUpdating:(S,O)=>{S.isUpdating=O.payload.updating},userLoaded:(S,O)=>{S.user=O.payload.user},initLoadTeams:(S,O)=>{S.teamsAreLoading=!0},teamsLoaded:(S,O)=>{S.teams=O.payload.teams,S.teamsAreLoading=!1},initLoadOrgs:(S,O)=>{S.orgsAreLoading=!0},orgsLoaded:(S,O)=>{S.orgs=O.payload.orgs,S.orgsAreLoading=!1},initLoadSessions:(S,O)=>{S.sessionsAreLoading=!0},sessionsLoaded:(S,O)=>{const C=O.payload.sessions.sort((L,U)=>Number(U.isActive)-Number(L.isActive));S.sessions=C.map(L=>({id:L.id,isActive:L.isActive,seenAt:(0,s.fq)(L.seenAt),createdAt:L.createdAt,clientIp:L.clientIp,browser:L.browser,browserVersion:L.browserVersion,os:L.os,osVersion:L.osVersion,device:L.device})),S.sessionsAreLoading=!1},userSessionRevoked:(S,O)=>{S.sessions=S.sessions.filter(C=>C.id!==O.payload.tokenId),S.isUpdating=!1}}}),l=S=>async O=>{(0,n.set)(u.TP,"user.fiscalYearStartMonth",S),O(M({fiscalYearStartMonth:S}))},f=S=>async O=>{(!(0,n.isString)(S)||(0,n.isEmpty)(S))&&(S=g.Ay?.bootData?.user?.timezone),(0,n.set)(u.TP,"user.timezone",S),O(y({timeZone:S}))},c=S=>async O=>{(!(0,n.isString)(S)||(0,n.isEmpty)(S))&&(S=g.Ay?.bootData?.user?.weekStart),(0,n.set)(u.TP,"user.weekStart",S),O(T({weekStart:S})),(0,r.$D)(S)},{setUpdating:h,initLoadOrgs:p,orgsLoaded:m,initLoadTeams:a,teamsLoaded:v,userLoaded:E,userSessionRevoked:D,initLoadSessions:b,sessionsLoaded:P,updateTimeZone:y,updateWeekStart:T,updateFiscalYearStartMonth:M}=i.actions,I=i.reducer,x={user:i.reducer}},32901:(Y,A,e)=>{"use strict";e.d(A,{O:()=>t,q:()=>n});const t=o=>o.timeZone,n=o=>o.fiscalYearStartMonth},64152:(Y,A,e)=>{"use strict";e.d(A,{d:()=>o,m:()=>n});class t{constructor(){this.extraRenderActions=[]}addExtraRenderAction(r){this.extraRenderActions=this.extraRenderActions.concat(r)}getAllExtraRenderAction(){return this.extraRenderActions}}const n=new t,o=new t},65160:(Y,A,e)=>{"use strict";e.d(A,{c:()=>N,E:()=>G});var t=e(46942),n=e.n(t),o=e(2543),s=e(55127),r=e.n(s),g=e(96540),u=e(41987),d=e(76287),i=e(18226),l=e(39070),f=e(14236),c=e(26272),h=e(13544),p=e(19347),m=e(7376),a=e(39938),v=e(66602),E=e(22214),D=e(10343),b=e(7788),P=e(44836),y=e(74856),T=e(84423),M=e(64152),I=e(32196),x=e(40845),S=e(14578),O=e(10354),C=e(72093),L=e(51612);const U=_=>{const{query:K,queries:j,onChange:k,collapsedText:Q,renderExtras:ee,disabled:ae}=_,Z=(0,x.of)(B),[ne,q]=(0,g.useState)(!1),[te,re]=(0,g.useState)(null),de=le=>{q(!0)},ie=le=>{if(q(!1),te){re(null);return}K.refId!==le&&k({...K,refId:le})},ge=le=>{const Me=le.currentTarget.value.trim();if(Me.length===0){re("An empty query name is not allowed");return}for(const De of j)if(De!==K&&Me===De.refId){re("Query name already exists");return}te&&re(null)},ve=le=>{ie(le.currentTarget.value.trim())},ye=le=>{le.key==="Enter"&&ie(le.currentTarget.value)},pe=le=>{le.target.select()};return g.createElement(g.Fragment,null,g.createElement("div",{className:Z.wrapper},!ne&&g.createElement("button",{className:Z.queryNameWrapper,"aria-label":h.Tp.components.QueryEditorRow.title(K.refId),title:"Edit query name",onClick:de,"data-testid":"query-name-div",type:"button"},g.createElement("span",{className:Z.queryName},K.refId),g.createElement(S.I,{name:"pen",className:Z.queryEditIcon,size:"sm"})),ne&&g.createElement(g.Fragment,null,g.createElement(O.p,{type:"text",defaultValue:K.refId,onBlur:ve,autoFocus:!0,onKeyDown:ye,onFocus:pe,invalid:te!==null,onChange:ge,className:Z.queryNameInput,"data-testid":"query-name-input"}),te&&g.createElement(C.P,{horizontal:!0},te)),R(_,Z),ee&&g.createElement("div",{className:Z.itemWrapper},ee()),ae&&g.createElement("em",{className:Z.contextInfo},"Disabled")),Q&&g.createElement("div",{className:Z.collapsedText},Q))},R=(_,K)=>{const{alerting:j,dataSource:k,onChangeDataSource:Q}=_;return Q?g.createElement("div",{className:K.itemWrapper},g.createElement(L.s,{variables:!0,alerting:j,current:k.name,onChange:Q})):g.createElement("em",{className:K.contextInfo},"(",k.name,")")},B=_=>({wrapper:(0,I.css)`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${_.spacing(.5)};
      overflow: hidden;
    `,queryNameWrapper:(0,I.css)`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${_.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${_.spacing(.5)};
      margin: 0;
      background: transparent;
      overflow: hidden;

      &:hover {
        background: ${_.colors.action.hover};
        border: 1px dashed ${_.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${_.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,queryName:(0,I.css)`
      font-weight: ${_.typography.fontWeightMedium};
      color: ${_.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${_.spacing(.5)};
    `,queryEditIcon:(0,I.cx)((0,I.css)`
        margin-left: ${_.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),queryNameInput:(0,I.css)`
      max-width: 300px;
      margin: -4px 0;
    `,collapsedText:(0,I.css)`
      font-weight: ${_.typography.fontWeightRegular};
      font-size: ${_.typography.bodySmall.fontSize};
      color: ${_.colors.text.secondary};
      padding-left: ${_.spacing(1)};
      align-items: center;
      overflow: hidden;
      font-style: italic;
      white-space: nowrap;
      text-overflow: ellipsis;
    `,contextInfo:(0,I.css)`
      font-size: ${_.typography.bodySmall.fontSize};
      font-style: italic;
      color: ${_.colors.text.secondary};
      padding-left: 10px;
      padding-right: 10px;
    `,itemWrapper:(0,I.css)`
      display: flex;
      margin-left: 4px;
    `});function H({error:_}){const K=(0,x.of)(W),j=_?.message??_?.data?.message??"Query error";return g.createElement("div",{className:K.wrapper},g.createElement("div",{className:K.icon},g.createElement(S.I,{name:"exclamation-triangle"})),g.createElement("div",{className:K.message},j,_.traceId!=null&&g.createElement(g.Fragment,null,g.createElement("br",null)," ",g.createElement("span",null,"(Trace ID: ",_.traceId,")"))))}const W=_=>({wrapper:(0,I.css)({marginTop:_.spacing(.5),background:_.colors.background.secondary,display:"flex"}),icon:(0,I.css)({background:_.colors.error.main,color:_.colors.error.contrastText,padding:_.spacing(1)}),message:(0,I.css)({fontSize:_.typography.bodySmall.fontSize,fontFamily:_.typography.fontFamilyMonospace,padding:_.spacing(1)})});class N extends g.PureComponent{constructor(){super(...arguments),this.element=null,this.angularScope=null,this.angularQueryEditor=null,this.dataSourceSrv=(0,p.l)(),this.id="",this.state={datasource:null,hasTextEditMode:!1,data:void 0,isOpen:!0,showingHelp:!1},this.renderAngularQueryEditor=()=>{if(!this.element)return;this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null);const K=(0,m.E)(),j='<plugin-component type="query-ctrl" />',k={ctrl:this.getAngularQueryComponentScope()};this.angularQueryEditor=K.load(this.element,k,j),this.angularScope=k.ctrl},this.onOpen=()=>{this.renderAngularQueryEditor()},this.renderPluginEditor=()=>{const{query:K,onChange:j,queries:k,onRunQuery:Q,onAddQuery:ee,app:ae=u.Jk.PanelEditor,history:Z}=this.props,{datasource:ne,data:q}=this.state;if(this.isWaitingForDatasourceToLoad())return null;if(ne?.components?.QueryCtrl)return g.createElement("div",{ref:te=>this.element=te});if(ne){let te=this.getReactQueryEditor(ne);if(te)return g.createElement(d.p,{instanceSettings:this.props.dataSource},g.createElement(te,{key:ne?.name,query:K,datasource:ne,onChange:j,onRunQuery:Q,onAddQuery:ee,data:q,range:(0,y.jG)().timeRange(),queries:k,app:ae,history:Z}))}return g.createElement("div",null,g.createElement(P.x6,{i18nKey:"query-operation.query-editor-not-exported"},"Data source plugin does not export any Query Editor component"))},this.onToggleEditMode=(K,j)=>{K.stopPropagation(),this.angularScope&&this.angularScope.toggleEditorMode&&(this.angularScope.toggleEditorMode(),this.angularQueryEditor?.digest(),j.isOpen||j.onOpen())},this.onRemoveQuery=()=>{const{onRemoveQuery:K,query:j,onQueryRemoved:k}=this.props;K(j),k&&k()},this.onCopyQuery=()=>{const{query:K,onAddQuery:j,onQueryCopied:k}=this.props,Q=(0,o.cloneDeep)(K);j(Q),k&&k()},this.onDisableQuery=()=>{const{query:K,onChange:j,onRunQuery:k,onQueryToggled:Q}=this.props;j({...K,hide:!K.hide}),k(),Q&&Q(K.hide)},this.onToggleHelp=()=>{this.setState(K=>({showingHelp:!K.showingHelp}))},this.onClickExample=K=>{K.datasource===void 0&&(K.datasource={type:this.props.dataSource.type,uid:this.props.dataSource.uid}),this.props.onChange({...K,refId:this.props.query.refId}),this.onToggleHelp()},this.renderWarnings=()=>{const{data:K,query:j}=this.props,Q=(G(K,j.refId)?.series??[]).reduce((ne,q)=>{if(!q.meta?.notices)return ne;const te=(0,o.filter)(q.meta.notices,{severity:"warning"})??[];return ne.concat(te)},[]),ee=(0,o.uniqBy)(Q,"text");if(!(ee.length>0))return null;const Z=ee.map(ne=>ne.text).join(`
`);return g.createElement(a.E,{color:"orange",icon:"exclamation-triangle",text:g.createElement(g.Fragment,null,ee.length," ",r()("warning",ee.length)),tooltip:Z})},this.renderExtraActions=()=>{const{query:K,queries:j,data:k,onAddQuery:Q,dataSource:ee}=this.props,ae=M.d.getAllExtraRenderAction().map((Z,ne)=>Z({query:K,queries:j,timeRange:k.timeRange,onAddQuery:Q,dataSource:ee,key:ne})).filter(Boolean);return ae.push(this.renderWarnings()),ae},this.renderActions=K=>{const{query:j,hideDisableQuery:k=!1}=this.props,{hasTextEditMode:Q,datasource:ee,showingHelp:ae}=this.state,Z=!!j.hide,ne=ee?.components?.QueryEditorHelp;return g.createElement(g.Fragment,null,ne&&g.createElement(D.A,{title:(0,P.t)("query-operation.header.datasource-help","Show data source help"),icon:"question-circle",onClick:this.onToggleHelp,active:ae}),Q&&g.createElement(D.q,{title:(0,P.t)("query-operation.header.toggle-edit-mode","Toggle text edit mode"),icon:"pen",onClick:q=>{this.onToggleEditMode(q,K)}}),this.renderExtraActions(),g.createElement(D.q,{title:(0,P.t)("query-operation.header.duplicate-query","Duplicate query"),icon:"copy",onClick:this.onCopyQuery}),k?null:g.createElement(D.A,{title:(0,P.t)("query-operation.header.disable-query","Disable query"),icon:Z?"eye-slash":"eye",active:Z,onClick:this.onDisableQuery}),g.createElement(D.q,{title:(0,P.t)("query-operation.header.remove-query","Remove query"),icon:"trash-alt",onClick:this.onRemoveQuery}))},this.renderHeader=K=>{const{alerting:j,query:k,dataSource:Q,onChangeDataSource:ee,onChange:ae,queries:Z,renderHeaderExtras:ne}=this.props;return g.createElement(U,{query:k,queries:Z,onChangeDataSource:ee,dataSource:Q,disabled:k.hide,onClick:q=>this.onToggleEditMode(q,K),onChange:ae,collapsedText:K.isOpen?null:this.renderCollapsedText(),renderExtras:ne,alerting:j})}}componentDidMount(){const{data:K,query:j,id:k}=this.props,Q=G(K,j.refId);this.id=(0,o.uniqueId)(k+"_"),this.setState({data:Q}),this.loadDatasource()}componentWillUnmount(){this.angularQueryEditor&&this.angularQueryEditor.destroy()}getAngularQueryComponentScope(){const{query:K,queries:j}=this.props,{datasource:k}=this.state,Q=new T.a9({targets:j}),ee={},ae=this;return{datasource:k,target:K,panel:Q,dashboard:ee,refresh:()=>{K.hide!==ae.props.query.hide&&(K.hide=ae.props.query.hide),this.props.onChange(K),this.props.onRunQuery()},render:()=>()=>console.log("legacy render function called, it does nothing"),events:this.props.eventBus||new i.o,range:(0,y.jG)().timeRange()}}getInterpolatedDataSourceUID(){if(this.props.query.datasource){const K=this.dataSourceSrv.getInstanceSettings(this.props.query.datasource);return K?.rawRef?.uid??K?.uid}return this.props.dataSource.rawRef?.uid??this.props.dataSource.uid}async loadDatasource(){let K;const j=this.getInterpolatedDataSourceUID();try{K=await this.dataSourceSrv.get(j)}catch{K=await this.dataSourceSrv.get()}typeof this.props.onDataSourceLoaded=="function"&&this.props.onDataSourceLoaded(K),this.setState({datasource:K,queriedDataSourceIdentifier:j,hasTextEditMode:(0,o.has)(K,"components.QueryCtrl.prototype.toggleEditorMode")})}componentDidUpdate(K){const{datasource:j,queriedDataSourceIdentifier:k}=this.state,{data:Q,query:ee}=this.props;if(K.id!==this.props.id&&(this.id=(0,o.uniqueId)(this.props.id+"_")),Q!==K.data){const ae=G(Q,ee.refId);this.setState({data:ae}),this.angularScope&&(this.angularScope.range=(0,y.jG)().timeRange()),this.angularQueryEditor&&ae&&V(this.angularScope,ae,this.angularQueryEditor)}if(j&&k!==this.getInterpolatedDataSourceUID()){this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null),this.loadDatasource();return}!this.element||this.angularQueryEditor||this.renderAngularQueryEditor()}getReactQueryEditor(K){if(K)switch(this.props.app){case u.Jk.Explore:return K.components?.ExploreMetricsQueryField||K.components?.ExploreLogsQueryField||K.components?.ExploreQueryField||K.components?.QueryEditor;case u.Jk.PanelEditor:case u.Jk.Dashboard:default:return K.components?.QueryEditor}}isWaitingForDatasourceToLoad(){return this.getInterpolatedDataSourceUID()!==this.state.queriedDataSourceIdentifier}renderCollapsedText(){const{datasource:K}=this.state;return K?.getQueryDisplayText?K.getQueryDisplayText(this.props.query):this.angularScope&&this.angularScope.getCollapsedText?this.angularScope.getCollapsedText():null}render(){const{query:K,index:j,visualization:k,collapsable:Q}=this.props,{datasource:ee,showingHelp:ae,data:Z}=this.state,ne=K.hide,q=Z?.error&&Z.error.refId===K.refId?Z.error:Z?.errors?.find(ie=>ie.refId===K.refId),te=n()("query-editor-row",{"query-editor-row--disabled":ne,"gf-form-disabled":ne});if(!ee)return null;const re=this.renderPluginEditor(),de=ee.components?.QueryEditorHelp;return g.createElement("div",{"data-testid":"query-editor-row","aria-label":h.Tp.components.QueryEditorRows.rows},g.createElement(b.u,{id:this.id,draggable:!0,collapsable:Q,index:j,headerElement:this.renderHeader,actions:this.renderActions,onOpen:this.onOpen},g.createElement("div",{className:te,id:this.id},g.createElement(v.Xw,null,ae&&de&&g.createElement(E.j,null,g.createElement(de,{onClickExample:ie=>this.onClickExample(ie),query:this.props.query,datasource:ee})),re),q&&g.createElement(H,{error:q}),k)))}}function V(_,K,j){if(K.state===l.Gu.Done){const k=K.series.map(Q=>(0,f.w3)(Q));_.events.emit(c.ee.dataReceived,k)}else K.state===l.Gu.Error&&_.events.emit(c.ee.dataError,K.error);setTimeout(j.digest)}function G(_,K){const j=_.series.filter(ae=>ae.refId===K);if(_.state!==l.Gu.Loading&&(_.error||_.errors?.length)&&!_.series.length)return{..._,state:l.Gu.Error};let k=_.state,Q=_.errors?.find(ae=>ae.refId===K);!Q&&_.error&&(Q=_.error.refId===K?_.error:void 0),k!==l.Gu.Loading&&(Q?k=l.Gu.Error:_.state===l.Gu.Error&&(k=l.Gu.Done));const ee=_.timeRange;return{..._,state:k,series:j,error:Q,errors:Q?[Q]:void 0,timeRange:ee}}},44932:(Y,A,e)=>{"use strict";e.d(A,{L:()=>g});var t=e(96540),n=e(75494),o=e(14110),s=e(19347),r=e(65160);class g extends t.PureComponent{constructor(){super(...arguments),this.onRemoveQuery=i=>{this.props.onQueriesChange(this.props.queries.filter(l=>l!==i))},this.onDragStart=i=>{const{queries:l,dsSettings:f}=this.props;(0,o.rR)("query_row_reorder_started",{startIndex:i.source.index,numberOfQueries:l.length,datasourceType:f.type})},this.onDragEnd=i=>{const{queries:l,onQueriesChange:f,dsSettings:c}=this.props;if(!i||!i.destination)return;const h=i.source.index,p=i.destination.index;if(h===p){(0,o.rR)("query_row_reorder_canceled",{startIndex:h,endIndex:p,numberOfQueries:l.length,datasourceType:c.type});return}const m=Array.from(l),[a]=m.splice(h,1);m.splice(p,0,a),f(m),(0,o.rR)("query_row_reorder_ended",{startIndex:h,endIndex:p,numberOfQueries:l.length,datasourceType:c.type})}}onChangeQuery(i,l){const{queries:f,onQueriesChange:c}=this.props;c(f.map((h,p)=>p===l?i:h))}onDataSourceChange(i,l){const{queries:f,onQueriesChange:c}=this.props;c(f.map((h,p)=>{if(p!==l)return h;const m={type:i.type,uid:i.uid};return h.datasource&&(0,s.l)().getInstanceSettings(h.datasource)?.type===i.type?{...h,datasource:m}:{refId:h.refId,hide:h.hide,datasource:m}}))}render(){const{dsSettings:i,data:l,queries:f,app:c,history:h,eventBus:p,onAddQuery:m,onRunQueries:a,onQueryCopied:v,onQueryRemoved:E,onQueryToggled:D}=this.props;return t.createElement(n.JY,{onDragStart:this.onDragStart,onDragEnd:this.onDragEnd},t.createElement(n.gL,{droppableId:"transformations-list",direction:"vertical"},b=>t.createElement("div",{"data-testid":"query-editor-rows",ref:b.innerRef,...b.droppableProps},f.map((P,y)=>{const T=u(P,i),M=i.meta.mixed?I=>this.onDataSourceChange(I,y):void 0;return t.createElement(r.c,{id:P.refId,index:y,key:P.refId,data:l,query:P,dataSource:T,onChangeDataSource:M,onChange:I=>this.onChangeQuery(I,y),onRemoveQuery:this.onRemoveQuery,onAddQuery:m,onRunQuery:a,onQueryCopied:v,onQueryRemoved:E,onQueryToggled:D,queries:f,app:c,history:h,eventBus:p})}),b.placeholder)))}}const u=(d,i)=>d.datasource&&(0,s.l)().getInstanceSettings(d.datasource)||i},37464:(Y,A,e)=>{"use strict";e.d(A,{g:()=>j,K:()=>Q});var t=e(32196),n=e(96540),o=e(39070),s=e(43127),r=e(41987),g=e(43429),u=e(13544),d=e(19347),i=e(12131),l=e(66864),f=e(55852),c=e(40276),h=e(37390),p=e(3911),m=e(38894),a=e(16817),v=e(36663),E=e(17172),D=e(39558);function b({pluginId:ae}){const{value:Z,loading:ne,error:q}=(0,a.A)(async()=>(0,E.AI)().get(`/api/plugins/${ae}/markdown/query_help`),[]),te=(0,v.G)(Z);return ne?n.createElement(D._,{text:"Loading help..."}):q?n.createElement("h3",null,"An error occurred when loading help."):Z===""?n.createElement("h3",null,"No query help could be found."):n.createElement("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:te}})}var P=e(2913),y=e(27677),T=e(21969),M=e(50481),I=e(51612),x=e(53478),S=e(74106),O=e(14348),C=e(8480),L=e(93117),U=e(64152),R=e(44932),B=e(65879),H=e(10354),W=e(15292),N=e(7788);class V extends n.PureComponent{constructor(Z){super(Z),this.onRelativeTimeChange=q=>{this.setState({timeRangeFrom:q.target.value})},this.onTimeShiftChange=q=>{this.setState({timeRangeShift:q.target.value})},this.onOverrideTime=q=>{const{options:te,onChange:re}=this.props,de=_(q.target.value),ie=G(de);ie&&te.timeRange?.from!==de&&re({...te,timeRange:{...te.timeRange??{},from:de}}),this.setState({relativeTimeIsValid:ie})},this.onTimeShift=q=>{const{options:te,onChange:re}=this.props,de=_(q.target.value),ie=G(de);ie&&te.timeRange?.shift!==de&&re({...te,timeRange:{...te.timeRange??{},shift:de}}),this.setState({timeShiftIsValid:ie})},this.onToggleTimeOverride=()=>{const{onChange:q,options:te}=this.props;this.setState({timeRangeHide:!this.state.timeRangeHide},()=>{q({...te,timeRange:{...te.timeRange??{},hide:this.state.timeRangeHide}})})},this.onCacheTimeoutBlur=q=>{const{options:te,onChange:re}=this.props;re({...te,cacheTimeout:_(q.target.value)})},this.onQueryCachingTTLBlur=q=>{const{options:te,onChange:re}=this.props;let de=parseInt(q.target.value,10);(isNaN(de)||de===0)&&(de=null),re({...te,queryCachingTTL:de})},this.onMaxDataPointsBlur=q=>{const{options:te,onChange:re}=this.props;let de=parseInt(q.currentTarget.value,10);(isNaN(de)||de===0)&&(de=null),de!==te.maxDataPoints&&re({...te,maxDataPoints:de})},this.onMinIntervalBlur=q=>{const{options:te,onChange:re}=this.props,de=_(q.target.value);de!==te.minInterval&&re({...te,minInterval:de})},this.onOpenOptions=()=>{this.setState({isOpen:!0})},this.onCloseOptions=()=>{this.setState({isOpen:!1})};const{options:ne}=Z;this.state={timeRangeFrom:ne.timeRange?.from||"",timeRangeShift:ne.timeRange?.shift||"",timeRangeHide:ne.timeRange?.hide??!1,isOpen:!1,relativeTimeIsValid:!0,timeShiftIsValid:!0}}renderCacheTimeoutOption(){const{dataSource:Z,options:ne}=this.props,q=`If your time series store has a query cache this option can override the default cache timeout. Specify a
    numeric value in seconds.`;return Z.meta.queryOptions?.cacheTimeout?n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(m.I,{width:9,tooltip:q},"Cache timeout"),n.createElement(H.p,{type:"text",className:"width-6",placeholder:"60",spellCheck:!1,onBlur:this.onCacheTimeoutBlur,defaultValue:ne.cacheTimeout??""}))):null}renderQueryCachingTTLOption(){const{dataSource:Z,options:ne}=this.props,q="Cache time-to-live: How long results from this queries in this panel will be cached, in milliseconds. Defaults to the TTL in the caching configuration for this datasource.";return Z.cachingConfig?.enabled?n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(m.I,{width:9,tooltip:q},"Cache TTL"),n.createElement(H.p,{type:"number",className:"width-6",placeholder:`${Z.cachingConfig.TTLMs}`,spellCheck:!1,onBlur:this.onQueryCachingTTLBlur,defaultValue:ne.queryCachingTTL??void 0}))):null}renderMaxDataPointsOption(){const{data:Z,options:ne}=this.props,q=Z.request?.maxDataPoints,te=ne.maxDataPoints??"",re=te==="";return n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(m.I,{width:9,tooltip:n.createElement(n.Fragment,null,"The maximum data points per series. Used directly by some data sources and used in calculation of auto interval. With streaming data this value is used for the rolling buffer.")},"Max data points"),n.createElement(H.p,{type:"number",className:"width-6",placeholder:`${q}`,spellCheck:!1,onBlur:this.onMaxDataPointsBlur,defaultValue:te}),re&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-label query-segment-operator"},"="),n.createElement("div",{className:"gf-form-label"},"Width of panel"))))}renderIntervalOption(){const{data:Z,dataSource:ne,options:q}=this.props,te=Z.request?.interval,re=ne.interval??"No limit";return n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(m.I,{width:9,tooltip:n.createElement(n.Fragment,null,"A lower limit for the interval. Recommended to be set to write frequency, for example ",n.createElement("code",null,"1m")," ","if your data is written every minute. Default value can be set in data source settings for most data sources.")},"Min interval"),n.createElement(H.p,{type:"text",className:"width-6",placeholder:`${re}`,spellCheck:!1,onBlur:this.onMinIntervalBlur,defaultValue:q.minInterval??""}))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(m.I,{width:9,tooltip:n.createElement(n.Fragment,null,"The evaluated interval that is sent to data source and is used in ",n.createElement("code",null,"$__interval")," and"," ",n.createElement("code",null,"$__interval_ms"),". This value is not exactly equal to"," ",n.createElement("code",null,"Time range / max data points"),", it will approximate a series of magic number.")},"Interval"),n.createElement(m.I,{width:6},te),n.createElement("div",{className:"gf-form-label query-segment-operator"},"="),n.createElement("div",{className:"gf-form-label"},"Time range / max data points"))))}renderCollapsedText(Z){const{data:ne,options:q}=this.props,{isOpen:te}=this.state;if(te)return;let re=q.maxDataPoints??"";re===""&&ne.request&&(re=`auto = ${ne.request.maxDataPoints}`);let de=q.minInterval;return ne.request&&(de=`${ne.request.interval}`),n.createElement(n.Fragment,null,n.createElement("div",{className:Z.collapsedText},"MD = ",re),n.createElement("div",{className:Z.collapsedText},"Interval = ",de))}render(){const{timeRangeHide:Z,relativeTimeIsValid:ne,timeShiftIsValid:q}=this.state,{timeRangeFrom:te,timeRangeShift:re,isOpen:de}=this.state,ie=K();return n.createElement(N.u,{id:"Query options",index:0,title:"Query options",headerElement:this.renderCollapsedText(ie),isOpen:de,onOpen:this.onOpenOptions,onClose:this.onCloseOptions},this.renderMaxDataPointsOption(),this.renderIntervalOption(),this.renderCacheTimeoutOption(),this.renderQueryCachingTTLOption(),n.createElement("div",{className:"gf-form"},n.createElement(m.I,{width:9,tooltip:n.createElement(n.Fragment,null,"Overrides the relative time range for individual panels, which causes them to be different than what is selected in the dashboard time picker in the top-right corner of the dashboard. For example to configure the Last 5 minutes the Relative time should be ",n.createElement("code",null,"now-5m")," and ",n.createElement("code",null,"5m"),", or variables like ",n.createElement("code",null,"$_relativeTime"),".")},"Relative time"),n.createElement(H.p,{type:"text",className:"width-6",placeholder:"1h",onChange:this.onRelativeTimeChange,onBlur:this.onOverrideTime,invalid:!ne,value:te})),n.createElement("div",{className:"gf-form"},n.createElement(m.I,{width:9,tooltip:n.createElement(n.Fragment,null,"Overrides the time range for individual panels by shifting its start and end relative to the time picker. For example to configure the Last 1h the Time shift should be ",n.createElement("code",null,"now-1h")," and"," ",n.createElement("code",null,"1h"),", or variables like ",n.createElement("code",null,"$_timeShift"),".")},"Time shift"),n.createElement(H.p,{type:"text",className:"width-6",placeholder:"1h",onChange:this.onTimeShiftChange,onBlur:this.onTimeShift,invalid:!q,value:re})),(re||te)&&n.createElement("div",{className:"gf-form-inline align-items-center"},n.createElement(m.I,{width:9},"Hide time info"),n.createElement(W.d,{value:Z,onChange:this.onToggleTimeOverride})))}}const G=ae=>ae?B.isValidTimeSpan(ae):!0,_=ae=>ae===""?null:ae,K=(0,p.N)(()=>{const{theme:ae}=P.$W;return{collapsedText:(0,t.css)`
      margin-left: ${ae.spacing.md};
      font-size: ${ae.typography.size.sm};
      color: ${ae.colors.textWeak};
    `}});class j extends n.PureComponent{constructor(){super(...arguments),this.backendSrv=y.IB,this.dataSourceSrv=(0,d.l)(),this.querySubscription=null,this.state={isDataSourceModalOpen:!!i.Ny.getSearchObject().firstPanel,isLoadingHelp:!1,helpContent:null,isPickerOpen:!1,isHelpOpen:!1,queries:[],data:{state:o.Gu.NotStarted,series:[],timeRange:(0,s.E2)()}},this.onChangeDataSource=async(Z,ne)=>{const{dsSettings:q}=this.state,te=q?await(0,d.l)().get(q.uid):void 0,re=await(0,d.l)().get(Z.uid),de=ne||await(0,L.y)(re,Z.uid,this.state.queries,te),ie=await this.dataSourceSrv.get(Z.name);this.onChange({queries:de,dataSource:{name:Z.name,uid:Z.uid,type:Z.meta.id,default:Z.isDefault}}),this.setState({queries:de,dataSource:ie,dsSettings:Z}),ne&&this.props.onRunQueries()},this.onAddQueryClick=()=>{const{queries:Z}=this.state;this.onQueriesChange((0,T.U7)(Z,this.newQuery())),this.onScrollBottom()},this.onAddExpressionClick=()=>{this.onQueriesChange((0,T.U7)(this.state.queries,x.Ex.newQuery())),this.onScrollBottom()},this.onScrollBottom=()=>{setTimeout(()=>{this.state.scrollElement&&this.state.scrollElement.scrollTo({top:1e4})},20)},this.onUpdateAndRun=Z=>{this.props.onOptionsChange(Z),this.props.onRunQueries()},this.onOpenHelp=()=>{this.setState({isHelpOpen:!0})},this.onCloseHelp=()=>{this.setState({isHelpOpen:!1})},this.onCloseDataSourceModal=()=>{this.setState({isDataSourceModalOpen:!1})},this.onAddQuery=Z=>{const{dsSettings:ne,queries:q}=this.state;this.onQueriesChange((0,T.U7)(q,Z,{type:ne?.type,uid:ne?.uid})),this.onScrollBottom()},this.onQueriesChange=Z=>{this.onChange({queries:Z}),this.setState({queries:Z})},this.setScrollRef=Z=>{this.setState({scrollElement:Z})}}async componentDidMount(){const{options:Z,queryRunner:ne}=this.props;this.querySubscription=ne.getData({withTransforms:!1,withFieldConfig:!1}).subscribe({next:q=>this.onPanelDataUpdate(q)}),this.setNewQueriesAndDatasource(Z)}componentWillUnmount(){this.querySubscription&&(this.querySubscription.unsubscribe(),this.querySubscription=null)}async componentDidUpdate(){const{options:Z}=this.props,ne=await(0,d.l)().get(Z.dataSource);this.state.dataSource&&ne.uid!==this.state.dataSource?.uid&&this.setNewQueriesAndDatasource(Z)}async setNewQueriesAndDatasource(Z){try{const ne=await this.dataSourceSrv.get(Z.dataSource),q=this.dataSourceSrv.getInstanceSettings(Z.dataSource),te=await this.dataSourceSrv.get(),re=ne.getRef(),de=Z.queries.map(ie=>({...(0,T.Ih)(ie)&&ne?.getDefaultQuery?.(r.Jk.PanelEditor),datasource:re,...ie}));this.setState({queries:de,dataSource:ne,dsSettings:q,defaultDataSource:te})}catch(ne){console.error("failed to load data source",ne)}}onPanelDataUpdate(Z){this.setState({data:Z})}newQuery(){const{dsSettings:Z,defaultDataSource:ne}=this.state,q=Z?.meta.mixed?ne:Z;return{...this.state.dataSource?.getDefaultQuery?.(r.Jk.PanelEditor),datasource:{uid:q?.uid,type:q?.type}}}onChange(Z){this.props.onOptionsChange({...this.props.options,...Z})}renderTopSection(Z){const{onOpenQueryInspector:ne,options:q}=this.props,{dataSource:te,data:re,dsSettings:de}=this.state;return!de||!te?null:n.createElement(Q,{data:re,dataSource:te,options:q,dsSettings:de,onOptionsChange:this.onUpdateAndRun,onDataSourceChange:this.onChangeDataSource,onOpenQueryInspector:ne})}renderQueries(Z){const{onRunQueries:ne}=this.props,{data:q,queries:te}=this.state;return n.createElement("div",{"aria-label":u.Tp.components.QueryTab.content},n.createElement(R.L,{queries:te,dsSettings:Z,onQueriesChange:this.onQueriesChange,onAddQuery:this.onAddQuery,onRunQueries:ne,data:q}))}isExpressionsSupported(Z){return(Z.meta.alerting||Z.meta.mixed)===!0}renderExtraActions(){return U.m.getAllExtraRenderAction().map((Z,ne)=>Z({onAddQuery:this.onAddQuery,onChangeDataSource:this.onChangeDataSource,key:ne})).filter(Boolean)}renderAddQueryRow(Z,ne){const q=!(0,O.kN)(Z.name);return n.createElement(l.Gy,{spacing:"md",align:"flex-start"},q&&n.createElement(f.$n,{icon:"plus",onClick:this.onAddQueryClick,variant:"secondary","data-testid":u.Tp.components.QueryTab.addQuery},"Add query"),P.Ay.expressionsEnabled&&this.isExpressionsSupported(Z)&&n.createElement(f.$n,{icon:"plus",onClick:this.onAddExpressionClick,variant:"secondary",className:ne.expressionButton,"data-testid":"query-tab-add-expression"},n.createElement("span",null,"Expression\xA0")),this.renderExtraActions())}render(){const{isHelpOpen:Z,dsSettings:ne}=this.state,q=k();return n.createElement(c.E,{autoHeightMin:"100%",scrollRefCallback:this.setScrollRef},n.createElement("div",{className:q.innerWrapper},this.renderTopSection(q),ne&&n.createElement(n.Fragment,null,n.createElement("div",{className:q.queriesWrapper},this.renderQueries(ne)),this.renderAddQueryRow(ne,q),Z&&n.createElement(h.a,{title:"Data source help",isOpen:!0,onDismiss:this.onCloseHelp},n.createElement(b,{pluginId:ne.meta.id})))))}}const k=(0,p.N)(()=>{const{theme:ae}=P.Ay;return{innerWrapper:(0,t.css)`
      display: flex;
      flex-direction: column;
      padding: ${ae.spacing.md};
    `,dataSourceRow:(0,t.css)`
      display: flex;
      margin-bottom: ${ae.spacing.md};
    `,dataSourceRowItem:(0,t.css)`
      margin-right: ${ae.spacing.inlineFormMargin};
    `,dataSourceRowItemOptions:(0,t.css)`
      flex-grow: 1;
      margin-right: ${ae.spacing.inlineFormMargin};
    `,queriesWrapper:(0,t.css)`
      padding-bottom: 16px;
    `,expressionWrapper:(0,t.css)``,expressionButton:(0,t.css)`
      margin-right: ${ae.spacing.sm};
    `}});function Q({dataSource:ae,options:Z,data:ne,dsSettings:q,onDataSourceChange:te,onOptionsChange:re,onOpenQueryInspector:de}){const ie=k(),[ge,ve]=(0,n.useState)(!1);return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement("div",{className:ie.dataSourceRow},n.createElement(m.I,{htmlFor:"data-source-picker",width:"auto"},"Data source"),n.createElement("div",{className:ie.dataSourceRowItem},n.createElement(ee,{options:Z,onChange:async(ye,pe)=>await te?.(ye,pe),isDataSourceModalOpen:!!i.Ny.getSearchObject().firstPanel})),ae&&n.createElement(n.Fragment,null,n.createElement("div",{className:ie.dataSourceRowItem},n.createElement(f.$n,{variant:"secondary",icon:"question-circle",title:"Open data source help",onClick:()=>ve(!0),"data-testid":"query-tab-help-button"})),n.createElement("div",{className:ie.dataSourceRowItemOptions},n.createElement(V,{options:Z,dataSource:ae,data:ne,onChange:ye=>{re?.(ye)}})),de&&n.createElement("div",{className:ie.dataSourceRowItem},n.createElement(f.$n,{variant:"secondary",onClick:de,"aria-label":u.Tp.components.QueryTab.queryInspectorButton},"Query inspector")))),ae&&(0,C.H)(ae.uid)&&n.createElement(S.c,{pluginId:ae.type,pluginType:g.QE.datasource,angularSupportEnabled:P.Ay?.angularSupportEnabled,showPluginDetailsLink:!0,interactionElementId:"datasource-query"})),ge&&n.createElement(h.a,{title:"Data source help",isOpen:!0,onDismiss:()=>ve(!1)},n.createElement(b,{pluginId:q.meta.id})))}function ee({options:ae,onChange:Z,...ne}){const[q,te]=(0,n.useState)(!!ne.isDataSourceModalOpen);(0,n.useEffect)(()=>{i.Ny.getSearchObject().firstPanel&&i.Ny.partial({firstPanel:null},!0)},[]);const re={metrics:!0,mixed:!0,dashboard:!0,variables:!0,current:ae.dataSource,uploadFile:!0,onChange:async(de,ie)=>{await Z(de,ie),te(!1)}};return n.createElement(n.Fragment,null,q&&n.createElement(M.p,{...re,onDismiss:()=>te(!1)}),n.createElement(I.s,{...re}))}},37168:(Y,A,e)=>{"use strict";e.d(A,{nm:()=>re,Dh:()=>ne});var t=e(39741),n=e(13752),o=e(64423),s=e(44240),r=e(39697),g=e(81160),u=e(67791),d=e(93031),i=e(71030),l=e(69850),f=e(1005),c=e(65961),h=e(3591),p=e(2913),m=e(2543);function a(de){let ie=[];const ge=(0,m.partition)(de,"id"),ve=(0,m.groupBy)(ge[0],"id");return ie=(0,m.map)(ve,ye=>ye.length>1&&!(0,m.every)(ye,v)?(0,m.find)(ye,pe=>pe.eventType!=="panel-alert"):(0,m.head)(ye)),ie=(0,m.concat)(ie,ge[1]),ie}function v(de){return de.eventType==="panel-alert"}var E=e(74856),D=e(65474),b=e(66847),P=e(17172),y=e(7436);class T{canWork({dashboard:ie,range:ge}){return!(!ie.id||ge.raw.to!=="now"||!ie.panels.find(ve=>!!ve.alert))}work(ie){if(!this.canWork(ie))return(0,y.$)();const{dashboard:ge}=ie;return(0,D.H)((0,P.AI)().get("/api/alerts/states-for-dashboard",{dashboardId:ge.id},`dashboard-query-runner-alert-states-${ge.id}`)).pipe((0,g.T)(ve=>({alertStates:ve,annotations:[]})),(0,b.W)(y.Zr))}}var M=e(62467),I=e(69862),x=e(16126),S=e(32264),O=e(19347),C=e(90569),L=e(28444),U=e(27302);class R{canRun(ie){return ie?!!(!ie.annotationQuery||ie.annotations):!1}run({annotation:ie,datasource:ge,dashboard:ve,range:ye}){if(!this.canRun(ge))return(0,M.of)([]);const pe={};return(0,U.b)({dashboard:ve,range:ye,panel:pe},ge,ie).pipe((0,g.T)(le=>le.events??[]),(0,b.W)(y.SD))}}var B=e(42493);class H{canRun(ie){return ie?(0,B.E7)(ie)?!0:!!(ie.annotationQuery&&!ie.annotations):!1}run({annotation:ie,datasource:ge,dashboard:ve,range:ye}){return this.canRun(ge)?(0,D.H)(ge.annotationQuery({range:ye,rangeRaw:ye.raw,annotation:ie,dashboard:ve})).pipe((0,b.W)(y.SD)):(0,M.of)([])}}class W{constructor(ie=[new H,new R]){this.runners=ie}canWork({dashboard:ie}){return!!ie.annotations.list.find(W.getAnnotationsToProcessFilter)}work(ie){if(!this.canWork(ie))return(0,y.$)();const{dashboard:ge,range:ve}=ie;let ye=ge.annotations.list.filter(W.getAnnotationsToProcessFilter);S.$.publicDashboardAccessToken&&ye.length>0&&(ye=[ye[0]]);const pe=ye.map(le=>{let Me;if(S.$.publicDashboardAccessToken){const De=new C.X;Me=(0,M.of)(De).pipe((0,b.W)(y.H0))}else Me=(0,D.H)((0,O.l)().get(le.datasource)).pipe((0,b.W)(y.H0));return Me.pipe((0,I.Z)(De=>{const Re=this.runners.find(me=>me.canRun(De));return Re?(ge.events.publish(new L.xc(le)),Re.run({annotation:le,datasource:De,dashboard:ge,range:ve}).pipe((0,u.Q)(ne().cancellations().pipe((0,x.p)(me=>me===le))),(0,g.T)(me=>(ge.snapshot&&(le.snapshotData=(0,m.cloneDeep)(me)),S.$.publicDashboardAccessToken?me:(0,y.G9)(le,me))),(0,l.j)(()=>{ge.events.publish(new L.yj(le))}))):(0,M.of)([])}))});return(0,s.h)(pe).pipe((0,d.U)(),(0,i.T)((le,Me)=>le.concat(Me)),(0,g.T)(le=>({annotations:le,alertStates:[]})))}static getAnnotationsToProcessFilter(ie){return ie.enable&&!ie.snapshotData}}var N=e(85595),V=e(43585),G=e(16233),_=e(55740),K=e(23662),j=e(91309),k=e(80348);class Q{constructor(){this.hasAlertRules={}}canWork({dashboard:ie,range:ge}){return!(!ie.uid||S.$.publicDashboardAccessToken||ge.raw.to!=="now"||this.hasAlertRules[ie.uid]===!1||!(G.TP.hasPermission(k.AccessControlAction.AlertingRuleRead)&&G.TP.hasPermission(k.AccessControlAction.AlertingRuleExternalRead)))}work(ie){if(!this.canWork(ie))return(0,y.$)();const{dashboard:ge}=ie;return(0,D.H)((0,P.AI)().get("/api/prometheus/grafana/api/v1/rules",{dashboard_uid:ge.uid},`dashboard-query-runner-unified-alert-states-${ge.id}`)).pipe((0,g.T)(ve=>{if(ve.status==="success"){this.hasAlertRules[ge.uid]=!1;const ye={};return ve.data.groups.forEach(pe=>pe.rules.forEach(le=>{if((0,K.Z8)(le)&&le.annotations&&le.annotations[_.YH.panelID]){this.hasAlertRules[ge.uid]=!0;const Me=Number(le.annotations[_.YH.panelID]),De=(0,j.S)(le.state);ye[Me]?De===V.O.Alerting&&ye[Me].state!==V.O.Alerting?ye[Me].state=V.O.Alerting:De===V.O.Pending&&ye[Me].state!==V.O.Alerting&&ye[Me].state!==V.O.Pending&&(ye[Me].state=V.O.Pending):ye[Me]={state:De,id:Object.keys(ye).length,panelId:Me,dashboardId:ge.id}}})),{alertStates:Object.values(ye),annotations:[]}}throw new Error("Unexpected alert rules response.")}),(0,b.W)(y.Zr))}}class ee{constructor(ie,ge=(0,E.jG)(),ve=[p.$W.unifiedAlertingEnabled?new Q:new T,new N.F,new W]){this.dashboard=ie,this.timeSrv=ge,this.workers=ve,this.run=this.run.bind(this),this.getResult=this.getResult.bind(this),this.cancel=this.cancel.bind(this),this.destroy=this.destroy.bind(this),this.executeRun=this.executeRun.bind(this),this.results=new t.m(1),this.runs=new n.B,this.cancellationStream=new n.B,this.runsSubscription=this.runs.subscribe(ye=>this.executeRun(ye)),this.eventsSubscription=ie.events.subscribe(h._,ye=>{this.run({dashboard:this.dashboard,range:this.timeSrv.timeRange()})})}run(ie){this.runs.next(ie)}getResult(ie){return this.results.asObservable().pipe((0,g.T)(ge=>{const ve=(0,y.FK)(ge.annotations,ie),ye=ge.alertStates.find(pe=>!!ie&&pe.panelId===ie);return{annotations:a(ve),alertState:ye}}))}executeRun(ie){const ve=this.workers.filter(De=>De.canWork(ie)).map(De=>De.work(ie)),ye=new o.yU,pe=(0,s.h)(ve).pipe((0,u.Q)(this.runs.asObservable()),(0,d.U)(),(0,i.T)((De,Re)=>(De.annotations=De.annotations.concat(Re.annotations),De.alertStates=De.alertStates.concat(Re.alertStates),De)),(0,l.j)(()=>{ye.unsubscribe()}),(0,f.u)()),le=new o.yU,Me=(0,r.O)(200).pipe((0,c.u)({annotations:[],alertStates:[]}),(0,u.Q)(pe),(0,l.j)(()=>{le.unsubscribe()}));le.add(Me.subscribe(De=>{this.results.next(De)})),ye.add(pe.subscribe(De=>{this.results.next(De)}))}cancel(ie){this.cancellationStream.next(ie)}cancellations(){return this.cancellationStream.asObservable().pipe((0,f.u)())}destroy(){this.results.complete(),this.runs.complete(),this.cancellationStream.complete(),this.runsSubscription.unsubscribe(),this.eventsSubscription.unsubscribe()}}let ae;function Z(de){ae&&ae.destroy(),ae=de}function ne(){if(!ae)throw new Error("getDashboardQueryRunner can only be used after Grafana instance has started.");return ae}let q;function te(de){q=de}function re(de){q||(q=({dashboard:ge,timeSrv:ve,workers:ye})=>new ee(ge,ve,ye));const ie=q(de);return Z(ie),ie}},90569:(Y,A,e)=>{"use strict";e.d(A,{X:()=>l});var t=e(62467),n=e(65474),o=e(40187),s=e(14236),r=e(17172),g=e(32264),u=e(57220),d=e(68706);const i="-- Public --";class l extends o.mA{constructor(){let c={};super({name:"public-ds",id:0,type:"public-ds",meta:c,uid:i,jsonData:{},access:"proxy",readOnly:!0}),this.annotations={prepareQuery(h){return{...h,queryType:d.nj.Annotations,refId:"anno"}}}}query(c){return c.targets.length?c.targets[0]?.datasource?.uid===u.vv?(0,n.H)(this.getAnnotations(c)):(0,t.of)({data:[]}):(0,t.of)({data:[]})}async getAnnotations(c){const{range:{to:h,from:p}}=c,m={from:p.valueOf(),to:h.valueOf()},a=await(0,r.AI)().get(`/api/public/dashboards/${g.$.publicDashboardAccessToken}/annotations`,m);return{data:[(0,s.Vc)(a)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}},85595:(Y,A,e)=>{"use strict";e.d(A,{F:()=>o});var t=e(62467),n=e(7436);class o{canWork({dashboard:r}){return r?.annotations?.list?.some(g=>g.enable&&!!g.snapshotData)}work(r){if(!this.canWork(r))return(0,n.$)();const g=this.getAnnotationsFromSnapshot(r.dashboard);return(0,t.of)({annotations:g,alertStates:[]})}getAnnotationsFromSnapshot(r){return(r?.annotations?.list?.filter(i=>i.enable)).filter(i=>!!i.snapshotData).reduce((i,l)=>i.concat((0,n.G9)(l,l.snapshotData)),[])}getAnnotationsInSnapshot(r,g){const u=this.getAnnotationsFromSnapshot(r);return(0,n.FK)(u,g)}}},7436:(Y,A,e)=>{"use strict";e.d(A,{$:()=>c,FK:()=>m,G9:()=>a,H:()=>v,H0:()=>f,SD:()=>l,Zr:()=>h});var t=e(2543),n=e.n(t),o=e(62467),s=e(78368),r=e(12091),g=e(32264),u=e(99140),d=e(3169),i=e(16001);function l(E){return E.cancelled?(0,o.of)([]):(p("AnnotationQueryRunner failed",E),(0,o.of)([]))}function f(E){return p("Failed to retrieve datasource",E),(0,o.of)(void 0)}const c=()=>(0,o.of)({annotations:[],alertStates:[]});function h(E){return E.cancelled||p("DashboardQueryRunner failed",E),c()}function p(E,D){const b=(0,r.u)(D);console.error("handleAnnotationQueryRunnerError",b);const P=(0,d.gi)(E,b.message);(0,u.JD)((0,i.dx)(P))}function m(E,D){return D==null?E:E.filter(b=>{let P;if(P=b.source,!P)return!0;if(P.filter){const y=(P.filter.ids??[]).includes(D);if(P.filter.exclude){if(y)return!1}else if(!y)return!1}return b.panelId&&b.source.type==="dashboard"?b.panelId===D:!0})}function a(E,D){E.snapshotData&&(E=(0,t.cloneDeep)(E),delete E.snapshotData);for(const b of D)switch(b.source=E,b.color=g.$.theme2.visualization.getColorByName(E.iconColor),b.type=E.name,b.isRegion=!!(b.timeEnd&&b.time!==b.timeEnd),b.newState?.toLowerCase()){case"pending":b.color="yellow";break;case"alerting":b.color="red";break;case"ok":b.color="green";break;case"normal":b.color="green";break;case"no_data":b.color="gray";break;case"nodata":b.color="gray";break}return D}function v(E){if(!E||!E.length)return[];const D=[];for(const b of E){const P=new s.R(b);for(let y=0;y<b.length;y++){const T=(0,t.cloneDeep)(P.get(y));D.push(T)}}return D}},80924:(Y,A,e)=>{"use strict";e.d(A,{Z:()=>L,S:()=>C});var t=e(2543),n=e(39741),o=e(62467),s=e(69862),r=e(81160),g=e(66847),u=e(39070),d=e(14236),i=e(43127),l=e(90708),f=e(21423),c=e(52622),h=e(2514),p=e(41987),m=e(65879),a=e(12091),v=e(26657),E=e(47118),D=e(31193),b=e(87986),P=e(14348),y=e(37168),T=e(49510),M=e(33948);function I(R=[]){R.forEach(B=>{B.meta={...B.meta,dataTopic:c.QR.Annotations}})}function x(R,B){return(0,T.z)([R,B]).pipe((0,s.Z)(H=>{const[W,N]=H;if(N.annotations?.length||N.alertState){W.annotations||(W.annotations=[]);const V=W.annotations.concat((0,M.I)(N.annotations));I(V);const G=N.alertState;return(0,o.of)({...W,annotations:V,alertState:G})}return I(W.annotations),(0,o.of)(W)}))}var S=e(39374);let O=100;function C(){return"Q"+O++}class L{constructor(B){this.templateSrv=(0,b.w)(),this.resendLastResult=()=>{this.lastResult&&this.subject.next(this.lastResult)},this.subject=new n.m(1),this.dataConfigSource=B}getData(B){const{withFieldConfig:H,withTransforms:W}=B;let N=1,V,G=[],_=[],K,j=!0,k=-1;if(this.dataConfigSource.snapshotData){const Q={state:u.Gu.Done,series:this.dataConfigSource.snapshotData.map(ee=>(0,d.Vc)(ee)),timeRange:(0,i.E2)(),structureRev:N};return(0,o.of)(Q)}return this.subject.pipe((0,s.Z)(Q=>{let ee=this.dataConfigSource.getFieldOverrideOptions(),ae=this.dataConfigSource.getTransformations();if(Q.series===_&&V?.fieldConfig===ee?.fieldConfig&&K===ae)return(0,o.of)({...Q,structureRev:N,series:G});V=ee,K=ae,_=Q.series;let Z=(0,o.of)(Q);return W&&(Z=this.applyTransformations(Q)),Z.pipe((0,r.T)(ne=>{let q=ne,te=!1;if(H&&ne.series?.length){if(k===this.dataConfigSource.configRev){let re;for(const de of ne.series)if((0,E.o$)(de)){re=de;break}re&&!re.packetInfo.schemaChanged&&G[0].fields.length===re.fields.length&&(q={...q,series:G.map((de,ie)=>({...de,length:ne.series[ie].length,fields:de.fields.map((ge,ve)=>({...ge,values:ne.series[ie].fields[ve].values,state:{...ge.state,calcs:void 0,range:void 0}}))}))},te=!0)}ee!=null&&(j||!te)&&(k=this.dataConfigSource.configRev,q={...q,series:(0,l.we)({timeZone:ne.request?.timezone??"browser",data:q.series,...ee})},q.annotations&&(q.annotations=(0,l.we)({data:q.annotations,...ee,fieldConfig:{defaults:{},overrides:[]}})),j=!1)}return!te&&!(0,f.J3)(G,q.series,f.bW)&&N++,G=q.series,{...q,structureRev:N}}))}))}applyTransformations(B){const H=this.dataConfigSource.getTransformations();if(H&&H.every(j=>j.disabled)||!H||H.length===0)return(0,o.of)(B);const N={interpolate:j=>this.templateSrv.replace(j,B?.request?.scopedVars)};let V=H.filter(j=>j.topic==null||j.topic===c.QR.Series),G=H.filter(j=>j.topic===c.QR.Annotations),_=(0,h.m)(V,B.series,N),K=(0,h.m)(G,B.annotations??[],N);return(0,t.merge)(_,K).pipe((0,r.T)(j=>{let Q=j.some(ee=>ee.meta?.dataTopic===c.QR.Annotations)?{annotations:j}:{series:j};return{...B,...Q}}),(0,g.W)(j=>(console.warn("Error running transformation:",j),(0,o.of)({...B,state:u.Gu.Error,errors:[(0,a.u)(j)]}))))}async run(B){const{queries:H,timezone:W,datasource:N,panelId:V,panelPluginType:G,dashboardUID:_,timeRange:K,timeInfo:j,cacheTimeout:k,queryCachingTTL:Q,maxDataPoints:ee,scopedVars:ae,minInterval:Z,app:ne}=B;if((0,P.kN)(N)){this.pipeToSubject((0,P.mw)(B,H[0]),V,!0);return}const q={app:ne??p.Jk.Dashboard,requestId:C(),timezone:W,panelId:V,panelPluginType:G,dashboardUID:_,range:K,timeInfo:j,interval:"",intervalMs:0,targets:(0,t.cloneDeep)(H),maxDataPoints:ee,scopedVars:ae||{},cacheTimeout:k,queryCachingTTL:Q,startTime:Date.now(),rangeRaw:K.raw};try{const te=await U(N,q.scopedVars),re=te.meta?.mixed;q.targets=q.targets.map(ge=>{const ve=ge.datasource?.type===v.dR.type;return(!ge.datasource||ge.datasource.uid!==te.uid&&!re&&!ve)&&(ge.datasource=te.getRef()),ge});const de=Z?this.templateSrv.replace(Z,q.scopedVars):te.interval,ie=m.calculateInterval(K,ee,de);q.scopedVars=Object.assign({},q.scopedVars,{__interval:{text:ie.interval,value:ie.interval},__interval_ms:{text:ie.intervalMs.toString(),value:ie.intervalMs}}),q.interval=ie.interval,q.intervalMs=ie.intervalMs,q.filters=this.templateSrv.getAdhocFilters(te.name,!0),this.lastRequest=q,this.pipeToSubject((0,S.BN)(te,q),V)}catch(te){this.pipeToSubject((0,o.of)({state:u.Gu.Error,error:(0,a.u)(te),series:[],timeRange:q.range}),V)}}pipeToSubject(B,H,W=!1){this.subscription&&this.subscription.unsubscribe();let N=B;const V=this.dataConfigSource.getDataSupport();if(V.alertStates||V.annotations){const G=this.dataConfigSource;N=x(B,(0,y.Dh)().getResult(G.id))}this.subscription=N.subscribe({next:G=>{const _=this.lastResult,K=W?G:(0,d.N$)(G,_);if(_!=null&&K.state!==u.Gu.Streaming){let j=(0,f.J3)(_.series??[],K.series??[],(ee,ae)=>ee===ae),k=(0,f.J3)(_.annotations??[],K.annotations??[],(ee,ae)=>ee===ae),Q=_.state===K.state;if(j&&(K.series=_.series),k&&(K.annotations=_.annotations),j&&k&&Q)return}this.lastResult=K,this.subject.next(K)}})}cancelQuery(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&(this.lastResult.state===u.Gu.Loading||this.lastResult.state===u.Gu.Streaming)&&this.subject.next({...this.lastResult,state:u.Gu.Done}))}clearLastResult(){this.lastResult=void 0,this.subject=new n.m(1)}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}useLastResultFrom(B){this.lastResult=B.getLastResult(),this.lastResult&&this.subject.next(this.lastResult)}setLastResult(B){this.lastResult=B}getLastResult(){return this.lastResult}getLastRequest(){return this.lastRequest}}async function U(R,B){return R&&typeof R=="object"&&"query"in R?R:await(0,D.tR)().get(R,B)}},81583:(Y,A,e)=>{"use strict";e.d(A,{N:()=>n});var t=e(69850);function n(o,s){return(0,t.j)(()=>{s&&o.resolveCancelerIfExists(s)})}},72955:(Y,A,e)=>{"use strict";e.d(A,{B:()=>n});var t=e(21423);const n=(o,s)=>{let r=1;return s?.structureRev&&s.series&&(r=s.structureRev,(0,t.J3)(o.series,s.series,t.bW)||r++),o.structureRev=r,o}},39374:(Y,A,e)=>{"use strict";e.d(A,{BN:()=>B});var t=e(2543),n=e(62467),o=e(44240),s=e(39697),r=e(65474),g=e(81160),u=e(66847),d=e(59099),i=e(1005),l=e(65961),f=e(67791),c=e(39070),h=e(52622),p=e(85858),m=e(41987),a=e(12091),v=e(32264),E=e(26657),D=e(27677),b=e(21969),P=e(53478),y=e(34867);const T=(0,y.DW)("features.query");var M=e(81583),I=e(76885),x=e(61298),S=e(14110),O=e(14792);function C(W){let N=!1;return G=>{if(!G.request||N||I.kM.getUrlSearchParams().editPanel!=null||G.state!==c.Gu.Done&&G.state!==c.Gu.Error)return;const K={eventName:x.n_.DataRequest,source:G.request.app,datasourceName:W.name,datasourceId:W.id,datasourceUid:W.uid,datasourceType:W.type,dataSize:0,panelId:0,panelPluginType:G.request?.panelPluginType,duration:G.request.endTime-G.request.startTime};V(K,G),G.request.app!==m.Jk.Explore&&G.request.app!==m.Jk.Correlations&&L(K,G),G.series&&G.series.length>0&&(K.dataSize=G.series.length),(0,S.G$)(K),N=!0};function V(G,_){const K={};for(let k=0;k<_.series.length;k++){const Q=_.series[k].refId;Q&&!K[Q]&&(K[Q]=_.series[k].meta?.isCachedResponse??!1)}G.totalQueries=Object.keys(K).length,G.cachedQueries=Object.values(K).filter(k=>k===!0).length,_.request&&Number.isInteger(_.request.panelId)&&(G.panelId=_.request.panelId);const j=(0,O.UA)().getCurrent();j&&(G.dashboardId=j.id,G.dashboardName=j.title,G.dashboardUid=j.uid,G.folderName=j.meta.folderTitle)}}function L(W,N){N.errors?.length?W.error=N.errors.join(", "):N.error&&(W.error=N.error.message)}function U(W,N){const V=N.panelData.request,G={...N.packets},_=W.key??W.data?.[0]?.refId??"A";G[_]=W;let K=W.state||c.Gu.Done,j,k;const Q=[],ee=[];for(const q in G){const te=G[q];if((te.error||te.errors?.length)&&(K=c.Gu.Error,j=te.error,k=te.errors),te.data&&te.data.length)for(const re of te.data){if(re.meta?.dataTopic===h.QR.Annotations){ee.push(re);continue}Q.push(re)}}const ae=R(V,K),Z={state:K,series:Q,annotations:ee,error:j,errors:k,request:V,timeRange:ae},ne=new Set([...N.panelData.traceIds??[],...W.traceIds??[]]);return ne.size>0&&(Z.traceIds=Array.from(ne)),{packets:G,panelData:Z}}function R(W,N){const V=W.range;return!(0,t.isString)(V.raw.from)||N!==c.Gu.Streaming?V:{...V,from:p.parse(V.raw.from,!1),to:p.parse(V.raw.to,!0)}}function B(W,N,V){let G={panelData:{state:c.Gu.Loading,series:[],request:N,timeRange:N.range},packets:{}};if(!N.targets.length)return N.endTime=Date.now(),G.panelData.state=c.Gu.Done,(0,n.of)(G.panelData);const _=H(W,N,V).pipe((0,g.T)(K=>{if(!(0,t.map)(K.data))throw new Error(`Expected response data to be array, got ${typeof K.data}.`);return N.endTime=Date.now(),G=U(K,G),G.panelData}),(0,u.W)(K=>(console.error("runRequest.catchError",K),T.logError(K),(0,n.of)({...G.panelData,state:c.Gu.Error,error:(0,a.u)(K)}))),(0,d.M)(C(W)),(0,M.N)(D.IB,N.requestId),(0,i.u)());return(0,o.h)((0,s.O)(200).pipe((0,l.u)(G.panelData),(0,f.Q)(_)),_)}function H(W,N,V){if(N.targets=N.targets.map(_=>(0,b.Ih)(_)?{...W?.getDefaultQuery?.(m.Jk.PanelEditor),..._}:_),v.$.publicDashboardAccessToken)return(0,r.H)(W.query(N));for(const _ of N.targets)if((0,E.s9)(_.datasource))return P.Ex.query(N);const G=V?V(N):W.query(N);return(0,r.H)(G)}},93117:(Y,A,e)=>{"use strict";e.d(A,{y:()=>g});var t=e(41987),n=e(73372),o=e(72574),s=e(26657),r=e(21969);async function g(u,d,i,l){let f=i;const c={type:u.type,uid:d},h={...u?.getDefaultQuery?.(t.Jk.PanelEditor),datasource:c,refId:"A"};if(l?.meta.id!==u.meta.id){if(u.meta.mixed)return i;if((0,n.Ee)(l)&&(0,n.FL)(u)){const p=await l.exportToAbstractQueries(i);f=await u.importFromAbstractQueries(p)}else if(l&&u.importQueries)f=await u.importQueries(i,l);else{if(l){const p=(0,o.w)(),m=[];let a=u.uid;const v=p.containsTemplate(d);v&&(a=p.replace(u.uid));const E=i.reduce((D,b)=>{if(b.datasource){let P=b.datasource.uid;const y=p.containsTemplate(P);if(y&&(P=p.replace(b.datasource.uid)),P===a&&y===v)return b.refId=(0,r.W3)(D),D.concat([b])}return D},m);if(E.length>0)return E}return[h]}}return f.length===0?[h]:f.map(p=>(!(0,s.s9)(p.datasource)&&!u.meta.mixed&&(p.datasource=c),p))}},53477:(Y,A,e)=>{"use strict";e.d(A,{G3:()=>g,JC:()=>l,TF:()=>i,XJ:()=>p,YU:()=>c,d7:()=>f,if:()=>m,r4:()=>r,s1:()=>d,w7:()=>h});var t=e(64161);const n=null,o=58,s=8,r={label:"A\u2013Z",value:"alpha-asc"},g="search.sections",u="grafana.search.expanded-folder",d=0,i="general",l="General",f="grafana.search.include.panels",c="grafana.search.layout",h="grafana.search.sort",p={dashboard:t.G.DashDB,folder:t.G.DashFolder,home:t.G.DashHome},m=1e3},97427:(Y,A,e)=>{"use strict";e.d(A,{d:()=>r,n:()=>g});var t=e(96540),n=e(13752),o=e(71733),s=e(12131);function r(){const u=(0,t.useRef)(new n.B);return{keyboardEvents:u.current,onKeyDown:d=>{switch(d.code){case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":case"Enter":u.current.next(d);default:}}}}function g(u,d,i){const l=(0,t.useRef)({x:0,y:-1}),[f,c]=(0,t.useState)({x:0,y:-1}),h=(0,t.useRef)();return(0,t.useEffect)(()=>{h.current=i.view.fields.url,l.current.x=0,l.current.y=-1,c({...l.current})},[i]),(0,t.useEffect)(()=>{const p=u.subscribe({next:m=>{switch(m?.code){case"ArrowDown":{l.current.y++,c({...l.current});break}case"ArrowUp":l.current.y=Math.max(0,l.current.y-1),c({...l.current});break;case"ArrowRight":{d>0&&(l.current.x=Math.min(d,l.current.x+1),c({...l.current}));break}case"ArrowLeft":{d>0&&(l.current.x=Math.max(0,l.current.x-1),c({...l.current}));break}case"Enter":if(!h.current)break;const a=l.current.x*d+l.current.y;if(a<0){l.current.x=0,l.current.y=0,c({...l.current});break}const v=h.current.values?.[a];typeof v=="string"&&s.Ny.push(o.I.stripBaseFromUrl(v))}}});return()=>p.unsubscribe()},[u,d]),f}},6204:(Y,A,e)=>{"use strict";e.d(A,{B9:()=>g,J$:()=>s,KZ:()=>r,MK:()=>o,Pf:()=>n});var t=e(14110);const n=(d,i)=>{(0,t.rR)(`${d}_viewed`,u(i))},o=(d,i)=>{(0,t.rR)(`${d}_result_clicked`,u(i))},s=(d,i)=>{(0,t.rR)(`${d}_query_submitted`,u(i))},r=(d,{error:i,...l})=>{(0,t.rR)(`${d}_query_failed`,{...u(l),error:i})},g=(d,i,l)=>{(0,t.rR)(`grafana_panel_inspect_${d}_${i}_clicked`,l)},u=d=>({layout:d.layout,starredFilter:d.starred??!1,sort:d.sortValue??"",tagCount:d.tagCount??0,queryLength:d.query?.length??0,includePanels:d.includePanels??!1})},24439:(Y,A,e)=>{"use strict";e.d(A,{getGrafanaSearcher:()=>I});var t=e(32264),n=e(78368),o=e(14236),s=e(57875),r=e(17172),g=e(40957);const u="Loading",d="api/search-v2",i="name_sort";class l{constructor(S){this.fallbackSearcher=S}async search(S){if(S.facet?.length)throw new Error("facets not supported!");return this.doSearchQuery(S)}async starred(S){if(S.facet?.length)throw new Error("facets not supported!");const O=await(0,r.AI)().get("api/user/stars");return O?.length?this.doSearchQuery({uid:O,query:S.query??"*"}):{view:new n.R({length:0,fields:[]}),totalRows:0,loadMoreItems:async(C,L)=>{},isItemLoaded:C=>!0}}async tags(S){const O={...S,query:S.query??"*",sort:void 0,facet:[{field:"tag"}],limit:1},L=(await(0,r.AI)().post(d,O)).frames.map(U=>(0,o.Vc)(U));if(L[0]?.name===u)return this.fallbackSearcher.tags(S);for(const U of L)if(U.fields[0].name==="tag")return h(U);return[]}getSortOptions(){const S=[{value:i,label:"Alphabetically (A-Z)"},{value:"-name_sort",label:"Alphabetically (Z-A)"}];if(t.$.licenseInfo.enabledFeatures.analytics){for(const O of p)S.push({value:`-${O.name}`,label:`${O.display} (most)`}),S.push({value:`${O.name}`,label:`${O.display} (least)`});for(const O of m)S.push({value:`-${O.name}`,label:`${O.display} (recent)`}),S.push({value:`${O.name}`,label:`${O.display} (oldest)`})}return Promise.resolve(S)}async doSearchQuery(S){S=await(0,g.u4)(S);const O={...S,query:S.query??"*",limit:S.limit??f},L=(await(0,r.AI)().post(d,O)).frames.map(V=>(0,o.Vc)(V)),U=L.length?(0,o.Vc)(L[0]):{fields:[],length:0};if(U.name===u)return this.fallbackSearcher.search(S);for(const V of U.fields)V.display=(0,s.J)({field:V,theme:t.$.theme2});U.meta?.custom||(U.meta={...U.meta,custom:{count:U.length,max_score:1}});const R=U.meta.custom;if(R.locationInfo||(R.locationInfo={}),R.sortBy?.length){const V=U.fields.find(G=>G.name===R.sortBy);if(V){const G=a(V.name);R.sortBy=G,V.name=G}}let B=0,H;const W=async()=>{for(;B>N.dataFrame.length;){const V=N.dataFrame.length;if(V>=R.count)return;const G=await(0,r.AI)().post(d,{...O??{},from:V,limit:c}),_=(0,o.Vc)(G.frames[0]);if(!_){console.log("no results",_);return}if(_.fields.length!==N.dataFrame.fields.length){console.log("invalid shape",_,N.dataFrame);return}const K=_.length+N.dataFrame.length;for(let k=0;k<_.fields.length;k++)N.dataFrame.fields[k].values.push(..._.fields[k].values);N.dataFrame.length=K;const j=_.meta?.custom;if(j?.locationInfo&&R)for(const[k,Q]of Object.entries(j.locationInfo))R.locationInfo[k]=Q}H=void 0},N=new n.R(U);return{totalRows:R.count??U.length,view:N,loadMoreItems:async(V,G)=>(B=Math.max(B,G),H||(H=W()),H),isItemLoaded:V=>V<N.dataFrame.length}}getFolderViewSort(){return"name_sort"}}const f=50,c=100;function h(x){const S=x.fields[0].values,O=x.fields[1].values,C=[];for(let L=0;L<x.length;L++)C.push({term:S[L],count:O[L]});return C}const p=[{name:"views_total",display:"Views total"},{name:"views_last_30_days",display:"Views 30 days"},{name:"errors_total",display:"Errors total"},{name:"errors_last_30_days",display:"Errors 30 days"}],m=[{name:"created_at",display:"Created time"},{name:"updated_at",display:"Updated time"}];function a(x){for(const S of p)if(S.name===x)return S.display;for(const S of m)if(S.name===x)return S.display;return x}var v=e(53076);class E{constructor(S){this.parent=S,this.cache=new Map,this.sortPlaceholder="Default (Relevance)"}async search(S){if(S.facet?.length)throw new Error("facets not supported!");if(S.sort!=null)throw new Error("custom sorting is not supported yet");if(S.tags?.length||S.ds_uid?.length)return this.parent.search(S);const C=(await this.getCache(S.kind)).search(S.query);return{isItemLoaded:()=>!0,loadMoreItems:async(L,U)=>{},totalRows:C.length,view:C}}async getCache(S){const O=S?S.sort().join(","):"*",C=this.cache.get(O);if(C)try{return await C}catch{return this.cache.delete(O),new D(new n.R({name:"error",fields:[],length:0}))}const L=this.parent.search({kind:S,limit:5e3}).then(U=>new D(U.view));return this.cache.set(O,L),L}async starred(S){return this.parent.starred(S)}async getSortOptions(){return this.parent.getSortOptions()}async tags(S){return this.parent.tags(S)}getFolderViewSort(){return this.parent.getFolderViewSort()}}class D{constructor(S){this.full=S,this.ufuzzy=new v.A({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1}),this.names=this.full.fields.name.values,this.empty=new n.R({...this.full.dataFrame,fields:this.full.dataFrame.fields.map(O=>({...O,values:[]})),length:0})}search(S){if(!S?.length||S==="*")return this.full;const O=this.full.dataFrame.fields,C=this.names,L=O.map(H=>[]);let[U,R,B]=this.ufuzzy.search(C,S,5);for(let H=0;H<O.length;H++){let W=O[H].values,N=L[H];if(R&&B)for(let V=0;V<B.length;V++){let G=R.idx[B[V]];N.push(W[G])}else if(U)for(let V=0;V<U.length;V++){let G=U[V];N.push(W[G])}}return this.empty.dataFrame.fields.forEach((H,W)=>{H.values=L[W]}),this.empty.dataFrame.length=this.empty.dataFrame.fields[0].values.length,this.empty}}var b=e(11261),P=e(27677),y=e(53477);class T{constructor(){this.locationInfo={general:{kind:"folder",name:"General",url:"/dashboards"}},this.getFolderViewSort=()=>""}async composeQuery(S,O){const C=await(0,g.u4)(O);return C.query?.length&&C.query!=="*"&&(S.query=C.query),C.kind?.length===1&&y.XJ[C.kind[0]]&&(S.type=y.XJ[C.kind[0]]),C.uid?S.dashboardUID=C.uid:C.location?.length&&(S.folderUIDs=[C.location]),S}async search(S){if(S.facet?.length)throw new Error("facets not supported!");if(S.from!==void 0){if(!S.limit)throw new Error("Must specify non-zero limit parameter when using from");if(S.from/S.limit%1!==0)throw new Error("From parameter must be a multiple of limit")}const O=S.limit??(S.from!==void 0?1:y.if),C=S.from!==void 0?S.from/O+1:void 0,L=await this.composeQuery({limit:O,tag:S.tags,sort:S.sort,page:C},S);return this.doAPIQuery(L)}async starred(S){if(S.facet?.length)throw new Error("facets not supported!");const O=await this.composeQuery({limit:S.limit??y.if,tag:S.tags,sort:S.sort,starred:S.starred},S);return this.doAPIQuery(O)}async getSortOptions(){return(await P.IB.get("/api/search/sorting")).sortOptions.map(O=>({value:O.name,label:O.displayName}))}async tags(S){return(await P.IB.get("/api/dashboards/tags")).sort((C,L)=>L.count-C.count)}async doAPIQuery(S){const O=await P.IB.get("/api/search",S),C=[],L=[],U=[],R=[],B=[],H=[],W=[];let N;for(let _ of O){const K=_.type==="dash-folder"?"folder":"dashboard";C.push(K),L.push(_.title),U.push(_.uid),R.push(_.url),B.push(_.tags),W.push(_.sortMeta);let j=_.folderUid;!j&&K==="dashboard"&&(j="general"),H.push(j),_.sortMetaName?.length&&(N=_.sortMetaName),_.folderUid&&_.folderTitle?this.locationInfo[_.folderUid]={kind:"folder",name:_.folderTitle,url:_.folderUrl,folderUid:_.folderUid}:K==="folder"&&(this.locationInfo[_.uid]={kind:K,name:_.title,url:_.url,folderUid:_.folderUid})}const V={fields:[{name:"kind",type:b.PU.string,config:{},values:C},{name:"name",type:b.PU.string,config:{},values:L},{name:"uid",type:b.PU.string,config:{},values:U},{name:"url",type:b.PU.string,config:{},values:R},{name:"tags",type:b.PU.other,config:{},values:B},{name:"location",type:b.PU.string,config:{},values:H}],length:L.length,meta:{custom:{count:L.length,max_score:1,locationInfo:this.locationInfo}}};N?.length&&W.length&&(V.meta.custom.sortBy=N,V.fields.push({name:N,type:b.PU.number,config:{},values:W}));for(const _ of V.fields)_.display=(0,s.J)({field:_,theme:t.$.theme2});const G=new n.R(V);return{totalRows:V.length,view:G,loadMoreItems:async(_,K)=>{},isItemLoaded:_=>!0}}}let M;function I(){if(!M){const x=new T,S=t.$.featureToggles.panelTitleSearch;M=S?new l(x):x,S&&location.search.includes("do-frontend-query")&&(M=new E(M))}return M}},40957:(Y,A,e)=>{"use strict";e.d(A,{TM:()=>g,cu:()=>u,hI:()=>i,u4:()=>o});var t=e(49952),n=e(14792);async function o(l){return l.query&&l.query.indexOf("folder:current")>=0&&(l={...l,location:await s(),query:l.query.replace("folder:current","").trim()},l.query?.length||(l.query="*")),Promise.resolve(l)}async function s(){try{let l=(0,n.UA)().getCurrent();return l||(await r(500),l=(0,n.UA)().getCurrent()),Promise.resolve(l?.meta?.folderUid)}catch(l){console.error(l)}}function r(l){return new Promise(f=>setTimeout(f,l))}function g(l,f){return l==="dashboard"?"apps":l==="folder"?f?"folder-open":"folder":"question-circle"}function u(l,f){return l&&(0,t.I)(l.uid)?"users-alt":g(l.kind,f)}function d(l){switch(l){case"dashboard":case"folder":case"panel":return l;default:return"dashboard"}}function i(l,f){const c=f?.dataFrame.meta?.custom,h={kind:d(l.kind),uid:l.uid,title:l.name,url:l.url,tags:l.tags??[]},p=c?.sortBy;if(p){const m=l[p];(typeof m=="string"||typeof m=="number")&&(h.sortMetaName=p,h.sortMeta=m)}if(l.location){const m=l.location.split("/"),a=m[m.length-1],v=c?.locationInfo[a];v&&(h.parentTitle=v.name,h.parentKind=v.kind,h.parentUID=a)}return h}},64161:(Y,A,e)=>{"use strict";e.d(A,{G:()=>t,P:()=>n});var t=(o=>(o.DashDB="dash-db",o.DashHome="dash-home",o.DashFolder="dash-folder",o))(t||{}),n=(o=>(o.List="list",o.Folders="folders",o))(n||{})},16757:(Y,A,e)=>{"use strict";e.d(A,{N1:()=>r,W1:()=>o});var t=e(53477);const n=g=>g?!!(g.query||g.tag?.length>0||g.starred||g.sort):!1,o=()=>{const g=t.G3+".";for(let u=0;u<window.localStorage.length;u++){const d=window.localStorage.key(u);d?.startsWith(g)&&window.localStorage.removeItem(d)}},s=(g="General")=>`${SECTION_STORAGE_KEY}.${g.toLowerCase()}`,r=g=>{const u=Object.entries(g).reduce((d,[i,l])=>{if(l){if(i==="tag"&&!Array.isArray(l))return{...d,tag:[l]}}else return d;return{...d,[i]:l}},{});if(g.folder){const d=`folder:${g.folder}`;return{...u,query:`${d} ${(u.query??"").replace(d,"")}`}}return{...u}}},1936:(Y,A,e)=>{"use strict";e.d(A,{Ay:()=>y,EC:()=>D,FW:()=>m,G3:()=>d,L5:()=>P,QM:()=>g,Yh:()=>a,aD:()=>i,c3:()=>b,ch:()=>u,dJ:()=>l,ew:()=>E,jE:()=>f,zh:()=>v});var t=e(30038),n=e(80348);const o={serviceAccount:{},isLoading:!0,tokens:[]},s=(0,t.Z0)({name:"serviceaccount",initialState:o,reducers:{serviceAccountFetchBegin:T=>({...T,isLoading:!0}),serviceAccountFetchEnd:T=>({...T,isLoading:!1}),serviceAccountLoaded:(T,M)=>({...T,serviceAccount:M.payload,isLoading:!1}),serviceAccountTokensLoaded:(T,M)=>({...T,tokens:M.payload,isLoading:!1}),rolesFetchBegin:T=>({...T,rolesLoading:!0}),rolesFetchEnd:T=>({...T,rolesLoading:!1})}}),r=s.reducer,{serviceAccountLoaded:g,serviceAccountTokensLoaded:u,serviceAccountFetchBegin:d,serviceAccountFetchEnd:i,rolesFetchBegin:l,rolesFetchEnd:f}=s.actions,c={serviceAccounts:[],isLoading:!0,roleOptions:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,serviceAccountStateFilter:n.ServiceAccountStateFilter.All},h=(0,t.Z0)({name:"serviceaccounts",initialState:c,reducers:{serviceAccountsFetched:(T,M)=>{const{totalCount:I,perPage:x,...S}=M.payload,O=Math.ceil(I/x);return{...T,...S,totalPages:O,perPage:x,showPaging:O>1,isLoading:!1}},serviceAccountsFetchBegin:T=>({...T,isLoading:!0}),serviceAccountsFetchEnd:T=>({...T,isLoading:!1}),acOptionsLoaded:(T,M)=>({...T,roleOptions:M.payload}),queryChanged:(T,M)=>({...T,query:M.payload,page:0}),pageChanged:(T,M)=>({...T,page:M.payload}),stateFilterChanged:(T,M)=>({...T,serviceAccountStateFilter:M.payload})}}),p=h.reducer,{serviceAccountsFetchBegin:m,serviceAccountsFetchEnd:a,serviceAccountsFetched:v,acOptionsLoaded:E,pageChanged:D,stateFilterChanged:b,queryChanged:P}=h.actions,y={serviceAccountProfile:r,serviceAccounts:p}},8212:(Y,A,e)=>{"use strict";e.d(A,{Ay:()=>h,NV:()=>f,Y1:()=>d,j7:()=>u,kH:()=>g,pB:()=>l,s7:()=>i,sF:()=>r,sJ:()=>s});var t=e(30038);const n={supportBundles:[],isLoading:!1,supportBundleCollectors:[],createBundlePageLoading:!1,loadBundlesError:"",createBundleError:""},o=(0,t.Z0)({name:"supportBundles",initialState:n,reducers:{supportBundlesLoaded:(p,m)=>({...p,supportBundles:m.payload,isLoading:!1}),fetchBegin:p=>({...p,isLoading:!0}),fetchEnd:p=>({...p,isLoading:!1}),collectorsFetchBegin:p=>({...p,createBundlePageLoading:!0}),collectorsFetchEnd:p=>({...p,createBundlePageLoading:!1}),supportBundleCollectorsLoaded:(p,m)=>({...p,supportBundleCollectors:m.payload,createBundlePageLoading:!1}),setLoadBundleError:(p,m)=>({...p,loadBundlesError:m.payload,supportBundleCollectors:[]}),setCreateBundleError:(p,m)=>({...p,createBundleError:m.payload})}}),{supportBundlesLoaded:s,fetchBegin:r,fetchEnd:g,supportBundleCollectorsLoaded:u,collectorsFetchBegin:d,collectorsFetchEnd:i,setLoadBundleError:l,setCreateBundleError:f}=o.actions,h={supportBundles:o.reducer}},34655:(Y,A,e)=>{"use strict";e.d(A,{$T:()=>h,$u:()=>u,Ay:()=>E,EC:()=>g,L5:()=>r,Q9:()=>s,dJ:()=>d,jE:()=>i,tC:()=>p});var t=e(30038);const n={teams:[],page:1,query:"",perPage:30,totalPages:0,noTeams:!1,hasFetched:!1},o=(0,t.Z0)({name:"teams",initialState:n,reducers:{teamsLoaded:(D,b)=>{const{totalCount:P,perPage:y,...T}=b.payload,M=Math.ceil(P/y);return{...D,...T,totalPages:M,perPage:y,hasFetched:!0}},queryChanged:(D,b)=>({...D,page:1,query:b.payload}),pageChanged:(D,b)=>({...D,page:b.payload}),sortChanged:(D,b)=>({...D,sort:b.payload,page:1}),rolesFetchBegin:D=>({...D,rolesLoading:!0}),rolesFetchEnd:D=>({...D,rolesLoading:!1})}}),{teamsLoaded:s,queryChanged:r,pageChanged:g,sortChanged:u,rolesFetchBegin:d,rolesFetchEnd:i}=o.actions,l=o.reducer,f={team:{},members:[],groups:[],searchMemberQuery:""},c=(0,t.Z0)({name:"team",initialState:f,reducers:{teamLoaded:(D,b)=>({...D,team:b.payload}),teamMembersLoaded:(D,b)=>({...D,members:b.payload}),setSearchMemberQuery:(D,b)=>({...D,searchMemberQuery:b.payload}),teamGroupsLoaded:(D,b)=>({...D,groups:b.payload})}}),{teamLoaded:h,teamGroupsLoaded:p,teamMembersLoaded:m,setSearchMemberQuery:a}=c.actions,v=c.reducer,E={teams:l,team:v}},87986:(Y,A,e)=>{"use strict";e.d(A,{w:()=>q});var t=e(2543),n=e(95344),o=e(19347),s=e(72574),r=e(79065),g=e(52622),u=e(53287);function d(te){const re=r.jh.getVariables(te);return(0,u.C)(re)}var i=e(20601),l=e(13344),f=e(24240),c=e(87421),h=e(75096);let p={};function m(te){const re=p[te];return re||(p[te]=(0,t.property)(te))}class a{constructor(re,de,ie){this.state={name:re.name,value:de,text:ie,type:re.type}}getValue(re){let{value:de}=this.state;return de==="string"||de==="number"||de==="boolean"?de:String(de)}getValueText(){const{value:re,text:de}=this.state;return typeof de=="string"?re===l.To?l.Zm:de:Array.isArray(de)?de.join(" + "):(console.log("value",de),String(de))}}let v;function E(te,re,de){return v?(v.state.name=te.name,v.state.type=te.type,v.state.value=re,v.state.text=de):v=new a(te,re,de),v}function D(te,re,de,ie){if(de=de||{},te==null||(0,f.EW)(de)&&re!==g.$m.QueryParam)return"";if(!Array.isArray(te)&&typeof te=="object"&&(te=`${te}`),typeof re=="function")return re(te,de,D);re||(re=g.$m.Glob);let ge=re.split(":");ge.length>1?(re=ge[0],ge=ge.slice(1)):ge=[];let ve=r.vz.getIfExists(re);ve||(console.error(`Variable format ${re} not found. Using glob format as fallback.`),ve=r.vz.get(g.$m.Glob));const ye=E(de,te,ie??te);return ve.formatter(te,ge,ye)}var b=e(84743),P=e.n(b),y=e(6709),T=e(76885),M=e(1933),I=e(74856),x=e(25304),S=e(83195),O=e(11261),C=e(92461),L=e(57875),U=e(28240),R=e(8249);function B(te,re,de){return new Proxy({},{get:(ie,ge)=>{if(ge==="name")return te.name;if(ge==="displayName")return(0,U.Ct)(te,re,de);if(ge==="labels"||ge==="formattedLabels")return te.labels?{...te.labels,__values:Object.values(te.labels).sort().join(", "),toString:()=>(0,R.h6)(te.labels,"",!0)}:""}})}function H(te,re,de,ie){const ge=W(te,re,de);return D(ge,ie)}function W(te,re,de){const ie=de?.__dataContext;if(!ie)return te;const{frame:ge,rowIndex:ve,field:ye,calculatedValue:pe}=ie.value;if(pe)switch(re){case"numeric":return pe.numeric.toString();case"raw":return pe.numeric;case"time":return"";case"text":default:return(0,S.cN)(pe)}if(ve===void 0)return te;if(re==="time"){const Re=ge.fields.find(me=>me.type===O.PU.time);return Re?Re.values[ve]:void 0}const le=ye.values[ve];if(re==="raw")return le;const De=(ye.display??G())(le);switch(re){case"numeric":return De.numeric;case"text":return De.text;default:return(0,S.cN)(De)}}function N(te,re,de,ie){const ge=de?.__dataContext;if(!ge||!re)return te;const{frame:ve,rowIndex:ye}=ge.value;if(ye===void 0||re===void 0)return te;const pe={name:ve.name,refId:ve.refId,fields:(0,C.F)({frame:ve,rowIndex:ye})},le=m(re)(pe)??"";return D(le,ie)}let V;function G(){return V||(V=(0,L.J)()),V}function _(te,re,de,ie){const ge=de?.__dataContext;if(!ge||re!=="name")return te;const{frame:ve,frameIndex:ye}=ge.value,pe=(0,U.Ri)(ve,ye);return D(pe,ie)}function K(te,re,de,ie){const ge=de?.__dataContext;if(!ge||re===void 0||re==="")return te;const{frame:ve,field:ye,data:pe}=ge.value,le=B(ye,ve,pe),Me=m(re)(le)??"";return D(Me,ie)}const j={__value:H,__data:N,__series:_,__field:K,[y.c.includeVars]:k,[y.c.keepTime]:Q,__timezone:ee};function k(te,re,de){const ie=(0,x.z)(de);return T.kM.toUrlParams(ie)}function Q(){return T.kM.toUrlParams((0,I.jG)().timeRangeForUrl())}function ee(){const te=(0,M.O)({timeZone:(0,I.jG)().timeModel?.getTimezone()});return te==="browser"?P().tz.guess():te}const ae={getFilteredVariables:c.bZ,getVariables:c.UN,getVariableWithName:c._2};class Z{constructor(re=ae){this.dependencies=re,this.regex=h.SY,this.index={},this.grafanaVariables=new Map,this.timeRange=null,this._adhocFiltersDeprecationWarningLogged=new Map,this._variables=[]}init(re,de){this._variables=re,this.timeRange=de,this.updateIndex()}get variables(){return(0,n.l)("template_srv.ts","variables","getVariables"),this.getVariables()}getVariables(){return window.__grafanaSceneContext?d(window.__grafanaSceneContext):this.dependencies.getVariables()}updateIndex(){const re=de=>de||de==="";if(this.index=this._variables.reduce((de,ie)=>(ie.current&&(ie.current.isNone||re(ie.current.value))&&(de[ie.name]=ie),de),{}),this.timeRange){const de=this.timeRange.from.valueOf().toString(),ie=this.timeRange.to.valueOf().toString();this.index={...this.index,__from:{current:{value:de,text:de}},__to:{current:{value:ie,text:ie}}}}}updateTimeRange(re){this.timeRange=re,this.updateIndex()}variableInitialized(re){this.index[re.name]=re}getAdhocFilters(re,de){let ie=[],ge=(0,o.l)().getInstanceSettings(re);if(!ge)return[];!de&&!this._adhocFiltersDeprecationWarningLogged.get(ge.type)&&((0,n.l)(`DataSource ${ge.type}`,"templateSrv.getAdhocFilters","filters property on the request (DataQueryRequest). Or if this is called from interpolateVariablesInQueries or applyTemplateVariables it is passed as a new argument"),this._adhocFiltersDeprecationWarningLogged.set(ge.type,!0));for(const ve of this.getAdHocVariables()){const ye=ve.datasource?.uid;(ye===ge.uid||ye?.indexOf("$")===0&&this.replace(ye)===ge.uid)&&(ie=ie.concat(ve.filters))}return ie}setGrafanaVariable(re,de){this.grafanaVariables.set(re,de)}setGlobalVariable(re,de){(0,n.l)("template_srv.ts","setGlobalVariable",""),this.index={...this.index,[re]:{current:de}}}getVariableName(re){this.regex.lastIndex=0;const de=this.regex.exec(re);return de?de.slice(1).find(ge=>ge!==void 0):null}containsTemplate(re){if(!re)return!1;const de=this.getVariableName(re),ie=de&&this.getVariableAtIndex(de);return ie!=null}variableExists(re){return(0,n.l)("template_srv.ts","variableExists","containsTemplate"),this.containsTemplate(re)}highlightVariablesAsHtml(re){return!re||!(0,t.isString)(re)?re:(re=(0,t.escape)(re),this._replaceWithVariableRegex(re,void 0,(de,ie)=>this.getVariableAtIndex(ie)?'<span class="template-variable">'+de+"</span>":de))}getAllValue(re){if(re.allValue)return re.allValue;const de=[];for(let ie=1;ie<re.options.length;ie++)de.push(re.options[ie].value);return de}getVariableValue(re,de){return de?m(de)(re.value):re.value}getVariableText(re,de){return re.value===de||typeof de!="string"?re.text:de}replace(re,de,ie,ge){return de&&de.__sceneObject?r.jh.interpolate(de.__sceneObject.value,re,de,ie):window.__grafanaSceneContext&&window.__grafanaSceneContext.isActive?r.jh.interpolate(window.__grafanaSceneContext,re,de,ie):re?(this.regex.lastIndex=0,this._replaceWithVariableRegex(re,ie,(ve,ye,pe,le)=>{const Me=this._evaluateVariableExpression(ve,ye,pe,le,de);return ge&&ge.push({match:ve,variableName:ye,fieldPath:pe,format:le,value:Me,found:Me!==ve}),Me})):re??""}_evaluateVariableExpression(re,de,ie,ge,ve){const ye=this.getVariableAtIndex(de),pe=ve?.[de];if(pe){const Re=this.getVariableValue(pe,ie),me=this.getVariableText(pe,Re);if(Re!=null)return D(Re,ge,ye,me)}if(!ye){const Re=j[de];return Re?Re(re,ie,ve,ge):re}if(ge===g.$m.QueryParam||(0,f.EW)(ye)){const Re=i.B.get(ye.type).getValueForUrl(ye),me=(0,f.EW)(ye)?ye.id:ye.current.text;return D(Re,ge,ye,me)}const le=this.grafanaVariables.get(ye.current.value);if(le)return D(le,ge,ye);let Me=ye.current.value,De=ye.current.text;if(this.isAllValue(Me)&&(Me=this.getAllValue(ye),De=l.Zm,ye.allValue&&ge!==g.$m.Text&&ge!==g.$m.PercentEncode))return this.replace(Me);if(ie){const Re=this.getVariableValue({value:Me,text:De},ie);if(Re!=null)return D(Re,ge,ye,De)}return D(Me,ge,ye,De)}_replaceWithVariableRegex(re,de,ie){return this.regex.lastIndex=0,re.replace(this.regex,(ge,ve,ye,pe,le,Me,De)=>ie(ge,ve||ye||le,Me,pe||De||de))}isAllValue(re){return re===l.To||Array.isArray(re)&&re[0]===l.To}replaceWithText(re,de){return(0,n.l)("template_srv.ts","replaceWithText()","replace(), and specify the :text format"),this.replace(re,de,"text")}getVariableAtIndex(re){if(re)return this.index[re]?this.index[re]:this.dependencies.getVariableWithName(re)}getAdHocVariables(){return this.dependencies.getFilteredVariables(f.EW)}}const ne=new Z;(0,s.d)(ne);const q=()=>ne},33449:(Y,A,e)=>{"use strict";e.d(A,{v:()=>H});var t=e(4200),n=e(79065),o=e(52995);function s({title:W,unit:N}){return n.d0.heatmap().setTitle(W).setUnit(N).setOption("calculate",!1).setOption("color",{mode:o.P7.Scheme,exponent:.5,scheme:"Spectral",steps:32,reverse:!1})}function r({title:W,unit:N}){return n.d0.timeseries().setTitle(W).setUnit(N).setCustomFieldConfig("fillOpacity",9)}function g({title:W,unit:N}){return n.d0.timeseries().setTitle(W).setUnit(N).setOption("legend",{showLegend:!1}).setCustomFieldConfig("fillOpacity",9)}const u="short";function d(W){return W&&i[W]||u}const i={bytes:"bytes",seconds:"s"},l={bytes:"Bps",seconds:"short"},f="cps";function c(W){return W&&l[W]||f}function h(W){const N=`${t.Rp}`,V=W.at(-2),G=d(V),_={title:N,unit:G},K={..._,variant:"p50",queries:[D(50)],vizBuilder:()=>g(K)},j={..._,variant:"p50",queries:[D(50,[t.aZ])],vizBuilder:()=>g(j)},k={..._,variant:"percentiles",queries:[99,90,50].map(ee=>D(ee)).map(p),vizBuilder:()=>r(k)},Q={..._,variant:"heatmap",queries:[E()],vizBuilder:()=>s(Q)};return{preview:K,main:k,variants:[k,Q],breakdown:j}}function p(W,N){return{...W,refId:String.fromCharCode("A".charCodeAt(0)+N)}}const m={generator:h},a=`rate(${t.Rp}${t.ui}[$__rate_interval])`;function v(W=[]){return`sum by(${["le",...W].join(", ")}) (${a})`}function E(W=[]){return{refId:"A",expr:v(W),format:"heatmap"}}function D(W,N=[]){return{refId:"A",expr:`histogram_quantile(${W/100}, ${v(N)})`,legendFormat:`${W}th Percentile`}}const b=`${t.Rp}${t.ui}`,P=`rate(${b}[$__rate_interval])`;function y(W){return W?P:b}const T={avg:"average",sum:"sum"};function M(W){return T[W]||W}function I({agg:W,rate:N,unit:V}){const G=y(N),_=N?`${M(W)} of rates per second`:`${M(W)}`,K={title:`${t.Rp}`,unit:V,variant:_},j={refId:"A",expr:`${W}(${G})`,legendFormat:`${t.Rp} (${_})`},k={...K,title:`${t.Rp} (${_})`,queries:[j],vizBuilder:()=>g({...k})},Q={...k,title:`${t.Rp}`,queries:[{...j,legendFormat:_}],vizBuilder:()=>g(Q)},ee={...K,queries:[{refId:"A",expr:`${W}(${G}) by(${t.aZ})`,legendFormat:`{{${t.aZ}}}`}],vizBuilder:()=>g(ee)};return{preview:Q,main:k,breakdown:ee,variants:[]}}const x=new Set(["count","total","sum"]),S={count:"sum",total:"sum",sum:"avg"};function O(W){return W==="total"||W==="sum"}function C(W){const N=W.at(-1);if(N==null)throw new Error("Invalid metric parameter");const V=x.has(N),G=O(N)?W.at(-2):N,_=V?c(G):d(G);return{agg:S[N]||"avg",unit:_,rate:V}}function L(W){const N=C(W);return I(N)}const U={generator:L},R={bucket:m.generator};function B(W){return W&&R[W]||U.generator}function H(W){const N=W.split("_"),V=N.at(-1),G=B(V);if(!G)throw new Error(`Unable to generate queries for metric "${W}" due to issues with derived suffix "${V}"`);return G(N)}},18919:(Y,A,e)=>{"use strict";e.d(A,{b:()=>T});var t=e(32196),n=e(96540),o=e(12131),s=e(79065),r=e(40845),g=e(15292),u=e(83122),d=e(27746);class i extends s.Bs{constructor(C){super({showQuery:C.showQuery??!1,showAdvanced:C.showAdvanced??!1,isOpen:C.isOpen??!1}),this.onToggleShowQuery=()=>{this.setState({showQuery:!this.state.showQuery})},this.onToggleAdvanced=()=>{this.setState({showAdvanced:!this.state.showAdvanced})},this.onToggleMultiValue=()=>{this.setState({multiValueVars:!this.state.multiValueVars})},this.onToggleOpen=L=>{this.setState({isOpen:L})}}}i.Component=({model:O})=>{const{showQuery:C,showAdvanced:L,multiValueVars:U,isOpen:R}=O.useState(),B=(0,r.of)(l),H=()=>n.createElement("div",{className:B.popover,onClick:W=>W.stopPropagation()},n.createElement("div",{className:B.heading},"Settings"),n.createElement("div",{className:B.options},n.createElement("div",null,"Multi value variables"),n.createElement(g.d,{value:U,onChange:O.onToggleMultiValue}),n.createElement("div",null,"Advanced options"),n.createElement(g.d,{value:L,onChange:O.onToggleAdvanced}),n.createElement("div",null,"Show query"),n.createElement(g.d,{value:C,onChange:O.onToggleShowQuery})));return n.createElement(u.m,{overlay:H,placement:"bottom",onVisibleChange:O.onToggleOpen},n.createElement(d.I,{icon:"cog",variant:"canvas",isOpen:R}))};function l(O){return{popover:(0,t.css)({display:"flex",padding:O.spacing(2),flexDirection:"column",background:O.colors.background.primary,boxShadow:O.shadows.z3,borderRadius:O.shape.borderRadius(),border:`1px solid ${O.colors.border.weak}`,zIndex:1,marginRight:O.spacing(2)}),heading:(0,t.css)({fontWeight:O.typography.fontWeightMedium,paddingBottom:O.spacing(2)}),options:(0,t.css)({display:"grid",gridTemplateColumns:"1fr 50px",rowGap:O.spacing(1),columnGap:O.spacing(2)})}}var f=e(67061),c=e(56034),h=e(4200),p=e(51080);class m extends s.Bs{constructor(C){super({steps:C.steps??[],currentStep:C.currentStep??0}),this.stepTransitionInProgress=!1,this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){const C=(0,p.kj)(this);this.state.steps.length===0&&this.addTrailStep(C,"start"),C.subscribeToState((L,U)=>{L.metric!==U.metric&&(this.state.steps.length===1&&(this.state.steps[0].trailState=s.Go.cloneSceneObjectState(U,{history:this})),L.metric&&this.addTrailStep(C,"metric"))}),C.subscribeToEvent(s.oh,L=>{L.payload.state.name===h.Ao&&this.addTrailStep(C,"filters")}),C.subscribeToEvent(s.bZ,L=>{if(L.payload.changedObject instanceof s.JZ){const{prevState:U,newState:R}=L.payload;if((0,p.iG)(U)&&(0,p.iG)(R)&&U.from===R.from&&U.to===R.to)return;this.addTrailStep(C,"time")}})}addTrailStep(C,L){if(this.stepTransitionInProgress)return;const U=this.state.steps.length,R=L==="start"?-1:this.state.currentStep;this.setState({currentStep:U,steps:[...this.state.steps,{description:"Test",type:L,trailState:s.Go.cloneSceneObjectState(C.state,{history:this}),parentIndex:R}]})}goBackToStep(C){this.stepTransitionInProgress=!0,this.setState({currentStep:C}),this.stepTransitionInProgress=!1}renderStepTooltip(C){return n.createElement(f.B,{direction:"column"},n.createElement("div",null,C.type),C.type==="metric"&&n.createElement("div",null,C.trailState.metric))}}m.Component=({model:O})=>{const{steps:C,currentStep:L}=O.useState(),U=(0,r.of)(a),{ancestry:R,alternatePredecessorStyle:B}=(0,n.useMemo)(()=>{const H=new Set;let W=L;for(;W>=0;)H.add(W),W=C[W].parentIndex;const N=new Map;return H.forEach(V=>{const G=C[V].parentIndex;G+1!==V&&N.set(V,E(V,G))}),{ancestry:H,alternatePredecessorStyle:N}},[L,C]);return n.createElement("div",{className:U.container},n.createElement("div",{className:U.heading},"History"),C.map((H,W)=>n.createElement(c.m,{content:()=>O.renderStepTooltip(H),key:W},n.createElement("button",{className:(0,t.cx)(U.step,U.stepTypes[H.type],O.state.currentStep===W?U.stepSelected:"",B.get(W)??"",W!==H.parentIndex+1?U.stepOmitsDirectLeftLink:"",W===0?U.stepOmitsDirectLeftLink:"",R.has(W)?"":U.stepIsNotAncestorOfCurrent),onClick:()=>O.goBackToStep(W)}))))};function a(O){const C=O.visualization;return{container:(0,t.css)({display:"flex",gap:10,alignItems:"center"}),heading:(0,t.css)({}),step:(0,t.css)({flexGrow:0,cursor:"pointer",border:"none",boxShadow:"none",padding:0,margin:0,width:8,height:8,opacity:.7,borderRadius:O.shape.radius.circle,background:O.colors.primary.main,position:"relative","&:hover":{opacity:1},"&:hover:before":{opacity:.7},"&:before":{content:'""',position:"absolute",width:10,height:2,left:-10,top:3,background:O.colors.primary.border,pointerEvents:"none"}}),stepSelected:(0,t.css)({"&:after":{content:'""',borderStyle:"solid",borderWidth:2,borderRadius:"50%",position:"absolute",width:16,height:16,left:-4,top:-4,boxShadow:`0px 0px 0px 2px inset ${O.colors.background.canvas}`}}),stepOmitsDirectLeftLink:(0,t.css)({"&:before":{background:"none"}}),stepIsNotAncestorOfCurrent:(0,t.css)({opacity:.2,"&:hover:before":{opacity:.2}}),stepTypes:{start:v(C.getColorByName("green")),filters:v(C.getColorByName("purple")),metric:v(C.getColorByName("orange")),time:v(O.colors.primary.main)}}}function v(O){return(0,t.css)({background:O,"&:before":{background:O,borderColor:O},"&:after":{borderColor:O}})}function E(O,C){const R=(O-C)*18;return(0,t.css)({"&:before":{content:'""',width:R+2,height:10,borderStyle:"solid",borderWidth:2,borderBottom:"none",borderTopLeftRadius:8,borderTopRightRadius:8,top:-10,left:3-R,background:"none"}})}var D=e(24440),b=e(32284),P=e(90623),y=e(4222);class T extends s.Bs{constructor(C){super({$timeRange:C.$timeRange??new s.JZ({}),$variables:C.$variables??I(C.initialDS,C.metric,C.initialFilters),controls:C.controls??[new s.K8({layout:"vertical"}),new s.N0,new s.KE({}),new s.WM({})],history:C.history??new m({}),settings:C.settings??new i({}),createdAt:C.createdAt??new Date().getTime(),...C}),this._urlSync=new s.So(this,{keys:["metric"]}),this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){return this.state.topScene||this.setState({topScene:M(this.state.metric)}),this.subscribeToEvent(h.OO,this._handleMetricSelectedEvent.bind(this)),this.state.history.subscribeToState((C,L)=>{const U=L.steps.length;if(C.steps.length>U||L.currentStep===C.currentStep)return;const H=C.steps[C.currentStep];this.goBackToStep(H)}),()=>{this.state.embedded||((0,s.Is)().cleanUp(this),(0,y._)().setRecentTrail(this))}}goBackToStep(C){this.state.embedded||(0,s.Is)().cleanUp(this),C.trailState.metric||(C.trailState.metric=void 0),this.setState(C.trailState),this.state.embedded||(o.Ny.replace((0,p.xi)(this)),(0,s.Is)().initSync(this))}_handleMetricSelectedEvent(C){this.state.embedded?this.setState(this.getSceneUpdatesForNewMetricValue(C.payload)):o.Ny.partial({metric:C.payload,actionView:null});const L=s.jh.lookupVariable(h.Ao,this);L instanceof s.H9&&L.setState({baseFilters:S(C.payload)})}getSceneUpdatesForNewMetricValue(C){const L={};return L.metric=C,L.topScene=M(C),L}getUrlState(){return{metric:this.state.metric}}updateFromUrl(C){const L={};typeof C.metric=="string"?this.state.metric!==C.metric&&Object.assign(L,this.getSceneUpdatesForNewMetricValue(C.metric)):C.metric===null&&(L.metric=void 0,L.topScene=new b.t({})),this.setState(L)}}T.Component=({model:O})=>{const{controls:C,topScene:L,history:U}=O.useState(),R=(0,r.of)(x),B=(0,y._)().recent.length<2;return n.createElement("div",{className:R.container},B&&n.createElement(P.p,null),n.createElement(U.Component,{model:U}),C&&n.createElement("div",{className:R.controls},C.map(H=>n.createElement(H.Component,{key:H.state.key,model:H}))),n.createElement("div",{className:R.body},L&&n.createElement(L.Component,{model:L})))};function M(O){return O?new D.R({metric:O}):new b.t({})}function I(O,C,L){return new s.Pj({variables:[new s.mI({name:h.EY,label:"Data source",value:O,pluginId:C===h.td?"loki":"prometheus"}),new s.H9({name:h.Ao,datasource:h.GH,layout:"vertical",filters:L??[],baseFilters:S(C)})]})}function x(O){return{container:(0,t.css)({flexGrow:1,display:"flex",gap:O.spacing(1),minHeight:"100%",flexDirection:"column"}),body:(0,t.css)({flexGrow:1,display:"flex",flexDirection:"column",gap:O.spacing(1)}),controls:(0,t.css)({display:"flex",gap:O.spacing(1),alignItems:"flex-end",flexWrap:"wrap"})}}function S(O){return O?[{key:"__name__",operator:"=",value:O}]:[]}},1997:(Y,A,e)=>{"use strict";e.d(A,{V:()=>I,l:()=>O});var t=e(32196),n=e(96540),o=e(24180),s=e(64388),r=e(12131),g=e(79065),u=e(40845),d=e(36830),i=e(67061),l=e(55852),f=e(94753),c=e(72724),h=e(10860),p=e(39938),m=e(29158),a=e(4200),v=e(51080);function E({trail:L,onSelect:U,onDelete:R}){const B=(0,u.of)(D),H=g.jh.lookupVariable(a.Ao,L);if(!(H instanceof g.H9))return null;const W=H.state.filters,N=(0,v.U4)(L);return n.createElement(h.Z,{onClick:()=>U(L),className:B.card},n.createElement(h.Z.Heading,null,(0,v.aO)(L.state.metric)),n.createElement("div",{className:B.description},n.createElement(i.B,{gap:1.5},W.map(V=>n.createElement(p.E,{key:V.key,text:`${V.key}: ${V.value}`,color:"blue",className:B.tag})))),n.createElement(h.Z.Actions,{className:B.actions},n.createElement(i.B,{gap:1,justifyContent:"space-between",grow:1},n.createElement("div",{className:B.secondary},n.createElement("b",null,"Datasource:")," ",(0,v.nH)(N)),L.state.createdAt&&n.createElement("i",{className:B.secondary},n.createElement("b",null,"Created:")," ",(0,c.LE)(L.state.createdAt,{format:"LL"})))),R&&n.createElement(h.Z.SecondaryActions,null,n.createElement(m.K,{key:"delete",name:"trash-alt",className:B.secondary,tooltip:"Remove bookmark",onClick:R})))}function D(L){return{tag:(0,t.css)({maxWidth:"260px",overflow:"hidden",textOverflow:"ellipsis"}),card:(0,t.css)({padding:L.spacing(1)}),secondary:(0,t.css)({color:L.colors.text.secondary,fontSize:"12px"}),description:(0,t.css)({width:"100%",gridArea:"Description",margin:L.spacing(1,0,0),color:L.colors.text.secondary,lineHeight:L.typography.body.lineHeight}),actions:(0,t.css)({marginRight:L.spacing(1)})}}var b=e(90623),P=e(4222);class y extends g.Bs{constructor(U){super(U),this.onNewMetricsTrail=()=>{const R=T(this),B=(0,v.ef)((0,v.hR)());(0,P._)().setRecentTrail(B),R.goToUrlForTrail(B)},this.onSelectTrail=R=>{const B=T(this);(0,P._)().setRecentTrail(R),B.goToUrlForTrail(R)}}}y.Component=({model:L})=>{const[U,R]=(0,n.useState)(Date.now()),B=(0,u.of)(M),H=W=>{(0,P._)().removeBookmark(W),R(Date.now())};if(!(0,P._)().recent.length){const W=(0,v.ef)((0,v.hR)());return n.createElement(o.rd,{to:(0,v.xi)(W)})}return n.createElement("div",{className:B.container},n.createElement(i.B,{gap:2,justifyContent:"space-between",alignItems:"center"},n.createElement(b.p,null),n.createElement(l.$n,{icon:"plus",size:"md",variant:"primary",onClick:L.onNewMetricsTrail},"New metric exploration")),n.createElement(i.B,{gap:5},n.createElement("div",{className:B.column},n.createElement(f.E,{variant:"h4"},"Recent metrics"),n.createElement("div",{className:B.trailList},(0,P._)().recent.map((W,N)=>{const V=W.resolve();return n.createElement(E,{key:(V.state.key||"")+N,trail:V,onSelect:L.onSelectTrail})}))),n.createElement("div",{className:B.verticalLine}),n.createElement("div",{className:B.column},n.createElement(f.E,{variant:"h4"},"Bookmarks"),n.createElement("div",{className:B.trailList},(0,P._)().bookmarks.map((W,N)=>{const V=W.resolve();return n.createElement(E,{key:(V.state.key||"")+N,trail:V,onSelect:L.onSelectTrail,onDelete:()=>H(N)})})))))};function T(L){return g.jh.getAncestor(L,I)}function M(L){return{container:(0,t.css)({padding:L.spacing(2),flexGrow:1,display:"flex",flexDirection:"column",gap:L.spacing(3)}),column:(0,t.css)({display:"flex",flexGrow:1,flexDirection:"column",gap:L.spacing(2)}),newTrail:(0,t.css)({height:"auto",justifyContent:"center",fontSize:L.typography.h5.fontSize}),trailCard:(0,t.css)({}),trailList:(0,t.css)({display:"flex",flexDirection:"column",gap:L.spacing(2)}),verticalLine:(0,t.css)({borderLeft:`1px solid ${L.colors.border.weak}`})}}class I extends g.Bs{constructor(U){super(U)}goToUrlForTrail(U){this.setState({trail:U}),r.Ny.push((0,v.xi)(U))}}I.Component=({model:L})=>{const{trail:U,home:R}=L.useState(),B=(0,u.of)(C);return n.createElement(o.dO,null,n.createElement(o.qh,{exact:!0,path:"/explore/metrics",render:()=>n.createElement(d.Y,{navId:"explore/metrics",layout:s.k.Custom},n.createElement("div",{className:B.customPage},n.createElement(R.Component,{model:R})))}),n.createElement(o.qh,{exact:!0,path:"/explore/metrics/trail",render:()=>n.createElement(d.Y,{navId:"explore/metrics",pageNav:{text:(0,v.aO)(U.state.metric)},layout:s.k.Custom},n.createElement("div",{className:B.customPage},n.createElement(x,{trail:U})))}))};function x({trail:L}){const[U,R]=n.useState(!1);return(0,n.useEffect)(()=>{U||((0,g.Is)().initSync(L),(0,P._)().setRecentTrail(L),R(!0))},[L,U]),U?n.createElement(L.Component,{model:L}):null}let S;function O(){return S||(S=new I({trail:(0,v.ef)(),home:new y({})})),S}function C(L){return{customPage:(0,t.css)({padding:L.spacing(2,3,2,3),background:L.isLight?L.colors.background.primary:L.colors.background.canvas,flexGrow:1,display:"flex",flexDirection:"column"})}}},24440:(Y,A,e)=>{"use strict";e.d(A,{R:()=>de});var t=e(32196),n=e(96540),o=e(94624),s=e(79065),r=e(40845),g=e(90613),u=e(67061),d=e(27746),i=e(14578),l=e(63021),f=e(40675),c=e(87490),h=e(88575),p=e(55852),m=e(13344),a=e(33449),v=e(16792),E=e(29413),D=e(94354),b=e(88323);function P({options:De,value:Re,onChange:me}){const he=(0,r.of)(y),Te=(0,r.$j)(),[Be,we]=(0,n.useState)(0),[Ne,Ze]=(0,n.useState)(0),st=Ne>Be,Qe=(0,n.useRef)(null);return(0,v.wY)({ref:Qe,onResize:()=>{const ke=Qe.current;ke&&Ze(ke.clientWidth)}}),(0,n.useEffect)(()=>{const{fontSize:ke}=Te.typography,je=De.map(Oe=>Oe.label||Oe.value||"").join(" "),He=(0,E.kD)(je,ke).width;we(He+32*De.length)},[De,Te]),n.createElement("div",{ref:Qe},st?n.createElement(D.z,{options:De,value:Re,onChange:me}):n.createElement(b.l6,{options:De,value:Re,onChange:ke=>me(ke.value),className:he.select}))}function y(De){return{select:(0,t.css)({maxWidth:De.spacing(16)})}}var T=e(4200),M=e(51080);class I extends s.Bs{constructor(){super(...arguments),this.onClick=()=>{const Re=s.jh.lookupVariable("filters",this);if(!(Re instanceof s.H9))return;const me=this.state.frame.fields[1]?.labels??{};if(Object.keys(me).length!==1)return;const he=Object.keys(me)[0];Re.setState({filters:[...Re.state.filters,{key:he,operator:"=",value:me[he]}]})}}}I.Component=({model:De})=>n.createElement(p.$n,{variant:"primary",size:"sm",fill:"text",onClick:De.onClick},"Add to filters");var x=e(39070);class S extends s.Bs{constructor(Re){super(Re),this.addActivationHandler(()=>{const me=s.jh.getData(this);this._subs.add(me.subscribeToState(he=>{he.data?.state===x.Gu.Done&&this.performRepeat(he.data)})),me.state.data&&this.performRepeat(me.state.data)})}performRepeat(Re){const me=[];for(let he=0;he<Re.series.length;he++){const Te=this.state.getLayoutChild(Re,Re.series[he],he);me.push(Te)}this.state.body.setState({children:me})}}S.Component=({model:De})=>{const{body:Re}=De.useState();return n.createElement(Re.Component,{model:Re})};class O extends s.Bs{constructor(){super(...arguments),this.onLayoutChange=Re=>{this.setState({active:Re})}}Selector({model:Re}){const{active:me,options:he}=Re.useState();return n.createElement(h.D,{label:"View"},n.createElement(D.z,{options:he,value:me,onChange:Re.onLayoutChange}))}}O.Component=({model:De})=>{const{layouts:Re,options:me,active:he}=De.useState(),Te=me.findIndex(we=>we.value===he);if(Te===-1)return null;const Be=Re[Te];return n.createElement(Be.Component,{model:Be})};function C(De,Re){const me=s.jh.lookupVariable(T.Ao,De),he=[];if(!(me instanceof s.H9))return[];const Te=me.state.filters;for(const Be of Re.getOptionsForSelect())Te.find(Ne=>Ne.key===Be.value)||he.push({label:Be.label,value:String(Be.value)});return he}class L extends s.Bs{constructor(Re){super({labels:Re.labels??[],...Re}),this._variableDependency=new s.Sh(this,{variableNames:[T.Ao],onReferencedVariableValueChanged:this.onReferencedVariableValueChanged.bind(this)}),this.onChange=me=>{if(!me)return;const he=this.getVariable();me===m.To?this.setState({body:R(this.state.labels,this._query)}):he.hasAllValue()&&this.setState({body:H(this._query)}),he.changeValueTo(me)},this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){const Re=this.getVariable();Re.subscribeToState((he,Te)=>{(he.options!==Te.options||he.value!==Te.value||he.loading!==Te.loading)&&this.updateBody(Re)});const me=s.jh.getAncestor(this,de).state.metric;this._query=(0,a.v)(me).breakdown,this.updateBody(Re)}getVariable(){const Re=s.jh.lookupVariable(T.yr,this);if(!(Re instanceof s.fS))throw new Error("Group by variable not found");return Re}onReferencedVariableValueChanged(){const Re=this.getVariable();Re.changeValueTo(m.To),this.updateBody(Re)}updateBody(Re){const me=C(this,Re),he={loading:Re.state.loading,value:String(Re.state.value),labels:me};Re.state.loading||(he.body=Re.hasAllValue()?R(me,this._query):H(this._query)),this.setState(he)}}L.Component=({model:De})=>{const{labels:Re,body:me,loading:he,value:Te}=De.useState(),Be=(0,r.of)(U);return n.createElement("div",{className:Be.container},he&&n.createElement("div",null,"Loading..."),n.createElement("div",{className:Be.controls},!he&&n.createElement("div",{className:Be.controlsLeft},n.createElement(h.D,{label:"By label"},n.createElement(P,{options:Re,value:Te,onChange:De.onChange}))),me instanceof O&&n.createElement("div",{className:Be.controlsRight},n.createElement(me.Selector,{model:me}))),n.createElement("div",{className:Be.content},me&&n.createElement(me.Component,{model:me})))};function U(De){return{container:(0,t.css)({flexGrow:1,display:"flex",minHeight:"100%",flexDirection:"column"}),content:(0,t.css)({flexGrow:1,display:"flex",paddingTop:De.spacing(0)}),controls:(0,t.css)({flexGrow:0,display:"flex",alignItems:"top",gap:De.spacing(2)}),controlsRight:(0,t.css)({flexGrow:0,display:"flex",justifyContent:"flex-end"}),controlsLeft:(0,t.css)({display:"flex",justifyContent:"flex-left",justifyItems:"left",width:"100%",flexDirection:"column"})}}function R(De,Re){const me=[];for(const he of De){if(he.value===m.To)continue;const Te=Re.queries[0].expr.replace(T.aZ,String(he.value)),Be=Re.unit;me.push(new s.xK({body:s.d0.timeseries().setTitle(he.label).setData(new s.dt({maxDataPoints:300,datasource:T.GH,queries:[{refId:"A",expr:Te,legendFormat:`{{${he.label}}}`}]})).setHeaderActions(new V({labelName:String(he.value)})).setUnit(Be).build()}))}return new O({options:[{value:"grid",label:"Grid"},{value:"rows",label:"Rows"}],active:"grid",layouts:[new s.gF({templateColumns:B,autoRows:"200px",children:me}),new s.gF({templateColumns:"1fr",autoRows:"200px",children:me})]})}const B="repeat(auto-fit, minmax(400px, 1fr))";function H(De){return new O({$data:new s.dt({datasource:T.GH,maxDataPoints:300,queries:De.queries}),options:[{value:"single",label:"Single"},{value:"grid",label:"Grid"},{value:"rows",label:"Rows"}],active:"grid",layouts:[new s.G1({direction:"column",children:[new s.vA({minHeight:300,body:s.d0.timeseries().setTitle("$metric").build()})]}),new S({body:new s.gF({templateColumns:B,autoRows:"200px",children:[]}),getLayoutChild:(Re,me,he)=>new s.xK({body:De.vizBuilder().setTitle(W(me)).setData(new s.Zv({data:{...Re,series:[me]}})).setColor({mode:"fixed",fixedColor:(0,M.Vy)(he)}).setHeaderActions(new I({frame:me})).build()})}),new S({body:new s.gF({templateColumns:"1fr",autoRows:"200px",children:[]}),getLayoutChild:(Re,me,he)=>new s.xK({body:De.vizBuilder().setTitle(W(me)).setData(new s.Zv({data:{...Re,series:[me]}})).setColor({mode:"fixed",fixedColor:(0,M.Vy)(he)}).setHeaderActions(new I({frame:me})).build()})})]})}function W(De){const Re=De.fields[1]?.labels;if(!Re)return"No labels";const me=Object.keys(Re);return me.length===0?"No labels":Re[me[0]]}function N(){return new s.vA({body:new L({})})}class V extends s.Bs{constructor(){super(...arguments),this.onClick=()=>{G(this).onChange(this.state.labelName)}}}V.Component=({model:De})=>n.createElement(p.$n,{variant:"primary",size:"sm",fill:"text",onClick:De.onClick},"Select");function G(De){if(De instanceof L)return De;if(De.parent)return G(De.parent);throw new Error("Unable to find breakdown scene")}var _=e(94753),K=e(72109),j=e(31193);class k extends s.Bs{constructor(Re){super({...Re}),this._variableDependency=new s.Sh(this,{variableNames:[T.gR],onReferencedVariableValueChanged:this.onReferencedVariableValueChanged.bind(this)}),this.addActivationHandler(this._onActivate.bind(this))}getVariable(){const Re=s.jh.lookupVariable(T.yr,this);if(!(Re instanceof s.fS))throw new Error("Group by variable not found");return Re}_onActivate(){this.updateMetadata()}onReferencedVariableValueChanged(){this.updateMetadata()}async updateMetadata(){const me=(await(0,j.tR)().get(T.gR,{__sceneObject:{value:this}})).languageProvider;if(!me)return;const Te=(0,M.aM)(this).state.metric;if(me.metricsMetadata){this.setState({metadata:me.metricsMetadata[Te]});return}await me.start(),this.setState({metadata:me.metricsMetadata?.[Te]})}}k.Component=({model:De})=>{const{metadata:Re}=De.useState(),me=De.getVariable(),{loading:he}=me.useState(),Te=C(De,me).filter(Be=>Be.value!==m.To);return n.createElement(u.B,{gap:6},he?n.createElement("div",null,"Loading..."):n.createElement(n.Fragment,null,n.createElement(u.B,{direction:"column",gap:.5},n.createElement(_.E,{weight:"medium"},"Description"),n.createElement("div",{style:{maxWidth:360}},Re?.help?n.createElement("div",null,Re?.help):n.createElement("i",null,"No description available"))),n.createElement(u.B,{direction:"column",gap:.5},n.createElement(_.E,{weight:"medium"},"Type"),Re?.type?n.createElement("div",null,Re?.type):n.createElement("i",null,"Unknown")),n.createElement(u.B,{direction:"column",gap:.5},n.createElement(_.E,{weight:"medium"},"Unit"),Re?.unit?n.createElement("div",null,Re?.unit):n.createElement("i",null,"Unknown")),n.createElement(u.B,{direction:"column",gap:.5},n.createElement(_.E,{weight:"medium"},"Labels"),Te.map(Be=>n.createElement(K.Y,{key:Be.label,href:s.jh.interpolate(De,`${T.km}\${__url.params:exclude:actionView,var-groupby}&actionView=breakdown&var-groupby=${encodeURIComponent(Be.value)}`),title:"View breakdown"},Be.label)))))};function Q(){return new s.vA({body:new k({})})}var ee=e(32284);function ae(){return new s.vA({body:new ee.t({})})}class Z extends s.Bs{constructor(Re){super(Re),this.onChangeQuery=me=>{const he=(0,M.aM)(this),Te=he.state.autoQuery.variants.find(Be=>Be.variant===me);this.setState({panel:this.getVizPanelFor(Te)}),he.setState({queryDef:Te})},this.addActivationHandler(this.onActivate.bind(this))}onActivate(){const{autoQuery:Re}=(0,M.aM)(this).state;this.setState({panel:this.getVizPanelFor(Re.main)})}getQuerySelector(Re){const{autoQuery:me}=(0,M.aM)(this).state;if(me.variants.length===0)return;const he=me.variants.map(Te=>({label:Te.variant,value:Te.variant}));return n.createElement(D.z,{size:"sm",options:he,value:Re.variant,onChange:this.onChangeQuery})}getVizPanelFor(Re){return Re.vizBuilder().setData(new s.dt({datasource:T.GH,maxDataPoints:500,queries:Re.queries})).setHeaderActions(this.getQuerySelector(Re)).build()}}Z.Component=({model:De})=>{const{panel:Re}=De.useState(),{queryDef:me}=(0,M.aM)(De).state,{showQuery:he}=(0,M.KE)(De).useState(),Te=(0,r.of)(ne);if(Re)return he?n.createElement("div",{className:Te.wrapper},n.createElement(u.B,{gap:2},n.createElement(h.D,{label:"Query"},n.createElement("div",null,me&&me.queries.map((Be,we)=>n.createElement("div",{key:we},Be.expr))))),n.createElement("div",{className:Te.panel},n.createElement(Re.Component,{model:Re}))):n.createElement(Re.Component,{model:Re})};function ne(){return{wrapper:(0,t.css)({display:"flex",flexDirection:"column",flexGrow:1}),panel:(0,t.css)({position:"relative",flexGrow:1})}}var q=e(87586);const te=({trail:De})=>{const{origin:Re}=(0,q.A)(),[me,he]=(0,n.useState)("Copy url"),Te=()=>{navigator.clipboard&&(navigator.clipboard.writeText(Re+(0,M.xi)(De)),he("Copied!"),setTimeout(()=>{he("Copy url")},2e3))};return n.createElement(d.I,{variant:"canvas",icon:"share-alt",tooltip:me,onClick:Te})};var re=e(4222);class de extends s.Bs{constructor(Re){const me=Re.autoQuery??(0,a.v)(Re.metric);super({$variables:Re.$variables??ye(Re.metric),body:Re.body??Me(),autoQuery:me,queryDef:Re.queryDef??me.main,...Re}),this._urlSync=new s.So(this,{keys:["actionView"]}),this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){this.state.actionView===void 0&&this.setActionView("overview")}getUrlState(){return{actionView:this.state.actionView}}updateFromUrl(Re){if(typeof Re.actionView=="string"){if(this.state.actionView!==Re.actionView){const me=ie.find(he=>he.value===Re.actionView);me&&this.setActionView(me.value)}}else Re.actionView===null&&this.setActionView(void 0)}setActionView(Re){const{body:me}=this.state,he=ie.find(Te=>Te.value===Re);he&&he.value!==this.state.actionView?(me.state.children[0].setState({maxHeight:pe}),me.setState({children:[...me.state.children.slice(0,2),he.getScene()]}),this.setState({actionView:he.value})):(me.state.children[0].setState({maxHeight:le}),me.setState({children:me.state.children.slice(0,2)}),this.setState({actionView:void 0}))}}de.Component=({model:De})=>{const{body:Re}=De.useState();return n.createElement(Re.Component,{model:Re})};const ie=[{displayName:"Overview",value:"overview",getScene:Q},{displayName:"Breakdown",value:"breakdown",getScene:N},{displayName:"Related metrics",value:"related",getScene:ae}];class ge extends s.Bs{constructor(){super(...arguments),this.onOpenTrail=()=>{this.publishEvent(new T.PK,!0)},this.getLinkToExplore=async()=>{const Re=s.jh.getAncestor(this,de),me=(0,M.kj)(this),he=(0,M.U4)(me),Te=Re.state.queryDef?.queries||[],Be=s.jh.getTimeRange(this);return(0,c.Xe)({queries:Te,dsRef:{uid:he},timeRange:Be.state.value,scopedVars:{__sceneObject:{value:Re}}})},this.openExploreLink=async()=>{this.getLinkToExplore().then(Re=>{window.open(Re,"_blank")})}}}ge.Component=({model:De})=>{const Re=s.jh.getAncestor(De,de),me=(0,r.of)(ve),he=(0,M.kj)(De),[Te,Be]=(0,n.useState)(!1),{actionView:we}=Re.useState(),Ne=()=>{(0,re._)().addBookmark(he),Be(!Te)};return n.createElement(g.a,{paddingY:1},n.createElement("div",{className:me.actions},n.createElement(u.B,{gap:1},n.createElement(d.I,{variant:"canvas",icon:"compass",tooltip:"Open in explore",onClick:De.openExploreLink}),n.createElement(te,{trail:he}),n.createElement(d.I,{variant:"canvas",icon:Te?n.createElement(i.I,{name:"favorite",type:"mono",size:"lg"}):n.createElement(i.I,{name:"star",type:"default",size:"lg"}),tooltip:"Bookmark",onClick:Ne}),he.state.embedded&&n.createElement(d.I,{variant:"canvas",onClick:De.onOpenTrail},"Open"))),n.createElement(l.U,null,ie.map((Ze,st)=>n.createElement(f.o,{key:st,label:Ze.displayName,active:we===Ze.value,onChangeTab:()=>Re.setActionView(Ze.value)}))))};function ve(De){return{actions:(0,t.css)({[De.breakpoints.up(De.breakpoints.values.md)]:{position:"absolute",right:0,zIndex:2}})}}function ye(De){return new s.Pj({variables:[...(0,T.ym)(De),new s.fS({name:T.yr,label:"Group by",datasource:T.GH,includeAll:!0,defaultToAll:!0,query:{query:`label_names(${T.Rp})`,refId:"A"},value:"",text:""})]})}const pe=280,le="40%";function Me(){const De=new Z({});return new s.G1({direction:"column",$behaviors:[new s.Gg.K2({key:"metricCrosshairSync",sync:o.y.Crosshair})],children:[new s.vA({minHeight:pe,maxHeight:le,body:De}),new s.vA({ySizing:"content",body:new ge({})})]})}},32284:(Y,A,e)=>{"use strict";e.d(A,{t:()=>W});var t=e(32196),n=e(2543),o=e(96540),s=e(12470),r=e(79065),g=e(79422),u=e(40845),d=e(39558),i=e(88575),l=e(10354),f=e(14578),c=e(15292),h=e(42418),p=e(33449),m=e(66864),a=e(3988),v=e(55852);function E(Q){return(0,o.useMemo)(()=>D(Q),[Q])}function D(Q){const ee={children:{}};function ae(Z){if(Z.indexOf(":")!==-1)return;const ne=Z.split("_");let q=ee;for(const te of ne){let re=q.children[te];re||(re={children:{}},q.children[te]=re),q=re}q.isMetric=!0}return Q.forEach(Z=>ae(Z)),ee}function b({metricNames:Q,onSelect:ee,disabled:ae,initialValue:Z}){const ne=E(Q),q=(0,o.useMemo)(()=>P(ne),[ne]),[te,re]=(0,o.useState)(Z==null),[de,ie]=(0,o.useReducer)(ve=>ve+1,0),ge=()=>{ie(),re(!0),ee(void 0)};return o.createElement(m.Gy,null,o.createElement(a.v,{key:de,displayAllSelectedLevels:!0,width:40,separator:"_",hideActiveLevelLabel:!1,placeholder:"No filter",onSelect:ve=>{re(!ve),ee(ve)},options:q,disabled:ae,initialValue:Z}),o.createElement(v.$n,{disabled:te||ae,onClick:ge,variant:"secondary"},"Clear"))}function P(Q,ee=""){return Object.entries(Q.children).map(([ne,q])=>{let te=Object.entries(q.children);for(;te.length===1&&!q.isMetric;){const[ge,ve]=te[0];ne=`${ne}_${ge}`,q=ve,te=Object.entries(q.children)}const re=ee+ne,de=P(q,re+"_");return{value:re,label:ne,items:de}})}var y=e(24440),T=e(4200);class M extends r.Bs{constructor(){super(...arguments),this.onClick=()=>{this.publishEvent(new T.OO(this.state.metric),!0)}}}M.Component=({model:Q})=>o.createElement(v.$n,{variant:"primary",size:"sm",fill:"text",onClick:Q.onClick},Q.state.title);var I=e(39070),x=e(11261);function S(Q){return ee=>{const ae=r.jh.getData(ee);ae&&ae.subscribeToState(Z=>{if(Z.data?.state===I.Gu.Loading||Z.data?.state===I.Gu.Error)return;const ne=r.jh.getAncestor(ee,W);if(!Z.data?.series.length){ne.updateMetricPanel(Q,!0,!0);return}let q=!1;for(const te of Z.data.series){for(const re of te.fields)if(re.type===x.PU.number&&(q=re.values.some(de=>de!=null&&!isNaN(de)&&de!==0),q))break;if(q)break}ne.updateMetricPanel(Q,!0,!q)})}}var O=e(51088);function C(Q,ee){return Q.sort((ae,Z)=>{const ne=U(ae,ee),q=U(Z,ee);return ne.halfLeven+ne.wholeLeven-(q.halfLeven+q.wholeLeven)})}const L=new Map;function U(Q,ee){let ae=L.get(Q);ae||(ae=new Map,L.set(Q,ae));let Z=ae.get(ee);if(!Z){const ne=Q.split("_"),q=ne.slice(0,ne.length/2).join("_"),te=(0,O.A)(q,ee)||0,re=(0,O.A)(Q,ee)||0;Z={halfLeven:te,wholeLeven:re},ae.set(ee,Z)}return Z}var R=e(51080);const B="175px",H="64px";class W extends r.Bs{constructor(ee){super({$variables:ee.$variables??N(),body:ee.body??new r.gF({children:[],templateColumns:"repeat(auto-fill, minmax(450px, 1fr))",autoRows:B,isLazy:!0}),showPreviews:!0,...ee}),this.previewCache={},this.ignoreNextUpdate=!1,this._variableDependency=new r.Sh(this,{variableNames:[T.MN,T.EY],onReferencedVariableValueChanged:ae=>{const{name:Z}=ae.state;Z===T.EY?this.state.body.setState({children:[]}):Z===T.MN&&(this.onMetricNamesChange(),this.updateMetrics(),this.buildLayout())}}),this.currentMetricNames=new Set,this.updateMetricPanel=(ae,Z,ne)=>{const q=this.previewCache[ae];q&&(q.isEmpty=ne,q.loaded=Z,this.previewCache[ae]=q,this.buildLayout())},this.onSearchQueryChange=ae=>{this.setState({searchQuery:ae.currentTarget.value}),this.searchQueryChangedDebounced()},this.searchQueryChangedDebounced=(0,n.debounce)(()=>{this.updateMetrics(),this.buildLayout()},500),this.onPrefixFilterChange=ae=>{this.setState({prefixFilter:ae}),this.prefixFilterChangedDebounced()},this.prefixFilterChangedDebounced=(0,n.debounce)(()=>{this.applyMetricPrefixFilter(),this.updateMetrics(!1),this.buildLayout()},1e3),this.onTogglePreviews=()=>{this.setState({showPreviews:!this.state.showPreviews}),this.buildLayout()},this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){this.state.body.state.children.length===0?this.buildLayout():this.ignoreNextUpdate=!0}sortedPreviewMetrics(){return Object.values(this.previewCache).sort((ee,ae)=>ee.isEmpty&&ae.isEmpty?ee.index-ae.index:ee.isEmpty?1:ae.isEmpty?-1:ee.index-ae.index)}onMetricNamesChange(){const ee=r.jh.lookupVariable(T.MN,this);if(!(ee instanceof r.fS)||ee.state.loading)return;const ae=ee.state.options.map(ne=>ne.value.toString()),Z=new Set(ae);Object.values(this.previewCache).forEach(ne=>{Z.has(ne.name)||(ne.isEmpty=!0)}),this.currentMetricNames=Z,this.buildLayout()}applyMetricSearch(){const ee=Array.from(this.currentMetricNames);if(ee==null)return;const ae=j(this.state.searchQuery);if(!ae)this.setState({metricsAfterSearch:ee});else{const Z=ee.filter(ne=>!ae||ae.test(ne));this.setState({metricsAfterSearch:Z})}}applyMetricPrefixFilter(){const{metricsAfterSearch:ee,prefixFilter:ae}=this.state;if(!ae||!ee)this.setState({metricsAfterFilter:ee});else{const Z=ee.filter(ne=>ne.startsWith(ae));this.setState({metricsAfterFilter:Z})}}updateMetrics(ee=!0){ee&&(this.applyMetricSearch(),this.applyMetricPrefixFilter());const{metricsAfterFilter:ae}=this.state;if(!ae)return;const Z=ae,ne=(0,R.kj)(this),q=ne.state.metric!==void 0?C(Z,ne.state.metric):Z,te={},re=120;Object.keys(this.previewCache).forEach(de=>{this.currentMetricNames.has(de)||delete this.previewCache[de]});for(let de=0;de<q.length;de++){const ie=q[de];if(Object.keys(te).length>re)break;const ve=this.previewCache[ie]||{name:ie,index:de,loaded:!1};te[ie]=ve}try{const de=r.jh.getAncestor(this,y.R).state.metric;delete te[de]}catch{}this.previewCache=te}buildLayout(){if(this.ignoreNextUpdate){this.ignoreNextUpdate=!1;return}const ee=r.jh.lookupVariable(T.MN,this);if(!(ee instanceof r.fS)||ee.state.loading)return;Object.keys(this.previewCache).length||this.updateMetrics();const ae=[],Z=this.sortedPreviewMetrics();//!this.justChangedTimeRange ? this.sortedPreviewMetrics() : Object.values(this.previewCache);
for(let q=0;q<Z.length;q++){const te=Z[q];if(this.state.showPreviews){if(te.itemRef&&te.isPanel){ae.push(te.itemRef.resolve());continue}const re=V(te.name,q);te.itemRef=re.getRef(),te.isPanel=!0,ae.push(re)}else{const re=new r.xK({$variables:new r.Pj({variables:(0,T.ym)(te.name)}),body:G(te.name)});te.itemRef=re.getRef(),te.isPanel=!1,ae.push(re)}}const ne=this.state.showPreviews?B:H;this.state.body.setState({children:ae,autoRows:ne})}}W.Component=({model:Q})=>{const{searchQuery:ee,showPreviews:ae,body:Z,metricsAfterSearch:ne,metricsAfterFilter:q,prefixFilter:te}=Q.useState(),{children:re}=Z.useState(),de=(0,u.of)(_),ie=k(T.MN,Q),ge=re.length===0&&(ee||te),ve=!ie.isLoading&&Q.currentMetricNames.size===0,ye=ie.isLoading&&re.length===0&&o.createElement(d._,{className:de.statusMessage,text:"Loading..."})||ve&&"There are no results found. Try a different time range or a different data source."||ge&&"There are no results found. Try adjusting your search or filters.",pe=ye&&o.createElement("div",{className:de.statusMessage},ye),le=te&&ne!=null&&!q?.length?"The current prefix filter is not available with the current search terms.":void 0,Me=ie.error||ie.isLoading;return o.createElement("div",{className:de.container},o.createElement("div",{className:de.header},o.createElement(i.D,{label:"Search metrics",className:de.searchField},o.createElement(l.p,{placeholder:"Search metrics",prefix:o.createElement(f.I,{name:"search"}),value:ee,onChange:Q.onSearchQueryChange,disabled:Me})),o.createElement(c.K,{showLabel:!0,label:"Show previews",value:ae,onChange:Q.onTogglePreviews,disabled:Me})),o.createElement("div",{className:de.header},o.createElement(i.D,{label:"Filter by prefix",error:le,invalid:!!le},o.createElement(b,{metricNames:ne||[],onSelect:Q.onPrefixFilterChange,disabled:Me,initialValue:te}))),ie.error&&o.createElement(h.F,{title:"Unable to retrieve metric names",severity:"error"},o.createElement("div",null,"We are unable to connect to your data source. Double check your data source URL and credentials."),o.createElement("div",null,"(",ie.error,")")),pe,o.createElement(Q.state.body.Component,{model:Q.state.body}))};function N(){return new r.Pj({variables:[new r.fS({name:T.MN,datasource:T.GH,hide:g.zL.hideVariable,includeAll:!0,defaultToAll:!0,skipUrlSync:!0,refresh:s.CO.onTimeRangeChanged,query:{query:`label_values(${T.ui},__name__)`,refId:"A"}})]})}function V(Q,ee){const ae=(0,p.v)(Q),Z=ae.preview.vizBuilder().setColor({mode:"fixed",fixedColor:(0,R.Vy)(ee)}).setHeaderActions(new M({metric:Q,title:"Select"})).build();return new r.xK({$variables:new r.Pj({variables:(0,T.ym)(Q)}),$behaviors:[S(Q)],$data:new r.dt({datasource:T.GH,maxDataPoints:200,queries:ae.preview.queries}),body:Z})}function G(Q){return r.d0.text().setTitle(Q).setHeaderActions(new M({metric:Q,title:"Select"})).setOption("content","").build()}function _(Q){return{container:(0,t.css)({display:"flex",flexDirection:"column",flexGrow:1}),headingWrapper:(0,t.css)({marginBottom:Q.spacing(.5)}),header:(0,t.css)({flexGrow:0,display:"flex",gap:Q.spacing(2),marginBottom:Q.spacing(1),alignItems:"flex-end"}),statusMessage:(0,t.css)({fontStyle:"italic",marginTop:Q.spacing(7),textAlign:"center"}),searchField:(0,t.css)({flexGrow:1,marginBottom:0})}}const K=/[^a-z0-9_:]+/;function j(Q){if(!Q)return null;const ee=Q?.toLowerCase().split(K).filter(Z=>Z.length>0).map(Z=>`(?=(.*${Z}.*))`);if(ee.length===0)return null;const ae=ee.join("");return new RegExp(ae,"igy")}function k(Q,ee){const ae=r.jh.lookupVariable(T.MN,ee),Z=(0,o.useCallback)(()=>{if(ae)return ae.useState()},[ae]),{error:ne,loading:q}=Z()||{};return{isLoading:!!q,error:ne}}},90623:(Y,A,e)=>{"use strict";e.d(A,{p:()=>s});var t=e(96540),n=e(67061),o=e(94753);const s=()=>t.createElement(n.B,{direction:"column",gap:1},t.createElement(o.E,{variant:"h1"},"Metrics"),t.createElement(o.E,{color:"secondary"},"Explore your Prometheus-compatible metrics without writing a query"))},4222:(Y,A,e)=>{"use strict";e.d(A,{_:()=>i});var t=e(2543),n=e.n(t),o=e(79065),s=e(18919),r=e(4200);const g=20;class u{constructor(){this._recent=[],this._bookmarks=[],this.load(),this._save=(0,t.debounce)(()=>{const c=this._recent.slice(0,g).map(p=>this._serializeTrail(p.resolve()));localStorage.setItem(r.sQ,JSON.stringify(c));const h=this._bookmarks.map(p=>this._serializeTrail(p.resolve()));localStorage.setItem(r.me,JSON.stringify(h))},1e3)}_loadFromStorage(c){const h=[],p=localStorage.getItem(c);if(p){const m=JSON.parse(p);for(const a of m){const v=this._deserializeTrail(a);h.push(v.getRef())}}return h}_deserializeTrail(c){const h=new s.b({createdAt:c.createdAt});c.history.map(m=>{this._loadFromUrl(h,m.urlValues);const a=m.parentIndex??h.state.history.state.steps.length-1;h.state.history.setState({currentStep:a}),h.state.history.addTrailStep(h,m.type)});const p=c.currentStep??h.state.history.state.steps.length-1;return h.state.history.setState({currentStep:p}),h}_serializeTrail(c){return{history:c.state.history.state.steps.map(p=>{const m=new s.b(o.Go.cloneSceneObjectState(p.trailState));return{urlValues:(0,o.Is)().getUrlState(m),type:p.type,description:p.description,parentIndex:p.parentIndex}}),currentStep:c.state.history.state.currentStep,createdAt:c.state.createdAt}}_loadFromUrl(c,h){c.urlSync?.updateFromUrl(h),c.forEachChild(p=>this._loadFromUrl(p,h))}get recent(){return this._recent}load(){this._recent=this._loadFromStorage(r.sQ),this._bookmarks=this._loadFromStorage(r.me)}setRecentTrail(c){this._recent=this._recent.filter(p=>p!==c.getRef());const h=l(this._serializeTrail(c))||{};this._recent=this._recent.filter(p=>{const m=l(this._serializeTrail(p.resolve()));return!(0,t.isEqual)(h,m)}),this._recent.unshift(c.getRef()),this._save()}get bookmarks(){return this._bookmarks}addBookmark(c){this._bookmarks.unshift(c.getRef()),this._save()}removeBookmark(c){c<this._bookmarks.length&&(this._bookmarks.splice(c,1),this._save())}}let d;function i(){return d||(d=new u),d}function l({history:f,currentStep:c}){return f[c]?.urlValues||f.at(-1)?.urlValues}},4200:(Y,A,e)=>{"use strict";e.d(A,{Ao:()=>g,EY:()=>c,GH:()=>E,MN:()=>r,OO:()=>y,PK:()=>T,Rp:()=>i,aZ:()=>f,gR:()=>h,km:()=>s,me:()=>b,sQ:()=>D,td:()=>a,ui:()=>u,ym:()=>P,yr:()=>l});var t=e(65463),n=e(79065),o=e(79422);const s="/explore/metrics/trail",r="metricNames",g="filters",u="{${filters}}",d="metric",i="${metric}",l="groupby",f="${groupby}",c="ds",h="${ds}",p="logsDs",m="${logsDs}",a="$__logs__",v="sqr-metric-viz-query",E={uid:h},D="grafana.trails.recent",b="grafana.trails.bookmarks";function P(M){return[new n.x0({name:d,value:M,hide:o.zL.hideVariable})]}class y extends t.x{}y.type="metric-selected-event";class T extends t.a{}T.type="open-embedded-trail-event"},51080:(Y,A,e)=>{"use strict";e.d(A,{KE:()=>f,U4:()=>a,Vy:()=>b,aM:()=>m,aO:()=>E,ef:()=>c,hR:()=>D,iG:()=>P,kj:()=>l,nH:()=>v,xi:()=>h});var t=e(76885),n=e(19347),o=e(32264),s=e(79065),r=e(31193),g=e(18919),u=e(24440),d=e(4222),i=e(4200);function l(y){return s.jh.getAncestor(y,g.b)}function f(y){return s.jh.getAncestor(y,g.b).state.settings}function c(y){return new g.b({initialDS:y,$timeRange:new s.JZ({from:"now-1h",to:"now"}),embedded:!1})}function h(y){const T=(0,s.Is)().getUrlState(y);return p(T)}function p(y){return t.kM.renderUrl(i.km,y)}function m(y){if(y instanceof u.R)return y;if(y.parent)return m(y.parent);throw console.error("Unable to find graph view for",y),new Error("Unable to find trail")}function a(y){return s.jh.interpolate(y,i.gR)}function v(y){return(0,n.l)().getInstanceSettings(y)?.name||y}function E(y){return y?y===i.td?"Logs":y:"Select metric"}function D(){const y=(0,d._)().recent[0];if(y){const M=s.jh.interpolate(y.resolve(),i.gR);if(typeof M=="string"&&M.length>0)return M}const T=(0,r.tR)().getList({type:"prometheus"});if(T.length>0)return T.find(M=>M.uid===o.$.defaultDatasource)?.uid??T[0].uid}function b(y){const T=o.$.theme2.visualization;return T.getColorByName(T.palette[y%8])}function P(y){const T=Object.keys(y);return T.includes("from")&&T.includes("to")}},27825:(Y,A,e)=>{"use strict";e.d(A,{J:()=>m});var t=e(52622),n=e(38248),o=e(96540),s=e(91890),r=e(72574),g=e(32264),u=e(66864),d=e(94354),i=e(10354),l=e(88841),f=e(94397);const c=[{label:"Size",value:t.J1.Size,description:"Split the buckets based on size"},{label:"Count",value:t.J1.Count,description:"Split the buckets based on count"}],h=[{label:"Split",value:t.J1.Size,description:"Split the buckets based on size"}],p=({value:a,onChange:v,item:E})=>{const[D,b]=(0,o.useState)(!1),P=M=>{b(!(0,f.N_)(M)),v({...a,value:M})},T=(0,r.w)().getVariables().map(M=>({value:M.name,label:M.label||M.name,origin:s.$0.Template}));return o.createElement(u.Gy,null,o.createElement(d.z,{value:a?.mode||t.J1.Size,options:a?.scale?.type===t.L4.Log?h:c,onChange:M=>{v({...a,mode:M})}}),g.$.featureToggles.transformationsVariableSupport?o.createElement(l.y,{invalid:D,error:"Value needs to be an integer or a variable",value:a?.value??"",placeholder:"Auto",onChange:P,suggestions:T}):o.createElement(i.p,{value:a?.value??"",placeholder:"Auto",onChange:M=>{v({...a,value:M.currentTarget.value})}}))};function m(a,v,E,D){v.addCustomEditor({id:"xBuckets",path:`${a}xBuckets`,name:"X Bucket",editor:p,category:D,defaultValue:{mode:t.J1.Size}}),v.addCustomEditor({id:"yBuckets",path:`${a}yBuckets`,name:"Y Bucket",editor:p,category:D,defaultValue:{mode:t.J1.Size}}),v.addCustomEditor({id:"yBuckets-scale",path:`${a}yBuckets.scale`,name:"Y Bucket scale",category:D,editor:n.W,defaultValue:{type:t.L4.Linear}})}},3290:(Y,A,e)=>{"use strict";e.d(A,{VQ:()=>G,wY:()=>U,Nb:()=>W,eE:()=>H,yJ:()=>N});var t=e(81160),n=e(18282),o=e(81010),s=e(11261),r=e(28240),g=e(83195),u=e(41260),d=e(70416),i=e(77678),l=e(73060),f=e(32264),c=e(52622),h=e(97706);const{abs:p,pow:m}=Math,a=new Map;function v(k,Q,ee,ae){let Z=[],ne=ae.map(h.E);for(let q=Q;q<ee;q++){let te=p(q),re=(0,h.h)(m(k,q),te);for(let de=0;de<ae.length;de++){let ie=ae[de]*re,ge=(ie>=0&&q>=0?0:te)+(q>=ne[de]?0:ne[de]),ve=(0,h.h)(ie,ge);Z.push(ve),a.set(ve,ge)}}return Z}const E=k=>k%1===0,D=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5],b=v(10,-16,0,D),P=v(10,0,16,D),y=P.filter(E),T=b.concat(P),M=b.concat(y),I=1*1e3,x=60*I,S=60*x,O=24*S,C=365*O,L=[1,2,4,5,10,20,25,40,50,100,200,250,400,500,I,2*I,4*I,5*I,10*I,15*I,20*I,30*I,x,2*x,4*x,5*x,10*x,15*x,20*x,30*x,S,2*S,4*S,6*S,8*S,12*S,18*S,O,2*O,3*O,4*O,5*O,6*O,7*O,10*O,15*O,30*O,45*O,60*O,90*O,180*O,C,2*C,3*C,4*C,5*C,6*C,7*C,8*C,9*C,10*C],U={id:n.F.heatmap,name:"Create heatmap",description:"Generate heatmap data from source data.",defaultOptions:{},isApplicable:k=>{const{xField:Q,yField:ee,xs:ae,ys:Z}=_(k);return Q||ee||!ae.length||!Z.length?o.M.NotPossible:o.M.Applicable},isApplicableDescription:"The Heatmap transformation requires fields with Heatmap compatible data. No fields with Heatmap data could be found.",operator:(k,Q)=>ee=>ee.pipe((0,t.T)(ae=>{if(f.$.featureToggles.transformationsVariableSupport){const Z={...k,xBuckets:{...k.xBuckets},yBuckets:{...k.yBuckets}};return Z.xBuckets?.value&&(Z.xBuckets.value=Q.interpolate(Z.xBuckets.value)),Z.yBuckets?.value&&(Z.yBuckets.value=Q.interpolate(Z.yBuckets.value)),U.transformer(Z,Q)(ae)}else return U.transformer(k,Q)(ae)})),transformer:k=>Q=>{const ee=G(Q,k);return k.keepOriginalData?[ee,...Q]:[ee]}};function R(k){return k==="+Inf"?1/0:k==="-Inf"?-1/0:+(k??0)}function B(k,Q){return R(k)-R(Q)}function H(k){return k?.meta?.custom??{}}function W(k){let Q=!1;for(let ee of k.fields)switch(ee.name){case"y":case"yMin":case"yMax":if(Q)return!1;Q=!0}return Q}function N(k){const Q=k.frame.fields[0],ee=Q.values,ae=k.frame.fields.filter((ye,pe)=>ye.type===s.PU.number&&pe>0),Z=ee.length*ae.length,ne=new Array(Z),q=new Array(Z),te=new Array(Z),re=ae.map(ye=>ye.values.slice());re.forEach((ye,pe)=>{for(let le=0;le<ye.length;le++)te[re.length*le+pe]=ye[le]});const de=Array.from({length:ae.length},(ye,pe)=>pe);for(let ye=0,pe=0,le=0;ye<Z;pe=++ye%de.length)q[ye]=de[pe],pe===0&&ye>=de.length&&le++,ne[ye]=ee[le];let ie=ae[0].labels?.le!=null?"yMax":"y";switch(k.layout){case c.D7.le:ie="yMax";break;case c.D7.ge:ie="yMin";break;case c.D7.unknown:ie="y";break}const ge={yOrdinalDisplay:ae.map(ye=>(0,r.Ct)(ye,k.frame)),yMatchWithLabel:Object.keys(ae[0].labels??{})[0]};if(ge.yMatchWithLabel&&(ge.yOrdinalLabel=ae.map(ye=>ye.labels?.[ge.yMatchWithLabel]??""),ge.yMatchWithLabel==="le"&&(ge.yMinDisplay="0.0")),k.unit?.length||k.decimals!=null){const ye=(0,g.j_)(k.unit??"short");ge.yMinDisplay&&(ge.yMinDisplay=(0,g.cN)(ye(0,k.decimals))),ge.yOrdinalDisplay=ge.yOrdinalDisplay.map(pe=>{let le=+pe;return Number.isNaN(le)?pe:(0,g.cN)(ye(le,k.decimals))})}const ve={...ae[0].config};return ve.displayNameFromDS&&delete ve.displayNameFromDS,{length:ne.length,refId:k.frame.refId,meta:{type:u.m.HeatmapCells,custom:ge},fields:[{name:Q.type===s.PU.time?"xMax":"x",type:Q.type,values:ne,config:Q.config},{name:ie,type:s.PU.number,values:q,config:{unit:"short"}},{name:k.value?.length?k.value:"Value",type:s.PU.number,values:te,config:ve,display:ae[0].display}]}}function V(k){k=k.slice(),k.sort((ee,ae)=>B(ee.name,ae.name));const Q=k.map(ee=>ee.fields[1].values.slice());return Q.reverse(),Q.forEach((ee,ae)=>{if(ae<Q.length-1)for(let Z=0;Z<ee.length;Z++)ee[Z]-=Q[ae+1][Z]}),Q.reverse(),k.map((ee,ae)=>({...ee,fields:[ee.fields[0],{...ee.fields[1],values:Q[ae]}]}))}function G(k,Q){const{xField:ee,yField:ae,xs:Z,ys:ne}=_(k);if(!ee||!ae)throw"no heatmap fields found";if(!Z.length||!ne.length)throw"no values found";const q=Q.xBuckets??{},te=Q.yBuckets??{};if(q.scale?.type===c.L4.Log)throw"X axis only supports linear buckets";const re=Q.yBuckets?.scale??{type:c.L4.Linear},de=K(Z,ne,{xSorted:(0,l.g2)(Z),xTime:ee.type===s.PU.time,xMode:q.mode,xSize:q.mode===c.J1.Size?(0,d.WT)((0,d.E9)(q.value??"")):q.value?+q.value:void 0,yMode:te.mode,ySize:te.value?+te.value:void 0,yLog:re?.type===c.L4.Log?re?.log:void 0});return{length:de.x.length,name:(0,r.Ct)(ae),meta:{type:u.m.HeatmapCells},fields:[{name:"xMin",type:ee.type,values:de.x,config:ee.config},{name:"yMin",type:s.PU.number,values:de.y,config:{...ae.config,custom:{scaleDistribution:re}}},{name:"Count",type:s.PU.number,values:de.count,config:{unit:"short"}}]}}function _(k){let Q,ee,ae=0;for(let te of k)te.fields.find(de=>de.type===s.PU.time)&&(ae+=te.length);let Z=Array(ae),ne=Array(ae),q=0;for(let te of k){const re=te.fields.find(ie=>ie.type===s.PU.time);if(!re)continue;Q||(Q=re);const de=re.values;for(let ie of te.fields)if(ie!==re&&ie.type===s.PU.number){const ge=ie.values;for(let ve=0;ve<de.length;ve++,q++)Z[q]=de[ve],ne[q]=ge[ve];ee||(ee=ie)}}return{xField:Q,yField:ee,xs:Z,ys:ne}}function K(k,Q,ee){let ae=k.length,Z=ee?.xSorted??!1,ne=ee?.ySorted??!1,q=Z?k[0]:1/0,te=ne?Q[0]:1/0,re=Z?k[ae-1]:-1/0,de=ne?Q[ae-1]:-1/0,ie=ee?.yLog;for(let st=0;st<ae;st++)Z||(q=Math.min(q,k[st]),re=Math.max(re,k[st])),ne||(!ie||Q[st]>0)&&(te=Math.min(te,Q[st]),de=Math.max(de,Q[st]));let ge=ee?.xSize??0,ve=ee?.ySize??0,ye=ee?.xMode,pe=ee?.yMode;if((!Number.isFinite(ge)||ge<=0)&&(ye=c.J1.Count,ge=20),(!Number.isFinite(ve)||ve<=0)&&(pe=c.J1.Count,ve=10),ye===c.J1.Count){let st=(re-q)/Math.max(ge-1,1),Qe=ee?.xTime?L:M,ke=Qe.findIndex(je=>je>st)-1;ge=Qe[Math.max(ke,0)]}if(pe===c.J1.Count){let st=(de-te)/Math.max(ve-1,1),Qe=ee?.yTime?L:M,ke=Qe.findIndex(je=>je>st)-1;ve=Qe[Math.max(ke,0)]}let le=ee?.xCeil?st=>(0,i.Uh)(st,ge):st=>(0,i.rs)(st,ge),Me=ee?.yCeil?st=>(0,i.Uh)(st,ve):st=>(0,i.rs)(st,ve);if(ie){ve=1/(ee?.ySize??1);let st=ie===2?Math.log2:Math.log10;Me=ee?.yCeil?Qe=>(0,i.Uh)(st(Qe),ve):Qe=>(0,i.rs)(st(Qe),ve)}let De=le(q),Re=le(re),me=Me(te),he=Me(de),Te=Math.round((Re-De)/ge)+1,Be=Math.round((he-me)/ve)+1,[we,Ne,Ze]=j(Te,Be,De,ge,me,ve,ie);for(let st=0;st<ae;st++){if(ie&&Q[st]<=0)continue;const Qe=(le(k[st])-De)/ge,ke=(Me(Q[st])-me)/ve,je=Qe*Be+ke;Ze[je]++}return{x:we,y:Ne,count:Ze}}function j(k,Q,ee,ae,Z,ne,q){const te=k*Q,re=new Array(te),de=new Array(te),ie=new Array(te);for(let ge=0,ve=0,ye=ee;ge<te;ve=++ge%Q)ie[ge]=0,q?de[ge]=q**(Z+ve*ne):de[ge]=Z+ve*ne,ve===0&&ge>=Q&&(ye+=ae),re[ge]=ye;return[re,de,ie]}},91847:(Y,A,e)=>{"use strict";e.d(A,{$n:()=>o,g_:()=>t,uk:()=>n});var t=(r=>(r.ShortcodeFigure="shortcodeFigure",r.UIImage="uiImage",r))(t||{});const n={calculateField:{name:"Add field from calculation",getHelperDocs:function(r="shortcodeFigure"){return`
  Use this transformation to add a new field calculated from two other fields. Each transformation allows you to add one new field.

  - **Mode** - Select a mode:
    - **Reduce row** - Apply selected calculation on each row of selected fields independently.
    - **Binary operation** - Apply basic binary operations (for example, sum or multiply) on values in a single row from two selected fields.
    - **Unary operation** - Apply basic unary operations on values in a single row from a selected field. The available operations are:
      - **Absolute value (abs)** - Returns the absolute value of a given expression. It represents its distance from zero as a positive number.
      - **Natural exponential (exp)** - Returns _e_ raised to the power of a given expression.
      - **Natural logarithm (ln)** - Returns the natural logarithm of a given expression.
      - **Floor (floor)** - Returns the largest integer less than or equal to a given expression.
      - **Ceiling (ceil)** - Returns the smallest integer greater than or equal to a given expression.
    - **Cumulative functions** - Apply functions on the current row and all preceding rows.
      - **Total** - Calculates the cumulative total up to and including the current row.
      - **Mean** - Calculates the mean up to and including the current row.
    - **Window functions** - Apply window functions. The window can either be **trailing** or **centered**.
      With a trailing window the current row will be the last row in the window. 
      With a centered window the window will be centered on the current row. 
      For even window sizes, the window will be centered between the current row, and the previous row. 
      - **Mean** - Calculates the moving mean or running average.
      - **Stddev** - Calculates the moving standard deviation.
      - **Variance** - Calculates the moving variance.
    - **Row index** - Insert a field with the row index.
  - **Field name** - Select the names of fields you want to use in the calculation for the new field.
  - **Calculation** - If you select **Reduce row** mode, then the **Calculation** field appears. Click in the field to see a list of calculation choices you can use to create the new field. For information about available calculations, refer to [Calculation types][].
  - **Operation** - If you select **Binary operation** or **Unary operation** mode, then the **Operation** fields appear. These fields allow you to apply basic math operations on values in a single row from selected fields. You can also use numerical values for binary operations.
  - **As percentile** - If you select **Row index** mode, then the **As percentile** switch appears. This switch allows you to transform the row index as a percentage of the total number of rows.
  - **Alias** - (Optional) Enter the name of your new field. If you leave this blank, then the field will be named to match the calculation.
  - **Replace all fields** - (Optional) Select this option if you want to hide all other fields and display only your calculated field in the visualization.
  
  > **Note:** **Cumulative functions** and **Window functions** modes are currently in public preview. Grafana Labs offers limited support, and breaking changes might occur prior to the feature being made generally available. Enable the \`addFieldFromCalculationStatFunctions\` feature toggle in Grafana to use this feature. Contact Grafana Support to enable this feature in Grafana Cloud.

  In the example below, we added two fields together and named them Sum.

  ${s("/static/img/docs/transformations/add-field-from-calc-stat-example-7-0.png",r,"A stat visualization including one field called Sum")}
  `},links:[{title:"Calculation types",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/calculation-types/"}]},concatenate:{name:"Concatenate fields",getHelperDocs:function(){return`
  Use this transformation to combine all fields from all frames into one result.
  
  For example, if you have separate queries retrieving temperature and uptime data (Query A) and air quality index and error information (Query B), applying the concatenate transformation yields a consolidated data frame with all relevant information in one view.

  Consider the following:

  **Query A:**

  | Temp  | Uptime    |
  | ----- | --------- |
  | 15.4  | 1230233   |

  **Query B:**

  | AQI   | Errors |
  | ----- | ------ |
  | 3.2   | 5      |

  After you concatenate the fields, the data frame would be:

  | Temp  | Uptime   | AQI   | Errors |
  | ----- | -------- | ----- | ------ |
  | 15.4  | 1230233  | 3.2   | 5      |

  This transformation simplifies the process of merging data from different sources, providing a comprehensive view for analysis and visualization.
  `}},configFromData:{name:"Config from query results",getHelperDocs:function(){return`
  Use this transformation to select a query and extract standard options, such as **Min**, **Max**, **Unit**, and **Thresholds**, and apply them to other query results. This feature enables dynamic visualization configuration based on the data returned by a specific query.

  #### Options

  - **Config query** - Select the query that returns the data you want to use as configuration.
  - **Apply to** - Select the fields or series to which the configuration should be applied.
  - **Apply to options** - Specify a field type or use a field name regex, depending on your selection in **Apply to**.

  #### Field mapping table

  Below the configuration options, you'll find the field mapping table. This table lists all fields found in the data returned by the config query, along with **Use as** and **Select** options. It provides control over mapping fields to config properties, and for multiple rows, it allows you to choose which value to select.

  #### Example

  Input[0] (From query: A, name: ServerA)

  | Time          | Value |
  | ------------- | ----- |
  | 1626178119127 | 10    |
  | 1626178119129 | 30    |

  Input[1] (From query: B)

  | Time          | Value |
  | ------------- | ----- |
  | 1626178119127 | 100   |
  | 1626178119129 | 100   |

  Output (Same as Input[0] but now with config on the Value field)

  | Time          | Value (config: Max=100) |
  | ------------- | ----------------------- |
  | 1626178119127 | 10                      |
  | 1626178119129 | 30                      |

  Each row in the source data becomes a separate field. Each field now has a maximum configuration option set. Options such as **Min**, **Max**, **Unit**, and **Thresholds** are part of the field configuration. If set, they are used by the visualization instead of any options manually configured in the panel editor options pane.

  #### Value mappings

  You can also transform a query result into value mappings. With this option, every row in the configuration query result defines a single value mapping row. See the following example.

  Config query result:

  | Value | Text   | Color |
  | ----- | ------ | ----- |
  | L     | Low    | blue  |
  | M     | Medium | green |
  | H     | High   | red   |

  In the field mapping specify:

  | Field | Use as                  | Select     |
  | ----- | ----------------------- | ---------- |
  | Value | Value mappings / Value  | All values |
  | Text  | Value mappings / Text   | All values |
  | Color | Value mappings / Ciolor | All values |

  Grafana builds value mappings from your query result and applies them to the real data query results. You should see values being mapped and colored according to the config query results.
  `}},convertFieldType:{name:"Convert field type",getHelperDocs:function(){return`
  Use this transformation to modify the field type of a specified field. 
  
  This transformation has the following options:

  - **Field** - Select from available fields
  - **as** - Select the FieldType to convert to
    - **Numeric** - attempts to make the values numbers
    - **String** - will make the values strings
    - **Time** - attempts to parse the values as time
      - Will show an option to specify a DateFormat as input by a string like yyyy-mm-dd or DD MM YYYY hh:mm:ss
    - **Boolean** - will make the values booleans
    - **Enum** - will make the values enums
      - Will show a table to manage the enums
    - **Other** - attempts to parse the values as JSON

  For example, consider the following query that could be modified by selecting the time field as Time and specifying Date Format as YYYY.

  #### Sample Query

  | Time       | Mark      | Value |
  |------------|-----------|-------|
  | 2017-07-01 | above     | 25    |
  | 2018-08-02 | below     | 22    |
  | 2019-09-02 | below     | 29    |
  | 2020-10-04 | above     | 22    |

  The result:

  #### Transformed Query

  | Time                | Mark      | Value |
  |---------------------|-----------|-------|
  | 2017-01-01 00:00:00 | above     | 25    |
  | 2018-01-01 00:00:00 | below     | 22    |
  | 2019-01-01 00:00:00 | below     | 29    |
  | 2020-01-01 00:00:00 | above     | 22    |

  This transformation allows you to flexibly adapt your data types, ensuring compatibility and consistency in your visualizations.
  `}},extractFields:{name:"Extract fields",getHelperDocs:function(){return`
  Use this transformation to select a source of data and extract content from it in different formats. This transformation has the following fields:

  - **Source** - Select the field for the source of data.
  - **Format** - Choose one of the following:
    - **JSON** - Parse JSON content from the source.
    - **Key+value pairs** - Parse content in the format 'a=b' or 'c:d' from the source.
    - **Auto** - Discover fields automatically.
  - **Replace All Fields** - (Optional) Select this option to hide all other fields and display only your calculated field in the visualization.
  - **Keep Time** - (Optional) Available only if **Replace All Fields** is true. Keeps the time field in the output.

  Consider the following dataset:

  #### Dataset Example

  | Timestamp         | json_data |
  |-------------------|-----------|
  | 1636678740000000000 | {"value": 1} |
  | 1636678680000000000 | {"value": 5} |
  | 1636678620000000000 | {"value": 12} |

  You could prepare the data to be used by a [Time series panel][] with this configuration:

  - Source: json_data
  - Format: JSON
    - Field: value
    - Alias: my_value
  - Replace all fields: true
  - Keep time: true

  This will generate the following output:

  #### Transformed Data

  | Timestamp         | my_value |
  |-------------------|----------|
  | 1636678740000000000 | 1        |
  | 1636678680000000000 | 5        |
  | 1636678620000000000 | 12       |

  This transformation allows you to extract and format data in various ways. You can customize the extraction format based on your specific data needs.
  `},links:[{title:"Time series panel",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/time-series/"}]},fieldLookup:{name:"Lookup fields from resource",getHelperDocs:function(){return`
  Use this transformation to enrich a field value by looking up additional fields from an external source. 
  
 This transformation has the following fields:

  - **Field** - Select a text field from your dataset.
  - **Lookup** - Choose from **Countries**, **USA States**, and **Airports**.

  This transformation currently supports spatial data.

  For example, if you have this data:

  #### Dataset Example

  | Location  | Values |
  |-----------|--------|
  | AL        | 0      |
  | AK        | 10     |
  | Arizona   | 5      |
  | Arkansas  | 1      |
  | Somewhere | 5      |

  With this configuration:

  - Field: location
  - Lookup: USA States

  You'll get the following output:

  #### Transformed Data

  | Location  | ID | Name      | Lng        | Lat        | Values |
  |-----------|----|-----------|------------|------------|--------|
  | AL        | AL | Alabama   | -80.891064 | 12.448457  | 0      |
  | AK        | AK | Arkansas  | -100.891064| 24.448457  | 10     |
  | Arizona   |    |           |            |            | 5      |
  | Arkansas  |    |           |            |            | 1      |
  | Somewhere |    |           |            |            | 5      |

  This transformation lets you augment your data by fetching additional information from external sources, providing a more comprehensive dataset for analysis and visualization.
  `}},filterByRefId:{name:"Filter data by query refId",getHelperDocs:function(r="shortcodeFigure"){return`
  Use this transformation to hide one or more queries in panels that have multiple queries.

  Grafana displays the query identification letters in dark gray text. Click a query identifier to toggle filtering. If the query letter is white, then the results are displayed. If the query letter is dark, then the results are hidden.

  > **Note:** This transformation is not available for Graphite because this data source does not support correlating returned data with queries.

  In the example below, the panel has three queries (A, B, C). We removed the B query from the visualization.

  ${s("/static/img/docs/transformations/filter-by-query-stat-example-7-0.png",r,"A stat visualization with results from two queries, A and C")}
  `}},filterByValue:{name:"Filter data by values",getHelperDocs:function(){return`
  Use this transformation to selectively filter data points directly within your visualization. This transformation provides options to include or exclude data based on one or more conditions applied to a selected field.

  This transformation is very useful if your data source does not natively filter by values. You might also use this to narrow values to display if you are using a shared query.

  The available conditions for all fields are:

  - **Regex** - Match a regex expression.
  - **Is Null** - Match if the value is null.
  - **Is Not Null** - Match if the value is not null.
  - **Equal** - Match if the value is equal to the specified value.
  - **Different** - Match if the value is different than the specified value.

  The available conditions for number fields are:

  - **Greater** - Match if the value is greater than the specified value.
  - **Lower** - Match if the value is lower than the specified value.
  - **Greater or equal** - Match if the value is greater or equal.
  - **Lower or equal** - Match if the value is lower or equal.
  - **Range** - Match a range between a specified minimum and maximum, min and max included.

  Consider the following dataset:

  #### Dataset Example

  | Time                | Temperature | Altitude |
  |---------------------|-------------|----------|
  | 2020-07-07 11:34:23 | 32          | 101      |
  | 2020-07-07 11:34:22 | 28          | 125      |
  | 2020-07-07 11:34:21 | 26          | 110      |
  | 2020-07-07 11:34:20 | 23          | 98       |
  | 2020-07-07 10:32:24 | 31          | 95       |
  | 2020-07-07 10:31:22 | 20          | 85       |
  | 2020-07-07 09:30:57 | 19          | 101      |

  If you **Include** the data points that have a temperature below 30\xB0C, the configuration will look as follows:

  - Filter Type: 'Include'
  - Condition: Rows where 'Temperature' matches 'Lower Than' '30'

  And you will get the following result, where only the temperatures below 30\xB0C are included:

  #### Transformed Data

  | Time                | Temperature | Altitude |
  |---------------------|-------------|----------|
  | 2020-07-07 11:34:22 | 28          | 125      |
  | 2020-07-07 11:34:21 | 26          | 110      |
  | 2020-07-07 11:34:20 | 23          | 98       |
  | 2020-07-07 10:31:22 | 20          | 85       |
  | 2020-07-07 09:30:57 | 19          | 101      |

  You can add more than one condition to the filter. For example, you might want to include the data only if the altitude is greater than 100. To do so, add that condition to the following configuration:

  - Filter type: 'Include' rows that 'Match All' conditions
  - Condition 1: Rows where 'Temperature' matches 'Lower' than '30'
  - Condition 2: Rows where 'Altitude' matches 'Greater' than '100'

  When you have more than one condition, you can choose if you want the action (include/exclude) to be applied on rows that **Match all** conditions or **Match any** of the conditions you added.

  In the example above, we chose **Match all** because we wanted to include the rows that have a temperature lower than 30\xB0C *AND* an altitude higher than 100. If we wanted to include the rows that have a temperature lower than 30\xB0C *OR* an altitude higher than 100 instead, then we would select **Match any**. This would include the first row in the original data, which has a temperature of 32\xB0C (does not match the first condition) but an altitude of 101 (which matches the second condition), so it is included.

  Conditions that are invalid or incompletely configured are ignored.

  This versatile data filtering transformation lets you to selectively include or exclude data points based on specific conditions. Customize the criteria to tailor your data presentation to meet your unique analytical needs.
  `}},filterFieldsByName:{name:"Filter fields by name",getHelperDocs:function(r="shortcodeFigure"){return`
  Use this transformation to selectively remove parts of your query results. There are three ways to filter field names:
  
  - [Using a regular expression](#use-a-regular-expression)
  - [Manually selecting included fields](#manually-select-included-fields)
  - [Using a dashboard variable](#use-a-dashboard-variable)
  
  #### Use a regular expression
  
  When you filter using a regular expression, field names that match the regular expression are included. 
  
  For example, from the input data:

  | Time                | dev-eu-west | dev-eu-north | prod-eu-west | prod-eu-north |
  | ------------------- | ----------- | ------------ | ------------ | ------------- |
  | 2023-03-04 23:56:23 | 23.5        | 24.5         | 22.2         | 20.2          |
  | 2023-03-04 23:56:23 | 23.6        | 24.4         | 22.1         | 20.1          |
  
  The result from using the regular expression 'prod.*' would be:
  
  | Time                | prod-eu-west | prod-eu-north |
  | ------------------- | ------------ | ------------- |
  | 2023-03-04 23:56:23 | 22.2         | 20.2          |
  | 2023-03-04 23:56:23 | 22.1         | 20.1          |
  
  The regular expression can include an interpolated dashboard variable by using the \${variableName} syntax.
  
  #### Manually select included fields
  
  Click and uncheck the field names to remove them from the result. Fields that are matched by the regular expression are still included, even if they're unchecked.
  
  #### Use a dashboard variable
  
  Enable 'From variable' to let you select a dashboard variable that's used to include fields. By setting up a [dashboard variable][] with multiple choices, the same fields can be displayed across multiple visualizations.

  ${s("/static/img/docs/transformations/filter-name-table-before-7-0.png",r,"A table visualization with time, value, Min, and Max columns")}

  Here's the table after we applied the transformation to remove the Min field.

  ${s("/static/img/docs/transformations/filter-name-table-after-7-0.png",r,"A table visualization with time, value, and Max columns")}

  Here is the same query using a Stat visualization.

  ${s("/static/img/docs/transformations/filter-name-stat-after-7-0.png",r,"A stat visualization with value and Max fields")}

  This transformation provides flexibility in tailoring your query results to focus on the specific fields you need for effective analysis and visualization.
  `}},formatString:{name:"Format string",getHelperDocs:function(){return`
  Use this transformation to customize the output of a string field. This transformation has the following fields:
  
  - **Upper case** - Formats the entire string in uppercase characters.
  - **Lower case** - Formats the entire string in lowercase characters.
  - **Sentence case** - Formats the first character of the string in uppercase.
  - **Title case** - Formats the first character of each word in the string in uppercase.
  - **Pascal case** - Formats the first character of each word in the string in uppercase and doesn't include spaces between words.
  - **Camel case** - Formats the first character of each word in the string in uppercase, except the first word, and doesn't include spaces between words.
  - **Snake case** - Formats all characters in the string in lowercase and uses underscores instead of spaces between words.
  - **Kebab case** - Formats all characters in the string in lowercase and uses dashes instead of spaces between words.
  - **Trim** - Removes all leading and trailing spaces from the string.
  - **Substring** - Returns a substring of the string, using the specified start and end positions.

  This transformation provides a convenient way to standardize and tailor the presentation of string data for better visualization and analysis.

  > **Note:** This transformation is currently in public preview. Grafana Labs offers limited support, and breaking changes might occur prior to the feature being made generally available. Enable the \`formatString\` feature toggle in Grafana to use this feature. Contact Grafana Support to enable this feature in Grafana Cloud.`}},formatTime:{name:"Format time",getHelperDocs:function(){return`
  Use this transformation to customize the output of a time field. Output can be formatted using [Moment.js format strings](https://momentjs.com/docs/#/displaying/). For example, if you want to display only the year of a time field, the format string 'YYYY' can be used to show the calendar year (for example, 1999 or 2012).

  **Before Transformation:**

  | Timestamp           | Event          |
  | ------------------- | -------------- |
  | 1636678740000000000 | System Start   |
  | 1636678680000000000 | User Login     |
  | 1636678620000000000 | Data Updated   |

  **After applying 'YYYY-MM-DD HH:mm:ss':**

  | Timestamp           | Event          |
  | ------------------- | -------------- |
  | 2021-11-12 14:25:40 | System Start   |
  | 2021-11-12 14:24:40 | User Login     |
  | 2021-11-12 14:23:40 | Data Updated   |

  This transformation lets you tailor the time representation in your visualizations, providing flexibility and precision in displaying temporal data.

  > **Note:** This transformation is available in Grafana 10.1+ as an alpha feature.
  `}},groupBy:{name:"Group by",getHelperDocs:function(){return`
  Use this transformation to group the data by a specified field (column) value and process calculations on each group. Click to see a list of calculation choices. For information about available calculations, refer to [Calculation types][].

  Here's an example of original data.

  | Time                | Server ID | CPU Temperature | Server Status |
  | ------------------- | --------- | --------------- | ------------- |
  | 2020-07-07 11:34:20 | server 1  | 80              | Shutdown      |
  | 2020-07-07 11:34:20 | server 3  | 62              | OK            |
  | 2020-07-07 10:32:20 | server 2  | 90              | Overload      |
  | 2020-07-07 10:31:22 | server 3  | 55              | OK            |
  | 2020-07-07 09:30:57 | server 3  | 62              | Rebooting     |
  | 2020-07-07 09:30:05 | server 2  | 88              | OK            |
  | 2020-07-07 09:28:06 | server 1  | 80              | OK            |
  | 2020-07-07 09:25:05 | server 2  | 88              | OK            |
  | 2020-07-07 09:23:07 | server 1  | 86              | OK            |

  This transformation goes in two steps. First you specify one or multiple fields to group the data by. This will group all the same values of those fields together, as if you sorted them. For instance if we group by the Server ID field, then it would group the data this way:

  | Time                | Server ID      | CPU Temperature | Server Status |
  | ------------------- | -------------- | --------------- | ------------- |
  | 2020-07-07 11:34:20 | **server 1**   | 80              | Shutdown      |
  | 2020-07-07 09:28:06 | **server 1**   | 80              | OK            |
  | 2020-07-07 09:23:07 | **server 1**   | 86              | OK            |
  | 2020-07-07 10:32:20 | server 2       | 90              | Overload      |
  | 2020-07-07 09:30:05 | server 2       | 88              | OK            |
  | 2020-07-07 09:25:05 | server 2       | 88              | OK            |
  | 2020-07-07 11:34:20 | **_server 3_** | 62              | OK            |
  | 2020-07-07 10:31:22 | **_server 3_** | 55              | OK            |
  | 2020-07-07 09:30:57 | **_server 3_** | 62              | Rebooting     |

  All rows with the same value of Server ID are grouped together.

  After choosing which field you want to group your data by, you can add various calculations on the other fields, and apply the calculation to each group of rows. For instance, we could want to calculate the average CPU temperature for each of those servers. So we can add the _mean_ calculation applied on the CPU Temperature field to get the following:

  | Server ID | CPU Temperature (mean) |
  | --------- | ---------------------- |
  | server 1  | 82                     |
  | server 2  | 88.6                   |
  | server 3  | 59.6                   |

  And we can add more than one calculation. For instance:

  - For field Time, we can calculate the _Last_ value, to know when the last data point was received for each server
  - For field Server Status, we can calculate the _Last_ value to know what is the last state value for each server
  - For field Temperature, we can also calculate the _Last_ value to know what is the latest monitored temperature for each server

  We would then get:

  | Server ID | CPU Temperature (mean) | CPU Temperature (last) | Time (last)         | Server Status (last) |
  | --------- | ---------------------- | ---------------------- | ------------------- | -------------------- |
  | server 1  | 82                     | 80                     | 2020-07-07 11:34:20 | Shutdown             |
  | server 2  | 88.6                   | 90                     | 2020-07-07 10:32:20 | Overload             |
  | server 3  | 59.6                   | 62                     | 2020-07-07 11:34:20 | OK                   |

  This transformation allows you to extract essential information from your time series and present it conveniently.
  `},links:[{title:"Calculation types",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/calculation-types/"}]},groupingToMatrix:{name:"Grouping to matrix",getHelperDocs:function(){return`
  Use this transformation to combine three fields\u2014which are used as input for the **Column**, **Row**, and **Cell value** fields from the query output\u2014and generate a matrix. The matrix is calculated as follows:

  **Original data**

  | Server ID | CPU Temperature | Server Status |
  | --------- | --------------- | ------------- |
  | server 1  | 82              | OK            |
  | server 2  | 88.6            | OK            |
  | server 3  | 59.6            | Shutdown      |

  We can generate a matrix using the values of 'Server Status' as column names, the 'Server ID' values as row names, and the 'CPU Temperature' as content of each cell. The content of each cell will appear for the existing column ('Server Status') and row combination ('Server ID'). For the rest of the cells, you can select which value to display between: **Null**, **True**, **False**, or **Empty**.

  **Output**

  | Server IDServer Status | OK   | Shutdown |
  | ----------------------- | ---- | -------- |
  | server 1                | 82   |          |
  | server 2                | 88.6 |          |
  | server 3                |      | 59.6     |

  Use this transformation to construct a matrix by specifying fields from your query results. The matrix output reflects the relationships between the unique values in these fields. This helps you present complex relationships in a clear and structured matrix format.
  `}},heatmap:{name:"Create heatmap",getHelperDocs:function(){return`
  Use this transformation to prepare histogram data for visualizing trends over time. Similar to the heatmap visualization, this transformation converts histogram metrics into temporal buckets.

  #### X Bucket

  This setting determines how the x-axis is split into buckets.

  - **Size** - Specify a time interval in the input field. For example, a time range of '1h' creates cells one hour wide on the x-axis.
  - **Count** - For non-time-related series, use this option to define the number of elements in a bucket.

  #### Y Bucket

  This setting determines how the y-axis is split into buckets.

  - **Linear**
  - **Logarithmic** - Choose between log base 2 or log base 10.
  - **Symlog** - Uses a symmetrical logarithmic scale. Choose between log base 2 or log base 10, allowing for negative values.

  Assume you have the following dataset:

  | Timestamp           | Value |
  |-------------------- |-------|
  | 2023-01-01 12:00:00 | 5     |
  | 2023-01-01 12:15:00 | 10    |
  | 2023-01-01 12:30:00 | 15    |
  | 2023-01-01 12:45:00 | 8     |

  - With X Bucket set to 'Size: 15m' and Y Bucket as 'Linear', the histogram organizes values into time intervals of 15 minutes on the x-axis and linearly on the y-axis.
  - For X Bucket as 'Count: 2' and Y Bucket as 'Logarithmic (base 10)', the histogram groups values into buckets of two on the x-axis and use a logarithmic scale on the y-axis.
  `}},histogram:{name:"Histogram",getHelperDocs:function(){return`
  Use this transformation to generate a histogram based on input data, allowing you to visualize the distribution of values.

  - **Bucket size** - The range between the lowest and highest items in a bucket (xMin to xMax).
  - **Bucket offset** - The offset for non-zero-based buckets.
  - **Combine series** - Create a unified histogram using all available series.

  **Original data**

  Series 1:

  | A   | B   | C   |
  | --- | --- | --- |
  | 1   | 3   | 5   |
  | 2   | 4   | 6   |
  | 3   | 5   | 7   |
  | 4   | 6   | 8   |
  | 5   | 7   | 9   |

  Series 2:

  | C   |
  | --- |
  | 5   |
  | 6   |
  | 7   |
  | 8   |
  | 9   |

  **Output**

  | xMin | xMax | A   | B   | C   | C   |
  | ---- | ---- | --- | --- | --- | --- |
  | 1    | 2    | 1   | 0   | 0   | 0   |
  | 2    | 3    | 1   | 0   | 0   | 0   |
  | 3    | 4    | 1   | 1   | 0   | 0   |
  | 4    | 5    | 1   | 1   | 0   | 0   |
  | 5    | 6    | 1   | 1   | 1   | 1   |
  | 6    | 7    | 0   | 1   | 1   | 1   |
  | 7    | 8    | 0   | 1   | 1   | 1   |
  | 8    | 9    | 0   | 0   | 1   | 1   |
  | 9    | 10   | 0   | 0   | 1   | 1   |

  Visualize the distribution of values using the generated histogram, providing insights into the data's spread and density.
  `}},joinByField:{name:"Join by field",getHelperDocs:function(r="shortcodeFigure"){return`
  Use this transformation to merge multiple results into a single table, enabling the consolidation of data from different queries.

  This is especially useful for converting multiple time series results into a single wide table with a shared time field.

  #### Inner join

  An inner join merges data from multiple tables where all tables share the same value from the selected field. This type of join excludes data where values do not match in every result.

  Use this transformation to combine the results from multiple queries (combining on a passed join field or the first time column) into one result, and drop rows where a successful join cannot occur.

  In the following example, two queries return table data. It is visualized as two separate tables before applying the inner join transformation.

  **Query A:**

  | Time                | Job     | Uptime    |
  | ------------------- | ------- | --------- |
  | 2020-07-07 11:34:20 | node    | 25260122  |
  | 2020-07-07 11:24:20 | postgre | 123001233 |
  | 2020-07-07 11:14:20 | postgre | 345001233 |

  **Query B:**

  | Time                | Server   | Errors |
  | ------------------- | -------- | ------ |
  | 2020-07-07 11:34:20 | server 1 | 15     |
  | 2020-07-07 11:24:20 | server 2 | 5      |
  | 2020-07-07 11:04:20 | server 3 | 10     |

  The result after applying the inner join transformation looks like the following:

  | Time                | Job     | Uptime    | Server   | Errors |
  | ------------------- | ------- | --------- | -------- | ------ |
  | 2020-07-07 11:34:20 | node    | 25260122  | server 1 | 15     |
  | 2020-07-07 11:24:20 | postgre | 123001233 | server 2 | 5      |

  #### Outer join

  An outer join includes all data from an inner join and rows where values do not match in every input. While the inner join joins Query A and Query B on the time field, the outer join includes all rows that don't match on the time field.

  In the following example, two queries return table data. It is visualized as two tables before applying the outer join transformation.

  **Query A:**

  | Time                | Job     | Uptime    |
  | ------------------- | ------- | --------- |
  | 2020-07-07 11:34:20 | node    | 25260122  |
  | 2020-07-07 11:24:20 | postgre | 123001233 |
  | 2020-07-07 11:14:20 | postgre | 345001233 |

  **Query B:**

  | Time                | Server   | Errors |
  | ------------------- | -------- | ------ |
  | 2020-07-07 11:34:20 | server 1 | 15     |
  | 2020-07-07 11:24:20 | server 2 | 5      |
  | 2020-07-07 11:04:20 | server 3 | 10     |

  The result after applying the outer join transformation looks like the following:

  | Time                | Job     | Uptime    | Server   | Errors |
  | ------------------- | ------- | --------- | -------- | ------ |
  | 2020-07-07 11:04:20 |         |           | server 3 | 10     |
  | 2020-07-07 11:14:20 | postgre | 345001233 |          |        |
  | 2020-07-07 11:34:20 | node    | 25260122  | server 1 | 15     |
  | 2020-07-07 11:24:20 | postgre | 123001233 | server 2 | 5      |

  In the following example, a template query displays time series data from multiple servers in a table visualization. The results of only one query can be viewed at a time.

  ${s("/static/img/docs/transformations/join-fields-before-7-0.png",r,"A table visualization showing results for one server")}

  I applied a transformation to join the query results using the time field. Now I can run calculations, combine, and organize the results in this new table.

  ${s("/static/img/docs/transformations/join-fields-after-7-0.png",r,"A table visualization showing results for multiple servers")}

  Combine and analyze data from various queries with table joining for a comprehensive view of your information.
  `}},joinByLabels:{name:"Join by labels",getHelperDocs:function(){return`
  Use this transformation to join multiple results into a single table.
  
  This is especially useful for converting multiple time series results into a single wide table with a shared **Label** field.

  - **Join** - Select the label to join by between the labels available or common across all time series.
  - **Value** - The name for the output result.

  #### Example

  ##### Input

  series1{what="Temp", cluster="A", job="J1"}

  | Time | Value |
  | ---- | ----- |
  | 1    | 10    |
  | 2    | 200   |

  series2{what="Temp", cluster="B", job="J1"}

  | Time | Value |
  | ---- | ----- |
  | 1    | 10    |
  | 2    | 200   |

  series3{what="Speed", cluster="B", job="J1"}

  | Time | Value |
  | ---- | ----- |
  | 22   | 22    |
  | 28   | 77    |

  ##### Config

  value: "what"

  ##### Output

  | cluster | job | Temp | Speed |
  | ------- | --- | ---- | ----- |
  | A       | J1  | 10   |       |
  | A       | J1  | 200  |       |
  | B       | J1  | 10   | 22    |
  | B       | J1  | 200  | 77    |

  Combine and organize time series data effectively with this transformation for comprehensive insights.
  `}},labelsToFields:{name:"Labels to fields",getHelperDocs:function(){return`
  Use this transformation to convert time series results with labels or tags into a table, including each label's keys and values in the result. Display labels as either columns or row values for enhanced data visualization.

  Given a query result of two time series:

  - Series 1: labels Server=Server A, Datacenter=EU
  - Series 2: labels Server=Server B, Datacenter=EU

  In "Columns" mode, the result looks like this:

  | Time                | Server   | Datacenter | Value |
  | ------------------- | -------- | ---------- | ----- |
  | 2020-07-07 11:34:20 | Server A | EU         | 1     |
  | 2020-07-07 11:34:20 | Server B | EU         | 2     |

  In "Rows" mode, the result has a table for each series and show each label value like this:

  | label      | value    |
  | ---------- | -------- |
  | Server     | Server A |
  | Datacenter | EU       |

  | label      | value    |
  | ---------- | -------- |
  | Server     | Server B |
  | Datacenter | EU       |

  #### Value field name

  If you selected Server as the **Value field name**, then you would get one field for every value of the Server label.

  | Time                | Datacenter | Server A | Server B |
  | ------------------- | ---------- | -------- | -------- |
  | 2020-07-07 11:34:20 | EU         | 1        | 2        |

  #### Merging behavior

  The labels to fields transformer is internally two separate transformations. The first acts on single series and extracts labels to fields. The second is the [merge](#merge) transformation that joins all the results into a single table. The merge transformation tries to join on all matching fields. This merge step is required and cannot be turned off.

  To illustrate this, here is an example where you have two queries that return time series with no overlapping labels.

  - Series 1: labels Server=ServerA
  - Series 2: labels Datacenter=EU

  This will first result in these two tables:

  | Time                | Server  | Value |
  | ------------------- | ------- | ----- |
  | 2020-07-07 11:34:20 | ServerA | 10    |

  | Time                | Datacenter | Value |
  | ------------------- | ---------- | ----- |
  | 2020-07-07 11:34:20 | EU         | 20    |

  After merge:

  | Time                | Server  | Value | Datacenter |
  | ------------------- | ------- | ----- | ---------- |
  | 2020-07-07 11:34:20 | ServerA | 10    |            |
  | 2020-07-07 11:34:20 |         | 20    | EU         |

  Convert your time series data into a structured table format for a clearer and more organized representation.
  `}},limit:{name:"Limit",getHelperDocs:function(){return`
  Use this transformation to restrict the number of rows displayed, providing a more focused view of your data. This is particularly useful when dealing with large datasets.

  Below is an example illustrating the impact of the **Limit** transformation on a response from a data source:

  | Time                | Metric      | Value |
  | ------------------- | ----------- | ----- |
  | 2020-07-07 11:34:20 | Temperature | 25    |
  | 2020-07-07 11:34:20 | Humidity    | 22    |
  | 2020-07-07 10:32:20 | Humidity    | 29    |
  | 2020-07-07 10:31:22 | Temperature | 22    |
  | 2020-07-07 09:30:57 | Humidity    | 33    |
  | 2020-07-07 09:30:05 | Temperature | 19    |

  Here is the result after adding a Limit transformation with a value of '3':

  | Time                | Metric      | Value |
  | ------------------- | ----------- | ----- |
  | 2020-07-07 11:34:20 | Temperature | 25    |
  | 2020-07-07 11:34:20 | Humidity    | 22    |
  | 2020-07-07 10:32:20 | Humidity    | 29    |

  This transformation helps you tailor the visual presentation of your data to focus on the most relevant information.
  `}},merge:{name:"Merge series/tables",getHelperDocs:function(){return`
  Use this transformation to combine the results from multiple queries into a single result, which is particularly useful when using the table panel visualization. This transformation merges values into the same row if the shared fields contain the same data.
  
  Here's an example illustrating the impact of the **Merge series/tables** transformation on two queries returning table data:

  **Query A:**

  | Time                | Job     | Uptime    |
  | ------------------- | ------- | --------- |
  | 2020-07-07 11:34:20 | node    | 25260122  |
  | 2020-07-07 11:24:20 | postgre | 123001233 |

  **Query B:**

  | Time                | Job     | Errors |
  | ------------------- | ------- | ------ |
  | 2020-07-07 11:34:20 | node    | 15     |
  | 2020-07-07 11:24:20 | postgre | 5      |

  Here is the result after applying the Merge transformation.

  | Time                | Job     | Errors | Uptime    |
  | ------------------- | ------- | ------ | --------- |
  | 2020-07-07 11:34:20 | node    | 15     | 25260122  |
  | 2020-07-07 11:24:20 | postgre | 5      | 123001233 |

  This transformation combines values from Query A and Query B into a unified table, enhancing the presentation of data for better insights.
  `},links:[{title:"Table panel",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/table/"}]},organize:{name:"Organize fields by name",getHelperDocs:function(){return`
  Use this transformation to provide the flexibility to rename, reorder, or hide fields returned by a single query in your panel. This transformation is applicable only to panels with a single query. If your panel has multiple queries, consider using an "Outer join" transformation or removing extra queries.

  #### Transforming fields
  
  Grafana displays a list of fields returned by the query, allowing you to perform the following actions:
  
  - **Change field order** - Hover over a field, and when your cursor turns into a hand, drag the field to its new position.
  - **Hide or show a field** - Use the eye icon next to the field name to toggle the visibility of a specific field.
  - **Rename fields** - Type a new name in the "Rename <field>" box to customize field names.
  
  #### Example:
  
  ##### Original Query Result
  
  | Time                | Metric      | Value |
  | ------------------- | ----------- | ----- |
  | 2020-07-07 11:34:20 | Temperature | 25    |
  | 2020-07-07 11:34:20 | Humidity    | 22    |
  | 2020-07-07 10:32:20 | Humidity    | 29    |
  
  ##### After Applying Field Overrides
  
  | Time                | Sensor      | Reading |
  | ------------------- | ----------- | ------- |
  | 2020-07-07 11:34:20 | Temperature | 25      |
  | 2020-07-07 11:34:20 | Humidity    | 22      |
  | 2020-07-07 10:32:20 | Humidity    | 29      |

  This transformation lets you to tailor the display of query results, ensuring a clear and insightful representation of your data in Grafana.
  `}},partitionByValues:{name:"Partition by values",getHelperDocs:function(){return`
  Use this transformation to streamline the process of graphing multiple series without the need for multiple queries with different 'WHERE' clauses.
  
  This is particularly useful when dealing with a metrics SQL table, as illustrated below:

  | Time                | Region | Value |
  | ------------------- | ------ | ----- |
  | 2022-10-20 12:00:00 | US     | 1520  |
  | 2022-10-20 12:00:00 | EU     | 2936  |
  | 2022-10-20 01:00:00 | US     | 1327  |
  | 2022-10-20 01:00:00 | EU     | 912   |
  
  With the **Partition by values** transformation, you can issue a single query and split the results by unique values in one or more columns (fields) of your choosing. The following example uses 'Region':

  'SELECT Time, Region, Value FROM metrics WHERE Time > "2022-10-20"'

  | Time                | Region | Value |
  | ------------------- | ------ | ----- |
  | 2022-10-20 12:00:00 | US     | 1520  |
  | 2022-10-20 01:00:00 | US     | 1327  |

  | Time                | Region | Value |
  | ------------------- | ------ | ----- |
  | 2022-10-20 12:00:00 | EU     | 2936  |
  | 2022-10-20 01:00:00 | EU     | 912   |

  This transformation simplifies the process and enhances the flexibility of visualizing multiple series within the same time series visualization.
  `}},prepareTimeSeries:{name:"Prepare time series",getHelperDocs:function(){return`
  Use this transformation to address issues when a data source returns time series data in a format that isn't compatible with the desired visualization. This transformation allows you to convert time series data between wide and long formats, providing flexibility in data frame structures.

  #### Available options
  
  ##### Multi-frame time series
  
  Use this option to transform the time series data frame from the wide format to the long format. This is particularly helpful when your data source delivers time series information in a format that needs to be reshaped for optimal compatibility with your visualization.
  
  **Example: Converting from wide to long format**
  
  | Timestamp           | Value1 | Value2 |
  |---------------------|--------|--------|
  | 2023-01-01 00:00:00 | 10     | 20     |
  | 2023-01-01 01:00:00 | 15     | 25     |
  
  **Transformed to:**
  
  | Timestamp           | Variable | Value |
  |---------------------|----------|-------|
  | 2023-01-01 00:00:00 | Value1   | 10    |
  | 2023-01-01 00:00:00 | Value2   | 20    |
  | 2023-01-01 01:00:00 | Value1   | 15    |
  | 2023-01-01 01:00:00 | Value2   | 25    |
  
  
  ##### Wide time series
  
  Select this option to transform the time series data frame from the long format to the wide format. If your data source returns time series data in a long format and your visualization requires a wide format, this transformation simplifies the process.
  
  **Example: Converting from long to wide format**
  
  | Timestamp           | Variable | Value |
  |---------------------|----------|-------|
  | 2023-01-01 00:00:00 | Value1   | 10    |
  | 2023-01-01 00:00:00 | Value2   | 20    |
  | 2023-01-01 01:00:00 | Value1   | 15    |
  | 2023-01-01 01:00:00 | Value2   | 25    |
  
  **Transformed to:**
  
  | Timestamp           | Value1 | Value2 |
  |---------------------|--------|--------|
  | 2023-01-01 00:00:00 | 10     | 20     |
  | 2023-01-01 01:00:00 | 15     | 25     |

  > **Note:** This transformation is available in Grafana 7.5.10+ and Grafana 8.0.6+.
  `},links:[{title:"Data frames",url:"https://grafana.com/docs/grafana/latest/developers/plugins/introduction-to-plugin-development/data-frames/"}]},reduce:{name:"Reduce",getHelperDocs:function(){return`
  Use this transformation to apply a calculation to each field in the data frame and return a single value. This transformation is particularly useful for consolidating multiple time series data into a more compact, summarized format. Time fields are removed when applying this transformation.

  Consider the input:

  **Query A:**

  | Time                | Temp | Uptime  |
  | ------------------- | ---- | ------- |
  | 2020-07-07 11:34:20 | 12.3 | 256122  |
  | 2020-07-07 11:24:20 | 15.4 | 1230233 |

  **Query B:**

  | Time                | AQI | Errors |
  | ------------------- | --- | ------ |
  | 2020-07-07 11:34:20 | 6.5 | 15     |
  | 2020-07-07 11:24:20 | 3.2 | 5      |

  The reduce transformer has two modes:

  - **Series to rows** - Creates a row for each field and a column for each calculation.
  - **Reduce fields** - Keeps the existing frame structure, but collapses each field into a single value.

  For example, if you used the **First** and **Last** calculation with a **Series to rows** transformation, then
  the result would be:

  | Field  | First  | Last    |
  | ------ | ------ | ------- |
  | Temp   | 12.3   | 15.4    |
  | Uptime | 256122 | 1230233 |
  | AQI    | 6.5    | 3.2     |
  | Errors | 15     | 5       |

  The **Reduce fields** with the **Last** calculation,
  results in two frames, each with one row:

  **Query A:**

  | Temp | Uptime  |
  | ---- | ------- |
  | 15.4 | 1230233 |

  **Query B:**

  | AQI | Errors |
  | --- | ------ |
  | 3.2 | 5      |

  This flexible transformation simplifies the process of consolidating and summarizing data from multiple time series into a more manageable and organized format.
  `}},renameByRegex:{name:"Rename by regex",getHelperDocs:function(r="shortcodeFigure"){return`
  Use this transformation to rename parts of the query results using a regular expression and replacement pattern.

  You can specify a regular expression, which is only applied to matches, along with a replacement pattern that support back references. For example, let's imagine you're visualizing CPU usage per host and you want to remove the domain name. You could set the regex to '([^.]+)..+' and the replacement pattern to '$1', 'web-01.example.com' would become 'web-01'.
  
  In the following example, we are stripping the prefix from event types. In the before image, you can see everything is prefixed with 'system.'

  ${s("/static/img/docs/transformations/rename-by-regex-before-7-3.png",r,"A bar chart with long series names")}

  With the transformation applied, you can see we are left with just the remainder of the string.

  ${s("/static/img/docs/transformations/rename-by-regex-after-7-3.png",r,"A bar chart with shortened series names")}

  This transformation lets you to tailor your data to meet your visualization needs, making your dashboards more informative and user-friendly.
  `}},rowsToFields:{name:"Rows to fields",getHelperDocs:function(){return`
  Use this transformation to convert rows into separate fields. This can be useful because fields can be styled and configured individually. It can also use additional fields as sources for dynamic field configuration or map them to field labels. The additional labels can then be used to define better display names for the resulting fields.

  This transformation includes a field table which lists all fields in the data returned by the configuration query. This table gives you control over what field should be mapped to each configuration property (the **Use as** option). You can also choose which value to select if there are multiple rows in the returned data.

  This transformation requires:

  - One field to use as the source of field names.

    By default, the transform uses the first string field as the source. You can override this default setting by selecting **Field name** in the **Use as** column for the field you want to use instead.

  - One field to use as the source of values.

    By default, the transform uses the first number field as the source. But you can override this default setting by selecting **Field value** in the **Use as** column for the field you want to use instead.

  Useful when visualizing data in:

  - Gauge
  - Stat
  - Pie chart

  #### Map extra fields to labels

  If a field does not map to config property Grafana will automatically use it as source for a label on the output field-

  **Example:**

  | Name    | DataCenter | Value |
  | ------- | ---------- | ----- |
  | ServerA | US         | 100   |
  | ServerB | EU         | 200   |

  **Output:**

  | ServerA (labels: DataCenter: US) | ServerB (labels: DataCenter: EU) |
  | -------------------------------- | -------------------------------- |
  | 10                               | 20                               |

  The extra labels can now be used in the field display name provide more complete field names.

  If you want to extract config from one query and apply it to another you should use the config from query results transformation.

  #### Example

  **Input:**

  | Name    | Value | Max |
  | ------- | ----- | --- |
  | ServerA | 10    | 100 |
  | ServerB | 20    | 200 |
  | ServerC | 30    | 300 |

  **Output:**

  | ServerA (config: max=100) | ServerB (config: max=200) | ServerC (config: max=300) |
  | ------------------------- | ------------------------- | ------------------------- |
  | 10                        | 20                        | 30                        |

  As you can see each row in the source data becomes a separate field. Each field now also has a max config option set. Options like **Min**, **Max**, **Unit** and **Thresholds** are all part of field configuration and if set like this will be used by the visualization instead of any options manually configured in the panel editor options pane.

  This transformation enables the conversion of rows into individual fields, facilitates dynamic field configuration, and maps additional fields to labels.
  `}},seriesToRows:{name:"Series to rows",getHelperDocs:function(){return`
  Use this transformation to combine the result from multiple time series data queries into one single result. This is helpful when using the table panel visualization.

  The result from this transformation will contain three columns: Time, Metric, and Value. The Metric column is added so you easily can see from which query the metric originates from. Customize this value by defining Label on the source query.

  In the example below, we have two queries returning time series data. It is visualized as two separate tables before applying the transformation.

  **Query A:**

  | Time                | Temperature |
  | ------------------- | ----------- |
  | 2020-07-07 11:34:20 | 25          |
  | 2020-07-07 10:31:22 | 22          |
  | 2020-07-07 09:30:05 | 19          |

  **Query B:**

  | Time                | Humidity |
  | ------------------- | -------- |
  | 2020-07-07 11:34:20 | 24       |
  | 2020-07-07 10:32:20 | 29       |
  | 2020-07-07 09:30:57 | 33       |

  Here is the result after applying the Series to rows transformation.

  | Time                | Metric      | Value |
  | ------------------- | ----------- | ----- |
  | 2020-07-07 11:34:20 | Temperature | 25    |
  | 2020-07-07 11:34:20 | Humidity    | 22    |
  | 2020-07-07 10:32:20 | Humidity    | 29    |
  | 2020-07-07 10:31:22 | Temperature | 22    |
  | 2020-07-07 09:30:57 | Humidity    | 33    |
  | 2020-07-07 09:30:05 | Temperature | 19    |

  This transformation facilitates the consolidation of results from multiple time series queries, providing a streamlined and unified dataset for efficient analysis and visualization in a tabular format.

  > **Note:** This transformation is available in Grafana 7.1+.
  `}},sortBy:{name:"Sort by",getHelperDocs:function(){return`
  Use this transformation to sort each frame within a query result based on a specified field, making your data easier to understand and analyze. By configuring the desired field for sorting, you can control the order in which the data is presented in the table or visualization.

  Use the **Reverse** switch to inversely order the values within the specified field. This functionality is particularly useful when you want to quickly toggle between ascending and descending order to suit your analytical needs.
  
  For example, in a scenario where time-series data is retrieved from a data source, the **Sort by** transformation can be applied to arrange the data frames based on the timestamp, either in ascending or descending order, depending on the analytical requirements. This capability ensures that you can easily navigate and interpret time-series data, gaining valuable insights from the organized and visually coherent presentation.
  `}},spatial:{name:"Spatial",getHelperDocs:function(){return`
  Use this transformation to apply spatial operations to query results.
  
  - **Action** - Select an action:
    - **Prepare spatial field** - Set a geometry field based on the results of other fields.
      - **Location mode** - Select a location mode (these options are shared by the **Calculate value** and **Transform** modes):
        - **Auto** - Automatically identify location data based on default field names.
        - **Coords** - Specify latitude and longitude fields.
        - **Geohash** - Specify a geohash field.
        - **Lookup** - Specify Gazetteer location fields.
    - **Calculate value** - Use the geometry to define a new field (heading/distance/area).
      - **Function** - Choose a mathematical operation to apply to the geometry:
        - **Heading** - Calculate the heading (direction) between two points.
        - **Area** - Calculate the area enclosed by a polygon defined by the geometry.
        - **Distance** - Calculate the distance between two points.
    - **Transform** - Apply spatial operations to the geometry.
      - **Operation** - Choose an operation to apply to the geometry:
        - **As line** - Create a single line feature with a vertex at each row.
        - **Line builder** - Create a line between two points.
  
  This transformation allows you to manipulate and analyze geospatial data, enabling operations such as creating lines between points, calculating spatial properties, and more.
  `}},timeSeriesTable:{name:"Time series to table transform",getHelperDocs:function(){return`
  Use this transformation to convert time series results into a table, transforming a time series data frame into a **Trend** field. The **Trend** field can then be rendered using the [sparkline cell type][], generating an inline sparkline for each table row. If there are multiple time series queries, each will result in a separate table data frame. These can be joined using join or merge transforms to produce a single table with multiple sparklines per row.

  For each generated **Trend** field value, a calculation function can be selected. The default is **Last non-null value**. This value is displayed next to the sparkline and used for sorting table rows.

  > **Note:** This transformation is available in Grafana 9.5+ as an opt-in beta feature. Modify the Grafana [configuration file][] to use it.
  `},links:[{title:"sparkline cell type",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/table/#sparkline"},{title:"configuration file",url:"https://grafana.com/docs/grafana/latest/setup-grafana/configure-grafana/"}]},regression:{name:"Regression analysis",getHelperDocs:function(r="shortcodeFigure"){return`
  Use this transformation to create a new data frame containing values predicted by a statistical model. This is useful for finding a trend in chaotic data. It works by fitting a mathematical function to the data, using either linear or polynomial regression. The data frame can then be used in a visualization to display a trendline.

  There are two different models:

  - **Linear regression** - Fits a linear function to the data.
${s("/static/img/docs/transformations/linear-regression.png",r,"A time series visualization with a straight line representing the linear function")}
  - **Polynomial regression** - Fits a polynomial function to the data.
  ${s("/static/img/docs/transformations/polynomial-regression.png",r,"A time series visualization with a curved line representing the polynomial function")}

  > **Note:** This transformation is currently in public preview. Grafana Labs offers limited support, and breaking changes might occur prior to the feature being made generally available. Enable the \`regressionTransformation\` feature toggle in Grafana to use this feature. Contact Grafana Support to enable this feature in Grafana Cloud.
  `}}};function o(){return`
  Go to the <a href="https://grafana.com/docs/grafana/latest/panels/transformations/?utm_source=grafana" target="_blank" rel="noreferrer">
  transformation documentation
  </a> for more general documentation.
  `}function s(r,g,u){return g==="shortcodeFigure"?`{{< figure src="${r}" class="docs-image--no-shadow" max-width= "1100px" alt="${u}" >}}`:`![${u}](https://grafana.com${r})`}},9581:(Y,A,e)=>{"use strict";e.d(A,{YD:()=>s,dy:()=>n,kD:()=>o});var t=e(52622),n=(g=>(g.Prepare="prepare",g.Calculate="calculate",g.Modify="modify",g))(n||{}),o=(g=>(g.Heading="heading",g.Distance="distance",g.Area="area",g))(o||{}),s=(g=>(g.AsLine="asLine",g.LineBuilder="lineBuilder",g))(s||{});const r={action:"prepare",source:{mode:t.aG.Auto}}},78134:(Y,A,e)=>{"use strict";e.d(A,{EX:()=>l,pp:()=>c,tt:()=>d});var t=e(70915),n=e(11217),o=e(44294),s=e(22796),r=e(52490),g=e(11261),u=e(9581);function d(h){const p=[];for(const m of h.values)m&&p.push(l(m));return new n.A(p)}function i(h){const p=new Array(h.length);if(h.length>1){let m=f(h[0]);for(let a=1;a<h.length;a++){let v=f(h[a]);if(m&&v){let E=Math.atan2(v[0]-m[0],v[1]-m[1])*180/Math.PI;E<0&&(E+=360),p[a-1]=p[a]=E}}}else p.fill(0);return p}function l(h){return h instanceof o.A?h.getCoordinates():(0,t.q1)(h.getExtent())}function f(h){if(h)return(0,s.WP)(l(h))}function c(h,p){const m=h.values,a=new Array(h.values.length),v=p.calc??u.kD.Heading,E=p.field??v;switch(v){case u.kD.Area:{for(let D=0;D<m.length;D++){const b=m[D];b&&(a[D]=(0,r.UG)(b))}return{name:E,type:g.PU.number,config:{unit:"areaM2"},values:a}}case u.kD.Distance:{for(let D=0;D<m.length;D++){const b=m[D];b&&(a[D]=(0,r.R3)(b))}return{name:E,type:g.PU.number,config:{unit:"lengthm"},values:a}}case u.kD.Heading:default:return{name:E,type:g.PU.number,config:{unit:"degree"},values:i(m)}}}},88841:(Y,A,e)=>{"use strict";e.d(A,{y:()=>p});var t=e(32196),n=e(18491),o=e(36376),s=e(96540),r=e(40845),g=e(17464),u=e(40276),d=e(72093),i=e(10354),l=e(43538);const f=(a,v)=>a-v*Math.floor(a/v),c=8,h=(a,v)=>({suggestionsWrapper:(0,t.css)({boxShadow:a.shadows.z2}),errorTooltip:(0,t.css)({position:"absolute",top:v+c+"px",zIndex:a.zIndex.tooltip}),inputWrapper:(0,t.css)({position:"relative"})}),p=({value:a="",onChange:v,suggestions:E,placeholder:D,error:b,invalid:P})=>{const[y,T]=(0,s.useState)(!1),[M,I]=(0,s.useState)(0),[x,S]=(0,s.useState)(a.toString()),[O,C]=(0,s.useState)(0),[L,U]=(0,s.useState)(0),[R,B]=(0,s.useState)(0),H=(0,r.$j)(),W=h(H,L),N=(0,s.useRef)(),V=[(0,n.UU)({fallbackAxisSideDirection:"start",crossAxis:!1,boundary:document.body}),(0,n.BN)()],{refs:G,floatingStyles:_}=(0,o.we)({open:y,placement:"bottom-start",onOpenChange:T,middleware:V,whileElementsMounted:n.ll,strategy:"fixed"}),K=(0,s.useCallback)(Z=>{G.setReference(Z),N.current=Z},[G]),j=(0,s.useRef)(null);(0,s.useEffect)(()=>{C(m(j.current,M))},[M]);const k=s.useCallback((Z,ne=N.current)=>{const q=ne.selectionStart,te=ne.value;te[R-1]==="$"?ne.value=te.slice(0,R)+Z.value+te.slice(q):ne.value=te.slice(0,R)+"$"+Z.value+te.slice(q),S(ne.value),T(!1),I(0),v(ne.value)},[v,R]),Q=s.useCallback(Z=>{if(!y){if(Z.key==="$"||Z.key===" "&&Z.ctrlKey){B(N.current.selectionStart||0),T(!0);return}return}switch(Z.key){case"Backspace":case"Escape":case"ArrowLeft":case"ArrowRight":return T(!1),I(0);case"Enter":return Z.preventDefault(),k(E[M]);case"ArrowDown":case"ArrowUp":Z.preventDefault();const ne=Z.key==="ArrowDown"?1:-1;return I(q=>f(q+ne,E.length));default:return}},[y,E,M,k]),ee=s.useCallback(Z=>{S(Z.currentTarget.value)},[]),ae=s.useCallback(Z=>{v(Z.currentTarget.value)},[v]);return(0,s.useEffect)(()=>{U(N.current.clientHeight)},[]),s.createElement("div",{className:W.inputWrapper},y&&s.createElement(g.ZL,null,s.createElement("div",{ref:G.setFloating,style:_,className:W.suggestionsWrapper},s.createElement(u.E,{scrollTop:O,autoHeightMax:"300px",setScrollTop:({scrollTop:Z})=>C(Z)},s.createElement(l.k,{activeRef:j,suggestions:E,onSuggestionSelect:k,onClose:()=>T(!1),activeIndex:M})))),P&&b&&s.createElement("div",{className:W.errorTooltip},s.createElement(d.P,null,b)),s.createElement(i.p,{placeholder:D,invalid:P,ref:K,value:x,onChange:ee,onBlur:ae,onKeyDown:Q}))};p.displayName="SuggestionsInput";function m(a,v){return(a?.clientHeight??0)*v}},94397:(Y,A,e)=>{"use strict";e.d(A,{N_:()=>d,ZI:()=>r,aG:()=>g,eJ:()=>u,qt:()=>i});var t=e(96540),n=e(28240),o=e(91410),s=e(32264);function r(l){return(0,t.useMemo)(()=>Array.isArray(l)?Object.keys(l.reduce((f,c)=>!c||!Array.isArray(c.fields)?f:c.fields.reduce((h,p)=>{const m=(0,n.Ct)(p,c,l);return h[m]=!0,h},f),{})):[],[l])}function g(l){const f=new Set;for(const c of l)for(const h of c.fields)if(h.labels)for(const p of Object.keys(h.labels))f.add(p);return f}const u={combine:"Combine",calculateNewFields:"Calculate new fields",createNewVisualization:"Create new visualization",filter:"Filter",performSpatialOperations:"Perform spatial operations",reformat:"Reformat",reorderAndRename:"Reorder and rename"},d=l=>!!(typeof l=="number"||!Number.isNaN(Number(l))||/^\$[A-Za-z0-9_]+$/.test(l)&&s.$.featureToggles.transformationsVariableSupport);function i(l){const f=[];l&&(f.push({label:"Browser",value:"browser"}),f.push({label:"UTC",value:"utc"}));const c=(0,o.P3)();for(const h of c)f.push({label:h,value:h});return f}},87617:(Y,A,e)=>{"use strict";e.d(A,{$u:()=>f,Ay:()=>m,Cj:()=>d,EC:()=>l,Y_:()=>u,dJ:()=>c,g4:()=>i,jE:()=>h,t_:()=>r});var t=e(30038),n=e(2913);const o={users:[],searchQuery:"",page:0,perPage:30,totalPages:1,externalUserMngInfo:n.Ay.externalUserMngInfo,externalUserMngLinkName:n.Ay.externalUserMngLinkName,externalUserMngLinkUrl:n.Ay.externalUserMngLinkUrl,isLoading:!1,rolesLoading:!1},s=(0,t.Z0)({name:"users",initialState:o,reducers:{usersLoaded:(a,v)=>{const{totalCount:E,perPage:D,page:b,orgUsers:P}=v.payload,y=Math.ceil(E/D);return{...a,isLoading:!0,users:P,perPage:D,page:b,totalPages:y}},searchQueryChanged:(a,v)=>({...a,searchQuery:v.payload,page:o.page}),setUsersSearchPage:(a,v)=>({...a,page:v.payload}),pageChanged:(a,v)=>({...a,page:v.payload}),sortChanged:(a,v)=>({...a,sort:v.payload}),usersFetchBegin:a=>({...a,isLoading:!0}),usersFetchEnd:a=>({...a,isLoading:!1}),rolesFetchBegin:a=>({...a,rolesLoading:!0}),rolesFetchEnd:a=>({...a,rolesLoading:!1})}}),{searchQueryChanged:r,setUsersSearchPage:g,usersLoaded:u,usersFetchBegin:d,usersFetchEnd:i,pageChanged:l,sortChanged:f,rolesFetchBegin:c,rolesFetchEnd:h}=s.actions,m={users:s.reducer}},20601:(Y,A,e)=>{"use strict";e.d(A,{B:()=>n});var t=e(83077);const n=new t.O},26260:(Y,A,e)=>{"use strict";e.d(A,{$u:()=>p,D4:()=>v,Iv:()=>E,U2:()=>a,VT:()=>m,z_:()=>h});var t=e(2543),n=e.n(t),o=e(31193),s=e(3843),r=e(24240),g=e(72401),u=e(48594),d=e(87421),i=e(56968),l=e(75096),f=e(53699);const c="Filters",h=P=>async(y,T)=>{let M=b(P,T());if(!M&&(y(D(P)),M=b(P,T()),!M))return;const I=M.filters.findIndex(S=>S.key===P.key&&S.value===P.value);if(I===-1){const{value:S,key:O,operator:C}=P,L={value:S,key:O,operator:C};return await y(a((0,l.jX)(M),L))}const x={...M.filters[I],operator:P.operator};return await y(p((0,l.jX)(M),{index:I,filter:x}))},p=(P,y)=>async(T,M)=>{const I=(0,d.dn)(P,M());T((0,u.kb)(P.rootStateKey,(0,f.E2)((0,l.qD)(I,y)))),await T((0,g.us)((0,l.jX)(I),!0))},m=(P,y)=>async(T,M)=>{const I=(0,d.dn)(P,M());T((0,u.kb)(P.rootStateKey,(0,f.D$)((0,l.qD)(I,y)))),await T((0,g.us)((0,l.jX)(I),!0))},a=(P,y)=>async(T,M)=>{const I=(0,d.dn)(P,M());T((0,u.kb)(P.rootStateKey,(0,f.xt)((0,l.qD)(I,y)))),await T((0,g.us)((0,l.jX)(I),!0))},v=(P,y)=>async(T,M)=>{const I=(0,d.dn)(P,M());T((0,u.kb)(P.rootStateKey,(0,f.qZ)((0,l.qD)(I,y)))),await T((0,g.us)((0,l.jX)(I),!0))},E=(P,y)=>async(T,M)=>{const I=(0,d.dn)(P,M());T((0,u.kb)(P.rootStateKey,(0,i.QP)((0,l.qD)(I,{propName:"datasource",propValue:y}))));const S=(await(0,o.tR)().get(y))?.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters yet.";T((0,u.kb)(P.rootStateKey,(0,s.BC)({infoText:S})))},D=P=>(y,T)=>{const M=(0,d.y7)(T()),I={...(0,t.cloneDeep)(f.MK),datasource:P.datasource,name:c,id:c,rootStateKey:M},x=!1,S=(0,d.hk)(M,T()),O={type:"adhoc",id:I.id,rootStateKey:M};y((0,u.kb)(M,(0,i.QV)((0,l.qD)(O,{global:x,model:I,index:S}))))},b=(P,y)=>{const T=(0,d.y7)(y),M=(0,d.nx)(T,y);let I;for(const x of Object.values(M.variables))if((0,r.EW)(x)&&x.datasource?.uid===P.datasource.uid){I=x;break}return I}},53699:(Y,A,e)=>{"use strict";e.d(A,{AA:()=>f,D$:()=>d,E2:()=>i,MK:()=>r,qZ:()=>l,xt:()=>u});var t=e(30038),n=e(80484),o=e(87421),s=e(83370);const r={...n.Vg,type:"adhoc",datasource:null,filters:[]},g=(0,t.Z0)({name:"templating/adhoc",initialState:s.j,reducers:{filterAdded:(c,h)=>{const p=(0,o.Fs)(c,h.payload.id);p.type==="adhoc"&&p.filters.push(h.payload.data)},filterRemoved:(c,h)=>{const p=(0,o.Fs)(c,h.payload.id);if(p.type!=="adhoc")return;const m=h.payload.data;p.filters.splice(m,1)},filterUpdated:(c,h)=>{const p=(0,o.Fs)(c,h.payload.id);if(p.type!=="adhoc")return;const{filter:m,index:a}=h.payload.data;p.filters[a]=m},filtersRestored:(c,h)=>{const p=(0,o.Fs)(c,h.payload.id);p.type==="adhoc"&&(p.filters=h.payload.data)}}}),{filterAdded:u,filterRemoved:d,filterUpdated:i,filtersRestored:l}=g.actions,f=g.reducer},13344:(Y,A,e)=>{"use strict";e.d(A,{Ek:()=>r,To:()=>o,Zm:()=>n,ou:()=>s,qF:()=>t,qz:()=>g});const t="00000000-0000-0000-0000-000000000000",n="All",o="$__all",s="None",r="",g="var-"},35589:(Y,A,e)=>{"use strict";e.d(A,{c:()=>u,z:()=>d});var t=e(16792),n=e(96540),o=e(13544),s=e(40845),r=e(21744),g=e(85140);const u="Grafana-LegacyVariableQueryEditor",d=({onChange:i,query:l})=>{const f=(0,s.of)(g.$),[c,h]=(0,n.useState)(l),p=v=>{h(v.currentTarget.value)},m=(0,n.useCallback)(v=>{i(v.currentTarget.value,v.currentTarget.value)},[i]),a=(0,t.Bi)();return n.createElement(r.f,{id:a,rows:2,value:c,onChange:p,onBlur:m,placeholder:"Metric name or tags query",required:!0,"data-testid":o.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsQueryInput,cols:52,className:f.textarea})};d.displayName=u},70766:(Y,A,e)=>{"use strict";e.d(A,{y:()=>g});var t=e(96540),n=e(72574),o=e(91629),s=e(24240),r=e(35589);async function g(d,i=o.cS){if((0,s.zs)(d))return d.variables.editor;if((0,s.X3)(d)){const l=await i(d.meta);if(!l.components.QueryEditor)throw new Error("Missing QueryEditor in plugin definition.");return l.components.QueryEditor??null}return(0,s.Hf)(d)?u:(0,s.d5)(d)?(await i(d.meta)).components.VariableQueryEditor??r.z:null}function u({datasource:d,query:i,onChange:l}){const f=(0,t.useCallback)(c=>{l({refId:"StandardVariableQuery",query:c})},[l]);return t.createElement(r.z,{query:i.query,onChange:f,datasource:d,templateSrv:(0,n.w)()})}},3843:(Y,A,e)=>{"use strict";e.d(A,{BC:()=>i,DW:()=>g,Eo:()=>f,FN:()=>r,NY:()=>l,T7:()=>d,nS:()=>n,sJ:()=>u,wf:()=>s,y8:()=>c});var t=e(30038);const n={id:"",isValid:!0,errors:{},name:"",extended:null},o=(0,t.Z0)({name:"templating/editor",initialState:n,reducers:{variableEditorMounted:(h,p)=>{h.name=p.payload.name,h.id=p.payload.id},variableEditorUnMounted:(h,p)=>n,changeVariableNameSucceeded:(h,p)=>{h.name=p.payload.data.newName,delete h.errors.name,h.isValid=Object.keys(h.errors).length===0},changeVariableNameFailed:(h,p)=>{h.name=p.payload.newName,h.errors.name=p.payload.errorText,h.isValid=Object.keys(h.errors).length===0},addVariableEditorError:(h,p)=>{h.errors[p.payload.errorProp]=p.payload.errorText,h.isValid=Object.keys(h.errors).length===0},removeVariableEditorError:(h,p)=>{delete h.errors[p.payload.errorProp],h.isValid=Object.keys(h.errors).length===0},changeVariableEditorExtended:(h,p)=>{h.extended={...h.extended,...p.payload}},cleanEditorState:()=>n}}),s=o.reducer,{changeVariableNameSucceeded:r,changeVariableNameFailed:g,variableEditorMounted:u,variableEditorUnMounted:d,changeVariableEditorExtended:i,addVariableEditorError:l,removeVariableEditorError:f,cleanEditorState:c}=o.actions},85830:(Y,A,e)=>{"use strict";e.d(A,{M:()=>t});var t=(n=>(n[n.MaxSize=50]="MaxSize",n))(t||{})},25304:(Y,A,e)=>{"use strict";e.d(A,{z:()=>s});var t=e(72574),n=e(20601),o=e(13344);function s(r){const g={},u=(0,t.w)().getVariables();for(let d=0;d<u.length;d++){const i=u[d],l=r&&r[i.name];i.skipUrlSync||(l?g[o.qz+i.name]=l.value:g[o.qz+i.name]=n.B.get(i.type).getValueForUrl(i))}return g}},24240:(Y,A,e)=>{"use strict";e.d(A,{CH:()=>m,EW:()=>s,Hf:()=>f,P4:()=>o,SP:()=>u,VN:()=>p,VO:()=>r,X3:()=>h,d5:()=>l,iv:()=>g,m8:()=>d,zs:()=>c});var t=e(29505),n=e(35589);const o=a=>a.type==="query",s=a=>a.type==="adhoc",r=a=>a.type==="constant",g=a=>"multi"in a,u=a=>"options"in a,d=a=>"current"in a;function i(a){return a===null?!1:typeof a=="string"}const l=a=>!!a.metricFindQuery&&!a.variables,f=a=>{if(!a.variables||a.variables.getType()!==t.Qz.Standard)return!1;const v=a.variables;return"toDataQuery"in v&&!!v.toDataQuery},c=a=>{if(!a.variables||a.variables.getType()!==t.Qz.Custom)return!1;const v=a.variables;return"query"in v&&"editor"in v&&!!v.query&&!!v.editor},h=a=>a.variables?a.variables.getType()===t.Qz.Datasource:!1;function p(a,v){return a?a.displayName===n.c||l(v):!1}function m(a,v){return a?a.displayName!==n.c&&(h(v)||f(v)||c(v)):!1}},27238:(Y,A,e)=>{"use strict";e.d(A,{WT:()=>n,bX:()=>r,t4:()=>s});var t=e(30038);const n={usages:[],usagesNetwork:[]},o=(0,t.Z0)({name:"templating/inspect",initialState:n,reducers:{initInspect:(g,u)=>{const{usages:d,usagesNetwork:i}=u.payload;g.usages=d,g.usagesNetwork=i}}}),s=o.reducer,{initInspect:r}=o.actions},12846:(Y,A,e)=>{"use strict";e.d(A,{qJ:()=>f,hI:()=>i,hM:()=>a,H7:()=>l,xU:()=>D,P5:()=>x,g0:()=>v,PK:()=>M,Ow:()=>y});var t=e(6709);function n(S,O){const C=new Set;for(const L of S)C.add(O(L));return C}var o=e(84423),s=e(87490),r=e(34214),g=e(20601),u=e(24240),d=e(75096);const i=S=>{const O=[];for(const C of S)O.push({id:C.id,label:`${C.id}`});return O},l=(S,O)=>S.filter(C=>O.some(L=>L.from===C.id||L.to===C.id)),f=S=>{const O=[];for(const C of S)for(const L of S){if(C===L)continue;g.B.get(C.type).dependsOn(C,L)&&O.push({from:C.id,to:L.id})}return O};function c(S){const O=(0,d.t4)(S);if(!O)return;const C=O.slice(1).find(L=>L!==void 0);if(!(C in{}))return C}const h=(S,O)=>{d.SY.lastIndex=0;const C=[],U=(0,s.MA)(O,2).match(d.SY);if(!U)return C;for(const R of U){if(!R||R.indexOf("$__")!==-1||R.indexOf("${__")!==-1||R.indexOf("$hashKey")!==-1)continue;const B=c(R);S.some(H=>H.id===B)||C.find(H=>H===B)||B&&C.push(B)}return C},p={alias:[/^m$/,/^measurement$/,/^col$/,/^tag_(\w+|\d+)$/],query:[/^timeFilter$/]},m=(S,O,C)=>{const L=Object.keys(O.value).reduce((R,B)=>{const H=O.value[B];if(!H||typeof H!="string")return R;const W=p[B]?p[B].find(V=>V.test(S)):void 0;let N=(0,d.wJ)(H,S);return B==="repeat"&&H===S&&(N=!0),!W&&N&&(R={...R,[B]:H}),R},{}),U=Object.keys(O.value).reduce((R,B)=>{const H=O.value[B];if(H&&typeof H=="object"&&Object.keys(H).length){let W=H.title||H.name||H.id||B;Array.isArray(O.value)&&O.key==="panels"&&(W=`${W}[${H.id}]`);const N=m(S,{key:B,value:H},{});Object.keys(N).length&&(R={...R,[W]:N})}return R},{});return(Object.keys(L).length||Object.keys(U).length)&&(C={...C,...L,...U}),C},a=(S,O)=>{if(!O)return{unUsed:[],usages:[]};const C=[];let L=[];const U=O.getSaveModelCloneOld();for(const R of S){const B=R.id,H=m(B,{key:"model",value:U},{});!Object.keys(H).length&&!(0,u.EW)(R)&&C.push(R),Object.keys(H).length&&L.push({variable:R,tree:H})}return{unUsed:C,usages:L}};async function v(S,O){return new Promise((C,L)=>{setTimeout(()=>{try{const U=E(S,O);C(y(U))}catch(U){L(U)}},200)})}function E(S,O){if(!O)return[];let C=[];const L=O.getSaveModelCloneOld(),U=h(S,L);for(const R of U){const B=m(R,{key:"model",value:L},{});if(Object.keys(B).length){const H={id:R,name:R};C.push({variable:H,tree:B})}}return C}function D(S,O,C){const L=n(O.descendants(S),R=>R.name);L.add(t.c.includeVars);for(const R of S)L.add(R);return b([...L],C)}function b(S,O){const C=[];for(const L of S)O[L]&&C.push(...O[L]);return new Set(C)}const P=(S,O)=>{const{id:C,value:L}=O,{nodes:U,edges:R}=S;if(L&&typeof L=="string"){const B=`${O.id}-${L}`;return U.push({id:B,label:L}),R.push({from:B,to:C}),S}if(L&&typeof L=="object"){const B=Object.keys(L);for(const H of B){const W=`${O.id}-${H}`;U.push({id:W,label:H}),R.push({from:W,to:C}),S=P(S,{id:W,value:L[H]})}return S}return S},y=S=>{const O=[];for(const C of S){const{variable:L,tree:U}=C,R={variable:L,nodes:[{id:"dashboard",label:"dashboard"}],edges:[],showGraph:!1};O.push(P(R,{id:"dashboard",value:U}))}return O},T=S=>Object.values(S).reduce((C,L)=>typeof L=="object"?C+T(L):C+1,0),M=(S,O)=>{const C=O.find(L=>L.variable.id===S);return C?T(C.tree):0};function I(S){const O=[];for(const C of S)O.push(C),C.panels?.length&&O.push(...I(C.panels.map(L=>new PanelModel(L))));return O}function x(S){const O={};for(const C of S){const L=(0,o.tw)(C),U=[...L.matchAll(/"repeat":"([^"]+)"/g)].map(H=>H[1]),R=L.match(d.SY)?.map(H=>c(H))??[],B=[...U,...R];for(const H of B)H in O?O[H].add(C.id):O[H]=new Set([C.id])}return O}},81515:(Y,A,e)=>{"use strict";e.d(A,{E5:()=>i,Ez:()=>u,mn:()=>l});var t=e(30038),n=e(2543),o=e.n(n),s=e(87421),r=e(83370),g=e(80484);const u={...g.Vg,type:"interval",auto_count:30,auto_min:"10s",options:[],auto:!1,query:"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",refresh:g.CO.onTimeRangeChanged,current:{}},d=(0,t.Z0)({name:"templating/interval",initialState:r.j,reducers:{createIntervalOptions:(f,c)=>{const h=(0,s.Fs)(f,c.payload.id);if(h.type!=="interval")return;const p=(0,n.map)(h.query.match(/(["'])(.*?)\1|\w+/g),m=>(m=m.replace(/["']+/g,""),{text:m.trim(),value:m.trim(),selected:!1}));h.auto&&p.length&&p[0].text!=="auto"&&p.unshift({text:"auto",value:"$__auto_interval_"+h.name,selected:!1}),h.options=p}}}),i=d.reducer,{createIntervalOptions:l}=d.actions},24300:(Y,A,e)=>{"use strict";e.d(A,{jR:()=>x,Fu:()=>b,$z:()=>d,O$:()=>P,ho:()=>S,MO:()=>D,an:()=>y,U9:()=>E,fx:()=>M,qh:()=>I,S8:()=>T});var t=e(53076),n=e(30038),o=e(2543),s=e(92053);const r=(O,...C)=>C.reduce((L,U)=>U(L),O);var g=e(13344),u=e(24240);const d={id:"",highlightIndex:-1,queryValue:"",selectedValues:[],options:[],multi:!1},i=1e3,l=new t.A({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1}),f=O=>Array.isArray(O)?O.reduce((C,L)=>((0,o.isString)(L.value)&&(C[L.value]=L),C),{}):{},c=O=>{if(!Array.isArray(O.options))return O.options=[],O;const C=f(O.selectedValues);return O.selectedValues=Object.values(C),O.options=O.options.map(L=>{if(!(0,o.isString)(L.value))return L;const U=!!C[L.value];return L.selected===U?L:{...L,selected:U}}),O.options=h(O.options),O},h=O=>Array.isArray(O)?O.length<=i?O:O.slice(0,i):[],p=O=>{const{options:C,selectedValues:L}=O;return C.length===0||L.length>0||!C[0]||C[0].value!==g.To||(O.selectedValues=[{...C[0],selected:!0}]),O},m=O=>{const{selectedValues:C}=O;return C.length>1&&(O.selectedValues=C.filter(L=>L.value!==g.To)),O},a=O=>O.filter(C=>C.value!==g.To).map(C=>({...C,selected:!0})),v=(0,n.Z0)({name:"templating/optionsPicker",initialState:d,reducers:{showOptions:(O,C)=>{const{query:L,options:U}=C.payload;if(O.highlightIndex=-1,O.options=(0,o.cloneDeep)(U),O.id=C.payload.id,O.queryValue="",O.multi=!1,(0,u.iv)(C.payload)&&(O.multi=C.payload.multi??!1),(0,u.P4)(C.payload)){const{queryValue:R}=C.payload,B=(0,s.E)(L);O.queryValue=B&&R?R:""}return O.selectedValues=O.options.filter(R=>R.selected),r(O,p,c)},hideOptions:(O,C)=>({...d}),toggleOption:(O,C)=>{const{option:L,clearOthers:U,forceSelect:R}=C.payload,{multi:B,selectedValues:H}=O;if(L){const W=!H.find(N=>N.value===L.value&&N.text===L.text);if(L.value===g.To||!B||U)return W||R?O.selectedValues=[{...L,selected:!0}]:O.selectedValues=[],r(O,p,m,c);if(R||W)return O.selectedValues.push({...L,selected:!0}),r(O,p,m,c);O.selectedValues=H.filter(N=>N.value!==L.value&&N.text!==L.text)}else O.selectedValues=[];return r(O,p,m,c)},moveOptionsHighlight:(O,C)=>{let L=O.highlightIndex+C.payload;return L<0?L=-1:L>=O.options.length&&(L=O.options.length-1),{...O,highlightIndex:L}},toggleAllOptions:(O,C)=>{const L=O.selectedValues.find(R=>R.value===g.To),U=O.options.find(R=>R.value===g.To);return O.selectedValues.length>0&&U&&!L?(O.selectedValues=[],O.selectedValues.push({text:U.text??"All",value:U.value,selected:!0}),r(O,c)):L&&O.selectedValues.length===1?(O.selectedValues=a(O.options),r(O,c)):O.selectedValues.length>0&&!U?(O.selectedValues=[],r(O,c)):(O.selectedValues=a(O.options),r(O,c))},updateSearchQuery:(O,C)=>(O.queryValue=C.payload,O),updateOptionsAndFilter:(O,C)=>{const L=O.queryValue.trim();let U=[];if(L==="")U=C.payload;else{const R=C.payload.map(({text:N})=>Array.isArray(N)?N.toString():N),[B,H,W]=l.search(R,L,5);B?.length&&(H&&W?U=W.map(N=>C.payload[H.idx[N]]):U=B.map(N=>C.payload[N]),U.sort((N,V)=>(N.value==="$__all"?-1:0)-(V.value==="$__all"?-1:0)))}return O.options=U,O.highlightIndex=0,r(O,p,c)},updateOptionsFromSearch:(O,C)=>(O.options=C.payload,O.highlightIndex=0,r(O,p,c)),cleanPickerState:()=>d}}),{toggleOption:E,showOptions:D,hideOptions:b,moveOptionsHighlight:P,toggleAllOptions:y,updateSearchQuery:T,updateOptionsAndFilter:M,updateOptionsFromSearch:I,cleanPickerState:x}=v.actions,S=v.reducer},86886:(Y,A,e)=>{"use strict";e.d(A,{C:()=>t});const t=(s,r)=>s&&(r&&!Array.isArray(s.value)?{...s,value:o(s.value),text:o(s.text)}:!r&&Array.isArray(s.value)?{...s,value:n(s.value),text:n(s.text)}:s),n=s=>Array.isArray(s)?s.length>0?s[0]:"":s,o=s=>Array.isArray(s)?s:[s]},72401:(Y,A,e)=>{"use strict";e.d(A,{Y7:()=>ke,TI:()=>ae,_q:()=>Ze,RK:()=>he,t9:()=>ye,x7:()=>ie,Hn:()=>Be,mZ:()=>je,kl:()=>ve,us:()=>le});var t=e(2543),n=e(12470),o=e(92041),s=e(39070),r=e(22391),g=e(12131),u=e(32264),d=e(82467),i=e(16233),l=e(74856),f=e(99140),c=e(3169),h=e(10096),p=e(27677),m=e(34525),a=e(31193),v=e(87986),E=e(20601),D=e(13344),b=e(3843),P=e(24240),y=e(12846),T=e(24300),M=e(86886),I=e(80484),x=e(75096),S=e(73134),O=e(28601),C=e(48594),L=e(84014);const U=(Ee,J=-1,oe=!1,ue=!1)=>{const be={};if(ue){const Le={...initialVariableModelState,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{name:"A dashboard title",uid:"An dashboard UID",toString:()=>"A dashboard title"}}},_e={...initialVariableModelState,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{name:"An org name",id:1,toString:()=>"1"}}},Ve={...initialVariableModelState,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{login:"admin",id:1,email:"admin@test",toString:()=>"1"}}};be[Le.id]=Le,be[_e.id]=_e,be[Ve.id]=Ve}for(let Le=0;Le<Ee;Le++)be[Le]=createQueryVariable({id:Le.toString(),name:`Name-${Le}`,label:`Label-${Le}`,index:Le});return oe&&(be[NEW_VARIABLE_ID]=createQueryVariable({id:NEW_VARIABLE_ID,name:`Name-${NEW_VARIABLE_ID}`,label:`Label-${NEW_VARIABLE_ID}`,index:Ee})),be},R=(Ee,J={})=>{const oe={id:"0",rootStateKey:"key",index:0,name:"0"};return{initialState:{0:{...{...Ee.initialState,...oe},...J}}}},B=()=>combineReducers({dashboard:dashboardReducer,templating:keyedVariablesReducer}),H=()=>combineReducers({templating:keyedVariablesReducer});function W(Ee,J){return{templating:{lastKey:Ee,keys:{[Ee]:{...getInitialTemplatingState(),...J}}}}}function N(Ee,J){return Ee.find(ue=>ue.name===J)}function V(Ee){return(Ee.type==="query"||Ee.type==="datasource"||Ee.type==="interval")&&Ee.refresh===S.CO.onTimeRangeChanged}var G=e(87421),_=e(56968),K=e(85675),j=e(15120);const k=(Ee,J)=>(oe,ue)=>{let be=0;const Le=J.templating.list;for(let Ve=0;Ve<Le.length;Ve++){const We=Q(Le[Ve]);We.rootStateKey=Ee,E.B.getIfExists(We.type)&&oe((0,C.kb)(Ee,(0,_.QV)((0,x.qD)(We,{global:!1,index:be++,model:We}))))}(0,v.w)().updateTimeRange((0,l.jG)().timeRange());const _e=(0,G.SS)(Ee,ue());for(const Ve of _e)oe((0,C.kb)(Ee,(0,_.wB)((0,x.qD)(Ve))))};function Q(Ee){if(!(0,P.SP)(Ee))return Ee;let J=!1;for(const oe of Ee.options)if(oe.selected=!1,Array.isArray(Ee.current.value))for(const ue of Ee.current.value)oe.value===ue&&(oe.selected=J=!0);else oe.value===Ee.current.value&&(oe.selected=J=!0);return!J&&Ee.options.length&&(Ee.options[0].selected=!0),Ee}const ee=(Ee,J)=>oe=>{const ue={...I.Vg,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:n.zL.hideVariable,current:{value:{name:J.title,uid:J.uid,toString:()=>J.title}}};oe((0,C.kb)(Ee,(0,_.QV)((0,x.qD)(ue,{global:ue.global,index:ue.index,model:ue}))));const be={...I.Vg,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:n.zL.hideVariable,current:{value:{name:i.TP.user.orgName,id:i.TP.user.orgId,toString:()=>i.TP.user.orgId.toString()}}};oe((0,C.kb)(Ee,(0,_.QV)((0,x.qD)(be,{global:be.global,index:be.index,model:be}))));const Le={...I.Vg,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:n.zL.hideVariable,current:{value:{login:i.TP.user.login,id:i.TP.user.id,email:i.TP.user.email,toString:()=>i.TP.user.id.toString()}}};oe((0,C.kb)(Ee,(0,_.QV)((0,x.qD)(Le,{global:Le.global,index:Le.index,model:Le}))))},ae=(Ee,J)=>(oe,ue)=>{const{rootStateKey:be}=Ee,Le=(0,G.dn)(Ee,ue());if(!(0,P.iv)(Le)||(0,o.R)(Le.current))return;const _e=(0,M.C)(Le.current,J);oe((0,C.kb)(be,(0,_.QP)((0,x.qD)(Ee,{propName:"multi",propValue:J})))),oe((0,C.kb)(be,(0,_.QP)((0,x.qD)(Ee,{propName:"current",propValue:_e}))))},Z=async(Ee,J)=>{if(!Ee.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${Ee.id}`);if(ne(Ee,J))throw new Error("Circular dependency in dashboard variables detected. Dashboard may not work as expected.");const oe=q(Ee,J);te(Ee.rootStateKey,oe,J)&&await new Promise(ue=>{const be=f.M_.subscribe(()=>{if(!Ee.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${Ee.id}`);te(Ee.rootStateKey,oe,f.M_.getState())||(be(),ue())})})},ne=(Ee,J,oe=new Set)=>oe.has(Ee.id)?!0:(oe=new Set([...oe,Ee.id]),q(Ee,J).some(ue=>ne(ue,J,oe))),q=(Ee,J)=>{if(!Ee.rootStateKey)return[];const oe=[];for(const ue of(0,G.SS)(Ee.rootStateKey,J))Ee!==ue&&E.B.getIfExists(Ee.type)&&E.B.get(Ee.type).dependsOn(Ee,ue)&&oe.push(ue);return oe},te=(Ee,J,oe)=>{if(J.length===0)return!1;const ue=(0,G.SS)(Ee,oe);return J.filter(Le=>ue.some(_e=>_e.id===Le.id&&(_e.state===s.Gu.NotStarted||_e.state===s.Gu.Loading))).length>0},re=(Ee,J)=>async(oe,ue)=>{const be=(0,G.dn)(Ee,ue());await Z(be,ue());const Le=J[D.qz+be.name];if(Le!==void 0){const _e=(0,x.QT)(Le);await E.B.get(be.type).setValueFromUrl(be,_e);return}if(be.hasOwnProperty("refresh")){const _e=be;if(_e.refresh===n.CO.onDashboardLoad||_e.refresh===n.CO.onTimeRangeChanged){await oe(je((0,x.jX)(_e)));return}}if(be.type==="custom"){await oe(je((0,x.jX)(be)));return}oe(Ge(Ee))},de=Ee=>async(J,oe)=>{const ue=g.Ny.getSearchObject(),be=(0,G.SS)(Ee,oe()).map(async Le=>await J(re((0,x.jX)(Le),ue)));await Promise.all(be)},ie=(Ee,J)=>async(oe,ue)=>{const be=(0,x.QT)(J),Le=(0,G.dn)(Ee,ue());(0,x.q$)(Le)!==n.CO.never&&await oe(je((0,x.jX)(Le)));const _e=(0,G.dn)((0,x.jX)(Le),ue());if(!(0,P.SP)(_e))return;if(!_e)throw new Error(`Couldn't find variable with name: ${Le.name}`);let Ve=_e.options.find(We=>We.text===be||We.value===be);if(!Ve&&(0,P.iv)(_e)&&_e.allValue&&be===_e.allValue&&(Ve={text:D.Zm,value:D.To,selected:!1}),!Ve){let We=be;const $e=be;Array.isArray(be)&&(We=be.reduce((it,at)=>{const ht=_e.options.find(ft=>ft.value===at);return ht?[].concat(it,[ht.text]):[].concat(it,[at])},[])),Ve={text:We,value:$e,selected:!1}}(0,P.iv)(_e)&&(Ve=(0,M.C)({text:(0,t.castArray)(Ve.text),value:(0,t.castArray)(Ve.value),selected:!1},_e.multi)),await E.B.get(Le.type).setValue(_e,Ve)},ge=Ee=>{let J,oe,ue,be;const Le=[];for(J=0;J<Ee.options.length;J++)if(be={...Ee.options[J]},be.selected=!1,Array.isArray(Ee.current.value))for(oe=0;oe<Ee.current.value.length;oe++)ue=Ee.current.value[oe],be.value===ue&&(be.selected=!0,Le.push(be));else be.value===Ee.current.value&&(be.selected=!0,Le.push(be));return Le},ve=(Ee,J)=>(oe,ue)=>{const be=(0,G.dn)(Ee,ue());if(!(0,P.SP)(be))return Promise.resolve();const Le=be.current||{},_e=E.B.get(be.type).setValue;if(Array.isArray(Le.value)){const it=ge(be);if(it.length===0){const ht=be.options[0];return _e(be,{value:typeof ht.value=="string"?[ht.value]:ht.value,text:typeof ht.text=="string"?[ht.text]:ht.text,selected:!0})}const at={value:it.map(ht=>ht.value),text:it.map(ht=>ht.text),selected:!0};return _e(be,at)}let Ve=null;const We=(0,x.Nz)(be),$e=(0,x.Lz)(be);if(Ve=be.options?.find(it=>it.text===We||it.value===$e),Ve||J&&(Ve=be.options?.find(it=>it.text===J||it.value===J),Ve))return _e(be,Ve);if(be.options){const it=be.options[0];if(it)return _e(be,it)}return Promise.resolve()},ye=(Ee,J,oe)=>async ue=>{const{rootStateKey:be}=Ee;return ue((0,C.kb)(be,(0,_.dE)((0,x.qD)(Ee,{option:J})))),await ue(le(Ee,oe))},pe=Ee=>{const J=new m.TS;return Ee.forEach(oe=>{J.createNode(oe.name)}),Ee.forEach(oe=>{Ee.forEach(ue=>{oe!==ue&&E.B.get(oe.type).dependsOn(oe,ue)&&J.link(oe.name,ue.name)})}),J},le=(Ee,J,oe=h.lE)=>async(ue,be)=>{const Le=be(),{rootStateKey:_e}=Ee,Ve=(0,G.dn)(Ee,Le);if((0,G.nx)(_e,Le).transaction.status===I.x8.Fetching)return(0,x.q$)(Ve)===n.CO.never&&(await ue(Oe((0,x.jX)(Ve))),ue(Ge(Ee))),Promise.resolve();const We=(0,G.SS)(_e,Le),$e=pe(We),it=Le.dashboard?.getModel()?.panels??[],at=(0,y.P5)(it),ht=Ve.type==="adhoc"?{refreshAll:!0,panelIds:[]}:{refreshAll:!1,panelIds:Array.from((0,y.xU)([Ve.id],$e,at)),variable:(0,G.dn)(Ee,Le)},ft=$e.getNode(Ve.name);let gt=[];return ft&&(gt=ft.getOptimizedInputEdges().map(Dt=>{const It=We.find(jt=>jt.name===Dt.inputNode?.name);return It?ue(je((0,x.jX)(It))):Promise.resolve()})),Promise.all(gt).then(()=>{J&&(oe.publish(new I.og(ht)),g.Ny.partial(Ne(_e,be)))})},Me=(Ee,J,oe,ue)=>(J.includes(Ee.name)||J.push(Ee.name),Ee.outputEdges.forEach(be=>{const Le=be.outputNode;if(Le&&!J.includes(Le.name)){const _e=oe.find(Ve=>Ve.name===Le.name);_e&&_e.refresh===n.CO.onTimeRangeChanged&&ue.indexOf(_e)===-1?(ue.push(_e),J.push(Le.name)):Me(Le,J,oe,ue)}}),ue),De=(Ee,J)=>Ee.outputEdges.every(oe=>{const ue=oe.outputNode;if(ue){const be=N(J,ue.name);if(be&&be.type==="query")return be.refresh!==n.CO.onTimeRangeChanged}return!0}),Re=(Ee,J)=>{const oe=(0,G.SS)(Ee,J),ue=pe(oe),be=[],Le=[];return oe.forEach(_e=>{const Ve=ue.getNode(_e.name);if(!be.includes(_e.name)&&Ve){const We=N(oe,Ve.name);if(!We)return;const $e=V(We);$e&&Ve.outputEdges.length===0&&Le.push(We),$e&&Le.includes(We)&&Ve.outputEdges.length>0&&(Le.push(We),Me(Ve,be,oe,Le)),$e&&Ve.outputEdges.length>0&&De(Ve,oe)&&(Le.includes(We)||Le.push(We)),!$e&&Ve.outputEdges.length>0&&Me(Ve,be,oe,Le)}}),Le},me=(Ee,J)=>(0,G.SS)(Ee,J).filter(be=>"refresh"in be&&"options"in be?be.refresh===n.CO.onTimeRangeChanged:!1),he=(Ee,J,oe={templateSrv:(0,v.w)(),events:h.lE})=>async(ue,be)=>{oe.templateSrv.updateTimeRange(J);let Le=[];u.$.featureToggles.refactorVariablesTimeRange?Le=Re(Ee,be()):Le=me(Ee,be());const _e=Le.map(We=>We.id),Ve=Le.map(We=>ue(Te((0,x.jX)(We))));try{await Promise.all(Ve),oe.events.publish(new I.BS({variableIds:_e}))}catch(We){console.error(We),ue((0,d.dx)(He("Template variable service failed",We)))}},Te=Ee=>async(J,oe)=>{const ue=(0,G.dn)(Ee,oe());if(!(0,P.SP)(ue))return;const be=ue.options.slice();await J(je((0,x.jX)(ue),!0));const Le=(0,G.dn)(Ee,oe());if(!(0,P.SP)(Le))return;const _e=Le.options;JSON.stringify(be)!==JSON.stringify(_e)&&oe().dashboard.getModel()?.templateVariableValueUpdated()},Be=(Ee,J,oe=h.lE)=>async(ue,be)=>{const Le=[],_e=be().dashboard.getModel(),Ve=(0,G.SS)(Ee,be());for(const ht of Ve){const ft=D.qz+ht.name;if(!J.hasOwnProperty(ft)||!we(ht,J[ft].value))continue;let gt=J[ft].value;if(J[ft].removed){const It=_e?.templating.list.find(jt=>jt.name===ht.name);It&&(0,P.m8)(It)&&(gt=It.current.value),It&&It.type==="constant"&&(gt=It.query)}const Dt=E.B.get(ht.type).setValueFromUrl(ht,gt);Le.push(Dt)}const We=Ve.filter(ht=>{const ft=D.qz+ht.name;return J.hasOwnProperty(ft)&&we(ht,J[ft].value)&&ht.type!=="adhoc"}),$e=pe(Ve),it=(0,y.P5)(_e?.panels??[]),at=(0,y.xU)(We.map(ht=>ht.id),$e,it);Le.length&&(await Promise.all(Le),oe.publish(new I.eF({refreshAll:at.size===0,panelIds:Array.from(at)})))};function we(Ee,J){const oe=E.B.get(Ee.type).getValueForUrl(Ee);let ue=(0,x.QT)(J);return Array.isArray(oe)&&!Array.isArray(ue)&&(ue=[ue]),!(0,t.isEqual)(oe,ue)}const Ne=(Ee,J)=>{const oe=g.Ny.getSearchObject(),ue=Object.keys(oe).filter(be=>be.indexOf(D.qz)===-1).reduce((be,Le)=>(be[Le]=oe[Le],be),{});for(const be of(0,G.SS)(Ee,J())){if(be.skipUrlSync)continue;const Le=E.B.get(be.type);ue[D.qz+be.name]=Le.getValueForUrl(be)}return ue},Ze=(Ee,J)=>async(oe,ue)=>{try{const be=(0,x.q4)(Ee),Le=ue(),_e=(0,G.Tk)(Le);_e&&(0,G.nx)(_e,Le).transaction.status===I.x8.Fetching&&oe(ke(_e)),oe((0,C.kb)(be,(0,K.kH)({uid:be}))),oe(ee(be,J)),oe(k(be,J)),oe(st(be)),await oe(de(be)),oe((0,C.kb)(be,(0,K.$O)({uid:be})))}catch(be){oe((0,d.dx)(He("Templating init failed",be))),console.error(be)}};function st(Ee,J=a.tR){return(oe,ue)=>{const be=(0,G.SS)(Ee,ue());for(const Le of be){if(Le.type!=="adhoc"&&Le.type!=="query")continue;const{datasource:_e}=Le;if((0,r.fN)(_e))continue;const Ve=J().getInstanceSettings(_e),We=Ve?(0,r.p$)(Ve):{uid:_e};oe((0,C.kb)(Ee,(0,_.QP)((0,x.qD)(Le,{propName:"datasource",propValue:We}))))}}}const Qe=Ee=>J=>{J((0,C.kb)(Ee,(0,j.v)())),J((0,C.kb)(Ee,(0,b.y8)())),J((0,C.kb)(Ee,(0,T.jR)())),J((0,C.kb)(Ee,(0,K.pu)()))},ke=(Ee,J={getBackendSrv:p.AI})=>oe=>{J.getBackendSrv().cancelAllInFlightRequests(),oe(Qe(Ee))},je=(Ee,J=!1)=>async(oe,ue)=>{const{rootStateKey:be}=Ee;try{if(!(0,x.sN)(be,ue()))return;const Le=(0,G.dn)(Ee,ue());oe((0,C.kb)(be,(0,_.a7)((0,x.qD)(Le)))),await oe(Oe((0,x.jX)(Le))),await E.B.get(Le.type).updateOptions(Le),oe(Ge(Ee))}catch(Le){if(oe((0,C.kb)(be,(0,_.Te)((0,x.qD)(Ee,{error:Le})))),J||(console.error(Le),oe((0,d.dx)(He("Error updating options:",Le,Ee)))),J)throw Le}},He=(Ee,J,oe)=>(0,c.gi)(`${oe?`Templating [${oe.id}]`:"Templating"}`,J instanceof Error?`${Ee} ${J.message}`:`${Ee}`),Ge=Ee=>(J,oe)=>{const{rootStateKey:ue}=Ee;if(!(0,x.sN)(ue,oe()))return;const be=(0,G.dn)(Ee,oe());be.state!==s.Gu.Done&&J((0,C.kb)(Ee.rootStateKey,(0,_.Pu)((0,x.qD)(be))))};function Oe(Ee,J=a.tR){return async function(oe,ue){const{id:be,rootStateKey:Le}=Ee;if(!(0,x.sN)(Le,ue()))return;const _e=(0,G.dn)(Ee,ue());if(_e.type==="query")try{const Ve=await J().get(_e.datasource??"");if((0,P.d5)(Ve)||!(0,P.Hf)(Ve)||Ke(_e.query))return;const We={refId:`${Ve.name}-${be}-Variable-Query`,query:_e.query};oe((0,C.kb)(Le,(0,_.QP)((0,x.qD)(Ee,{propName:"query",propValue:We}))))}catch(Ve){oe((0,d.dx)(He("Failed to upgrade legacy queries",Ve))),console.error(Ve)}}}function Ke(Ee){return(0,s.Gv)(Ee)&&"refId"in Ee&&typeof Ee.refId=="string"}},48594:(Y,A,e)=>{"use strict";e.d(A,{Ay:()=>i,L1:()=>s,kb:()=>g});var t=e(75096),n=e(84014),o=e(85675);const s={keys:{}},r=l=>({type:`templating/keyed/${l.action.type.replace(/^templating\//,"")}`,payload:l});function g(l,f){const c=(0,t.q4)(l);return r({key:c,action:f})}const u=l=>typeof l.type=="string"&&l.type.startsWith("templating/keyed")&&"payload"in l&&typeof l.payload.key=="string";function d(l=s,f){if(u(f)){const{key:c,action:h}=f.payload,p=(0,t.q4)(c),m=o.kH.match(h)?p:l.lastKey,a=(0,n.H)(),v=l.keys[p],E=a(v,h);return{...l,lastKey:m,keys:{...l.keys,[p]:E}}}return l}const i={templating:d}},84014:(Y,A,e)=>{"use strict";e.d(A,{H:()=>i,x:()=>l});var t=e(82960),n=e(3843),o=e(27238),s=e(24300),r=e(85675),g=e(83370),u=e(15120);let d;function i(){return d||(d=(0,t.combineReducers)({editor:n.wf,variables:u.Y,optionsPicker:s.ho,transaction:r.Dd,inspect:o.t4})),d}function l(){return{editor:n.nS,variables:g.j,optionsPicker:s.$z,transaction:r.i3,inspect:o.WT}}},87421:(Y,A,e)=>{"use strict";e.d(A,{Fs:()=>b,SS:()=>d,Tk:()=>m,UN:()=>E,_2:()=>D,bZ:()=>v,dn:()=>r,hk:()=>c,nS:()=>f,nx:()=>u,pi:()=>l,wk:()=>h,y7:()=>a});var t=e(41811),n=e(99140),o=e(75096),s=e(84014);function r(P,y=(0,n.Gu)(),T=!0){const{id:M,rootStateKey:I}=P,S=u(I,y).variables[M];if(!S){if(T)throw new Error(`Couldn't find variable with id:${M}`);return}return S}function g(P,y,T=(0,n.Gu)()){return Object.values(u(y,T).variables).filter(P).sort((M,I)=>M.index-I.index)}function u(P,y=(0,n.Gu)()){return y.templating.keys[(0,o.q4)(P)]??(0,s.x)()}function d(P,y=(0,n.Gu)()){return g(i,P,y)}function i(P){return P.type!=="system"}const l=(0,t.A)((P,y)=>d(P,(0,n.Gu)())),f=(P,y)=>d(P,y);function c(P,y=(0,n.Gu)()){return h(Object.values(u(P,y).variables))}function h(P){const y=P.filter(i).sort((T,M)=>T.index-M.index);return y.length>0?y[y.length-1].index+1:0}function p(P,y=getState()){return u(P,y).transaction.isDirty}function m(P=(0,n.Gu)()){return P.templating?.lastKey}function a(P=(0,n.Gu)()){if(!P.templating?.lastKey)throw new Error("Accessing lastKey without initializing it variables");return P.templating.lastKey}function v(P,y=(0,n.Gu)()){const T=m(y);return T?g(P,T,y):[]}function E(P=(0,n.Gu)()){const y=m(P);return y?d(y,P):[]}function D(P,y=(0,n.Gu)()){const T=m(y);if(T)return r({id:P,rootStateKey:T,type:"query"},y,!1)}function b(P,y){return P[y]}},56968:(Y,A,e)=>{"use strict";e.d(A,{Hr:()=>h,Pu:()=>y,QP:()=>m,QV:()=>p,Te:()=>T,a7:()=>P,dE:()=>E,hj:()=>a,l_:()=>D,qi:()=>c,ut:()=>v,wB:()=>b});var t=e(30038),n=e(2543),o=e.n(n),s=e(39070),r=e(20601),g=e(3843),u=e(24240),d=e(75096),i=e(87421),l=e(83370);const f=(0,t.Z0)({name:"templating/shared",initialState:l.j,reducers:{addVariable:(M,I)=>{const x=I.payload.id??I.payload.data.model.name,S=r.B.get(I.payload.type),O=(0,n.cloneDeep)(S.initialState),C=S.beforeAdding?S.beforeAdding(I.payload.data.model):(0,n.cloneDeep)(I.payload.data.model),L={...(0,n.defaults)({},C,O),id:x,index:I.payload.data.index,global:I.payload.data.global};M[x]=L},variableStateNotStarted:(M,I)=>{const x=(0,i.Fs)(M,I.payload.id);x.state=s.Gu.NotStarted,x.error=null},variableStateFetching:(M,I)=>{const x=(0,i.Fs)(M,I.payload.id);x.state=s.Gu.Loading,x.error=null},variableStateCompleted:(M,I)=>{const x=(0,i.Fs)(M,I.payload.id);x&&(x.state=s.Gu.Done,x.error=null)},variableStateFailed:(M,I)=>{const x=(0,i.Fs)(M,I.payload.id);x&&(x.state=s.Gu.Error,x.error=I.payload.data.error)},removeVariable:(M,I)=>{if(delete M[I.payload.id],!I.payload.data.reIndex)return;const x=Object.values(M).sort((S,O)=>S.index-O.index);for(let S=0;S<x.length;S++)x[S].index=S},duplicateVariable:(M,I)=>{function x(W){return W.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const S=(0,n.cloneDeep)(M[I.payload.id]),O=new RegExp(`^copy_of_${x(S.name)}(_(\\d+))?$`),C=Object.values(M).map(({name:W})=>W.match(O)).filter(W=>W!=null),L=C.map(W=>W[2]).filter(W=>W!=null),U=(()=>C.length===0?null:L.length===0?1:L.map(W=>+W).sort((W,N)=>N-W)[0]+1)(),R=`copy_of_${S.name}${U?`_${U}`:""}`,B=I.payload.data?.newId??R,H=(0,i.wk)(Object.values(M));M[B]={...(0,n.cloneDeep)(r.B.get(I.payload.type).initialState),...S,id:B,name:R,index:H}},changeVariableOrder:(M,I)=>{const{toIndex:x,fromIndex:S}=I.payload.data,O=Object.values(M);for(let C=0;C<O.length;C++){const L=O[C];L.index===S?L.index=x:L.index>S&&L.index<=x?L.index--:L.index<S&&L.index>=x&&L.index++}},changeVariableType:(M,I)=>{const{id:x}=I.payload,{label:S,name:O,index:C,description:L,rootStateKey:U}=M[x];M[x]={...(0,n.cloneDeep)(r.B.get(I.payload.data.newType).initialState),id:x,rootStateKey:U,label:S,name:O,index:C,description:L}},setCurrentVariableValue:(M,I)=>{if(!I.payload.data.option)return;const x=(0,i.Fs)(M,I.payload.id);if(!(0,u.SP)(x))return;const{option:S}=I.payload.data,O={...S,text:(0,d.QT)(S?.text),value:(0,d.QT)(S?.value)};x.current=O,x.options=x.options.map(C=>{C.value=(0,d.QT)(C.value),C.text=(0,d.QT)(C.text);let L=!1;if(Array.isArray(O.value))for(let U=0;U<O.value.length;U++){const R=O.value[U];if(C.value===R){L=!0;break}}else C.value===O.value&&(L=!0);return C.selected=L,C})},changeVariableProp:(M,I)=>{const x=(0,i.Fs)(M,I.payload.id);x[I.payload.data.propName]=I.payload.data.propValue}},extraReducers:M=>M.addCase(g.FN,(I,x)=>{const S=(0,i.Fs)(I,x.payload.id);S.name=x.payload.data.newName})}),c=f.reducer,{removeVariable:h,addVariable:p,changeVariableProp:m,changeVariableOrder:a,duplicateVariable:v,setCurrentVariableValue:E,changeVariableType:D,variableStateNotStarted:b,variableStateFetching:P,variableStateCompleted:y,variableStateFailed:T}=f.actions},85675:(Y,A,e)=>{"use strict";e.d(A,{$O:()=>i,Dd:()=>l,i3:()=>s,kH:()=>u,pu:()=>d});var t=e(30038),n=e(80484),o=e(56968);const s={uid:null,status:n.x8.NotStarted,isDirty:!1},r=(0,t.Z0)({name:"templating/transaction",initialState:s,reducers:{variablesInitTransaction:(f,c)=>{f.uid=c.payload.uid,f.status=n.x8.Fetching},variablesCompleteTransaction:(f,c)=>{f.uid===c.payload.uid&&(f.status=n.x8.Completed)},variablesClearTransaction:(f,c)=>{f.uid=null,f.status=n.x8.NotStarted,f.isDirty=!1}},extraReducers:f=>f.addMatcher(g,(c,h)=>{c.status===n.x8.Completed&&(c.isDirty=!0)})});function g(f){return o.Hr.match(f)||o.QV.match(f)||o.QP.match(f)||o.hj.match(f)||o.ut.match(f)||o.l_.match(f)}const{variablesInitTransaction:u,variablesClearTransaction:d,variablesCompleteTransaction:i}=r.actions,l=r.reducer},83370:(Y,A,e)=>{"use strict";e.d(A,{j:()=>t});const t={}},15120:(Y,A,e)=>{"use strict";e.d(A,{Y:()=>g,v:()=>r});var t=e(30038),n=e(20601),o=e(56968),s=e(83370);const r=(0,t.VP)("templating/cleanVariables"),g=(u=s.j,d)=>{if(r.match(d)){const i=Object.values(u).filter(f=>f.global);return i?i.reduce((f,c)=>(f[c.id]=c,f),{}):s.j}return d?.payload?.type&&n.B.getIfExists(d?.payload?.type)?n.B.get(d.payload.type).reducer((0,o.qi)(u,d),d):u}},80484:(Y,A,e)=>{"use strict";e.d(A,{BS:()=>d,CO:()=>t.CO,Vg:()=>g,ZG:()=>t.ZG,eF:()=>i,og:()=>u,x8:()=>r,zL:()=>t.zL});var t=e(12470),n=e(39070),o=e(65463),s=e(13344),r=(l=>(l.NotStarted="Not started",l.Fetching="Fetching",l.Completed="Completed",l))(r||{});const g={id:s.qF,rootStateKey:null,name:"",type:"query",global:!1,index:-1,hide:t.zL.dontHide,skipUrlSync:!1,state:n.Gu.NotStarted,error:null,description:null};class u extends o.x{}u.type="variables-changed";class d extends o.x{}d.type="variables-time-range-process-done";class i extends o.x{}i.type="variables-changed-in-url"},75096:(Y,A,e)=>{"use strict";e.d(A,{AX:()=>b,Lz:()=>a,ML:()=>p,Nz:()=>m,QT:()=>T,SY:()=>f,Wz:()=>y,iP:()=>E,jX:()=>x,q$:()=>D,q4:()=>I,qD:()=>S,sN:()=>M,t4:()=>c,u7:()=>v,wJ:()=>h});var t=e(2543),n=e.n(t),o=e(12470),s=e(72574),r=e(87490),g=e(99140),u=e(20601),d=e(13344),i=e(87421),l=e(80484);const f=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g,c=O=>(f.lastIndex=0,f.exec(O));function h(...O){const C=O[O.length-1];O[0]=typeof O[0]=="string"?O[0]:(0,r.MA)(O[0]);const U=O.slice(0,-1).join(" ").match(f);return!!(U!==null?U.find(B=>{const H=c(B);return H!==null&&H.indexOf(C)>-1}):!1)}const p=O=>{if(!O||!O.current)return!1;if(O.current.value){const C=Array.isArray(O.current.value);if(C&&O.current.value.length&&O.current.value[0]===d.To||!C&&O.current.value===d.To)return!0}if(O.current.text){const C=Array.isArray(O.current.text);if(C&&O.current.text.length&&O.current.text[0]===d.Zm||!C&&O.current.text===d.Zm)return!0}return!1},m=O=>!O||!O.current||!O.current.text?"":Array.isArray(O.current.text)?O.current.text.toString():typeof O.current.text!="string"?"":O.current.text,a=O=>!O||!O.current||O.current.value===void 0||O.current.value===null?null:Array.isArray(O.current.value)?O.current.value.toString():typeof O.current.value!="string"?null:O.current.value;function v(O,C=(0,s.w)()){return!O||!O.regex?"":C.replace(O.regex,{},"regex")}function E(O,C,L,U){const R={range:void 0,variable:O,searchFilter:C,scopedVars:U};return(O.refresh===o.CO.onTimeRangeChanged||O.refresh===o.CO.onDashboardLoad)&&(R.range=L.timeRange()),R}function D(O){if(!O||!O.hasOwnProperty("refresh"))return o.CO.never;const C=O;return C.refresh!==o.CO.onTimeRangeChanged&&C.refresh!==o.CO.onDashboardLoad&&C.refresh!==o.CO.never?o.CO.never:C.refresh}function b(){return u.B.list().filter(O=>O.id!=="system").map(({id:O,name:C,description:L})=>({label:C,value:O,description:L}))}function P(O){return(0,t.isArray)(O)&&(O.length===0?O=void 0:O.length===1&&(O=O[0])),O}function y(O,C){let L=0;const U={};for(const R in O){if(!R.startsWith(d.qz))continue;let B=P(C[R]),H=P(O[R]);(0,t.isEqual)(H,B)||(U[R]={value:O[R]},L++)}for(const R in C){if(!R.startsWith(d.qz))continue;const B=C[R];(0,t.isArray)(B)&&B.length===0||O.hasOwnProperty(R)||(U[R]={value:"",removed:!0},L++)}return L?U:void 0}function T(O){return Array.isArray(O)?O.map(String):O==null?"":typeof O=="number"?O.toString(10):typeof O=="string"?O:typeof O=="boolean"?O.toString():""}function M(O,C=(0,g.Gu)()){return(0,i.nx)(O,C).transaction.status!==l.x8.NotStarted}function I(O){return String(O)}const x=O=>{if(!O.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${O.id}`);return{type:O.type,id:O.id,rootStateKey:O.rootStateKey}};function S(O,C){return{type:O.type,id:O.id,data:C}}},1819:(Y,A,e)=>{"use strict";e.d(A,{e:()=>h});var t=e(32196),n=e(96540),o=e(28240),s=e(83195),r=e(14588),g=e(32264),u=e(52622),d=e(40845),i=e(72109),l=e(61994),f=e(74007);function c(m,a,v,E,D){const b=m.fields,P=v!=null?b[v]:null,y=b.filter(O=>!O.config.custom?.hideFrom?.tooltip),T=y.find(O=>O.name==="traceID")||b[0],M=[];if(y.filter(O=>T===O).length>0&&M.push(T),M.push(...y.filter(O=>T!==O)),M.length===0)return null;const I=[],x=[],S=new Set;for(const O of M){if(D===u.$N.Single&&O!==P)continue;const C=O.values[a],L=O.display?O.display(C):{text:`${C}`,numeric:+C};O.getLinks&&O.getLinks({calculatedValue:L,valueRowIndex:a}).forEach(U=>{const R=`${U.title}/${U.href}`;S.has(R)||(x.push(U),S.add(R))}),I.push({name:(0,o.Ct)(O,m),value:C,valueString:(0,s.cN)(L),highlight:O===P})}return E&&E!==u.xB.None&&I.sort((O,C)=>r.sortValues(E)(O.value,C.value)),{displayValues:I,links:x}}const h=({data:m,rowIndex:a,columnIndex:v,sortOrder:E,mode:D,header:b,padding:P=0})=>{const y=(0,d.of)(p,P);if(!m||a==null)return null;const T=c(m,a,v,E,D);if(T==null)return null;const{displayValues:M,links:I}=T;return g.$.featureToggles.newVizTooltips&&b==="Exemplar"?n.createElement(f.i,{displayValues:M,links:I,header:b}):n.createElement("div",{className:y.wrapper},b&&n.createElement("div",{className:y.header},n.createElement("span",{className:y.title},b)),n.createElement("table",{className:y.infoWrap},n.createElement("tbody",null,M.map((x,S)=>n.createElement("tr",{key:`${S}/${a}`},n.createElement("th",null,x.name),n.createElement("td",null,(0,l.A)(x.valueString)))),I.map((x,S)=>n.createElement("tr",{key:S},n.createElement("th",null,"Link"),n.createElement("td",{colSpan:2},n.createElement(i.Y,{href:x.href,external:x.target==="_blank",weight:"medium",inline:!1},x.title)))))))},p=(m,a=0)=>({wrapper:(0,t.css)({padding:`${a}px`,background:m.components.tooltip.background,borderRadius:m.shape.borderRadius(2)}),header:(0,t.css)({background:m.colors.background.secondary,alignItems:"center",alignContent:"center",display:"flex",paddingBottom:m.spacing(1)}),title:(0,t.css)({fontWeight:m.typography.fontWeightMedium,overflow:"hidden",display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",flexGrow:1}),infoWrap:(0,t.css)({padding:m.spacing(1),background:"transparent",border:"none",th:{fontWeight:m.typography.fontWeightMedium,padding:m.spacing(.25,2,.25,0)},tr:{borderBottom:`1px solid ${m.colors.border.weak}`,"&:last-child":{borderBottom:"none"}}}),link:(0,t.css)({color:m.colors.text.link})})},74007:(Y,A,e)=>{"use strict";e.d(A,{i:()=>u});var t=e(32196),n=e(96540),o=e(40845),s=e(55852),r=e(13471),g=e(61994);const u=({displayValues:i,links:l,header:f="Exemplar"})=>{const c=(0,o.of)(d),h=i.find(p=>p.name==="Time");return i=i.filter(p=>p.name!=="Time"),n.createElement("div",{className:c.exemplarWrapper},n.createElement("div",{className:c.exemplarHeader},n.createElement("span",{className:c.title},f),h&&n.createElement("span",{className:c.time},(0,g.A)(h.valueString))),n.createElement("div",{className:c.exemplarContent},i.map((p,m)=>n.createElement(r.B,{key:m,label:p.name,value:(0,g.A)(p.valueString),justify:"space-between",isPinned:!1}))),l&&n.createElement("div",{className:c.exemplarFooter},l.map((p,m)=>n.createElement(s.z9,{key:m,href:p.href,className:c.linkButton},p.title))))},d=(i,l=0)=>({exemplarWrapper:(0,t.css)({display:"flex",flexDirection:"column",flex:1,gap:4,whiteSpace:"pre",borderRadius:i.shape.radius.default,background:i.colors.background.primary,border:`1px solid ${i.colors.border.weak}`,boxShadow:`0 4px 8px ${i.colors.background.primary}`}),exemplarHeader:(0,t.css)({display:"flex",flexDirection:"column",alignItems:"flex-start",gap:i.spacing(.5),color:i.colors.text.secondary,padding:i.spacing(1)}),time:(0,t.css)({color:i.colors.text.primary}),exemplarContent:(0,t.css)({display:"flex",flexDirection:"column",flex:1,gap:4,borderTop:`1px solid ${i.colors.border.medium}`,padding:i.spacing(1)}),exemplarFooter:(0,t.css)({display:"flex",flexDirection:"column",flex:1,borderTop:`1px solid ${i.colors.border.medium}`,padding:i.spacing(1),overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap"}),linkButton:(0,t.css)({width:"fit-content"}),label:(0,t.css)({color:i.colors.text.secondary,fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",marginRight:i.spacing(.5)}),value:(0,t.css)({fontWeight:500,textOverflow:"ellipsis",overflow:"hidden"}),title:(0,t.css)({fontWeight:i.typography.fontWeightMedium,overflow:"hidden",display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",flexGrow:1})})},9301:(Y,A,e)=>{"use strict";var t=e(6262),n=e(9423),o=e(7452),s=e(78624),r=e(4213),g=e(34796),u=e(13609),d=e(31193),i=e(17493),l=e(14792),f=e(15858),c=e(16495),h=e(92107),p=e(2543),m=e.n(p),a=e(96540),v=e(5338),E=e(47232),D=e(1933),b=e(69550),P=e(97497),y=e(96915),T=e(71733),M=e(17172),I=e(23509),x=e(12131),S=e(96937),O=e(3591),C=e(63639),L=e(89191),U=e(19347),R=e(4402),B=e(14778),H=e(63415),W=e(97152),N=e(24308),V=e(46235),G=e(5260),_=e(2913),K=e(94041),j=e(32264),k=e(11261),Q=e(85200),ee=e(1173),ae=e(28240),Z=e(18282),ne=e(57934),q=e(73376),te=e(14186),re=e(94354),de=e(90613),ie=e(55852),ge=e(91847);function ve(w){if(w in ge.uk){const{name:z,getHelperDocs:X,links:ce}=ge.uk[w],Ce=X(ge.g_.UIImage),Ie=ye(Ce);if(ce?.length){const Fe=ce.map(Je=>`
  Or visit <a href="${Je.url}" target="_blank">${Je.title}</a>

  `).join("");return{name:z,helperDocs:`
        ${Ie}
        ${(0,ge.$n)()}
  ${Fe}
        `}}return{name:z,helperDocs:`
      ${Ie}
      ${(0,ge.$n)()}
      `}}return{name:"No documentation found",helperDocs:(0,ge.$n)()}}const ye=w=>w.replace(/\[(.*?)\]\(#.*?\)/g,"$1").replace(/\[[^\]]*\]\[\]/g,"");var pe=e(39268),le=e(88323),Me=e(83077),De=e(91890),Re=e(72574),me=e(10354),he=e(88841),Te=e(94397);function Be(w,z){switch(z.type){case k.PU.boolean:return(0,p.isUndefined)(w)?!1:we(w);case k.PU.number:return isNaN(w)?0:parseFloat(w);case k.PU.string:return w?String(w):"";default:return w}}const we=w=>(0,p.isString)(w)?!(w[0]==="F"||w[0]==="f"||w[0]==="0"):!!w;function Ne(w){return function({options:X,onChange:ce,field:Ce}){const{validator:Ie,converter:Fe=Be}=w,{value:Je}=X,[et,mt]=(0,a.useState)(!Ie(Je)),Pt=(0,Re.w)().getVariables().map(zt=>({value:zt.name,label:zt.label||zt.name,origin:De.$0.Template})),Ht=(0,a.useCallback)(zt=>{mt(!Ie(zt.currentTarget.value))},[mt,Ie]),Ut=(0,a.useCallback)(zt=>{if(et)return;const{value:Pn}=zt.currentTarget;ce({...X,value:Fe(Pn,Ce)})},[X,ce,et,Ce,Fe]),At=(0,a.useCallback)(zt=>{mt(!Ie(zt)),ce({...X,value:zt})},[mt,Ie,ce,X]);return j.$.featureToggles.transformationsVariableSupport?a.createElement(he.y,{invalid:et,value:Je,error:"Value needs to be an integer or a variable",onChange:At,placeholder:"Value or variable",suggestions:Pt}):a.createElement(me.p,{className:"flex-grow-1",invalid:et,defaultValue:String(X.value),placeholder:"Value",onChange:Ht,onBlur:Ut})}}const Ze=()=>[{name:"Is greater",id:ee.Js.greater,component:Ne({validator:Te.N_})},{name:"Is greater or equal",id:ee.Js.greaterOrEqual,component:Ne({validator:Te.N_})},{name:"Is lower",id:ee.Js.lower,component:Ne({validator:Te.N_})},{name:"Is lower or equal",id:ee.Js.lowerOrEqual,component:Ne({validator:Te.N_})},{name:"Is equal",id:ee.Js.equal,component:Ne({validator:()=>!0})},{name:"Is not equal",id:ee.Js.notEqual,component:Ne({validator:()=>!0})}],st=()=>null,Qe=()=>[{name:"Is null",id:ee.Js.isNull,component:st},{name:"Is not null",id:ee.Js.isNotNull,component:st}];function ke(w){return function({options:X,onChange:ce,field:Ce}){const{validator:Ie}=w,[Fe,Je]=(0,a.useState)({from:!Ie(X.from),to:!Ie(X.to)}),mt=(0,Re.w)().getVariables().map(Ut=>({value:Ut.name,label:Ut.label||Ut.name,origin:De.$0.Template})),vt=(0,a.useCallback)((Ut,At)=>{Je({...Fe,[At]:!Ie(Ut.currentTarget.value)})},[Je,Ie,Fe]),Pt=(0,a.useCallback)((Ut,At)=>{if(Fe[At])return;const{value:zt}=Ut.currentTarget;ce({...X,[At]:Be(zt,Ce)})},[X,ce,Fe,Ce]),Ht=(0,a.useCallback)((Ut,At)=>{const zt=!Ie(Ut);Je({...Fe,[At]:zt}),!zt&&ce({...X,[At]:Ut})},[X,ce,Fe,Je,Ie]);return j.$.featureToggles.transformationsVariableSupport?a.createElement(a.Fragment,null,a.createElement(he.y,{value:String(X.from),invalid:Fe.from,error:"Value needs to be an integer or a variable",placeholder:"From",onChange:Ut=>Ht(Ut,"from"),suggestions:mt}),a.createElement("div",{className:"gf-form-label"},"and"),a.createElement(he.y,{invalid:Fe.to,error:"Value needs to be an integer or a variable",value:String(X.to),placeholder:"To",suggestions:mt,onChange:Ut=>Ht(Ut,"to")})):a.createElement(a.Fragment,null,a.createElement(me.p,{className:"flex-grow-1 gf-form-spacing",invalid:Fe.from,defaultValue:String(X.from),placeholder:"From",onChange:Ut=>vt(Ut,"from"),onBlur:Ut=>Pt(Ut,"from")}),a.createElement("div",{className:"gf-form-label"},"and"),a.createElement(me.p,{className:"flex-grow-1",invalid:Fe.to,defaultValue:String(X.to),placeholder:"To",onChange:Ut=>vt(Ut,"to"),onBlur:Ut=>Pt(Ut,"to")}))}}const je=()=>[{name:"Is between",id:ee.Js.between,component:ke({validator:Te.N_})}];function He(w){return function({options:X,onChange:ce,field:Ce}){const{validator:Ie,converter:Fe=Be}=w,{value:Je}=X,[et,mt]=(0,a.useState)(!Ie(Je)),vt=(0,a.useCallback)(Ht=>{mt(!Ie(Ht.currentTarget.value))},[mt,Ie]),Pt=(0,a.useCallback)(Ht=>{if(et)return;const{value:Ut}=Ht.currentTarget;ce({...X,value:Fe(Ut,Ce)})},[X,ce,et,Ce,Fe]);return a.createElement(me.p,{className:"flex-grow-1",invalid:et,defaultValue:String(X.value),placeholder:"Value",onChange:vt,onBlur:Pt})}}const Ge=()=>[{name:"Regex",id:ee.Js.regex,component:He({validator:()=>!0,converter:w=>String(w)})}],Oe=new Me.O(()=>[...Ze(),...Qe(),...je(),...Ge()]),Ke=w=>{const{onDelete:z,onChange:X,filter:ce,fieldsInfo:Ce}=w,{fieldsAsOptions:Ie,fieldByDisplayName:Fe}=Ce,Je=oe(ce,Ie)??"",et=Fe[Je],mt=et?Ee(et):[],vt=J(ce,mt),Pt=Oe.getIfExists(vt),Ht=(0,a.useCallback)(zt=>{zt?.value&&X({...ce,fieldName:zt.value})},[X,ce]),Ut=(0,a.useCallback)(zt=>{if(!zt?.value)return;const Pn=zt.value,Ta=Q.hI.get(Pn).getDefaultOptions(et);X({...ce,config:{id:Pn,options:Ta}})},[X,ce,et]),At=(0,a.useCallback)(zt=>{X({...ce,config:{...ce.config,options:zt}})},[X,ce]);return!et||!Pt||!Pt.component?null:a.createElement(pe.C,null,a.createElement(te.I,{label:"Field",labelWidth:14},a.createElement(le.l6,{className:"min-width-15 max-width-24",placeholder:"Field Name",options:Ie,value:ce.fieldName,onChange:Ht})),a.createElement(te.I,{label:"Match"},a.createElement(le.l6,{className:"width-12",placeholder:"Select test",options:mt,value:vt,onChange:Ut})),a.createElement(te.I,{label:"Value",grow:!0},a.createElement(Pt.component,{field:et,options:ce.config.options??{},onChange:At})),a.createElement(de.a,{marginBottom:.5},a.createElement(ie.$n,{icon:"times",onClick:z,variant:"secondary"})))},Ee=w=>{const z=[];for(const X of Q.hI.list())!X.isApplicable(w)||!Oe.getIfExists(X.id)||z.push({value:X.id,label:X.name,description:X.description});return z},J=(w,z)=>{const X=z.find(ce=>ce.value===w.config.id);if(X&&X.value)return X.value;if(z[0]?.value)return z[0]?.value},oe=(w,z)=>{const X=z.find(ce=>ce.value===w.fieldName);if(X&&X.value)return X.value;if(z[0]?.value)return z[0]?.value},ue=[{label:"Include",value:q.j4.include},{label:"Exclude",value:q.j4.exclude}],be=[{label:"Match all",value:q.Sm.all},{label:"Match any",value:q.Sm.any}],Le=w=>{const{input:z,options:X,onChange:ce}=w,Ce=Ve(z),Ie=(0,a.useCallback)(()=>{const vt=z[0],Pt=vt.fields.find(At=>At.type!==k.PU.time);if(!Pt)return;const Ht=(0,p.cloneDeep)(X.filters),Ut=Q.hI.get(ee.Js.greater);Ht.push({fieldName:(0,ae.Ct)(Pt,vt,z),config:{id:Ut.id,options:Ut.getDefaultOptions(Pt)}}),ce({...X,filters:Ht})},[ce,X,z]),Fe=(0,a.useCallback)(vt=>{let Pt=(0,p.cloneDeep)(X.filters);Pt.splice(vt,1),ce({...X,filters:Pt})},[X,ce]),Je=(0,a.useCallback)((vt,Pt)=>{let Ht=(0,p.cloneDeep)(X.filters);Ht[Pt]=vt,ce({...X,filters:Ht})},[X,ce]),et=(0,a.useCallback)(vt=>{ce({...X,type:vt??q.j4.include})},[X,ce]),mt=(0,a.useCallback)(vt=>{ce({...X,match:vt??q.Sm.all})},[X,ce]);return a.createElement("div",null,a.createElement(te.I,{label:"Filter type",labelWidth:16},a.createElement("div",{className:"width-15"},a.createElement(re.z,{options:ue,value:X.type,onChange:et,fullWidth:!0}))),a.createElement(te.I,{label:"Conditions",labelWidth:16},a.createElement("div",{className:"width-15"},a.createElement(re.z,{options:be,value:X.match,onChange:mt,fullWidth:!0}))),a.createElement(de.a,{paddingLeft:2},X.filters.map((vt,Pt)=>a.createElement(Ke,{key:Pt,filter:vt,fieldsInfo:Ce,onChange:Ht=>Je(Ht,Pt),onDelete:()=>Fe(Pt)})),a.createElement(ie.$n,{icon:"plus",size:"sm",onClick:Ie,variant:"secondary"},"Add condition")))},_e={id:Z.F.filterByValue,editor:Le,transformation:ne.c.filterByValueTransformer,name:ne.c.filterByValueTransformer.name,description:"Removes rows of the query results using user-defined filters. This is useful if you can not filter your data in the data source.",categories:new Set([P.m.Filter]),help:ve(Z.F.filterByValue).helperDocs},Ve=w=>(0,a.useMemo)(()=>{const z={fieldsAsOptions:[],fieldByDisplayName:{}};return Array.isArray(w)?w.reduce((X,ce)=>ce.fields.reduce((Ce,Ie)=>{const Fe=(0,ae.Ct)(Ie,ce,w);return Ce.fieldByDisplayName[Fe]||(Ce.fieldsAsOptions.push({label:Fe,value:Fe,type:Ie.type}),Ce.fieldByDisplayName[Fe]=Ie),Ce},X),z):z},[w]);var We=e(43429),$e=e(60264),it=e(48192),at=e(7600),ht=e(54612);function ft(w,z){const X={data:w.input,options:w.options},ce=new it.C({id:"root",title:"root"}),Ce=Fe=>{if(Fe?.length){const Je=Fe[0];let et=ce.categories.find(mt=>mt.props.id===Je);return et||(et=new it.C({id:Je,title:Je}),ce.categories.push(et)),et}return ce},Ie={getValue:Fe=>(0,p.get)(w.options,Fe),onChange:(Fe,Je)=>{w.onChange((0,ht.Sf)(w.options,Fe,Je))}};return(0,at.g5)(z,Ie,Ce,X),ce}function gt(w){const z={data:[],options:{}},X={},ce=new $e.pv;w(ce,z);for(const Ce of ce.getItems())Ce.defaultValue!=null&&(0,p.set)(X,Ce.path,Ce.defaultValue);return X}var Dt=e(27825),It=e(3290);const jt=(w,z)=>{const X=z.options??{};(0,Dt.J)("",w,X)},Vt=w=>{(0,a.useEffect)(()=>{if(!w.options.xBuckets?.mode){const X=gt(jt);w.onChange({...X,...w.options})}});const z=ft(w,jt);return a.createElement("div",null,a.createElement("div",null,z.items.map(X=>X.render())))},_t={id:It.wY.id,editor:Vt,transformation:It.wY,name:It.wY.name,description:It.wY.description,state:We.pn.alpha,categories:new Set([P.m.CreateNewVisualization]),help:ve(It.wY.id).helperDocs};var rt=e(32196),St=e(40845),pn=e(84349),ct=e(75059),Ct=e(42734),Yt=e(24293),cn=e(28802),vn=e(50082),rn=e(25019);function en(w,z,X){const ce={},Ce={};for(const Ie of w.fields){const Fe=(0,ae.Ct)(Ie,w),et=X.index[Fe].handler;if(!et)continue;const mt=Ie.values[z];if(mt==null)continue;const vt=et.processor(mt,ce,Ce);vt!=null&&(ce[et.targetProperty??et.key]=vt)}return Ce.mappingValues&&(ce.mappings=fn(Ce)),ce}var mn=(w=>(w.Name="field.name",w.Value="field.value",w.Label="field.label",w.Ignore="__ignore",w))(mn||{});const Un=[{key:"field.name",name:"Field name",processor:()=>{}},{key:"field.value",name:"Field value",processor:()=>{}},{key:"field.label",name:"Field label",processor:()=>{}},{key:"__ignore",name:"Ignore",processor:()=>{}},{key:"max",processor:qt},{key:"min",processor:qt},{key:"unit",processor:w=>w.toString()},{key:"decimals",processor:qt},{key:"displayName",name:"Display name",processor:w=>w.toString()},{key:"color",processor:w=>({fixedColor:w,mode:Yt.Y.Fixed})},{key:"threshold1",targetProperty:"thresholds",processor:(w,z)=>{const X=(0,cn.t)(w);if(!isNaN(X))return z.thresholds||(z.thresholds={mode:vn.O.Absolute,steps:[{value:-1/0,color:"green"}]}),z.thresholds.steps.push({value:X,color:"red"}),z.thresholds}},{key:"mappings.value",name:"Value mappings / Value",targetProperty:"mappings",defaultReducer:ct.gy.allValues,processor:(w,z,X)=>{if((0,p.isArray)(w))return X.mappingValues=w,z.mappings}},{key:"mappings.color",name:"Value mappings / Color",targetProperty:"mappings",defaultReducer:ct.gy.allValues,processor:(w,z,X)=>{if((0,p.isArray)(w))return X.mappingColors=w,z.mappings}},{key:"mappings.text",name:"Value mappings / Display text",targetProperty:"mappings",defaultReducer:ct.gy.allValues,processor:(w,z,X)=>{if((0,p.isArray)(w))return X.mappingTexts=w,z.mappings}}];function fn(w){const z={type:rn.d.ValueToText,options:{}};if(!w.mappingValues)return[];for(let X=0;X<w.mappingValues.length;X++){const ce=w.mappingValues[X];ce!=null&&(z.options[ce.toString()]={color:w.mappingColors&&w.mappingColors[X],text:w.mappingTexts&&w.mappingTexts[X],index:X})}return[z]}let ca=null;function Lt(){if(ca===null){ca={};for(const w of Un)ca[w.key]=w}return ca}function qt(w){const z=(0,cn.t)(w);if(!isNaN(z))return z}function hn(w,z){for(const X of z)if(w===X.fieldName)return X.handlerKey;return w.toLowerCase()}function Cn(w){return w?Lt()[w]:null}function gn(w,z,X){const ce={index:{}};let Ce=z.find(Fe=>Fe.handlerKey==="field.name"),Ie=z.find(Fe=>Fe.handlerKey==="field.value");for(const Fe of w.fields){const Je=(0,ae.Ct)(Fe,w),et=z.find(Pt=>Pt.fieldName===Je),mt=et?et.handlerKey:Je.toLowerCase();let vt=Cn(mt);X&&(vt?(vt.key==="field.name"&&(ce.nameField=Fe),vt.key==="field.value"&&(ce.valueField=Fe)):et||(!ce.nameField&&!Ce&&Fe.type===k.PU.string&&(ce.nameField=Fe,vt=Cn("field.name")),!ce.valueField&&!Ie&&Fe.type===k.PU.number&&(ce.valueField=Fe,vt=Cn("field.value")))),!vt&&X&&(vt=Cn("field.label")),ce.index[Je]={automatic:!et,handler:vt,reducerId:et?.reducerId??vt?.defaultReducer??ct.gy.lastNotNull}}return ce}function xn({frame:w,mappings:z,onChange:X,withReducers:ce,withNameAndValue:Ce}){const Ie=(0,St.of)(Sn),Fe=Tn(w,z,Ce),Je=Un.map(vt=>Wn(vt,!1)),et=(vt,Pt)=>{const Ht=z.findIndex(Ut=>Ut.fieldName===vt.fieldName);if(Pt)if(Ht!==-1){const Ut=[...z];Ut.splice(Ht,1,{...z[Ht],handlerKey:Pt.value}),X(Ut)}else X([...z,{fieldName:vt.fieldName,handlerKey:Pt.value}]);else X(Ht!==-1?z.filter((Ut,At)=>At!==Ht):[...z,{fieldName:vt.fieldName,handlerKey:"__ignore"}])},mt=(vt,Pt)=>{const Ht=z.findIndex(Ut=>Ut.fieldName===vt.fieldName);if(Ht!==-1){const Ut=[...z];Ut.splice(Ht,1,{...z[Ht],reducerId:Pt}),X(Ut)}else X([...z,{fieldName:vt.fieldName,handlerKey:vt.handlerKey,reducerId:Pt}])};return a.createElement("table",{className:Ie.table},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Field"),a.createElement("th",null,"Use as"),ce&&a.createElement("th",null,"Select"))),a.createElement("tbody",null,Fe.map(vt=>a.createElement("tr",{key:vt.fieldName},a.createElement("td",{className:Ie.labelCell},vt.fieldName),a.createElement("td",{className:Ie.selectCell,"data-testid":`${vt.fieldName}-config-key`},a.createElement(le.l6,{options:Je,value:vt.configOption,placeholder:vt.placeholder,isClearable:!0,onChange:Pt=>et(vt,Pt)})),ce&&a.createElement("td",{"data-testid":`${vt.fieldName}-reducer`,className:Ie.selectCell},a.createElement(Ct.S,{stats:[vt.reducerId],defaultStat:vt.reducerId,onChange:Pt=>mt(vt,Pt[0])}))))))}function Tn(w,z,X){const ce=[],Ce=gn(w,z??[],X);for(const Ie of w.fields){const Fe=(0,ae.Ct)(Ie,w),Je=Ce.index[Fe],et=Wn(Je.handler,Je.automatic);ce.push({fieldName:Fe,configOption:Je.automatic?null:et,placeholder:Je.automatic?et?.label:"Choose",handlerKey:Je.handler?.key??null,reducerId:Je.reducerId})}for(const Ie of z)if(!ce.find(Fe=>Fe.fieldName===Ie.fieldName)){const Fe=Cn(Ie.handlerKey);ce.push({fieldName:Ie.fieldName,handlerKey:Ie.handlerKey,configOption:Wn(Fe,!1),missingInFrame:!0,reducerId:Ie.reducerId??ct.gy.lastNotNull})}return Object.values(ce)}function Wn(w,z){if(!w)return null;let X=w.name??(0,p.capitalize)(w.key);return z&&(X=`${X} (auto)`),{label:X,value:w.key}}const Sn=w=>({table:(0,rt.css)`
    margin-top: ${w.spacing(1)};

    td,
    th {
      border-right: 4px solid ${w.colors.background.primary};
      border-bottom: 4px solid ${w.colors.background.primary};
      white-space: nowrap;
    }
    th {
      font-size: ${w.typography.bodySmall.fontSize};
      line-height: ${w.spacing(4)};
      padding: ${w.spacing(0,1)};
    }
  `,labelCell:(0,rt.css)`
    font-size: ${w.typography.bodySmall.fontSize};
    background: ${w.colors.background.secondary};
    padding: ${w.spacing(0,1)};
    max-width: 400px;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 140px;
  `,selectCell:(0,rt.css)`
    padding: 0;
    min-width: 161px;
  `});var An=e(81160);function ta(w,z){let X=null;for(const Je of z)if(Je.refId===w.configRefId){X=Je;break}if(!X)return z;const ce={fields:[],length:1},Ce=gn(X,w.mappings??[],!1);for(const Je of X.fields){const et={...Je},mt=(0,ae.Ct)(Je,X),vt=Ce.index[mt],Pt=(0,ct.Nw)({field:Je,reducers:[vt.reducerId]});et.values=[Pt[vt.reducerId]],ce.fields.push(et)}const Ie=[],Fe=(0,Q.NS)(w.applyTo||{id:ee.Ct.numeric});for(const Je of z){if(Je===X&&z.length>1)continue;const et={fields:[],length:Je.length,refId:Je.refId};for(const mt of Je.fields)if(Fe(mt,Je,z)){const vt=en(ce,0,Ce);et.fields.push({...mt,config:{...mt.config,...vt}})}else et.fields.push(mt);Ie.push(et)}return Ie}const fa={id:Z.F.configFromData,name:"Config from query results",description:"Set unit, min, max and more from data.",defaultOptions:{configRefId:"config",mappings:[]},operator:w=>z=>z.pipe((0,An.T)(X=>ta(w,X)))};function la({input:w,onChange:z,options:X}){const ce=(0,St.of)(Ea),Ce=w.map(Ut=>Ut.refId).filter(Ut=>Ut!=null).map(Ut=>({label:Ut,value:Ut})),Ie=X.configRefId||"config",Fe=X.applyTo??{id:ee.Ct.byType,options:"number"},Je=pn.g.get(Fe.id),et=w.find(Ut=>Ut.refId===Ie),mt=Ut=>{z({...X,configRefId:Ut.value||"config"})},vt=Ut=>{z({...X,applyTo:{id:Ut.value}})},Pt=Ut=>{z({...X,applyTo:{id:Fe.id,options:Ut}})},Ht=pn.g.list().filter(Ut=>!Ut.excludeFromPicker).map(Ut=>({label:Ut.name,value:Ut.id,description:Ut.description}));return a.createElement(a.Fragment,null,a.createElement(pe.C,null,a.createElement(te.I,{label:"Config query",labelWidth:20},a.createElement(le.l6,{onChange:mt,options:Ce,value:Ie,width:30}))),a.createElement(pe.C,null,a.createElement(te.I,{label:"Apply to",labelWidth:20},a.createElement(le.l6,{onChange:vt,options:Ht,value:Fe.id,width:30}))),a.createElement(pe.C,null,a.createElement(te.I,{label:"Apply to options",labelWidth:20,className:ce.matcherOptions},a.createElement(Je.component,{matcher:Je.matcher,data:w,options:Fe.options,onChange:Pt}))),a.createElement(pe.C,null,et&&a.createElement(xn,{frame:et,mappings:X.mappings,onChange:Ut=>z({...X,mappings:Ut}),withReducers:!0})))}const Xn={id:fa.id,editor:la,transformation:fa,name:fa.name,description:fa.description,state:We.pn.beta,categories:new Set([P.m.CalculateNewFields]),help:ve(fa.id).helperDocs},Ea=w=>({matcherOptions:(0,rt.css)`
    min-width: 404px;
  `});var Ca=e(62467),Sa=e(58307),aa=e(66350),Yn=e(15292),za=e(11710);const ns=16,ps=w=>{const{options:z,onChange:X}=w,{binary:ce}=z;let Ce=!ce?.left,Ie=!ce?.right;const Fe=w.names.map(At=>(At===ce?.left&&(Ce=!0),At===ce?.right&&(Ie=!0),{label:At,value:At})),Je=Ce?Fe:[...Fe,{label:ce?.left,value:ce?.left}],et=Ie?Fe:[...Fe,{label:ce?.right,value:ce?.right}],mt=za.b.list().map(At=>({label:At.binaryOperationID,value:At.binaryOperationID})),vt=At=>{X({...z,mode:aa.UY.BinaryOperation,binary:At})},Pt=At=>{vt({...ce,left:At.value})},Ht=At=>{vt({...ce,right:At.value})},Ut=At=>{vt({...ce,operator:At.value})};return a.createElement(a.Fragment,null,a.createElement(pe.C,null,a.createElement(te.I,{label:"Operation",labelWidth:ns},a.createElement(le.l6,{allowCustomValue:!0,placeholder:"Field or number",options:Je,className:"min-width-18",value:ce?.left,onChange:Pt})),a.createElement(te.I,null,a.createElement(le.l6,{className:"width-4",options:mt,value:ce?.operator??mt[0].value,onChange:Ut})),a.createElement(te.I,null,a.createElement(le.l6,{allowCustomValue:!0,placeholder:"Field or number",className:"min-width-10",options:et,value:ce?.right,onChange:Ht}))))},Cs=w=>{const{names:z,onChange:X,options:ce}=w,{cumulative:Ce}=ce,Ie=z.map(mt=>({label:mt,value:mt})),Fe=mt=>{const vt=mt.length?mt[0]:ct.gy.sum;Je({...Ce,reducer:vt})},Je=mt=>{X({...ce,mode:aa.UY.CumulativeFunctions,cumulative:mt})},et=mt=>{Je({...Ce,field:mt.value})};return a.createElement(a.Fragment,null,a.createElement(te.I,{label:"Field",labelWidth:ns},a.createElement(le.l6,{placeholder:"Field",options:Ie,className:"min-width-18",value:Ce?.field,onChange:et})),a.createElement(te.I,{label:"Calculation",labelWidth:ns},a.createElement(Ct.S,{allowMultiple:!1,className:"width-18",stats:[Ce?.reducer||ct.gy.sum],onChange:Fe,defaultStat:ct.gy.sum,filterOptions:mt=>mt.id===ct.gy.sum||mt.id===ct.gy.mean})))},Fs=w=>{const{options:z,onChange:X}=w,{index:ce}=z,Ce=Ie=>{X({...z,index:{asPercentile:Ie.currentTarget.checked}})};return a.createElement(a.Fragment,null,a.createElement(te.I,{labelWidth:ns,label:"As percentile",tooltip:"Transform the row index as a percentile."},a.createElement(Yn.K,{value:!!ce?.asPercentile,onChange:Ce})))};var cs=e(66864),hs=e(92174);const rr=w=>{const{names:z,selected:X,onChange:ce,options:Ce}=w,{reduce:Ie}=Ce,Fe=vt=>{ce({...Ce,reduce:vt})},Je=vt=>{X.indexOf(vt)>-1?et(X.filter(Pt=>Pt!==vt)):et([...X,vt])},et=vt=>{Fe({...Ie,include:vt})},mt=vt=>{const Pt=vt.length?vt[0]:ct.gy.sum,{reduce:Ht}=Ce;Fe({...Ht,reducer:Pt})};return a.createElement(a.Fragment,null,a.createElement(te.I,{label:"Operation",labelWidth:ns,grow:!0},a.createElement(cs.Gy,{spacing:"xs",align:"flex-start",wrap:!0},z.map((vt,Pt)=>a.createElement(hs.m,{key:`${vt}/${Pt}`,onClick:()=>{Je(vt)},label:vt,selected:X.indexOf(vt)>-1})))),a.createElement(te.I,{label:"Calculation",labelWidth:ns},a.createElement(Ct.S,{allowMultiple:!1,className:"width-18",stats:[Ie?.reducer||ct.gy.sum],onChange:mt,defaultStat:ct.gy.sum})))};var ss=e(27618),bs=e(76892);const tr=w=>{const{options:z,onChange:X}=w,{unary:ce}=z,Ce=Pt=>{X({...z,mode:aa.UY.UnaryOperation,unary:Pt})},Ie=Pt=>{Ce({...ce,operator:Pt.value})},Fe=Pt=>{Ce({...ce,fieldName:Pt.value})};let Je=!ce?.fieldName;const et=w.names.map(Pt=>(Pt===ce?.fieldName&&(Je=!0),{label:Pt,value:Pt})),mt=ss.j.list().map(Pt=>({label:Pt.unaryOperationID,value:Pt.unaryOperationID})),vt=Je?et:[...et,{label:ce?.fieldName,value:ce?.fieldName}];return a.createElement(a.Fragment,null,a.createElement(pe.C,null,a.createElement(te.I,{label:"Operation",labelWidth:ns},a.createElement(le.l6,{options:mt,value:ce?.operator??mt[0].value,onChange:Ie})),a.createElement(te.I,{label:"(",labelWidth:2},a.createElement(le.l6,{placeholder:"Field",className:"min-width-11",options:vt,value:ce?.fieldName,onChange:Fe})),a.createElement(bs.c,{width:2},")")))};var or=e(60188);const vs=w=>{const{options:z,names:X,onChange:ce}=w,{window:Ce}=z,Ie=X.map(At=>({label:At,value:At})),Fe=[{label:"Trailing",value:aa.ip.Trailing},{label:"Centered",value:aa.ip.Centered}],Je=[{label:"Percentage",value:aa.Bp.Percentage},{label:"Fixed",value:aa.Bp.Fixed}],et=At=>{ce({...z,mode:aa.UY.WindowFunctions,window:At})},mt=At=>{et({...Ce,field:At.value})},vt=At=>{et({...Ce,windowSize:At&&Ce?.windowSizeMode===aa.Bp.Percentage?At/100:At})},Pt=At=>{et({...Ce,windowSize:Ce?.windowSize?At===aa.Bp.Percentage?Ce.windowSize/100:Ce.windowSize*100:void 0,windowSizeMode:At})},Ht=At=>{const zt=At.length?At[0]:ct.gy.sum;et({...Ce,reducer:zt})},Ut=At=>{et({...Ce,windowAlignment:At})};return a.createElement(a.Fragment,null,a.createElement(te.I,{label:"Field",labelWidth:ns},a.createElement(le.l6,{placeholder:"Field",options:Ie,className:"min-width-18",value:Ce?.field,onChange:mt})),a.createElement(te.I,{label:"Calculation",labelWidth:ns},a.createElement(Ct.S,{allowMultiple:!1,className:"width-18",stats:[Ce?.reducer||ct.gy.mean],onChange:Ht,defaultStat:ct.gy.mean,filterOptions:At=>At.id===ct.gy.mean||At.id===ct.gy.variance||At.id===ct.gy.stdDev})),a.createElement(te.I,{label:"Type",labelWidth:ns},a.createElement(re.z,{value:Ce?.windowAlignment??aa.ip.Trailing,options:Fe,onChange:Ut})),a.createElement(te.I,{label:"Window size mode"},a.createElement(re.z,{value:Ce?.windowSizeMode??aa.Bp.Percentage,options:Je,onChange:Pt})),a.createElement(te.I,{label:Ce?.windowSizeMode===aa.Bp.Percentage?"Window size %":"Window size",labelWidth:ns,tooltip:Ce?.windowSizeMode===aa.Bp.Percentage?"Set the window size as a percentage of the total data":"Window size"},a.createElement(or.Q,{placeholder:"Auto",min:.1,value:Ce?.windowSize&&Ce.windowSizeMode===aa.Bp.Percentage?Ce.windowSize*100:Ce?.windowSize,onChange:vt})))},hr=[{value:aa.UY.BinaryOperation,label:"Binary operation"},{value:aa.UY.UnaryOperation,label:"Unary operation"},{value:aa.UY.ReduceRow,label:"Reduce row"},{value:aa.UY.Index,label:"Row index"}];j.$.featureToggles.addFieldFromCalculationStatFunctions&&hr.push({value:aa.UY.CumulativeFunctions,label:"Cumulative functions"},{value:aa.UY.WindowFunctions,label:"Window functions"});const _s=new Set([k.PU.time,k.PU.number,k.PU.string]),Ya=w=>{const{options:z,onChange:X,input:ce}=w,Ce=z?.reduce?.include,[Ie,Fe]=(0,a.useState)({names:[],selected:[]});(0,a.useEffect)(()=>{const At={interpolate:Pn=>Pn},zt=(0,Ca.of)(ce).pipe(ne.c.ensureColumnsTransformer.operator(null,At),et(),Je(),mt(Ce||[])).subscribe(({selected:Pn,names:Ta})=>{Fe({names:Ta,selected:Pn})});return()=>{zt.unsubscribe()}},[ce,Ce]);const Je=()=>{if(!j.$.featureToggles.transformationsVariableSupport)return Sa.D;const At=(0,Re.w)();return zt=>zt.pipe((0,An.T)(Pn=>(Pn.push(...At.getVariables().map(Ta=>"$"+Ta.name)),Pn)))},et=()=>At=>At.pipe((0,An.T)(zt=>{const Pn=[],Ta={};for(const Va of zt)for(const Fa of Va.fields){if(!_s.has(Fa.type))continue;const wa=(0,ae.Ct)(Fa,Va,zt);Ta[wa]||(Ta[wa]=!0,Pn.push(wa))}return Pn})),mt=At=>zt=>zt.pipe((0,An.T)(Pn=>{if(!At.length)return{names:Pn,selected:[]};const Ta=[],Va=[];for(const Fa of Pn)At.includes(Fa)&&Va.push(Fa),Ta.push(Fa);return{names:Ta,selected:Va}})),vt=At=>{X({...z,replaceFields:At.currentTarget.checked})},Pt=At=>{const zt=At.value??aa.UY.BinaryOperation;zt===aa.UY.WindowFunctions&&(z.window=z.window??aa.Uj),X({...z,mode:zt})},Ht=At=>{X({...z,alias:At.target.value})},Ut=z.mode??aa.UY.BinaryOperation;return a.createElement(a.Fragment,null,a.createElement(te.I,{labelWidth:ns,label:"Mode"},a.createElement(le.l6,{className:"width-18",options:hr,value:hr.find(At=>At.value===Ut),onChange:Pt})),Ut===aa.UY.BinaryOperation&&a.createElement(ps,{options:z,names:Ie.names,onChange:w.onChange}),Ut===aa.UY.UnaryOperation&&a.createElement(tr,{names:Ie.names,options:z,onChange:w.onChange}),Ut===aa.UY.ReduceRow&&a.createElement(rr,{names:Ie.names,selected:Ie.selected,options:z,onChange:w.onChange}),Ut===aa.UY.CumulativeFunctions&&a.createElement(Cs,{names:Ie.names,options:z,onChange:w.onChange}),Ut===aa.UY.WindowFunctions&&a.createElement(vs,{names:Ie.names,options:z,onChange:w.onChange}),Ut===aa.UY.Index&&a.createElement(Fs,{options:z,onChange:w.onChange}),a.createElement(te.I,{labelWidth:ns,label:"Alias"},a.createElement(me.p,{className:"width-18",value:z.alias??"",placeholder:(0,aa.sw)(z),onChange:Ht})),a.createElement(te.I,{labelWidth:ns,label:"Replace all fields"},a.createElement(Yn.K,{value:!!z.replaceFields,onChange:vt})))},Ws={id:Z.F.calculateField,editor:Ya,transformation:ne.c.calculateFieldTransformer,name:ne.c.calculateFieldTransformer.name,description:"Use the row values to calculate a new field.",categories:new Set([P.m.CalculateNewFields]),help:ve(Z.F.calculateField).helperDocs};var Bs=e(82150);const Ks=[{value:Bs.x1.FieldName,label:"Copy frame name to field name"},{value:Bs.x1.Label,label:"Add a label with the frame name"},{value:Bs.x1.Drop,label:"Ignore the frame name"}];class Vr extends a.PureComponent{constructor(z){super(z),this.onModeChanged=X=>{const{options:ce,onChange:Ce}=this.props,Ie=X.value??Bs.x1.FieldName;Ce({...ce,frameNameMode:Ie})},this.onLabelChanged=X=>{const{options:ce}=this.props;this.props.onChange({...ce,frameNameLabel:X.target.value})}}render(){const{options:z}=this.props,X=z.frameNameMode??Bs.x1.FieldName;return a.createElement("div",null,a.createElement(te.I,{label:"Name",labelWidth:16,grow:!0},a.createElement(le.l6,{width:36,options:Ks,value:Ks.find(ce=>ce.value===X),onChange:this.onModeChanged})),X===Bs.x1.Label&&a.createElement(te.I,{label:"Label",labelWidth:16,grow:!0},a.createElement(me.p,{width:36,value:z.frameNameLabel??"",placeholder:"frame",onChange:this.onLabelChanged})))}}const Js={id:Z.F.concatenate,editor:Vr,transformation:ne.c.concatenateTransformer,name:ne.c.concatenateTransformer.name,description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",categories:new Set([P.m.Combine]),help:ve(Z.F.concatenate).helperDocs};var Er=e(91410),yr=e(76218),zo=e(9988),Dr=e(63577),qr=e(75494),us=e(14578),eo=e(72093),Fr=e(29158);const nr=({transformIndex:w,value:z,index:X,mappedIndex:ce,onChangeEnumValue:Ce,onRemoveEnumRow:Ie,checkIsEnumUniqueValue:Fe})=>{const Je=(0,St.of)(ko),[et,mt]=(0,a.useState)(z),[vt,Pt]=(0,a.useState)(et===""),[Ht,Ut]=(0,a.useState)(null),At=(0,a.useRef)(null);(0,a.useEffect)(()=>{At.current&&At.current.focus()},[At]);const zt=wa=>{wa.currentTarget.value!==""&&Fe(wa.currentTarget.value)&&wa.currentTarget.value!==z?Ut("Enum value already exists"):Ut(null),mt(wa.currentTarget.value)},Pn=()=>{if(Pt(!1),Ut(null),et===""||Ht!==null){Ie(ce);return}Ce(ce,et)},Ta=wa=>{wa.key==="Enter"&&(wa.preventDefault(),Pn())},Va=()=>{Pt(!0)},Fa=()=>{Ie(ce)};return a.createElement(qr.sx,{key:`${w}/${z}`,draggableId:`${w}/${z}`,index:X},wa=>a.createElement("tr",{key:X,ref:wa.innerRef,...wa.draggableProps},a.createElement("td",null,a.createElement("div",{className:Je.dragHandle,...wa.dragHandleProps},a.createElement(us.I,{name:"draggabledots",size:"lg"}))),vt?a.createElement("td",null,a.createElement(me.p,{ref:At,type:"text",value:et,onChange:zt,onBlur:Pn,onKeyDown:Ta}),Ht&&a.createElement(eo.P,null,Ht)):a.createElement("td",{onClick:Va,className:Je.clickableTableCell},z&&z!==""?z:"Click to edit"),a.createElement("td",{className:Je.textAlignCenter},a.createElement(cs.Gy,{spacing:"sm"},a.createElement(Fr.K,{name:"trash-alt",onClick:Fa,"data-testid":"remove-enum-row","aria-label":"Delete enum row",tooltip:"Delete"})))))},ko=w=>({dragHandle:(0,rt.css)({cursor:"grab"}),textAlignCenter:(0,rt.css)({textAlign:"center"}),clickableTableCell:(0,rt.css)({cursor:"pointer",width:"100px","&:hover":{color:w.colors.text.maxContrast}})}),zs=nr,Es=({input:w,options:z,transformIndex:X,onChange:ce})=>{const Ce=(0,St.of)(to),[Ie,Fe]=(0,a.useState)(z.conversions[X].enumConfig?.text??[]);(0,a.useEffect)(()=>{!z.conversions[X].enumConfig?.text?.length&&w.length&&Je()},[w]),(0,a.useEffect)(()=>{(()=>{const zt=Ie.map(Va=>Va),Pn=z.conversions,Ta={text:zt};Pn[X]={...Pn[X],enumConfig:Ta},ce({...z,conversions:Pn})})()},[X,Ie]);const Je=()=>{const At=w.flatMap(Pn=>Pn?.fields??[]).find(Pn=>Pn.name===z.conversions[X].targetField);if(!At)return;const zt=new Set(At?.values);Ie.length>0&&!(0,p.isEqual)(Ie,Array.from(zt))&&!window.confirm("This action will overwrite the existing configuration. Are you sure you want to continue?")||Fe([...zt])},et=(At,zt)=>{const Pn=[...Ie];Pn.splice(At,1,zt),Fe(Pn)},mt=At=>{const zt=[...Ie];zt.splice(At,1),Fe(zt)},vt=()=>{Fe(["",...Ie])},Pt=(At,zt)=>{Ie.includes(zt)||et(At,zt)},Ht=At=>Ie.includes(At),Ut=At=>{if(!At.destination)return;const zt=Ie.length-At.source.index-1,Pn=Ie.length-At.destination.index-1,Ta=[...Ie],Va=Ta[zt];Ta.splice(zt,1),Ta.splice(Pn,0,Va),Fe(Ta)};return a.createElement(pe.C,null,a.createElement(cs.Gy,null,a.createElement(ie.$n,{size:"sm",icon:"plus",onClick:()=>Je(),className:Ce.button},"Generate enum values from data"),a.createElement(ie.$n,{size:"sm",icon:"plus",onClick:()=>vt(),className:Ce.button},"Add enum value")),a.createElement(cs.gW,null,a.createElement("table",{className:Ce.compactTable},a.createElement(qr.JY,{onDragEnd:Ut},a.createElement(qr.gL,{droppableId:"sortable-enum-config-mappings",direction:"vertical"},At=>a.createElement("tbody",{ref:At.innerRef,...At.droppableProps},[...Ie].reverse().map((zt,Pn)=>{const Ta=Ie.length-Pn-1;return a.createElement(zs,{key:`${X}/${zt}`,transformIndex:X,value:zt,index:Pn,mappedIndex:Ta,onChangeEnumValue:Pt,onRemoveEnumRow:mt,checkIsEnumUniqueValue:Ht})}),At.placeholder))))))},to=w=>({compactTable:(0,rt.css)({"tbody td":{padding:w.spacing(.5)},marginTop:w.spacing(1),marginBottom:w.spacing(2)}),button:(0,rt.css)({marginTop:w.spacing(1)})}),ts={settings:{width:24,isClearable:!1}},Ts=({input:w,options:z,onChange:X})=>{const ce=zo.bx.filter(Ut=>Ut.value!==k.PU.trace),Ce=(0,Te.qt)(!0),Ie=(0,Er.P3)();Ce.push({label:"Browser",value:"browser"}),Ce.push({label:"UTC",value:"utc"});for(const Ut of Ie)Ce.push({label:Ut,value:Ut});const Fe=(0,a.useCallback)(Ut=>At=>{const zt=z.conversions;zt[Ut]={...zt[Ut],targetField:At??"",dateFormat:void 0},X({...z,conversions:zt})},[X,z]),Je=(0,a.useCallback)(Ut=>At=>{const zt=z.conversions;zt[Ut]={...zt[Ut],destinationType:At.value},X({...z,conversions:zt})},[X,z]),et=(0,a.useCallback)(Ut=>At=>{const zt=z.conversions;zt[Ut]={...zt[Ut],dateFormat:At.currentTarget.value},X({...z,conversions:zt})},[X,z]),mt=(0,a.useCallback)(Ut=>At=>{const zt=z.conversions;zt[Ut]={...zt[Ut],joinWith:At.currentTarget.value},X({...z,conversions:zt})},[X,z]),vt=(0,a.useCallback)(()=>{X({...z,conversions:[...z.conversions,{targetField:void 0,destinationType:void 0,dateFormat:void 0}]})},[X,z]),Pt=(0,a.useCallback)(Ut=>{const At=z.conversions;At.splice(Ut,1),X({...z,conversions:At})},[X,z]),Ht=(0,a.useCallback)(Ut=>At=>{const zt=z.conversions;zt[Ut]={...zt[Ut],timezone:At?.value},X({...z,conversions:zt})},[X,z]);return a.createElement(a.Fragment,null,z.conversions.map((Ut,At)=>{const zt=(0,Dr.findField)(w?.[0],Ut.targetField);return a.createElement("div",{key:`${Ut.targetField}-${At}`},a.createElement(pe.C,null,a.createElement(te.I,{label:"Field"},a.createElement(yr.O,{context:{data:w},value:Ut.targetField??"",onChange:Fe(At),item:ts})),a.createElement(te.I,{label:"as"},a.createElement(le.l6,{options:ce,value:Ut.destinationType,placeholder:"Type",onChange:Je(At),width:18})),Ut.destinationType===k.PU.time&&a.createElement(te.I,{label:"Input format",tooltip:"Specify the format of the input field so Grafana can parse the date string correctly."},a.createElement(me.p,{value:Ut.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:et(At),width:24})),Ut.destinationType===k.PU.string&&a.createElement(a.Fragment,null,(Ut.joinWith?.length||zt?.type===k.PU.other)&&a.createElement(te.I,{label:"Join with",tooltip:"Use an explicit separator when joining array values"},a.createElement(me.p,{value:Ut.joinWith,placeholder:"JSON",onChange:mt(At),width:9})),Ut.dateFormat||zt?.type===k.PU.time&&a.createElement(a.Fragment,null,a.createElement(te.I,{label:"Date format",tooltip:"Specify the output format."},a.createElement(me.p,{value:Ut.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:et(At),width:24})),a.createElement(te.I,{label:"Set timezone",tooltip:"Set the timezone of the date manually"},a.createElement(le.l6,{options:Ce,value:Ut.timezone,onChange:Ht(At),isClearable:!0})))),a.createElement(ie.$n,{size:"md",icon:"trash-alt",variant:"secondary",onClick:()=>Pt(At),"aria-label":"Remove convert field type transformer"})),Ut.destinationType===k.PU.enum&&a.createElement(Es,{input:w,options:z,transformIndex:At,onChange:X}))}),a.createElement(ie.$n,{size:"sm",icon:"plus",onClick:vt,variant:"secondary","aria-label":"Add a convert field type transformer"},"Convert field type"))},Zn={id:Z.F.convertFieldType,editor:Ts,transformation:ne.c.convertFieldTypeTransformer,name:ne.c.convertFieldTypeTransformer.name,description:ne.c.convertFieldTypeTransformer.description,categories:new Set([P.m.Reformat]),help:ve(Z.F.convertFieldType).helperDocs};var xt=e(54479);class Ir extends a.PureComponent{constructor(z){super(z),this.onFieldToggle=X=>{const{selected:ce}=this.state;ce.indexOf(X)>-1?this.onChange(ce.filter(Ce=>Ce!==X)):this.onChange([...ce,X])},this.onChange=X=>{const{regex:ce,isRegexValid:Ce}=this.state,Ie={...this.props.options,include:{names:X}};ce&&Ce&&(Ie.include=Ie.include??{},Ie.include.pattern=ce),this.setState({selected:X},()=>{this.props.onChange(Ie)})},this.onInputBlur=X=>{const{selected:ce,regex:Ce}=this.state;let Ie=!0;try{Ce&&(0,xt.dO)(Ce)}catch{Ie=!1}Ie?this.props.onChange({...this.props.options,include:{pattern:Ce}}):this.props.onChange({...this.props.options,include:{names:ce}}),this.setState({isRegexValid:Ie})},this.onVariableChange=X=>{this.props.onChange({...this.props.options,include:{variable:X.value}}),this.setState({variable:X.value})},this.onFromVariableChange=X=>{const ce=X.currentTarget.checked;this.props.onChange({...this.props.options,byVariable:ce}),this.setState({byVariable:ce})},this.state={include:z.options.include?.names||[],regex:z.options.include?.pattern,variable:z.options.include?.variable,byVariable:z.options.byVariable||!1,options:[],variables:[],selected:[],isRegexValid:!0}}componentDidMount(){this.initOptions()}componentDidUpdate(z){this.props.input!==z.input&&this.initOptions()}initOptions(){const{input:z,options:X}=this.props,ce=Array.from(X.include?.names??[]),Ce=(0,Re.w)().getVariables().map(Je=>({label:"$"+Je.name,value:"$"+Je.name})),Ie=[],Fe={};for(const Je of z)for(const et of Je.fields){const mt=(0,ae.Ct)(et,Je,z);let vt=Fe[mt];vt||(vt=Fe[mt]={name:mt,count:0},Ie.push(vt)),vt.count++}if(X.include?.pattern)try{const Je=(0,xt.dO)(X.include.pattern);for(const et of Ie)Je.test(et.name)&&ce.push(et.name)}catch(Je){console.error(Je)}if(ce.length){const Je=Ie.filter(et=>ce.includes(et.name));this.setState({options:Ie,selected:Je.map(et=>et.name),variables:Ce,byVariable:X.byVariable||!1,variable:X.include?.variable,regex:X.include?.pattern})}else this.setState({options:Ie,selected:Ie.map(Je=>Je.name),variables:Ce,byVariable:X.byVariable||!1,variable:X.include?.variable,regex:X.include?.pattern})}render(){const{options:z,selected:X,isRegexValid:ce}=this.state;return a.createElement("div",null,a.createElement(pe.C,{label:"Use variable"},a.createElement(te.I,{label:"From variable"},a.createElement(Yn.K,{value:this.state.byVariable,onChange:this.onFromVariableChange}))),this.state.byVariable?a.createElement(pe.C,null,a.createElement(te.I,{label:"Variable"},a.createElement(le.l6,{value:this.state.variable,onChange:this.onVariableChange,options:this.state.variables||[]}))):a.createElement(pe.C,{label:"Identifier"},a.createElement(te.I,{label:"Identifier",invalid:!ce,error:ce?void 0:"Invalid pattern"},a.createElement(me.p,{placeholder:"Regular expression pattern",value:this.state.regex||"",onChange:Ce=>this.setState({regex:Ce.currentTarget.value}),onBlur:this.onInputBlur,width:25})),z.map((Ce,Ie)=>{const Fe=`${Ce.name}${Ce.count>1?" ("+Ce.count+")":""}`,Je=X.indexOf(Ce.name)>-1;return a.createElement(hs.m,{key:`${Ce.name}/${Ie}`,onClick:()=>{this.onFieldToggle(Ce.name)},label:Fe,selected:Je})})))}}const Ho={id:Z.F.filterFieldsByName,editor:Ir,transformation:ne.c.filterFieldsByNameTransformer,name:ne.c.filterFieldsByNameTransformer.name,description:"Removes part of the query results using a regex pattern. The pattern can be inclusive or exclusive.",categories:new Set([P.m.Filter]),help:ve(Z.F.filterFieldsByName).helperDocs};class Ar extends a.PureComponent{constructor(z){super(z),this.onFieldToggle=X=>{const{selected:ce}=this.state;ce.indexOf(X)>-1?this.onChange(ce.filter(Ce=>Ce!==X)):this.onChange([...ce,X])},this.onChange=X=>{this.setState({selected:X}),this.props.onChange({...this.props.options,include:X.join("|")})},this.state={include:z.options.include||"",options:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(z){this.props.input!==z.input&&this.initOptions()}initOptions(){const{input:z,options:X}=this.props,ce=X.include?X.include.split("|"):[],Ce=[],Ie={};for(const Fe of z)if(Fe.refId){let Je=Ie[Fe.refId];Je||(Je=Ie[Fe.refId]={refId:Fe.refId,count:0},Ce.push(Je)),Je.count++}if(ce.length){const Fe=[],Je=[];for(const et of Ce)ce.includes(et.refId)&&Je.push(et),Fe.push(et);this.setState({options:Fe,selected:Je.map(et=>et.refId)})}else this.setState({options:Ce,selected:[]})}render(){const{options:z,selected:X}=this.state,{input:ce}=this.props;return a.createElement(a.Fragment,null,ce.length<=1&&a.createElement("div",null,a.createElement(eo.P,null,"Filter data by query expects multiple queries in the input.")),a.createElement(te.I,{label:"Series refId",labelWidth:16,shrink:!0},a.createElement(cs.Gy,{spacing:"xs",align:"flex-start",wrap:!0},z.map((Ce,Ie)=>{const Fe=`${Ce.refId}${Ce.count>1?" ("+Ce.count+")":""}`,Je=X.indexOf(Ce.refId)>-1;return a.createElement(hs.m,{key:`${Ce.refId}/${Ie}`,onClick:()=>{this.onFieldToggle(Ce.refId)},label:Fe,selected:Je})}))))}}const _r={id:Z.F.filterByRefId,editor:Ar,transformation:ne.c.filterFramesByRefIdTransformer,name:ne.c.filterFramesByRefIdTransformer.name,description:"Filter data by query. This is useful if you are sharing the results from a different panel that has many queries and you want to only visualize a subset of that in this panel.",categories:new Set([P.m.Filter]),help:ve(Z.F.filterByRefId).helperDocs};var ir=e(15400);const Go={settings:{width:30,filter:w=>w.type===k.PU.string,placeholderText:"Select text field",noFieldsMessage:"No text fields found"},name:"",id:"",editor:()=>null};function yo({input:w,options:z,onChange:X}){const ce=(0,a.useCallback)(et=>{X({...z,stringField:et??""})},[X,z]),Ce=(0,a.useCallback)(et=>{const mt=et.value??ir.gs.UpperCase;X({...z,outputFormat:mt})},[X,z]),Ie=(0,a.useCallback)(et=>{X({...z,substringStart:et??0})},[X,z]),Fe=(0,a.useCallback)(et=>{X({...z,substringEnd:et??0})},[X,z]),Je=Object.values(ir.gs).map(et=>({label:et,value:et}));return a.createElement(a.Fragment,null,a.createElement(pe.C,null,a.createElement(te.I,{label:"Field",labelWidth:10},a.createElement(yr.O,{context:{data:w},value:z.stringField??"",onChange:ce,item:Go})),a.createElement(te.I,{label:"Format",labelWidth:10},a.createElement(le.l6,{options:Je,value:z.outputFormat,onChange:Ce,width:20}))),z.outputFormat===ir.gs.Substring&&a.createElement(pe.C,null,a.createElement(te.I,{label:"Substring range",labelWidth:15},a.createElement(or.Q,{min:0,value:z.substringStart??0,onChange:Ie,width:7})),a.createElement(te.I,null,a.createElement(or.Q,{min:0,value:z.substringEnd??0,onChange:Fe,width:7}))))}const fo={id:Z.F.formatString,editor:yo,transformation:ne.c.formatStringTransformer,name:ne.c.formatStringTransformer.name,state:We.pn.beta,description:ne.c.formatStringTransformer.description,categories:new Set([P.m.Reformat])};function Mt({input:w,options:z,onChange:X}){const ce=[],Ce=(0,Te.qt)(!0);for(const et of w)for(const mt of et.fields)if(mt.type==="time"){const vt=(0,ae.Ct)(mt,et,w);ce.push({label:vt,value:vt})}const Ie=(0,a.useCallback)(et=>{const mt=et?.value!==void 0?et.value:"";X({...z,timeField:mt})},[X,z]),Fe=(0,a.useCallback)(et=>{const mt=et.target.value;X({...z,outputFormat:mt})},[X,z]),Je=(0,a.useCallback)(et=>{const mt=et?.value!==void 0?et.value:"";X({...z,timezone:mt})},[X,z]);return a.createElement(a.Fragment,null,a.createElement(pe.C,null,a.createElement(te.I,{label:"Time Field",labelWidth:15,grow:!0},a.createElement(le.l6,{options:ce,value:z.timeField,onChange:Ie,placeholder:"time",isClearable:!0})),a.createElement(te.I,{label:"Format",labelWidth:10,tooltip:a.createElement(a.Fragment,null,"The output format for the field specified as a"," ",a.createElement("a",{href:"https://momentjs.com/docs/#/displaying/",target:"_blank",rel:"noopener noreferrer"},"Moment.js format string"),"."),interactive:!0},a.createElement(me.p,{onChange:Fe,value:z.outputFormat})),a.createElement(te.I,{label:"Set Timezone",tooltip:"Set the timezone of the date manually",labelWidth:20},a.createElement(le.l6,{options:Ce,value:z.timezone,onChange:Je,isClearable:!0}))))}const Ft={id:Z.F.formatTime,editor:Mt,transformation:ne.c.formatTimeTransformer,name:ne.c.formatTimeTransformer.name,state:We.pn.alpha,description:ne.c.formatTimeTransformer.description,help:ve(Z.F.formatTime).helperDocs};var ln=e(25094),Zt=e(67061),En=e(42418);const Fn=({input:w,options:z,onChange:X})=>{const ce=(0,Te.ZI)(w),Ce=(0,a.useCallback)(et=>mt=>{X({...z,fields:{...z.fields,[et]:mt}})},[X]);let Ie,Fe=!1;for(const et of Object.values(z.fields))et.aggregations.length>0&&et.operation!==null&&(Fe=!0),et.operation===ln.R3.groupBy&&(Ie=!0);const Je=Fe&&!Ie;return a.createElement(Zt.B,{direction:"column"},Je&&a.createElement(En.F,{title:"Calculations will not have an effect if no fields are being grouped on.",severity:"warning"}),ce.map(et=>a.createElement(sa,{onConfigChange:Ce(et),fieldName:et,config:z.fields[et],key:et})))},Vn=[{label:"Group by",value:ln.R3.groupBy},{label:"Calculate",value:ln.R3.aggregate}],sa=({fieldName:w,config:z,onConfigChange:X})=>{const ce=(0,St.$j)(),Ce=ga(ce),Ie=(0,a.useCallback)(Fe=>{X({aggregations:z?.aggregations??[],operation:Fe?.value??null})},[z,X]);return a.createElement(te.I,{className:Ce.label,label:w,grow:!0,shrink:!0},a.createElement(Zt.B,{gap:.5,direction:"row"},a.createElement("div",{className:Ce.operation},a.createElement(le.l6,{options:Vn,value:z?.operation,placeholder:"Ignored",onChange:Ie,isClearable:!0})),z?.operation===ln.R3.aggregate&&a.createElement(Ct.S,{className:Ce.aggregations,placeholder:"Select Stats",allowMultiple:!0,stats:z.aggregations,onChange:Fe=>{X({...z,aggregations:Fe})}})))},ga=w=>({label:(0,rt.css)`
      label {
        min-width: ${w.spacing(32)};
      }
    `,operation:(0,rt.css)`
      flex-shrink: 0;
      height: 100%;
      width: ${w.spacing(24)};
    `,aggregations:(0,rt.css)`
      flex-grow: 1;
    `}),Ga={id:Z.F.groupBy,editor:Fn,transformation:ne.c.groupByTransformer,name:ne.c.groupByTransformer.name,description:ne.c.groupByTransformer.description,categories:new Set([P.m.Combine,P.m.CalculateNewFields,P.m.Reformat]),help:ve(Z.F.groupBy).helperDocs};var qa=e(68133),xa=e(46819),Qa=e(88575);const ar=({input:w,options:z,onChange:X})=>{const ce=(0,Te.ZI)(w),Ce=z.showSubframeHeaders===void 0?qa.lu:z.showSubframeHeaders,Ie=(0,a.useCallback)(vt=>Pt=>{X({...z,fields:{...z.fields,[vt]:Pt}})},[X]),Fe=(0,a.useCallback)(()=>{const vt=z.showSubframeHeaders===void 0?!qa.lu:!z.showSubframeHeaders;X({showSubframeHeaders:vt,fields:{...z.fields}})},[X]);let Je,et=!1;for(const vt of Object.values(z.fields))vt.aggregations.length>0&&vt.operation!==null&&(et=!0),vt.operation===ln.R3.groupBy&&(Je=!0);const mt=et&&!Je;return a.createElement(xa.B,{direction:"column"},mt&&a.createElement(En.F,{title:"Calculations will not have an effect if no fields are being grouped on.",severity:"warning"}),a.createElement("div",null,ce.map(vt=>a.createElement(ks,{onConfigChange:Ie(vt),fieldName:vt,config:z.fields[vt],key:vt}))),a.createElement(Qa.D,{label:"Show field names in nested tables",description:"If enabled nested tables will show field names as a table header"},a.createElement(Yn.d,{value:Ce,onChange:Fe})))},ys=[{label:"Group by",value:ln.R3.groupBy},{label:"Calculate",value:ln.R3.aggregate}],ks=({fieldName:w,config:z,onConfigChange:X})=>{const ce=(0,St.$j)(),Ce=Ss(ce),Ie=(0,a.useCallback)(Fe=>{X({aggregations:z?.aggregations??[],operation:Fe?.value??null})},[z,X]);return a.createElement(te.I,{className:Ce.label,label:w,grow:!0,shrink:!0},a.createElement(xa.B,{gap:.5,direction:"row",wrap:!1},a.createElement("div",{className:Ce.operation},a.createElement(le.l6,{options:ys,value:z?.operation,placeholder:"Ignored",onChange:Ie,isClearable:!0})),z?.operation===ln.R3.aggregate&&a.createElement(Ct.S,{className:Ce.aggregations,placeholder:"Select Stats",allowMultiple:!0,stats:z.aggregations,onChange:Fe=>{X({...z,aggregations:Fe})}})))},Ss=w=>({label:(0,rt.css)({minWidth:w.spacing(32)}),operation:(0,rt.css)({flexShrink:0,height:"100%",width:w.spacing(24)}),aggregations:(0,rt.css)({flexGrow:1})}),xs={id:Z.F.groupToNestedTable,editor:ar,transformation:ne.c.groupToNestedTable,name:ne.c.groupToNestedTable.name,description:ne.c.groupToNestedTable.description,categories:new Set([P.m.Combine,P.m.CalculateNewFields,P.m.Reformat])};var Us=e(81010);const lr=({input:w,options:z,onChange:X})=>{const ce=(0,Te.ZI)(w).map(mt=>({label:mt,value:mt})),Ce=(0,a.useCallback)(mt=>{X({...z,columnField:mt?.value})},[X,z]),Ie=(0,a.useCallback)(mt=>{X({...z,rowField:mt?.value})},[X,z]),Fe=(0,a.useCallback)(mt=>{X({...z,valueField:mt?.value})},[X,z]),Je=[{label:"Null",value:Us.N.Null,description:"Null value"},{label:"True",value:Us.N.True,description:"Boolean true value"},{label:"False",value:Us.N.False,description:"Boolean false value"},{label:"Empty",value:Us.N.Empty,description:"Empty string"}],et=(0,a.useCallback)(mt=>{X({...z,emptyValue:mt?.value})},[X,z]);return a.createElement(a.Fragment,null,a.createElement(pe.C,null,a.createElement(te.I,{label:"Column",labelWidth:8},a.createElement(le.l6,{options:ce,value:z.columnField,onChange:Ce,isClearable:!0})),a.createElement(te.I,{label:"Row",labelWidth:8},a.createElement(le.l6,{options:ce,value:z.rowField,onChange:Ie,isClearable:!0})),a.createElement(te.I,{label:"Cell Value",labelWidth:10},a.createElement(le.l6,{options:ce,value:z.valueField,onChange:Fe,isClearable:!0})),a.createElement(te.I,{label:"Empty Value"},a.createElement(le.l6,{options:Je,value:z.emptyValue,onChange:et,isClearable:!0}))))},Hs={id:Z.F.groupingToMatrix,editor:lr,transformation:ne.c.groupingToMatrixTransformer,name:ne.c.groupingToMatrixTransformer.name,description:"Takes a three fields combination and produces a Matrix.",categories:new Set([P.m.Combine,P.m.Reformat]),help:ve(Z.F.groupingToMatrix).helperDocs};var Oa=e(77678);const As=({input:w,options:z,onChange:X})=>{const[Ce,Ie]=(0,a.useState)({bucketCount:!(0,Te.N_)(z.bucketCount||""),bucketSize:!(0,Te.N_)(z.bucketSize||""),bucketOffset:!(0,Te.N_)(z.bucketOffset||"")}),Fe=(0,a.useCallback)(zt=>{X({...z,bucketCount:zt})},[X,z]),Je=(0,a.useCallback)(zt=>{X({...z,bucketSize:zt})},[X,z]),et=(0,a.useCallback)(zt=>{X({...z,bucketOffset:zt})},[X,z]),mt=(0,a.useCallback)(zt=>{Ie({...Ce,bucketCount:!(0,Te.N_)(zt)}),X({...z,bucketCount:Number(zt)===0?void 0:Number(zt)})},[X,z,Ce]),vt=(0,a.useCallback)(zt=>{Ie({...Ce,bucketSize:!(0,Te.N_)(zt)}),X({...z,bucketSize:zt})},[X,z,Ce,Ie]),Pt=(0,a.useCallback)(zt=>{Ie({...Ce,bucketOffset:!(0,Te.N_)(zt)}),X({...z,bucketOffset:zt})},[X,z,Ce,Ie]),Ht=(0,a.useCallback)(()=>{X({...z,combine:!z.combine})},[X,z]),At=(0,Re.w)().getVariables().map(zt=>({value:zt.name,label:zt.label||zt.name,origin:De.$0.Template}));if(!j.$.featureToggles.transformationsVariableSupport){let zt;typeof z.bucketSize=="string"?zt=parseInt(z.bucketSize,10):zt=z.bucketSize;let Pn;return typeof z.bucketOffset=="string"?Pn=parseInt(z.bucketOffset,10):Pn=z.bucketOffset,a.createElement("div",null,a.createElement(pe.C,null,a.createElement(te.I,{labelWidth:18,label:Oa.Rt.bucketCount.name,tooltip:Oa.Rt.bucketCount.description},a.createElement(or.Q,{value:z.bucketCount,placeholder:"Default: 30",onChange:Fe,min:0}))),a.createElement(pe.C,null,a.createElement(te.I,{labelWidth:18,label:Oa.Rt.bucketSize.name,tooltip:Oa.Rt.bucketSize.description},a.createElement(or.Q,{value:zt,placeholder:"auto",onChange:Je,min:0}))),a.createElement(pe.C,null,a.createElement(te.I,{labelWidth:18,label:Oa.Rt.bucketOffset.name,tooltip:Oa.Rt.bucketOffset.description},a.createElement(or.Q,{value:Pn,placeholder:"none",onChange:et,min:0}))),a.createElement(pe.C,null,a.createElement(te.I,{labelWidth:18,label:Oa.Rt.combine.name,tooltip:Oa.Rt.combine.description},a.createElement(Yn.K,{value:z.combine??!1,onChange:Ht}))))}return a.createElement("div",null,a.createElement(pe.C,null,a.createElement(te.I,{invalid:Ce.bucketCount,error:"Value needs to be an integer or a variable",labelWidth:18,label:Oa.Rt.bucketCount.name,tooltip:Oa.Rt.bucketCount.description},a.createElement(he.y,{suggestions:At,value:z.bucketCount,placeholder:"Default: 30",onChange:mt}))),a.createElement(pe.C,null,a.createElement(te.I,{invalid:Ce.bucketSize,error:"Value needs to be an integer or a variable",labelWidth:18,label:Oa.Rt.bucketSize.name,tooltip:Oa.Rt.bucketSize.description},a.createElement(he.y,{suggestions:At,value:z.bucketSize,placeholder:"auto",onChange:vt}))),a.createElement(pe.C,null,a.createElement(te.I,{labelWidth:18,label:Oa.Rt.bucketOffset.name,tooltip:Oa.Rt.bucketOffset.description,invalid:Ce.bucketOffset,error:"Value needs to be an integer or a variable"},a.createElement(he.y,{suggestions:At,value:z.bucketOffset,placeholder:"none",onChange:Pt}))),a.createElement(pe.C,null,a.createElement(te.I,{labelWidth:18,label:Oa.Rt.combine.name,tooltip:Oa.Rt.combine.description},a.createElement(Yn.K,{value:z.combine??!1,onChange:Ht}))))},zr={id:Z.F.histogram,editor:As,transformation:ne.c.histogramTransformer,name:ne.c.histogramTransformer.name,description:ne.c.histogramTransformer.description,categories:new Set([P.m.CreateNewVisualization]),help:ve(Z.F.histogram).helperDocs};var Ha=e(41511),cr=e(64278);const no=[{value:Ha.W.outer,label:"OUTER (TIME SERIES)",description:"Keep all rows from any table with a value. Join on distinct field values. Performant and best used for time series."},{value:Ha.W.outerTabular,label:"OUTER (TABULAR)",description:"Join on a field value with duplicated values. Non performant outer join best used for tabular(SQL like) data."},{value:Ha.W.inner,label:"INNER",description:"Drop rows that do not match a value in all tables."}];function Do({input:w,options:z,onChange:X}){const ce=(0,cr.sE)(w),Ce=(0,cr.m3)(ce),Ie=(0,Re.w)().getVariables().map(et=>({value:"$"+et.name,label:"$"+et.name})),Fe=(0,a.useCallback)(et=>{X({...z,byField:et?.value})},[X,z]),Je=(0,a.useCallback)(et=>{X({...z,mode:et?.value})},[X,z]);return a.createElement(a.Fragment,null,a.createElement(pe.C,null,a.createElement(te.I,{label:"Mode",labelWidth:8,grow:!0},a.createElement(le.l6,{options:no,value:z.mode??Ha.W.outer,onChange:Je}))),a.createElement(pe.C,null,a.createElement(te.I,{label:"Field",labelWidth:8,grow:!0},a.createElement(le.l6,{options:[...Ce,...Ie],value:z.byField,onChange:Fe,placeholder:"time",isClearable:!0}))))}const jo={id:Z.F.joinByField,aliasIds:[Z.F.seriesToColumns],editor:Do,transformation:ne.c.joinByFieldTransformer,name:ne.c.joinByFieldTransformer.name,description:ne.c.joinByFieldTransformer.description,categories:new Set([P.m.Combine]),help:ve(Z.F.joinByField).helperDocs};var Ao=e(6829);const Ui=[{value:Ao.n.Columns,label:"Columns"},{value:Ao.n.Rows,label:"Rows"}],Ro=({input:w,options:z,onChange:X})=>{const{labelNames:Ce,selected:Ie}=(0,a.useMemo)(()=>{let et=[],mt={};for(const Pt of w)for(const Ht of Pt.fields)if(Ht.labels)for(const Ut of Object.keys(Ht.labels))mt[Ut]||(et.push({value:Ut,label:Ut}),mt[Ut]=!0);const vt=new Set(z.keepLabels?.length?z.keepLabels:Object.keys(mt));return{labelNames:et,selected:vt}},[z.keepLabels,w]),Fe=et=>{X({...z,valueLabel:et?.value})},Je=et=>{if(Ie.has(et)?Ie.delete(et):Ie.add(et),Ie.size===Ce.length||!Ie.size){const{keepLabels:mt,...vt}=z;X(vt)}else X({...z,keepLabels:[...Ie]})};return a.createElement("div",null,a.createElement(pe.C,null,a.createElement(te.I,{label:"Mode",labelWidth:20},a.createElement(re.z,{options:Ui,value:z.mode??Ao.n.Columns,onChange:et=>X({...z,mode:et})}))),a.createElement(pe.C,null,a.createElement(te.I,{label:"Labels",labelWidth:20},a.createElement(Zt.B,{gap:1,wrap:"wrap"},Ce.map((et,mt)=>{const vt=et.label;return a.createElement(hs.m,{key:`${vt}/${mt}`,onClick:()=>Je(vt),label:vt,selected:Ie.has(vt)})})))),z.mode!==Ao.n.Rows&&a.createElement(pe.C,null,a.createElement(te.I,{label:"Value field name",labelWidth:20,tooltip:"Replace the value field name with a label",htmlFor:"labels-to-fields-as-name"},a.createElement(le.l6,{inputId:"labels-to-fields-as-name",isClearable:!0,allowCustomValue:!1,placeholder:"(Optional) Select label",options:Ce,value:z?.valueLabel,onChange:Fe,className:"min-width-16"}))))},Zo={id:Z.F.labelsToFields,editor:Ro,transformation:ne.c.labelsToFieldsTransformer,name:ne.c.labelsToFieldsTransformer.name,description:`Groups series by time and return labels or tags as fields.
                Useful for showing time series with labels in a table where each label key becomes a separate column.`,categories:new Set([P.m.Reformat]),help:ve(Z.F.labelsToFields).helperDocs},qo=({options:w,onChange:z})=>{const[X,ce]=(0,a.useState)(!1),Ce=(0,a.useCallback)(et=>{z({...w,limitField:Number(et.currentTarget.value)})},[z,w]),Ie=(0,a.useCallback)(et=>{ce(!(0,Te.N_)(et)),z({...w,limitField:et})},[z,w]),Je=(0,Re.w)().getVariables().map(et=>({value:et.name,label:et.label||et.name,origin:De.$0.Template}));return j.$.featureToggles.transformationsVariableSupport?a.createElement(a.Fragment,null,a.createElement(pe.C,null,a.createElement(he.y,{invalid:X,error:"Value needs to be an integer or a variable",value:String(w.limitField),onChange:Ie,placeholder:"Value or variable",suggestions:Je}))):a.createElement(a.Fragment,null,a.createElement(pe.C,null,a.createElement(te.I,{label:"Limit",labelWidth:8},a.createElement(me.p,{placeholder:"Limit count",pattern:"[0-9]*",value:w.limitField,onChange:Ce,width:25}))))},el={id:Z.F.limit,editor:qo,transformation:ne.c.limitTransformer,name:ne.c.limitTransformer.name,description:"Limit the number of items displayed.",categories:new Set([P.m.Filter]),help:ve(Z.F.limit).helperDocs},ur=({input:w,options:z,onChange:X})=>w.length<=1?a.createElement(eo.P,null,"Merge has no effect when applied on a single frame."):null,tl={id:Z.F.merge,editor:ur,transformation:ne.c.mergeTransformer,name:ne.c.mergeTransformer.name,description:`Merge many series/tables and return a single table where mergeable values will be combined into the same row.
                Useful for showing multiple series, tables or a combination of both visualized in a table.`,categories:new Set([P.m.Combine]),help:ve(Z.F.merge).helperDocs};var nl=e(82280);const al=({options:w,input:z,onChange:X})=>{const{indexByName:ce,excludeByName:Ce,renameByName:Ie,includeByName:Fe}=w,Je=(0,Te.ZI)(z),et=(0,a.useMemo)(()=>ao(Je,ce),[Je,ce]),mt=Fe&&Object.keys(Fe).length>0?"include":"exclude",vt=(0,a.useCallback)((At,zt)=>{X({...w,excludeByName:{...Ce,[At]:zt}})},[X,w,Ce]),Pt=(0,a.useCallback)((At,zt)=>{const Pn={...w,includeByName:{...Fe,[At]:!zt}};X(Pn)},[X,w,Fe]),Ht=(0,a.useCallback)(At=>{if(!At||!At.destination)return;const zt=At.source.index,Pn=At.destination.index;zt!==Pn&&X({...w,indexByName:ti(Je,zt,Pn)})},[X,w,Je]),Ut=(0,a.useCallback)((At,zt)=>{X({...w,renameByName:{...w.renameByName,[At]:zt}})},[X,w]);return z.length>1?a.createElement(eo.P,null,"Organize fields only works with a single frame. Consider applying a join transformation or filtering the input first."):a.createElement(qr.JY,{onDragEnd:Ht},a.createElement(qr.gL,{droppableId:"sortable-fields-transformer",direction:"vertical"},At=>a.createElement("div",{ref:At.innerRef,...At.droppableProps},et.map((zt,Pn)=>{const Ta=Fe&&zt in Fe?Fe[zt]:!1,Va=mt==="include"?Ta:!Ce[zt],Fa=mt==="include"?Pt:vt;return a.createElement(ei,{fieldName:zt,renamedFieldName:Ie[zt],index:Pn,onToggleVisibility:Fa,onRenameField:Ut,visible:Va,key:zt})}),At.placeholder)))};al.displayName="OrganizeFieldsTransformerEditor";const ei=({fieldName:w,renamedFieldName:z,index:X,visible:ce,onToggleVisibility:Ce,onRenameField:Ie})=>{const Fe=(0,St.of)(Wr);return a.createElement(qr.sx,{draggableId:w,index:X},Je=>a.createElement("div",{className:"gf-form-inline",ref:Je.innerRef,...Je.draggableProps},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label gf-form-label--justify-left width-30"},a.createElement("span",{...Je.dragHandleProps},a.createElement(us.I,{name:"draggabledots",title:"Drag and drop to reorder",size:"lg",className:Fe.draggable})),a.createElement(Fr.K,{className:Fe.toggle,size:"md",name:ce?"eye":"eye-slash",onClick:()=>Ce(w,ce),tooltip:ce?"Disable":"Enable"}),a.createElement("span",{className:Fe.name,title:w},w)),a.createElement(me.p,{className:"flex-grow-1",defaultValue:z||"",placeholder:`Rename ${w}`,onBlur:et=>Ie(w,et.currentTarget.value)}))))};ei.displayName="DraggableFieldName";const Wr=w=>({toggle:(0,rt.css)`
    margin: 0 8px;
    color: ${w.colors.text.secondary};
  `,draggable:(0,rt.css)`
    opacity: 0.4;
    &:hover {
      color: ${w.colors.text.maxContrast};
    }
  `,name:(0,rt.css)`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: ${w.typography.bodySmall.fontSize};
    font-weight: ${w.typography.fontWeightMedium};
  `}),ti=(w,z,X)=>{const ce=Array.from(w),[Ce]=ce.splice(z,1);return ce.splice(X,0,Ce),ce.reduce((Ie,Fe,Je)=>(Ie[Fe]=Je,Ie),{})},ao=(w,z={})=>{if(!z||Object.keys(z).length===0)return w;const X=(0,nl.X)(z);return w.sort(X)},Po={id:Z.F.organize,editor:al,transformation:ne.c.organizeFieldsTransformer,name:ne.c.organizeFieldsTransformer.name,description:"Allows the user to re-order, hide, or rename fields / columns. Useful when data source doesn't allow overrides for visualizing data.",categories:new Set([P.m.ReorderAndRename]),help:ve(Z.F.organize).helperDocs};var Co=e(21128),kr=e(13544);const Ni=({options:w,onChange:z})=>{const X=[{label:"Series to rows",value:Co.rV.SeriesToRows,description:"Create a table with one row for each series value"},{label:"Reduce fields",value:Co.rV.ReduceFields,description:"Collapse each field into a single value"}],ce=(0,a.useCallback)(Fe=>{const Je=Fe.value;z({...w,mode:Je,includeTimeField:Je===Co.rV.ReduceFields?!!w.includeTimeField:!1})},[z,w]),Ce=(0,a.useCallback)(()=>{z({...w,includeTimeField:!w.includeTimeField})},[z,w]),Ie=(0,a.useCallback)(()=>{z({...w,labelsToFields:!w.labelsToFields})},[z,w]);return a.createElement(a.Fragment,null,a.createElement(te.I,{label:"Mode","data-testid":kr.Tp.components.Transforms.Reduce.modeLabel,grow:!0,labelWidth:16},a.createElement(le.l6,{options:X,value:X.find(Fe=>Fe.value===w.mode)||X[0],onChange:ce})),a.createElement(te.I,{label:"Calculations","data-testid":kr.Tp.components.Transforms.Reduce.calculationsLabel,grow:!0,labelWidth:16},a.createElement(Ct.S,{placeholder:"Choose Stat",allowMultiple:!0,stats:w.reducers||[],onChange:Fe=>{z({...w,reducers:Fe})}})),w.mode===Co.rV.ReduceFields&&a.createElement(te.I,{htmlFor:"include-time-field",labelWidth:16,label:"Include time"},a.createElement(Yn.K,{id:"include-time-field",value:!!w.includeTimeField,onChange:Ce})),w.mode!==Co.rV.ReduceFields&&a.createElement(te.I,{htmlFor:"labels-to-fields",labelWidth:16,label:"Labels to fields"},a.createElement(Yn.K,{id:"labels-to-fields",value:!!w.labelsToFields,onChange:Ie})))},hl={id:Z.F.reduce,editor:Ni,transformation:ne.c.reduceTransformer,name:ne.c.reduceTransformer.name,description:ne.c.reduceTransformer.description,categories:new Set([P.m.CalculateNewFields]),help:ve(Z.F.reduce).helperDocs};class mi extends a.PureComponent{constructor(z){super(z),this.handleRegexChange=X=>{const ce=X.currentTarget.value;let Ce=!0;if(ce)try{ce&&(0,xt.dO)(ce)}catch{Ce=!1}this.setState(Ie=>({...Ie,regex:ce,isRegexValid:Ce}))},this.handleRenameChange=X=>{const ce=X.currentTarget.value;this.setState(Ce=>({...Ce,renamePattern:ce}))},this.handleRegexBlur=X=>{const ce=X.currentTarget.value;let Ce=!0;try{ce&&(0,xt.dO)(ce)}catch{Ce=!1}this.setState({isRegexValid:Ce},()=>{Ce&&this.props.onChange({...this.props.options,regex:ce})})},this.handleRenameBlur=X=>{const ce=X.currentTarget.value;this.setState({renamePattern:ce},()=>this.props.onChange({...this.props.options,renamePattern:ce}))},this.state={regex:z.options.regex,renamePattern:z.options.renamePattern,isRegexValid:!0}}render(){const{regex:z,renamePattern:X,isRegexValid:ce}=this.state;return a.createElement(a.Fragment,null,a.createElement(te.I,{label:"Match",labelWidth:16,invalid:!ce,error:ce?void 0:"Invalid pattern"},a.createElement(me.p,{placeholder:"Regular expression pattern",value:z||"",onChange:this.handleRegexChange,onBlur:this.handleRegexBlur,width:25})),a.createElement(te.I,{label:"Replace",labelWidth:16},a.createElement(me.p,{placeholder:"Replacement pattern",value:X||"",onChange:this.handleRenameChange,onBlur:this.handleRenameBlur,width:25})))}}const vl={id:Z.F.renameByRegex,editor:mi,transformation:ne.c.renameByRegexTransformer,name:ne.c.renameByRegexTransformer.name,description:"Renames part of the query result by using regular expression with placeholders.",categories:new Set([P.m.ReorderAndRename]),help:ve(Z.F.renameByRegex).helperDocs},El=({input:w,options:z,onChange:X})=>null,Lo={id:Z.F.seriesToRows,editor:El,transformation:ne.c.seriesToRowsTransformer,name:ne.c.seriesToRowsTransformer.name,description:`Merge many series and return a single series with time, metric and value as columns.
                Useful for showing multiple time series visualized in a table.`,categories:new Set([P.m.Combine,P.m.Reformat]),help:ve(Z.F.seriesToRows).helperDocs},bo=({input:w,options:z,onChange:X})=>{const ce=(0,Te.ZI)(w).map(et=>({label:et,value:et})),Ie=(0,Re.w)().getVariables().map(et=>({label:"$"+et.name,value:"$"+et.name})),Fe=(0,a.useCallback)((et,mt)=>{X({...z,sort:[mt]})},[X,z]),Je=z.sort?.length?z.sort:[{}];return a.createElement("div",null,Je.map((et,mt)=>a.createElement(pe.C,{key:`${et.field}/${mt}`},a.createElement(te.I,{label:"Field",labelWidth:10,grow:!0},a.createElement(le.l6,{options:j.$.featureToggles.transformationsVariableSupport?[...ce,...Ie]:ce,value:et.field,placeholder:"Select field",onChange:vt=>{Fe(mt,{...et,field:vt.value})}})),a.createElement(te.I,{label:"Reverse"},a.createElement(Yn.K,{value:!!et.desc,onChange:()=>{Fe(mt,{...et,desc:!et.desc})}})))))},Rr={id:Z.F.sortBy,editor:bo,transformation:ne.c.sortByTransformer,name:ne.c.sortByTransformer.name,description:ne.c.sortByTransformer.description,categories:new Set([P.m.ReorderAndRename]),help:ve(Z.F.sortBy).helperDocs};function ni({options:w,onChange:z}){const[X,ce]=(0,a.useState)(w),Ce=yl(),Ie=is(),Fe=()=>{X.push({path:""}),ce([...X]),mt()},Je=vt=>{X&&(X.splice(vt,1),ce([...X]),mt())},et=(vt,Pt,Ht)=>{X&&(Ht==="alias"?X[Pt].alias=vt.currentTarget.value??"":X[Pt].path=vt.currentTarget.value??"",ce([...X]))},mt=()=>{z(X)};return a.createElement("ol",{className:(0,rt.cx)(Ie.list)},X&&X.map((vt,Pt)=>a.createElement("li",{key:Pt},a.createElement(pe.C,null,a.createElement(te.I,{label:"Field",tooltip:Ce.field,grow:!0},a.createElement(me.p,{onBlur:mt,onChange:Ht=>et(Ht,Pt,"path"),value:vt.path,placeholder:'A valid json path, e.g. "object.value1" or "object.value2[0]"'})),a.createElement(te.I,{label:"Alias",tooltip:Ce.alias},a.createElement(me.p,{width:12,value:vt.alias,onBlur:mt,onChange:Ht=>et(Ht,Pt,"alias")})),a.createElement(te.I,{className:(0,rt.cx)(Ie.removeIcon)},a.createElement(Fr.K,{onClick:()=>Je(Pt),name:"trash-alt",tooltip:"Remove path"}))))),a.createElement(te.I,null,a.createElement(ie.$n,{icon:"plus",onClick:()=>Fe(),variant:"secondary"},"Add path")))}const yl=()=>{const w=[{path:"object",description:"=> extract fields from object"},{path:"object.value1",description:"=> extract value1"},{path:"object.value2",description:"=> extract value2"},{path:"object.value2[0]",description:"=> extract value2 first element"},{path:"object.value2[1]",description:"=> extract value2 second element"}];return{field:a.createElement("div",null,"A valid path of an json object.",a.createElement("div",null,a.createElement("strong",null,"JSON Value:")),a.createElement("pre",null,a.createElement("code",null,["{",'  "object": {','    "value1": "hello world"','    "value2": [1, 2, 3, 4]',"  }","}"].join(`
`))),a.createElement("strong",null,"Valid Paths:"),w.map((z,X)=>a.createElement("p",{key:X},a.createElement("code",null,z.path),a.createElement("i",null,z.description)))),alias:"An alias name for the variable in the dashboard. If left blank the given path will be used."}};function is(){return{list:(0,rt.css)`
      margin-left: 20px;
    `,removeIcon:(0,rt.css)`
      margin: 0 0 0 4px;
      align-items: center;
    `}}var ai=e(14236),go=(w=>(w.JSON="json",w.KeyValues="kvp",w.Auto="auto",w))(go||{});const fi={id:go.JSON,name:"JSON",description:"Parse JSON string",parse:w=>JSON.parse(w)};function wi(w){const z=[];let X="",ce="";const Ce={};for(let Ie=0;Ie<w.length;Ie++){let Fe=w[Ie];Fe===X&&(X="",Fe=w[++Ie]);const Je=Fe==="\\";if(Je&&(Fe=w[++Ie]),Je||X.length){z.push(Fe);continue}switch((Fe==='"'||Fe==="'")&&(X=Fe),Fe){case":":case"=":z.length&&(ce&&(Ce[ce]=""),ce=z.join(""),z.length=0);break;case'"':case"'":case" ":case`
`:case"	":case"\r":case`
`:z.length&&ce===""&&(Ce[z.join("")]="",z.length=0);case",":case";":case"&":case"{":case"}":if(z.length){const et=z.join("");ce.length?(Ce[ce]=et,ce=""):ce=et,z.length=0}break;default:z.push(Fe),Ie===w.length-1&&ce===""&&z.length&&(Ce[z.join("")]="",z.length=0)}}return ce.length&&(Ce[ce]=z.join("")),Ce}const gi={id:go.KeyValues,name:"Key+value pairs",description:"Look for a=b, c: d values in the line",parse:wi},Fi=[fi,gi],sl={id:go.Auto,name:"Auto",description:"parse new fields automatically",parse:w=>{for(const z of Fi)try{const X=z.parse(w);if(X!=null)return X}catch{}}},co=new Me.O(()=>[...Fi,sl]),Wi={id:Z.F.extractFields,name:"Extract fields",description:"Parse fields from the contends of another",defaultOptions:{},operator:(w,z)=>X=>X.pipe((0,An.T)(ce=>Wi.transformer(w,z)(ce))),transformer:w=>z=>z.map(X=>Ki(X,w))};function Ki(w,z){if(!z.source)return w;const X=(0,Dr.findField)(w,z.source);if(!X)return w;const ce=co.getIfExists(z.format??go.Auto);if(!ce)throw new Error("unkonwn extractor");const Ce=w.length,Ie=[],Fe=new Map;for(let et=0;et<Ce;et++){let mt=X.values[et];if((0,p.isString)(mt))try{mt=ce.parse(mt)}catch{mt={}}if(mt!=null){if(z.format===go.JSON&&z.jsonPaths&&z.jsonPaths?.length>0){const vt={},Pt=z.jsonPaths.filter(Ht=>Ht.path);Pt.length>0&&(Pt.forEach(Ht=>{const Ut=Ht.alias&&Ht.alias.length>0?Ht.alias:Ht.path;vt[Ut]=(0,p.get)(mt,Ht.path)??"Not Found"}),mt=vt)}for(const[vt,Pt]of Object.entries(mt)){let Ht=Fe.get(vt);Ht==null&&(Ht=new Array(Ce).fill(void 0),Fe.set(vt,Ht),Ie.push(vt)),Ht[et]=Pt}}}const Je=Ie.map(et=>{const mt=Fe.get(et),vt={name:et,values:mt,type:mt?(0,ai.oE)(mt.find(Pt=>Pt!=null)):k.PU.other,config:{}};return j.$.featureToggles.extractFieldsNameDeduplication&&(vt.name=(0,ae.fk)(vt,w)),vt});if(z.keepTime){const et=(0,Dr.findField)(w,"Time")||(0,Dr.findField)(w,"time");et&&Je.unshift(et)}return z.replace||Je.unshift(...w.fields),{...w,fields:Je}}const so={settings:{width:30,placeholderText:"Select field"},name:"",id:"",editor:()=>null},$i=({input:w,options:z,onChange:X})=>{const ce=mt=>{X({...z,source:mt})},Ce=mt=>{X({...z,format:mt?.value})},Ie=mt=>{X({...z,jsonPaths:mt})},Fe=()=>{z.replace&&(z.keepTime=!1),X({...z,replace:!z.replace})},Je=()=>{X({...z,keepTime:!z.keepTime})},et=co.selectOptions(z.format?[z.format]:void 0);return a.createElement("div",null,a.createElement(pe.C,null,a.createElement(te.I,{label:"Source",labelWidth:16},a.createElement(yr.O,{context:{data:w},value:z.source??"",onChange:ce,item:so}))),a.createElement(pe.C,null,a.createElement(te.I,{label:"Format",labelWidth:16},a.createElement(le.l6,{value:et.current[0],options:et.options,onChange:Ce,width:24,placeholder:"Auto"}))),z.format==="json"&&a.createElement(ni,{options:z.jsonPaths??[],onChange:Ie}),a.createElement(pe.C,null,a.createElement(te.I,{label:"Replace all fields",labelWidth:16},a.createElement(Yn.K,{value:z.replace??!1,onChange:Fe}))),z.replace&&a.createElement(pe.C,null,a.createElement(te.I,{label:"Keep time",labelWidth:16},a.createElement(Yn.K,{value:z.keepTime??!1,onChange:Je}))))},Lr={id:Z.F.extractFields,editor:$i,transformation:Wi,name:Wi.name,description:"Parse fields from content (JSON, labels, etc).",categories:new Set([P.m.Reformat]),help:ve(Z.F.extractFields).helperDocs};var Bo=e(51986);const Pr={id:Z.F.joinByLabels,name:"Join by labels",description:"Flatten labeled results into a table joined by labels.",defaultOptions:{},operator:(w,z)=>X=>X.pipe((0,An.T)(ce=>Pr.transformer(w,z)(ce))),transformer:w=>z=>!z||!z.length?z:[Uo(w,z)]};function Uo(w,z){if(!w.value?.length)return Hr("No value labele configured");const X=(0,Te.aG)(z);if(X.size<1)return Hr("No labels in result");if(!X.has(w.value))return Hr("Value label not found");let ce=w.join?.length?w.join:Array.from(X);ce=ce.filter(Pt=>Pt!==w.value);const Ce=new Set,Ie=new Map,Fe={};for(const Pt of z)for(const Ht of Pt.fields)if(Ht.labels&&Ht.type!==k.PU.time){const Ut=ce.map(Fa=>Ht.labels[Fa]),At=Ut.join(",");let zt=Ie.get(At);zt||(zt={keys:Ut,values:{}},Ie.set(At,zt));const Pn=Ht.labels[w.value],Ta=Ht.values,Va=zt.values[Pn];Va?zt.values[Pn]=Va.concat(Ta):zt.values[Pn]=Ta,Fe[Pn]||(Fe[Pn]=Ht),Ce.add(Pn)}const Je=Array.from(Ce),et=ce.map(()=>[]),mt=Je.map(()=>[]);for(const Pt of Ie.values()){let Ht=-1,Ut=!1;for(;!Ut;){Ht++,Ut=!0;for(let At=0;At<ce.length;At++)et[At].push(Pt.keys[At]);for(let At=0;At<Je.length;At++){const zt=Je[At],Pn=Pt.values[zt]??[];mt[At].push(Pn[Ht]),Pn.length>Ht+1&&(Ut=!1)}}}const vt={fields:[],length:mt[0].length};for(let Pt=0;Pt<ce.length;Pt++)vt.fields.push({name:ce[Pt],config:{},type:k.PU.string,values:et[Pt]});for(let Pt=0;Pt<Je.length;Pt++){const Ht=Fe[Je[Pt]];vt.fields.push({name:Je[Pt],config:{},type:Ht.type??k.PU.number,values:mt[Pt]})}return vt}function Hr(w){return{meta:{notices:[{severity:"error",text:w}]},fields:[{name:"Error",type:k.PU.string,config:{},values:[w]}],length:0}}function Vi({input:w,options:z,onChange:X}){const ce=(0,a.useMemo)(()=>{let et;const mt=(0,Te.aG)(w),vt=Array.from(mt).map(Pn=>({label:Pn,value:Pn}));let Pt=vt.find(Pn=>Pn.value===z.value);!Pt&&z.value&&(Pt={label:`${z.value} (not found)`,value:z.value},vt.push(Pt)),w.length?mt.size===0&&(et=a.createElement(En.F,{title:"No labels found"},"The input does not contain any labels")):et=a.createElement(En.F,{title:"No input found"},"No input (or labels) found"),mt.delete(z.value);const Ht=Array.from(mt).map(Pn=>({label:Pn,value:Pn}));let Ut=Ht;const At=!!z.join?.length;let zt="Join";return At?Ut=Ht.filter(Pn=>!z.join.includes(Pn.value)):zt=Ht.map(Pn=>Pn.value).join(", "),{warn:et,valueOptions:vt,valueOption:Pt,joinOptions:Ht,addOptions:Ut,addText:zt,hasJoin:At,key:Date.now()}},[z,w]),Ce=(et,mt)=>{if(!z.join)return;const vt=z.join.slice();if(mt)vt[et]=mt;else if(vt.splice(et,1),!vt.length){X({...z,join:void 0});return}const Pt=new Set(vt);z.value&&Pt.delete(z.value),X({...z,join:Array.from(Pt)})},Ie=et=>{const mt=et?.value;if(!mt)return;const vt=z.join?z.join.slice():[];vt.push(mt),X({...z,join:vt})},Fe=10,Je="No labels found";return a.createElement("div",null,ce.warn,a.createElement(pe.C,null,a.createElement(te.I,{error:"required",invalid:!z.value?.length,label:"Value",labelWidth:Fe,tooltip:"Select the label indicating the values name"},a.createElement(le.l6,{options:ce.valueOptions,value:ce.valueOption,onChange:et=>X({...z,value:et.value}),noOptionsMessage:Je}))),ce.hasJoin?z.join.map((et,mt)=>a.createElement(pe.C,{key:et+mt},a.createElement(te.I,{label:"Join",labelWidth:Fe,error:"Unable to join by the value label",invalid:et===z.value},a.createElement(cs.Gy,null,a.createElement(le.l6,{options:ce.joinOptions,value:ce.joinOptions.find(vt=>vt.value===et),isClearable:!0,onChange:vt=>Ce(mt,vt?.value),noOptionsMessage:Je}),!!(ce.addOptions.length&&mt===z.join.length-1)&&a.createElement(Bo.i,{icon:"plus",label:"",options:ce.addOptions,onChange:Ie,variant:"secondary"}))))):a.createElement(a.Fragment,null,!!ce.addOptions.length&&a.createElement(pe.C,null,a.createElement(te.I,{label:"Join",labelWidth:Fe},a.createElement(le.l6,{options:ce.addOptions,placeholder:ce.addText,onChange:Ie,noOptionsMessage:Je})))))}const Dl={id:Pr.id,editor:Vi,transformation:Pr,name:Pr.name,description:Pr.description,state:We.pn.beta,categories:new Set([P.m.Combine]),help:ve(Pr.id).helperDocs};var Pl=e(84350),pi=e(69862),po=e(65474),Cl=e(67140);const _i={id:Z.F.fieldLookup,name:"Lookup fields from resource",description:"Retrieve matching data based on specified field",defaultOptions:{},operator:w=>z=>z.pipe((0,pi.Z)(X=>(0,po.H)(hi(X,w))))};async function hi(w,z){const X=Q.sJ.get(ee.Ct.byName).get(z?.lookupField),ce=await(0,Cl.q3)(z?.gazetteer??Cl.fx);return ce.frame?si(w,ce,X):Promise.reject("missing frame in gazetteer")}function si(w,z,X){const ce=z.frame()?.fields;return ce?w.map(Ce=>{const Ie=Ce.length,Fe=[];for(const Je of Ce.fields)if(Fe.push(Je),X(Je,Ce,w)){const et=Je.values,mt=[];for(const vt of ce){const Pt=new Array(Ie);mt.push(Pt),Fe.push({...vt,values:Pt})}for(let vt=0;vt<z.count;vt++){const Pt=z.find(et[vt]);if(Pt?.index!=null)for(let Ht=0;Ht<ce.length;Ht++)mt[Ht][vt]=ce[Ht].values[Pt.index]}}return{...Ce,fields:Fe}}):w}const vi={settings:{width:30,filter:w=>w.type===k.PU.string,placeholderText:"Select text field",noFieldsMessage:"No text fields found"},name:"",id:"",editor:()=>null},No={settings:{}},qe=({input:w,options:z,onChange:X})=>{const ce=(0,a.useCallback)(Ie=>{X({...z,lookupField:Ie})},[X,z]),Ce=(0,a.useCallback)(Ie=>{X({...z,gazetteer:Ie})},[X,z]);return a.createElement("div",null,a.createElement(pe.C,null,a.createElement(te.I,{label:"Field",labelWidth:12},a.createElement(yr.O,{context:{data:w},value:z?.lookupField??"",onChange:ce,item:vi}))),a.createElement(pe.C,null,a.createElement(te.I,{label:"Lookup",labelWidth:12},a.createElement(Pl.G,{value:z?.gazetteer??"",context:{data:w},item:No,onChange:Ce}))))},tt={id:Z.F.fieldLookup,editor:qe,transformation:_i,name:_i.name,description:"Use a field value to lookup additional fields from an external source. This currently supports spatial data, but will eventually support more formats.",state:We.pn.alpha,categories:new Set([P.m.PerformSpatialOperations]),help:ve(Z.F.fieldLookup).helperDocs};var nt=e(35602),ut=e(64586);const Ot=(w,z,X=[])=>(z===0?X.push(w):w.forEach(ce=>{Ot(ce,z-1,X)}),X);function Wt(w){const z=w[0].length,X=w.length,ce=new Map;for(let Ce=0;Ce<z;Ce++){let Ie=ce;for(let Fe=0;Fe<X;Fe++){let Je=w[Fe][Ce],et=Ie.get(Je);et==null&&(et=Fe===X-1?[]:new Map,Ie.set(Je,et)),Ie=et}Ie.push(Ce)}return Ot(ce,X)}const Kt={asLabels:!0,append:!1,withNames:!1,separator1:"=",separator2:" "};function tn(w,z,X){return z.map((ce,Ce)=>w.withNames?`${ce}${w.separator1}${X[Ce]}`:X[Ce]).join(w.separator2)}function un(w,z){const X={};return w.forEach((ce,Ce)=>{X[ce]=String(z[Ce])}),X}const yn={id:Z.F.partitionByValues,name:"Partition by values",description:"Splits a one-frame dataset into multiple series discriminated by unique/enum values in one or more fields.",defaultOptions:{keepFields:!1},operator:(w,z)=>X=>X.pipe((0,An.T)(ce=>yn.transformer(w,z)(ce))),transformer:(w,z)=>{const X=(0,nt.R)(z,{names:w.fields});if(!X)return ut.W.transformer({},z);const ce=(0,Q.NS)(X);return Ce=>Ce.length?$n(Ce[0],ce,w):Ce}};function $n(w,z,X){const ce=w.fields.filter(Je=>z(Je,w,[w]));if(!ce.length)return[w];const Ce=ce.map(Je=>Je.values),Ie=ce.map(Je=>Je.name),Fe={...Kt,...X?.naming};return Wt(Ce).map(Je=>{let et=w.name,mt={};if(Fe.asLabels)mt=un(Ie,ce.map((Pt,Ht)=>Ce[Ht][Je[0]]));else{let Pt=tn(Fe,Ie,ce.map((Ht,Ut)=>Ce[Ut][Je[0]]));Fe?.append&&w.name&&(Pt=`${w.name} ${Pt}`),et=Pt}let vt=w.fields;if(!X?.keepFields){const Pt=new Set(Ie);vt=w.fields.filter(Ht=>!Pt.has(Ht.name))}return{name:et,meta:w.meta,length:Je.length,fields:vt.map(Pt=>{const Ht=Pt.values,Ut=Array(Je.length);for(let At=0;At<Je.length;At++)Ut[At]=Ht[Je[At]];return{name:Pt.name,type:Pt.type,config:Pt.config,labels:{...Pt.labels,...mt},values:Ut}})}})}function na({input:w,options:z,onChange:X}){const ce=(0,cr.sE)(w),Ce=(0,cr.m3)(ce),Ie=(0,a.useMemo)(()=>{const Ht=new Set(z.fields);return Ht.size<1?Ce:Ce.filter(Ut=>!Ht.has(Ut.value))},[Ce,z]),Fe=(0,a.useCallback)(Ht=>{if(!Ht.value)return;const Ut=new Set(z.fields);Ut.add(Ht.value),X({...z,fields:[...Ut]})},[X,z]);let Je;(Ht=>{Ht[Ht.asLabels=0]="asLabels",Ht[Ht.frameName=1]="frameName"})(Je||(Je={}));const et=[{label:"As label",value:0},{label:"As frame name",value:1}],mt=[{label:"Yes",value:!0},{label:"No",value:!1}],vt=(0,a.useCallback)(Ht=>{if(!Ht)return;const Ut=new Set(z.fields);Ut.delete(Ht),X({...z,fields:[...Ut]})},[X,z]);if(w.length>1)return a.createElement(eo.P,null,"Partition by values only works with a single frame.");const Pt=[...new Set(z.fields)];return a.createElement("div",null,a.createElement(pe.C,null,a.createElement(te.I,{label:"Field",labelWidth:10,grow:!0},a.createElement(cs.Gy,null,Pt.map(Ht=>a.createElement(ie.$n,{key:Ht,icon:"times",variant:"secondary",size:"md",onClick:()=>vt(Ht)},Ht)),Ie.length&&a.createElement(Bo.i,{variant:"secondary",size:"md",options:Ie,onChange:Fe,label:"Select field",icon:"plus"})))),a.createElement(pe.C,null,a.createElement(te.I,{tooltip:"Sets how the names of the selected fields are displayed. As frame name is usually better for tabular data",label:"Naming",labelWidth:10},a.createElement(re.z,{options:et,value:z.naming?.asLabels===void 0||z.naming.asLabels?0:1,onChange:Ht=>X({...z,naming:{...z.naming,asLabels:Ht===0}})}))),a.createElement(pe.C,null,a.createElement(te.I,{tooltip:"Keeps the partition fields in the frames.",label:"Keep fields",labelWidth:16},a.createElement(re.z,{options:mt,value:z.keepFields,onChange:Ht=>X({...z,keepFields:Ht})}))))}const Qn={id:Z.F.partitionByValues,editor:na,transformation:yn,name:yn.name,description:yn.description,state:We.pn.alpha,categories:new Set([P.m.Reformat]),help:ve(Z.F.partitionByValues).helperDocs};var Jn=e(41260),ba=e(37471),ha=e(73060),Aa=(w=>(w.TimeSeriesWide="wide",w.TimeSeriesLong="long",w.TimeSeriesMulti="multi",w.TimeSeriesMany="many",w))(Aa||{});function ma(w){if(!Array.isArray(w)||w.length===0)return w;const z=[];for(const X of Ua(w)){const ce=X.fields[0];if(!ce||ce.type!==k.PU.time)continue;const Ce=[],Ie=[];for(const Fe of X.fields)switch(Fe.type){case k.PU.number:case k.PU.boolean:Ce.push(Fe);break;case k.PU.string:Ie.push(Fe);break}for(const Fe of Ce)if(Ie.length){const Je=new Map;for(let et=0;et<X.length;et++){const mt=ce.values[et],vt=Fe.values[et];if(vt===void 0||mt==null)continue;const Pt=Ie.map(Ut=>Ut.values[et]).join("/");let Ht=Je.get(Pt);if(!Ht){Ht={key:Pt,time:[],value:[],labels:{}};for(const Ut of Ie)Ht.labels[Ut.name]=Ut.values[et];Je.set(Pt,Ht)}Ht.time.push(mt),Ht.value.push(vt)}for(const et of Je.values())z.push({name:X.name,refId:X.refId,meta:{...X.meta,type:Jn.m.TimeSeriesMulti},fields:[{...ce,values:et.time},{...Fe,values:et.value,labels:et.labels}],length:et.time.length})}else z.push({name:X.name,refId:X.refId,meta:{...X.meta,type:Jn.m.TimeSeriesMulti},fields:[ce,Fe],length:X.length})}return z}function Ua(w){if(!Array.isArray(w)||w.length===0)return w;const z=[];for(const X of w){let ce;const Ce=[],Ie={},Fe={},Je={},et={};for(let At=0;At<X.fields.length;At++){const zt=X.fields[At];switch(zt.type){case k.PU.string:case k.PU.boolean:zt.name in et||(et[zt.name]=At,Fe[zt.name]=!0);break;case k.PU.time:if(!ce){ce=zt;break}default:if(zt.name in Ie){const Va=Ie[zt.name];if(zt.type!==Va)continue}else Ie[zt.name]=zt.type,Ce.push(zt.name);const Pn=JSON.stringify(zt.labels),Ta=Je[Pn];if(Ta!==void 0?Ta.push(At):Je[Pn]=[At],zt.labels!=null)for(const Va in zt.labels)Fe[Va]=!0}}if(!ce)continue;const mt=[],vt=[],Pt=[],Ht=[];for(let At=0;At<X.length;At++)mt.push({time:ce.values[At],wideRowIndex:At});for(const At in Je)vt.push(At);for(const At in Fe)Pt.push(At);for(const At in et)Ht.push(At);mt.sort((At,zt)=>At.time-zt.time),vt.sort(),Pt.sort(),Ce.sort();const Ut=new ba.k({...X,meta:{...X.meta,type:Jn.m.TimeSeriesLong},fields:[{name:ce.name,type:ce.type}]});for(const At of Ce)Ut.addField({name:At,type:Ie[At]});for(const At of Pt)Ut.addField({name:At,type:k.PU.string});for(const At of mt){const{time:zt,wideRowIndex:Pn}=At;for(const Ta of vt){const Va={};for(const wa of Ht)Va[wa]=X.fields[et[wa]].values[Pn];let Fa=0;for(const wa of Je[Ta]){const $r=X.fields[wa];if(Fa++===0&&$r.labels!=null)for(const di in $r.labels)Va[di]=$r.labels[di];Va[$r.name]=$r.values[Pn]}Va[ce.name]=zt,Ut.add(Va)}}z.push(Ut)}return z}function Ja(w){return $n(w,X=>X.type===k.PU.string).map(X=>(X.meta||(X.meta={}),X.meta.type=Jn.m.TimeSeriesMulti,X))}const da={id:Z.F.prepareTimeSeries,name:"Prepare time series",description:"Will stretch data frames from the wide format into the long format. This is really helpful to be able to keep backwards compatibility for panels not supporting the new wide format.",defaultOptions:{},operator:(w,z)=>X=>X.pipe((0,An.T)(ce=>da.transformer(w,z)(ce))),transformer:w=>{const z=w?.format??"wide";if(z==="many"||z==="multi")return ma;if(z==="long")return Ua;const X=Q.sJ.get(ee.Ct.firstTimeField).get({});return ce=>{if(!ce.length)return[];const Ce=[];for(const Fe of ce)Fe.meta?.type===Jn.m.TimeSeriesLong?Ja(Fe).forEach(Je=>Ce.push(Je)):Ce.push(Fe);const Ie=(0,ha.Fd)({frames:Ce,joinBy:X,keepOriginIndices:!0});return Ie?(Ie.meta||(Ie.meta={}),Ie.meta.type=Jn.m.TimeSeriesWide,[Ie]):[]}}},Za={label:"Wide time series",value:Aa.TimeSeriesWide,description:"Creates a single frame joined by time",info:a.createElement("ul",null,a.createElement("li",null,"Single frame"),a.createElement("li",null,"1st field is shared time field"),a.createElement("li",null,"Time in ascending order"),a.createElement("li",null,"Multiple value fields of any type"))},es={label:"Multi-frame time series",value:Aa.TimeSeriesMulti,description:"Creates a new frame for each time/number pair",info:a.createElement("ul",null,a.createElement("li",null,"Multiple frames"),a.createElement("li",null,"Each frame has two fields: time, value"),a.createElement("li",null,"Time in ascending order"),a.createElement("li",null,"String values are represented as labels"),a.createElement("li",null,"All values are numeric"))},Os={label:"Long time series",value:Aa.TimeSeriesLong,description:"Convert each frame to long format",info:a.createElement("ul",null,a.createElement("li",null,"Single frame"),a.createElement("li",null,"1st field is time field"),a.createElement("li",null,"Time in ascending order, but may have duplictes"),a.createElement("li",null,"String values are represented as separate fields rather than as labels"),a.createElement("li",null,"Multiple value fields may exist"))},Rs=[Za,es,Os];function Xs(w){const{options:z,onChange:X}=w,ce=(0,St.of)(Ds),Ce=(0,a.useCallback)(Ie=>{X({...z,format:Ie.value})},[X,z]);return a.createElement(a.Fragment,null,a.createElement(pe.C,null,a.createElement(te.I,{label:"Format",labelWidth:12},a.createElement(le.l6,{width:35,options:Rs,value:Rs.find(Ie=>Ie.value===Aa.TimeSeriesMulti&&z.format===Aa.TimeSeriesMany?!0:Ie.value===z.format)||Rs[0],onChange:Ce,className:"flex-grow-1"}))),a.createElement(pe.C,null,a.createElement(te.I,{label:"Info",labelWidth:12},a.createElement("div",{className:ce.info},(Rs.find(Ie=>Ie.value===z.format)||Rs[0]).info))))}const Ds=w=>({info:(0,rt.css)`
    margin-left: 20px;
  `}),Br={id:da.id,editor:Xs,transformation:da,name:da.name,description:da.description,categories:new Set([P.m.Reformat]),help:ve(da.id).helperDocs};var mr=e(66648),Zs=e(48817),sr=(w=>(w.linear="linear",w.polynomial="polynomial",w))(sr||{});const Ur={predictionCount:100,modelType:"linear",degree:2},Cr={id:Z.F.regression,name:"Regression analysis",operator:(w,z)=>X=>X.pipe((0,An.T)(ce=>Cr.transformer(w,z)(ce))),transformer:(w,z)=>X=>{const{predictionCount:ce,modelType:Ce,degree:Ie}={...Ur,...w};if(X.length===0)return X;const Fe=Q.sJ.get(ee.Ct.byName).get(w.yFieldName),Je=Q.sJ.get(ee.Ct.byName).get(w.xFieldName);let et,mt,vt;for(const wa of X){const $r=wa.fields.find(di=>Fe(di,wa,X));if($r){mt=$r;const di=wa.fields.find(dh=>Je(dh,wa,X));if(di){et=di,vt=wa;break}else throw"X and Y fields must be part of the same frame"}}if(!et||!mt)return X;let Pt=et.values[0],Ht=et.values[0];for(let wa=1;wa<et.values.length;wa++)et.values[wa]<Pt&&(Pt=et.values[wa]),et.values[wa]>Ht&&(Ht=et.values[wa]);const Ut=(Ht-Pt)/(ce-1),At=[...[...Array(ce-1).keys()].map((wa,$r)=>$r*Ut+Pt),Ht],zt=et.type===k.PU.time?Pt:0,Pn=[],Ta=[];for(let wa=0;wa<et.values.length;wa++)mt.values[wa]!==null&&!isNaN(mt.values[wa])&&(Ta.push(et.values[wa]-zt),Pn.push(mt.values[wa]));let Va;switch(Ce){case"linear":Va=new Zs.X(Ta,Pn);break;case"polynomial":Va=new mr.Y(Ta,Pn,Ie);break;default:return X}const Fa={name:`${Ce} regression`,length:At.length,fields:[{name:et.name,type:et.type,values:At,config:{}},{name:`${(0,ae.Ct)(mt,vt,X)} predicted`,type:mt.type,values:At.map(wa=>Va.predict(wa-zt)),config:{}}]};return[...X,Fa]}},Gr={editor:yr.O,id:"",name:"",settings:{width:24,isClearable:!1}},as=20,qn=({input:w,options:z,onChange:X})=>{const ce=[{label:"Linear",value:sr.linear},{label:"Polynomial",value:sr.polynomial}];return(0,a.useEffect)(()=>{let Ce,Ie;if(!z.xFieldName){const Fe=Q.sJ.get(ee.Ct.firstTimeField).get({});for(const Je of w)if(Ce=Je.fields.find(et=>Fe(et,Je,w)),Ce)break;if(!Ce){const Je=Q.sJ.get(ee.Ct.numeric).get({});for(const et of w)if(Ce=et.fields.find(mt=>Je(mt,et,w)),Ce)break}}if(!z.yFieldName){const Fe=Q.sJ.get(ee.Ct.numeric).get({});for(const Je of w)if(Ie=Je.fields.find(et=>Fe(et,Je,w)&&et!==Ce),Ie)break}Ce&&Ie&&X({...z,xFieldName:Ce.name,yFieldName:Ie.name})}),a.createElement(a.Fragment,null,a.createElement(te.I,{labelWidth:as,label:"X field"},a.createElement(yr.O,{context:{data:w},value:z.xFieldName??"",item:Gr,onChange:Ce=>{X({...z,xFieldName:Ce})}})),a.createElement(te.I,{labelWidth:as,label:"Y field"},a.createElement(yr.O,{context:{data:w},value:z.yFieldName??"",item:Gr,onChange:Ce=>{X({...z,yFieldName:Ce})}})),a.createElement(te.I,{labelWidth:as,label:"Model type"},a.createElement(le.l6,{value:z.modelType??Ur.modelType,onChange:Ce=>{X({...z,modelType:Ce.value??Ur.modelType})},options:ce})),a.createElement(te.I,{labelWidth:as,label:"Predicted points",tooltip:"Number of X,Y points to predict"},a.createElement(or.Q,{value:z.predictionCount??Ur.predictionCount,onChange:Ce=>{X({...z,predictionCount:Ce})}})),z.modelType===sr.polynomial&&a.createElement(te.I,{labelWidth:as,label:"Degree"},a.createElement(le.l6,{value:z.degree??Ur.degree,options:[{label:"Quadratic",value:2},{label:"Cubic",value:3},{label:"Quartic",value:4},{label:"Quintic",value:5}],onChange:Ce=>{X({...z,degree:Ce.value})}})))},pa={id:Z.F.regression,editor:qn,transformation:Cr,name:Cr.name,description:Cr.description,categories:new Set([P.m.CalculateNewFields]),help:ve(Z.F.regression).helperDocs},Wa={id:Z.F.rowsToFields,name:"Rows to fields",description:"Convert each row into a field with dynamic config.",defaultOptions:{},operator:w=>z=>z.pipe((0,An.T)(X=>X.map(ce=>os(w,ce))))};function os(w,z){const X=gn(z,w.mappings??[],!0),{nameField:ce,valueField:Ce}=X;if(!ce||!Ce)return z;const Ie=[];for(let Fe=0;Fe<ce.values.length;Fe++){const Je=ce.values[Fe],et=Ce.values[Fe],mt=en(z,Fe,X),vt=Nr(z,Fe,X),Pt={name:`${Je}`,type:Ce.type,values:[et],config:mt,labels:vt};Ie.push(Pt)}return{fields:Ie,length:1}}function Nr(w,z,X){const ce={...X.nameField.labels};for(let Ce=0;Ce<w.fields.length;Ce++){const Ie=w.fields[Ce],Fe=(0,ae.Ct)(Ie,w),Je=X.index[Fe];if(Je.handler&&Je.handler.key!==mn.Label)continue;const et=Ie.values[z];et!=null&&(ce[Fe]=et)}return ce}function js({input:w,options:z,onChange:X}){return w.length===0?null:a.createElement("div",null,a.createElement(xn,{frame:w[0],mappings:z.mappings??[],onChange:ce=>X({...z,mappings:ce}),withNameAndValue:!0}))}const vr={id:Wa.id,editor:js,transformation:Wa,name:Wa.name,description:Wa.description,state:We.pn.beta,categories:new Set([P.m.Reformat]),help:ve(Wa.id).helperDocs};var ls=e(52622),ho=e(61983),$s=e(9581),zi=e(96606),wo=e(31484),gs=e(78134);const br={id:Z.F.spatial,name:"Spatial operations",description:"Apply spatial operations to query results.",defaultOptions:{},operator:w=>z=>z.pipe((0,pi.Z)(X=>(0,po.H)(Mo(X,w))))};function To(w){return w.action===$s.dy.Modify&&w.modify?.op===$s.YD.LineBuilder}async function Mo(w,z){const X=await(0,wo.nE)(z.source);if(To(z)){const ce=await(0,wo.nE)(z.modify?.target);return w.map(Ce=>{const Ie=(0,wo.FM)(Ce,X),Fe=(0,wo.FM)(Ce,ce);if(Ie.field&&Fe.field){const Je=[...Ce.fields],et=(0,zi.XR)(Ie.field,Fe.field),mt=Je[0];return mt.type===k.PU.geo&&mt!==Ie.field&&mt!==Fe.field?Je[0]=(0,zi.RA)(mt,et):Je.unshift(et),{...Ce,fields:Je}}return Ce})}return w.map(ce=>{let Ce=(0,wo.FM)(ce,X);if(Ce.field){if(z.action===$s.dy.Modify){switch(z.modify?.op){case $s.YD.AsLine:let Fe=Ce.field.name;return(!Fe||Fe==="Point")&&(Fe="Line"),{...ce,length:1,fields:[{...Ce.field,name:Fe,type:k.PU.geo,values:[(0,gs.tt)(Ce.field)]}]}}return ce}const Ie=Ce.derived?[Ce.field,...ce.fields]:ce.fields.slice(0);if(z.action===$s.dy.Calculate&&(Ie.push((0,gs.pp)(Ce.field,z.calculate??{})),Ce.derived=!0),Ce.derived)return{...ce,fields:Ie}}return ce})}const ri=(w,z)=>{const X=z.options??{};w.addSelect({path:"action",name:"Action",description:"",defaultValue:$s.dy.Prepare,settings:{options:[{value:$s.dy.Prepare,label:"Prepare spatial field",description:"Set a geometry field based on the results of other fields"},{value:$s.dy.Calculate,label:"Calculate value",description:"Use the geometry to define a new field (heading/distance/area)"},{value:$s.dy.Modify,label:"Transform",description:"Apply spatial operations to the geometry"}]}}),X.action===$s.dy.Calculate?w.addSelect({path:"calculate.calc",name:"Function",description:"",defaultValue:$s.kD.Heading,settings:{options:[{value:$s.kD.Heading,label:"Heading"},{value:$s.kD.Area,label:"Area"},{value:$s.kD.Distance,label:"Distance"}]}}):X.action===$s.dy.Modify&&w.addSelect({path:"modify.op",name:"Operation",description:"",defaultValue:$s.YD.AsLine,settings:{options:[{value:$s.YD.AsLine,label:"As line",description:"Create a single line feature with a vertex at each row"},{value:$s.YD.LineBuilder,label:"Line builder",description:"Create a line between two points"}]}}),To(X)?(w.addNestedOptions({category:["Source"],path:"source",build:(ce,Ce)=>{const Ie=X.source??{mode:ls.aG.Auto};(0,ho.G)("Point","",ce,Ie)}}),w.addNestedOptions({category:["Target"],path:"modify",build:(ce,Ce)=>{const Ie=X.modify?.target??{mode:ls.aG.Auto};(0,ho.G)("Point","target.",ce,Ie)}})):(0,ho.G)("Location","source.",w,X.source)},vc=w=>{(0,a.useEffect)(()=>{if(!w.options.source?.mode){const ce=gt(ri);w.onChange({...ce,...w.options}),console.log("geometry useEffect",ce)}},[]);const z=Ec((0,St.$j)()),X=ft(w,ri);return a.createElement("div",null,a.createElement("div",null,X.items.map(ce=>ce.render())),a.createElement("div",null,X.categories.map(ce=>a.createElement("div",{key:ce.props.id,className:z.wrap},a.createElement("h5",null,ce.props.title),a.createElement("div",{className:z.item},ce.items.map(Ce=>Ce.render()))))))},Ec=w=>({wrap:(0,rt.css)`
      margin-bottom: 20px;
    `,item:(0,rt.css)`
      border-left: 4px solid ${w.colors.border.strong};
      padding-left: 10px;
    `}),$l={id:Z.F.spatial,editor:vc,transformation:br,name:br.name,description:br.description,state:We.pn.alpha,categories:new Set([P.m.PerformSpatialOperations]),help:ve(Z.F.spatial).helperDocs};var Ei=e(19845);const yi={id:Z.F.timeSeriesTable,name:"Time series to table",description:"Convert time series data to table rows so that they can be viewed in tabular or sparkline format.",defaultOptions:{},isApplicable:w=>{for(const z of w)if((0,Ei.aH)(z))return Us.M.Applicable;return Us.M.NotApplicable},isApplicableDescription:"The Time series to table transformation requires at least one time series frame to function. You currently have none.",operator:w=>z=>z.pipe((0,An.T)(X=>Vl(w,X)))};function Vl(w,z){const X={},ce={},Ce=[];let Ie=zl(z);for(const Fe of Object.keys(Ie)){const Je=z.filter(mt=>mt.refId===Fe);X[Fe]={},ce[Fe]={};const et=[];Je.forEach(mt=>{mt.fields.forEach(vt=>{vt.type===k.PU.number&&vt.labels&&Object.keys(vt.labels).forEach(Pt=>{et.includes(Pt)||(ce[Fe][Pt]=_l(Pt,k.PU.string),et.push(Pt))})})});for(let mt=0;mt<Je.length;mt++){const vt=Je[mt];let Pt=null,Ht=w[Fe]?.timeField;if(Ht&&Ht.length>0?Pt=vt.fields.find(Ut=>Ut.name===Ht):Pt=vt.fields.find(Ut=>(0,Ei.hF)(Ut)),!(0,Ei.aH)(vt)){Ce.push(vt);continue}for(const Ut of vt.fields){if(Ut.type!==k.PU.number)continue;const At=w[Fe]?.stat??ct.gy.lastNotNull,zt=(0,ct.Nw)({field:Ut,reducers:[At]})[At]??null,Pn=new ba.k;Pt!==void 0&&(Pn.addField(Pt),Pn.addField(Ut),X[Fe][`Trend #${Fe}`]===void 0&&(X[Fe][`Trend #${Fe}`]=_l(`Trend #${Fe}`,k.PU.frame)),X[Fe][`Trend #${Fe}`].values.push({...Pn,value:zt,length:Ut.values.length})),et.forEach(Ta=>{ce[Fe][Ta].values.push(Ut.labels?.[Ta]??"")})}}}for(const Fe of Object.keys(Ie)){const Je={},et=new ba.k;et.refId=Fe;const mt=ce[Fe];if(mt!==void 0)for(const[Pt,Ht]of Object.entries(mt))Je[Pt]===void 0&&(Je[Pt]=Ht);for(const Pt of Object.values(Je))et.addField(Pt);const vt=X[Fe];for(const Pt of Object.values(vt))et.addField(Pt);et.fields.length>0&&Ce.push(et)}return Ce}function _l(w,z){return{name:w,type:z,config:{},values:[]}}function zl(w){let z={};for(const X of w)X.refId!==void 0&&(z[X.refId]===void 0?z[X.refId]=1:z[X.refId]++);return z}function yc({input:w,options:z,onChange:X}){const ce=zl(w),Ce=(0,a.useCallback)((Je,et)=>{const mt=et?.value!==void 0?et.value:"";X({...z,[Je]:{...z[Je],timeField:mt}})},[X,z]),Ie=(0,a.useCallback)((Je,et)=>{const mt=et[0];mt&&(0,ct.Em)(mt)&&X({...z,[Je]:{...z[Je],stat:mt}})},[X,z]);let Fe=[];for(const Je of Object.keys(ce)){const et={},mt=[];for(const vt of w)if(vt.refId===Je)for(const Pt of vt.fields)(0,Ei.hF)(Pt)&&(et[Pt.name]=Pt);for(const vt of Object.values(et)){const{name:Pt}=vt;mt.push({label:Pt,value:Pt})}Fe.push(a.createElement(pe.C,{key:Je},a.createElement(te.I,null,a.createElement(bs.c,null,`Trend #${Je}`)),a.createElement(te.I,{label:"Time field",tooltip:"The time field that will be used for the time series. If not selected the first found will be used."},a.createElement(le.l6,{onChange:Ce.bind(null,Je),options:mt,value:z[Je]?.timeField,isClearable:!0})),a.createElement(te.I,{label:"Stat",tooltip:"The statistic that should be calculated for this time series."},a.createElement(Ct.S,{stats:[z[Je]?.stat??ct.gy.lastNotNull],onChange:Ie.bind(null,Je),filterOptions:vt=>vt.id!==ct.gy.allValues&&vt.id!==ct.gy.uniqueValues}))))}return a.createElement(a.Fragment,null,Fe)}const bl={id:yi.id,editor:yc,transformation:yi,name:yi.name,description:yi.description,state:We.pn.beta,help:ve(yi.id).helperDocs},Dc=()=>[hl,Ho,vl,_r,_e,Po,jo,Lo,Js,Ws,Zo,Ga,Rr,tl,zr,vr,Xn,Br,Zn,$l,tt,Lr,_t,Hs,el,Dl,Qn,...j.$.featureToggles.formatString?[fo]:[],...j.$.featureToggles.regressionTransformation?[pa]:[],...j.$.featureToggles.groupToNestedTableTransformation?[xs]:[],Ft,bl];function Pc(){return new Promise(w=>require(["vs/language/kusto/monaco.contribution"],()=>w()))}function Tl(){return[{id:"kusto",name:"kusto",init:Pc}]}var dr=e(1503),ro=e(69733),ds=e(24180),ki=e(24160),Ys=e(14110),rl=e(66602),Ml=e(71678),oi=e(93218),Yo=e(17464),Tr=e(39070),Di=e(19361),Ka=e(44836),Cc=e(53153),Sl=e(87570),bc=e(4691),xl=e(20851),Tc=e(58649);const Mc=()=>{const w=!!_.Ay.oauth;return{saml:{bgColor:"#464646",enabled:_.Ay.samlEnabled,name:_.Ay.samlName||Tc.En,icon:"key-skeleton-alt"},google:{bgColor:"#e84d3c",enabled:w&&!!_.Ay.oauth.google,name:_.Ay.oauth?.google?.name||"Google",icon:_.Ay.oauth?.google?.icon||"google"},azuread:{bgColor:"#2f2f2f",enabled:w&&!!_.Ay.oauth.azuread,name:_.Ay.oauth?.azuread?.name||"Microsoft",icon:_.Ay.oauth?.azuread?.icon||"microsoft"},github:{bgColor:"#464646",enabled:w&&!!_.Ay.oauth.github,name:_.Ay.oauth?.github?.name||"GitHub",icon:_.Ay.oauth?.github?.icon||"github"},gitlab:{bgColor:"#fc6d26",enabled:w&&!!_.Ay.oauth.gitlab,name:_.Ay.oauth?.gitlab?.name||"GitLab",icon:_.Ay.oauth?.gitlab?.icon||"gitlab"},grafanacom:{bgColor:"#262628",enabled:w&&!!_.Ay.oauth.grafana_com,name:_.Ay.oauth?.grafana_com?.name||"Grafana.com",icon:_.Ay.oauth?.grafana_com?.icon||"grafana",hrefName:"grafana_com"},okta:{bgColor:"#2f2f2f",enabled:w&&!!_.Ay.oauth.okta,name:_.Ay.oauth?.okta?.name||"Okta",icon:_.Ay.oauth?.okta?.icon||"okta"},oauth:{bgColor:"#262628",enabled:w&&!!_.Ay.oauth.generic_oauth,name:_.Ay.oauth?.generic_oauth?.name||"OAuth",icon:_.Ay.oauth?.generic_oauth?.icon||"signin",hrefName:"generic_oauth"}}},kl=w=>({button:(0,rt.css)({color:"#d8d9da",position:"relative"}),buttonIcon:(0,rt.css)({position:"absolute",left:w.spacing(1),top:"50%",transform:"translateY(-50%)"}),divider:{base:(0,rt.css)({color:w.colors.text.primary,display:"flex",marginBottom:w.spacing(1),justifyContent:"space-between",textAlign:"center",width:"100%"}),line:(0,rt.css)({width:100,height:10,borderBottom:`1px solid ${w.colors.text}`})}}),Pi=()=>{const w=(0,St.of)(kl);return a.createElement(a.Fragment,null,a.createElement("div",{className:w.divider.base},a.createElement("div",null,a.createElement("div",{className:w.divider.line})),a.createElement("div",null,a.createElement("span",null,!_.Ay.disableLoginForm&&a.createElement("span",null,"or"))),a.createElement("div",null,a.createElement("div",{className:w.divider.line}))),a.createElement("div",{className:"clearfix"}))};function Sc(w,z,X){return(0,rt.cx)(z.button,(0,rt.css)({backgroundColor:w.bgColor,color:X.colors.getContrastText(w.bgColor),["&:hover"]:{backgroundColor:X.colors.emphasize(w.bgColor,.15),boxShadow:X.shadows.z1}}))}const Hl=()=>{const w=(0,p.pickBy)(Mc(),Ce=>Ce.enabled),z=Object.keys(w).length>0,X=(0,St.$j)(),ce=(0,St.of)(kl);return z?a.createElement(cs.gW,null,a.createElement(Pi,null),Object.entries(w).map(([Ce,Ie])=>{const Fe=Ie.name;return a.createElement(ie.z9,{key:Ce,className:Sc(Ie,ce,X),href:`login/${Ie.hrefName?Ie.hrefName:Ce}`,target:"_self",fullWidth:!0},a.createElement(us.I,{className:ce.buttonIcon,name:Ie.icon}),a.createElement(Ka.x6,{i18nKey:"login.services.sing-in-with-prefix"},"Sign in with ",{serviceName:Fe}))})):null},Ol=()=>{const w=(0,_.zj)().verifyEmailEnabled?`${(0,_.zj)().appSubUrl}/verify`:`${(0,_.zj)().appSubUrl}/signup`,z=(0,rt.css)({paddingTop:"16px"});return a.createElement(cs.gW,null,a.createElement("div",{className:z},a.createElement(Ka.x6,{i18nKey:"login.signup.new-to-question"},"New to Grafana?")),a.createElement(ie.z9,{className:(0,rt.css)({width:"100%",justifyContent:"center"}),href:w,variant:"secondary",fill:"outline"},a.createElement(Ka.x6,{i18nKey:"login.signup.button-label"},"Sign up")))},Fo=()=>{const w=(0,St.of)(Ci);return document.title=Di.M.AppTitle,a.createElement(Sl.A,null,({loginHint:z,passwordHint:X,disableLoginForm:ce,disableUserSignUp:Ce,login:Ie,isLoggingIn:Fe,changePassword:Je,skipPasswordChange:et,isChangingPassword:mt,showDefaultPasswordWarning:vt,loginErrorMessage:Pt})=>a.createElement(xl.GU,{isChangingPassword:mt},!mt&&a.createElement(xl.qm,null,Pt&&a.createElement(En.F,{className:w.alert,severity:"error",title:(0,Ka.t)("login.error.title","Login failed")},Pt),!ce&&a.createElement(bc.Q,{onSubmit:Ie,loginHint:z,passwordHint:X,isLoggingIn:Fe},a.createElement(cs.Gy,{justify:"flex-end"},!j.$.auth.disableLogin&&a.createElement(ie.z9,{className:w.forgottenPassword,fill:"text",href:`${j.$.appSubUrl}/user/password/send-reset-email`},a.createElement(Ka.x6,{i18nKey:"login.forgot-password"},"Forgot your password?")))),a.createElement(Hl,null),!Ce&&a.createElement(Ol,null)),mt&&a.createElement(xl.qm,null,a.createElement(Cc.S,{showDefaultPasswordWarning:vt,onSubmit:Je,onSkip:()=>et()}))))},Ci=w=>({forgottenPassword:(0,rt.css)({padding:0,marginTop:w.spacing(.5)}),alert:(0,rt.css)({width:"100%"})});var wr=e(36830),Gl=e(25249),vo=e(10860);function Hi({description:w,text:z,url:X}){const ce=(0,St.of)(xc);return a.createElement(vo.Z,{className:ce.card,href:X},a.createElement(vo.Z.Heading,null,z),a.createElement(vo.Z.Description,{className:ce.description},w))}const xc=w=>({card:(0,rt.css)({marginBottom:0,gridTemplateRows:"1fr 0 2fr"}),description:(0,rt.css)({WebkitLineClamp:3,WebkitBoxOrient:"vertical",display:"-webkit-box",overflow:"hidden"})});function Se({navId:w,header:z}){const{node:X}=(0,Gl.C)(w),ce=(0,St.of)(Ae),Ce=X.children?.filter(Ie=>!Ie.hideFromTabs);return a.createElement(wr.Y,{navId:X.id},a.createElement(wr.Y.Contents,null,a.createElement("div",{className:ce.content},z,Ce&&Ce.length>0&&a.createElement("section",{className:ce.grid},Ce?.map(Ie=>a.createElement(Hi,{key:Ie.id,description:Ie.subTitle,text:Ie.text,url:Ie.url??""}))))))}const Ae=w=>({content:(0,rt.css)({display:"flex",flexDirection:"column",gap:w.spacing(2)}),grid:(0,rt.css)({display:"grid",gap:w.spacing(3),gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gridAutoRows:"138px",padding:w.spacing(2,0)})});var Ye=e(64388),dt=e(7392);function bt(){return a.createElement(wr.Y,{navId:"home",layout:Ye.k.Canvas,pageNav:{text:"Page not found"}},a.createElement(dt.L,{entity:"Page"}))}var Rt=e(16233),kt=e(33378),Jt=e(10096),$t=e(80348),an=e(72724);const Ln="dddd YYYY-MM-DD HH:mm zz",ra="/admin/authentication/ldap";class ya extends a.PureComponent{constructor(){super(...arguments),this.onUserSync=()=>{this.props.onUserSync()}}render(){const{ldapSyncInfo:z,user:X}=this.props,Ce=z&&z.nextSync?(0,an.LE)(z.nextSync,{format:Ln}):"",Ie=`${ra}?user=${X&&X.login}`,Fe=Jt.TP.hasPermission($t.AccessControlAction.LDAPUsersRead),Je=Jt.TP.hasPermission($t.AccessControlAction.LDAPUsersSync);return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"LDAP Synchronisation"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,"External sync"),a.createElement("td",null,"User synced via LDAP. Some changes must be done in LDAP or mappings."),a.createElement("td",null,a.createElement("span",{className:"label label-tag"},"LDAP"))),a.createElement("tr",null,z.enabled?a.createElement(a.Fragment,null,a.createElement("td",null,"Next scheduled synchronization"),a.createElement("td",{colSpan:2},Ce)):a.createElement(a.Fragment,null,a.createElement("td",null,"Next scheduled synchronization"),a.createElement("td",{colSpan:2},"Not enabled")))))),a.createElement("div",{className:"gf-form-button-row"},Je&&a.createElement(ie.$n,{variant:"secondary",onClick:this.onUserSync},"Sync user"),Fe&&a.createElement(ie.z9,{variant:"secondary",href:Ie},"Debug LDAP Mapping"))))}}var Hn=e(3911),Da=e(82702),ja=e(37390),Ls=e(56034),jr=e(89062),qs=e(85927),So=e(41053);function Na({onSelected:w,className:z,inputId:X,autoFocus:ce,excludeOrgs:Ce}){(0,a.useEffect)(()=>{ce&&X&&document.getElementById(X)?.focus()},[ce,X]);const[Ie,Fe]=(0,So.A)(async()=>{const et=(await(0,M.AI)().get("/api/orgs")).map(mt=>({value:{id:mt.id,name:mt.name},label:mt.name}));if(Ce){let mt=Ce.map(Pt=>Pt.orgId);return et.filter(Pt=>!mt.includes(Pt.value.id))}else return et});return a.createElement(le.DW,{inputId:X,className:z,isLoading:Ie.loading,defaultOptions:!0,isSearchable:!1,loadOptions:Fe,onChange:w,placeholder:"Select organization",noOptionsMessage:"No organizations found"})}var Ns=e(5133);class Gs extends a.PureComponent{constructor(){super(...arguments),this.addToOrgButtonRef=a.createRef(),this.state={showAddOrgModal:!1},this.showOrgAddModal=()=>{this.setState({showAddOrgModal:!0})},this.dismissOrgAddModal=()=>{this.setState({showAddOrgModal:!1},()=>{this.addToOrgButtonRef.current?.focus()})}}render(){const{user:z,orgs:X,isExternalUser:ce,onOrgRoleChange:Ce,onOrgRemove:Ie,onOrgAdd:Fe}=this.props,{showAddOrgModal:Je}=this.state,et=Jt.TP.hasPermission($t.AccessControlAction.OrgUsersAdd)&&!ce;return a.createElement("div",null,a.createElement("h3",{className:"page-heading"},"Organizations"),a.createElement(Zt.B,{gap:1.5,direction:"column"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,X.map((mt,vt)=>a.createElement(pm,{key:`${mt.orgId}-${vt}`,isExternalUser:ce,user:z,org:mt,onOrgRoleChange:Ce,onOrgRemove:Ie})))),a.createElement("div",null,et&&a.createElement(ie.$n,{variant:"secondary",onClick:this.showOrgAddModal,ref:this.addToOrgButtonRef},"Add user to organization")),a.createElement(gr,{user:z,userOrgs:X,isOpen:Je,onOrgAdd:Fe,onDismiss:this.dismissOrgAddModal})))}}const ol=(0,Hn.N)(w=>({removeButton:(0,rt.css)`
      margin-right: 0.6rem;
      text-decoration: underline;
      color: ${w.v1.palette.blue95};
    `,label:(0,rt.css)`
      font-weight: 500;
    `,disabledTooltip:(0,rt.css)`
      display: flex;
    `,tooltipItem:(0,rt.css)`
      margin-left: 5px;
    `,tooltipItemLink:(0,rt.css)`
      color: ${w.v1.palette.blue95};
    `,rolePickerWrapper:(0,rt.css)`
      display: flex;
    `,rolePicker:(0,rt.css)`
      flex: auto;
      margin-right: ${w.spacing(1)};
    `}));class gm extends a.PureComponent{constructor(){super(...arguments),this.state={currentRole:this.props.org.role,isChangingRole:!1,roleOptions:[]},this.onOrgRemove=async()=>{const{org:z}=this.props;this.props.onOrgRemove(z.orgId)},this.onChangeRoleClick=()=>{const{org:z}=this.props;this.setState({isChangingRole:!0,currentRole:z.role})},this.onOrgRoleChange=z=>{this.setState({currentRole:z})},this.onOrgRoleSave=()=>{this.props.onOrgRoleChange(this.props.org.orgId,this.state.currentRole)},this.onCancelClick=()=>{this.setState({isChangingRole:!1})},this.onBasicRoleChange=z=>{this.props.onOrgRoleChange(this.props.org.orgId,z)}}componentDidMount(){Jt.TP.licensedAccessControlEnabled()&&Jt.TP.hasPermission($t.AccessControlAction.ActionRolesList)&&(0,qs.RL)(this.props.org.orgId).then(z=>this.setState({roleOptions:z})).catch(z=>console.error(z))}render(){const{user:z,org:X,isExternalUser:ce,theme:Ce}=this.props,Ie=z?.authLabels?.length&&z?.authLabels[0],Fe=Ie?`Synced via ${Ie}`:"",{currentRole:Je,isChangingRole:et}=this.state,mt=ol(Ce),vt=(0,rt.cx)("width-16",mt.label),Pt=Jt.TP.hasPermission($t.AccessControlAction.OrgUsersWrite),Ht=Jt.TP.hasPermission($t.AccessControlAction.OrgUsersRemove)&&!ce,Ut=ce||!Pt,At=`${X.name}-input`;return a.createElement("tr",null,a.createElement("td",{className:vt},a.createElement("label",{htmlFor:At},X.name)),Jt.TP.licensedAccessControlEnabled()?a.createElement("td",null,a.createElement("div",{className:mt.rolePickerWrapper},a.createElement("div",{className:mt.rolePicker},a.createElement(jr.y,{userId:z?.id||0,orgId:X.orgId,basicRole:X.role,roleOptions:this.state.roleOptions,onBasicRoleChange:this.onBasicRoleChange,basicRoleDisabled:Ut,basicRoleDisabledMessage:`This user's role is not editable because it is synchronized from your auth provider.
                    Refer to the Grafana authentication docs for details.`})),ce&&a.createElement(Oc,{lockMessage:Fe}))):a.createElement(a.Fragment,null,et?a.createElement("td",null,a.createElement(Ns.r,{inputId:At,value:Je,onChange:this.onOrgRoleChange,autoFocus:!0})):a.createElement("td",{className:"width-25"},X.role),a.createElement("td",{colSpan:1},a.createElement("div",{className:"pull-right"},Pt&&a.createElement(vm,{lockMessage:Fe,isExternalUser:ce,onChangeRoleClick:this.onChangeRoleClick,onCancelClick:this.onCancelClick,onOrgRoleSave:this.onOrgRoleSave})))),a.createElement("td",{colSpan:1},a.createElement("div",{className:"pull-right"},Ht&&a.createElement(Da.Z,{confirmText:"Confirm removal",confirmVariant:"destructive",onCancel:this.onCancelClick,onConfirm:this.onOrgRemove,autoFocus:!0},"Remove from organization"))))}}const pm=(0,St.cV)(gm),fr=(0,Hn.N)(()=>({modal:(0,rt.css)`
    width: 500px;
  `,buttonRow:(0,rt.css)`
    text-align: center;
  `,modalContent:(0,rt.css)`
    overflow: visible;
  `}));class gr extends a.PureComponent{constructor(){super(...arguments),this.state={selectedOrg:null,role:$t.OrgRole.Viewer,roleOptions:[],pendingOrgId:null,pendingUserId:null,pendingRoles:[]},this.onOrgSelect=z=>{const X=this.props.userOrgs.find(ce=>ce.orgId===z.value?.id);this.setState({selectedOrg:z.value,role:X?.role||$t.OrgRole.Viewer}),Jt.TP.licensedAccessControlEnabled()&&Jt.TP.hasPermission($t.AccessControlAction.ActionRolesList)&&(0,qs.RL)(z.value?.id).then(ce=>this.setState({roleOptions:ce})).catch(ce=>console.error(ce))},this.onOrgRoleChange=z=>{this.setState({role:z})},this.onAddUserToOrg=async()=>{const{selectedOrg:z,role:X}=this.state;this.props.onOrgAdd(z.id,X),Jt.TP.licensedAccessControlEnabled()&&Jt.TP.hasPermission($t.AccessControlAction.ActionUserRolesAdd)&&this.state.pendingUserId&&(await(0,qs.eA)(this.state.pendingRoles,this.state.pendingUserId,this.state.pendingOrgId),this.setState({pendingOrgId:null,pendingRoles:[],pendingUserId:null}))},this.onCancel=()=>{this.setState({selectedOrg:null,pendingRoles:[],pendingOrgId:null,pendingUserId:null}),this.props.onDismiss&&this.props.onDismiss()},this.onRoleUpdate=async(z,X,ce)=>{this.setState({pendingRoles:z,pendingOrgId:ce,pendingUserId:X})}}render(){const{isOpen:z,user:X,userOrgs:ce}=this.props,{role:Ce,roleOptions:Ie,selectedOrg:Fe}=this.state,Je=fr();return a.createElement(ja.a,{className:Je.modal,contentClassName:Je.modalContent,title:"Add to an organization",isOpen:z,onDismiss:this.onCancel},a.createElement(Qa.D,{label:"Organization"},a.createElement(Na,{inputId:"new-org-input",onSelected:this.onOrgSelect,excludeOrgs:ce,autoFocus:!0})),a.createElement(Qa.D,{label:"Role",disabled:Fe===null},a.createElement(jr.y,{userId:X?.id||0,orgId:Fe?.id,basicRole:Ce,onBasicRoleChange:this.onOrgRoleChange,basicRoleDisabled:!1,roleOptions:Ie,apply:!0,onApplyRoles:this.onRoleUpdate,pendingRoles:this.state.pendingRoles})),a.createElement(ja.a.ButtonRow,null,a.createElement(cs.Gy,{spacing:"md",justify:"center"},a.createElement(ie.$n,{variant:"secondary",fill:"outline",onClick:this.onCancel},"Cancel"),a.createElement(ie.$n,{variant:"primary",disabled:Fe===null,onClick:this.onAddUserToOrg},"Add to organization"))))}}const hm=w=>({disabledTooltip:(0,rt.css)`
    display: flex;
  `,tooltipItemLink:(0,rt.css)`
    color: ${w.v1.palette.blue95};
  `,lockMessageClass:(0,rt.css)`
    font-style: italic;
    margin-left: 1.8rem;
    margin-right: 0.6rem;
  `,icon:(0,rt.css)`
    line-height: 2;
  `});function vm({lockMessage:w,onChangeRoleClick:z,isExternalUser:X,onOrgRoleSave:ce,onCancelClick:Ce}){const Ie=(0,St.of)(hm);return a.createElement("div",{className:Ie.disabledTooltip},X?a.createElement(a.Fragment,null,a.createElement("span",{className:Ie.lockMessageClass},w),a.createElement(Ls.m,{placement:"right-end",interactive:!0,content:a.createElement("div",null,"This user's role is not editable because it is synchronized from your auth provider. Refer to the\xA0",a.createElement("a",{className:Ie.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},a.createElement("div",{className:Ie.icon},a.createElement(us.I,{name:"question-circle"})))):a.createElement(Da.Z,{confirmText:"Save",onClick:z,onCancel:Ce,onConfirm:ce,disabled:X},"Change role"))}const Oc=({lockMessage:w})=>{const z=(0,St.of)(Em);return a.createElement("div",{className:z.disabledTooltip},a.createElement("span",{className:z.lockMessageClass},w),a.createElement(Ls.m,{placement:"right-end",interactive:!0,content:a.createElement("div",null,"This user's built-in role is not editable because it is synchronized from your auth provider. Refer to the\xA0",a.createElement("a",{className:z.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer noopener",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},a.createElement(us.I,{name:"question-circle"})))},Em=w=>({disabledTooltip:(0,rt.css)`
    display: flex;
  `,tooltipItemLink:(0,rt.css)`
    color: ${w.v1.palette.blue95};
  `,lockMessageClass:(0,rt.css)`
    font-style: italic;
    margin-left: 1.8rem;
    margin-right: 0.6rem;
  `}),ym=[{label:"Yes",value:!0},{label:"No",value:!1}];function Qo({isGrafanaAdmin:w,isExternalUser:z,lockMessage:X,onGrafanaAdminChange:ce}){const[Ce,Ie]=(0,a.useState)(!1),[Fe,Je]=(0,a.useState)(w),et=()=>Ie(!0),mt=()=>{Ie(!1),Je(w)},vt=()=>ce(Fe),Pt=Jt.TP.hasPermission($t.AccessControlAction.UsersPermissionsUpdate)&&!z,Ht=(0,St.of)(bd);return a.createElement("div",null,a.createElement("h3",{className:"page-heading"},"Permissions"),a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Grafana Admin"),Ce?a.createElement("td",{colSpan:2},a.createElement(re.z,{options:ym,value:Fe,onChange:Je,autoFocus:!0})):a.createElement("td",{colSpan:2},w?a.createElement(a.Fragment,null,a.createElement(us.I,{name:"shield"})," Yes"):a.createElement(a.Fragment,null,"No")),a.createElement("td",null,Pt&&a.createElement(Da.Z,{onClick:et,onConfirm:vt,onCancel:mt,confirmText:"Change"},"Change"),z&&a.createElement("div",{className:Ht.lockMessageClass},a.createElement(Oc,{lockMessage:X})))))))}const bd=w=>({lockMessageClass:(0,rt.css)`
    display: flex;
    justify-content: flex-end;
    font-style: italic;
    margin-right: ${w.spacing(.6)};
  `});var jl=e(96374),Il=e(91634);function Dm({user:w,onUserUpdate:z,onUserDelete:X,onUserDisable:ce,onUserEnable:Ce,onPasswordChange:Ie}){const[Fe,Je]=(0,a.useState)(!1),[et,mt]=(0,a.useState)(!1),vt=(0,a.useRef)(null),Pt=ui=>()=>{Je(ui),!ui&&vt.current&&vt.current.focus()},Ht=(0,a.useRef)(null),Ut=ui=>()=>{mt(ui),!ui&&Ht.current&&Ht.current.focus()},At=()=>X(w.id),zt=()=>ce(w.id),Pn=()=>Ce(w.id),Ta=ui=>{z({...w,name:ui})},Va=ui=>{z({...w,email:ui})},Fa=ui=>{z({...w,login:ui})},wa=w.authLabels?.length&&w.authLabels[0],$r=wa?`Synced via ${wa}`:"",di=w.isExternal||!Jt.TP.hasPermissionInMetadata($t.AccessControlAction.UsersWrite,w),dh=w.isExternal||!Jt.TP.hasPermissionInMetadata($t.AccessControlAction.UsersPasswordUpdate,w),pD=Jt.TP.hasPermissionInMetadata($t.AccessControlAction.UsersDelete,w),hD=Jt.TP.hasPermissionInMetadata($t.AccessControlAction.UsersDisable,w),vD=Jt.TP.hasPermissionInMetadata($t.AccessControlAction.UsersEnable,w);return a.createElement("div",null,a.createElement("h3",{className:"page-heading"},"User information"),a.createElement(Zt.B,{direction:"column",gap:1.5},a.createElement("div",null,a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement(Al,{label:"Name",value:w.name,locked:di,lockMessage:$r,onChange:Ta}),a.createElement(Al,{label:"Email",value:w.email,locked:di,lockMessage:$r,onChange:Va}),a.createElement(Al,{label:"Username",value:w.login,locked:di,lockMessage:$r,onChange:Fa}),a.createElement(Al,{label:"Password",value:"********",inputType:"password",locked:dh,lockMessage:$r,onChange:Ie})))),a.createElement(Zt.B,{gap:2},pD&&a.createElement(a.Fragment,null,a.createElement(ie.$n,{variant:"destructive",onClick:Pt(!0),ref:vt},"Delete user"),a.createElement(jl.u,{isOpen:Fe,title:"Delete user",body:"Are you sure you want to delete this user?",confirmText:"Delete user",onConfirm:At,onDismiss:Pt(!1)})),w.isDisabled&&vD&&a.createElement(ie.$n,{variant:"secondary",onClick:Pn},"Enable user"),!w.isDisabled&&hD&&a.createElement(a.Fragment,null,a.createElement(ie.$n,{variant:"secondary",onClick:Ut(!0),ref:Ht},"Disable user"),a.createElement(jl.u,{isOpen:et,title:"Disable user",body:"Are you sure you want to disable this user?",confirmText:"Disable user",onConfirm:zt,onDismiss:Ut(!1)})))))}class Al extends a.PureComponent{constructor(){super(...arguments),this.state={editing:!1,value:this.props.value||""},this.setInputElem=z=>{this.inputElem=z},this.onEditClick=()=>{this.props.inputType==="password"?this.setState({editing:!0,value:""},this.focusInput):this.setState({editing:!0},this.focusInput)},this.onCancelClick=()=>{this.setState({editing:!1,value:this.props.value||""})},this.onInputChange=(z,X)=>{X!==Il.O.Invalid&&this.setState({value:z.target.value})},this.onInputBlur=(z,X)=>{X!==Il.O.Invalid&&this.setState({value:z.target.value})},this.focusInput=()=>{this.inputElem&&this.inputElem.focus&&this.inputElem.focus()},this.onSave=()=>{this.props.onChange&&this.props.onChange(this.state.value)}}render(){const{label:z,locked:X,lockMessage:ce,inputType:Ce}=this.props,{value:Ie}=this.state,Fe=(0,rt.cx)("width-16",(0,rt.css)`
        font-weight: 500;
      `);if(X)return a.createElement(Pm,{label:z,value:Ie,lockMessage:ce});const Je=`${z}-input`;return a.createElement("tr",null,a.createElement("td",{className:Fe},a.createElement("label",{htmlFor:Je},z)),a.createElement("td",{className:"width-25",colSpan:2},this.state.editing?a.createElement(me.p,{id:Je,type:Ce,defaultValue:Ie,onBlur:this.onInputBlur,onChange:this.onInputChange,ref:this.setInputElem,width:30}):a.createElement("span",null,this.props.value)),a.createElement("td",null,a.createElement(Da.Z,{confirmText:"Save",onClick:this.onEditClick,onConfirm:this.onSave,onCancel:this.onCancelClick},"Edit")))}}Al.defaultProps={value:"",locked:!1,lockMessage:"",inputType:"text"};const Pm=({label:w,value:z,lockMessage:X})=>{const ce=(0,rt.css)`
    font-style: italic;
    margin-right: 0.6rem;
  `,Ce=(0,rt.cx)("width-16",(0,rt.css)`
      font-weight: 500;
    `);return a.createElement("tr",null,a.createElement("td",{className:Ce},w),a.createElement("td",{className:"width-25",colSpan:2},z),a.createElement("td",null,a.createElement("span",{className:ce},X)))};class Cm extends a.PureComponent{constructor(){super(...arguments),this.forceAllLogoutButton=a.createRef(),this.state={showLogoutModal:!1},this.showLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!0})},this.dismissLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!1},()=>{this.forceAllLogoutButton.current?.focus()})},this.onSessionRevoke=z=>()=>{this.props.onSessionRevoke(z)},this.onAllSessionsRevoke=()=>{this.setState({showLogoutModal:!1}),this.props.onAllSessionsRevoke()}}render(){const{sessions:z}=this.props,{showLogoutModal:X}=this.state,ce=Jt.TP.hasPermission($t.AccessControlAction.UsersLogout);return a.createElement("div",null,a.createElement("h3",{className:"page-heading"},"Sessions"),a.createElement(Zt.B,{direction:"column",gap:1.5},a.createElement("div",null,a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Last seen"),a.createElement("th",null,"Logged on"),a.createElement("th",null,"IP address"),a.createElement("th",{colSpan:2},"Browser and OS"))),a.createElement("tbody",null,z&&z.map((Ce,Ie)=>a.createElement("tr",{key:`${Ce.id}-${Ie}`},a.createElement("td",null,Ce.isActive?"Now":Ce.seenAt),a.createElement("td",null,(0,Ka.Xj)(Ce.createdAt,{dateStyle:"long"})),a.createElement("td",null,Ce.clientIp),a.createElement("td",null,`${Ce.browser} on ${Ce.os} ${Ce.osVersion}`),a.createElement("td",null,a.createElement("div",{className:"pull-right"},ce&&a.createElement(Da.Z,{confirmText:"Confirm logout",confirmVariant:"destructive",onConfirm:this.onSessionRevoke(Ce.id),autoFocus:!0},"Force logout")))))))),a.createElement("div",null,ce&&z.length>0&&a.createElement(ie.$n,{variant:"secondary",onClick:this.showLogoutConfirmationModal,ref:this.forceAllLogoutButton},"Force logout from all devices"),a.createElement(jl.u,{isOpen:X,title:"Force logout from all devices",body:"Are you sure you want to force logout from all devices?",confirmText:"Force logout",onConfirm:this.onAllSessionsRevoke,onDismiss:this.dismissLogoutConfirmationModal}))))}}const bm=Cm;var Mr=e(57334);class Sr extends a.PureComponent{constructor(){super(...arguments),this.onUserUpdate=z=>{this.props.updateUser(z)},this.onPasswordChange=z=>{const{user:X,setUserPassword:ce}=this.props;X&&ce(X.id,z)},this.onUserDelete=z=>{this.props.deleteUser(z)},this.onUserDisable=z=>{this.props.disableUser(z)},this.onUserEnable=z=>{this.props.enableUser(z)},this.onGrafanaAdminChange=z=>{const{user:X,updateUserPermissions:ce}=this.props;X&&ce(X.id,z)},this.onOrgRemove=z=>{const{user:X,deleteOrgUser:ce}=this.props;X&&ce(X.id,z)},this.onOrgRoleChange=(z,X)=>{const{user:ce,updateOrgUserRole:Ce}=this.props;ce&&Ce(ce.id,z,X)},this.onOrgAdd=(z,X)=>{const{user:ce,addOrgUser:Ce}=this.props;ce&&Ce(ce,z,X)},this.onSessionRevoke=z=>{const{user:X,revokeSession:ce}=this.props;X&&ce(z,X.id)},this.onAllSessionsRevoke=()=>{const{user:z,revokeAllSessions:X}=this.props;z&&X(z.id)},this.onUserSync=()=>{const{user:z,syncLdapUser:X}=this.props;z&&X(z.id)}}async componentDidMount(){const{match:z,loadAdminUserPage:X}=this.props;X(parseInt(z.params.id,10))}render(){const{user:z,orgs:X,sessions:ce,ldapSyncInfo:Ce,isLoading:Ie}=this.props,Fe=z?.isExternal&&z?.authLabels?.includes("LDAP"),Je=Jt.TP.hasPermission($t.AccessControlAction.UsersAuthTokenList),et=Jt.TP.hasPermission($t.AccessControlAction.LDAPStatusRead),mt=z?.authLabels?.[0],vt=mt?`Synced via ${mt}`:"",Pt={text:z?.login??"",icon:"shield",subTitle:"Manage settings for an individual user."};return a.createElement(wr.Y,{navId:"global-users",pageNav:Pt},a.createElement(wr.Y.Contents,{isLoading:Ie},a.createElement(Zt.B,{gap:5,direction:"column"},z&&a.createElement(a.Fragment,null,a.createElement(Dm,{user:z,onUserUpdate:this.onUserUpdate,onUserDelete:this.onUserDelete,onUserDisable:this.onUserDisable,onUserEnable:this.onUserEnable,onPasswordChange:this.onPasswordChange}),Fe&&z?.isExternallySynced&&(0,kt.a)("ldapsync")&&Ce&&et&&a.createElement(ya,{ldapSyncInfo:Ce,user:z,onUserSync:this.onUserSync}),a.createElement(Qo,{isGrafanaAdmin:z.isGrafanaAdmin,isExternalUser:z?.isGrafanaAdminExternallySynced,lockMessage:vt,onGrafanaAdminChange:this.onGrafanaAdminChange})),X&&a.createElement(Gs,{user:z,orgs:X,isExternalUser:z?.isExternallySynced,onOrgRemove:this.onOrgRemove,onOrgRoleChange:this.onOrgRoleChange,onOrgAdd:this.onOrgAdd}),ce&&Je&&a.createElement(bm,{sessions:ce,onSessionRevoke:this.onSessionRevoke,onAllSessionsRevoke:this.onAllSessionsRevoke}))))}}const Tm=w=>({user:w.userAdmin.user,sessions:w.userAdmin.sessions,orgs:w.userAdmin.orgs,ldapSyncInfo:w.ldap.syncInfo,isLoading:w.userAdmin.isLoading,error:w.userAdmin.error}),Mm={loadAdminUserPage:Mr.kz,updateUser:Mr.TK,setUserPassword:Mr.ly,disableUser:Mr.MV,enableUser:Mr.nr,deleteUser:Mr.hG,updateUserPermissions:Mr.N6,addOrgUser:Mr.nh,updateOrgUserRole:Mr.P3,deleteOrgUser:Mr.Pi,revokeSession:Mr.T$,revokeAllSessions:Mr.VR,syncLdapUser:Mr.mI},Sm=(0,ro.connect)(Tm,Mm)(Sr);var xm=e(49785),il=e(94753),Gi=e(28389);const Om=({ldapConnectionInfo:w})=>{const z=(0,a.useMemo)(()=>[{id:"host",header:"Host",disableGrow:!0},{id:"port",header:"Port",disableGrow:!0},{id:"available",cell:ce=>ce.cell.value?a.createElement(Zt.B,{justifyContent:"end"},a.createElement(Ls.m,{content:"Connection is available"},a.createElement(us.I,{name:"check",className:"pull-right"}))):a.createElement(Zt.B,{justifyContent:"end"},a.createElement(Ls.m,{content:"Connection is not available"},a.createElement(us.I,{name:"exclamation-triangle"})))}],[]),X=(0,a.useMemo)(()=>w,[w]);return a.createElement("section",null,a.createElement(Zt.B,{direction:"column",gap:2},a.createElement(il.E,{color:"primary",element:"h3"},"LDAP Connection"),a.createElement(Gi.j,{data:X,columns:z,getRowId:ce=>ce.host+ce.port}),a.createElement(Im,{ldapConnectionInfo:w})))},Im=({ldapConnectionInfo:w})=>{if(!w.some(Ce=>Ce.error))return null;const X=[];w.forEach(Ce=>{Ce.error&&X.push(Ce)});const ce=X.map((Ce,Ie)=>a.createElement("div",{key:Ie},a.createElement("span",{style:{fontWeight:500}},Ce.host,":",Ce.port,a.createElement("br",null)),a.createElement("span",null,Ce.error),Ie!==X.length-1&&a.createElement(a.Fragment,null,a.createElement("br",null),a.createElement("br",null))));return a.createElement(En.F,{title:"Connection error",severity:$t.AppNotificationSeverity.Error},ce)},Am="dddd YYYY-MM-DD HH:mm zz",Ic=({ldapSyncInfo:w})=>{const z=(0,an.LE)(w.nextSync,{format:Am}),X=[{id:"syncAttribute"},{id:"syncValue"}],ce=[{syncAttribute:"Active synchronization",syncValue:w.enabled?"Enabled":"Disabled"},{syncAttribute:"Scheduled",syncValue:w.schedule},{syncAttribute:"Next synchronization",syncValue:z}];return a.createElement("section",null,a.createElement(il.E,{element:"h3"},"LDAP Synchronization"),a.createElement(Gi.j,{data:ce,columns:X,getRowId:Ce=>Ce.syncAttribute}))},Rm=({groups:w})=>{const z=(0,a.useMemo)(()=>w,[w]),X=(0,a.useMemo)(()=>[{id:"groupDN",header:"LDAP Group"},{id:"orgName",header:"Organization",cell:ce=>ce.value&&ce.row.original.orgRole?ce.value:""},{id:"orgRole",header:"Role",cell:ce=>ce.value||a.createElement(a.Fragment,null,"No match"," ",a.createElement(Ls.m,{content:"No matching organizations found"},a.createElement(us.I,{name:"info-circle"})))}],[]);return a.createElement(Gi.j,{headerTooltips:{orgName:{content:"Only the first match for an Organization will be used",iconName:"info-circle"}},columns:X,data:z,getRowId:ce=>ce.orgId+ce.orgRole})},uo=({info:w})=>{const z=(0,a.useMemo)(()=>[{id:"userInfo",header:"User Information",disableGrow:!0},{id:"ldapValue"},{id:"cfgAttrValue",header:"LDAP attribute"}],[]),X=(0,a.useMemo)(()=>[{userInfo:"First name",ldapValue:w.name.ldapValue,cfgAttrValue:w.name.cfgAttrValue},{userInfo:"Surname",ldapValue:w.surname.ldapValue,cfgAttrValue:w.surname.cfgAttrValue},{userInfo:"Username",ldapValue:w.login.ldapValue,cfgAttrValue:w.login.cfgAttrValue},{userInfo:"Email",ldapValue:w.email.ldapValue,cfgAttrValue:w.email.cfgAttrValue}],[w]);return a.createElement(Gi.j,{columns:z,data:X,getRowId:ce=>ce.userInfo})},Lm=({permissions:w})=>{const z=(0,a.useMemo)(()=>[{id:"permission",header:"Permissions",disableGrow:!0},{id:"value"}],[]),X=(0,a.useMemo)(()=>[{permission:"Grafana admin",value:w.isGrafanaAdmin?a.createElement(a.Fragment,null,a.createElement(us.I,{name:"shield"})," Yes"):"No"},{permission:"Status",value:w.isDisabled?a.createElement(a.Fragment,null,a.createElement(us.I,{name:"times"})," Inactive"):a.createElement(a.Fragment,null,a.createElement(us.I,{name:"check"})," Active")}],[w]);return a.createElement(Gi.j,{data:X,columns:z,getRowId:ce=>ce.permission})},Bm=({teams:w})=>{const z=(0,a.useMemo)(()=>[{id:"groupDN",header:"LDAP Group"},{id:"orgName",header:"Organization",cell:({row:{original:{orgName:X}}})=>a.createElement(a.Fragment,null,X||"No matching teams found")},{id:"teamName",header:"Team",cell:({row:{original:{teamName:X,orgName:ce}}})=>X&&ce?X:""}],[]);return a.createElement(Gi.j,{data:w,columns:z,getRowId:X=>X.teamName})},Um=({ldapUser:w})=>a.createElement(Zt.B,{direction:"column",gap:4},a.createElement(uo,{info:w.info}),a.createElement(Lm,{permissions:w.permissions}),w.roles&&w.roles.length>0&&a.createElement(Rm,{groups:w.roles}),w.teams&&w.teams.length>0?a.createElement(Bm,{teams:w.teams}):a.createElement(de.a,null,a.createElement(il.E,null,"No teams found via LDAP"))),Nm={text:"LDAP",subTitle:"Verify your LDAP and user mapping configuration.",icon:"book",id:"LDAP"},Yr=({clearUserMappingInfo:w,queryParams:z,loadLdapState:X,loadLdapSyncStatus:ce,loadUserMapping:Ce,clearUserError:Ie,ldapUser:Fe,userError:Je,ldapError:et,ldapSyncInfo:mt,ldapConnectionInfo:vt})=>{const[Pt,Ht]=(0,a.useState)(!0),{register:Ut,handleSubmit:At}=(0,xm.mN)(),zt=(0,a.useCallback)(async Fa=>Ce(Fa),[Ce]);(0,a.useEffect)(()=>{const Fa=async()=>Promise.all([X(),ce()]);async function wa(){await w(),await Fa(),z.username&&await zt(z.username),Ht(!1)}wa()},[w,zt,X,ce,z]);const Pn=({username:Fa})=>{Fa&&zt(Fa)},Ta=()=>{Ie()},Va=Jt.TP.hasPermission($t.AccessControlAction.LDAPUsersRead);return a.createElement(wr.Y,{navId:"authentication",pageNav:Nm},a.createElement(wr.Y.Contents,{isLoading:Pt},a.createElement(Zt.B,{direction:"column",gap:4},et&&et.title&&a.createElement(En.F,{title:et.title,severity:$t.AppNotificationSeverity.Error},et.body),a.createElement(Om,{ldapConnectionInfo:vt}),(0,kt.a)("ldapsync")&&mt&&a.createElement(Ic,{ldapSyncInfo:mt}),Va&&a.createElement("section",null,a.createElement("h3",null,"Test user mapping"),a.createElement("form",{onSubmit:At(Pn)},a.createElement(Qa.D,{label:"Username"},a.createElement(me.p,{...Ut("username",{required:!0}),width:34,id:"username",type:"text",defaultValue:z.username,addonAfter:a.createElement(ie.$n,{variant:"primary",type:"submit"},"Run")}))),Je&&Je.title&&a.createElement(En.F,{title:Je.title,severity:$t.AppNotificationSeverity.Error,onRemove:Ta},Je.body),Fe&&a.createElement(Um,{ldapUser:Fe})))))},wm=w=>({ldapConnectionInfo:w.ldap.connectionInfo,ldapUser:w.ldap.user,ldapSyncInfo:w.ldap.syncInfo,userError:w.ldap.userError,ldapError:w.ldap.ldapError}),Fm={loadLdapState:Mr.JI,loadLdapSyncStatus:Mr.pm,loadUserMapping:Mr.Kg,clearUserError:Mr.DX,clearUserMappingInfo:Mr.Jc},Wm=(0,ro.connect)(wm,Fm)(Yr);var Nn=e(27921),xr=e(75471);const Md=[],Ac=[...Md,{path:"/alerting-legacy",component:()=>a.createElement(Se,{navId:"alerting-legacy"})},{path:"/alerting-legacy/list",component:(0,Nn.A)(()=>e.e(9312).then(e.bind(e,71826)))},{path:"/alerting-legacy/ng/list",component:(0,Nn.A)(()=>e.e(9312).then(e.bind(e,71826)))},{path:"/alerting-legacy/notifications",roles:_.$W.unifiedAlertingEnabled?()=>["Editor","Admin"]:void 0,component:(0,Nn.A)(()=>e.e(545).then(e.bind(e,22099)))},{path:"/alerting-legacy/notifications/templates/new",roles:()=>["Editor","Admin"],component:(0,Nn.A)(()=>e.e(545).then(e.bind(e,22099)))},{path:"/alerting-legacy/notifications/templates/:id/edit",roles:()=>["Editor","Admin"],component:(0,Nn.A)(()=>e.e(545).then(e.bind(e,22099)))},{path:"/alerting-legacy/notifications/receivers/new",roles:()=>["Editor","Admin"],component:(0,Nn.A)(()=>e.e(545).then(e.bind(e,22099)))},{path:"/alerting-legacy/notifications/receivers/:id/edit",roles:()=>["Editor","Admin"],component:(0,Nn.A)(()=>e.e(545).then(e.bind(e,22099)))},{path:"/alerting-legacy/notifications/global-config",roles:()=>["Admin","Editor"],component:(0,Nn.A)(()=>e.e(545).then(e.bind(e,22099)))},{path:"/alerting-legacy/notification/new",component:(0,Nn.A)(()=>e.e(2370).then(e.bind(e,47265)))},{path:"/alerting-legacy/notification/:id/edit",component:(0,Nn.A)(()=>e.e(5890).then(e.bind(e,19051)))},{path:"/alerting-legacy/upgrade",roles:()=>["Admin"],component:(0,Nn.A)(()=>e.e(7391).then(e.bind(e,57957)))}],Rc=[...Md,{path:"/alerting",component:(0,Nn.A)(()=>e.e(3236).then(e.bind(e,58164)))},{path:"/alerting/home",exact:!1,component:(0,Nn.A)(()=>e.e(3236).then(e.bind(e,58164)))},{path:"/alerting/list",roles:(0,xr.C0)([$t.AccessControlAction.AlertingRuleRead,$t.AccessControlAction.AlertingRuleExternalRead]),component:(0,Nn.A)(()=>Promise.all([e.e(3541),e.e(3511)]).then(e.bind(e,31987)))},{path:"/alerting/routes",roles:(0,xr.C0)([$t.AccessControlAction.AlertingNotificationsRead,$t.AccessControlAction.AlertingNotificationsExternalRead]),component:(0,Nn.A)(()=>Promise.all([e.e(0),e.e(6719)]).then(e.bind(e,34708)))},{path:"/alerting/routes/mute-timing/new",roles:(0,xr.C0)([$t.AccessControlAction.AlertingNotificationsWrite,$t.AccessControlAction.AlertingNotificationsExternalWrite]),component:(0,Nn.A)(()=>e.e(4501).then(e.bind(e,36333)))},{path:"/alerting/routes/mute-timing/edit",roles:(0,xr.C0)([$t.AccessControlAction.AlertingNotificationsWrite,$t.AccessControlAction.AlertingNotificationsExternalWrite]),component:(0,Nn.A)(()=>e.e(4501).then(e.bind(e,36333)))},{path:"/alerting/silences",roles:(0,xr.C0)([$t.AccessControlAction.AlertingInstanceRead,$t.AccessControlAction.AlertingInstancesExternalRead]),component:(0,Nn.A)(()=>e.e(9347).then(e.bind(e,24480)))},{path:"/alerting/silence/new",roles:(0,xr.C0)([$t.AccessControlAction.AlertingInstanceCreate,$t.AccessControlAction.AlertingInstancesExternalWrite]),component:(0,Nn.A)(()=>e.e(9347).then(e.bind(e,24480)))},{path:"/alerting/silence/:id/edit",roles:(0,xr.C0)([$t.AccessControlAction.AlertingInstanceUpdate,$t.AccessControlAction.AlertingInstancesExternalWrite]),component:(0,Nn.A)(()=>e.e(9347).then(e.bind(e,24480)))},{path:"/alerting/notifications",roles:(0,xr.C0)([$t.AccessControlAction.AlertingNotificationsRead,$t.AccessControlAction.AlertingNotificationsExternalRead]),component:(0,Nn.A)(()=>e.e(4772).then(e.bind(e,78199)))},{path:"/alerting/notifications/:type/new",roles:(0,xr.C0)([$t.AccessControlAction.AlertingNotificationsWrite,$t.AccessControlAction.AlertingNotificationsExternalWrite]),component:(0,Nn.A)(()=>e.e(4772).then(e.bind(e,78199)))},{path:"/alerting/notifications/receivers/:id/edit",roles:(0,xr.C0)([$t.AccessControlAction.AlertingNotificationsWrite,$t.AccessControlAction.AlertingNotificationsExternalWrite,$t.AccessControlAction.AlertingNotificationsRead,$t.AccessControlAction.AlertingNotificationsExternalRead]),component:(0,Nn.A)(()=>e.e(4772).then(e.bind(e,78199)))},{path:"/alerting/notifications/:type/:id/edit",roles:(0,xr.C0)([$t.AccessControlAction.AlertingNotificationsWrite,$t.AccessControlAction.AlertingNotificationsExternalWrite]),component:(0,Nn.A)(()=>e.e(4772).then(e.bind(e,78199)))},{path:"/alerting/notifications/:type/:id/duplicate",roles:(0,xr.C0)([$t.AccessControlAction.AlertingNotificationsWrite,$t.AccessControlAction.AlertingNotificationsExternalWrite]),component:(0,Nn.A)(()=>e.e(4772).then(e.bind(e,78199)))},{path:"/alerting/notifications/:type",roles:(0,xr.C0)([$t.AccessControlAction.AlertingNotificationsWrite,$t.AccessControlAction.AlertingNotificationsExternalWrite]),component:(0,Nn.A)(()=>e.e(4772).then(e.bind(e,78199)))},{path:"/alerting/groups/",roles:(0,xr.C0)([$t.AccessControlAction.AlertingInstanceRead,$t.AccessControlAction.AlertingInstancesExternalRead]),component:(0,Nn.A)(()=>e.e(8427).then(e.bind(e,12564)))},{path:"/alerting/new/:type?",pageClass:"page-alerting",roles:(0,xr.C0)([$t.AccessControlAction.AlertingRuleCreate,$t.AccessControlAction.AlertingRuleExternalWrite]),component:(0,Nn.A)(()=>Promise.all([e.e(1660),e.e(0),e.e(3726),e.e(3541),e.e(4009)]).then(e.bind(e,50166)))},{path:"/alerting/:id/edit",pageClass:"page-alerting",roles:(0,xr.C0)([$t.AccessControlAction.AlertingRuleUpdate,$t.AccessControlAction.AlertingRuleExternalWrite]),component:(0,Nn.A)(()=>Promise.all([e.e(1660),e.e(0),e.e(3726),e.e(3541),e.e(4009)]).then(e.bind(e,50166)))},{path:"/alerting/:id/modify-export",pageClass:"page-alerting",roles:(0,xr.C0)([$t.AccessControlAction.AlertingRuleRead]),component:(0,Nn.A)(()=>Promise.all([e.e(1660),e.e(0),e.e(3726),e.e(3541),e.e(4009)]).then(e.bind(e,69179)))},{path:"/alerting/:sourceName/:id/view",pageClass:"page-alerting",roles:(0,xr.C0)([$t.AccessControlAction.AlertingRuleRead,$t.AccessControlAction.AlertingRuleExternalRead]),component:(0,Nn.A)(()=>Promise.resolve().then(e.bind(e,79741)))},{path:"/alerting/:sourceName/:name/find",pageClass:"page-alerting",roles:(0,xr.C0)([$t.AccessControlAction.AlertingRuleRead,$t.AccessControlAction.AlertingRuleExternalRead]),component:(0,Nn.A)(()=>e.e(5516).then(e.bind(e,10042)))},{path:"/alerting/admin",roles:()=>["Admin"],component:(0,Nn.A)(()=>e.e(6130).then(e.bind(e,24513)))}];function Km(w=_.$W){if(w.unifiedAlertingEnabled)return Rc;if(w.alertingEnabled){if(_.$W.featureToggles.alertingPreviewUpgrade)return[...Ac,...Rc];const X=[{path:"/alerting",component:()=>a.createElement(ds.rd,{to:"/alerting-legacy"})},{path:"/alerting/list",component:()=>a.createElement(ds.rd,{to:"/alerting-legacy/list"})},{path:"/alerting/notifications",component:()=>a.createElement(ds.rd,{to:"/alerting-legacy/notifications"})},{path:"/alerting/notification/new",component:()=>a.createElement(ds.rd,{to:"/alerting-legacy/notification/new"})},{path:"/alerting/notification/:id/edit",component:ce=>a.createElement(ds.rd,{to:"/alerting-legacy/notification/:id/edit".replace(":id",ce.match.params.id)})}];return[...Ac,...X]}return(0,p.uniq)([...Ac,...Rc].map(X=>X.path)).map(X=>({path:X,component:(0,Nn.A)(()=>e.e(5292).then(e.bind(e,28785)))}))}var ji=e(6320);const Sd=w=>({alertContent:(0,rt.css)`
    display: flex;
    flex-direction: row;
    padding: 0;
    justify-content: space-between;
    align-items: center;
  `,alertParagraph:(0,rt.css)`
    margin: 0 ${w.spacing(1)} 0 0;
    line-height: ${w.spacing(w.components.height.sm)};
  `});function $m(){const w=(0,St.of)(Sd),[z,X]=(0,a.useState)(!0);return z?a.createElement(En.F,{severity:"info",title:"",onRemove:()=>X(!1)},a.createElement("div",{className:w.alertContent},a.createElement("p",{className:w.alertParagraph},"Data sources have a new home! You can discover new data sources or manage existing ones in the Connections page, accessible from the main menu."),a.createElement(ie.z9,{"aria-label":"Link to Connections",icon:"arrow-right",href:ji.b.DataSources,fill:"text"},"Go to connections"))):a.createElement(a.Fragment,null)}function Vm(){return[{path:`/${ji.q}`,exact:!1,component:(0,Nn.A)(()=>Promise.all([e.e(6359),e.e(3418),e.e(2154)]).then(e.bind(e,39774)))}]}var Yi=e(83883),Lc=e(66253);const _m=[{path:"/plugins",navId:"plugins",roles:Bc([$t.AccessControlAction.PluginsInstall,$t.AccessControlAction.PluginsWrite],["Admin","ServerAdmin"]),routeName:Lc.vk.Home,component:(0,Nn.A)(()=>e.e(4519).then(e.bind(e,65965)))},{path:"/plugins/browse",navId:"plugins",roles:Bc([$t.AccessControlAction.PluginsInstall,$t.AccessControlAction.PluginsWrite],["Admin","ServerAdmin"]),routeName:Lc.vk.Browse,component:(0,Nn.A)(()=>e.e(4519).then(e.bind(e,65965)))},{path:"/plugins/:pluginId/",navId:"plugins",roles:Bc([$t.AccessControlAction.PluginsInstall,$t.AccessControlAction.PluginsWrite],["Admin","ServerAdmin"]),routeName:Lc.vk.Details,component:(0,Nn.A)(()=>Promise.all([e.e(6359),e.e(3418),e.e(7891)]).then(e.bind(e,86400)))}];function Bc(w,z){return()=>w.some(X=>Jt.TP.hasPermission(X))?[]:z}function zm(){return _m}var km=e(17422),bi=e(30038),xd=e(13834),Uc=e(62625),Qi=e(26272),Od=e(39419),Wo=e(76888);function mh(w){return console.error(w),Yl("Exception thrown","See console for details")}function Hm(){return Yl("Page not found","404 Error")}function Yl(w,z){const X={text:w,subTitle:z,icon:"exclamation-triangle"};return{node:X,main:X}}var Gm=e(94954),Kr=e(27716),Nc=e(91629),Rl=e(60677),Ql=e(72798);const wc={loading:!0,loadingError:!1,pluginNav:null,plugin:null};function Id({pluginId:w,pluginNavSection:z}){const X=(0,ds.W5)(),ce=(0,ds.zy)(),[Ce,Ie]=(0,a.useReducer)(ll.reducer,wc),Fe=j.$.appSubUrl+ce.pathname+ce.search,{plugin:Je,loading:et,loadingError:mt,pluginNav:vt}=Ce,Pt=(0,Rl.Wy)(z,vt,Fe),Ht=(0,a.useMemo)(()=>(0,x.SE)(ce.search),[ce.search]),Ut=(0,a.useMemo)(()=>(0,Ql.S)(Pt),[Pt]),At=(0,Wo.Il)();(0,a.useEffect)(()=>{jm(w,Ie)},[w]);const zt=(0,a.useCallback)(Fa=>Ie(ll.actions.changeNav(Fa)),[]);if(!Je||w!==Je.meta.id){const Fa=At.chrome.state.getValue().layout;return a.createElement(wr.Y,{navModel:Pt,pageNav:{text:""},layout:Fa},et&&a.createElement(Od.A,null),!et&&mt&&a.createElement(dt.L,{entity:"App"}))}if(!Je.root)return a.createElement(wr.Y,{navModel:Pt??Yl("Plugin load error")},a.createElement("div",null,"No root app page component found"));const Pn=Je.root&&a.createElement(xd.a,{meta:Je.meta},a.createElement(Je.root,{meta:Je.meta,basename:X.url,onNavChanged:zt,query:Ht,path:ce.pathname})),Ta=()=>{if(!Je.meta?.includes)return!0;const Fa=Je.meta?.includes.find($r=>$r.path===ce.pathname);if(!Fa)return!0;if(Fa?.action&&j.$.featureToggles.accessControlOnCall)return Jt.TP.hasPermission(Fa.action);if(Jt.TP.isGrafanaAdmin||Jt.TP.user.orgRole===Uc.X.Admin)return!0;const wa=Fa?.role||"";return!wa||Jt.TP.isEditor&&wa===Uc.X.Viewer?!0:Jt.TP.hasRole(wa)},Va=()=>a.createElement(En.F,{severity:"warning",title:"Access denied"},"You do not have permission to see this page.");return Ta()?vt?a.createElement(a.Fragment,null,Pt?a.createElement(wr.Y,{navModel:Pt,pageNav:vt?.node},a.createElement(wr.Y.Contents,{isLoading:et},Pn)):a.createElement(wr.Y,null,Pn)):a.createElement(Ql.A.Provider,{value:Ut},Pn):a.createElement(Va,null)}const ll=(0,bi.Z0)({name:"prom-builder-container",initialState:wc,reducers:{setState:(w,z)=>{Object.assign(w,z.payload)},changeNav:(w,z)=>{let X=z.payload;X&&X.node.children&&(X={...X,node:{...X.main,hideFromBreadcrumbs:!0}}),w.pluginNav=X}}});async function jm(w,z){try{const X=await(0,Kr.x)(w).then(ce=>{const Ce=Ad(ce);return Ce?(Jt.lE.emit(Qi.r1.alertError,[Ce]),z(ll.actions.setState({pluginNav:Yl(Ce)})),null):(0,Nc.ui)(ce)});z(ll.actions.setState({plugin:X,loading:!1,loadingError:!1,pluginNav:null}))}catch(X){z(ll.actions.setState({plugin:null,loading:!1,loadingError:!0,pluginNav:Hm()}));const ce=X instanceof Error?X:new Error((0,Gm.q)(X));Rl.z4.logError(ce),console.error(ce)}}function Ad(w){return w?w.type!==We.QE.app?"Plugin must be an app":w.enabled?null:"Application Not Enabled":"Unknown Plugin"}const Rd=Id;var Is=e(99140);function Ym(){const w=(0,Is.Gu)(),{navIndex:z}=w,X=Ie=>Ie.startsWith("standalone-plugin-page-/"),ce=Ie=>"pluginId"in Ie&&"id"in Ie;return[...Object.values(z).filter(ce).map(Ie=>{const Fe=(0,km.rH)(Ie),Je=`/a/${Ie.pluginId}`,et=X(Ie.id)&&Ie.url||Je,mt=X(Ie.id)&&!Ie.url?.startsWith("/a/");return{path:et,exact:!1,sensitive:mt,component:()=>a.createElement(Rd,{pluginId:Ie.pluginId,pluginNavSection:Fe})}}),{path:"/a/:pluginId",exact:!1,component:({match:Ie})=>a.createElement(Rd,{pluginId:Ie.params.pluginId,pluginNavSection:z.home})}]}const cl=[{path:"/profile",component:(0,Nn.A)(()=>e.e(2472).then(e.bind(e,48357)))},{path:"/profile/password",component:(0,Nn.A)(()=>e.e(8107).then(e.bind(e,28107)))},{path:"/profile/select-org",component:(0,Nn.A)(()=>e.e(7430).then(e.bind(e,44613)))},{path:"/profile/notifications",component:(0,Nn.A)(()=>e.e(4140).then(e.bind(e,78015)))}];function Qm(w=_.$W){return w.profileEnabled?cl:(0,p.uniq)(cl.map(X=>X.path)).map(X=>({path:X,component:(0,Nn.A)(()=>e.e(5173).then(e.bind(e,35208)))}))}const Eo=()=>!_.$W.publicDashboardsEnabled||!_.$W.featureToggles.publicDashboards?[]:[{path:"/dashboard/public",pageClass:"page-dashboard",routeName:$t.DashboardRoutes.Public,component:(0,Nn.A)(()=>e.e(5761).then(e.bind(e,53371)))},{path:"/public-dashboards/:accessToken",pageClass:"page-dashboard",routeName:$t.DashboardRoutes.Public,chromeless:!0,component:(0,Nn.A)(()=>Promise.all([e.e(9569),e.e(6678),e.e(6263),e.e(7197)]).then(e.bind(e,9187)))}],Fc=[];function Ld(){return[...Ym(),{path:"/",pageClass:"page-dashboard",routeName:$t.DashboardRoutes.Home,component:(0,Nn.A)(()=>Promise.all([e.e(9569),e.e(6678),e.e(6263),e.e(660),e.e(9136)]).then(e.bind(e,24669)))},{path:"/d/:uid/:slug?",pageClass:"page-dashboard",routeName:$t.DashboardRoutes.Normal,component:(0,Nn.A)(()=>Promise.all([e.e(9569),e.e(6678),e.e(6263),e.e(660),e.e(9136)]).then(e.bind(e,24669)))},{path:"/dashboard/new",roles:()=>Rt.TP.evaluatePermission([$t.AccessControlAction.DashboardsCreate]),pageClass:"page-dashboard",routeName:$t.DashboardRoutes.New,component:(0,Nn.A)(()=>Promise.all([e.e(9569),e.e(6678),e.e(6263),e.e(660),e.e(9136),e.e(2976)]).then(e.bind(e,24669)))},{path:"/dashboard/new-with-ds/:datasourceUid",roles:()=>Rt.TP.evaluatePermission([$t.AccessControlAction.DashboardsCreate]),component:(0,Nn.A)(()=>Promise.all([e.e(9569),e.e(6678),e.e(6263),e.e(660),e.e(9136),e.e(2976)]).then(e.bind(e,30798)))},{path:"/dashboard/:type/:slug",pageClass:"page-dashboard",routeName:$t.DashboardRoutes.Normal,component:(0,Nn.A)(()=>Promise.all([e.e(9569),e.e(6678),e.e(6263),e.e(660),e.e(9136),e.e(2976)]).then(e.bind(e,24669)))},{path:"/dashboards/embedding-test",component:(0,Nn.A)(()=>Promise.all([e.e(9569),e.e(6678),e.e(6263),e.e(660),e.e(9136),e.e(2976)]).then(e.bind(e,14962)))},{path:"/d-solo/:uid/:slug?",pageClass:"dashboard-solo",routeName:$t.DashboardRoutes.Normal,chromeless:!0,component:(0,Nn.A)(()=>_.Ay.featureToggles.dashboardSceneSolo?Promise.all([e.e(9569),e.e(7849)]).then(e.bind(e,24880)):Promise.all([e.e(9569),e.e(4492)]).then(e.bind(e,55087)))},{path:"/dashboard-solo/:type/:slug",pageClass:"dashboard-solo",routeName:$t.DashboardRoutes.Normal,chromeless:!0,component:(0,Nn.A)(()=>Promise.all([e.e(9569),e.e(7849)]).then(e.bind(e,55087)))},{path:"/dashboard/import",component:(0,Nn.A)(()=>e.e(2550).then(e.bind(e,23390)))},{path:Yi.I.List,component:()=>a.createElement(ds.rd,{to:ji.b.DataSources})},{path:Yi.I.Edit,component:w=>a.createElement(ds.rd,{to:ji.b.DataSourcesEdit.replace(":uid",w.match.params.uid)})},{path:Yi.I.Dashboards,component:w=>a.createElement(ds.rd,{to:ji.b.DataSourcesDashboards.replace(":uid",w.match.params.uid)})},{path:Yi.I.New,component:()=>a.createElement(ds.rd,{to:ji.b.DataSourcesNew})},{path:"/datasources/correlations",component:(0,Nn.A)(()=>_.Ay.featureToggles.correlations?e.e(9981).then(e.bind(e,32429)):e.e(8014).then(e.bind(e,55244)))},{path:"/dashboards",component:(0,Nn.A)(()=>Promise.all([e.e(6359),e.e(152)]).then(e.bind(e,32538)))},{path:"/dashboards/f/:uid/:slug",component:(0,Nn.A)(()=>Promise.all([e.e(6359),e.e(152)]).then(e.bind(e,32538)))},{path:"/dashboards/f/:uid",component:(0,Nn.A)(()=>Promise.all([e.e(6359),e.e(152)]).then(e.bind(e,32538)))},{path:"/explore",pageClass:"page-explore",roles:()=>Rt.TP.evaluatePermission([$t.AccessControlAction.DataSourcesExplore]),component:(0,Nn.A)(()=>_.Ay.exploreEnabled?Promise.all([e.e(660),e.e(1698),e.e(5511),e.e(9604)]).then(e.bind(e,88322)):e.e(4422).then(e.bind(e,53518)))},{path:"/apps",component:()=>a.createElement(Se,{navId:"apps"})},{path:"/alerts-and-incidents",component:()=>a.createElement(Se,{navId:"alerts-and-incidents"})},{path:"/testing-and-synthetics",component:()=>a.createElement(Se,{navId:"testing-and-synthetics"})},{path:"/monitoring",component:()=>a.createElement(Se,{navId:"monitoring"})},{path:"/infrastructure",component:()=>a.createElement(Se,{navId:"infrastructure"})},{path:"/frontend",component:()=>a.createElement(Se,{navId:"frontend"})},{path:"/admin/general",component:()=>a.createElement(Se,{navId:"cfg/general"})},{path:"/admin/plugins",component:()=>a.createElement(Se,{navId:"cfg/plugins"})},{path:"/admin/access",component:()=>a.createElement(Se,{navId:"cfg/access"})},{path:"/org",component:(0,Nn.A)(()=>e.e(1510).then(e.bind(e,69047)))},{path:"/org/new",component:(0,Nn.A)(()=>e.e(7930).then(e.bind(e,25913)))},{path:"/org/users",component:(0,Nn.A)(()=>e.e(9856).then(e.bind(e,31083)))},{path:"/org/users/invite",component:(0,Nn.A)(()=>e.e(7720).then(e.bind(e,91230)))},{path:"/org/apikeys",roles:()=>Rt.TP.evaluatePermission([$t.AccessControlAction.ActionAPIKeysRead]),component:(0,Nn.A)(()=>e.e(4196).then(e.bind(e,9699)))},{path:"/org/serviceaccounts",roles:()=>Rt.TP.evaluatePermission([$t.AccessControlAction.ServiceAccountsRead,$t.AccessControlAction.ServiceAccountsCreate]),component:(0,Nn.A)(()=>e.e(6777).then(e.bind(e,74409)))},{path:"/org/serviceaccounts/create",component:(0,Nn.A)(()=>e.e(4176).then(e.bind(e,63606)))},{path:"/org/serviceaccounts/:id",component:(0,Nn.A)(()=>e.e(6576).then(e.bind(e,82936)))},{path:"/org/teams",roles:()=>Rt.TP.evaluatePermission([$t.AccessControlAction.ActionTeamsRead,$t.AccessControlAction.ActionTeamsCreate]),component:(0,Nn.A)(()=>e.e(1036).then(e.bind(e,52576)))},{path:"/org/teams/new",roles:()=>Rt.TP.evaluatePermission([$t.AccessControlAction.ActionTeamsCreate]),component:(0,Nn.A)(()=>e.e(5436).then(e.bind(e,80011)))},{path:"/org/teams/edit/:id/:page?",roles:()=>Rt.TP.evaluatePermission([$t.AccessControlAction.ActionTeamsRead,$t.AccessControlAction.ActionTeamsCreate]),component:(0,Nn.A)(()=>e.e(2212).then(e.bind(e,92886)))},{path:"/admin",component:()=>a.createElement(Se,{navId:"cfg",header:a.createElement($m,null)})},{path:"/admin/authentication",roles:()=>Rt.TP.evaluatePermission([$t.AccessControlAction.SettingsWrite]),component:_.Ay.licenseInfo.enabledFeatures?.saml||_.Ay.ldapEnabled||_.Ay.featureToggles.ssoSettingsApi?(0,Nn.A)(()=>e.e(5592).then(e.bind(e,10437))):()=>a.createElement(ds.rd,{to:"/admin"})},{path:"/admin/authentication/ldap",component:Wm},{path:"/admin/authentication/:provider",roles:()=>Rt.TP.evaluatePermission([$t.AccessControlAction.SettingsWrite]),component:_.Ay.featureToggles.ssoSettingsApi?(0,Nn.A)(()=>e.e(5592).then(e.bind(e,22468))):()=>a.createElement(ds.rd,{to:"/admin"})},{path:"/admin/settings",component:(0,Nn.A)(()=>e.e(7659).then(e.bind(e,98493)))},{path:"/admin/upgrading",component:(0,Nn.A)(()=>e.e(5356).then(e.bind(e,55356)))},{path:"/admin/users",component:(0,Nn.A)(()=>e.e(1743).then(e.bind(e,20972)))},{path:"/admin/users/create",component:(0,Nn.A)(()=>e.e(9239).then(e.bind(e,64665)))},{path:"/admin/users/edit/:id",component:Sm},{path:"/admin/orgs",component:(0,Nn.A)(()=>e.e(9736).then(e.bind(e,24870)))},{path:"/admin/orgs/edit/:id",component:(0,Nn.A)(()=>e.e(9119).then(e.bind(e,57582)))},{path:"/admin/featuretoggles",component:_.Ay.featureToggles.featureToggleAdminPage?(0,Nn.A)(()=>e.e(7024).then(e.bind(e,47295))):()=>a.createElement(ds.rd,{to:"/admin"})},{path:"/admin/storage/:path*",roles:()=>["Admin"],component:(0,Nn.A)(()=>e.e(1927).then(e.bind(e,68932)))},{path:"/admin/stats",component:(0,Nn.A)(()=>e.e(9299).then(e.bind(e,51372)))},{path:"/login",component:Fo,pageClass:"login-page",chromeless:!0},{path:"/invite/:code",component:(0,Nn.A)(()=>e.e(8576).then(e.bind(e,14383))),chromeless:!0},{path:"/verify",component:_.Ay.verifyEmailEnabled?(0,Nn.A)(()=>e.e(8786).then(e.bind(e,78786))):()=>a.createElement(ds.rd,{to:"/signup"}),pageClass:"login-page",chromeless:!0},{path:"/signup",component:_.Ay.disableUserSignUp?()=>a.createElement(ds.rd,{to:"/login"}):(0,Nn.A)(()=>e.e(7914).then(e.bind(e,27914))),pageClass:"login-page",chromeless:!0},{path:"/user/password/send-reset-email",chromeless:!0,component:(0,Nn.A)(()=>e.e(3818).then(e.bind(e,2713)))},{path:"/user/password/reset",component:(0,Nn.A)(()=>e.e(641).then(e.bind(e,37344))),pageClass:"login-page",chromeless:!0},{path:"/dashboard/snapshots",component:(0,Nn.A)(()=>e.e(6590).then(e.bind(e,72602)))},{path:"/playlists",component:(0,Nn.A)(()=>e.e(1168).then(e.bind(e,43719)))},{path:"/playlists/play/:uid",component:(0,Nn.A)(()=>e.e(1374).then(e.bind(e,93129)))},{path:"/playlists/new",component:(0,Nn.A)(()=>e.e(7616).then(e.bind(e,62579)))},{path:"/playlists/edit/:uid",component:(0,Nn.A)(()=>e.e(7620).then(e.bind(e,84535)))},{path:"/sandbox/benchmarks",component:(0,Nn.A)(()=>e.e(9354).then(e.bind(e,98351)))},{path:"/sandbox/test",component:(0,Nn.A)(()=>e.e(5354).then(e.bind(e,65802)))},{path:"/dashboards/f/:uid/:slug/library-panels",component:(0,Nn.A)(()=>Promise.all([e.e(6678),e.e(5804)]).then(e.bind(e,15111)))},{path:"/dashboards/f/:uid/:slug/alerting",roles:()=>Rt.TP.evaluatePermission([$t.AccessControlAction.AlertingRuleRead]),component:(0,Nn.A)(()=>e.e(4333).then(e.bind(e,30027)))},{path:"/library-panels",component:(0,Nn.A)(()=>Promise.all([e.e(6678),e.e(8516)]).then(e.bind(e,45434)))},{path:"/notifications",component:(0,Nn.A)(()=>e.e(4140).then(e.bind(e,78015)))},{path:"/explore/metrics",chromeless:!1,exact:!1,component:(0,Nn.A)(()=>e.e(4785).then(e.bind(e,88353)))},...zm(),...Jm(),...Km(),...Qm(),...Fc,...Eo(),...Vm(),{path:"/*",component:bt}].filter(Tr.zz)}function Jm(w=_.Ay){return w.supportBundlesEnabled?[{path:"/support-bundles",component:(0,Nn.A)(()=>e.e(123).then(e.bind(e,21821)))},{path:"/support-bundles/create",component:(0,Nn.A)(()=>e.e(1515).then(e.bind(e,33809)))}]:[]}const Bd=a.forwardRef((w,z)=>a.createElement("div",{id:"ngRoot",ref:z,dangerouslySetInnerHTML:{__html:"<grafana-app ng-cloak></grafana-app>"}}));Bd.displayName="AngularRoot";var Ti=e(95344),Ud=e(7376),Nd=e(81634),Jo=e(74856),Xm=e(71500),Wc=e(6923);async function Mi(){if(j.$.angularSupportEnabled){const{AngularApp:w}=await Promise.all([e.e(7982),e.e(8054),e.e(1133),e.e(8888)]).then(e.bind(e,31133)),z=new w;z.init(),z.bootstrap()}else(0,Ud.w)({load:(w,z,X)=>({destroy:()=>{},digest:()=>{},getScope:()=>({})})}),(0,Nd.j)({get:w=>{switch(w){case"backendSrv":return(0,Ti.l)("getLegacyAngularInjector","backendSrv","use getBackendSrv() in @grafana/runtime"),(0,M.AI)();case"contextSrv":return(0,Ti.l)("getLegacyAngularInjector","contextSrv"),Jt.TP;case"dashboardSrv":return(0,Ti.l)("getLegacyAngularInjector","getDashboardSrv"),(0,l.UA)();case"datasourceSrv":return(0,Ti.l)("getLegacyAngularInjector","datasourceSrv","use getDataSourceSrv() in @grafana/runtime"),(0,U.l)();case"linkSrv":return(0,Ti.l)("getLegacyAngularInjector","linkSrv"),(0,Wc.mQ)();case"validationSrv":return(0,Ti.l)("getLegacyAngularInjector","validationSrv"),Xm.P;case"timeSrv":return(0,Ti.l)("getLegacyAngularInjector","timeSrv"),(0,Jo.jG)();case"templateSrv":return(0,Ti.l)("getLegacyAngularInjector","templateSrv","use getTemplateSrv() in @grafana/runtime"),(0,Re.w)()}throw"Angular is disabled.  Unable to expose: "+w}})}var Zm=e(46942),Jl=e.n(Zm),dl=e(60619),Si=e(33390),wd=e(80279),Fd=e(7887),Kc=e(82148),Wd=e(57514);const Ko=({})=>a.createElement(de.a,{paddingY:8},a.createElement(Zt.B,{direction:"column",alignItems:"center"},a.createElement("img",{src:"public/img/grot-not-found.svg",width:"200px",alt:"grot"}),a.createElement(il.E,{variant:"h5"},a.createElement(Ka.x6,{i18nKey:"command-palette.empty-state.title"},"No results found"))));Ko.displayName="EmptyState";var Kd=e(65178),qm=e(35822);const Xl=0,ul=w=>{const z=a.useRef(null),X=a.useRef(null),ce=a.useRef(w.items);ce.current=w.items;const Ce=(0,qm.useVirtual)({size:ce.current.length,parentRef:X}),{query:Ie,search:Fe,currentRootActionId:Je,activeIndex:et,options:mt}=(0,dr.useKBar)(Ut=>({search:Ut.searchQuery,currentRootActionId:Ut.currentRootActionId,activeIndex:Ut.activeIndex}));a.useEffect(()=>{const Ut=At=>{At.key==="ArrowUp"||At.ctrlKey&&At.key==="p"?(At.preventDefault(),Ie.setActiveIndex(zt=>{let Pn=zt>Xl?zt-1:zt;if(typeof ce.current[Pn]=="string"){if(Pn===0)return zt;Pn-=1}return Pn})):At.key==="ArrowDown"||At.ctrlKey&&At.key==="n"?(At.preventDefault(),Ie.setActiveIndex(zt=>{let Pn=zt<ce.current.length-1?zt+1:zt;if(typeof ce.current[Pn]=="string"){if(Pn===ce.current.length-1)return zt;Pn+=1}return Pn})):At.key==="Enter"&&(At.preventDefault(),z.current?.click())};return window.addEventListener("keydown",Ut),()=>window.removeEventListener("keydown",Ut)},[Ie]);const{scrollToIndex:vt}=Ce;a.useEffect(()=>{vt(et,{align:et<=1?"end":"auto"})},[et,vt]),a.useEffect(()=>{Ie.setActiveIndex(typeof w.items[Xl]=="string"?Xl+1:Xl)},[Fe,Je,w.items,Ie]);const Pt=a.useCallback((Ut,At)=>{if(typeof At=="string")return;const zt=At.url;At.command?(At.command.perform(At),Ie.toggle()):zt?Ut.ctrlKey||Ut.metaKey||Ut.shiftKey||Ie.toggle():(Ie.setSearch(""),Ie.setCurrentRootAction(At.id)),mt.callbacks?.onSelectAction?.(At)},[Ie,mt]),Ht=(0,Kd.usePointerMovedSinceMount)();return a.createElement("div",{ref:X,style:{maxHeight:w.maxHeight||400,position:"relative",overflow:"auto"}},a.createElement("div",{role:"listbox",id:dr.KBAR_LISTBOX,style:{height:`${Ce.totalSize}px`,width:"100%"}},Ce.virtualItems.map(Ut=>{const At=ce.current[Ut.index],{target:zt,url:Pn}=At,Ta=typeof At!="string"&&{onPointerMove:()=>Ht&&et!==Ut.index&&Ie.setActiveIndex(Ut.index),onPointerDown:()=>Ie.setActiveIndex(Ut.index),onClick:$r=>Pt($r,At)},Va=Ut.index===et,Fa={id:(0,dr.getListboxItemId)(Ut.index),role:"option","aria-selected":Va,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${Ut.start}px)`},...Ta},wa=a.cloneElement(w.onRender({item:At,active:Va}),{ref:Ut.measureRef});return Pn?a.createElement("a",{key:Ut.index,href:typeof Pn=="function"?Pn(Fe):Pn,target:zt,ref:Va?z:null,...Fa},wa):a.createElement("div",{key:Ut.index,ref:Va?z:null,...Fa},wa)})))},Zl=a.forwardRef(({action:w,active:z,currentRootActionId:X},ce)=>{const Ce=a.useMemo(()=>{if(!X)return w.ancestors;const et=w.ancestors.findIndex(mt=>mt.id===X);return w.ancestors.slice(et+1)},[w.ancestors,X]),Ie=(0,St.of)(ef);let Fe=w.name;const Je=et=>!!(et.command?.perform||et.url);return w.children.length&&!Je(w)&&!Fe.endsWith("...")&&(Fe+="..."),a.createElement("div",{ref:ce,className:(0,rt.cx)(Ie.row,z&&Ie.activeRow)},a.createElement("div",{className:Ie.actionContainer},w.icon,a.createElement("div",{className:Ie.textContainer},Ce.map(et=>a.createElement(a.Fragment,{key:et.id},!Je(et)&&a.createElement(a.Fragment,null,a.createElement("span",{className:Ie.breadcrumbAncestor},et.name),a.createElement("span",{className:Ie.breadcrumbSeparator},"\u203A")))),a.createElement("span",null,Fe)),w.subtitle&&a.createElement("span",{className:Ie.subtitleText},w.subtitle)))});Zl.displayName="ResultItem";const ef=w=>({row:(0,rt.css)({padding:w.spacing(1,2),display:"flex",alightItems:"center",justifyContent:"space-between",cursor:"pointer",position:"relative",borderRadius:w.shape.radius.default,margin:w.spacing(0,1)}),activeRow:(0,rt.css)({color:w.colors.text.maxContrast,background:w.colors.emphasize(w.colors.background.primary,.03),"&:before":{display:"block",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:w.spacing(.5),borderRadius:w.shape.radius.default,backgroundImage:w.colors.gradients.brandVertical}}),actionContainer:(0,rt.css)({display:"flex",gap:w.spacing(1),alignItems:"baseline",fontSize:w.typography.fontSize,width:"100%"}),textContainer:(0,rt.css)({display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),breadcrumbAncestor:(0,rt.css)({color:w.colors.text.secondary}),breadcrumbSeparator:(0,rt.css)({color:w.colors.text.secondary,marginLeft:w.spacing(1),marginRight:w.spacing(1)}),subtitleText:(0,rt.css)({...w.typography.bodySmall,color:w.colors.text.secondary,display:"block",flexBasis:"20%",flexGrow:1,flexShrink:0,maxWidth:"fit-content",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})});var tf=e(76459),nf=e.n(tf),af=e(62301),$d=e(24439);const $c=6,Vd=5,sf=4,Vc=3,rf=2,of=1,lf=100,_d=5,cf=nf()(zd,200);async function df(){if(!Rt.TP.user.isSignedIn)return[];const w=(await af.A.getDashboardOpened()).slice(0,_d),X=(await(0,$d.getGrafanaSearcher)().search({kind:["dashboard"],limit:_d,uid:w})).view.toArray();return X.sort((Ce,Ie)=>{const Fe=w.indexOf(Ce.uid),Je=w.indexOf(Ie.uid);return Fe-Je}),X.map(Ce=>{const{url:Ie,name:Fe}=Ce;return{id:`recent-dashboards${Ie}`,name:`${Fe}`,section:(0,Ka.t)("command-palette.section.recent-dashboards","Recent dashboards"),priority:$c,url:Ie}})}async function zd(w){if(w.length===0||!Rt.TP.user.isSignedIn&&!j.$.bootData.settings.anonymousEnabled)return[];const z=await(0,$d.getGrafanaSearcher)().search({kind:["dashboard","folder"],query:w,limit:lf});return z.view.map(ce=>{const{url:Ce,name:Ie,kind:Fe,location:Je}=ce;return{id:`go/${Fe}${Ce}`,name:`${Ie}`,section:Fe==="dashboard"?(0,Ka.t)("command-palette.section.dashboard-search-results","Dashboards"):(0,Ka.t)("command-palette.section.folder-search-results","Folders"),priority:of,url:Ce,subtitle:z.view.dataFrame.meta?.custom?.locationInfo[Je]?.name}})}function uf(w,z){const[X,ce]=(0,a.useState)([]),[Ce,Ie]=(0,a.useState)(!1),Fe=(0,a.useRef)(0);return(0,a.useEffect)(()=>{const Je=Date.now();z&&w.length>0?(Ie(!0),cf(w).then(et=>{Je>Fe.current&&(ce(et),Ie(!1),Fe.current=Je)})):(ce([]),Ie(!1),Fe.current=Je)},[z,w]),{searchResults:X,isFetchingSearchResults:Ce}}var Qr=e(28444),pr=e(28138),mf=e(38645),kd=e(93522);const Hd=w=>{let z=w.children||[];if(w.id==="help"){const X=()=>{pr.A.publish(new Qr.S8({component:kd.N}))};w.children=[...z,...(0,mf.Dd)(),...kc(),{id:"keyboard-shortcuts",text:(0,Ka.t)("nav.help/keyboard-shortcuts","Keyboard shortcuts"),icon:"keyboard",onClick:X}]}return w},_c=(w,z)=>{const X={...w},ce=X.onClick;return X.onClick=()=>{(0,Ys.rR)("grafana_navigation_item_clicked",{path:X.url??X.id,menuIsDocked:z}),ce?.()},X.children&&(X.children=X.children.map(Ce=>_c(Ce,z))),X},fh=(w,z)=>!!(w===z||zc(w,z)),zc=(w,z)=>!!w.children?.some(X=>X===z?!0:zc(X,z)),ql=w=>w?.split("?")[0]??"",Gd=(w,z)=>{const X=ql(z?.url),ce=ql(w.url);return ce&&ce.length>X?.length},jd=(w,z,X)=>{const ce="/dashboards";for(const Ce of w){const Ie=ql(Ce.url),Fe=T.I.stripBaseFromUrl(Ie);if(Fe&&Ce.id!=="starred")if(Fe===z){X=Ce;break}else if(Fe!=="/"&&z.startsWith(Fe))Gd(Ce,X)&&(X=Ce);else if(Fe==="/alerting/list"&&z.startsWith("/alerting/notification/")){X=Ce;break}else Fe===ce&&z.startsWith("/d/")&&Gd(Ce,X)&&(X=Ce);if(Ce.children&&(X=jd(Ce.children,z,X)),ql(X?.url)===z)return X}return X};function kc(){const{buildInfo:w,licenseInfo:z}=j.$,X=z.stateInfo?` (${z.stateInfo})`:"",ce=[];return ce.push({target:"_blank",id:"version",text:`${w.edition}${X}`,url:z.licenseUrl,icon:"external-link-alt"}),w.hasUpdate&&ce.push(),ce}var ec=e(2769),Ji=e(74135);function ff(){const w={},{extensions:z}=(0,R.Kf)({extensionPointId:Ji.S.CommandPalette,context:w,limitPerPlugin:3});return z.map(X=>({section:X.category??"Extensions",priority:rf,id:X.id,name:X.title,target:X.path,perform:()=>X.onClick&&X.onClick()}))}function Yd(w){return"navModel."+w.id}function Qd(w,z=[]){const X=[];for(let ce of w){ce.id==="help"&&(ce=Hd({...ce}),delete ce.url);const{url:Ce,target:Ie,text:Fe,isCreateAction:Je,children:et,onClick:mt,keywords:vt}=ce,Pt=!!et?.length;if(!(Ce||mt||Pt))continue;let Ht=Ce;Ce&&(ce.id==="connections-add-new-connection"||ce.id==="standalone-plugin-page-/connections/add-new-connection")&&(Ht=Ta=>{const Va=vt?.find(Fa=>Fa.toLowerCase().includes(Ta.toLowerCase()));return Va?`${Ce}?search=${Va}`:Ce});const Ut=Je?(0,Ka.t)("command-palette.section.actions","Actions"):(0,Ka.t)("command-palette.section.pages","Pages"),At=Je?Vd:sf,zt=z.map(Ta=>Ta.text).join(" > "),Pn={id:Yd(ce),name:Fe,section:Ut,url:Ht,target:Ie,parent:z.length>0&&!Je?Yd(z[z.length-1]):void 0,perform:mt,keywords:vt?.join(" "),priority:At,subtitle:Je?void 0:zt};if(X.push(Pn),et?.length){const Ta=Qd(et,[...z,ce]);X.push(...Ta)}}return X}const ii=w=>{const z=[{id:"preferences/theme",name:(0,Ka.t)("command-palette.action.change-theme","Change theme..."),keywords:"interface color dark light",section:(0,Ka.t)("command-palette.section.preferences","Preferences"),priority:Vc},{id:"preferences/dark-theme",name:(0,Ka.t)("command-palette.action.dark-theme","Dark"),keywords:"dark theme",perform:()=>(0,ec.K)("dark"),parent:"preferences/theme",priority:Vc},{id:"preferences/light-theme",name:(0,Ka.t)("command-palette.action.light-theme","Light"),keywords:"light theme",perform:()=>(0,ec.K)("light"),parent:"preferences/theme",priority:Vc}],X=ff(),ce=Qd(w);return[...z,...X,...ce]};function xo(w){const[z,X]=(0,a.useState)([]),[ce,Ce]=(0,a.useState)([]),Ie=(0,$t.useSelector)(Fe=>Fe.navBarTree);return(0,a.useEffect)(()=>{const Fe=ii(Ie);X(Fe)},[Ie]),(0,a.useEffect)(()=>{w||df().then(Fe=>Ce(Fe)).catch(Fe=>{console.error("Error loading recent dashboard actions",Fe)})},[w]),w?z:[...ce,...z]}var xi=e(53076);const gf={name:"none",priority:dr.Priority.NORMAL};function Jd(w,z){return z.priority-w.priority}function Xd(){const{search:w,actions:z,rootActionId:X}=(0,dr.useKBar)(vt=>({search:vt.searchQuery,actions:vt.actions,rootActionId:vt.currentRootActionId})),ce=a.useMemo(()=>Object.keys(z).reduce((vt,Pt)=>{const Ht=z[Pt];if(!Ht.parent&&!X&&vt.push(Ht),Ht.id===X)for(let Ut=0;Ut<Ht.children.length;Ut++)vt.push(Ht.children[Ut]);return vt},[]).sort(Jd),[z,X]),Ce=a.useCallback(vt=>{let Pt=[];for(let Ht=0;Ht<vt.length;Ht++)Pt.push(vt[Ht]);return function Ht(Ut,At=Pt){for(let zt=0;zt<Ut.length;zt++)if(Ut[zt].children.length>0){let Pn=Ut[zt].children;for(let Ta=0;Ta<Pn.length;Ta++)At.push(Pn[Ta]);Ht(Ut[zt].children,At)}return At}(vt)},[]),Ie=!w,Fe=a.useMemo(()=>Ie?ce:Ce(ce),[Ce,ce,Ie]),Je=Zd(Fe,w),et=a.useMemo(()=>{let vt={},Pt=[],Ht=[];for(let At=0;At<Je.length;At++){const zt=Je[At],Pn=zt.action,Ta=zt.score||dr.Priority.NORMAL,Va={name:typeof Pn.section=="string"?Pn.section:Pn.section?.name||gf.name,priority:typeof Pn.section=="string"?Ta:Pn.section?.priority||0+Ta};vt[Va.name]||(vt[Va.name]=[],Pt.push(Va)),vt[Va.name].push({priority:Pn.priority+Ta,action:Pn})}Ht=Pt.sort(Jd).map(At=>({name:At.name,actions:vt[At.name].sort(Jd).map(zt=>zt.action)}));let Ut=[];for(let At=0;At<Ht.length;At++){let zt=Ht[At];zt.name!==gf.name&&Ut.push(zt.name);for(let Pn=0;Pn<zt.actions.length;Pn++)Ut.push(zt.actions[Pn])}return Ut},[Je]),mt=a.useMemo(()=>X,[et]);return a.useMemo(()=>({results:et,rootActionId:mt}),[mt,et])}function Zd(w,z){const X=qd(),ce=a.useMemo(()=>({filtered:w,search:z}),[w,z]),{filtered:Ce,search:Ie}=(0,Kd.useThrottledValue)(ce);return a.useMemo(()=>{if(Ie.trim()==="")return Ce.map(et=>({score:0,action:et}));const Fe=Ce.map(({name:et,keywords:mt})=>`${et} ${mt??""}`.toLowerCase()),Je=[];if(Ie.length>pf){const et=Ie.toLowerCase();for(let mt=0;mt<Fe.length;mt++){const Pt=Fe[mt].indexOf(et);if(Pt>-1){const Ht=Pt*-1,Ut=Ce[mt];Je.push({score:Ht,action:Ut})}}}else{const et=X.split(Ie).length,mt=1/0,vt=et<5?4:0,[,Pt,Ht]=X.search(Fe,Ie,vt,mt);if(Pt&&Ht)for(let Ut=0;Ut<Ht.length;Ut++){const At=Ht[Ut],zt=Ht.length-Ut,Pn=Ce[Pt.idx[At]];Je.push({score:zt,action:Pn})}}return Je},[Ce,Ie,X])}const pf=25;function qd(){const w=a.useRef();return w.current||(w.current=new xi.A({intraMode:0,intraIns:0})),w.current}function hf(){const w=(0,St.of)(eu),{query:z,showing:X,searchQuery:ce}=(0,dr.useKBar)(vt=>({showing:vt.visualState===dr.VisualState.showing,searchQuery:vt.searchQuery})),Ce=xo(ce);(0,dr.useRegisterActions)(Ce,[Ce]);const{searchResults:Ie,isFetchingSearchResults:Fe}=uf(ce,X),Je=(0,a.useRef)(null),{overlayProps:et}=(0,Kc.e)({isOpen:X,onClose:()=>z.setVisualState(dr.VisualState.animatingOut)},Je),{dialogProps:mt}=(0,wd.s)({},Je);return(0,a.useEffect)(()=>{X&&(0,Ys.rR)("command_palette_opened")},[X]),Ce.length>0?a.createElement(dr.KBarPortal,null,a.createElement(dr.KBarPositioner,{className:w.positioner},a.createElement(dr.KBarAnimator,{className:w.animator},a.createElement(Fd.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},a.createElement("div",{...et,...mt},a.createElement("div",{className:w.searchContainer},a.createElement(us.I,{name:"search",size:"md"}),a.createElement(dr.KBarSearch,{defaultPlaceholder:(0,Ka.t)("command-palette.search-box.placeholder","Search or jump to..."),className:w.search}),a.createElement("div",{className:w.loadingBarContainer},Fe&&a.createElement(Wd.G,{width:500,delay:0}))),a.createElement("div",{className:w.resultsContainer},a.createElement(vf,{isFetchingSearchResults:Fe,searchResults:Ie}))))))):null}const vf=({isFetchingSearchResults:w,searchResults:z})=>{const{results:X,rootActionId:ce}=Xd(),Ce=(0,St.of)(eu),Ie=(0,Ka.t)("command-palette.section.dashboard-search-results","Dashboards"),Fe=(0,Ka.t)("command-palette.section.folder-search-results","Folders"),Je=(0,a.useMemo)(()=>z.filter(Pt=>Pt.id.startsWith("go/dashboard")).map(Pt=>new dr.ActionImpl(Pt,{store:{}})),[z]),et=(0,a.useMemo)(()=>z.filter(Pt=>Pt.id.startsWith("go/folder")).map(Pt=>new dr.ActionImpl(Pt,{store:{}})),[z]),mt=(0,a.useMemo)(()=>{const Pt=[...X];return et.length>0&&(Pt.push(Fe),Pt.push(...et)),Je.length>0&&(Pt.push(Ie),Pt.push(...Je)),Pt},[X,Ie,Je,Fe,et]);return!w&&mt.length===0?a.createElement(Ko,null):a.createElement(ul,{items:mt,maxHeight:650,onRender:({item:Pt,active:Ht})=>{const Ut=mt[0]===Pt;return typeof Pt=="string"?a.createElement("div",{className:(0,rt.cx)(Ce.sectionHeader,Ut&&Ce.sectionHeaderFirst)},Pt):a.createElement(Zl,{action:Pt,active:Ht,currentRootActionId:ce})}})},eu=w=>({positioner:(0,rt.css)({zIndex:w.zIndex.portal,marginTop:"0px",paddingTop:"4px !important","&::before":{content:'""',position:"fixed",top:0,right:0,bottom:0,left:0,background:w.components.overlay.background,backdropFilter:"blur(1px)"}}),animator:(0,rt.css)({maxWidth:w.breakpoints.values.md,width:"100%",background:w.colors.background.primary,color:w.colors.text.primary,borderRadius:w.shape.radius.default,border:`1px solid ${w.colors.border.weak}`,overflow:"hidden",boxShadow:w.shadows.z3}),loadingBarContainer:(0,rt.css)({position:"absolute",left:0,right:0,bottom:0}),searchContainer:(0,rt.css)({alignItems:"center",background:w.components.input.background,borderBottom:`1px solid ${w.colors.border.weak}`,display:"flex",gap:w.spacing(1),padding:w.spacing(1,2),position:"relative"}),search:(0,rt.css)({fontSize:w.typography.fontSize,width:"100%",boxSizing:"border-box",outline:"none",border:"none",color:w.components.input.text}),spinner:(0,rt.css)({height:"22px"}),resultsContainer:(0,rt.css)({paddingBottom:w.spacing(1)}),sectionHeader:(0,rt.css)({padding:w.spacing(1.5,2,2,2),fontSize:w.typography.bodySmall.fontSize,fontWeight:w.typography.fontWeightMedium,color:w.colors.text.secondary,borderTop:`1px solid ${w.colors.border.weak}`,marginTop:w.spacing(1)}),sectionHeaderFirst:(0,rt.css)({paddingBottom:w.spacing(1),borderTop:"none",marginTop:0})});var tu=e(86634),Ef=e(40276),yf=e(78685),Df=e(8887),nu=e(18759);const au=({children:w})=>{const z=(0,St.of)(Hc);return a.createElement(a.Fragment,null,w,a.createElement("span",{className:z.highlight}))},Hc=w=>({highlight:(0,rt.css)({backgroundColor:w.colors.success.main,borderRadius:w.shape.radius.circle,width:"6px",height:"6px",display:"inline-block;",position:"absolute",top:"50%",transform:"translateY(-50%)"})});var Pf=e(50720);function su({children:w,isActive:z,onClick:X,target:ce,url:Ce}){const Ie=(0,St.$j)(),Fe=Cf(Ie,z),Je=!ce&&Ce.startsWith("/")?Pf.N:"a",et=a.createElement("div",{className:Fe.linkContent},w,ce==="_blank"&&a.createElement(us.I,{"data-testid":"external-link-icon",name:"external-link-alt"}));return a.createElement(Je,{"data-testid":kr.Tp.components.NavMenu.item,className:(0,rt.cx)(Fe.container,{[Fe.containerActive]:z}),href:Ce,target:ce,onClick:X},et)}su.displayName="MegaMenuItemText";const Cf=(w,z)=>({container:(0,rt.css)({alignItems:"center",color:z?w.colors.text.primary:w.colors.text.secondary,height:"100%",position:"relative",width:"100%","&:hover, &:focus-visible":{color:w.colors.text.primary,textDecoration:"underline"},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${w.colors.primary.main}`,outlineOffset:"-2px",transition:"none"}}),containerActive:(0,rt.css)({backgroundColor:w.colors.background.secondary,borderTopRightRadius:w.shape.radius.default,borderBottomRightRadius:w.shape.radius.default,position:"relative","&::before":{backgroundImage:w.colors.gradients.brandVertical,borderRadius:w.shape.radius.default,content:'" "',display:"block",height:"100%",position:"absolute",transform:"translateX(-50%)",width:w.spacing(.5)}}),linkContent:(0,rt.css)({alignItems:"center",display:"flex",gap:"0.5rem",height:"100%",width:"100%"})}),tc=2;function ru({link:w,activeItem:z,level:X=0,onClick:ce}){const{chrome:Ce}=(0,Wo.Il)(),Fe=Ce.useState().megaMenuDocked,Je=(0,ds.zy)(),et=w.highlightText?au:a.Fragment,mt=zc(w,z),vt=w===z||X===tc&&mt,[Pt,Ht]=(0,yf.A)(`grafana.navigation.expanded[${w.text}]`,!!mt),Ut=X<tc&&!!(ou(w)||w.emptyMessage),At=(0,a.useRef)(null),zt=(0,St.of)(bf);return(0,a.useEffect)(()=>{mt&&Ht(!0)},[mt,Je,Fe,Ht]),(0,a.useEffect)(()=>{Fe&&vt&&At.current&&Tf(At.current)&&At.current.scrollIntoView({block:"center"})},[vt,Fe]),w.url?a.createElement("li",{ref:At,className:zt.listItem},a.createElement("div",{className:(0,rt.cx)(zt.menuItem,{[zt.menuItemWithIcon]:!!(X===0&&w.icon)})},X!==0&&a.createElement(nu.T,{level:X===tc?X-1:X,spacing:3}),X===tc&&a.createElement("div",{className:zt.itemConnector}),a.createElement("div",{className:zt.collapseButtonWrapper},Ut&&a.createElement(Fr.K,{"aria-label":`${Pt?"Collapse":"Expand"} section ${w.text}`,className:zt.collapseButton,onClick:()=>Ht(!Pt),name:Pt?"angle-down":"angle-right",size:"md",variant:"secondary"})),a.createElement("div",{className:zt.collapsibleSectionWrapper},a.createElement(su,{isActive:vt,onClick:()=>{w.onClick?.(),ce?.()},target:w.target,url:w.url},a.createElement("div",{className:(0,rt.cx)(zt.labelWrapper,{[zt.hasActiveChild]:mt,[zt.labelWrapperWithIcon]:!!(X===0&&w.icon)})},X===0&&w.icon&&a.createElement(et,null,a.createElement(us.I,{className:zt.icon,name:(0,Df.Uo)(w.icon)??"link",size:"lg"})),a.createElement(il.E,{truncate:!0},w.text))))),Ut&&Pt&&a.createElement("ul",{className:zt.children},ou(w)?w.children.filter(Pn=>!Pn.isCreateAction).map(Pn=>a.createElement(ru,{key:`${w.text}-${Pn.text}`,link:Pn,activeItem:z,onClick:ce,level:X+1})):a.createElement("div",{className:zt.emptyMessage,"aria-live":"polite"},w.emptyMessage))):null}const bf=w=>({icon:(0,rt.css)({width:w.spacing(3)}),listItem:(0,rt.css)({flex:1,maxWidth:"100%"}),menuItem:(0,rt.css)({display:"flex",alignItems:"center",gap:w.spacing(1),height:w.spacing(4),paddingLeft:w.spacing(.5),position:"relative"}),menuItemWithIcon:(0,rt.css)({paddingLeft:w.spacing(0)}),collapseButtonWrapper:(0,rt.css)({display:"flex",justifyContent:"center",width:w.spacing(3),flexShrink:0}),itemConnector:(0,rt.css)({position:"relative",height:"100%",width:w.spacing(1.5),"&::before":{borderLeft:`1px solid ${w.colors.border.medium}`,content:'""',height:"100%",right:0,position:"absolute",transform:"translateX(50%)"}}),collapseButton:(0,rt.css)({margin:0}),collapsibleSectionWrapper:(0,rt.css)({alignItems:"center",display:"flex",flex:1,height:"100%",minWidth:0}),labelWrapper:(0,rt.css)({display:"flex",alignItems:"center",gap:w.spacing(2),minWidth:0,paddingLeft:w.spacing(1)}),labelWrapperWithIcon:(0,rt.css)({paddingLeft:w.spacing(.5)}),hasActiveChild:(0,rt.css)({color:w.colors.text.primary}),children:(0,rt.css)({display:"flex",listStyleType:"none",flexDirection:"column"}),emptyMessage:(0,rt.css)({color:w.colors.text.secondary,fontStyle:"italic",padding:w.spacing(1,1.5,1,7)})});function ou(w){return!!(w.children&&w.children.length>0)}function Tf(w){const z=w.getBoundingClientRect();return z.bottom<0||z.top>=window.innerHeight}const iu="300px",nc=a.memo((0,a.forwardRef)(({onClose:w,...z},X)=>{const ce=(0,$t.useSelector)(Pt=>Pt.navBarTree),Ce=(0,St.of)(lu),Ie=(0,ds.zy)(),{chrome:Fe}=(0,Wo.Il)(),Je=Fe.useState(),et=ce.filter(Pt=>Pt.id!=="profile"&&Pt.id!=="help").map(Pt=>_c(Pt,Je.megaMenuDocked)),mt=jd(et,Ie.pathname),vt=()=>{Fe.setMegaMenuDocked(!Je.megaMenuDocked),Je.megaMenuDocked&&Fe.setMegaMenuOpen(!1),setTimeout(()=>{document.getElementById(Je.megaMenuDocked?"mega-menu-toggle":"dock-menu-button")?.focus()})};return a.createElement("div",{"data-testid":kr.Tp.components.NavMenu.Menu,ref:X,...z},a.createElement("div",{className:Ce.mobileHeader},a.createElement(us.I,{name:"bars",size:"xl"}),a.createElement(Fr.K,{tooltip:(0,Ka.t)("navigation.megamenu.close","Close menu"),name:"times",onClick:w,size:"xl",variant:"secondary"})),a.createElement("nav",{className:Ce.content},a.createElement(Ef.E,{showScrollIndicators:!0,hideHorizontalTrack:!0},a.createElement("ul",{className:Ce.itemList,"aria-label":(0,Ka.t)("navigation.megamenu.list-label","Navigation")},et.map((Pt,Ht)=>a.createElement(Zt.B,{key:Pt.text,direction:Ht===0?"row-reverse":"row",alignItems:"center"},Ht===0&&a.createElement(Fr.K,{id:"dock-menu-button",className:Ce.dockMenuButton,tooltip:Je.megaMenuDocked?(0,Ka.t)("navigation.megamenu.undock","Undock menu"):(0,Ka.t)("navigation.megamenu.dock","Dock menu"),name:"web-section-alt",onClick:vt,variant:"secondary"}),a.createElement(ru,{link:Pt,onClick:Je.megaMenuDocked?void 0:w,activeItem:mt})))))))}));nc.displayName="MegaMenu";const lu=w=>({content:(0,rt.css)({display:"flex",flexDirection:"column",height:"100%",minHeight:0,position:"relative"}),mobileHeader:(0,rt.css)({display:"flex",justifyContent:"space-between",padding:w.spacing(1,1,1,2),borderBottom:`1px solid ${w.colors.border.weak}`,[w.breakpoints.up("md")]:{display:"none"}}),itemList:(0,rt.css)({boxSizing:"border-box",display:"flex",flexDirection:"column",listStyleType:"none",padding:w.spacing(1,1,2,1),[w.breakpoints.up("md")]:{width:iu}}),dockMenuButton:(0,rt.css)({display:"none",[w.breakpoints.up("xl")]:{display:"inline-flex"}})});var Ll=e(13390),Oi=e(27746),ac=e(28215);function cu({href:w,isCurrent:z,text:X,index:ce,flexGrow:Ce}){const Ie=(0,St.of)(du),Fe=()=>{(0,Ys.rR)("grafana_breadcrumb_clicked",{url:w})};return a.createElement("li",{className:Ie.breadcrumbWrapper,style:{flexGrow:Ce}},z?a.createElement("span",{"data-testid":Ll.X.Breadcrumbs.breadcrumb(X),className:Ie.breadcrumb,"aria-current":"page",title:X},X):a.createElement(a.Fragment,null,a.createElement("a",{onClick:Fe,"data-testid":Ll.X.Breadcrumbs.breadcrumb(X),className:(0,rt.cx)(Ie.breadcrumb,Ie.breadcrumbLink),title:X,href:w},X),a.createElement("div",{className:Ie.separator,"aria-hidden":!0},a.createElement(us.I,{name:"angle-right"}))))}const du=w=>({breadcrumb:(0,rt.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",padding:w.spacing(0,.5),whiteSpace:"nowrap",color:w.colors.text.secondary}),breadcrumbLink:(0,rt.css)({color:w.colors.text.primary,"&:hover":{textDecoration:"underline"}}),breadcrumbWrapper:(0,rt.css)({alignItems:"center",color:w.colors.text.primary,display:"flex",flex:1,minWidth:0,maxWidth:"max-content",[w.breakpoints.down("sm")]:{display:"none","&:nth-last-child(2)":{display:"flex",minWidth:"40px"},"&:last-child":{display:"flex"}}}),separator:(0,rt.css)({color:w.colors.text.secondary})});function Mf({breadcrumbs:w,className:z}){const X=(0,St.of)(uu);return a.createElement("nav",{"aria-label":"Breadcrumbs",className:z},a.createElement("ol",{className:X.breadcrumbs},w.map((ce,Ce)=>a.createElement(cu,{...ce,isCurrent:Ce===w.length-1,key:Ce,index:Ce,flexGrow:Sf(Ce,w.length)}))))}function Sf(w,z){return z<5&&w>0&&w<z-2||z>6&&w>1&&w<z-3?4:10}const uu=w=>({breadcrumbs:(0,rt.css)({display:"flex",alignItems:"center",flexWrap:"nowrap",overflow:"hidden"})});var sc=e(3984),Ii=e(57571),Gc=e(10804);const mu="mega-menu-toggle";function rc({actions:w,searchBarHidden:z,sectionNav:X,pageNav:ce,onToggleMegaMenu:Ce,onToggleSearchBar:Ie,onToggleKioskMode:Fe}){const{chrome:Je}=(0,Wo.Il)(),et=Je.useState(),mt=(0,$t.useSelector)(Ht=>Ht.navIndex)[ac.Id],vt=(0,St.of)(fu),Pt=(0,sc.Z)(X,ce,mt);return a.createElement("div",{"data-testid":Ll.X.NavToolbar.container,className:vt.pageToolbar},a.createElement("div",{className:vt.menuButton},a.createElement(Fr.K,{id:mu,name:"bars",tooltip:et.megaMenuOpen?(0,Ka.t)("navigation.toolbar.close-menu","Close menu"):(0,Ka.t)("navigation.toolbar.open-menu","Open menu"),tooltipPlacement:"bottom",size:"xl",onClick:Ce,"data-testid":Ll.X.NavBar.Toggle.button})),a.createElement(Mf,{breadcrumbs:Pt,className:vt.breadcrumbsWrapper}),a.createElement("div",{className:vt.actions},w,z&&a.createElement(Oi.I,{onClick:Fe,narrow:!0,title:(0,Ka.t)("navigation.toolbar.enable-kiosk","Enable kiosk mode"),icon:"monitor"}),w&&a.createElement(Gc.K,null),a.createElement(Oi.I,{onClick:Ie,narrow:!0,title:(0,Ka.t)("navigation.toolbar.toggle-search-bar","Toggle top search bar")},a.createElement(us.I,{name:z?"angle-down":"angle-up",size:"xl"}))))}const fu=w=>({breadcrumbsWrapper:(0,rt.css)({display:"flex",overflow:"hidden",[w.breakpoints.down("sm")]:{minWidth:"50%"}}),pageToolbar:(0,rt.css)({height:Ii.l,display:"flex",padding:w.spacing(0,1,0,2),alignItems:"center",borderBottom:`1px solid ${w.colors.border.weak}`}),menuButton:(0,rt.css)({display:"flex",alignItems:"center",marginRight:w.spacing(1)}),actions:(0,rt.css)({label:"NavToolbar-actions",display:"flex",alignItems:"center",flexWrap:"nowrap",justifyContent:"flex-end",paddingLeft:w.spacing(1),flexGrow:1,gap:w.spacing(1),minWidth:0,".body-drawer-open &":{display:"none"}})});function xf({}){const w=(0,St.$j)(),{chrome:z}=(0,Wo.Il)(),X=z.useState(),ce=X.searchBarHidden||X.kioskMode===$t.KioskMode.TV,Ce=(0,a.useRef)(null),Ie=(0,a.useRef)(null),Fe=w.transitions.duration.shortest,Je=(0,St.of)(gu,Fe),et=X.megaMenuOpen&&!X.megaMenuDocked,mt=()=>z.setMegaMenuOpen(!1),{overlayProps:vt,underlayProps:Pt}=(0,Kc.e)({isDismissable:!0,isOpen:!0,onClose:mt,shouldCloseOnInteractOutside:At=>!document.getElementById(mu)?.contains(At)},Ce),{dialogProps:Ht}=(0,wd.s)({},Ce),Ut=(0,St.of)(Of,ce);return a.createElement("div",{className:Ut.wrapper},a.createElement(Kc.Sf,null,a.createElement(tu.A,{nodeRef:Ce,in:et,unmountOnExit:!0,classNames:Je.overlay,timeout:{enter:Fe,exit:0}},a.createElement(Fd.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},a.createElement(nc,{className:Ut.menu,onClose:mt,ref:Ce,...vt,...Ht}))),a.createElement(tu.A,{nodeRef:Ie,in:et,unmountOnExit:!0,classNames:Je.backdrop,timeout:{enter:Fe,exit:0}},a.createElement("div",{ref:Ie,className:Ut.backdrop,...Pt}))))}const Of=(w,z)=>{const X=z?Ii.l:Ii.l*2;return{backdrop:(0,rt.css)({backdropFilter:"blur(1px)",backgroundColor:w.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:z?0:Ii.l,zIndex:w.zIndex.modalBackdrop,[w.breakpoints.up("md")]:{top:X}}),menu:(0,rt.css)({display:"flex",bottom:0,flexDirection:"column",left:0,right:0,zIndex:w.zIndex.modal,position:"fixed",top:z?0:Ii.l,backgroundColor:w.colors.background.primary,boxSizing:"content-box",flex:"1 1 0",[w.breakpoints.up("md")]:{right:"unset",borderRight:`1px solid ${w.colors.border.weak}`,top:X}}),wrapper:(0,rt.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:w.zIndex.sidemenu})}},gu=(w,z)=>{const X={transitionDuration:`${z}ms`,transitionTimingFunction:w.transitions.easing.easeInOut,[w.breakpoints.down("md")]:{overflow:"hidden"}},ce={...X,transitionProperty:"box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},Ce={...X,transitionProperty:"opacity"},Ie={width:"100%",[w.breakpoints.up("md")]:{boxShadow:w.shadows.z3,width:iu}},Fe={boxShadow:"none",width:0},Je={opacity:1},et={opacity:0};return{backdrop:{enter:(0,rt.css)(et),enterActive:(0,rt.css)(Ce,Je),enterDone:(0,rt.css)(Je)},overlay:{enter:(0,rt.css)(Fe),enterActive:(0,rt.css)(ce,Ie),enterDone:(0,rt.css)(Ie)}}};var pu=e(24120),If=e(49426);function gh(w,z){if(w===z)return!0;if(!(w instanceof Object)||!(z instanceof Object))return!1;const X=Object.keys(w),ce=X.length;for(let Ce=0;Ce<ce;Ce++)if(!(X[Ce]in z))return!1;for(let Ce=0;Ce<ce;Ce++)if(w[X[Ce]]!==z[X[Ce]])return!1;return ce===Object.keys(z).length}const oc="grafana.navigation.docked",jc="grafana.navigation.open";class Af{constructor(){this.searchBarStorageKey="SearchBar_Hidden",this.routeChangeHandled=!0,this.megaMenuDocked=!!(window.innerWidth>=j.$.theme2.breakpoints.values.xl&&Si.A.getBool(oc,window.innerWidth>=j.$.theme2.breakpoints.values.xxl)),this.sessionStorageData=window.sessionStorage.getItem("returnToPrevious"),this.returnToPreviousData=this.sessionStorageData?JSON.parse(this.sessionStorageData):void 0,this.state=new If.t({chromeless:!0,sectionNav:{node:{text:(0,Ka.t)("nav.home.title","Home")},main:{text:""}},searchBarHidden:Si.A.getBool(this.searchBarStorageKey,!1),megaMenuOpen:this.megaMenuDocked&&Si.A.getBool(jc,!0),megaMenuDocked:this.megaMenuDocked,kioskMode:null,layout:Ye.k.Canvas,returnToPrevious:this.returnToPreviousData}),this.setReturnToPrevious=z=>{const X=this.state.getValue().returnToPrevious;(0,Ys.rR)("grafana_return_to_previous_button_created",{page:z.href,previousPage:X?.href}),this.update({returnToPrevious:z}),window.sessionStorage.setItem("returnToPrevious",JSON.stringify(z))},this.clearReturnToPrevious=z=>{const X=this.state.getValue().returnToPrevious;X&&(0,Ys.rR)("grafana_return_to_previous_button_dismissed",{action:z,page:X.href}),this.update({returnToPrevious:void 0}),window.sessionStorage.removeItem("returnToPrevious")},this.setMegaMenuOpen=z=>{const{megaMenuDocked:X}=this.state.getValue();X&&Si.A.set(jc,z),(0,Ys.rR)("grafana_mega_menu_open",{state:z}),this.update({megaMenuOpen:z})},this.setMegaMenuDocked=(z,X=!0)=>{X&&Si.A.set(oc,z),(0,Ys.rR)("grafana_mega_menu_docked",{state:z}),this.update({megaMenuDocked:z})},this.onToggleSearchBar=()=>{const{searchBarHidden:z,kioskMode:X}=this.state.getValue(),ce=!z;Si.A.set(this.searchBarStorageKey,ce),X&&x.Ny.partial({kiosk:null}),this.update({searchBarHidden:ce,kioskMode:null})},this.onToggleKioskMode=()=>{const z=this.getNextKioskMode();this.update({kioskMode:z}),x.Ny.partial({kiosk:this.getKioskUrlValue(z)})}}setMatchedRoute(z){this.currentRoute!==z&&(this.currentRoute=z,this.routeChangeHandled=!1)}update(z){const X=this.state.getValue(),ce={...X};this.routeChangeHandled||(ce.actions=void 0,ce.pageNav=void 0,ce.sectionNav={node:{text:(0,Ka.t)("nav.home.title","Home")},main:{text:""}},ce.chromeless=this.currentRoute?.chromeless,ce.layout=Ye.k.Standard,this.routeChangeHandled=!0),Object.assign(ce,z),ce.chromeless=ce.kioskMode===$t.KioskMode.Full||this.currentRoute?.chromeless,this.ignoreStateUpdate(ce,X)||this.state.next(ce)}ignoreStateUpdate(z,X){return!!(gh(z,X)||(z.sectionNav!==X.sectionNav||z.pageNav!==X.pageNav)&&z.actions===X.actions&&z.layout===X.layout&&Yc(z.sectionNav.node,X.sectionNav.node)&&Yc(z.pageNav,X.pageNav))}useState(){return(0,pu.A)(this.state,this.state.getValue())}exitKioskMode(){this.update({kioskMode:void 0}),x.Ny.partial({kiosk:null})}setKioskModeFromUrl(z){switch(z){case"tv":this.update({kioskMode:$t.KioskMode.TV});break;case"1":case!0:this.update({kioskMode:$t.KioskMode.Full})}}getKioskUrlValue(z){switch(z){case $t.KioskMode.TV:return"tv";case $t.KioskMode.Full:return!0;default:return null}}getNextKioskMode(){const{kioskMode:z,searchBarHidden:X}=this.state.getValue();return X||z===$t.KioskMode.TV?(pr.A.emit(Qi.r1.alertSuccess,[(0,Ka.t)("navigation.kiosk.tv-alert","Press ESC to exit kiosk mode")]),$t.KioskMode.Full):z?null:$t.KioskMode.TV}}function Yc(w,z){if(w===z)return!0;const X=w?.children?.find(Ce=>Ce.active),ce=z?.children?.find(Ce=>Ce.active);return w?.text===z?.text&&w?.url===z?.url&&X?.url===ce?.url&&Yc(w?.parentItem,z?.parentItem)}var Bl=e(19727);const hu=({label:w,onClick:z,onDismiss:X})=>{const ce=(0,St.of)(Rf);return a.createElement(Bl.e,{className:ce.buttonGroup},a.createElement(ie.$n,{icon:"angle-left",size:"sm",variant:"primary",fill:"outline",onClick:z,title:w,className:ce.mainDismissableButton},w),a.createElement(ie.$n,{icon:"times","aria-label":(0,Ka.t)("return-to-previous.dismissable-button","Close"),variant:"primary",fill:"outline",size:"sm",onClick:X}))},Rf=w=>({mainDismissableButton:(0,rt.css)({width:"100%",["> span"]:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"270px",display:"inline-block"}}),buttonGroup:(0,rt.css)({width:"fit-content",backgroundColor:w.colors.background.secondary})});hu.displayName="DismissableButton";const vu=({href:w,title:z})=>{const X=(0,St.of)(Lf),{chrome:ce}=(0,Wo.Il)(),Ce=(0,a.useCallback)(()=>{x.Ny.push(w),ce.clearReturnToPrevious("clicked")},[w,ce]),Ie=(0,a.useCallback)(()=>{(0,Ys.rR)("grafana_return_to_previous_button_dismissed",{action:"dismissed",page:w}),ce.clearReturnToPrevious("dismissed")},[w,ce]);return a.createElement("div",{className:X.returnToPrevious},a.createElement(hu,{label:(0,Ka.t)("return-to-previous.button.label","Back to {{title}}",{title:z}),onClick:Ce,onDismiss:Ie}))},Lf=w=>({returnToPrevious:(0,rt.css)({label:"return-to-previous",display:"flex",justifyContent:"center",left:"50%",transform:"translateX(-50%)",zIndex:w.zIndex.tooltip,position:"fixed",bottom:w.spacing.x4,boxShadow:w.shadows.z3})});vu.displayName="ReturnToPrevious";var Qc=e(40672),Jc=e(83122),Bf=e(42941),Uf=e(87978),Eu=e(62372),Nf=e(49185),ml=e(69386),wf=e(4172);function Ff({feedUrl:w}){const z=(0,St.of)(Wf),{state:X,getNews:ce}=(0,wf.n)(w),[Ce,Ie]=(0,Nf.A)();return(0,a.useEffect)(()=>{ce()},[ce]),X.error?a.createElement("div",{className:z.innerWrapper},X.error&&X.error.message):a.createElement("div",{ref:Ce},X.loading?a.createElement(a.Fragment,null,a.createElement(ml.K.Skeleton,{showImage:!0,width:Ie.width}),a.createElement(ml.K.Skeleton,{showImage:!0,width:Ie.width}),a.createElement(ml.K.Skeleton,{showImage:!0,width:Ie.width}),a.createElement(ml.K.Skeleton,{showImage:!0,width:Ie.width}),a.createElement(ml.K.Skeleton,{showImage:!0,width:Ie.width})):a.createElement(a.Fragment,null,Ie.width>0&&X.value?.map((Fe,Je)=>a.createElement(ml.K,{key:Je,index:Je,showImage:!0,width:Ie.width,data:X.value}))),a.createElement("div",{className:z.grot},a.createElement("a",{href:"https://grafana.com/blog/",target:"_blank",rel:"noreferrer",title:"Go to Grafana labs blog"},a.createElement("img",{src:"public/img/grot-news.svg",alt:"Grot reading news"}))))}const Wf=w=>({innerWrapper:(0,rt.css)({width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}),grot:(0,rt.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:w.spacing(5,0),img:{width:"186px",height:"186px"}})});function yu({className:w}){const[z,X]=(0,Bf.A)(!1),ce=(0,St.of)(Du);return a.createElement(a.Fragment,null,a.createElement(Oi.I,{className:w,onClick:X,iconOnly:!0,icon:"rss","aria-label":"News"}),z&&a.createElement(Uf._,{title:a.createElement("div",{className:ce.title},a.createElement(il.E,{element:"h3"},(0,Ka.t)("news.title","Latest from the blog")),a.createElement("a",{href:"https://grafana.com/blog/",target:"_blank",rel:"noreferrer",title:"Go to Grafana labs blog",className:ce.grot},a.createElement("img",{src:"public/img/grot-news.svg",alt:"Grot reading news"})),a.createElement("div",{className:ce.actions},a.createElement(Fr.K,{name:"times",variant:"secondary",onClick:X,"data-testid":kr.Tp.components.Drawer.General.close,tooltip:(0,Ka.t)("news.drawer.close","Close Drawer")}))),onClose:X,size:"md"},a.createElement(Ff,{feedUrl:Eu.$})))}const Du=w=>({title:(0,rt.css)({display:"flex",alignItems:"center",justifyContent:"center",gap:w.spacing(2),borderBottom:`1px solid ${w.colors.border.weak}`}),grot:(0,rt.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:w.spacing(2,0),img:{width:"75px",height:"75px"}}),actions:(0,rt.css)({position:"absolute",right:w.spacing(1),top:w.spacing(2)})});var Pu=e(32931);function ic({orgs:w,onSelectChange:z}){const X=(0,St.of)(Kf);return a.createElement(Bo.i,{"aria-label":"Change organization",variant:"secondary",buttonCss:X.buttonCss,size:"md",label:"",fill:"text",isFullWidth:!1,options:w.map(ce=>({label:ce.name,description:ce.role,value:ce})),onChange:z,icon:"building"})}const Kf=w=>({buttonCss:(0,rt.css)({color:w.colors.text.secondary,"&:hover":{color:w.colors.text.primary}})});function lc({orgs:w,onSelectChange:z}){const X=(0,St.of)(Cu),{orgName:ce,orgId:Ce,orgRole:Ie}=Rt.TP.user,[Fe,Je]=(0,a.useState)(()=>({label:ce,value:{role:Ie,orgId:Ce,name:ce},description:Ie})),et=mt=>{Je(mt),z(mt)};return a.createElement(le.l6,{"aria-label":"Change organization",width:"auto",value:Fe,prefix:a.createElement(us.I,{className:"prefix-icon",name:"building"}),className:X.select,options:w.map(mt=>({label:mt.name,description:mt.role,value:mt})),onChange:et})}const Cu=w=>({select:(0,rt.css)({border:"none",background:"none",color:w.colors.text.secondary,"&:hover":{color:w.colors.text.primary,"& .prefix-icon":(0,rt.css)({color:w.colors.text.primary})}})});function $f(){const w=(0,St.$j)(),z=(0,$t.useDispatch)(),X=(0,$t.useSelector)(et=>et.organization.userOrgs),ce=et=>{et.value&&((0,Pu.bA)(et.value.orgId),x.Ny.push(`/?orgId=${et.value.orgId}`),window.location.reload())};(0,a.useEffect)(()=>{Rt.TP.isSignedIn&&z((0,Pu.wV)())},[z]);const Ce=w.breakpoints.values.sm,[Ie,Fe]=(0,a.useState)(!window.matchMedia(`(min-width: ${Ce}px)`).matches);if((0,dl.Y)({breakpoint:Ce,onChange:et=>{Fe(!et.matches)}}),X?.length<=1)return null;const Je=Ie?ic:lc;return a.createElement(Je,{orgs:X,onSelectChange:ce})}var Xc=e(38138);function bu(w){const z=[];for(const X of w)X.isCreateAction&&z.push(X),X.children&&z.push(...bu(X.children));return z}const Vf=({})=>{const w=(0,St.of)(_f),z=(0,St.$j)(),X=(0,$t.useSelector)(vt=>vt.navBarTree),ce=z.breakpoints.values.sm,[Ce,Ie]=(0,a.useState)(!1),[Fe,Je]=(0,a.useState)(!window.matchMedia(`(min-width: ${ce}px)`).matches),et=(0,a.useMemo)(()=>bu(X),[X]);(0,dl.Y)({breakpoint:ce,onChange:vt=>{Je(!vt.matches)}});const mt=()=>a.createElement(Xc.W,null,et.map((vt,Pt)=>a.createElement(Xc.W.Item,{key:Pt,url:vt.url,label:vt.text,onClick:()=>(0,Ys.rR)("grafana_menu_item_clicked",{url:vt.url,from:"quickadd"})})));return et.length>0?a.createElement(a.Fragment,null,a.createElement(Jc.m,{overlay:mt,placement:"bottom-end",onVisibleChange:Ie},a.createElement(Oi.I,{iconOnly:!0,icon:Fe?"plus-circle":"plus",isOpen:Fe?void 0:Ce,"aria-label":"New"})),a.createElement(Gc.K,{className:w.separator})):null},_f=w=>({buttonContent:(0,rt.css)({alignItems:"center",display:"flex"}),buttonText:(0,rt.css)({[w.breakpoints.down("md")]:{display:"none"}}),separator:(0,rt.css)({[w.breakpoints.down("sm")]:{display:"none"}})});function Jr(){const w=(0,ds.zy)(),z=(0,St.of)(Tu);let X=Qc.sQ.sanitizeUrl(T.I.getUrlForPartial(w,{forceLogin:"true"}));return X.startsWith("//")&&(X=X.replace(/\/+/g,"/")),a.createElement("a",{className:z.link,href:X,target:"_self"},"Sign in")}const Tu=w=>({link:(0,rt.css)({paddingRight:w.spacing(1),whiteSpace:"nowrap","&:hover":{textDecoration:"underline"}})});var zf=e(64539);function fl({node:w}){const z=(0,St.of)(Mu),X=_c((0,p.cloneDeep)(w),!1);return X?a.createElement(Xc.W,{header:a.createElement("div",{onClick:ce=>ce.stopPropagation(),className:z.header},a.createElement("div",null,X.text),X.subTitle&&a.createElement("div",{className:z.subTitle},X.subTitle))},X.children?.map(ce=>ce.url?a.createElement(zf.D,{url:ce.url,label:ce.text,icon:ce.icon,target:ce.target,key:ce.id}):a.createElement(zf.D,{icon:ce.icon,onClick:ce.onClick,label:ce.text,key:ce.id}))):null}const Mu=w=>({header:(0,rt.css)({fontSize:w.typography.h5.fontSize,fontWeight:w.typography.h5.fontWeight,padding:w.spacing(.5,1),whiteSpace:"nowrap"}),subTitle:(0,rt.css)({color:w.colors.text.secondary,fontSize:w.typography.bodySmall.fontSize})});var kf=e(16797),Su=e(63917);function Hf(){const w=(0,St.$j)(),{query:z}=(0,dr.useKBar)(Fe=>({kbarSearchQuery:Fe.searchQuery,kbarIsOpen:Fe.visualState===dr.VisualState.showing})),X=w.breakpoints.values.sm,[ce,Ce]=(0,a.useState)(!window.matchMedia(`(min-width: ${X}px)`).matches);(0,dl.Y)({breakpoint:X,onChange:Fe=>{Ce(!Fe.matches)}});const Ie=()=>{z.toggle()};return ce?a.createElement(Oi.I,{iconOnly:!0,icon:"search","aria-label":(0,Ka.t)("nav.search.placeholderCommandPalette","Search or jump to..."),onClick:Ie}):a.createElement(Gf,{onClick:Ie})}function Gf({onClick:w}){const z=(0,St.of)(jf),X=(0,a.useMemo)(()=>(0,Su.gn)(),[]);return a.createElement("div",{className:z.wrapper},a.createElement("div",{className:z.inputWrapper},a.createElement("div",{className:z.prefix},a.createElement(us.I,{name:"search"})),a.createElement("button",{className:z.fakeInput,onClick:w},(0,Ka.t)("nav.search.placeholderCommandPalette","Search or jump to...")),a.createElement("div",{className:z.suffix},a.createElement(us.I,{name:"keyboard"}),a.createElement("span",{className:z.shortcut},X,"+k"))))}const jf=w=>{const z=(0,me.n)({theme:w});return{wrapper:z.wrapper,inputWrapper:z.inputWrapper,prefix:z.prefix,suffix:(0,rt.css)([z.suffix,{display:"flex",gap:w.spacing(.5)}]),shortcut:(0,rt.css)({fontSize:w.typography.bodySmall.fontSize}),fakeInput:(0,rt.css)([z.input,{textAlign:"left",paddingLeft:28,color:w.colors.text.disabled,"&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":(0,rt.css)`
          ${(0,kf.focusCss)(w)}
        `}]),button:(0,rt.css)({width:"100%",textAlign:"center","> *":{width:"100%",textAlign:"center",justifyContent:"center",gap:"1ch"}})}};function Zc({children:w,align:z="left"}){const X=(0,St.of)(Yf),Ce=(0,St.$j)().breakpoints.values.sm,[Ie,Fe]=(0,a.useState)(!window.matchMedia(`(min-width: ${Ce}px)`).matches);return(0,dl.Y)({breakpoint:Ce,onChange:Je=>{Fe(!Je.matches)}}),Ie?a.createElement(a.Fragment,null,w):a.createElement("div",{"data-testid":"wrapper",className:(0,rt.cx)(X.wrapper,{[X[z]]:z==="right"})},w)}const Yf=w=>({wrapper:(0,rt.css)({display:"flex",gap:w.spacing(.5),alignItems:"center"}),right:(0,rt.css)({justifyContent:"flex-end"}),left:(0,rt.css)({}),center:(0,rt.css)({})}),Qf=a.memo(function(){const z=(0,St.of)(Jf),X=(0,$t.useSelector)(et=>et.navIndex),ce=(0,ds.zy)(),Ce=(0,p.cloneDeep)(X.help),Ie=Ce?Hd(Ce):void 0,Fe=X.profile;let Je=_.$W.appSubUrl||"/";return!_.$W.bootData.user.isSignedIn&&!_.$W.anonymousEnabled&&(Je=Qc.sQ.sanitizeUrl(T.I.getUrlForPartial(ce,{forceLogin:"true"}))),a.createElement("div",{className:z.layout},a.createElement(Zc,null,a.createElement("a",{className:z.logo,href:Je,title:"Go to home"},a.createElement(Di.M.MenuLogo,{className:z.img})),a.createElement($f,null)),a.createElement(Zc,null,a.createElement(Hf,null)),a.createElement(Zc,{align:"right"},a.createElement(Vf,null),Ie&&a.createElement(Jc.m,{overlay:()=>a.createElement(fl,{node:Ie}),placement:"bottom-end"},a.createElement(Oi.I,{iconOnly:!0,icon:"question-circle","aria-label":"Help"})),_.$W.newsFeedEnabled&&a.createElement(yu,null),!Jt.TP.user.isSignedIn&&a.createElement(Jr,null),Fe&&a.createElement(Jc.m,{overlay:()=>a.createElement(fl,{node:Fe}),placement:"bottom-end"},a.createElement(Oi.I,{className:z.profileButton,imgSrc:Jt.TP.user.gravatarUrl,imgAlt:"User avatar","aria-label":"Profile"}))))}),Jf=w=>({layout:(0,rt.css)({height:Ii.l,display:"flex",gap:w.spacing(1),alignItems:"center",padding:w.spacing(0,1,0,2),borderBottom:`1px solid ${w.colors.border.weak}`,justifyContent:"space-between",[w.breakpoints.up("sm")]:{gridTemplateColumns:"1.5fr minmax(240px, 1fr) 1.5fr",display:"grid",justifyContent:"flex-start"}}),img:(0,rt.css)({height:w.spacing(3),width:w.spacing(3)}),logo:(0,rt.css)({display:"flex"}),profileButton:(0,rt.css)({padding:w.spacing(0,.25),img:{borderRadius:w.shape.radius.circle,height:"24px",marginRight:0,width:"24px"}})});function Xf({children:w}){const{chrome:z}=(0,Wo.Il)(),X=z.useState(),ce=X.searchBarHidden||X.kioskMode===$t.KioskMode.TV,Ce=(0,St.$j)(),Ie=(0,St.of)(xu),Fe=Ce.breakpoints.values.xl,Je=Si.A.getBool(oc,!0);(0,dl.Y)({breakpoint:Fe,onChange:At=>{Je&&(z.setMegaMenuDocked(At.matches,!1),z.setMegaMenuOpen(At.matches?Si.A.getBool(jc,X.megaMenuOpen):!1))}});const et=(0,rt.cx)({[Ie.content]:!0,[Ie.contentNoSearchBar]:ce,[Ie.contentChromeless]:X.chromeless}),mt=()=>{z.setMegaMenuOpen(!X.megaMenuOpen)},{pathname:vt,search:Pt}=x.Ny.getLocation(),Ht=vt+Pt,Ut=_.Ay.featureToggles.returnToPrevious&&X.returnToPrevious&&Ht!==X.returnToPrevious.href;return(0,a.useEffect)(()=>{X.returnToPrevious&&Ht===X.returnToPrevious.href&&z.clearReturnToPrevious("auto_dismissed")},[z,Ht]),a.createElement("div",{className:Jl()("main-view",{"main-view--search-bar-hidden":ce&&!X.chromeless,"main-view--chrome-hidden":X.chromeless})},!X.chromeless&&a.createElement(a.Fragment,null,a.createElement(ie.z9,{className:Ie.skipLink,href:"#pageContent"},"Skip to main content"),a.createElement("div",{className:(0,rt.cx)(Ie.topNav)},!ce&&a.createElement(Qf,null),a.createElement(rc,{searchBarHidden:ce,sectionNav:X.sectionNav.node,pageNav:X.pageNav,actions:X.actions,onToggleSearchBar:z.onToggleSearchBar,onToggleMegaMenu:mt,onToggleKioskMode:z.onToggleKioskMode}))),a.createElement("main",{className:et},a.createElement("div",{className:Ie.panes},!X.chromeless&&X.megaMenuDocked&&X.megaMenuOpen&&a.createElement(nc,{className:Ie.dockedMegaMenu,onClose:()=>z.setMegaMenuOpen(!1)}),a.createElement("div",{className:Ie.pageContainer,id:"pageContent"},w))),!X.chromeless&&!X.megaMenuDocked&&a.createElement(xf,null),!X.chromeless&&a.createElement(hf,null),Ut&&X.returnToPrevious&&a.createElement(vu,{href:X.returnToPrevious.href,title:X.returnToPrevious.title}))}const xu=w=>({content:(0,rt.css)({display:"flex",flexDirection:"column",paddingTop:Ii.l*2,flexGrow:1,height:"100%"}),contentNoSearchBar:(0,rt.css)({paddingTop:Ii.l}),contentChromeless:(0,rt.css)({paddingTop:0}),dockedMegaMenu:(0,rt.css)({background:w.colors.background.primary,borderRight:`1px solid ${w.colors.border.weak}`,display:"none",zIndex:w.zIndex.navbarFixed,[w.breakpoints.up("xl")]:{display:"block"}}),topNav:(0,rt.css)({display:"flex",position:"fixed",zIndex:w.zIndex.navbarFixed,left:0,right:0,background:w.colors.background.primary,flexDirection:"column"}),panes:(0,rt.css)({label:"page-panes",display:"flex",height:"100%",width:"100%",flexGrow:1,minHeight:0,flexDirection:"column",[w.breakpoints.up("md")]:{flexDirection:"row"}}),pageContainer:(0,rt.css)({label:"page-container",flexGrow:1,minHeight:0,minWidth:0,overflow:"auto","@media print":{overflow:"visible"},"@page":{margin:0,size:"auto",padding:0}}),skipLink:(0,rt.css)({position:"absolute",top:-1e3,":focus":{left:w.spacing(1),top:w.spacing(1),zIndex:w.zIndex.portal}})});var cc=e(82467),Ou=e(16001),qc=e(3169),Zf=e(94701);function ed({appNotification:w,onClearNotification:z}){const X=(0,St.of)(qf);(0,Zf.A)(()=>{setTimeout(()=>{z(w.id)},$t.timeoutMap[w.severity])});const ce=w.component||w.text||w.traceId;return a.createElement(En.F,{severity:w.severity,title:w.title,onRemove:()=>z(w.id),elevated:!0},ce&&a.createElement("div",{className:X.wrapper},a.createElement("span",null,w.component||w.text),w.traceId&&a.createElement("span",{className:X.trace},"Trace ID: ",w.traceId)))}function qf(w){return{wrapper:(0,rt.css)({display:"flex",flexDirection:"column"}),trace:(0,rt.css)({fontSize:w.typography.pxToRem(10)})}}function eg(){const w=(0,$t.useSelector)(Ce=>(0,Ou.fX)(Ce.appNotifications)),z=(0,$t.useDispatch)(),X=(0,St.of)(tg);(0,a.useEffect)(()=>{pr.A.on(Qi.r1.alertWarning,Ce=>z((0,cc.dx)((0,qc.q8)(...Ce)))),pr.A.on(Qi.r1.alertSuccess,Ce=>z((0,cc.dx)((0,qc.tZ)(...Ce)))),pr.A.on(Qi.r1.alertError,Ce=>z((0,cc.dx)((0,qc.gi)(...Ce))))},[z]);const ce=Ce=>{z((0,cc.Do)(Ce))};return a.createElement("div",{className:X.wrapper},a.createElement(cs.gW,null,w.map((Ce,Ie)=>a.createElement(ed,{key:`${Ce.id}-${Ie}`,appNotification:Ce,onClearNotification:ce}))))}function tg(w){return{wrapper:(0,rt.css)({label:"app-notifications-list",zIndex:w.zIndex.portal,minWidth:400,maxWidth:600,position:"fixed",right:6,top:88})}}var ng=e(66899),ag=e.n(ng),Iu=e(52446);function td({error:w,errorInfo:z}){const X=(0,ds.zy)(),ce=w?.name==="ChunkLoadError",Ce=(0,St.of)(sg);return(0,a.useEffect)(()=>{ce&&X.search.indexOf("chunkNotFound")===-1&&(window.location.href=T.I.getUrlForPartial(X,{chunkNotFound:!0}))},[X,ce]),a.createElement(wr.Y,{navId:"error",layout:Ye.k.Canvas},a.createElement("div",{className:Ce.container},ce&&a.createElement("div",null,a.createElement("h2",null,"Unable to find application file"),a.createElement("br",null),a.createElement("h2",{className:"page-heading"},"Grafana has likely been updated. Please try reloading the page."),a.createElement("br",null),a.createElement(ie.$n,{size:"md",variant:"secondary",icon:"repeat",onClick:()=>window.location.reload()},"Reload"),a.createElement(Iu.D,{title:"Error details",error:w,errorInfo:z})),!ce&&a.createElement(Iu.D,{title:"An unexpected error happened",error:w,errorInfo:z})))}const sg=w=>({container:(0,rt.css)({width:"500px",margin:w.spacing(8,"auto")})});function rg(){const w=(0,St.of)(ad);return a.createElement("div",{className:w.container,"aria-live":"polite",role:"status","aria-label":(0,Ka.t)("bouncing-loader.label","Loading")},a.createElement("div",{className:w.bounce},a.createElement("img",{alt:"",src:"public/img/grafana_icon.svg",className:w.logo})))}const nd=(0,rt.keyframes)({"0%":{opacity:0,animationTimingFunction:"cubic-bezier(0, 0, 0.5, 1)"},"100%":{opacity:1}}),Au=(0,rt.keyframes)({"from, to":{transform:"translateY(0px)",animationTimingFunction:"cubic-bezier(0.3, 0, 0.1, 1)"},"50%":{transform:"translateY(-50px)",animationTimingFunction:"cubic-bezier(0.9, 0, 0.7, 1)"}}),og=(0,rt.keyframes)({"0%":{transform:"scaleX(1.3) scaleY(0.8)",animationTimingFunction:"cubic-bezier(0.3, 0, 0.1, 1)"},"15%":{transform:"scaleX(0.75) scaleY(1.25)",animationTimingFunction:"cubic-bezier(0, 0, 0.7, 0.75)"},"55%":{transform:"scaleX(1.05) scaleY(0.95)",animationTimingFunction:"cubic-bezier(0.9, 0, 1, 1)"},"95%":{transform:"scaleX(0.75) scaleY(1.25)",animationTimingFunction:"cubic-bezier(0, 0, 0, 1)"},"100%":{transform:"scaleX(1.3) scaleY(0.8)",animationTimingFunction:"cubic-bezier(0, 0, 0.7, 1)"}}),ad=w=>({container:(0,rt.css)({opacity:0,animationName:nd,animationIterationCount:1,animationDuration:"0.9s",animationDelay:"0.5s",animationFillMode:"forwards"}),bounce:(0,rt.css)({textAlign:"center",animationName:Au,animationDuration:"0.9s",animationIterationCount:"infinite"}),logo:(0,rt.css)({display:"inline-block",animationName:og,animationDuration:"0.9s",animationIterationCount:"infinite",width:"60px",height:"60px"})});function ig(){const w=(0,St.of)(lg);return a.createElement("div",{className:w.loadingPage},a.createElement(rg,null))}const lg=w=>({loadingPage:(0,rt.css)({backgroundColor:w.colors.background.primary,height:"100%",flexDrection:"column",display:"flex",justifyContent:"center",alignItems:"center"})});function Ru(w){const{chrome:z,keybindings:X}=(0,Wo.Il)();return z.setMatchedRoute(w.route),(0,a.useLayoutEffect)(()=>{X.clearAndInitGlobalBindings(w.route)},[X,w.route]),(0,a.useEffect)(()=>(Lu(w.route),Bu(),(0,x.Lc)("GrafanaRoute",!1,"Mounted",w.match),()=>{(0,x.Lc)("GrafanaRoute",!1,"Unmounted",w.route),Lu(w.route,!0)}),[]),(0,a.useEffect)(()=>{Bu(),(0,Ys.Jy)(),(0,x.Lc)("GrafanaRoute",!1,"Updated",w)}),(0,x.Lc)("GrafanaRoute",!1,"Rendered",w.route),a.createElement(rl.tH,null,({error:ce,errorInfo:Ce})=>ce?a.createElement(td,{error:ce,errorInfo:Ce}):a.createElement(a.Suspense,{fallback:a.createElement(ig,null)},a.createElement(w.route.component,{...w,queryParams:(0,x.SE)(w.location.search)})))}function cg(w){return w.pageClass?w.pageClass.split(" "):[]}function Lu(w,z=!1){for(const X of cg(w))z?document.body.classList.remove(X):document.body.classList.add(X)}function Bu(){document.body.classList.remove("sidemenu-open--xs");const w=document.getElementById("tooltip");w?.parentElement?.removeChild(w);const z=document.querySelectorAll(".tooltip");for(let X=0;X<z.length;X++){const ce=z[X];ce.parentElement?.removeChild(ce)}for(const X of ag().drops)X.destroy()}var sd=e(96378),dc=e(78731);class dg extends a.PureComponent{constructor(){super(...arguments),this.styles=ug(j.$.theme2),this.state={},this.initListener=()=>{const z=(0,dc.oF)();z&&(this.subscription=z.getConnectionState().subscribe({next:X=>{this.setState({show:!X})}}))}}componentDidMount(){}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}render(){const{show:z}=this.state;return z?!Rt.TP.isSignedIn||!j.$.liveEnabled||Rt.TP.user.orgRole===Uc.X.None?null:a.createElement("div",{className:this.styles.foot},a.createElement(En.F,{severity:"warning",className:this.styles.warn,title:"connection to server is lost..."})):null}}const ug=(0,Hn.N)(w=>({foot:(0,rt.css)`
      position: absolute;
      bottom: 0px;
      left: 0px;
      right: 0px;
      z-index: 10000;
      cursor: wait;
      margin: 16px;
    `,warn:(0,rt.css)`
      max-width: 400px;
      margin: auto;
    `}));let Uu=[],Nu=[];function ph(w){Uu.push(w)}function hh(w){Nu.push(w)}class mg extends a.Component{constructor(z){super(z),this.renderRoute=X=>{const ce=X.roles?X.roles():[];return a.createElement(ki.CompatRoute,{exact:X.exact===void 0?!0:X.exact,sensitive:X.sensitive===void 0?!1:X.sensitive,path:X.path,key:X.path,render:Ce=>ce?.length&&!ce.some(Ie=>Rt.TP.hasRole(Ie))?a.createElement(ds.rd,{to:"/"}):a.createElement(Ru,{...Ce,route:X})})},this.state={}}async componentDidMount(){await Mi(),this.setState({ready:!0}),$(".preloader").remove()}renderRoutes(){return a.createElement(ds.dO,null,Ld().map(z=>this.renderRoute(z)))}render(){const{app:z}=this.props,{ready:X}=this.state;(0,x.Lc)("AppWrapper",!1,"rendering");const ce=Ce=>{(0,Ys.rR)("command_palette_action_selected",{actionId:Ce.id,actionName:Ce.name})};return a.createElement(ro.Provider,{store:Is.M_},a.createElement(rl.Xw,{style:"page"},a.createElement(Wo.YE.Provider,{value:z.context},a.createElement(sd.N,{value:j.$.theme2},a.createElement(dr.KBarProvider,{actions:[],options:{enableHistory:!0,callbacks:{onSelectAction:ce}}},a.createElement(Ml.YO,null,a.createElement(oi.k,null),a.createElement("div",{className:"grafana-app"},a.createElement(ds.Ix,{history:x.Ny.getHistory()},a.createElement(ki.CompatRouter,null,a.createElement(Xf,null,Nu.map((Ce,Ie)=>a.createElement(Ce,{key:Ie.toString()})),a.createElement(Bd,null),a.createElement(eg,null),X&&this.renderRoutes(),Uu.map((Ce,Ie)=>a.createElement(Ce,{key:Ie.toString()})))))),a.createElement(dg,null),a.createElement(Ml.EO,null),a.createElement(Yo.qB,null)))))))}}var wu=e(33919);function fg({actions:w,children:z,info:X,pageNav:ce,layout:Ce,renderTitle:Ie,subTitle:Fe}){const Je=(0,a.useContext)(Ql.A);return a.createElement(wr.Y,{navModel:Je.sectionNav,pageNav:ce,layout:Ce,actions:w,renderTitle:Ie,info:X,subTitle:Fe},a.createElement(wr.Y.Contents,null,z))}var gg=e(8867),pg=e(91324),hg=e(23227),uc=e(83712),vg=e(93455),Fu=e(99443),Eg=e(70699),yg=e(63997),Dg=e(5798),Pg=e(61061),Wu=e(85346),Ku=e(41731),Cg=e(36294),rd=e(62575),li=e(27798),vh=e(53392),od=e(17694),Eh=e(27743),bg=e(66509),Tg=e(98368),$u=e(67341),Mg=e(51472),id=e(90517),Sg=e(78412),xg=e(24548),ld=e(41366),Og=e(63892),Vu=e(22965),_u=e(19336),Ig=e(66163),Ag=e(30259),zu=e(96725),Rg=e(30283),Lg=e(53141),ku=e(69382),Bg=e(88790),Ug=e(388),Hu=e(58689),Ng=e(29342),wg=e(27583),yh=e(34153),Dh=e(13852),Ph=e(5614),Ch=e(34715),bh=e(25853),Th=e(98020),Mh=e(90088),Sh=e(79764),xh=e(5422),Oh=e(61987),Ih=e(88225),Ah=e(13896),Rh=e(68018),Lh=e(63023),Bh=e(32437),Uh=e(99996),Nh=e(99641),wh=e(70649),Fh=e(98828),Wh=e(79151),Kh=e(53663),$h=e(27193),Vh=e(53123),_h=e(4458),zh=e(28643),kh=e(33311),Hh=e(90841),Gh=e(49018),jh=e(63738),Fg=e(63263),cd=e(29340),Wg=e(45937),Kg=e(29339),$g=e(6820),Vg=e(77444),_g=e(3327),zg=e(70794),kg=e(11273),Hg=e(80641),Gu=e(28867),Gg=e(11220),jg=e(23544),Yg=e(48339),Qg=e(4240),Jg=e(95224),Xg=e(82382),Zg=e(87048),qg=e(53007),ep=e(12179),tp=e(17226),ju=e(42982),Yh=e(42806),Qh=e(50459),Jh=e(84879),Xh=e(52664),Zh=e(26868),qh=e(72805),e0=e(73575),t0=e(56811),n0=e(53896),np=e(97918),ap=e(81422),sp=e(29130),rp=e(45376),Yu=e(73642),op=e(83267),ip=e(80021),lp=e(41684),Ul=e(72215),cp=e(81656),dp=e(29424),Nl=e(7682),mc=e(51764),Xi=e(76151),up=e(30781),mp=e(65972),fp=e(90756),gp=e(24289),pp=e(84472),hp=e(71533),vp=e(45298),Qu=e(96906),Ju=e(95311),Ep=e(82349),yp=e(43482),Dp=e(49935),Xu=e(48761),Pp=e(97231),Ai=e(13835),Zu=e(91381),fc=e(52859),Cp=e(25928),bp=e(36714),Tp=e(30815),a0=e(3465),dd=e(39012),Mp=e(94675),$o=e(40051),wl=e(4543),qu=e(89579),Sp=e(82524),xp=e(31115),ud=e(99003),Ri=e(95684),em=e(1624),Op=e(93644),Ip=e(96619),Ap=e(61748),md=e(57169),tm=e(11769),Rp=e(26551),Lp=e(40295),Bp=e(38514),Oo=e(81312),s0=e(64298),nm=e(70866),Up=e(30587),Np=e(44850),oo=e(54556),Xo=e(81615),am=e(82798),wp=e(8687),gc=e(77270),Fp=e(10742),Wp=e(41404),Kp=e(72579),$p=e(39973),Vp=e(56963),_p=e(8807),zp=e(24109),kp=e(46255),Hp=e(68636),sm=e(74305);let rm=!1;function nn(w,z){gg.cacheStore[z]={content:w,status:"loaded"}}function Gp(){let w="public/img/icons/";const z=typeof window<"u"&&window.__grafana_public_path__;return z&&(w=z+"img/icons/"),X=>w+X}function jp(){if(rm)return;rm=!0;const w=Gp();nn(pg,w("unicons/at.svg")),nn(hg,w("unicons/adjust-circle.svg")),nn(uc,w("unicons/align-left.svg")),nn(vg,w("unicons/align-right.svg")),nn(Fu,w("unicons/angle-double-down.svg")),nn(Eg,w("unicons/angle-double-right.svg")),nn(yg,w("unicons/angle-down.svg")),nn(Dg,w("unicons/angle-left.svg")),nn(Pg,w("unicons/angle-right.svg")),nn(Wu,w("unicons/angle-up.svg")),nn(Ku,w("unicons/apps.svg")),nn(Cg,w("unicons/arrow.svg")),nn(rd,w("unicons/arrow-down.svg")),nn(li,w("unicons/arrow-from-right.svg")),nn(vh,w("unicons/arrow-left.svg")),nn(od,w("unicons/arrow-random.svg")),nn(Eh,w("unicons/arrow-right.svg")),nn(bg,w("unicons/arrow-to-right.svg")),nn(Tg,w("unicons/arrow-up.svg")),nn($u,w("unicons/arrows-h.svg")),nn(Mg,w("unicons/backward.svg")),nn(id,w("unicons/bars.svg")),nn(Sg,w("unicons/bell.svg")),nn(xg,w("unicons/bell-slash.svg")),nn(ld,w("unicons/bolt.svg")),nn(Og,w("unicons/book.svg")),nn(Vu,w("unicons/book-open.svg")),nn(_u,w("unicons/brackets-curly.svg")),nn(Ig,w("unicons/bug.svg")),nn(Ag,w("unicons/building.svg")),nn(zu,w("unicons/calculator-alt.svg")),nn(Rg,w("unicons/calendar-alt.svg")),nn(Lg,w("unicons/calendar-slash.svg")),nn(ku,w("unicons/camera.svg")),nn(Bg,w("unicons/channel-add.svg")),nn(Ug,w("unicons/chart-line.svg")),nn(Hu,w("unicons/check.svg")),nn(Ng,w("unicons/check-circle.svg")),nn(wg,w("unicons/circle.svg")),nn(yh,w("unicons/clipboard-alt.svg")),nn(Dh,w("unicons/clock-nine.svg")),nn(Ph,w("unicons/cloud.svg")),nn(Ch,w("unicons/cloud-download.svg")),nn(bh,w("unicons/code-branch.svg")),nn(Th,w("unicons/cog.svg")),nn(Mh,w("unicons/columns.svg")),nn(Sh,w("unicons/comment-alt.svg")),nn(xh,w("unicons/comment-alt-share.svg")),nn(Oh,w("unicons/comments-alt.svg")),nn(Ih,w("unicons/compass.svg")),nn(Ah,w("unicons/copy.svg")),nn(Rh,w("unicons/corner-down-right-alt.svg")),nn(Lh,w("unicons/cube.svg")),nn(Bh,w("unicons/dashboard.svg")),nn(Uh,w("unicons/database.svg")),nn(Nh,w("unicons/document-info.svg")),nn(wh,w("unicons/download-alt.svg")),nn(Fh,w("unicons/draggabledots.svg")),nn(Wh,w("unicons/edit.svg")),nn(Kh,w("unicons/ellipsis-v.svg")),nn($h,w("unicons/ellipsis-h.svg")),nn(Vh,w("unicons/envelope.svg")),nn(_h,w("unicons/exchange-alt.svg")),nn(zh,w("unicons/exclamation-circle.svg")),nn(kh,w("unicons/exclamation-triangle.svg")),nn(Hh,w("unicons/external-link-alt.svg")),nn(Gh,w("unicons/eye.svg")),nn(jh,w("unicons/eye-slash.svg")),nn(Fg,w("unicons/file-alt.svg")),nn(cd,w("unicons/file-blank.svg")),nn(Wg,w("unicons/filter.svg")),nn(Kg,w("unicons/folder.svg")),nn($g,w("unicons/folder-open.svg")),nn(Vg,w("unicons/folder-plus.svg")),nn(_g,w("unicons/folder-upload.svg")),nn(zg,w("unicons/forward.svg")),nn(kg,w("unicons/graph-bar.svg")),nn(Hg,w("unicons/history.svg")),nn(Gu,w("unicons/history-alt.svg")),nn(Gg,w("unicons/home-alt.svg")),nn(jg,w("unicons/import.svg")),nn(Yg,w("unicons/info.svg")),nn(Qg,w("unicons/info-circle.svg")),nn(Jg,w("unicons/k6.svg")),nn(Xg,w("unicons/key-skeleton-alt.svg")),nn(Zg,w("unicons/keyboard.svg")),nn(qg,w("unicons/link.svg")),nn(ep,w("unicons/list-ul.svg")),nn(tp,w("unicons/lock.svg")),nn(ju,w("unicons/minus.svg")),nn(Yh,w("unicons/minus-circle.svg")),nn(Qh,w("unicons/mobile-android.svg")),nn(Jh,w("unicons/monitor.svg")),nn(Xh,w("unicons/pause.svg")),nn(Zh,w("unicons/pen.svg")),nn(qh,w("unicons/play.svg")),nn(e0,w("unicons/plug.svg")),nn(t0,w("unicons/plus.svg")),nn(n0,w("unicons/plus-circle.svg")),nn(np,w("unicons/power.svg")),nn(ap,w("unicons/presentation-play.svg")),nn(sp,w("unicons/process.svg")),nn(rp,w("unicons/question-circle.svg")),nn(Yu,w("unicons/repeat.svg")),nn(op,w("unicons/rocket.svg")),nn(ip,w("unicons/rss.svg")),nn(lp,w("unicons/save.svg")),nn(Ul,w("unicons/search.svg")),nn(cp,w("unicons/search-minus.svg")),nn(dp,w("unicons/search-plus.svg")),nn(Nl,w("unicons/share-alt.svg")),nn(mc,w("unicons/shield.svg")),nn(Xi,w("unicons/signal.svg")),nn(up,w("unicons/signin.svg")),nn(mp,w("unicons/signout.svg")),nn(fp,w("unicons/sitemap.svg")),nn(gp,w("unicons/slack.svg")),nn(pp,w("unicons/sliders-v-alt.svg")),nn(hp,w("unicons/sort-amount-down.svg")),nn(vp,w("unicons/sort-amount-up.svg")),nn(Qu,w("unicons/square-shape.svg")),nn(Ju,w("unicons/star.svg")),nn(Ep,w("unicons/step-backward.svg")),nn(yp,w("unicons/sync.svg")),nn(Dp,w("unicons/stopwatch.svg")),nn(Xu,w("unicons/table.svg")),nn(Pp,w("unicons/tag-alt.svg")),nn(Ai,w("unicons/times.svg")),nn(Zu,w("unicons/trash-alt.svg")),nn(fc,w("unicons/unlock.svg")),nn(Cp,w("unicons/upload.svg")),nn(bp,w("unicons/user.svg")),nn(Tp,w("unicons/users-alt.svg")),nn(a0,w("unicons/wrap-text.svg")),nn(dd,w("unicons/cloud-upload.svg")),nn(Mp,w("unicons/credit-card.svg")),nn($o,w("unicons/file-copy-alt.svg")),nn(wl,w("unicons/fire.svg")),nn(qu,w("unicons/hourglass.svg")),nn(Sp,w("unicons/layer-group.svg")),nn(xp,w("unicons/layers-alt.svg")),nn(ud,w("unicons/line-alt.svg")),nn(Ri,w("unicons/list-ui-alt.svg")),nn(em,w("unicons/message.svg")),nn(Op,w("unicons/palette.svg")),nn(Ip,w("unicons/percentage.svg")),nn(Ap,w("unicons/shield-exclamation.svg")),nn(md,w("unicons/plus-square.svg")),nn(tm,w("unicons/x.svg")),nn(Rp,w("unicons/capture.svg")),nn(Lp,w("custom/gf-grid.svg")),nn(Bp,w("custom/gf-landscape.svg")),nn(Oo,w("custom/gf-layout-simple.svg")),nn(s0,w("custom/gf-portrait.svg")),nn(nm,w("custom/gf-show-context.svg")),nn(Up,w("custom/gf-bar-alignment-after.svg")),nn(Np,w("custom/gf-bar-alignment-before.svg")),nn(oo,w("custom/gf-bar-alignment-center.svg")),nn(Xo,w("custom/gf-interpolation-linear.svg")),nn(am,w("custom/gf-interpolation-smooth.svg")),nn(wp,w("custom/gf-interpolation-step-after.svg")),nn(gc,w("custom/gf-interpolation-step-before.svg")),nn(Fp,w("custom/gf-logs.svg")),nn(Wp,w("custom/gf-movepane-left.svg")),nn(Kp,w("custom/gf-movepane-right.svg")),nn($p,w("mono/favorite.svg")),nn(Vp,w("mono/grafana.svg")),nn(_p,w("mono/heart.svg")),nn(zp,w("mono/heart-break.svg")),nn(kp,w("mono/panel-add.svg")),nn(Hp,w("mono/library-panel.svg")),nn(sm,w("unicons/record-audio.svg"))}var fd=e(76885);function Fl(w){const z=w.target instanceof Element&&gd(w.target);if(!(w.ctrlKey||w.metaKey||w.defaultPrevented)&&z){let X=z.getAttribute("href");const ce=z.getAttribute("target");if(X&&!ce){const Ce=fd.kM.parseKeyValue(X.split("?")[1]),Ie=Ce.orgId&&Number(Ce.orgId)!==_.$W.bootData.user.orgId;if((0,x.Lc)("utils",!1,"intercepting link click",w),w.preventDefault(),X=T.I.stripBaseFromUrl(X),X[0]!=="/"||Ie)if(X.indexOf("://")>0||X.indexOf("mailto:")===0||Ie){window.location.href=X;return}else if(X.indexOf("#")===0){window.location.hash=X;return}else X=`/${X}`;x.Ny.push(X)}}}function gd(w){for(;w!==null&&w.tagName;){if(w.tagName.toUpperCase()==="A")return w;w=w.parentElement}return null}var om=e(19752);function Yp(w,...z){const X=(0,ro.connect)(...z)(w);return ce=>a.createElement(X,{...ce,store:Is.M_})}function Qp(w,...z){const X=(0,ro.connect)(...z)(w);return ce=>a.createElement(ro.Provider,{store:Is.M_},a.createElement(X,{...ce,store:Is.M_}))}const im=Qp(w=>a.createElement(a.Fragment,null,a.createElement(Ml.YO,{...w},a.createElement(Ml.EO,null))));class Jp{constructor(){this.reactModalRoot=document.body,this.reactModalNode=document.createElement("div"),this.root=(0,v.H)(this.reactModalNode),this.onReactModalDismiss=()=>{this.root.render(null),this.reactModalRoot.removeChild(this.reactModalNode)}}init(){pr.A.subscribe(Qr.bY,z=>this.showConfirmModal(z.payload)),pr.A.subscribe(Qr.S8,z=>this.showModalReact(z.payload)),pr.A.subscribe(O.ah,z=>(0,om.KJ)(z.payload))}showModalReact(z){const{component:X,props:ce}=z,Ce={component:X,props:{...ce,isOpen:!0,onDismiss:this.onReactModalDismiss}},Ie=a.createElement((0,sd.e)(im,j.$.theme2),Ce);this.reactModalRoot.appendChild(this.reactModalNode),this.root.render(Ie)}showConfirmModal(z){const{confirmText:X,onConfirm:ce=()=>{},onDismiss:Ce,text2:Ie,altActionText:Fe,onAltAction:Je,noText:et,text:mt,text2htmlBind:vt,yesText:Pt="Yes",icon:Ht,title:Ut="Confirm",yesButtonVariant:At}=z,zt={confirmText:Pt,confirmButtonVariant:At,confirmationText:X,icon:Ht,title:Ut,body:mt,description:Ie&&vt?Qc.sQ.sanitize(Ie):Ie,isOpen:!0,dismissText:et,onConfirm:()=>{ce(),this.onReactModalDismiss()},onDismiss:()=>{Ce?.(),this.onReactModalDismiss()},onAlternative:Je?()=>{Je(),this.onReactModalDismiss()}:void 0,alternativeText:Fe},Pn={component:jl.u,props:zt},Ta=a.createElement((0,sd.e)(im,j.$.theme2),Pn);this.reactModalRoot.appendChild(this.reactModalNode),this.root.render(Ta)}}class Zi{constructor(z){this.hasUpdates=!1,this.checked=Date.now(),this.prevLocationPath="",this.interval=z??1e3*60*5}start(){const z=(0,dc.oF)();z&&z.getConnectionState().subscribe(X=>{X&&this._checkForUpdates()}),x.Ny.getHistory().listen(this.locationUpdated.bind(this)),this.prevLocationPath=x.Ny.getLocation().pathname}locationUpdated(z){if(this.prevLocationPath===z.pathname)return;const X=z.pathname.split("/");X[1]==="/"&&this.prevLocationPath!=="/"?this.reloadIfUpdateDetected():X[1]==="d"?this.reloadIfUpdateDetected():this.hasUpdates&&(0,Ys.rR)("new_frontend_assets_reload_ignored",{newLocation:z.pathname,prevLocation:this.prevLocationPath}),this.prevLocationPath=z.pathname}async _checkForUpdates(){if(this.hasUpdates||Date.now()-this.checked<this.interval)return;this.checked=Date.now();const z=this.previous,X=await(0,M.AI)().get("/api/frontend/assets");z&&!(0,p.isEqual)(z,X)&&(this.hasUpdates=!0,(0,Ys.rR)("new_frontend_assets_detected",{assets:z.assets!==X.assets,plugins:z.plugins!==X.plugins,version:z.version!==X.version,flags:z.flags!==X.flags})),this.previous=X}reloadIfUpdateDetected(){this.hasUpdates&&((0,Ys.rR)("new_frontend_assets_reload",{}),window.location.reload()),this._checkForUpdates()}}var pd=e(27677),Xp=e(91040),hd=e(40621);function pc(w,z=!1){return new Promise(X=>{const ce=document.createElement("script");ce.onload=X,ce.src=w,ce.async=z,document.head.appendChild(ce)})}const lm=(0,Xp.h)("EchoSrv"),F=lm.logger;(0,hd.h)("echo",void 0,lm);class se{constructor(z){this.config={flushInterval:1e4,debug:!1},this.backends=[],this.flush=()=>{for(const X of this.backends)X.flush()},this.addBackend=X=>{F("Adding backend",!1,X),this.backends.push(X)},this.addEvent=(X,ce)=>{const Ce=this.getMeta(),Ie={...X,meta:{...Ce,...ce}};for(const Fe of this.backends)(Fe.supportedEvents.length===0||Fe.supportedEvents.indexOf(Ie.type)>-1)&&Fe.addEvent(Ie);F(`${X.type} event`,!1,{...X.payload,meta:Ie.meta})},this.getMeta=()=>({sessionId:"",userId:Rt.TP.user.id,userLogin:Rt.TP.user.login,userSignedIn:Rt.TP.user.isSignedIn,screenSize:{width:window.innerWidth,height:window.innerHeight},windowSize:{width:window.screen.width,height:window.screen.height},userAgent:window.navigator.userAgent,ts:new Date().getTime(),timeSinceNavigationStart:performance.now(),path:window.location.pathname,url:window.location.href}),this.config={...this.config,...z},setInterval(this.flush,this.config.flushInterval)}}const fe=(w,z)=>{(0,H.x$)().addEvent({type:H.on.Performance,payload:{name:w,value:z}})},Pe=w=>faro?.api?.pushError(w);class xe{constructor(z){this.options=z,this.buffer=[],this.supportedEvents=[H.on.Performance],this.addEvent=X=>{this.buffer.push(X.payload)},this.flush=()=>{this.buffer.length!==0&&(pd.IB.post("/api/frontend-metrics",{events:this.buffer}),this.buffer=[])}}}var Ue=e(61298);class ze{constructor(z){this.options=z,this.supportedEvents=[H.on.Pageview,H.on.Interaction],this.addEvent=Ce=>{window.applicationInsights&&((0,Ue.nB)(Ce)&&window.applicationInsights.trackPageView?.(),(0,Ue.fX)(Ce)&&window.applicationInsights.trackEvent?.({name:Ce.payload.interactionName,properties:Ce.payload.properties}))},this.flush=()=>{};const X={config:{connectionString:z.connectionString,endpointUrl:z.endpointUrl}};pc("https://js.monitor.azure.com/scripts/b/ai.2.min.js").then(()=>{const Ce=new window.Microsoft.ApplicationInsights.ApplicationInsights(X);window.applicationInsights=Ce.loadAppInsights()})}}class Xe{constructor(z){this.options=z,this.supportedEvents=[H.on.Pageview],this.googleAnalytics4SendManualPageViews=!1,this.addEvent=Ce=>{window.gtag&&this.googleAnalytics4SendManualPageViews&&window.gtag("event","page_view",{page_path:Ce.payload.page})},this.flush=()=>{};const X=`https://www.googletagmanager.com/gtag/js?id=${z.googleAnalyticsId}`;pc(X,!0),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date);const ce={page_path:window.location.pathname};z.user&&(ce.user_id=z.user.analytics.identifier),this.googleAnalytics4SendManualPageViews=z.googleAnalytics4SendManualPageViews,window.gtag("config",z.googleAnalyticsId,ce)}}class ot{constructor(z){this.options=z,this.supportedEvents=[H.on.Pageview],this.trackedUserId=null,this.addEvent=Ce=>{if(!window.ga)return;window.ga("set",{page:Ce.payload.page}),window.ga("send","pageview");const{userSignedIn:Ie,userId:Fe}=Ce.meta;Ie&&Fe!==this.trackedUserId&&(this.trackedUserId=Fe,window.ga("set","userId",Fe))},this.flush=()=>{};const X=`https://www.google-analytics.com/analytics${z.debug?"_debug":""}.js`;pc(X);const ce=window.ga=window.ga||function(){(ce.q=ce.q||[]).push(arguments)};ce.l=+new Date,ce("create",z.googleAnalyticsId,"auto"),ce("set","anonymizeIp",!0)}}class lt{constructor(z){this.options=z,this.supportedEvents=[H.on.Pageview,H.on.Interaction,H.on.ExperimentView],this.addEvent=Ie=>{window.rudderanalytics&&((0,Ue.nB)(Ie)&&window.rudderanalytics.page?.(),(0,Ue.fX)(Ie)&&window.rudderanalytics.track?.(Ie.payload.interactionName,Ie.payload.properties),(0,Ue.p6)(Ie)&&window.rudderanalytics.track?.("experiment_viewed",{experiment_id:Ie.payload.experimentId,experiment_group:Ie.payload.experimentGroup,experiment_variant:Ie.payload.experimentVariant}))},this.flush=()=>{};const X=z.sdkUrl||"https://cdn.rudderlabs.com/v1/rudder-analytics.min.js";pc(X);const ce=window.rudderanalytics=[],Ce=["load","page","track","identify","alias","group","ready","reset","getAnonymousId","setAnonymousId"];for(let Ie=0;Ie<Ce.length;Ie++){const Fe=Ce[Ie];ce[Fe]=function(Je){return function(){ce.push([Je].concat(Array.prototype.slice.call(arguments)))}}(Fe)}if(window.rudderanalytics?.load?.(z.writeKey,z.dataPlaneUrl,{configUrl:z.configUrl,destSDKBaseURL:z.integrationsUrl}),z.user){const{identifier:Ie,intercomIdentifier:Fe}=z.user.analytics,Je={};Fe&&(Je.Intercom={user_hash:Fe}),window.rudderanalytics?.identify?.(Ie,{email:z.user.email,orgId:z.user.orgId,language:z.user.language,version:z.buildInfo.version,edition:z.buildInfo.edition},Je)}}}var pt=e(35896),Et=e(88285),Tt=e(74940),yt=e(58424),Nt=e(8593),Gt=e(26539),Bt=e(89713),wt=e(20467);class Qt extends wt.j{constructor(){super(...arguments),this.name="EchoSrvTransport",this.version=j.$.buildInfo.version}send(z){(0,H.x$)().addEvent({type:H.on.GrafanaJavascriptAgent,payload:z})}isBatched(){return!0}getIgnoreUrls(){return[]}}class sn{constructor(z){this.options=z,this.supportedEvents=[H.on.GrafanaJavascriptAgent],this.addEvent=Ie=>{},this.flush=()=>{};const X=[],ce=[new Qt];z.customEndpoint&&ce.push(new Et.m({url:z.customEndpoint,apiKey:z.apiKey})),z.errorInstrumentalizationEnabled&&X.push(new Tt.W),z.consoleInstrumentalizationEnabled&&X.push(new yt._),z.webVitalsInstrumentalizationEnabled&&X.push(new Nt.I),X.push(new Gt.D);const Ce={globalObjectKey:z.globalObjectKey||"faro",preventGlobalExposure:z.preventGlobalExposure||!1,app:{version:z.buildInfo.version,environment:z.buildInfo.env},instrumentations:X,transports:ce,ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"],sessionTracking:{persistent:!0},batching:{sendTimeout:1e3},internalLoggerLevel:z.internalLoggerLevel||pt.vI};this.faroInstance=(0,Bt.p)(Ce),z.user&&this.faroInstance.api.setUser({id:z.user.id,attributes:{orgId:String(z.user.orgId)||""}})}}var Xt=e(6411),In=e.n(Xt),on=e(45731),bn=e(9610),Bn=e(87490),wn=e(70497),Mn=e(1702);function dn(w){return()=>{const z=document.querySelectorAll(":hover");for(let X=z.length-1;X>0;X--){const ce=z[X];ce instanceof HTMLElement&&ce.dataset?.panelid&&w(parseInt(ce.dataset?.panelid,10))}}}class Rn{constructor(z,X){this.locationService=z,this.chromeService=X}clearAndInitGlobalBindings(z){In().reset(),z.chromeless||(this.bind(["?","mod+h"],this.showHelpModal),this.bind("g h",this.goToHome),this.bind("g d",this.goToDashboards),this.bind("g e",this.goToExplore),this.bind("g a",this.openAlerting),this.bind("g p",this.goToProfile),this.bind("esc",this.exit),this.bindGlobalEsc()),this.bind("c t",()=>(0,ec.O)(!1)),this.bind("c r",()=>(0,ec.O)(!0))}bindGlobalEsc(){this.bindGlobal("esc",this.globalEsc)}globalEsc(){const X=document.activeElement;if(!(document.querySelectorAll(".slate-typeahead--open").length>0)){if(X&&X instanceof HTMLElement&&(X.nodeName==="INPUT"||X.nodeName==="TEXTAREA"||X.hasAttribute("data-slate-editor"))){X.blur();return}this.exit()}}closeSearch(){this.locationService.partial({search:null})}openAlerting(){this.locationService.push("/alerting")}goToDashboards(){this.locationService.push("/dashboards")}goToHome(){this.locationService.push("/")}goToProfile(){this.locationService.push("/profile")}goToExplore(){this.locationService.push("/explore")}showHelpModal(){pr.A.publish(new Qr.S8({component:kd.N}))}exit(){const z=this.locationService.getSearchObject();if(z.editview){this.locationService.partial({editview:null,editIndex:null});return}if(z.inspect){this.locationService.partial({inspect:null,inspectTab:null});return}if(z.editPanel){this.locationService.partial({editPanel:null,tab:null});return}if(z.viewPanel){this.locationService.partial({viewPanel:null,tab:null});return}const{kioskMode:X}=this.chromeService.state.getValue();X&&this.chromeService.exitKioskMode(),z.search&&this.closeSearch()}showDashEditView(){this.locationService.partial({editview:"settings"})}bind(z,X){In().bind(z,ce=>{ce.preventDefault(),ce.stopPropagation(),ce.returnValue=!1,X.call(this)},"keydown")}bindGlobal(z,X){In().bindGlobal(z,ce=>{ce.preventDefault(),ce.stopPropagation(),ce.returnValue=!1,X.call(this)},"keydown")}unbind(z,X){In().unbind(z,X)}bindWithPanelId(z,X){this.bind(z,dn(X))}setupTimeRangeBindings(z=!0){this.bind("t a",()=>{pr.A.publish(new Qr.Rh({updateUrl:z}))}),this.bind("t z",()=>{pr.A.publish(new Qr.U0({scale:2,updateUrl:z}))}),this.bind("ctrl+z",()=>{pr.A.publish(new Qr.U0({scale:2,updateUrl:z}))}),this.bind("t left",()=>{pr.A.publish(new Qr.Io({direction:Qr.xL.Left,updateUrl:z}))}),this.bind("t right",()=>{pr.A.publish(new Qr.Io({direction:Qr.xL.Right,updateUrl:z}))}),this.bind("t c",()=>{pr.A.publish(new Qr.Bt)}),this.bind("t v",()=>{pr.A.publish(new Qr.VZ({updateUrl:z}))})}setupDashboardBindings(z){this.bind("mod+o",()=>{z.graphTooltip=(z.graphTooltip+1)%3,z.events.publish(new Qi.Tq),z.startRefresh()}),this.bind("mod+s",()=>{z.meta.canSave&&pr.A.publish(new Qr.S8({component:wn.$,props:{dashboard:z}}))}),this.setupTimeRangeBindings(),this.bindWithPanelId("e",X=>{if(z.canEditPanelById(X)){const ce=this.locationService.getSearchObject().editPanel!==void 0;this.locationService.partial({editPanel:ce?null:X})}}),this.bindWithPanelId("v",X=>{const ce=this.locationService.getSearchObject().viewPanel!==void 0;this.locationService.partial({viewPanel:ce?null:X})}),this.bindWithPanelId("p l",X=>{const ce=z.getPanelById(X),Ce={...ce.options};Ce.legend.showLegend?Ce.legend.showLegend=!1:Ce.legend.showLegend=!0,ce.updateOptions(Ce)}),this.bindWithPanelId("i",X=>{this.locationService.partial({inspect:X})}),Jt.TP.hasAccessToExplore()&&this.bindWithPanelId("p x",async X=>{const ce=z.getPanelById(X),Ce=await(0,Bn.Xe)({queries:ce.targets,dsRef:ce.datasource,scopedVars:ce.scopedVars,timeRange:(0,Jo.jG)().timeRange()});if(Ce){const Ie=T.I.stripBaseFromUrl(Ce);Ie&&this.locationService.push(Ie)}}),this.bindWithPanelId("p r",X=>{z.canEditPanelById(X)&&!(z.panelInView||z.panelInEdit)&&pr.A.publish(new Qr.Vz(X))}),this.bindWithPanelId("p d",X=>{if(z.canEditPanelById(X)){const ce=z.getPanelInfoById(X).index;z.duplicatePanel(z.panels[ce])}}),this.bindWithPanelId("p s",X=>{const ce=z.getPanelInfoById(X);pr.A.publish(new Qr.S8({component:Mn.ShareModal,props:{dashboard:z,panel:ce?.panel}}))}),this.bind("d l",()=>{z.toggleLegendsForAll()}),this.bind("d x",()=>{z.toggleExemplarsForAll()}),this.bind("d shift+c",()=>{z.collapseRows()}),this.bind("d shift+e",()=>{z.expandRows()}),this.bind("d n",()=>{this.locationService.push("/dashboard/new")}),this.bind("d r",()=>{z.startRefresh()}),this.bind("d s",()=>{this.showDashEditView()}),this.bind("d k",()=>{this.chromeService.onToggleKioskMode()}),this.bind("d a",()=>{const ce=this.locationService.getSearchObject().autofitpanels?"":"&autofitpanels";window.location.href=window.location.href+ce})}}function Dn(w){if(performance)try{performance.mark(`${w}_started`)}catch(z){console.error(`[Metrics] Failed to startMeasure ${w}`,z)}}function ea(w){if(performance)try{const z=`${w}_started`,X=`${w}_completed`,ce=`${w}_measured`;performance.mark(X);const Ce=performance.measure(ce,z,X);fe(`${w}_ms`,Ce.duration),performance.clearMarks(z),performance.clearMarks(X),performance.clearMeasures(ce)}catch(z){console.error(`[Metrics] Failed to stopMeasure ${w}`,z)}}async function Gn(){if(window.location.search.indexOf("why-render")!==-1){const{default:w}=await e.e(3718).then(e.t.bind(e,13718,23));w(React,{trackAllPureComponents:!0})}}var ia=e(20120);const _a=a.lazy(()=>e.e(192).then(e.bind(e,57029)));function Ra(){(0,ia.fP)({show:()=>j.$.unifiedAlertingEnabled||(j.$.featureToggles.alertingPreviewUpgrade??!1),component:({dashboard:w})=>a.createElement(a.Suspense,{fallback:null,key:"alert-rules-button"},w&&a.createElement(_a,{dashboardUid:w.uid})),index:-2})}var ms=e(73399);function va(w){return a.createElement(ka,{...w})}const ka=a.lazy(async()=>{const{EmbeddedDashboard:w}=await e.e(2859).then(e.bind(e,13251));return{default:w}});var oa=e(61582),zn=e(67027),Kn=e(97527),kn=e(99355),ua=e(14590),Ia=e(19895),Pa=e(44838),La=e(67278);const On=()=>new La.c(new URL(e.p+e.u(5358),e.b));var _n=e(88483),jn=e(63720);const $a=w=>new _n.c(z=>{const X=w.subscribe(ua.BX(ce=>{z.next(ce)}),ua.BX(ce=>{z.error(ce)}),ua.BX(()=>{z.complete()}));return{unsubscribe:()=>{X.then(ce=>ce.unsubscribe())}}}),Ba=w=>(0,po.H)(w).pipe((0,jn.n)(z=>$a(z)));class rs{constructor(z){this.getConnectionState=()=>Ba(this.centrifugeWorker.getConnectionState()),this.getDataStream=X=>Ba(this.centrifugeWorker.getDataStream(X)).pipe((0,Ia.Q)(Pa.E)),this.getQueryData=async X=>{const ce=JSON.parse(JSON.stringify(X));return this.centrifugeWorker.getQueryData(ce)},this.getPresence=X=>this.centrifugeWorker.getPresence(X),this.getStream=X=>Ba(this.centrifugeWorker.getStream(X)),this.centrifugeWorker=ua.LV(On()),this.centrifugeWorker.initialize(z,ua.BX(z.dataStreamSubscriberReadiness))}}var Xa=e(9631),Ms=e(55004),Qs=e(47773),io=e(26657),Vs=e(47118);class Xr{constructor(z){this.deps=z,this.getConnectionState=()=>this.deps.centrifugeSrv.getConnectionState(),this.getDataStream=X=>{let ce;const Ce=Ie=>{const Fe=Ie.data[0];if(!ce&&!(0,Vs.ot)(Fe,Vs._w.FullFrame)){console.warn(`expected first packet to contain a full frame, received ${Fe?.type}`);return}switch(Fe.type){case Vs._w.FullFrame:{ce=Xa.k9.deserialize(Fe.frame);return}case Vs._w.NewValuesSameSchema:{ce.pushNewValues(Fe.values);return}}};return this.deps.centrifugeSrv.getDataStream(X).pipe((0,An.T)(Ie=>(Ce(Ie),{...Ie,data:[ce??Xa.k9.empty()]})))},this.getStream=X=>this.deps.centrifugeSrv.getStream(X),this.getQueryData=X=>(0,po.H)(this.deps.centrifugeSrv.getQueryData(X)).pipe((0,jn.n)(ce=>{const Ce=(0,Qs.bE)(ce,X.request.targets);return Ce.data?.length&&Ce.data.find(Fe=>Fe.meta?.channel)?(0,io.x7)(Ce,X.request,io.ph):(0,Ca.of)(Ce)})),this.publish=async(X,ce)=>this.deps.backendSrv.post("api/live/publish",{channel:(0,Ms.Qp)(X),data:ce}),this.getPresence=X=>this.deps.centrifugeSrv.getPresence(X)}}function Li(){const w={appUrl:`${window.location.origin}${j.$.appSubUrl}`,orgId:Rt.TP.user.orgId,orgRole:Rt.TP.user.orgRole,liveEnabled:j.$.liveEnabled,dataStreamSubscriberReadiness:oa.a.ok.asObservable(),grafanaAuthToken:(0,zn.r)()},z=j.$.featureToggles["live-service-web-worker"]?new rs(w):new Kn.w(w);(0,dc.S8)(new Xr({centrifugeSrv:z,backendSrv:(0,M.AI)()}))}function Wl(){return getGrafanaLiveSrv()}var mo=e(17888),Io=e(20726),fs=e(75462);function er(w,z="extension is not a link extension"){if(!isPluginExtensionLink(w))throw new Error(z)}function Bi(w,z="extension is not a command extension config"){if(!isPluginExtensionLinkConfig(w))throw new Error(z)}function Vo(w,z){if(!_0(w,z))throw new Error(`Invalid link extension. The "path" is required and should start with "/a/${w}/" (currently: "${z}"). Skipping the extension.`)}function Kl(w){if(!j0(w))throw new Error('Invalid component extension, the "component" property needs to be a valid React component.')}function hc(w){if(!z0(w))throw new Error(`Invalid extension "${w.title}". The extensionPointId should start with either "grafana/" or "plugins/" (currently: "${w.extensionPointId}"). Skipping the extension.`)}function $0(w){if(!k0(w))throw new Error(`Invalid extension "${w.title}". The "configure" property must be a function. Skipping the extension.`)}function r0(w,z){for(const X of z)if(!H0(w[X]))throw new Error(`Invalid extension "${w.title}". Property "${X}" must be a string and cannot be empty. Skipping the extension.`)}function V0(w,z="The provided value is a Promise."){if(o0(w))throw new Error(z)}function _0(w,z){return!!(typeof z=="string"&&z.length>0&&z.startsWith(`/a/${w}/`))}function z0(w){return!!(w.extensionPointId?.startsWith("grafana/")||w.extensionPointId?.startsWith("plugins/"))}function k0(w){return w.configure?typeof w.configure=="function":!0}function H0(w){return typeof w=="string"&&w.length>0}function G0(w,z){try{if(r0(z,["title","description","extensionPointId"]),hc(z),(0,fs.z1)(z)){if($0(z),!z.path&&!z.onClick)return(0,fs.FF)(`Invalid extension "${z.title}". Either "path" or "onClick" is required.`),!1;z.path&&Vo(w,z.path)}return(0,fs.yS)(z)&&Kl(z.component),!0}catch(X){return X instanceof Error&&(0,fs.FF)(X.message),!1}}function o0(w){return w instanceof Promise||typeof w=="object"&&w!==null&&"then"in w&&"catch"in w}function j0(w){const z=ce=>typeof ce=="object"&&ce!==null&&"$$typeof"in ce;return typeof w=="function"||(ce=>z(ce)&&ce.$$typeof===Symbol.for("react.memo"))(w)}function Y0(w){const z={};for(const{pluginId:X,extensionConfigs:ce,error:Ce}of w){if(Ce){(0,fs.FF)(`"${X}" plugin failed to load, skip registering its extensions.`);continue}for(const Ie of ce){const{extensionPointId:Fe}=Ie;if(!Ie||!G0(X,Ie))continue;let Je={config:Ie,pluginId:X};Array.isArray(z[Fe])?z[Fe].push(Je):z[Fe]=[Je]}}return(0,fs.ol)(z)}var i0=e(29436),Q0=e(23994),J0=e(11140),X0=e(12881);function Z0(){try{return[(0,fs.io)({title:"Add to dashboard",description:"Use the query and panel from explore and create/add it to a dashboard",extensionPointId:Ji.S.ExploreToolbarAction,icon:"apps",category:"Dashboards",configure:()=>{if(Jt.TP.hasPermission($t.AccessControlAction.DashboardsCreate)||Jt.TP.hasPermission($t.AccessControlAction.DashboardsWrite))return{}},onClick:(w,{context:z,openModal:X})=>{X({title:(0,X0.t)(),body:({onDismiss:ce})=>a.createElement(J0.v,{onClose:ce,exploreId:z?.exploreId})})}}),(0,fs.io)({title:"Add correlation",description:"Create a correlation from this query",extensionPointId:Ji.S.ExploreToolbarAction,icon:"link",configure:w=>w?.shouldShowAddCorrelation?{}:void 0,onClick:(w,{context:z})=>{(0,Is.JD)((0,i0.am)({editorMode:!0})),(0,Is.JD)((0,Q0.Od)({exploreId:z.exploreId}))}})]}catch(w){return(0,fs.FF)(`Could not configure extensions for Explore due to: "${w}"`),[]}}function q0(){return[...Z0()]}const ev=({context:w,extensionPointId:z,limitPerPlugin:X,registry:ce})=>{const Ce=w?(0,fs.$Y)(w):{},Ie=ce[z]??[],Fe=[],Je={};for(const et of Ie)try{const mt=et.config,{pluginId:vt}=et;if(X&&Je[vt]>=X)continue;if(Je[vt]===void 0&&(Je[vt]=0),(0,fs.z1)(mt)){const Pt=tv(vt,mt,Ce);if(mt.configure&&Pt===void 0)continue;const Ht=Pt?.path||mt.path,Ut={id:(0,fs.yt)(vt,mt),type:Ji.u.link,pluginId:vt,onClick:nv(vt,mt,Ce),icon:Pt?.icon||mt.icon,title:Pt?.title||mt.title,description:Pt?.description||mt.description,path:(0,p.isString)(Ht)?av(vt,Ht,mt):void 0,category:Pt?.category||mt.category};Fe.push(Ut),Je[vt]+=1}if((0,fs.yS)(mt)){Kl(mt.component);const Pt={id:(0,fs.yt)(et.pluginId,mt),type:Ji.u.component,pluginId:et.pluginId,title:mt.title,description:mt.description,component:(0,fs.nv)(vt,mt.component)};Fe.push(Pt),Je[vt]+=1}}catch(mt){mt instanceof Error&&(0,fs.FF)(mt.message)}return{extensions:Fe}};function tv(w,z,X){try{const ce=z.configure?.(X);if(ce===void 0)return;let{title:Ce=z.title,description:Ie=z.description,path:Fe=z.path,icon:Je=z.icon,category:et=z.category,...mt}=ce;return V0(ce,`The configure() function for "${z.title}" returned a promise, skipping updates.`),Fe&&Vo(w,Fe),r0({title:Ce,description:Ie},["title","description"]),Object.keys(mt).length>0&&(0,fs.FF)(`Extension "${z.title}", is trying to override restricted properties: ${Object.keys(mt).join(", ")} which will be ignored.`),{title:Ce,description:Ie,path:Fe,icon:Je,category:et}}catch(ce){ce instanceof Error&&(0,fs.FF)(ce.message);return}}function nv(w,z,X){const{onClick:ce}=z;if(ce)return function(Ie){try{(0,Ys.rR)("ui_extension_link_clicked",{pluginId:w,extensionPointId:z.extensionPointId,title:z.title,category:z.category});const Fe=ce(Ie,(0,fs.yb)(w,X));o0(Fe)&&Fe.catch(Je=>{Je instanceof Error&&(0,fs.FF)(Je.message)})}catch(Fe){Fe instanceof Error&&(0,fs.FF)(Fe.message)}}}function av(w,z,X){return fd.kM.appendQueryToUrl(z,fd.kM.toUrlParams({uel_pid:w,uel_epid:X.extensionPointId}))}var l0=e(15162);async function sv(w={}){Dn("frontend_plugins_preload");const z=Object.values(w).filter(ce=>ce.preload),X=await Promise.all(z.map(rv));return ea("frontend_plugins_preload"),X}async function rv(w){const{path:z,version:X,id:ce}=w;try{Dn(`frontend_plugin_preload_${ce}`);const{plugin:Ce}=await Nc.j4({path:z,version:X,isAngular:w.angular.detected,pluginId:ce}),{extensionConfigs:Ie=[]}=Ce;return(0,Kr.x)(ce),{pluginId:ce,extensionConfigs:Ie}}catch(Ce){return console.error(`[Plugins] Failed to preload plugin: ${z} (version: ${X})`,Ce),{pluginId:ce,extensionConfigs:[],error:Ce}}finally{ea(`frontend_plugin_preload_${ce}`)}}var ov=e(39741),iv=e(57532),c0=e(41987),d0=e(65879),lv=e(80924),cv=e(72955),Zp=e(39374);class dv{constructor(){this.subject=new ov.m(1)}get(){return this.subject.asObservable()}run(z){const{queries:X,timezone:ce,datasource:Ce,panelId:Ie,app:Fe,dashboardUID:Je,timeRange:et,timeInfo:mt,cacheTimeout:vt,queryCachingTTL:Pt,maxDataPoints:Ht,scopedVars:Ut,minInterval:At}=z;this.subscription&&this.subscription.unsubscribe();const zt={app:Fe??c0.Jk.Unknown,requestId:(0,lv.S)(),timezone:ce,panelId:Ie,dashboardUID:Je,range:et,timeInfo:mt,interval:"",intervalMs:0,targets:(0,p.cloneDeep)(X),maxDataPoints:Ht,scopedVars:Ut||{},cacheTimeout:vt,queryCachingTTL:Pt,startTime:Date.now()};zt.rangeRaw=et.raw,(0,po.H)(uv(Ce,zt.scopedVars)).pipe((0,iv.$)()).subscribe({next:Pn=>{zt.targets=zt.targets.map(Fa=>(Fa.datasource||(Fa.datasource=Pn.getRef()),Fa));const Ta=At?(0,Re.w)().replace(At,zt.scopedVars):Pn.interval,Va=d0.calculateInterval(et,Ht,Ta);zt.scopedVars=Object.assign({},zt.scopedVars,{__interval:{text:Va.interval,value:Va.interval},__interval_ms:{text:Va.intervalMs.toString(),value:Va.intervalMs}}),zt.interval=Va.interval,zt.intervalMs=Va.intervalMs,this.subscription=(0,Zp.BN)(Pn,zt).subscribe({next:Fa=>{const wa=(0,ai.N$)(Fa,this.lastResult);this.lastResult=(0,cv.B)(wa,this.lastResult),this.subject.next(this.lastResult)}})},error:Pn=>console.error("PanelQueryRunner Error",Pn)})}cancel(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===Tr.Gu.Loading&&this.subject.next({...this.lastResult,state:Tr.Gu.Done}))}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}}async function uv(w,z){return w&&"query"in w?w:(0,d.tR)().get(w,z)}function mv(){window.grafanaRuntime={getDashboardSaveModel:()=>{const w=(0,l.UA)().getCurrent();if(w)return w.getSaveModelCloneOld()},getDashboardTimeRange:()=>{const w=(0,Jo.jG)().timeRange();return{from:w.from.valueOf(),to:w.to.valueOf(),raw:w.raw}},getPanelData:()=>{const w=(0,l.UA)().getCurrent();if(w)return w.panels.reduce((z,X)=>(z[X.id]=X.getQueryRunner().getLastResult(),z),{})}}}var fv=e(16757),vd=e(20601),Ma=e(75096),u0=e(22391),gv=e(27803),qi=e(3843);function m0(w){return w.extended&&"infoText"in w.extended?w.extended:null}function f0(w){return w.extended&&"dataSourceTypes"in w.extended?w.extended:null}function qp(w){return w.extended&&"dataSource"in w.extended?w.extended:null}var Ps=e(87421),Ed=e(26260);const pv=(w,z)=>{const{rootStateKey:X}=z.variable;if(!X)return console.error("AdHocVariableEditor: variable has no rootStateKey"),{extended:m0(qi.nS)};const{editor:ce}=(0,Ps.nx)(X,w);return{extended:m0(ce)}},hv={changeVariableDatasource:Ed.Iv},vv=(0,ro.connect)(pv,hv);class Ev extends a.PureComponent{constructor(){super(...arguments),this.onDatasourceChanged=z=>{this.props.changeVariableDatasource((0,Ma.jX)(this.props.variable),(0,u0.p$)(z))}}componentDidMount(){const{rootStateKey:z}=this.props.variable;if(!z){console.error("AdHocVariableEditor: variable has no rootStateKey");return}}render(){const{variable:z,extended:X}=this.props;return a.createElement(gv.Q,{datasource:z.datasource??void 0,onDataSourceChange:this.onDatasourceChanged,infoText:X?.infoText})}}const yv=vv(Ev);var g0=e(38401),eh=e(83684);const p0=90,h0=({datasource:w,onChange:z,disabled:X,filterKey:ce,allFilters:Ce})=>{const Ie=()=>v0(w,ce,Ce),Fe=()=>Cv(w,ce,Ce);return ce===null?a.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-add-key-wrapper"},a.createElement(eh.s,{disabled:X,className:"query-segment-key",Component:Pv,value:ce,onChange:z,loadOptions:Ie,inputMinWidth:p0})):a.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-key-wrapper"},a.createElement(eh.s,{disabled:X,className:"query-segment-key",value:ce,onChange:z,loadOptions:Fe,inputMinWidth:p0}))},cm="-- remove filter --",Dv={label:cm,value:cm},Pv=a.createElement("span",{className:"gf-form-label query-part","aria-label":"Add Filter"},a.createElement(us.I,{name:"plus"})),v0=async(w,z,X)=>{const ce=await(0,d.tR)().get(w);if(!ce||!ce.getTagKeys)return[];const Ce=X.filter(Fe=>Fe.key!==z);return(await ce.getTagKeys({filters:Ce})).map(Fe=>({label:Fe.text,value:Fe.text}))},Cv=async(w,z,X)=>{const ce=await v0(w,z,X);return[Dv,...ce]},bv=({datasource:w,disabled:z,onChange:X,filterKey:ce,filterValue:Ce,placeHolder:Ie,allFilters:Fe})=>{const Je=()=>Tv(w,ce,Fe);return a.createElement("div",{className:"gf-form","data-testid":"AdHocFilterValue-value-wrapper"},a.createElement(eh.s,{className:"query-segment-value",disabled:z,placeholder:Ie,value:Ce,onChange:X,loadOptions:Je}))},Tv=async(w,z,X)=>{const ce=await(0,d.tR)().get(w);if(!ce||!ce.getTagValues)return[];const Ce=(0,Jo.jG)().timeRange(),Ie=X.filter(Je=>Je.key!==z);return(await ce.getTagValues({key:z,filters:Ie,timeRange:Ce})).map(Je=>({label:Je.text,value:Je.text}))},Mv=["=","!=","<",">","=~","!~"].map(w=>({label:w,value:w})),Sv=({value:w,disabled:z,onChange:X})=>a.createElement(g0.Y,{className:"query-segment-operator",value:w,disabled:z,options:Mv,onChange:X}),E0=({datasource:w,filter:{key:z,operator:X,value:ce},onKeyChange:Ce,onOperatorChange:Ie,onValueChange:Fe,placeHolder:Je,allFilters:et,disabled:mt})=>a.createElement(a.Fragment,null,a.createElement(h0,{disabled:mt,datasource:w,filterKey:z,onChange:Ce,allFilters:et}),a.createElement("div",{className:"gf-form"},a.createElement(Sv,{disabled:mt,value:X,onChange:Ie})),a.createElement(bv,{disabled:mt,datasource:w,filterKey:z,filterValue:ce,allFilters:et,onChange:Fe,placeHolder:Je})),xv=({datasource:w,appendBefore:z,onCompleted:X,allFilters:ce})=>{const[Ce,Ie]=(0,a.useState)(null),[Fe,Je]=(0,a.useState)("="),et=(0,a.useCallback)(Pt=>{if(Pt.value!==cm){Ie(Pt.value??"");return}Ie(null)},[Ie]),mt=(0,a.useCallback)(Pt=>Je(Pt.value??""),[Je]),vt=(0,a.useCallback)(Pt=>{X({value:Pt.value??"",operator:Fe,key:Ce}),Ie(null),Je("=")},[X,Fe,Ce]);return Ce===null?a.createElement(h0,{datasource:w,filterKey:Ce,onChange:et,allFilters:ce}):a.createElement(a.Fragment,{key:"filter-builder"},z,a.createElement(E0,{datasource:w,filter:{key:Ce,value:"",operator:Fe},placeHolder:(0,Ka.t)("variable.adhoc.placeholder","Select value"),onKeyChange:et,onOperatorChange:mt,onValueChange:vt,allFilters:ce}))},y0=({label:w})=>a.createElement("div",{className:"gf-form"},a.createElement("span",{className:"gf-form-label query-keyword"},w));class Ov extends a.PureComponent{constructor(){super(...arguments),this.onChange=(z,X)=>ce=>{const{filters:Ce}=this.props,{value:Ie}=ce;return ce.value===cm?this.props.removeFilter(z):this.props.changeFilter(z,{...Ce[z],[X]:Ie})},this.appendFilterToVariable=z=>{this.props.addFilter(z)}}render(){const{filters:z,disabled:X}=this.props;return a.createElement("div",{className:"gf-form-inline"},this.renderFilters(z,X),!X&&a.createElement(xv,{datasource:this.props.datasource,appendBefore:z.length>0?a.createElement(y0,{label:"AND"}):null,onCompleted:this.appendFilterToVariable,allFilters:this.getAllFilters()}))}getAllFilters(){return this.props.baseFilters?this.props.baseFilters.concat(this.props.filters):this.props.filters}renderFilters(z,X){return z.length===0&&X?a.createElement(g0.Y,{disabled:X,value:"No filters",options:[],onChange:()=>{}}):z.reduce((ce,Ce,Ie)=>(ce.length>0&&ce.push(a.createElement(y0,{label:"AND",key:`condition-${Ie}`})),ce.push(this.renderFilterSegments(Ce,Ie,X)),ce),[])}renderFilterSegments(z,X,ce){return a.createElement(a.Fragment,{key:`filter-${X}`},a.createElement(E0,{disabled:ce,datasource:this.props.datasource,filter:z,onKeyChange:this.onChange(X,"key"),onOperatorChange:this.onChange(X,"operator"),onValueChange:this.onChange(X,"value"),allFilters:this.getAllFilters()}))}}const Iv={addFilter:Ed.U2,removeFilter:Ed.VT,changeFilter:Ed.$u},Av=(0,ro.connect)(null,Iv);class Rv extends a.PureComponent{constructor(){super(...arguments),this.addFilter=z=>{this.props.addFilter((0,Ma.jX)(this.props.variable),z)},this.removeFilter=z=>{this.props.removeFilter((0,Ma.jX)(this.props.variable),z)},this.changeFilter=(z,X)=>{this.props.changeFilter((0,Ma.jX)(this.props.variable),{index:z,filter:X})}}render(){const{filters:z,datasource:X,baseFilters:ce}=this.props.variable;return a.createElement(Ov,{datasource:X,filters:z,baseFilters:ce,disabled:this.props.readOnly,addFilter:this.addFilter,removeFilter:this.removeFilter,changeFilter:this.changeFilter})}}const D0=Av(Rv);D0.displayName="AdHocPicker";var P0=e(53699);const Lv=w=>w.map(z=>wv(z).map(Uv).join("|")),Bv=w=>{if((0,p.isArray)(w))return w.map(C0).filter(Fv);const z=C0(w);return z===null?[]:[z]};function Uv(w){return w==null?"":/\|/g[Symbol.replace](w,"__gfp__")}function Nv(w){return w==null?"":/__gfp__/g[Symbol.replace](w,"|")}function wv(w){return[w.key,w.operator,w.value]}function C0(w){if(!(0,p.isString)(w)||w.length===0)return null;const z=w.split("|").map(Nv);return{key:z[0],operator:z[1],value:z[2]}}function Fv(w){return w!==null&&(0,p.isString)(w.value)}const b0=async()=>{},Wv=()=>({id:"adhoc",description:"Add key/value filters on the fly.",name:"Ad hoc filters",initialState:P0.MK,reducer:P0.AA,picker:D0,editor:yv,dependsOn:()=>!1,setValue:b0,setValueFromUrl:async(w,z)=>{const X=Bv(z);await(0,Is.JD)((0,Ed.D4)((0,Ma.jX)(w),X))},updateOptions:b0,getSaveModel:w=>{const{index:z,id:X,state:ce,global:Ce,rootStateKey:Ie,...Fe}=(0,p.cloneDeep)(w);return Fe},getValueForUrl:w=>{const z=w?.filters??[];return Lv(z)}});var T0=e(82960),Kv=e(8866),lo=e(13344),Zr=e(24240),th=e(13752),M0=e(13288),$v=e(44240),dm=e(16126),Vv=e(38975),_v=e(67791),zv=e(66847),kv=e(69850),Hv=e(62938),Or=e(72401),ws=e(48594),yd=e(83370),_o=e(80484);const Gv={..._o.Vg,type:"query",datasource:null,query:"",regex:"",sort:_o.ZG.disabled,refresh:_o.CO.onDashboardLoad,multi:!1,includeAll:!1,allValue:null,options:[],current:{},definition:""},jv=(w,z)=>{if(z===_o.ZG.disabled)return w;const X=Math.ceil(z/2),ce=z%2===0;return X===1?w=(0,p.sortBy)(w,"text"):X===2?w=(0,p.sortBy)(w,Ce=>{if(!Ce.text)return-1;const Ie=Ce.text.match(/.*?(\d+).*/);return!Ie||Ie.length<2?-1:parseInt(Ie[1],10)}):X===3?w=(0,p.sortBy)(w,Ce=>(0,p.toLower)(Ce.text)):X===4&&w.sort((Ce,Ie)=>Ce.text?Ie.text?Ce.text.localeCompare(Ie.text,void 0,{numeric:!0}):1:-1),ce&&(w=w.reverse()),w},Yv=(w,z)=>{const X=[];let ce=null;z.lastIndex=0;do ce=z.exec(w),ce&&X.push(ce);while(z.global&&ce&&ce[0]!==""&&ce[0]!==void 0);return X},Qv=(w,z,X)=>{let ce,Ce=[];w&&(ce=(0,xt.dO)(w));for(let Ie=0;Ie<X.length;Ie++){const Fe=X[Ie];let Je=Fe.text===void 0||Fe.text===null?Fe.value:Fe.text,et=Fe.value===void 0||Fe.value===null?Fe.text:Fe.value;if((0,p.isNumber)(et)&&(et=et.toString()),(0,p.isNumber)(Je)&&(Je=Je.toString()),ce){const mt=Yv(et,ce);if(!mt.length)continue;const vt=mt.find(At=>At.groups&&At.groups.value),Pt=mt.find(At=>At.groups&&At.groups.text),Ht=mt.find(At=>At.length>1),Ut=mt.length>1&&Ht;if(vt||Pt)et=vt?.groups?.value??Pt?.groups?.text,Je=Pt?.groups?.text??vt?.groups?.value;else if(Ut){for(let At=0;At<mt.length;At++){const zt=mt[At];Ce.push({text:zt[1],value:zt[1],selected:!1})}continue}else Ht&&(Je=Ht[1],et=Ht[1])}Ce.push({text:Je,value:et,selected:!1})}return Ce=(0,p.uniqBy)(Ce,"value"),jv(Ce,z)},S0=(0,bi.Z0)({name:"templating/query",initialState:yd.j,reducers:{updateVariableOptions:(w,z)=>{const{results:X,templatedRegex:ce}=z.payload.data,Ce=(0,Ps.Fs)(w,z.payload.id);if(Ce.type!=="query")return;const{includeAll:Ie,sort:Fe}=Ce,Je=Qv(ce,Fe,X);Ie&&Je.unshift({text:lo.Zm,value:lo.To,selected:!1}),Je.length||Je.push({text:lo.ou,value:lo.Ek,isNone:!0,selected:!1}),Ce.options=Je}}}),Jv=S0.reducer,{updateVariableOptions:Xv}=S0.actions;function Zv(){return w=>w.pipe((0,An.T)(qv))}function qv(w){const z=w.series;if(!z||!z.length)return[];if(nE(z))return z;const X=(0,ai.Bt)(z),ce=[];let Ce=-1,Ie=-1,Fe=-1,Je=-1;for(const et of X)for(let mt=0;mt<et.fields.length;mt++){const vt=et.fields[mt],Pt=(0,ae.Ct)(vt,et,z).toLowerCase();vt.type===k.PU.string&&Fe===-1&&(Fe=mt),Pt==="text"&&vt.type===k.PU.string&&Ie===-1&&(Ie=mt),Pt==="value"&&vt.type===k.PU.string&&Ce===-1&&(Ce=mt),Pt==="expandable"&&(vt.type===k.PU.boolean||vt.type===k.PU.number)&&Je===-1&&(Je=mt)}if(Fe===-1)throw new Error("Couldn't find any field of type string in the results.");for(const et of X)for(let mt=0;mt<et.length;mt++){const vt=Je!==-1?et.fields[Je].values[mt]:void 0,Pt=et.fields[Fe].values[mt],Ht=Ie!==-1?et.fields[Ie].values[mt]:null,Ut=Ce!==-1?et.fields[Ce].values[mt]:null;if(Ce===-1&&Ie===-1){ce.push({text:Pt,value:Pt,expandable:vt});continue}if(Ce===-1&&Ie!==-1){ce.push({text:Ht,value:Ht,expandable:vt});continue}if(Ce!==-1&&Ie===-1){ce.push({text:Ut,value:Ut,expandable:vt});continue}ce.push({text:Ht,value:Ut,expandable:vt})}return ce}function eE(w){return z=>z.pipe((0,An.T)(X=>{const{variable:ce,dispatch:Ce,getTemplatedRegexFunc:Ie}=w;if(!ce.rootStateKey){console.error("updateOptionsState: variable.rootStateKey is not defined");return}const Fe=Ie(ce),Je=(0,Ma.qD)(ce,{results:X,templatedRegex:Fe});Ce((0,ws.kb)(ce.rootStateKey,Xv(Je)))}))}function tE(w){return z=>z.pipe((0,pi.Z)(()=>{const{dispatch:X,variable:ce,searchFilter:Ce}=w;return Ce?(0,Ca.of)():(0,po.H)(X((0,Or.kl)((0,Ma.jX)(ce))))}))}function nE(w){if(!w)return!1;if(!w.length)return!0;const z=w[0];if((0,ai.ci)(z))return!1;for(const X in z){if(!z.hasOwnProperty(X)||z[X]!==null&&typeof z[X]!="string"&&typeof z[X]!="number")continue;const ce=X.toLowerCase();if(ce==="text"||ce==="value")return!0}return!1}var um=e(29505),aE=e(43127);class sE{constructor(){this.runners=[new rE,new oE,new iE,new cE]}getRunnerForDatasource(z){const X=this.runners.find(ce=>ce.canRun(z));if(X)return X;throw new Error("Couldn't find a query runner that matches supplied arguments.")}}class rE{constructor(){this.type=um.Qz.Legacy}canRun(z){return(0,Zr.d5)(z)}getTarget({datasource:z,variable:X}){if((0,Zr.d5)(z))return X.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:z,variable:X,searchFilter:ce,timeSrv:Ce},Ie){if(!(0,Zr.d5)(z))return Dd();const Fe=(0,Ma.iP)(X,ce,Ce,Ie.scopedVars);return(0,po.H)(z.metricFindQuery(X.query,Fe)).pipe((0,pi.Z)(Je=>{if(!Je||!Je.length)return Dd();const et=Je;return(0,Ca.of)({series:et,state:Tr.Gu.Done,timeRange:Fe.range})}))}}class oE{constructor(){this.type=um.Qz.Standard}canRun(z){return(0,Zr.Hf)(z)}getTarget({datasource:z,variable:X}){if((0,Zr.Hf)(z))return z.variables.toDataQuery(X.query);throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:z,runRequest:X},ce){return(0,Zr.Hf)(z)?z.variables.query?X(z,ce,z.variables.query.bind(z.variables)):X(z,ce):Dd()}}class iE{constructor(){this.type=um.Qz.Custom}canRun(z){return(0,Zr.zs)(z)}getTarget({datasource:z,variable:X}){if((0,Zr.zs)(z))return X.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:z,runRequest:X},ce){return(0,Zr.zs)(z)?X(z,ce,z.variables.query.bind(z.variables)):Dd()}}const lE="variable-query";class cE{constructor(){this.type=um.Qz.Datasource}canRun(z){return(0,Zr.X3)(z)}getTarget({datasource:z,variable:X}){if((0,Zr.X3)(z))return{...X.query,refId:X.query.refId??lE};throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:z,runRequest:X},ce){return(0,Zr.X3)(z)?X(z,ce):Dd()}}function Dd(){return(0,Ca.of)({state:Tr.Gu.Done,series:[],timeRange:(0,aE.E2)()})}class dE{constructor(z={dispatch:Is.JD,getState:Is.Gu,getVariable:Ps.dn,getTemplatedRegex:Ma.u7,getTimeSrv:Jo.jG,queryRunners:new sE,runRequest:Zp.BN}){this.dependencies=z,this.updateOptionsRequests=new th.B,this.updateOptionsResults=new th.B,this.cancelRequests=new th.B,this.onNewRequest=this.onNewRequest.bind(this),this.subscription=this.updateOptionsRequests.subscribe(this.onNewRequest)}queueRequest(z){this.updateOptionsRequests.next(z)}getResponse(z){return this.updateOptionsResults.asObservable().pipe((0,dm.p)(X=>X.identifier===z))}cancelRequest(z){this.cancelRequests.next({identifier:z})}destroy(){this.subscription.unsubscribe()}onNewRequest(z){const{datasource:X,identifier:ce,searchFilter:Ce}=z;try{const{dispatch:Ie,runRequest:Fe,getTemplatedRegex:Je,getVariable:et,queryRunners:mt,getTimeSrv:vt,getState:Pt}=this.dependencies,Ht=(0,Ps.y7)(Pt());this.updateOptionsResults.next({identifier:ce,state:Tr.Gu.Loading});const Ut=et(ce,Pt());if(Ut.type!=="query")return;const At=vt(),zt={variable:Ut,datasource:X,searchFilter:Ce,timeSrv:At,runRequest:Fe},Pn=mt.getRunnerForDatasource(X),Ta=Pn.getTarget({datasource:X,variable:Ut}),Va=this.getRequest(Ut,z,Ta);Pn.runRequest(zt,Va).pipe((0,dm.p)(()=>{const Fa=(0,Ps.y7)(Pt());return Ht===Fa}),(0,dm.p)(Fa=>Fa.state===Tr.Gu.Done||Fa.state===Tr.Gu.Error),(0,Vv.s)(1),(0,pi.Z)(Fa=>Fa.state===Tr.Gu.Error?(0,M0.$)(()=>Fa.error):(0,Ca.of)(Fa)),Zv(),eE({variable:Ut,dispatch:Ie,getTemplatedRegexFunc:Je}),tE({variable:Ut,dispatch:Ie,searchFilter:Ce}),(0,_v.Q)((0,$v.h)(this.updateOptionsRequests,this.cancelRequests).pipe((0,dm.p)(Fa=>{let wa=!1;return Fa.identifier.id===ce.id&&(wa=!0,this.updateOptionsResults.next({identifier:ce,state:Tr.Gu.Loading,cancelled:wa})),wa}))),(0,zv.W)(Fa=>Fa.cancelled?(0,Ca.of)({}):(this.updateOptionsResults.next({identifier:ce,state:Tr.Gu.Error,error:Fa}),(0,M0.$)(()=>Fa))),(0,kv.j)(()=>{this.updateOptionsResults.next({identifier:ce,state:Tr.Gu.Done})})).subscribe()}catch(Ie){this.updateOptionsResults.next({identifier:ce,state:Tr.Gu.Error,error:Ie})}}getRequest(z,X,ce){const{searchFilter:Ce}=X,Ie={variable:{text:z.current.text,value:z.current.value}},et={...Ce?{searchFilter:{text:Ce,value:Ce}}:{},...Ie},mt=this.dependencies.getTimeSrv().timeRange();return{app:c0.Jk.Dashboard,requestId:(0,Hv.A)(),timezone:"",range:mt,interval:"",intervalMs:0,targets:[ce],scopedVars:et,startTime:Date.now()}}}let x0;function uE(w){x0=w}function nh(){return x0}const mE=w=>{if(!fE(w))return w.name;const{current:z}=w;return Array.isArray(z.text)?z.text.join(" + "):z.text},fE=w=>Array.isArray(w?.options)||typeof w?.current=="object";var gl=(w=>(w[w.moveUp=38]="moveUp",w[w.moveDown=40]="moveDown",w[w.select=32]="select",w[w.cancel=27]="cancel",w[w.selectAndClose=13]="selectAndClose",w))(gl||{});class gE extends a.PureComponent{constructor(){super(...arguments),this.onKeyDown=z=>{if(gl[z.keyCode]&&z.keyCode!==gl.select){const X=z.ctrlKey||z.metaKey||z.shiftKey;this.props.onNavigate(z.keyCode,X),z.preventDefault()}},this.onChange=z=>{this.props.onChange(z.target.value)}}render(){const{value:z,id:X,onNavigate:ce,...Ce}=this.props;return a.createElement("input",{...Ce,ref:Ie=>{Ie&&(Ie.focus(),Ie.setAttribute("style",`width:${Math.max(Ie.width,150)}px`))},type:"text",className:"gf-form-input",value:z??"",onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:(0,Ka.t)("variable.dropdown.placeholder","Enter variable value")})}}var pE=e(89963);const hE=({loading:w,disabled:z,onClick:X,text:ce,onCancel:Ce,id:Ie})=>{const Fe=(0,St.of)(I0),Je=(0,a.useCallback)(et=>{et.stopPropagation(),et.preventDefault(),X()},[X]);return w?a.createElement("div",{className:Fe.container,"data-testid":kr.Tp.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${ce}`),title:ce,id:Ie},a.createElement(O0,{text:ce}),a.createElement(pE.I,{loading:!0,onCancel:Ce})):a.createElement("button",{onClick:Je,className:Fe.container,"data-testid":kr.Tp.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${ce}`),"aria-expanded":!1,"aria-controls":`options-${Ie}`,id:Ie,title:ce,disabled:z},a.createElement(O0,{text:ce}),a.createElement(us.I,{"aria-hidden":!0,name:"angle-down",size:"sm"}))},O0=({text:w})=>{const z=(0,St.of)(I0);return a.createElement("span",{className:z.textAndTags},w===lo.Zm?(0,Ka.t)("variable.picker.link-all","All"):w)},I0=w=>({container:(0,rt.css)`
    max-width: 500px;
    padding-right: 10px;
    padding: 0 ${w.spacing(1)};
    background-color: ${w.components.input.background};
    border: 1px solid ${w.components.input.borderColor};
    border-radius: ${w.shape.radius.default};
    display: flex;
    align-items: center;
    color: ${w.colors.text};
    height: ${w.spacing(w.components.height.md)};

    .label-tag {
      margin: 0 5px;
    }

    &:disabled {
      background-color: ${w.colors.action.disabledBackground};
      color: ${w.colors.action.disabledText};
      border: 1px solid ${w.colors.action.disabledBackground};
    }
  `,textAndTags:(0,rt.css)`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-right: ${w.spacing(.25)};
    user-select: none;
  `});class vE extends a.PureComponent{constructor(){super(...arguments),this.onToggle=z=>X=>{const ce=X.shiftKey||X.ctrlKey||X.metaKey;this.handleEvent(X),this.props.onToggle(z,ce)},this.onToggleAll=z=>{this.handleEvent(z),this.props.onToggleAll()}}handleEvent(z){z.preventDefault(),z.stopPropagation()}render(){const{multi:z,values:X,highlightIndex:ce,selectedValues:Ce,onToggle:Ie,onToggleAll:Fe,theme:Je,...et}=this.props,mt=ah(Je);return a.createElement("div",{className:mt.variableValueDropdown},a.createElement("div",{className:mt.variableOptionsWrapper},a.createElement("ul",{className:mt.variableOptionsColumn,"aria-label":kr.Tp.pages.Dashboard.SubMenu.submenuItemValueDropDownDropDown,...et},this.renderMultiToggle(),X.map((vt,Pt)=>this.renderOption(vt,Pt)))))}renderOption(z,X){const{highlightIndex:ce,multi:Ce,theme:Ie}=this.props,Fe=ah(Ie),Je=z.value===lo.To;return a.createElement("li",{key:`${z.value}`},a.createElement("button",{"data-testid":kr.Tp.components.Variables.variableOption,role:"checkbox",type:"button","aria-checked":z.selected,className:(0,rt.cx)((0,ie.my)(Ie),Fe.variableOption,{[Fe.highlighted]:X===ce,[Fe.variableAllOption]:Je},Fe.noStyledButton),onClick:this.onToggle(z)},a.createElement("span",{className:(0,rt.cx)(Fe.variableOptionIcon,{[Fe.variableOptionIconSelected]:z.selected,[Fe.hideVariableOptionIcon]:!Ce})}),a.createElement("span",{"data-testid":kr.Tp.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(`${z.text}`)},Je?(0,Ka.t)("variable.picker.option-all","All"):z.text)))}renderMultiToggle(){const{multi:z,selectedValues:X,theme:ce,values:Ce}=this.props,Ie=ah(ce),Fe=Ce.some(et=>et.value===lo.To);if(!z)return null;const Je=()=>a.createElement(Ka.x6,{i18nKey:"variable.picker.option-tooltip"},"Clear selections");return a.createElement(Ls.m,{content:Je,placement:"top"},a.createElement("button",{className:(0,rt.cx)((0,ie.my)(ce),Ie.variableOption,Ie.variableOptionColumnHeader,Ie.noStyledButton,{[Ie.noPaddingBotton]:Fe}),role:"checkbox","aria-checked":X.length>1?"mixed":"false",onClick:this.onToggleAll,"aria-label":"Toggle all values","data-placement":"top"},a.createElement("span",{className:(0,rt.cx)(Ie.variableOptionIcon,{[Ie.variableOptionIconManySelected]:X.length>1})}),a.createElement(Ka.x6,{i18nKey:"variable.picker.option-selected-values"},"Selected")," (",X.length,")"))}}const ah=(0,Hn.N)(w=>{const z=w.isDark?"public/img/checkbox.png":"public/img/checkbox_white.png";return{hideVariableOptionIcon:(0,rt.css)({display:"none"}),highlighted:(0,rt.css)({backgroundColor:w.colors.action.hover}),noStyledButton:(0,rt.css)({width:"100%",textAlign:"left"}),variableOption:(0,rt.css)({display:"block",padding:"2px 27px 0 8px",position:"relative",whiteSpace:"nowrap",minWidth:"115px",["&:hover"]:{backgroundColor:w.colors.action.hover}}),variableOptionColumnHeader:(0,rt.css)({paddingTop:"5px",paddingBottom:"5px",marginBottom:"5px"}),variableOptionIcon:(0,rt.css)({display:"inline-block",width:"24px",height:"18px",position:"relative",top:"4px",background:`url(${z}) left top no-repeat`}),variableOptionIconManySelected:(0,rt.css)({background:`url(${z}) 0px -36px no-repeat`}),variableOptionIconSelected:(0,rt.css)({background:`url(${z}) 0px -18px no-repeat`}),variableValueDropdown:(0,rt.css)({backgroundColor:w.colors.background.primary,border:`1px solid ${w.colors.border.weak}`,borderRadius:w.shape.borderRadius(2),boxShadow:w.shadows.z2,position:"absolute",top:w.spacing(w.components.height.md),maxHeight:"400px",minHeight:"150px",minWidth:"150px",overflowY:"auto",overflowX:"hidden",zIndex:w.zIndex.typeahead}),variableOptionsColumn:(0,rt.css)({maxHeight:"350px",display:"table-cell",lineHeight:"26px",listStyleType:"none"}),variableOptionsWrapper:(0,rt.css)({display:"table",width:"100%"}),variableAllOption:(0,rt.css)({borderBottom:`1px solid ${w.colors.border.weak}`,paddingBottom:w.spacing(1)}),noPaddingBotton:(0,rt.css)({paddingBottom:0})}}),EE=(0,St.cV)(vE);var yE=e(92053),A0=e(92041),pl=e(56968),ci=e(24300);const DE=(w,z,X)=>async(ce,Ce)=>{if(z===gl.cancel)return await ce(mm(w));if(z===gl.select)return ce(sh(w,X));if(z===gl.selectAndClose)return(0,Ps.nx)(w,Ce()).optionsPicker.multi?ce(sh(w,X)):(ce(sh(w,X,!0)),ce(mm(w)));if(z===gl.moveDown)return ce((0,ws.kb)(w,(0,ci.O$)(1)));if(z===gl.moveUp)return ce((0,ws.kb)(w,(0,ci.O$)(-1)))},PE=(w,z="")=>async(X,ce)=>{const{rootStateKey:Ce}=w,{id:Ie,queryValue:Fe}=(0,Ps.nx)(Ce,ce()).optionsPicker,Je={id:Ie,rootStateKey:Ce,type:"query"},et=(0,Ps.dn)(Je,ce());if(!("options"in et)||(X((0,ws.kb)(Ce,(0,ci.S8)(z))),(0,p.trim)(Fe)===(0,p.trim)(z)))return;const{query:mt,options:vt}=et,Pt=typeof mt=="string"?mt:mt.target;return(0,yE.E)(Pt)?ME(X,ce,z,Ce):X((0,ws.kb)(Ce,(0,ci.fx)(vt)))},CE=async w=>{if((0,A0.R)(w.current))return;await vd.B.get(w.type).setValue(w,w.current,!0)},mm=(w,z)=>async(X,ce)=>{const Ce=(0,Ps.nx)(w,ce()).optionsPicker,Ie={id:Ce.id,rootStateKey:w,type:"query"},Fe=(0,Ps.dn)(Ie,ce());if(!(0,Zr.SP)(Fe))return;const Je={option:SE(Ce)},et={propName:"queryValue",propValue:Ce.queryValue};X((0,ws.kb)(w,(0,pl.dE)((0,Ma.qD)(Fe,Je)))),X((0,ws.kb)(w,(0,pl.QP)((0,Ma.qD)(Fe,et))));const mt=(0,Ps.dn)(Ie,ce());if((0,Zr.SP)(mt)&&(X((0,ws.kb)(w,(0,ci.Fu)())),(0,Ma.Lz)(Fe)!==(0,Ma.Lz)(mt)))return z?z(mt):await CE(mt)},bE=(w,z)=>async(X,ce)=>{const{id:Ce,rootStateKey:Ie}=w,Fe=(0,Ps.nx)(Ie,ce()).optionsPicker;Fe.id&&Fe.id!==Ce&&await X(mm(Ie,z));const Je=(0,Ps.dn)(w,ce());(0,Zr.SP)(Je)&&X((0,ws.kb)(Ie,(0,ci.MO)(Je)))},sh=(w,z,X=!1)=>(ce,Ce)=>{const{highlightIndex:Ie,options:Fe}=(0,Ps.nx)(w,Ce()).optionsPicker,Je=Fe[Ie];ce((0,ws.kb)(w,(0,ci.U9)({option:Je,forceSelect:X,clearOthers:z})))},TE=async(w,z,X,ce)=>{try{const{id:Ce}=(0,Ps.nx)(ce,z()).optionsPicker,Ie={id:Ce,rootStateKey:ce,type:"query"},Fe=(0,Ps.dn)(Ie,z());if(!(0,Zr.SP)(Fe))return;await vd.B.get(Fe.type).updateOptions(Fe,X);const et=(0,Ps.dn)(Ie,z());if(!(0,Zr.SP)(et))return;w((0,ws.kb)(ce,(0,ci.qh)(et.options)))}catch(Ce){console.error(Ce)}},ME=(0,p.debounce)(TE,500);function SE(w){const{options:z,selectedValues:X,queryValue:ce,multi:Ce}=w;if(z.length===0&&ce&&ce.length>0)return{text:ce,value:ce,selected:!1};if(!Ce)return X.find(Je=>Je.selected);const Ie=[],Fe=[];for(const Je of X)Je.selected&&(Ie.push(Je.text.toString()),Fe.push(Je.value.toString()));return{value:Fe,text:Ie,selected:!0}}const Pd=()=>{const w=Ie=>({...(0,T0.bindActionCreators)({openOptions:bE,commitChangesToVariable:mm,navigateOptions:DE},Ie),filterOrSearchOptions:(Fe,Je="")=>{Ie(PE(Fe,Je))},toggleAllOptions:Fe=>Ie((0,ws.kb)(Fe.rootStateKey,(0,ci.an)())),toggleOption:(Fe,Je,et,mt)=>Ie((0,ws.kb)(Fe.rootStateKey,(0,ci.U9)({option:Je,clearOthers:et,forceSelect:mt})))}),z=(Ie,Fe)=>{const{rootStateKey:Je}=Fe.variable;return Je?{picker:(0,Ps.nx)(Je,Ie).optionsPicker}:(console.error("OptionPickerFactory: variable has no rootStateKey"),{picker:ci.$z})},X=(0,ro.connect)(z,w);class ce extends a.PureComponent{constructor(){super(...arguments),this.onShowOptions=()=>this.props.openOptions((0,Ma.jX)(this.props.variable),this.props.onVariableChange),this.onHideOptions=()=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.commitChangesToVariable(this.props.variable.rootStateKey,this.props.onVariableChange)},this.onToggleOption=(Fe,Je)=>{((0,Zr.iv)(this.props.variable)&&this.props.variable.multi?this.onToggleMultiValueVariable:this.onToggleSingleValueVariable)(Fe,Je)},this.onToggleSingleValueVariable=(Fe,Je)=>{this.props.toggleOption((0,Ma.jX)(this.props.variable),Fe,Je,!1),this.onHideOptions()},this.onToggleMultiValueVariable=(Fe,Je)=>{this.props.toggleOption((0,Ma.jX)(this.props.variable),Fe,Je,!1)},this.onToggleAllOptions=()=>{this.props.toggleAllOptions((0,Ma.jX)(this.props.variable))},this.onFilterOrSearchOptions=Fe=>{this.props.filterOrSearchOptions((0,Ma.jX)(this.props.variable),Fe)},this.onNavigate=(Fe,Je)=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.navigateOptions(this.props.variable.rootStateKey,Fe,Je)},this.onCancel=()=>{nh().cancelRequest((0,Ma.jX)(this.props.variable))}}render(){const{variable:Fe,picker:Je}=this.props,et=Je.id===Fe.id;return a.createElement("div",{className:"variable-link-wrapper"},et?this.renderOptions(Je):this.renderLink(Fe))}renderLink(Fe){const Je=mE(Fe),et=Fe.state===Tr.Gu.Loading;return a.createElement(hE,{id:lo.qz+Fe.id,text:Je,onClick:this.onShowOptions,loading:et,onCancel:this.onCancel,disabled:this.props.readOnly})}renderOptions(Fe){const{id:Je}=this.props.variable;return a.createElement(Kv.N,{onClick:this.onHideOptions},a.createElement(gE,{id:lo.qz+Je,value:Fe.queryValue,onChange:this.onFilterOrSearchOptions,onNavigate:this.onNavigate,"aria-expanded":!0,"aria-controls":`options-${Je}`}),a.createElement(EE,{values:Fe.options,onToggle:this.onToggleOption,onToggleAll:this.onToggleAllOptions,highlightIndex:Fe.highlightIndex,multi:Fe.multi,selectedValues:Fe.selectedValues,id:`options-${Je}`}))}}const Ce=X(ce);return Ce.displayName="OptionsPicker",Ce};var xE=e(95802);class OE extends a.PureComponent{constructor(){super(...arguments),this.onChange=z=>{this.props.onPropChange({propName:"query",propValue:z.currentTarget.value,updateOptions:!0})}}render(){return a.createElement(xE.d,{constantValue:this.props.variable.query,onChange:this.onChange})}}const IE={..._o.Vg,type:"constant",hide:_o.zL.hideVariable,query:"",current:{},options:[]},R0=(0,bi.Z0)({name:"templating/constant",initialState:yd.j,reducers:{createConstantOptionsFromQuery:(w,z)=>{const X=(0,Ps.Fs)(w,z.payload.id);X.type==="constant"&&(X.options=[{text:X.query.trim(),value:X.query.trim(),selected:!1}])}}}),AE=R0.reducer,{createConstantOptionsFromQuery:RE}=R0.actions,LE=w=>async z=>{const{rootStateKey:X}=w;await z((0,ws.kb)(X,RE((0,Ma.qD)(w)))),await z((0,Or.kl)(w))},BE=()=>({id:"constant",description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share.",name:"Constant",initialState:IE,reducer:AE,picker:Pd(),editor:OE,dependsOn:()=>!1,setValue:async(w,z,X=!1)=>{await(0,Is.JD)((0,Or.t9)((0,Ma.jX)(w),z,X))},setValueFromUrl:async(w,z)=>{await(0,Is.JD)((0,Or.x7)((0,Ma.jX)(w),z))},updateOptions:async w=>{await(0,Is.JD)(LE((0,Ma.jX)(w)))},getSaveModel:w=>{const{index:z,id:X,state:ce,global:Ce,current:Ie,options:Fe,rootStateKey:Je,...et}=(0,p.cloneDeep)(w);return et},getValueForUrl:w=>w.current.value,beforeAdding:w=>{const{current:z,options:X,query:ce,...Ce}=(0,p.cloneDeep)(w),Ie={selected:!0,text:ce,value:ce};return{...Ce,current:Ie,options:[Ie],query:ce}}});var UE=e(58711);class NE extends a.PureComponent{constructor(){super(...arguments),this.onSelectionOptionsChange=async({propName:z,propValue:X})=>{this.props.onPropChange({propName:z,propValue:X,updateOptions:!0})},this.onQueryChange=z=>{this.props.onPropChange({propName:"query",propValue:z.currentTarget.value,updateOptions:!0})}}render(){return a.createElement(UE.w,{query:this.props.variable.query,multi:this.props.variable.multi,allValue:this.props.variable.allValue,includeAll:this.props.variable.includeAll,onQueryChange:this.onQueryChange,onMultiChange:z=>this.onSelectionOptionsChange({propName:"multi",propValue:z.currentTarget.checked}),onIncludeAllChange:z=>this.onSelectionOptionsChange({propName:"includeAll",propValue:z.currentTarget.checked}),onAllValueChange:z=>this.onSelectionOptionsChange({propName:"allValue",propValue:z.currentTarget.value})})}}const wE=(w,z)=>({}),FE={changeVariableMultiValue:Or.TI},WE=Yp(NE,wE,FE),KE={..._o.Vg,type:"custom",multi:!1,includeAll:!1,allValue:null,query:"",options:[],current:{}},L0=(0,bi.Z0)({name:"templating/custom",initialState:yd.j,reducers:{createCustomOptionsFromQuery:(w,z)=>{const X=(0,Ps.Fs)(w,z.payload.id);if(X.type!=="custom")return;const{includeAll:ce}=X,Fe=(z.payload.data.match(/(?:\\,|[^,])+/g)??[]).map(Je=>{Je=Je.replace(/\\,/g,",");const et=/^(.+)\s:\s(.+)$/g.exec(Je)??[];if(et.length===3){const[,mt,vt]=et;return{text:mt.trim(),value:vt.trim(),selected:!1}}else return{text:Je.trim(),value:Je.trim(),selected:!1}});ce&&Fe.unshift({text:lo.Zm,value:lo.To,selected:!1}),X.options=Fe}}}),$E=L0.reducer,{createCustomOptionsFromQuery:VE}=L0.actions,_E=w=>async(z,X)=>{const{rootStateKey:ce}=w,Ce=(0,Ps.dn)(w,X());if(Ce.type!=="custom")return;const Ie=(0,Re.w)().replace(Ce.query);await z((0,ws.kb)(ce,VE((0,Ma.qD)(w,Ie)))),await z((0,Or.kl)(w))},zE=()=>({id:"custom",description:"Define variable values manually",name:"Custom",initialState:KE,reducer:$E,picker:Pd(),editor:WE,dependsOn:(w,z)=>(0,Ma.wJ)(w.query,z.name),setValue:async(w,z,X=!1)=>{await(0,Is.JD)((0,Or.t9)((0,Ma.jX)(w),z,X))},setValueFromUrl:async(w,z)=>{await(0,Is.JD)((0,Or.x7)((0,Ma.jX)(w),z))},updateOptions:async w=>{await(0,Is.JD)(_E((0,Ma.jX)(w)))},getSaveModel:w=>{const{index:z,id:X,state:ce,global:Ce,rootStateKey:Ie,...Fe}=(0,p.cloneDeep)(w);return Fe},getValueForUrl:w=>(0,Ma.ML)(w)?lo.Zm:w.current.value});var kE=e(98917),HE=e(80147);const GE={..._o.Vg,type:"datasource",current:{},regex:"",options:[],query:"",multi:!1,includeAll:!1,refresh:_o.CO.onDashboardLoad},B0=(0,bi.Z0)({name:"templating/datasource",initialState:yd.j,reducers:{createDataSourceOptions:(w,z)=>{const{sources:X,regex:ce}=z.payload.data,Ce=[],Ie=(0,Ps.Fs)(w,z.payload.id);if(Ie.type==="datasource"){for(let Fe=0;Fe<X.length;Fe++){const Je=X[Fe];(0,HE._)(Ie.query,Je.meta)&&(jE(Je,ce)&&Ce.push({text:Je.name,value:Je.uid,selected:!1}),YE(Je,ce)&&Ce.push({text:"default",value:"default",selected:!1}))}Ce.length===0&&Ce.push({text:"No data sources found",value:"",selected:!1}),Ie.includeAll&&Ce.unshift({text:lo.Zm,value:lo.To,selected:!1}),Ie.options=Ce}}}});function jE(w,z){return z?z.exec(w.name):!0}function YE(w,z){return w.isDefault?z?z.exec("default"):!0:!1}const QE=B0.reducer,{createDataSourceOptions:JE}=B0.actions,XE=(w,z={getDatasourceSrv:d.tR})=>async(X,ce)=>{const{rootStateKey:Ce}=w,Ie=z.getDatasourceSrv().getList({metrics:!0,variables:!1}),Fe=(0,Ps.dn)(w,ce());if(Fe.type!=="datasource")return;let Je;Fe.regex&&(Je=(0,Re.w)().replace(Fe.regex,void 0,"regex"),Je=(0,xt.dO)(Je)),X((0,ws.kb)(Ce,JE((0,Ma.qD)(w,{sources:Ie,regex:Je})))),await X((0,Or.kl)(w))},ZE=(w,z={getDatasourceSrv:d.tR})=>X=>{const ce=z.getDatasourceSrv().getList({metrics:!0,variables:!0}),Ce=(0,p.chain)(ce).uniqBy("meta.id").map(Ie=>({text:Ie.meta.name,value:Ie.meta.id})).value();Ce.unshift({text:"",value:""}),X((0,ws.kb)(w,(0,qi.BC)({dataSourceTypes:Ce})))},qE=(w,z)=>{const{variable:{rootStateKey:X}}=z;if(!X)return console.error("DataSourceVariableEditor: variable has no rootStateKey"),{extended:f0(qi.nS)};const{editor:ce}=(0,Ps.nx)(X,w);return{extended:f0(ce)}},ey={initDataSourceVariableEditor:ZE,changeVariableMultiValue:Or.TI},ty=(0,ro.connect)(qE,ey);class ny extends a.PureComponent{constructor(){super(...arguments),this.onRegExBlur=z=>{this.props.onPropChange({propName:"regex",propValue:z.currentTarget.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:z,propName:X})=>{this.props.onPropChange({propName:X,propValue:z,updateOptions:!0})},this.onMultiChanged=z=>{this.props.changeVariableMultiValue((0,Ma.jX)(this.props.variable),z.currentTarget.checked)},this.onIncludeAllChanged=z=>{this.onSelectionOptionsChange({propName:"includeAll",propValue:z.currentTarget.checked})},this.onAllValueChanged=z=>{this.onSelectionOptionsChange({propName:"allValue",propValue:z.currentTarget.value})},this.getSelectedDataSourceTypeValue=()=>{const{extended:z}=this.props;if(!z?.dataSourceTypes.length)return"";const X=z.dataSourceTypes.find(Ce=>Ce.value===this.props.variable.query);return(X?X.value:z.dataSourceTypes[0].value)??""},this.onDataSourceTypeChanged=z=>{this.props.onPropChange({propName:"query",propValue:z.value,updateOptions:!0})}}componentDidMount(){const{rootStateKey:z}=this.props.variable;if(!z){console.error("DataSourceVariableEditor: variable has no rootStateKey");return}this.props.initDataSourceVariableEditor(z)}render(){const{variable:z,extended:X}=this.props,ce=X?.dataSourceTypes?.length?X.dataSourceTypes?.map(Ce=>({value:Ce.value??"",label:Ce.text})):[];return a.createElement(kE.y,{query:z.query,regex:z.regex,multi:z.multi,includeAll:z.includeAll,optionTypes:ce,onChange:this.onDataSourceTypeChanged,onRegExBlur:this.onRegExBlur,onMultiChange:this.onMultiChanged,onIncludeAllChange:this.onIncludeAllChanged,onAllValueChange:this.onAllValueChanged})}}const ay=ty(ny),sy=()=>({id:"datasource",description:"Enables you to dynamically switch the data source for multiple panels.",name:"Data source",initialState:GE,reducer:QE,picker:Pd(),editor:ay,dependsOn:(w,z)=>w.regex?(0,Ma.wJ)(w.regex,z.name):!1,setValue:async(w,z,X=!1)=>{await(0,Is.JD)((0,Or.t9)((0,Ma.jX)(w),z,X))},setValueFromUrl:async(w,z)=>{await(0,Is.JD)((0,Or.x7)((0,Ma.jX)(w),z))},updateOptions:async w=>{await(0,Is.JD)(XE((0,Ma.jX)(w)))},getSaveModel:w=>{const{index:z,id:X,state:ce,global:Ce,rootStateKey:Ie,...Fe}=(0,p.cloneDeep)(w);return{...Fe,options:[]}},getValueForUrl:w=>(0,Ma.ML)(w)?lo.Zm:w.current.value});var ry=e(25304),oy=e(49317);const U0=a.memo(({onPropChange:w,variable:z})=>{const X=Fe=>{w({propName:"auto",propValue:Fe.target.checked,updateOptions:!0})},ce=Fe=>{w({propName:"query",propValue:Fe.currentTarget.value,updateOptions:!0})},Ce=Fe=>{w({propName:"auto_count",propValue:Fe.value,updateOptions:!0})},Ie=Fe=>{w({propName:"auto_min",propValue:Fe.currentTarget.value,updateOptions:!0})};return a.createElement(oy.s,{intervals:z.query,autoStepCount:z.auto_count,autoEnabled:z.auto,onAutoCountChanged:Ce,onIntervalsChange:ce,onAutoEnabledChange:X,onAutoMinIntervalChanged:Ie,autoMinInterval:z.auto_min})});U0.displayName="IntervalVariableEditor";var iy=e(87986),rh=e(81515);const ly=w=>async z=>{const{rootStateKey:X}=w;await z((0,ws.kb)(X,(0,rh.mn)((0,Ma.qD)(w)))),await z(oh(w)),await z((0,Or.kl)(w))},oh=(w,z={calculateInterval:d0.calculateInterval,getTimeSrv:Jo.jG,templateSrv:(0,iy.w)()})=>(X,ce)=>{const Ce=(0,Ps.dn)(w,ce());if(Ce.type==="interval"&&Ce.auto){const Ie=z.calculateInterval(z.getTimeSrv().timeRange(),Ce.auto_count,Ce.auto_min);z.templateSrv.setGrafanaVariable("$__auto_interval_"+Ce.name,Ie.interval),z.templateSrv.setGrafanaVariable("$__auto_interval",Ie.interval)}},cy=()=>({id:"interval",description:"Define a timespan interval (ex 1m, 1h, 1d)",name:"Interval",initialState:rh.Ez,reducer:rh.E5,picker:Pd(),editor:U0,dependsOn:()=>!1,setValue:async(w,z,X=!1)=>{await(0,Is.JD)(oh((0,Ma.jX)(w))),await(0,Is.JD)((0,Or.t9)((0,Ma.jX)(w),z,X))},setValueFromUrl:async(w,z)=>{await(0,Is.JD)(oh((0,Ma.jX)(w))),await(0,Is.JD)((0,Or.x7)((0,Ma.jX)(w),z))},updateOptions:async w=>{await(0,Is.JD)(ly((0,Ma.jX)(w)))},getSaveModel:w=>{const{index:z,id:X,state:ce,global:Ce,rootStateKey:Ie,...Fe}=(0,p.cloneDeep)(w);return Fe},getValueForUrl:w=>w.current.value});var dy=e(44890),uy=e(64423),my=e(12091),fy=e(70766);function gy(w,z,X){return{next:Ce=>{if(Ce.state===Tr.Gu.Error){X.unsubscribe(),z(Ce.error);return}if(Ce.state===Tr.Gu.Done){X.unsubscribe(),w();return}},error:Ce=>{X.unsubscribe(),z(Ce)},complete:()=>{X.unsubscribe(),w()}}}const py=(w,z)=>async(X,ce)=>{try{const{rootStateKey:Ce}=w;if(!(0,Ma.sN)(Ce,ce()))return;const Ie=(0,Ps.dn)(w,ce());if(Ie.type!=="query")return;(0,Ps.nx)(Ce,ce()).editor.id===Ie.id&&X((0,ws.kb)(Ce,(0,qi.Eo)({errorProp:"update"})));const Fe=await(0,U.l)().get(Ie.datasource??"");await new Promise((Je,et)=>{const mt=new uy.yU,vt=gy(Je,et,mt),Pt=nh().getResponse(w).subscribe(vt);mt.add(Pt),nh().queueRequest({identifier:w,datasource:Fe,searchFilter:z})})}catch(Ce){if(Ce instanceof Error){const Ie=(0,my.u)(Ce),{rootStateKey:Fe}=w;throw(0,Ps.nx)(Fe,ce()).editor.id===w.id&&X((0,ws.kb)(Fe,(0,qi.NY)({errorProp:"update",errorText:Ie.message}))),Ie}}},hy=w=>async(z,X)=>{const ce=(0,Ps.dn)(w,X());ce.type==="query"&&await z(N0((0,Ma.jX)(ce),ce.datasource))},N0=(w,z)=>async(X,ce)=>{try{const{rootStateKey:Ce}=w,{editor:Ie}=(0,Ps.nx)(Ce,ce()),Je=qp(Ie)?.dataSource,et=await(0,U.l)().get(z??"");Je&&Je.type!==et?.type&&X((0,ws.kb)(Ce,(0,pl.QP)((0,Ma.qD)(w,{propName:"query",propValue:""}))));const mt=await(0,fy.y)(et);X((0,ws.kb)(Ce,(0,qi.BC)({dataSource:et,VariableQueryEditor:mt})))}catch(Ce){console.error(Ce)}},vy=(w,z,X)=>async(ce,Ce)=>{const{rootStateKey:Ie}=w,Fe=(0,Ps.dn)(w,Ce());if(Fe.type==="query"){if(Ey(Fe.name,z)){const Je="Query cannot contain a reference to itself. Variable: $"+Fe.name;ce((0,ws.kb)(Ie,(0,qi.NY)({errorProp:"query",errorText:Je})));return}ce((0,ws.kb)(Ie,(0,qi.Eo)({errorProp:"query"}))),ce((0,ws.kb)(Ie,(0,pl.QP)((0,Ma.qD)(w,{propName:"query",propValue:z})))),X!==void 0?ce((0,ws.kb)(Ie,(0,pl.QP)((0,Ma.qD)(w,{propName:"definition",propValue:X})))):typeof z=="string"&&ce((0,ws.kb)(Ie,(0,pl.QP)((0,Ma.qD)(w,{propName:"definition",propValue:z})))),await ce((0,Or.mZ)(w))}};function Ey(w,z){if(typeof z=="string"&&z.match(new RegExp("\\$"+w+"(/| |$)")))return!0;const X=w0(z);for(let ce in X)if(X.hasOwnProperty(ce)){const Ce=X[ce];if(typeof Ce=="string"&&Ce.match(new RegExp("\\$"+w+"(/| |$)")))return!0}return!1}function w0(w){return typeof w!="object"||w===null?{query:w}:Object.keys(w).reduce((ce,Ce)=>{const Ie=w[Ce];if(typeof Ie!="object"||Ie===null)return ce[Ce]=Ie,ce;const Fe=w0(Ie);for(let Je in Fe)Fe.hasOwnProperty(Je)&&(ce[`${Ce}_${Je}`]=Fe[Je]);return ce},{})}const yy=(w,z)=>{const{rootStateKey:X}=z.variable;if(!X)return console.error("QueryVariableEditor: variable has no rootStateKey"),{extended:qp(qi.nS)};const{editor:ce}=(0,Ps.nx)(X,w);return{extended:qp(ce)}},Dy={initQueryVariableEditor:hy,changeQueryVariableDataSource:N0,changeQueryVariableQuery:vy,changeVariableMultiValue:Or.TI},Py=(0,ro.connect)(yy,Dy);class Cy extends a.PureComponent{constructor(){super(...arguments),this.state={regex:null,tagsQuery:null,tagValuesQuery:null},this.onDataSourceChange=z=>{this.props.onPropChange({propName:"datasource",propValue:z.isDefault?null:(0,u0.p$)(z)})},this.onLegacyQueryChange=async(z,X)=>{this.props.variable.query!==z&&this.props.changeQueryVariableQuery((0,Ma.jX)(this.props.variable),z,X)},this.onQueryChange=async z=>{if(this.props.variable.query!==z){let X="";z&&z.hasOwnProperty("query")&&typeof z.query=="string"&&(X=z.query),this.props.changeQueryVariableQuery((0,Ma.jX)(this.props.variable),z,X)}},this.onRegExBlur=async z=>{const X=z.currentTarget.value;this.props.variable.regex!==X&&this.props.onPropChange({propName:"regex",propValue:X,updateOptions:!0})},this.onRefreshChange=z=>{this.props.onPropChange({propName:"refresh",propValue:z})},this.onSortChange=async z=>{this.props.onPropChange({propName:"sort",propValue:z.value,updateOptions:!0})},this.onMultiChange=z=>{this.props.onPropChange({propName:"multi",propValue:z.currentTarget.checked})},this.onIncludeAllChange=z=>{this.props.onPropChange({propName:"includeAll",propValue:z.currentTarget.checked})},this.onAllValueChange=z=>{this.props.onPropChange({propName:"allValue",propValue:z.currentTarget.value})}}async componentDidMount(){await this.props.initQueryVariableEditor((0,Ma.jX)(this.props.variable))}componentDidUpdate(z){z.variable.datasource!==this.props.variable.datasource&&this.props.changeQueryVariableDataSource((0,Ma.jX)(this.props.variable),this.props.variable.datasource)}render(){const{extended:z,variable:X}=this.props;if(!z||!z.dataSource||!z.VariableQueryEditor)return null;const ce=z.dataSource,Ce=z.VariableQueryEditor,Ie=(0,Jo.jG)().timeRange();return a.createElement(dy.u,{datasource:ce,onDataSourceChange:this.onDataSourceChange,query:X.query,onQueryChange:this.onQueryChange,onLegacyQueryChange:this.onLegacyQueryChange,VariableQueryEditor:Ce,timeRange:Ie,regex:X.regex,onRegExChange:this.onRegExBlur,sort:X.sort,onSortChange:this.onSortChange,refresh:X.refresh,onRefreshChange:this.onRefreshChange,isMulti:X.multi,includeAll:X.includeAll,allValue:X.allValue??"",onMultiChange:this.onMultiChange,onIncludeAllChange:this.onIncludeAllChange,onAllValueChange:this.onAllValueChange})}}const by=Py(Cy),Ty=()=>({id:"query",description:"Variable values are fetched from a datasource query",name:"Query",initialState:Gv,reducer:Jv,picker:Pd(),editor:by,dependsOn:(w,z)=>(0,Ma.wJ)(w.query,w.datasource?.uid,w.regex,z.name),setValue:async(w,z,X=!1)=>{await(0,Is.JD)((0,Or.t9)((0,Ma.jX)(w),z,X))},setValueFromUrl:async(w,z)=>{await(0,Is.JD)((0,Or.x7)((0,Ma.jX)(w),z))},updateOptions:async(w,z)=>{await(0,Is.JD)(py((0,Ma.jX)(w),z))},getSaveModel:w=>{const{index:z,id:X,state:ce,global:Ce,queryValue:Ie,rootStateKey:Fe,...Je}=(0,p.cloneDeep)(w);return w.refresh!==_o.CO.never?{...Je,options:[]}:Je},getValueForUrl:w=>(0,Ma.ML)(w)?lo.Zm:w.current.value}),My=()=>({id:"system",description:"",name:"system",initialState:{..._o.Vg,type:"system",hide:_o.zL.hideVariable,skipUrlSync:!0,current:{value:{toString:()=>""}},state:Tr.Gu.Done},reducer:w=>w,picker:null,editor:null,dependsOn:()=>!1,setValue:async(w,z,X=!1)=>{},setValueFromUrl:async(w,z)=>{},updateOptions:async w=>{},getSaveModel:w=>({}),getValueForUrl:w=>""});var Sy=e(58975),xy=e(14329);function Oy({onPropChange:w,variable:{query:z}}){const X=(0,a.useCallback)((Ie,Fe)=>{Ie.preventDefault(),w({propName:"originalQuery",propValue:Ie.currentTarget.value,updateOptions:!1}),w({propName:"query",propValue:Ie.currentTarget.value,updateOptions:Fe})},[w]),ce=(0,a.useCallback)(Ie=>X(Ie,!1),[X]),Ce=(0,a.useCallback)(Ie=>X(Ie,!0),[X]);return a.createElement(a.Fragment,null,a.createElement(Sy.Y,null,"Text options"),a.createElement(xy._,{value:z,name:"Default value",placeholder:"default value, if any",onChange:ce,onBlur:Ce,width:30,testId:kr.Tp.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInputV2}))}function Iy({variable:w,onVariableChange:z,readOnly:X}){const ce=(0,$t.useDispatch)(),[Ce,Ie]=(0,a.useState)(w.current.value);(0,a.useEffect)(()=>{Ie(w.current.value)},[w]);const Fe=(0,a.useCallback)(()=>{if(!w.rootStateKey){console.error("Cannot update variable without rootStateKey");return}if(w.current.value!==Ce){if(ce((0,ws.kb)(w.rootStateKey,(0,pl.QP)((0,Ma.qD)({id:w.id,type:w.type},{propName:"query",propValue:Ce})))),z){z({...w,current:(0,A0.R)(w.current)?{}:{...w.current,value:Ce}});return}vd.B.get(w.type).updateOptions(w)}},[w,Ce,ce,z]),Je=(0,a.useCallback)(vt=>Ie(vt.target.value),[Ie]),et=vt=>Fe(),mt=vt=>{vt.keyCode===13&&(vt.preventDefault(),Fe())};return a.createElement(me.p,{type:"text",value:Ce,onChange:Je,onBlur:et,disabled:X,onKeyDown:mt,placeholder:(0,Ka.t)("variable.textbox.placeholder","Enter variable value"),id:lo.qz+w.id})}const Ay={..._o.Vg,type:"textbox",query:"",current:{},options:[],originalQuery:null},F0=(0,bi.Z0)({name:"templating/textbox",initialState:yd.j,reducers:{createTextBoxOptions:(w,z)=>{const X=(0,Ps.Fs)(w,z.payload.id);if(X.type!=="textbox")return;const ce={text:X.query.trim(),value:X.query.trim(),selected:!1};X.options=[ce],X.current=ce}}}),Ry=F0.reducer,{createTextBoxOptions:Ly}=F0.actions,By=w=>async(z,X)=>{const{rootStateKey:ce,type:Ce}=w;z((0,ws.kb)(ce,Ly((0,Ma.qD)(w))));const Ie=(0,Ps.dn)(w,X());Ie.type==="textbox"&&await vd.B.get(Ce).setValue(Ie,Ie.options[0],!0)},Uy=(w,z)=>async(X,ce)=>{const{rootStateKey:Ce}=w,Ie=(0,Ps.dn)(w,ce());if(Ie.type!=="textbox")return;const Fe=(0,Ma.QT)(z);X((0,ws.kb)(Ce,(0,pl.QP)((0,Ma.qD)(Ie,{propName:"query",propValue:Fe})))),await X((0,Or.x7)((0,Ma.jX)(Ie),Fe))},Ny=()=>({id:"textbox",description:"Define a textbox variable, where users can enter any arbitrary string",name:"Text box",initialState:Ay,reducer:Ry,picker:Iy,editor:Oy,dependsOn:(w,z)=>!1,setValue:async(w,z,X=!1)=>{await(0,Is.JD)((0,Or.t9)((0,Ma.jX)(w),z,X))},setValueFromUrl:async(w,z)=>{await(0,Is.JD)(Uy((0,Ma.jX)(w),z))},updateOptions:async w=>{await(0,Is.JD)(By((0,Ma.jX)(w)))},getSaveModel:(w,z)=>{const{index:X,id:ce,state:Ce,global:Ie,originalQuery:Fe,rootStateKey:Je,...et}=(0,p.cloneDeep)(w);if(w.query!==Fe&&!z){const mt=Fe??"",vt={selected:!1,text:mt,value:mt};return{...et,query:mt,current:vt,options:[vt]}}return et},getValueForUrl:w=>w.current.value,beforeAdding:w=>({...(0,p.cloneDeep)(w),originalQuery:w.query})});var wy=e(51066),ih=e(55314),lh=e(72686),Fy=e(91219);const Wy={navBarTree:Fy.I_,navIndex:ac._h,appNotifications:Ou.g5};var Ky=e(44672),$y=e(52806),Vy=e(93584),_y=e(20604),zy=e(79763),ky=e(53466),Hy=e(28601),Gy=e(36227),jy=e(54650),Yy=e(40823),Qy=e(88264),Jy=e(10943),Xy=e(80095),Zy=e(31326),qy=e(81862),eD=e(1936),tD=e(8212),nD=e(34655),aD=e(87617),ch=e(49962),sD=e(97007);const rD={...Wy,...$y.Ay,...nD.Ay,...Vy.Ay,...jy.Ay,...Hy.Ay,...i0.Ay,...Gy.Ay,...aD.Ay,...eD.Ay,...qy.Ay,...Yy.Ay,...Jy.Ay,...zy.Ay,...Ky.Ay,...Qy.Ay,...ky.Ay,...Xy.Ay,...ws.Ay,...tD.Ay,..._y.Ay,plugins:Zy.Ff,[ch.H.reducerPath]:ch.H.reducer,[lh.Sm.reducerPath]:lh.Sm.reducer,[ih.cU.reducerPath]:ih.cU.reducer},W0={},ED=w=>{Object.assign(W0,w)},oD=()=>{const w=(0,T0.combineReducers)({...rD,...W0});return(z,X)=>{if(X.type!==sD.N.type)return w(z,X);const{cleanupAction:ce}=X.payload;return ce(z),w(z,X)}};function yD(w){addReducer(w)}const iD=(0,bi.Nc)();function lD(w){const z=(0,bi.U1)({reducer:oD(),middleware:X=>X({thunk:!0,serializableCheck:!1,immutableCheck:!1}).concat(iD.middleware,ch.H.middleware,lh.Sm.middleware,ih.cU.middleware),devTools:!1,preloadedState:{navIndex:(0,ac.s2)(),...w}});return(0,wy.$k)(z.dispatch),(0,Is.k3)(z),z}m().move=K.b;const K0=e(39572),fm=K0.keys().map(w=>K0(w));class cD{async init(){try{parent.postMessage("GrafanaAppInit","*");const z=(0,Ka.JL)(_.Ay.bootData.user.language);(0,M.u5)(pd.IB),mD(),jp(),Dn("frontend_app_init"),fD(),(0,E.xS)(_.Ay.bootData.user.locale),(0,E.$D)(_.Ay.bootData.user.weekStart),(0,N.Y)(Io.m),(0,V.l)(fg),(0,W.e)(mo.a),(0,I.T)(x.Ny),(0,S.p)(va),(0,D.G)(()=>_.Ay.bootData.user.timezone),Li(),(0,ms.initAuthConfig)(),(0,O.H8)(pr.A),await z,dD(),lD(),uD(),Ra(),b.D.setInit(wu.H),b.G.setInit(wu.u),P.h.setInit(Dc),vd.B.setInit(()=>[Ty(),zE(),Ny(),BE(),sy(),cy(),Wv(),My()]),y.l.setInit(Tl),(0,C.HC)(()=>new dv),uE(new dE),(0,C.pC)(Zp.BN),(0,L.se)({importPanelPlugin:l0.TV,getPanelPluginFromCache:l0.PY}),T.I.initialize({config:_.Ay,getTimeRangeForUrl:(0,Jo.jG)().timeRangeForUrl,getVariablesUrlParams:ry.z}),document.addEventListener("click",Fl);const X=new d.xq;X.init(_.Ay.datasources,_.Ay.defaultDatasource),(0,U.h)(X),mv(),new Jp().init();let Ce=[];Rt.TP.user.orgRole!==""&&(Ce=await sv(_.Ay.apps));const Ie=Y0([{pluginId:"grafana",extensionConfigs:q0()},...Ce]),Fe=Ht=>ev({...Ht,registry:Ie});(0,R.cE)(Fe);const Je=x.Ny.getSearchObject(),et=new Af,mt=new Rn(x.Ny,et),vt=new Zi;vt.start(),et.setKioskModeFromUrl(Je.kiosk);try{(0,fv.W1)()}catch(Ht){console.warn("Failed to clean up old expanded folders",Ht)}this.context={backend:pd.IB,location:x.Ny,chrome:et,keybindings:mt,newAssetsChecker:vt,config:_.Ay},(0,B._)(Wo.ni),(0,v.H)(document.getElementById("reactRoot")).render(a.createElement(mg,{app:this}))}catch(z){console.error("Failed to start Grafana",z),window.__grafana_load_failed()}finally{ea("frontend_app_init")}}}function dD(){fm.length>0&&fm[0].addExtensionReducers()}function uD(){fm.length>0&&fm[0].init()}function mD(){(0,H.H2)(new se({debug:!1})),window.addEventListener("load",w=>{const z="frontend_boot_load_time_seconds",X="frontend_boot_js_done_time_seconds",ce="frontend_boot_css_time_seconds";performance&&(performance.mark(z),Cd("first-paint","frontend_boot_","_time_seconds"),Cd("first-contentful-paint","frontend_boot_","_time_seconds"),Cd(z),Cd(X),Cd(ce))}),Rt.TP.user.orgRole!==""&&(0,H.pl)(new xe({})),_.Ay.grafanaJavascriptAgent.enabled&&(0,H.pl)(new sn({..._.Ay.grafanaJavascriptAgent,app:{version:_.Ay.buildInfo.version,environment:_.Ay.buildInfo.env},buildInfo:_.Ay.buildInfo,user:{id:String(_.Ay.bootData.user?.id),email:_.Ay.bootData.user?.email}})),_.Ay.googleAnalyticsId&&(0,H.pl)(new ot({googleAnalyticsId:_.Ay.googleAnalyticsId})),_.Ay.googleAnalytics4Id&&(0,H.pl)(new Xe({googleAnalyticsId:_.Ay.googleAnalytics4Id,googleAnalytics4SendManualPageViews:_.Ay.googleAnalytics4SendManualPageViews})),_.Ay.rudderstackWriteKey&&_.Ay.rudderstackDataPlaneUrl&&(0,H.pl)(new lt({writeKey:_.Ay.rudderstackWriteKey,dataPlaneUrl:_.Ay.rudderstackDataPlaneUrl,user:_.Ay.bootData.user,sdkUrl:_.Ay.rudderstackSdkUrl,configUrl:_.Ay.rudderstackConfigUrl,integrationsUrl:_.Ay.rudderstackIntegrationsUrl,buildInfo:_.Ay.buildInfo})),_.Ay.applicationInsightsConnectionString&&(0,H.pl)(new ze({connectionString:_.Ay.applicationInsightsConnectionString,endpointUrl:_.Ay.applicationInsightsEndpointUrl}))}function fD(){(0,G.X)()>0&&document.body.classList.add("no-overlay-scrollbar")}function Cd(w,z="",X=""){const ce=m().first(performance.getEntriesByName(w));if(ce){const Ce=ce.name.replace(/-/g,"_");fe(`${z}${Ce}${X}`,Math.round(ce.startTime)/1e3)}}const gD=new cD;window.public_cdn_path&&(e.p=window.public_cdn_path),window.__grafana_public_path__=e.p.substring(0,e.p.lastIndexOf("build/"))||e.p,window.nonce&&(e.nc=window.nonce),window.__grafana_app_bundle_loaded=!0,gD.init()},60021:(Y,A,e)=>{"use strict";e.d(A,{Or:()=>n,Oz:()=>r,RC:()=>t,ho:()=>o,nA:()=>s});var t=(g=>(g.Active="active",g.Expired="expired",g.Pending="pending",g))(t||{}),n=(g=>(g.Unprocessed="unprocessed",g.Active="active",g.Suppressed="suppressed",g))(n||{}),o=(g=>(g.equal="=",g.notEqual="!=",g.regex="=~",g.notRegex="!~",g))(o||{}),s=(g=>(g.Internal="internal",g.External="external",g.All="all",g))(s||{}),r=(g=>(g.cortex="cortex",g.mimir="mimir",g.prometheus="prometheus",g))(r||{})},91621:(Y,A,e)=>{"use strict";e.d(A,{Dw:()=>g,Rx:()=>o,_W:()=>r,d$:()=>n});const t={statistics:[]};var n=(d=>(d[d.Query=1]="Query",d[d.Search=0]="Search",d))(n||{}),o=(d=>(d[d.Builder=0]="Builder",d[d.Code=1]="Code",d))(o||{});const s={parameters:[]};var r=(d=>(d.And="and",d.Function="function",d.FunctionParameter="functionParameter",d.GroupBy="groupBy",d.Operator="operator",d.Or="or",d.Property="property",d))(r||{}),g=(d=>(d.String="string",d))(g||{});const u={logGroupNames:[],logGroups:[],statsGroups:[]}},25640:(Y,A,e)=>{"use strict";e.d(A,{Rx:()=>t.Rx,YZ:()=>n,b4:()=>o,d$:()=>t.d$});var t=e(91621),n=(s=>(s.Scheduled="Scheduled",s.Running="Running",s.Complete="Complete",s.Failed="Failed",s.Cancelled="Cancelled",s.Timeout="Timeout",s))(n||{}),o=(s=>(s.Regions="regions",s.Namespaces="namespaces",s.Metrics="metrics",s.DimensionKeys="dimensionKeys",s.DimensionValues="dimensionValues",s.EBSVolumeIDs="ebsVolumeIDs",s.EC2InstanceAttributes="ec2InstanceAttributes",s.ResourceArns="resourceARNs",s.Statistics="statistics",s.LogGroups="logGroups",s.Accounts="accounts",s))(o||{})},36666:(Y,A,e)=>{"use strict";e.d(A,{A:()=>T});var t=e(32196),n=e(16792),o=e(55127),s=e.n(o),r=e(96540),g=e(16817),u=e(52622),d=e(40845),i=e(67061),l=e(88575),f=e(88323),c=e(94354),h=e(15292),p=e(62930),m=e(2913),a=e(14792),v=e(31193),E=e(65160),D=e(43854),b=e(45994);function P(I){return JSON.stringify(I)}const y=[{label:"All data",value:!1},{label:"Annotations",value:!0,description:"Include annotations as regular data"}];function T({data:I,query:x,onChange:S,onRunQuery:O}){const{value:C}=(0,g.A)(()=>(0,v.tR)().get()),L=(0,r.useMemo)(()=>(0,a.UA)().getCurrent()?.getPanelById(x.panelId??-124134),[x.panelId]),{value:U,loading:R}=(0,g.A)(async()=>{if(!L||!I)return[];const ee=await(0,v.tR)().get(L.datasource);return Promise.all(L.targets.map(async ae=>{const Z=ae.datasource?await(0,v.tR)().get(ae.datasource):ee,ne=Z.getQueryDisplayText||P,q=(0,E.E)(I,ae.refId)??I;return{refId:ae.refId,query:ne(ae),name:Z.name,img:Z.meta.info.logos.small,data:q.series,error:q.error}}))},[I,L]),B=(0,r.useCallback)(ee=>{S(ee),O()},[S,O]),H=(0,r.useCallback)(ee=>{B({...x,panelId:ee})},[x,B]),W=(0,r.useCallback)(()=>{B({...x,withTransforms:!x.withTransforms})},[x,B]),N=(0,r.useCallback)(ee=>{B({...x,topic:ee?u.QR.Annotations:void 0})},[x,B]),V=(0,r.useCallback)(ee=>{const ae=ee.datasource??C,Z=(0,v.tR)().getInstanceSettings(ae)?.name,ne=ee.targets.length;return`${ne} ${s()("query",ne)} to ${Z}`},[C]),G=(0,a.UA)().getCurrent(),_=!!(x.withTransforms||L?.transformations?.length),K=(0,r.useMemo)(()=>G?.panels.filter(ee=>m.Ay.panels[ee.type]&&ee.targets&&ee.id!==G.panelInEdit?.id&&ee.datasource?.uid!==b.K).map(ee=>({value:ee.id,label:ee.title??"Panel "+ee.id,description:V(ee),imgUrl:m.Ay.panels[ee.type].info.logos.small}))??[],[G,V]),j=(0,d.of)(M),k=(0,n.Bi)();if(!G)return null;if(K.length<1)return r.createElement("p",{className:j.noQueriesText},"This dashboard does not have any other panels. Add queries to other panels and try again.");const Q=K.find(ee=>ee.value===x.panelId);return r.createElement(D.i,null,r.createElement(i.B,{direction:"column"},r.createElement(i.B,{gap:3},r.createElement(l.D,{label:"Source panel",description:"Use query results from another panel"},r.createElement(f.l6,{inputId:k,placeholder:"Choose panel",isSearchable:!0,options:K,value:Q,onChange:ee=>H(ee.value)})),r.createElement(l.D,{label:"Data",description:"Use data or annotations from the panel"},r.createElement(c.z,{options:y,value:x.topic===u.QR.Annotations,onChange:N})),_&&r.createElement(l.D,{label:"Transform",description:"Apply transformations from the source panel"},r.createElement(h.K,{value:!!x.withTransforms,onChange:W}))),R?r.createElement(p.y,null):r.createElement(r.Fragment,null,U&&!!U.length&&r.createElement(l.D,{label:"Queries from panel"},r.createElement(i.B,{direction:"column"},U.map((ee,ae)=>r.createElement(i.B,{key:ae,alignItems:"center",gap:1},r.createElement("div",null,ee.refId),r.createElement("img",{src:ee.img,alt:ee.name,title:ee.name,width:16}),r.createElement("div",null,ee.query))))))))}function M(I){return{noQueriesText:(0,t.css)({padding:I.spacing(1.25)})}}},14348:(Y,A,e)=>{"use strict";e.d(A,{K:()=>u.K,kN:()=>d,mw:()=>i});var t=e(88483),n=e(52622),o=e(39070),s=e(43127),r=e(14792),g=e(34214),u=e(45994);function d(h){return h?typeof h=="string"?h===u.K:"meta"in h&&h.meta.name===u.K||h.uid===u.K:!1}function i(h,p){return new t.c(m=>{const a=(0,r.UA)().getCurrent(),v=l(h.queries);if(!v){m.next(f("Missing panel reference ID"));return}let E=a?.getPanelById(v,!0);if(E instanceof g.a||(E=new g.a(E)),!E){m.next(f("Unknown Panel: "+v));return}const D=E.getQueryRunner(),b=D.getData({withTransforms:!!p?.withTransforms,withFieldConfig:!1}).subscribe({next:P=>{p?.topic===n.QR.Annotations&&(P={...P,series:P.annotations??[],annotations:void 0}),m.next(P)}});if(!E.isInView&&E.refreshWhenInView||a?.otherPanelInFullscreen(E)){const{datasource:P,targets:y}=E,T={...h,datasource:P,panelId:v,queries:y};E.refreshWhenInView=!1,D.run(T)}return()=>{b.unsubscribe()}})}function l(h){if(!(!h||!h.length))return h[0].panelId}function f(h){return{state:o.Gu.Error,series:[],request:{},error:{message:h},timeRange:(0,s.E2)()}}var c=e(36666)},45994:(Y,A,e)=>{"use strict";e.d(A,{K:()=>t});const t="-- Dashboard --",n="dashboard"},90183:(Y,A,e)=>{"use strict";e.d(A,{i:()=>De,o:()=>Re});var t=e(2543),n=e(65474),o=e(62467),s=e(44240),r=e(81160),g=e(89667),u=e(39070),d=e(55004),i=e(37471),l=e(78368),f=e(14236),c=e(26657),h=e(72574),p=e(78731),m=e(17172),a=e(19347),v=e(79056),E=e(14792),D=e(32196),b=e(96540),P=e(40845),y=e(84167),T=e(88575),M=e(88323),I=e(15292),x=e(99818),S=e(10154),O=e(68706),C=e(95093),L=e.n(C),U=e(91410),R=e(20333),B=e(55852),H=e(66864),W=e(17624),N=e(67459),V=e(57389),G=e(14578),_=e(87266),K=e(16797);const j="time-of-day-picker-panel",k=({minuteStep:me=1,showHour:he=!0,showSeconds:Te=!1,onChange:Be,value:we,size:Ne="auto",disabled:Ze,disabledHours:st,disabledMinutes:Qe,disabledSeconds:ke,placeholder:je,format:He="HH:mm",defaultValue:Ge=void 0,allowEmpty:Oe=!1,width:Ke})=>{const Ee=(0,P.of)(ee),J=()=>Ke?(0,D.css)`
        width: ${Ke}px;
      `:(0,_.lH)()[Ne];return b.createElement(V.A,{value:we,defaultValue:Ge,onChange:oe=>Be(oe),showHour:he,showSecond:Te,format:He,allowEmpty:Oe,className:(0,D.cx)(J(),Ee.input),popupClassName:(0,D.cx)(Ee.picker,j),minuteStep:me,inputIcon:b.createElement(Q,{wrapperStyle:Ee.caretWrapper}),disabled:Ze,disabledHours:st,disabledMinutes:Qe,disabledSeconds:ke,placeholder:je})},Q=({wrapperStyle:me=""})=>b.createElement("div",{className:me},b.createElement(G.I,{name:"angle-down"})),ee=me=>{const he=me.components.input.background,Te=me.v1.palette.black,Be=me.colors.background.secondary,we=me.shape.radius.default,Ne=me.components.input.borderColor;return{caretWrapper:(0,D.css)`
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      display: inline-block;
      text-align: right;
      color: ${me.colors.text.secondary};
    `,picker:(0,D.css)`
      .rc-time-picker-panel-select {
        font-size: 14px;
        background-color: ${he};
        border-color: ${Ne};
        li {
          outline-width: 2px;
          &.rc-time-picker-panel-select-option-selected {
            background-color: inherit;
            border: 1px solid ${me.v1.palette.orange};
            border-radius: ${we};
          }

          &:hover {
            background: ${Be};
          }

          &.rc-time-picker-panel-select-option-disabled {
            color: ${me.colors.action.disabledText};
          }
        }
      }

      .rc-time-picker-panel-inner {
        box-shadow: 0px 4px 4px ${Te};
        background-color: ${he};
        border-color: ${Ne};
        border-radius: ${we};
        margin-top: 3px;

        .rc-time-picker-panel-input-wrap {
          margin-right: 2px;

          &,
          .rc-time-picker-panel-input {
            background-color: ${he};
            padding-top: 2px;
          }
        }

        .rc-time-picker-panel-combobox {
          display: flex;
        }
      }
    `,input:(0,D.css)`
      .rc-time-picker-input {
        background-color: ${he};
        border-radius: ${we};
        border-color: ${Ne};
        height: ${me.spacing(4)};

        &:focus {
          ${(0,K.focusCss)(me)}
        }

        &:disabled {
          background-color: ${me.colors.action.disabledBackground};
          color: ${me.colors.action.disabledText};
          border: 1px solid ${me.colors.action.disabledBackground};
          &:focus {
            box-shadow: none;
          }
        }
      }

      .rc-time-picker-clear {
        position: absolute;
        right: 20px;
        top: 50%;
        cursor: pointer;
        overflow: hidden;
        transform: translateY(-50%);
        color: ${me.colors.text.secondary};
      }
    `}},ae=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((me,he)=>({label:me,value:he+1})),Z=({value:me,onChange:he})=>{const Te=(0,P.of)(ne),Be=Date.now(),we=(0,U.QZ)(me.timezone??"utc",Be),Ne=(0,E.UA)().getCurrent()?.getTimezone()===me.timezone,[Ze,st]=(0,b.useState)(!1),Qe=()=>{st(!Ze)},ke=oe=>{if(!oe)return;const ue=L()();if(oe){const be=oe.split(":");ue.set("hour",parseInt(be[0],10)),ue.set("minute",parseInt(be[1],10))}return ue},je=()=>{let oe="Everyday";return me.fromDayOfWeek&&!me.toDayOfWeek&&(oe=ae[me.fromDayOfWeek-1].label),oe},He=()=>{const oe=b.createElement(b.Fragment,null,b.createElement(N.U,{title:we?.name}),b.createElement(W.X,{timeZone:me.timezone,timestamp:Be}));return Ne?b.createElement(b.Fragment,null,"Dashboard timezone (",oe,")"):oe},Ge=(oe,ue)=>{const be=oe?oe.format("HH:mm"):void 0;he(ue==="from"?{...me,from:be}:{...me,to:be})},Oe=oe=>{he({...me,timezone:oe})},Ke=oe=>{const ue=oe?oe.value:void 0,be=oe?me.toDayOfWeek:void 0;he({...me,fromDayOfWeek:ue,toDayOfWeek:be})},Ee=oe=>{he({...me,toDayOfWeek:oe?oe.value:void 0})},J=()=>Ze?b.createElement(R.U,{value:me.timezone,includeInternal:!0,onChange:oe=>Oe(oe),onBlur:()=>st(!1),openMenuOnFocus:!1,width:100,autoFocus:!0}):b.createElement("div",{className:Te.timezoneContainer},b.createElement("div",{className:Te.timezone},He()),b.createElement(B.$n,{variant:"secondary",onClick:Qe,size:"sm"},"Change timezone"));return b.createElement(y.n,{className:Te.wrapper},b.createElement(T.D,{label:"From"},b.createElement(H.Gy,{spacing:"xs"},b.createElement(M.l6,{options:ae,isClearable:!0,placeholder:"Everyday",value:me.fromDayOfWeek??null,onChange:oe=>Ke(oe),width:20}),b.createElement(k,{value:ke(me.from),onChange:oe=>Ge(oe,"from"),allowEmpty:!0,placeholder:"HH:mm",width:100}))),b.createElement(T.D,{label:"To"},b.createElement(H.Gy,{spacing:"xs"},(me.fromDayOfWeek||me.toDayOfWeek)&&b.createElement(M.l6,{options:ae,isClearable:!0,placeholder:je(),value:me.toDayOfWeek??null,onChange:oe=>Ee(oe),width:20}),b.createElement(k,{value:ke(me.to),onChange:oe=>Ge(oe,"to"),allowEmpty:!0,placeholder:"HH:mm",width:100}))),b.createElement(T.D,{label:"Timezone"},J()))},ne=me=>({wrapper:(0,D.css)({maxWidth:me.spacing(60),marginBottom:me.spacing(2)}),timezoneContainer:(0,D.css)`
      padding: 5px;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
    `,timezone:(0,D.css)`
      margin-right: 5px;
    `}),q="Enabling this returns annotations that match any of the tags specified below",te=b.createElement("div",null,"Specify a list of tags to match. To specify a key and value tag use `key:value` syntax."),re=[{label:"Dashboard",value:O.St.Dashboard,description:"Query for events created on this dashboard and show them in the panels where they where created"},{label:"Tags",value:O.St.Tags,description:"This will fetch any annotation events that match the tags filter"}],de=[{label:"Annotations & Alerts",value:O.nj.Annotations,description:"Show annotations or alerts managed by grafana"},{label:"Time regions",value:O.nj.TimeRegions,description:"Configure a repeating time region"}],ie=[10,50,100,200,300,500,1e3,2e3].map(me=>({label:String(me),value:me}));function ge({query:me,onChange:he}){const Te=me,{limit:Be,matchAny:we,tags:Ne,type:Ze,queryType:st}=Te;let Qe=st??O.nj.Annotations;const ke=(0,b.useMemo)(()=>(0,E.UA)().dashboard?.getTimezone(),[]),je=(0,P.of)(ve),He=oe=>he({...Te,type:oe.value}),Ge=oe=>he({...Te,limit:oe.value}),Oe=oe=>he({...Te,matchAny:oe.target.checked}),Ke=oe=>he({...Te,tags:oe}),Ee=oe=>{const ue={...Te,queryType:oe.value};ue.queryType===O.nj.TimeRegions?ue.timeRegion||(ue.timeRegion={timezone:ke}):delete ue.timeRegion,he(ue)},J=oe=>{he({...Te,timeRegion:oe})};return b.createElement(y.n,{className:je.container},b.createElement(T.D,{label:"Query type"},b.createElement(M.l6,{inputId:"grafana-annotations__query-type",options:de,value:Qe,onChange:Ee})),Qe===O.nj.Annotations&&b.createElement(b.Fragment,null,b.createElement(T.D,{label:"Filter by"},b.createElement(M.l6,{inputId:"grafana-annotations__filter-by",options:re,value:Ze,onChange:He})),b.createElement(T.D,{label:"Max limit"},b.createElement(M.l6,{inputId:"grafana-annotations__limit",width:16,options:ie,value:Be,onChange:Ge})),Ze===O.St.Tags&&b.createElement(b.Fragment,null,b.createElement(T.D,{label:"Match any",description:q},b.createElement(I.d,{id:"grafana-annotations__match-any",value:we,onChange:Oe})),b.createElement(T.D,{label:"Tags",description:te},b.createElement(x.$,{allowCustomValue:!0,inputId:"grafana-annotations__tags",onChange:Ke,tagOptions:S.vy,tags:Ne??[]})))),Qe===O.nj.TimeRegions&&Te.timeRegion&&b.createElement(Z,{value:Te.timeRegion,onChange:J}))}const ve=me=>({container:(0,D.css)({maxWidth:me.spacing(60),marginBottom:me.spacing(2)})});var ye=e(11261),pe=e(94515);function le(me,he,Te,Be){if(!he)return;const we=(0,pe.iU)(he,Te);if(!we.length)return;const Ne=[],Ze=[],st=[],Qe=he.timezone??Be;for(const ke of we){let je=ke.from,He=ke.to;const Ge=(0,U.QZ)(Qe,je);if(Ge){const Oe=Ge.offsetInMins*60*1e3;je+=Oe,He+=Oe}Ne.push(je),Ze.push(He),st.push(me)}return{fields:[{name:"time",type:ye.PU.time,values:Ne,config:{}},{name:"timeEnd",type:ye.PU.time,values:Ze,config:{}},{name:"text",type:ye.PU.string,values:st,config:{}}],length:Ne.length}}let Me=100;class De extends c.iy{constructor(he){super(he),this.annotations={QueryEditor:ge,prepareAnnotation(Te){return Te.target=Te.target??{type:Te.type??O.St.Dashboard,limit:Te.limit??100,tags:Te.tags??[],matchAny:Te.matchAny??!1},Te},prepareQuery(Te){let Be;if((0,t.isString)(Te.datasource)){const Ze=(0,v.og)(Te.datasource,{returnDefaultAsNull:!1});Ze&&(Be=Ze)}else Be=Te.datasource;const{filter:we,...Ne}=Te;return{...Ne,refId:Te.name,queryType:O.nj.Annotations,datasource:Be}}}}getDefaultQuery(){return{queryType:O.nj.RandomWalk}}query(he){const Te=[],Be=[],we=(0,h.w)();for(const Ne of he.targets){if(Ne.queryType===O.nj.Annotations)return(0,n.H)(this.getAnnotations({range:he.range,rangeRaw:he.range.raw,annotation:Ne,dashboard:(0,E.UA)().getCurrent()}));if(!Ne.hide){if(Ne.queryType===O.nj.Snapshot){Te.push((0,o.of)({data:(Ne.snapshot??[]).map(Ze=>(0,g.or)(Ze)),state:u.Gu.Done}));continue}if(Ne.queryType===O.nj.TimeRegions){const Ze=le("",Ne.timeRegion,he.range,he.timezone);Te.push((0,o.of)({data:Ze?[Ze]:[],state:u.Gu.Done}));continue}if(Ne.queryType===O.nj.LiveMeasurements){let Ze=we.replace(Ne.channel,he.scopedVars);const{filter:st}=Ne,Qe=(0,d.DG)(Ze);if(!(0,d.aj)(Qe))continue;const ke={maxLength:he.maxDataPoints??500};Ne.buffer?(ke.maxDelta=Ne.buffer,ke.maxLength=ke.maxLength*2):he.rangeRaw?.to==="now"&&(ke.maxDelta=he.range.to.valueOf()-he.range.from.valueOf()),Te.push((0,p.oF)().getDataStream({key:`${he.requestId}.${Me++}`,addr:Qe,filter:st,buffer:ke}))}else Ne.queryType||(Ne.queryType=O.nj.RandomWalk),Be.push(Ne)}}return Be.length&&Te.push(super.query({...he,targets:Be})),Te.length?Te.length===1?Te[0]:(0,s.h)(...Te):(0,o.of)()}listFiles(he,Te){return this.query({targets:[{refId:"A",queryType:O.nj.List,path:he}],maxDataPoints:Te}).pipe((0,r.T)(Be=>{const we=Be.data[0]??new i.k;return new l.R(we)}))}metricFindQuery(){return Promise.resolve([])}async getAnnotations(he){const Te=he.annotation.target;if(Te?.queryType===O.nj.TimeRegions){const st=le(he.annotation.name,Te.timeRegion,he.range,(0,E.UA)().getCurrent()?.timezone);return Promise.resolve({data:st?[st]:[]})}const Be=he.annotation,we=Be.target,Ne={from:he.range.from.valueOf(),to:he.range.to.valueOf(),limit:we.limit,tags:we.tags,matchAny:we.matchAny};if(we.type===O.St.Dashboard){if(!he.dashboard?.uid)return Promise.resolve({data:[]});Ne.dashboardUID=he.dashboard.uid,delete Ne.tags}else{if(!Array.isArray(we.tags)||we.tags.length===0)return Promise.resolve({data:[]});const st=(0,h.w)(),Qe="__delimiter__",ke=[];for(const je of Ne.tags){const He=st.replace(je,{},Ge=>typeof Ge=="string"?Ge:Ge.join(Qe));for(const Ge of He.split(Qe))ke.push(Ge)}Ne.tags=ke}const Ze=await(0,m.AI)().get("/api/annotations",Ne,`grafana-data-source-annotations-${Be.name}-${he.dashboard?.uid}`);return{data:[(0,f.Vc)(Ze)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}async function Re(){return await(0,a.l)().get("-- Grafana --")}},68706:(Y,A,e)=>{"use strict";e.d(A,{St:()=>s,dx:()=>o,nj:()=>t,uJ:()=>n});var t=(r=>(r.LiveMeasurements="measurements",r.Annotations="annotations",r.Snapshot="snapshot",r.TimeRegions="timeRegions",r.RandomWalk="randomWalk",r.List="list",r.Read="read",r.Search="search",r))(t||{});const n={refId:"A",queryType:"randomWalk"},o={refId:"A",datasource:{type:"grafana",uid:"grafana"},queryType:"snapshot",snapshot:[]};var s=(r=>(r.Dashboard="dashboard",r.Tags="tags",r))(s||{})},90478:(Y,A,e)=>{"use strict";e.d(A,{H:()=>u,j:()=>i});var t=e(89667),n=e(28138),o=e(57220),s=e(40489),r=e(28444),g=e(68706);function u(l,f){return new Promise(c=>{if(l.datasource?.uid===o.vv){d(f,l),c(!0);return}n.A.publish(new r.bY({title:"Change to panel embedded data",text:"If you want to change the data shown in this panel Grafana will need to remove the panels current query and replace it with a snapshot of the current data. This enables you to edit the data.",yesText:"Continue",icon:"pen",onConfirm:()=>{d(f,l),c(!0)},onDismiss:()=>{c(!1)}}))})}function d(l,f){const c=l.map(p=>(0,t.Nw)(p)),h={refId:"A",queryType:g.nj.Snapshot,snapshot:c,datasource:{uid:o.vv}};f.updateQueries({dataSource:{uid:o.vv},queries:[h]}),f.refresh()}function i(l){return(f,c,h)=>{s.vI(f).subscribe(async p=>{const m=[];p.dataFrames.forEach(a=>{const v=(0,t.Nw)(a);m.push(v)}),l({...g.dx,snapshot:m,file:p.file},c)})}}},7810:(Y,A,e)=>{"use strict";e.d(A,{Fb:()=>s,K_:()=>d,_i:()=>g});var t=e(37471),n=e(11261),o=e(50248);function s(i){const l=i.spans.map(c=>r(c,i.processes)),f=new t.k({fields:[{name:"traceID",type:n.PU.string},{name:"spanID",type:n.PU.string},{name:"parentSpanID",type:n.PU.string},{name:"operationName",type:n.PU.string},{name:"serviceName",type:n.PU.string},{name:"serviceTags",type:n.PU.other},{name:"startTime",type:n.PU.number},{name:"duration",type:n.PU.number},{name:"logs",type:n.PU.other},{name:"tags",type:n.PU.other},{name:"warnings",type:n.PU.other},{name:"stackTraces",type:n.PU.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"jaeger"}}});for(const c of l)f.add(c);return f}function r(i,l){return{spanID:i.spanID,traceID:i.traceID,parentSpanID:i.references?.find(f=>f.refType==="CHILD_OF")?.spanID,operationName:i.operationName,startTime:i.startTime/1e3,duration:i.duration/1e3,logs:i.logs.map(f=>({...f,timestamp:f.timestamp/1e3})),tags:i.tags,warnings:i.warnings??void 0,stackTraces:i.stackTraces,serviceName:l[i.processID].serviceName,serviceTags:l[i.processID].tags}}function g(i,l){const f=new t.k({fields:[{name:"traceID",type:n.PU.string,config:{unit:"string",displayNameFromDS:"Trace ID",links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:l.uid,datasourceName:l.name,query:{query:"${__value.raw}"}}}]}},{name:"traceName",type:n.PU.string,config:{displayNameFromDS:"Trace name"}},{name:"startTime",type:n.PU.time,config:{displayNameFromDS:"Start time"}},{name:"duration",type:n.PU.number,config:{displayNameFromDS:"Duration",unit:"\xB5s"}}],meta:{preferredVisualisationType:"table"}}),c=i.map(u).sort((h,p)=>p?.startTime-h?.startTime);for(const h of c)f.add(h);return f}function u(i){const l=(0,o.transformTraceData)(i);if(l)return{traceID:l.traceID,startTime:l.startTime/1e3,duration:l.duration,traceName:l.traceName}}function d(i){let l={traceID:"",spans:[],processes:{},warnings:null},f=[];for(let c=0;c<i.length;c++){const h=i.get(c);l.traceID||(l.traceID=h.traceID),f.find(p=>p===h.serviceName)||(f.push(h.serviceName),l.processes[`p${f.length}`]={serviceName:h.serviceName,tags:h.serviceTags}),l.spans.push({traceID:h.traceID,spanID:h.spanID,duration:h.duration*1e3,references:h.parentSpanID?[{refType:"CHILD_OF",spanID:h.parentSpanID,traceID:h.traceID}]:[],flags:0,logs:h.logs.map(p=>({...p,timestamp:p.timestamp*1e3})),operationName:h.operationName,processID:Object.keys(l.processes).find(p=>l.processes[p].serviceName===h.serviceName)||"",startTime:h.startTime*1e3,tags:h.tags,warnings:h.warnings?h.warnings:null})}return{data:[l],total:0,limit:0,offset:0,errors:null}}},71713:(Y,A,e)=>{"use strict";e.d(A,{AW:()=>g,Ay:()=>d,RQ:()=>s,dZ:()=>t,fV:()=>r,vB:()=>u});const t=[{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"}],n=[{label:"json",insertText:"json",documentation:"Extracting labels from the log line using json parser."},{label:"regexp",insertText:'regexp ""',documentation:"Extracting labels from the log line using regexp parser.",move:-1},{label:"logfmt",insertText:"logfmt",documentation:"Extracting labels from the log line using logfmt parser."},{label:"pattern",insertText:"pattern",documentation:"Extracting labels from the log line using pattern parser. Only available in Loki 2.3+."},{label:"unpack",insertText:"unpack",detail:"unpack identifier",documentation:'Parses a JSON log line, unpacking all embedded labels in the pack stage. A special property "_entry" will also be used to replace the original log line. Only available in Loki 2.2+.'}],o=[{label:"unwrap",insertText:"unwrap",detail:"unwrap identifier",documentation:"Take labels and use the values as sample data for metric aggregations."},{label:"label_format",insertText:"label_format",documentation:"Use to rename, modify or add labels. For example, | label_format foo=bar ."},{label:"line_format",insertText:"line_format",documentation:'Rewrites log line content. For example, | line_format "{{.query}} {{.duration}}" .'}],s=[{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average of all values in the specified interval."},{insertText:"bytes_over_time",label:"bytes_over_time",detail:"bytes_over_time(range-vector)",documentation:"Counts the amount of bytes used by each log stream for a given range"},{insertText:"bytes_rate",label:"bytes_rate",detail:"bytes_rate(range-vector)",documentation:"Calculates the number of bytes per second for each stream."},{insertText:"first_over_time",label:"first_over_time",detail:"first_over_time(range-vector)",documentation:"The first of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The last of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum of all values in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the number of entries per second."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."}],r=[{insertText:"vector",label:"vector",detail:"vector(scalar)",documentation:"Returns the scalar as a vector with no labels."}],g=[...t,...s,...r],u={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((without|by)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-zA-Z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},"context-pipe":{pattern:/\s\|[^=~]\s?\w*/i,inside:{"pipe-operator":{pattern:/\|/i,alias:"operator"},"pipe-operations":{pattern:new RegExp(`${[...n,...o].map(i=>i.label).join("|")}`,"i"),alias:"keyword"}}},function:new RegExp(`\\b(?:${g.map(i=>i.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=\])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],quote:{pattern:/"(?:\\.|[^\\"])*"/,alias:"string",greedy:!0},backticks:{pattern:/`(?:\\.|[^\\`])*`/,alias:"string",greedy:!0},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:/\s?(\|[=~]?|!=?|<(?:=>?|<|>)?|>[>=]?)\s?/i,punctuation:/[{}(),.]/},d=u},43269:(Y,A,e)=>{"use strict";e.d(A,{HD:()=>g,ti:()=>s,U3:()=>n,ie:()=>u,Q$:()=>o});var t=(d=>(d.Builder="builder",d.Code="code",d))(t||{}),n=(d=>(d.Instant="instant",d.Range="range",d.Stream="stream",d))(n||{}),o=(d=>(d.DataSample="dataSample",d.InfiniteScroll="infiniteScroll",d.LogsSample="logsSample",d.LogsVolume="logsVolume",d))(o||{}),s=(d=>(d.Backward="backward",d.Forward="forward",d))(s||{}),r=(d=>(d.Stream="streams",d.Vector="vector",d.Matrix="matrix",d))(r||{}),g=(d=>(d.Indexed="I",d.StructuredMetadata="S",d.Parsed="P",d))(g||{}),u=(d=>(d[d.LabelNames=0]="LabelNames",d[d.LabelValues=1]="LabelValues",d))(u||{})},14678:(Y,A,e)=>{"use strict";e.d(A,{N8:()=>E,qM:()=>v,uv:()=>a});var t=e(2543),n=e.n(t),o=e(62467),s=e(65474),r=e(45650),g=e(69862),u=e(81160),d=e(9084),i=e(66847),l=e(93031),f=e(71030),c=e(40187),h=e(39070),p=e(19347),m=e(12091);const a="-- Mixed --",v=(b,P)=>`mixed-${b}-${P||""}`;class E extends c.mA{constructor(P){super(P)}query(P){const y=P.targets.filter(I=>I.datasource?.uid!==a);if(!y.length)return(0,o.of)({data:[]});const T=(0,t.groupBy)(y,"datasource.uid"),M=[];for(const I in T){const x=T[I];M.push({datasource:(0,p.l)().get(x[0].datasource,P.scopedVars),targets:x})}return M.length?this.batchQueries(M,P):(0,o.of)({data:[]})}batchQueries(P,y){const T=P.filter(this.isQueryable).map((M,I)=>(0,s.H)(M.datasource).pipe((0,g.Z)(x=>{const S=(0,t.cloneDeep)(y);return S.requestId=v(I,S.requestId),S.targets=M.targets,(0,s.H)(x.query(S)).pipe((0,u.T)(O=>({...O,data:O.data||[],state:h.Gu.Loading,key:v(I,O.key)})),(0,d.$)(),(0,i.W)(O=>(O=(0,m.u)(O),O.message=`${x.name}: ${O.message}`,(0,o.of)([{data:[],state:h.Gu.Error,error:O,key:v(I,S.requestId)}]))))})));return(0,r.p)(T).pipe(D(),(0,u.T)(this.finalizeResponses),(0,l.U)())}testDatasource(){return Promise.resolve({message:"",status:""})}isQueryable(P){return P&&Array.isArray(P.targets)&&P.targets.length>0}finalizeResponses(P){const{length:y}=P;if(y===0)return P;const T=P.find(M=>M.state===h.Gu.Error);return T?P.push(T):P[y-1].state=h.Gu.Done,P}}function D(){return(0,f.T)((b,P)=>P.reduce((y,T)=>(y.push.apply(y,T),y),b),[])}},87324:(Y,A,e)=>{"use strict";e.d(A,{t:()=>s});var t=e(21489),n=e(47891),o=e(65405);function s(i,l,f,c="="){if(!l||!f)throw new Error("Need label to add to query.");const h=r(i);if(!h.length)return i;const p=g(l,f,c);return u(i,h,p)}function r(i){const l=t.K3.parse(i),f=[];return l.iterate({enter:({to:c,from:h,type:p})=>{if(p.id===t.Fb){const m=(0,o.u)(i.substring(h,c));return f.push({query:m.query,from:h,to:c}),!1}}}),f}function g(i,l,f){const c=l===1/0?"+Inf":l.toString();return{label:i,op:f,value:c}}function u(i,l,f){const c=new n.l;let h="",p=0;for(let m=0;m<l.length;m++){const a=l[m],v=m===l.length-1,E=i.substring(p,a.from),D=v?i.substring(a.to):"";d(a.query.labels,f)||a.query.labels.push(f);const b=c.renderQuery(a.query);h+=E+b+D,p=a.to}return h}function d(i,l){return i.find(f=>f.label===l.label&&f.value===l.value)}},60042:(Y,A,e)=>{"use strict";e.d(A,{A:()=>H});var t=e(32196),n=e(96540),o=e(14236),s=e(13544),r=e(14110),g=e(14578),u=e(55852),d=e(40845),i=e(61680);function l(W){return typeof W=="object"&&W!==null&&"isCanceled"in W}const f=W=>{let N=!1;return{promise:new Promise((G,_)=>{const K={isCanceled:!0};W.then(j=>N?_(K):G(j)),W.catch(j=>_(N?K:j))}),cancel(){N=!0}}};var c=e(45889),h=e(91793),p=e(3911),m=e(39558),a=e(66864),v=e(60029),E=e(10354),D=e(54438);const b="{}",P="__name__",y=25;function T(W){let N="";const V=[];for(const G of W)if((G.name===P||G.selected)&&G.values&&G.values.length>0){const _=G.values.filter(K=>K.selected).map(K=>K.name);_.length>1?V.push(`${G.name}=~"${_.map(c.Cs).join("|")}"`):_.length===1&&(G.name===P?N=_[0]:V.push(`${G.name}="${(0,c.Qn)(_[0])}"`))}return[N,"{",V.join(","),"}"].join("")}function M(W,N,V){return W.map(G=>{const _=N[G.name];if(_){let K;if(G.name===V&&G.values)K=G.values;else{const j=new Set(G.values?.filter(k=>k.selected).map(k=>k.name)||[]);K=_.map(k=>({name:k,selected:j.has(k)}))}return{...G,loading:!1,values:K,hidden:!_,facets:K.length}}return{...G,loading:!1,hidden:!_,values:void 0,facets:0}})}const I=(0,p.N)(W=>({wrapper:(0,t.css)`
    background-color: ${W.colors.background.secondary};
    padding: ${W.spacing(1)};
    width: 100%;
  `,list:(0,t.css)`
    margin-top: ${W.spacing(1)};
    display: flex;
    flex-wrap: wrap;
    max-height: 200px;
    overflow: auto;
    align-content: flex-start;
  `,section:(0,t.css)`
    & + & {
      margin: ${W.spacing(2)} 0;
    }
    position: relative;
  `,selector:(0,t.css)`
    font-family: ${W.typography.fontFamilyMonospace};
    margin-bottom: ${W.spacing(1)};
  `,status:(0,t.css)`
    padding: ${W.spacing(.5)};
    color: ${W.colors.text.secondary};
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    /* using absolute positioning because flex interferes with ellipsis */
    position: absolute;
    width: 50%;
    right: 0;
    text-align: right;
    transition: opacity 100ms linear;
    opacity: 0;
  `,statusShowing:(0,t.css)`
    opacity: 1;
  `,error:(0,t.css)`
    color: ${W.colors.error.main};
  `,valueList:(0,t.css)`
    margin-right: ${W.spacing(1)};
    resize: horizontal;
  `,valueListWrapper:(0,t.css)`
    border-left: 1px solid ${W.colors.border.medium};
    margin: ${W.spacing(1)} 0;
    padding: ${W.spacing(1)} 0 ${W.spacing(1)} ${W.spacing(1)};
  `,valueListArea:(0,t.css)`
    display: flex;
    flex-wrap: wrap;
    margin-top: ${W.spacing(1)};
  `,valueTitle:(0,t.css)`
    margin-left: -${W.spacing(.5)};
    margin-bottom: ${W.spacing(1)};
  `,validationStatus:(0,t.css)`
    padding: ${W.spacing(.5)};
    margin-bottom: ${W.spacing(1)};
    color: ${W.colors.text.maxContrast};
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `}));class x extends n.Component{constructor(){super(...arguments),this.valueListsRef=n.createRef(),this.state={labels:[],labelSearchTerm:"",metricSearchTerm:"",status:"Ready",error:"",validationStatus:"",valueSearchTerm:""},this.onChangeLabelSearch=N=>{this.setState({labelSearchTerm:N.target.value})},this.onChangeMetricSearch=N=>{this.setState({metricSearchTerm:N.target.value})},this.onChangeValueSearch=N=>{this.setState({valueSearchTerm:N.target.value})},this.onClickRunQuery=()=>{const N=T(this.state.labels);this.props.onChange(N)},this.onClickRunRateQuery=()=>{const V=`rate(${T(this.state.labels)}[$__rate_interval])`;this.props.onChange(V)},this.onClickClear=()=>{this.setState(N=>({labels:N.labels.map(G=>({...G,values:void 0,selected:!1,loading:!1,hidden:!1,facets:void 0})),labelSearchTerm:"",metricSearchTerm:"",status:"",error:"",validationStatus:"",valueSearchTerm:""})),this.props.deleteLastUsedLabels(),this.fetchValues(P,b)},this.onClickLabel=(N,V,G)=>{const _=this.state.labels.find(k=>k.name===N);if(!_)return;const K=!_.selected;let j={selected:K};if(_.values&&!K){const k=_.values.map(Q=>({...Q,selected:!1}));j={...j,facets:0,values:k}}this.setState({labelSearchTerm:""}),this.updateLabelState(N,j,"",()=>this.doFacettingForLabel(N))},this.onClickValue=(N,V,G)=>{const _=this.state.labels.find(j=>j.name===N);if(!_||!_.values)return;this.setState({labelSearchTerm:""});const K=_.values.map(j=>({...j,selected:j.name===V?!j.selected:j.selected}));this.updateLabelState(N,{values:K},"",()=>this.doFacetting(N))},this.onClickMetric=(N,V,G)=>{const _=this.state.labels.find(k=>k.name===N);if(!_||!_.values)return;this.setState({metricSearchTerm:""});const K=_.values.map(k=>({...k,selected:k.name===V||k.selected?!k.selected:k.selected})),j=K.some(k=>k.selected);this.updateLabelState(N,{selected:j,values:K},"",()=>this.doFacetting(N))},this.onClickValidate=()=>{const N=T(this.state.labels);this.validateSelector(N)},this.doFacetting=N=>{const V=T(this.state.labels);if(V===b){const G=this.state.labels.map(_=>({..._,facets:0,values:void 0,hidden:!1}));this.setState({labels:G},()=>{this.state.labels.forEach(_=>(_.selected||_.name===P)&&this.fetchValues(_.name,V))})}else this.fetchSeries(V,N)}}updateLabelState(N,V,G="",_){this.setState(K=>{const j=K.labels.map(Q=>Q.name===N?{...Q,...V}:Q),k=G?"":K.error;return{labels:j,status:G,error:k,validationStatus:""}},_)}componentDidMount(){const{languageProvider:N,lastUsedLabels:V}=this.props;if(N){const G=V;N.start(this.props.timeRange).then(()=>{let _=N.getLabelKeys();this.fetchValues(P,b);const K=_.map((j,k,Q)=>({name:j,selected:G.includes(j),loading:!1}));this.setState({labels:K},()=>{this.state.labels.forEach(j=>{j.selected&&this.fetchValues(j.name,b)})})})}}doFacettingForLabel(N){const V=this.state.labels.find(_=>_.name===N);if(!V)return;const G=this.state.labels.filter(_=>_.selected).map(_=>_.name);this.props.storeLastUsedLabels(G),V.selected?V.values||this.fetchValues(N,T(this.state.labels)):this.doFacetting()}async fetchValues(N,V){const{languageProvider:G}=this.props;this.updateLabelState(N,{loading:!0},`Fetching values for ${N}`);try{let _=await G.getLabelValues(N);if(V!==T(this.state.labels)){this.updateLabelState(N,{loading:!1});return}const K=[],{metricsMetadata:j}=G;for(const k of _){const Q={name:k};if(N===P&&j){const ee=j[k];ee&&(Q.details=`(${ee.type}) ${ee.help}`)}K.push(Q)}this.updateLabelState(N,{values:K,loading:!1})}catch(_){console.error(_)}}async fetchSeries(N,V){const{languageProvider:G}=this.props;V&&this.updateLabelState(V,{loading:!0},`Facetting labels for ${N}`);try{const _=await G.fetchSeriesLabels(N,!0);if(N!==T(this.state.labels)){V&&this.updateLabelState(V,{loading:!1});return}if(Object.keys(_).length===0){this.setState({error:`Empty results, no matching label for ${N}`});return}const K=M(this.state.labels,_,V);this.setState({labels:K,error:""}),V&&this.updateLabelState(V,{loading:!1})}catch(_){console.error(_)}}async validateSelector(N){const{languageProvider:V}=this.props;this.setState({validationStatus:`Validating selector ${N}`,error:""});const G=await V.fetchSeries(N);this.setState({validationStatus:`Selector is valid (${G.length} series found)`})}render(){const{theme:N}=this.props,{labels:V,labelSearchTerm:G,metricSearchTerm:_,status:K,error:j,validationStatus:k,valueSearchTerm:Q}=this.state,ee=I(N);if(V.length===0)return n.createElement("div",{className:ee.wrapper},n.createElement(m._,{text:"Loading labels..."}));let ae=V.find(de=>de.name===P);ae&&_&&(ae={...ae,values:ae.values?.filter(de=>de.selected||de.name.includes(_))});let Z=V.filter(de=>!de.hidden&&de.name!==P);G&&(Z=Z.filter(de=>de.selected||de.name.includes(G)));let ne=Z.filter(de=>de.selected&&de.values);Q&&(ne=ne.map(de=>({...de,values:de.values?.filter(ie=>ie.selected||ie.name.includes(Q))})));const q=T(this.state.labels),te=q===b,re=ae?.values?.length||0;return n.createElement("div",{className:ee.wrapper},n.createElement(a.Gy,{align:"flex-start",spacing:"lg"},n.createElement("div",null,n.createElement("div",{className:ee.section},n.createElement(v.J,{description:"Once a metric is selected only possible labels are shown."},"1. Select a metric"),n.createElement("div",null,n.createElement(E.p,{onChange:this.onChangeMetricSearch,"aria-label":"Filter expression for metric",value:_,"data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.selectMetric})),n.createElement("div",{role:"list",className:ee.valueListWrapper,"data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.metricList},n.createElement(h.Y1,{height:Math.min(450,re*y),itemCount:re,itemSize:y,itemKey:de=>ae.values[de].name,width:300,className:ee.valueList},({index:de,style:ie})=>{const ge=ae?.values?.[de];return ge?n.createElement("div",{style:ie},n.createElement(D.J,{name:ae.name,value:ge?.name,title:ge.details,active:ge?.selected,onClick:this.onClickMetric,searchTerm:_})):null})))),n.createElement("div",null,n.createElement("div",{className:ee.section},n.createElement(v.J,{description:"Once label values are selected, only possible label combinations are shown."},"2. Select labels to search in"),n.createElement("div",null,n.createElement(E.p,{onChange:this.onChangeLabelSearch,"aria-label":"Filter expression for label",value:G,"data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.labelNamesFilter})),n.createElement("div",{className:ee.list,style:{height:120}},Z.map(de=>n.createElement(D.J,{key:de.name,name:de.name,loading:de.loading,active:de.selected,hidden:de.hidden,facets:de.facets,onClick:this.onClickLabel,searchTerm:G})))),n.createElement("div",{className:ee.section},n.createElement(v.J,{description:"Use the search field to find values across selected labels."},"3. Select (multiple) values for your labels"),n.createElement("div",null,n.createElement(E.p,{onChange:this.onChangeValueSearch,"aria-label":"Filter expression for label values",value:Q,"data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.labelValuesFilter})),n.createElement("div",{className:ee.valueListArea,ref:this.valueListsRef},ne.map(de=>n.createElement("div",{role:"list",key:de.name,"aria-label":`Values for ${de.name}`,className:ee.valueListWrapper},n.createElement("div",{className:ee.valueTitle},n.createElement(D.J,{name:de.name,loading:de.loading,active:de.selected,hidden:de.hidden,facets:de.facets||de.values?.length,onClick:this.onClickLabel})),n.createElement(h.Y1,{height:Math.min(200,y*(de.values?.length||0)),itemCount:de.values?.length||0,itemSize:28,itemKey:ie=>de.values[ie].name,width:200,className:ee.valueList},({index:ie,style:ge})=>{const ve=de.values?.[ie];return ve?n.createElement("div",{style:ge},n.createElement(D.J,{name:de.name,value:ve?.name,active:ve?.selected,onClick:this.onClickValue,searchTerm:Q})):null}))))))),n.createElement("div",{className:ee.section},n.createElement(v.J,null,"4. Resulting selector"),n.createElement("div",{"aria-label":"selector",className:ee.selector},q),k&&n.createElement("div",{className:ee.validationStatus},k),n.createElement(a.Gy,null,n.createElement(u.$n,{"data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.useQuery,"aria-label":"Use selector for query button",disabled:te,onClick:this.onClickRunQuery},"Use query"),n.createElement(u.$n,{"data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.useAsRateQuery,"aria-label":"Use selector as metrics button",variant:"secondary",disabled:te,onClick:this.onClickRunRateQuery},"Use as rate query"),n.createElement(u.$n,{"data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.validateSelector,"aria-label":"Validate submit button",variant:"secondary",disabled:te,onClick:this.onClickValidate},"Validate selector"),n.createElement(u.$n,{"data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.clear,"aria-label":"Selector clear button",variant:"secondary",onClick:this.onClickClear},"Clear"),n.createElement("div",{className:(0,t.cx)(ee.status,(K||j)&&ee.statusShowing)},n.createElement("span",{className:j?ee.error:""},j||K)))))}}const S=(0,d.cV)(x),O=n.lazy(()=>e.e(8325).then(e.bind(e,29049))),C=W=>n.createElement(n.Suspense,{fallback:null},n.createElement(O,{...W})),L=W=>{const N=(0,n.useRef)(null),{onRunQuery:V,onChange:G,..._}=W,K=Q=>{N.current=Q,G(Q),V()},j=Q=>{G(Q)},k=Q=>{G(Q)};return n.createElement(C,{onChange:k,onRunQuery:K,onBlur:j,..._})},U="grafana.datasources.prometheus.browser.labels";function R(W,N,V){return W?"(Disabled)":N?V?"Metrics browser":"(No metrics found)":"Loading metrics..."}class B extends n.PureComponent{constructor(N){super(N),this.refreshHint=()=>{const{datasource:V,query:G,data:_}=this.props,K=V.getInitHints(),j=K.length>0?K[0]:null;if(!_||_.series.length===0){this.setState({hint:j});return}const k=(0,o.ci)(_.series[0])?_.series.map(o.w3):_.series,Q=V.getQueryHints(G,k);let ee=Q.length>0?Q[0]:null;this.setState({hint:ee??j})},this.refreshMetrics=async()=>{const{range:V,datasource:{languageProvider:G}}=this.props;this.languageProviderInitializationPromise=f(G.start(V));try{const _=await this.languageProviderInitializationPromise.promise;await Promise.all(_),this.onUpdateLanguage()}catch(_){if(!(l(_)&&_.isCanceled))throw _}},this.onChangeLabelBrowser=V=>{this.onChangeQuery(V,!0),this.setState({labelBrowserVisible:!1})},this.onChangeQuery=(V,G)=>{const{query:_,onChange:K,onRunQuery:j}=this.props;if(K){const k={..._,expr:V};K(k),G&&j&&j()}},this.onClickChooserButton=()=>{this.setState(V=>({labelBrowserVisible:!V.labelBrowserVisible})),(0,r.rR)("user_grafana_prometheus_metrics_browser_clicked",{editorMode:this.state.labelBrowserVisible?"metricViewClosed":"metricViewOpen",app:this.props?.app??""})},this.onClickHintFix=()=>{const{datasource:V,query:G,onChange:_,onRunQuery:K}=this.props,{hint:j}=this.state;j?.fix?.action&&_(V.modifyQuery(G,j.fix.action)),K()},this.onUpdateLanguage=()=>{const{datasource:{languageProvider:V}}=this.props,{metrics:G}=V;G&&this.setState({syntaxLoaded:!0})},this.state={labelBrowserVisible:!1,syntaxLoaded:!1,hint:null}}componentDidMount(){this.props.datasource.languageProvider&&this.refreshMetrics(),this.refreshHint()}componentWillUnmount(){this.languageProviderInitializationPromise&&this.languageProviderInitializationPromise.cancel()}componentDidUpdate(N){const{data:V,datasource:{languageProvider:G},range:_}=this.props;G!==N.datasource.languageProvider&&this.setState({syntaxLoaded:!1});const K=this.rangeChangedToRefresh(_,N.range);(G!==N.datasource.languageProvider||K)&&this.refreshMetrics(),V&&N.data&&N.data.series!==V.series&&this.refreshHint()}rangeChangedToRefresh(N,V){if(N&&V){const G=(0,c.eN)(N.from.valueOf())===(0,c.eN)(V.from.valueOf()),_=(0,c.eN)(N.to.valueOf())===(0,c.eN)(V.to.valueOf());return!(G&&_)}return!1}render(){const{datasource:N,datasource:{languageProvider:V},query:G,ExtraFieldElement:_,history:K=[],theme:j}=this.props,{labelBrowserVisible:k,syntaxLoaded:Q,hint:ee}=this.state,ae=V.metrics.length>0,Z=R(N.lookupsDisabled,Q,ae),ne=!(Q&&ae);return n.createElement(i.b,{storageKey:U,defaultValue:[]},(q,te,re)=>n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline gf-form-inline--xs-view-flex-column flex-grow-1","data-testid":this.props["data-testid"]},n.createElement("button",{className:"gf-form-label query-keyword pointer",onClick:this.onClickChooserButton,disabled:ne,type:"button","data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.openButton},Z,n.createElement(g.I,{name:k?"angle-down":"angle-right"})),n.createElement("div",{className:"gf-form gf-form--grow flex-shrink-1 min-width-15"},n.createElement(L,{languageProvider:V,history:K,onChange:this.onChangeQuery,onRunQuery:this.props.onRunQuery,initialValue:G.expr??"",placeholder:"Enter a PromQL query\u2026",datasource:N}))),k&&n.createElement("div",{className:"gf-form"},n.createElement(S,{languageProvider:V,onChange:this.onChangeLabelBrowser,lastUsedLabels:q||[],storeLastUsedLabels:te,deleteLastUsedLabels:re,timeRange:this.props.range})),_,ee?n.createElement("div",{className:"query-row-break"},n.createElement("div",{className:"prom-query-field-info text-warning"},ee.label," ",ee.fix?n.createElement("button",{type:"button",className:(0,t.cx)((0,u.my)(j),"text-link","muted"),onClick:this.onClickHintFix},ee.fix.label):null)):null))}}const H=(0,d.cV)(B)},4253:(Y,A,e)=>{"use strict";e.d(A,{_p:()=>He,k1:()=>je,jW:()=>Ge,Zh:()=>Ke,TT:()=>Oe});var t=e(32196),n=e(96540),o=e(97899),s=e(68704),r=e(91062),g=e(40845),u=e(42418),d=e(91409),i=e(72093),l=e(2913),f=e(13544),c=e(29020),h=e(32264),p=e(14186),m=e(15292);function a({options:Ee,onOptionsChange:J}){const oe=(0,g.$j)(),ue=Ke(oe),be=h.$.featureToggles.prometheusConfigOverhaulAuth;return n.createElement(c.I,{title:"Alerting",className:(0,t.cx)(ue.container,{[ue.alertingTop]:be})},n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(p.I,{labelWidth:30,label:"Manage alerts via Alerting UI",disabled:Ee.readOnly,tooltip:n.createElement(n.Fragment,null,"Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source. ",Ge()),interactive:!0,className:ue.switchField},n.createElement(m.d,{value:Ee.jsonData.manageAlerts!==!1,onChange:Le=>J({...Ee,jsonData:{...Ee.jsonData,manageAlerts:Le.currentTarget.checked}}),id:f.Tp.components.DataSource.Prometheus.configPage.manageAlerts}))))))}var v=e(39268),E=e(10354),D=(Ee=>(Ee.Public="AzureCloud",Ee.China="AzureChinaCloud",Ee.USGovernment="AzureUSGovernment",Ee.None="",Ee))(D||{});const b=[{value:"AzureCloud",label:"Azure"},{value:"AzureChinaCloud",label:"Azure China"},{value:"AzureUSGovernment",label:"Azure US Government"}];function P(Ee){switch(Ee.authType){case"msi":case"workloadidentity":return!0;case"clientsecret":return!!(Ee.azureCloud&&Ee.tenantId&&Ee.clientId&&Ee.clientSecret)}}const y=Symbol("Concealed client secret");function T(){return h.$.azure.cloud||D.Public}function M(Ee){if(Ee.secureJsonFields.azureClientSecret)return y;{const J=Ee.secureJsonData?.azureClientSecret;return typeof J=="string"&&J.length>0?J:void 0}}function I(Ee){return!!Ee.jsonData.azureCredentials}function x(){return h.$.azure.managedIdentityEnabled?{authType:"msi"}:{authType:"clientsecret",azureCloud:T()}}function S(Ee){const J=Ee.jsonData.azureCredentials;if(!J)return x();switch(J.authType){case"msi":case"workloadidentity":return J.authType==="msi"&&h.$.azure.managedIdentityEnabled||J.authType==="workloadidentity"&&h.$.azure.workloadIdentityEnabled?{authType:J.authType}:{authType:"clientsecret",azureCloud:T()};case"clientsecret":return{authType:"clientsecret",azureCloud:J.azureCloud||T(),tenantId:J.tenantId,clientId:J.clientId,clientSecret:M(Ee)}}}function O(Ee,J){switch(J.authType){case"msi":case"workloadidentity":if(J.authType==="msi"&&!h.$.azure.managedIdentityEnabled)throw new Error("Managed Identity authentication is not enabled in Grafana config.");if(J.authType==="workloadidentity"&&!h.$.azure.workloadIdentityEnabled)throw new Error("Workload Identity authentication is not enabled in Grafana config.");return Ee={...Ee,jsonData:{...Ee.jsonData,azureAuthType:J.authType,azureCredentials:{authType:J.authType}}},Ee;case"clientsecret":return Ee={...Ee,jsonData:{...Ee.jsonData,azureCredentials:{authType:"clientsecret",azureCloud:J.azureCloud||T(),tenantId:J.tenantId,clientId:J.clientId}},secureJsonData:{...Ee.secureJsonData,azureClientSecret:typeof J.clientSecret=="string"&&J.clientSecret.length>0?J.clientSecret:void 0},secureJsonFields:{...Ee.secureJsonFields,azureClientSecret:typeof J.clientSecret=="symbol"}},Ee}}function C(Ee){return{jsonData:{...Ee.jsonData,azureCredentials:x()}}}function L(Ee){return{jsonData:{...Ee.jsonData,azureAuth:void 0,azureCredentials:void 0,azureEndpointResourceId:void 0}}}var U=e(38894),R=e(88323),B=e(55852);const H=Ee=>{const{credentials:J,azureCloudOptions:oe,onCredentialsChange:ue,getSubscriptions:be,disabled:Le,managedIdentityEnabled:_e,workloadIdentityEnabled:Ve}=Ee,We=P(J),[$e,it]=(0,n.useState)([]),[at,ht]=(0,n.useReducer)(ct=>ct+1,0),ft=(0,n.useMemo)(()=>{let ct=[{value:"clientsecret",label:"App Registration"}];return _e&&ct.push({value:"msi",label:"Managed Identity"}),Ve&&ct.push({value:"workloadidentity",label:"Workload Identity"}),ct},[_e,Ve]);(0,n.useEffect)(()=>{if(!be||!We){gt([]);return}let ct=!1;return be().then(Ct=>{ct||gt(Ct,at)}),()=>{ct=!0}},[at]);const gt=(ct,Ct=!1)=>{it(ct),be&&(Ct&&!J.defaultSubscriptionId&&ct.length>0?St(ct[0]):J.defaultSubscriptionId&&(ct.find(cn=>cn.value===J.defaultSubscriptionId)||St(void 0)))},Dt=ct=>{it([]);const Ct=_e?"msi":Ve?"workloadidentity":"clientsecret",Yt={...J,authType:ct.value||Ct,defaultSubscriptionId:void 0};ue(Yt)},It=ct=>{if(J.authType==="clientsecret"){it([]);const Ct={...J,azureCloud:ct.value,defaultSubscriptionId:void 0};ue(Ct)}},jt=ct=>{if(J.authType==="clientsecret"){it([]);const Ct={...J,tenantId:ct.target.value,defaultSubscriptionId:void 0};ue(Ct)}},Vt=ct=>{if(J.authType==="clientsecret"){it([]);const Ct={...J,clientId:ct.target.value,defaultSubscriptionId:void 0};ue(Ct)}},_t=ct=>{if(J.authType==="clientsecret"){it([]);const Ct={...J,clientSecret:ct.target.value,defaultSubscriptionId:void 0};ue(Ct)}},rt=()=>{if(J.authType==="clientsecret"){it([]);const ct={...J,clientSecret:"",defaultSubscriptionId:void 0};ue(ct)}},St=ct=>{const Ct={...J,defaultSubscriptionId:ct?.value};ue(Ct)},pn=h.$.featureToggles.prometheusConfigOverhaulAuth;return n.createElement("div",{className:"gf-form-group"},ft.length>1&&n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(U.I,{className:"width-12",tooltip:"Choose the type of authentication to Azure services"},"Authentication"),n.createElement(R.l6,{className:"width-15",value:ft.find(ct=>ct.value===J.authType),options:ft,onChange:Dt,isDisabled:Le}))),J.authType==="clientsecret"&&n.createElement(n.Fragment,null,oe&&n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(U.I,{className:"width-12",tooltip:"Choose an Azure Cloud"},"Azure Cloud"),n.createElement(R.l6,{className:"width-15",value:oe.find(ct=>ct.value===J.azureCloud),options:oe,onChange:It,isDisabled:Le}))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(U.I,{className:"width-12"},"Directory (tenant) ID"),n.createElement("div",{className:"width-15"},n.createElement(E.p,{className:(0,t.cx)(pn?"width-20":"width-30"),placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:J.tenantId||"",onChange:jt,disabled:Le})))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(U.I,{className:"width-12"},"Application (client) ID"),n.createElement("div",{className:"width-15"},n.createElement(E.p,{className:(0,t.cx)(pn?"width-20":"width-30"),placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:J.clientId||"",onChange:Vt,disabled:Le})))),typeof J.clientSecret=="symbol"?n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(U.I,{htmlFor:"azure-client-secret",className:"width-12"},"Client Secret"),n.createElement(E.p,{id:"azure-client-secret",className:(0,t.cx)(pn?"width-20":"width-25"),placeholder:"configured",disabled:!0})),!Le&&n.createElement("div",{className:"gf-form"},n.createElement("div",{className:(0,t.cx)(pn?"max-width-20 gf-form-inline":"max-width-30 gf-form-inline")},n.createElement(B.$n,{variant:"secondary",type:"button",onClick:rt},"reset")))):n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(U.I,{className:"width-12"},"Client Secret"),n.createElement("div",{className:"width-15"},n.createElement(E.p,{className:(0,t.cx)(pn?"width-20":"width-30"),placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:J.clientSecret||"",onChange:_t,disabled:Le}))))),be&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(U.I,{className:"width-12"},"Default Subscription"),n.createElement("div",{className:(0,t.cx)(pn?"width-20":"width-25")},n.createElement(R.l6,{value:J.defaultSubscriptionId?$e.find(ct=>ct.value===J.defaultSubscriptionId):void 0,options:$e,onChange:St,isDisabled:Le})))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement("div",{className:"max-width-30 gf-form-inline"},n.createElement(B.$n,{variant:"secondary",size:"sm",type:"button",onClick:ht,disabled:!We},"Load Subscriptions"))))))},W=null,N=Ee=>{const{dataSourceConfig:J,onChange:oe}=Ee,[ue,be]=(0,n.useState)(!!J.jsonData.azureEndpointResourceId),Le=(0,n.useMemo)(()=>S(J),[J]),_e=at=>{oe(O(J,at))},Ve=at=>{be(at.currentTarget.checked),at.currentTarget.checked||oe({...J,jsonData:{...J.jsonData,azureEndpointResourceId:void 0}})},We=at=>{ue&&oe({...J,jsonData:{...J.jsonData,azureEndpointResourceId:at.currentTarget.value}})},$e=h.$.featureToggles.prometheusConfigOverhaulAuth,it=$e?24:26;return n.createElement(n.Fragment,null,n.createElement("h6",null,"Azure authentication"),n.createElement(H,{managedIdentityEnabled:h.$.azure.managedIdentityEnabled,workloadIdentityEnabled:h.$.azure.workloadIdentityEnabled,credentials:Le,azureCloudOptions:b,onCredentialsChange:_e,disabled:J.readOnly}),n.createElement("h6",null,"Azure configuration"),n.createElement("div",{className:"gf-form-group"},n.createElement(v.C,null,n.createElement(p.I,{labelWidth:it,label:"Override AAD audience",disabled:J.readOnly},n.createElement(m.K,{value:ue,onChange:Ve}))),ue&&n.createElement(v.C,null,n.createElement(p.I,{labelWidth:it,label:"Resource ID",disabled:J.readOnly},n.createElement(E.p,{className:(0,t.cx)($e?"width-20":"width-30"),value:J.jsonData.azureEndpointResourceId||"",onChange:We})))))},V=null;var G=e(66025),_=e(77657),K=e(17466),j=e(67861),k=e(17081);const Q=Ee=>{const{options:J,onOptionsChange:oe,azureAuthSettings:ue,sigV4AuthToggleEnabled:be,renderSigV4Editor:Le,secureSocksDSProxyEnabled:_e}=Ee,Ve=(0,G.pe)({config:J,onChange:oe}),We=(0,g.$j)(),$e=Ke(We);let it=[];const[at,ht]=(0,n.useState)(J.jsonData.sigV4Auth||!1),ft="custom-sigV4Id",gt={id:ft,label:"SigV4 auth",description:"This is SigV4 auth description",component:n.createElement(n.Fragment,null,Le)};be&&it.push(gt);const Dt=ue?.azureAuthSupported&&ue.getAzureAuthEnabled(J)||!1,[It,jt]=(0,n.useState)(Dt),Vt="custom-azureAuthId",_t={id:Vt,label:"Azure auth",description:"This is Azure auth description",component:n.createElement(n.Fragment,null,ue.azureSettingsUI&&n.createElement(ue.azureSettingsUI,{dataSourceConfig:J,onChange:oe}))};ue?.azureAuthSupported&&it.push(_t);function rt(){return at?ft:It?Vt:Ve.selectedMethod}let St;switch(J.access){case"direct":St=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Browser"),", this means the URL needs to be accessible from the browser.",Ge());break;case"proxy":St=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Server"),", this means the URL needs to be accessible from the grafana backend/server.",Ge());break;default:St=n.createElement(n.Fragment,null,"Specify a complete HTTP URL (for example http://your_server:8080) ",Ge())}return n.createElement(n.Fragment,null,n.createElement(_.u,{urlPlaceholder:"http://localhost:9090",config:J,onChange:oe,urlLabel:"Prometheus server URL",urlTooltip:St}),n.createElement("hr",{className:`${$e.hrTopSpace} ${$e.hrBottomSpace}`}),n.createElement(K.N,{...Ve,customMethods:it,onAuthMethodSelect:pn=>{be&&ht(pn===ft),ue?.azureAuthSupported&&(jt(pn===Vt),ue.setAzureAuthEnabled(J,pn===Vt)),oe({...J,basicAuth:pn===j.q.BasicAuth,withCredentials:pn===j.q.CrossSiteCredentials,jsonData:{...J.jsonData,sigV4Auth:pn===ft,oauthPassThru:pn===j.q.OAuthForward}})},selectedMethod:rt()}),n.createElement("div",{className:$e.sectionBottomPadding}),_e&&n.createElement(n.Fragment,null,n.createElement(k.Y,{options:J,onOptionsChange:oe}),n.createElement("div",{className:$e.sectionBottomPadding})))};var ee=e(97716),ae=e.n(ee),Z=e(22391),ne=e(17172),q=e(85464),te=e(35146),re=e(30915),de=e(69120),ie=e(51612);function ge({value:Ee,onChange:J,onDelete:oe,disabled:ue}){const[be,Le]=(0,n.useState)(!!Ee.datasourceUid),_e=(0,g.$j)(),Ve=Ke(_e);return n.createElement("div",{className:"gf-form-group"},n.createElement(p.I,{label:"Internal link",labelWidth:je,disabled:ue,tooltip:n.createElement(n.Fragment,null,"Enable this option if you have an internal link. When enabled, this reveals the data source selector. Select the backend tracing data store for your exemplar data. ",Ge()),interactive:!0,className:Ve.switchField},n.createElement(n.Fragment,null,n.createElement(m.d,{value:be,"data-testid":f.Tp.components.DataSource.Prometheus.configPage.internalLinkSwitch,onChange:We=>Le(We.currentTarget.checked)}))),be?n.createElement(p.I,{label:"Data source",labelWidth:je,tooltip:n.createElement(n.Fragment,null,"The data source the exemplar is going to navigate to. ",Ge()),disabled:ue,interactive:!0},n.createElement(ie.s,{tracing:!0,current:Ee.datasourceUid,noDefault:!0,width:40,onChange:We=>J({...Ee,datasourceUid:We.uid,url:void 0})})):n.createElement(p.I,{label:"URL",labelWidth:je,tooltip:n.createElement(n.Fragment,null,"The URL of the trace backend the user would go to see its trace. ",Ge()),disabled:ue,interactive:!0},n.createElement(E.p,{placeholder:"https://example.com/${__value.raw}",spellCheck:!1,width:40,value:Ee.url,onChange:We=>J({...Ee,datasourceUid:void 0,url:We.currentTarget.value})})),n.createElement(p.I,{label:"URL Label",labelWidth:je,tooltip:n.createElement(n.Fragment,null,"Use to override the button label on the exemplar traceID field. ",Ge()),disabled:ue,interactive:!0},n.createElement(E.p,{placeholder:"Go to example.com",spellCheck:!1,width:40,value:Ee.urlDisplayLabel,onChange:We=>J({...Ee,urlDisplayLabel:We.currentTarget.value})})),n.createElement(p.I,{label:"Label name",labelWidth:je,tooltip:n.createElement(n.Fragment,null,"The name of the field in the labels object that should be used to get the traceID. ",Ge()),disabled:ue,interactive:!0},n.createElement(E.p,{placeholder:"traceID",spellCheck:!1,width:40,value:Ee.name,onChange:We=>J({...Ee,name:We.currentTarget.value})})),!ue&&n.createElement(p.I,{label:"Remove exemplar link",labelWidth:je,disabled:ue},n.createElement(B.$n,{variant:"destructive",title:"Remove exemplar link",icon:"times",onClick:We=>{We.preventDefault(),oe()}})))}function ve({options:Ee,onChange:J,disabled:oe}){const ue=(0,g.$j)(),be=Ke(ue);return n.createElement("div",{className:be.sectionBottomPadding},n.createElement(c.I,{title:"Exemplars",className:be.container},Ee&&Ee.map((Le,_e)=>n.createElement(ge,{key:_e,value:Le,onChange:Ve=>{const We=[...Ee];We.splice(_e,1,Ve),J(We)},onDelete:()=>{const Ve=[...Ee];Ve.splice(_e,1),J(Ve)},disabled:oe})),!oe&&n.createElement(B.$n,{variant:"secondary","data-testid":f.Tp.components.DataSource.Prometheus.configPage.exemplarsAddButton,className:(0,t.css)`
              margin-bottom: 10px;
            `,icon:"plus",onClick:Le=>{Le.preventDefault();const _e=[...Ee||[],{name:"traceID"}];J(_e)}},"Add"),oe&&!Ee&&n.createElement("i",null,"No exemplars configurations")))}const ye={Prometheus:[{value:void 0,label:"Please select"},{value:"2.0.0",label:"< 2.14.x"},{value:"2.14.0",label:"2.14.x"},{value:"2.15.0",label:"2.15.x"},{value:"2.16.0",label:"2.16.x"},{value:"2.17.0",label:"2.17.x"},{value:"2.18.0",label:"2.18.x"},{value:"2.19.0",label:"2.19.x"},{value:"2.20.0",label:"2.20.x"},{value:"2.21.0",label:"2.21.x"},{value:"2.22.0",label:"2.22.x"},{value:"2.23.0",label:"2.23.x"},{value:"2.24.0",label:"2.24.x"},{value:"2.25.0",label:"2.25.x"},{value:"2.26.0",label:"2.26.x"},{value:"2.27.0",label:"2.27.x"},{value:"2.28.0",label:"2.28.x"},{value:"2.29.0",label:"2.29.x"},{value:"2.30.0",label:"2.30.x"},{value:"2.31.0",label:"2.31.x"},{value:"2.32.0",label:"2.32.x"},{value:"2.33.0",label:"2.33.x"},{value:"2.34.0",label:"2.34.x"},{value:"2.35.0",label:"2.35.x"},{value:"2.36.0",label:"2.36.x"},{value:"2.37.0",label:"2.37.x"},{value:"2.38.0",label:"2.38.x"},{value:"2.39.0",label:"2.39.x"},{value:"2.40.0",label:"2.40.x"},{value:"2.41.0",label:"2.41.x"},{value:"2.42.0",label:"2.42.x"},{value:"2.43.0",label:"2.43.x"},{value:"2.44.0",label:"2.44.x"},{value:"2.45.0",label:"2.45.x"},{value:"2.46.0",label:"2.46.x"},{value:"2.47.0",label:"2.47.x"},{value:"2.48.0",label:"2.48.x"},{value:"2.49.0",label:"2.49.x"},{value:"2.50.0",label:"2.50.x"},{value:"2.50.1",label:"> 2.50.x"}],Mimir:[{value:void 0,label:"Please select"},{value:"2.0.0",label:"2.0.x"},{value:"2.1.0",label:"2.1.x"},{value:"2.2.0",label:"2.2.x"},{value:"2.3.0",label:"2.3.x"},{value:"2.4.0",label:"2.4.x"},{value:"2.5.0",label:"2.5.x"},{value:"2.6.0",label:"2.6.x"},{value:"2.7.0",label:"2.7.x"},{value:"2.8.0",label:"2.8.x"},{value:"2.9.0",label:"2.9.x"},{value:"2.9.1",label:"> 2.9.x"}],Thanos:[{value:void 0,label:"Please select"},{value:"0.0.0",label:"< 0.16.x"},{value:"0.16.0",label:"0.16.x"},{value:"0.17.0",label:"0.17.x"},{value:"0.18.0",label:"0.18.x"},{value:"0.19.0",label:"0.19.x"},{value:"0.20.0",label:"0.20.x"},{value:"0.21.0",label:"0.21.x"},{value:"0.22.0",label:"0.22.x"},{value:"0.23.0",label:"0.23.x"},{value:"0.24.0",label:"0.24.x"},{value:"0.25.0",label:"0.25.x"},{value:"0.26.0",label:"0.26.x"},{value:"0.27.0",label:"0.27.x"},{value:"0.28.0",label:"0.28.x"},{value:"0.29.0",label:"0.29.x"},{value:"0.30.0",label:"0.30.x"},{value:"0.31.0",label:"0.31.x"},{value:"0.31.1",label:"> 0.31.x"}],Cortex:[{value:void 0,label:"Please select"},{value:"0.0.0",label:"< 1.0.0"},{value:"1.0.0",label:"1.0.0"},{value:"1.1.0",label:"1.1.x"},{value:"1.2.0",label:"1.2.x"},{value:"1.3.0",label:"1.3.x"},{value:"1.4.0",label:"1.4.x"},{value:"1.5.0",label:"1.5.x"},{value:"1.6.0",label:"1.6.x"},{value:"1.7.0",label:"1.7.x"},{value:"1.8.0",label:"1.8.x"},{value:"1.9.0",label:"1.9.x"},{value:"1.10.0",label:"1.10.x"},{value:"1.11.0",label:"1.11.x"},{value:"1.13.0",label:"1.13.x"},{value:"1.14.0",label:"> 1.13.x"}]},pe=[{value:"POST",label:"POST"},{value:"GET",label:"GET"}],le=[{value:te.f.Builder,label:"Builder"},{value:te.f.Code,label:"Code"}],Me=[{value:de.fD.Low,label:"Low"},{value:de.fD.Medium,label:"Medium"},{value:de.fD.High,label:"High"},{value:de.fD.None,label:"None"}],De=[{value:de.N1.Prometheus,label:de.N1.Prometheus},{value:de.N1.Cortex,label:de.N1.Cortex},{value:de.N1.Mimir,label:de.N1.Mimir},{value:de.N1.Thanos,label:de.N1.Thanos}],Re=/^$|^\d+(ms|[Mwdhmsy])$/,me=/(\d+)(.+)/,he="Value is not valid, you can use number with time unit specifier: y, M, w, d, h, m, s",Te=(Ee,J)=>{if(!J||!ye[J])return;const ue=ye[J]?.filter(Le=>!!Le.value&&ae().lte(Le.value,Ee)).map(Le=>Le.value),be=ue[ue.length-1];if(be){const Le=ae().diff(be,Ee);if(["patch","prepatch","prerelease",null].includes(Le))return be}},Be=Ee=>{console.warn("Error fetching version from buildinfo API, must manually select version!",Ee)},we=(Ee,J,oe)=>{oe(Ee).then(ue=>{(0,ne.AI)().get(`/api/datasources/uid/${ue.uid}/resources/version-detect`).then(be=>{const Le=be.data?.version??"";if(Le&&ae().valid(Le)){const _e=Te(Le,ue.jsonData.prometheusType);_e&&oe({...ue,jsonData:{...ue.jsonData,prometheusVersion:_e}}).then(Ve=>{J(Ve)})}else Be()})}).catch(ue=>{Be(ue)})},Ne=Ee=>{const{options:J,onOptionsChange:oe}=Ee,ue=(0,q.k9)();J.jsonData.httpMethod||(J.jsonData.httpMethod="POST");const be=(0,g.$j)(),Le=Ke(be),[_e,Ve]=(0,n.useState)({timeInterval:"",queryTimeout:"",incrementalQueryOverlapWindow:""});return n.createElement(n.Fragment,null,n.createElement(c.I,{title:"Interval behaviour",className:Le.container},n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(p.I,{label:"Scrape interval",labelWidth:je,tooltip:n.createElement(n.Fragment,null,"This interval is how frequently Prometheus scrapes targets. Set this to the typical scrape and evaluation interval configured in your Prometheus config file. If you set this to a greater value than your Prometheus config file interval, Grafana will evaluate the data according to this interval and you will see less data points. Defaults to 15s. ",Ge()),interactive:!0,disabled:J.readOnly},n.createElement(n.Fragment,null,n.createElement(E.p,{className:"width-20",value:J.jsonData.timeInterval,spellCheck:!1,placeholder:"15s",onChange:st("timeInterval",J,oe),onBlur:We=>Ve({..._e,timeInterval:We.currentTarget.value}),"data-testid":f.Tp.components.DataSource.Prometheus.configPage.scrapeInterval}),Oe(_e.timeInterval,Re,he))))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(p.I,{label:"Query timeout",labelWidth:je,tooltip:n.createElement(n.Fragment,null,"Set the Prometheus query timeout. ",Ge()),interactive:!0,disabled:J.readOnly},n.createElement(n.Fragment,null,n.createElement(E.p,{className:"width-20",value:J.jsonData.queryTimeout,onChange:st("queryTimeout",J,oe),spellCheck:!1,placeholder:"60s",onBlur:We=>Ve({..._e,queryTimeout:We.currentTarget.value}),"data-testid":f.Tp.components.DataSource.Prometheus.configPage.queryTimeout}),Oe(_e.queryTimeout,Re,he))))))),n.createElement(c.I,{title:"Query editor",className:Le.container},n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(p.I,{label:"Default editor",labelWidth:je,tooltip:n.createElement(n.Fragment,null,"Set default editor option for all users of this data source. ",Ge()),interactive:!0,disabled:J.readOnly},n.createElement(R.l6,{"aria-label":"Default Editor (Code or Builder)",options:le,value:le.find(We=>We.value===J.jsonData.defaultEditor)??le.find(We=>We.value===te.f.Builder),onChange:st("defaultEditor",J,oe),width:40,"data-testid":f.Tp.components.DataSource.Prometheus.configPage.defaultEditor}))),n.createElement("div",{className:"gf-form"},n.createElement(p.I,{labelWidth:je,label:"Disable metrics lookup",tooltip:n.createElement(n.Fragment,null,"Checking this option will disable the metrics chooser and metric/label support in the query field's autocomplete. This helps if you have performance issues with bigger Prometheus instances."," ",Ge()),interactive:!0,disabled:J.readOnly,className:Le.switchField},n.createElement(m.d,{value:J.jsonData.disableMetricsLookup??!1,onChange:(0,Z.EX)(Ee,"disableMetricsLookup"),id:f.Tp.components.DataSource.Prometheus.configPage.disableMetricLookup}))))),n.createElement(c.I,{title:"Performance",className:Le.container},!J.jsonData.prometheusType&&!J.jsonData.prometheusVersion&&J.readOnly&&n.createElement("div",{className:Le.versionMargin},"For more information on configuring prometheus type and version in data sources, see the"," ",n.createElement("a",{className:Le.textUnderline,href:"https://grafana.com/docs/grafana/latest/administration/provisioning/"},"provisioning documentation"),"."),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(p.I,{label:"Prometheus type",labelWidth:je,tooltip:n.createElement(n.Fragment,null,"Set this to the type of your prometheus database, e.g. Prometheus, Cortex, Mimir or Thanos. Changing this field will save your current settings, and attempt to detect the version. Certain types of Prometheus supports or does not support various APIs. For example, some types support regex matching for label queries to improve performance. Some types have an API for metadata. If you set this incorrectly you may experience odd behavior when querying metrics and labels. Please check your Prometheus documentation to ensure you enter the correct type. ",Ge()),interactive:!0,disabled:J.readOnly},n.createElement(R.l6,{"aria-label":"Prometheus type",options:De,value:De.find(We=>We.value===J.jsonData.prometheusType),onChange:st("prometheusType",{...J,jsonData:{...J.jsonData,prometheusVersion:void 0}},We=>(we(We,oe,ue),oe({...We,jsonData:{...We.jsonData,prometheusVersion:void 0}}))),width:40,"data-testid":f.Tp.components.DataSource.Prometheus.configPage.prometheusType})))),n.createElement("div",{className:"gf-form-inline"},J.jsonData.prometheusType&&n.createElement("div",{className:"gf-form"},n.createElement(p.I,{label:`${J.jsonData.prometheusType} version`,labelWidth:je,tooltip:n.createElement(n.Fragment,null,"Use this to set the version of your ",J.jsonData.prometheusType," instance if it is not automatically configured. ",Ge()),interactive:!0,disabled:J.readOnly},n.createElement(R.l6,{"aria-label":`${J.jsonData.prometheusType} type`,options:ye[J.jsonData.prometheusType],value:ye[J.jsonData.prometheusType]?.find(We=>We.value===J.jsonData.prometheusVersion),onChange:st("prometheusVersion",J,oe),width:40,"data-testid":f.Tp.components.DataSource.Prometheus.configPage.prometheusVersion})))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form max-width-30"},n.createElement(p.I,{label:"Cache level",labelWidth:je,tooltip:n.createElement(n.Fragment,null,"Sets the browser caching level for editor queries. Higher cache settings are recommended for high cardinality data sources."),interactive:!0,disabled:J.readOnly},n.createElement(R.l6,{width:40,onChange:st("cacheLevel",J,oe),options:Me,value:Me.find(We=>We.value===J.jsonData.cacheLevel)??de.fD.Low,"data-testid":f.Tp.components.DataSource.Prometheus.configPage.cacheLevel})))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form max-width-30"},n.createElement(p.I,{label:"Incremental querying (beta)",labelWidth:je,tooltip:n.createElement(n.Fragment,null,"This feature will change the default behavior of relative queries to always request fresh data from the prometheus instance, instead query results will be cached, and only new records are requested. Turn this on to decrease database and network load."),interactive:!0,className:Le.switchField,disabled:J.readOnly},n.createElement(m.d,{value:J.jsonData.incrementalQuerying??!1,onChange:(0,Z.EX)(Ee,"incrementalQuerying"),id:f.Tp.components.DataSource.Prometheus.configPage.incrementalQuerying})))),n.createElement("div",{className:"gf-form-inline"},J.jsonData.incrementalQuerying&&n.createElement(p.I,{label:"Query overlap window",labelWidth:je,tooltip:n.createElement(n.Fragment,null,"Set a duration like 10m or 120s or 0s. Default of 10 minutes. This duration will be added to the duration of each incremental request."),interactive:!0,disabled:J.readOnly},n.createElement(n.Fragment,null,n.createElement(E.p,{onBlur:We=>Ve({..._e,incrementalQueryOverlapWindow:We.currentTarget.value}),className:"width-20",value:J.jsonData.incrementalQueryOverlapWindow??re.Dr,onChange:st("incrementalQueryOverlapWindow",J,oe),spellCheck:!1,"data-testid":f.Tp.components.DataSource.Prometheus.configPage.queryOverlapWindow}),Oe(_e.incrementalQueryOverlapWindow,me,he)))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form max-width-30"},n.createElement(p.I,{label:"Disable recording rules (beta)",labelWidth:je,tooltip:n.createElement(n.Fragment,null,"This feature will disable recording rules. Turn this on to improve dashboard performance"),interactive:!0,className:Le.switchField,disabled:J.readOnly},n.createElement(m.d,{value:J.jsonData.disableRecordingRules??!1,onChange:(0,Z.EX)(Ee,"disableRecordingRules"),id:f.Tp.components.DataSource.Prometheus.configPage.disableRecordingRules})))))),n.createElement(c.I,{title:"Other",className:Le.container},n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form max-width-30"},n.createElement(p.I,{label:"Custom query parameters",labelWidth:je,tooltip:n.createElement(n.Fragment,null,"Add custom parameters to the Prometheus query URL. For example timeout, partial_response, dedup, or max_source_resolution. Multiple parameters should be concatenated together with an \u2018&\u2019. ",Ge()),interactive:!0,disabled:J.readOnly},n.createElement(E.p,{className:"width-20",value:J.jsonData.customQueryParameters,onChange:st("customQueryParameters",J,oe),spellCheck:!1,placeholder:"Example: max_source_resolution=5m&timeout=10","data-testid":f.Tp.components.DataSource.Prometheus.configPage.customQueryParameters})))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(p.I,{labelWidth:je,tooltip:n.createElement(n.Fragment,null,"You can use either POST or GET HTTP method to query your Prometheus data source. POST is the recommended method as it allows bigger queries. Change this to GET if you have a Prometheus version older than 2.1 or if POST requests are restricted in your network. ",Ge()),interactive:!0,label:"HTTP method",disabled:J.readOnly},n.createElement(R.l6,{width:40,"aria-label":"Select HTTP method",options:pe,value:pe.find(We=>We.value===J.jsonData.httpMethod),onChange:st("httpMethod",J,oe),"data-testid":f.Tp.components.DataSource.Prometheus.configPage.httpMethod})))))),n.createElement(ve,{options:J.jsonData.exemplarTraceIdDestinations,onChange:We=>(0,Z.lO)({onOptionsChange:oe,options:J},"exemplarTraceIdDestinations",We),disabled:J.readOnly}))},Ze=Ee=>Ee?"currentTarget"in Ee?Ee.currentTarget.value:Ee.value:"",st=(Ee,J,oe)=>ue=>{oe({...J,jsonData:{...J.jsonData,[Ee]:Ze(ue)}})};var Qe=e(79924);const ke=({config:Ee,onChange:J,className:oe})=>{const ue=_e=>{J({...Ee,jsonData:{...Ee.jsonData,keepCookies:_e}})},be=_e=>{J({...Ee,jsonData:{...Ee.jsonData,timeout:parseInt(_e.currentTarget.value,10)}})},Le={container:(0,t.css)({maxWidth:578})};return n.createElement(n.Fragment,null,n.createElement(c.I,{title:"Advanced HTTP settings",className:(0,t.cx)(Le.container,oe)},n.createElement(p.I,{htmlFor:"advanced-http-cookies",label:"Allowed cookies",labelWidth:je,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source.",disabled:Ee.readOnly,grow:!0},n.createElement(Qe.u,{className:"width-20",id:"advanced-http-cookies",placeholder:"New cookie (hit enter to add)",tags:Ee.jsonData.keepCookies,onChange:ue})),n.createElement(p.I,{htmlFor:"advanced-http-timeout",label:"Timeout",labelWidth:je,tooltip:"HTTP request timeout in seconds",disabled:Ee.readOnly,grow:!0},n.createElement(E.p,{className:"width-20",id:"advanced-http-timeout",type:"number",min:0,placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:Ee.jsonData.timeout,onChange:be}))))},je=30,He=Ee=>{const{options:J,onOptionsChange:oe}=Ee,ue=l.$W.featureToggles.prometheusConfigOverhaulAuth,be=(0,n.useRef)(Ee.options.access==="direct"),Le={azureAuthSupported:l.$W.azureAuthEnabled,getAzureAuthEnabled:We=>I(We),setAzureAuthEnabled:(We,$e)=>$e?C(We):L(We),azureSettingsUI:N},_e=(0,g.$j)(),Ve=Ke(_e);return n.createElement(n.Fragment,null,J.access==="direct"&&n.createElement(u.F,{title:"Error",severity:"error"},"Browser access mode in the Prometheus data source is no longer available. Switch to server access mode."),ue?n.createElement(n.Fragment,null,n.createElement(s.I,{dataSourceName:"Prometheus",docsLink:"https://grafana.com/docs/grafana/latest/datasources/prometheus/configure-prometheus-data-source/"}),n.createElement("hr",{className:`${Ve.hrTopSpace} ${Ve.hrBottomSpace}`}),n.createElement(Q,{options:J,onOptionsChange:oe,azureAuthSettings:Le,sigV4AuthToggleEnabled:l.$W.sigV4AuthEnabled,renderSigV4Editor:n.createElement(o._r,{inExperimentalAuthComponent:!0,...Ee}),secureSocksDSProxyEnabled:l.$W.secureSocksDSProxyEnabled})):n.createElement(d.t,{defaultUrl:"http://localhost:9090",dataSourceConfig:J,showAccessOptions:be.current,onChange:oe,sigV4AuthToggleEnabled:l.$W.sigV4AuthEnabled,azureAuthSettings:Le,renderSigV4Editor:n.createElement(o._r,{...Ee}),secureSocksDSProxyEnabled:l.$W.secureSocksDSProxyEnabled,urlLabel:"Prometheus server URL",urlDocs:Ge()}),ue?n.createElement(n.Fragment,null,n.createElement("hr",null),n.createElement(r.A,{className:Ve.advancedSettings,title:"Advanced settings",description:"Additional settings are optional settings that can be configured for more control over your data source."},n.createElement(ke,{className:Ve.advancedHTTPSettingsMargin,config:J,onChange:oe}),n.createElement(a,{options:J,onOptionsChange:oe}),n.createElement(Ne,{options:J,onOptionsChange:oe}))):n.createElement(n.Fragment,null,n.createElement("hr",{className:Ve.hrTopSpace}),n.createElement("h3",{className:Ve.sectionHeaderPadding},"Additional settings"),n.createElement("p",{className:`${Ve.secondaryGrey} ${Ve.subsectionText}`},"Additional settings are optional settings that can be configured for more control over your data source."),n.createElement(a,{options:J,onOptionsChange:oe}),n.createElement(Ne,{options:J,onOptionsChange:oe})))};function Ge(Ee){const J="https://grafana.com/docs/grafana/latest/datasources/prometheus/#configure-the-data-source";return n.createElement("a",{href:Ee||J,target:"_blank",rel:"noopener noreferrer"},"Visit docs for more details here.")}const Oe=(Ee,J,oe)=>{const ue="Value is not valid";return Ee&&!Ee.match(J)?n.createElement(i.P,null,oe||ue):!0};function Ke(Ee){return{additionalSettings:(0,t.css)`
      margin-bottom: 25px;
    `,secondaryGrey:(0,t.css)`
      color: ${Ee.colors.secondary.text};
      opacity: 65%;
    `,inlineError:(0,t.css)`
      margin: 0px 0px 4px 245px;
    `,switchField:(0,t.css)`
      align-items: center;
    `,sectionHeaderPadding:(0,t.css)`
      padding-top: 32px;
    `,sectionBottomPadding:(0,t.css)`
      padding-bottom: 28px;
    `,subsectionText:(0,t.css)`
      font-size: 12px;
    `,hrBottomSpace:(0,t.css)`
      margin-bottom: 56px;
    `,hrTopSpace:(0,t.css)`
      margin-top: 50px;
    `,textUnderline:(0,t.css)`
      text-decoration: underline;
    `,versionMargin:(0,t.css)`
      margin-bottom: 12px;
    `,advancedHTTPSettingsMargin:(0,t.css)`
      margin: 24px 0 8px 0;
    `,advancedSettings:(0,t.css)`
      padding-top: 32px;
    `,alertingTop:(0,t.css)`
      margin-top: 40px !important;
    `,overhaulPageHeading:(0,t.css)`
      font-weight: 400;
    `,container:(0,t.css)`
      maxwidth: 578;
    `}}},87066:(Y,A,e)=>{"use strict";e.d(A,{gs:()=>Ze,UD:()=>st});var t=e(2543),n=e(13288),o=e(75505),s=e(81160),r=e(59099),g=e(97716),u=e.n(g),d=e(65879),i=e(43659),l=e(43127),f=e(47232),c=e(41987),h=e(26657),p=e(72574),m=e(47773),a=e(17172),v=e(87324),E=e(96540),D=e(13544),b=e(71087),P=e(9e4),y=e(81580),T=e(79458),M=e(51440),I=e(68402),x=e(10354),S=e(63492);function O(Ge){const Oe=Ge.annotation,Ke=Ge.onAnnotationChange,Ee={expr:Oe.expr,refId:Oe.name,interval:Oe.step};return E.createElement(E.Fragment,null,E.createElement(b.D,null,E.createElement(S.$,{...Ge,query:Ee,showExplain:!1,onChange:J=>{Ke({...Oe,expr:J.expr})}}),E.createElement(P.U,null,E.createElement(y.c,{label:"Min step",tooltip:E.createElement(E.Fragment,null,"An additional lower limit for the step parameter of the Prometheus query and for the"," ",E.createElement("code",null,"$__interval")," and ",E.createElement("code",null,"$__rate_interval")," variables.")},E.createElement(M.D,{type:"text","aria-label":"Set lower limit for the step parameter",placeholder:"auto",minWidth:10,onCommitChange:J=>{Ke({...Oe,step:J.currentTarget.value})},defaultValue:Ee.interval,id:D.Tp.components.DataSource.Prometheus.annotations.minStep})))),E.createElement(I.$,{v:.5}),E.createElement(P.U,null,E.createElement(y.c,{label:"Title",tooltip:"Use either the name or a pattern. For example, {{instance}} is replaced with label value for the label instance."},E.createElement(x.p,{type:"text",placeholder:"{{alertname}}",value:Oe.titleFormat,onChange:J=>{Ke({...Oe,titleFormat:J.currentTarget.value})},"data-testid":D.Tp.components.DataSource.Prometheus.annotations.title})),E.createElement(y.c,{label:"Tags"},E.createElement(x.p,{type:"text",placeholder:"label1,label2",value:Oe.tagKeys,onChange:J=>{Ke({...Oe,tagKeys:J.currentTarget.value})},"data-testid":D.Tp.components.DataSource.Prometheus.annotations.tags})),E.createElement(y.c,{label:"Text",tooltip:"Use either the name or a pattern. For example, {{instance}} is replaced with label value for the label instance."},E.createElement(x.p,{type:"text",placeholder:"{{instance}}",value:Oe.textFormat,onChange:J=>{Ke({...Oe,textFormat:J.currentTarget.value})},"data-testid":D.Tp.components.DataSource.Prometheus.annotations.text})),E.createElement(y.c,{label:"Series value as timestamp",tooltip:"The unit of timestamp is milliseconds. If the unit of the series value is seconds, multiply its range vector by 1000."},E.createElement(T.C,{value:Oe.useValueForTime,onChange:J=>{Ke({...Oe,useValueForTime:J.currentTarget.value})},"data-testid":D.Tp.components.DataSource.Prometheus.annotations.seriesValueAsTimestamp}))))}var C=e(32799),L=e(45889),U=e(47891),R=e(65405),B=e(69120);const H=/^label_names\(\)\s*$/,W=/^label_values\((?:(.+),\s*)?([a-zA-Z_$][a-zA-Z0-9_]*)\)\s*$/,N=/^metrics\((.+)\)\s*$/,V=/^query_result\((.+)\)\s*$/,G=/^label_names\((.+)\)\s*$/;function _(Ge){if(typeof Ge!="string")return Ge;const Oe={refId:"PrometheusDatasource-VariableQuery",qryType:B.B4.LabelNames},Ke=Ge.match(G);if(Ke)return{...Oe,qryType:B.B4.LabelNames,match:Ke[1]};const Ee=Ge.match(H);if(Ee)return{...Oe,qryType:B.B4.LabelNames};const J=Ge.match(/^label_values\(/);if(J){const be=Ge.match(W),Le=be?be[2]:"",_e=be?be[1]:"";if(_e){const Ve=(0,R.u)(_e);return{...Oe,qryType:B.B4.LabelValues,label:Le,metric:Ve.query.metric,labelFilters:Ve.query.labels}}else return{...Oe,qryType:B.B4.LabelValues,label:Le}}const oe=Ge.match(/^metrics\(/);if(oe){const be=Ge.match(N),Le=be?be[1]:"";return{...Oe,qryType:B.B4.MetricNames,metric:Le}}const ue=Ge.match(/^query_result\(/);if(ue){const be=Ge.match(V),Le=be?be[1]:"";return{...Oe,qryType:B.B4.VarQueryResult,varQuery:Le}}return!Ee&&!J&&!oe&&!ue?{...Oe,qryType:B.B4.SeriesQuery,seriesQuery:Ge}:Oe}function K(Ge){switch(Ge.qryType){case B.B4.LabelNames:return Ge.match?`label_names(${Ge.match})`:"label_names()";case B.B4.LabelValues:if(Ge.metric||Ge.labelFilters&&Ge.labelFilters.length!==0){const Ke={metric:Ge.metric,labels:Ge.labelFilters??[],operations:[]};return`label_values(${U.z.renderQuery(Ke)},${Ge.label})`}else return`label_values(${Ge.label})`;case B.B4.MetricNames:return`metrics(${Ge.metric})`;case B.B4.VarQueryResult:return`query_result(${j(Ge.varQuery)})`;case B.B4.SeriesQuery:return Ge.seriesQuery??"";case B.B4.ClassicQuery:return Ge.classicQuery??""}return""}function j(Ge){return Ge?Ge.replace(/[\r\n]+/gm,""):""}class k{constructor(Oe,Ke){this.datasource=Oe,this.query=Ke,this.datasource=Oe,this.query=Ke,this.range=(0,l.E2)()}process(Oe){this.range=Oe;const Ke=H,Ee=G,J=/^label_values\((?:(.+),\s*)?([a-zA-Z_][a-zA-Z0-9_]*)\)\s*$/,oe=N,ue=V,be=this.query.match(Ke),Le=this.query.match(Ee);if(Le){const it=`{__name__=~".*${Le[1]}.*"}`;return this.datasource.languageProvider.getSeriesLabels(it,[]).then(at=>at.map(ht=>({text:ht})))}if(be)return this.datasource.getTagKeys({filters:[],timeRange:Oe});const _e=this.query.match(J);if(_e){const it=_e[1],at=_e[2];return Q(it)?this.labelValuesQuery(at,it):this.labelValuesQuery(at)}const Ve=this.query.match(oe);if(Ve)return this.metricNameQuery(Ve[1]);const We=this.query.match(ue);return We?this.queryResultQuery(We[1]):["label_values()","metrics()","query_result()"].includes(this.query)?Promise.resolve([]):this.metricNameAndLabelsQuery(this.query)}labelValuesQuery(Oe,Ke){const Ee=(0,L.mv)(this.range.from,!1),J=(0,L.mv)(this.range.to,!0),oe={...Ke&&{"match[]":Ke},start:Ee.toString(),end:J.toString()};if(!Ke||this.datasource.hasLabelsMatchAPISupport()){const ue=`/api/v1/label/${Oe}/values`;return this.datasource.metadataRequest(ue,oe).then(be=>(0,t.map)(be.data.data,Le=>({text:Le})))}else{const ue="/api/v1/series";return this.datasource.metadataRequest(ue,oe).then(be=>{const Le=(0,t.map)(be.data.data,_e=>_e[Oe]||"").filter(_e=>_e!=="");return(0,t.uniq)(Le).map(_e=>({text:_e,expandable:!0}))})}}metricNameQuery(Oe){const Ke=(0,L.mv)(this.range.from,!1),Ee=(0,L.mv)(this.range.to,!0),J={start:Ke.toString(),end:Ee.toString()},oe="/api/v1/label/__name__/values";return this.datasource.metadataRequest(oe,J).then(ue=>(0,t.chain)(ue.data.data).filter(be=>new RegExp(Oe).test(be)).map(be=>({text:be,expandable:!0})).value())}queryResultQuery(Oe){const Ke="/api/v1/query",Ee={query:Oe,time:(0,L.mv)(this.range.to,!0).toString()};return this.datasource.metadataRequest(Ke,Ee).then(J=>{switch(J.data.data.resultType){case"scalar":case"string":return[{text:J.data.data.result[1]||"",expandable:!1}];case"vector":return(0,t.map)(J.data.data.result,oe=>{let ue=oe.metric.__name__||"";return delete oe.metric.__name__,ue+="{"+(0,t.map)(oe.metric,(be,Le)=>Le+'="'+be+'"').join(",")+"}",ue+=" "+oe.value[1]+" "+oe.value[0]*1e3,{text:ue,expandable:!0}});default:throw Error(`Unknown/Unhandled result type: [${J.data.data.resultType}]`)}})}metricNameAndLabelsQuery(Oe){const Ke=(0,L.mv)(this.range.from,!1),Ee=(0,L.mv)(this.range.to,!0),J={"match[]":Oe,start:Ke.toString(),end:Ee.toString()},oe="/api/v1/series",ue=this;return this.datasource.metadataRequest(oe,J).then(be=>(0,t.map)(be.data.data,Le=>({text:ue.datasource.getOriginalMetricName(Le),expandable:!0})))}}function Q(Ge){return Ge&&Ge.split(" ").join("")!=="{}"}const ee=20;function ae(Ge,Oe,Ke){const Ee=[];if(Ge.trim().match(/^\w+_bucket$|^\w+_bucket{.*}$/)){const oe="Selected metric has buckets.";Ee.push({type:"HISTOGRAM_QUANTILE",label:oe,fix:{label:"Consider calculating aggregated quantile by adding histogram_quantile().",action:{type:"ADD_HISTOGRAM_QUANTILE",query:Ge}}})}if(Ge.indexOf("rate(")===-1&&Ge.indexOf("increase(")===-1){const oe=Ge.match(new RegExp("\\b((?<!:)\\w+_(total|sum|count)(?!:))\\b"));let ue=oe?oe[1]:"";const be=Ke?.languageProvider?.metricsMetadata;let Le=!1;if(be&&(ue=Array.from(Ge.matchAll(/\$?[a-zA-Z_:][a-zA-Z0-9_:]*/g)).map(([Ve])=>Ve).filter(Ve=>!Ve.startsWith("$")).flatMap(Ve=>Ve.split(":")).find(Ve=>{const We=be[Ve];return We&&We.type.toLowerCase()==="counter"?(Le=!0,!0):!1})??""),ue){const _e=Ge.trim().match(/^\w+$|^\w+{.*}$/);let We=`Selected metric ${Le?"is":"looks like"} a counter.`,$e;_e?$e={label:"Consider calculating rate of counter by adding rate().",action:{type:"ADD_RATE",query:Ge}}:We=`${We} Consider calculating rate of counter by adding rate().`,Ee.push({type:"APPLY_RATE",label:We,fix:$e})}}if(Ke&&Ke.ruleMappings){const oe=Ke.ruleMappings,ue=Object.keys(oe).reduce((be,Le)=>Ge.search(Le)>-1?{...be,[Le]:oe[Le]}:be,{});if((0,t.size)(ue)>0){const be="Query contains recording rules.";Ee.push({type:"EXPAND_RULES",label:be,fix:{label:"Expand rules",action:{type:"EXPAND_RULES",query:Ge,options:ue}}})}}return Oe&&Oe.length>=ee&&Ge.trim().match(/^\w+$/)&&Ee.push({type:"ADD_SUM",label:"Many time series results returned.",fix:{label:"Consider aggregating with sum().",action:{type:"ADD_SUM",query:Ge,preventSubmit:!0}}}),Ee}function Z(Ge){const Oe=[];return Ge.lookupsDisabled&&Oe.push({label:"Labels and metrics lookup was disabled in data source settings.",type:"INFO"}),Oe}var ne=e(30915),q=e(39132),te=e(14110),re=e(32264);function de(Ge,Oe,Ke){const{app:Ee,targets:J}=Oe;if(!(Ee===c.Jk.Dashboard||Ee===c.Jk.PanelViewer))for(const oe of J)(0,te.rR)("grafana_prometheus_query_executed",{app:Ee,grafana_version:re.$.buildInfo.version,has_data:Ge.data.some(ue=>ue.length>0),has_error:Ge.error!==void 0,expr:oe.expr,format:oe.format,instant:oe.instant,range:oe.range,exemplar:oe.exemplar,hinting:oe.hinting,interval:oe.interval,intervalFactor:oe.intervalFactor,utcOffsetSec:oe.utcOffsetSec,legend:oe.legendFormat,valueWithRefId:oe.valueWithRefId,requestId:Oe.requestId,showingGraph:oe.showingGraph,showingTable:oe.showingTable,editor_mode:oe.editorMode,simultaneously_sent_query_count:J.length,time_range_from:Oe?.range?.from?.toISOString(),time_range_to:Oe?.range?.to?.toISOString(),time_taken:Date.now()-Ke.getTime()})}var ie=e(62467),ge=e(65474),ve=e(29505),ye=e(39268),pe=e(14186),le=e(88323),Me=e(21744),De=e(46777);const Re=[{label:"Label names",value:B.B4.LabelNames},{label:"Label values",value:B.B4.LabelValues},{label:"Metrics",value:B.B4.MetricNames},{label:"Query result",value:B.B4.VarQueryResult},{label:"Series query",value:B.B4.SeriesQuery},{label:"Classic query",value:B.B4.ClassicQuery}],me="PrometheusVariableQueryEditor-VariableQuery",he=({onChange:Ge,query:Oe,datasource:Ke,range:Ee})=>{const[J,oe]=(0,E.useState)(void 0),[ue,be]=(0,E.useState)(""),[Le,_e]=(0,E.useState)(""),[Ve,We]=(0,E.useState)(""),[$e,it]=(0,E.useState)(""),[at,ht]=(0,E.useState)(""),[ft,gt]=(0,E.useState)(""),[Dt,It]=(0,E.useState)([]),[jt,Vt]=(0,E.useState)([]);(0,E.useEffect)(()=>{Ke.languageProvider.start(Ee)},[]),(0,E.useEffect)(()=>{if(Oe)if(Oe.qryType===B.B4.ClassicQuery)oe(Oe.qryType),gt(Oe.query??"");else{const en=Te(Oe);_e(en.match??""),oe(en.qryType),be(en.label??""),We(en.metric??""),Vt(en.labelFilters??[]),it(en.varQuery??""),ht(en.seriesQuery??""),gt(en.classicQuery??"")}},[Oe]),(0,E.useEffect)(()=>{if(J!==B.B4.LabelValues)return;const en=Ke.getVariables().map(mn=>({label:mn,value:mn}));if(!Ve)Ke.getTagKeys({filters:[]}).then(mn=>{const Un=mn.map(({text:fn})=>({label:fn,value:fn}));It([...en,...Un])});else{const mn=[{label:"__name__",op:"=",value:Ve}],Un=U.z.renderLabels(mn);Ke.languageProvider.fetchLabelsWithMatch(Un).then(fn=>{const Lt=Object.keys(fn).map(qt=>({label:qt,value:qt}));It([...en,...Lt])})}},[Ke,J,Ve]);const _t=(en,mn)=>{const ca={...{qryType:J,label:ue,metric:Ve,match:Le,varQuery:$e,seriesQuery:at,classicQuery:ft,refId:"PrometheusVariableQueryEditor-VariableQuery"},...en,...mn?{labelFilters:mn}:{labelFilters:jt}},Lt=K(ca);Ge({query:Lt,qryType:ca.qryType,refId:me})},rt=en=>{oe(en.value),en.value!==B.B4.SeriesQuery&&_t({qryType:en.value??0})},St=en=>{const mn=en&&en.value?en.value:"";be(mn),J===B.B4.LabelValues&&mn&&_t({label:mn})},pn=en=>{We(en.metric),Vt(en.labels);const mn=en.metric,Un=en.labels??[];J===B.B4.LabelValues&&ue&&(mn||Un)&&_t({qryType:J,metric:mn},Un)},ct=en=>{J===B.B4.LabelNames&&_t({qryType:J,match:en})},Ct=en=>{J===B.B4.MetricNames&&en&&_t({metric:en})},Yt=en=>{it(en.currentTarget.value)},cn=en=>{ht(en.currentTarget.value)},vn=en=>{gt(en.currentTarget.value)},rn=(0,E.useCallback)(()=>({metric:Ve,labels:jt,operations:[]}),[Ve,jt]);return E.createElement(E.Fragment,null,E.createElement(ye.C,null,E.createElement(pe.I,{label:"Query type",labelWidth:20,tooltip:E.createElement("div",null,"The Prometheus data source plugin provides the following query types for template variables.")},E.createElement(le.l6,{placeholder:"Select query type","aria-label":"Query type",onChange:rt,value:J,options:Re,width:25,"data-testid":D.Tp.components.DataSource.Prometheus.variableQueryEditor.queryType}))),J===B.B4.LabelValues&&E.createElement(E.Fragment,null,E.createElement(ye.C,null,E.createElement(pe.I,{label:"Label",labelWidth:20,required:!0,"aria-labelledby":"label-select",tooltip:E.createElement("div",null,"Returns a list of label values for the label name in all metrics unless the metric is specified.")},E.createElement(le.l6,{"aria-label":"label-select",onChange:St,value:ue,options:Dt,width:25,allowCustomValue:!0,isClearable:!0,"data-testid":D.Tp.components.DataSource.Prometheus.variableQueryEditor.labelValues.labelSelect}))),E.createElement(De.I,{query:rn(),datasource:Ke,onChange:pn,variableEditor:!0})),J===B.B4.LabelNames&&E.createElement(ye.C,null,E.createElement(pe.I,{label:"Metric regex",labelWidth:20,"aria-labelledby":"Metric regex",tooltip:E.createElement("div",null,"Returns a list of label names, optionally filtering by specified metric regex.")},E.createElement(x.p,{type:"text","aria-label":"Metric regex",placeholder:"Metric regex",value:Le,onBlur:en=>{_e(en.currentTarget.value),ct(en.currentTarget.value)},onChange:en=>{_e(en.currentTarget.value)},width:25,"data-testid":D.Tp.components.DataSource.Prometheus.variableQueryEditor.labelnames.metricRegex}))),J===B.B4.MetricNames&&E.createElement(ye.C,null,E.createElement(pe.I,{label:"Metric regex",labelWidth:20,"aria-labelledby":"Metric selector",tooltip:E.createElement("div",null,"Returns a list of metrics matching the specified metric regex.")},E.createElement(x.p,{type:"text","aria-label":"Metric selector",placeholder:"Metric regex",value:Ve,onChange:en=>{We(en.currentTarget.value)},onBlur:en=>{We(en.currentTarget.value),Ct(en.currentTarget.value)},width:25,"data-testid":D.Tp.components.DataSource.Prometheus.variableQueryEditor.metricNames.metricRegex}))),J===B.B4.VarQueryResult&&E.createElement(ye.C,null,E.createElement(pe.I,{label:"Query",labelWidth:20,tooltip:E.createElement("div",null,"Returns a list of Prometheus query results for the query. This can include Prometheus functions, i.e. sum(go_goroutines).")},E.createElement(Me.f,{type:"text","aria-label":"Prometheus Query",placeholder:"Prometheus Query",value:$e,onChange:Yt,onBlur:()=>{J===B.B4.VarQueryResult&&$e&&_t({qryType:J})},cols:100,"data-testid":D.Tp.components.DataSource.Prometheus.variableQueryEditor.varQueryResult}))),J===B.B4.SeriesQuery&&E.createElement(ye.C,null,E.createElement(pe.I,{label:"Series Query",labelWidth:20,tooltip:E.createElement("div",null,'Enter enter a metric with labels, only a metric or only labels, i.e. go_goroutines{instance="localhost:9090"}, go_goroutines, or {instance="localhost:9090"}. Returns a list of time series associated with the entered data.')},E.createElement(x.p,{type:"text","aria-label":"Series Query",placeholder:"Series Query",value:at,onChange:cn,onBlur:()=>{J===B.B4.SeriesQuery&&at&&_t({qryType:J})},width:100,"data-testid":D.Tp.components.DataSource.Prometheus.variableQueryEditor.seriesQuery}))),J===B.B4.ClassicQuery&&E.createElement(ye.C,null,E.createElement(pe.I,{label:"Classic Query",labelWidth:20,tooltip:E.createElement("div",null,"The original implemetation of the Prometheus variable query editor. Enter a string with the correct query type and parameters as described in these docs. For example, label_values(label, metric).")},E.createElement(x.p,{type:"text","aria-label":"Classic Query",placeholder:"Classic Query",value:ft,onChange:vn,onBlur:()=>{J===B.B4.ClassicQuery&&ft&&_t({qryType:J})},width:100,"data-testid":D.Tp.components.DataSource.Prometheus.variableQueryEditor.classicQuery}))))};function Te(Ge){return typeof Ge=="string"?_(Ge):Ge.query?_(Ge.query):Ge}class Be extends ve.f5{constructor(Oe,Ke=(0,p.w)()){super(),this.datasource=Oe,this.templateSrv=Ke,this.editor=he}query(Oe){let Ke;if(typeof Oe.targets[0]=="string"?Ke=Oe.targets[0]:Ke=Oe.targets[0].query,!Ke)return(0,ie.of)({data:[]});const Ee={...Oe.scopedVars,__interval:{text:this.datasource.interval,value:this.datasource.interval},__interval_ms:{text:d.intervalToMs(this.datasource.interval),value:d.intervalToMs(this.datasource.interval)},...this.datasource.getRangeScopedVars(Oe.range)},J=this.templateSrv.replace(Ke,Ee,this.datasource.interpolateQueryExpr),oe=new k(this.datasource,J);return(0,ge.H)(oe.process(Oe.range)).pipe((0,s.T)(be=>({data:be})))}}const we="60s",Ne=["api/v1/query","api/v1/query_range","api/v1/series","api/v1/labels"],Ze="-Instant";class st extends h.iy{constructor(Oe,Ke=(0,p.w)(),Ee){super(Oe),this.templateSrv=Ke,this.init=async()=>{this.disableRecordingRules||this.loadRules(),this.exemplarsAvailable=await this.areExemplarsAvailable()},this.processAnnotationResponse=(J,oe)=>{const ue=(0,m.bE)({data:oe}).data;if(!ue||!ue.length)return[];const be=J.annotation,{tagKeys:Le="",titleFormat:_e="",textFormat:Ve=""}=be,We=d.intervalToSeconds(be.step||we)*1e3,$e=Le.split(","),it=[];for(const at of ue){if(at.fields.length===0)continue;const ht=at.fields[0],ft=at.fields[1],gt=ft?.labels||{},Dt=Object.keys(gt).filter(St=>$e.includes(St)).map(St=>gt[St]),It=[];let jt=0;ft.values.forEach(St=>{let pn,ct;const Ct=ht.values[jt];J.annotation.useValueForTime?(pn=Math.floor(parseFloat(St)),ct=1):(pn=Math.floor(parseFloat(Ct)),ct=parseFloat(St)),jt++,It.push([pn,ct])});const _t=It.filter(St=>St[1]>0).map(St=>St[0]);let rt=null;for(const St of _t){if(rt&&(rt.timeEnd??0)+We>=St){rt.timeEnd=St;continue}rt&&it.push(rt),rt={time:St,timeEnd:St,annotation:be,title:(0,i.j)(_e,gt),tags:Dt,text:(0,i.j)(Ve,gt)}}rt&&(rt.timeEnd=_t[_t.length-1],it.push(rt))}return it},this.type="prometheus",this.id=Oe.id,this.url=Oe.url,this.access=Oe.access,this.basicAuth=Oe.basicAuth,this.withCredentials=Oe.withCredentials,this.interval=Oe.jsonData.timeInterval||"15s",this.queryTimeout=Oe.jsonData.queryTimeout,this.httpMethod=Oe.jsonData.httpMethod||"GET",this.exemplarTraceIdDestinations=Oe.jsonData.exemplarTraceIdDestinations,this.hasIncrementalQuery=Oe.jsonData.incrementalQuerying??!1,this.ruleMappings={},this.languageProvider=Ee??new C.Ay(this),this.lookupsDisabled=Oe.jsonData.disableMetricsLookup??!1,this.customQueryParameters=new URLSearchParams(Oe.jsonData.customQueryParameters),this.datasourceConfigurationPrometheusFlavor=Oe.jsonData.prometheusType,this.datasourceConfigurationPrometheusVersion=Oe.jsonData.prometheusVersion,this.defaultEditor=Oe.jsonData.defaultEditor,this.disableRecordingRules=Oe.jsonData.disableRecordingRules??!1,this.variables=new Be(this,this.templateSrv),this.exemplarsAvailable=!0,this.cacheLevel=Oe.jsonData.cacheLevel??B.fD.Low,this.cache=new ne.$i({getTargetSignature:this.getPrometheusTargetSignature.bind(this),overlapString:Oe.jsonData.incrementalQueryOverlapWindow??ne.Dr,profileFunction:this.getPrometheusProfileData.bind(this)}),this.annotations={QueryEditor:O}}getQueryDisplayText(Oe){return Oe.expr}getPrometheusProfileData(Oe,Ke){return{interval:Ke.interval??Oe.interval,expr:this.interpolateString(Ke.expr),datasource:"Prometheus"}}getPrometheusTargetSignature(Oe,Ke){return`${this.interpolateString(Ke.expr)}|${Ke.interval??Oe.interval}|${JSON.stringify(Oe.rangeRaw??"")}|${Ke.exemplar}`}hasLabelsMatchAPISupport(){return this._isDatasourceVersionGreaterOrEqualTo("2.24.0",B.N1.Prometheus)||this._isDatasourceVersionGreaterOrEqualTo("2.0.0",B.N1.Mimir)||this._isDatasourceVersionGreaterOrEqualTo("1.11.0",B.N1.Cortex)||this._isDatasourceVersionGreaterOrEqualTo("0.18.0",B.N1.Thanos)}_isDatasourceVersionGreaterOrEqualTo(Oe,Ke){return!this.datasourceConfigurationPrometheusVersion||!this.datasourceConfigurationPrometheusFlavor||Ke!==this.datasourceConfigurationPrometheusFlavor?!1:u().gte(this.datasourceConfigurationPrometheusVersion,Oe)}_addTracingHeaders(Oe,Ke){Oe.headers={},this.access==="proxy"&&(Oe.headers["X-Dashboard-UID"]=Ke.dashboardUID,Oe.headers["X-Panel-Id"]=Ke.panelId)}directAccessError(){return(0,n.$)(()=>new Error("Browser access mode in the Prometheus datasource is no longer available. Switch to server access mode."))}_request(Oe,Ke,Ee={}){if(this.access==="direct")return this.directAccessError();Ke=Ke||{};for(const[ue,be]of this.customQueryParameters)Ke[ue]==null&&(Ke[ue]=be);let J=this.url+Oe;Oe.startsWith(`/api/datasources/uid/${this.uid}`)&&(J=Oe);const oe=(0,t.defaults)(Ee,{url:J,method:this.httpMethod,headers:{}});return oe.method==="GET"?Ke&&Object.keys(Ke).length&&(oe.url=oe.url+(oe.url.search(/\?/)>=0?"&":"?")+Object.entries(Ke).map(([ue,be])=>`${encodeURIComponent(ue)}=${encodeURIComponent(be)}`).join("&")):(oe.headers["Content-Type"]="application/x-www-form-urlencoded",oe.data=Ke),(this.basicAuth||this.withCredentials)&&(oe.withCredentials=!0),this.basicAuth&&(oe.headers.Authorization=this.basicAuth),(0,a.AI)().fetch(oe)}async importFromAbstractQueries(Oe){return Oe.map(Ke=>this.languageProvider.importFromAbstractQuery(Ke))}async exportToAbstractQueries(Oe){return Oe.map(Ke=>this.languageProvider.exportToAbstractQuery(Ke))}async metadataRequest(Oe,Ke={},Ee){if(Ne.some(J=>Oe.includes(J)))try{return await(0,o.s)(this._request(`/api/datasources/uid/${this.uid}/resources${Oe}`,Ke,{method:this.httpMethod,hideFromInspector:!0,showErrorAlert:!1,...Ee}))}catch(J){if(this.httpMethod==="POST"&&(0,a.NF)(J)&&(J.status===405||J.status===400))console.warn("Couldn't use configured POST HTTP method for this request. Trying to use GET method instead.");else throw J}return await(0,o.s)(this._request(`/api/datasources/uid/${this.uid}/resources${Oe}`,Ke,{method:"GET",hideFromInspector:!0,...Ee}))}interpolateQueryExpr(Oe=[],Ke){if(!Ke.multi&&!Ke.includeAll)return je(Oe);if(typeof Oe=="string")return He(Oe);const Ee=Oe.map(J=>He(J));return Ee.length===1?Ee[0]:"("+Ee.join("|")+")"}targetContainsTemplate(Oe){return this.templateSrv.containsTemplate(Oe.expr)}shouldRunExemplarQuery(Oe,Ke){if(Oe.exemplar){const Ee=this.languageProvider.histogramMetrics.find(ue=>Oe.expr.includes(ue)),J=Ke.targets.findIndex(ue=>ue.refId===Oe.refId),oe=Ke.targets.slice(0,J).filter(ue=>!ue.hide);return!!(!Ee||Ee&&!oe.some(ue=>ue.expr.includes(Ee)))}return!1}processTargetV2(Oe,Ke){const Ee=[],J={...Oe,exemplar:this.shouldRunExemplarQuery(Oe,Ke),requestId:Ke.panelId+Oe.refId,utcOffsetSec:Ke.range.to.utcOffset()*60};return Oe.instant&&Oe.range?Ee.push({...J,refId:J.refId,instant:!1},{...J,refId:J.refId+Ze,range:!1}):Ee.push(J),Ee}query(Oe){if(this.access==="direct")return this.directAccessError();let Ke,Ee;const J=Oe.targets.some(be=>be.instant);this.hasIncrementalQuery&&!J?(Ee=this.cache.requestInfo(Oe),Ke=Ee.requests[0]):Ke=Oe;const oe=Ke.targets.map(be=>this.processTargetV2(be,Ke)),ue=new Date;return super.query({...Ke,targets:oe.flat()}).pipe((0,s.T)(be=>{const Le={...be,data:this.cache.procFrames(Oe,Ee,be.data)};return(0,q.J3)(Le,Oe,{exemplarTraceIdDestinations:this.exemplarTraceIdDestinations})}),(0,r.M)(be=>{de(be,Oe,ue)}))}createQuery(Oe,Ke,Ee,J){const oe={hinting:Oe.hinting,instant:Oe.instant,exemplar:Oe.exemplar,step:0,expr:"",refId:Oe.refId,start:0,end:0},ue=Math.ceil(J-Ee);let be=d.intervalToSeconds(Ke.interval);const Le=d.intervalToSeconds(this.templateSrv.replace(Oe.interval||Ke.interval,Ke.scopedVars)),_e=Oe.interval?d.intervalToSeconds(this.templateSrv.replace(Oe.interval,Ke.scopedVars)):d.intervalToSeconds(this.interval),Ve=Oe.intervalFactor||1,We=this.adjustInterval(be,Le,ue,Ve);let $e={...Ke.scopedVars,...this.getRangeScopedVars(Ke.range),...this.getRateIntervalScopedVariable(We,_e)};be!==We&&(be=We,$e=Object.assign({},Ke.scopedVars,{__interval:{text:be+"s",value:be+"s"},__interval_ms:{text:be*1e3,value:be*1e3},...this.getRateIntervalScopedVariable(be,_e),...this.getRangeScopedVars(Ke.range)})),oe.step=be;let it=Oe.expr;it=this.enhanceExprWithAdHocFilters(Ke.filters,it),oe.expr=this.templateSrv.replace(it,$e,this.interpolateQueryExpr);const at=Qe(Ee,J,oe.step,Ke.range.to.utcOffset()*60);return oe.start=at.start,oe.end=at.end,this._addTracingHeaders(oe,Ke),oe}getRateIntervalScopedVariable(Oe,Ke){Ke===0&&(Ke=15);const Ee=Math.max(Oe+Ke,4*Ke);return{__rate_interval:{text:Ee+"s",value:Ee+"s"}}}adjustInterval(Oe,Ke,Ee,J){let oe=Ee/11e3;return oe>1&&(oe=Math.ceil(oe)),Math.max(Oe*J,Ke,oe)}metricFindQuery(Oe,Ke){if(!Oe)return Promise.resolve([]);const Ee={__interval:{text:this.interval,value:this.interval},__interval_ms:{text:d.intervalToMs(this.interval),value:d.intervalToMs(this.interval)},...this.getRangeScopedVars(Ke?.range??(0,l.E2)())},J=this.templateSrv.replace(Oe,Ee,this.interpolateQueryExpr);return new k(this,J).process(Ke?.range??(0,l.E2)())}getRangeScopedVars(Oe){const Ke=Oe.to.diff(Oe.from),Ee=Math.round(Ke/1e3);return{__range_ms:{text:Ke,value:Ke},__range_s:{text:Ee,value:Ee},__range:{text:Ee+"s",value:Ee+"s"}}}async annotationQuery(Oe){if(this.access==="direct"){const ue=new Error("Browser access mode in the Prometheus datasource is no longer available. Switch to server access mode.");return Promise.reject(ue)}const Ke=Oe.annotation,{expr:Ee=""}=Ke;if(!Ee)return Promise.resolve([]);const J=Oe.annotation.step||we,oe={expr:Ee,range:!0,instant:!1,exemplar:!1,interval:J,refId:"X",datasource:this.getRef()};return await(0,o.s)((0,a.AI)().fetch({url:"/api/ds/query",method:"POST",headers:this.getRequestHeaders(),data:{from:((0,L.mv)(Oe.range.from,!1)*1e3).toString(),to:((0,L.mv)(Oe.range.to,!0)*1e3).toString(),queries:[this.applyTemplateVariables(oe,{})]},requestId:`prom-query-${Ke.name}`}).pipe((0,s.T)(ue=>this.processAnnotationResponse(Oe,ue.data))))}async getTagKeys(Oe){if(!Oe||Oe.filters.length===0)return await this.languageProvider.fetchLabels(Oe.timeRange),this.languageProvider.getLabelKeys().map(oe=>({value:oe,text:oe}));const Ke=Oe.filters.map(oe=>({label:oe.key,value:oe.value,op:oe.operator})),Ee=U.z.renderLabels(Ke);let J=await this.languageProvider.fetchLabelsWithMatch(Ee);return Object.keys(J).filter(oe=>!Oe.filters.find(ue=>ue.key===oe)).map(oe=>({value:oe,text:oe}))}async getTagValues(Oe){const Ke=Oe.filters.map(ue=>({label:ue.key,value:ue.value,op:ue.operator})),Ee=U.z.renderLabels(Ke);if(this.hasLabelsMatchAPISupport())return(await this.languageProvider.fetchSeriesValuesWithMatch(Oe.key,Ee,Oe.timeRange)).map(ue=>({value:ue,text:ue}));const J=this.getTimeRangeParams(Oe.timeRange??(0,l.E2)());return(await this.metadataRequest(`/api/v1/label/${Oe.key}/values`,J))?.data?.data?.map(ue=>({text:ue}))??[]}interpolateVariablesInQueries(Oe,Ke,Ee){let J=Oe;return Oe&&Oe.length&&(J=Oe.map(oe=>{const ue=this.templateSrv.replace(oe.expr,Ke,this.interpolateQueryExpr),be=this.enhanceExprWithAdHocFilters(Ee,ue);return{...oe,datasource:this.getRef(),expr:be,interval:this.templateSrv.replace(oe.interval,Ke)}})),J}getQueryHints(Oe,Ke){return ae(Oe.expr??"",Ke,this)}getInitHints(){return Z(this)}async loadRules(){try{const Ke=(await this.metadataRequest("/api/v1/rules",{},{showErrorAlert:!1})).data?.data?.groups;Ke&&(this.ruleMappings=ke(Ke))}catch(Oe){console.log("Rules API is experimental. Ignore next error."),console.error(Oe)}}async areExemplarsAvailable(){try{return(await this.metadataRequest("/api/v1/query_exemplars",{query:"test",start:(0,f.KQ)().subtract(30,"minutes").valueOf().toString(),end:(0,f.KQ)().valueOf().toString()},{showErrorAlert:!1})).data.status==="success"}catch{return!1}}modifyQuery(Oe,Ke){let Ee=Oe.expr??"";switch(Ke.type){case"ADD_FILTER":{const{key:J,value:oe}=Ke.options??{};J&&oe&&(Ee=(0,v.t)(Ee,J,oe));break}case"ADD_FILTER_OUT":{const{key:J,value:oe}=Ke.options??{};J&&oe&&(Ee=(0,v.t)(Ee,J,oe,"!="));break}case"ADD_HISTOGRAM_QUANTILE":{Ee=`histogram_quantile(0.95, sum(rate(${Ee}[$__rate_interval])) by (le))`;break}case"ADD_RATE":{Ee=`rate(${Ee}[$__rate_interval])`;break}case"ADD_SUM":{Ee=`sum(${Ee.trim()}) by ($1)`;break}case"EXPAND_RULES":{Ke.options&&(Ee=(0,L.P_)(Ee,Ke.options));break}default:break}return{...Oe,expr:Ee}}getAdjustedInterval(Oe){return(0,L.Xd)(this.cacheLevel,Oe)}getTimeRangeParams(Oe){return{start:(0,L.mv)(Oe.from,!1).toString(),end:(0,L.mv)(Oe.to,!0).toString()}}getOriginalMetricName(Oe){return(0,q.hF)(Oe)}enhanceExprWithAdHocFilters(Oe,Ke){return!Oe||Oe.length===0?Ke:Oe.reduce((J,oe)=>{const{key:ue,operator:be}=oe;let{value:Le}=oe;return(be==="=~"||be==="!~")&&(Le=je(Le)),(0,v.t)(J,ue,Le,be)},Ke)}filterQuery(Oe){return!(Oe.hide||!Oe.expr)}applyTemplateVariables(Oe,Ke,Ee){const J={...Ke};J.__interval={value:"$__interval"},J.__interval_ms={value:"$__interval_ms"};const oe=this.templateSrv.replace(Oe.expr,J,this.interpolateQueryExpr),ue=this.enhanceExprWithAdHocFilters(Ee,oe);return{...Oe,expr:ue,interval:this.templateSrv.replace(Oe.interval,J),legendFormat:this.templateSrv.replace(Oe.legendFormat,J)}}getVariables(){return this.templateSrv.getVariables().map(Oe=>`$${Oe.name}`)}interpolateString(Oe,Ke){return this.templateSrv.replace(Oe,Ke,this.interpolateQueryExpr)}getDebounceTimeInMilliseconds(){switch(this.cacheLevel){case B.fD.Medium:return 600;case B.fD.High:return 1200;default:return 350}}getDaysToCacheMetadata(){switch(this.cacheLevel){case B.fD.Medium:return 7;case B.fD.High:return 30;default:return 1}}getCacheDurationInMinutes(){return(0,L.u3)(this.cacheLevel)}getDefaultQuery(Oe){const Ke={refId:"A",expr:"",range:!0,instant:!1};return Oe===c.Jk.UnifiedAlerting?{...Ke,instant:!0,range:!1}:Oe===c.Jk.Explore?{...Ke,instant:!0,range:!0}:Ke}}function Qe(Ge,Oe,Ke,Ee){const J=Math.floor((Oe+Ee)/Ke)*Ke-Ee,oe=Math.floor((Ge+Ee)/Ke)*Ke-Ee;return{end:J,start:oe}}function ke(Ge){return Ge.reduce((Oe,Ke)=>Ke.rules.filter(Ee=>Ee.type==="recording").reduce((Ee,J)=>({...Ee,[J.name]:J.query}),Oe),{})}function je(Ge){return typeof Ge=="string"?Ge.replace(/\\/g,"\\\\").replace(/'/g,"\\\\'"):Ge}function He(Ge){return typeof Ge=="string"?Ge.replace(/\\/g,"\\\\\\\\").replace(/[$^*{}\[\]\'+?.()|]/g,"\\\\$&"):Ge}},32799:(Y,A,e)=>{"use strict";e.d(A,{AU:()=>v,Ay:()=>b,OP:()=>h,pK:()=>a,xB:()=>m});var t=e(2543),n=e.n(t),o=e(28848),s=e.n(o),r=e(40187),g=e(43127),u=e(73372),d=e(45889),i=e(69470),l=e(69120);const f=["job","instance"],c="{}",h=1e4,p=y=>({headers:{"X-Grafana-Cache":`private, max-age=${y}`}});function m(y,T){if(!T[y])return;const{type:M,help:I}=T[y];return`${M.toUpperCase()}: ${I}`}function a(y,T){if(T[y])return T[y].help}function v(y,T){if(T[y])return T[y].type}const E=/(="|!="|=~"|!~"|\{|\[|\(|\+|-|\/|\*|%|\^|\band\b|\bor\b|\bunless\b|==|>=|!=|<=|>|<|=|~|,)/,D=86400;class b extends r.Is{constructor(T,M){super(),this.labelKeys=[],this.request=async(I,x,S={},O)=>{try{return(await this.datasource.metadataRequest(I,S,O)).data.data}catch(C){console.error(C)}return x},this.start=async I=>(this.timeRange=I??(0,g.E2)(),this.datasource.lookupsDisabled?[]:(this.metrics=await this.fetchLabelValues("__name__")||[],this.histogramMetrics=(0,d.Rg)(this.metrics).sort(),Promise.all([this.loadMetricsMetadata(),this.fetchLabels()]))),this.fetchLabelValues=async I=>{const x=this.datasource.getAdjustedInterval(this.timeRange),O=`/api/v1/label/${this.datasource.interpolateString(I)}/values`;return await this.request(O,[],x,this.getDefaultCacheHeaders())??[]},this.getSeriesValues=async(I,x)=>this.datasource.hasLabelsMatchAPISupport()?await this.fetchSeriesValuesWithMatch(I,x):(await this.getSeries(x))[I]??[],this.fetchSeriesValuesWithMatch=async(I,x,S=this.timeRange)=>{const O=I?this.datasource.interpolateString(I):null,C=x?this.datasource.interpolateString(x):null,U={...this.datasource.getAdjustedInterval(S),...C&&{"match[]":C}};return await this.request(`/api/v1/label/${O}/values`,[],U,this.getDefaultCacheHeaders())??[]},this.getSeriesLabels=async(I,x)=>{let S,O;this.datasource.hasLabelsMatchAPISupport()?(x.push({name:"__name__",value:"",op:"!="}),O=await this.fetchSeriesLabelsMatch(I),S=Object.keys(O)):(O=await this.getSeries(I),S=Object.keys(O));const C=new Set(x.map(L=>L.name));return S.filter(L=>!C.has(L))},this.fetchLabelsWithMatch=async(I,x)=>this.datasource.hasLabelsMatchAPISupport()?this.fetchSeriesLabelsMatch(I,x):this.fetchSeriesLabels(I,x),this.fetchSeriesLabels=async(I,x)=>{const S=this.datasource.interpolateString(I),C={...this.datasource.getAdjustedInterval(this.timeRange),"match[]":S},L="/api/v1/series",U=await this.request(L,[],C,this.getDefaultCacheHeaders()),{values:R}=(0,d.P7)(U,x);return R},this.fetchSeriesLabelsMatch=async(I,x)=>{const S=this.datasource.interpolateString(I),C={...this.datasource.getAdjustedInterval(this.timeRange),"match[]":S},L="/api/v1/labels";return(await this.request(L,[],C,this.getDefaultCacheHeaders())).reduce((R,B)=>({...R,[B]:""}),{})},this.fetchSeries=async I=>{const x="/api/v1/series",O={...this.datasource.getTimeRangeParams(this.timeRange),"match[]":I};return await this.request(x,{},O,this.getDefaultCacheHeaders())},this.fetchDefaultSeries=(0,t.once)(async()=>{const I=await Promise.all(f.map(x=>this.fetchLabelValues(x)));return f.reduce((x,S,O)=>({...x,[S]:I[O]}),{})}),this.datasource=T,this.histogramMetrics=[],this.timeRange=(0,g.E2)(),this.metrics=[],Object.assign(this,M)}getDefaultCacheHeaders(){if(this.datasource.cacheLevel!==l.fD.None)return p(this.datasource.getCacheDurationInMinutes()*60)}cleanText(T){return T.split(E).pop().trimLeft().replace(/"$/,"").replace(/^"/,"")}get syntax(){return i.Ay}async loadMetricsMetadata(){const T=p(this.datasource.getDaysToCacheMetadata()*D);this.metricsMetadata=(0,d.DX)(await this.request("/api/v1/metadata",{},{},{showErrorAlert:!1,...T}))}getLabelKeys(){return this.labelKeys}importFromAbstractQuery(T){return(0,d.pt)(T)}exportToAbstractQuery(T){const M=T.expr;if(!M||M.length===0)return{refId:T.refId,labelMatchers:[]};const I=s().tokenize(M,i.Ay),x=(0,d.VH)(I),S=P(M,I);return S&&S.length>0&&x.push({name:"__name__",operator:u.D_.Equal,value:S}),{refId:T.refId,labelMatchers:x}}async getSeries(T,M){if(this.datasource.lookupsDisabled)return{};try{return T===c?await this.fetchDefaultSeries():await this.fetchSeriesLabels(T,M)}catch(I){return console.error(I),{}}}async getLabelValues(T){return await this.fetchLabelValues(T)}async fetchLabels(T){T&&(this.timeRange=T);const M="/api/v1/labels",I=this.datasource.getAdjustedInterval(this.timeRange);this.labelFetchTs=Date.now().valueOf();const x=await this.request(M,[],I,this.getDefaultCacheHeaders());return Array.isArray(x)&&(this.labelKeys=x.slice().sort()),[]}}function P(y,T){let M="";for(const I of T)if(typeof I=="string"){M=I;break}return M}},45889:(Y,A,e)=>{"use strict";e.d(A,{Cs:()=>O,DX:()=>D,P7:()=>h,P_:()=>v,Qn:()=>S,Rg:()=>c,VH:()=>H,Xd:()=>W,eN:()=>b,ky:()=>G,mv:()=>V,pt:()=>R,u3:()=>N});var t=e(2543),n=e.n(t),o=e(28848),s=e.n(o),r=e(73372),g=e(77678),u=e(85858),d=e(87324),i=e(32799),l=e(95842),f=e(69120);const c=_=>{const K=new Set,j=new RegExp("_bucket($|:)");for(let k=0;k<_.length;k++){const Q=_[k];j.test(Q)&&K.add(Q)}return[...K]};function h(_,K=!1){const j={};_.forEach(Q=>{const{__name__:ee,...ae}=Q;K&&(j.__name__=j.__name__||new Set,j.__name__.has(ee)||j.__name__.add(ee)),Object.keys(ae).forEach(Z=>{j[Z]||(j[Z]=new Set),j[Z].has(ae[Z])||j[Z].add(ae[Z])})});const k={};return T(Object.keys(j)).forEach(Q=>{k[Q]=T(Array.from(j[Q]))}),{values:k,keys:Object.keys(k)}}const p=/\{[^}]*?(\}|$)/,m=/\b(\w+)(!?=~?)("[^"\n]*?")(,)?(\s*)?/g;function a(_,K=1){if(!_.match(p)){if(_.match(/^[A-Za-z:][\w:]*$/))return{selector:`{__name__="${_}"}`,labelKeys:["__name__"]};throw new Error("Query must contain a selector: "+_)}const j=_.slice(0,K),k=j.lastIndexOf("{"),Q=j.lastIndexOf("}");if(k===-1)throw new Error("Not inside selector, missing open brace: "+j);if(Q>-1&&Q>k)throw new Error("Not inside selector, previous selector already closed: "+j);const ee=_.slice(K),Z=ee.indexOf("}")+K,ne=ee.indexOf("{"),q=ne+K;if(Z===-1)throw new Error("Not inside selector, missing closing brace in suffix: "+ee);if(ne>-1&&q<Z)throw new Error("Not inside selector, next selector opens before this one closed: "+ee);const te=_.slice(k,Z),re={};te.replace(m,(pe,le,Me,De)=>{const Re=_.indexOf(pe),me=Re+le.length+Me.length+1,he=Re+le.length+Me.length+De.length-1;return(K<me||K>he)&&(re[le]={value:De,operator:Me}),""});const ie=_.slice(0,k).match(/[A-Za-z:][\w:]*$/);ie&&(re.__name__={value:`"${ie[0]}"`,operator:"="});const ge=Object.keys(re).sort(),ye=["{",ge.map(pe=>`${pe}${re[pe].operator}${re[pe].value}`).join(","),"}"].join("");return{labelKeys:ge,selector:ye}}function v(_,K){const j=ae=>new RegExp(`(\\s|\\(|^)(${ae})(\\s|$|\\(|\\[|\\{)`,"ig"),k=Object.keys(K).reduce((ae,Z)=>{let ne=[],q=[],te=[];return ae.filter(Boolean).forEach((re,de)=>{re.match(j(Z))&&(ne=re.split(Z),ne.length===2?(te.push(de),q.push(...[ne[0],Z,ne[1]].filter(Boolean))):ne.length>2&&(te.push(de),ne=ne.map(ge=>ge===""?Z:ge),q.push(...ne)))}),te.forEach(re=>ae[re]=""),ae=ae.filter(Boolean),ae.push(...q),ae},[_]);let Q=!1;return k.map((ae,Z)=>{if(Q)return Q=!1,"";if(K[ae]){const ne=K[ae];if(Z+1!==k.length&&k[Z+1].match(m)){Q=!0;const q=k[Z+1],te=/(\)\{|\}\{|\]\{)/;return E(ne+q,te)}else return ne}return ae}).filter(Boolean).join("")}function E(_,K){const j=_.match(K);if(!j)return _;const k=j.index??0,Q=_.slice(0,k+1),ee=_.slice(k+1),ae=[];ee.replace(m,(te,re,de,ie,ge,ve)=>(ae.push({key:re,operator:de,value:ie,comma:ge,space:ve}),""));let Z=Q;ae.filter(Boolean).forEach(te=>{const re=te.value.slice(1,-1);Z=(0,d.t)(Z,te.key,re,te.operator)});let ne=ae.reduce((te,re)=>(te+=`${re.key}${re.operator}${re.value}${re.comma??""}${re.space??""}`,te),"");ne="{"+ne+"}";const q=ee.replace(ne,"");return Z+q}function D(_){if(!_)return _;const K={},j={};for(const Q in _){const ee=_[Q][0];K[Q]=ee,ee.type==="histogram"&&(j[`${Q}_bucket`]={type:"counter",help:`Cumulative counters for the observation buckets (${ee.help})`},j[`${Q}_count`]={type:"counter",help:`Count of events that have been observed for the histogram metric (${ee.help})`},j[`${Q}_sum`]={type:"counter",help:`Total sum of all observed values for the histogram metric (${ee.help})`}),ee.type==="summary"&&(j[`${Q}_count`]={type:"counter",help:`Count of events that have been observed for the base metric (${ee.help})`},j[`${Q}_sum`]={type:"counter",help:`Total sum of all observed values for the base metric (${ee.help})`})}const k={};return k.ALERTS={type:"counter",help:"Time series showing pending and firing alerts. The sample value is set to 1 as long as the alert is in the indicated active (pending or firing) state."},{...K,...j,...k}}function b(_){return P(_/1e3)}function P(_){return Math.floor(_/60)}function y(_,K=1){return Math.ceil(_/60)-Math.ceil(_/60)%K}function T(_){return _.slice(0,i.OP)}function M(_){return _&&_.length>=SUGGESTIONS_LIMIT?`, limited to the first ${SUGGESTIONS_LIMIT} received items`:""}const I=/[*+?()|\\.\[\]{}^$]/g;function x(_){return _.replace(I,"\\$&")}function S(_){return _.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/"/g,'\\"')}function O(_){return S(x(_))}const C={"=":r.D_.Equal,"!=":r.D_.NotEqual,"=~":r.D_.EqualRegEx,"!~":r.D_.NotEqualRegEx},L=(0,t.invert)(C);function U(_){const K=_.labelMatchers.map(j=>{const k=L[j.operator];return k?`${j.name}${k}"${j.value}"`:""}).filter(j=>j!=="").join(", ");return K?`{${K}}`:""}function R(_){return{refId:_.refId,expr:U(_),range:!0}}function B(_){return typeof _.content=="string"?_.content:""}function H(_){const K=[];for(const j of _)if(j instanceof o.Token&&j.type==="context-labels"){let k="",Q="",ee="";const ae=Array.isArray(j.content)?j.content:[j.content];for(let Z of ae)if(typeof Z=="string"){let ne;ne=Z,(ne==="="||ne==="!="||ne==="=~"||ne==="!~")&&(ee=ne)}else if(Z instanceof o.Token)switch(Z.type){case"label-key":k=B(Z);break;case"label-value":Q=B(Z),Q=Q.substring(1,Q.length-1);const ne=C[ee];ne&&K.push({name:k,operator:ne,value:Q});break}}return K}function W(_,K){if(_===f.fD.None)return{start:V(K.from,!1).toString(),end:V(K.to,!0).toString()};const j=V(K.from,!1),k=(0,g.rs)(j,N(_)*60),Q=V(K.to,!0),ee=y(Q,N(_))*60;if(k===ee){const ne=ee+N(_)*60;return{start:k.toString(),end:ne.toString()}}const ae=k.toString(),Z=ee.toString();return{start:ae,end:Z}}function N(_){switch(_){case f.fD.Medium:return 10;case f.fD.High:return 60;default:return 1}}function V(_,K){return typeof _=="string"&&(_=u.parse(_,K)),Math.ceil(_.valueOf()/1e3)}function G(_,K){return K===void 0&&(K=l.o6),_.length=Math.min(_.length,K),_}},69470:(Y,A,e)=>{"use strict";e.d(A,{AW:()=>g,Ay:()=>i});const t=[{label:"$__interval",sortValue:"$__interval"},{label:"$__rate_interval",sortValue:"$__rate_interval"},{label:"$__range",sortValue:"$__range"},{label:"1m",sortValue:"00:01:00"},{label:"5m",sortValue:"00:05:00"},{label:"10m",sortValue:"00:10:00"},{label:"30m",sortValue:"00:30:00"},{label:"1h",sortValue:"01:00:00"},{label:"1d",sortValue:"24:00:00"}],n=["by","group_left","group_right","ignoring","on","offset","without"],o=null,s=[{label:"acos",insertText:"acos",detail:"acos(v instant-vector)",documentation:"calculates the arccosine of all elements in v"},{label:"acosh",insertText:"acosh",detail:"acosh(v instant-vector)",documentation:"calculates the inverse hyperbolic cosine of all elements in v"},{label:"asin",insertText:"asin",detail:"asin(v instant-vector)",documentation:"calculates the arcsine of all elements in v"},{label:"asinh",insertText:"asinh",detail:"asinh(v instant-vector)",documentation:"calculates the inverse hyperbolic sine of all elements in v"},{label:"atan",insertText:"atan",detail:"atan(v instant-vector)",documentation:"calculates the arctangent of all elements in v"},{label:"atanh",insertText:"atanh",detail:"atanh(v instant-vector)",documentation:"calculates the inverse hyperbolic tangent of all elements in v"},{label:"cos",insertText:"cos",detail:"cos(v instant-vector)",documentation:"calculates the cosine of all elements in v"},{label:"cosh",insertText:"cosh",detail:"cosh(v instant-vector)",documentation:"calculates the hyperbolic cosine of all elements in v"},{label:"sin",insertText:"sin",detail:"sin(v instant-vector)",documentation:"calculates the sine of all elements in v"},{label:"sinh",insertText:"sinh",detail:"sinh(v instant-vector)",documentation:"calculates the hyperbolic sine of all elements in v"},{label:"tan",insertText:"tan",detail:"tan(v instant-vector)",documentation:"calculates the tangent of all elements in v"},{label:"tanh",insertText:"tanh",detail:"tanh(v instant-vector)",documentation:"calculates the hyperbolic tangent of all elements in v"}],g=[...[{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"group",insertText:"group",documentation:"All values in the resulting vector are 1"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"count_values",insertText:"count_values",documentation:"Count number of elements with the same value"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"},{label:"quantile",insertText:"quantile",documentation:"Calculate \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) over dimensions"}],...s,{insertText:"abs",label:"abs",detail:"abs(v instant-vector)",documentation:"Returns the input vector with all sample values converted to their absolute value."},{insertText:"absent",label:"absent",detail:"absent(v instant-vector)",documentation:"Returns an empty vector if the vector passed to it has any elements and a 1-element vector with the value 1 if the vector passed to it has no elements. This is useful for alerting on when no time series exist for a given metric name and label combination."},{insertText:"absent_over_time",label:"absent_over_time",detail:"absent(v range-vector)",documentation:"Returns an empty vector if the range vector passed to it has any elements and a 1-element vector with the value 1 if the range vector passed to it has no elements."},{insertText:"ceil",label:"ceil",detail:"ceil(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` up to the nearest integer."},{insertText:"changes",label:"changes",detail:"changes(v range-vector)",documentation:"For each input time series, `changes(v range-vector)` returns the number of times its value has changed within the provided time range as an instant vector."},{insertText:"clamp",label:"clamp",detail:"clamp(v instant-vector, min scalar, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min` and an upper limit of `max`."},{insertText:"clamp_max",label:"clamp_max",detail:"clamp_max(v instant-vector, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have an upper limit of `max`."},{insertText:"clamp_min",label:"clamp_min",detail:"clamp_min(v instant-vector, min scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min`."},{insertText:"count_scalar",label:"count_scalar",detail:"count_scalar(v instant-vector)",documentation:"Returns the number of elements in a time series vector as a scalar. This is in contrast to the `count()` aggregation operator, which always returns a vector (an empty one if the input vector is empty) and allows grouping by labels via a `by` clause."},{insertText:"deg",label:"deg",detail:"deg(v instant-vector)",documentation:"Converts radians to degrees for all elements in v"},{insertText:"day_of_month",label:"day_of_month",detail:"day_of_month(v=vector(time()) instant-vector)",documentation:"Returns the day of the month for each of the given times in UTC. Returned values are from 1 to 31."},{insertText:"day_of_week",label:"day_of_week",detail:"day_of_week(v=vector(time()) instant-vector)",documentation:"Returns the day of the week for each of the given times in UTC. Returned values are from 0 to 6, where 0 means Sunday etc."},{insertText:"day_of_year",label:"day_of_year",detail:"day_of_year(v=vector(time()) instant-vector)",documentation:"Returns the day of the year for each of the given times in UTC. Returned values are from 1 to 365 for non-leap years, and 1 to 366 in leap years."},{insertText:"days_in_month",label:"days_in_month",detail:"days_in_month(v=vector(time()) instant-vector)",documentation:"Returns number of days in the month for each of the given times in UTC. Returned values are from 28 to 31."},{insertText:"delta",label:"delta",detail:"delta(v range-vector)",documentation:"Calculates the difference between the first and last value of each time series element in a range vector `v`, returning an instant vector with the given deltas and equivalent labels. The delta is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if the sample values are all integers."},{insertText:"deriv",label:"deriv",detail:"deriv(v range-vector)",documentation:"Calculates the per-second derivative of the time series in a range vector `v`, using simple linear regression."},{insertText:"drop_common_labels",label:"drop_common_labels",detail:"drop_common_labels(instant-vector)",documentation:"Drops all labels that have the same name and value across all series in the input vector."},{insertText:"exp",label:"exp",detail:"exp(v instant-vector)",documentation:"Calculates the exponential function for all elements in `v`.\nSpecial cases are:\n* `Exp(+Inf) = +Inf` \n* `Exp(NaN) = NaN`"},{insertText:"floor",label:"floor",detail:"floor(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` down to the nearest integer."},{insertText:"histogram_quantile",label:"histogram_quantile",detail:"histogram_quantile(\u03C6 float, b instant-vector)",documentation:"Calculates the \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) from the buckets `b` of a histogram. The samples in `b` are the counts of observations in each bucket. Each sample must have a label `le` where the label value denotes the inclusive upper bound of the bucket. (Samples without such a label are silently ignored.) The histogram metric type automatically provides time series with the `_bucket` suffix and the appropriate labels."},{insertText:"holt_winters",label:"holt_winters",detail:"holt_winters(v range-vector, sf scalar, tf scalar)",documentation:"Produces a smoothed value for time series based on the range in `v`. The lower the smoothing factor `sf`, the more importance is given to old data. The higher the trend factor `tf`, the more trends in the data is considered. Both `sf` and `tf` must be between 0 and 1."},{insertText:"hour",label:"hour",detail:"hour(v=vector(time()) instant-vector)",documentation:"Returns the hour of the day for each of the given times in UTC. Returned values are from 0 to 23."},{insertText:"idelta",label:"idelta",detail:"idelta(v range-vector)",documentation:"Calculates the difference between the last two samples in the range vector `v`, returning an instant vector with the given deltas and equivalent labels."},{insertText:"increase",label:"increase",detail:"increase(v range-vector)",documentation:"Calculates the increase in the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. The increase is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if a counter increases only by integer increments."},{insertText:"irate",label:"irate",detail:"irate(v range-vector)",documentation:"Calculates the per-second instant rate of increase of the time series in the range vector. This is based on the last two data points. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for."},{insertText:"label_join",label:"label_join",detail:"label_join(v instant-vector, dst_label string, separator string, src_label_1 string, src_label_2 string, ...)",documentation:"For each timeseries in `v`, joins all the values of all the `src_labels` using `separator` and returns the timeseries with the label `dst_label` containing the joined value. There can be any number of `src_labels` in this function."},{insertText:"label_replace",label:"label_replace",detail:"label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)",documentation:"For each timeseries in `v`, `label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)`  matches the regular expression `regex` against the label `src_label`.  If it matches, then the timeseries is returned with the label `dst_label` replaced by the expansion of `replacement`. `$1` is replaced with the first matching subgroup, `$2` with the second etc. If the regular expression doesn't match then the timeseries is returned unchanged."},{insertText:"ln",label:"ln",detail:"ln(v instant-vector)",documentation:"Calculates the natural logarithm for all elements in `v`.\nSpecial cases are:\n * `ln(+Inf) = +Inf`\n * `ln(0) = -Inf`\n * `ln(x < 0) = NaN`\n * `ln(NaN) = NaN`"},{insertText:"log2",label:"log2",detail:"log2(v instant-vector)",documentation:"Calculates the binary logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"log10",label:"log10",detail:"log10(v instant-vector)",documentation:"Calculates the decimal logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"minute",label:"minute",detail:"minute(v=vector(time()) instant-vector)",documentation:"Returns the minute of the hour for each of the given times in UTC. Returned values are from 0 to 59."},{insertText:"month",label:"month",detail:"month(v=vector(time()) instant-vector)",documentation:"Returns the month of the year for each of the given times in UTC. Returned values are from 1 to 12, where 1 means January etc."},{insertText:"pi",label:"pi",detail:"pi()",documentation:"Returns pi"},{insertText:"predict_linear",label:"predict_linear",detail:"predict_linear(v range-vector, t scalar)",documentation:"Predicts the value of time series `t` seconds from now, based on the range vector `v`, using simple linear regression."},{insertText:"rad",label:"rad",detail:"rad(v instant-vector)",documentation:"Converts degrees to radians for all elements in v"},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the per-second average rate of increase of the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. Also, the calculation extrapolates to the ends of the time range, allowing for missed scrapes or imperfect alignment of scrape cycles with the range's time period."},{insertText:"resets",label:"resets",detail:"resets(v range-vector)",documentation:"For each input time series, `resets(v range-vector)` returns the number of counter resets within the provided time range as an instant vector. Any decrease in the value between two consecutive samples is interpreted as a counter reset."},{insertText:"round",label:"round",detail:"round(v instant-vector, to_nearest=1 scalar)",documentation:"Rounds the sample values of all elements in `v` to the nearest integer. Ties are resolved by rounding up. The optional `to_nearest` argument allows specifying the nearest multiple to which the sample values should be rounded. This multiple may also be a fraction."},{insertText:"scalar",label:"scalar",detail:"scalar(v instant-vector)",documentation:"Given a single-element input vector, `scalar(v instant-vector)` returns the sample value of that single element as a scalar. If the input vector does not have exactly one element, `scalar` will return `NaN`."},{insertText:"sgn",label:"sgn",detail:"sgn(v instant-vector)",documentation:"Returns a vector with all sample values converted to their sign, defined as this: 1 if v is positive, -1 if v is negative and 0 if v is equal to zero."},{insertText:"sort",label:"sort",detail:"sort(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in ascending order."},{insertText:"sort_desc",label:"sort_desc",detail:"sort_desc(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in descending order."},{insertText:"sqrt",label:"sqrt",detail:"sqrt(v instant-vector)",documentation:"Calculates the square root of all elements in `v`."},{insertText:"time",label:"time",detail:"time()",documentation:"Returns the number of seconds since January 1, 1970 UTC. Note that this does not actually return the current time, but the time at which the expression is to be evaluated."},{insertText:"timestamp",label:"timestamp",detail:"timestamp(v instant-vector)",documentation:"Returns the timestamp of each of the samples of the given vector as the number of seconds since January 1, 1970 UTC."},{insertText:"vector",label:"vector",detail:"vector(s scalar)",documentation:"Returns the scalar `s` as a vector with no labels."},{insertText:"year",label:"year",detail:"year(v=vector(time()) instant-vector)",documentation:"Returns the year for each of the given times in UTC."},{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average value of all points in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum value of all points in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum value of all points in the specified interval."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The most recent point value in specified interval."},{insertText:"present_over_time",label:"present_over_time",detail:"present_over_time(range-vector)",documentation:"The value 1 for any series in the specified interval."}],u=g.map(l=>l.label),i={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((by|without)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},function:new RegExp(`\\b(?:${g.map(l=>l.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],idList:{pattern:/\d+(\|\d+)+/,alias:"number"},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:new RegExp(`/[-+*/=%^~]|&&?|\\|?\\||!=?|<(?:=>?|<|>)?|>[>=]?|\\b(?:${n.join("|")})\\b`,"i"),punctuation:/[{};()`,.]/}},47891:(Y,A,e)=>{"use strict";e.d(A,{l:()=>b,z:()=>P});var t=e(69470),n=e(56823),o=e(25378),s=e(41598),r=e(65820);function g(){return[{id:r.jN.HistogramQuantile,name:"Histogram quantile",params:[{name:"Quantile",type:"number",options:[.99,.95,.9,.75,.5,.25]}],defaultParams:[.9],category:r.Ag.Functions,renderer:n.jY,addOperationHandler:n.iZ},{id:r.jN.LabelReplace,name:"Label replace",params:[{name:"Destination label",type:"string"},{name:"Replacement",type:"string"},{name:"Source label",type:"string"},{name:"Regex",type:"string"}],category:r.Ag.Functions,defaultParams:["","$1","","(.*)"],renderer:n.kf,addOperationHandler:n.iZ},{id:r.jN.Ln,name:"Ln",params:[],defaultParams:[],category:r.Ag.Functions,renderer:n.jY,addOperationHandler:n.iZ},d(r.jN.Changes),d(r.jN.Rate,!0),d(r.jN.Irate),d(r.jN.Increase,!0),d(r.jN.Idelta),d(r.jN.Delta),u({id:r.jN.HoltWinters,params:[(0,n.z2)(),{name:"Smoothing Factor",type:"number"},{name:"Trend Factor",type:"number"}],defaultParams:["$__interval",.5,.5],alternativesKey:"range function",category:r.Ag.RangeFunctions,renderer:n.nU,addOperationHandler:f,changeTypeHandler:i}),u({id:r.jN.PredictLinear,params:[(0,n.z2)(),{name:"Seconds from now",type:"number"}],defaultParams:["$__interval",60],alternativesKey:"range function",category:r.Ag.RangeFunctions,renderer:n.nU,addOperationHandler:f,changeTypeHandler:i}),u({id:r.jN.QuantileOverTime,params:[(0,n.z2)(),{name:"Quantile",type:"number"}],defaultParams:["$__interval",.5],alternativesKey:"overtime function",category:r.Ag.RangeFunctions,renderer:n.Kl,addOperationHandler:f,changeTypeHandler:i}),...o.Iu,{id:r.jN.NestedQuery,name:"Binary operation with query",params:[],defaultParams:[],category:r.Ag.BinaryOps,renderer:(T,M,I)=>I,addOperationHandler:c},u({id:r.jN.Abs}),u({id:r.jN.Absent}),u({id:r.jN.Acos,category:r.Ag.Trigonometric}),u({id:r.jN.Acosh,category:r.Ag.Trigonometric}),u({id:r.jN.Asin,category:r.Ag.Trigonometric}),u({id:r.jN.Asinh,category:r.Ag.Trigonometric}),u({id:r.jN.Atan,category:r.Ag.Trigonometric}),u({id:r.jN.Atanh,category:r.Ag.Trigonometric}),u({id:r.jN.Ceil}),u({id:r.jN.Clamp,name:"Clamp",params:[{name:"Minimum Scalar",type:"number"},{name:"Maximum Scalar",type:"number"}],defaultParams:[1,1]}),u({id:r.jN.ClampMax,params:[{name:"Maximum Scalar",type:"number"}],defaultParams:[1]}),u({id:r.jN.ClampMin,params:[{name:"Minimum Scalar",type:"number"}],defaultParams:[1]}),u({id:r.jN.Cos,category:r.Ag.Trigonometric}),u({id:r.jN.Cosh,category:r.Ag.Trigonometric}),u({id:r.jN.DayOfMonth,category:r.Ag.Time}),u({id:r.jN.DayOfWeek,category:r.Ag.Time}),u({id:r.jN.DayOfYear,category:r.Ag.Time}),u({id:r.jN.DaysInMonth,category:r.Ag.Time}),u({id:r.jN.Deg}),d(r.jN.Deriv),u({id:r.jN.Exp}),u({id:r.jN.Floor}),u({id:r.jN.Group}),u({id:r.jN.Hour}),u({id:r.jN.LabelJoin,params:[{name:"Destination Label",type:"string",editor:s.r},{name:"Separator",type:"string"},{name:"Source Label",type:"string",restParam:!0,optional:!0,editor:s.r}],defaultParams:["",",",""],renderer:h,addOperationHandler:p}),u({id:r.jN.Log10}),u({id:r.jN.Log2}),u({id:r.jN.Minute}),u({id:r.jN.Month}),u({id:r.jN.Pi,renderer:T=>`${T.id}()`}),u({id:r.jN.Quantile,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:n.jY}),u({id:r.jN.Rad}),d(r.jN.Resets),u({id:r.jN.Round,category:r.Ag.Functions,params:[{name:"To Nearest",type:"number"}],defaultParams:[1]}),u({id:r.jN.Scalar}),u({id:r.jN.Sgn}),u({id:r.jN.Sin,category:r.Ag.Trigonometric}),u({id:r.jN.Sinh,category:r.Ag.Trigonometric}),u({id:r.jN.Sort}),u({id:r.jN.SortDesc}),u({id:r.jN.Sqrt}),u({id:r.jN.Stddev}),u({id:r.jN.Tan,category:r.Ag.Trigonometric}),u({id:r.jN.Tanh,category:r.Ag.Trigonometric}),u({id:r.jN.Time,renderer:T=>`${T.id}()`}),u({id:r.jN.Timestamp}),u({id:r.jN.Vector,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:T=>`${T.id}(${T.params[0]})`}),u({id:r.jN.Year})]}function u(y){return{...y,id:y.id,name:y.name??(0,n.DQ)(y.id),params:y.params??[],defaultParams:y.defaultParams??[],category:y.category??r.Ag.Functions,renderer:y.renderer??(y.params?n.kf:n.jY),addOperationHandler:y.addOperationHandler??n.iZ}}function d(y,T=!1){return{id:y,name:(0,n.DQ)(y),params:[(0,n.z2)(T)],defaultParams:[T?"$__rate_interval":"$__interval"],alternativesKey:"range function",category:r.Ag.RangeFunctions,renderer:l,addOperationHandler:f,changeTypeHandler:i}}function i(y,T){return(y.params[0]==="$__rate_interval"&&T.defaultParams[0]!=="$__rate_interval"||y.params[0]==="$__interval"&&T.defaultParams[0]!=="$__interval")&&(y.params=T.defaultParams),y}function l(y,T,M){let I=(y.params??[])[0]??"5m";return`${T.id}(${M}[${I}])`}function f(y,T,M){const I={id:y.id,params:y.defaultParams};return T.operations.length>0&&M.getOperationDef(T.operations[0].id).addOperationHandler===f?{...T,operations:[I,...T.operations.slice(1)]}:{...T,operations:[I,...T.operations]}}function c(y,T){return{...T,binaryQueries:[...T.binaryQueries??[],{operator:"/",query:T}]}}function h(y,T,M){if(typeof y.params[1]!="string")throw"The separator must be a string";const I=`"${y.params[1]}"`;return`${y.id}(${M}, "${y.params[0]}", ${I}, "${y.params.slice(2).join(I)}")`}function p(y,T){const M={id:y.id,params:y.defaultParams};return{...T,operations:[...T.operations,M]}}function m(){return[...(0,n.G3)(r.jN.Sum),...(0,n.G3)(r.jN.Avg),...(0,n.G3)(r.jN.Min),...(0,n.G3)(r.jN.Max),...(0,n.G3)(r.jN.Count),...(0,n.jC)(r.jN.TopK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...(0,n.jC)(r.jN.BottomK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...(0,n.jC)(r.jN.CountValues,{params:[{name:"Identifier",type:"string"}],defaultParams:["count"]}),a(r.jN.SumOverTime),a(r.jN.AvgOverTime),a(r.jN.MinOverTime),a(r.jN.MaxOverTime),a(r.jN.CountOverTime),a(r.jN.LastOverTime),a(r.jN.PresentOverTime),a(r.jN.AbsentOverTime),a(r.jN.StddevOverTime)]}function a(y){return{id:y,name:(0,n.DQ)(y),params:[(0,n.z2)()],defaultParams:["$__interval"],alternativesKey:"overtime function",category:r.Ag.RangeFunctions,renderer:v,addOperationHandler:f}}function v(y,T,M){let I=(y.params??[])[0]??"$__interval";return`${T.id}(${M}[${I}])`}var E=e(83077);class D{constructor(T){this.categories=[],this.operationsRegistry=new E.O(T)}setOperationCategories(T){this.categories=T}getOperationsForCategory(T){return this.operationsRegistry.list().filter(M=>M.category===T&&!M.hideFromList)}getAlternativeOperations(T){return this.operationsRegistry.list().filter(M=>M.alternativesKey&&M.alternativesKey===T)}getCategories(){return this.categories}getOperationDef(T){return this.operationsRegistry.getIfExists(T)}renderOperations(T,M){for(const I of M){const x=this.operationsRegistry.getIfExists(I.id);if(!x)throw new Error(`Could not find operation ${I.id} in the registry`);T=x.renderer(I,x,T)}return T}renderBinaryQueries(T,M){if(M)for(const I of M)T=`${this.renderBinaryQuery(T,I)}`;return T}renderBinaryQuery(T,M){let I=T+` ${M.operator} `;return M.vectorMatches&&(I+=`${M.vectorMatchesType}(${M.vectorMatches}) `),I+this.renderQuery(M.query,!0)}renderLabels(T){if(T.length===0)return"";let M="{";for(const I of T)M!=="{"&&(M+=", "),M+=`${I.label}${I.op}"${I.value}"`;return M+"}"}renderQuery(T,M){let I=`${T.metric??""}${this.renderLabels(T.labels)}`;return I=this.renderOperations(I,T.operations),!M&&this.hasBinaryOp(T)&&T.binaryQueries?.length&&(I=`(${I})`),I=this.renderBinaryQueries(I,T.binaryQueries),M&&(this.hasBinaryOp(T)||T.binaryQueries?.length)&&(I=`(${I})`),I}hasBinaryOp(T){return T.operations.find(M=>this.getOperationDef(M.id)?.category===r.Ag.BinaryOps)!==void 0}}class b extends D{constructor(){super(()=>{const T=[...g(),...m()];for(const M of T){const I=t.AW.find(x=>x.insertText===M.id);I&&(M.documentation=I.documentation)}return T}),this.setOperationCategories([r.Ag.Aggregations,r.Ag.RangeFunctions,r.Ag.Functions,r.Ag.BinaryOps,r.Ag.Trigonometric,r.Ag.Time])}getQueryPatterns(){return[{name:"Rate then sum",type:r.n5.Rate,operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}]},{name:"Rate then sum by(label) then avg",type:r.n5.Rate,operations:[{id:"rate",params:["$__rate_interval"]},{id:"__sum_by",params:[""]},{id:"avg",params:[]}]},{name:"Histogram quantile on rate",type:r.n5.Histogram,operations:[{id:"rate",params:["$__rate_interval"]},{id:"__sum_by",params:["le"]},{id:"histogram_quantile",params:[.95]}]},{name:"Histogram quantile on increase",type:r.n5.Histogram,operations:[{id:"increase",params:["$__rate_interval"]},{id:"__max_by",params:["le"]},{id:"histogram_quantile",params:[.95]}]},{name:"Binary Query",type:r.n5.Binary,operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}],binaryQueries:[{operator:"/",query:{metric:"",labels:[],operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}]}}]}]}}const P=new b},25378:(Y,A,e)=>{"use strict";e.d(A,{AE:()=>s,C8:()=>o,Iu:()=>r});var t=e(56823),n=e(65820);const o=[{id:n.jN.Addition,name:"Add scalar",sign:"+"},{id:n.jN.Subtraction,name:"Subtract scalar",sign:"-"},{id:n.jN.MultiplyBy,name:"Multiply by scalar",sign:"*"},{id:n.jN.DivideBy,name:"Divide by scalar",sign:"/"},{id:n.jN.Modulo,name:"Modulo by scalar",sign:"%"},{id:n.jN.Exponent,name:"Exponent",sign:"^"},{id:n.jN.EqualTo,name:"Equal to",sign:"==",comparison:!0},{id:n.jN.NotEqualTo,name:"Not equal to",sign:"!=",comparison:!0},{id:n.jN.GreaterThan,name:"Greater than",sign:">",comparison:!0},{id:n.jN.LessThan,name:"Less than",sign:"<",comparison:!0},{id:n.jN.GreaterOrEqual,name:"Greater or equal to",sign:">=",comparison:!0},{id:n.jN.LessOrEqual,name:"Less or equal to",sign:"<=",comparison:!0}],s=o.reduce((u,d)=>(u[d.sign]={id:d.id,comparison:d.comparison},u),{}),r=o.map(u=>{const d=[{name:"Value",type:"number"}],i=[2];return u.comparison&&(d.push({name:"Bool",type:"boolean",description:"If checked comparison will return 0 or 1 for the value rather than filtering."}),i.push(!1)),{id:u.id,name:u.name,params:d,defaultParams:i,alternativesKey:"binary scalar operations",category:n.Ag.BinaryOps,renderer:g(u.sign),addOperationHandler:t.iZ}});function g(u){return function(i,l,f){let c=i.params[0],h="";return i.params.length===2&&(h=i.params[1]?" bool":""),`${f} ${u}${h} ${c}`}}},41598:(Y,A,e)=>{"use strict";e.d(A,{r:()=>g});var t=e(96540),n=e(50877),o=e(88323),s=e(47891),r=e(56823);function g({onChange:d,index:i,operationId:l,value:f,query:c,datasource:h}){const[p,m]=(0,t.useState)({});return t.createElement(o.l6,{inputId:(0,r.OS)(l,i),autoFocus:f===""?!0:void 0,openMenuOnFocus:!0,onOpenMenu:async()=>{m({isLoading:!0});const a=await u(c,h);m({options:a,isLoading:void 0})},isLoading:p.isLoading,allowCustomValue:!0,noOptionsMessage:"No labels found",loadingMessage:"Loading labels",options:p.options,value:(0,n.z)(f),onChange:a=>d(i,a.value)})}async function u(d,i){let l=d.labels;i.type==="prometheus"&&(l=[{label:"__name__",op:"=",value:d.metric},...d.labels]);const f=s.z.renderLabels(l),c=await i.languageProvider.fetchLabelsWithMatch(f);return Object.keys(c).map(h=>({label:h,value:h}))}},95842:(Y,A,e)=>{"use strict";e.d(A,{dm:()=>oe,o6:()=>J});var t=e(32196),n=e(76459),o=e.n(n),s=e(96540),r=e(23257),g=e.n(r),u=e(50877),d=e(13544),i=e(97801),l=e(81580),f=e(32264),c=e(40845),h=e(55852),p=e(14578),m=e(88824),a=e(40276),v=e(88323),E=e(39268),D=e(14186),b=e(12681),P=e(45889),y=e(71440),T=e(37390),M=e(10354),I=e(62930),x=e(60782),S=e(19727),O=e(19384),C=e(15292),L=e(56034),U=e(14110),R=e(32799),B=e(13567);const{setFilteredMetricCount:H}=B.Ow.actions;async function W(_e,Ve,We){let $e=!0;const it=_e.languageProvider.metricsMetadata;it&&Object.keys(it).length===0&&($e=!1);let at={},ht={},ft;return ft=We?.map(gt=>{const Dt=N(gt,_e),It=`${gt}\xA6${Dt.description}`;return at[gt]=Dt,ht[It]=Dt,Dt}),{isLoading:!1,hasMetadata:$e,metrics:ft??[],metaHaystackDictionary:ht,nameHaystackDictionary:at,totalMetricCount:ft?.length??0,filteredMetricCount:ft?.length??0}}function N(_e,Ve){let We=(0,R.AU)(_e,Ve.languageProvider.metricsMetadata);const $e=(0,R.pK)(_e,Ve.languageProvider.metricsMetadata);return["histogram","summary"].forEach(at=>{$e?.toLowerCase().includes(at)&&We!==at&&(We+=` (${at})`)}),{value:_e,type:We,description:$e}}function V(_e,Ve){const We=G(_e);return!_e.isLoading&&_e.filteredMetricCount!==We.length&&Ve(H(We.length)),K(We,_e.pageNum,_e.resultsPerPage)}function G(_e){let Ve=_e.metrics;return _e.fuzzySearchQuery&&!_e.useBackend&&(_e.fullMetaSearch?Ve=_e.metaHaystackOrder.map(We=>_e.metaHaystackDictionary[We]):Ve=_e.nameHaystackOrder.map(We=>_e.nameHaystackDictionary[We])),_e.selectedTypes.length>0&&(Ve=Ve.filter((We,$e)=>_e.selectedTypes.some(at=>We.type&&at.value?We.type.includes(at.value):!We.type&&at.value==="no type"))),_e.includeNullMetadata||(Ve=Ve.filter(We=>We.type!==void 0&&We.description!==void 0)),Ve}function _(_e){if(!_e.metrics.length)return[];const Ve=_e.resultsPerPage===0?1:_e.resultsPerPage,We=Math.floor(G(_e).length/Ve)+1;return[...Array(We).keys()].map($e=>$e+1)}function K(_e,Ve,We){const $e=We===0?1:We,it=Ve===1?0:(Ve-1)*$e,at=it+$e;return _e.slice(it,at)}const j=(_e,Ve,We)=>_e<1?1:_e>We?We:_e??Ve;async function k(_e,Ve,We){const $e=(0,y.b4)(_e),it=Ve.map(ft=>`,${ft.label}="${ft.value}"`),at=`label_values({__name__=~".*${$e}"${Ve?it.join():""}},__name__)`;return await We.metricFindQuery(at).then(ft=>ft.map(gt=>N(gt.text,We)))}function Q(_e,Ve,We,$e){switch(_e){case"grafana_prom_metric_encycopedia_tracking":(0,U.rR)(_e,{metric:We,hasMetadata:Ve?.hasMetadata,totalMetricCount:Ve?.totalMetricCount,fuzzySearchQuery:Ve?.fuzzySearchQuery,fullMetaSearch:Ve?.fullMetaSearch,selectedTypes:Ve?.selectedTypes,useRegexSearch:Ve?.useBackend,includeResultsWithoutMetadata:Ve?.includeNullMetadata});case"grafana_prom_metric_encycopedia_disable_text_wrap_interaction":(0,U.rR)(_e,{disableTextWrap:Ve?.disableTextWrap});case"grafana_prometheus_metric_encyclopedia_open":(0,U.rR)(_e,{query:$e})}}const ee=[{value:"counter",description:"A cumulative metric that represents a single monotonically increasing counter whose value can only increase or be reset to zero on restart."},{value:"gauge",description:"A metric that represents a single numerical value that can arbitrarily go up and down."},{value:"histogram",description:"A histogram samples observations (usually things like request durations or response sizes) and counts them in configurable buckets."},{value:"summary",description:"A summary samples observations (usually things like request durations and response sizes) and can calculate configurable quantiles over a sliding time window."},{value:"unknown",description:"These metrics have been given the type unknown in the metadata."},{value:"no type",description:"These metrics have no defined type in the metadata."}],ae={browse:"Search metrics by name",metadataSearchSwitch:"Include description in search",type:"Filter by type",includeNullMetadata:"Include results with no metadata",setUseBackend:"Enable regex search"};function Z(_e){const{state:Ve,onChangeFullMetaSearch:We,onChangeIncludeNullMetadata:$e,onChangeDisableTextWrap:it,onChangeUseBackend:at}=_e,ht=(0,c.$j)(),ft=ne(ht);return s.createElement(s.Fragment,null,s.createElement("div",{className:ft.selectItem},s.createElement(C.d,{"data-testid":Ke.searchWithMetadata,value:Ve.fullMetaSearch,disabled:Ve.useBackend||!Ve.hasMetadata,onChange:()=>We()}),s.createElement("div",{className:ft.selectItemLabel},ae.metadataSearchSwitch)),s.createElement("div",{className:ft.selectItem},s.createElement(C.d,{value:Ve.includeNullMetadata,disabled:!Ve.hasMetadata,onChange:()=>$e()}),s.createElement("div",{className:ft.selectItemLabel},ae.includeNullMetadata)),s.createElement("div",{className:ft.selectItem},s.createElement(C.d,{value:Ve.disableTextWrap,onChange:()=>it()}),s.createElement("div",{className:ft.selectItemLabel},"Disable text wrap")),s.createElement("div",{className:ft.selectItem},s.createElement(C.d,{"data-testid":Ke.setUseBackend,value:Ve.useBackend,onChange:()=>at()}),s.createElement("div",{className:ft.selectItemLabel},ae.setUseBackend,"\xA0"),s.createElement(L.m,{content:"Filter metric names by regex search, using an additional call on the Prometheus API.",placement:"bottom-end"},s.createElement(p.I,{name:"info-circle",size:"xs",className:ft.settingsIcon}))))}function ne(_e){return{settingsIcon:(0,t.css)`
      color: ${_e.colors.text.secondary};
    `,selectItem:(0,t.css)`
      display: flex;
      flex-direction: row;
      align-items: center;
      padding: 4px 0;
    `,selectItemLabel:(0,t.css)`
      margin: 0 0 0 ${_e.spacing(1)};
      align-self: center;
      color: ${_e.colors.text.secondary};
      font-size: 12px;
    `}}var q=e(67061);function te({feedbackUrl:_e}){const Ve=(0,c.of)(re);return s.createElement(q.B,null,s.createElement("a",{href:_e,className:Ve.link,title:"The metrics explorer is new, please let us know how we can improve it",target:"_blank",rel:"noreferrer noopener"},s.createElement(p.I,{name:"comment-alt-message"})," Give feedback"))}function re(_e){return{link:(0,t.css)({color:_e.colors.text.secondary,fontSize:_e.typography.bodySmall.fontSize,":hover":{color:_e.colors.text.link},margin:"-25px 0 30px 0"})}}var de=e(4253);function ie(_e){const{metrics:Ve,onChange:We,onClose:$e,query:it,state:at,disableTextWrap:ht}=_e,ft=(0,c.$j)(),gt=ge(ft,ht);function Dt(St){St.value&&(We({...it,metric:St.value}),Q("grafana_prom_metric_encycopedia_tracking",at,St.value),$e())}function It(St){return at.fullMetaSearch&&St?s.createElement(s.Fragment,null,s.createElement("td",null,Vt(St.type??"")),s.createElement("td",null,s.createElement(g(),{textToHighlight:St.description??"",searchWords:at.metaHaystackMatches,autoEscape:!0,highlightClassName:gt.matchHighLight}))):s.createElement(s.Fragment,null,s.createElement("td",null,Vt(St.type??"")),s.createElement("td",null,St.description??""))}function jt(St,pn,ct){return s.createElement(s.Fragment,null,St,s.createElement("span",{className:gt.tooltipSpace},s.createElement(L.m,{content:s.createElement(s.Fragment,null,"When creating a ",pn,", Prometheus exposes multiple series with the type counter."," ",(0,de.jW)(ct)),placement:"bottom-start",interactive:!0},s.createElement(p.I,{name:"info-circle",size:"xs"}))))}function Vt(St){return St?St.includes("(summary)")?jt(St,"summary","https://prometheus.io/docs/concepts/metric_types/#summary"):St.includes("(histogram)")?jt(St,"histogram","https://prometheus.io/docs/concepts/metric_types/#histogram"):St:""}function _t(){let St;return at.fuzzySearchQuery||(St="There are no metrics found in the data source."),it.labels.length>0&&(St="There are no metrics found. Try to expand your label filters."),(at.fuzzySearchQuery||at.selectedTypes.length>0)&&(St="There are no metrics found. Try to expand your search and filters."),s.createElement("tr",{className:gt.noResults},s.createElement("td",{colSpan:3},St))}function rt(St){return St.useBackend?[St.fuzzySearchQuery]:St.fullMetaSearch?St.metaHaystackMatches:St.nameHaystackMatches}return s.createElement("table",{className:gt.table},s.createElement("thead",{className:gt.stickyHeader},s.createElement("tr",null,s.createElement("th",{className:`${gt.nameWidth} ${gt.tableHeaderPadding}`},"Name"),at.hasMetadata&&s.createElement(s.Fragment,null,s.createElement("th",{className:`${gt.typeWidth} ${gt.tableHeaderPadding}`},"Type"),s.createElement("th",{className:`${gt.descriptionWidth} ${gt.tableHeaderPadding}`},"Description")),s.createElement("th",{className:gt.selectButtonWidth}," "))),s.createElement("tbody",null,s.createElement(s.Fragment,null,Ve.length>0&&Ve.map((St,pn)=>s.createElement("tr",{key:St?.value??pn,className:gt.row},s.createElement("td",{className:gt.nameOverflow},s.createElement(g(),{textToHighlight:St?.value??"",searchWords:rt(at),autoEscape:!0,highlightClassName:gt.matchHighLight})),at.hasMetadata&&It(St),s.createElement("td",null,s.createElement(h.$n,{size:"md",variant:"secondary",onClick:()=>Dt(St),className:gt.centerButton},"Select")))),Ve.length===0&&!at.isLoading&&_t())))}const ge=(_e,Ve)=>({table:(0,t.css)`
      ${Ve?"":"table-layout: fixed;"}
      border-radius: ${_e.shape.radius.default};
      width: 100%;
      white-space: ${Ve?"nowrap":"normal"};
      td {
        padding: ${_e.spacing(1)};
      }

      td,
      th {
        min-width: ${_e.spacing(3)};
        border-bottom: 1px solid ${_e.colors.border.weak};
      }
    `,row:(0,t.css)`
      label: row;
      border-bottom: 1px solid ${_e.colors.border.weak}
      &:last-child {
        border-bottom: 0;
      }
    `,tableHeaderPadding:(0,t.css)`
      padding: 8px;
    `,matchHighLight:(0,t.css)`
      background: inherit;
      color: ${_e.components.textHighlight.text};
      background-color: ${_e.components.textHighlight.background};
    `,nameWidth:(0,t.css)`
      ${Ve?"":"width: 37.5%;"}
    `,nameOverflow:(0,t.css)`
      ${Ve?"":"overflow-wrap: anywhere;"}
    `,typeWidth:(0,t.css)`
      ${Ve?"":"width: 15%;"}
    `,descriptionWidth:(0,t.css)`
      ${Ve?"":"width: 35%;"}
    `,selectButtonWidth:(0,t.css)`
      ${Ve?"":"width: 12.5%;"}
    `,stickyHeader:(0,t.css)`
      position: sticky;
      top: 0;
      background-color: ${_e.colors.background.primary};
    `,noResults:(0,t.css)`
      text-align: center;
      color: ${_e.colors.text.secondary};
    `,tooltipSpace:(0,t.css)`
      margin-left: 4px;
    `,centerButton:(0,t.css)`
      display: block;
      margin: auto;
      border: none;
    `}),ve=(_e,Ve)=>({modal:(0,t.css)`
      width: 85vw;
      ${_e.breakpoints.down("md")} {
        width: 100%;
      }
      ${_e.breakpoints.up("xl")} {
        width: 60%;
      }
    `,inputWrapper:(0,t.css)`
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
    `,inputItemFirst:(0,t.css)`
      flex-basis: 40%;
      padding-right: 16px;
      ${_e.breakpoints.down("md")} {
        padding-right: 0px;
        padding-bottom: 16px;
      }
    `,inputItem:(0,t.css)`
      flex-grow: 1;
      flex-basis: 20%;
      ${_e.breakpoints.down("md")} {
        min-width: 100%;
      }
    `,selectWrapper:(0,t.css)`
      margin-bottom: ${_e.spacing(1)};
    `,resultsAmount:(0,t.css)`
      color: ${_e.colors.text.secondary};
      font-size: 0.85rem;
      padding: 0 0 4px 0;
    `,resultsData:(0,t.css)`
      margin: 4px 0 ${_e.spacing(2)} 0;
    `,resultsDataCount:(0,t.css)`
      margin: 0;
    `,resultsDataFiltered:(0,t.css)`
      color: ${_e.colors.text.secondary};
      text-align: center;
      border: solid 1px rgba(204, 204, 220, 0.25);
      padding: 7px;
    `,resultsDataFilteredText:(0,t.css)`
      display: inline;
      vertical-align: text-top;
    `,results:(0,t.css)`
      height: calc(80vh - 310px);
      overflow-y: scroll;
    `,resultsFooter:(0,t.css)`
      margin-top: 24px;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      position: sticky;
    `,currentlySelected:(0,t.css)`
      color: grey;
      opacity: 75%;
      font-size: 0.75rem;
    `,loadingSpinner:(0,t.css)`
      visibility: hidden;
    `,visible:(0,t.css)`
      visibility: visible;
    `,settingsBtn:(0,t.css)`
      float: right;
    `,noBorder:(0,t.css)`
      border: none;
    `,resultsPerPageLabel:(0,t.css)`
      color: ${_e.colors.text.secondary};
      opacity: 75%;
      padding-top: 5px;
      font-size: 0.85rem;
      margin-right: 8px;
    `,resultsPerPageWrapper:(0,t.css)`
      display: flex;
    `});var ye=e(53076),pe=e(2543);const le=new ye.A({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1});function Me(_e,Ve,We){const[$e,it,at]=le.search(_e,Ve,0,1e5);let ht=[],ft=new Set;if($e&&at){const gt=(Dt,It)=>{It&&ft.add(Dt)};for(let Dt=0;Dt<at.length;Dt++){let It=at[Dt];ye.A.highlight(_e[it.idx[It]],it.ranges[It],gt),ht.push(_e[it.idx[It]])}We([ht,[...ft]])}else Ve||We([[],[]])}const De=(0,pe.debounce)(Me,300),{setIsLoading:Re,buildMetrics:me,filterMetricsBackend:he,setResultsPerPage:Te,setPageNum:Be,setFuzzySearchQuery:we,setNameHaystack:Ne,setMetaHaystack:Ze,setFullMetaSearch:st,setIncludeNullMetadata:Qe,setSelectedTypes:ke,setUseBackend:je,setDisableTextWrap:He,showAdditionalSettings:Ge}=B.Ow.actions,Oe=_e=>{const{datasource:Ve,isOpen:We,onClose:$e,onChange:it,query:at,initialMetrics:ht}=_e,[ft,gt]=(0,s.useReducer)(B.Ow.reducer,(0,B.ue)(at)),Dt=(0,c.$j)(),It=ve(Dt,ft.disableTextWrap),jt=(0,s.useCallback)(async()=>{gt(Re(!0));const Ct=await W(Ve,at,ht);gt(me({isLoading:!1,hasMetadata:Ct.hasMetadata,metrics:Ct.metrics,metaHaystackDictionary:Ct.metaHaystackDictionary,nameHaystackDictionary:Ct.nameHaystackDictionary,totalMetricCount:Ct.metrics.length,filteredMetricCount:Ct.metrics.length}))},[at,Ve,ht]);(0,s.useEffect)(()=>{jt()},[jt]);const Vt=ee.map(Ct=>({value:Ct.value,label:Ct.value,description:Ct.description})),_t=(0,s.useMemo)(()=>o()(async Ct=>{gt(Re(!0));const Yt=await k(Ct,at.labels,Ve);gt(he({metrics:Yt,filteredMetricCount:Yt.length,isLoading:!1}))},Ve.getDebounceTimeInMilliseconds()),[Ve,at]);function rt(Ct){gt(Ne(Ct))}function St(Ct){gt(Ze(Ct))}function pn(Ct,Yt){ft.useBackend&&Ct===""?jt():ft.useBackend?_t(Ct):Yt?De(Object.keys(ft.metaHaystackDictionary),Ct,St):De(Object.keys(ft.nameHaystackDictionary),Ct,rt)}const ct=s.createElement(Z,{state:ft,onChangeFullMetaSearch:()=>{const Ct=!ft.fullMetaSearch;gt(st(Ct)),it({...at,fullMetaSearch:Ct}),pn(ft.fuzzySearchQuery,Ct)},onChangeIncludeNullMetadata:()=>{gt(Qe(!ft.includeNullMetadata)),it({...at,includeNullMetadata:!ft.includeNullMetadata})},onChangeDisableTextWrap:()=>{gt(He()),it({...at,disableTextWrap:!ft.disableTextWrap}),Q("grafana_prom_metric_encycopedia_disable_text_wrap_interaction",ft,"")},onChangeUseBackend:()=>{const Ct=!ft.useBackend;gt(je(Ct)),it({...at,useBackend:Ct}),Ct===!1?jt():ft.fuzzySearchQuery!==""&&_t(ft.fuzzySearchQuery)}});return s.createElement(T.a,{"data-testid":Ke.metricModal,isOpen:We,title:"Metrics explorer",onDismiss:$e,"aria-label":"Browse metrics",className:It.modal},s.createElement(te,{feedbackUrl:"https://forms.gle/DEMAJHoAMpe3e54CA"}),s.createElement("div",{className:It.inputWrapper,"data-testid":d.Tp.components.DataSource.Prometheus.queryEditor.builder.metricsExplorer},s.createElement("div",{className:(0,t.cx)(It.inputItem,It.inputItemFirst)},s.createElement(M.p,{autoFocus:!0,"data-testid":Ke.searchMetric,placeholder:ae.browse,value:ft.fuzzySearchQuery,onInput:Ct=>{const Yt=Ct.currentTarget.value??"";gt(we(Yt)),pn(Yt,ft.fullMetaSearch)}})),ft.hasMetadata&&s.createElement("div",{className:It.inputItem},s.createElement(v.KF,{"data-testid":Ke.selectType,inputId:"my-select",options:Vt,value:ft.selectedTypes,placeholder:ae.type,onChange:Ct=>gt(ke(Ct))})),s.createElement("div",null,s.createElement(I.y,{className:`${It.loadingSpinner} ${ft.isLoading?It.visible:""}`})),s.createElement("div",{className:It.inputItem},s.createElement(x.G,{"aria-label":"Additional settings",content:ct,placement:"bottom-end",closeButton:!1},s.createElement(S.e,{className:It.settingsBtn},s.createElement(h.$n,{variant:"secondary",size:"md",onClick:()=>gt(Ge()),"data-testid":Ke.showAdditionalSettings,className:It.noBorder},"Additional Settings"),s.createElement(h.$n,{className:It.noBorder,variant:"secondary",icon:ft.showAdditionalSettings?"angle-up":"angle-down"}))))),s.createElement("div",{className:It.resultsData},at.metric&&s.createElement("i",{className:It.currentlySelected},"Currently selected: ",at.metric),at.labels.length>0&&s.createElement("div",{className:It.resultsDataFiltered},s.createElement(p.I,{name:"info-circle",size:"sm"}),s.createElement("div",{className:It.resultsDataFilteredText},"\xA0These metrics have been pre-filtered by labels chosen in the label filters."))),s.createElement("div",{className:It.results},ft.metrics&&s.createElement(ie,{metrics:V(ft,gt),onChange:it,onClose:$e,query:at,state:ft,disableTextWrap:ft.disableTextWrap})),s.createElement("div",{className:It.resultsFooter},s.createElement("div",{className:It.resultsAmount},"Showing ",ft.filteredMetricCount," of ",ft.totalMetricCount," results"),s.createElement(O.d,{currentPage:ft.pageNum??1,numberOfPages:_(ft).length,onNavigate:Ct=>{gt(Be(Ct??1))}}),s.createElement("div",{className:It.resultsPerPageWrapper},s.createElement("p",{className:It.resultsPerPageLabel},"# Results per page\xA0"),s.createElement(M.p,{"data-testid":Ke.resultsPerPage,value:j(ft.resultsPerPage,B.J3,B.yH),placeholder:"results per page",width:10,title:"The maximum results per page is "+B.yH,type:"number",onInput:Ct=>{const Yt=+Ct.currentTarget.value;isNaN(Yt)||Yt>=B.yH||gt(Te(Yt))}}))))},Ke={metricModal:"metric-modal",searchMetric:"search-metric",searchWithMetadata:"search-with-metadata",selectType:"select-type",metricCard:"metric-card",useMetric:"use-metric",searchPage:"search-page",resultsPerPage:"results-per-page",setUseBackend:"set-use-backend",showAdditionalSettings:"show-additional-settings"},Ee=" ",J=1e3;function oe({datasource:_e,query:Ve,onChange:We,onGetMetrics:$e,labelsFilters:it,metricLookupDisabled:at,onBlur:ht,variableEditor:ft}){const gt=(0,c.of)(ue),[Dt,It]=(0,s.useState)({}),jt=f.$.featureToggles.prometheusMetricEncyclopedia,Vt=[{value:"BrowseMetrics",label:"Metrics explorer",description:"Browse and filter all metrics and metadata with a fuzzy search"}],_t=(0,s.useCallback)((rn,en)=>{const mn=rn.label??rn.value;return mn?mn.toLowerCase?en.split(Ee).reduce((fn,ca)=>{const Lt=mn.toLowerCase().includes(ca.toLowerCase());let qt=!1;return jt&&(qt=mn==="Metrics explorer"),fn&&(Lt||qt)},!0):!0:!1},[jt]),rt=(0,s.useCallback)((rn,en)=>rn.__isNew__?rn.label:s.createElement(g(),{searchWords:en.inputValue.split(Ee),textToHighlight:rn.label??"",highlightClassName:gt.highlight}),[gt.highlight]),St=(rn,en)=>{const mn=(0,y.b4)(rn);return be(mn,en)},pn=rn=>_e.metricFindQuery(St(rn,it)).then(mn=>{const Un=mn.length;(0,P.ky)(mn),Un>mn.length?It({...Dt,resultsTruncated:!0}):It({...Dt,resultsTruncated:!1});const fn=mn.map(ca=>({label:ca.text,value:ca.text}));return jt?[...Vt,...fn]:fn}),ct=()=>Promise.resolve([]),Ct=o()(rn=>pn(rn),_e.getDebounceTimeInMilliseconds()),Yt=rn=>{const en=rn.data;if(en.value==="BrowseMetrics"){const mn=rn.isFocused?gt.focus:"";return s.createElement("div",{...rn.innerProps,ref:rn.innerRef,className:`${gt.customOptionWidth} metric-encyclopedia-open`,"aria-label":"Select option",onKeyDown:Un=>{Un.code==="Enter"&&It({...Dt,metricsModalOpen:!0})}},s.createElement("div",{className:`${gt.customOption} ${mn} metric-encyclopedia-open`},s.createElement("div",null,s.createElement("div",{className:"metric-encyclopedia-open"},en.label),s.createElement("div",{className:`${gt.customOptionDesc} metric-encyclopedia-open`},en.description)),s.createElement(h.$n,{fill:"text",size:"sm",variant:"secondary",onClick:()=>It({...Dt,metricsModalOpen:!0}),className:"metric-encyclopedia-open"},"Open",s.createElement(p.I,{name:"arrow-right"}))))}return(0,b.o5)(rn)},cn=({children:rn,maxHeight:en,innerRef:mn,innerProps:Un})=>{const fn=(0,c.$j)(),ca=(0,m.J)(fn),Lt=!s.isValidElement(rn)&&Dt.resultsTruncated;return s.createElement("div",{...Un,className:`${ca.menu} ${gt.customMenuContainer}`,style:{maxHeight:en},"aria-label":"Select options menu"},s.createElement(a.E,{scrollRefCallback:mn,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0},rn),Lt&&s.createElement("div",{className:gt.customMenuFooter},s.createElement("div",null,"Only the top 1000 metrics are displayed in the metric select. Use the metrics explorer to view all metrics.")))},vn=()=>s.createElement(v.DW,{"data-testid":d.Tp.components.DataSource.Prometheus.queryEditor.builder.metricSelect,isClearable:!!ft,inputId:"prometheus-metric-select",className:gt.select,value:Ve.metric?(0,u.z)(Ve.metric):void 0,placeholder:"Select metric",allowCustomValue:!0,formatOptionLabel:rt,filterOption:_t,onOpenMenu:async()=>{if(at)return;It({isLoading:!0});const rn=await $e(),en=rn.map(Un=>Un.value),mn=rn.length;rn.length>J&&(0,P.ky)(rn),It(jt?{metrics:[...Vt,...rn],isLoading:void 0,initialMetrics:en,resultsTruncated:mn>rn.length}:{metrics:rn,isLoading:void 0,resultsTruncated:mn>rn.length})},loadOptions:at?ct:Ct,isLoading:Dt.isLoading,defaultOptions:Dt.metrics,onChange:rn=>{const en=rn?.value;en?jt&&en==="BrowseMetrics"?(Q("grafana_prometheus_metric_encyclopedia_open",null,"",Ve),It({...Dt,metricsModalOpen:!0})):We({...Ve,metric:en}):We({...Ve,metric:""})},components:jt?{Option:Yt,MenuList:cn}:{MenuList:cn},onBlur:ht||(()=>{})});return s.createElement(s.Fragment,null,jt&&!_e.lookupsDisabled&&Dt.metricsModalOpen&&s.createElement(Oe,{datasource:_e,isOpen:Dt.metricsModalOpen,onClose:()=>It({...Dt,metricsModalOpen:!1}),query:Ve,onChange:We,initialMetrics:Dt.initialMetrics??[]}),ft?s.createElement(E.C,null,s.createElement(D.I,{label:"Metric",labelWidth:20,tooltip:s.createElement("div",null,"Optional: returns a list of label values for the label name in the specified metric.")},vn())):s.createElement(i.B,null,s.createElement(l.c,{label:"Metric"},vn())))}const ue=_e=>({select:(0,t.css)`
    min-width: 125px;
  `,highlight:(0,t.css)`
    label: select__match-highlight;
    background: inherit;
    padding: inherit;
    color: ${_e.colors.warning.contrastText};
    background-color: ${_e.colors.warning.main};
  `,customOption:(0,t.css)`
    padding: 8px;
    display: flex;
    justify-content: space-between;
    cursor: pointer;
    :hover {
      background-color: ${_e.colors.emphasize(_e.colors.background.primary,.1)};
    }
  `,customOptionlabel:(0,t.css)`
    color: ${_e.colors.text.primary};
  `,customOptionDesc:(0,t.css)`
    color: ${_e.colors.text.secondary};
    font-size: ${_e.typography.size.xs};
    opacity: 50%;
  `,focus:(0,t.css)`
    background-color: ${_e.colors.emphasize(_e.colors.background.primary,.1)};
  `,customOptionWidth:(0,t.css)`
    min-width: 400px;
  `,customMenuFooter:(0,t.css)`
    flex: 0;
    display: flex;
    justify-content: space-between;
    padding: ${_e.spacing(1.5)};
    border-top: 1px solid ${_e.colors.border.weak};
    color: ${_e.colors.text.secondary};
  `,customMenuContainer:(0,t.css)`
    display: flex;
    flex-direction: column;
    background: ${_e.colors.background.primary};
    box-shadow: ${_e.shadows.z3};
  `}),be=(_e,Ve)=>{const We=Ve?Le(Ve):[];return`label_values({__name__=~".*${_e}"${We?We.join(""):""}},__name__)`},Le=_e=>_e.map(Ve=>`,${Ve.label}="${Ve.value}"`)},46777:(Y,A,e)=>{"use strict";e.d(A,{I:()=>I});var t=e(96540),n=e(32799),o=e(45889),s=e(47891),r=e(71440),g=e(32196),u=e(2543),d=e(7650),i=e(97801),l=e(81580),f=e(39268),c=e(76892),h=e(76459),p=e.n(h),m=e(50877),a=e(13544),v=e(81392),E=e(3721),D=e(88323);function b({item:S,defaultOp:O,onChange:C,onDelete:L,onGetLabelNames:U,onGetLabelValues:R,invalidLabel:B,invalidValue:H,getLabelValuesAutofillSuggestions:W,debounceDuration:N}){const[V,G]=(0,t.useState)({}),[_,K]=(0,t.useState)(!1),[j,k]=(0,t.useState)(!1),Q=(ne=S.op)=>P.find(q=>q.label===ne)?.isMultiValue,ee=ne=>{if(ne){const q=/\(([^)]+)\)/,te=ne?.match(q);return te&&te[0].indexOf("|")>0?[ne]:ne.indexOf("|")>0?ne.split("|"):[ne]}return[]},ae=p()(ne=>W(ne,S.label),N),Z=S?.value??"";return t.createElement("div",{key:Z,"data-testid":"prometheus-dimensions-filter-item"},t.createElement(v.M,null,t.createElement(D.l6,{placeholder:"Select label","data-testid":a.Tp.components.QueryBuilder.labelSelect,inputId:"prometheus-dimensions-filter-item-key",width:"auto",value:S.label?(0,m.z)(S.label):null,allowCustomValue:!0,onOpenMenu:async()=>{G({isLoadingLabelNames:!0});const ne=await U(S);K(!0),G({labelNames:ne,isLoadingLabelNames:void 0})},onCloseMenu:()=>{K(!1)},isOpen:_,isLoading:V.isLoadingLabelNames??!1,options:V.labelNames,onChange:ne=>{ne.label&&C({...S,op:S.op??O,label:ne.label})},invalid:B}),t.createElement(D.l6,{"data-testid":a.Tp.components.QueryBuilder.matchOperatorSelect,className:"query-segment-operator",value:(0,m.z)(S.op??O),options:P,width:"auto",onChange:ne=>{ne.value!=null&&C({...S,op:ne.value,value:Q(ne.value)?S.value:ee(S?.value)[0]})}}),t.createElement(D.DW,{placeholder:"Select value","data-testid":a.Tp.components.QueryBuilder.valueSelect,inputId:"prometheus-dimensions-filter-item-value",width:"auto",value:Q()?ee(Z).map(m.z):ee(Z).map(m.z)[0],allowCustomValue:!0,onOpenMenu:async()=>{G({isLoadingLabelValues:!0});const ne=await R(S);(0,o.ky)(ne),k(!0),G({...V,labelValues:ne,isLoadingLabelValues:void 0})},onCloseMenu:()=>{k(!1)},isOpen:j,defaultOptions:V.labelValues,isMulti:Q(),isLoading:V.isLoadingLabelValues,loadOptions:ae,onChange:ne=>{if(ne.value)C({...S,value:ne.value,op:S.op??O});else{const q=ne.map(te=>te.label).join("|");C({...S,value:q,op:S.op??O})}},invalid:H}),t.createElement(E.Z,{"aria-label":`remove-${S.label}`,icon:"times",variant:"secondary",onClick:L})))}const P=[{label:"=",value:"=",isMultiValue:!1},{label:"!=",value:"!=",isMultiValue:!1},{label:"<",value:"<",isMultiValue:!1},{label:">",value:">",isMultiValue:!1},{label:"=~",value:"=~",isMultiValue:!0},{label:"!~",value:"!~",isMultiValue:!0}],y="Select at least 1 label filter (label and value)";function T({labelsFilters:S,onChange:O,onGetLabelNames:C,onGetLabelValues:L,labelFilterRequired:U,getLabelValuesAutofillSuggestions:R,debounceDuration:B,variableEditor:H}){const W="=",[N,V]=(0,t.useState)([{op:W}]);(0,t.useEffect)(()=>{S.length>0?V(S):V([{op:W}])},[S]);const G=j=>{V(j);const k=j.filter(Q=>Q.label!=null&&Q.value!=null);(0,u.isEqual)(k,S)||O(k)},_=N.some(j=>j.label&&j.value),K=()=>t.createElement(d.o,{items:N,onChange:G,renderItem:(j,k,Q)=>t.createElement(b,{debounceDuration:B,item:j,defaultOp:W,onChange:k,onDelete:Q,onGetLabelNames:C,onGetLabelValues:L,invalidLabel:U&&!j.label,invalidValue:U&&!j.value,getLabelValuesAutofillSuggestions:R})});return t.createElement(t.Fragment,null,H?t.createElement(f.C,null,t.createElement("div",{className:(0,g.cx)((0,g.css)`
              display: flex;
            `)},t.createElement(c.c,{width:20,tooltip:t.createElement("div",null,"Optional: used to filter the metric select for this query type.")},"Label filters"),K())):t.createElement(i.B,null,t.createElement(l.c,{label:"Label filters",error:y,invalid:U&&!_},K())))}var M=e(95842);function I({datasource:S,query:O,onChange:C,onBlur:L,variableEditor:U}){const R=K=>{C({...O,labels:K})},B=(0,t.useCallback)(async K=>{const j=S.getVariables(),k=await K;return[...j.map(Q=>({label:Q,value:Q})),...k.map(Q=>({label:Q.value,value:Q.value,title:Q.description}))]},[S]),H=async K=>{if(!O.metric)return await S.languageProvider.fetchLabels(),S.languageProvider.getLabelKeys().map(ee=>({value:ee}));const j=O.labels.filter(ee=>ee!==K);j.push({label:"__name__",op:"=",value:O.metric});const k=s.z.renderLabels(j);let Q=await S.languageProvider.fetchLabelsWithMatch(k);return Object.keys(Q).filter(ee=>!j.find(ae=>ae.label===ee)).map(ee=>({value:ee}))},W=(K,j)=>{const k={label:j??"__name__",op:"=~",value:(0,r.b4)(`.*${K}`)},Q=O.labels.filter(ne=>ne.label!==k.label);Q.push(k),O.metric&&Q.push({label:"__name__",op:"=",value:O.metric});const ee=Q.map(ne=>({...ne,label:S.interpolateString(ne.label),value:S.interpolateString(ne.value)})),ae=s.z.renderLabels(ee);let Z;return S.hasLabelsMatchAPISupport()?Z=V(k,ae):Z=N(k,ae),Z.then(ne=>((0,o.ky)(ne),ne))},N=(K,j)=>{if(!K.label)return Promise.resolve([]);const k=S.languageProvider.fetchSeries(j),Q=S.interpolateString(K.label);return k.then(ee=>{const ae=new Set;return ee.forEach(Z=>{const ne=Z[Q];ae.add(ne)}),Array.from(ae).map(Z=>({label:Z,value:Z}))})},V=(K,j)=>K.label?S.languageProvider.fetchSeriesValuesWithMatch(K.label,j).then(k=>k.map(Q=>({value:Q,label:Q}))):Promise.resolve([]),G=async K=>{if(!K.label)return[];if(!O.metric)return(await S.languageProvider.getLabelValues(K.label)).map(ee=>({value:ee}));const j=O.labels.filter(ee=>ee!==K);j.push({label:"__name__",op:"=",value:O.metric});const k=j.map(ee=>({...ee,label:S.interpolateString(ee.label),value:S.interpolateString(ee.value)})),Q=s.z.renderLabels(k);return S.hasLabelsMatchAPISupport()?V(K,Q):N(K,Q)},_=(0,t.useCallback)(()=>B(x(S,O)),[S,O,B]);return t.createElement(t.Fragment,null,t.createElement(M.dm,{query:O,onChange:C,onGetMetrics:_,datasource:S,labelsFilters:O.labels,metricLookupDisabled:S.lookupsDisabled,onBlur:L||(()=>{}),variableEditor:U}),t.createElement(T,{debounceDuration:S.getDebounceTimeInMilliseconds(),getLabelValuesAutofillSuggestions:W,labelsFilters:O.labels,onChange:R,onGetLabelNames:K=>B(H(K)),onGetLabelValues:K=>B(G(K)),variableEditor:U}))}async function x(S,O){S.languageProvider.metricsMetadata||await S.languageProvider.loadMetricsMetadata(),S.languageProvider.metricsMetadata||(S.languageProvider.metricsMetadata={});let C;if(O.labels.length>0){const L=s.z.renderLabels(O.labels);C=(await S.languageProvider.getSeries(L,!0)).__name__??[]}else C=await S.languageProvider.getLabelValues("__name__")??[];return C.map(L=>({value:L,description:(0,n.xB)(L,S.languageProvider.metricsMetadata)}))}},52005:(Y,A,e)=>{"use strict";e.d(A,{W:()=>i,i:()=>l});var t=e(96540),n=e(67061),o=e(69470),s=e(47891),r=e(65405),g=e(30683),u=e(55698),d=e(44339);const i="Fetch all series matching metric name and label filters.",l=t.memo(({query:f})=>{const c=(0,r.u)(f||"").query,h={grammar:o.Ay,name:"promql"};return t.createElement(n.B,{gap:.5,direction:"column"},t.createElement(g.r,{stepNumber:1,title:t.createElement(d.Z,{query:`${c.metric} ${s.z.renderLabels(c.labels)}`,lang:h})},i),t.createElement(u.k,{stepNumber:2,queryModeller:s.z,query:c,lang:h}))});l.displayName="PromQueryBuilderExplained"},63492:(Y,A,e)=>{"use strict";e.d(A,{$:()=>u});var t=e(32196),n=e(96540),o=e(13544),s=e(40845),r=e(60042),g=e(52005);function u(i){const{query:l,datasource:f,range:c,onRunQuery:h,onChange:p,data:m,app:a,showExplain:v}=i,E=(0,s.of)(d);return n.createElement("div",{"data-testid":o.Tp.components.DataSource.Prometheus.queryEditor.code.queryField,className:E.wrapper},n.createElement(r.A,{datasource:f,query:l,range:c,onRunQuery:h,onChange:p,history:[],data:m,app:a}),v&&n.createElement(g.i,{query:l.expr}))}const d=i=>({wrapper:(0,t.css)`
      .gf-form {
        margin-bottom: 0;
      }
    `})},13567:(Y,A,e)=>{"use strict";e.d(A,{J3:()=>n,Ow:()=>s,mt:()=>g,ue:()=>r,yH:()=>o});var t=e(30038);const n=100,o=1e3,s=(0,t.Z0)({name:"metrics-modal-state",initialState:r(),reducers:{filterMetricsBackend:(u,d)=>{u.metrics=d.payload.metrics,u.filteredMetricCount=d.payload.filteredMetricCount,u.isLoading=d.payload.isLoading},buildMetrics:(u,d)=>{u.isLoading=d.payload.isLoading,u.metrics=d.payload.metrics,u.hasMetadata=d.payload.hasMetadata,u.metaHaystackDictionary=d.payload.metaHaystackDictionary,u.nameHaystackDictionary=d.payload.nameHaystackDictionary,u.totalMetricCount=d.payload.totalMetricCount,u.filteredMetricCount=d.payload.filteredMetricCount},setIsLoading:(u,d)=>{u.isLoading=d.payload},setFilteredMetricCount:(u,d)=>{u.filteredMetricCount=d.payload},setResultsPerPage:(u,d)=>{u.resultsPerPage=d.payload},setPageNum:(u,d)=>{u.pageNum=d.payload},setFuzzySearchQuery:(u,d)=>{u.fuzzySearchQuery=d.payload,u.pageNum=1},setNameHaystack:(u,d)=>{u.nameHaystackOrder=d.payload[0],u.nameHaystackMatches=d.payload[1]},setMetaHaystack:(u,d)=>{u.metaHaystackOrder=d.payload[0],u.metaHaystackMatches=d.payload[1]},setFullMetaSearch:(u,d)=>{u.fullMetaSearch=d.payload,u.pageNum=1},setIncludeNullMetadata:(u,d)=>{u.includeNullMetadata=d.payload,u.pageNum=1},setSelectedTypes:(u,d)=>{u.selectedTypes=d.payload,u.pageNum=1},setUseBackend:(u,d)=>{u.useBackend=d.payload,u.fullMetaSearch=!1,u.pageNum=1},setDisableTextWrap:u=>{u.disableTextWrap=!u.disableTextWrap},showAdditionalSettings:u=>{u.showAdditionalSettings=!u.showAdditionalSettings}}});function r(u){return{isLoading:!0,metrics:[],hasMetadata:!0,metaHaystackDictionary:{},metaHaystackMatches:[],metaHaystackOrder:[],nameHaystackDictionary:{},nameHaystackOrder:[],nameHaystackMatches:[],totalMetricCount:0,filteredMetricCount:null,resultsPerPage:n,pageNum:1,fuzzySearchQuery:"",fullMetaSearch:u?.fullMetaSearch??!1,includeNullMetadata:u?.includeNullMetadata??!0,selectedTypes:[],useBackend:u?.useBackend??!1,disableTextWrap:u?.disableTextWrap??!1,showAdditionalSettings:!1}}function g(u){return{useBackend:u?.useBackend??!1,disableTextWrap:u?.disableTextWrap??!1,fullMetaSearch:u?.fullMetaSearch??!1,includeNullMetadata:u.includeNullMetadata??!1}}},56823:(Y,A,e)=>{"use strict";e.d(A,{DQ:()=>p,G3:()=>v,Kl:()=>f,OS:()=>m,iZ:()=>h,jC:()=>E,jY:()=>u,kf:()=>d,nU:()=>l,z2:()=>a});var t=e(2543),n=e.n(t),o=e(55127),s=e.n(o),r=e(41598),g=e(65820);function u(x,S,O){const C=c(x,S,O),L=x.id+"(";return O&&C.push(O),L+C.join(", ")+")"}function d(x,S,O){const C=c(x,S,O),L=x.id+"(";return O&&C.unshift(O),L+C.join(", ")+")"}function i(x,S,O,C){if(S.params.length<2)throw`Cannot render a function with params of length [${S.params.length}]`;let L=(x.params??[])[0]??"5m";const U=c({...x,params:x.params.slice(1)},{...S,params:S.params.slice(1),defaultParams:S.defaultParams.slice(1)},O),R=x.id+"(";return O&&(C?U.push(`${O}[${L}]`):U.unshift(`${O}[${L}]`)),R+U.join(", ")+")"}function l(x,S,O){return i(x,S,O,!1)}function f(x,S,O){return i(x,S,O,!0)}function c(x,S,O){return(x.params??[]).map((C,L)=>S.params[L].type==="string"?'"'+C+'"':C)}function h(x,S){const O={id:x.id,params:x.defaultParams};return{...S,operations:[...S.operations,O]}}function p(x){return(0,t.capitalize)(x.replace(/_/g," "))}function m(x,S){return`operations.${x}.param.${S}`}function a(x=!1){const S={name:"Range",type:"string",options:[{label:"$__interval",value:"$__interval"},{label:"1m",value:"1m"},{label:"5m",value:"5m"},{label:"10m",value:"10m"},{label:"1h",value:"1h"},{label:"24h",value:"24h"}]};return x&&S.options.unshift({label:"$__rate_interval",value:"$__rate_interval"}),S}function v(x,S={}){return[{id:x,name:p(x),params:[{name:"By label",type:"string",restParam:!0,optional:!0}],defaultParams:[],alternativesKey:"plain aggregations",category:g.Ag.Aggregations,renderer:u,paramChangedHandler:M(`__${x}_by`),explainHandler:P(x,""),addOperationHandler:h,...S},{id:`__${x}_by`,name:`${p(x)} by`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,editor:r.r}],defaultParams:[""],alternativesKey:"aggregations by",category:g.Ag.Aggregations,renderer:D(x),paramChangedHandler:T(x),explainHandler:P(x,"by"),addOperationHandler:h,hideFromList:!0,...S},{id:`__${x}_without`,name:`${p(x)} without`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,editor:r.r}],defaultParams:[""],alternativesKey:"aggregations by",category:g.Ag.Aggregations,renderer:b(x),paramChangedHandler:T(x),explainHandler:P(x,"without"),addOperationHandler:h,hideFromList:!0,...S}]}function E(x,S,O={}){const C=v(x,O);return C[0].params.unshift(...S.params),C[1].params.unshift(...S.params),C[2].params.unshift(...S.params),C[0].defaultParams=S.defaultParams,C[1].defaultParams=[...S.defaultParams,""],C[2].defaultParams=[...S.defaultParams,""],C[1].renderer=y(x),C[2].renderer=y(x),C}function D(x){return function(O,C,L){return`${x} by(${O.params.join(", ")}) (${L})`}}function b(x){return function(O,C,L){return`${x} without(${O.params.join(", ")}) (${L})`}}function P(x,S){return function(C){const L=C.params.map(R=>`\`${R}\``).join(" and "),U=s()("label",C.params.length);switch(S){case"by":return`Calculates ${x} over dimensions while preserving ${U} ${L}.`;case"without":return`Calculates ${x} over the dimensions ${L}. All other labels are preserved.`;default:return`Calculates ${x} over the dimensions.`}}}function y(x){return function(O,C,L){const U=C.params.findIndex(H=>H.restParam),R=O.params.slice(0,U),B=O.params.slice(U);return`${x} by(${B.join(", ")}) (${R.map((H,W)=>C.params[W].type==="string"?`"${H}"`:H).join(", ")}, ${L})`}}function T(x){return function(O,C,L){return C.params.length<L.params.length?{...C,id:x}:C}}function M(x){return function(O,C,L){return C.params.length===L.params.length?{...C,id:x}:C}}function I(x,S){if(!x.label||!x.op||!x.value||S.length<2)return!1;const O=x.op.toString().startsWith("!");return S.filter(U=>U.label===x.label&&U.value===x.value&&U.op!==x.op).some(U=>!!(O&&U?.op?.toString().startsWith("!")===!1||O===!1&&U?.op?.toString().startsWith("!")))}},65405:(Y,A,e)=>{"use strict";e.d(A,{u:()=>s});var t=e(21489),n=e(25378),o=e(71440);function s(a){const v=(0,o.qk)(a),D=t.K3.parse(v).topNode,P={query:{metric:"",labels:[],operations:[]},errors:[]};try{g(v,D,P)}catch(y){console.error(y),y instanceof Error&&P.errors.push({text:y.message})}return m(P.query)&&(P.errors=[]),r(a)&&(P.errors=[]),P}function r(a){const v={query:{metric:"",labels:[],operations:[]},errors:[]};a=a.replace(/\$__interval/g,"1s"),a=a.replace(/\$__interval_ms/g,"1000"),a=a.replace(/\$__rate_interval/g,"1s"),a=a.replace(/\$__range_ms/g,"1000"),a=a.replace(/\$__range_s/g,"1"),a=a.replace(/\$__range/g,"1s");const D=t.K3.parse(a).topNode;try{g(a,D,v)}catch{return!1}return v.errors.length===0}function g(a,v,E){const D=E.query;switch(v.type.id){case t.iP:{D.metric=(0,o.AA)(a,v);break}case t.BG:{D.labels.push(d(a,v));const b=v.getChild(o.Ql);b&&E.errors.push((0,o.xz)(a,b));break}case t.R6:{l(a,v,E);break}case t.Fn:{f(a,v,E);break}case t.df:{h(a,v,E);break}case o.Ql:{if(u(v))break;E.errors.push((0,o.xz)(a,v));break}default:{v.type.id===t.ek&&E.errors.push((0,o.xz)(a,v));let b=v.firstChild;for(;b;)g(a,b,E),b=b.nextSibling}}}function u(a){return a.prevSibling?.type.id===t.GN&&a.prevSibling?.firstChild?.type.id===t.Fb}function d(a,v){const E=(0,o.AA)(a,v.getChild(t.IC)),D=(0,o.AA)(a,v.getChild(t.Lf)),b=(0,o.AA)(a,v.getChild(t.LW)).replace(/"/g,"");return{label:E,op:D,value:b}}const i=["changes","rate","irate","increase","delta"];function l(a,v,E){const D=E.query,b=v.getChild(t.m3),P=(0,o.AA)(a,b),T=v.getChild(t.Dh).getChild(t.qI),M=[];let I="";if(i.includes(P)||P.endsWith("_over_time")){let S=(0,o.AA)(a,v).match(/\[(.+)\]/);S?.[1]&&(I=S[1],M.push(S[1]))}const x={id:P,params:M};if(D.operations.unshift(x),T){if((0,o.AA)(a,T)===I+"]")return;c(a,T,E,x)}}function f(a,v,E){const D=E.query,b=v.getChild(t.xb);let P=(0,o.AA)(a,b);const y=v.getChild(t.hI),T=[];y&&(y.getChild("By")&&P&&(P=`__${P}_by`),y.getChild(t.xB)&&(P=`__${P}_without`),T.push(...(0,o.R1)(a,y,t._p)));const I=v.getChild(t.Dh).getChild(t.qI),S=I?.getChild(t.GN)?.getChild(t.df);S&&E.errors.push({text:"Query parsing is ambiguous.",from:S.from,to:S.to});const O={id:P,params:[]};D.operations.unshift(O),c(a,I,E,O),O.params.push(...T)}function c(a,v,E,D){if(v)switch(v.type.id){case t.GN:case t.qI:{let b=v.firstChild;for(;b;){const y=b.getChild(t.GN)?.getChild(t.df);y&&E.errors.push({text:"Query parsing is ambiguous.",from:y.from,to:y.to}),c(a,b,E,D),b=b.nextSibling}break}case t.Po:{D.params.push(parseFloat((0,o.AA)(a,v)));break}case t.LW:{D.params.push((0,o.AA)(a,v).replace(/"/g,""));break}default:g(a,v,E)}}function h(a,v,E){const D=E.query,b=v.firstChild,P=(0,o.AA)(a,b.nextSibling),y=p(a,v.getChild(t.Wy)),T=v.lastChild,M=n.AE[P],I=b.getChild(t.Po),x=T.getChild(t.Po),S=T.getChild(t.df);if(I||g(a,b,E),x)D.operations.push((0,o.rq)(M,a,T,!!y?.isBool));else if(S){const O=(0,o.z9)(T);O?.type.id===t.Po&&D.operations.push((0,o.rq)(M,a,O,!!y?.isBool)),g(a,T,E)}else{D.binaryQueries=D.binaryQueries||[];const O={operator:P,query:{metric:"",labels:[],operations:[]}};y?.isMatcher&&(O.vectorMatchesType=y.matchType,O.vectorMatches=y.matches),D.binaryQueries.push(O),g(a,T,{query:O.query,errors:E.errors})}}function p(a,v){if(v){if(v.getChild("Bool"))return{isBool:!0,isMatcher:!1};{const E=v.getChild(t.UX);return E?{isMatcher:!0,isBool:!1,matches:(0,o.AA)(a,E.getChild(t.x$)?.getChild(t.qJ)),matchType:E.getChild(t.On)?"on":"ignoring"}:void 0}}}function m(a){return a.labels.length===0&&a.operations.length===0&&!a.metric}},71440:(Y,A,e)=>{"use strict";e.d(A,{AA:()=>d,Ql:()=>t,R1:()=>l,b4:()=>f,qk:()=>r,rq:()=>i,xz:()=>o,z9:()=>n});const t=0;function n(c){return c.firstChild?n(c.firstChild):c}function o(c,h){return{text:d(c,h),from:h.from,to:h.to,parentType:h.parent?.name}}const s=/\$(\w+)|\[\[([\s\S]+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g;function r(c){return c.replace(s,(h,p,m,a,v,E,D)=>{const b=a||D;let P=p,y="0";return m&&(P=m,y="1"),v&&(P=v,y="2"),`__V_${y}__`+P+"__V__"+(b?"__F__"+b+"__F__":"")})}const g=[(c,h)=>`$${c}`,(c,h)=>`[[${c}${h?`:${h}`:""}]]`,(c,h)=>`\${${c}${h?`:${h}`:""}}`];function u(c){return c.replace(/__V_(\d)__(.+?)__V__(?:__F__(\w+)__F__)?/g,(h,p,m,a)=>g[parseInt(p,10)](m,a))}function d(c,h){return h?u(c.substring(h.from,h.to)):""}function i(c,h,p,m){const a=[parseFloat(d(h,p))];return c.comparison&&a.push(m),{id:c.id,params:a}}function l(c,h,p){if(h.type.id===p||h.name===p)return[d(c,h)];const m=[];let a=0,v=h.childAfter(a);for(;v;)m.push(...l(c,v,p)),a=v.to,v=h.childAfter(a);return m}const f=c=>c.split(" ").map(p=>`${p}.*`).join("")},30683:(Y,A,e)=>{"use strict";e.d(A,{r:()=>r});var t=e(32196),n=e(96540),o=e(36663),s=e(40845);function r({title:u,stepNumber:d,markdown:i,children:l}){const f=(0,s.of)(g);return n.createElement("div",{className:f.box},d!==void 0&&n.createElement("div",{className:f.stepNumber},d),n.createElement("div",{className:f.boxInner},u&&n.createElement("div",{className:f.header},n.createElement("span",null,u)),n.createElement("div",{className:f.body},i&&n.createElement("div",{dangerouslySetInnerHTML:{__html:(0,o.G)(i)}}),l)))}const g=u=>({box:(0,t.css)({background:u.colors.background.secondary,padding:u.spacing(1),borderRadius:u.shape.radius.default,position:"relative"}),boxInner:(0,t.css)({marginLeft:u.spacing(4)}),stepNumber:(0,t.css)({fontWeight:u.typography.fontWeightMedium,background:u.colors.secondary.main,width:"20px",height:"20px",borderRadius:u.shape.radius.circle,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"10px",left:"11px",fontSize:u.typography.bodySmall.fontSize}),header:(0,t.css)({paddingBottom:u.spacing(.5),display:"flex",alignItems:"center",fontFamily:u.typography.fontFamilyMonospace}),body:(0,t.css)({color:u.colors.text.secondary,"p:last-child":{margin:0},a:{color:u.colors.text.link,textDecoration:"underline"}})})},55698:(Y,A,e)=>{"use strict";e.d(A,{k:()=>s});var t=e(96540),n=e(30683),o=e(44339);function s({query:r,queryModeller:g,stepNumber:u,lang:d,onMouseEnter:i,onMouseLeave:l}){return t.createElement(t.Fragment,null,r.operations.map((f,c)=>{const h=g.getOperationDef(f.id);if(!h)return`Operation ${f.id} not found`;const p=h.renderer(f,h,"<expr>"),m=h.explainHandler?h.explainHandler(f,h):h.documentation??"no docs";return t.createElement("div",{key:c,onMouseEnter:()=>i?.(f,c),onMouseLeave:()=>l?.(f,c)},t.createElement(n.r,{stepNumber:c+u,title:t.createElement(o.Z,{query:p,lang:d}),markdown:m}))}))}},43854:(Y,A,e)=>{"use strict";e.d(A,{i:()=>r});var t=e(32196),n=e(96540),o=e(40845),s=e(67061);function r({children:u}){const d=(0,o.of)(g);return n.createElement("div",{className:d.root},n.createElement(s.B,{gap:1},u))}const g=u=>({root:(0,t.css)({padding:u.spacing(1,1,0,1),backgroundColor:u.colors.background.secondary,borderRadius:u.shape.radius.default})})},44339:(Y,A,e)=>{"use strict";e.d(A,{Z:()=>g});var t=e(32196),n=e(28848),o=e.n(n),s=e(96540),r=e(40845);function g({query:d,lang:i,className:l}){const f=(0,r.$j)(),c=u(f),h=o().highlight(d,i.grammar,i.name);return s.createElement("div",{className:(0,t.cx)(c.editorField,"prism-syntax-highlight",l),"aria-label":"selector",dangerouslySetInnerHTML:{__html:h}})}const u=d=>({editorField:(0,t.css)({fontFamily:d.typography.fontFamilyMonospace,fontSize:d.typography.bodySmall.fontSize})})},35146:(Y,A,e)=>{"use strict";e.d(A,{f:()=>t});var t=(n=>(n.Code="code",n.Builder="builder",n))(t||{})},65820:(Y,A,e)=>{"use strict";e.d(A,{Ag:()=>t,jN:()=>n,n5:()=>o});var t=(s=>(s.Aggregations="Aggregations",s.RangeFunctions="Range functions",s.Functions="Functions",s.BinaryOps="Binary operations",s.Trigonometric="Trigonometric",s.Time="Time Functions",s))(t||{}),n=(s=>(s.Abs="abs",s.Absent="absent",s.AbsentOverTime="absent_over_time",s.Acos="acos",s.Acosh="acosh",s.Asin="asin",s.Asinh="asinh",s.Atan="atan",s.Atanh="atanh",s.Avg="avg",s.AvgOverTime="avg_over_time",s.BottomK="bottomk",s.Ceil="ceil",s.Changes="changes",s.Clamp="clamp",s.ClampMax="clamp_max",s.ClampMin="clamp_min",s.Cos="cos",s.Cosh="cosh",s.Count="count",s.CountOverTime="count_over_time",s.CountScalar="count_scalar",s.CountValues="count_values",s.DayOfMonth="day_of_month",s.DayOfWeek="day_of_week",s.DayOfYear="day_of_year",s.DaysInMonth="days_in_month",s.Deg="deg",s.Delta="delta",s.Deriv="deriv",s.DropCommonLabels="drop_common_labels",s.Exp="exp",s.Floor="floor",s.Group="group",s.HistogramQuantile="histogram_quantile",s.HoltWinters="holt_winters",s.Hour="hour",s.Idelta="idelta",s.Increase="increase",s.Irate="irate",s.LabelJoin="label_join",s.LabelReplace="label_replace",s.Last="last",s.LastOverTime="last_over_time",s.Ln="ln",s.Log10="log10",s.Log2="log2",s.Max="max",s.MaxOverTime="max_over_time",s.Min="min",s.MinOverTime="min_over_time",s.Minute="minute",s.Month="month",s.Pi="pi",s.PredictLinear="predict_linear",s.Present="present",s.PresentOverTime="present_over_time",s.Quantile="quantile",s.QuantileOverTime="quantile_over_time",s.Rad="rad",s.Rate="rate",s.Resets="resets",s.Round="round",s.Scalar="scalar",s.Sgn="sgn",s.Sin="sin",s.Sinh="sinh",s.Sort="sort",s.SortDesc="sort_desc",s.Sqrt="sqrt",s.Stddev="stddev",s.StddevOverTime="stddev_over_time",s.Sum="sum",s.SumOverTime="sum_over_time",s.Tan="tan",s.Tanh="tanh",s.Time="time",s.Timestamp="timestamp",s.TopK="topk",s.Vector="vector",s.Year="year",s.Addition="__addition",s.Subtraction="__subtraction",s.MultiplyBy="__multiply_by",s.DivideBy="__divide_by",s.Modulo="__modulo",s.Exponent="__exponent",s.NestedQuery="__nested_query",s.EqualTo="__equal_to",s.NotEqualTo="__not_equal_to",s.GreaterThan="__greater_than",s.LessThan="__less_than",s.GreaterOrEqual="__greater_or_equal",s.LessOrEqual="__less_or_equal",s))(n||{}),o=(s=>(s.Rate="rate",s.Histogram="histogram",s.Binary="binary",s))(o||{})},30915:(Y,A,e)=>{"use strict";e.d(A,{$i:()=>c,Dr:()=>l});var t=e(70416),n=e(47232),o=e(77678),s=e(32631),r=e(32264),g=e(14110),u=e(9631);function d(h,p){let[m]=h,[a]=p,v=m.length,E=m[0],D=m[v-1],b=a.length,P=a[0],y=a[b-1],T;if(v)if(b){if(P>D)T=h.map((M,I)=>h[I].concat(p[I]));else if(y<E)T=p.map((M,I)=>p[I].concat(h[I]));else if(P<=E&&y>=D)T=p;else if(!(P>E&&y<D)){if(P>=E){let M=(0,u.Ls)(P,m);M=m[M]<P?M-1:M,T=h.map((I,x)=>h[x].slice(0,M).concat(p[x]))}else if(y>=E){let M=(0,u.Ls)(y,m);M=m[M]<y?M:M+1,T=p.map((I,x)=>p[x].concat(h[x].slice(M)))}}}else T=h;else b?T=p:T=[[]];return T}function i(h,p,m){let[a,...v]=h,E,D;return a[0]<p&&(E=(0,u.Ls)(p,a),a[E]<p&&E++),a[a.length-1]>m&&(D=(0,u.Ls)(m,a),a[D]>m&&D--),(E!=null||D!=null)&&(a=a.slice(E??0,D),v=v.map(b=>b.slice(E??0,D))),[a,...v]}const l="10m",f=h=>`${h.type}|${h.name}|${JSON.stringify(h.labels??"")}`;class c{constructor(p){this.sendEventsInterval=6e4*10,this.pendingRequestIdsToTargSigs=new Map,this.pendingAccumulatedEvents=new Map,this.cache=new Map,this.sendPendingTrackingEvents=()=>{const a=this.pendingAccumulatedEvents.entries();for(let[v,E]of a)if(!E.sent){const D={datasource:E.datasource.toString(),requestCount:E.requestCount.toString(),savedBytesTotal:E.savedBytesTotal.toString(),initialRequestSize:E.initialRequestSize.toString(),lastRequestSize:E.lastRequestSize.toString(),panelId:E.panelId.toString(),dashId:E.dashId.toString(),expr:E.expr.toString(),refreshIntervalMs:E.refreshIntervalMs.toString(),from:E.from.toString(),queryRangeSeconds:E.queryRangeSeconds.toString()};r.$.featureToggles.prometheusIncrementalQueryInstrumentation?(0,g.rR)("grafana_incremental_queries_profile",D):s.P.api.pushEvent&&s.P.api.pushEvent("incremental query response size",D,"no-interaction",{skipDedupe:!0}),this.pendingAccumulatedEvents.set(v,{...E,sent:!0,requestCount:0,savedBytesTotal:0,initialRequestSize:0,lastRequestSize:0})}};const m=p.overlapString;if((0,t.di)(m)){const a=(0,t.E9)(m);this.overlapWindowMs=(0,t.WT)(a)}else{const a=(0,t.E9)(l);this.overlapWindowMs=(0,t.WT)(a)}(r.$.grafanaJavascriptAgent.enabled||r.$.featureToggles?.prometheusIncrementalQueryInstrumentation)&&p.profileFunction!==void 0?(this.profile(),this.shouldProfile=!0):this.shouldProfile=!1,this.getProfileData=p.profileFunction,this.getTargetSignature=p.getTargetSignature}profile(){typeof PerformanceObserver=="function"&&(this.perfObeserver=new PerformanceObserver(p=>{p.getEntries().forEach(m=>{const a=m,v=typeof a?.transferSize=="number";if(a?.initiatorType==="fetch"&&v){let E=a.name;if(E.includes("/api/ds/query")){let D=E.match(/requestId=([a-z\d]+)/i);if(D){let b=D[1];const P=Math.round(a.transferSize),y=this.pendingRequestIdsToTargSigs.get(b);if(y){const T=this.pendingRequestIdsToTargSigs.entries();for(let[,M]of T)if(M.identity===y.identity&&M.bytes!==null){const I=this.pendingAccumulatedEvents.get(M.identity),x=M.bytes-P;this.pendingAccumulatedEvents.set(M.identity,{datasource:M.datasource??"N/A",requestCount:(I?.requestCount??0)+1,savedBytesTotal:(I?.savedBytesTotal??0)+x,initialRequestSize:M.bytes,lastRequestSize:P,panelId:y.panelId?.toString()??"",dashId:y.dashboardUID??"",expr:y.expr??"",refreshIntervalMs:y.refreshIntervalMs??0,sent:!1,from:y.from??"",queryRangeSeconds:y.queryRangeSeconds??0}),this.pendingRequestIdsToTargSigs.delete(b);return}this.pendingRequestIdsToTargSigs.set(b,{...y,bytes:P})}}}}})}),this.perfObeserver.observe({type:"resource",buffered:!1}),setInterval(this.sendPendingTrackingEvents,this.sendEventsInterval),window.addEventListener("beforeunload",this.sendPendingTrackingEvents))}requestInfo(p){const m=p.range.from.valueOf(),a=p.range.to.valueOf(),v=p.rangeRaw?.to?.toString()==="now";let E=v,D;const b=p.intervalMs,P=new Map;p.targets.forEach(y=>{let T=`${p.dashboardUID}|${p.panelId}|${y.refId}`,M=this.getTargetSignature(p,y);this.shouldProfile&&this.getProfileData&&this.pendingRequestIdsToTargSigs.set(p.requestId,{...this.getProfileData(p,y),identity:T+"|"+M,bytes:null,panelId:p.panelId,dashboardUID:p.dashboardUID??"",from:p.rangeRaw?.from.toString()??"",queryRangeSeconds:p.range.to.diff(p.range.from,"seconds")??"",refreshIntervalMs:b??0}),P.set(T,M)});for(const[y,T]of P){let M=this.cache.get(y);if(M?.sig!==T?E=!1:(D=M?.prevTo??1/0,E=a>D&&m<=D),!E)break}if(E&&D){let y=Math.max(D-this.overlapWindowMs,m);const T=(0,n.KQ)(a),M=(0,n.KQ)((0,o.rs)(y,p.intervalMs));p={...p,range:{...p.range,from:M,to:T}}}else P.forEach((y,T)=>{this.cache.delete(T)});return{requests:[p],targSigs:P,shouldCache:v}}procFrames(p,m,a){if(m?.shouldCache){const v=p.range.from.valueOf(),E=p.range.to.valueOf(),D=new Map;a.forEach(P=>{let y=`${p.dashboardUID}|${p.panelId}|${P.refId}`,T=D.get(y);T||(T=[],D.set(y,T)),T.push(P)});let b=[];D.forEach((P,y)=>{let T=(y?this.cache.get(y)?.frames:null)??[];P.forEach(I=>{if(I.length===0||I.fields.length===0)return;let x=f(I.fields[1]),S=T.find(O=>f(O.fields[1])===x);if(!S)T.push(I);else{let O=S.fields.map(U=>U.values),C=I.fields.map(U=>U.values),L=d(O,C);if(L){for(let U=0;U<L.length;U++)S.fields[U].values=L[U];S.length=S.fields[0].values.length}}});let M=[];T.forEach(I=>{let x=I.fields.map(O=>O.values),S=i(x,v,E);if(S[0].length>0){for(let O=0;O<S.length;O++)I.fields[O].values=S[O];M.push(I)}}),this.cache.set(y,{sig:m.targSigs.get(y),frames:M,prevTo:E}),b.push(...M)}),a=b.map(P=>({...P,fields:P.fields.map(y=>({...y,config:{...y.config},values:y.values.slice()}))}))}return a}}},39132:(Y,A,e)=>{"use strict";e.d(A,{Bm:()=>I,J3:()=>p,L:()=>x,hF:()=>y});var t=e(2543),n=e.n(t),o=e(41987),s=e(41260),r=e(11261),g=e(28240),u=e(52622),d=e(57875),i=e(32264),l=e(19347);const f=/^[+-]?inf(?:inity)?$/i,c=(S,O)=>O.app===o.Jk.Explore&&(S.meta?.custom?.resultType==="vector"||S.meta?.custom?.resultType==="scalar")?!0:O.targets.find(L=>L.refId===S.refId)?.format==="table",h=(S,O)=>S.meta?.type===s.m.HeatmapCells?!1:O.targets.find(L=>L.refId===S.refId)?.format==="heatmap";function p(S,O,C){i.$.featureToggles.prometheusDataplane&&S.data.forEach(Q=>{const ee=O.targets.find(ae=>ae.refId===Q.refId);ee&&ee.legendFormat==="__auto"&&Q.fields.forEach(ae=>{if(ae.labels?.__name__&&ae.labels?.__name__===ae.name){const Z={...ae,name:r.Bc};ae.config.displayNameFromDS=(0,g.Ct)(Z,Q,S.data)}})});const[L,U]=(0,t.partition)(S.data,Q=>c(Q,O)),R=a(L),[B,H]=(0,t.partition)(U,Q=>Q.meta?.custom?.resultType==="exemplar"),{exemplarTraceIdDestinations:W}=C,N=B.map(Q=>{if(W?.length)for(const ee of W){const ae=Q.fields.find(Z=>Z.name===ee.name);if(ae){const Z=E(ee);ae.config.links=ae.config.links?.length?[...ae.config.links,...Z]:Z}}return{...Q,meta:{...Q.meta,dataTopic:u.QR.Annotations}}}),[V,G]=(0,t.partition)(H,Q=>h(Q,O));V.forEach(Q=>{if(Q.name==null){let ee=Q.fields.find(ae=>ae.type===r.PU.number);if(ee){let ae=ee.labels?.le;ae&&(Q.name=ae,ee.config.displayNameFromDS=ae)}}});const _=(0,t.groupBy)(V,Q=>Q.refId);let K=[];for(const Q in _){const ee=_[Q],ae=(0,t.groupBy)(ee,Z=>{const ne=Z.fields.find(q=>q.type===r.PU.number);if(ne?.labels&&m in ne.labels){const{le:q,...te}=ne?.labels;return Object.values(te).join()}return Object.values(ne?.labels??[]).join()});(0,t.forOwn)(ae,(Z,ne)=>{const q=Z.sort(I);K.push(T(M(q)))})}const j=G.map(Q=>({...Q,meta:{...Q.meta,preferredVisualisationType:"graph"}})),k=(0,t.flatten)(K);return{...S,data:[...j,...R,...k,...N]}}const m="le";function a(S){if(S.length===0||S.length===1&&S[0].length===0)return S;const O=(0,t.groupBy)(S,"refId"),C=Object.keys(O);return C.map(U=>{const R=v(C.length,U),B=P({data:[],valueName:R}),H=b([]),W=[];O[U].forEach(V=>{const _=V.fields[1]?.labels??{};Object.keys(_).sort().forEach(K=>{if(!W.some(j=>j.name===K)){const j=K===m;W.push({name:K,config:{filterable:!0},type:j?r.PU.number:r.PU.string,values:[]})}})}),O[U].forEach(V=>{const G=V.fields[0]?.values??[],_=V.fields[1]?.values??[];G.forEach(K=>H.values.push(K)),_.forEach(K=>{B.values.push(x(K));const j=V.fields[1].labels??{};W.forEach(k=>k.values.push(D(j,k.name)))})});const N=[H,...W,B];return{refId:U,fields:N,meta:{...O[U][0].meta,preferredVisualisationType:"rawPrometheus"},length:H.values.length}})}function v(S,O=""){return S>1?`Value #${O}`:"Value"}function E(S){const O=[];if(S.datasourceUid){const L=(0,l.l)().getInstanceSettings(S.datasourceUid);L&&O.push({title:S.urlDisplayLabel||`Query with ${L?.name}`,url:"",internal:{query:{query:"${__value.raw}",queryType:"traceql"},datasourceUid:S.datasourceUid,datasourceName:L?.name??"Data source not found"}})}return S.url&&O.push({title:S.urlDisplayLabel||`Go to ${S.url}`,url:S.url,targetBlank:!0}),O}function D(S,O){return S.hasOwnProperty(O)?O===m?x(S[O]):S[O]:""}function b(S,O=!1){return{name:r.LE,type:r.PU.time,config:{},values:S.map(C=>O?C[0]:C[0]*1e3)}}function P({data:S,valueName:O=r.Bc,parseValue:C=!0,labels:L,displayNameFromDS:U}){return{name:O,type:r.PU.number,display:(0,d.J)(),config:{displayNameFromDS:U},labels:L,values:S.map(R=>C?x(R[1]):R[1])}}function y(S){const O=S.__name__||"";delete S.__name__;const C=Object.entries(S).map(L=>`${L[0]}="${L[1]}"`).join(",");return`${O}{${C}}`}function T(S){if(S.length===0||S.length===1&&S[0].length===0)return[];const O=S[0].fields.find(L=>L.type===r.PU.time),C=S.map(L=>{let U=L.fields.find(R=>R.type===r.PU.number);return{...U,name:U.config.displayNameFromDS}});return[{...S[0],meta:{...S[0].meta,type:s.m.HeatmapRows},fields:[O,...C]}]}function M(S){for(let O=S.length-1;O>0;O--){const C=S[O].fields.find(U=>U.type===r.PU.number),L=S[O-1].fields.find(U=>U.type===r.PU.number);if(!C||!L)throw new Error("Prometheus heatmap transform error: data should be a time series");for(let U=0;U<C.values.length;U++){const R=L.values[U]||[0];C.values[U]-=R}}return S}function I(S,O){let C,L;try{C=x(S.fields[1].state?.displayName??S.name??S.fields[1].name),L=x(O.fields[1].state?.displayName??O.name??O.fields[1].name)}catch(U){return console.error(U),0}return C>L?1:C<L?-1:0}function x(S){return f.test(S)?S[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY:parseFloat(S)}},69120:(Y,A,e)=>{"use strict";e.d(A,{B4:()=>s,N1:()=>n,fD:()=>t,m_:()=>o});var t=(r=>(r.Low="Low",r.Medium="Medium",r.High="High",r.None="None",r))(t||{}),n=(r=>(r.Cortex="Cortex",r.Mimir="Mimir",r.Prometheus="Prometheus",r.Thanos="Thanos",r))(n||{}),o=(r=>(r.Auto="__auto",r.Verbose="__verbose",r.Custom="__custom",r))(o||{}),s=(r=>(r[r.LabelNames=0]="LabelNames",r[r.LabelValues=1]="LabelValues",r[r.MetricNames=2]="MetricNames",r[r.VarQueryResult=3]="VarQueryResult",r[r.SeriesQuery=4]="SeriesQuery",r[r.ClassicQuery=5]="ClassicQuery",r))(s||{})},64616:(Y,A,e)=>{"use strict";e.d(A,{Jv:()=>o,O8:()=>n,d:()=>s});const t={filters:[],groupBy:[]};var n=(r=>(r.Done="done",r.Error="error",r.Pending="pending",r.Streaming="streaming",r))(n||{}),o=(r=>(r.Spans="spans",r.Traces="traces",r))(o||{}),s=(r=>(r.Intrinsic="intrinsic",r.Resource="resource",r.Span="span",r.Unscoped="unscoped",r))(s||{})},44066:(Y,A,e)=>{"use strict";e.d(A,{OB:()=>c,XF:()=>v,Zh:()=>a,dk:()=>p,hK:()=>d,hN:()=>m,lp:()=>D,sL:()=>h,uW:()=>E,yz:()=>b});var t=e(78368),n=e(25352),o=e(37471),s=e(11261),r=e(24293),g=e(14236),u=e(32528);function d(x){const{nodes:S,edges:O}=i(x),[C,L]=(0,u.dY)();for(const U of S)C.add(U);for(const U of O)L.add(U);return[C,L]}function i(x){const S=[],O=[],C=new t.R(x),L=l(C),U=(0,u.pl)(R=>{if(R>=x.length)return;const B=C.get(R);return{span:{...B},id:B.spanID,parentIds:B.parentSpanID?[B.parentSpanID]:[]}});for(let R=0;R<C.length;R++){const B=C.get(R),H=U[B.spanID].children.map(G=>{const _=U[G].span;return[_.startTime,_.startTime+_.duration]}),W=(0,u.jP)(H),N=B.duration-W,V=(0,u.GT)(B.duration,L,N);S.push({[n.u.id]:B.spanID,[n.u.title]:B.serviceName??"",[n.u.subTitle]:B.operationName,[n.u.mainStat]:V.main,[n.u.secondaryStat]:V.secondary,[n.u.color]:N/L}),B.parentSpanID&&U[B.parentSpanID].span&&O.push({[n.u.id]:B.parentSpanID+"--"+B.spanID,[n.u.target]:B.spanID,[n.u.source]:B.parentSpanID})}return{nodes:S,edges:O}}function l(x){let S=0,O=1/0;for(let C=0;C<x.length;C++){const L=x.get(C);L.startTime<O&&(O=L.startTime),L.startTime+L.duration>S&&(S=L.startTime+L.duration)}return S-O}const f="traces_service_graph_request_server_seconds_sum",c="traces_service_graph_request_total",h="traces_service_graph_request_failed_total",p="traces_service_graph_request_server_seconds_bucket",m={expr:"sum(rate(traces_spanmetrics_calls_total{}[$__range])) by (span_name)",topk:5,params:[]},a={expr:"sum(rate(traces_spanmetrics_calls_total{}[$__range])) by (span_name)",topk:5,params:['status_code="STATUS_CODE_ERROR"']},v={expr:"histogram_quantile(.9, sum(rate(traces_spanmetrics_latency_bucket{}[$__range])) by (le))",params:[]},E='span_kind="SPAN_KIND_SERVER"',D=[f,c,h,p];function b(x,S){const O=y(x),C={},L={};return M(O[c],"total",c,C,L),M(O[f],"seconds",f,C,L),M(O[h],"failed",h,C,L),I(C,L,S)}function P(){function x(C,L){return new o.k({name:C,fields:L,meta:{preferredVisualisationType:"nodeGraph"}})}const S=x("Nodes",[{name:n.u.id,type:s.PU.string,values:[]},{name:n.u.title,type:s.PU.string,config:{displayName:"Service name"},values:[]},{name:n.u.subTitle,type:s.PU.string,config:{displayName:"Service namespace"},values:[]},{name:n.u.mainStat,type:s.PU.number,config:{unit:"ms/r",displayName:"Average response time"},values:[]},{name:n.u.secondaryStat,type:s.PU.number,config:{unit:"r/sec",displayName:"Requests per second"},values:[]},{name:n.u.arc+"success",type:s.PU.number,config:{displayName:"Success",color:{fixedColor:"green",mode:r.Y.Fixed}},values:[]},{name:n.u.arc+"failed",type:s.PU.number,config:{displayName:"Failed",color:{fixedColor:"red",mode:r.Y.Fixed}},values:[]}]),O=x("Edges",[{name:n.u.id,type:s.PU.string,values:[]},{name:n.u.source,type:s.PU.string,values:[]},{name:"sourceName",type:s.PU.string,values:[]},{name:"sourceNamespace",type:s.PU.string,values:[]},{name:n.u.target,type:s.PU.string,values:[]},{name:"targetName",type:s.PU.string,values:[]},{name:"targetNamespace",type:s.PU.string,values:[]},{name:n.u.mainStat,type:s.PU.number,config:{unit:"ms/r",displayName:"Average response time"},values:[]},{name:n.u.secondaryStat,type:s.PU.number,config:{unit:"r/sec",displayName:"Requests per second"},values:[]}]);return[S,O]}function y(x){return(x[0]?.data||[]).reduce((S,O)=>{const C=(0,g.Vc)(O);return S[C.refId??"A"]=new t.R(C),S},{})}var T=(x=>(x.sourceName="sourceName",x.sourceNamespace="sourceNamespace",x.targetName="targetName",x.targetNamespace="targetNamespace",x))(T||{});function M(x,S,O,C,L){if(!x)return;const U=`Value #${O}`;for(let R=0;R<x.length;R++){const B=x.get(R),H=B.server_service_namespace?`${B.server_service_namespace}/${B.server}`:B.server,W=B.client_service_namespace?`${B.client_service_namespace}/${B.client}`:B.client,N=`${W}_${H}`;L[N]?L[N][S]=(L[N][S]||0)+B[U]:L[N]={target:H,targetName:B.server,targetNamespace:B.server_service_namespace,source:W,sourceName:B.client,sourceNamespace:B.client_service_namespace,[S]:B[U]},C[H]?C[H][S]=(C[H][S]||0)+B[U]:C[H]={name:B.server,namespace:B.server_service_namespace,[S]:B[U]},C[W]||(C[W]={name:B.client,namespace:B.client_service_namespace,[S]:0})}}function I(x,S,O){const[C,L]=P();for(const U of Object.keys(x)){const R=x[U];C.add({[n.u.id]:U,[n.u.title]:R.name,[n.u.subTitle]:R.namespace,[n.u.mainStat]:R.total?R.seconds/R.total*1e3:Number.NaN,[n.u.secondaryStat]:R.total?Math.round(R.total*100)/100:Number.NaN,[n.u.arc+"success"]:R.total?(R.total-Math.min(R.failed||0,R.total))/R.total:1,[n.u.arc+"failed"]:R.total?Math.min(R.failed||0,R.total)/R.total:0})}for(const U of Object.keys(S)){const R=S[U];L.add({[n.u.id]:U,[n.u.source]:R.source,sourceName:R.sourceName,sourceNamespace:R.sourceNamespace,[n.u.target]:R.target,targetName:R.targetName,targetNamespace:R.targetNamespace,[n.u.mainStat]:R.total?R.seconds/R.total*1e3:Number.NaN,[n.u.secondaryStat]:R.total?Math.round(R.total*100)/100:Number.NaN})}return{nodes:C,edges:L}}},98216:(Y,A,e)=>{"use strict";e.d(A,{TG:()=>R,_2:()=>c,bT:()=>B,cd:()=>S,kX:()=>O,q0:()=>D,qS:()=>C,xw:()=>b});var t=e(87361),n=e(37471),o=e(11261),s=e(91890),r=e(14236),g=e(47696),u=e(57875),d=e(19347),i=e(64616),l=e(44066);function f(K,j,k,Q){const ee=new n.k({fields:[{name:"Time",type:o.PU.time,config:{custom:{width:200}},values:[]},{name:"traceID",type:o.PU.string,config:{displayNameFromDS:"Trace ID",custom:{width:180},links:[{title:"Click to open trace ${__value.raw}",url:"",internal:{datasourceUid:j,datasourceName:k,query:{query:"${__value.raw}"}}}]},values:[]},{name:"Message",type:o.PU.string,values:[]}],meta:{preferredVisualisationType:"table"}});if(!K||Q.length===0)return ee;const ae=K.fields.find(Z=>Z.type===o.PU.time);for(let Z of K.fields){let ne=!1;if(Z.type===o.PU.string){const q=Z.values;for(let te=0;te<q.length;te++){const re=q[te];if(re)for(let de of Q){const ie=re.match(de);if(ie){const ge=ie[1],ve=ae?ae.values[te]:null;ee.fields[0].values.push(ve),ee.fields[1].values.push(ge),ee.fields[2].values.push(re),ne=!0}}}}if(ne)break}return ee}function c(K,j,k,Q){return K.data.forEach((ee,ae)=>{const Z=f(ee,j,k,Q);K.data[ae]=Z}),K}function h(K){if(K.stringValue)return K.stringValue;if(K.boolValue!==void 0)return!!K.boolValue;if(K.intValue!==void 0)return Number.parseInt(K.intValue,10);if(K.doubleValue)return Number.parseFloat(K.doubleValue);if(K.arrayValue){const j=[];for(const k of K.arrayValue.values)j.push(h(k));return j}return""}function p(K){const j=[];let k="OTLPResourceNoServiceName";if(!K)return{serviceName:k,serviceTags:j};for(const Q of K.attributes)Q.key===t._2.SERVICE_NAME&&(k=Q.value.stringValue||k),j.push({key:Q.key,value:h(Q.value)});return{serviceName:k,serviceTags:j}}function m(K){const j=[];if(K.attributes)for(const k of K.attributes)j.push({key:k.key,value:h(k.value)});return j}function a(K){let j;if(K.kind){const k=K.kind.toString().toLowerCase().split("_");j=k.length?k[k.length-1]:K.kind.toString()}return j}function v(K){const j=[];if(K.links)for(const k of K.links){const{traceId:Q,spanId:ee}=k,ae=[];if(k.attributes)for(const Z of k.attributes)ae.push({key:Z.key,value:h(Z.value)});j.push({traceID:Q,spanID:ee,tags:ae})}return j}function E(K){const j=[];if(K.events)for(const k of K.events){const Q=[];if(k.attributes)for(const ee of k.attributes)Q.push({key:ee.key,value:h(ee.value)});j.push({fields:Q,timestamp:k.timeUnixNano/1e6})}return j}function D(K,j=!1){const k=new n.k({fields:[{name:"traceID",type:o.PU.string,values:[]},{name:"spanID",type:o.PU.string,values:[]},{name:"parentSpanID",type:o.PU.string,values:[]},{name:"operationName",type:o.PU.string,values:[]},{name:"serviceName",type:o.PU.string,values:[]},{name:"kind",type:o.PU.string,values:[]},{name:"statusCode",type:o.PU.number,values:[]},{name:"statusMessage",type:o.PU.string,values:[]},{name:"instrumentationLibraryName",type:o.PU.string,values:[]},{name:"instrumentationLibraryVersion",type:o.PU.string,values:[]},{name:"traceState",type:o.PU.string,values:[]},{name:"serviceTags",type:o.PU.other,values:[]},{name:"startTime",type:o.PU.number,values:[]},{name:"duration",type:o.PU.number,values:[]},{name:"logs",type:o.PU.other,values:[]},{name:"references",type:o.PU.other,values:[]},{name:"tags",type:o.PU.other,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}});try{for(const ee of K){const{serviceName:ae,serviceTags:Z}=p(ee.resource);for(const ne of ee.instrumentationLibrarySpans)for(const q of ne.spans)k.add({traceID:q.traceId.length>16?q.traceId.slice(16):q.traceId,spanID:q.spanId,parentSpanID:q.parentSpanId||"",operationName:q.name||"",serviceName:ae,kind:a(q),statusCode:q.status?.code,statusMessage:q.status?.message,instrumentationLibraryName:ne.instrumentationLibrary?.name,instrumentationLibraryVersion:ne.instrumentationLibrary?.version,traceState:q.traceState,serviceTags:Z,startTime:q.startTimeUnixNano/1e6,duration:(q.endTimeUnixNano-q.startTimeUnixNano)/1e6,tags:m(q),logs:E(q),references:v(q)})}}catch(ee){return console.error(ee),{error:{message:"JSON is not valid OpenTelemetry format: "+ee},data:[]}}let Q=[k];return j&&Q.push(...(0,l.hK)(k)),{data:Q}}function b(K){let j={batches:[]},k={};for(let Q=0;Q<K.length;Q++){const ee=K.get(Q);k[ee.serviceName]||(k[ee.serviceName]=j.batches.length,j.batches.push({resource:{attributes:[],droppedAttributesCount:0},instrumentationLibrarySpans:[{spans:[]}]}));let ae=k[ee.serviceName];j.batches[ae].resource.attributes.length===0&&(j.batches[ae].resource.attributes=y(ee.serviceTags)),j.batches[ae].instrumentationLibrarySpans[0].instrumentationLibrary||ee.instrumentationLibraryName&&(j.batches[ae].instrumentationLibrarySpans[0].instrumentationLibrary={name:ee.instrumentationLibraryName,version:ee.instrumentationLibraryVersion?ee.instrumentationLibraryVersion:""}),j.batches[ae].instrumentationLibrarySpans[0].spans.push({traceId:ee.traceID.padStart(32,"0"),spanId:ee.spanID,parentSpanId:ee.parentSpanID||"",traceState:ee.traceState||"",name:ee.operationName,kind:P(ee.kind),startTimeUnixNano:ee.startTime*1e6,endTimeUnixNano:(ee.startTime+ee.duration)*1e6,attributes:ee.tags?y(ee.tags):[],droppedAttributesCount:0,droppedEventsCount:0,droppedLinksCount:0,status:M(ee),events:I(ee.logs),links:x(ee.references)})}return j}function P(K){let j;if(K)switch(K){case"server":j="SPAN_KIND_SERVER";break;case"client":j="SPAN_KIND_CLIENT";break;case"producer":j="SPAN_KIND_PRODUCER";break;case"consumer":j="SPAN_KIND_CONSUMER";break;case"internal":j="SPAN_KIND_INTERNAL";break}return j}function y(K){return K.reduce((j,k)=>[...j,{key:k.key,value:T(k)}],[])}function T(K){if(typeof K.value=="string")return{stringValue:K.value};if(typeof K.value=="boolean")return{boolValue:K.value};if(typeof K.value=="number")return K.value%1===0?{intValue:K.value}:{doubleValue:K.value};if(typeof K.value=="object"&&Array.isArray(K.value)){const j=[];for(const k of K.value)j.push(T(k));return{arrayValue:{values:j}}}return{stringValue:K.value}}function M(K){let j;return K.statusCode!==void 0&&(j={code:K.statusCode,message:K.statusMessage?K.statusMessage:""}),j}function I(K){if(!K||!K.length)return;let j=[];for(const k of K){let Q={timeUnixNano:k.timestamp*1e6,attributes:[],droppedAttributesCount:0,name:""};for(const ee of k.fields)Q.attributes.push({key:ee.key,value:T(ee)});j.push(Q)}return j}function x(K){if(!K||!K.length)return;let j=[];for(const k of K){let Q={traceId:k.traceID,spanId:k.spanID,attributes:[],droppedAttributesCount:0};if(k.tags?.length)for(const ee of k.tags)Q.attributes?.push({key:ee.key,value:T(ee)});j.push(Q)}return j}const S="Related profiles";function O(K,j,k=!1){const Q=K.data[0];if(!Q)return _;const ae=j?.jsonData?.tracesToProfiles;let Z;if(ae?.datasourceUid&&(Z=(0,d.l)().getInstanceSettings(ae.datasourceUid)),ae&&Z){const q=ae.customQuery?ae.query:void 0,te={title:S,url:"",internal:{datasourceUid:Z.uid,datasourceName:Z.name,query:{labelSelector:q||"{${__tags}}",groupBy:[],profileTypeId:ae.profileTypeId??"",queryType:"profile",spanSelector:['${__span.tags["pyroscope.profile.id"]}'],refId:"profile"}},origin:s.x0.Datasource};Q.fields.forEach(re=>{re.name==="tags"&&(re.config.links=[te])})}let ne=[...K.data];return k&&ne.push(...(0,l.hK)((0,r.Vc)(Q))),{...K,data:ne}}function C(K,j){const k=new n.k({name:"Traces",refId:"traces",fields:[{name:"traceID",type:o.PU.string,values:[],config:{unit:"string",displayNameFromDS:"Trace ID",links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:j.uid,datasourceName:j.name,query:{query:"${__value.raw}",queryType:"traceql"}}}]}},{name:"traceService",type:o.PU.string,config:{displayNameFromDS:"Trace service"},values:[]},{name:"traceName",type:o.PU.string,config:{displayNameFromDS:"Trace name"},values:[]},{name:"startTime",type:o.PU.time,config:{displayNameFromDS:"Start time"},values:[]},{name:"traceDuration",type:o.PU.number,config:{displayNameFromDS:"Duration",unit:"ms"},values:[]}],meta:{preferredVisualisationType:"table"}});if(!K?.length)return k;const Q=K.sort((ee,ae)=>parseInt(ae?.startTimeUnixNano,10)/1e6-parseInt(ee?.startTimeUnixNano,10)/1e6).map(L);for(const ee of Q)k.add(ee);return k}function L(K){return{traceID:K.traceID,startTime:parseInt(K.startTimeUnixNano,10)/1e6,traceDuration:K.durationMs,traceService:K.rootServiceName||"",traceName:K.rootTraceName||""}}const U=K=>""+(K.stringValue||K.intValue||K.doubleValue||K.boolValue||"");function R(K){return K.series.map(k=>{const Q={};k.labels.forEach(ae=>{Q[ae.key]=U(ae.value)});const ee=k.labels.length===1?U(k.labels[0].value):`{${k.labels.map(ae=>`${ae.key}=${U(ae.value)}`).join(",")}}`;return(0,r.EI)({refId:k.promLabels,fields:[{name:"time",type:o.PU.time,values:k.samples.map(ae=>parseInt(ae.timestampMs,10))},{name:k.promLabels,labels:Q,type:o.PU.number,values:k.samples.map(ae=>ae.value),config:{displayNameFromDS:ee}}],meta:{preferredVisualisationType:"graph"}})})}function B(K,j,k){return k===i.Jv.Spans?W(K,j):H(K,j)}function H(K,j){const k=(0,r.EI)({name:"Traces",refId:"traces",fields:[{name:"traceID",type:o.PU.string,config:{unit:"string",displayNameFromDS:"Trace ID",custom:{width:200},links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:j.uid,datasourceName:j.name,query:{query:"${__value.raw}",queryType:"traceql"}}}]}},{name:"startTime",type:o.PU.time,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"traceService",type:o.PU.string,config:{displayNameFromDS:"Service"}},{name:"traceName",type:o.PU.string,config:{displayNameFromDS:"Name"}},{name:"traceDuration",type:o.PU.number,config:{displayNameFromDS:"Duration",unit:"ms",custom:{width:120}}},{name:"nested",type:o.PU.nestedFrames}],meta:{preferredVisualisationType:"table",uniqueRowIdFields:[0]}});return K?.length?(k.length=K.length,K.sort((Q,ee)=>parseInt(ee?.startTimeUnixNano,10)/1e6-parseInt(Q?.startTimeUnixNano,10)/1e6).forEach(Q=>{const ee=L(Q);k.fields[0].values.push(ee.traceID),k.fields[1].values.push(ee.startTime),k.fields[2].values.push(ee.traceService),k.fields[3].values.push(ee.traceName),k.fields[4].values.push(ee.traceDuration),Q.spanSets?k.fields[5].values.push(Q.spanSets.map(ae=>V(Q,ae,j))):Q.spanSet&&k.fields[5].values.push([V(Q,Q.spanSet,j)])}),[k]):[k]}function W(K,j){const k={};let Q=!1;K?.forEach(ae=>N(ae).forEach(Z=>{Z.attributes?.forEach(ne=>{k[ne.key]={name:ne.key,type:o.PU.string,config:{displayNameFromDS:ne.key}}}),Z.spans.forEach(ne=>{ne.name&&(Q=!0),ne.attributes?.forEach(q=>{k[q.key]={name:q.key,type:o.PU.string,config:{displayNameFromDS:q.key}}})})}));const ee=new n.k({name:"Spans",refId:"traces",fields:[{name:"traceIdHidden",type:o.PU.string,config:{custom:{hidden:!0}}},{name:"traceService",type:o.PU.string,config:{displayNameFromDS:"Trace Service",custom:{width:200}}},{name:"traceName",type:o.PU.string,config:{displayNameFromDS:"Trace Name",custom:{width:200}}},{name:"spanID",type:o.PU.string,config:{unit:"string",displayNameFromDS:"Span ID",custom:{width:200},links:[{title:"Span: ${__value.raw}",url:"",internal:{datasourceUid:j.uid,datasourceName:j.name,query:{query:"${__data.fields.traceIdHidden}",queryType:"traceql"},panelsState:{trace:{spanId:"${__value.raw}"}}}}]}},{name:"time",type:o.PU.time,config:{displayNameFromDS:"Start time"}},{name:"name",type:o.PU.string,config:{displayNameFromDS:"Name",custom:{hidden:!Q}}},...Object.values(k).sort((ae,Z)=>ae.name.localeCompare(Z.name)),{name:"duration",type:o.PU.number,config:{displayNameFromDS:"Duration",unit:"ns",custom:{width:120}}}],meta:{preferredVisualisationType:"table"}});return!K||!K.length?[ee]:(K.sort((ae,Z)=>parseInt(Z?.startTimeUnixNano,10)/1e6-parseInt(ae?.startTimeUnixNano,10)/1e6).forEach(ae=>{N(ae).forEach(Z=>{Z.spans.forEach(ne=>{ee.add(G(ne,Z,ae))})})}),[ee])}const N=K=>K.spanSets||(K.spanSet?[K.spanSet]:[]),V=(K,j,k)=>{const Q={};let ee=!1;j.attributes?.map(ne=>{Q[ne.key]={name:ne.key,type:o.PU.string,config:{displayNameFromDS:ne.key},values:[]}}),j.spans.forEach(ne=>{ne.name&&(ee=!0),ne.attributes?.forEach(q=>{Q[q.key]={name:q.key,type:o.PU.string,config:{displayNameFromDS:q.key},values:[]}})});const ae=new n.k({fields:[{name:"traceIdHidden",type:o.PU.string,config:{custom:{hidden:!0}},values:[]},{name:"spanID",type:o.PU.string,values:[],config:{unit:"string",displayNameFromDS:"Span ID",custom:{width:200},links:[{title:"Span: ${__value.raw}",url:"",internal:{datasourceUid:k.uid,datasourceName:k.name,query:{query:"${__data.fields.traceIdHidden}",queryType:"traceql"},panelsState:{trace:{spanId:"${__value.raw}"}}}}]}},{name:"time",type:o.PU.time,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"name",type:o.PU.string,values:[],config:{displayNameFromDS:"Name",custom:{hidden:!ee}}},...Object.values(Q).sort((ne,q)=>ne.name.localeCompare(q.name)),{name:"duration",type:o.PU.number,values:[],config:{displayNameFromDS:"Duration",unit:"ns",custom:{width:120}}}],meta:{preferredVisualisationType:"table"}}),Z=(0,g.a)();for(const ne of ae.fields)ne.display=(0,u.J)({field:ne,theme:Z});return j.spans.forEach(ne=>{ae.add(G(ne,j,K))}),ae};function G(K,j,k){const Q=parseInt(K.startTimeUnixNano,10)/1e6,ee={traceIdHidden:k.traceID,traceService:k.rootServiceName||"",traceName:k.rootTraceName||"",spanID:K.spanID,time:Q,duration:parseInt(K.durationNanos,10),name:K.name};let ae=[];return j.attributes&&(ae=ae.concat(j.attributes)),K.attributes&&(ae=ae.concat(K.attributes)),ae.forEach(Z=>{(Z.value.boolValue||Z.value.Value?.bool_value)&&(ee[Z.key]=Z.value.boolValue||Z.value.Value?.bool_value),(Z.value.doubleValue||Z.value.Value?.double_value)&&(ee[Z.key]=Z.value.doubleValue||Z.value.Value?.double_value),(Z.value.intValue||Z.value.Value?.int_value)&&(ee[Z.key]=Z.value.intValue||Z.value.Value?.int_value),(Z.value.stringValue||Z.value.Value?.string_value)&&(ee[Z.key]=Z.value.stringValue||Z.value.Value?.string_value)}),ee}const _={data:[new n.k({fields:[{name:"trace",type:o.PU.trace,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}})]}},54807:(Y,A,e)=>{"use strict";e.d(A,{S:()=>o,T:()=>d});var t=e(37471),n=e(11261);function o(l){const f=l.map(s),c=new t.k({fields:[{name:"traceID",type:n.PU.string,values:[]},{name:"spanID",type:n.PU.string,values:[]},{name:"parentSpanID",type:n.PU.string,values:[]},{name:"operationName",type:n.PU.string,values:[]},{name:"serviceName",type:n.PU.string,values:[]},{name:"serviceTags",type:n.PU.other,values:[]},{name:"startTime",type:n.PU.number,values:[]},{name:"duration",type:n.PU.number,values:[]},{name:"logs",type:n.PU.other,values:[]},{name:"tags",type:n.PU.other,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"zipkin"}}});for(const h of f)c.add(h);return c}function s(l){const f={traceID:l.traceId,spanID:l.id,parentSpanID:l.parentId,operationName:l.name,serviceName:l.localEndpoint?.serviceName||l.remoteEndpoint?.serviceName||"unknown",serviceTags:g(l),startTime:l.timestamp/1e3,duration:l.duration/1e3,logs:l.annotations?.map(r)??[],tags:Object.keys(l.tags||{}).reduce((c,h)=>h==="error"?(c.push({key:"error",value:!0}),c.push({key:"errorValue",value:l.tags.error}),c):(c.push({key:h,value:l.tags[h]}),c),[])};return l.kind&&(f.tags=[{key:"kind",value:l.kind},...f.tags??[]]),l.shared&&(f.tags=[{key:"shared",value:l.shared},...f.tags??[]]),f}function r(l){return{timestamp:l.timestamp,fields:[{key:"annotation",value:l.value}]}}function g(l){const f=l.localEndpoint||l.remoteEndpoint;return f?[u("ipv4",f.ipv4),u("ipv6",f.ipv6),u("port",f.port),u("endpointType",l.localEndpoint?"local":"remote")].filter(c=>!!c):[]}function u(l,f){if(f)return{key:l,value:f}}const d=l=>{let f=[];for(let c=0;c<l.length;c++){const h=l.get(c);f.push({traceId:h.traceID,parentId:h.parentSpanID,name:h.operationName,id:h.spanID,timestamp:h.startTime*1e3,duration:h.duration*1e3,...i(h),annotations:h.logs.length?h.logs.map(p=>({timestamp:p.timestamp,value:p.fields[0].value})):void 0,tags:h.tags.length?h.tags.filter(p=>p.key!=="kind"&&p.key!=="endpointType"&&p.key!=="shared").reduce((p,m)=>m.key==="error"?{...p,[m.key]:h.tags.find(a=>a.key==="errorValue").value||""}:{...p,[m.key]:m.value},{}):void 0,kind:h.tags.find(p=>p.key==="kind")?.value,shared:h.tags.find(p=>p.key==="shared")?.value})}return f},i=l=>{const f=l.serviceTags.find(c=>c.key==="endpointType")?.value==="local"?"localEndpoint":"remoteEndpoint";return l.serviceName!=="unknown"?{[f]:{serviceName:l.serviceName,ipv4:l.serviceTags.find(c=>c.key==="ipv4")?.value,ipv6:l.serviceTags.find(c=>c.key==="ipv6")?.value,port:l.serviceTags.find(c=>c.key==="port")?.value}}:void 0}},64861:(Y,A,e)=>{"use strict";e.d(A,{nE:()=>s,r6:()=>o,xB:()=>t,zX:()=>n});var t=(r=>(r[r.AlphaAsc=1]="AlphaAsc",r[r.AlphaDesc=2]="AlphaDesc",r[r.Importance=3]="Importance",r[r.TimeAsc=4]="TimeAsc",r[r.TimeDesc=5]="TimeDesc",r))(t||{}),n=(r=>(r.Current="current",r.RecentChanges="changes",r))(n||{}),o=(r=>(r.Default="default",r.Custom="custom",r))(o||{}),s=(r=>(r.List="list",r.Stat="stat",r))(s||{})},39758:(Y,A,e)=>{"use strict";e.d(A,{mn:()=>g,ur:()=>n});var t=e(97706);const n=1,o=2,s=3,r=(u,d,i,l)=>(0,t.h)(d+u*(i+l),6);function g(u,d,i,l,f){let c=1-d,h=i===n?c/(u-1):i===o?c/u:i===s?c/(u+1):0;(isNaN(h)||h===1/0)&&(h=0);let p=i===n?0:i===o?h/2:i===s?h:0,m=d/u,a=(0,t.h)(m,6);if(l==null)for(let v=0;v<u;v++)f(v,r(v,p,m,h),a);else f(l,r(l,p,m,h),a)}},4134:(Y,A,e)=>{"use strict";e.d(A,{C$:()=>g,HY:()=>r,ur:()=>o});const t=10,n=4;function o(u,d,i,l,f,c){return u>=i&&u<=f&&d>=l&&d<=c}function s(u,d,i){let l;if(u.o.length&&(l=u.o.find(f=>f.sidx===d&&f.didx===i)),l==null&&u.q)for(let f=0;f<u.q.length&&(l=s(u.q[f],d,i),!l);f++);return l}function r(u,d){return u.x<=d.x+d.w&&u.x+u.w>=d.x&&u.y+u.h>=d.y&&u.y<=d.y+d.h}class g{constructor(d,i,l,f,c=0){this.x=d,this.y=i,this.w=l,this.h=f,this.l=c,this.o=[],this.q=null}split(){let d=this,i=d.x,l=d.y,f=d.w/2,c=d.h/2,h=d.l+1;d.q=[new g(i+f,l,f,c,h),new g(i,l,f,c,h),new g(i,l+c,f,c,h),new g(i+f,l+c,f,c,h)]}quads(d,i,l,f,c){let h=this,p=h.q,m=h.x+h.w/2,a=h.y+h.h/2,v=i<a,E=d<m,D=d+l>m,b=i+f>a;v&&D&&c(p[0]),E&&v&&c(p[1]),E&&b&&c(p[2]),D&&b&&c(p[3])}add(d){let i=this;if(i.q!=null)i.quads(d.x,d.y,d.w,d.h,l=>{l.add(d)});else{let l=i.o;if(l.push(d),l.length>t&&i.l<n){i.split();for(let f=0;f<l.length;f++){let c=l[f];i.quads(c.x,c.y,c.w,c.h,h=>{h.add(c)})}i.o.length=0}}}get(d,i,l,f,c){let h=this,p=h.o;for(let m=0;m<p.length;m++)c(p[m]);h.q!=null&&h.quads(d,i,l,f,m=>{m.get(d,i,l,f,c)})}clear(){this.o.length=0,this.q=null}}},58384:(Y,A,e)=>{"use strict";e.d(A,{d:()=>c,l:()=>h});var t=e(2543),n=e.n(t),o=e(96540),s=e(47070),r=e(56323),g=e(52622),u=e(97696),d=e(59796),i=e(12509),l=e(2913),f=e(17516);class c extends o.PureComponent{constructor(){super(...arguments),this.renderComponent=(m,a)=>{const{options:v,fieldConfig:E}=this.props,{value:D,alignmentFactors:b,orientation:P,width:y,height:T,count:M}=m,{field:I,display:x,view:S,colIndex:O}=D,{openMenu:C,targetClassName:L}=a;let U;return S&&(0,t.isNumber)(O)&&(U=S.getFieldDisplayProcessor(O)),o.createElement(u.xE,{value:h(M,E.defaults,x),width:y,height:T,orientation:P,field:I,text:v.text,display:U,theme:l.$W.theme2,itemSpacing:this.getItemSpacing(),displayMode:v.displayMode,onClick:C,className:L,alignmentFactors:M>1?b:void 0,showUnfilled:v.showUnfilled,valueDisplayMode:v.valueMode,namePlacement:v.namePlacement})},this.renderValue=m=>{const{value:a,orientation:v}=m,{hasLinks:E,getLinks:D}=a;return E&&D?o.createElement("div",{style:{width:"100%",display:v===s.wV.Vertical?"flex":"initial"}},o.createElement(d.e,{style:{height:"100%"},links:D},b=>this.renderComponent(m,b))):this.renderComponent(m,{})},this.getValues=()=>{const{data:m,options:a,replaceVariables:v,fieldConfig:E,timeZone:D}=this.props;return(0,r.PI)({fieldConfig:E,reduceOptions:a.reduceOptions,replaceVariables:v,theme:l.$W.theme2,data:m.series,timeZone:D})}}getItemSpacing(){return this.props.options.displayMode==="lcd"?2:10}getOrientation(){const{options:m,width:a,height:v}=this.props,{orientation:E}=m;return E===s.wV.Auto?a>v?s.wV.Vertical:s.wV.Horizontal:E}calcBarSize(){const{options:m}=this.props,a=this.getOrientation(),v=m.sizing===g.T6.Manual,E=a===s.wV.Vertical,D=a===s.wV.Horizontal,b=v&&E?m.minVizWidth:f.K.minVizWidth,P=v&&D?m.minVizHeight:f.K.minVizHeight,y=v&&D?m.maxVizHeight:f.K.maxVizHeight;return{minVizWidth:b,minVizHeight:P,maxVizHeight:y}}render(){const{height:m,width:a,options:v,data:E,renderCounter:D}=this.props,{minVizWidth:b,minVizHeight:P,maxVizHeight:y}=this.calcBarSize();return o.createElement(i.S,{source:E,getAlignmentFactors:r.XS,getValues:this.getValues,renderValue:this.renderValue,renderCounter:D,width:a,height:m,maxVizHeight:y,minVizWidth:b,minVizHeight:P,itemSpacing:this.getItemSpacing(),orientation:v.orientation})}}function h(p,m,a){return p===1&&!m.displayName?{...a,title:void 0}:a}},17516:(Y,A,e)=>{"use strict";e.d(A,{K:()=>n});var t=e(52622);const n={displayMode:t.eX.Gradient,maxVizHeight:300,minVizHeight:16,minVizWidth:8,namePlacement:t.TZ.Auto,showUnfilled:!0,sizing:t.T6.Auto,valueMode:t.$l.Color}},14738:(Y,A,e)=>{"use strict";e.r(A),e.d(A,{plugin:()=>P});var t=e(65158),n=e(52622),o=e(71242),s=e(23799),r=e(63250);const g=y=>(0,r._$)(y),u=(y,T,M)=>{const I=(0,r.gl)(y,T,M);if(T==="singlestat"&&M.angular){const x=M.angular.gauge;x&&(I.showThresholdMarkers=x.thresholdMarkers,I.showThresholdLabels=x.thresholdLabels)}return I};var d=e(96540),i=e(57875),l=e(56323),f=e(95164),c=e(59796),h=e(12509),p=e(2913),m=e(58384);const a={minVizHeight:75,minVizWidth:75,showThresholdLabels:!1,showThresholdMarkers:!0,sizing:n.T6.Auto};class v extends d.PureComponent{constructor(){super(...arguments),this.renderComponent=(T,M)=>{const{options:I,fieldConfig:x}=this.props,{width:S,height:O,count:C,value:L}=T,{field:U,display:R}=L,{openMenu:B,targetClassName:H}=M;return d.createElement(f._,{value:(0,m.l)(C,x.defaults,R),width:S,height:O,field:U,text:I.text,showThresholdLabels:I.showThresholdLabels,showThresholdMarkers:I.showThresholdMarkers,theme:p.$W.theme2,onClick:B,className:H,orientation:I.orientation})},this.renderValue=T=>{const{value:M}=T,{getLinks:I,hasLinks:x}=M;return x&&I?d.createElement(c.e,{links:I,style:{flexGrow:1}},S=>this.renderComponent(T,S)):this.renderComponent(T,{})},this.getValues=()=>{const{data:T,options:M,replaceVariables:I,fieldConfig:x,timeZone:S}=this.props;for(let O of T.series)for(let C of O.fields)if(C.config.unit==="percent"||C.config.unit==="percentunit"){const L=C.config.min??0,U=C.config.max??(C.config.unit==="percent"?100:1);C.state=C.state??{},C.state.range={min:L,max:U,delta:U-L},C.display=(0,i.J)({field:C,theme:p.$W.theme2})}return(0,l.PI)({fieldConfig:x,reduceOptions:M.reduceOptions,replaceVariables:I,theme:p.$W.theme2,data:T.series,timeZone:S})},this.calculateGaugeSize=()=>{const{options:T}=this.props,M=T.orientation,I=T.sizing===n.T6.Manual,x=M===n.wV.Vertical,S=M===n.wV.Horizontal,O=I&&x?T.minVizWidth:a.minVizWidth,C=I&&S?T.minVizHeight:a.minVizHeight;return{minVizWidth:O,minVizHeight:C}}}render(){const{height:T,width:M,data:I,renderCounter:x,options:S}=this.props,{minVizHeight:O,minVizWidth:C}=this.calculateGaugeSize();return d.createElement(h.S,{getValues:this.getValues,renderValue:this.renderValue,width:M,height:T,source:I,autoGrid:!0,renderCounter:x,orientation:S.orientation,minVizHeight:O,minVizWidth:C})}}var E=e(50082),D=e(38824);class b{getSuggestionsForData(T){const{dataSummary:M}=T;if(!M.hasData||!M.hasNumberField||M.numberFieldCount>=50)return;const I=T.getListAppender({name:D.m.Gauge,pluginId:"gauge",options:{},fieldConfig:{defaults:{thresholds:{steps:[{value:-1/0,color:"green"},{value:70,color:"orange"},{value:85,color:"red"}],mode:E.O.Percentage},custom:{}},overrides:[]},cardOptions:{previewModifier:x=>{x.options.reduceOptions.values&&(x.options.reduceOptions.limit=2)}}});M.hasStringField&&M.frameCount===1&&M.rowCountTotal<10?(I.append({name:D.m.Gauge,options:{reduceOptions:{values:!0,calcs:[]}}}),I.append({name:D.m.GaugeNoThresholds,options:{reduceOptions:{values:!0,calcs:[]},showThresholdMarkers:!1}})):(I.append({name:D.m.Gauge,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),I.append({name:D.m.GaugeNoThresholds,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},showThresholdMarkers:!1}}))}}const P=new t.m(v).useFieldConfig({useCustomConfig:y=>{y.addNumberInput({path:"neutral",name:"Neutral",description:"Leave empty to use Min as neutral point",category:["Gauge"],settings:{placeholder:"auto"}})}}).setPanelOptions(y=>{(0,s.L)(y),(0,s.h)(y),y.addBooleanSwitch({path:"showThresholdLabels",name:"Show threshold labels",description:"Render the threshold values around the gauge bar",defaultValue:a.showThresholdLabels}).addBooleanSwitch({path:"showThresholdMarkers",name:"Show threshold markers",description:"Renders the thresholds as an outer bar",defaultValue:a.showThresholdMarkers}).addRadio({path:"sizing",name:"Gauge size",settings:{options:[{value:n.T6.Auto,label:"Auto"},{value:n.T6.Manual,label:"Manual"}]},defaultValue:a.sizing,showIf:T=>T.orientation!==n.wV.Auto}).addSliderInput({path:"minVizWidth",name:"Min width",description:"Minimum column width (vertical orientation)",defaultValue:a.minVizWidth,settings:{min:0,max:600,step:1},showIf:T=>T.sizing===n.T6.Manual&&T.orientation===n.wV.Vertical}).addSliderInput({path:"minVizHeight",name:"Min height",description:"Minimum row height (horizontal orientation)",defaultValue:a.minVizHeight,settings:{min:0,max:600,step:1},showIf:T=>T.sizing===n.T6.Manual&&T.orientation===n.wV.Horizontal}),o.I(y)}).setPanelChangeHandler(u).setSuggestionsSupplier(new b).setMigrationHandler(g)},19743:(Y,A,e)=>{"use strict";e.d(A,{x:()=>s});var t=e(96540),n=e(1173),o=e(74668);const s=({value:r,context:g,onChange:u})=>{const d=(0,t.useCallback)(i=>{u(i?.length?{id:n.jR.byRefId,options:i}:void 0)},[u]);return t.createElement(o.X,{value:r?.options,onChange:d,data:g.data,placeholder:"Change filter"})}},33744:(Y,A,e)=>{"use strict";e.d(A,{DY:()=>s,G4:()=>u,Sq:()=>i,T5:()=>d,W_:()=>n,_7:()=>o,fX:()=>r,wq:()=>g,yQ:()=>l,yu:()=>f});var t=e(52622),n=(c=>(c.Point="point",c.Line="line",c.Polygon="polygon",c.Any="*any*",c))(n||{});const o=5;var s=(c=>(c.Left="left",c.Center="center",c.Right="right",c))(s||{}),r=(c=>(c.Top="top",c.Middle="middle",c.Bottom="bottom",c))(r||{}),g=(c=>(c.Left="left",c.Center="center",c.Right="right",c))(g||{}),u=(c=>(c.Top="top",c.Center="center",c.Bottom="bottom",c))(u||{});const d=Object.freeze({size:{fixed:o,min:2,max:15},color:{fixed:"dark-green"},opacity:.4,symbol:{mode:t.q_.Fixed,fixed:"img/icons/marker/circle.svg"},symbolAlign:{horizontal:"center",vertical:"center"},textConfig:{fontSize:12,textAlign:"center",textBaseline:"middle",offsetX:0,offsetY:0},rotation:{fixed:0,mode:t.WQ.Mod,min:-360,max:360}});var i=(c=>(c.color="fill",c.opacity="fill-opacity",c.lineWidth="stroke-width",c))(i||{}),l=(c=>(c.color="marker-color",c.size="marker-size",c))(l||{}),f=(c=>(c.color="stroke",c.lineWidth="stroke-width",c))(f||{})},61994:(Y,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(32196),n=e(96540),o=e(5636);const s=r=>(0,o.gU)(r)?n.createElement("a",{href:r,target:"_blank",className:(0,t.cx)("external-link"),rel:"noreferrer"},r):r},5636:(Y,A,e)=>{"use strict";e.d(A,{Bz:()=>c,G_:()=>d,cA:()=>f,gU:()=>m,o3:()=>p,q:()=>h,rd:()=>l,ue:()=>g});var t=e(92347),n=e(40239),o=e(63577),s=e(90183),r=e(33744);function g(a,v,E,D){const b={};return D&&Object.keys(D).length?(b.color=(0,o.getColorDimension)(a,D.color??r.T5.color,E),b.size=(0,o.getScaledDimension)(a,D.size??r.T5.size),b.rotation=(0,o.getScalarDimension)(a,D.rotation??r.T5.rotation),D.text&&(D.text.field||D.text.fixed)&&(b.text=(0,o.getTextDimension)(a,D.text))):v.fields&&(v.fields.color&&(b.color=(0,o.getColorDimension)(a,v.config.color??r.T5.color,E)),v.fields.size&&(b.size=(0,o.getScaledDimension)(a,v.config.size??r.T5.size)),v.fields.text&&(b.text=(0,o.getTextDimension)(a,v.config.text)),v.fields.rotation&&(b.rotation=(0,o.getScalarDimension)(a,v.config.rotation??r.T5.rotation))),b}let u;function d(){return u||(u=[],i()),u}async function i(){const a=await(0,s.o)();for(let v of["maps","gazetteer"])a.listFiles(v).subscribe({next:E=>{E.forEach(D=>{if(D.name.endsWith(".geojson")){const b=`public/${v}/${D.name}`;u.push({value:b,label:b})}})}})}const l=(a,v,E)=>{const D=a.initMapView(v.view);return a.map=new t.A({view:D,pixelRatio:1,layers:[],controls:[],target:E,interactions:(0,n.N)({mouseWheelZoom:!1})})},f=(a,v)=>{a.initControls(v.controls),a.forceUpdate()},c=(a,v,E)=>{a.panelContext&&a.panelContext.onInstanceStateChange&&a.panelContext.onInstanceStateChange({map:a.map,layers:v,selected:E,actions:a.actions})},h=a=>{let v=a.layers.length;for(;v<100;){const E=`Layer ${v++}`;if(!a.byName.has(E))return E}return`Layer ${Date.now()}`};function p(a,v,E,D){const b=a.getPixelFromCoordinate(E),P=a.getPixelFromCoordinate(D),y=Math.abs(b[0]-P[0]),T=Math.abs(b[1]-P[1]);return y>v||T>v}const m=a=>{try{return new URL(a).protocol.includes("http")}catch{return!1}}},86106:(Y,A,e)=>{"use strict";e.d(A,{d:()=>o});var t=e(96540),n=e(25469);function o(s){const r={position:"relative",top:"auto",right:"auto",marginRight:0};return t.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",paddingBottom:"6px"}},t.createElement(n.J,{onClick:s.onClick,style:s.style??r}))}},52995:(Y,A,e)=>{"use strict";e.d(A,{P7:()=>n,uM:()=>o,KQ:()=>r});var t=e(52622),n=(g=>(g.Opacity="opacity",g.Scheme="scheme",g))(n||{}),o=(g=>(g.Exponential="exponential",g.Linear="linear",g))(o||{});const s={calculate:!1,cellGap:1,cellValues:{},color:{scheme:"Oranges",fill:"dark-orange",reverse:!1,exponent:.5,steps:64},exemplars:{color:"rgba(255,0,255,0.7)"},filterValues:{le:1e-9},legend:{show:!0},showValue:t.yL.Auto,tooltip:{mode:t.$N.Single,yHistogram:!1,showColorScale:!1}},r={...s,color:{...s.color,mode:n.Scheme,scale:o.Exponential},yAxis:{...s.yAxis,axisPlacement:t.vM.Left},rowsFrame:{...s.rowsFrame,layout:t.D7.auto}}},69386:(Y,A,e)=>{"use strict";e.d(A,{K:()=>l});var t=e(32196),n=e(96540),o=e(70255),s=e(40672),r=e(72724),g=e(40845),u=e(72129);function d({width:c,showImage:h,data:p,index:m}){const a=(0,g.of)(f),v=c>600,E=p.get(m);return n.createElement("article",{className:(0,t.cx)(a.item,v&&a.itemWide)},h&&E.ogImage&&n.createElement("a",{tabIndex:-1,href:s.sQ.sanitizeUrl(E.link),target:"_blank",rel:"noopener noreferrer",className:(0,t.cx)(a.socialImage,v&&a.socialImageWide),"aria-hidden":!0},n.createElement("img",{src:E.ogImage,alt:E.title})),n.createElement("div",{className:a.body},n.createElement("time",{className:a.date,dateTime:(0,r.LE)(E.date,{format:"MMM DD"})},(0,r.LE)(E.date,{format:"MMM DD"})," "),n.createElement("a",{className:a.link,href:s.sQ.sanitizeUrl(E.link),target:"_blank",rel:"noopener noreferrer"},n.createElement("h3",{className:a.title},E.title)),n.createElement("div",{className:a.content,dangerouslySetInnerHTML:{__html:s.sQ.sanitize(E.content)}})))}const i=({width:c,showImage:h,rootProps:p})=>{const m=(0,g.of)(f),a=c>600;return n.createElement("div",{className:(0,t.cx)(m.item,a&&m.itemWide),...p},h&&n.createElement(o.A,{containerClassName:(0,t.cx)(m.socialImage,a&&m.socialImageWide),width:a?"250px":"100%",height:a?"150px":c*.5}),n.createElement("div",{className:m.body},n.createElement(o.A,{containerClassName:m.date,width:60}),n.createElement(o.A,{containerClassName:m.title,width:250}),n.createElement(o.A,{containerClassName:m.content,width:"100%",count:6})))},l=(0,u.j)(d,i),f=c=>({container:(0,t.css)({height:"100%"}),item:(0,t.css)({display:"flex",padding:c.spacing(1),position:"relative",marginBottom:c.spacing(.5),marginRight:c.spacing(1),borderBottom:`2px solid ${c.colors.border.weak}`,background:c.colors.background.primary,flexDirection:"column",flexShrink:0}),itemWide:(0,t.css)({flexDirection:"row"}),body:(0,t.css)({display:"flex",flexDirection:"column",flex:1}),socialImage:(0,t.css)({display:"flex",alignItems:"center",marginBottom:c.spacing(1),"> img":{width:"100%",borderRadius:`${c.shape.radius.default} ${c.shape.radius.default} 0 0`}}),socialImageWide:(0,t.css)({marginRight:c.spacing(2),marginBottom:0,"> img":{width:"250px",borderRadius:c.shape.radius.default}}),link:(0,t.css)({color:c.colors.text.link,display:"inline-block","&:hover":{color:c.colors.text.link,textDecoration:"underline"}}),title:(0,t.css)({fontSize:"16px",marginBottom:c.spacing(.5)}),content:(0,t.css)({p:{marginBottom:c.spacing(.5),color:c.colors.text.primary}}),date:(0,t.css)({marginBottom:c.spacing(.5),fontWeight:500,borderRadius:`0 0 0 ${c.shape.radius.default}`,color:c.colors.text.secondary})})},62372:(Y,A,e)=>{"use strict";e.d(A,{$:()=>t});const t="https://grafana.com/blog/news.xml"},4172:(Y,A,e)=>{"use strict";e.d(A,{n:()=>c});var t=e(41053),n=e(78368);function o(h){const m=new DOMParser().parseFromString(h,"text/xml");return{items:Array.from(m.querySelectorAll("entry")).map(v=>({title:u(v,"title"),link:v.querySelector("link")?.getAttribute("href")??"",content:u(v,"content"),pubDate:u(v,"published"),ogImage:v.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}function s(h){const m=new DOMParser().parseFromString(h,"text/xml");return{items:Array.from(m.querySelectorAll("item")).map(v=>({title:u(v,"title"),link:u(v,"link"),content:u(v,"description"),pubDate:u(v,"pubDate"),ogImage:v.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}async function r(h){return await(await fetch(h)).text()}function g(h){return new DOMParser().parseFromString(h,"text/xml").querySelector("feed")!==null}function u(h,p){return h.querySelector(p)?.textContent??""}async function d(h){const p=await r(h);return g(p)?o(p):s(p)}var i=e(47232),l=e(11261);function f(h){const p=[],m=[],a=[],v=[],E=[];for(const D of h.items){const b=(0,i.KQ)(D.pubDate);try{if(p.push(b.valueOf()),m.push(D.title),a.push(D.link),E.push(D.ogImage),D.content){const P=D.content.replace(/<\/?[^>]+(>|$)/g,"");v.push(P)}}catch(P){console.warn("Error reading news item:",P,D)}}return{fields:[{name:"date",type:l.PU.time,config:{displayName:"Date"},values:p},{name:"title",type:l.PU.string,config:{},values:m},{name:"link",type:l.PU.string,config:{},values:a},{name:"content",type:l.PU.string,config:{},values:v},{name:"ogImage",type:l.PU.string,config:{},values:E}],length:p.length}}function c(h){const[p,m]=(0,t.A)(async()=>{const a=await d(h),v=f(a);return new n.R(v)},[h],{loading:!0});return{state:p,getNews:m}}},23799:(Y,A,e)=>{"use strict";e.d(A,{L:()=>g,h:()=>u});var t=e(69550),n=e(75059),o=e(28240),s=e(54479),r=e(52622);function g(d,i=!0){const l=["Value options"];d.addRadio({path:"reduceOptions.values",name:"Show",description:"Calculate a single value per column or series or show each row",settings:{options:[{value:!1,label:"Calculate"},{value:!0,label:"All values"}]},category:l,defaultValue:!1}),d.addNumberInput({path:"reduceOptions.limit",name:"Limit",description:"Max number of rows to display",category:l,settings:{placeholder:"25",integer:!0,min:1,max:5e3},showIf:f=>f.reduceOptions.values===!0}),d.addCustomEditor({id:"reduceOptions.calcs",path:"reduceOptions.calcs",name:"Calculation",description:"Choose a reducer function / calculation",category:l,editor:t.D.get("stats-picker").editor,defaultValue:[n.gy.lastNotNull],showIf:f=>f.reduceOptions.values===!1}),i&&d.addSelect({path:"reduceOptions.fields",name:"Fields",description:"Select the fields that should be included in the panel",category:l,settings:{allowCustomValue:!0,options:[],getOptions:async f=>{const c=[{value:"",label:"Numeric Fields"},{value:"/.*/",label:"All Fields"}];if(f&&f.data)for(const h of f.data)for(const p of h.fields){const m=(0,o.Ct)(p,h,f.data),a=`/^${(0,s.jD)(m)}$/`;c.push({value:a,label:m})}return Promise.resolve(c)}},defaultValue:""})}function u(d,i){d.addRadio({path:"orientation",name:"Orientation",description:"Layout orientation",category:i,settings:{options:[{value:r.wV.Auto,label:"Auto"},{value:r.wV.Horizontal,label:"Horizontal"},{value:r.wV.Vertical,label:"Vertical"}]},defaultValue:r.wV.Auto})}},36373:(Y,A,e)=>{"use strict";e.r(A),e.d(A,{plugin:()=>P});var t=e(65158),n=e(52622),o=e(71242),s=e(63250),r=e(24293);const g=(y,T,M)=>{const I=(0,s.gl)(y,T,M);if(M.angular&&(T==="singlestat"||T==="grafana-singlestat-panel")){const x=M.angular;if(I.graphMode=n.$p.None,x.sparkline&&x.sparkline.show&&(I.graphMode=n.$p.Area),x.colorBackground)I.colorMode=n.yp.Background;else if(x.colorValue)I.colorMode=n.yp.Value;else if(I.colorMode=n.yp.None,x.sparkline?.lineColor&&I.graphMode===n.$p.Area){const S=y.fieldConfig??{};S.defaults.color={mode:r.Y.Fixed,fixedColor:x.sparkline.lineColor},y.fieldConfig=S}x.valueName==="name"&&(I.textMode=n.SV.Name)}return I};var u=e(2543),d=e(96540),i=e(11261),l=e(56323),f=e(90708),c=e(37494),h=e(59796),p=e(12509),m=e(2913);class a extends d.PureComponent{constructor(){super(...arguments),this.renderComponent=(T,M)=>{const{timeRange:I,options:x}=this.props,{value:S,alignmentFactors:O,width:C,height:L,count:U}=T,{openMenu:R,targetClassName:B}=M;let H=S.sparkline;return H&&(H.timeRange=I),d.createElement(c.yV,{value:S.display,count:U,sparkline:H,colorMode:x.colorMode,graphMode:x.graphMode,justifyMode:x.justifyMode,textMode:this.getTextMode(),alignmentFactors:O,text:x.text,width:C,height:L,theme:m.$W.theme2,onClick:R,className:B,disableWideLayout:!x.wideLayout})},this.renderValue=T=>{const{value:M}=T,{getLinks:I,hasLinks:x}=M;return x&&I?d.createElement(h.e,{links:I},S=>this.renderComponent(T,S)):this.renderComponent(T,{})},this.getValues=()=>{const{data:T,options:M,replaceVariables:I,fieldConfig:x,timeZone:S}=this.props;let O;for(let C of T.series)for(let L of C.fields){let{config:U}=L;if(L.type===i.PU.number){if(L.state?.range)continue;!O&&(!(0,u.isNumber)(U.min)||!(0,u.isNumber)(U.max))&&(O=(0,f.nJ)(T.series));const R=U.min??O.min,B=U.max??O.max;L.state=L.state??{},L.state.range={min:R,max:B,delta:B-R}}}return(0,l.PI)({fieldConfig:x,reduceOptions:M.reduceOptions,replaceVariables:I,theme:m.$W.theme2,data:T.series,sparkline:M.graphMode!==n.$p.None,percentChange:M.showPercentChange,timeZone:S})}}getTextMode(){const{options:T,fieldConfig:M,title:I}=this.props;return T.textMode===n.SV.Auto&&(M.defaults.displayName||!I)?n.SV.ValueAndName:T.textMode}render(){const{height:T,options:M,width:I,data:x,renderCounter:S}=this.props;return d.createElement(p.S,{getValues:this.getValues,getAlignmentFactors:l.XS,renderValue:this.renderValue,width:I,height:T,source:x,itemSpacing:3,renderCounter:S,autoGrid:!0,orientation:M.orientation})}}var v=e(23799);const E={colorMode:n.yp.Value,graphMode:n.$p.Area,justifyMode:n.F8.Auto,showPercentChange:!1,textMode:n.SV.Auto,wideLayout:!0};var D=e(38824);class b{getSuggestionsForData(T){const{dataSummary:M}=T;if(!M.hasData)return;const I=T.getListAppender({name:D.m.Stat,pluginId:"stat",options:{},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:x=>{x.options.reduceOptions.values&&(x.options.reduceOptions.limit=1)}}});M.hasStringField&&M.hasNumberField&&M.frameCount===1&&M.rowCountTotal<10&&(I.append({name:D.m.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"}}}),I.append({name:D.m.StatColoredBackground,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.yp.Background}})),M.stringFieldCount===1&&M.frameCount===1&&M.rowCountTotal<10&&M.fieldCount===1&&I.append({name:D.m.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.yp.None}}),M.hasNumberField&&M.hasTimeField&&(I.append({options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),I.append({name:D.m.StatColoredBackground,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},graphMode:n.$p.None,colorMode:n.yp.Background}}))}}const P=new t.m(a).useFieldConfig().setPanelOptions(y=>{const T=["Stat styles"];(0,v.L)(y),(0,v.h)(y,T),o.I(y),y.addSelect({path:"textMode",name:"Text mode",description:"Control if name and value is displayed or just name",category:T,settings:{options:[{value:n.SV.Auto,label:"Auto"},{value:n.SV.Value,label:"Value"},{value:n.SV.ValueAndName,label:"Value and name"},{value:n.SV.Name,label:"Name"},{value:n.SV.None,label:"None"}]},defaultValue:E.textMode}).addRadio({path:"wideLayout",name:"Wide layout",category:T,settings:{options:[{value:!0,label:"On"},{value:!1,label:"Off"}]},defaultValue:E.wideLayout,showIf:M=>M.textMode===n.SV.ValueAndName}),y.addSelect({path:"colorMode",name:"Color mode",defaultValue:n.yp.Value,category:T,settings:{options:[{value:n.yp.None,label:"None"},{value:n.yp.Value,label:"Value"},{value:n.yp.Background,label:"Background Gradient"},{value:n.yp.BackgroundSolid,label:"Background Solid"}]}}).addRadio({path:"graphMode",name:"Graph mode",description:"Stat panel graph / sparkline mode",category:T,defaultValue:E.graphMode,settings:{options:[{value:n.$p.None,label:"None"},{value:n.$p.Area,label:"Area"}]}}).addRadio({path:"justifyMode",name:"Text alignment",defaultValue:E.justifyMode,category:T,settings:{options:[{value:n.F8.Auto,label:"Auto"},{value:n.F8.Center,label:"Center"}]}}).addBooleanSwitch({path:"showPercentChange",name:"Show percent change",defaultValue:E.showPercentChange,category:T,showIf:M=>!M.reduceOptions.values})}).setNoPadding().setPanelChangeHandler(g).setSuggestionsSupplier(new b).setMigrationHandler(s._$)},21164:(Y,A,e)=>{"use strict";e.d(A,{u:()=>t});const t=(n,o)=>{const s=[],r=new Set;if(n.getLinks){const g=n.values[o],u=n.display?n.display(g):{text:`${g}`,numeric:+g};n.getLinks({calculatedValue:u,valueRowIndex:o}).forEach(d=>{const i=`${d.title}/${d.href}`;r.has(i)||(s.push(d),r.add(i))})}return s}},65885:(Y,A,e)=>{"use strict";e.d(A,{S5:()=>a,fq:()=>g,gy:()=>v,l1:()=>p});var t=e(2543),n=e.n(t),o=e(1173),s=e(50082),r=e(11261);const g=E=>(!E.pluginVersion&&"columns"in E&&console.log("Was angular table",E),E.options),u={timeseries_to_rows:"seriesToRows",timeseries_to_columns:"seriesToColumns",timeseries_aggregations:"reduce",table:"merge"},d={avg:"mean",min:"min",max:"max",total:"sum",current:"lastNotNull",count:"count"},i={cell:"color-background",row:"color-background",value:"color-text"},l=(E,D)=>[-1/0,...E].map((b,P)=>({color:D[P],value:(0,t.isNumber)(b)?b:parseInt(b,10)})),f=(E,D)=>{const b=E.transformations??[];if(Object.keys(u).includes(D.transform)){const P={reducers:[]};D.transform==="timeseries_aggregations"&&(P.includeTimeField=!1,P.reducers=D.columns.map(y=>d[y.value])),b.push({id:u[D.transform],options:P})}return b},c=E=>{const b={matcher:{id:/^\/.*\/$/.test(E.pattern)?o.Ct.byRegexp:o.Ct.byName,options:E.pattern},properties:[]};return E.alias&&b.properties.push({id:"displayName",value:E.alias}),E.unit&&b.properties.push({id:"unit",value:E.unit}),E.decimals&&b.properties.push({id:"decimals",value:E.decimals}),E.type==="date"&&b.properties.push({id:"unit",value:`time: ${E.dateFormat}`}),E.link&&b.properties.push({id:"links",value:[{title:(0,t.defaultTo)(E.linkTooltip,""),url:(0,t.defaultTo)(E.linkUrl,""),targetBlank:(0,t.defaultTo)(E.linkTargetBlank,!1)}]}),E.colorMode&&b.properties.push({id:"custom.cellOptions",value:{type:i[E.colorMode]}}),E.align&&b.properties.push({id:"custom.align",value:E.align==="auto"?null:E.align}),E.thresholds?.length&&b.properties.push({id:"thresholds",value:{mode:s.O.Absolute,steps:l(E.thresholds,E.colors)}}),b},h=E=>{let D={custom:{}};if(E){if(D=(0,t.omitBy)({unit:E.unit,decimals:E.decimals,displayName:E.alias,custom:{align:E.align==="auto"?null:E.align}},t.isNil),E.thresholds.length){const b={mode:s.O.Absolute,steps:l(E.thresholds,E.colors)};D.thresholds=b}E.colorMode&&(D.custom.cellOptions={type:i[E.colorMode]})}return D},p=(E,D,b)=>{if(D==="table-old"&&b.angular){const P=b.angular,y=f(E,P),T=P.styles.find(x=>x.pattern==="/.*/"),M=h(T),I=P.styles.filter(x=>x.pattern!=="/.*/").map(c);E.transformations=y,E.fieldConfig={defaults:M,overrides:I}}return{}},m=E=>E?.filter(D=>D.meta?.custom?.parentRowIndex===void 0)||[E?.[0]],a=E=>{const D=[];return m(E).filter(P=>!!P&&P.length!==0)?.forEach(P=>{const y=E?.filter(x=>P.refId===x.refId&&x.meta?.custom?.parentRowIndex!==void 0),T=(0,t.groupBy)(y,x=>x.meta?.custom?.parentRowIndex),M=Object.keys(T).map(x=>T[x]),I={...P};y&&y.length>0&&I.fields.push({name:"nested",type:r.PU.nestedFrames,config:{},values:M}),D.push(I)}),D},v=E=>E?.some(D=>D.meta?.custom?.parentRowIndex!==void 0)},11082:(Y,A,e)=>{"use strict";e.d(A,{Z:()=>g});var t=e(96540),n=e(66864),o=e(94354),s=e(51275);const r=[{label:"Never",value:!1},{label:"Threshold",value:36e5}],g=({value:u,onChange:d,item:i})=>{const l=typeof u=="number";return r[1].value=l?u:36e5,t.createElement(n.Gy,null,t.createElement(o.z,{value:u,options:r,onChange:d}),l&&t.createElement(s.g,{value:u,onChange:d,inputPrefix:s.F.GreaterThan,isTime:i.settings?.isTime??!1}))}},43228:(Y,A,e)=>{"use strict";e.d(A,{F:()=>i});var t=e(96540),n=e(66864),o=e(94354),s=e(88323),r=e(29158);const g=[{label:"Solid",value:"solid"},{label:"Dash",value:"dash"},{label:"Dots",value:"dot"}],u=["10, 10","10, 15","10, 20","10, 25","10, 30","10, 40","15, 10","20, 10","25, 10","30, 10","40, 10","50, 10","5, 10","30, 3, 3"].map(f=>({label:f,value:f})),d=["0, 10","0, 20","0, 30","0, 40","0, 3, 3"].map(f=>({label:f,value:f})),i=({value:f,onChange:c})=>{const h=(0,t.useMemo)(()=>f?.fill==="dash"?u:d,[f]),p=(0,t.useMemo)(()=>{if(!f?.dash?.length)return h[0];const m=f.dash?.join(", "),a=h.find(v=>v.value===m);return a||{label:m,value:m}},[f,h]);return t.createElement(n.Gy,null,t.createElement(o.z,{value:f?.fill||"solid",options:g,onChange:m=>{let a;m==="dot"?a=l(d[0].value):m==="dash"&&(a=l(u[0].value)),c({...f,fill:m,dash:a})}}),f?.fill&&f?.fill!=="solid"&&t.createElement(t.Fragment,null,t.createElement(s.l6,{allowCustomValue:!0,options:h,value:p,width:20,onChange:m=>{c({...f,dash:l(m.value??"")})},formatCreateLabel:m=>`Segments: ${l(m).join(", ")}`}),t.createElement("div",null,"\xA0",t.createElement("a",{title:"The input expects a segment list",href:"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Parameters",target:"_blank",rel:"noreferrer"},t.createElement(r.K,{name:"question-circle",tooltip:"Help"})))))};function l(f){const c=[];for(const h of f.split(/(?:,| )+/)){const p=Number.parseInt(h,10);isNaN(p)||c.push(p)}return c}},51275:(Y,A,e)=>{"use strict";e.d(A,{F:()=>s,g:()=>r});var t=e(96540),n=e(65879),o=e(10354),s=(g=>(g.LessThan="lessthan",g.GreaterThan="greaterthan",g))(s||{});const r=({value:g,onChange:u,inputPrefix:d,isTime:i})=>{let l=n.secondsToHms(g/1e3);i||(l="10");const f=m=>{let a=!1;if(m)try{i&&n.isValidTimeSpan(m)?a=n.intervalToMs(m):a=Number(m)}catch(v){console.warn("ERROR",v)}u(a)},c=m=>{m.key==="Enter"&&f(m.currentTarget.value)},h=m=>{f(m.currentTarget.value)},p=d==="greaterthan"?t.createElement("div",null,">"):d==="lessthan"?t.createElement("div",null,"<"):null;return t.createElement(o.p,{autoFocus:!1,placeholder:"never",width:10,defaultValue:l,onKeyDown:c,onBlur:h,prefix:p,spellCheck:!1})}},34163:(Y,A,e)=>{"use strict";e.d(A,{e:()=>g});var t=e(96540),n=e(66864),o=e(94354),s=e(51275);const r=[{label:"Never",value:!1},{label:"Always",value:!0},{label:"Threshold",value:36e5}],g=({value:u,onChange:d,item:i})=>{const l=typeof u=="number";return r[2].value=l?u:36e5,t.createElement(n.Gy,null,t.createElement(o.z,{value:u,options:r,onChange:d}),l&&t.createElement(s.g,{value:u,onChange:d,inputPrefix:s.F.LessThan,isTime:i.settings?.isTime??!1}))}},24882:(Y,A,e)=>{"use strict";e.d(A,{D:()=>o});var t=e(96540),n=e(88323);const o=({item:s,value:r,onChange:g,id:u})=>{const d=(0,t.useCallback)(i=>{g({mode:i.value})},[g]);return t.createElement(n.l6,{inputId:u,value:r.mode,options:s.settings?.options??[],onChange:d})}},22731:(Y,A,e)=>{"use strict";e.d(A,{$:()=>h,k:()=>c});var t=e(32196),n=e(96540),o=e(11261),s=e(28240),r=e(52622),g=e(40845),u=e(11389),d=e(58749),i=e(92663),l=e(10875),f=e(21164);const c=({frames:p,seriesFrame:m,dataIdxs:a,seriesIdx:v,mode:E=r.$N.Single,sortOrder:D=r.xB.None,scrollable:b=!1,isPinned:P,annotate:y})=>{const T=(0,g.of)(h),M=m.fields[0],I=M.display(M.values[a[0]]).text,x=(0,l.cp)(m.fields,M,a,v,E,D,C=>C.type===o.PU.number);let S=[];if(v!=null){const C=m.fields[v],L=a[v];S=(0,f.u)(C,L)}const O={label:M.type===o.PU.time?"":(0,s.Ct)(M,m,p),value:I};return n.createElement("div",null,n.createElement("div",{className:T.wrapper},n.createElement(i.A,{headerLabel:O,isPinned:P}),n.createElement(u.o,{contentLabelValue:x,isPinned:P,scrollable:b}),P&&n.createElement(d.S,{dataLinks:S,annotate:y})))},h=()=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column"})})},41706:(Y,A,e)=>{"use strict";e.d(A,{S:()=>p,V:()=>a});var t=e(37055),n=e(24293),o=e(11261),s=e(27310),r=e(52622),g=e(52198),u=e(56675),d=e(38248),i=e(11404),l=e(11082),f=e(43228),c=e(34163),h=e(24882);const p={drawStyle:r.GR.Line,lineInterpolation:r.dx.Linear,lineWidth:1,fillOpacity:0,gradientMode:r.on.None,barAlignment:r.Nj.Center,stacking:{mode:r.gs.None,group:"A"},axisGridShow:!0,axisCenteredZero:!1,axisBorderShow:!1},m=["Graph styles"];function a(v,E=!0){return{standardOptions:{[t.uo.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:n.Y.PaletteClassic}}},useCustomConfig:D=>{D.addRadio({path:"drawStyle",name:"Style",category:m,defaultValue:v.drawStyle,settings:{options:g.t.drawStyle}}).addRadio({path:"lineInterpolation",name:"Line interpolation",category:m,defaultValue:v.lineInterpolation,settings:{options:g.t.lineInterpolation},showIf:b=>b.drawStyle===r.GR.Line}).addRadio({path:"barAlignment",name:"Bar alignment",category:m,defaultValue:v.barAlignment,settings:{options:g.t.barAlignment},showIf:b=>b.drawStyle===r.GR.Bars}).addSliderInput({path:"lineWidth",name:"Line width",category:m,defaultValue:v.lineWidth,settings:{min:0,max:10,step:1,ariaLabelForHandle:"Line width"},showIf:b=>b.drawStyle!==r.GR.Points}).addSliderInput({path:"fillOpacity",name:"Fill opacity",category:m,defaultValue:v.fillOpacity,settings:{min:0,max:100,step:1,ariaLabelForHandle:"Fill opacity"},showIf:b=>b.drawStyle!==r.GR.Points}).addRadio({path:"gradientMode",name:"Gradient mode",category:m,defaultValue:g.t.fillGradient[0].value,settings:{options:g.t.fillGradient},showIf:b=>b.drawStyle!==r.GR.Points}).addFieldNamePicker({path:"fillBelowTo",name:"Fill below to",category:m,hideFromDefaults:!0,settings:{filter:b=>b.type===o.PU.number}}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",category:m,showIf:b=>b.drawStyle===r.GR.Line,editor:f.F,override:f.F,process:s.hS,shouldApply:b=>b.type===o.PU.number}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",category:m,defaultValue:!1,editor:c.e,override:c.e,showIf:b=>b.drawStyle===r.GR.Line,shouldApply:b=>b.type!==o.PU.time,process:s.hS,settings:{isTime:E}}).addCustomEditor({id:"insertNulls",path:"insertNulls",name:"Disconnect values",category:m,defaultValue:!1,editor:l.Z,override:l.Z,showIf:b=>b.drawStyle===r.GR.Line,shouldApply:b=>b.type!==o.PU.time,process:s.hS,settings:{isTime:E}}).addRadio({path:"showPoints",name:"Show points",category:m,defaultValue:g.t.showPoints[0].value,settings:{options:g.t.showPoints},showIf:b=>b.drawStyle!==r.GR.Points}).addSliderInput({path:"pointSize",name:"Point size",category:m,defaultValue:5,settings:{min:1,max:40,step:1,ariaLabelForHandle:"Point size"},showIf:b=>b.showPoints!==r.yL.Never||b.drawStyle===r.GR.Points}),u.I(D,v.stacking,m),D.addSelect({category:m,name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:r.NU.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:r.NU.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),d.r(D,v),i.e(D),D.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:r.Ly.Off},settings:{options:g.t.thresholdsDisplayModes},editor:h.D,override:h.D,process:s.hS,shouldApply:()=>!0})}}}},62567:(Y,A,e)=>{"use strict";e.d(A,{W:()=>K});var t=e(32196),n=e(96540),o=e(40961),s=e(84140),r=e(33948),g=e(52622),u=e(23596),d=e(24284),i=e(40845),l=e(37151),f=e(72724),c=e(42994),h=e(79041),p=e(41053),m=e(18348),a=e(66864),v=e(51253),E=e(88575),D=e(21744),b=e(16504),P=e(55852),y=e(99818),T=e(10154);const M=({annoVals:k,annoIdx:Q,dismiss:ee,timeFormatter:ae,...Z})=>{const ne=(0,i.of)(I),q=(0,h.d2)(),te=(0,n.useContext)(m.N);(0,n.useEffect)(()=>te.boostZIndex(),[te]);const[re,de]=(0,p.A)(async Re=>{const me=await q.onAnnotationCreate(Re);return ee(),me}),[ie,ge]=(0,p.A)(async Re=>{const me=await q.onAnnotationUpdate(Re);return ee(),me}),ve=k.id?.[Q]!=null,ye=k.isRegion?.[Q],pe=ve?ge:de,le=ve?ie:re,Me=ye?`${ae(k.time[Q])} - ${ae(k.timeEnd[Q])}`:ae(k.time[Q]),De=({tags:Re,description:me})=>{pe({id:k.id?.[Q]??void 0,tags:Re,description:me,from:Math.round(k.time[Q]),to:Math.round(k.timeEnd?.[Q]??k.time[Q])})};return n.createElement("div",{className:ne.editor,...Z},n.createElement("div",{className:ne.header},n.createElement(a.Gy,{justify:"space-between",align:"center"},n.createElement("div",null,ve?"Edit annotation":"Add annotation"),n.createElement("div",null,Me))),n.createElement(v.l,{onSubmit:De,defaultValues:{description:k.text?.[Q],tags:k.tags?.[Q]||[]}},({register:Re,errors:me,control:he})=>n.createElement(n.Fragment,null,n.createElement("div",{className:ne.content},n.createElement(E.D,{label:"Description",invalid:!!me.description,error:me?.description?.message},n.createElement(D.f,{className:ne.textarea,...Re("description",{required:"Annotation description is required"})})),n.createElement(E.D,{label:"Tags"},n.createElement(b.e,{control:he,name:"tags",render:({field:{ref:Te,onChange:Be,...we}})=>n.createElement(y.$,{allowCustomValue:!0,placeholder:"Add tags",onChange:Be,tagOptions:T.vy,tags:we.value})}))),n.createElement("div",{className:ne.footer},n.createElement(a.Gy,{justify:"flex-end"},n.createElement(P.$n,{size:"sm",variant:"secondary",onClick:ee,fill:"outline"},"Cancel"),n.createElement(P.$n,{size:"sm",type:"submit",disabled:le?.loading},le?.loading?"Saving":"Save"))))))},I=k=>({editor:(0,t.css)({background:k.colors.background.primary,border:`1px solid ${k.colors.border.weak}`,borderRadius:k.shape.radius.default,boxShadow:k.shadows.z3,userSelect:"text",width:"460px"}),content:(0,t.css)({padding:k.spacing(1)}),header:(0,t.css)({borderBottom:`1px solid ${k.colors.border.weak}`,padding:k.spacing(.5,1),fontWeight:k.typography.fontWeightBold,fontSize:k.typography.fontSize,color:k.colors.text.primary}),footer:(0,t.css)({borderTop:`1px solid ${k.colors.border.weak}`,padding:k.spacing(1,1)}),textarea:(0,t.css)({color:k.colors.text.secondary,fontSize:k.typography.bodySmall.fontSize})});var x=e(40672),S=e(29158),O=e(78369),C=e(55907);const L=({annoVals:k,annoIdx:Q,timeFormatter:ee,canEdit:ae,canDelete:Z,onEdit:ne,onDelete:q})=>{const te=(0,i.of)(U),re=(0,n.useContext)(m.N);(0,n.useEffect)(()=>re.boostZIndex(),[re]);let de=ee(k.time[Q]),ie=k.text[Q];k.isRegion?.[Q]&&(de+=" - "+ee(k.timeEnd[Q]));let ge;k.login?.[Q]&&k.avatarUrl?.[Q]&&(ge=n.createElement("img",{className:te.avatar,alt:"Annotation avatar",src:k.avatarUrl[Q]}));let ve=null,ye="";if(k.alertId?.[Q]!==void 0&&k.newState?.[Q]){const pe=C.A.getStateDisplayModel(k.newState[Q]);ve=n.createElement("div",{className:te.alertState},n.createElement("i",{className:pe.stateClass},pe.text))}else k.title?.[Q]&&(ie=k.title[Q]+"<br />"+(typeof ie=="string"?ie:""));return n.createElement("div",{className:te.wrapper},n.createElement("div",{className:te.header},n.createElement(a.Gy,{justify:"space-between",align:"center",spacing:"md"},n.createElement("div",{className:te.meta},n.createElement("span",null,ge,ve),de),(ae||Z)&&n.createElement("div",{className:te.editControls},ae&&n.createElement(S.K,{name:"pen",size:"sm",onClick:ne,tooltip:"Edit"}),Z&&n.createElement(S.K,{name:"trash-alt",size:"sm",onClick:q,tooltip:"Delete",disabled:!k.id?.[Q]})))),n.createElement("div",{className:te.body},ie&&n.createElement("div",{className:te.text,dangerouslySetInnerHTML:{__html:x.sQ.sanitize(ie)}}),ye,n.createElement("div",null,n.createElement(a.Gy,{spacing:"xs",wrap:!0},k.tags?.[Q]?.map((pe,le)=>n.createElement(O.v,{name:pe,key:`${pe}-${le}`}))))))},U=k=>({wrapper:(0,t.css)({zIndex:k.zIndex.tooltip,whiteSpace:"initial",borderRadius:k.shape.radius.default,background:k.colors.background.primary,border:`1px solid ${k.colors.border.weak}`,boxShadow:k.shadows.z2,userSelect:"text"}),header:(0,t.css)({padding:k.spacing(.5,1),borderBottom:`1px solid ${k.colors.border.weak}`,fontWeight:k.typography.fontWeightBold,fontSize:k.typography.fontSize,color:k.colors.text.primary,display:"flex"}),meta:(0,t.css)({display:"flex",justifyContent:"space-between",color:k.colors.text.primary,fontWeight:400}),editControls:(0,t.css)({display:"flex",alignItems:"center","> :last-child":{marginLeft:0}}),body:(0,t.css)({padding:k.spacing(1),fontSize:k.typography.bodySmall.fontSize,color:k.colors.text.secondary,fontWeight:400,a:{color:k.colors.text.link,"&:hover":{textDecoration:"underline"}}}),text:(0,t.css)({paddingBottom:k.spacing(1)}),avatar:(0,t.css)({borderRadius:k.shape.radius.circle,width:16,height:16,marginRight:k.spacing(1)}),alertState:(0,t.css)({paddingRight:k.spacing(1),fontWeight:k.typography.fontWeightMedium})}),R=0,B=1,H=2,W=({annoVals:k,annoIdx:Q,className:ee,style:ae,exitWipEdit:Z,timezone:ne})=>{const{canEditAnnotations:q,canDeleteAnnotations:te,...re}=(0,h.d2)(),de=(0,i.of)(N),[ie,ge]=(0,n.useState)(R),ve=(0,n.useRef)(null);(0,l.A)(ve,()=>{ie===B&&pe(!1)});const ye=n.createRef(),pe=(0,n.useCallback)(he=>{ge(he?B:R),!he&&Z!=null&&Z()},[Z]),le=(0,n.useCallback)(()=>{pe(!0)},[pe]),Me=(0,n.useCallback)(()=>{re.onAnnotationDelete&&re.onAnnotationDelete(k.id?.[Q])},[Q,k.id,re]),De=(0,n.useCallback)(he=>(0,f.LE)(he,{format:c.WC.fullDate,timeZone:ne}),[ne]);(0,n.useLayoutEffect)(()=>{Z!=null&&pe(!0)},[]);const Re=(0,n.useCallback)(()=>{let he=k.dashboardUID?.[Q];return n.createElement(L,{timeFormatter:De,onEdit:le,onDelete:Me,canEdit:q?q(he):!1,canDelete:te?te(he):!1,annoIdx:Q,annoVals:k})},[De,le,Me,q,k,Q,te]),me=(0,n.useCallback)(()=>n.createElement(M,{dismiss:()=>pe(!1),timeFormatter:De,annoIdx:Q,annoVals:k}),[Q,k,De,pe]);return n.createElement("div",{ref:ye,className:ee,style:ae,onMouseEnter:()=>ie!==B&&ge(H),onMouseLeave:()=>ie!==B&&ge(R)},n.createElement("div",{className:de.annoInfo,ref:ve},ie===H&&Re(),ie===B&&me()))},N=k=>({annoInfo:(0,t.css)({background:k.colors.background.secondary,minWidth:"300px",position:"absolute",top:"5px",left:"50%",transform:"translateX(-50%)"})}),V=(k,Q,ee,ae,Z)=>{k.beginPath(),k.moveTo(ae,Q),k.lineTo(ae,ee),k.strokeStyle=Z,k.stroke()},G=(0,s.A)(d.Mk).toHex8String();function _(k){let Q={};return k.fields.forEach(ee=>{Q[ee.name]=ee.values}),Q}const K=({annotations:k,timeZone:Q,config:ee,newRange:ae,setNewRange:Z,canvasRegionRendering:ne=!0})=>{const[q,te]=(0,n.useState)(),re=(0,i.of)(j),de=(0,i.$j)().visualization.getColorByName,[ie,ge]=(0,n.useReducer)(De=>De+1,0),ve=(0,n.useMemo)(()=>{let De=k.filter(Re=>Re.name!=="exemplar"&&Re.length>0&&Re.fields.some(me=>me.name==="time"));if(ae){let Re=ae.to>ae.from;const me=(0,r.I)([{time:ae.from,timeEnd:Re?ae.to:null,isRegion:Re,color:G}]);me.meta={dataTopic:g.QR.Annotations,custom:{isWip:!0}},De.push(me)}return De},[k,ae]),ye=(0,n.useCallback)(()=>{Z(null)},[Z]),pe=(0,n.useRef)(ve);pe.current=ve;const le=(0,n.useRef)(ae);le.current=ae;const Me=(0,n.useRef)();if((0,n.useLayoutEffect)(()=>{ee.addHook("ready",De=>{let Re=De.root.querySelector(".u-axis");Me.current=Re,te(De)}),ee.addHook("draw",De=>{let Re=pe.current;const me=De.ctx;let he=De.bbox.top,Te=he+De.bbox.height;me.save(),me.beginPath(),me.rect(De.bbox.left,De.bbox.top,De.bbox.width,De.bbox.height),me.clip(),me.lineWidth=2,me.setLineDash([5,5]),Re.forEach(Be=>{let we=_(Be);for(let Ne=0;Ne<we.time.length;Ne++){let Ze=de(we.color?.[Ne]||G),st=De.valToPos(we.time[Ne],"x",!0);if(!we.isRegion?.[Ne])V(me,he,Te,st,Ze);else if(ne){V(me,he,Te,st,Ze);let Qe=De.valToPos(we.timeEnd[Ne],"x",!0);V(me,he,Te,Qe,Ze),me.fillStyle=u.alpha(Ze,.1),me.fillRect(st,he,Qe-st,De.bbox.height)}}}),me.restore()})},[ee,ne,de]),(0,n.useEffect)(()=>{q&&(q.redraw(),setTimeout(()=>{ge()},0))},[ve,q]),q){let De=ve.flatMap((Re,me)=>{let he=_(Re),Te=[];for(let Be=0;Be<he.time.length;Be++){let we=de(he.color?.[Be]||d.Mk),Ne=q.valToPos(he.time[Be],"x"),Ze=null,st="",Qe=!0;if(he.isRegion?.[Be]){let ke=q.valToPos(he.timeEnd?.[Be],"x");if(Qe=Ne<q.rect.width&&ke>0,Qe){let je=Math.max(0,Ne),He=Math.min(q.rect.width,ke);Ze={left:je,background:we,width:He-je},st=re.annoRegion}}else Qe=Ne>0&&Ne<=q.rect.width,Qe&&(Ze={left:Ne,borderBottomColor:we},st=re.annoMarker);if(Qe){let ke=Re.meta?.custom?.isWip;Te.push(n.createElement(W,{annoIdx:Be,annoVals:he,className:st,style:Ze,timezone:Q,key:`${me}:${Be}`,exitWipEdit:ke?ye:null}))}}return Te});return(0,o.createPortal)(De,Me.current)}return null},j=k=>({annoMarker:(0,t.css)({position:"absolute",width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottomWidth:"6px",borderBottomStyle:"solid",transform:"translateX(-50%)",cursor:"pointer",zIndex:1}),annoRegion:(0,t.css)({position:"absolute",height:"5px",cursor:"pointer",zIndex:1})})},99140:(Y,A,e)=>{"use strict";e.d(A,{Gu:()=>s,JD:()=>r,M_:()=>n,k3:()=>o});var t=e(48594);let n;function o(g){n=g}function s(){return!n||!n.getState?{templating:{...t.L1,lastKey:"key"}}:n.getState()}function r(g){if(!(!n||!n.getState))return n.dispatch(g)}},24897:(Y,A,e)=>{"use strict";e.d(A,{RG:()=>o,Vz:()=>s,XT:()=>t.X,Xe:()=>n});var t=e(62625),n=(r=>(r[r.Admin=4]="Admin",r[r.Editor=2]="Editor",r[r.Member=0]="Member",r[r.Viewer=1]="Viewer",r))(n||{}),o=(r=>(r.View="View",r.Edit="Edit",r.Admin="Admin",r))(o||{}),s=(r=>(r.Folder="dash-folder",r.Dashboard="dash-db",r.AlertFolder="dash-folder-alerting",r))(s||{})},50271:()=>{"use strict"},18625:()=>{"use strict"},14276:()=>{"use strict"},62543:()=>{"use strict"},28444:(Y,A,e)=>{"use strict";e.d(A,{Bt:()=>E,Cf:()=>c,Eu:()=>x,Io:()=>v,JI:()=>i,PR:()=>l,Ps:()=>y,Q$:()=>f,Rh:()=>b,S8:()=>M,U0:()=>m,VZ:()=>D,Vz:()=>P,XM:()=>p,Yn:()=>g,aP:()=>I,bG:()=>r,bY:()=>T,i0:()=>L,sL:()=>C,u4:()=>u,vk:()=>h,xL:()=>a,xc:()=>S,yj:()=>O,zq:()=>d});var t=e(89550),n=e(65463);const o=(0,t.R)("ds-request-response"),s=(0,t.R)("ds-request-error"),r=(0,t.R)("template-variable-value-updated"),g=(0,t.R)("graph-click"),u=(0,t.R)("threshold-changed");class d extends n.a{}d.type="panel-queries-changed";class i extends n.a{}i.type="panel-transformations-changed";class l extends n.a{}l.type="panels-options-changed";class f extends n.a{}f.type="dashboard-panels-changed";class c extends n.a{}c.type="dashboard-meta-changed";class h extends n.a{}h.type="panel-directive-ready";class p extends n.a{}p.type="render";class m extends n.x{}m.type="zoom-out";var a=(U=>(U[U.Left=-1]="Left",U[U.Right=1]="Right",U))(a||{});class v extends n.x{}v.type="shift-time";class E extends n.a{}E.type="copy-time";class D extends n.x{}D.type="paste-time";class b extends n.x{}b.type="absolute-time";class P extends n.x{}P.type="remove-panel";class y extends n.x{}y.type="show-modal";class T extends n.x{}T.type="show-confirm-modal";class M extends n.x{}M.type="show-react-modal";class I extends n.a{}I.type="hide-modal";class x extends n.a{}x.type="dashboard-saved";class S extends n.x{}S.type="annotation-query-started";class O extends n.x{}O.type="annotation-query-finished";class C extends n.x{}C.type="panel-edit-started";class L extends n.x{}L.type="panel-edit-finished"},76698:(Y,A,e)=>{"use strict";e.d(A,{IW:()=>t,aA:()=>o,jH:()=>s,sG:()=>n});var t=(r=>(r[r.CLOSE_PANE=0]="CLOSE_PANE",r[r.CHANGE_DATASOURCE=1]="CHANGE_DATASOURCE",r[r.CLOSE_EDITOR=2]="CLOSE_EDITOR",r))(t||{});const n=["lines","bars","points","stacked_lines","stacked_bars"];var o=(r=>(r.table="table",r.raw="raw",r))(o||{});const s=["table","raw"]},8904:()=>{"use strict"},80348:(Y,A,e)=>{"use strict";e.d(A,{AccessControlAction:()=>y,AppNotificationSeverity:()=>p,CORRELATION_EDITOR_POST_CONFIRM_ACTION:()=>v.IW,CoreEvents:()=>T,DashboardInitPhase:()=>r,DashboardRoutes:()=>s,EXPLORE_GRAPH_STYLES:()=>v.sG,KioskMode:()=>g,OrgRole:()=>u.XT,PermissionLevelString:()=>u.RG,SearchQueryType:()=>u.Vz,ServiceAccountStateFilter:()=>l,TABLE_RESULTS_STYLE:()=>v.aA,TeamPermissionLevel:()=>u.Xe,addListener:()=>E.ch,createAsyncThunk:()=>E.zD,timeoutMap:()=>a,useDispatch:()=>E.wA,useSelector:()=>E.d4});var t=e(50271),n=e(54034),o=e(8904),s=(M=>(M.Home="home-dashboard",M.New="new-dashboard",M.Normal="normal-dashboard",M.Path="path-dashboard",M.Scripted="scripted-dashboard",M.Public="public-dashboard",M.Embedded="embedded-dashboard",M))(s||{}),r=(M=>(M.NotStarted="Not started",M.Fetching="Fetching",M.Services="Services",M.Failed="Failed",M.Completed="Completed",M))(r||{}),g=(M=>(M.TV="tv",M.Full="full",M))(g||{}),u=e(24897),d=e(18625),i=e(64998),l=(M=>(M.All="All",M.WithExpiredTokens="WithExpiredTokens",M.External="External",M.Disabled="Disabled",M))(l||{}),f=e(62543),c=e(77237),h=e(75330),p=(M=>(M.Success="success",M.Warning="warning",M.Error="error",M.Info="info",M))(p||{}),m=(M=>(M[M.Success=3e3]="Success",M[M.Warning=5e3]="Warning",M[M.Error=7e3]="Error",M))(m||{});const a={success:3e3,warning:5e3,error:7e3,info:3e3};var v=e(76698),E=e(64756),D=e(13868),b=e(14276),P=e(90697),y=(M=>(M.UsersRead="users:read",M.UsersWrite="users:write",M.UsersAuthTokenList="users.authtoken:read",M.UsersAuthTokenUpdate="users.authtoken:write",M.UsersPasswordUpdate="users.password:write",M.UsersDelete="users:delete",M.UsersCreate="users:create",M.UsersEnable="users:enable",M.UsersDisable="users:disable",M.UsersPermissionsUpdate="users.permissions:write",M.UsersLogout="users:logout",M.UsersQuotasList="users.quotas:read",M.UsersQuotasUpdate="users.quotas:write",M.ServiceAccountsRead="serviceaccounts:read",M.ServiceAccountsCreate="serviceaccounts:create",M.ServiceAccountsWrite="serviceaccounts:write",M.ServiceAccountsDelete="serviceaccounts:delete",M.ServiceAccountsPermissionsRead="serviceaccounts.permissions:read",M.ServiceAccountsPermissionsWrite="serviceaccounts.permissions:write",M.OrgsRead="orgs:read",M.OrgsPreferencesRead="orgs.preferences:read",M.OrgsWrite="orgs:write",M.OrgsPreferencesWrite="orgs.preferences:write",M.OrgsCreate="orgs:create",M.OrgsDelete="orgs:delete",M.OrgUsersRead="org.users:read",M.OrgUsersAdd="org.users:add",M.OrgUsersRemove="org.users:remove",M.OrgUsersWrite="org.users:write",M.LDAPUsersRead="ldap.user:read",M.LDAPUsersSync="ldap.user:sync",M.LDAPStatusRead="ldap.status:read",M.DataSourcesExplore="datasources:explore",M.DataSourcesRead="datasources:read",M.DataSourcesCreate="datasources:create",M.DataSourcesWrite="datasources:write",M.DataSourcesDelete="datasources:delete",M.DataSourcesPermissionsRead="datasources.permissions:read",M.DataSourcesCachingRead="datasources.caching:read",M.DataSourcesInsightsRead="datasources.insights:read",M.ActionServerStatsRead="server.stats:read",M.ActionTeamsCreate="teams:create",M.ActionTeamsDelete="teams:delete",M.ActionTeamsRead="teams:read",M.ActionTeamsWrite="teams:write",M.ActionTeamsPermissionsRead="teams.permissions:read",M.ActionTeamsPermissionsWrite="teams.permissions:write",M.ActionRolesList="roles:read",M.ActionTeamsRolesList="teams.roles:read",M.ActionTeamsRolesAdd="teams.roles:add",M.ActionTeamsRolesRemove="teams.roles:remove",M.ActionUserRolesList="users.roles:read",M.ActionUserRolesAdd="users.roles:add",M.ActionUserRolesRemove="users.roles:remove",M.DashboardsRead="dashboards:read",M.DashboardsWrite="dashboards:write",M.DashboardsDelete="dashboards:delete",M.DashboardsCreate="dashboards:create",M.DashboardsPermissionsRead="dashboards.permissions:read",M.DashboardsPermissionsWrite="dashboards.permissions:write",M.DashboardsPublicWrite="dashboards.public:write",M.FoldersRead="folders:read",M.FoldersWrite="folders:write",M.FoldersDelete="folders:delete",M.FoldersCreate="folders:create",M.FoldersPermissionsRead="folders.permissions:read",M.FoldersPermissionsWrite="folders.permissions:write",M.ActionSupportBundlesCreate="support.bundles:create",M.ActionSupportBundlesRead="support.bundles:read",M.ActionSupportBundlesDelete="support.bundles:delete",M.AlertingRuleCreate="alert.rules:create",M.AlertingRuleRead="alert.rules:read",M.AlertingRuleUpdate="alert.rules:write",M.AlertingRuleDelete="alert.rules:delete",M.AlertingInstanceCreate="alert.instances:create",M.AlertingInstanceUpdate="alert.instances:write",M.AlertingInstanceRead="alert.instances:read",M.AlertingNotificationsRead="alert.notifications:read",M.AlertingNotificationsWrite="alert.notifications:write",M.AlertingRuleExternalWrite="alert.rules.external:write",M.AlertingRuleExternalRead="alert.rules.external:read",M.AlertingInstancesExternalWrite="alert.instances.external:write",M.AlertingInstancesExternalRead="alert.instances.external:read",M.AlertingNotificationsExternalWrite="alert.notifications.external:write",M.AlertingNotificationsExternalRead="alert.notifications.external:read",M.AlertingProvisioningReadSecrets="alert.provisioning.secrets:read",M.AlertingProvisioningRead="alert.provisioning:read",M.AlertingProvisioningWrite="alert.provisioning:write",M.ActionAPIKeysRead="apikeys:read",M.ActionAPIKeysCreate="apikeys:create",M.ActionAPIKeysDelete="apikeys:delete",M.PluginsInstall="plugins:install",M.PluginsWrite="plugins:write",M.SettingsRead="settings:read",M.SettingsWrite="settings:write",M))(y||{}),T=e(28444)},13868:()=>{"use strict"},54034:()=>{"use strict"},75330:()=>{"use strict"},77237:()=>{"use strict"},90697:()=>{"use strict"},64756:(Y,A,e)=>{"use strict";e.d(A,{ch:()=>g,d4:()=>s,wA:()=>o,zD:()=>r});var t=e(30038),n=e(69733);const o=n.useDispatch,s=n.useSelector,r=(u,d,i)=>(0,t.zD)(u,d,i),g=t.ch},38824:(Y,A,e)=>{"use strict";e.d(A,{m:()=>t});var t=(n=>(n.LineChart="Line chart",n.LineChartSmooth="Line chart smooth",n.LineChartGradientColorScheme="Line chart with gradient color scheme",n.AreaChart="Area chart",n.AreaChartStacked="Area chart stacked",n.AreaChartStackedPercent="Area chart 100% stacked",n.BarChart="Bar chart",n.BarChartGradientColorScheme="Bar chart with gradient color scheme",n.BarChartStacked="Bar chart stacked",n.BarChartStackedPercent="Bar chart 100% stacked",n.BarChartHorizontal="Bar chart horizontal",n.BarChartHorizontalStacked="Bar chart horizontal stacked",n.BarChartHorizontalStackedPercent="Bar chart horizontal 100% stacked",n.Candlestick="Candlestick",n.PieChart="Pie chart",n.PieChartDonut="Pie chart donut",n.Stat="Stat",n.StatColoredBackground="Stat colored background",n.Gauge="Gauge",n.GaugeNoThresholds="Gauge no thresholds",n.BarGaugeBasic="Bar gauge basic",n.BarGaugeLCD="Bar gauge LCD",n.Table="Table",n.StateTimeline="State timeline",n.StatusHistory="Status history",n.TextPanel="Text",n.DashboardList="Dashboard list",n.Logs="Logs",n.FlameGraph="Flame graph",n))(t||{})},94822:(Y,A,e)=>{"use strict";e.d(A,{Gi:()=>n,JS:()=>u,N1:()=>d,Q8:()=>i,Si:()=>o,cF:()=>t,lh:()=>g,s1:()=>s});var t=(l=>(l.Firing="firing",l.Inactive="inactive",l.Pending="pending",l))(t||{}),n=(l=>(l.Normal="Normal",l.Alerting="Alerting",l.Pending="Pending",l.NoData="NoData",l.Error="Error",l))(n||{});function o(l){return Object.values(t).includes(l)}function s(l){return Object.values(n).some(f=>f===l)}function r(l){const f=Object.values(t);return l!=null&&!f.includes(l)}function g(l){return r(l)?l.split(" ")[0]:l}var u=(l=>(l.Alerting="alerting",l.Recording="recording",l))(u||{}),d=(l=>(l.Cortex="Cortex",l.Mimir="Mimir",l.Prometheus="Prometheus",l.Thanos="Thanos",l))(d||{}),i=(l=>(l.Alerting="Alerting",l.NoData="NoData",l.KeepLastState="KeepLastState",l.OK="OK",l.Error="Error",l))(i||{})},54317:(Y,A,e)=>{"use strict";e.d(A,{$:()=>s,S:()=>n});var t=e(94822);function n(r,g){return(0,t.lh)(r.state)===g}var o=(r=>(r.Firing="firing",r))(o||{}),s=(r=>(r.Alerting="alerting",r.Pending="pending",r.Normal="inactive",r.NoData="nodata",r.Error="error",r))(s||{})},64998:()=>{"use strict"},72834:Y=>{const A="    ";function e(s){let r="";return s&&Object.keys(s).forEach(function(g){r+=g+":"+s[g]+";"}),r}function t(s){function r(u){return'class="'+u+'"'}function g(u){return'style="'+e(s["."+u])+'"'}return s?g:r}function n(s){return s===null?"null":Array.isArray(s)?"array":typeof s=="string"&&/^https?:/.test(s)?"link":typeof s=="object"&&typeof s.toISOString=="function"?"date":typeof s}function o(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}Y.exports=function(s,r){let g="";const u=t(r);let d=function(l,f,c,h){if(!l.length)return f+" "+c;let p=f+`
`;return g+=A,l.forEach(function(m,a){p+=g+h(m)+(a<l.length-1?",":"")+`
`}),g=g.slice(0,-A.length),p+g+c};function i(l){if(l===void 0)return"";switch(n(l)){case"boolean":return"<span "+u("json-markup-bool")+">"+l+"</span>";case"number":return"<span "+u("json-markup-number")+">"+l+"</span>";case"date":return'<span class="json-markup-string">"'+o(l.toISOString())+'"</span>';case"null":return"<span "+u("json-markup-null")+">null</span>";case"string":return"<span "+u("json-markup-string")+'>"'+o(l.replace(/\n/g,`
`+g))+'"</span>';case"link":return"<span "+u("json-markup-string")+'>"<a href="'+encodeURI(l)+'">'+o(l)+'</a>"</span>';case"array":return d(l,"[","]",i);case"object":const f=Object.keys(l).filter(function(c){return l[c]!==void 0});return d(f,"{","}",function(c){return"<span "+u("json-markup-key")+'>"'+o(c)+'":</span> '+i(l[c])})}return""}return"<div "+u("json-markup")+">"+i(s)+"</div>"}},13609:()=>{(function(Y){"use strict";Y(function(){Y.support.transition=function(){var A=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(e.style[n]!==void 0)return t[n]}();return A&&{end:A}}()})})(window.jQuery),function(Y){"use strict";var A="[data-toggle=dropdown]",e=function(s){var r=Y(s).on("click.dropdown.data-api",this.toggle);Y("html").on("click.dropdown.data-api",function(){r.parent().removeClass("open")})};e.prototype={constructor:e,toggle:function(s){var r=Y(this),g,u;if(!r.is(".disabled, :disabled"))return g=n(r),u=g.hasClass("open"),t(),u||("ontouchstart"in document.documentElement&&Y('<div class="dropdown-backdrop"/>').insertBefore(Y(this)).on("click",t),g.toggleClass("open")),r.focus(),!1},keydown:function(s){var r,g,u,d,i,l;if(/(38|40|27)/.test(s.keyCode)&&(r=Y(this),s.preventDefault(),s.stopPropagation(),!r.is(".disabled, :disabled"))){if(d=n(r),i=d.hasClass("open"),!i||i&&s.keyCode==27)return s.which==27&&d.find(A).focus(),r.click();g=Y("[role=menu] li:not(.divider):visible a",d),g.length&&(l=g.index(g.filter(":focus")),s.keyCode==38&&l>0&&l--,s.keyCode==40&&l<g.length-1&&l++,~l||(l=0),g.eq(l).focus())}}};function t(){Y(".dropdown-backdrop").remove(),Y(A).each(function(){n(Y(this)).removeClass("open")})}function n(s){var r=s.attr("data-target"),g;return r||(r=s.attr("href"),r=r&&/#[A-Za-z]/.test(r)&&r.replace(/.*(?=#[^\s]*$)/,"")),g=r&&Y.find(r),(!g||!g.length)&&(g=s.parent()),g}var o=Y.fn.dropdown;Y.fn.dropdown=function(s){return this.each(function(){var r=Y(this),g=r.data("dropdown");g||r.data("dropdown",g=new e(this)),typeof s=="string"&&g[s].call(r)})},Y.fn.dropdown.Constructor=e,Y.fn.dropdown.noConflict=function(){return Y.fn.dropdown=o,this},Y(document).on("click.dropdown.data-api",t).on("click.dropdown.data-api",".dropdown form",function(s){s.stopPropagation()}).on("click.dropdown.data-api",A,e.prototype.toggle).on("keydown.dropdown.data-api",A+", [role=menu]",e.prototype.keydown)}(window.jQuery),function(Y){"use strict";var A=function(t,n){this.options=n,this.$element=Y(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",Y.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};A.prototype={constructor:A,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=Y.Event("show");this.$element.trigger(n),!(this.isShown||n.isDefaultPrevented())&&(this.isShown=!0,this.escape(),this.backdrop(function(){var o=Y.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),o&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),o?t.$element.one(Y.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault();var n=this;t=Y.Event("hide"),this.$element.trigger(t),!(!this.isShown||t.isDefaultPrevented())&&(this.isShown=!1,this.escape(),Y(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),Y.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;Y(document).on("focusin.modal",function(n){t.$element[0]!==n.target&&!t.$element.has(n.target).length&&t.$element.focus()})},escape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(n){n.which==27&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(Y.support.transition.end),t.hideModal()},500);this.$element.one(Y.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=Y.support.transition&&o;if(this.$backdrop=Y('<div class="modal-backdrop '+o+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?Y.proxy(this.$element[0].focus,this.$element[0]):Y.proxy(this.hide,this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;s?this.$backdrop.one(Y.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),Y.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(Y.support.transition.end,t):t()):t&&t()}};var e=Y.fn.modal;Y.fn.modal=function(t){return this.each(function(){var n=Y(this),o=n.data("modal"),s=Y.extend({},Y.fn.modal.defaults,n.data(),typeof t=="object"&&t);o||n.data("modal",o=new A(this,s)),typeof t=="string"?o[t]():s.show&&o.show()})},Y.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},Y.fn.modal.Constructor=A,Y.fn.modal.noConflict=function(){return Y.fn.modal=e,this},Y(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=Y(this),o=n.attr("href"),s=Y.find(n.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),r=s.data("modal")?"toggle":Y.extend({remote:!/#/.test(o)&&o},s.data(),n.data());t.preventDefault(),s.modal(r).one("hide",function(){n.focus()})})}(window.jQuery),function(Y){"use strict";var A=function(t,n){this.init("tooltip",t,n)};A.prototype={constructor:A,init:function(t,n,o){var s,r,g,u,d;for(this.type=t,this.$element=Y(n),this.options=this.getOptions(o),this.enabled=!0,g=this.options.trigger.split(" "),d=g.length;d--;)u=g[d],u=="click"?this.$element.on("click."+this.type,this.options.selector,Y.proxy(this.toggle,this)):u!="manual"&&(s=u=="hover"?"mouseenter":"focus",r=u=="hover"?"mouseleave":"blur",this.$element.on(s+"."+this.type,this.options.selector,Y.proxy(this.enter,this)),this.$element.on(r+"."+this.type,this.options.selector,Y.proxy(this.leave,this)));this.options.selector?this._options=Y.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=Y.extend({},Y.fn[this.type].defaults,this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=Y.fn[this.type].defaults,o={},s;if(this._options&&Y.each(this._options,function(r,g){n[r]!=g&&(o[r]=g)},this),s=Y(t.currentTarget)[this.type](o).data(this.type),!s.options.delay||!s.options.delay.show)return s.show();clearTimeout(this.timeout),s.hoverState="in",this.timeout=setTimeout(function(){s.hoverState=="in"&&s.show()},s.options.delay.show)},leave:function(t){var n=Y(t.currentTarget)[this.type](this._options).data(this.type);if(this.timeout&&clearTimeout(this.timeout),!n.options.delay||!n.options.delay.hide)return n.hide();n.hoverState="out",this.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},show:function(){var t,n,o,s,r,g,u=Y.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(u),u.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),r=typeof this.options.placement=="function"?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(Y.find(this.options.container)):t.insertAfter(this.$element),n=this.getPosition(),o=t[0].offsetWidth,s=t[0].offsetHeight,r){case"bottom":g={top:n.top+n.height,left:n.left+n.width/2-o/2};break;case"top":g={top:n.top-s,left:n.left+n.width/2-o/2};break;case"left":g={top:n.top+n.height/2-s/2,left:n.left-o};break;case"right":g={top:n.top+n.height/2-s/2,left:n.left+n.width};break;case"topLeft":g={top:n.top-s,left:n.left+n.width/2-o*.1};break;case"topRight":g={top:n.top-s,left:n.left+n.width/2-o*.9};break;case"rightTop":g={top:n.top+n.height/2-s*.1,left:n.left+n.width};break;case"rightBottom":g={top:n.top+n.height/2-s*.9,left:n.left+n.width};break;case"bottomLeft":g={top:n.top+n.height,left:n.left+n.width/2-o*.1};break;case"bottomRight":g={top:n.top+n.height,left:n.left+n.width/2-o*.9};break;case"leftTop":g={top:n.top+n.height/2-s*.1,left:n.left-o};break;case"leftBottom":g={top:n.top+n.height/2-s*.9,left:n.left-o};break}this.applyPlacement(g,r),this.$element.trigger("shown")}},applyPlacement:function(t,n){var o=this.tip(),s=o[0].offsetWidth,r=o[0].offsetHeight,g,u,d,i;o.offset(t).addClass(n).addClass("in"),g=o[0].offsetWidth,u=o[0].offsetHeight,n=="top"&&u!=r&&(t.top=t.top+r-u,i=!0),n=="bottom"||n=="top"?(d=0,t.left<0&&(d=t.left*-2,t.left=0,o.offset(t),g=o[0].offsetWidth,u=o[0].offsetHeight),this.replaceArrow(d-s+g,g,"left")):this.replaceArrow(u-r,u,"top"),i&&o.offset(t)},replaceArrow:function(t,n,o){this.arrow().css(o,t?50*(1-t/n)+"%":"")},setContent:function(){var t=this.tip(),n=this.getTitle();t.find(".tooltip-inner").text(n),t.removeClass("fade in top bottom left right")},hide:function(){var t=this,n=this.tip(),o=Y.Event("hide");if(this.$element.trigger(o),o.isDefaultPrevented())return;n.removeClass("in");function s(){var r=setTimeout(function(){n.off(Y.support.transition.end).detach()},500);n.one(Y.support.transition.end,function(){clearTimeout(r),n.detach()})}return Y.support.transition&&this.$tip.hasClass("fade")?s():n.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var t=this.$element;(t.attr("title")||typeof t.attr("data-original-title")!="string")&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return Y.extend({},typeof t.getBoundingClientRect=="function"?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var t,n=this.$element,o=this.options;return t=n.attr("data-original-title")||(typeof o.title=="function"?o.title.call(n[0]):o.title),t},tip:function(){return this.$tip=this.$tip||Y(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var n=t?Y(t.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var e=Y.fn.tooltip;Y.fn.tooltip=function(t){return this.each(function(){var n=Y(this),o=n.data("tooltip"),s=typeof t=="object"&&t;o||n.data("tooltip",o=new A(this,s)),typeof t=="string"&&o[t]()})},Y.fn.tooltip.Constructor=A,Y.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},Y.fn.tooltip.noConflict=function(){return Y.fn.tooltip=e,this}}(window.jQuery),function(Y){"use strict";var A=function(t){this.element=Y(t)};A.prototype={constructor:A,show:function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),o=t.attr("data-target"),s,r,g;o||(o=t.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")&&(s=n.find(".active:last a")[0],g=Y.Event("show",{relatedTarget:s}),t.trigger(g),!g.isDefaultPrevented()&&(r=Y.find(o),this.activate(t.parent("li"),n),this.activate(r,r.parent(),function(){t.trigger({type:"shown",relatedTarget:s})})))},activate:function(t,n,o){var s=n.find("> .active"),r=o&&Y.support.transition&&s.hasClass("fade");function g(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),r?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),o&&o()}r?s.one(Y.support.transition.end,g):g(),s.removeClass("in")}};var e=Y.fn.tab;Y.fn.tab=function(t){return this.each(function(){var n=Y(this),o=n.data("tab");o||n.data("tab",o=new A(this)),typeof t=="string"&&o[t]()})},Y.fn.tab.Constructor=A,Y.fn.tab.noConflict=function(){return Y.fn.tab=e,this},Y(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),Y(this).tab("show")})}(window.jQuery),function(Y){"use strict";var A=function(t,n){this.$element=Y(t),this.options=Y.extend({},Y.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=Y(this.options.menu),this.shown=!1,this.listen()};A.prototype={constructor:A,select:function(){var t=this.$menu.find(".active").attr("data-value")||this.$element.val();return this.$element.val(this.updater(t)).change(),this.hide()},updater:function(t){return t},show:function(){var t=Y.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var n;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(n=Y.isFunction(this.source)?this.source(this.query,Y.proxy(this.process,this)):this.source,n?this.process(n):this)},process:function(t){var n=this;return t=Y.grep(t,function(o){return n.matcher(o)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var n=[],o=[],s=[],r;r=t.shift();)r.toLowerCase().indexOf(this.query.toLowerCase())?~r.indexOf(this.query)?o.push(r):s.push(r):n.push(r);return n.concat(o,s)},highlighter:function(t){var n=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return n?t.replace(new RegExp("("+n+")","ig"),function(o,s){return"<strong>"+s+"</strong>"}):t},render:function(t){var n=this;return t=Y(t).map(function(o,s){return o=Y(n.options.item).attr("data-value",s),o.find("a").html(n.highlighter(s)),o[0]}),this.$menu.html(t),this},next:function(t){var n=this.$menu.find(".active").removeClass("active"),o=n.next();o.length||(o=Y(this.$menu.find("li")[0])),o.addClass("active")},prev:function(t){var n=this.$menu.find(".active").removeClass("active"),o=n.prev();o.length||(o=this.$menu.find("li").last()),o.addClass("active")},listen:function(){this.$element.on("focus",Y.proxy(this.focus,this)).on("blur",Y.proxy(this.blur,this)).on("keypress",Y.proxy(this.keypress,this)).on("keyup",Y.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",Y.proxy(this.keydown,this)),this.$menu.on("click",Y.proxy(this.click,this)).on("mouseenter","li",Y.proxy(this.mouseenter,this)).on("mouseleave","li",Y.proxy(this.mouseleave,this))},destroy:function(){this.$element.off().removeData("typeahead"),this.$menu.off()},eventSupported:function(t){var n=t in this.$element;return n||(this.$element.setAttribute(t,"return;"),n=typeof this.$element[t]=="function"),n},move:function(t){if(this.shown&&!(t.shiftKey&&t.keyCode===40)){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next();break}t.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~Y.inArray(t.keyCode,[40,38,9,13,27,57]),this.move(t)},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.keyCode===13&&typeof this.$menu.find(".active").attr("data-value")>"u"?this.$element.submit():(t.stopPropagation(),t.preventDefault())},focus:function(t){this.focused=!0},blur:function(t){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(t){t.stopPropagation(),t.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),Y(t.currentTarget).addClass("active")},mouseleave:function(t){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var e=Y.fn.typeahead;Y.fn.typeahead=function(t){return this.each(function(){var n=Y(this),o=n.data("typeahead"),s=typeof t=="object"&&t;o||n.data("typeahead",o=new A(this,s)),typeof t=="string"&&o[t]()})},Y.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},Y.fn.typeahead.Constructor=A,Y.fn.typeahead.noConflict=function(){return Y.fn.typeahead=e,this},Y(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=Y(this);n.data("typeahead")||n.typeahead(n.data())})}(window.jQuery),function(Y){"use strict";var A=function(t,n){this.options=Y.extend({},Y.fn.affix.defaults,n),this.$window=Y(window).on("scroll.affix.data-api",Y.proxy(this.checkPosition,this)).on("click.affix.data-api",Y.proxy(function(){setTimeout(Y.proxy(this.checkPosition,this),1)},this)),this.$element=Y(t),this.checkPosition()};A.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=Y(document).height(),n=this.$window.scrollTop(),o=this.$element.offset(),s=this.options.offset,r=s.bottom,g=s.top,u="affix affix-top affix-bottom",d;typeof s!="object"&&(r=g=s),typeof g=="function"&&(g=s.top()),typeof r=="function"&&(r=s.bottom()),d=this.unpin!=null&&n+this.unpin<=o.top?!1:r!=null&&o.top+this.$element.height()>=t-r?"bottom":g!=null&&n<=g?"top":!1,this.affixed!==d&&(this.affixed=d,this.unpin=d=="bottom"?o.top-n:null,this.$element.removeClass(u).addClass("affix"+(d?"-"+d:"")))}};var e=Y.fn.affix;Y.fn.affix=function(t){return this.each(function(){var n=Y(this),o=n.data("affix"),s=typeof t=="object"&&t;o||n.data("affix",o=new A(this,s)),typeof t=="string"&&o[t]()})},Y.fn.affix.Constructor=A,Y.fn.affix.defaults={offset:0},Y.fn.affix.noConflict=function(){return Y.fn.affix=e,this},Y(window).on("load",function(){Y('[data-spy="affix"]').each(function(){var t=Y(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery)},82013:()=>{(function(Y){var A={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function e(t){var n={x:-1,y:-1,locked:!1};t.setCrosshair=function(g){if(!g)n.x=-1;else{var u=t.p2c(g);n.x=Math.max(0,Math.min(u.left,t.width())),n.y=Math.max(0,Math.min(u.top,t.height()))}t.triggerRedrawOverlay()},t.clearCrosshair=t.setCrosshair,t.lockCrosshair=function(g){g&&t.setCrosshair(g),n.locked=!0},t.unlockCrosshair=function(){n.locked=!1};function o(r){n.locked||n.x!=-1&&(n.x=-1,t.triggerRedrawOverlay())}function s(r){if(!n.locked){if(t.getSelection&&t.getSelection()){n.x=-1;return}var g=t.offset();n.x=Math.max(0,Math.min(r.pageX-g.left,t.width())),n.y=Math.max(0,Math.min(r.pageY-g.top,t.height())),t.triggerRedrawOverlay()}}t.hooks.bindEvents.push(function(r,g){r.getOptions().crosshair.mode&&(g.mouseout(o),g.mousemove(s))}),t.hooks.drawOverlay.push(function(r,g){var u=r.getOptions().crosshair;if(u.mode){var d=r.getPlotOffset();if(g.save(),g.translate(d.left,d.top),n.x!=-1){var i=r.getOptions().crosshair.lineWidth%2?.5:0;if(g.strokeStyle=u.color,g.lineWidth=u.lineWidth,g.lineJoin="round",g.beginPath(),u.mode.indexOf("x")!=-1){var l=Math.floor(n.x)+i;g.moveTo(l,0),g.lineTo(l,r.height())}if(u.mode.indexOf("y")!=-1){var f=Math.floor(n.y)+i;g.moveTo(0,f),g.lineTo(r.width(),f)}g.stroke()}g.restore()}}),t.hooks.shutdown.push(function(r,g){g.unbind("mouseout",o),g.unbind("mousemove",s)})}Y.plot.plugins.push({init:e,options:A,name:"crosshair",version:"1.0"})})(jQuery)},2341:()=>{(function(Y){function A(e){e.hooks.processDatapoints.push(function(t,n,o){n.dashes.show&&t.hooks.draw.push(function(s,r){var g=s.getPlotOffset(),u=n.xaxis,d=n.yaxis;function i(h,p){var m=o.points,a=o.pointsize,v=null,E=null,D=0,b=!0,P,y;n.dashes.dashLength[0]?(P=n.dashes.dashLength[0],n.dashes.dashLength[1]?y=n.dashes.dashLength[1]:y=P):y=P=n.dashes.dashLength,r.beginPath();for(var T=a;T<m.length;T+=a){let H=function(W){var N=Math.sqrt(Math.pow(L-O,2)+Math.pow(U-C,2));if(N<=W)return{deltaX:L-O,deltaY:U-C,distance:N,remainder:W-N};var V=L>O?1:-1,G=U>C?1:-1;return{deltaX:V*Math.sqrt(Math.pow(W,2)/(1+Math.pow((U-C)/(L-O),2))),deltaY:G*Math.sqrt(Math.pow(W,2)-Math.pow(W,2)/(1+Math.pow((U-C)/(L-O),2))),distance:W,remainder:0}};var B=H,M=m[T-a],I=m[T-a+1],x=m[T],S=m[T+1];if(!(M==null||x==null)){if(I<=S&&I<d.min){if(S<d.min)continue;M=(d.min-I)/(S-I)*(x-M)+M,I=d.min}else if(S<=I&&S<d.min){if(I<d.min)continue;x=(d.min-I)/(S-I)*(x-M)+M,S=d.min}if(I>=S&&I>d.max){if(S>d.max)continue;M=(d.max-I)/(S-I)*(x-M)+M,I=d.max}else if(S>=I&&S>d.max){if(I>d.max)continue;x=(d.max-I)/(S-I)*(x-M)+M,S=d.max}if(M<=x&&M<u.min){if(x<u.min)continue;I=(u.min-M)/(x-M)*(S-I)+I,M=u.min}else if(x<=M&&x<u.min){if(M<u.min)continue;S=(u.min-M)/(x-M)*(S-I)+I,x=u.min}if(M>=x&&M>u.max){if(x>u.max)continue;I=(u.max-M)/(x-M)*(S-I)+I,M=u.max}else if(x>=M&&x>u.max){if(M>u.max)continue;S=(u.max-M)/(x-M)*(S-I)+I,x=u.max}(M!=v||I!=E)&&r.moveTo(u.p2c(M)+h,d.p2c(I)+p);var O=u.p2c(M)+h,C=d.p2c(I)+p,L=u.p2c(x)+h,U=d.p2c(S)+p,R;do R=H(D>0?D:b?P:y),(R.deltaX!=0||R.deltaY!=0)&&(b?r.lineTo(O+R.deltaX,C+R.deltaY):r.moveTo(O+R.deltaX,C+R.deltaY)),b=!b,D=R.remainder,O+=R.deltaX,C+=R.deltaY;while(R.distance>0);v=x,E=S}}r.stroke()}r.save(),r.translate(g.left,g.top),r.lineJoin="round";var l=n.dashes.lineWidth,f=n.shadowSize;if(l>0&&f>0){r.lineWidth=f,r.strokeStyle="rgba(0,0,0,0.1)";var c=Math.PI/18;i(Math.sin(c)*(l/2+f/2),Math.cos(c)*(l/2+f/2)),r.lineWidth=f/2,i(Math.sin(c)*(l/2+f/4),Math.cos(c)*(l/2+f/4))}r.lineWidth=l,r.strokeStyle=n.color,l>0&&i(0,0),r.restore()})})}Y.plot.plugins.push({init:A,options:{series:{dashes:{show:!1,lineWidth:2,dashLength:10}}},name:"dashes",version:"0.1"})})(jQuery)},92275:()=>{(function(Y){"use strict";var A={series:{fillBelowTo:null}};function e(t){function n(r,g){var u;for(u=0;u<g.length;++u)if(g[u].id===r.fillBelowTo)return g[u];return null}function o(r,g,u,d,i,l,f,c){var h,p,m,a,v,E;return h=u-r,p=d-g,m=f-i,a=c-l,v=(-p*(r-i)+h*(g-l))/(-m*p+h*a),E=(m*(g-l)-a*(r-i))/(-m*p+h*a),v>=0&&v<=1&&E>=0&&E<=1?[r+E*h,g+E*p]:null}function s(r,g,u){if(u.fillBelowTo===null)return;var d,i,l,f,c,h,p;function m(y,T){g.beginPath(),g.moveTo(u.xaxis.p2c(y)+h.left,u.yaxis.p2c(T)+h.top)}function a(){g.closePath(),g.fill()}function v(){if(l.length/i!==c.length/f)return console.error("Refusing to graph inconsistent number of points"),!1;var y;for(y=0;y<l.length/i;y++)if(l[y*i]!==null&&c[y*f]!==null&&l[y*i]!==c[y*f])return console.error("Refusing to graph points without matching value"),!1;return!0}function E(y,T){console.assert(T>y,"expects the end index to be greater than the start index");var M=y===0||l[y-1]===null||c[y-1]===null,I=!1,x,S;for(x=y;x<T;x++)if(l[x*i+1]===null||c[x*i+1]===null)I=!1,M=!0;else if(l[x*i+1]===c[x*f+1])I=!0,M=!1;else if(l[x*i+1]>c[x*f+1]){M?m(l[x*i],l[x*i+1]):I?m(l[(x-1)*i],l[(x-1)*i+1]):(S=D(x),m(S[0],S[1])),P(x,T);return}else M=!1,I=!1}function D(y){console.assert(y>0,"expects the second point in the series line segment");var T,M;for(T=1;T<c.length/f;T++)if(M=o(l[(y-1)*i],l[(y-1)*i+1],l[y*i],l[y*i+1],c[(T-1)*f],c[(T-1)*f+1],c[T*f],c[T*f+1]),M!==null)return M;console.error("intersectionPoint() should only be called when an intersection happens")}function b(y,T){console.assert(y>=T,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var M;for(M=y;M>=T;M--)g.lineTo(d.xaxis.p2c(c[M*f])+h.left,d.yaxis.p2c(c[M*f+1])+h.top);a()}function P(y,T){console.assert(y<=T,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var M,I;for(M=y;M<T;M++)if(l[M*i+1]===null&&M>y){b(M-1,y),E(M,T);return}else if(l[M*i+1]===c[M*f+1]){b(M,y),E(M,T);return}else if(l[M*i+1]<c[M*f+1]){I=D(M),g.lineTo(u.xaxis.p2c(I[0])+h.left,u.yaxis.p2c(I[1])+h.top),b(M,y),E(M,T);return}else g.lineTo(u.xaxis.p2c(l[M*i])+h.left,u.yaxis.p2c(l[M*i+1])+h.top);b(T,y)}d=n(u,r.getData()),d&&(i=u.datapoints.pointsize,l=u.datapoints.points,f=d.datapoints.pointsize,c=d.datapoints.points,h=r.getPlotOffset(),v()&&(p=Y.color.parse(u.color),p.a=.4,p.normalize(),g.fillStyle=p.toString(),E(0,l.length/i)))}t.hooks.drawSeries.push(s)}Y.plot.plugins.push({init:e,options:A,name:"fillbelow",version:"0.1.0"})})(jQuery)},19538:()=>{/*!
 * jquery.flot.gauge v1.1.0 *
 *
 * Flot plugin for rendering gauge charts.
 *
 * Copyright (c) 2015 @toyoty99.
 * Licensed under the MIT license.
 */(function(Y){var A=function(){var u,d,i,l,f,c,h=function(y,T){u=T,d=y.getPlaceholder(),i=y.getOptions(),l=i.series.gauges,f=y.getData(),c=e(l.debug)};h.prototype.calculateLayout=function(){var y=d.width(),T=d.height(),M=Math.min(f.length,l.layout.columns),I=Math.ceil(f.length/M),x=l.layout.margin,S=l.layout.hMargin,O=l.layout.vMargin,C=(y-x*2-S*(M-1))/M,L=(T-x*2-O*(I-1))/I;if(l.layout.square){var U=Math.min(C,L);C=U,L=U}p(l,C);var R=l.cell.margin,B=0,H=0;l.label.show&&(B=l.label.margin,H=l.label.font.size);var W=0,N=0;l.value.show&&(W=l.value.margin,N=l.value.font.size);var V=0;l.threshold.show&&(V=l.threshold.width);var G=0,_=0;l.threshold.label.show&&(G=l.threshold.label.margin,_=l.threshold.label.font.size);for(var K=C/2-R-V-G*2-_,j=l.gauge.startAngle,k=l.gauge.endAngle,Q=(k-j)/100,ee=-1,ae=j;ae<k;ae+=Q)ee=Math.max(ee,Math.sin(o(ae)));ee=Math.max(ee,Math.sin(o(k)));var Z=(L-R*2-B*2-H)/(1+ee);Z*ee<W+N/2&&(Z=L-R*2-B*2-H-W-N/2);var ne=Z-G*2-_-V,q=Math.min(K,ne),te=l.gauge.width;te>=q&&(te=Math.max(3,q/3));var re=G*2+_+V+q,de=Math.max(re*(1+ee),re+W+N/2);return{canvasWidth:y,canvasHeight:T,margin:x,hMargin:S,vMargin:O,columns:M,rows:I,cellWidth:C,cellHeight:L,cellMargin:R,labelMargin:B,labelFontSize:H,valueMargin:W,valueFontSize:N,width:te,radius:q,thresholdWidth:V,thresholdLabelMargin:G,thresholdLabelFontSize:_,gaugeOuterHeight:de}};function p(y,T){y.gauge.width==="auto"&&(y.gauge.width=Math.max(5,T/8)),y.label.margin==="auto"&&(y.label.margin=Math.max(1,T/20)),y.label.font.size==="auto"&&(y.label.font.size=Math.max(5,T/8)),y.value.margin==="auto"&&(y.value.margin=Math.max(1,T/30)),y.value.font.size==="auto"&&(y.value.font.size=Math.max(5,T/9)),y.threshold.width==="auto"&&(y.threshold.width=Math.max(3,T/100)),y.threshold.label.margin==="auto"&&(y.threshold.label.margin=Math.max(3,T/40)),y.threshold.label.font.size==="auto"&&(y.threshold.label.font.size=Math.max(5,T/15))}h.prototype.calculateAutoValues=p,h.prototype.calculateCellLayout=function(y,T,M){var I=t(T.columns,M),x=n(T.columns,M),S=T.margin+(T.cellWidth+T.hMargin)*I,O=T.margin+(T.cellHeight+T.vMargin)*x,C=S+T.cellWidth/2,L=O+T.cellMargin+T.labelMargin*2+T.labelFontSize+T.thresholdWidth+T.thresholdLabelFontSize+T.thresholdLabelMargin*2+T.radius,U=T.cellHeight-T.cellMargin*2-T.labelMargin*2-T.labelFontSize-T.gaugeOuterHeight,R=0;return y.cell.vAlign==="middle"?R=U/2:y.cell.vAlign==="bottom"&&(R=U),L+=R,{col:I,row:x,x:S,y:O,offsetY:R,cellWidth:T.cellWidth,cellHeight:T.cellHeight,cellMargin:T.cellMargin,cx:C,cy:L}},h.prototype.drawBackground=function(y){l.frame.show&&(u.save(),u.strokeStyle=i.grid.borderColor,u.lineWidth=i.grid.borderWidth,u.strokeRect(0,0,y.canvasWidth,y.canvasHeight),i.grid.backgroundColor&&(u.fillStyle=i.grid.backgroundColor,u.fillRect(0,0,y.canvasWidth,y.canvasHeight)),u.restore())},h.prototype.drawCellBackground=function(y,T){u.save(),y.cell.border&&y.cell.border.show&&y.cell.border.color&&y.cell.border.width&&(u.strokeStyle=y.cell.border.color,u.lineWidth=y.cell.border.width,u.strokeRect(T.x,T.y,T.cellWidth,T.cellHeight)),y.cell.background&&y.cell.background.color&&(u.fillStyle=y.cell.background.color,u.fillRect(T.x,T.y,T.cellWidth,T.cellHeight)),u.restore()},h.prototype.drawGauge=function(y,T,M,I,x){var S=y.gauge.shadow.show?y.gauge.shadow.blur:0,O=v(y,x),C=m(y,T,x);D(M.cx,M.cy,T.radius,T.width,o(y.gauge.startAngle),o(y.gauge.endAngle),y.gauge.border.color,y.gauge.border.width,y.gauge.background.color,S),D(M.cx,M.cy,T.radius-1,T.width-2,o(C.a1),o(C.a2),O,1,O,S),y.gauge.neutralValue!=null&&a(y,T,M,O)};function m(y,T,M){let I={};var x=y.gauge.neutralValue;return x!=null?M<x?(I.a1=E(y,T,M),I.a2=E(y,T,x)):(I.a1=E(y,T,x),I.a2=E(y,T,M)):(I.a1=y.gauge.startAngle,I.a2=E(y,T,M)),I}function a(y,T,M,I){var x=(y.gauge.max-y.gauge.min)/600;s(u,M.cx,M.cy,T.radius-2,T.width-4,o(E(y,T,y.gauge.neutralValue-x)),o(E(y,T,y.gauge.neutralValue+x)),I,2,y.gauge.background.color)}function v(y,T){for(var M,I=0;I<y.threshold.values.length;I++){var x=y.threshold.values[I];if(M=x.color,T<x.value)break}return M}function E(y,T,M){var I=y.gauge.startAngle+(y.gauge.endAngle-y.gauge.startAngle)*((M-y.gauge.min)/(y.gauge.max-y.gauge.min));return I<y.gauge.startAngle?I=y.gauge.startAngle:I>y.gauge.endAngle&&(I=y.gauge.endAngle),I}h.prototype.drawThreshold=function(y,T,M){for(var I=y.gauge.startAngle,x=0;x<y.threshold.values.length;x++){var S=y.threshold.values[x];c1=S.color,a2=E(y,T,S.value),s(u,M.cx,M.cy,T.radius+T.thresholdWidth,T.thresholdWidth-2,o(I),o(a2),c1,1,c1),I=a2}};function D(y,T,M,I,x,S,O,C,L,U){x!==S&&(u.save(),s(u,y,T,M,I,x,S,O,C,L),U&&(s(u,y,T,M,I,x,S),u.clip(),u.shadowOffsetX=0,u.shadowOffsetY=0,u.shadowBlur=10,u.shadowColor="gray",s(u,y,T,M+1,I+2,x,S,O,1)),u.restore())}h.prototype.drawLable=function(y,T,M,I,x){P(M.cx,M.y+M.cellMargin+T.labelMargin+M.offsetY,"flotGaugeLabel"+I,y.label.formatter?y.label.formatter(x.label,x.data[0][1]):text,y.label)},h.prototype.drawValue=function(y,T,M,I,x){P(M.cx,M.cy-y.value.font.size/2,"flotGaugeValue"+I,y.value.formatter?y.value.formatter(x.label,x.data[0][1]):text,y.value)},h.prototype.drawThresholdValues=function(y,T,M,I){b(y,T,M,"Min"+I,y.gauge.min,y.gauge.startAngle),b(y,T,M,"Max"+I,y.gauge.max,y.gauge.endAngle);for(var x=0;x<y.threshold.values.length;x++){var S=y.threshold.values[x];if(S.value>y.gauge.min&&S.value<y.gauge.max){var O=E(y,T,S.value);b(y,T,M,I+"_"+x,S.value,O)}}var C=y.gauge.neutralValue;C!=null&&C>y.gauge.min&&C<y.gauge.max&&b(y,T,M,"Neutral"+I,C,E(y,T,C))};function b(y,T,M,I,x,S){P(M.cx+(T.thresholdLabelMargin+T.thresholdLabelFontSize/2+T.radius)*Math.cos(o(S)),M.cy+(T.thresholdLabelMargin+T.thresholdLabelFontSize/2+T.radius)*Math.sin(o(S)),"flotGaugeThresholdValue"+I,y.threshold.label.formatter?y.threshold.label.formatter(x):x,y.threshold.label,S)}function P(y,T,M,I,x,S){var O=Y(d).find("#"+M),C=O.length;C||(O=Y("<span></span>"),O.attr("id",M),O.attr("class","flot-temp-elem"),d.append(O)),O.css("position","absolute"),O.css("top",T+"px"),O.css("white-space","nowrap"),x.font.size&&O.css("font-size",x.font.size+"px"),x.font.family&&O.css("font-family",x.font.family),x.color&&O.css("color",x.color),x.background.color&&O.css("background-color",x.background.color),x.background.opacity&&O.css("opacity",x.background.opacity),O.text(I),O.css("left",y+"px"),O.css("left",parseInt(O.css("left"))-O.width()/2+"px"),!C&&S&&(O.css("top",parseInt(O.css("top"))-O.height()/2+"px"),O.css("transform","rotate("+(180*S+90)+"deg)"))}return h}();function e(u){return typeof Logger<"u"?new Logger(u):null}function t(u,d){return d%u}function n(u,d){return Math.floor(d/u)}function o(u){return u*Math.PI}function s(u,d,i,l,f,c,h,p,m,a){if(c!==h){var v=!1;u.save(),u.beginPath(),u.arc(d,i,l,c,h,v),u.lineTo(d+(l-f)*Math.cos(h),i+(l-f)*Math.sin(h)),u.arc(d,i,l-f,h,c,!v),u.closePath(),m&&(u.lineWidth=m),p&&(u.strokeStyle=p,u.stroke()),a&&(u.fillStyle=a,u.fill()),u.restore()}}function r(u){u.hooks.processOptions.push(function(d,i){var l=e(i.series.gauges.debug);i.series.gauges.show&&(i.grid.show=!1,i.legend.show=!1);var f=i.series.gauges.threshold.values;f.sort(function(c,h){return c.value<h.value?-1:c.value>h.value?1:0})}),u.hooks.draw.push(function(d,i){var l=d.getOptions(),f=l.series.gauges,c=e(f.debug);if(f.show){var h=d.getData();if(!(!h||!h.length)){var p=new A(d,i),m=p.calculateLayout();f.debug.layout,p.drawBackground(m);for(var a=0;a<h.length;a++){var v=h[a],E=Y.extend({},f,v.gauges);v.gauges&&p.calculateAutoValues(E,m.cellWidth);var D=p.calculateCellLayout(E,m,a);p.drawCellBackground(E,D),E.debug.layout,E.label.show&&p.drawLable(E,m,D,a,v),p.drawGauge(E,m,D,v.label,v.data[0][1]),E.threshold.show&&p.drawThreshold(E,m,D),E.threshold.label.show&&p.drawThresholdValues(E,m,D,a),E.value.show&&p.drawValue(E,m,D,a,v)}}}})}var g={series:{gauges:{debug:{log:!1,layout:!1,alert:!1},show:!1,layout:{margin:5,columns:3,hMargin:5,vMargin:5,square:!1},frame:{show:!0},cell:{background:{color:null},border:{show:!0,color:"black",width:1},margin:5,vAlign:"middle"},gauge:{width:"auto",startAngle:.9,endAngle:2.1,min:0,max:100,background:{color:"white"},border:{color:"lightgray",width:2},shadow:{show:!0,blur:5}},label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(u,d){return u}},value:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(u,d){return parseInt(d)}},threshold:{show:!0,width:"auto",label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:",sans-serif"},color:null,formatter:function(u){return u}},values:[]}}}};Y.plot.plugins.push({init:r,options:g,name:"gauge",version:"1.1.0"})})(jQuery)},54087:()=>{(function(Y){Y.color={},Y.color.make=function(e,t,n,o){var s={};return s.r=e||0,s.g=t||0,s.b=n||0,s.a=o??1,s.add=function(r,g){for(var u=0;u<r.length;++u)s[r.charAt(u)]+=g;return s.normalize()},s.scale=function(r,g){for(var u=0;u<r.length;++u)s[r.charAt(u)]*=g;return s.normalize()},s.toString=function(){return s.a>=1?"rgb("+[s.r,s.g,s.b].join(",")+")":"rgba("+[s.r,s.g,s.b,s.a].join(",")+")"},s.normalize=function(){function r(g,u,d){return u<g?g:u>d?d:u}return s.r=r(0,parseInt(s.r),255),s.g=r(0,parseInt(s.g),255),s.b=r(0,parseInt(s.b),255),s.a=r(0,s.a,1),s},s.clone=function(){return Y.color.make(s.r,s.b,s.g,s.a)},s.normalize()},Y.color.extract=function(e,t){var n;do{if(n=e.css(t).toLowerCase(),n!=""&&n!="transparent")break;e=e.parent()}while(e.length&&!Y.nodeName(e.get(0),"body"));return n=="rgba(0, 0, 0, 0)"&&(n="transparent"),Y.color.parse(n)},Y.color.parse=function(e){var t,n=Y.color.make;if(t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10));if(t=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),parseFloat(t[4]));if(t=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55);if(t=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55,parseFloat(t[4]));if(t=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return n(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16));if(t=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return n(parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16));var o=Y.trim(e).toLowerCase();return o=="transparent"?n(255,255,255,0):(t=A[o]||[0,0,0],n(t[0],t[1],t[2]))};var A={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery),function(Y){var A=Object.prototype.hasOwnProperty;Y.fn.detach||(Y.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})});function e(o,s){var r=s.children("."+o)[0];if(r==null&&(r=document.createElement("canvas"),r.className=o,Y(r).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(s),!r.getContext))if(window.G_vmlCanvasManager)r=window.G_vmlCanvasManager.initElement(r);else throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=r;var g=this.context=r.getContext("2d"),u=window.devicePixelRatio||1,d=g.webkitBackingStorePixelRatio||g.mozBackingStorePixelRatio||g.msBackingStorePixelRatio||g.oBackingStorePixelRatio||g.backingStorePixelRatio||1;this.pixelRatio=u/d,this.resize(s.width(),s.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}e.prototype.resize=function(o,s){if(o<=0||s<=0)throw new Error("Invalid dimensions for plot, width = "+o+", height = "+s);var r=this.element,g=this.context,u=this.pixelRatio;this.width!=o&&(r.width=o*u,r.style.width=o+"px",this.width=o),this.height!=s&&(r.height=s*u,r.style.height=s+"px",this.height=s),g.restore(),g.save(),g.scale(u,u)},e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.render=function(){var o=this._textCache;for(var s in o)if(A.call(o,s)){var r=this.getTextLayer(s),g=o[s];r.hide();for(var u in g)if(A.call(g,u)){var d=g[u];for(var i in d)if(A.call(d,i)){for(var l=d[i].positions,f=0,c;c=l[f];f++)c.active?c.rendered||(r.append(c.element),c.rendered=!0):(l.splice(f--,1),c.rendered&&c.element.detach());l.length==0&&delete d[i]}}r.show()}},e.prototype.getTextLayer=function(o){var s=this.text[o];return s==null&&(this.textContainer==null&&(this.textContainer=Y("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),s=this.text[o]=Y("<div></div>").addClass(o).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),s},e.prototype.getTextInfo=function(o,s,r,g,u){var d,i,l,f;if(s=""+s,typeof r=="object"?d=r.style+" "+r.variant+" "+r.weight+" "+r.size+"px/"+r.lineHeight+"px "+r.family:d=r,i=this._textCache[o],i==null&&(i=this._textCache[o]={}),l=i[d],l==null&&(l=i[d]={}),f=l[s],f==null){var c=Y("<div></div>").html(s).css({position:"absolute","max-width":u,top:-9999}).appendTo(this.getTextLayer(o));typeof r=="object"?c.css({font:d,color:r.color}):typeof r=="string"&&c.addClass(r),f=l[s]={element:c,positions:[]};var h=this._textSizeCache[s];h?(f.width=h.width,f.height=h.height):(f.width=c.outerWidth(!0),f.height=c.outerHeight(!0),this._textSizeCache[s]={width:f.width,height:f.height}),c.detach()}return f},e.prototype.addText=function(o,s,r,g,u,d,i,l,f){var c=this.getTextInfo(o,g,u,d,i),h=c.positions;l=="center"?s-=c.width/2:l=="right"&&(s-=c.width),f=="middle"?r-=c.height/2:f=="bottom"&&(r-=c.height);for(var p=0,m;m=h[p];p++)if(m.x==s&&m.y==r){m.active=!0;return}m={active:!0,rendered:!1,element:h.length?c.element.clone():c.element,x:s,y:r},h.push(m),m.element.css({top:Math.round(r),left:Math.round(s),"text-align":l})},e.prototype.removeText=function(o,s,r,g,u,d){if(g==null){var i=this._textCache[o];if(i!=null){for(var l in i)if(A.call(i,l)){var f=i[l];for(var c in f)if(A.call(f,c))for(var h=f[c].positions,p=0,m;m=h[p];p++)m.active=!1}}}else for(var h=this.getTextInfo(o,g,u,d).positions,p=0,m;m=h[p];p++)m.x==s&&m.y==r&&(m.active=!1)};function t(o,s,r,g){var u=[],d={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:16.666666666666668},hooks:{}},i=null,l=null,f=null,c=null,h=null,p=[],m=[],a={left:0,right:0,top:0,bottom:0},v=0,E=0,D={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},b=this;b.setData=M,b.setupGrid=j,b.draw=ne,b.getPlaceholder=function(){return o},b.getCanvas=function(){return i.element},b.getPlotOffset=function(){return a},b.width=function(){return v},b.height=function(){return E},b.offset=function(){var J=f.offset();return J.left+=a.left,J.top+=a.top,J},b.getData=function(){return u},b.getAxes=function(){var J={},oe;return Y.each(p.concat(m),function(ue,be){be&&(J[be.direction+(be.n!=1?be.n:"")+"axis"]=be)}),J},b.getXAxes=function(){return p},b.getYAxes=function(){return m},b.c2p=O,b.p2c=C,b.getOptions=function(){return d},b.highlight=je,b.unhighlight=He,b.triggerRedrawOverlay=Qe,b.pointOffset=function(J){return{left:parseInt(p[x(J,"x")-1].p2c(+J.x)+a.left,10),top:parseInt(m[x(J,"y")-1].p2c(+J.y)+a.top,10)}},b.shutdown=W,b.destroy=function(){W(),o.removeData("plot").empty(),u=[],d=null,i=null,l=null,f=null,c=null,h=null,p=[],m=[],D=null,Re=[],b=null},b.resize=function(){var J=o.width(),oe=o.height();i.resize(J,oe),l.resize(J,oe)},b.hooks=D,y(b),T(r),B(),M(s),j(),ne(),H();function P(J,oe){oe=[b].concat(oe);for(var ue=0;ue<J.length;++ue)J[ue].apply(this,oe)}function y(){for(var J={Canvas:e},oe=0;oe<g.length;++oe){var ue=g[oe];ue.init(b,J),ue.options&&Y.extend(!0,d,ue.options)}}function T(J){Y.extend(!0,d,J),J&&J.colors&&(d.colors=J.colors),d.xaxis.color==null&&(d.xaxis.color=Y.color.parse(d.grid.color).scale("a",.22).toString()),d.yaxis.color==null&&(d.yaxis.color=Y.color.parse(d.grid.color).scale("a",.22).toString()),d.xaxis.tickColor==null&&(d.xaxis.tickColor=d.grid.tickColor||d.xaxis.color),d.yaxis.tickColor==null&&(d.yaxis.tickColor=d.grid.tickColor||d.yaxis.color),d.grid.borderColor==null&&(d.grid.borderColor=d.grid.color),d.grid.tickColor==null&&(d.grid.tickColor=Y.color.parse(d.grid.color).scale("a",.22).toString());var oe,ue,be,Le=o.css("font-size"),_e=Le?+Le.replace("px",""):13,Ve={style:o.css("font-style"),size:Math.round(.8*_e),variant:o.css("font-variant"),weight:o.css("font-weight"),family:o.css("font-family")};for(be=d.xaxes.length||1,oe=0;oe<be;++oe)ue=d.xaxes[oe],ue&&!ue.tickColor&&(ue.tickColor=ue.color),ue=Y.extend(!0,{},d.xaxis,ue),d.xaxes[oe]=ue,ue.font&&(ue.font=Y.extend({},Ve,ue.font),ue.font.color||(ue.font.color=ue.color),ue.font.lineHeight||(ue.font.lineHeight=Math.round(ue.font.size*1.15)));for(be=d.yaxes.length||1,oe=0;oe<be;++oe)ue=d.yaxes[oe],ue&&!ue.tickColor&&(ue.tickColor=ue.color),ue=Y.extend(!0,{},d.yaxis,ue),d.yaxes[oe]=ue,ue.font&&(ue.font=Y.extend({},Ve,ue.font),ue.font.color||(ue.font.color=ue.color),ue.font.lineHeight||(ue.font.lineHeight=Math.round(ue.font.size*1.15)));for(d.xaxis.noTicks&&d.xaxis.ticks==null&&(d.xaxis.ticks=d.xaxis.noTicks),d.yaxis.noTicks&&d.yaxis.ticks==null&&(d.yaxis.ticks=d.yaxis.noTicks),d.x2axis&&(d.xaxes[1]=Y.extend(!0,{},d.xaxis,d.x2axis),d.xaxes[1].position="top",d.x2axis.min==null&&(d.xaxes[1].min=null),d.x2axis.max==null&&(d.xaxes[1].max=null)),d.y2axis&&(d.yaxes[1]=Y.extend(!0,{},d.yaxis,d.y2axis),d.yaxes[1].position="right",d.y2axis.min==null&&(d.yaxes[1].min=null),d.y2axis.max==null&&(d.yaxes[1].max=null)),d.grid.coloredAreas&&(d.grid.markings=d.grid.coloredAreas),d.grid.coloredAreasColor&&(d.grid.markingsColor=d.grid.coloredAreasColor),d.lines&&Y.extend(!0,d.series.lines,d.lines),d.points&&Y.extend(!0,d.series.points,d.points),d.bars&&Y.extend(!0,d.series.bars,d.bars),d.shadowSize!=null&&(d.series.shadowSize=d.shadowSize),d.highlightColor!=null&&(d.series.highlightColor=d.highlightColor),oe=0;oe<d.xaxes.length;++oe)L(p,oe+1).options=d.xaxes[oe];for(oe=0;oe<d.yaxes.length;++oe)L(m,oe+1).options=d.yaxes[oe];for(var We in D)d.hooks[We]&&d.hooks[We].length&&(D[We]=D[We].concat(d.hooks[We]));P(D.processOptions,[d])}function M(J){u=I(J),U(),R()}function I(J){for(var oe=[],ue=0;ue<J.length;++ue){var be=Y.extend(!0,{},d.series);J[ue].data!=null?(be.data=J[ue].data,delete J[ue].data,Y.extend(!0,be,J[ue]),J[ue].data=be.data):be.data=J[ue],oe.push(be)}return oe}function x(J,oe){var ue=J[oe+"axis"];return typeof ue=="object"&&(ue=ue.n),typeof ue!="number"&&(ue=1),ue}function S(){return Y.grep(p.concat(m),function(J){return J})}function O(J){var oe={},ue,be;for(ue=0;ue<p.length;++ue)be=p[ue],be&&(oe["x"+be.n]=be.c2p(J.left));for(ue=0;ue<m.length;++ue)be=m[ue],be&&(oe["y"+be.n]=be.c2p(J.top));return oe.x1!==void 0&&(oe.x=oe.x1),oe.y1!==void 0&&(oe.y=oe.y1),oe}function C(J){var oe={},ue,be,Le;for(ue=0;ue<p.length;++ue)if(be=p[ue],be&&be.used&&(Le="x"+be.n,J[Le]==null&&be.n==1&&(Le="x"),J[Le]!=null)){oe.left=be.p2c(J[Le]);break}for(ue=0;ue<m.length;++ue)if(be=m[ue],be&&be.used&&(Le="y"+be.n,J[Le]==null&&be.n==1&&(Le="y"),J[Le]!=null)){oe.top=be.p2c(J[Le]);break}return oe}function L(J,oe){return J[oe-1]||(J[oe-1]={n:oe,direction:J==p?"x":"y",options:Y.extend(!0,{},J==p?d.xaxis:d.yaxis)}),J[oe-1]}function U(){var J=u.length,oe=-1,ue;for(ue=0;ue<u.length;++ue){var be=u[ue].color;be!=null&&(J--,typeof be=="number"&&be>oe&&(oe=be))}J<=oe&&(J=oe+1);var Le,_e=[],Ve=d.colors,We=Ve.length,$e=0;for(ue=0;ue<J;ue++)Le=Y.color.parse(Ve[ue%We]||"#666"),ue%We==0&&ue&&($e>=0?$e<.5?$e=-$e-.2:$e=0:$e=-$e),_e[ue]=Le.scale("rgb",1+$e);var it=0,at;for(ue=0;ue<u.length;++ue){if(at=u[ue],at.color==null?(at.color=_e[it].toString(),++it):typeof at.color=="number"&&(at.color=_e[at.color].toString()),at.lines.show==null){var ht,ft=!0;for(ht in at)if(at[ht]&&at[ht].show){ft=!1;break}ft&&(at.lines.show=!0)}at.lines.zero==null&&(at.lines.zero=!!at.lines.fill),at.xaxis=L(p,x(at,"x")),at.yaxis=L(m,x(at,"y"))}}function R(){var J=Number.POSITIVE_INFINITY,oe=Number.NEGATIVE_INFINITY,ue=Number.MAX_VALUE,be,Le,_e,Ve,We,$e,it,at,ht,ft,gt,Dt,It,jt,Vt,_t;function rt(en,mn,Un){mn<en.datamin&&mn!=-ue&&(en.datamin=mn),Un>en.datamax&&Un!=ue&&(en.datamax=Un)}for(Y.each(S(),function(en,mn){mn.datamin=J,mn.datamax=oe,mn.used=!1}),be=0;be<u.length;++be)$e=u[be],$e.datapoints={points:[]},P(D.processRawData,[$e,$e.data,$e.datapoints]);for(be=0;be<u.length;++be){if($e=u[be],Vt=$e.data,_t=$e.datapoints.format,!_t){if(_t=[],_t.push({x:!0,number:!0,required:!0}),_t.push({y:!0,number:!0,required:!0}),$e.stack||$e.bars.show||$e.lines.show&&$e.lines.fill){var St=!!($e.bars.show&&$e.bars.zero||$e.lines.show&&$e.lines.zero);_t.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:St}),$e.bars.horizontal&&(delete _t[_t.length-1].y,_t[_t.length-1].x=!0)}$e.datapoints.format=_t}if($e.datapoints.pointsize==null){$e.datapoints.pointsize=_t.length,at=$e.datapoints.pointsize,it=$e.datapoints.points;var pn=$e.lines.show&&$e.lines.steps;for($e.xaxis.used=$e.yaxis.used=!0,Le=_e=0;Le<Vt.length;++Le,_e+=at){jt=Vt[Le];var ct=jt==null;if(!ct)for(Ve=0;Ve<at;++Ve)Dt=jt[Ve],It=_t[Ve],It&&(It.number&&Dt!=null&&(Dt=+Dt,isNaN(Dt)?Dt=null:Dt==1/0?Dt=ue:Dt==-1/0&&(Dt=-ue)),Dt==null&&(It.required&&(ct=!0),It.defaultValue!=null&&(Dt=It.defaultValue))),it[_e+Ve]=Dt;if(ct)for(Ve=0;Ve<at;++Ve)Dt=it[_e+Ve],Dt!=null&&(It=_t[Ve],It.autoscale!==!1&&(It.x&&rt($e.xaxis,Dt,Dt),It.y&&rt($e.yaxis,Dt,Dt))),it[_e+Ve]=null;if(pn&&_e>0&&(!ct||it[_e-at]!=null)){for(Ve=0;Ve<at;++Ve)it[_e+at+Ve]=it[_e+Ve];it[_e+1]=it[_e-at+1]||0,ct&&(it[_e]=jt[0]),_e+=at}}}}for(be=0;be<u.length;++be){if($e=u[be],it=$e.datapoints.points,at=$e.datapoints.pointsize,$e.transform==="negative-Y")for(Le=0;Le<it.length;Le+=at)it[Le]!=null&&(Dt=it[Le+1],it[Le+1]=-Dt);P(D.processDatapoints,[$e,$e.datapoints])}for(be=0;be<u.length;++be){$e=u[be],it=$e.datapoints.points,at=$e.datapoints.pointsize,_t=$e.datapoints.format;var Ct=J,Yt=J,cn=oe,vn=oe;for(Le=0;Le<it.length;Le+=at)if(it[Le]!=null)for(Ve=0;Ve<at;++Ve)Dt=it[Le+Ve],It=_t[Ve],!(!It||It.autoscale===!1||Dt==ue||Dt==-ue)&&(It.x&&(Dt<Ct&&(Ct=Dt),Dt>cn&&(cn=Dt)),It.y&&(Dt<Yt&&(Yt=Dt),Dt>vn&&(vn=Dt)));if($e.bars.show){var rn;switch($e.bars.align){case"left":rn=0;break;case"right":rn=-$e.bars.barWidth;break;default:rn=-$e.bars.barWidth/2}$e.bars.horizontal?(Yt+=rn,vn+=rn+$e.bars.barWidth):(Ct+=rn,cn+=rn+$e.bars.barWidth)}rt($e.xaxis,Ct,cn),rt($e.yaxis,Yt,vn)}Y.each(S(),function(en,mn){mn.datamin==J&&(mn.datamin=null),mn.datamax==oe&&(mn.datamax=null)})}function B(){o.find(".flot-temp-elem").remove(),o.css("position")=="static"&&o.css("position","relative"),i=new e("flot-base",o),l=new e("flot-overlay",o),c=i.context,h=l.context,f=Y(l.element).unbind();var J=o.data("plot");J&&(J.shutdown(),l.clear()),o.data("plot",b)}function H(){d.grid.hoverable&&(f.mousemove(Te),f.bind("mouseleave",Be),Y(document).bind("touchend",Ne)),d.grid.clickable&&f.click(we),P(D.bindEvents,[f])}function W(){me&&clearTimeout(me),f.unbind("mousemove",Te),f.unbind("mouseleave",Be),f.unbind("click",we),Y(document).unbind("touchend",Ne),P(D.shutdown,[f])}function N(J){function oe(Ve){return Ve}var ue,be,Le=J.options.transform||oe,_e=J.options.inverseTransform;J.direction=="x"?(ue=J.scale=v/Math.abs(Le(J.max)-Le(J.min)),be=Math.min(Le(J.max),Le(J.min))):(ue=J.scale=E/Math.abs(Le(J.max)-Le(J.min)),ue=-ue,be=Math.max(Le(J.max),Le(J.min))),Le==oe?J.p2c=function(Ve){return(Ve-be)*ue}:J.p2c=function(Ve){return(Le(Ve)-be)*ue},_e?J.c2p=function(Ve){return _e(be+Ve/ue)}:J.c2p=function(Ve){return be+Ve/ue}}function V(J){for(var oe=J.options,ue=J.ticks||[],be=oe.labelWidth||0,Le=oe.labelHeight||0,_e=be||(J.direction=="x"?Math.floor(i.width/(ue.length||1)):null),Ve=J.direction+"Axis "+J.direction+J.n+"Axis",We="flot-"+J.direction+"-axis flot-"+J.direction+J.n+"-axis "+Ve,$e=oe.font||"flot-tick-label tickLabel",it=0;it<ue.length;++it){var at=ue[it];if(at.label){var ht=i.getTextInfo(We,at.label,$e,null,_e);be=Math.max(be,ht.width+1),Le=Math.max(Le,ht.height)}}J.labelWidth=oe.labelWidth||be,J.labelHeight=oe.labelHeight||Le}function G(J){var oe=J.labelWidth,ue=J.labelHeight,be=J.options.position,Le=J.direction==="x",_e=J.options.tickLength,Ve=d.grid.axisMargin,We=d.grid.labelMargin,$e=d.grid.eventSectionHeight,it=!0,at=!0,ht=!0,ft=!1;Y.each(Le?p:m,function(gt,Dt){Dt&&(Dt.show||Dt.reserveSpace)&&(Dt===J?ft=!0:Dt.options.position===be&&(ft?at=!1:it=!1),ft||(ht=!1))}),at&&(Ve=0),_e==null&&(_e=ht?"full":5),isNaN(+_e)||(We+=+_e),Le?(ue+=We,ue+=$e,be=="bottom"?(a.bottom+=ue+Ve,J.box={top:i.height-a.bottom,height:ue}):(J.box={top:a.top+Ve,height:ue},a.top+=ue+Ve)):(oe+=We,be=="left"?(J.box={left:a.left+Ve,width:oe},a.left+=oe+Ve):(a.right+=oe+Ve,J.box={left:i.width-a.right,width:oe})),J.position=be,J.tickLength=_e,J.box.padding=We,J.box.eventSectionPadding=$e,J.innermost=it}function _(J){J.direction=="x"?(J.box.left=a.left-J.labelWidth/2,J.box.width=i.width-a.left-a.right+J.labelWidth):(J.box.top=a.top-J.labelHeight/2,J.box.height=i.height-a.bottom-a.top+J.labelHeight)}function K(){var J=d.grid.minBorderMargin,oe,ue;if(J==null)for(J=0,ue=0;ue<u.length;++ue)J=Math.max(J,2*(u[ue].points.radius+u[ue].points.lineWidth/2));var be={left:J,right:J,top:J,bottom:J};Y.each(S(),function(Le,_e){_e.reserveSpace&&_e.ticks&&_e.ticks.length&&(_e.direction==="x"?(be.left=Math.max(be.left,_e.labelWidth/2),be.right=Math.max(be.right,_e.labelWidth/2)):(be.bottom=Math.max(be.bottom,_e.labelHeight/2),be.top=Math.max(be.top,_e.labelHeight/2)))}),a.left=Math.ceil(Math.max(be.left,a.left)),a.right=Math.ceil(Math.max(be.right,a.right)),a.top=Math.ceil(Math.max(be.top,a.top)),a.bottom=Math.ceil(Math.max(be.bottom,a.bottom))}function j(){var J,oe=S(),ue=d.grid.show;for(var be in a){var Le=d.grid.margin||0;a[be]=typeof Le=="number"?Le:Le[be]||0}P(D.processOffset,[a]);for(var be in a)typeof d.grid.borderWidth=="object"?a[be]+=ue?d.grid.borderWidth[be]:0:a[be]+=ue?d.grid.borderWidth:0;if(Y.each(oe,function(We,$e){var it=$e.options;$e.show=it.show==null?$e.used:it.show,$e.reserveSpace=it.reserveSpace==null?$e.show:it.reserveSpace,k($e)}),P(D.processRange,[]),ue){for(var _e=Y.grep(oe,function(We){return We.show||We.reserveSpace}),Ve=!1,J=0;J<2&&(Y.each(_e,function($e,it){ee(it),ae(it),Ve=Z(it,it.ticks)||Ve,V(it)}),Ve&&D.processRange.length>0);J++)P(D.processRange,[]),Ve=!1;for(J=_e.length-1;J>=0;--J)G(_e[J]);K(),Y.each(_e,function(We,$e){_($e)})}v=i.width-a.left-a.right,E=i.height-a.bottom-a.top,Y.each(oe,function(We,$e){N($e)}),ue&&de(),De()}function k(J){var oe=J.options,ue=+(oe.min!=null?oe.min:J.datamin),be=+(oe.max!=null?oe.max:J.datamax),Le=be-ue;if(Le==0){var _e=.25,Ve=Math.abs(be==0?1:be*_e);oe.min==null&&(ue-=Ve),(oe.max==null||oe.min!=null)&&(be+=Ve)}else{var We=oe.autoscaleMargin;We!=null&&(oe.min==null&&(ue-=Le*We,ue<0&&J.datamin!=null&&J.datamin>=0&&(ue=0)),oe.max==null&&(be+=Le*We,be>0&&J.datamax!=null&&J.datamax<=0&&(be=0)))}J.min=ue,J.max=be}function Q(J){if(J=Math.abs(String(J).replace(".","")),J==0)return 0;for(;J!=0&&J%10==0;)J/=10;return Math.floor(Math.log(J)/Math.LN10)+1}function ee(J){var oe=J.options,ue;typeof oe.ticks=="number"&&oe.ticks>0?ue=oe.ticks:ue=.3*Math.sqrt(J.direction=="x"?i.width:i.height);var be=(J.max-J.min)/ue,Le=-Math.floor(Math.log(be)/Math.LN10),_e=oe.tickDecimals;_e!=null&&Le>_e&&(Le=_e);var Ve=Math.pow(10,-Le),We=be/Ve,$e;if(We<1.5?$e=1:We<3?($e=2,We>2.25&&(_e==null||Le+1<=_e)&&($e=2.5,++Le)):We<7.5?$e=5:$e=10,$e*=Ve,oe.minTickSize!=null&&$e<oe.minTickSize&&($e=oe.minTickSize),J.delta=be,J.tickDecimals=Math.max(0,_e??Le),J.tickSize=oe.tickSize||$e,oe.mode=="time"&&!J.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(J.tickGenerator||(J.tickGenerator=function(gt){var Dt=[],It=n(gt.min,gt.tickSize),jt=0,Vt=Number.NaN,_t;do _t=Vt,Vt=It+jt*gt.tickSize,Dt.push(Vt),++jt;while(Vt<gt.max&&Vt!=_t);return Dt},J.tickFormatter=function(gt,Dt){var It=Dt.tickDecimals?Math.pow(10,Dt.tickDecimals):1,jt=""+Math.round(gt*It)/It;if(Dt.tickDecimals!=null){var Vt=jt.indexOf("."),_t=Vt==-1?0:jt.length-Vt-1;if(_t<Dt.tickDecimals)return(_t?jt:jt+".")+(""+It).substr(1,Dt.tickDecimals-_t)}return jt}),Y.isFunction(oe.tickFormatter)&&(J.tickFormatter=function(gt,Dt){return""+oe.tickFormatter(gt,Dt)}),oe.alignTicksWithAxis!=null){var it=(J.direction=="x"?p:m)[oe.alignTicksWithAxis-1];if(it&&it.used&&it!=J){var at=J.tickGenerator(J);if(at.length>0&&(oe.min==null&&(J.min=Math.min(J.min,at[0])),oe.max==null&&at.length>1&&(J.max=Math.max(J.max,at[at.length-1]))),J.tickGenerator=function(gt){var Dt=[],It,jt;for(jt=0;jt<it.ticks.length;++jt)It=(it.ticks[jt].v-it.min)/(it.max-it.min),It=gt.min+It*(gt.max-gt.min),Dt.push(It);return Dt},!J.mode&&oe.tickDecimals==null){var ht=Math.max(0,-Math.floor(Math.log(J.delta)/Math.LN10)+1),ft=J.tickGenerator(J);ft.length>1&&/\..*0$/.test((ft[1]-ft[0]).toFixed(ht))||(J.tickDecimals=ht)}}}}function ae(J){var oe=J.options.ticks,ue=[];oe==null||typeof oe=="number"&&oe>0?ue=J.tickGenerator(J):oe&&(Y.isFunction(oe)?ue=oe(J):ue=oe);var be,Le;for(J.ticks=[],be=0;be<ue.length;++be){var _e=null,Ve=ue[be];typeof Ve=="object"?(Le=+Ve[0],Ve.length>1&&(_e=Ve[1])):Le=+Ve,_e==null&&(_e=J.tickFormatter(Le,J)),isNaN(Le)||J.ticks.push({v:Le,label:_e})}}function Z(J,oe){var ue=!1;return J.options.autoscaleMargin&&oe.length>0&&(J.options.min==null&&(J.min=Math.min(J.min,oe[0].v),ue=!0),J.options.max==null&&oe.length>1&&(J.max=Math.max(J.max,oe[oe.length-1].v),ue=!0)),ue}function ne(){i.clear(),P(D.drawBackground,[c]);var J=d.grid;J.show&&J.backgroundColor&&te(),J.show&&!J.aboveData&&re();for(var oe=0;oe<u.length;++oe)P(D.drawSeries,[c,u[oe]]),ge(u[oe]);P(D.draw,[c]),J.show&&J.aboveData&&re(),i.render(),Qe()}function q(J,oe){for(var ue,be,Le,_e,Ve=S(),We=0;We<Ve.length;++We)if(ue=Ve[We],ue.direction==oe&&(_e=oe+ue.n+"axis",!J[_e]&&ue.n==1&&(_e=oe+"axis"),J[_e])){be=J[_e].from,Le=J[_e].to;break}if(J[_e]||(ue=oe=="x"?p[0]:m[0],be=J[oe+"1"],Le=J[oe+"2"]),be!=null&&Le!=null&&be>Le){var $e=be;be=Le,Le=$e}return{from:be,to:Le,axis:ue}}function te(){c.save(),c.translate(a.left,a.top),c.fillStyle=Ee(d.grid.backgroundColor,E,0,"rgba(255, 255, 255, 0)"),c.fillRect(0,0,v,E),c.restore()}function re(){var J,oe,ue,be;c.save(),c.translate(a.left,a.top);var Le=d.grid.markings;if(Le)for(Y.isFunction(Le)&&(oe=b.getAxes(),oe.xmin=oe.xaxis.min,oe.xmax=oe.xaxis.max,oe.ymin=oe.yaxis.min,oe.ymax=oe.yaxis.max,Le=Le(oe)),J=0;J<Le.length;++J){var _e=Le[J],Ve=q(_e,"x"),We=q(_e,"y");if(Ve.from==null&&(Ve.from=Ve.axis.min),Ve.to==null&&(Ve.to=Ve.axis.max),We.from==null&&(We.from=We.axis.min),We.to==null&&(We.to=We.axis.max),!(Ve.to<Ve.axis.min||Ve.from>Ve.axis.max||We.to<We.axis.min||We.from>We.axis.max)){Ve.from=Math.max(Ve.from,Ve.axis.min),Ve.to=Math.min(Ve.to,Ve.axis.max),We.from=Math.max(We.from,We.axis.min),We.to=Math.min(We.to,We.axis.max);var $e=Ve.from===Ve.to,it=We.from===We.to;if(!($e&&it))if(Ve.from=Math.floor(Ve.axis.p2c(Ve.from)),Ve.to=Math.floor(Ve.axis.p2c(Ve.to)),We.from=Math.floor(We.axis.p2c(We.from)),We.to=Math.floor(We.axis.p2c(We.to)),$e||it){var at=_e.lineWidth||d.grid.markingsLineWidth,ht=at%2?.5:0;c.beginPath(),c.strokeStyle=_e.color||d.grid.markingsColor,c.lineWidth=at,$e?(c.moveTo(Ve.to+ht,We.from),c.lineTo(Ve.to+ht,We.to)):(c.moveTo(Ve.from,We.to+ht),c.lineTo(Ve.to,We.to+ht)),c.stroke()}else c.fillStyle=_e.color||d.grid.markingsColor,c.fillRect(Ve.from,We.to,Ve.to-Ve.from,We.from-We.to)}}oe=S(),ue=d.grid.borderWidth;for(var ft=0;ft<oe.length;++ft){var gt=oe[ft],Dt=gt.box,It=gt.tickLength,jt,Vt,_t,rt;if(!(!gt.show||gt.ticks.length==0)){for(c.lineWidth=1,gt.direction=="x"?(jt=0,It=="full"?Vt=gt.position=="top"?0:E:Vt=Dt.top-a.top+(gt.position=="top"?Dt.height:0)):(Vt=0,It=="full"?jt=gt.position=="left"?0:v:jt=Dt.left-a.left+(gt.position=="left"?Dt.width:0)),gt.innermost||(c.strokeStyle=gt.options.color,c.beginPath(),_t=rt=0,gt.direction=="x"?_t=v+1:rt=E+1,c.lineWidth==1&&(gt.direction=="x"?Vt=Math.floor(Vt)+.5:jt=Math.floor(jt)+.5),c.moveTo(jt,Vt),c.lineTo(jt+_t,Vt+rt),c.stroke()),c.strokeStyle=gt.options.tickColor,c.beginPath(),J=0;J<gt.ticks.length;++J){var St=gt.ticks[J].v;_t=rt=0,!(isNaN(St)||St<gt.min||St>gt.max||It=="full"&&(typeof ue=="object"&&ue[gt.position]>0||ue>0)&&(St==gt.min||St==gt.max))&&(gt.direction=="x"?(jt=gt.p2c(St),rt=It=="full"?-E:It,gt.position=="top"&&(rt=-rt)):(Vt=gt.p2c(St),_t=It=="full"?-v:It,gt.position=="left"&&(_t=-_t)),c.lineWidth==1&&(gt.direction=="x"?jt=Math.floor(jt)+.5:Vt=Math.floor(Vt)+.5),c.moveTo(jt,Vt),c.lineTo(jt+_t,Vt+rt))}c.stroke()}}ue&&(be=d.grid.borderColor,typeof ue=="object"||typeof be=="object"?(typeof ue!="object"&&(ue={top:ue,right:ue,bottom:ue,left:ue}),typeof be!="object"&&(be={top:be,right:be,bottom:be,left:be}),ue.top>0&&(c.strokeStyle=be.top,c.lineWidth=ue.top,c.beginPath(),c.moveTo(0-ue.left,0-ue.top/2),c.lineTo(v,0-ue.top/2),c.stroke()),ue.right>0&&(c.strokeStyle=be.right,c.lineWidth=ue.right,c.beginPath(),c.moveTo(v+ue.right/2,0-ue.top),c.lineTo(v+ue.right/2,E),c.stroke()),ue.bottom>0&&(c.strokeStyle=be.bottom,c.lineWidth=ue.bottom,c.beginPath(),c.moveTo(v+ue.right,E+ue.bottom/2),c.lineTo(0,E+ue.bottom/2),c.stroke()),ue.left>0&&(c.strokeStyle=be.left,c.lineWidth=ue.left,c.beginPath(),c.moveTo(0-ue.left/2,E+ue.bottom),c.lineTo(0-ue.left/2,0),c.stroke())):(c.lineWidth=ue,c.strokeStyle=d.grid.borderColor,c.strokeRect(-ue/2,-ue/2,v+ue,E+ue))),c.restore()}function de(){Y.each(S(),function(J,oe){var ue=oe.box,be=oe.direction+"Axis "+oe.direction+oe.n+"Axis",Le="flot-"+oe.direction+"-axis flot-"+oe.direction+oe.n+"-axis "+be,_e=oe.options.font||"flot-tick-label tickLabel",Ve,We,$e,it,at;if(i.removeText(Le),!(!oe.show||oe.ticks.length==0))for(var ht=0;ht<oe.ticks.length;++ht)Ve=oe.ticks[ht],!(!Ve.label||Ve.v<oe.min||Ve.v>oe.max)&&(oe.direction=="x"?(it="center",We=a.left+oe.p2c(Ve.v),oe.position=="bottom"?$e=ue.top+ue.padding+ue.eventSectionPadding:($e=ue.top+ue.height-ue.padding,at="bottom")):(at="middle",$e=a.top+oe.p2c(Ve.v),oe.position=="left"?(We=ue.left+ue.width-ue.padding,it="right"):We=ue.left+ue.padding),i.addText(Le,We,$e,Ve.label,_e,null,null,it,at))})}function ie(J){for(var oe=[],ue=null,be=null,Le=J.datapoints,_e=[],Ve=0;Ve<Le.pointsize-2;Ve++)_e.push(0);for(var We=0;We<Le.points.length;We+=Le.pointsize){var $e=Le.points[We],it=Le.points[We+1];We===Le.points.length-Le.pointsize?be=null:be=Le.points[We+Le.pointsize],$e!==null&&it!==null&&ue===null&&be===null&&(oe.push($e),oe.push(it),oe.push.apply(oe,_e)),ue=$e}var at=Le.points;Le.points=oe,J.points.radius=J.lines.lineWidth/2,ye(J),Le.points=at}function ge(J){J.lines.show&&(ve(J),!J.points.show&&!J.bars.show&&ie(J)),J.bars.show&&le(J),J.points.show&&ye(J)}function ve(J){function oe(We,$e,it,at,ht){var ft=We.points,gt=We.pointsize,Dt=null,It=null;c.beginPath();for(var jt=gt;jt<ft.length;jt+=gt){var Vt=ft[jt-gt],_t=ft[jt-gt+1],rt=ft[jt],St=ft[jt+1];if(!(Vt==null||rt==null)){if(_t<=St&&_t<ht.min){if(St<ht.min)continue;Vt=(ht.min-_t)/(St-_t)*(rt-Vt)+Vt,_t=ht.min}else if(St<=_t&&St<ht.min){if(_t<ht.min)continue;rt=(ht.min-_t)/(St-_t)*(rt-Vt)+Vt,St=ht.min}if(_t>=St&&_t>ht.max){if(St>ht.max)continue;Vt=(ht.max-_t)/(St-_t)*(rt-Vt)+Vt,_t=ht.max}else if(St>=_t&&St>ht.max){if(_t>ht.max)continue;rt=(ht.max-_t)/(St-_t)*(rt-Vt)+Vt,St=ht.max}if(Vt<=rt&&Vt<at.min){if(rt<at.min)continue;_t=(at.min-Vt)/(rt-Vt)*(St-_t)+_t,Vt=at.min}else if(rt<=Vt&&rt<at.min){if(Vt<at.min)continue;St=(at.min-Vt)/(rt-Vt)*(St-_t)+_t,rt=at.min}if(Vt>=rt&&Vt>at.max){if(rt>at.max)continue;_t=(at.max-Vt)/(rt-Vt)*(St-_t)+_t,Vt=at.max}else if(rt>=Vt&&rt>at.max){if(Vt>at.max)continue;St=(at.max-Vt)/(rt-Vt)*(St-_t)+_t,rt=at.max}(Vt!=Dt||_t!=It)&&c.moveTo(at.p2c(Vt)+$e,ht.p2c(_t)+it),Dt=rt,It=St,c.lineTo(at.p2c(rt)+$e,ht.p2c(St)+it)}}c.stroke()}function ue(We,$e,it){for(var at=We.points,ht=We.pointsize,ft=Math.min(Math.max(0,it.min),it.max),gt=0,Dt,It=!1,jt=1,Vt=0,_t=0;!(ht>0&&gt>at.length+ht);){gt+=ht;var rt=at[gt-ht],St=at[gt-ht+jt],pn=at[gt],ct=at[gt+jt];if(It){if(ht>0&&rt!=null&&pn==null){_t=gt,ht=-ht,jt=2;continue}if(ht<0&&gt==Vt+ht){c.fill(),It=!1,ht=-ht,jt=1,gt=Vt=_t+ht;continue}}if(!(rt==null||pn==null)){if(rt<=pn&&rt<$e.min){if(pn<$e.min)continue;St=($e.min-rt)/(pn-rt)*(ct-St)+St,rt=$e.min}else if(pn<=rt&&pn<$e.min){if(rt<$e.min)continue;ct=($e.min-rt)/(pn-rt)*(ct-St)+St,pn=$e.min}if(rt>=pn&&rt>$e.max){if(pn>$e.max)continue;St=($e.max-rt)/(pn-rt)*(ct-St)+St,rt=$e.max}else if(pn>=rt&&pn>$e.max){if(rt>$e.max)continue;ct=($e.max-rt)/(pn-rt)*(ct-St)+St,pn=$e.max}if(It||(c.beginPath(),c.moveTo($e.p2c(rt),it.p2c(ft)),It=!0),St>=it.max&&ct>=it.max){c.lineTo($e.p2c(rt),it.p2c(it.max)),c.lineTo($e.p2c(pn),it.p2c(it.max));continue}else if(St<=it.min&&ct<=it.min){c.lineTo($e.p2c(rt),it.p2c(it.min)),c.lineTo($e.p2c(pn),it.p2c(it.min));continue}var Ct=rt,Yt=pn;St<=ct&&St<it.min&&ct>=it.min?(rt=(it.min-St)/(ct-St)*(pn-rt)+rt,St=it.min):ct<=St&&ct<it.min&&St>=it.min&&(pn=(it.min-St)/(ct-St)*(pn-rt)+rt,ct=it.min),St>=ct&&St>it.max&&ct<=it.max?(rt=(it.max-St)/(ct-St)*(pn-rt)+rt,St=it.max):ct>=St&&ct>it.max&&St<=it.max&&(pn=(it.max-St)/(ct-St)*(pn-rt)+rt,ct=it.max),rt!=Ct&&c.lineTo($e.p2c(Ct),it.p2c(St)),c.lineTo($e.p2c(rt),it.p2c(St)),c.lineTo($e.p2c(pn),it.p2c(ct)),pn!=Yt&&(c.lineTo($e.p2c(pn),it.p2c(ct)),c.lineTo($e.p2c(Yt),it.p2c(ct)))}}}c.save(),c.translate(a.left,a.top),c.lineJoin="round";var be=J.lines.lineWidth,Le=J.shadowSize;if(be>0&&Le>0){c.lineWidth=Le,c.strokeStyle="rgba(0,0,0,0.1)";var _e=Math.PI/18;oe(J.datapoints,Math.sin(_e)*(be/2+Le/2),Math.cos(_e)*(be/2+Le/2),J.xaxis,J.yaxis),c.lineWidth=Le/2,oe(J.datapoints,Math.sin(_e)*(be/2+Le/4),Math.cos(_e)*(be/2+Le/4),J.xaxis,J.yaxis)}c.lineWidth=be,c.strokeStyle=J.color;var Ve=Me(J.lines,J.color,0,E);Ve&&(c.fillStyle=Ve,ue(J.datapoints,J.xaxis,J.yaxis)),be>0&&oe(J.datapoints,0,0,J.xaxis,J.yaxis),c.restore()}function ye(J){function oe(We,$e,it,at,ht,ft,gt,Dt){for(var It=We.points,jt=We.pointsize,Vt=0;Vt<It.length;Vt+=jt){var _t=It[Vt],rt=It[Vt+1];_t==null||_t<ft.min||_t>ft.max||rt<gt.min||rt>gt.max||(c.beginPath(),_t=ft.p2c(_t),rt=gt.p2c(rt)+at,Dt=="circle"?c.arc(_t,rt,$e,0,ht?Math.PI:Math.PI*2,!1):Dt(c,_t,rt,$e,ht),c.closePath(),it&&(c.fillStyle=it,c.fill()),c.stroke())}}c.save(),c.translate(a.left,a.top);var ue=J.points.lineWidth,be=J.shadowSize,Le=J.points.radius,_e=J.points.symbol;if(ue==0&&(ue=1e-4),ue>0&&be>0){var Ve=be/2;c.lineWidth=Ve,c.strokeStyle="rgba(0,0,0,0.1)",oe(J.datapoints,Le,null,Ve+Ve/2,!0,J.xaxis,J.yaxis,_e),c.strokeStyle="rgba(0,0,0,0.2)",oe(J.datapoints,Le,null,Ve/2,!0,J.xaxis,J.yaxis,_e)}c.lineWidth=ue,c.strokeStyle=J.color,oe(J.datapoints,Le,Me(J.points,J.color),0,!1,J.xaxis,J.yaxis,_e),c.restore()}function pe(J,oe,ue,be,Le,_e,Ve,We,$e,it,at){var ht,ft,gt,Dt,It,jt,Vt,_t,rt;it?(_t=jt=Vt=!0,It=!1,ht=ue,ft=J,Dt=oe+be,gt=oe+Le,ft<ht&&(rt=ft,ft=ht,ht=rt,It=!0,jt=!1)):(It=jt=Vt=!0,_t=!1,ht=J+be,ft=J+Le,gt=ue,Dt=oe,Dt<gt&&(rt=Dt,Dt=gt,gt=rt,_t=!0,Vt=!1)),!(ft<Ve.min||ht>Ve.max||Dt<We.min||gt>We.max)&&(ht<Ve.min&&(ht=Ve.min,It=!1),ft>Ve.max&&(ft=Ve.max,jt=!1),gt<We.min&&(gt=We.min,_t=!1),Dt>We.max&&(Dt=We.max,Vt=!1),ht=Ve.p2c(ht),gt=We.p2c(gt),ft=Ve.p2c(ft),Dt=We.p2c(Dt),_e&&($e.fillStyle=_e(gt,Dt),$e.fillRect(ht,Dt,ft-ht,gt-Dt)),at>0&&(It||jt||Vt||_t)&&($e.beginPath(),$e.moveTo(ht,gt),It?$e.lineTo(ht,Dt):$e.moveTo(ht,Dt),Vt?$e.lineTo(ft,Dt):$e.moveTo(ft,Dt),jt?$e.lineTo(ft,gt):$e.moveTo(ft,gt),_t?$e.lineTo(ht,gt):$e.moveTo(ht,gt),$e.stroke()))}function le(J){function oe(Le,_e,Ve,We,$e,it){for(var at=Le.points,ht=Le.pointsize,ft=0;ft<at.length;ft+=ht)at[ft]!=null&&pe(at[ft],at[ft+1],at[ft+2],_e,Ve,We,$e,it,c,J.bars.horizontal,J.bars.lineWidth)}c.save(),c.translate(a.left,a.top),c.lineWidth=J.bars.lineWidth,c.strokeStyle=J.color;var ue;switch(J.bars.align){case"left":ue=0;break;case"right":ue=-J.bars.barWidth;break;default:ue=-J.bars.barWidth/2}var be=J.bars.fill?function(Le,_e){return Me(J.bars,J.color,Le,_e)}:null;oe(J.datapoints,ue,ue+J.bars.barWidth,be,J.xaxis,J.yaxis),c.restore()}function Me(J,oe,ue,be){var Le=J.fill;if(!Le)return null;if(J.fillColor)return Ee(J.fillColor,ue,be,oe);var _e=Y.color.parse(oe);return _e.a=typeof Le=="number"?Le:.4,_e.normalize(),_e.toString()}function De(){if(d.legend.container!=null?Y.find(d.legend.container).html(""):o.find(".legend").remove(),!!d.legend.show){for(var J=[],oe=[],ue=!1,be=d.legend.labelFormatter,Le,_e,Ve=0;Ve<u.length;++Ve)Le=u[Ve],Le.label&&(_e=be?be(Le.label,Le):Le.label,_e&&oe.push({label:_e,color:Le.color}));if(d.legend.sorted)if(Y.isFunction(d.legend.sorted))oe.sort(d.legend.sorted);else if(d.legend.sorted=="reverse")oe.reverse();else{var We=d.legend.sorted!="descending";oe.sort(function(jt,Vt){return jt.label==Vt.label?0:jt.label<Vt.label!=We?1:-1})}for(var Ve=0;Ve<oe.length;++Ve){var $e=oe[Ve];Ve%d.legend.noColumns==0&&(ue&&J.push("</tr>"),J.push("<tr>"),ue=!0),J.push('<td class="legendColorBox"><div style="border:1px solid '+d.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+$e.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+$e.label+"</td>")}if(ue&&J.push("</tr>"),J.length!=0){var it='<table style="font-size:smaller;color:'+d.grid.color+'">'+J.join("")+"</table>";if(d.legend.container!=null)Y(d.legend.container).html(it);else{var at="",ht=d.legend.position,ft=d.legend.margin;ft[0]==null&&(ft=[ft,ft]),ht.charAt(0)=="n"?at+="top:"+(ft[1]+a.top)+"px;":ht.charAt(0)=="s"&&(at+="bottom:"+(ft[1]+a.bottom)+"px;"),ht.charAt(1)=="e"?at+="right:"+(ft[0]+a.right)+"px;":ht.charAt(1)=="w"&&(at+="left:"+(ft[0]+a.left)+"px;");var gt=Y('<div class="legend">'+it.replace('style="','style="position:absolute;'+at+";")+"</div>").appendTo(o);if(d.legend.backgroundOpacity!=0){var Dt=d.legend.backgroundColor;Dt==null&&(Dt=d.grid.backgroundColor,Dt&&typeof Dt=="string"?Dt=Y.color.parse(Dt):Dt=Y.color.extract(gt,"background-color"),Dt.a=1,Dt=Dt.toString());var It=gt.children();Y('<div style="position:absolute;width:'+It.width()+"px;height:"+It.height()+"px;"+at+"background-color:"+Dt+';"> </div>').prependTo(gt).css("opacity",d.legend.backgroundOpacity)}}}}}var Re=[],me=null;function he(J,oe,ue){var be=d.grid.mouseActiveRadius,Le=be*be+1,_e=null,Ve=!1,We,$e,it;for(We=u.length-1;We>=0;--We)if(ue(u[We])){var at=u[We],ht=at.xaxis,ft=at.yaxis,gt=at.datapoints.points,Dt=ht.c2p(J),It=ft.c2p(oe),jt=be/ht.scale,Vt=be/ft.scale;if(it=at.datapoints.pointsize,ht.options.inverseTransform&&(jt=Number.MAX_VALUE),ft.options.inverseTransform&&(Vt=Number.MAX_VALUE),at.lines.show||at.points.show)for($e=0;$e<gt.length;$e+=it){var _t=gt[$e],rt=gt[$e+1];if(_t!=null&&!(_t-Dt>jt||_t-Dt<-jt||rt-It>Vt||rt-It<-Vt)){var St=Math.abs(ht.p2c(_t)-J),pn=Math.abs(ft.p2c(rt)-oe),ct=St*St+pn*pn;ct<Le&&(Le=ct,_e=[We,$e/it])}}if(at.bars.show&&!_e){var Ct,Yt;switch(at.bars.align){case"left":Ct=0;break;case"right":Ct=-at.bars.barWidth;break;default:Ct=-at.bars.barWidth/2}for(Yt=Ct+at.bars.barWidth,$e=0;$e<gt.length;$e+=it){var _t=gt[$e],rt=gt[$e+1],cn=gt[$e+2];_t!=null&&(u[We].bars.horizontal?Dt<=Math.max(cn,_t)&&Dt>=Math.min(cn,_t)&&It>=rt+Ct&&It<=rt+Yt:Dt>=_t+Ct&&Dt<=_t+Yt&&It>=Math.min(cn,rt)&&It<=Math.max(cn,rt))&&(_e=[We,$e/it])}}}return _e?(We=_e[0],$e=_e[1],it=u[We].datapoints.pointsize,{datapoint:u[We].datapoints.points.slice($e*it,($e+1)*it),dataIndex:$e,series:u[We],seriesIndex:We}):null}function Te(J){d.grid.hoverable&&st("plothover",J,function(oe){return oe.hoverable!=!1})}function Be(J){d.grid.hoverable&&st("plothover",J,function(oe){return!1})}function we(J){b.isSelecting||st("plotclick",J,function(oe){return oe.clickable!=!1})}function Ne(J){if(J.cancelable){if(!f.is(J.target)&&f.has(J.target).length===0){st("plotleave",J,function(oe){});return}Te(Ze(J)),J.preventDefault()}}function Ze(J){if(!J||!J.originalEvent||J.pageX&&J.pageY)return J;var oe=J.originalEvent;if(oe.changedTouches.length===0)return J;var ue=oe.changedTouches[0];return J.pageX=ue.pageX,J.pageY=ue.pageY,J}function st(J,oe,ue){var be=f.offset(),Le=oe.pageX-be.left-a.left,_e=oe.pageY-be.top-a.top,Ve=O({left:Le,top:_e});Ve.pageX=oe.pageX,Ve.pageY=oe.pageY,Ve.ctrlKey=oe.ctrlKey,Ve.metaKey=oe.metaKey;var We=he(Le,_e,ue);if(We&&(We.pageX=parseInt(We.series.xaxis.p2c(We.datapoint[0])+be.left+a.left,10),We.pageY=parseInt(We.series.yaxis.p2c(We.datapoint[1])+be.top+a.top,10)),d.grid.autoHighlight){for(var $e=0;$e<Re.length;++$e){var it=Re[$e];it.auto==J&&!(We&&it.series==We.series&&it.point[0]==We.datapoint[0]&&it.point[1]==We.datapoint[1])&&He(it.series,it.point)}We&&je(We.series,We.datapoint,J)}o.trigger(J,[Ve,We])}function Qe(){var J=d.interaction.redrawOverlayInterval;if(J==-1){ke();return}me||(me=setTimeout(ke,J))}function ke(){me=null,h.save(),l.clear(),h.translate(a.left,a.top);var J,oe;for(J=0;J<Re.length;++J)oe=Re[J],oe.series.bars.show?Ke(oe.series,oe.point):Oe(oe.series,oe.point);h.restore(),P(D.drawOverlay,[h])}function je(J,oe,ue){if(typeof J=="number"&&(J=u[J]),typeof oe=="number"){var be=J.datapoints.pointsize;oe=J.datapoints.points.slice(be*oe,be*(oe+1))}var Le=Ge(J,oe);Le==-1?(Re.push({series:J,point:oe,auto:ue}),Qe()):ue||(Re[Le].auto=!1)}function He(J,oe){if(J==null&&oe==null){Re=[],Qe();return}if(typeof J=="number"&&(J=u[J]),typeof oe=="number"){var ue=J.datapoints.pointsize;oe=J.datapoints.points.slice(ue*oe,ue*(oe+1))}var be=Ge(J,oe);be!=-1&&(Re.splice(be,1),Qe())}function Ge(J,oe){for(var ue=0;ue<Re.length;++ue){var be=Re[ue];if(be.series==J&&be.point[0]==oe[0]&&be.point[1]==oe[1])return ue}return-1}function Oe(J,oe){var ue=oe[0],be=oe[1],Le=J.xaxis,_e=J.yaxis,Ve=typeof J.highlightColor=="string"?J.highlightColor:Y.color.parse(J.color).scale("a",.5).toString();if(!(ue<Le.min||ue>Le.max||be<_e.min||be>_e.max)){var We=J.points.radius+J.points.lineWidth/2;h.lineWidth=We,h.strokeStyle=Ve;var $e=1.5*We;ue=Le.p2c(ue),be=_e.p2c(be),h.beginPath(),J.points.symbol=="circle"?h.arc(ue,be,$e,0,2*Math.PI,!1):J.points.symbol(h,ue,be,$e,!1),h.closePath(),h.stroke()}}function Ke(J,oe){var ue=typeof J.highlightColor=="string"?J.highlightColor:Y.color.parse(J.color).scale("a",.5).toString(),be=ue,Le;switch(J.bars.align){case"left":Le=0;break;case"right":Le=-J.bars.barWidth;break;default:Le=-J.bars.barWidth/2}h.lineWidth=J.bars.lineWidth,h.strokeStyle=ue,pe(oe[0],oe[1],oe[2]||0,Le,Le+J.bars.barWidth,function(){return be},J.xaxis,J.yaxis,h,J.bars.horizontal,J.bars.lineWidth)}function Ee(J,oe,ue,be){if(typeof J=="string")return J;for(var Le=c.createLinearGradient(0,ue,0,oe),_e=0,Ve=J.colors.length;_e<Ve;++_e){var We=J.colors[_e];if(typeof We!="string"){var $e=Y.color.parse(be);We.brightness!=null&&($e=$e.scale("rgb",We.brightness)),We.opacity!=null&&($e.a*=We.opacity),We=$e.toString()}Le.addColorStop(_e/(Ve-1),We)}return Le}}Y.plot=function(o,s,r){var g=new t(Y(o),s,r,Y.plot.plugins);return g},Y.plot.version="0.8.3",Y.plot.plugins=[],Y.fn.plot=function(o,s){return this.each(function(){Y.plot(this,o,s)})};function n(o,s){return s*Math.floor(o/s)}}(jQuery)},80851:()=>{(function(Y){function A(e){var t={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},n={},o=null;function s(a){t.active&&(f(a),e.getPlaceholder().trigger("plotselecting",[u()]))}function r(a){a.which==1&&(document.body.focus(),document.onselectstart!==void 0&&n.onselectstart==null&&(n.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),document.ondrag!==void 0&&n.ondrag==null&&(n.ondrag=document.ondrag,document.ondrag=function(){return!1}),l(t.first,a),t.active=!0,o=function(v){g(v)},Y(document).one("mouseup",o))}function g(a){return o=null,document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag),t.active=!1,f(a),m()?d(a):(e.getPlaceholder().trigger("plotunselected",[]),e.getPlaceholder().trigger("plotselecting",[null])),setTimeout(function(){e.isSelecting=!1},10),!1}function u(){if(!m()||!t.show)return null;var a={},v=t.first,E=t.second,D=e.getAxes(),b=!0;return Y.each(D,function(P,y){y.used&&(anyUsed=!1)}),Y.each(D,function(P,y){if(y.used||b){var T=y.c2p(v[y.direction]),M=y.c2p(E[y.direction]);a[P]={from:Math.min(T,M),to:Math.max(T,M)}}}),a}function d(a){var v=u();v.ctrlKey=a.ctrlKey,v.metaKey=a.metaKey,e.getPlaceholder().trigger("plotselected",[v]),v.xaxis&&v.yaxis&&e.getPlaceholder().trigger("selected",[{x1:v.xaxis.from,y1:v.yaxis.from,x2:v.xaxis.to,y2:v.yaxis.to}])}function i(a,v,E){return v<a?a:v>E?E:v}function l(a,v){var E=e.getOptions(),D=e.getPlaceholder().offset(),b=e.getPlotOffset();a.x=i(0,v.pageX-D.left-b.left,e.width()),a.y=i(0,v.pageY-D.top-b.top,e.height()),E.selection.mode=="y"&&(a.x=a==t.first?0:e.width()),E.selection.mode=="x"&&(a.y=a==t.first?0:e.height())}function f(a){a.pageX!=null&&(l(t.second,a),m()?(e.isSelecting=!0,t.show=!0,e.triggerRedrawOverlay()):c(!0))}function c(a){t.show&&(t.show=!1,e.triggerRedrawOverlay(),a||e.getPlaceholder().trigger("plotunselected",[]))}function h(a,v){var E,D,b,P,y=e.getAxes();for(var T in y)if(E=y[T],E.direction==v&&(P=v+E.n+"axis",!a[P]&&E.n==1&&(P=v+"axis"),a[P])){D=a[P].from,b=a[P].to;break}if(a[P]||(E=v=="x"?e.getXAxes()[0]:e.getYAxes()[0],D=a[v+"1"],b=a[v+"2"]),D!=null&&b!=null&&D>b){var M=D;D=b,b=M}return{from:D,to:b,axis:E}}function p(a,v){var E,D,b=e.getOptions();b.selection.mode=="y"?(t.first.x=0,t.second.x=e.width()):(D=h(a,"x"),t.first.x=D.axis.p2c(D.from),t.second.x=D.axis.p2c(D.to)),b.selection.mode=="x"?(t.first.y=0,t.second.y=e.height()):(D=h(a,"y"),t.first.y=D.axis.p2c(D.from),t.second.y=D.axis.p2c(D.to)),t.show=!0,e.triggerRedrawOverlay(),!v&&m()&&d()}function m(){var a=e.getOptions().selection.minSize;return Math.abs(t.second.x-t.first.x)>=a&&Math.abs(t.second.y-t.first.y)>=a}e.clearSelection=c,e.setSelection=p,e.getSelection=u,e.hooks.bindEvents.push(function(a,v){var E=a.getOptions();E.selection.mode!=null&&(v.mousemove(s),v.mousedown(r))}),e.hooks.drawOverlay.push(function(a,v){if(t.show&&m()){var E=a.getPlotOffset(),D=a.getOptions();v.save(),v.translate(E.left,E.top);var b=Y.color.parse(D.selection.color);v.strokeStyle=b.scale("a",.8).toString(),v.lineWidth=1,v.lineJoin=D.selection.shape,v.fillStyle=b.scale("a",.4).toString();var P=Math.min(t.first.x,t.second.x)+.5,y=Math.min(t.first.y,t.second.y)+.5,T=Math.abs(t.second.x-t.first.x)-1,M=Math.abs(t.second.y-t.first.y)-1;v.fillRect(P,y,T,M),v.strokeRect(P,y,T,M),v.restore()}}),e.hooks.shutdown.push(function(a,v){v.unbind("mousemove",s),v.unbind("mousedown",r),o&&(Y(document).unbind("mouseup",o),document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag))})}Y.plot.plugins.push({init:A,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery)},31221:()=>{(function(Y){var A={series:{stack:null}};function e(t){function n(s,r){for(var g=null,u=0;u<r.length&&s!=r[u];++u)r[u].stack==s.stack&&(g=r[u]);return g}function o(s,r,g){if(!(r.stack==null||r.stack===!1)){var u=n(r,s.getData());if(u){for(var d=g.pointsize,i=g.points,l=u.datapoints.pointsize,f=u.datapoints.points,c=[],h,p,m,a,v,E,D=r.lines.show,b=r.bars.horizontal,P=d>2&&(b?g.format[2].x:g.format[2].y),y=D&&r.lines.steps,T=b?1:0,M=b?0:1,I=0,x=0,S,O;!(I>=i.length&&x>=f.length);){if(S=c.length,I<i.length&&i[I]==null){for(O=0;O<d;++O)c.push(i[I+O]);I+=d}else if(I>=i.length){for(O=0;O<d;++O)c.push(f[x+O]);P&&(c[S+2]=f[x+M]),x+=l}else if(x>=f.length){for(O=0;O<d;++O)c.push(i[I+O]);I+=d}else if(x<f.length&&f[x]==null)x+=l;else{if(h=i[I+T],p=i[I+M],a=f[x+T],v=f[x+M],E=0,h==a){for(O=0;O<d;++O)c.push(i[I+O]);c[S+M]+=v,E=v,I+=d,x+=l}else if(h>a){if(I==0){for(O=0;O<d;++O)c.push(f[x+O]);E=v}if(I>0&&i[I-d]!=null){for(m=0,c.push(a),c.push(m+v),O=2;O<d;++O)c.push(i[I+O]);E=v}x+=l}else{for(O=0;O<d;++O)c.push(i[I+O]);x>0&&f[x-l]!=null&&(E=0),c[S+M]+=E,I+=d}fromgap=!1,S!=c.length&&P&&(c[S+2]=E)}if(y&&S!=c.length&&S>0&&c[S]!=null&&c[S]!=c[S-d]&&c[S+1]!=c[S-d+1]){for(O=0;O<d;++O)c[S+d+O]=c[S+O];c[S+1]=c[S-d+1]}}g.points=c}}}t.hooks.processDatapoints.push(o)}Y.plot.plugins.push({init:e,options:A,name:"stack",version:"1.2"})})(jQuery)},91520:()=>{(function(Y){var A={series:{stackpercent:null}};function e(t){var n={},o=!1,s={};function r(d,i,l,f){if(o||(o=!0,s=g(d.getData())),i.stackpercent==!0){var c=l.length;i.percents=[];var h=0,p=1;i.bars&&i.bars.horizontal&&i.bars.horizontal===!0&&(h=1,p=0);for(var m=0;m<c;m++){var a=s[l[m][h]+""];a>0?i.percents.push(l[m][p]*100/a):i.percents.push(0)}}}function g(d){var i=d.length,l={};if(i>0){for(var f=0;f<i;f++)if(d[f].stackpercent){var c=0,h=1;d[f].bars&&d[f].bars.horizontal&&d[f].bars.horizontal===!0&&(c=1,h=0);for(var p=d[f].data.length,m=0;m<p;m++){var a=0;d[f].data[m][1]!=null&&(a=d[f].data[m][h]),l[d[f].data[m][c]+""]?l[d[f].data[m][c]+""]+=a:l[d[f].data[m][c]+""]=a}}}return l}function u(d,i,l){if(i.stackpercent){o||(s=g(d.getData()));var f=[],c=0,h=1;i.bars&&i.bars.horizontal&&i.bars.horizontal===!0&&(c=1,h=0);for(var p=0;p<l.points.length;p+=3)n[l.points[p+c]]||(n[l.points[p+c]]=0),f[p+c]=l.points[p+c],f[p+h]=l.points[p+h]+n[l.points[p+c]],f[p+2]=n[l.points[p+c]],n[l.points[p+c]]+=l.points[p+h],s[f[p+c]+""]>0?(f[p+h]=f[p+h]*100/s[f[p+c]+""],f[p+2]=f[p+2]*100/s[f[p+c]+""]):(f[p+h]=0,f[p+2]=0);l.points=f}}t.hooks.processRawData.push(r),t.hooks.processDatapoints.push(u)}Y.plot.plugins.push({init:e,options:A,name:"stackpercent",version:"0.1"})})(jQuery)},32176:()=>{(function(Y){var A={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}};function e(i,l){return l*Math.floor(i/l)}function t(i,l,f,c){if(typeof i.strftime=="function")return i.strftime(l);var h=function(P,y){return P=""+P,y=""+(y??"0"),P.length==1?y+P:P},p=[],m=!1,a=i.getHours(),v=a<12;f==null&&(f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),c==null&&(c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var E;a>12?E=a-12:a==0?E=12:E=a;for(var D=0;D<l.length;++D){var b=l.charAt(D);if(m){switch(b){case"a":b=""+c[i.getDay()];break;case"b":b=""+f[i.getMonth()];break;case"d":b=h(i.getDate(),"");break;case"e":b=h(i.getDate()," ");break;case"h":case"H":b=h(a);break;case"I":b=h(E);break;case"l":b=h(E," ");break;case"m":b=h(i.getMonth()+1,"");break;case"M":b=h(i.getMinutes());break;case"q":b=""+(Math.floor(i.getMonth()/3)+1);break;case"S":b=h(i.getSeconds());break;case"y":b=h(i.getFullYear()%100);break;case"Y":b=""+i.getFullYear();break;case"p":b=v?"am":"pm";break;case"P":b=v?"AM":"PM";break;case"w":b=""+i.getDay();break}p.push(b),m=!1}else b=="%"?m=!0:p.push(b)}return p.join("")}function n(i){function l(p,m,a,v){p[m]=function(){return a[v].apply(a,arguments)}}var f={date:i};i.strftime!=null&&l(f,"strftime",i,"strftime"),l(f,"getTime",i,"getTime"),l(f,"setTime",i,"setTime");for(var c=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],h=0;h<c.length;h++)l(f,"get"+c[h],i,"getUTC"+c[h]),l(f,"set"+c[h],i,"setUTC"+c[h]);return f}function o(i,l){if(l.timezone=="browser")return new Date(i);if(!l.timezone||l.timezone=="utc")return n(new Date(i));if(typeof timezoneJS<"u"&&typeof timezoneJS.Date<"u"){var f=new timezoneJS.Date;return f.setTimezone(l.timezone),f.setTime(i),f}else return n(new Date(i))}var s={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:30*24*60*60*1e3,quarter:3*30*24*60*60*1e3,year:365.2425*24*60*60*1e3},r=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],g=r.concat([[3,"month"],[6,"month"],[1,"year"]]),u=r.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function d(i){i.hooks.processOptions.push(function(l,f){Y.each(l.getAxes(),function(c,h){var p=h.options;p.mode=="time"&&(h.tickGenerator=function(m){var a=[],v=o(m.min,p),E=0,D=p.tickSize&&p.tickSize[1]==="quarter"||p.minTickSize&&p.minTickSize[1]==="quarter"?u:g;p.minTickSize!=null&&(typeof p.tickSize=="number"?E=p.tickSize:E=p.minTickSize[0]*s[p.minTickSize[1]]);for(var b=0;b<D.length-1&&!(m.delta<(D[b][0]*s[D[b][1]]+D[b+1][0]*s[D[b+1][1]])/2&&D[b][0]*s[D[b][1]]>=E);++b);var P=D[b][0],y=D[b][1];if(y=="year"){if(p.minTickSize!=null&&p.minTickSize[1]=="year")P=Math.floor(p.minTickSize[0]);else{var T=Math.pow(10,Math.floor(Math.log(m.delta/s.year)/Math.LN10)),M=m.delta/s.year/T;M<1.5?P=1:M<3?P=2:M<7.5?P=5:P=10,P*=T}P<1&&(P=1)}m.tickSize=p.tickSize||[P,y];var I=m.tickSize[0];y=m.tickSize[1];var x=I*s[y];y=="second"?v.setSeconds(e(v.getSeconds(),I)):y=="minute"?v.setMinutes(e(v.getMinutes(),I)):y=="hour"?v.setHours(e(v.getHours(),I)):y=="month"?v.setMonth(e(v.getMonth(),I)):y=="quarter"?v.setMonth(3*e(v.getMonth()/3,I)):y=="year"&&v.setFullYear(e(v.getFullYear(),I)),v.setMilliseconds(0),x>=s.minute&&v.setSeconds(0),x>=s.hour&&v.setMinutes(0),x>=s.day&&v.setHours(0),x>=s.day*4&&v.setDate(1),x>=s.month*2&&v.setMonth(e(v.getMonth(),3)),x>=s.quarter*2&&v.setMonth(e(v.getMonth(),6)),x>=s.year&&v.setMonth(0);var S=0,O=Number.NaN,C;do if(C=O,O=v.getTime(),a.push(O),y=="month"||y=="quarter")if(I<1){v.setDate(1);var L=v.getTime();v.setMonth(v.getMonth()+(y=="quarter"?3:1));var U=v.getTime();v.setTime(O+S*s.hour+(U-L)*I),S=v.getHours(),v.setHours(0)}else v.setMonth(v.getMonth()+I*(y=="quarter"?3:1));else y=="year"?v.setFullYear(v.getFullYear()+I):v.setTime(O+x);while(O<m.max&&O!=C);return a},h.tickFormatter=function(m,a){var v=o(m,a.options);if(p.timeformat!=null)return t(v,p.timeformat,p.monthNames,p.dayNames);var E=a.options.tickSize&&a.options.tickSize[1]=="quarter"||a.options.minTickSize&&a.options.minTickSize[1]=="quarter",D=a.tickSize[0]*s[a.tickSize[1]],b=a.max-a.min,P=p.twelveHourClock?" %p":"",y=p.twelveHourClock?"%I":"%H",T;D<s.minute?T=y+":%M:%S"+P:D<s.day?b<2*s.day?T=y+":%M"+P:T="%b %d "+y+":%M"+P:D<s.month?T="%b %d":E&&D<s.quarter||!E&&D<s.year?b<s.year?T="%b":T="%b %Y":E&&D<s.year?b<s.year?T="Q%q":T="Q%q %Y":T="%Y";var M=t(v,T,p.monthNames,p.dayNames);return M})})})}Y.plot.plugins.push({init:d,options:A,name:"time",version:"1.0"}),Y.plot.formatDate=t})(jQuery)}}]);

//# sourceMappingURL=5017.830b14490d17e9cbdabb.js.map